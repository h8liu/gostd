<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5192856">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5192911">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5192965">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5193016">package</span>&nbsp;<span class="ident" id="5193024">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5193033">import</span>&nbsp;<span class="op" id="5193040">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5193043">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5193050">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5193062">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5193068">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="5193075">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193078">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="5193136">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5193194">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="5193255">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="5193266">//</span><br>
<span class="lineno"></span><span class="keyword" id="5193269">type</span>&nbsp;<span class="ident" id="5193274">Error</span>&nbsp;<span class="keyword" id="5193280">struct</span>&nbsp;<span class="op" id="5193287">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5193290">Pos</span>&nbsp;<span class="ident" id="5193294"><a href="/go/scanner/errors.go.html#5193050">token</a></span><span class="op" id="5193299">.</span><span class="ident" id="5193300">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5193310">Msg</span>&nbsp;<span class="builtintype" id="5193314">string</span><br>
<span class="lineno"></span><span class="op" id="5193321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193324">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="5193365">func</span>&nbsp;<span class="op" id="5193370">(</span><span class="ident" id="5193371">e</span>&nbsp;<span class="ident" id="5193373"><a href="/go/scanner/errors.go.html#5193274">Error</a></span><span class="op" id="5193378">)</span>&nbsp;<span class="ident" id="5193380">Error</span><span class="op" id="5193385">(</span><span class="op" id="5193386">)</span>&nbsp;<span class="builtintype" id="5193388">string</span>&nbsp;<span class="op" id="5193395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5193398">if</span>&nbsp;<span class="ident" id="5193401"><a href="/go/scanner/errors.go.html#5193371">e</a></span><span class="op" id="5193402">.</span><span class="ident" id="5193403">Pos</span><span class="op" id="5193406">.</span><span class="ident" id="5193407">Filename</span>&nbsp;<span class="op" id="5193416">!=</span>&nbsp;<span class="string" id="5193419">&#34;&#34;</span>&nbsp;<span class="op" id="5193422">||</span>&nbsp;<span class="ident" id="5193425"><a href="/go/scanner/errors.go.html#5193371">e</a></span><span class="op" id="5193426">.</span><span class="ident" id="5193427">Pos</span><span class="op" id="5193430">.</span><span class="ident" id="5193431">IsValid</span><span class="op" id="5193438">(</span><span class="op" id="5193439">)</span>&nbsp;<span class="op" id="5193441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5193445">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5193483">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5193543">return</span>&nbsp;<span class="ident" id="5193550"><a href="/go/scanner/errors.go.html#5193371">e</a></span><span class="op" id="5193551">.</span><span class="ident" id="5193552">Pos</span><span class="op" id="5193555">.</span><span class="ident" id="5193556">String</span><span class="op" id="5193562">(</span><span class="op" id="5193563">)</span>&nbsp;<span class="op" id="5193565">+</span>&nbsp;<span class="string" id="5193567">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="5193572">+</span>&nbsp;<span class="ident" id="5193574"><a href="/go/scanner/errors.go.html#5193371">e</a></span><span class="op" id="5193575">.</span><span class="ident" id="5193576">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5193581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5193584">return</span>&nbsp;<span class="ident" id="5193591"><a href="/go/scanner/errors.go.html#5193371">e</a></span><span class="op" id="5193592">.</span><span class="ident" id="5193593">Msg</span><br>
<span class="lineno"></span><span class="op" id="5193597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193600">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="5193635">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="5193706">//</span><br>
<span class="lineno"></span><span class="keyword" id="5193709">type</span>&nbsp;<span class="ident" id="5193714">ErrorList</span>&nbsp;<span class="op" id="5193724">[</span><span class="op" id="5193725">]</span><span class="op" id="5193726">*</span><span class="ident" id="5193727"><a href="/go/scanner/errors.go.html#5193274">Error</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193734">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="5193810">func</span>&nbsp;<span class="op" id="5193815">(</span><span class="ident" id="5193816">p</span>&nbsp;<span class="op" id="5193818">*</span><span class="ident" id="5193819"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5193828">)</span>&nbsp;<span class="ident" id="5193830">Add</span><span class="op" id="5193833">(</span><span class="ident" id="5193834">pos</span>&nbsp;<span class="ident" id="5193838"><a href="/go/scanner/errors.go.html#5193050">token</a></span><span class="op" id="5193843">.</span><span class="ident" id="5193844">Position</span><span class="op" id="5193852">,</span>&nbsp;<span class="ident" id="5193854">msg</span>&nbsp;<span class="builtintype" id="5193858">string</span><span class="op" id="5193864">)</span>&nbsp;<span class="op" id="5193866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5193869">*</span><span class="ident" id="5193870"><a href="/go/scanner/errors.go.html#5193816">p</a></span>&nbsp;<span class="op" id="5193872">=</span>&nbsp;<span class="builtinfunc" id="5193874">append</span><span class="op" id="5193880">(</span><span class="op" id="5193881">*</span><span class="ident" id="5193882"><a href="/go/scanner/errors.go.html#5193816">p</a></span><span class="op" id="5193883">,</span>&nbsp;<span class="op" id="5193885">&amp;</span><span class="ident" id="5193886"><a href="/go/scanner/errors.go.html#5193274">Error</a></span><span class="op" id="5193891">{</span><span class="ident" id="5193892"><a href="/go/scanner/errors.go.html#5193834">pos</a></span><span class="op" id="5193895">,</span>&nbsp;<span class="ident" id="5193897"><a href="/go/scanner/errors.go.html#5193854">msg</a></span><span class="op" id="5193900">}</span><span class="op" id="5193901">)</span><br>
<span class="lineno"></span><span class="op" id="5193903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193906">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="5193949">func</span>&nbsp;<span class="op" id="5193954">(</span><span class="ident" id="5193955">p</span>&nbsp;<span class="op" id="5193957">*</span><span class="ident" id="5193958"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5193967">)</span>&nbsp;<span class="ident" id="5193969">Reset</span><span class="op" id="5193974">(</span><span class="op" id="5193975">)</span>&nbsp;<span class="op" id="5193977">{</span>&nbsp;<span class="op" id="5193979">*</span><span class="ident" id="5193980"><a href="/go/scanner/errors.go.html#5193955">p</a></span>&nbsp;<span class="op" id="5193982">=</span>&nbsp;<span class="op" id="5193984">(</span><span class="op" id="5193985">*</span><span class="ident" id="5193986"><a href="/go/scanner/errors.go.html#5193955">p</a></span><span class="op" id="5193987">)</span><span class="op" id="5193988">[</span><span class="num" id="5193989">0</span><span class="op" id="5193990">:</span><span class="num" id="5193991">0</span><span class="op" id="5193992">]</span>&nbsp;<span class="op" id="5193994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193997">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="5194041">func</span>&nbsp;<span class="op" id="5194046">(</span><span class="ident" id="5194047">p</span>&nbsp;<span class="ident" id="5194049"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5194058">)</span>&nbsp;<span class="ident" id="5194060">Len</span><span class="op" id="5194063">(</span><span class="op" id="5194064">)</span>&nbsp;<span class="builtintype" id="5194066">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5194075">{</span>&nbsp;<span class="keyword" id="5194077">return</span>&nbsp;<span class="builtinfunc" id="5194084">len</span><span class="op" id="5194087">(</span><span class="ident" id="5194088"><a href="/go/scanner/errors.go.html#5194047">p</a></span><span class="op" id="5194089">)</span>&nbsp;<span class="op" id="5194091">}</span><br>
<span class="lineno"></span><span class="keyword" id="5194093">func</span>&nbsp;<span class="op" id="5194098">(</span><span class="ident" id="5194099">p</span>&nbsp;<span class="ident" id="5194101"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5194110">)</span>&nbsp;<span class="ident" id="5194112">Swap</span><span class="op" id="5194116">(</span><span class="ident" id="5194117">i</span><span class="op" id="5194118">,</span>&nbsp;<span class="ident" id="5194120">j</span>&nbsp;<span class="builtintype" id="5194122">int</span><span class="op" id="5194125">)</span>&nbsp;<span class="op" id="5194127">{</span>&nbsp;<span class="ident" id="5194129"><a href="/go/scanner/errors.go.html#5194099">p</a></span><span class="op" id="5194130">[</span><span class="ident" id="5194131"><a href="/go/scanner/errors.go.html#5194117">i</a></span><span class="op" id="5194132">]</span><span class="op" id="5194133">,</span>&nbsp;<span class="ident" id="5194135"><a href="/go/scanner/errors.go.html#5194099">p</a></span><span class="op" id="5194136">[</span><span class="ident" id="5194137"><a href="/go/scanner/errors.go.html#5194120">j</a></span><span class="op" id="5194138">]</span>&nbsp;<span class="op" id="5194140">=</span>&nbsp;<span class="ident" id="5194142"><a href="/go/scanner/errors.go.html#5194099">p</a></span><span class="op" id="5194143">[</span><span class="ident" id="5194144"><a href="/go/scanner/errors.go.html#5194120">j</a></span><span class="op" id="5194145">]</span><span class="op" id="5194146">,</span>&nbsp;<span class="ident" id="5194148"><a href="/go/scanner/errors.go.html#5194099">p</a></span><span class="op" id="5194149">[</span><span class="ident" id="5194150"><a href="/go/scanner/errors.go.html#5194117">i</a></span><span class="op" id="5194151">]</span>&nbsp;<span class="op" id="5194153">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5194156">func</span>&nbsp;<span class="op" id="5194161">(</span><span class="ident" id="5194162">p</span>&nbsp;<span class="ident" id="5194164"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5194173">)</span>&nbsp;<span class="ident" id="5194175">Less</span><span class="op" id="5194179">(</span><span class="ident" id="5194180">i</span><span class="op" id="5194181">,</span>&nbsp;<span class="ident" id="5194183">j</span>&nbsp;<span class="builtintype" id="5194185">int</span><span class="op" id="5194188">)</span>&nbsp;<span class="builtintype" id="5194190">bool</span>&nbsp;<span class="op" id="5194195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5194198">e</span>&nbsp;<span class="op" id="5194200">:=</span>&nbsp;<span class="op" id="5194203">&amp;</span><span class="ident" id="5194204"><a href="/go/scanner/errors.go.html#5194162">p</a></span><span class="op" id="5194205">[</span><span class="ident" id="5194206"><a href="/go/scanner/errors.go.html#5194180">i</a></span><span class="op" id="5194207">]</span><span class="op" id="5194208">.</span><span class="ident" id="5194209">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5194214">f</span>&nbsp;<span class="op" id="5194216">:=</span>&nbsp;<span class="op" id="5194219">&amp;</span><span class="ident" id="5194220"><a href="/go/scanner/errors.go.html#5194162">p</a></span><span class="op" id="5194221">[</span><span class="ident" id="5194222"><a href="/go/scanner/errors.go.html#5194183">j</a></span><span class="op" id="5194223">]</span><span class="op" id="5194224">.</span><span class="ident" id="5194225">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5194230">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5194304">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5194377">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194392">if</span>&nbsp;<span class="ident" id="5194395"><a href="/go/scanner/errors.go.html#5194198">e</a></span><span class="op" id="5194396">.</span><span class="ident" id="5194397">Filename</span>&nbsp;<span class="op" id="5194406">&lt;</span>&nbsp;<span class="ident" id="5194408"><a href="/go/scanner/errors.go.html#5194214">f</a></span><span class="op" id="5194409">.</span><span class="ident" id="5194410">Filename</span>&nbsp;<span class="op" id="5194419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194423">return</span>&nbsp;<span class="builtintype" id="5194430">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5194436">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194439">if</span>&nbsp;<span class="ident" id="5194442"><a href="/go/scanner/errors.go.html#5194198">e</a></span><span class="op" id="5194443">.</span><span class="ident" id="5194444">Filename</span>&nbsp;<span class="op" id="5194453">==</span>&nbsp;<span class="ident" id="5194456"><a href="/go/scanner/errors.go.html#5194214">f</a></span><span class="op" id="5194457">.</span><span class="ident" id="5194458">Filename</span>&nbsp;<span class="op" id="5194467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194471">if</span>&nbsp;<span class="ident" id="5194474"><a href="/go/scanner/errors.go.html#5194198">e</a></span><span class="op" id="5194475">.</span><span class="ident" id="5194476">Line</span>&nbsp;<span class="op" id="5194481">&lt;</span>&nbsp;<span class="ident" id="5194483"><a href="/go/scanner/errors.go.html#5194214">f</a></span><span class="op" id="5194484">.</span><span class="ident" id="5194485">Line</span>&nbsp;<span class="op" id="5194490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194495">return</span>&nbsp;<span class="builtintype" id="5194502">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5194509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194513">if</span>&nbsp;<span class="ident" id="5194516"><a href="/go/scanner/errors.go.html#5194198">e</a></span><span class="op" id="5194517">.</span><span class="ident" id="5194518">Line</span>&nbsp;<span class="op" id="5194523">==</span>&nbsp;<span class="ident" id="5194526"><a href="/go/scanner/errors.go.html#5194214">f</a></span><span class="op" id="5194527">.</span><span class="ident" id="5194528">Line</span>&nbsp;<span class="op" id="5194533">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194538">return</span>&nbsp;<span class="ident" id="5194545"><a href="/go/scanner/errors.go.html#5194198">e</a></span><span class="op" id="5194546">.</span><span class="ident" id="5194547">Column</span>&nbsp;<span class="op" id="5194554">&lt;</span>&nbsp;<span class="ident" id="5194556"><a href="/go/scanner/errors.go.html#5194214">f</a></span><span class="op" id="5194557">.</span><span class="ident" id="5194558">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5194567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5194570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194573">return</span>&nbsp;<span class="builtintype" id="5194580">false</span><br>
<span class="lineno"></span><span class="op" id="5194586">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="5194589">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="5194656">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="5194723">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="5194733">//</span><br>
<span class="lineno">75</span><span class="keyword" id="5194736">func</span>&nbsp;<span class="op" id="5194741">(</span><span class="ident" id="5194742">p</span>&nbsp;<span class="ident" id="5194744"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5194753">)</span>&nbsp;<span class="ident" id="5194755">Sort</span><span class="op" id="5194759">(</span><span class="op" id="5194760">)</span>&nbsp;<span class="op" id="5194762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5194765"><a href="/go/scanner/errors.go.html#5193068">sort</a></span><span class="op" id="5194769">.</span><span class="ident" id="5194770">Sort</span><span class="op" id="5194774">(</span><span class="ident" id="5194775"><a href="/go/scanner/errors.go.html#5194742">p</a></span><span class="op" id="5194776">)</span><br>
<span class="lineno"></span><span class="op" id="5194778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5194781">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="5194865">func</span>&nbsp;<span class="op" id="5194870">(</span><span class="ident" id="5194871">p</span>&nbsp;<span class="op" id="5194873">*</span><span class="ident" id="5194874"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5194883">)</span>&nbsp;<span class="ident" id="5194885">RemoveMultiples</span><span class="op" id="5194900">(</span><span class="op" id="5194901">)</span>&nbsp;<span class="op" id="5194903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5194906"><a href="/go/scanner/errors.go.html#5193068">sort</a></span><span class="op" id="5194910">.</span><span class="ident" id="5194911">Sort</span><span class="op" id="5194915">(</span><span class="ident" id="5194916"><a href="/go/scanner/errors.go.html#5194871">p</a></span><span class="op" id="5194917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5194920">var</span>&nbsp;<span class="ident" id="5194924">last</span>&nbsp;<span class="ident" id="5194929"><a href="/go/scanner/errors.go.html#5193050">token</a></span><span class="op" id="5194934">.</span><span class="ident" id="5194935">Position</span>&nbsp;<span class="comment" id="5194944">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5194993">i</span>&nbsp;<span class="op" id="5194995">:=</span>&nbsp;<span class="num" id="5194998">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195001">for</span>&nbsp;<span class="ident" id="5195005">_</span><span class="op" id="5195006">,</span>&nbsp;<span class="ident" id="5195008">e</span>&nbsp;<span class="op" id="5195010">:=</span>&nbsp;<span class="keyword" id="5195013">range</span>&nbsp;<span class="op" id="5195019">*</span><span class="ident" id="5195020"><a href="/go/scanner/errors.go.html#5194871">p</a></span>&nbsp;<span class="op" id="5195022">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195026">if</span>&nbsp;<span class="ident" id="5195029"><a href="/go/scanner/errors.go.html#5195008">e</a></span><span class="op" id="5195030">.</span><span class="ident" id="5195031">Pos</span><span class="op" id="5195034">.</span><span class="ident" id="5195035">Filename</span>&nbsp;<span class="op" id="5195044">!=</span>&nbsp;<span class="ident" id="5195047"><a href="/go/scanner/errors.go.html#5194924">last</a></span><span class="op" id="5195051">.</span><span class="ident" id="5195052">Filename</span>&nbsp;<span class="op" id="5195061">||</span>&nbsp;<span class="ident" id="5195064"><a href="/go/scanner/errors.go.html#5195008">e</a></span><span class="op" id="5195065">.</span><span class="ident" id="5195066">Pos</span><span class="op" id="5195069">.</span><span class="ident" id="5195070">Line</span>&nbsp;<span class="op" id="5195075">!=</span>&nbsp;<span class="ident" id="5195078"><a href="/go/scanner/errors.go.html#5194924">last</a></span><span class="op" id="5195082">.</span><span class="ident" id="5195083">Line</span>&nbsp;<span class="op" id="5195088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5195093"><a href="/go/scanner/errors.go.html#5194924">last</a></span>&nbsp;<span class="op" id="5195098">=</span>&nbsp;<span class="ident" id="5195100"><a href="/go/scanner/errors.go.html#5195008">e</a></span><span class="op" id="5195101">.</span><span class="ident" id="5195102">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195109">(</span><span class="op" id="5195110">*</span><span class="ident" id="5195111"><a href="/go/scanner/errors.go.html#5194871">p</a></span><span class="op" id="5195112">)</span><span class="op" id="5195113">[</span><span class="ident" id="5195114"><a href="/go/scanner/errors.go.html#5194993">i</a></span><span class="op" id="5195115">]</span>&nbsp;<span class="op" id="5195117">=</span>&nbsp;<span class="ident" id="5195119"><a href="/go/scanner/errors.go.html#5195008">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5195124"><a href="/go/scanner/errors.go.html#5194993">i</a></span><span class="op" id="5195125">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195130">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195136">(</span><span class="op" id="5195137">*</span><span class="ident" id="5195138"><a href="/go/scanner/errors.go.html#5194871">p</a></span><span class="op" id="5195139">)</span>&nbsp;<span class="op" id="5195141">=</span>&nbsp;<span class="op" id="5195143">(</span><span class="op" id="5195144">*</span><span class="ident" id="5195145"><a href="/go/scanner/errors.go.html#5194871">p</a></span><span class="op" id="5195146">)</span><span class="op" id="5195147">[</span><span class="num" id="5195148">0</span><span class="op" id="5195149">:</span><span class="ident" id="5195150"><a href="/go/scanner/errors.go.html#5194993">i</a></span><span class="op" id="5195151">]</span><br>
<span class="lineno"></span><span class="op" id="5195153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5195156">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="5195204">func</span>&nbsp;<span class="op" id="5195209">(</span><span class="ident" id="5195210">p</span>&nbsp;<span class="ident" id="5195212"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5195221">)</span>&nbsp;<span class="ident" id="5195223">Error</span><span class="op" id="5195228">(</span><span class="op" id="5195229">)</span>&nbsp;<span class="builtintype" id="5195231">string</span>&nbsp;<span class="op" id="5195238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195241">switch</span>&nbsp;<span class="builtinfunc" id="5195248">len</span><span class="op" id="5195251">(</span><span class="ident" id="5195252"><a href="/go/scanner/errors.go.html#5195210">p</a></span><span class="op" id="5195253">)</span>&nbsp;<span class="op" id="5195255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195258">case</span>&nbsp;<span class="num" id="5195263">0</span><span class="op" id="5195264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195268">return</span>&nbsp;<span class="string" id="5195275">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195288">case</span>&nbsp;<span class="num" id="5195293">1</span><span class="op" id="5195294">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195298">return</span>&nbsp;<span class="ident" id="5195305"><a href="/go/scanner/errors.go.html#5195210">p</a></span><span class="op" id="5195306">[</span><span class="num" id="5195307">0</span><span class="op" id="5195308">]</span><span class="op" id="5195309">.</span><span class="ident" id="5195310">Error</span><span class="op" id="5195315">(</span><span class="op" id="5195316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195322">return</span>&nbsp;<span class="ident" id="5195329"><a href="/go/scanner/errors.go.html#5193043">fmt</a></span><span class="op" id="5195332">.</span><span class="ident" id="5195333">Sprintf</span><span class="op" id="5195340">(</span><span class="string" id="5195341">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="5195366">,</span>&nbsp;<span class="ident" id="5195368"><a href="/go/scanner/errors.go.html#5195210">p</a></span><span class="op" id="5195369">[</span><span class="num" id="5195370">0</span><span class="op" id="5195371">]</span><span class="op" id="5195372">,</span>&nbsp;<span class="builtinfunc" id="5195374">len</span><span class="op" id="5195377">(</span><span class="ident" id="5195378"><a href="/go/scanner/errors.go.html#5195210">p</a></span><span class="op" id="5195379">)</span><span class="op" id="5195380">-</span><span class="num" id="5195381">1</span><span class="op" id="5195382">)</span><br>
<span class="lineno"></span><span class="op" id="5195384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5195387">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="5195442">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5195484">func</span>&nbsp;<span class="op" id="5195489">(</span><span class="ident" id="5195490">p</span>&nbsp;<span class="ident" id="5195492"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5195501">)</span>&nbsp;<span class="ident" id="5195503">Err</span><span class="op" id="5195506">(</span><span class="op" id="5195507">)</span>&nbsp;<span class="builtintype" id="5195509">error</span>&nbsp;<span class="op" id="5195515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195518">if</span>&nbsp;<span class="builtinfunc" id="5195521">len</span><span class="op" id="5195524">(</span><span class="ident" id="5195525"><a href="/go/scanner/errors.go.html#5195490">p</a></span><span class="op" id="5195526">)</span>&nbsp;<span class="op" id="5195528">==</span>&nbsp;<span class="num" id="5195531">0</span>&nbsp;<span class="op" id="5195533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195537">return</span>&nbsp;<span class="ident" id="5195544">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195552">return</span>&nbsp;<span class="ident" id="5195559"><a href="/go/scanner/errors.go.html#5195490">p</a></span><br>
<span class="lineno"></span><span class="op" id="5195561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5195564">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="5195635">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="5195706">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5195735">//</span><br>
<span class="lineno"></span><span class="keyword" id="5195738">func</span>&nbsp;<span class="ident" id="5195743">PrintError</span><span class="op" id="5195753">(</span><span class="ident" id="5195754">w</span>&nbsp;<span class="ident" id="5195756"><a href="/go/scanner/errors.go.html#5193062">io</a></span><span class="op" id="5195758">.</span><span class="ident" id="5195759">Writer</span><span class="op" id="5195765">,</span>&nbsp;<span class="ident" id="5195767">err</span>&nbsp;<span class="builtintype" id="5195771">error</span><span class="op" id="5195776">)</span>&nbsp;<span class="op" id="5195778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195781">if</span>&nbsp;<span class="ident" id="5195784">list</span><span class="op" id="5195788">,</span>&nbsp;<span class="ident" id="5195790">ok</span>&nbsp;<span class="op" id="5195793">:=</span>&nbsp;<span class="ident" id="5195796"><a href="/go/scanner/errors.go.html#5195767">err</a></span><span class="op" id="5195799">.</span><span class="op" id="5195800">(</span><span class="ident" id="5195801"><a href="/go/scanner/errors.go.html#5193714">ErrorList</a></span><span class="op" id="5195810">)</span><span class="op" id="5195811">;</span>&nbsp;<span class="ident" id="5195813"><a href="/go/scanner/errors.go.html#5195790">ok</a></span>&nbsp;<span class="op" id="5195816">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5195820">for</span>&nbsp;<span class="ident" id="5195824">_</span><span class="op" id="5195825">,</span>&nbsp;<span class="ident" id="5195827">e</span>&nbsp;<span class="op" id="5195829">:=</span>&nbsp;<span class="keyword" id="5195832">range</span>&nbsp;<span class="ident" id="5195838"><a href="/go/scanner/errors.go.html#5195784">list</a></span>&nbsp;<span class="op" id="5195843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5195848"><a href="/go/scanner/errors.go.html#5193043">fmt</a></span><span class="op" id="5195851">.</span><span class="ident" id="5195852">Fprintf</span><span class="op" id="5195859">(</span><span class="ident" id="5195860"><a href="/go/scanner/errors.go.html#5195754">w</a></span><span class="op" id="5195861">,</span>&nbsp;<span class="string" id="5195863">&#34;%s\n&#34;</span><span class="op" id="5195869">,</span>&nbsp;<span class="ident" id="5195871"><a href="/go/scanner/errors.go.html#5195827">e</a></span><span class="op" id="5195872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195879">}</span>&nbsp;<span class="keyword" id="5195881">else</span>&nbsp;<span class="keyword" id="5195886">if</span>&nbsp;<span class="ident" id="5195889"><a href="/go/scanner/errors.go.html#5195767">err</a></span>&nbsp;<span class="op" id="5195893">!=</span>&nbsp;<span class="ident" id="5195896">nil</span>&nbsp;<span class="op" id="5195900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5195904"><a href="/go/scanner/errors.go.html#5193043">fmt</a></span><span class="op" id="5195907">.</span><span class="ident" id="5195908">Fprintf</span><span class="op" id="5195915">(</span><span class="ident" id="5195916"><a href="/go/scanner/errors.go.html#5195754">w</a></span><span class="op" id="5195917">,</span>&nbsp;<span class="string" id="5195919">&#34;%s\n&#34;</span><span class="op" id="5195925">,</span>&nbsp;<span class="ident" id="5195927"><a href="/go/scanner/errors.go.html#5195767">err</a></span><span class="op" id="5195930">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5195933">}</span><br>
<span class="lineno"></span><span class="op" id="5195935">}</span>
</div>
</body>
</html>
