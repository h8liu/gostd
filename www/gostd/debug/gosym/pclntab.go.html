<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6350114">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6350170">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6350224">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6350275">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6350298">package</span>&nbsp;<span class="ident" id="6350306">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6350313">import</span>&nbsp;<span class="op" id="6350320">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6350323">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6350342">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6350349">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6350352">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="6350429">//</span><br>
<span class="lineno"></span><span class="comment" id="6350432">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="6350519">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="6350597">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6350675">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6350747">//</span><br>
<span class="lineno"></span><span class="comment" id="6350750">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="6350831">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="6350910">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6350963">//</span><br>
<span class="lineno"></span><span class="comment" id="6350966">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="6351041">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6351116">type</span>&nbsp;<span class="ident" id="6351121">LineTable</span>&nbsp;<span class="keyword" id="6351131">struct</span>&nbsp;<span class="op" id="6351138">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351141">Data</span>&nbsp;<span class="op" id="6351146">[</span><span class="op" id="6351147">]</span><span class="builtintype" id="6351148">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351154">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6351159">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351167">Line</span>&nbsp;<span class="builtintype" id="6351172">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351178">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351195">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6351204">sync</span><span class="op" id="6351208">.</span><span class="ident" id="6351209">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351216">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6351225">int</span>&nbsp;<span class="comment" id="6351229">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351283">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6351292">binary</span><span class="op" id="6351298">.</span><span class="ident" id="6351299">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351310">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="6351319">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351327">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="6351336">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351344">functab</span>&nbsp;&nbsp;<span class="op" id="6351353">[</span><span class="op" id="6351354">]</span><span class="builtintype" id="6351355">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351361">nfunctab</span>&nbsp;<span class="builtintype" id="6351370">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351378">filetab</span>&nbsp;&nbsp;<span class="op" id="6351387">[</span><span class="op" id="6351388">]</span><span class="builtintype" id="6351389">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351395">nfiletab</span>&nbsp;<span class="builtintype" id="6351404">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351412">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="6351421">map</span><span class="op" id="6351424">[</span><span class="builtintype" id="6351425">string</span><span class="op" id="6351431">]</span><span class="builtintype" id="6351432">uint32</span><br>
<span class="lineno">45</span><span class="op" id="6351439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6351442">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="6351513">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="6351578">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="6351652">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="6351663">const</span>&nbsp;<span class="ident" id="6351669">oldQuantum</span>&nbsp;<span class="op" id="6351680">=</span>&nbsp;<span class="num" id="6351682">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6351685">func</span>&nbsp;<span class="op" id="6351690">(</span><span class="ident" id="6351691">t</span>&nbsp;<span class="op" id="6351693">*</span><span class="ident" id="6351694">LineTable</span><span class="op" id="6351703">)</span>&nbsp;<span class="ident" id="6351705">parse</span><span class="op" id="6351710">(</span><span class="ident" id="6351711">targetPC</span>&nbsp;<span class="ident" id="6351720">uint64</span><span class="op" id="6351726">,</span>&nbsp;<span class="ident" id="6351728">targetLine</span>&nbsp;<span class="builtintype" id="6351739">int</span><span class="op" id="6351742">)</span>&nbsp;<span class="op" id="6351744">(</span><span class="ident" id="6351745">b</span>&nbsp;<span class="op" id="6351747">[</span><span class="op" id="6351748">]</span><span class="builtintype" id="6351749">byte</span><span class="op" id="6351753">,</span>&nbsp;<span class="ident" id="6351755">pc</span>&nbsp;<span class="ident" id="6351758">uint64</span><span class="op" id="6351764">,</span>&nbsp;<span class="ident" id="6351766">line</span>&nbsp;<span class="builtintype" id="6351771">int</span><span class="op" id="6351774">)</span>&nbsp;<span class="op" id="6351776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351779">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351836">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351868">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351930">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351987">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6352026">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6352030">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6352093">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352150">b</span><span class="op" id="6352151">,</span>&nbsp;<span class="ident" id="6352153">pc</span><span class="op" id="6352155">,</span>&nbsp;<span class="ident" id="6352157">line</span>&nbsp;<span class="op" id="6352162">=</span>&nbsp;<span class="ident" id="6352164">t</span><span class="op" id="6352165">.</span><span class="ident" id="6352166">Data</span><span class="op" id="6352170">,</span>&nbsp;<span class="ident" id="6352172">t</span><span class="op" id="6352173">.</span><span class="ident" id="6352174">PC</span><span class="op" id="6352176">,</span>&nbsp;<span class="ident" id="6352178">t</span><span class="op" id="6352179">.</span><span class="ident" id="6352180">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352186">for</span>&nbsp;<span class="ident" id="6352190">pc</span>&nbsp;<span class="op" id="6352193">&lt;=</span>&nbsp;<span class="ident" id="6352196">targetPC</span>&nbsp;<span class="op" id="6352205">&amp;&amp;</span>&nbsp;<span class="ident" id="6352208">line</span>&nbsp;<span class="op" id="6352213">!=</span>&nbsp;<span class="ident" id="6352216">targetLine</span>&nbsp;<span class="op" id="6352227">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6352230">len</span><span class="op" id="6352233">(</span><span class="ident" id="6352234">b</span><span class="op" id="6352235">)</span>&nbsp;<span class="op" id="6352237">&gt;</span>&nbsp;<span class="num" id="6352239">0</span>&nbsp;<span class="op" id="6352241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352245">code</span>&nbsp;<span class="op" id="6352250">:=</span>&nbsp;<span class="ident" id="6352253">b</span><span class="op" id="6352254">[</span><span class="num" id="6352255">0</span><span class="op" id="6352256">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352260">b</span>&nbsp;<span class="op" id="6352262">=</span>&nbsp;<span class="ident" id="6352264">b</span><span class="op" id="6352265">[</span><span class="num" id="6352266">1</span><span class="op" id="6352267">:</span><span class="op" id="6352268">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352272">switch</span>&nbsp;<span class="op" id="6352279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352283">case</span>&nbsp;<span class="ident" id="6352288">code</span>&nbsp;<span class="op" id="6352293">==</span>&nbsp;<span class="num" id="6352296">0</span><span class="op" id="6352297">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352302">if</span>&nbsp;<span class="builtinfunc" id="6352305">len</span><span class="op" id="6352308">(</span><span class="ident" id="6352309">b</span><span class="op" id="6352310">)</span>&nbsp;<span class="op" id="6352312">&lt;</span>&nbsp;<span class="num" id="6352314">4</span>&nbsp;<span class="op" id="6352316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352322">b</span>&nbsp;<span class="op" id="6352324">=</span>&nbsp;<span class="ident" id="6352326">b</span><span class="op" id="6352327">[</span><span class="num" id="6352328">0</span><span class="op" id="6352329">:</span><span class="num" id="6352330">0</span><span class="op" id="6352331">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352337">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352351">val</span>&nbsp;<span class="op" id="6352355">:=</span>&nbsp;<span class="ident" id="6352358">binary</span><span class="op" id="6352364">.</span><span class="ident" id="6352365">BigEndian</span><span class="op" id="6352374">.</span><span class="ident" id="6352375">Uint32</span><span class="op" id="6352381">(</span><span class="ident" id="6352382">b</span><span class="op" id="6352383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352388">b</span>&nbsp;<span class="op" id="6352390">=</span>&nbsp;<span class="ident" id="6352392">b</span><span class="op" id="6352393">[</span><span class="num" id="6352394">4</span><span class="op" id="6352395">:</span><span class="op" id="6352396">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352401">line</span>&nbsp;<span class="op" id="6352406">+=</span>&nbsp;<span class="builtintype" id="6352409">int</span><span class="op" id="6352412">(</span><span class="ident" id="6352413">val</span><span class="op" id="6352416">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352420">case</span>&nbsp;<span class="ident" id="6352425">code</span>&nbsp;<span class="op" id="6352430">&lt;=</span>&nbsp;<span class="num" id="6352433">64</span><span class="op" id="6352435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352440">line</span>&nbsp;<span class="op" id="6352445">+=</span>&nbsp;<span class="builtintype" id="6352448">int</span><span class="op" id="6352451">(</span><span class="ident" id="6352452">code</span><span class="op" id="6352456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352460">case</span>&nbsp;<span class="ident" id="6352465">code</span>&nbsp;<span class="op" id="6352470">&lt;=</span>&nbsp;<span class="num" id="6352473">128</span><span class="op" id="6352476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352481">line</span>&nbsp;<span class="op" id="6352486">-=</span>&nbsp;<span class="builtintype" id="6352489">int</span><span class="op" id="6352492">(</span><span class="ident" id="6352493">code</span>&nbsp;<span class="op" id="6352498">-</span>&nbsp;<span class="num" id="6352500">64</span><span class="op" id="6352502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352506">default</span><span class="op" id="6352513">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352518">pc</span>&nbsp;<span class="op" id="6352521">+=</span>&nbsp;<span class="ident" id="6352524">oldQuantum</span>&nbsp;<span class="op" id="6352535">*</span>&nbsp;<span class="ident" id="6352537">uint64</span><span class="op" id="6352543">(</span><span class="ident" id="6352544">code</span><span class="op" id="6352548">-</span><span class="num" id="6352549">128</span><span class="op" id="6352552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352557">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352572">pc</span>&nbsp;<span class="op" id="6352575">+=</span>&nbsp;<span class="ident" id="6352578">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352590">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352593">return</span>&nbsp;<span class="ident" id="6352600">b</span><span class="op" id="6352601">,</span>&nbsp;<span class="ident" id="6352603">pc</span><span class="op" id="6352605">,</span>&nbsp;<span class="ident" id="6352607">line</span><br>
<span class="lineno"></span><span class="op" id="6352612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6352615">func</span>&nbsp;<span class="op" id="6352620">(</span><span class="ident" id="6352621">t</span>&nbsp;<span class="op" id="6352623">*</span><span class="ident" id="6352624">LineTable</span><span class="op" id="6352633">)</span>&nbsp;<span class="ident" id="6352635">slice</span><span class="op" id="6352640">(</span><span class="ident" id="6352641">pc</span>&nbsp;<span class="ident" id="6352644">uint64</span><span class="op" id="6352650">)</span>&nbsp;<span class="op" id="6352652">*</span><span class="ident" id="6352653">LineTable</span>&nbsp;<span class="op" id="6352663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352666">data</span><span class="op" id="6352670">,</span>&nbsp;<span class="ident" id="6352672">pc</span><span class="op" id="6352674">,</span>&nbsp;<span class="ident" id="6352676">line</span>&nbsp;<span class="op" id="6352681">:=</span>&nbsp;<span class="ident" id="6352684">t</span><span class="op" id="6352685">.</span><span class="ident" id="6352686">parse</span><span class="op" id="6352691">(</span><span class="ident" id="6352692">pc</span><span class="op" id="6352694">,</span>&nbsp;<span class="op" id="6352696">-</span><span class="num" id="6352697">1</span><span class="op" id="6352698">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352701">return</span>&nbsp;<span class="op" id="6352708">&amp;</span><span class="ident" id="6352709">LineTable</span><span class="op" id="6352718">{</span><span class="ident" id="6352719">Data</span><span class="op" id="6352723">:</span>&nbsp;<span class="ident" id="6352725">data</span><span class="op" id="6352729">,</span>&nbsp;<span class="ident" id="6352731">PC</span><span class="op" id="6352733">:</span>&nbsp;<span class="ident" id="6352735">pc</span><span class="op" id="6352737">,</span>&nbsp;<span class="ident" id="6352739">Line</span><span class="op" id="6352743">:</span>&nbsp;<span class="ident" id="6352745">line</span><span class="op" id="6352749">}</span><br>
<span class="lineno"></span><span class="op" id="6352751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6352754">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="6352821">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="6352876">func</span>&nbsp;<span class="op" id="6352881">(</span><span class="ident" id="6352882">t</span>&nbsp;<span class="op" id="6352884">*</span><span class="ident" id="6352885">LineTable</span><span class="op" id="6352894">)</span>&nbsp;<span class="ident" id="6352896">PCToLine</span><span class="op" id="6352904">(</span><span class="ident" id="6352905">pc</span>&nbsp;<span class="ident" id="6352908">uint64</span><span class="op" id="6352914">)</span>&nbsp;<span class="builtintype" id="6352916">int</span>&nbsp;<span class="op" id="6352920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352923">if</span>&nbsp;<span class="ident" id="6352926">t</span><span class="op" id="6352927">.</span><span class="ident" id="6352928">isGo12</span><span class="op" id="6352934">(</span><span class="op" id="6352935">)</span>&nbsp;<span class="op" id="6352937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352941">return</span>&nbsp;<span class="ident" id="6352948">t</span><span class="op" id="6352949">.</span><span class="ident" id="6352950">go12PCToLine</span><span class="op" id="6352962">(</span><span class="ident" id="6352963">pc</span><span class="op" id="6352965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352971">_</span><span class="op" id="6352972">,</span>&nbsp;<span class="ident" id="6352974">_</span><span class="op" id="6352975">,</span>&nbsp;<span class="ident" id="6352977">line</span>&nbsp;<span class="op" id="6352982">:=</span>&nbsp;<span class="ident" id="6352985">t</span><span class="op" id="6352986">.</span><span class="ident" id="6352987">parse</span><span class="op" id="6352992">(</span><span class="ident" id="6352993">pc</span><span class="op" id="6352995">,</span>&nbsp;<span class="op" id="6352997">-</span><span class="num" id="6352998">1</span><span class="op" id="6352999">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353002">return</span>&nbsp;<span class="ident" id="6353009">line</span><br>
<span class="lineno"></span><span class="op" id="6353014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6353017">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="6353084">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="6353135">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6353190">func</span>&nbsp;<span class="op" id="6353195">(</span><span class="ident" id="6353196">t</span>&nbsp;<span class="op" id="6353198">*</span><span class="ident" id="6353199">LineTable</span><span class="op" id="6353208">)</span>&nbsp;<span class="ident" id="6353210">LineToPC</span><span class="op" id="6353218">(</span><span class="ident" id="6353219">line</span>&nbsp;<span class="builtintype" id="6353224">int</span><span class="op" id="6353227">,</span>&nbsp;<span class="ident" id="6353229">maxpc</span>&nbsp;<span class="ident" id="6353235">uint64</span><span class="op" id="6353241">)</span>&nbsp;<span class="ident" id="6353243">uint64</span>&nbsp;<span class="op" id="6353250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353253">if</span>&nbsp;<span class="ident" id="6353256">t</span><span class="op" id="6353257">.</span><span class="ident" id="6353258">isGo12</span><span class="op" id="6353264">(</span><span class="op" id="6353265">)</span>&nbsp;<span class="op" id="6353267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353271">return</span>&nbsp;<span class="num" id="6353278">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6353281">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353284">_</span><span class="op" id="6353285">,</span>&nbsp;<span class="ident" id="6353287">pc</span><span class="op" id="6353289">,</span>&nbsp;<span class="ident" id="6353291">line1</span>&nbsp;<span class="op" id="6353297">:=</span>&nbsp;<span class="ident" id="6353300">t</span><span class="op" id="6353301">.</span><span class="ident" id="6353302">parse</span><span class="op" id="6353307">(</span><span class="ident" id="6353308">maxpc</span><span class="op" id="6353313">,</span>&nbsp;<span class="ident" id="6353315">line</span><span class="op" id="6353319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353322">if</span>&nbsp;<span class="ident" id="6353325">line1</span>&nbsp;<span class="op" id="6353331">!=</span>&nbsp;<span class="ident" id="6353334">line</span>&nbsp;<span class="op" id="6353339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353343">return</span>&nbsp;<span class="num" id="6353350">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6353353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353356">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353420">return</span>&nbsp;<span class="ident" id="6353427">pc</span>&nbsp;<span class="op" id="6353430">-</span>&nbsp;<span class="ident" id="6353432">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="6353443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6353446">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="6353490">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="6353528">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6353569">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6353600">func</span>&nbsp;<span class="ident" id="6353605">NewLineTable</span><span class="op" id="6353617">(</span><span class="ident" id="6353618">data</span>&nbsp;<span class="op" id="6353623">[</span><span class="op" id="6353624">]</span><span class="builtintype" id="6353625">byte</span><span class="op" id="6353629">,</span>&nbsp;<span class="ident" id="6353631">text</span>&nbsp;<span class="ident" id="6353636">uint64</span><span class="op" id="6353642">)</span>&nbsp;<span class="op" id="6353644">*</span><span class="ident" id="6353645">LineTable</span>&nbsp;<span class="op" id="6353655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353658">return</span>&nbsp;<span class="op" id="6353665">&amp;</span><span class="ident" id="6353666">LineTable</span><span class="op" id="6353675">{</span><span class="ident" id="6353676">Data</span><span class="op" id="6353680">:</span>&nbsp;<span class="ident" id="6353682">data</span><span class="op" id="6353686">,</span>&nbsp;<span class="ident" id="6353688">PC</span><span class="op" id="6353690">:</span>&nbsp;<span class="ident" id="6353692">text</span><span class="op" id="6353696">,</span>&nbsp;<span class="ident" id="6353698">Line</span><span class="op" id="6353702">:</span>&nbsp;<span class="num" id="6353704">0</span><span class="op" id="6353705">}</span><br>
<span class="lineno"></span><span class="op" id="6353707">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6353710">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="6353741">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="6353773">//</span><br>
<span class="lineno"></span><span class="comment" id="6353776">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="6353843">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6353911">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="6353985">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="6354009">//</span><br>
<span class="lineno"></span><span class="comment" id="6354012">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="6354082">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6354128">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6354196">func</span>&nbsp;<span class="op" id="6354201">(</span><span class="ident" id="6354202">t</span>&nbsp;<span class="op" id="6354204">*</span><span class="ident" id="6354205">LineTable</span><span class="op" id="6354214">)</span>&nbsp;<span class="ident" id="6354216">isGo12</span><span class="op" id="6354222">(</span><span class="op" id="6354223">)</span>&nbsp;<span class="builtintype" id="6354225">bool</span>&nbsp;<span class="op" id="6354230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354233">t</span><span class="op" id="6354234">.</span><span class="ident" id="6354235">go12Init</span><span class="op" id="6354243">(</span><span class="op" id="6354244">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354247">return</span>&nbsp;<span class="ident" id="6354254">t</span><span class="op" id="6354255">.</span><span class="ident" id="6354256">go12</span>&nbsp;<span class="op" id="6354261">==</span>&nbsp;<span class="num" id="6354264">1</span><br>
<span class="lineno"></span><span class="op" id="6354266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6354269">const</span>&nbsp;<span class="ident" id="6354275">go12magic</span>&nbsp;<span class="op" id="6354285">=</span>&nbsp;<span class="num" id="6354287">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6354299">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6354356">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6354413">func</span>&nbsp;<span class="op" id="6354418">(</span><span class="ident" id="6354419">t</span>&nbsp;<span class="op" id="6354421">*</span><span class="ident" id="6354422">LineTable</span><span class="op" id="6354431">)</span>&nbsp;<span class="builtintype" id="6354433">uintptr</span><span class="op" id="6354440">(</span><span class="ident" id="6354441">b</span>&nbsp;<span class="op" id="6354443">[</span><span class="op" id="6354444">]</span><span class="builtintype" id="6354445">byte</span><span class="op" id="6354449">)</span>&nbsp;<span class="ident" id="6354451">uint64</span>&nbsp;<span class="op" id="6354458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354461">if</span>&nbsp;<span class="ident" id="6354464">t</span><span class="op" id="6354465">.</span><span class="ident" id="6354466">ptrsize</span>&nbsp;<span class="op" id="6354474">==</span>&nbsp;<span class="num" id="6354477">4</span>&nbsp;<span class="op" id="6354479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354483">return</span>&nbsp;<span class="ident" id="6354490">uint64</span><span class="op" id="6354496">(</span><span class="ident" id="6354497">t</span><span class="op" id="6354498">.</span><span class="ident" id="6354499">binary</span><span class="op" id="6354505">.</span><span class="ident" id="6354506">Uint32</span><span class="op" id="6354512">(</span><span class="ident" id="6354513">b</span><span class="op" id="6354514">)</span><span class="op" id="6354515">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354521">return</span>&nbsp;<span class="ident" id="6354528">t</span><span class="op" id="6354529">.</span><span class="ident" id="6354530">binary</span><span class="op" id="6354536">.</span><span class="ident" id="6354537">Uint64</span><span class="op" id="6354543">(</span><span class="ident" id="6354544">b</span><span class="op" id="6354545">)</span><br>
<span class="lineno"></span><span class="op" id="6354547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6354550">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="6354625">func</span>&nbsp;<span class="op" id="6354630">(</span><span class="ident" id="6354631">t</span>&nbsp;<span class="op" id="6354633">*</span><span class="ident" id="6354634">LineTable</span><span class="op" id="6354643">)</span>&nbsp;<span class="ident" id="6354645">go12Init</span><span class="op" id="6354653">(</span><span class="op" id="6354654">)</span>&nbsp;<span class="op" id="6354656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354659">t</span><span class="op" id="6354660">.</span><span class="ident" id="6354661">mu</span><span class="op" id="6354663">.</span><span class="ident" id="6354664">Lock</span><span class="op" id="6354668">(</span><span class="op" id="6354669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354672">defer</span>&nbsp;<span class="ident" id="6354678">t</span><span class="op" id="6354679">.</span><span class="ident" id="6354680">mu</span><span class="op" id="6354682">.</span><span class="ident" id="6354683">Unlock</span><span class="op" id="6354689">(</span><span class="op" id="6354690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354693">if</span>&nbsp;<span class="ident" id="6354696">t</span><span class="op" id="6354697">.</span><span class="ident" id="6354698">go12</span>&nbsp;<span class="op" id="6354703">!=</span>&nbsp;<span class="num" id="6354706">0</span>&nbsp;<span class="op" id="6354708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354712">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354724">defer</span>&nbsp;<span class="keyword" id="6354730">func</span><span class="op" id="6354734">(</span><span class="op" id="6354735">)</span>&nbsp;<span class="op" id="6354737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6354741">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6354806">recover</span><span class="op" id="6354813">(</span><span class="op" id="6354814">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354817">}</span><span class="op" id="6354818">(</span><span class="op" id="6354819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6354823">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354892">t</span><span class="op" id="6354893">.</span><span class="ident" id="6354894">go12</span>&nbsp;<span class="op" id="6354899">=</span>&nbsp;<span class="op" id="6354901">-</span><span class="num" id="6354902">1</span>&nbsp;<span class="comment" id="6354904">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354942">if</span>&nbsp;<span class="builtinfunc" id="6354945">len</span><span class="op" id="6354948">(</span><span class="ident" id="6354949">t</span><span class="op" id="6354950">.</span><span class="ident" id="6354951">Data</span><span class="op" id="6354955">)</span>&nbsp;<span class="op" id="6354957">&lt;</span>&nbsp;<span class="num" id="6354959">16</span>&nbsp;<span class="op" id="6354962">||</span>&nbsp;<span class="ident" id="6354965">t</span><span class="op" id="6354966">.</span><span class="ident" id="6354967">Data</span><span class="op" id="6354971">[</span><span class="num" id="6354972">4</span><span class="op" id="6354973">]</span>&nbsp;<span class="op" id="6354975">!=</span>&nbsp;<span class="num" id="6354978">0</span>&nbsp;<span class="op" id="6354980">||</span>&nbsp;<span class="ident" id="6354983">t</span><span class="op" id="6354984">.</span><span class="ident" id="6354985">Data</span><span class="op" id="6354989">[</span><span class="num" id="6354990">5</span><span class="op" id="6354991">]</span>&nbsp;<span class="op" id="6354993">!=</span>&nbsp;<span class="num" id="6354996">0</span>&nbsp;<span class="op" id="6354998">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355003">(</span><span class="ident" id="6355004">t</span><span class="op" id="6355005">.</span><span class="ident" id="6355006">Data</span><span class="op" id="6355010">[</span><span class="num" id="6355011">6</span><span class="op" id="6355012">]</span>&nbsp;<span class="op" id="6355014">!=</span>&nbsp;<span class="num" id="6355017">1</span>&nbsp;<span class="op" id="6355019">&amp;&amp;</span>&nbsp;<span class="ident" id="6355022">t</span><span class="op" id="6355023">.</span><span class="ident" id="6355024">Data</span><span class="op" id="6355028">[</span><span class="num" id="6355029">6</span><span class="op" id="6355030">]</span>&nbsp;<span class="op" id="6355032">!=</span>&nbsp;<span class="num" id="6355035">4</span><span class="op" id="6355036">)</span>&nbsp;<span class="op" id="6355038">||</span>&nbsp;<span class="comment" id="6355041">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355057">(</span><span class="ident" id="6355058">t</span><span class="op" id="6355059">.</span><span class="ident" id="6355060">Data</span><span class="op" id="6355064">[</span><span class="num" id="6355065">7</span><span class="op" id="6355066">]</span>&nbsp;<span class="op" id="6355068">!=</span>&nbsp;<span class="num" id="6355071">4</span>&nbsp;<span class="op" id="6355073">&amp;&amp;</span>&nbsp;<span class="ident" id="6355076">t</span><span class="op" id="6355077">.</span><span class="ident" id="6355078">Data</span><span class="op" id="6355082">[</span><span class="num" id="6355083">7</span><span class="op" id="6355084">]</span>&nbsp;<span class="op" id="6355086">!=</span>&nbsp;<span class="num" id="6355089">8</span><span class="op" id="6355090">)</span>&nbsp;<span class="op" id="6355092">{</span>&nbsp;<span class="comment" id="6355094">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355112">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355124">switch</span>&nbsp;<span class="builtintype" id="6355131">uint32</span><span class="op" id="6355137">(</span><span class="ident" id="6355138">go12magic</span><span class="op" id="6355147">)</span>&nbsp;<span class="op" id="6355149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355152">case</span>&nbsp;<span class="ident" id="6355157">binary</span><span class="op" id="6355163">.</span><span class="ident" id="6355164">LittleEndian</span><span class="op" id="6355176">.</span><span class="ident" id="6355177">Uint32</span><span class="op" id="6355183">(</span><span class="ident" id="6355184">t</span><span class="op" id="6355185">.</span><span class="ident" id="6355186">Data</span><span class="op" id="6355190">)</span><span class="op" id="6355191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355195">t</span><span class="op" id="6355196">.</span><span class="ident" id="6355197">binary</span>&nbsp;<span class="op" id="6355204">=</span>&nbsp;<span class="ident" id="6355206">binary</span><span class="op" id="6355212">.</span><span class="ident" id="6355213">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355227">case</span>&nbsp;<span class="ident" id="6355232">binary</span><span class="op" id="6355238">.</span><span class="ident" id="6355239">BigEndian</span><span class="op" id="6355248">.</span><span class="ident" id="6355249">Uint32</span><span class="op" id="6355255">(</span><span class="ident" id="6355256">t</span><span class="op" id="6355257">.</span><span class="ident" id="6355258">Data</span><span class="op" id="6355262">)</span><span class="op" id="6355263">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355267">t</span><span class="op" id="6355268">.</span><span class="ident" id="6355269">binary</span>&nbsp;<span class="op" id="6355276">=</span>&nbsp;<span class="ident" id="6355278">binary</span><span class="op" id="6355284">.</span><span class="ident" id="6355285">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355296">default</span><span class="op" id="6355303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355307">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355319">t</span><span class="op" id="6355320">.</span><span class="ident" id="6355321">quantum</span>&nbsp;<span class="op" id="6355329">=</span>&nbsp;<span class="builtintype" id="6355331">uint32</span><span class="op" id="6355337">(</span><span class="ident" id="6355338">t</span><span class="op" id="6355339">.</span><span class="ident" id="6355340">Data</span><span class="op" id="6355344">[</span><span class="num" id="6355345">6</span><span class="op" id="6355346">]</span><span class="op" id="6355347">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355350">t</span><span class="op" id="6355351">.</span><span class="ident" id="6355352">ptrsize</span>&nbsp;<span class="op" id="6355360">=</span>&nbsp;<span class="builtintype" id="6355362">uint32</span><span class="op" id="6355368">(</span><span class="ident" id="6355369">t</span><span class="op" id="6355370">.</span><span class="ident" id="6355371">Data</span><span class="op" id="6355375">[</span><span class="num" id="6355376">7</span><span class="op" id="6355377">]</span><span class="op" id="6355378">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355382">t</span><span class="op" id="6355383">.</span><span class="ident" id="6355384">nfunctab</span>&nbsp;<span class="op" id="6355393">=</span>&nbsp;<span class="builtintype" id="6355395">uint32</span><span class="op" id="6355401">(</span><span class="ident" id="6355402">t</span><span class="op" id="6355403">.</span><span class="builtintype" id="6355404">uintptr</span><span class="op" id="6355411">(</span><span class="ident" id="6355412">t</span><span class="op" id="6355413">.</span><span class="ident" id="6355414">Data</span><span class="op" id="6355418">[</span><span class="num" id="6355419">8</span><span class="op" id="6355420">:</span><span class="op" id="6355421">]</span><span class="op" id="6355422">)</span><span class="op" id="6355423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355426">t</span><span class="op" id="6355427">.</span><span class="ident" id="6355428">functab</span>&nbsp;<span class="op" id="6355436">=</span>&nbsp;<span class="ident" id="6355438">t</span><span class="op" id="6355439">.</span><span class="ident" id="6355440">Data</span><span class="op" id="6355444">[</span><span class="num" id="6355445">8</span><span class="op" id="6355446">+</span><span class="ident" id="6355447">t</span><span class="op" id="6355448">.</span><span class="ident" id="6355449">ptrsize</span><span class="op" id="6355456">:</span><span class="op" id="6355457">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355460">functabsize</span>&nbsp;<span class="op" id="6355472">:=</span>&nbsp;<span class="ident" id="6355475">t</span><span class="op" id="6355476">.</span><span class="ident" id="6355477">nfunctab</span><span class="op" id="6355485">*</span><span class="num" id="6355486">2</span><span class="op" id="6355487">*</span><span class="ident" id="6355488">t</span><span class="op" id="6355489">.</span><span class="ident" id="6355490">ptrsize</span>&nbsp;<span class="op" id="6355498">+</span>&nbsp;<span class="ident" id="6355500">t</span><span class="op" id="6355501">.</span><span class="ident" id="6355502">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355511">fileoff</span>&nbsp;<span class="op" id="6355519">:=</span>&nbsp;<span class="ident" id="6355522">t</span><span class="op" id="6355523">.</span><span class="ident" id="6355524">binary</span><span class="op" id="6355530">.</span><span class="ident" id="6355531">Uint32</span><span class="op" id="6355537">(</span><span class="ident" id="6355538">t</span><span class="op" id="6355539">.</span><span class="ident" id="6355540">functab</span><span class="op" id="6355547">[</span><span class="ident" id="6355548">functabsize</span><span class="op" id="6355559">:</span><span class="op" id="6355560">]</span><span class="op" id="6355561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355564">t</span><span class="op" id="6355565">.</span><span class="ident" id="6355566">functab</span>&nbsp;<span class="op" id="6355574">=</span>&nbsp;<span class="ident" id="6355576">t</span><span class="op" id="6355577">.</span><span class="ident" id="6355578">functab</span><span class="op" id="6355585">[</span><span class="op" id="6355586">:</span><span class="ident" id="6355587">functabsize</span><span class="op" id="6355598">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355601">t</span><span class="op" id="6355602">.</span><span class="ident" id="6355603">filetab</span>&nbsp;<span class="op" id="6355611">=</span>&nbsp;<span class="ident" id="6355613">t</span><span class="op" id="6355614">.</span><span class="ident" id="6355615">Data</span><span class="op" id="6355619">[</span><span class="ident" id="6355620">fileoff</span><span class="op" id="6355627">:</span><span class="op" id="6355628">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355631">t</span><span class="op" id="6355632">.</span><span class="ident" id="6355633">nfiletab</span>&nbsp;<span class="op" id="6355642">=</span>&nbsp;<span class="ident" id="6355644">t</span><span class="op" id="6355645">.</span><span class="ident" id="6355646">binary</span><span class="op" id="6355652">.</span><span class="ident" id="6355653">Uint32</span><span class="op" id="6355659">(</span><span class="ident" id="6355660">t</span><span class="op" id="6355661">.</span><span class="ident" id="6355662">filetab</span><span class="op" id="6355669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355672">t</span><span class="op" id="6355673">.</span><span class="ident" id="6355674">filetab</span>&nbsp;<span class="op" id="6355682">=</span>&nbsp;<span class="ident" id="6355684">t</span><span class="op" id="6355685">.</span><span class="ident" id="6355686">filetab</span><span class="op" id="6355693">[</span><span class="op" id="6355694">:</span><span class="ident" id="6355695">t</span><span class="op" id="6355696">.</span><span class="ident" id="6355697">nfiletab</span><span class="op" id="6355705">*</span><span class="num" id="6355706">4</span><span class="op" id="6355707">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355711">t</span><span class="op" id="6355712">.</span><span class="ident" id="6355713">go12</span>&nbsp;<span class="op" id="6355718">=</span>&nbsp;<span class="num" id="6355720">1</span>&nbsp;<span class="comment" id="6355722">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="6355740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6355743">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="6355817">func</span>&nbsp;<span class="op" id="6355822">(</span><span class="ident" id="6355823">t</span>&nbsp;<span class="op" id="6355825">*</span><span class="ident" id="6355826">LineTable</span><span class="op" id="6355835">)</span>&nbsp;<span class="ident" id="6355837">go12Funcs</span><span class="op" id="6355846">(</span><span class="op" id="6355847">)</span>&nbsp;<span class="op" id="6355849">[</span><span class="op" id="6355850">]</span><span class="ident" id="6355851">Func</span>&nbsp;<span class="op" id="6355856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6355859">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355911">defer</span>&nbsp;<span class="keyword" id="6355917">func</span><span class="op" id="6355921">(</span><span class="op" id="6355922">)</span>&nbsp;<span class="op" id="6355924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6355928">recover</span><span class="op" id="6355935">(</span><span class="op" id="6355936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355939">}</span><span class="op" id="6355940">(</span><span class="op" id="6355941">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355945">n</span>&nbsp;<span class="op" id="6355947">:=</span>&nbsp;<span class="builtinfunc" id="6355950">len</span><span class="op" id="6355953">(</span><span class="ident" id="6355954">t</span><span class="op" id="6355955">.</span><span class="ident" id="6355956">functab</span><span class="op" id="6355963">)</span>&nbsp;<span class="op" id="6355965">/</span>&nbsp;<span class="builtintype" id="6355967">int</span><span class="op" id="6355970">(</span><span class="ident" id="6355971">t</span><span class="op" id="6355972">.</span><span class="ident" id="6355973">ptrsize</span><span class="op" id="6355980">)</span>&nbsp;<span class="op" id="6355982">/</span>&nbsp;<span class="num" id="6355984">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355987">funcs</span>&nbsp;<span class="op" id="6355993">:=</span>&nbsp;<span class="builtinfunc" id="6355996">make</span><span class="op" id="6356000">(</span><span class="op" id="6356001">[</span><span class="op" id="6356002">]</span><span class="ident" id="6356003">Func</span><span class="op" id="6356007">,</span>&nbsp;<span class="ident" id="6356009">n</span><span class="op" id="6356010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356013">for</span>&nbsp;<span class="ident" id="6356017">i</span>&nbsp;<span class="op" id="6356019">:=</span>&nbsp;<span class="keyword" id="6356022">range</span>&nbsp;<span class="ident" id="6356028">funcs</span>&nbsp;<span class="op" id="6356034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356038">f</span>&nbsp;<span class="op" id="6356040">:=</span>&nbsp;<span class="op" id="6356043">&amp;</span><span class="ident" id="6356044">funcs</span><span class="op" id="6356049">[</span><span class="ident" id="6356050">i</span><span class="op" id="6356051">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356055">f</span><span class="op" id="6356056">.</span><span class="ident" id="6356057">Entry</span>&nbsp;<span class="op" id="6356063">=</span>&nbsp;<span class="ident" id="6356065">uint64</span><span class="op" id="6356071">(</span><span class="ident" id="6356072">t</span><span class="op" id="6356073">.</span><span class="builtintype" id="6356074">uintptr</span><span class="op" id="6356081">(</span><span class="ident" id="6356082">t</span><span class="op" id="6356083">.</span><span class="ident" id="6356084">functab</span><span class="op" id="6356091">[</span><span class="num" id="6356092">2</span><span class="op" id="6356093">*</span><span class="ident" id="6356094">i</span><span class="op" id="6356095">*</span><span class="builtintype" id="6356096">int</span><span class="op" id="6356099">(</span><span class="ident" id="6356100">t</span><span class="op" id="6356101">.</span><span class="ident" id="6356102">ptrsize</span><span class="op" id="6356109">)</span><span class="op" id="6356110">:</span><span class="op" id="6356111">]</span><span class="op" id="6356112">)</span><span class="op" id="6356113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356117">f</span><span class="op" id="6356118">.</span><span class="ident" id="6356119">End</span>&nbsp;<span class="op" id="6356123">=</span>&nbsp;<span class="ident" id="6356125">uint64</span><span class="op" id="6356131">(</span><span class="ident" id="6356132">t</span><span class="op" id="6356133">.</span><span class="builtintype" id="6356134">uintptr</span><span class="op" id="6356141">(</span><span class="ident" id="6356142">t</span><span class="op" id="6356143">.</span><span class="ident" id="6356144">functab</span><span class="op" id="6356151">[</span><span class="op" id="6356152">(</span><span class="num" id="6356153">2</span><span class="op" id="6356154">*</span><span class="ident" id="6356155">i</span><span class="op" id="6356156">+</span><span class="num" id="6356157">2</span><span class="op" id="6356158">)</span><span class="op" id="6356159">*</span><span class="builtintype" id="6356160">int</span><span class="op" id="6356163">(</span><span class="ident" id="6356164">t</span><span class="op" id="6356165">.</span><span class="ident" id="6356166">ptrsize</span><span class="op" id="6356173">)</span><span class="op" id="6356174">:</span><span class="op" id="6356175">]</span><span class="op" id="6356176">)</span><span class="op" id="6356177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356181">info</span>&nbsp;<span class="op" id="6356186">:=</span>&nbsp;<span class="ident" id="6356189">t</span><span class="op" id="6356190">.</span><span class="ident" id="6356191">Data</span><span class="op" id="6356195">[</span><span class="ident" id="6356196">t</span><span class="op" id="6356197">.</span><span class="builtintype" id="6356198">uintptr</span><span class="op" id="6356205">(</span><span class="ident" id="6356206">t</span><span class="op" id="6356207">.</span><span class="ident" id="6356208">functab</span><span class="op" id="6356215">[</span><span class="op" id="6356216">(</span><span class="num" id="6356217">2</span><span class="op" id="6356218">*</span><span class="ident" id="6356219">i</span><span class="op" id="6356220">+</span><span class="num" id="6356221">1</span><span class="op" id="6356222">)</span><span class="op" id="6356223">*</span><span class="builtintype" id="6356224">int</span><span class="op" id="6356227">(</span><span class="ident" id="6356228">t</span><span class="op" id="6356229">.</span><span class="ident" id="6356230">ptrsize</span><span class="op" id="6356237">)</span><span class="op" id="6356238">:</span><span class="op" id="6356239">]</span><span class="op" id="6356240">)</span><span class="op" id="6356241">:</span><span class="op" id="6356242">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356246">f</span><span class="op" id="6356247">.</span><span class="ident" id="6356248">LineTable</span>&nbsp;<span class="op" id="6356258">=</span>&nbsp;<span class="ident" id="6356260">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356264">f</span><span class="op" id="6356265">.</span><span class="ident" id="6356266">FrameSize</span>&nbsp;<span class="op" id="6356276">=</span>&nbsp;<span class="builtintype" id="6356278">int</span><span class="op" id="6356281">(</span><span class="ident" id="6356282">t</span><span class="op" id="6356283">.</span><span class="ident" id="6356284">binary</span><span class="op" id="6356290">.</span><span class="ident" id="6356291">Uint32</span><span class="op" id="6356297">(</span><span class="ident" id="6356298">info</span><span class="op" id="6356302">[</span><span class="ident" id="6356303">t</span><span class="op" id="6356304">.</span><span class="ident" id="6356305">ptrsize</span><span class="op" id="6356312">+</span><span class="num" id="6356313">2</span><span class="op" id="6356314">*</span><span class="num" id="6356315">4</span><span class="op" id="6356316">:</span><span class="op" id="6356317">]</span><span class="op" id="6356318">)</span><span class="op" id="6356319">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356323">f</span><span class="op" id="6356324">.</span><span class="ident" id="6356325">Sym</span>&nbsp;<span class="op" id="6356329">=</span>&nbsp;<span class="op" id="6356331">&amp;</span><span class="ident" id="6356332">Sym</span><span class="op" id="6356335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356340">Value</span><span class="op" id="6356345">:</span>&nbsp;&nbsp;<span class="ident" id="6356348">f</span><span class="op" id="6356349">.</span><span class="ident" id="6356350">Entry</span><span class="op" id="6356355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356360">Type</span><span class="op" id="6356364">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6356368">&#39;T&#39;</span><span class="op" id="6356371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356376">Name</span><span class="op" id="6356380">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6356384">t</span><span class="op" id="6356385">.</span><span class="builtintype" id="6356386">string</span><span class="op" id="6356392">(</span><span class="ident" id="6356393">t</span><span class="op" id="6356394">.</span><span class="ident" id="6356395">binary</span><span class="op" id="6356401">.</span><span class="ident" id="6356402">Uint32</span><span class="op" id="6356408">(</span><span class="ident" id="6356409">info</span><span class="op" id="6356413">[</span><span class="ident" id="6356414">t</span><span class="op" id="6356415">.</span><span class="ident" id="6356416">ptrsize</span><span class="op" id="6356423">:</span><span class="op" id="6356424">]</span><span class="op" id="6356425">)</span><span class="op" id="6356426">)</span><span class="op" id="6356427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356432">GoType</span><span class="op" id="6356438">:</span>&nbsp;<span class="num" id="6356440">0</span><span class="op" id="6356441">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356446">Func</span><span class="op" id="6356450">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6356454">f</span><span class="op" id="6356455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356465">return</span>&nbsp;<span class="ident" id="6356472">funcs</span><br>
<span class="lineno"></span><span class="op" id="6356478">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6356481">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="6356554">func</span>&nbsp;<span class="op" id="6356559">(</span><span class="ident" id="6356560">t</span>&nbsp;<span class="op" id="6356562">*</span><span class="ident" id="6356563">LineTable</span><span class="op" id="6356572">)</span>&nbsp;<span class="ident" id="6356574">findFunc</span><span class="op" id="6356582">(</span><span class="ident" id="6356583">pc</span>&nbsp;<span class="ident" id="6356586">uint64</span><span class="op" id="6356592">)</span>&nbsp;<span class="op" id="6356594">[</span><span class="op" id="6356595">]</span><span class="builtintype" id="6356596">byte</span>&nbsp;<span class="op" id="6356601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356604">if</span>&nbsp;<span class="ident" id="6356607">pc</span>&nbsp;<span class="op" id="6356610">&lt;</span>&nbsp;<span class="ident" id="6356612">t</span><span class="op" id="6356613">.</span><span class="builtintype" id="6356614">uintptr</span><span class="op" id="6356621">(</span><span class="ident" id="6356622">t</span><span class="op" id="6356623">.</span><span class="ident" id="6356624">functab</span><span class="op" id="6356631">)</span>&nbsp;<span class="op" id="6356633">||</span>&nbsp;<span class="ident" id="6356636">pc</span>&nbsp;<span class="op" id="6356639">&gt;=</span>&nbsp;<span class="ident" id="6356642">t</span><span class="op" id="6356643">.</span><span class="builtintype" id="6356644">uintptr</span><span class="op" id="6356651">(</span><span class="ident" id="6356652">t</span><span class="op" id="6356653">.</span><span class="ident" id="6356654">functab</span><span class="op" id="6356661">[</span><span class="builtinfunc" id="6356662">len</span><span class="op" id="6356665">(</span><span class="ident" id="6356666">t</span><span class="op" id="6356667">.</span><span class="ident" id="6356668">functab</span><span class="op" id="6356675">)</span><span class="op" id="6356676">-</span><span class="builtintype" id="6356677">int</span><span class="op" id="6356680">(</span><span class="ident" id="6356681">t</span><span class="op" id="6356682">.</span><span class="ident" id="6356683">ptrsize</span><span class="op" id="6356690">)</span><span class="op" id="6356691">:</span><span class="op" id="6356692">]</span><span class="op" id="6356693">)</span>&nbsp;<span class="op" id="6356695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356699">return</span>&nbsp;<span class="ident" id="6356706">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356715">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356774">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356839">f</span>&nbsp;<span class="op" id="6356841">:=</span>&nbsp;<span class="ident" id="6356844">t</span><span class="op" id="6356845">.</span><span class="ident" id="6356846">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356855">nf</span>&nbsp;<span class="op" id="6356858">:=</span>&nbsp;<span class="ident" id="6356861">t</span><span class="op" id="6356862">.</span><span class="ident" id="6356863">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356873">for</span>&nbsp;<span class="ident" id="6356877">nf</span>&nbsp;<span class="op" id="6356880">&gt;</span>&nbsp;<span class="num" id="6356882">0</span>&nbsp;<span class="op" id="6356884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356888">m</span>&nbsp;<span class="op" id="6356890">:=</span>&nbsp;<span class="ident" id="6356893">nf</span>&nbsp;<span class="op" id="6356896">/</span>&nbsp;<span class="num" id="6356898">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356902">fm</span>&nbsp;<span class="op" id="6356905">:=</span>&nbsp;<span class="ident" id="6356908">f</span><span class="op" id="6356909">[</span><span class="num" id="6356910">2</span><span class="op" id="6356911">*</span><span class="ident" id="6356912">t</span><span class="op" id="6356913">.</span><span class="ident" id="6356914">ptrsize</span><span class="op" id="6356921">*</span><span class="ident" id="6356922">m</span><span class="op" id="6356923">:</span><span class="op" id="6356924">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356928">if</span>&nbsp;<span class="ident" id="6356931">t</span><span class="op" id="6356932">.</span><span class="builtintype" id="6356933">uintptr</span><span class="op" id="6356940">(</span><span class="ident" id="6356941">fm</span><span class="op" id="6356943">)</span>&nbsp;<span class="op" id="6356945">&lt;=</span>&nbsp;<span class="ident" id="6356948">pc</span>&nbsp;<span class="op" id="6356951">&amp;&amp;</span>&nbsp;<span class="ident" id="6356954">pc</span>&nbsp;<span class="op" id="6356957">&lt;</span>&nbsp;<span class="ident" id="6356959">t</span><span class="op" id="6356960">.</span><span class="builtintype" id="6356961">uintptr</span><span class="op" id="6356968">(</span><span class="ident" id="6356969">fm</span><span class="op" id="6356971">[</span><span class="num" id="6356972">2</span><span class="op" id="6356973">*</span><span class="ident" id="6356974">t</span><span class="op" id="6356975">.</span><span class="ident" id="6356976">ptrsize</span><span class="op" id="6356983">:</span><span class="op" id="6356984">]</span><span class="op" id="6356985">)</span>&nbsp;<span class="op" id="6356987">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356992">return</span>&nbsp;<span class="ident" id="6356999">t</span><span class="op" id="6357000">.</span><span class="ident" id="6357001">Data</span><span class="op" id="6357005">[</span><span class="ident" id="6357006">t</span><span class="op" id="6357007">.</span><span class="builtintype" id="6357008">uintptr</span><span class="op" id="6357015">(</span><span class="ident" id="6357016">fm</span><span class="op" id="6357018">[</span><span class="ident" id="6357019">t</span><span class="op" id="6357020">.</span><span class="ident" id="6357021">ptrsize</span><span class="op" id="6357028">:</span><span class="op" id="6357029">]</span><span class="op" id="6357030">)</span><span class="op" id="6357031">:</span><span class="op" id="6357032">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357036">}</span>&nbsp;<span class="keyword" id="6357038">else</span>&nbsp;<span class="keyword" id="6357043">if</span>&nbsp;<span class="ident" id="6357046">pc</span>&nbsp;<span class="op" id="6357049">&lt;</span>&nbsp;<span class="ident" id="6357051">t</span><span class="op" id="6357052">.</span><span class="builtintype" id="6357053">uintptr</span><span class="op" id="6357060">(</span><span class="ident" id="6357061">fm</span><span class="op" id="6357063">)</span>&nbsp;<span class="op" id="6357065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357070">nf</span>&nbsp;<span class="op" id="6357073">=</span>&nbsp;<span class="ident" id="6357075">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357079">}</span>&nbsp;<span class="keyword" id="6357081">else</span>&nbsp;<span class="op" id="6357086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357091">f</span>&nbsp;<span class="op" id="6357093">=</span>&nbsp;<span class="ident" id="6357095">f</span><span class="op" id="6357096">[</span><span class="op" id="6357097">(</span><span class="ident" id="6357098">m</span><span class="op" id="6357099">+</span><span class="num" id="6357100">1</span><span class="op" id="6357101">)</span><span class="op" id="6357102">*</span><span class="num" id="6357103">2</span><span class="op" id="6357104">*</span><span class="ident" id="6357105">t</span><span class="op" id="6357106">.</span><span class="ident" id="6357107">ptrsize</span><span class="op" id="6357114">:</span><span class="op" id="6357115">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357120">nf</span>&nbsp;<span class="op" id="6357123">-=</span>&nbsp;<span class="ident" id="6357126">m</span>&nbsp;<span class="op" id="6357128">+</span>&nbsp;<span class="num" id="6357130">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357140">return</span>&nbsp;<span class="ident" id="6357147">nil</span><br>
<span class="lineno"></span><span class="op" id="6357151">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6357154">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="6357215">func</span>&nbsp;<span class="op" id="6357220">(</span><span class="ident" id="6357221">t</span>&nbsp;<span class="op" id="6357223">*</span><span class="ident" id="6357224">LineTable</span><span class="op" id="6357233">)</span>&nbsp;<span class="ident" id="6357235">readvarint</span><span class="op" id="6357245">(</span><span class="ident" id="6357246">pp</span>&nbsp;<span class="op" id="6357249">*</span><span class="op" id="6357250">[</span><span class="op" id="6357251">]</span><span class="builtintype" id="6357252">byte</span><span class="op" id="6357256">)</span>&nbsp;<span class="builtintype" id="6357258">uint32</span>&nbsp;<span class="op" id="6357265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357268">var</span>&nbsp;<span class="ident" id="6357272">v</span><span class="op" id="6357273">,</span>&nbsp;<span class="ident" id="6357275">shift</span>&nbsp;<span class="builtintype" id="6357281">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357289">p</span>&nbsp;<span class="op" id="6357291">:=</span>&nbsp;<span class="op" id="6357294">*</span><span class="ident" id="6357295">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357299">for</span>&nbsp;<span class="ident" id="6357303">shift</span>&nbsp;<span class="op" id="6357309">=</span>&nbsp;<span class="num" id="6357311">0</span><span class="op" id="6357312">;</span>&nbsp;<span class="op" id="6357314">;</span>&nbsp;<span class="ident" id="6357316">shift</span>&nbsp;<span class="op" id="6357322">+=</span>&nbsp;<span class="num" id="6357325">7</span>&nbsp;<span class="op" id="6357327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357331">b</span>&nbsp;<span class="op" id="6357333">:=</span>&nbsp;<span class="ident" id="6357336">p</span><span class="op" id="6357337">[</span><span class="num" id="6357338">0</span><span class="op" id="6357339">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357343">p</span>&nbsp;<span class="op" id="6357345">=</span>&nbsp;<span class="ident" id="6357347">p</span><span class="op" id="6357348">[</span><span class="num" id="6357349">1</span><span class="op" id="6357350">:</span><span class="op" id="6357351">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357355">v</span>&nbsp;<span class="op" id="6357357">|=</span>&nbsp;<span class="op" id="6357360">(</span><span class="builtintype" id="6357361">uint32</span><span class="op" id="6357367">(</span><span class="ident" id="6357368">b</span><span class="op" id="6357369">)</span>&nbsp;<span class="op" id="6357371">&amp;</span>&nbsp;<span class="num" id="6357373">0x7F</span><span class="op" id="6357377">)</span>&nbsp;<span class="op" id="6357379">&lt;&lt;</span>&nbsp;<span class="ident" id="6357382">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357390">if</span>&nbsp;<span class="ident" id="6357393">b</span><span class="op" id="6357394">&amp;</span><span class="num" id="6357395">0x80</span>&nbsp;<span class="op" id="6357400">==</span>&nbsp;<span class="num" id="6357403">0</span>&nbsp;<span class="op" id="6357405">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357410">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357424">*</span><span class="ident" id="6357425">pp</span>&nbsp;<span class="op" id="6357428">=</span>&nbsp;<span class="ident" id="6357430">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357433">return</span>&nbsp;<span class="ident" id="6357440">v</span><br>
<span class="lineno">265</span><span class="op" id="6357442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6357445">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="6357489">func</span>&nbsp;<span class="op" id="6357494">(</span><span class="ident" id="6357495">t</span>&nbsp;<span class="op" id="6357497">*</span><span class="ident" id="6357498">LineTable</span><span class="op" id="6357507">)</span>&nbsp;<span class="builtintype" id="6357509">string</span><span class="op" id="6357515">(</span><span class="ident" id="6357516">off</span>&nbsp;<span class="builtintype" id="6357520">uint32</span><span class="op" id="6357526">)</span>&nbsp;<span class="builtintype" id="6357528">string</span>&nbsp;<span class="op" id="6357535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357538">for</span>&nbsp;<span class="ident" id="6357542">i</span>&nbsp;<span class="op" id="6357544">:=</span>&nbsp;<span class="ident" id="6357547">off</span><span class="op" id="6357550">;</span>&nbsp;<span class="op" id="6357552">;</span>&nbsp;<span class="ident" id="6357554">i</span><span class="op" id="6357555">++</span>&nbsp;<span class="op" id="6357558">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357562">if</span>&nbsp;<span class="ident" id="6357565">t</span><span class="op" id="6357566">.</span><span class="ident" id="6357567">Data</span><span class="op" id="6357571">[</span><span class="ident" id="6357572">i</span><span class="op" id="6357573">]</span>&nbsp;<span class="op" id="6357575">==</span>&nbsp;<span class="num" id="6357578">0</span>&nbsp;<span class="op" id="6357580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357585">return</span>&nbsp;<span class="builtintype" id="6357592">string</span><span class="op" id="6357598">(</span><span class="ident" id="6357599">t</span><span class="op" id="6357600">.</span><span class="ident" id="6357601">Data</span><span class="op" id="6357605">[</span><span class="ident" id="6357606">off</span><span class="op" id="6357609">:</span><span class="ident" id="6357610">i</span><span class="op" id="6357611">]</span><span class="op" id="6357612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357619">}</span><br>
<span class="lineno"></span><span class="op" id="6357621">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6357624">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6357690">func</span>&nbsp;<span class="op" id="6357695">(</span><span class="ident" id="6357696">t</span>&nbsp;<span class="op" id="6357698">*</span><span class="ident" id="6357699">LineTable</span><span class="op" id="6357708">)</span>&nbsp;<span class="ident" id="6357710">step</span><span class="op" id="6357714">(</span><span class="ident" id="6357715">p</span>&nbsp;<span class="op" id="6357717">*</span><span class="op" id="6357718">[</span><span class="op" id="6357719">]</span><span class="builtintype" id="6357720">byte</span><span class="op" id="6357724">,</span>&nbsp;<span class="ident" id="6357726">pc</span>&nbsp;<span class="op" id="6357729">*</span><span class="ident" id="6357730">uint64</span><span class="op" id="6357736">,</span>&nbsp;<span class="ident" id="6357738">val</span>&nbsp;<span class="op" id="6357742">*</span><span class="builtintype" id="6357743">int32</span><span class="op" id="6357748">,</span>&nbsp;<span class="ident" id="6357750">first</span>&nbsp;<span class="builtintype" id="6357756">bool</span><span class="op" id="6357760">)</span>&nbsp;<span class="builtintype" id="6357762">bool</span>&nbsp;<span class="op" id="6357767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357770">uvdelta</span>&nbsp;<span class="op" id="6357778">:=</span>&nbsp;<span class="ident" id="6357781">t</span><span class="op" id="6357782">.</span><span class="ident" id="6357783">readvarint</span><span class="op" id="6357793">(</span><span class="ident" id="6357794">p</span><span class="op" id="6357795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357798">if</span>&nbsp;<span class="ident" id="6357801">uvdelta</span>&nbsp;<span class="op" id="6357809">==</span>&nbsp;<span class="num" id="6357812">0</span>&nbsp;<span class="op" id="6357814">&amp;&amp;</span>&nbsp;<span class="op" id="6357817">!</span><span class="ident" id="6357818">first</span>&nbsp;<span class="op" id="6357824">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357828">return</span>&nbsp;<span class="builtintype" id="6357835">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357845">if</span>&nbsp;<span class="ident" id="6357848">uvdelta</span><span class="op" id="6357855">&amp;</span><span class="num" id="6357856">1</span>&nbsp;<span class="op" id="6357858">!=</span>&nbsp;<span class="num" id="6357861">0</span>&nbsp;<span class="op" id="6357863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357867">uvdelta</span>&nbsp;<span class="op" id="6357875">=</span>&nbsp;<span class="op" id="6357877">^</span><span class="op" id="6357878">(</span><span class="ident" id="6357879">uvdelta</span>&nbsp;<span class="op" id="6357887">&gt;&gt;</span>&nbsp;<span class="num" id="6357890">1</span><span class="op" id="6357891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357894">}</span>&nbsp;<span class="keyword" id="6357896">else</span>&nbsp;<span class="op" id="6357901">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357905">uvdelta</span>&nbsp;<span class="op" id="6357913">&gt;&gt;=</span>&nbsp;<span class="num" id="6357917">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357923">vdelta</span>&nbsp;<span class="op" id="6357930">:=</span>&nbsp;<span class="builtintype" id="6357933">int32</span><span class="op" id="6357938">(</span><span class="ident" id="6357939">uvdelta</span><span class="op" id="6357946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6357949">pcdelta</span>&nbsp;<span class="op" id="6357957">:=</span>&nbsp;<span class="ident" id="6357960">t</span><span class="op" id="6357961">.</span><span class="ident" id="6357962">readvarint</span><span class="op" id="6357972">(</span><span class="ident" id="6357973">p</span><span class="op" id="6357974">)</span>&nbsp;<span class="op" id="6357976">*</span>&nbsp;<span class="ident" id="6357978">t</span><span class="op" id="6357979">.</span><span class="ident" id="6357980">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6357989">*</span><span class="ident" id="6357990">pc</span>&nbsp;<span class="op" id="6357993">+=</span>&nbsp;<span class="ident" id="6357996">uint64</span><span class="op" id="6358002">(</span><span class="ident" id="6358003">pcdelta</span><span class="op" id="6358010">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358013">*</span><span class="ident" id="6358014">val</span>&nbsp;<span class="op" id="6358018">+=</span>&nbsp;<span class="ident" id="6358021">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358029">return</span>&nbsp;<span class="builtintype" id="6358036">true</span><br>
<span class="lineno"></span><span class="op" id="6358041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6358044">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="6358104">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="6358165">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6358226">func</span>&nbsp;<span class="op" id="6358231">(</span><span class="ident" id="6358232">t</span>&nbsp;<span class="op" id="6358234">*</span><span class="ident" id="6358235">LineTable</span><span class="op" id="6358244">)</span>&nbsp;<span class="ident" id="6358246">pcvalue</span><span class="op" id="6358253">(</span><span class="ident" id="6358254">off</span>&nbsp;<span class="builtintype" id="6358258">uint32</span><span class="op" id="6358264">,</span>&nbsp;<span class="ident" id="6358266">entry</span><span class="op" id="6358271">,</span>&nbsp;<span class="ident" id="6358273">targetpc</span>&nbsp;<span class="ident" id="6358282">uint64</span><span class="op" id="6358288">)</span>&nbsp;<span class="builtintype" id="6358290">int32</span>&nbsp;<span class="op" id="6358296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358299">if</span>&nbsp;<span class="ident" id="6358302">off</span>&nbsp;<span class="op" id="6358306">==</span>&nbsp;<span class="num" id="6358309">0</span>&nbsp;<span class="op" id="6358311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358315">return</span>&nbsp;<span class="op" id="6358322">-</span><span class="num" id="6358323">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358329">p</span>&nbsp;<span class="op" id="6358331">:=</span>&nbsp;<span class="ident" id="6358334">t</span><span class="op" id="6358335">.</span><span class="ident" id="6358336">Data</span><span class="op" id="6358340">[</span><span class="ident" id="6358341">off</span><span class="op" id="6358344">:</span><span class="op" id="6358345">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358349">val</span>&nbsp;<span class="op" id="6358353">:=</span>&nbsp;<span class="builtintype" id="6358356">int32</span><span class="op" id="6358361">(</span><span class="op" id="6358362">-</span><span class="num" id="6358363">1</span><span class="op" id="6358364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358367">pc</span>&nbsp;<span class="op" id="6358370">:=</span>&nbsp;<span class="ident" id="6358373">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358380">for</span>&nbsp;<span class="ident" id="6358384">t</span><span class="op" id="6358385">.</span><span class="ident" id="6358386">step</span><span class="op" id="6358390">(</span><span class="op" id="6358391">&amp;</span><span class="ident" id="6358392">p</span><span class="op" id="6358393">,</span>&nbsp;<span class="op" id="6358395">&amp;</span><span class="ident" id="6358396">pc</span><span class="op" id="6358398">,</span>&nbsp;<span class="op" id="6358400">&amp;</span><span class="ident" id="6358401">val</span><span class="op" id="6358404">,</span>&nbsp;<span class="ident" id="6358406">pc</span>&nbsp;<span class="op" id="6358409">==</span>&nbsp;<span class="ident" id="6358412">entry</span><span class="op" id="6358417">)</span>&nbsp;<span class="op" id="6358419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358423">if</span>&nbsp;<span class="ident" id="6358426">targetpc</span>&nbsp;<span class="op" id="6358435">&lt;</span>&nbsp;<span class="ident" id="6358437">pc</span>&nbsp;<span class="op" id="6358440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358445">return</span>&nbsp;<span class="ident" id="6358452">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358461">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358464">return</span>&nbsp;<span class="op" id="6358471">-</span><span class="num" id="6358472">1</span><br>
<span class="lineno"></span><span class="op" id="6358474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6358477">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6358540">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="6358596">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="6358665">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6358736">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6358811">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="6358888">func</span>&nbsp;<span class="op" id="6358893">(</span><span class="ident" id="6358894">t</span>&nbsp;<span class="op" id="6358896">*</span><span class="ident" id="6358897">LineTable</span><span class="op" id="6358906">)</span>&nbsp;<span class="ident" id="6358908">findFileLine</span><span class="op" id="6358920">(</span><span class="ident" id="6358921">entry</span>&nbsp;<span class="ident" id="6358927">uint64</span><span class="op" id="6358933">,</span>&nbsp;<span class="ident" id="6358935">filetab</span><span class="op" id="6358942">,</span>&nbsp;<span class="ident" id="6358944">linetab</span>&nbsp;<span class="builtintype" id="6358952">uint32</span><span class="op" id="6358958">,</span>&nbsp;<span class="ident" id="6358960">filenum</span><span class="op" id="6358967">,</span>&nbsp;<span class="ident" id="6358969">line</span>&nbsp;<span class="builtintype" id="6358974">int32</span><span class="op" id="6358979">)</span>&nbsp;<span class="ident" id="6358981">uint64</span>&nbsp;<span class="op" id="6358988">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358991">if</span>&nbsp;<span class="ident" id="6358994">filetab</span>&nbsp;<span class="op" id="6359002">==</span>&nbsp;<span class="num" id="6359005">0</span>&nbsp;<span class="op" id="6359007">||</span>&nbsp;<span class="ident" id="6359010">linetab</span>&nbsp;<span class="op" id="6359018">==</span>&nbsp;<span class="num" id="6359021">0</span>&nbsp;<span class="op" id="6359023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359027">return</span>&nbsp;<span class="num" id="6359034">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359041">fp</span>&nbsp;<span class="op" id="6359044">:=</span>&nbsp;<span class="ident" id="6359047">t</span><span class="op" id="6359048">.</span><span class="ident" id="6359049">Data</span><span class="op" id="6359053">[</span><span class="ident" id="6359054">filetab</span><span class="op" id="6359061">:</span><span class="op" id="6359062">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359065">fl</span>&nbsp;<span class="op" id="6359068">:=</span>&nbsp;<span class="ident" id="6359071">t</span><span class="op" id="6359072">.</span><span class="ident" id="6359073">Data</span><span class="op" id="6359077">[</span><span class="ident" id="6359078">linetab</span><span class="op" id="6359085">:</span><span class="op" id="6359086">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359089">fileVal</span>&nbsp;<span class="op" id="6359097">:=</span>&nbsp;<span class="builtintype" id="6359100">int32</span><span class="op" id="6359105">(</span><span class="op" id="6359106">-</span><span class="num" id="6359107">1</span><span class="op" id="6359108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359111">filePC</span>&nbsp;<span class="op" id="6359118">:=</span>&nbsp;<span class="ident" id="6359121">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359128">lineVal</span>&nbsp;<span class="op" id="6359136">:=</span>&nbsp;<span class="builtintype" id="6359139">int32</span><span class="op" id="6359144">(</span><span class="op" id="6359145">-</span><span class="num" id="6359146">1</span><span class="op" id="6359147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359150">linePC</span>&nbsp;<span class="op" id="6359157">:=</span>&nbsp;<span class="ident" id="6359160">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359167">fileStartPC</span>&nbsp;<span class="op" id="6359179">:=</span>&nbsp;<span class="ident" id="6359182">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359190">for</span>&nbsp;<span class="ident" id="6359194">t</span><span class="op" id="6359195">.</span><span class="ident" id="6359196">step</span><span class="op" id="6359200">(</span><span class="op" id="6359201">&amp;</span><span class="ident" id="6359202">fp</span><span class="op" id="6359204">,</span>&nbsp;<span class="op" id="6359206">&amp;</span><span class="ident" id="6359207">filePC</span><span class="op" id="6359213">,</span>&nbsp;<span class="op" id="6359215">&amp;</span><span class="ident" id="6359216">fileVal</span><span class="op" id="6359223">,</span>&nbsp;<span class="ident" id="6359225">filePC</span>&nbsp;<span class="op" id="6359232">==</span>&nbsp;<span class="ident" id="6359235">entry</span><span class="op" id="6359240">)</span>&nbsp;<span class="op" id="6359242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359246">if</span>&nbsp;<span class="ident" id="6359249">fileVal</span>&nbsp;<span class="op" id="6359257">==</span>&nbsp;<span class="ident" id="6359260">filenum</span>&nbsp;<span class="op" id="6359268">&amp;&amp;</span>&nbsp;<span class="ident" id="6359271">fileStartPC</span>&nbsp;<span class="op" id="6359283">&lt;</span>&nbsp;<span class="ident" id="6359285">filePC</span>&nbsp;<span class="op" id="6359292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359297">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359354">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359413">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359471">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359503">lineStartPC</span>&nbsp;<span class="op" id="6359515">:=</span>&nbsp;<span class="ident" id="6359518">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359528">for</span>&nbsp;<span class="ident" id="6359532">linePC</span>&nbsp;<span class="op" id="6359539">&lt;</span>&nbsp;<span class="ident" id="6359541">filePC</span>&nbsp;<span class="op" id="6359548">&amp;&amp;</span>&nbsp;<span class="ident" id="6359551">t</span><span class="op" id="6359552">.</span><span class="ident" id="6359553">step</span><span class="op" id="6359557">(</span><span class="op" id="6359558">&amp;</span><span class="ident" id="6359559">fl</span><span class="op" id="6359561">,</span>&nbsp;<span class="op" id="6359563">&amp;</span><span class="ident" id="6359564">linePC</span><span class="op" id="6359570">,</span>&nbsp;<span class="op" id="6359572">&amp;</span><span class="ident" id="6359573">lineVal</span><span class="op" id="6359580">,</span>&nbsp;<span class="ident" id="6359582">linePC</span>&nbsp;<span class="op" id="6359589">==</span>&nbsp;<span class="ident" id="6359592">entry</span><span class="op" id="6359597">)</span>&nbsp;<span class="op" id="6359599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359605">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359673">if</span>&nbsp;<span class="ident" id="6359676">lineVal</span>&nbsp;<span class="op" id="6359684">==</span>&nbsp;<span class="ident" id="6359687">line</span>&nbsp;<span class="op" id="6359692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359699">if</span>&nbsp;<span class="ident" id="6359702">fileStartPC</span>&nbsp;<span class="op" id="6359714">&lt;=</span>&nbsp;<span class="ident" id="6359717">lineStartPC</span>&nbsp;<span class="op" id="6359729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359737">return</span>&nbsp;<span class="ident" id="6359744">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359768">if</span>&nbsp;<span class="ident" id="6359771">fileStartPC</span>&nbsp;<span class="op" id="6359783">&lt;</span>&nbsp;<span class="ident" id="6359785">linePC</span>&nbsp;<span class="op" id="6359792">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359800">return</span>&nbsp;<span class="ident" id="6359807">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359836">lineStartPC</span>&nbsp;<span class="op" id="6359848">=</span>&nbsp;<span class="ident" id="6359850">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359860">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359868">fileStartPC</span>&nbsp;<span class="op" id="6359880">=</span>&nbsp;<span class="ident" id="6359882">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359893">return</span>&nbsp;<span class="num" id="6359900">0</span><br>
<span class="lineno"></span><span class="op" id="6359902">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="6359905">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6359984">func</span>&nbsp;<span class="op" id="6359989">(</span><span class="ident" id="6359990">t</span>&nbsp;<span class="op" id="6359992">*</span><span class="ident" id="6359993">LineTable</span><span class="op" id="6360002">)</span>&nbsp;<span class="ident" id="6360004">go12PCToLine</span><span class="op" id="6360016">(</span><span class="ident" id="6360017">pc</span>&nbsp;<span class="ident" id="6360020">uint64</span><span class="op" id="6360026">)</span>&nbsp;<span class="op" id="6360028">(</span><span class="ident" id="6360029">line</span>&nbsp;<span class="builtintype" id="6360034">int</span><span class="op" id="6360037">)</span>&nbsp;<span class="op" id="6360039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360042">defer</span>&nbsp;<span class="keyword" id="6360048">func</span><span class="op" id="6360052">(</span><span class="op" id="6360053">)</span>&nbsp;<span class="op" id="6360055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360059">if</span>&nbsp;<span class="builtinfunc" id="6360062">recover</span><span class="op" id="6360069">(</span><span class="op" id="6360070">)</span>&nbsp;<span class="op" id="6360072">!=</span>&nbsp;<span class="ident" id="6360075">nil</span>&nbsp;<span class="op" id="6360079">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360084">line</span>&nbsp;<span class="op" id="6360089">=</span>&nbsp;<span class="op" id="6360091">-</span><span class="num" id="6360092">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360099">}</span><span class="op" id="6360100">(</span><span class="op" id="6360101">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360105">f</span>&nbsp;<span class="op" id="6360107">:=</span>&nbsp;<span class="ident" id="6360110">t</span><span class="op" id="6360111">.</span><span class="ident" id="6360112">findFunc</span><span class="op" id="6360120">(</span><span class="ident" id="6360121">pc</span><span class="op" id="6360123">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360126">if</span>&nbsp;<span class="ident" id="6360129">f</span>&nbsp;<span class="op" id="6360131">==</span>&nbsp;<span class="ident" id="6360134">nil</span>&nbsp;<span class="op" id="6360138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360142">return</span>&nbsp;<span class="op" id="6360149">-</span><span class="num" id="6360150">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360156">entry</span>&nbsp;<span class="op" id="6360162">:=</span>&nbsp;<span class="ident" id="6360165">t</span><span class="op" id="6360166">.</span><span class="builtintype" id="6360167">uintptr</span><span class="op" id="6360174">(</span><span class="ident" id="6360175">f</span><span class="op" id="6360176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360179">linetab</span>&nbsp;<span class="op" id="6360187">:=</span>&nbsp;<span class="ident" id="6360190">t</span><span class="op" id="6360191">.</span><span class="ident" id="6360192">binary</span><span class="op" id="6360198">.</span><span class="ident" id="6360199">Uint32</span><span class="op" id="6360205">(</span><span class="ident" id="6360206">f</span><span class="op" id="6360207">[</span><span class="ident" id="6360208">t</span><span class="op" id="6360209">.</span><span class="ident" id="6360210">ptrsize</span><span class="op" id="6360217">+</span><span class="num" id="6360218">5</span><span class="op" id="6360219">*</span><span class="num" id="6360220">4</span><span class="op" id="6360221">:</span><span class="op" id="6360222">]</span><span class="op" id="6360223">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360226">return</span>&nbsp;<span class="builtintype" id="6360233">int</span><span class="op" id="6360236">(</span><span class="ident" id="6360237">t</span><span class="op" id="6360238">.</span><span class="ident" id="6360239">pcvalue</span><span class="op" id="6360246">(</span><span class="ident" id="6360247">linetab</span><span class="op" id="6360254">,</span>&nbsp;<span class="ident" id="6360256">entry</span><span class="op" id="6360261">,</span>&nbsp;<span class="ident" id="6360263">pc</span><span class="op" id="6360265">)</span><span class="op" id="6360266">)</span><br>
<span class="lineno"></span><span class="op" id="6360268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6360271">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6360348">func</span>&nbsp;<span class="op" id="6360353">(</span><span class="ident" id="6360354">t</span>&nbsp;<span class="op" id="6360356">*</span><span class="ident" id="6360357">LineTable</span><span class="op" id="6360366">)</span>&nbsp;<span class="ident" id="6360368">go12PCToFile</span><span class="op" id="6360380">(</span><span class="ident" id="6360381">pc</span>&nbsp;<span class="ident" id="6360384">uint64</span><span class="op" id="6360390">)</span>&nbsp;<span class="op" id="6360392">(</span><span class="ident" id="6360393">file</span>&nbsp;<span class="builtintype" id="6360398">string</span><span class="op" id="6360404">)</span>&nbsp;<span class="op" id="6360406">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360409">defer</span>&nbsp;<span class="keyword" id="6360415">func</span><span class="op" id="6360419">(</span><span class="op" id="6360420">)</span>&nbsp;<span class="op" id="6360422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360426">if</span>&nbsp;<span class="builtinfunc" id="6360429">recover</span><span class="op" id="6360436">(</span><span class="op" id="6360437">)</span>&nbsp;<span class="op" id="6360439">!=</span>&nbsp;<span class="ident" id="6360442">nil</span>&nbsp;<span class="op" id="6360446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360451">file</span>&nbsp;<span class="op" id="6360456">=</span>&nbsp;<span class="string" id="6360458">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360466">}</span><span class="op" id="6360467">(</span><span class="op" id="6360468">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360472">f</span>&nbsp;<span class="op" id="6360474">:=</span>&nbsp;<span class="ident" id="6360477">t</span><span class="op" id="6360478">.</span><span class="ident" id="6360479">findFunc</span><span class="op" id="6360487">(</span><span class="ident" id="6360488">pc</span><span class="op" id="6360490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360493">if</span>&nbsp;<span class="ident" id="6360496">f</span>&nbsp;<span class="op" id="6360498">==</span>&nbsp;<span class="ident" id="6360501">nil</span>&nbsp;<span class="op" id="6360505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360509">return</span>&nbsp;<span class="string" id="6360516">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360520">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360523">entry</span>&nbsp;<span class="op" id="6360529">:=</span>&nbsp;<span class="ident" id="6360532">t</span><span class="op" id="6360533">.</span><span class="builtintype" id="6360534">uintptr</span><span class="op" id="6360541">(</span><span class="ident" id="6360542">f</span><span class="op" id="6360543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360546">filetab</span>&nbsp;<span class="op" id="6360554">:=</span>&nbsp;<span class="ident" id="6360557">t</span><span class="op" id="6360558">.</span><span class="ident" id="6360559">binary</span><span class="op" id="6360565">.</span><span class="ident" id="6360566">Uint32</span><span class="op" id="6360572">(</span><span class="ident" id="6360573">f</span><span class="op" id="6360574">[</span><span class="ident" id="6360575">t</span><span class="op" id="6360576">.</span><span class="ident" id="6360577">ptrsize</span><span class="op" id="6360584">+</span><span class="num" id="6360585">4</span><span class="op" id="6360586">*</span><span class="num" id="6360587">4</span><span class="op" id="6360588">:</span><span class="op" id="6360589">]</span><span class="op" id="6360590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360593">fno</span>&nbsp;<span class="op" id="6360597">:=</span>&nbsp;<span class="ident" id="6360600">t</span><span class="op" id="6360601">.</span><span class="ident" id="6360602">pcvalue</span><span class="op" id="6360609">(</span><span class="ident" id="6360610">filetab</span><span class="op" id="6360617">,</span>&nbsp;<span class="ident" id="6360619">entry</span><span class="op" id="6360624">,</span>&nbsp;<span class="ident" id="6360626">pc</span><span class="op" id="6360628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360631">if</span>&nbsp;<span class="ident" id="6360634">fno</span>&nbsp;<span class="op" id="6360638">&lt;=</span>&nbsp;<span class="num" id="6360641">0</span>&nbsp;<span class="op" id="6360643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360647">return</span>&nbsp;<span class="string" id="6360654">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360661">return</span>&nbsp;<span class="ident" id="6360668">t</span><span class="op" id="6360669">.</span><span class="builtintype" id="6360670">string</span><span class="op" id="6360676">(</span><span class="ident" id="6360677">t</span><span class="op" id="6360678">.</span><span class="ident" id="6360679">binary</span><span class="op" id="6360685">.</span><span class="ident" id="6360686">Uint32</span><span class="op" id="6360692">(</span><span class="ident" id="6360693">t</span><span class="op" id="6360694">.</span><span class="ident" id="6360695">filetab</span><span class="op" id="6360702">[</span><span class="num" id="6360703">4</span><span class="op" id="6360704">*</span><span class="ident" id="6360705">fno</span><span class="op" id="6360708">:</span><span class="op" id="6360709">]</span><span class="op" id="6360710">)</span><span class="op" id="6360711">)</span><br>
<span class="lineno"></span><span class="op" id="6360713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6360716">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="6360805">func</span>&nbsp;<span class="op" id="6360810">(</span><span class="ident" id="6360811">t</span>&nbsp;<span class="op" id="6360813">*</span><span class="ident" id="6360814">LineTable</span><span class="op" id="6360823">)</span>&nbsp;<span class="ident" id="6360825">go12LineToPC</span><span class="op" id="6360837">(</span><span class="ident" id="6360838">file</span>&nbsp;<span class="builtintype" id="6360843">string</span><span class="op" id="6360849">,</span>&nbsp;<span class="ident" id="6360851">line</span>&nbsp;<span class="builtintype" id="6360856">int</span><span class="op" id="6360859">)</span>&nbsp;<span class="op" id="6360861">(</span><span class="ident" id="6360862">pc</span>&nbsp;<span class="ident" id="6360865">uint64</span><span class="op" id="6360871">)</span>&nbsp;<span class="op" id="6360873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360876">defer</span>&nbsp;<span class="keyword" id="6360882">func</span><span class="op" id="6360886">(</span><span class="op" id="6360887">)</span>&nbsp;<span class="op" id="6360889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360893">if</span>&nbsp;<span class="builtinfunc" id="6360896">recover</span><span class="op" id="6360903">(</span><span class="op" id="6360904">)</span>&nbsp;<span class="op" id="6360906">!=</span>&nbsp;<span class="ident" id="6360909">nil</span>&nbsp;<span class="op" id="6360913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360918">pc</span>&nbsp;<span class="op" id="6360921">=</span>&nbsp;<span class="num" id="6360923">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360927">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360930">}</span><span class="op" id="6360931">(</span><span class="op" id="6360932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360936">t</span><span class="op" id="6360937">.</span><span class="ident" id="6360938">initFileMap</span><span class="op" id="6360949">(</span><span class="op" id="6360950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360953">filenum</span>&nbsp;<span class="op" id="6360961">:=</span>&nbsp;<span class="ident" id="6360964">t</span><span class="op" id="6360965">.</span><span class="ident" id="6360966">fileMap</span><span class="op" id="6360973">[</span><span class="ident" id="6360974">file</span><span class="op" id="6360978">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360981">if</span>&nbsp;<span class="ident" id="6360984">filenum</span>&nbsp;<span class="op" id="6360992">==</span>&nbsp;<span class="num" id="6360995">0</span>&nbsp;<span class="op" id="6360997">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361001">return</span>&nbsp;<span class="num" id="6361008">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361015">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361039">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361116">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361189">for</span>&nbsp;<span class="ident" id="6361193">i</span>&nbsp;<span class="op" id="6361195">:=</span>&nbsp;<span class="builtintype" id="6361198">uint32</span><span class="op" id="6361204">(</span><span class="num" id="6361205">0</span><span class="op" id="6361206">)</span><span class="op" id="6361207">;</span>&nbsp;<span class="ident" id="6361209">i</span>&nbsp;<span class="op" id="6361211">&lt;</span>&nbsp;<span class="ident" id="6361213">t</span><span class="op" id="6361214">.</span><span class="ident" id="6361215">nfunctab</span><span class="op" id="6361223">;</span>&nbsp;<span class="ident" id="6361225">i</span><span class="op" id="6361226">++</span>&nbsp;<span class="op" id="6361229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361233">f</span>&nbsp;<span class="op" id="6361235">:=</span>&nbsp;<span class="ident" id="6361238">t</span><span class="op" id="6361239">.</span><span class="ident" id="6361240">Data</span><span class="op" id="6361244">[</span><span class="ident" id="6361245">t</span><span class="op" id="6361246">.</span><span class="builtintype" id="6361247">uintptr</span><span class="op" id="6361254">(</span><span class="ident" id="6361255">t</span><span class="op" id="6361256">.</span><span class="ident" id="6361257">functab</span><span class="op" id="6361264">[</span><span class="num" id="6361265">2</span><span class="op" id="6361266">*</span><span class="ident" id="6361267">t</span><span class="op" id="6361268">.</span><span class="ident" id="6361269">ptrsize</span><span class="op" id="6361276">*</span><span class="ident" id="6361277">i</span><span class="op" id="6361278">+</span><span class="ident" id="6361279">t</span><span class="op" id="6361280">.</span><span class="ident" id="6361281">ptrsize</span><span class="op" id="6361288">:</span><span class="op" id="6361289">]</span><span class="op" id="6361290">)</span><span class="op" id="6361291">:</span><span class="op" id="6361292">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361296">entry</span>&nbsp;<span class="op" id="6361302">:=</span>&nbsp;<span class="ident" id="6361305">t</span><span class="op" id="6361306">.</span><span class="builtintype" id="6361307">uintptr</span><span class="op" id="6361314">(</span><span class="ident" id="6361315">f</span><span class="op" id="6361316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361320">filetab</span>&nbsp;<span class="op" id="6361328">:=</span>&nbsp;<span class="ident" id="6361331">t</span><span class="op" id="6361332">.</span><span class="ident" id="6361333">binary</span><span class="op" id="6361339">.</span><span class="ident" id="6361340">Uint32</span><span class="op" id="6361346">(</span><span class="ident" id="6361347">f</span><span class="op" id="6361348">[</span><span class="ident" id="6361349">t</span><span class="op" id="6361350">.</span><span class="ident" id="6361351">ptrsize</span><span class="op" id="6361358">+</span><span class="num" id="6361359">4</span><span class="op" id="6361360">*</span><span class="num" id="6361361">4</span><span class="op" id="6361362">:</span><span class="op" id="6361363">]</span><span class="op" id="6361364">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361368">linetab</span>&nbsp;<span class="op" id="6361376">:=</span>&nbsp;<span class="ident" id="6361379">t</span><span class="op" id="6361380">.</span><span class="ident" id="6361381">binary</span><span class="op" id="6361387">.</span><span class="ident" id="6361388">Uint32</span><span class="op" id="6361394">(</span><span class="ident" id="6361395">f</span><span class="op" id="6361396">[</span><span class="ident" id="6361397">t</span><span class="op" id="6361398">.</span><span class="ident" id="6361399">ptrsize</span><span class="op" id="6361406">+</span><span class="num" id="6361407">5</span><span class="op" id="6361408">*</span><span class="num" id="6361409">4</span><span class="op" id="6361410">:</span><span class="op" id="6361411">]</span><span class="op" id="6361412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361416">pc</span>&nbsp;<span class="op" id="6361419">:=</span>&nbsp;<span class="ident" id="6361422">t</span><span class="op" id="6361423">.</span><span class="ident" id="6361424">findFileLine</span><span class="op" id="6361436">(</span><span class="ident" id="6361437">entry</span><span class="op" id="6361442">,</span>&nbsp;<span class="ident" id="6361444">filetab</span><span class="op" id="6361451">,</span>&nbsp;<span class="ident" id="6361453">linetab</span><span class="op" id="6361460">,</span>&nbsp;<span class="builtintype" id="6361462">int32</span><span class="op" id="6361467">(</span><span class="ident" id="6361468">filenum</span><span class="op" id="6361475">)</span><span class="op" id="6361476">,</span>&nbsp;<span class="builtintype" id="6361478">int32</span><span class="op" id="6361483">(</span><span class="ident" id="6361484">line</span><span class="op" id="6361488">)</span><span class="op" id="6361489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361493">if</span>&nbsp;<span class="ident" id="6361496">pc</span>&nbsp;<span class="op" id="6361499">!=</span>&nbsp;<span class="num" id="6361502">0</span>&nbsp;<span class="op" id="6361504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361509">return</span>&nbsp;<span class="ident" id="6361516">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361521">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361527">return</span>&nbsp;<span class="num" id="6361534">0</span><br>
<span class="lineno"></span><span class="op" id="6361536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6361539">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="6361605">func</span>&nbsp;<span class="op" id="6361610">(</span><span class="ident" id="6361611">t</span>&nbsp;<span class="op" id="6361613">*</span><span class="ident" id="6361614">LineTable</span><span class="op" id="6361623">)</span>&nbsp;<span class="ident" id="6361625">initFileMap</span><span class="op" id="6361636">(</span><span class="op" id="6361637">)</span>&nbsp;<span class="op" id="6361639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361642">t</span><span class="op" id="6361643">.</span><span class="ident" id="6361644">mu</span><span class="op" id="6361646">.</span><span class="ident" id="6361647">Lock</span><span class="op" id="6361651">(</span><span class="op" id="6361652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361655">defer</span>&nbsp;<span class="ident" id="6361661">t</span><span class="op" id="6361662">.</span><span class="ident" id="6361663">mu</span><span class="op" id="6361665">.</span><span class="ident" id="6361666">Unlock</span><span class="op" id="6361672">(</span><span class="op" id="6361673">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361677">if</span>&nbsp;<span class="ident" id="6361680">t</span><span class="op" id="6361681">.</span><span class="ident" id="6361682">fileMap</span>&nbsp;<span class="op" id="6361690">!=</span>&nbsp;<span class="ident" id="6361693">nil</span>&nbsp;<span class="op" id="6361697">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361701">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361712">m</span>&nbsp;<span class="op" id="6361714">:=</span>&nbsp;<span class="builtinfunc" id="6361717">make</span><span class="op" id="6361721">(</span><span class="keyword" id="6361722">map</span><span class="op" id="6361725">[</span><span class="builtintype" id="6361726">string</span><span class="op" id="6361732">]</span><span class="builtintype" id="6361733">uint32</span><span class="op" id="6361739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361743">for</span>&nbsp;<span class="ident" id="6361747">i</span>&nbsp;<span class="op" id="6361749">:=</span>&nbsp;<span class="builtintype" id="6361752">uint32</span><span class="op" id="6361758">(</span><span class="num" id="6361759">1</span><span class="op" id="6361760">)</span><span class="op" id="6361761">;</span>&nbsp;<span class="ident" id="6361763">i</span>&nbsp;<span class="op" id="6361765">&lt;</span>&nbsp;<span class="ident" id="6361767">t</span><span class="op" id="6361768">.</span><span class="ident" id="6361769">nfiletab</span><span class="op" id="6361777">;</span>&nbsp;<span class="ident" id="6361779">i</span><span class="op" id="6361780">++</span>&nbsp;<span class="op" id="6361783">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361787">s</span>&nbsp;<span class="op" id="6361789">:=</span>&nbsp;<span class="ident" id="6361792">t</span><span class="op" id="6361793">.</span><span class="builtintype" id="6361794">string</span><span class="op" id="6361800">(</span><span class="ident" id="6361801">t</span><span class="op" id="6361802">.</span><span class="ident" id="6361803">binary</span><span class="op" id="6361809">.</span><span class="ident" id="6361810">Uint32</span><span class="op" id="6361816">(</span><span class="ident" id="6361817">t</span><span class="op" id="6361818">.</span><span class="ident" id="6361819">filetab</span><span class="op" id="6361826">[</span><span class="num" id="6361827">4</span><span class="op" id="6361828">*</span><span class="ident" id="6361829">i</span><span class="op" id="6361830">:</span><span class="op" id="6361831">]</span><span class="op" id="6361832">)</span><span class="op" id="6361833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361837">m</span><span class="op" id="6361838">[</span><span class="ident" id="6361839">s</span><span class="op" id="6361840">]</span>&nbsp;<span class="op" id="6361842">=</span>&nbsp;<span class="ident" id="6361844">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361850">t</span><span class="op" id="6361851">.</span><span class="ident" id="6361852">fileMap</span>&nbsp;<span class="op" id="6361860">=</span>&nbsp;<span class="ident" id="6361862">m</span><br>
<span class="lineno"></span><span class="op" id="6361864">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6361867">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="6361939">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="6362016">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="6362081">func</span>&nbsp;<span class="op" id="6362086">(</span><span class="ident" id="6362087">t</span>&nbsp;<span class="op" id="6362089">*</span><span class="ident" id="6362090">LineTable</span><span class="op" id="6362099">)</span>&nbsp;<span class="ident" id="6362101">go12MapFiles</span><span class="op" id="6362113">(</span><span class="ident" id="6362114">m</span>&nbsp;<span class="keyword" id="6362116">map</span><span class="op" id="6362119">[</span><span class="builtintype" id="6362120">string</span><span class="op" id="6362126">]</span><span class="op" id="6362127">*</span><span class="ident" id="6362128">Obj</span><span class="op" id="6362131">,</span>&nbsp;<span class="ident" id="6362133">obj</span>&nbsp;<span class="op" id="6362137">*</span><span class="ident" id="6362138">Obj</span><span class="op" id="6362141">)</span>&nbsp;<span class="op" id="6362143">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6362146">defer</span>&nbsp;<span class="keyword" id="6362152">func</span><span class="op" id="6362156">(</span><span class="op" id="6362157">)</span>&nbsp;<span class="op" id="6362159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6362163">recover</span><span class="op" id="6362170">(</span><span class="op" id="6362171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6362174">}</span><span class="op" id="6362175">(</span><span class="op" id="6362176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362180">t</span><span class="op" id="6362181">.</span><span class="ident" id="6362182">initFileMap</span><span class="op" id="6362193">(</span><span class="op" id="6362194">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6362197">for</span>&nbsp;<span class="ident" id="6362201">file</span>&nbsp;<span class="op" id="6362206">:=</span>&nbsp;<span class="keyword" id="6362209">range</span>&nbsp;<span class="ident" id="6362215">t</span><span class="op" id="6362216">.</span><span class="ident" id="6362217">fileMap</span>&nbsp;<span class="op" id="6362225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362229">m</span><span class="op" id="6362230">[</span><span class="ident" id="6362231">file</span><span class="op" id="6362235">]</span>&nbsp;<span class="op" id="6362237">=</span>&nbsp;<span class="ident" id="6362239">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6362244">}</span><br>
<span class="lineno"></span><span class="op" id="6362246">}</span>
</div>
</body>
</html>
