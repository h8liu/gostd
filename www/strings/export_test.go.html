<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7623576">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7623631">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7623685">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7623736">package</span>&nbsp;<span class="ident" id="7623744">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7623753">func</span>&nbsp;<span class="op" id="7623758">(</span><span class="ident" id="7623759">r</span>&nbsp;<span class="op" id="7623761">*</span><span class="ident" id="7623762">Replacer</span><span class="op" id="7623770">)</span>&nbsp;<span class="ident" id="7623772">Replacer</span><span class="op" id="7623780">(</span><span class="op" id="7623781">)</span>&nbsp;<span class="keyword" id="7623783">interface</span><span class="op" id="7623792">{</span><span class="op" id="7623793">}</span>&nbsp;<span class="op" id="7623795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623798">return</span>&nbsp;<span class="ident" id="7623805">r</span><span class="op" id="7623806">.</span><span class="ident" id="7623807">r</span><br>
<span class="lineno"></span><span class="op" id="7623809">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7623812">func</span>&nbsp;<span class="op" id="7623817">(</span><span class="ident" id="7623818">r</span>&nbsp;<span class="op" id="7623820">*</span><span class="ident" id="7623821">Replacer</span><span class="op" id="7623829">)</span>&nbsp;<span class="ident" id="7623831">PrintTrie</span><span class="op" id="7623840">(</span><span class="op" id="7623841">)</span>&nbsp;<span class="builtintype" id="7623843">string</span>&nbsp;<span class="op" id="7623850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623853">gen</span>&nbsp;<span class="op" id="7623857">:=</span>&nbsp;<span class="ident" id="7623860">r</span><span class="op" id="7623861">.</span><span class="ident" id="7623862">r</span><span class="op" id="7623863">.</span><span class="op" id="7623864">(</span><span class="op" id="7623865">*</span><span class="ident" id="7623866">genericReplacer</span><span class="op" id="7623881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623884">return</span>&nbsp;<span class="ident" id="7623891">gen</span><span class="op" id="7623894">.</span><span class="ident" id="7623895">printNode</span><span class="op" id="7623904">(</span><span class="op" id="7623905">&amp;</span><span class="ident" id="7623906">gen</span><span class="op" id="7623909">.</span><span class="ident" id="7623910">root</span><span class="op" id="7623914">,</span>&nbsp;<span class="num" id="7623916">0</span><span class="op" id="7623917">)</span><br>
<span class="lineno"></span><span class="op" id="7623919">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7623922">func</span>&nbsp;<span class="op" id="7623927">(</span><span class="ident" id="7623928">r</span>&nbsp;<span class="op" id="7623930">*</span><span class="ident" id="7623931">genericReplacer</span><span class="op" id="7623946">)</span>&nbsp;<span class="ident" id="7623948">printNode</span><span class="op" id="7623957">(</span><span class="ident" id="7623958">t</span>&nbsp;<span class="op" id="7623960">*</span><span class="ident" id="7623961">trieNode</span><span class="op" id="7623969">,</span>&nbsp;<span class="ident" id="7623971">depth</span>&nbsp;<span class="builtintype" id="7623977">int</span><span class="op" id="7623980">)</span>&nbsp;<span class="op" id="7623982">(</span><span class="ident" id="7623983">s</span>&nbsp;<span class="builtintype" id="7623985">string</span><span class="op" id="7623991">)</span>&nbsp;<span class="op" id="7623993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623996">if</span>&nbsp;<span class="ident" id="7623999">t</span><span class="op" id="7624000">.</span><span class="ident" id="7624001">priority</span>&nbsp;<span class="op" id="7624010">&gt;</span>&nbsp;<span class="num" id="7624012">0</span>&nbsp;<span class="op" id="7624014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624018">s</span>&nbsp;<span class="op" id="7624020">+=</span>&nbsp;<span class="string" id="7624023">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7624028">}</span>&nbsp;<span class="keyword" id="7624030">else</span>&nbsp;<span class="op" id="7624035">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624039">s</span>&nbsp;<span class="op" id="7624041">+=</span>&nbsp;<span class="string" id="7624044">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7624049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624052">s</span>&nbsp;<span class="op" id="7624054">+=</span>&nbsp;<span class="string" id="7624057">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7624064">if</span>&nbsp;<span class="ident" id="7624067">t</span><span class="op" id="7624068">.</span><span class="ident" id="7624069">prefix</span>&nbsp;<span class="op" id="7624076">!=</span>&nbsp;<span class="string" id="7624079">&#34;&#34;</span>&nbsp;<span class="op" id="7624082">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624086">s</span>&nbsp;<span class="op" id="7624088">+=</span>&nbsp;<span class="ident" id="7624091">Repeat</span><span class="op" id="7624097">(</span><span class="string" id="7624098">&#34;.&#34;</span><span class="op" id="7624101">,</span>&nbsp;<span class="ident" id="7624103">depth</span><span class="op" id="7624108">)</span>&nbsp;<span class="op" id="7624110">+</span>&nbsp;<span class="ident" id="7624112">t</span><span class="op" id="7624113">.</span><span class="ident" id="7624114">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624123">s</span>&nbsp;<span class="op" id="7624125">+=</span>&nbsp;<span class="ident" id="7624128">r</span><span class="op" id="7624129">.</span><span class="ident" id="7624130">printNode</span><span class="op" id="7624139">(</span><span class="ident" id="7624140">t</span><span class="op" id="7624141">.</span><span class="ident" id="7624142">next</span><span class="op" id="7624146">,</span>&nbsp;<span class="ident" id="7624148">depth</span><span class="op" id="7624153">+</span><span class="builtinfunc" id="7624154">len</span><span class="op" id="7624157">(</span><span class="ident" id="7624158">t</span><span class="op" id="7624159">.</span><span class="ident" id="7624160">prefix</span><span class="op" id="7624166">)</span><span class="op" id="7624167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7624170">}</span>&nbsp;<span class="keyword" id="7624172">else</span>&nbsp;<span class="keyword" id="7624177">if</span>&nbsp;<span class="ident" id="7624180">t</span><span class="op" id="7624181">.</span><span class="ident" id="7624182">table</span>&nbsp;<span class="op" id="7624188">!=</span>&nbsp;<span class="ident" id="7624191">nil</span>&nbsp;<span class="op" id="7624195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7624199">for</span>&nbsp;<span class="ident" id="7624203">b</span><span class="op" id="7624204">,</span>&nbsp;<span class="ident" id="7624206">m</span>&nbsp;<span class="op" id="7624208">:=</span>&nbsp;<span class="keyword" id="7624211">range</span>&nbsp;<span class="ident" id="7624217">r</span><span class="op" id="7624218">.</span><span class="ident" id="7624219">mapping</span>&nbsp;<span class="op" id="7624227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7624232">if</span>&nbsp;<span class="builtintype" id="7624235">int</span><span class="op" id="7624238">(</span><span class="ident" id="7624239">m</span><span class="op" id="7624240">)</span>&nbsp;<span class="op" id="7624242">!=</span>&nbsp;<span class="ident" id="7624245">r</span><span class="op" id="7624246">.</span><span class="ident" id="7624247">tableSize</span>&nbsp;<span class="op" id="7624257">&amp;&amp;</span>&nbsp;<span class="ident" id="7624260">t</span><span class="op" id="7624261">.</span><span class="ident" id="7624262">table</span><span class="op" id="7624267">[</span><span class="ident" id="7624268">m</span><span class="op" id="7624269">]</span>&nbsp;<span class="op" id="7624271">!=</span>&nbsp;<span class="ident" id="7624274">nil</span>&nbsp;<span class="op" id="7624278">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624284">s</span>&nbsp;<span class="op" id="7624286">+=</span>&nbsp;<span class="ident" id="7624289">Repeat</span><span class="op" id="7624295">(</span><span class="string" id="7624296">&#34;.&#34;</span><span class="op" id="7624299">,</span>&nbsp;<span class="ident" id="7624301">depth</span><span class="op" id="7624306">)</span>&nbsp;<span class="op" id="7624308">+</span>&nbsp;<span class="builtintype" id="7624310">string</span><span class="op" id="7624316">(</span><span class="op" id="7624317">[</span><span class="op" id="7624318">]</span><span class="builtintype" id="7624319">byte</span><span class="op" id="7624323">{</span><span class="builtintype" id="7624324">byte</span><span class="op" id="7624328">(</span><span class="ident" id="7624329">b</span><span class="op" id="7624330">)</span><span class="op" id="7624331">}</span><span class="op" id="7624332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624338">s</span>&nbsp;<span class="op" id="7624340">+=</span>&nbsp;<span class="ident" id="7624343">r</span><span class="op" id="7624344">.</span><span class="ident" id="7624345">printNode</span><span class="op" id="7624354">(</span><span class="ident" id="7624355">t</span><span class="op" id="7624356">.</span><span class="ident" id="7624357">table</span><span class="op" id="7624362">[</span><span class="ident" id="7624363">m</span><span class="op" id="7624364">]</span><span class="op" id="7624365">,</span>&nbsp;<span class="ident" id="7624367">depth</span><span class="op" id="7624372">+</span><span class="num" id="7624373">1</span><span class="op" id="7624374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7624379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7624383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7624386">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7624389">return</span><br>
<span class="lineno"></span><span class="op" id="7624396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7624399">func</span>&nbsp;<span class="ident" id="7624404">StringFind</span><span class="op" id="7624414">(</span><span class="ident" id="7624415">pattern</span><span class="op" id="7624422">,</span>&nbsp;<span class="ident" id="7624424">text</span>&nbsp;<span class="builtintype" id="7624429">string</span><span class="op" id="7624435">)</span>&nbsp;<span class="builtintype" id="7624437">int</span>&nbsp;<span class="op" id="7624441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7624444">return</span>&nbsp;<span class="ident" id="7624451">makeStringFinder</span><span class="op" id="7624467">(</span><span class="ident" id="7624468">pattern</span><span class="op" id="7624475">)</span><span class="op" id="7624476">.</span><span class="ident" id="7624477">next</span><span class="op" id="7624481">(</span><span class="ident" id="7624482">text</span><span class="op" id="7624486">)</span><br>
<span class="lineno">40</span><span class="op" id="7624488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7624491">func</span>&nbsp;<span class="ident" id="7624496">DumpTables</span><span class="op" id="7624506">(</span><span class="ident" id="7624507">pattern</span>&nbsp;<span class="builtintype" id="7624515">string</span><span class="op" id="7624521">)</span>&nbsp;<span class="op" id="7624523">(</span><span class="op" id="7624524">[</span><span class="op" id="7624525">]</span><span class="builtintype" id="7624526">int</span><span class="op" id="7624529">,</span>&nbsp;<span class="op" id="7624531">[</span><span class="op" id="7624532">]</span><span class="builtintype" id="7624533">int</span><span class="op" id="7624536">)</span>&nbsp;<span class="op" id="7624538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7624541">finder</span>&nbsp;<span class="op" id="7624548">:=</span>&nbsp;<span class="ident" id="7624551">makeStringFinder</span><span class="op" id="7624567">(</span><span class="ident" id="7624568">pattern</span><span class="op" id="7624575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7624578">return</span>&nbsp;<span class="ident" id="7624585">finder</span><span class="op" id="7624591">.</span><span class="ident" id="7624592">badCharSkip</span><span class="op" id="7624603">[</span><span class="op" id="7624604">:</span><span class="op" id="7624605">]</span><span class="op" id="7624606">,</span>&nbsp;<span class="ident" id="7624608">finder</span><span class="op" id="7624614">.</span><span class="ident" id="7624615">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="7624630">}</span>
</div>
</body>
</html>
