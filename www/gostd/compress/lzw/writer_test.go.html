<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8210460">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8210515">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8210569">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8210620">package</span>&nbsp;<span class="ident" id="8210628">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8210633">import</span>&nbsp;<span class="op" id="8210640">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210643">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210649">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210662">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210668">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210679">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8210689">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8210692">var</span>&nbsp;<span class="ident" id="8210696">filenames</span>&nbsp;<span class="op" id="8210706">=</span>&nbsp;<span class="op" id="8210708">[</span><span class="op" id="8210709">]</span><span class="builtintype" id="8210710">string</span><span class="op" id="8210716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210719">&#34;../testdata/e.txt&#34;</span><span class="op" id="8210738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8210741">&#34;../testdata/pi.txt&#34;</span><span class="op" id="8210761">,</span><br>
<span class="lineno"></span><span class="op" id="8210763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8210766">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="8210844">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="8210911">func</span>&nbsp;<span class="ident" id="8210916">testFile</span><span class="op" id="8210924">(</span><span class="ident" id="8210925">t</span>&nbsp;<span class="op" id="8210927">*</span><span class="ident" id="8210928">testing</span><span class="op" id="8210935">.</span><span class="ident" id="8210936">T</span><span class="op" id="8210937">,</span>&nbsp;<span class="ident" id="8210939">fn</span>&nbsp;<span class="builtintype" id="8210942">string</span><span class="op" id="8210948">,</span>&nbsp;<span class="ident" id="8210950">order</span>&nbsp;<span class="ident" id="8210956">Order</span><span class="op" id="8210961">,</span>&nbsp;<span class="ident" id="8210963">litWidth</span>&nbsp;<span class="builtintype" id="8210972">int</span><span class="op" id="8210975">)</span>&nbsp;<span class="op" id="8210977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8210980">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211017">golden</span><span class="op" id="8211023">,</span>&nbsp;<span class="ident" id="8211025">err</span>&nbsp;<span class="op" id="8211029">:=</span>&nbsp;<span class="ident" id="8211032">os</span><span class="op" id="8211034">.</span><span class="ident" id="8211035">Open</span><span class="op" id="8211039">(</span><span class="ident" id="8211040">fn</span><span class="op" id="8211042">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211045">if</span>&nbsp;<span class="ident" id="8211048">err</span>&nbsp;<span class="op" id="8211052">!=</span>&nbsp;<span class="builtintype" id="8211055">nil</span>&nbsp;<span class="op" id="8211059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211063">t</span><span class="op" id="8211064">.</span><span class="ident" id="8211065">Errorf</span><span class="op" id="8211071">(</span><span class="string" id="8211072">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8211103">,</span>&nbsp;<span class="ident" id="8211105">fn</span><span class="op" id="8211107">,</span>&nbsp;<span class="ident" id="8211109">order</span><span class="op" id="8211114">,</span>&nbsp;<span class="ident" id="8211116">litWidth</span><span class="op" id="8211124">,</span>&nbsp;<span class="ident" id="8211126">err</span><span class="op" id="8211129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211144">defer</span>&nbsp;<span class="ident" id="8211150">golden</span><span class="op" id="8211156">.</span><span class="ident" id="8211157">Close</span><span class="op" id="8211162">(</span><span class="op" id="8211163">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8211167">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211287">raw</span><span class="op" id="8211290">,</span>&nbsp;<span class="ident" id="8211292">err</span>&nbsp;<span class="op" id="8211296">:=</span>&nbsp;<span class="ident" id="8211299">os</span><span class="op" id="8211301">.</span><span class="ident" id="8211302">Open</span><span class="op" id="8211306">(</span><span class="ident" id="8211307">fn</span><span class="op" id="8211309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211312">if</span>&nbsp;<span class="ident" id="8211315">err</span>&nbsp;<span class="op" id="8211319">!=</span>&nbsp;<span class="builtintype" id="8211322">nil</span>&nbsp;<span class="op" id="8211326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211330">t</span><span class="op" id="8211331">.</span><span class="ident" id="8211332">Errorf</span><span class="op" id="8211338">(</span><span class="string" id="8211339">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8211370">,</span>&nbsp;<span class="ident" id="8211372">fn</span><span class="op" id="8211374">,</span>&nbsp;<span class="ident" id="8211376">order</span><span class="op" id="8211381">,</span>&nbsp;<span class="ident" id="8211383">litWidth</span><span class="op" id="8211391">,</span>&nbsp;<span class="ident" id="8211393">err</span><span class="op" id="8211396">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211400">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211412">piper</span><span class="op" id="8211417">,</span>&nbsp;<span class="ident" id="8211419">pipew</span>&nbsp;<span class="op" id="8211425">:=</span>&nbsp;<span class="ident" id="8211428">io</span><span class="op" id="8211430">.</span><span class="ident" id="8211431">Pipe</span><span class="op" id="8211435">(</span><span class="op" id="8211436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211439">defer</span>&nbsp;<span class="ident" id="8211445">piper</span><span class="op" id="8211450">.</span><span class="ident" id="8211451">Close</span><span class="op" id="8211456">(</span><span class="op" id="8211457">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211460">go</span>&nbsp;<span class="keyword" id="8211463">func</span><span class="op" id="8211467">(</span><span class="op" id="8211468">)</span>&nbsp;<span class="op" id="8211470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211474">defer</span>&nbsp;<span class="ident" id="8211480">raw</span><span class="op" id="8211483">.</span><span class="ident" id="8211484">Close</span><span class="op" id="8211489">(</span><span class="op" id="8211490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211494">defer</span>&nbsp;<span class="ident" id="8211500">pipew</span><span class="op" id="8211505">.</span><span class="ident" id="8211506">Close</span><span class="op" id="8211511">(</span><span class="op" id="8211512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211516">lzww</span>&nbsp;<span class="op" id="8211521">:=</span>&nbsp;<span class="ident" id="8211524">NewWriter</span><span class="op" id="8211533">(</span><span class="ident" id="8211534">pipew</span><span class="op" id="8211539">,</span>&nbsp;<span class="ident" id="8211541">order</span><span class="op" id="8211546">,</span>&nbsp;<span class="ident" id="8211548">litWidth</span><span class="op" id="8211556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211560">defer</span>&nbsp;<span class="ident" id="8211566">lzww</span><span class="op" id="8211570">.</span><span class="ident" id="8211571">Close</span><span class="op" id="8211576">(</span><span class="op" id="8211577">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211581">var</span>&nbsp;<span class="ident" id="8211585">b</span>&nbsp;<span class="op" id="8211587">[</span><span class="num" id="8211588">4096</span><span class="op" id="8211592">]</span><span class="builtintype" id="8211593">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211600">for</span>&nbsp;<span class="op" id="8211604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211609">n</span><span class="op" id="8211610">,</span>&nbsp;<span class="ident" id="8211612">err0</span>&nbsp;<span class="op" id="8211617">:=</span>&nbsp;<span class="ident" id="8211620">raw</span><span class="op" id="8211623">.</span><span class="ident" id="8211624">Read</span><span class="op" id="8211628">(</span><span class="ident" id="8211629">b</span><span class="op" id="8211630">[</span><span class="op" id="8211631">:</span><span class="op" id="8211632">]</span><span class="op" id="8211633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211638">if</span>&nbsp;<span class="ident" id="8211641">err0</span>&nbsp;<span class="op" id="8211646">!=</span>&nbsp;<span class="builtintype" id="8211649">nil</span>&nbsp;<span class="op" id="8211653">&amp;&amp;</span>&nbsp;<span class="ident" id="8211656">err0</span>&nbsp;<span class="op" id="8211661">!=</span>&nbsp;<span class="ident" id="8211664">io</span><span class="op" id="8211666">.</span><span class="ident" id="8211667">EOF</span>&nbsp;<span class="op" id="8211671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211677">t</span><span class="op" id="8211678">.</span><span class="ident" id="8211679">Errorf</span><span class="op" id="8211685">(</span><span class="string" id="8211686">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8211717">,</span>&nbsp;<span class="ident" id="8211719">fn</span><span class="op" id="8211721">,</span>&nbsp;<span class="ident" id="8211723">order</span><span class="op" id="8211728">,</span>&nbsp;<span class="ident" id="8211730">litWidth</span><span class="op" id="8211738">,</span>&nbsp;<span class="ident" id="8211740">err0</span><span class="op" id="8211744">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211750">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211765">_</span><span class="op" id="8211766">,</span>&nbsp;<span class="ident" id="8211768">err1</span>&nbsp;<span class="op" id="8211773">:=</span>&nbsp;<span class="ident" id="8211776">lzww</span><span class="op" id="8211780">.</span><span class="ident" id="8211781">Write</span><span class="op" id="8211786">(</span><span class="ident" id="8211787">b</span><span class="op" id="8211788">[</span><span class="op" id="8211789">:</span><span class="ident" id="8211790">n</span><span class="op" id="8211791">]</span><span class="op" id="8211792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211797">if</span>&nbsp;<span class="ident" id="8211800">err1</span>&nbsp;<span class="op" id="8211805">!=</span>&nbsp;<span class="builtintype" id="8211808">nil</span>&nbsp;<span class="op" id="8211812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211818">t</span><span class="op" id="8211819">.</span><span class="ident" id="8211820">Errorf</span><span class="op" id="8211826">(</span><span class="string" id="8211827">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8211858">,</span>&nbsp;<span class="ident" id="8211860">fn</span><span class="op" id="8211862">,</span>&nbsp;<span class="ident" id="8211864">order</span><span class="op" id="8211869">,</span>&nbsp;<span class="ident" id="8211871">litWidth</span><span class="op" id="8211879">,</span>&nbsp;<span class="ident" id="8211881">err1</span><span class="op" id="8211885">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211891">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211906">if</span>&nbsp;<span class="ident" id="8211909">err0</span>&nbsp;<span class="op" id="8211914">==</span>&nbsp;<span class="ident" id="8211917">io</span><span class="op" id="8211919">.</span><span class="ident" id="8211920">EOF</span>&nbsp;<span class="op" id="8211924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211930">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211939">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8211946">}</span><span class="op" id="8211947">(</span><span class="op" id="8211948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8211951">lzwr</span>&nbsp;<span class="op" id="8211956">:=</span>&nbsp;<span class="ident" id="8211959">NewReader</span><span class="op" id="8211968">(</span><span class="ident" id="8211969">piper</span><span class="op" id="8211974">,</span>&nbsp;<span class="ident" id="8211976">order</span><span class="op" id="8211981">,</span>&nbsp;<span class="ident" id="8211983">litWidth</span><span class="op" id="8211991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8211994">defer</span>&nbsp;<span class="ident" id="8212000">lzwr</span><span class="op" id="8212004">.</span><span class="ident" id="8212005">Close</span><span class="op" id="8212010">(</span><span class="op" id="8212011">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8212015">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212036">b0</span><span class="op" id="8212038">,</span>&nbsp;<span class="ident" id="8212040">err0</span>&nbsp;<span class="op" id="8212045">:=</span>&nbsp;<span class="ident" id="8212048">ioutil</span><span class="op" id="8212054">.</span><span class="ident" id="8212055">ReadAll</span><span class="op" id="8212062">(</span><span class="ident" id="8212063">golden</span><span class="op" id="8212069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212072">b1</span><span class="op" id="8212074">,</span>&nbsp;<span class="ident" id="8212076">err1</span>&nbsp;<span class="op" id="8212081">:=</span>&nbsp;<span class="ident" id="8212084">ioutil</span><span class="op" id="8212090">.</span><span class="ident" id="8212091">ReadAll</span><span class="op" id="8212098">(</span><span class="ident" id="8212099">lzwr</span><span class="op" id="8212103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212106">if</span>&nbsp;<span class="ident" id="8212109">err0</span>&nbsp;<span class="op" id="8212114">!=</span>&nbsp;<span class="builtintype" id="8212117">nil</span>&nbsp;<span class="op" id="8212121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212125">t</span><span class="op" id="8212126">.</span><span class="ident" id="8212127">Errorf</span><span class="op" id="8212133">(</span><span class="string" id="8212134">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8212165">,</span>&nbsp;<span class="ident" id="8212167">fn</span><span class="op" id="8212169">,</span>&nbsp;<span class="ident" id="8212171">order</span><span class="op" id="8212176">,</span>&nbsp;<span class="ident" id="8212178">litWidth</span><span class="op" id="8212186">,</span>&nbsp;<span class="ident" id="8212188">err0</span><span class="op" id="8212192">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212196">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212207">if</span>&nbsp;<span class="ident" id="8212210">err1</span>&nbsp;<span class="op" id="8212215">!=</span>&nbsp;<span class="builtintype" id="8212218">nil</span>&nbsp;<span class="op" id="8212222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212226">t</span><span class="op" id="8212227">.</span><span class="ident" id="8212228">Errorf</span><span class="op" id="8212234">(</span><span class="string" id="8212235">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8212266">,</span>&nbsp;<span class="ident" id="8212268">fn</span><span class="op" id="8212270">,</span>&nbsp;<span class="ident" id="8212272">order</span><span class="op" id="8212277">,</span>&nbsp;<span class="ident" id="8212279">litWidth</span><span class="op" id="8212287">,</span>&nbsp;<span class="ident" id="8212289">err1</span><span class="op" id="8212293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212297">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212308">if</span>&nbsp;<span class="builtinfunc" id="8212311">len</span><span class="op" id="8212314">(</span><span class="ident" id="8212315">b1</span><span class="op" id="8212317">)</span>&nbsp;<span class="op" id="8212319">!=</span>&nbsp;<span class="builtinfunc" id="8212322">len</span><span class="op" id="8212325">(</span><span class="ident" id="8212326">b0</span><span class="op" id="8212328">)</span>&nbsp;<span class="op" id="8212330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212334">t</span><span class="op" id="8212335">.</span><span class="ident" id="8212336">Errorf</span><span class="op" id="8212342">(</span><span class="string" id="8212343">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="8212396">,</span>&nbsp;<span class="ident" id="8212398">fn</span><span class="op" id="8212400">,</span>&nbsp;<span class="ident" id="8212402">order</span><span class="op" id="8212407">,</span>&nbsp;<span class="ident" id="8212409">litWidth</span><span class="op" id="8212417">,</span>&nbsp;<span class="builtinfunc" id="8212419">len</span><span class="op" id="8212422">(</span><span class="ident" id="8212423">b1</span><span class="op" id="8212425">)</span><span class="op" id="8212426">,</span>&nbsp;<span class="builtinfunc" id="8212428">len</span><span class="op" id="8212431">(</span><span class="ident" id="8212432">b0</span><span class="op" id="8212434">)</span><span class="op" id="8212435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212439">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212447">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212450">for</span>&nbsp;<span class="ident" id="8212454">i</span>&nbsp;<span class="op" id="8212456">:=</span>&nbsp;<span class="num" id="8212459">0</span><span class="op" id="8212460">;</span>&nbsp;<span class="ident" id="8212462">i</span>&nbsp;<span class="op" id="8212464">&lt;</span>&nbsp;<span class="builtinfunc" id="8212466">len</span><span class="op" id="8212469">(</span><span class="ident" id="8212470">b0</span><span class="op" id="8212472">)</span><span class="op" id="8212473">;</span>&nbsp;<span class="ident" id="8212475">i</span><span class="op" id="8212476">++</span>&nbsp;<span class="op" id="8212479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212483">if</span>&nbsp;<span class="ident" id="8212486">b1</span><span class="op" id="8212488">[</span><span class="ident" id="8212489">i</span><span class="op" id="8212490">]</span>&nbsp;<span class="op" id="8212492">!=</span>&nbsp;<span class="ident" id="8212495">b0</span><span class="op" id="8212497">[</span><span class="ident" id="8212498">i</span><span class="op" id="8212499">]</span>&nbsp;<span class="op" id="8212501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212506">t</span><span class="op" id="8212507">.</span><span class="ident" id="8212508">Errorf</span><span class="op" id="8212514">(</span><span class="string" id="8212515">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="8212578">,</span>&nbsp;<span class="ident" id="8212580">fn</span><span class="op" id="8212582">,</span>&nbsp;<span class="ident" id="8212584">order</span><span class="op" id="8212589">,</span>&nbsp;<span class="ident" id="8212591">litWidth</span><span class="op" id="8212599">,</span>&nbsp;<span class="ident" id="8212601">i</span><span class="op" id="8212602">,</span>&nbsp;<span class="ident" id="8212604">b1</span><span class="op" id="8212606">[</span><span class="ident" id="8212607">i</span><span class="op" id="8212608">]</span><span class="op" id="8212609">,</span>&nbsp;<span class="ident" id="8212611">b0</span><span class="op" id="8212613">[</span><span class="ident" id="8212614">i</span><span class="op" id="8212615">]</span><span class="op" id="8212616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212621">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212630">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212633">}</span><br>
<span class="lineno"></span><span class="op" id="8212635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8212638">func</span>&nbsp;<span class="ident" id="8212643">TestWriter</span><span class="op" id="8212653">(</span><span class="ident" id="8212654">t</span>&nbsp;<span class="op" id="8212656">*</span><span class="ident" id="8212657">testing</span><span class="op" id="8212664">.</span><span class="ident" id="8212665">T</span><span class="op" id="8212666">)</span>&nbsp;<span class="op" id="8212668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212671">for</span>&nbsp;<span class="ident" id="8212675">_</span><span class="op" id="8212676">,</span>&nbsp;<span class="ident" id="8212678">filename</span>&nbsp;<span class="op" id="8212687">:=</span>&nbsp;<span class="keyword" id="8212690">range</span>&nbsp;<span class="ident" id="8212696">filenames</span>&nbsp;<span class="op" id="8212706">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212710">for</span>&nbsp;<span class="ident" id="8212714">_</span><span class="op" id="8212715">,</span>&nbsp;<span class="ident" id="8212717">order</span>&nbsp;<span class="op" id="8212723">:=</span>&nbsp;<span class="keyword" id="8212726">range</span>&nbsp;<span class="op" id="8212732">[</span><span class="op" id="8212733">...</span><span class="op" id="8212736">]</span><span class="ident" id="8212737">Order</span><span class="op" id="8212742">{</span><span class="ident" id="8212743">LSB</span><span class="op" id="8212746">,</span>&nbsp;<span class="ident" id="8212748">MSB</span><span class="op" id="8212751">}</span>&nbsp;<span class="op" id="8212753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8212758">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8212838">for</span>&nbsp;<span class="ident" id="8212842">_</span><span class="op" id="8212843">,</span>&nbsp;<span class="ident" id="8212845">litWidth</span>&nbsp;<span class="op" id="8212854">:=</span>&nbsp;<span class="keyword" id="8212857">range</span>&nbsp;<span class="op" id="8212863">[</span><span class="op" id="8212864">...</span><span class="op" id="8212867">]</span><span class="builtintype" id="8212868">int</span><span class="op" id="8212871">{</span><span class="num" id="8212872">6</span><span class="op" id="8212873">,</span>&nbsp;<span class="num" id="8212875">7</span><span class="op" id="8212876">,</span>&nbsp;<span class="num" id="8212878">8</span><span class="op" id="8212879">}</span>&nbsp;<span class="op" id="8212881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212887">testFile</span><span class="op" id="8212895">(</span><span class="ident" id="8212896">t</span><span class="op" id="8212897">,</span>&nbsp;<span class="ident" id="8212899">filename</span><span class="op" id="8212907">,</span>&nbsp;<span class="ident" id="8212909">order</span><span class="op" id="8212914">,</span>&nbsp;<span class="ident" id="8212916">litWidth</span><span class="op" id="8212924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212929">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8212936">}</span><br>
<span class="lineno"></span><span class="op" id="8212938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8212941">func</span>&nbsp;<span class="ident" id="8212946">TestWriterReturnValues</span><span class="op" id="8212968">(</span><span class="ident" id="8212969">t</span>&nbsp;<span class="op" id="8212971">*</span><span class="ident" id="8212972">testing</span><span class="op" id="8212979">.</span><span class="ident" id="8212980">T</span><span class="op" id="8212981">)</span>&nbsp;<span class="op" id="8212983">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8212986">w</span>&nbsp;<span class="op" id="8212988">:=</span>&nbsp;<span class="ident" id="8212991">NewWriter</span><span class="op" id="8213000">(</span><span class="ident" id="8213001">ioutil</span><span class="op" id="8213007">.</span><span class="ident" id="8213008">Discard</span><span class="op" id="8213015">,</span>&nbsp;<span class="ident" id="8213017">LSB</span><span class="op" id="8213020">,</span>&nbsp;<span class="num" id="8213022">8</span><span class="op" id="8213023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213026">n</span><span class="op" id="8213027">,</span>&nbsp;<span class="ident" id="8213029">err</span>&nbsp;<span class="op" id="8213033">:=</span>&nbsp;<span class="ident" id="8213036">w</span><span class="op" id="8213037">.</span><span class="ident" id="8213038">Write</span><span class="op" id="8213043">(</span><span class="op" id="8213044">[</span><span class="op" id="8213045">]</span><span class="builtintype" id="8213046">byte</span><span class="op" id="8213050">(</span><span class="string" id="8213051">&#34;asdf&#34;</span><span class="op" id="8213057">)</span><span class="op" id="8213058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8213061">if</span>&nbsp;<span class="ident" id="8213064">n</span>&nbsp;<span class="op" id="8213066">!=</span>&nbsp;<span class="num" id="8213069">4</span>&nbsp;<span class="op" id="8213071">||</span>&nbsp;<span class="ident" id="8213074">err</span>&nbsp;<span class="op" id="8213078">!=</span>&nbsp;<span class="builtintype" id="8213081">nil</span>&nbsp;<span class="op" id="8213085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213089">t</span><span class="op" id="8213090">.</span><span class="ident" id="8213091">Errorf</span><span class="op" id="8213097">(</span><span class="string" id="8213098">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="8213123">,</span>&nbsp;<span class="ident" id="8213125">n</span><span class="op" id="8213126">,</span>&nbsp;<span class="ident" id="8213128">err</span><span class="op" id="8213131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8213134">}</span><br>
<span class="lineno">105</span><span class="op" id="8213136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8213139">func</span>&nbsp;<span class="ident" id="8213144">benchmarkEncoder</span><span class="op" id="8213160">(</span><span class="ident" id="8213161">b</span>&nbsp;<span class="op" id="8213163">*</span><span class="ident" id="8213164">testing</span><span class="op" id="8213171">.</span><span class="ident" id="8213172">B</span><span class="op" id="8213173">,</span>&nbsp;<span class="ident" id="8213175">n</span>&nbsp;<span class="builtintype" id="8213177">int</span><span class="op" id="8213180">)</span>&nbsp;<span class="op" id="8213182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213185">b</span><span class="op" id="8213186">.</span><span class="ident" id="8213187">StopTimer</span><span class="op" id="8213196">(</span><span class="op" id="8213197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213200">b</span><span class="op" id="8213201">.</span><span class="ident" id="8213202">SetBytes</span><span class="op" id="8213210">(</span><span class="builtintype" id="8213211">int64</span><span class="op" id="8213216">(</span><span class="ident" id="8213217">n</span><span class="op" id="8213218">)</span><span class="op" id="8213219">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213222">buf0</span><span class="op" id="8213226">,</span>&nbsp;<span class="ident" id="8213228">err</span>&nbsp;<span class="op" id="8213232">:=</span>&nbsp;<span class="ident" id="8213235">ioutil</span><span class="op" id="8213241">.</span><span class="ident" id="8213242">ReadFile</span><span class="op" id="8213250">(</span><span class="string" id="8213251">&#34;../testdata/e.txt&#34;</span><span class="op" id="8213270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8213273">if</span>&nbsp;<span class="ident" id="8213276">err</span>&nbsp;<span class="op" id="8213280">!=</span>&nbsp;<span class="builtintype" id="8213283">nil</span>&nbsp;<span class="op" id="8213287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213291">b</span><span class="op" id="8213292">.</span><span class="ident" id="8213293">Fatal</span><span class="op" id="8213298">(</span><span class="ident" id="8213299">err</span><span class="op" id="8213302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8213305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8213308">if</span>&nbsp;<span class="builtinfunc" id="8213311">len</span><span class="op" id="8213314">(</span><span class="ident" id="8213315">buf0</span><span class="op" id="8213319">)</span>&nbsp;<span class="op" id="8213321">==</span>&nbsp;<span class="num" id="8213324">0</span>&nbsp;<span class="op" id="8213326">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213330">b</span><span class="op" id="8213331">.</span><span class="ident" id="8213332">Fatalf</span><span class="op" id="8213338">(</span><span class="string" id="8213339">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="8213362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8213365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213368">buf1</span>&nbsp;<span class="op" id="8213373">:=</span>&nbsp;<span class="builtinfunc" id="8213376">make</span><span class="op" id="8213380">(</span><span class="op" id="8213381">[</span><span class="op" id="8213382">]</span><span class="builtintype" id="8213383">byte</span><span class="op" id="8213387">,</span>&nbsp;<span class="ident" id="8213389">n</span><span class="op" id="8213390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8213393">for</span>&nbsp;<span class="ident" id="8213397">i</span>&nbsp;<span class="op" id="8213399">:=</span>&nbsp;<span class="num" id="8213402">0</span><span class="op" id="8213403">;</span>&nbsp;<span class="ident" id="8213405">i</span>&nbsp;<span class="op" id="8213407">&lt;</span>&nbsp;<span class="ident" id="8213409">n</span><span class="op" id="8213410">;</span>&nbsp;<span class="ident" id="8213412">i</span>&nbsp;<span class="op" id="8213414">+=</span>&nbsp;<span class="builtinfunc" id="8213417">len</span><span class="op" id="8213420">(</span><span class="ident" id="8213421">buf0</span><span class="op" id="8213425">)</span>&nbsp;<span class="op" id="8213427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8213431">if</span>&nbsp;<span class="builtinfunc" id="8213434">len</span><span class="op" id="8213437">(</span><span class="ident" id="8213438">buf0</span><span class="op" id="8213442">)</span>&nbsp;<span class="op" id="8213444">&gt;</span>&nbsp;<span class="ident" id="8213446">n</span><span class="op" id="8213447">-</span><span class="ident" id="8213448">i</span>&nbsp;<span class="op" id="8213450">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213455">buf0</span>&nbsp;<span class="op" id="8213460">=</span>&nbsp;<span class="ident" id="8213462">buf0</span><span class="op" id="8213466">[</span><span class="op" id="8213467">:</span><span class="ident" id="8213468">n</span><span class="op" id="8213469">-</span><span class="ident" id="8213470">i</span><span class="op" id="8213471">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8213475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8213479">copy</span><span class="op" id="8213483">(</span><span class="ident" id="8213484">buf1</span><span class="op" id="8213488">[</span><span class="ident" id="8213489">i</span><span class="op" id="8213490">:</span><span class="op" id="8213491">]</span><span class="op" id="8213492">,</span>&nbsp;<span class="ident" id="8213494">buf0</span><span class="op" id="8213498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8213501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213504">buf0</span>&nbsp;<span class="op" id="8213509">=</span>&nbsp;<span class="builtintype" id="8213511">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213516">runtime</span><span class="op" id="8213523">.</span><span class="ident" id="8213524">GC</span><span class="op" id="8213526">(</span><span class="op" id="8213527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213530">b</span><span class="op" id="8213531">.</span><span class="ident" id="8213532">StartTimer</span><span class="op" id="8213542">(</span><span class="op" id="8213543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8213546">for</span>&nbsp;<span class="ident" id="8213550">i</span>&nbsp;<span class="op" id="8213552">:=</span>&nbsp;<span class="num" id="8213555">0</span><span class="op" id="8213556">;</span>&nbsp;<span class="ident" id="8213558">i</span>&nbsp;<span class="op" id="8213560">&lt;</span>&nbsp;<span class="ident" id="8213562">b</span><span class="op" id="8213563">.</span><span class="ident" id="8213564">N</span><span class="op" id="8213565">;</span>&nbsp;<span class="ident" id="8213567">i</span><span class="op" id="8213568">++</span>&nbsp;<span class="op" id="8213571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213575">w</span>&nbsp;<span class="op" id="8213577">:=</span>&nbsp;<span class="ident" id="8213580">NewWriter</span><span class="op" id="8213589">(</span><span class="ident" id="8213590">ioutil</span><span class="op" id="8213596">.</span><span class="ident" id="8213597">Discard</span><span class="op" id="8213604">,</span>&nbsp;<span class="ident" id="8213606">LSB</span><span class="op" id="8213609">,</span>&nbsp;<span class="num" id="8213611">8</span><span class="op" id="8213612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213616">w</span><span class="op" id="8213617">.</span><span class="ident" id="8213618">Write</span><span class="op" id="8213623">(</span><span class="ident" id="8213624">buf1</span><span class="op" id="8213628">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213632">w</span><span class="op" id="8213633">.</span><span class="ident" id="8213634">Close</span><span class="op" id="8213639">(</span><span class="op" id="8213640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8213643">}</span><br>
<span class="lineno"></span><span class="op" id="8213645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8213648">func</span>&nbsp;<span class="ident" id="8213653">BenchmarkEncoder1e4</span><span class="op" id="8213672">(</span><span class="ident" id="8213673">b</span>&nbsp;<span class="op" id="8213675">*</span><span class="ident" id="8213676">testing</span><span class="op" id="8213683">.</span><span class="ident" id="8213684">B</span><span class="op" id="8213685">)</span>&nbsp;<span class="op" id="8213687">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213690">benchmarkEncoder</span><span class="op" id="8213706">(</span><span class="ident" id="8213707">b</span><span class="op" id="8213708">,</span>&nbsp;<span class="num" id="8213710">1e4</span><span class="op" id="8213713">)</span><br>
<span class="lineno"></span><span class="op" id="8213715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8213718">func</span>&nbsp;<span class="ident" id="8213723">BenchmarkEncoder1e5</span><span class="op" id="8213742">(</span><span class="ident" id="8213743">b</span>&nbsp;<span class="op" id="8213745">*</span><span class="ident" id="8213746">testing</span><span class="op" id="8213753">.</span><span class="ident" id="8213754">B</span><span class="op" id="8213755">)</span>&nbsp;<span class="op" id="8213757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213760">benchmarkEncoder</span><span class="op" id="8213776">(</span><span class="ident" id="8213777">b</span><span class="op" id="8213778">,</span>&nbsp;<span class="num" id="8213780">1e5</span><span class="op" id="8213783">)</span><br>
<span class="lineno">140</span><span class="op" id="8213785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8213788">func</span>&nbsp;<span class="ident" id="8213793">BenchmarkEncoder1e6</span><span class="op" id="8213812">(</span><span class="ident" id="8213813">b</span>&nbsp;<span class="op" id="8213815">*</span><span class="ident" id="8213816">testing</span><span class="op" id="8213823">.</span><span class="ident" id="8213824">B</span><span class="op" id="8213825">)</span>&nbsp;<span class="op" id="8213827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8213830">benchmarkEncoder</span><span class="op" id="8213846">(</span><span class="ident" id="8213847">b</span><span class="op" id="8213848">,</span>&nbsp;<span class="num" id="8213850">1e6</span><span class="op" id="8213853">)</span><br>
<span class="lineno"></span><span class="op" id="8213855">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
