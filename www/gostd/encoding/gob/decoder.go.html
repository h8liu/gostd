<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3092463">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3092518">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3092572">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3092623">package</span>&nbsp;<span class="ident" id="3092631">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3092636">import</span>&nbsp;<span class="op" id="3092643">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3092646">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3092655">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3092665">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3092671">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3092682">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3092689">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3092692">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="3092761">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="3092833">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="3092864">const</span>&nbsp;<span class="ident" id="3092870">tooBig</span>&nbsp;<span class="op" id="3092877">=</span>&nbsp;<span class="num" id="3092879">1</span>&nbsp;<span class="op" id="3092881">&lt;&lt;</span>&nbsp;<span class="num" id="3092884">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="3092888">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3092964">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3092996">type</span>&nbsp;<span class="ident" id="3093001">Decoder</span>&nbsp;<span class="keyword" id="3093009">struct</span>&nbsp;<span class="op" id="3093016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093019">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3093032">sync</span><span class="op" id="3093036">.</span><span class="ident" id="3093037">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093072">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093114">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3093127">io</span><span class="op" id="3093129">.</span><span class="ident" id="3093130">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093167">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093190">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3093203">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093243">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093284">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3093297">map</span><span class="op" id="3093300">[</span><span class="ident" id="3093301">typeId</span><span class="op" id="3093307">]</span><span class="op" id="3093308">*</span><span class="ident" id="3093309">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093337">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093381">decoderCache</span>&nbsp;<span class="keyword" id="3093394">map</span><span class="op" id="3093397">[</span><span class="ident" id="3093398">reflect</span><span class="op" id="3093405">.</span><span class="ident" id="3093406">Type</span><span class="op" id="3093410">]</span><span class="keyword" id="3093411">map</span><span class="op" id="3093414">[</span><span class="ident" id="3093415">typeId</span><span class="op" id="3093421">]</span><span class="op" id="3093422">*</span><span class="op" id="3093423">*</span><span class="ident" id="3093424">decEngine</span>&nbsp;<span class="comment" id="3093434">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093464">ignorerCache</span>&nbsp;<span class="keyword" id="3093477">map</span><span class="op" id="3093480">[</span><span class="ident" id="3093481">typeId</span><span class="op" id="3093487">]</span><span class="op" id="3093488">*</span><span class="op" id="3093489">*</span><span class="ident" id="3093490">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093517">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093547">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3093560">*</span><span class="ident" id="3093561">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093600">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093652">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3093665">[</span><span class="op" id="3093666">]</span><span class="builtintype" id="3093667">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3093705">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093759">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3093772">error</span><br>
<span class="lineno"></span><span class="op" id="3093778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3093781">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="3093848">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3093919">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="3093936">func</span>&nbsp;<span class="ident" id="3093941">NewDecoder</span><span class="op" id="3093951">(</span><span class="ident" id="3093952">r</span>&nbsp;<span class="ident" id="3093954">io</span><span class="op" id="3093956">.</span><span class="ident" id="3093957">Reader</span><span class="op" id="3093963">)</span>&nbsp;<span class="op" id="3093965">*</span><span class="ident" id="3093966">Decoder</span>&nbsp;<span class="op" id="3093974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093977">dec</span>&nbsp;<span class="op" id="3093981">:=</span>&nbsp;<span class="builtinfunc" id="3093984">new</span><span class="op" id="3093987">(</span><span class="ident" id="3093988">Decoder</span><span class="op" id="3093995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093998">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094075">if</span>&nbsp;<span class="ident" id="3094078">_</span><span class="op" id="3094079">,</span>&nbsp;<span class="ident" id="3094081">ok</span>&nbsp;<span class="op" id="3094084">:=</span>&nbsp;<span class="ident" id="3094087">r</span><span class="op" id="3094088">.</span><span class="op" id="3094089">(</span><span class="ident" id="3094090">io</span><span class="op" id="3094092">.</span><span class="ident" id="3094093">ByteReader</span><span class="op" id="3094103">)</span><span class="op" id="3094104">;</span>&nbsp;<span class="op" id="3094106">!</span><span class="ident" id="3094107">ok</span>&nbsp;<span class="op" id="3094110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094114">r</span>&nbsp;<span class="op" id="3094116">=</span>&nbsp;<span class="ident" id="3094118">bufio</span><span class="op" id="3094123">.</span><span class="ident" id="3094124">NewReader</span><span class="op" id="3094133">(</span><span class="ident" id="3094134">r</span><span class="op" id="3094135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094141">dec</span><span class="op" id="3094144">.</span><span class="ident" id="3094145">r</span>&nbsp;<span class="op" id="3094147">=</span>&nbsp;<span class="ident" id="3094149">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094152">dec</span><span class="op" id="3094155">.</span><span class="ident" id="3094156">wireType</span>&nbsp;<span class="op" id="3094165">=</span>&nbsp;<span class="builtinfunc" id="3094167">make</span><span class="op" id="3094171">(</span><span class="keyword" id="3094172">map</span><span class="op" id="3094175">[</span><span class="ident" id="3094176">typeId</span><span class="op" id="3094182">]</span><span class="op" id="3094183">*</span><span class="ident" id="3094184">wireType</span><span class="op" id="3094192">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094195">dec</span><span class="op" id="3094198">.</span><span class="ident" id="3094199">decoderCache</span>&nbsp;<span class="op" id="3094212">=</span>&nbsp;<span class="builtinfunc" id="3094214">make</span><span class="op" id="3094218">(</span><span class="keyword" id="3094219">map</span><span class="op" id="3094222">[</span><span class="ident" id="3094223">reflect</span><span class="op" id="3094230">.</span><span class="ident" id="3094231">Type</span><span class="op" id="3094235">]</span><span class="keyword" id="3094236">map</span><span class="op" id="3094239">[</span><span class="ident" id="3094240">typeId</span><span class="op" id="3094246">]</span><span class="op" id="3094247">*</span><span class="op" id="3094248">*</span><span class="ident" id="3094249">decEngine</span><span class="op" id="3094258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094261">dec</span><span class="op" id="3094264">.</span><span class="ident" id="3094265">ignorerCache</span>&nbsp;<span class="op" id="3094278">=</span>&nbsp;<span class="builtinfunc" id="3094280">make</span><span class="op" id="3094284">(</span><span class="keyword" id="3094285">map</span><span class="op" id="3094288">[</span><span class="ident" id="3094289">typeId</span><span class="op" id="3094295">]</span><span class="op" id="3094296">*</span><span class="op" id="3094297">*</span><span class="ident" id="3094298">decEngine</span><span class="op" id="3094307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094310">dec</span><span class="op" id="3094313">.</span><span class="ident" id="3094314">countBuf</span>&nbsp;<span class="op" id="3094323">=</span>&nbsp;<span class="builtinfunc" id="3094325">make</span><span class="op" id="3094329">(</span><span class="op" id="3094330">[</span><span class="op" id="3094331">]</span><span class="builtintype" id="3094332">byte</span><span class="op" id="3094336">,</span>&nbsp;<span class="num" id="3094338">9</span><span class="op" id="3094339">)</span>&nbsp;<span class="comment" id="3094341">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094397">return</span>&nbsp;<span class="ident" id="3094404">dec</span><br>
<span class="lineno">50</span><span class="op" id="3094408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3094411">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3094455">func</span>&nbsp;<span class="op" id="3094460">(</span><span class="ident" id="3094461">dec</span>&nbsp;<span class="op" id="3094465">*</span><span class="ident" id="3094466">Decoder</span><span class="op" id="3094473">)</span>&nbsp;<span class="ident" id="3094475">recvType</span><span class="op" id="3094483">(</span><span class="ident" id="3094484">id</span>&nbsp;<span class="ident" id="3094487">typeId</span><span class="op" id="3094493">)</span>&nbsp;<span class="op" id="3094495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094498">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094551">if</span>&nbsp;<span class="ident" id="3094554">id</span>&nbsp;<span class="op" id="3094557">&lt;</span>&nbsp;<span class="ident" id="3094559">firstUserId</span>&nbsp;<span class="op" id="3094571">||</span>&nbsp;<span class="ident" id="3094574">dec</span><span class="op" id="3094577">.</span><span class="ident" id="3094578">wireType</span><span class="op" id="3094586">[</span><span class="ident" id="3094587">id</span><span class="op" id="3094589">]</span>&nbsp;<span class="op" id="3094591">!=</span>&nbsp;<span class="ident" id="3094594">nil</span>&nbsp;<span class="op" id="3094598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094602">dec</span><span class="op" id="3094605">.</span><span class="ident" id="3094606">err</span>&nbsp;<span class="op" id="3094610">=</span>&nbsp;<span class="ident" id="3094612">errors</span><span class="op" id="3094618">.</span><span class="ident" id="3094619">New</span><span class="op" id="3094622">(</span><span class="string" id="3094623">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="3094653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094657">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094669">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094679">wire</span>&nbsp;<span class="op" id="3094684">:=</span>&nbsp;<span class="builtinfunc" id="3094687">new</span><span class="op" id="3094690">(</span><span class="ident" id="3094691">wireType</span><span class="op" id="3094699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094702">dec</span><span class="op" id="3094705">.</span><span class="ident" id="3094706">decodeValue</span><span class="op" id="3094717">(</span><span class="ident" id="3094718">tWireType</span><span class="op" id="3094727">,</span>&nbsp;<span class="ident" id="3094729">reflect</span><span class="op" id="3094736">.</span><span class="ident" id="3094737">ValueOf</span><span class="op" id="3094744">(</span><span class="ident" id="3094745">wire</span><span class="op" id="3094749">)</span><span class="op" id="3094750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094753">if</span>&nbsp;<span class="ident" id="3094756">dec</span><span class="op" id="3094759">.</span><span class="ident" id="3094760">err</span>&nbsp;<span class="op" id="3094764">!=</span>&nbsp;<span class="ident" id="3094767">nil</span>&nbsp;<span class="op" id="3094771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094775">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094786">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094821">dec</span><span class="op" id="3094824">.</span><span class="ident" id="3094825">wireType</span><span class="op" id="3094833">[</span><span class="ident" id="3094834">id</span><span class="op" id="3094836">]</span>&nbsp;<span class="op" id="3094838">=</span>&nbsp;<span class="ident" id="3094840">wire</span><br>
<span class="lineno"></span><span class="op" id="3094845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3094848">var</span>&nbsp;<span class="ident" id="3094852">errBadCount</span>&nbsp;<span class="op" id="3094864">=</span>&nbsp;<span class="ident" id="3094866">errors</span><span class="op" id="3094872">.</span><span class="ident" id="3094873">New</span><span class="op" id="3094876">(</span><span class="string" id="3094877">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="3094901">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3094904">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="3094990">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="3095078">func</span>&nbsp;<span class="op" id="3095083">(</span><span class="ident" id="3095084">dec</span>&nbsp;<span class="op" id="3095088">*</span><span class="ident" id="3095089">Decoder</span><span class="op" id="3095096">)</span>&nbsp;<span class="ident" id="3095098">recvMessage</span><span class="op" id="3095109">(</span><span class="op" id="3095110">)</span>&nbsp;<span class="builtintype" id="3095112">bool</span>&nbsp;<span class="op" id="3095117">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095120">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095138">nbytes</span><span class="op" id="3095144">,</span>&nbsp;<span class="ident" id="3095146">_</span><span class="op" id="3095147">,</span>&nbsp;<span class="ident" id="3095149">err</span>&nbsp;<span class="op" id="3095153">:=</span>&nbsp;<span class="ident" id="3095156">decodeUintReader</span><span class="op" id="3095172">(</span><span class="ident" id="3095173">dec</span><span class="op" id="3095176">.</span><span class="ident" id="3095177">r</span><span class="op" id="3095178">,</span>&nbsp;<span class="ident" id="3095180">dec</span><span class="op" id="3095183">.</span><span class="ident" id="3095184">countBuf</span><span class="op" id="3095192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095195">if</span>&nbsp;<span class="ident" id="3095198">err</span>&nbsp;<span class="op" id="3095202">!=</span>&nbsp;<span class="ident" id="3095205">nil</span>&nbsp;<span class="op" id="3095209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095213">dec</span><span class="op" id="3095216">.</span><span class="ident" id="3095217">err</span>&nbsp;<span class="op" id="3095221">=</span>&nbsp;<span class="ident" id="3095223">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095229">return</span>&nbsp;<span class="builtintype" id="3095236">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095246">if</span>&nbsp;<span class="ident" id="3095249">nbytes</span>&nbsp;<span class="op" id="3095256">&gt;=</span>&nbsp;<span class="ident" id="3095259">tooBig</span>&nbsp;<span class="op" id="3095266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095270">dec</span><span class="op" id="3095273">.</span><span class="ident" id="3095274">err</span>&nbsp;<span class="op" id="3095278">=</span>&nbsp;<span class="ident" id="3095280">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095294">return</span>&nbsp;<span class="builtintype" id="3095301">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095308">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095311">dec</span><span class="op" id="3095314">.</span><span class="ident" id="3095315">readMessage</span><span class="op" id="3095326">(</span><span class="builtintype" id="3095327">int</span><span class="op" id="3095330">(</span><span class="ident" id="3095331">nbytes</span><span class="op" id="3095337">)</span><span class="op" id="3095338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095341">return</span>&nbsp;<span class="ident" id="3095348">dec</span><span class="op" id="3095351">.</span><span class="ident" id="3095352">err</span>&nbsp;<span class="op" id="3095356">==</span>&nbsp;<span class="ident" id="3095359">nil</span><br>
<span class="lineno"></span><span class="op" id="3095363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3095366">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="3095425">func</span>&nbsp;<span class="op" id="3095430">(</span><span class="ident" id="3095431">dec</span>&nbsp;<span class="op" id="3095435">*</span><span class="ident" id="3095436">Decoder</span><span class="op" id="3095443">)</span>&nbsp;<span class="ident" id="3095445">readMessage</span><span class="op" id="3095456">(</span><span class="ident" id="3095457">nbytes</span>&nbsp;<span class="builtintype" id="3095464">int</span><span class="op" id="3095467">)</span>&nbsp;<span class="op" id="3095469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095472">if</span>&nbsp;<span class="ident" id="3095475">dec</span><span class="op" id="3095478">.</span><span class="ident" id="3095479">buf</span><span class="op" id="3095482">.</span><span class="ident" id="3095483">Len</span><span class="op" id="3095486">(</span><span class="op" id="3095487">)</span>&nbsp;<span class="op" id="3095489">!=</span>&nbsp;<span class="num" id="3095492">0</span>&nbsp;<span class="op" id="3095494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095498">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3095542">panic</span><span class="op" id="3095547">(</span><span class="string" id="3095548">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="3095574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095577">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095580">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095598">dec</span><span class="op" id="3095601">.</span><span class="ident" id="3095602">buf</span><span class="op" id="3095605">.</span><span class="ident" id="3095606">Size</span><span class="op" id="3095610">(</span><span class="ident" id="3095611">nbytes</span><span class="op" id="3095617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095620">_</span><span class="op" id="3095621">,</span>&nbsp;<span class="ident" id="3095623">dec</span><span class="op" id="3095626">.</span><span class="ident" id="3095627">err</span>&nbsp;<span class="op" id="3095631">=</span>&nbsp;<span class="ident" id="3095633">io</span><span class="op" id="3095635">.</span><span class="ident" id="3095636">ReadFull</span><span class="op" id="3095644">(</span><span class="ident" id="3095645">dec</span><span class="op" id="3095648">.</span><span class="ident" id="3095649">r</span><span class="op" id="3095650">,</span>&nbsp;<span class="ident" id="3095652">dec</span><span class="op" id="3095655">.</span><span class="ident" id="3095656">buf</span><span class="op" id="3095659">.</span><span class="ident" id="3095660">Bytes</span><span class="op" id="3095665">(</span><span class="op" id="3095666">)</span><span class="op" id="3095667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095670">if</span>&nbsp;<span class="ident" id="3095673">dec</span><span class="op" id="3095676">.</span><span class="ident" id="3095677">err</span>&nbsp;<span class="op" id="3095681">!=</span>&nbsp;<span class="ident" id="3095684">nil</span>&nbsp;<span class="op" id="3095688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095692">if</span>&nbsp;<span class="ident" id="3095695">dec</span><span class="op" id="3095698">.</span><span class="ident" id="3095699">err</span>&nbsp;<span class="op" id="3095703">==</span>&nbsp;<span class="ident" id="3095706">io</span><span class="op" id="3095708">.</span><span class="ident" id="3095709">EOF</span>&nbsp;<span class="op" id="3095713">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095718">dec</span><span class="op" id="3095721">.</span><span class="ident" id="3095722">err</span>&nbsp;<span class="op" id="3095726">=</span>&nbsp;<span class="ident" id="3095728">io</span><span class="op" id="3095730">.</span><span class="ident" id="3095731">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095753">}</span><br>
<span class="lineno"></span><span class="op" id="3095755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3095758">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="3095839">func</span>&nbsp;<span class="ident" id="3095844">toInt</span><span class="op" id="3095849">(</span><span class="ident" id="3095850">x</span>&nbsp;<span class="ident" id="3095852">uint64</span><span class="op" id="3095858">)</span>&nbsp;<span class="ident" id="3095860">int64</span>&nbsp;<span class="op" id="3095866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095869">i</span>&nbsp;<span class="op" id="3095871">:=</span>&nbsp;<span class="ident" id="3095874">int64</span><span class="op" id="3095879">(</span><span class="ident" id="3095880">x</span>&nbsp;<span class="op" id="3095882">&gt;&gt;</span>&nbsp;<span class="num" id="3095885">1</span><span class="op" id="3095886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095889">if</span>&nbsp;<span class="ident" id="3095892">x</span><span class="op" id="3095893">&amp;</span><span class="num" id="3095894">1</span>&nbsp;<span class="op" id="3095896">!=</span>&nbsp;<span class="num" id="3095899">0</span>&nbsp;<span class="op" id="3095901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095905">i</span>&nbsp;<span class="op" id="3095907">=</span>&nbsp;<span class="op" id="3095909">^</span><span class="ident" id="3095910">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095916">return</span>&nbsp;<span class="ident" id="3095923">i</span><br>
<span class="lineno"></span><span class="op" id="3095925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3095928">func</span>&nbsp;<span class="op" id="3095933">(</span><span class="ident" id="3095934">dec</span>&nbsp;<span class="op" id="3095938">*</span><span class="ident" id="3095939">Decoder</span><span class="op" id="3095946">)</span>&nbsp;<span class="ident" id="3095948">nextInt</span><span class="op" id="3095955">(</span><span class="op" id="3095956">)</span>&nbsp;<span class="ident" id="3095958">int64</span>&nbsp;<span class="op" id="3095964">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095967">n</span><span class="op" id="3095968">,</span>&nbsp;<span class="ident" id="3095970">_</span><span class="op" id="3095971">,</span>&nbsp;<span class="ident" id="3095973">err</span>&nbsp;<span class="op" id="3095977">:=</span>&nbsp;<span class="ident" id="3095980">decodeUintReader</span><span class="op" id="3095996">(</span><span class="op" id="3095997">&amp;</span><span class="ident" id="3095998">dec</span><span class="op" id="3096001">.</span><span class="ident" id="3096002">buf</span><span class="op" id="3096005">,</span>&nbsp;<span class="ident" id="3096007">dec</span><span class="op" id="3096010">.</span><span class="ident" id="3096011">countBuf</span><span class="op" id="3096019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096022">if</span>&nbsp;<span class="ident" id="3096025">err</span>&nbsp;<span class="op" id="3096029">!=</span>&nbsp;<span class="ident" id="3096032">nil</span>&nbsp;<span class="op" id="3096036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096040">dec</span><span class="op" id="3096043">.</span><span class="ident" id="3096044">err</span>&nbsp;<span class="op" id="3096048">=</span>&nbsp;<span class="ident" id="3096050">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096058">return</span>&nbsp;<span class="ident" id="3096065">toInt</span><span class="op" id="3096070">(</span><span class="ident" id="3096071">n</span><span class="op" id="3096072">)</span><br>
<span class="lineno">120</span><span class="op" id="3096074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3096077">func</span>&nbsp;<span class="op" id="3096082">(</span><span class="ident" id="3096083">dec</span>&nbsp;<span class="op" id="3096087">*</span><span class="ident" id="3096088">Decoder</span><span class="op" id="3096095">)</span>&nbsp;<span class="ident" id="3096097">nextUint</span><span class="op" id="3096105">(</span><span class="op" id="3096106">)</span>&nbsp;<span class="ident" id="3096108">uint64</span>&nbsp;<span class="op" id="3096115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096118">n</span><span class="op" id="3096119">,</span>&nbsp;<span class="ident" id="3096121">_</span><span class="op" id="3096122">,</span>&nbsp;<span class="ident" id="3096124">err</span>&nbsp;<span class="op" id="3096128">:=</span>&nbsp;<span class="ident" id="3096131">decodeUintReader</span><span class="op" id="3096147">(</span><span class="op" id="3096148">&amp;</span><span class="ident" id="3096149">dec</span><span class="op" id="3096152">.</span><span class="ident" id="3096153">buf</span><span class="op" id="3096156">,</span>&nbsp;<span class="ident" id="3096158">dec</span><span class="op" id="3096161">.</span><span class="ident" id="3096162">countBuf</span><span class="op" id="3096170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096173">if</span>&nbsp;<span class="ident" id="3096176">err</span>&nbsp;<span class="op" id="3096180">!=</span>&nbsp;<span class="ident" id="3096183">nil</span>&nbsp;<span class="op" id="3096187">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096191">dec</span><span class="op" id="3096194">.</span><span class="ident" id="3096195">err</span>&nbsp;<span class="op" id="3096199">=</span>&nbsp;<span class="ident" id="3096201">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096209">return</span>&nbsp;<span class="ident" id="3096216">n</span><br>
<span class="lineno"></span><span class="op" id="3096218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3096221">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="3096251">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="3096267">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="3096313">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="3096377">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="3096443">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3096508">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3096534">func</span>&nbsp;<span class="op" id="3096539">(</span><span class="ident" id="3096540">dec</span>&nbsp;<span class="op" id="3096544">*</span><span class="ident" id="3096545">Decoder</span><span class="op" id="3096552">)</span>&nbsp;<span class="ident" id="3096554">decodeTypeSequence</span><span class="op" id="3096572">(</span><span class="ident" id="3096573">isInterface</span>&nbsp;<span class="builtintype" id="3096585">bool</span><span class="op" id="3096589">)</span>&nbsp;<span class="ident" id="3096591">typeId</span>&nbsp;<span class="op" id="3096598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096601">for</span>&nbsp;<span class="ident" id="3096605">dec</span><span class="op" id="3096608">.</span><span class="ident" id="3096609">err</span>&nbsp;<span class="op" id="3096613">==</span>&nbsp;<span class="ident" id="3096616">nil</span>&nbsp;<span class="op" id="3096620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096624">if</span>&nbsp;<span class="ident" id="3096627">dec</span><span class="op" id="3096630">.</span><span class="ident" id="3096631">buf</span><span class="op" id="3096634">.</span><span class="ident" id="3096635">Len</span><span class="op" id="3096638">(</span><span class="op" id="3096639">)</span>&nbsp;<span class="op" id="3096641">==</span>&nbsp;<span class="num" id="3096644">0</span>&nbsp;<span class="op" id="3096646">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096651">if</span>&nbsp;<span class="op" id="3096654">!</span><span class="ident" id="3096655">dec</span><span class="op" id="3096658">.</span><span class="ident" id="3096659">recvMessage</span><span class="op" id="3096670">(</span><span class="op" id="3096671">)</span>&nbsp;<span class="op" id="3096673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096679">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096696">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096720">id</span>&nbsp;<span class="op" id="3096723">:=</span>&nbsp;<span class="ident" id="3096726">typeId</span><span class="op" id="3096732">(</span><span class="ident" id="3096733">dec</span><span class="op" id="3096736">.</span><span class="ident" id="3096737">nextInt</span><span class="op" id="3096744">(</span><span class="op" id="3096745">)</span><span class="op" id="3096746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096750">if</span>&nbsp;<span class="ident" id="3096753">id</span>&nbsp;<span class="op" id="3096756">&gt;=</span>&nbsp;<span class="num" id="3096759">0</span>&nbsp;<span class="op" id="3096761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096766">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096787">return</span>&nbsp;<span class="ident" id="3096794">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096799">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096803">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096843">dec</span><span class="op" id="3096846">.</span><span class="ident" id="3096847">recvType</span><span class="op" id="3096855">(</span><span class="op" id="3096856">-</span><span class="ident" id="3096857">id</span><span class="op" id="3096859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096863">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096924">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096982">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3097042">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097081">if</span>&nbsp;<span class="ident" id="3097084">dec</span><span class="op" id="3097087">.</span><span class="ident" id="3097088">buf</span><span class="op" id="3097091">.</span><span class="ident" id="3097092">Len</span><span class="op" id="3097095">(</span><span class="op" id="3097096">)</span>&nbsp;<span class="op" id="3097098">&gt;</span>&nbsp;<span class="num" id="3097100">0</span>&nbsp;<span class="op" id="3097102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097107">if</span>&nbsp;<span class="op" id="3097110">!</span><span class="ident" id="3097111">isInterface</span>&nbsp;<span class="op" id="3097123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097129">dec</span><span class="op" id="3097132">.</span><span class="ident" id="3097133">err</span>&nbsp;<span class="op" id="3097137">=</span>&nbsp;<span class="ident" id="3097139">errors</span><span class="op" id="3097145">.</span><span class="ident" id="3097146">New</span><span class="op" id="3097149">(</span><span class="string" id="3097150">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="3097172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097178">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097192">dec</span><span class="op" id="3097195">.</span><span class="ident" id="3097196">nextUint</span><span class="op" id="3097204">(</span><span class="op" id="3097205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097215">return</span>&nbsp;<span class="op" id="3097222">-</span><span class="num" id="3097223">1</span><br>
<span class="lineno">165</span><span class="op" id="3097225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3097228">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="3097292">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3097352">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="3097408">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3097459">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="3097508">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3097561">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="3097583">func</span>&nbsp;<span class="op" id="3097588">(</span><span class="ident" id="3097589">dec</span>&nbsp;<span class="op" id="3097593">*</span><span class="ident" id="3097594">Decoder</span><span class="op" id="3097601">)</span>&nbsp;<span class="ident" id="3097603">Decode</span><span class="op" id="3097609">(</span><span class="ident" id="3097610">e</span>&nbsp;<span class="keyword" id="3097612">interface</span><span class="op" id="3097621">{</span><span class="op" id="3097622">}</span><span class="op" id="3097623">)</span>&nbsp;<span class="builtintype" id="3097625">error</span>&nbsp;<span class="op" id="3097631">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097634">if</span>&nbsp;<span class="ident" id="3097637">e</span>&nbsp;<span class="op" id="3097639">==</span>&nbsp;<span class="ident" id="3097642">nil</span>&nbsp;<span class="op" id="3097646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097650">return</span>&nbsp;<span class="ident" id="3097657">dec</span><span class="op" id="3097660">.</span><span class="ident" id="3097661">DecodeValue</span><span class="op" id="3097672">(</span><span class="ident" id="3097673">reflect</span><span class="op" id="3097680">.</span><span class="ident" id="3097681">Value</span><span class="op" id="3097686">{</span><span class="op" id="3097687">}</span><span class="op" id="3097688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097694">value</span>&nbsp;<span class="op" id="3097700">:=</span>&nbsp;<span class="ident" id="3097703">reflect</span><span class="op" id="3097710">.</span><span class="ident" id="3097711">ValueOf</span><span class="op" id="3097718">(</span><span class="ident" id="3097719">e</span><span class="op" id="3097720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3097723">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3097793">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097848">if</span>&nbsp;<span class="ident" id="3097851">value</span><span class="op" id="3097856">.</span><span class="ident" id="3097857">Type</span><span class="op" id="3097861">(</span><span class="op" id="3097862">)</span><span class="op" id="3097863">.</span><span class="ident" id="3097864">Kind</span><span class="op" id="3097868">(</span><span class="op" id="3097869">)</span>&nbsp;<span class="op" id="3097871">!=</span>&nbsp;<span class="ident" id="3097874">reflect</span><span class="op" id="3097881">.</span><span class="ident" id="3097882">Ptr</span>&nbsp;<span class="op" id="3097886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097890">dec</span><span class="op" id="3097893">.</span><span class="ident" id="3097894">err</span>&nbsp;<span class="op" id="3097898">=</span>&nbsp;<span class="ident" id="3097900">errors</span><span class="op" id="3097906">.</span><span class="ident" id="3097907">New</span><span class="op" id="3097910">(</span><span class="string" id="3097911">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="3097954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097958">return</span>&nbsp;<span class="ident" id="3097965">dec</span><span class="op" id="3097968">.</span><span class="ident" id="3097969">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097974">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097977">return</span>&nbsp;<span class="ident" id="3097984">dec</span><span class="op" id="3097987">.</span><span class="ident" id="3097988">DecodeValue</span><span class="op" id="3097999">(</span><span class="ident" id="3098000">value</span><span class="op" id="3098005">)</span><br>
<span class="lineno"></span><span class="op" id="3098007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3098010">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="3098069">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="3098158">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="3098232">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="3098308">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3098366">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="3098388">func</span>&nbsp;<span class="op" id="3098393">(</span><span class="ident" id="3098394">dec</span>&nbsp;<span class="op" id="3098398">*</span><span class="ident" id="3098399">Decoder</span><span class="op" id="3098406">)</span>&nbsp;<span class="ident" id="3098408">DecodeValue</span><span class="op" id="3098419">(</span><span class="ident" id="3098420">v</span>&nbsp;<span class="ident" id="3098422">reflect</span><span class="op" id="3098429">.</span><span class="ident" id="3098430">Value</span><span class="op" id="3098435">)</span>&nbsp;<span class="builtintype" id="3098437">error</span>&nbsp;<span class="op" id="3098443">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098446">if</span>&nbsp;<span class="ident" id="3098449">v</span><span class="op" id="3098450">.</span><span class="ident" id="3098451">IsValid</span><span class="op" id="3098458">(</span><span class="op" id="3098459">)</span>&nbsp;<span class="op" id="3098461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098465">if</span>&nbsp;<span class="ident" id="3098468">v</span><span class="op" id="3098469">.</span><span class="ident" id="3098470">Kind</span><span class="op" id="3098474">(</span><span class="op" id="3098475">)</span>&nbsp;<span class="op" id="3098477">==</span>&nbsp;<span class="ident" id="3098480">reflect</span><span class="op" id="3098487">.</span><span class="ident" id="3098488">Ptr</span>&nbsp;<span class="op" id="3098492">&amp;&amp;</span>&nbsp;<span class="op" id="3098495">!</span><span class="ident" id="3098496">v</span><span class="op" id="3098497">.</span><span class="ident" id="3098498">IsNil</span><span class="op" id="3098503">(</span><span class="op" id="3098504">)</span>&nbsp;<span class="op" id="3098506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3098511">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098562">}</span>&nbsp;<span class="keyword" id="3098564">else</span>&nbsp;<span class="keyword" id="3098569">if</span>&nbsp;<span class="op" id="3098572">!</span><span class="ident" id="3098573">v</span><span class="op" id="3098574">.</span><span class="ident" id="3098575">CanSet</span><span class="op" id="3098581">(</span><span class="op" id="3098582">)</span>&nbsp;<span class="op" id="3098584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098589">return</span>&nbsp;<span class="ident" id="3098596">errors</span><span class="op" id="3098602">.</span><span class="ident" id="3098603">New</span><span class="op" id="3098606">(</span><span class="string" id="3098607">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="3098647">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3098657">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098707">dec</span><span class="op" id="3098710">.</span><span class="ident" id="3098711">mutex</span><span class="op" id="3098716">.</span><span class="ident" id="3098717">Lock</span><span class="op" id="3098721">(</span><span class="op" id="3098722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098725">defer</span>&nbsp;<span class="ident" id="3098731">dec</span><span class="op" id="3098734">.</span><span class="ident" id="3098735">mutex</span><span class="op" id="3098740">.</span><span class="ident" id="3098741">Unlock</span><span class="op" id="3098747">(</span><span class="op" id="3098748">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098752">dec</span><span class="op" id="3098755">.</span><span class="ident" id="3098756">buf</span><span class="op" id="3098759">.</span><span class="ident" id="3098760">Reset</span><span class="op" id="3098765">(</span><span class="op" id="3098766">)</span>&nbsp;<span class="comment" id="3098768">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098819">dec</span><span class="op" id="3098822">.</span><span class="ident" id="3098823">err</span>&nbsp;<span class="op" id="3098827">=</span>&nbsp;<span class="ident" id="3098829">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098834">id</span>&nbsp;<span class="op" id="3098837">:=</span>&nbsp;<span class="ident" id="3098840">dec</span><span class="op" id="3098843">.</span><span class="ident" id="3098844">decodeTypeSequence</span><span class="op" id="3098862">(</span><span class="builtintype" id="3098863">false</span><span class="op" id="3098868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098871">if</span>&nbsp;<span class="ident" id="3098874">dec</span><span class="op" id="3098877">.</span><span class="ident" id="3098878">err</span>&nbsp;<span class="op" id="3098882">==</span>&nbsp;<span class="ident" id="3098885">nil</span>&nbsp;<span class="op" id="3098889">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3098893">dec</span><span class="op" id="3098896">.</span><span class="ident" id="3098897">decodeValue</span><span class="op" id="3098908">(</span><span class="ident" id="3098909">id</span><span class="op" id="3098911">,</span>&nbsp;<span class="ident" id="3098913">v</span><span class="op" id="3098914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3098917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3098920">return</span>&nbsp;<span class="ident" id="3098927">dec</span><span class="op" id="3098930">.</span><span class="ident" id="3098931">err</span><br>
<span class="lineno"></span><span class="op" id="3098935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="3098938">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="3099018">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="3099103">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3099127">var</span>&nbsp;<span class="ident" id="3099131">debugFunc</span>&nbsp;<span class="keyword" id="3099141">func</span><span class="op" id="3099145">(</span><span class="ident" id="3099146">io</span><span class="op" id="3099148">.</span><span class="ident" id="3099149">Reader</span><span class="op" id="3099155">)</span>
</div>
</body>
</html>
