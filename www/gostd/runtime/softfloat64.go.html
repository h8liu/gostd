<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1706679">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1706735">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1706789">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1706840">//&nbsp;Software&nbsp;IEEE754&nbsp;64-bit&nbsp;floating&nbsp;point.</span><br>
<span class="lineno"></span><span class="comment" id="1706883">//&nbsp;Only&nbsp;referred&nbsp;to&nbsp;(and&nbsp;thus&nbsp;linked&nbsp;in)&nbsp;by&nbsp;arm&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="1706936">//&nbsp;and&nbsp;by&nbsp;tests&nbsp;in&nbsp;this&nbsp;directory.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1706972">package</span>&nbsp;<span class="ident" id="1706980">runtime</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1706989">const</span>&nbsp;<span class="op" id="1706995">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706998">mantbits64</span>&nbsp;<span class="builtintype" id="1707009">uint</span>&nbsp;<span class="op" id="1707014">=</span>&nbsp;<span class="num" id="1707016">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707020">expbits64</span>&nbsp;&nbsp;<span class="builtintype" id="1707031">uint</span>&nbsp;<span class="op" id="1707036">=</span>&nbsp;<span class="num" id="1707038">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707042">bias64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1707058">=</span>&nbsp;<span class="op" id="1707060">-</span><span class="num" id="1707061">1</span><span class="op" id="1707062">&lt;&lt;</span><span class="op" id="1707064">(</span><span class="ident" id="1707065">expbits64</span><span class="op" id="1707074">-</span><span class="num" id="1707075">1</span><span class="op" id="1707076">)</span>&nbsp;<span class="op" id="1707078">+</span>&nbsp;<span class="num" id="1707080">1</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707084">nan64</span>&nbsp;<span class="ident" id="1707090">uint64</span>&nbsp;<span class="op" id="1707097">=</span>&nbsp;<span class="op" id="1707099">(</span><span class="num" id="1707100">1</span><span class="op" id="1707101">&lt;&lt;</span><span class="ident" id="1707103">expbits64</span><span class="op" id="1707112">-</span><span class="num" id="1707113">1</span><span class="op" id="1707114">)</span><span class="op" id="1707115">&lt;&lt;</span><span class="ident" id="1707117">mantbits64</span>&nbsp;<span class="op" id="1707128">+</span>&nbsp;<span class="num" id="1707130">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707133">inf64</span>&nbsp;<span class="ident" id="1707139">uint64</span>&nbsp;<span class="op" id="1707146">=</span>&nbsp;<span class="op" id="1707148">(</span><span class="num" id="1707149">1</span><span class="op" id="1707150">&lt;&lt;</span><span class="ident" id="1707152">expbits64</span>&nbsp;<span class="op" id="1707162">-</span>&nbsp;<span class="num" id="1707164">1</span><span class="op" id="1707165">)</span>&nbsp;<span class="op" id="1707167">&lt;&lt;</span>&nbsp;<span class="ident" id="1707170">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707182">neg64</span>&nbsp;<span class="ident" id="1707188">uint64</span>&nbsp;<span class="op" id="1707195">=</span>&nbsp;<span class="num" id="1707197">1</span>&nbsp;<span class="op" id="1707199">&lt;&lt;</span>&nbsp;<span class="op" id="1707202">(</span><span class="ident" id="1707203">expbits64</span>&nbsp;<span class="op" id="1707213">+</span>&nbsp;<span class="ident" id="1707215">mantbits64</span><span class="op" id="1707225">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707229">mantbits32</span>&nbsp;<span class="builtintype" id="1707240">uint</span>&nbsp;<span class="op" id="1707245">=</span>&nbsp;<span class="num" id="1707247">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707251">expbits32</span>&nbsp;&nbsp;<span class="builtintype" id="1707262">uint</span>&nbsp;<span class="op" id="1707267">=</span>&nbsp;<span class="num" id="1707269">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707272">bias32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1707288">=</span>&nbsp;<span class="op" id="1707290">-</span><span class="num" id="1707291">1</span><span class="op" id="1707292">&lt;&lt;</span><span class="op" id="1707294">(</span><span class="ident" id="1707295">expbits32</span><span class="op" id="1707304">-</span><span class="num" id="1707305">1</span><span class="op" id="1707306">)</span>&nbsp;<span class="op" id="1707308">+</span>&nbsp;<span class="num" id="1707310">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707314">nan32</span>&nbsp;<span class="builtintype" id="1707320">uint32</span>&nbsp;<span class="op" id="1707327">=</span>&nbsp;<span class="op" id="1707329">(</span><span class="num" id="1707330">1</span><span class="op" id="1707331">&lt;&lt;</span><span class="ident" id="1707333">expbits32</span><span class="op" id="1707342">-</span><span class="num" id="1707343">1</span><span class="op" id="1707344">)</span><span class="op" id="1707345">&lt;&lt;</span><span class="ident" id="1707347">mantbits32</span>&nbsp;<span class="op" id="1707358">+</span>&nbsp;<span class="num" id="1707360">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707363">inf32</span>&nbsp;<span class="builtintype" id="1707369">uint32</span>&nbsp;<span class="op" id="1707376">=</span>&nbsp;<span class="op" id="1707378">(</span><span class="num" id="1707379">1</span><span class="op" id="1707380">&lt;&lt;</span><span class="ident" id="1707382">expbits32</span>&nbsp;<span class="op" id="1707392">-</span>&nbsp;<span class="num" id="1707394">1</span><span class="op" id="1707395">)</span>&nbsp;<span class="op" id="1707397">&lt;&lt;</span>&nbsp;<span class="ident" id="1707400">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707412">neg32</span>&nbsp;<span class="builtintype" id="1707418">uint32</span>&nbsp;<span class="op" id="1707425">=</span>&nbsp;<span class="num" id="1707427">1</span>&nbsp;<span class="op" id="1707429">&lt;&lt;</span>&nbsp;<span class="op" id="1707432">(</span><span class="ident" id="1707433">expbits32</span>&nbsp;<span class="op" id="1707443">+</span>&nbsp;<span class="ident" id="1707445">mantbits32</span><span class="op" id="1707455">)</span><br>
<span class="lineno"></span><span class="op" id="1707457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1707460">func</span>&nbsp;<span class="ident" id="1707465">funpack64</span><span class="op" id="1707474">(</span><span class="ident" id="1707475">f</span>&nbsp;<span class="ident" id="1707477">uint64</span><span class="op" id="1707483">)</span>&nbsp;<span class="op" id="1707485">(</span><span class="ident" id="1707486">sign</span><span class="op" id="1707490">,</span>&nbsp;<span class="ident" id="1707492">mant</span>&nbsp;<span class="ident" id="1707497">uint64</span><span class="op" id="1707503">,</span>&nbsp;<span class="ident" id="1707505">exp</span>&nbsp;<span class="builtintype" id="1707509">int</span><span class="op" id="1707512">,</span>&nbsp;<span class="ident" id="1707514">inf</span><span class="op" id="1707517">,</span>&nbsp;<span class="ident" id="1707519">nan</span>&nbsp;<span class="builtintype" id="1707523">bool</span><span class="op" id="1707527">)</span>&nbsp;<span class="op" id="1707529">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707532">sign</span>&nbsp;<span class="op" id="1707537">=</span>&nbsp;<span class="ident" id="1707539">f</span>&nbsp;<span class="op" id="1707541">&amp;</span>&nbsp;<span class="op" id="1707543">(</span><span class="num" id="1707544">1</span>&nbsp;<span class="op" id="1707546">&lt;&lt;</span>&nbsp;<span class="op" id="1707549">(</span><span class="ident" id="1707550">mantbits64</span>&nbsp;<span class="op" id="1707561">+</span>&nbsp;<span class="ident" id="1707563">expbits64</span><span class="op" id="1707572">)</span><span class="op" id="1707573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707576">mant</span>&nbsp;<span class="op" id="1707581">=</span>&nbsp;<span class="ident" id="1707583">f</span>&nbsp;<span class="op" id="1707585">&amp;</span>&nbsp;<span class="op" id="1707587">(</span><span class="num" id="1707588">1</span><span class="op" id="1707589">&lt;&lt;</span><span class="ident" id="1707591">mantbits64</span>&nbsp;<span class="op" id="1707602">-</span>&nbsp;<span class="num" id="1707604">1</span><span class="op" id="1707605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707608">exp</span>&nbsp;<span class="op" id="1707612">=</span>&nbsp;<span class="builtintype" id="1707614">int</span><span class="op" id="1707617">(</span><span class="ident" id="1707618">f</span><span class="op" id="1707619">&gt;&gt;</span><span class="ident" id="1707621">mantbits64</span><span class="op" id="1707631">)</span>&nbsp;<span class="op" id="1707633">&amp;</span>&nbsp;<span class="op" id="1707635">(</span><span class="num" id="1707636">1</span><span class="op" id="1707637">&lt;&lt;</span><span class="ident" id="1707639">expbits64</span>&nbsp;<span class="op" id="1707649">-</span>&nbsp;<span class="num" id="1707651">1</span><span class="op" id="1707652">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707656">switch</span>&nbsp;<span class="ident" id="1707663">exp</span>&nbsp;<span class="op" id="1707667">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707670">case</span>&nbsp;<span class="num" id="1707675">1</span><span class="op" id="1707676">&lt;&lt;</span><span class="ident" id="1707678">expbits64</span>&nbsp;<span class="op" id="1707688">-</span>&nbsp;<span class="num" id="1707690">1</span><span class="op" id="1707691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707695">if</span>&nbsp;<span class="ident" id="1707698">mant</span>&nbsp;<span class="op" id="1707703">!=</span>&nbsp;<span class="num" id="1707706">0</span>&nbsp;<span class="op" id="1707708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707713">nan</span>&nbsp;<span class="op" id="1707717">=</span>&nbsp;<span class="builtintype" id="1707719">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707727">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707736">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707740">inf</span>&nbsp;<span class="op" id="1707744">=</span>&nbsp;<span class="builtintype" id="1707746">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707753">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707762">case</span>&nbsp;<span class="num" id="1707767">0</span><span class="op" id="1707768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1707772">//&nbsp;denormalized</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707790">if</span>&nbsp;<span class="ident" id="1707793">mant</span>&nbsp;<span class="op" id="1707798">!=</span>&nbsp;<span class="num" id="1707801">0</span>&nbsp;<span class="op" id="1707803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707808">exp</span>&nbsp;<span class="op" id="1707812">+=</span>&nbsp;<span class="ident" id="1707815">bias64</span>&nbsp;<span class="op" id="1707822">+</span>&nbsp;<span class="num" id="1707824">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707829">for</span>&nbsp;<span class="ident" id="1707833">mant</span>&nbsp;<span class="op" id="1707838">&lt;</span>&nbsp;<span class="num" id="1707840">1</span><span class="op" id="1707841">&lt;&lt;</span><span class="ident" id="1707843">mantbits64</span>&nbsp;<span class="op" id="1707854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707860">mant</span>&nbsp;<span class="op" id="1707865">&lt;&lt;=</span>&nbsp;<span class="num" id="1707869">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707875">exp</span><span class="op" id="1707878">--</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707892">default</span><span class="op" id="1707899">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1707903">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707929">mant</span>&nbsp;<span class="op" id="1707934">|=</span>&nbsp;<span class="num" id="1707937">1</span>&nbsp;<span class="op" id="1707939">&lt;&lt;</span>&nbsp;<span class="ident" id="1707942">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707955">exp</span>&nbsp;<span class="op" id="1707959">+=</span>&nbsp;<span class="ident" id="1707962">bias64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707973">return</span><br>
<span class="lineno"></span><span class="op" id="1707980">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1707983">func</span>&nbsp;<span class="ident" id="1707988">funpack32</span><span class="op" id="1707997">(</span><span class="ident" id="1707998">f</span>&nbsp;<span class="builtintype" id="1708000">uint32</span><span class="op" id="1708006">)</span>&nbsp;<span class="op" id="1708008">(</span><span class="ident" id="1708009">sign</span><span class="op" id="1708013">,</span>&nbsp;<span class="ident" id="1708015">mant</span>&nbsp;<span class="builtintype" id="1708020">uint32</span><span class="op" id="1708026">,</span>&nbsp;<span class="ident" id="1708028">exp</span>&nbsp;<span class="builtintype" id="1708032">int</span><span class="op" id="1708035">,</span>&nbsp;<span class="ident" id="1708037">inf</span><span class="op" id="1708040">,</span>&nbsp;<span class="ident" id="1708042">nan</span>&nbsp;<span class="builtintype" id="1708046">bool</span><span class="op" id="1708050">)</span>&nbsp;<span class="op" id="1708052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708055">sign</span>&nbsp;<span class="op" id="1708060">=</span>&nbsp;<span class="ident" id="1708062">f</span>&nbsp;<span class="op" id="1708064">&amp;</span>&nbsp;<span class="op" id="1708066">(</span><span class="num" id="1708067">1</span>&nbsp;<span class="op" id="1708069">&lt;&lt;</span>&nbsp;<span class="op" id="1708072">(</span><span class="ident" id="1708073">mantbits32</span>&nbsp;<span class="op" id="1708084">+</span>&nbsp;<span class="ident" id="1708086">expbits32</span><span class="op" id="1708095">)</span><span class="op" id="1708096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708099">mant</span>&nbsp;<span class="op" id="1708104">=</span>&nbsp;<span class="ident" id="1708106">f</span>&nbsp;<span class="op" id="1708108">&amp;</span>&nbsp;<span class="op" id="1708110">(</span><span class="num" id="1708111">1</span><span class="op" id="1708112">&lt;&lt;</span><span class="ident" id="1708114">mantbits32</span>&nbsp;<span class="op" id="1708125">-</span>&nbsp;<span class="num" id="1708127">1</span><span class="op" id="1708128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708131">exp</span>&nbsp;<span class="op" id="1708135">=</span>&nbsp;<span class="builtintype" id="1708137">int</span><span class="op" id="1708140">(</span><span class="ident" id="1708141">f</span><span class="op" id="1708142">&gt;&gt;</span><span class="ident" id="1708144">mantbits32</span><span class="op" id="1708154">)</span>&nbsp;<span class="op" id="1708156">&amp;</span>&nbsp;<span class="op" id="1708158">(</span><span class="num" id="1708159">1</span><span class="op" id="1708160">&lt;&lt;</span><span class="ident" id="1708162">expbits32</span>&nbsp;<span class="op" id="1708172">-</span>&nbsp;<span class="num" id="1708174">1</span><span class="op" id="1708175">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708179">switch</span>&nbsp;<span class="ident" id="1708186">exp</span>&nbsp;<span class="op" id="1708190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708193">case</span>&nbsp;<span class="num" id="1708198">1</span><span class="op" id="1708199">&lt;&lt;</span><span class="ident" id="1708201">expbits32</span>&nbsp;<span class="op" id="1708211">-</span>&nbsp;<span class="num" id="1708213">1</span><span class="op" id="1708214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708218">if</span>&nbsp;<span class="ident" id="1708221">mant</span>&nbsp;<span class="op" id="1708226">!=</span>&nbsp;<span class="num" id="1708229">0</span>&nbsp;<span class="op" id="1708231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708236">nan</span>&nbsp;<span class="op" id="1708240">=</span>&nbsp;<span class="builtintype" id="1708242">true</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708250">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708263">inf</span>&nbsp;<span class="op" id="1708267">=</span>&nbsp;<span class="builtintype" id="1708269">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708276">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708285">case</span>&nbsp;<span class="num" id="1708290">0</span><span class="op" id="1708291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1708295">//&nbsp;denormalized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708313">if</span>&nbsp;<span class="ident" id="1708316">mant</span>&nbsp;<span class="op" id="1708321">!=</span>&nbsp;<span class="num" id="1708324">0</span>&nbsp;<span class="op" id="1708326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708331">exp</span>&nbsp;<span class="op" id="1708335">+=</span>&nbsp;<span class="ident" id="1708338">bias32</span>&nbsp;<span class="op" id="1708345">+</span>&nbsp;<span class="num" id="1708347">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708352">for</span>&nbsp;<span class="ident" id="1708356">mant</span>&nbsp;<span class="op" id="1708361">&lt;</span>&nbsp;<span class="num" id="1708363">1</span><span class="op" id="1708364">&lt;&lt;</span><span class="ident" id="1708366">mantbits32</span>&nbsp;<span class="op" id="1708377">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708383">mant</span>&nbsp;<span class="op" id="1708388">&lt;&lt;=</span>&nbsp;<span class="num" id="1708392">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708398">exp</span><span class="op" id="1708401">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708415">default</span><span class="op" id="1708422">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1708426">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708452">mant</span>&nbsp;<span class="op" id="1708457">|=</span>&nbsp;<span class="num" id="1708460">1</span>&nbsp;<span class="op" id="1708462">&lt;&lt;</span>&nbsp;<span class="ident" id="1708465">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708478">exp</span>&nbsp;<span class="op" id="1708482">+=</span>&nbsp;<span class="ident" id="1708485">bias32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708493">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708496">return</span><br>
<span class="lineno"></span><span class="op" id="1708503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1708506">func</span>&nbsp;<span class="ident" id="1708511">fpack64</span><span class="op" id="1708518">(</span><span class="ident" id="1708519">sign</span><span class="op" id="1708523">,</span>&nbsp;<span class="ident" id="1708525">mant</span>&nbsp;<span class="ident" id="1708530">uint64</span><span class="op" id="1708536">,</span>&nbsp;<span class="ident" id="1708538">exp</span>&nbsp;<span class="builtintype" id="1708542">int</span><span class="op" id="1708545">,</span>&nbsp;<span class="ident" id="1708547">trunc</span>&nbsp;<span class="ident" id="1708553">uint64</span><span class="op" id="1708559">)</span>&nbsp;<span class="ident" id="1708561">uint64</span>&nbsp;<span class="op" id="1708568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708571">mant0</span><span class="op" id="1708576">,</span>&nbsp;<span class="ident" id="1708578">exp0</span><span class="op" id="1708582">,</span>&nbsp;<span class="ident" id="1708584">trunc0</span>&nbsp;<span class="op" id="1708591">:=</span>&nbsp;<span class="ident" id="1708594">mant</span><span class="op" id="1708598">,</span>&nbsp;<span class="ident" id="1708600">exp</span><span class="op" id="1708603">,</span>&nbsp;<span class="ident" id="1708605">trunc</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708612">if</span>&nbsp;<span class="ident" id="1708615">mant</span>&nbsp;<span class="op" id="1708620">==</span>&nbsp;<span class="num" id="1708623">0</span>&nbsp;<span class="op" id="1708625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708629">return</span>&nbsp;<span class="ident" id="1708636">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708645">for</span>&nbsp;<span class="ident" id="1708649">mant</span>&nbsp;<span class="op" id="1708654">&lt;</span>&nbsp;<span class="num" id="1708656">1</span><span class="op" id="1708657">&lt;&lt;</span><span class="ident" id="1708659">mantbits64</span>&nbsp;<span class="op" id="1708670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708674">mant</span>&nbsp;<span class="op" id="1708679">&lt;&lt;=</span>&nbsp;<span class="num" id="1708683">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708687">exp</span><span class="op" id="1708690">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708697">for</span>&nbsp;<span class="ident" id="1708701">mant</span>&nbsp;<span class="op" id="1708706">&gt;=</span>&nbsp;<span class="num" id="1708709">4</span><span class="op" id="1708710">&lt;&lt;</span><span class="ident" id="1708712">mantbits64</span>&nbsp;<span class="op" id="1708723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708727">trunc</span>&nbsp;<span class="op" id="1708733">|=</span>&nbsp;<span class="ident" id="1708736">mant</span>&nbsp;<span class="op" id="1708741">&amp;</span>&nbsp;<span class="num" id="1708743">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708747">mant</span>&nbsp;<span class="op" id="1708752">&gt;&gt;=</span>&nbsp;<span class="num" id="1708756">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708760">exp</span><span class="op" id="1708763">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708770">if</span>&nbsp;<span class="ident" id="1708773">mant</span>&nbsp;<span class="op" id="1708778">&gt;=</span>&nbsp;<span class="num" id="1708781">2</span><span class="op" id="1708782">&lt;&lt;</span><span class="ident" id="1708784">mantbits64</span>&nbsp;<span class="op" id="1708795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708799">if</span>&nbsp;<span class="ident" id="1708802">mant</span><span class="op" id="1708806">&amp;</span><span class="num" id="1708807">1</span>&nbsp;<span class="op" id="1708809">!=</span>&nbsp;<span class="num" id="1708812">0</span>&nbsp;<span class="op" id="1708814">&amp;&amp;</span>&nbsp;<span class="op" id="1708817">(</span><span class="ident" id="1708818">trunc</span>&nbsp;<span class="op" id="1708824">!=</span>&nbsp;<span class="num" id="1708827">0</span>&nbsp;<span class="op" id="1708829">||</span>&nbsp;<span class="ident" id="1708832">mant</span><span class="op" id="1708836">&amp;</span><span class="num" id="1708837">2</span>&nbsp;<span class="op" id="1708839">!=</span>&nbsp;<span class="num" id="1708842">0</span><span class="op" id="1708843">)</span>&nbsp;<span class="op" id="1708845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708850">mant</span><span class="op" id="1708854">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708860">if</span>&nbsp;<span class="ident" id="1708863">mant</span>&nbsp;<span class="op" id="1708868">&gt;=</span>&nbsp;<span class="num" id="1708871">4</span><span class="op" id="1708872">&lt;&lt;</span><span class="ident" id="1708874">mantbits64</span>&nbsp;<span class="op" id="1708885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708891">mant</span>&nbsp;<span class="op" id="1708896">&gt;&gt;=</span>&nbsp;<span class="num" id="1708900">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708906">exp</span><span class="op" id="1708909">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708919">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708923">mant</span>&nbsp;<span class="op" id="1708928">&gt;&gt;=</span>&nbsp;<span class="num" id="1708932">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708936">exp</span><span class="op" id="1708939">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1708943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708946">if</span>&nbsp;<span class="ident" id="1708949">exp</span>&nbsp;<span class="op" id="1708953">&gt;=</span>&nbsp;<span class="num" id="1708956">1</span><span class="op" id="1708957">&lt;&lt;</span><span class="ident" id="1708959">expbits64</span><span class="op" id="1708968">-</span><span class="num" id="1708969">1</span><span class="op" id="1708970">+</span><span class="ident" id="1708971">bias64</span>&nbsp;<span class="op" id="1708978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708982">return</span>&nbsp;<span class="ident" id="1708989">sign</span>&nbsp;<span class="op" id="1708994">^</span>&nbsp;<span class="ident" id="1708996">inf64</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709006">if</span>&nbsp;<span class="ident" id="1709009">exp</span>&nbsp;<span class="op" id="1709013">&lt;</span>&nbsp;<span class="ident" id="1709015">bias64</span><span class="op" id="1709021">+</span><span class="num" id="1709022">1</span>&nbsp;<span class="op" id="1709024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709028">if</span>&nbsp;<span class="ident" id="1709031">exp</span>&nbsp;<span class="op" id="1709035">&lt;</span>&nbsp;<span class="ident" id="1709037">bias64</span><span class="op" id="1709043">-</span><span class="builtintype" id="1709044">int</span><span class="op" id="1709047">(</span><span class="ident" id="1709048">mantbits64</span><span class="op" id="1709058">)</span>&nbsp;<span class="op" id="1709060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709065">return</span>&nbsp;<span class="ident" id="1709072">sign</span>&nbsp;<span class="op" id="1709077">|</span>&nbsp;<span class="num" id="1709079">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709083">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1709087">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709118">mant</span><span class="op" id="1709122">,</span>&nbsp;<span class="ident" id="1709124">exp</span><span class="op" id="1709127">,</span>&nbsp;<span class="ident" id="1709129">trunc</span>&nbsp;<span class="op" id="1709135">=</span>&nbsp;<span class="ident" id="1709137">mant0</span><span class="op" id="1709142">,</span>&nbsp;<span class="ident" id="1709144">exp0</span><span class="op" id="1709148">,</span>&nbsp;<span class="ident" id="1709150">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709159">for</span>&nbsp;<span class="ident" id="1709163">exp</span>&nbsp;<span class="op" id="1709167">&lt;</span>&nbsp;<span class="ident" id="1709169">bias64</span>&nbsp;<span class="op" id="1709176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709181">trunc</span>&nbsp;<span class="op" id="1709187">|=</span>&nbsp;<span class="ident" id="1709190">mant</span>&nbsp;<span class="op" id="1709195">&amp;</span>&nbsp;<span class="num" id="1709197">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709202">mant</span>&nbsp;<span class="op" id="1709207">&gt;&gt;=</span>&nbsp;<span class="num" id="1709211">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709216">exp</span><span class="op" id="1709219">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709228">if</span>&nbsp;<span class="ident" id="1709231">mant</span><span class="op" id="1709235">&amp;</span><span class="num" id="1709236">1</span>&nbsp;<span class="op" id="1709238">!=</span>&nbsp;<span class="num" id="1709241">0</span>&nbsp;<span class="op" id="1709243">&amp;&amp;</span>&nbsp;<span class="op" id="1709246">(</span><span class="ident" id="1709247">trunc</span>&nbsp;<span class="op" id="1709253">!=</span>&nbsp;<span class="num" id="1709256">0</span>&nbsp;<span class="op" id="1709258">||</span>&nbsp;<span class="ident" id="1709261">mant</span><span class="op" id="1709265">&amp;</span><span class="num" id="1709266">2</span>&nbsp;<span class="op" id="1709268">!=</span>&nbsp;<span class="num" id="1709271">0</span><span class="op" id="1709272">)</span>&nbsp;<span class="op" id="1709274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709279">mant</span><span class="op" id="1709283">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709288">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709292">mant</span>&nbsp;<span class="op" id="1709297">&gt;&gt;=</span>&nbsp;<span class="num" id="1709301">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709305">exp</span><span class="op" id="1709308">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709313">if</span>&nbsp;<span class="ident" id="1709316">mant</span>&nbsp;<span class="op" id="1709321">&lt;</span>&nbsp;<span class="num" id="1709323">1</span><span class="op" id="1709324">&lt;&lt;</span><span class="ident" id="1709326">mantbits64</span>&nbsp;<span class="op" id="1709337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709342">return</span>&nbsp;<span class="ident" id="1709349">sign</span>&nbsp;<span class="op" id="1709354">|</span>&nbsp;<span class="ident" id="1709356">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709363">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709369">return</span>&nbsp;<span class="ident" id="1709376">sign</span>&nbsp;<span class="op" id="1709381">|</span>&nbsp;<span class="ident" id="1709383">uint64</span><span class="op" id="1709389">(</span><span class="ident" id="1709390">exp</span><span class="op" id="1709393">-</span><span class="ident" id="1709394">bias64</span><span class="op" id="1709400">)</span><span class="op" id="1709401">&lt;&lt;</span><span class="ident" id="1709403">mantbits64</span>&nbsp;<span class="op" id="1709414">|</span>&nbsp;<span class="ident" id="1709416">mant</span><span class="op" id="1709420">&amp;</span><span class="op" id="1709421">(</span><span class="num" id="1709422">1</span><span class="op" id="1709423">&lt;&lt;</span><span class="ident" id="1709425">mantbits64</span><span class="op" id="1709435">-</span><span class="num" id="1709436">1</span><span class="op" id="1709437">)</span><br>
<span class="lineno"></span><span class="op" id="1709439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1709442">func</span>&nbsp;<span class="ident" id="1709447">fpack32</span><span class="op" id="1709454">(</span><span class="ident" id="1709455">sign</span><span class="op" id="1709459">,</span>&nbsp;<span class="ident" id="1709461">mant</span>&nbsp;<span class="builtintype" id="1709466">uint32</span><span class="op" id="1709472">,</span>&nbsp;<span class="ident" id="1709474">exp</span>&nbsp;<span class="builtintype" id="1709478">int</span><span class="op" id="1709481">,</span>&nbsp;<span class="ident" id="1709483">trunc</span>&nbsp;<span class="builtintype" id="1709489">uint32</span><span class="op" id="1709495">)</span>&nbsp;<span class="builtintype" id="1709497">uint32</span>&nbsp;<span class="op" id="1709504">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709507">mant0</span><span class="op" id="1709512">,</span>&nbsp;<span class="ident" id="1709514">exp0</span><span class="op" id="1709518">,</span>&nbsp;<span class="ident" id="1709520">trunc0</span>&nbsp;<span class="op" id="1709527">:=</span>&nbsp;<span class="ident" id="1709530">mant</span><span class="op" id="1709534">,</span>&nbsp;<span class="ident" id="1709536">exp</span><span class="op" id="1709539">,</span>&nbsp;<span class="ident" id="1709541">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709548">if</span>&nbsp;<span class="ident" id="1709551">mant</span>&nbsp;<span class="op" id="1709556">==</span>&nbsp;<span class="num" id="1709559">0</span>&nbsp;<span class="op" id="1709561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709565">return</span>&nbsp;<span class="ident" id="1709572">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709581">for</span>&nbsp;<span class="ident" id="1709585">mant</span>&nbsp;<span class="op" id="1709590">&lt;</span>&nbsp;<span class="num" id="1709592">1</span><span class="op" id="1709593">&lt;&lt;</span><span class="ident" id="1709595">mantbits32</span>&nbsp;<span class="op" id="1709606">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709610">mant</span>&nbsp;<span class="op" id="1709615">&lt;&lt;=</span>&nbsp;<span class="num" id="1709619">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709623">exp</span><span class="op" id="1709626">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709633">for</span>&nbsp;<span class="ident" id="1709637">mant</span>&nbsp;<span class="op" id="1709642">&gt;=</span>&nbsp;<span class="num" id="1709645">4</span><span class="op" id="1709646">&lt;&lt;</span><span class="ident" id="1709648">mantbits32</span>&nbsp;<span class="op" id="1709659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709663">trunc</span>&nbsp;<span class="op" id="1709669">|=</span>&nbsp;<span class="ident" id="1709672">mant</span>&nbsp;<span class="op" id="1709677">&amp;</span>&nbsp;<span class="num" id="1709679">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709683">mant</span>&nbsp;<span class="op" id="1709688">&gt;&gt;=</span>&nbsp;<span class="num" id="1709692">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709696">exp</span><span class="op" id="1709699">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709706">if</span>&nbsp;<span class="ident" id="1709709">mant</span>&nbsp;<span class="op" id="1709714">&gt;=</span>&nbsp;<span class="num" id="1709717">2</span><span class="op" id="1709718">&lt;&lt;</span><span class="ident" id="1709720">mantbits32</span>&nbsp;<span class="op" id="1709731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709735">if</span>&nbsp;<span class="ident" id="1709738">mant</span><span class="op" id="1709742">&amp;</span><span class="num" id="1709743">1</span>&nbsp;<span class="op" id="1709745">!=</span>&nbsp;<span class="num" id="1709748">0</span>&nbsp;<span class="op" id="1709750">&amp;&amp;</span>&nbsp;<span class="op" id="1709753">(</span><span class="ident" id="1709754">trunc</span>&nbsp;<span class="op" id="1709760">!=</span>&nbsp;<span class="num" id="1709763">0</span>&nbsp;<span class="op" id="1709765">||</span>&nbsp;<span class="ident" id="1709768">mant</span><span class="op" id="1709772">&amp;</span><span class="num" id="1709773">2</span>&nbsp;<span class="op" id="1709775">!=</span>&nbsp;<span class="num" id="1709778">0</span><span class="op" id="1709779">)</span>&nbsp;<span class="op" id="1709781">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709786">mant</span><span class="op" id="1709790">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709796">if</span>&nbsp;<span class="ident" id="1709799">mant</span>&nbsp;<span class="op" id="1709804">&gt;=</span>&nbsp;<span class="num" id="1709807">4</span><span class="op" id="1709808">&lt;&lt;</span><span class="ident" id="1709810">mantbits32</span>&nbsp;<span class="op" id="1709821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709827">mant</span>&nbsp;<span class="op" id="1709832">&gt;&gt;=</span>&nbsp;<span class="num" id="1709836">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709842">exp</span><span class="op" id="1709845">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709851">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709859">mant</span>&nbsp;<span class="op" id="1709864">&gt;&gt;=</span>&nbsp;<span class="num" id="1709868">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709872">exp</span><span class="op" id="1709875">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709882">if</span>&nbsp;<span class="ident" id="1709885">exp</span>&nbsp;<span class="op" id="1709889">&gt;=</span>&nbsp;<span class="num" id="1709892">1</span><span class="op" id="1709893">&lt;&lt;</span><span class="ident" id="1709895">expbits32</span><span class="op" id="1709904">-</span><span class="num" id="1709905">1</span><span class="op" id="1709906">+</span><span class="ident" id="1709907">bias32</span>&nbsp;<span class="op" id="1709914">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709918">return</span>&nbsp;<span class="ident" id="1709925">sign</span>&nbsp;<span class="op" id="1709930">^</span>&nbsp;<span class="ident" id="1709932">inf32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709942">if</span>&nbsp;<span class="ident" id="1709945">exp</span>&nbsp;<span class="op" id="1709949">&lt;</span>&nbsp;<span class="ident" id="1709951">bias32</span><span class="op" id="1709957">+</span><span class="num" id="1709958">1</span>&nbsp;<span class="op" id="1709960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709964">if</span>&nbsp;<span class="ident" id="1709967">exp</span>&nbsp;<span class="op" id="1709971">&lt;</span>&nbsp;<span class="ident" id="1709973">bias32</span><span class="op" id="1709979">-</span><span class="builtintype" id="1709980">int</span><span class="op" id="1709983">(</span><span class="ident" id="1709984">mantbits32</span><span class="op" id="1709994">)</span>&nbsp;<span class="op" id="1709996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710001">return</span>&nbsp;<span class="ident" id="1710008">sign</span>&nbsp;<span class="op" id="1710013">|</span>&nbsp;<span class="num" id="1710015">0</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1710023">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710054">mant</span><span class="op" id="1710058">,</span>&nbsp;<span class="ident" id="1710060">exp</span><span class="op" id="1710063">,</span>&nbsp;<span class="ident" id="1710065">trunc</span>&nbsp;<span class="op" id="1710071">=</span>&nbsp;<span class="ident" id="1710073">mant0</span><span class="op" id="1710078">,</span>&nbsp;<span class="ident" id="1710080">exp0</span><span class="op" id="1710084">,</span>&nbsp;<span class="ident" id="1710086">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710095">for</span>&nbsp;<span class="ident" id="1710099">exp</span>&nbsp;<span class="op" id="1710103">&lt;</span>&nbsp;<span class="ident" id="1710105">bias32</span>&nbsp;<span class="op" id="1710112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710117">trunc</span>&nbsp;<span class="op" id="1710123">|=</span>&nbsp;<span class="ident" id="1710126">mant</span>&nbsp;<span class="op" id="1710131">&amp;</span>&nbsp;<span class="num" id="1710133">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710138">mant</span>&nbsp;<span class="op" id="1710143">&gt;&gt;=</span>&nbsp;<span class="num" id="1710147">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710152">exp</span><span class="op" id="1710155">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710164">if</span>&nbsp;<span class="ident" id="1710167">mant</span><span class="op" id="1710171">&amp;</span><span class="num" id="1710172">1</span>&nbsp;<span class="op" id="1710174">!=</span>&nbsp;<span class="num" id="1710177">0</span>&nbsp;<span class="op" id="1710179">&amp;&amp;</span>&nbsp;<span class="op" id="1710182">(</span><span class="ident" id="1710183">trunc</span>&nbsp;<span class="op" id="1710189">!=</span>&nbsp;<span class="num" id="1710192">0</span>&nbsp;<span class="op" id="1710194">||</span>&nbsp;<span class="ident" id="1710197">mant</span><span class="op" id="1710201">&amp;</span><span class="num" id="1710202">2</span>&nbsp;<span class="op" id="1710204">!=</span>&nbsp;<span class="num" id="1710207">0</span><span class="op" id="1710208">)</span>&nbsp;<span class="op" id="1710210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710215">mant</span><span class="op" id="1710219">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710228">mant</span>&nbsp;<span class="op" id="1710233">&gt;&gt;=</span>&nbsp;<span class="num" id="1710237">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710241">exp</span><span class="op" id="1710244">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710249">if</span>&nbsp;<span class="ident" id="1710252">mant</span>&nbsp;<span class="op" id="1710257">&lt;</span>&nbsp;<span class="num" id="1710259">1</span><span class="op" id="1710260">&lt;&lt;</span><span class="ident" id="1710262">mantbits32</span>&nbsp;<span class="op" id="1710273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710278">return</span>&nbsp;<span class="ident" id="1710285">sign</span>&nbsp;<span class="op" id="1710290">|</span>&nbsp;<span class="ident" id="1710292">mant</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710305">return</span>&nbsp;<span class="ident" id="1710312">sign</span>&nbsp;<span class="op" id="1710317">|</span>&nbsp;<span class="builtintype" id="1710319">uint32</span><span class="op" id="1710325">(</span><span class="ident" id="1710326">exp</span><span class="op" id="1710329">-</span><span class="ident" id="1710330">bias32</span><span class="op" id="1710336">)</span><span class="op" id="1710337">&lt;&lt;</span><span class="ident" id="1710339">mantbits32</span>&nbsp;<span class="op" id="1710350">|</span>&nbsp;<span class="ident" id="1710352">mant</span><span class="op" id="1710356">&amp;</span><span class="op" id="1710357">(</span><span class="num" id="1710358">1</span><span class="op" id="1710359">&lt;&lt;</span><span class="ident" id="1710361">mantbits32</span><span class="op" id="1710371">-</span><span class="num" id="1710372">1</span><span class="op" id="1710373">)</span><br>
<span class="lineno"></span><span class="op" id="1710375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="1710378">func</span>&nbsp;<span class="ident" id="1710383">fadd64</span><span class="op" id="1710389">(</span><span class="ident" id="1710390">f</span><span class="op" id="1710391">,</span>&nbsp;<span class="ident" id="1710393">g</span>&nbsp;<span class="ident" id="1710395">uint64</span><span class="op" id="1710401">)</span>&nbsp;<span class="ident" id="1710403">uint64</span>&nbsp;<span class="op" id="1710410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710413">fs</span><span class="op" id="1710415">,</span>&nbsp;<span class="ident" id="1710417">fm</span><span class="op" id="1710419">,</span>&nbsp;<span class="ident" id="1710421">fe</span><span class="op" id="1710423">,</span>&nbsp;<span class="ident" id="1710425">fi</span><span class="op" id="1710427">,</span>&nbsp;<span class="ident" id="1710429">fn</span>&nbsp;<span class="op" id="1710432">:=</span>&nbsp;<span class="ident" id="1710435">funpack64</span><span class="op" id="1710444">(</span><span class="ident" id="1710445">f</span><span class="op" id="1710446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710449">gs</span><span class="op" id="1710451">,</span>&nbsp;<span class="ident" id="1710453">gm</span><span class="op" id="1710455">,</span>&nbsp;<span class="ident" id="1710457">ge</span><span class="op" id="1710459">,</span>&nbsp;<span class="ident" id="1710461">gi</span><span class="op" id="1710463">,</span>&nbsp;<span class="ident" id="1710465">gn</span>&nbsp;<span class="op" id="1710468">:=</span>&nbsp;<span class="ident" id="1710471">funpack64</span><span class="op" id="1710480">(</span><span class="ident" id="1710481">g</span><span class="op" id="1710482">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1710486">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710505">switch</span>&nbsp;<span class="op" id="1710512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710515">case</span>&nbsp;<span class="ident" id="1710520">fn</span>&nbsp;<span class="op" id="1710523">||</span>&nbsp;<span class="ident" id="1710526">gn</span><span class="op" id="1710528">:</span>&nbsp;<span class="comment" id="1710530">//&nbsp;NaN&nbsp;+&nbsp;x&nbsp;or&nbsp;x&nbsp;+&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710560">return</span>&nbsp;<span class="ident" id="1710567">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710575">case</span>&nbsp;<span class="ident" id="1710580">fi</span>&nbsp;<span class="op" id="1710583">&amp;&amp;</span>&nbsp;<span class="ident" id="1710586">gi</span>&nbsp;<span class="op" id="1710589">&amp;&amp;</span>&nbsp;<span class="ident" id="1710592">fs</span>&nbsp;<span class="op" id="1710595">!=</span>&nbsp;<span class="ident" id="1710598">gs</span><span class="op" id="1710600">:</span>&nbsp;<span class="comment" id="1710602">//&nbsp;+Inf&nbsp;+&nbsp;-Inf&nbsp;or&nbsp;-Inf&nbsp;+&nbsp;+Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710640">return</span>&nbsp;<span class="ident" id="1710647">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710655">case</span>&nbsp;<span class="ident" id="1710660">fi</span><span class="op" id="1710662">:</span>&nbsp;<span class="comment" id="1710664">//&nbsp;±Inf&nbsp;+&nbsp;g&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710687">return</span>&nbsp;<span class="ident" id="1710694">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710698">case</span>&nbsp;<span class="ident" id="1710703">gi</span><span class="op" id="1710705">:</span>&nbsp;<span class="comment" id="1710707">//&nbsp;f&nbsp;+&nbsp;±Inf&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710730">return</span>&nbsp;<span class="ident" id="1710737">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710741">case</span>&nbsp;<span class="ident" id="1710746">fm</span>&nbsp;<span class="op" id="1710749">==</span>&nbsp;<span class="num" id="1710752">0</span>&nbsp;<span class="op" id="1710754">&amp;&amp;</span>&nbsp;<span class="ident" id="1710757">gm</span>&nbsp;<span class="op" id="1710760">==</span>&nbsp;<span class="num" id="1710763">0</span>&nbsp;<span class="op" id="1710765">&amp;&amp;</span>&nbsp;<span class="ident" id="1710768">fs</span>&nbsp;<span class="op" id="1710771">!=</span>&nbsp;<span class="num" id="1710774">0</span>&nbsp;<span class="op" id="1710776">&amp;&amp;</span>&nbsp;<span class="ident" id="1710779">gs</span>&nbsp;<span class="op" id="1710782">!=</span>&nbsp;<span class="num" id="1710785">0</span><span class="op" id="1710786">:</span>&nbsp;<span class="comment" id="1710788">//&nbsp;-0&nbsp;+&nbsp;-0&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710806">return</span>&nbsp;<span class="ident" id="1710813">f</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710817">case</span>&nbsp;<span class="ident" id="1710822">fm</span>&nbsp;<span class="op" id="1710825">==</span>&nbsp;<span class="num" id="1710828">0</span><span class="op" id="1710829">:</span>&nbsp;<span class="comment" id="1710831">//&nbsp;0&nbsp;+&nbsp;g&nbsp;=&nbsp;g&nbsp;but&nbsp;0&nbsp;+&nbsp;-0&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710862">if</span>&nbsp;<span class="ident" id="1710865">gm</span>&nbsp;<span class="op" id="1710868">==</span>&nbsp;<span class="num" id="1710871">0</span>&nbsp;<span class="op" id="1710873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710878">g</span>&nbsp;<span class="op" id="1710880">^=</span>&nbsp;<span class="ident" id="1710883">gs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710888">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710892">return</span>&nbsp;<span class="ident" id="1710899">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710903">case</span>&nbsp;<span class="ident" id="1710908">gm</span>&nbsp;<span class="op" id="1710911">==</span>&nbsp;<span class="num" id="1710914">0</span><span class="op" id="1710915">:</span>&nbsp;<span class="comment" id="1710917">//&nbsp;f&nbsp;+&nbsp;0&nbsp;=&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710932">return</span>&nbsp;<span class="ident" id="1710939">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710947">if</span>&nbsp;<span class="ident" id="1710950">fe</span>&nbsp;<span class="op" id="1710953">&lt;</span>&nbsp;<span class="ident" id="1710955">ge</span>&nbsp;<span class="op" id="1710958">||</span>&nbsp;<span class="ident" id="1710961">fe</span>&nbsp;<span class="op" id="1710964">==</span>&nbsp;<span class="ident" id="1710967">ge</span>&nbsp;<span class="op" id="1710970">&amp;&amp;</span>&nbsp;<span class="ident" id="1710973">fm</span>&nbsp;<span class="op" id="1710976">&lt;</span>&nbsp;<span class="ident" id="1710978">gm</span>&nbsp;<span class="op" id="1710981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710985">f</span><span class="op" id="1710986">,</span>&nbsp;<span class="ident" id="1710988">g</span><span class="op" id="1710989">,</span>&nbsp;<span class="ident" id="1710991">fs</span><span class="op" id="1710993">,</span>&nbsp;<span class="ident" id="1710995">fm</span><span class="op" id="1710997">,</span>&nbsp;<span class="ident" id="1710999">fe</span><span class="op" id="1711001">,</span>&nbsp;<span class="ident" id="1711003">gs</span><span class="op" id="1711005">,</span>&nbsp;<span class="ident" id="1711007">gm</span><span class="op" id="1711009">,</span>&nbsp;<span class="ident" id="1711011">ge</span>&nbsp;<span class="op" id="1711014">=</span>&nbsp;<span class="ident" id="1711016">g</span><span class="op" id="1711017">,</span>&nbsp;<span class="ident" id="1711019">f</span><span class="op" id="1711020">,</span>&nbsp;<span class="ident" id="1711022">gs</span><span class="op" id="1711024">,</span>&nbsp;<span class="ident" id="1711026">gm</span><span class="op" id="1711028">,</span>&nbsp;<span class="ident" id="1711030">ge</span><span class="op" id="1711032">,</span>&nbsp;<span class="ident" id="1711034">fs</span><span class="op" id="1711036">,</span>&nbsp;<span class="ident" id="1711038">fm</span><span class="op" id="1711040">,</span>&nbsp;<span class="ident" id="1711042">fe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711046">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711050">shift</span>&nbsp;<span class="op" id="1711056">:=</span>&nbsp;<span class="builtintype" id="1711059">uint</span><span class="op" id="1711063">(</span><span class="ident" id="1711064">fe</span>&nbsp;<span class="op" id="1711067">-</span>&nbsp;<span class="ident" id="1711069">ge</span><span class="op" id="1711071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711074">fm</span>&nbsp;<span class="op" id="1711077">&lt;&lt;=</span>&nbsp;<span class="num" id="1711081">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711084">gm</span>&nbsp;<span class="op" id="1711087">&lt;&lt;=</span>&nbsp;<span class="num" id="1711091">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711094">trunc</span>&nbsp;<span class="op" id="1711100">:=</span>&nbsp;<span class="ident" id="1711103">gm</span>&nbsp;<span class="op" id="1711106">&amp;</span>&nbsp;<span class="op" id="1711108">(</span><span class="num" id="1711109">1</span><span class="op" id="1711110">&lt;&lt;</span><span class="ident" id="1711112">shift</span>&nbsp;<span class="op" id="1711118">-</span>&nbsp;<span class="num" id="1711120">1</span><span class="op" id="1711121">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711124">gm</span>&nbsp;<span class="op" id="1711127">&gt;&gt;=</span>&nbsp;<span class="ident" id="1711131">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711138">if</span>&nbsp;<span class="ident" id="1711141">fs</span>&nbsp;<span class="op" id="1711144">==</span>&nbsp;<span class="ident" id="1711147">gs</span>&nbsp;<span class="op" id="1711150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711154">fm</span>&nbsp;<span class="op" id="1711157">+=</span>&nbsp;<span class="ident" id="1711160">gm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711164">}</span>&nbsp;<span class="keyword" id="1711166">else</span>&nbsp;<span class="op" id="1711171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711175">fm</span>&nbsp;<span class="op" id="1711178">-=</span>&nbsp;<span class="ident" id="1711181">gm</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711186">if</span>&nbsp;<span class="ident" id="1711189">trunc</span>&nbsp;<span class="op" id="1711195">!=</span>&nbsp;<span class="num" id="1711198">0</span>&nbsp;<span class="op" id="1711200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711205">fm</span><span class="op" id="1711207">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711218">if</span>&nbsp;<span class="ident" id="1711221">fm</span>&nbsp;<span class="op" id="1711224">==</span>&nbsp;<span class="num" id="1711227">0</span>&nbsp;<span class="op" id="1711229">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711233">fs</span>&nbsp;<span class="op" id="1711236">=</span>&nbsp;<span class="num" id="1711238">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711244">return</span>&nbsp;<span class="ident" id="1711251">fpack64</span><span class="op" id="1711258">(</span><span class="ident" id="1711259">fs</span><span class="op" id="1711261">,</span>&nbsp;<span class="ident" id="1711263">fm</span><span class="op" id="1711265">,</span>&nbsp;<span class="ident" id="1711267">fe</span><span class="op" id="1711269">-</span><span class="num" id="1711270">2</span><span class="op" id="1711271">,</span>&nbsp;<span class="ident" id="1711273">trunc</span><span class="op" id="1711278">)</span><br>
<span class="lineno"></span><span class="op" id="1711280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="1711283">func</span>&nbsp;<span class="ident" id="1711288">fsub64</span><span class="op" id="1711294">(</span><span class="ident" id="1711295">f</span><span class="op" id="1711296">,</span>&nbsp;<span class="ident" id="1711298">g</span>&nbsp;<span class="ident" id="1711300">uint64</span><span class="op" id="1711306">)</span>&nbsp;<span class="ident" id="1711308">uint64</span>&nbsp;<span class="op" id="1711315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711318">return</span>&nbsp;<span class="ident" id="1711325">fadd64</span><span class="op" id="1711331">(</span><span class="ident" id="1711332">f</span><span class="op" id="1711333">,</span>&nbsp;<span class="ident" id="1711335">fneg64</span><span class="op" id="1711341">(</span><span class="ident" id="1711342">g</span><span class="op" id="1711343">)</span><span class="op" id="1711344">)</span><br>
<span class="lineno"></span><span class="op" id="1711346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1711349">func</span>&nbsp;<span class="ident" id="1711354">fneg64</span><span class="op" id="1711360">(</span><span class="ident" id="1711361">f</span>&nbsp;<span class="ident" id="1711363">uint64</span><span class="op" id="1711369">)</span>&nbsp;<span class="ident" id="1711371">uint64</span>&nbsp;<span class="op" id="1711378">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711381">return</span>&nbsp;<span class="ident" id="1711388">f</span>&nbsp;<span class="op" id="1711390">^</span>&nbsp;<span class="op" id="1711392">(</span><span class="num" id="1711393">1</span>&nbsp;<span class="op" id="1711395">&lt;&lt;</span>&nbsp;<span class="op" id="1711398">(</span><span class="ident" id="1711399">mantbits64</span>&nbsp;<span class="op" id="1711410">+</span>&nbsp;<span class="ident" id="1711412">expbits64</span><span class="op" id="1711421">)</span><span class="op" id="1711422">)</span><br>
<span class="lineno"></span><span class="op" id="1711424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1711427">func</span>&nbsp;<span class="ident" id="1711432">fmul64</span><span class="op" id="1711438">(</span><span class="ident" id="1711439">f</span><span class="op" id="1711440">,</span>&nbsp;<span class="ident" id="1711442">g</span>&nbsp;<span class="ident" id="1711444">uint64</span><span class="op" id="1711450">)</span>&nbsp;<span class="ident" id="1711452">uint64</span>&nbsp;<span class="op" id="1711459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711462">fs</span><span class="op" id="1711464">,</span>&nbsp;<span class="ident" id="1711466">fm</span><span class="op" id="1711468">,</span>&nbsp;<span class="ident" id="1711470">fe</span><span class="op" id="1711472">,</span>&nbsp;<span class="ident" id="1711474">fi</span><span class="op" id="1711476">,</span>&nbsp;<span class="ident" id="1711478">fn</span>&nbsp;<span class="op" id="1711481">:=</span>&nbsp;<span class="ident" id="1711484">funpack64</span><span class="op" id="1711493">(</span><span class="ident" id="1711494">f</span><span class="op" id="1711495">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711498">gs</span><span class="op" id="1711500">,</span>&nbsp;<span class="ident" id="1711502">gm</span><span class="op" id="1711504">,</span>&nbsp;<span class="ident" id="1711506">ge</span><span class="op" id="1711508">,</span>&nbsp;<span class="ident" id="1711510">gi</span><span class="op" id="1711512">,</span>&nbsp;<span class="ident" id="1711514">gn</span>&nbsp;<span class="op" id="1711517">:=</span>&nbsp;<span class="ident" id="1711520">funpack64</span><span class="op" id="1711529">(</span><span class="ident" id="1711530">g</span><span class="op" id="1711531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1711535">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711554">switch</span>&nbsp;<span class="op" id="1711561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711564">case</span>&nbsp;<span class="ident" id="1711569">fn</span>&nbsp;<span class="op" id="1711572">||</span>&nbsp;<span class="ident" id="1711575">gn</span><span class="op" id="1711577">:</span>&nbsp;<span class="comment" id="1711579">//&nbsp;NaN&nbsp;*&nbsp;g&nbsp;or&nbsp;f&nbsp;*&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711609">return</span>&nbsp;<span class="ident" id="1711616">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711624">case</span>&nbsp;<span class="ident" id="1711629">fi</span>&nbsp;<span class="op" id="1711632">&amp;&amp;</span>&nbsp;<span class="ident" id="1711635">gi</span><span class="op" id="1711637">:</span>&nbsp;<span class="comment" id="1711639">//&nbsp;Inf&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711681">return</span>&nbsp;<span class="ident" id="1711688">f</span>&nbsp;<span class="op" id="1711690">^</span>&nbsp;<span class="ident" id="1711692">gs</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711697">case</span>&nbsp;<span class="ident" id="1711702">fi</span>&nbsp;<span class="op" id="1711705">&amp;&amp;</span>&nbsp;<span class="ident" id="1711708">gm</span>&nbsp;<span class="op" id="1711711">==</span>&nbsp;<span class="num" id="1711714">0</span><span class="op" id="1711715">,</span>&nbsp;<span class="ident" id="1711717">fm</span>&nbsp;<span class="op" id="1711720">==</span>&nbsp;<span class="num" id="1711723">0</span>&nbsp;<span class="op" id="1711725">&amp;&amp;</span>&nbsp;<span class="ident" id="1711728">gi</span><span class="op" id="1711730">:</span>&nbsp;<span class="comment" id="1711732">//&nbsp;0&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;*&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711761">return</span>&nbsp;<span class="ident" id="1711768">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711776">case</span>&nbsp;<span class="ident" id="1711781">fm</span>&nbsp;<span class="op" id="1711784">==</span>&nbsp;<span class="num" id="1711787">0</span><span class="op" id="1711788">:</span>&nbsp;<span class="comment" id="1711790">//&nbsp;0&nbsp;*&nbsp;x&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711826">return</span>&nbsp;<span class="ident" id="1711833">f</span>&nbsp;<span class="op" id="1711835">^</span>&nbsp;<span class="ident" id="1711837">gs</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711842">case</span>&nbsp;<span class="ident" id="1711847">gm</span>&nbsp;<span class="op" id="1711850">==</span>&nbsp;<span class="num" id="1711853">0</span><span class="op" id="1711854">:</span>&nbsp;<span class="comment" id="1711856">//&nbsp;x&nbsp;*&nbsp;0&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711892">return</span>&nbsp;<span class="ident" id="1711899">g</span>&nbsp;<span class="op" id="1711901">^</span>&nbsp;<span class="ident" id="1711903">fs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1711911">//&nbsp;53-bit&nbsp;*&nbsp;53-bit&nbsp;=&nbsp;107-&nbsp;or&nbsp;108-bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711949">lo</span><span class="op" id="1711951">,</span>&nbsp;<span class="ident" id="1711953">hi</span>&nbsp;<span class="op" id="1711956">:=</span>&nbsp;<span class="ident" id="1711959">mullu</span><span class="op" id="1711964">(</span><span class="ident" id="1711965">fm</span><span class="op" id="1711967">,</span>&nbsp;<span class="ident" id="1711969">gm</span><span class="op" id="1711971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711974">shift</span>&nbsp;<span class="op" id="1711980">:=</span>&nbsp;<span class="ident" id="1711983">mantbits64</span>&nbsp;<span class="op" id="1711994">-</span>&nbsp;<span class="num" id="1711996">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711999">trunc</span>&nbsp;<span class="op" id="1712005">:=</span>&nbsp;<span class="ident" id="1712008">lo</span>&nbsp;<span class="op" id="1712011">&amp;</span>&nbsp;<span class="op" id="1712013">(</span><span class="num" id="1712014">1</span><span class="op" id="1712015">&lt;&lt;</span><span class="ident" id="1712017">shift</span>&nbsp;<span class="op" id="1712023">-</span>&nbsp;<span class="num" id="1712025">1</span><span class="op" id="1712026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712029">mant</span>&nbsp;<span class="op" id="1712034">:=</span>&nbsp;<span class="ident" id="1712037">hi</span><span class="op" id="1712039">&lt;&lt;</span><span class="op" id="1712041">(</span><span class="num" id="1712042">64</span><span class="op" id="1712044">-</span><span class="ident" id="1712045">shift</span><span class="op" id="1712050">)</span>&nbsp;<span class="op" id="1712052">|</span>&nbsp;<span class="ident" id="1712054">lo</span><span class="op" id="1712056">&gt;&gt;</span><span class="ident" id="1712058">shift</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712065">return</span>&nbsp;<span class="ident" id="1712072">fpack64</span><span class="op" id="1712079">(</span><span class="ident" id="1712080">fs</span><span class="op" id="1712082">^</span><span class="ident" id="1712083">gs</span><span class="op" id="1712085">,</span>&nbsp;<span class="ident" id="1712087">mant</span><span class="op" id="1712091">,</span>&nbsp;<span class="ident" id="1712093">fe</span><span class="op" id="1712095">+</span><span class="ident" id="1712096">ge</span><span class="op" id="1712098">-</span><span class="num" id="1712099">1</span><span class="op" id="1712100">,</span>&nbsp;<span class="ident" id="1712102">trunc</span><span class="op" id="1712107">)</span><br>
<span class="lineno"></span><span class="op" id="1712109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1712112">func</span>&nbsp;<span class="ident" id="1712117">fdiv64</span><span class="op" id="1712123">(</span><span class="ident" id="1712124">f</span><span class="op" id="1712125">,</span>&nbsp;<span class="ident" id="1712127">g</span>&nbsp;<span class="ident" id="1712129">uint64</span><span class="op" id="1712135">)</span>&nbsp;<span class="ident" id="1712137">uint64</span>&nbsp;<span class="op" id="1712144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712147">fs</span><span class="op" id="1712149">,</span>&nbsp;<span class="ident" id="1712151">fm</span><span class="op" id="1712153">,</span>&nbsp;<span class="ident" id="1712155">fe</span><span class="op" id="1712157">,</span>&nbsp;<span class="ident" id="1712159">fi</span><span class="op" id="1712161">,</span>&nbsp;<span class="ident" id="1712163">fn</span>&nbsp;<span class="op" id="1712166">:=</span>&nbsp;<span class="ident" id="1712169">funpack64</span><span class="op" id="1712178">(</span><span class="ident" id="1712179">f</span><span class="op" id="1712180">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712183">gs</span><span class="op" id="1712185">,</span>&nbsp;<span class="ident" id="1712187">gm</span><span class="op" id="1712189">,</span>&nbsp;<span class="ident" id="1712191">ge</span><span class="op" id="1712193">,</span>&nbsp;<span class="ident" id="1712195">gi</span><span class="op" id="1712197">,</span>&nbsp;<span class="ident" id="1712199">gn</span>&nbsp;<span class="op" id="1712202">:=</span>&nbsp;<span class="ident" id="1712205">funpack64</span><span class="op" id="1712214">(</span><span class="ident" id="1712215">g</span><span class="op" id="1712216">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1712220">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712239">switch</span>&nbsp;<span class="op" id="1712246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712249">case</span>&nbsp;<span class="ident" id="1712254">fn</span>&nbsp;<span class="op" id="1712257">||</span>&nbsp;<span class="ident" id="1712260">gn</span><span class="op" id="1712262">:</span>&nbsp;<span class="comment" id="1712264">//&nbsp;NaN&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712293">return</span>&nbsp;<span class="ident" id="1712300">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712308">case</span>&nbsp;<span class="ident" id="1712313">fi</span>&nbsp;<span class="op" id="1712316">&amp;&amp;</span>&nbsp;<span class="ident" id="1712319">gi</span><span class="op" id="1712321">:</span>&nbsp;<span class="comment" id="1712323">//&nbsp;±Inf&nbsp;/&nbsp;±Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712348">return</span>&nbsp;<span class="ident" id="1712355">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712363">case</span>&nbsp;<span class="op" id="1712368">!</span><span class="ident" id="1712369">fi</span>&nbsp;<span class="op" id="1712372">&amp;&amp;</span>&nbsp;<span class="op" id="1712375">!</span><span class="ident" id="1712376">gi</span>&nbsp;<span class="op" id="1712379">&amp;&amp;</span>&nbsp;<span class="ident" id="1712382">fm</span>&nbsp;<span class="op" id="1712385">==</span>&nbsp;<span class="num" id="1712388">0</span>&nbsp;<span class="op" id="1712390">&amp;&amp;</span>&nbsp;<span class="ident" id="1712393">gm</span>&nbsp;<span class="op" id="1712396">==</span>&nbsp;<span class="num" id="1712399">0</span><span class="op" id="1712400">:</span>&nbsp;<span class="comment" id="1712402">//&nbsp;0&nbsp;/&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712419">return</span>&nbsp;<span class="ident" id="1712426">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712434">case</span>&nbsp;<span class="ident" id="1712439">fi</span><span class="op" id="1712441">,</span>&nbsp;<span class="op" id="1712443">!</span><span class="ident" id="1712444">gi</span>&nbsp;<span class="op" id="1712447">&amp;&amp;</span>&nbsp;<span class="ident" id="1712450">gm</span>&nbsp;<span class="op" id="1712453">==</span>&nbsp;<span class="num" id="1712456">0</span><span class="op" id="1712457">:</span>&nbsp;<span class="comment" id="1712459">//&nbsp;Inf&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;0&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712486">return</span>&nbsp;<span class="ident" id="1712493">fs</span>&nbsp;<span class="op" id="1712496">^</span>&nbsp;<span class="ident" id="1712498">gs</span>&nbsp;<span class="op" id="1712501">^</span>&nbsp;<span class="ident" id="1712503">inf64</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712511">case</span>&nbsp;<span class="ident" id="1712516">gi</span><span class="op" id="1712518">,</span>&nbsp;<span class="ident" id="1712520">fm</span>&nbsp;<span class="op" id="1712523">==</span>&nbsp;<span class="num" id="1712526">0</span><span class="op" id="1712527">:</span>&nbsp;<span class="comment" id="1712529">//&nbsp;f&nbsp;/&nbsp;Inf&nbsp;=&nbsp;0&nbsp;/&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712556">return</span>&nbsp;<span class="ident" id="1712563">fs</span>&nbsp;<span class="op" id="1712566">^</span>&nbsp;<span class="ident" id="1712568">gs</span>&nbsp;<span class="op" id="1712571">^</span>&nbsp;<span class="num" id="1712573">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712579">_</span><span class="op" id="1712580">,</span>&nbsp;<span class="ident" id="1712582">_</span><span class="op" id="1712583">,</span>&nbsp;<span class="ident" id="1712585">_</span><span class="op" id="1712586">,</span>&nbsp;<span class="ident" id="1712588">_</span>&nbsp;<span class="op" id="1712590">=</span>&nbsp;<span class="ident" id="1712592">fi</span><span class="op" id="1712594">,</span>&nbsp;<span class="ident" id="1712596">fn</span><span class="op" id="1712598">,</span>&nbsp;<span class="ident" id="1712600">gi</span><span class="op" id="1712602">,</span>&nbsp;<span class="ident" id="1712604">gn</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1712609">//&nbsp;53-bit&lt;&lt;54&nbsp;/&nbsp;53-bit&nbsp;=&nbsp;53-&nbsp;or&nbsp;54-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712650">shift</span>&nbsp;<span class="op" id="1712656">:=</span>&nbsp;<span class="ident" id="1712659">mantbits64</span>&nbsp;<span class="op" id="1712670">+</span>&nbsp;<span class="num" id="1712672">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712675">q</span><span class="op" id="1712676">,</span>&nbsp;<span class="ident" id="1712678">r</span>&nbsp;<span class="op" id="1712680">:=</span>&nbsp;<span class="ident" id="1712683">divlu</span><span class="op" id="1712688">(</span><span class="ident" id="1712689">fm</span><span class="op" id="1712691">&gt;&gt;</span><span class="op" id="1712693">(</span><span class="num" id="1712694">64</span><span class="op" id="1712696">-</span><span class="ident" id="1712697">shift</span><span class="op" id="1712702">)</span><span class="op" id="1712703">,</span>&nbsp;<span class="ident" id="1712705">fm</span><span class="op" id="1712707">&lt;&lt;</span><span class="ident" id="1712709">shift</span><span class="op" id="1712714">,</span>&nbsp;<span class="ident" id="1712716">gm</span><span class="op" id="1712718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712721">return</span>&nbsp;<span class="ident" id="1712728">fpack64</span><span class="op" id="1712735">(</span><span class="ident" id="1712736">fs</span><span class="op" id="1712738">^</span><span class="ident" id="1712739">gs</span><span class="op" id="1712741">,</span>&nbsp;<span class="ident" id="1712743">q</span><span class="op" id="1712744">,</span>&nbsp;<span class="ident" id="1712746">fe</span><span class="op" id="1712748">-</span><span class="ident" id="1712749">ge</span><span class="op" id="1712751">-</span><span class="num" id="1712752">2</span><span class="op" id="1712753">,</span>&nbsp;<span class="ident" id="1712755">r</span><span class="op" id="1712756">)</span><br>
<span class="lineno">315</span><span class="op" id="1712758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1712761">func</span>&nbsp;<span class="ident" id="1712766">f64to32</span><span class="op" id="1712773">(</span><span class="ident" id="1712774">f</span>&nbsp;<span class="ident" id="1712776">uint64</span><span class="op" id="1712782">)</span>&nbsp;<span class="builtintype" id="1712784">uint32</span>&nbsp;<span class="op" id="1712791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712794">fs</span><span class="op" id="1712796">,</span>&nbsp;<span class="ident" id="1712798">fm</span><span class="op" id="1712800">,</span>&nbsp;<span class="ident" id="1712802">fe</span><span class="op" id="1712804">,</span>&nbsp;<span class="ident" id="1712806">fi</span><span class="op" id="1712808">,</span>&nbsp;<span class="ident" id="1712810">fn</span>&nbsp;<span class="op" id="1712813">:=</span>&nbsp;<span class="ident" id="1712816">funpack64</span><span class="op" id="1712825">(</span><span class="ident" id="1712826">f</span><span class="op" id="1712827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712830">if</span>&nbsp;<span class="ident" id="1712833">fn</span>&nbsp;<span class="op" id="1712836">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712840">return</span>&nbsp;<span class="ident" id="1712847">nan32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712857">fs32</span>&nbsp;<span class="op" id="1712862">:=</span>&nbsp;<span class="builtintype" id="1712865">uint32</span><span class="op" id="1712871">(</span><span class="ident" id="1712872">fs</span>&nbsp;<span class="op" id="1712875">&gt;&gt;</span>&nbsp;<span class="num" id="1712878">32</span><span class="op" id="1712880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712883">if</span>&nbsp;<span class="ident" id="1712886">fi</span>&nbsp;<span class="op" id="1712889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712893">return</span>&nbsp;<span class="ident" id="1712900">fs32</span>&nbsp;<span class="op" id="1712905">^</span>&nbsp;<span class="ident" id="1712907">inf32</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712917">const</span>&nbsp;<span class="ident" id="1712923">d</span>&nbsp;<span class="op" id="1712925">=</span>&nbsp;<span class="ident" id="1712927">mantbits64</span>&nbsp;<span class="op" id="1712938">-</span>&nbsp;<span class="ident" id="1712940">mantbits32</span>&nbsp;<span class="op" id="1712951">-</span>&nbsp;<span class="num" id="1712953">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712956">return</span>&nbsp;<span class="ident" id="1712963">fpack32</span><span class="op" id="1712970">(</span><span class="ident" id="1712971">fs32</span><span class="op" id="1712975">,</span>&nbsp;<span class="builtintype" id="1712977">uint32</span><span class="op" id="1712983">(</span><span class="ident" id="1712984">fm</span><span class="op" id="1712986">&gt;&gt;</span><span class="ident" id="1712988">d</span><span class="op" id="1712989">)</span><span class="op" id="1712990">,</span>&nbsp;<span class="ident" id="1712992">fe</span><span class="op" id="1712994">-</span><span class="num" id="1712995">1</span><span class="op" id="1712996">,</span>&nbsp;<span class="builtintype" id="1712998">uint32</span><span class="op" id="1713004">(</span><span class="ident" id="1713005">fm</span><span class="op" id="1713007">&amp;</span><span class="op" id="1713008">(</span><span class="num" id="1713009">1</span><span class="op" id="1713010">&lt;&lt;</span><span class="ident" id="1713012">d</span><span class="op" id="1713013">-</span><span class="num" id="1713014">1</span><span class="op" id="1713015">)</span><span class="op" id="1713016">)</span><span class="op" id="1713017">)</span><br>
<span class="lineno"></span><span class="op" id="1713019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="1713022">func</span>&nbsp;<span class="ident" id="1713027">f32to64</span><span class="op" id="1713034">(</span><span class="ident" id="1713035">f</span>&nbsp;<span class="builtintype" id="1713037">uint32</span><span class="op" id="1713043">)</span>&nbsp;<span class="ident" id="1713045">uint64</span>&nbsp;<span class="op" id="1713052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713055">const</span>&nbsp;<span class="ident" id="1713061">d</span>&nbsp;<span class="op" id="1713063">=</span>&nbsp;<span class="ident" id="1713065">mantbits64</span>&nbsp;<span class="op" id="1713076">-</span>&nbsp;<span class="ident" id="1713078">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1713090">fs</span><span class="op" id="1713092">,</span>&nbsp;<span class="ident" id="1713094">fm</span><span class="op" id="1713096">,</span>&nbsp;<span class="ident" id="1713098">fe</span><span class="op" id="1713100">,</span>&nbsp;<span class="ident" id="1713102">fi</span><span class="op" id="1713104">,</span>&nbsp;<span class="ident" id="1713106">fn</span>&nbsp;<span class="op" id="1713109">:=</span>&nbsp;<span class="ident" id="1713112">funpack32</span><span class="op" id="1713121">(</span><span class="ident" id="1713122">f</span><span class="op" id="1713123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713126">if</span>&nbsp;<span class="ident" id="1713129">fn</span>&nbsp;<span class="op" id="1713132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713136">return</span>&nbsp;<span class="ident" id="1713143">nan64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1713150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1713153">fs64</span>&nbsp;<span class="op" id="1713158">:=</span>&nbsp;<span class="ident" id="1713161">uint64</span><span class="op" id="1713167">(</span><span class="ident" id="1713168">fs</span><span class="op" id="1713170">)</span>&nbsp;<span class="op" id="1713172">&lt;&lt;</span>&nbsp;<span class="num" id="1713175">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713179">if</span>&nbsp;<span class="ident" id="1713182">fi</span>&nbsp;<span class="op" id="1713185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713189">return</span>&nbsp;<span class="ident" id="1713196">fs64</span>&nbsp;<span class="op" id="1713201">^</span>&nbsp;<span class="ident" id="1713203">inf64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1713210">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713213">return</span>&nbsp;<span class="ident" id="1713220">fpack64</span><span class="op" id="1713227">(</span><span class="ident" id="1713228">fs64</span><span class="op" id="1713232">,</span>&nbsp;<span class="ident" id="1713234">uint64</span><span class="op" id="1713240">(</span><span class="ident" id="1713241">fm</span><span class="op" id="1713243">)</span><span class="op" id="1713244">&lt;&lt;</span><span class="ident" id="1713246">d</span><span class="op" id="1713247">,</span>&nbsp;<span class="ident" id="1713249">fe</span><span class="op" id="1713251">,</span>&nbsp;<span class="num" id="1713253">0</span><span class="op" id="1713254">)</span><br>
<span class="lineno"></span><span class="op" id="1713256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1713259">func</span>&nbsp;<span class="ident" id="1713264">fcmp64</span><span class="op" id="1713270">(</span><span class="ident" id="1713271">f</span><span class="op" id="1713272">,</span>&nbsp;<span class="ident" id="1713274">g</span>&nbsp;<span class="ident" id="1713276">uint64</span><span class="op" id="1713282">)</span>&nbsp;<span class="op" id="1713284">(</span><span class="ident" id="1713285">cmp</span>&nbsp;<span class="builtintype" id="1713289">int</span><span class="op" id="1713292">,</span>&nbsp;<span class="ident" id="1713294">isnan</span>&nbsp;<span class="builtintype" id="1713300">bool</span><span class="op" id="1713304">)</span>&nbsp;<span class="op" id="1713306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1713309">fs</span><span class="op" id="1713311">,</span>&nbsp;<span class="ident" id="1713313">fm</span><span class="op" id="1713315">,</span>&nbsp;<span class="ident" id="1713317">_</span><span class="op" id="1713318">,</span>&nbsp;<span class="ident" id="1713320">fi</span><span class="op" id="1713322">,</span>&nbsp;<span class="ident" id="1713324">fn</span>&nbsp;<span class="op" id="1713327">:=</span>&nbsp;<span class="ident" id="1713330">funpack64</span><span class="op" id="1713339">(</span><span class="ident" id="1713340">f</span><span class="op" id="1713341">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1713344">gs</span><span class="op" id="1713346">,</span>&nbsp;<span class="ident" id="1713348">gm</span><span class="op" id="1713350">,</span>&nbsp;<span class="ident" id="1713352">_</span><span class="op" id="1713353">,</span>&nbsp;<span class="ident" id="1713355">gi</span><span class="op" id="1713357">,</span>&nbsp;<span class="ident" id="1713359">gn</span>&nbsp;<span class="op" id="1713362">:=</span>&nbsp;<span class="ident" id="1713365">funpack64</span><span class="op" id="1713374">(</span><span class="ident" id="1713375">g</span><span class="op" id="1713376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713380">switch</span>&nbsp;<span class="op" id="1713387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713390">case</span>&nbsp;<span class="ident" id="1713395">fn</span><span class="op" id="1713397">,</span>&nbsp;<span class="ident" id="1713399">gn</span><span class="op" id="1713401">:</span>&nbsp;<span class="comment" id="1713403">//&nbsp;flag&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713417">return</span>&nbsp;<span class="num" id="1713424">0</span><span class="op" id="1713425">,</span>&nbsp;<span class="builtintype" id="1713427">true</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713434">case</span>&nbsp;<span class="op" id="1713439">!</span><span class="ident" id="1713440">fi</span>&nbsp;<span class="op" id="1713443">&amp;&amp;</span>&nbsp;<span class="op" id="1713446">!</span><span class="ident" id="1713447">gi</span>&nbsp;<span class="op" id="1713450">&amp;&amp;</span>&nbsp;<span class="ident" id="1713453">fm</span>&nbsp;<span class="op" id="1713456">==</span>&nbsp;<span class="num" id="1713459">0</span>&nbsp;<span class="op" id="1713461">&amp;&amp;</span>&nbsp;<span class="ident" id="1713464">gm</span>&nbsp;<span class="op" id="1713467">==</span>&nbsp;<span class="num" id="1713470">0</span><span class="op" id="1713471">:</span>&nbsp;<span class="comment" id="1713473">//&nbsp;±0&nbsp;==&nbsp;±0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713489">return</span>&nbsp;<span class="num" id="1713496">0</span><span class="op" id="1713497">,</span>&nbsp;<span class="builtintype" id="1713499">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713507">case</span>&nbsp;<span class="ident" id="1713512">fs</span>&nbsp;<span class="op" id="1713515">&gt;</span>&nbsp;<span class="ident" id="1713517">gs</span><span class="op" id="1713519">:</span>&nbsp;<span class="comment" id="1713521">//&nbsp;f&nbsp;&lt;&nbsp;0,&nbsp;g&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713539">return</span>&nbsp;<span class="op" id="1713546">-</span><span class="num" id="1713547">1</span><span class="op" id="1713548">,</span>&nbsp;<span class="builtintype" id="1713550">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713558">case</span>&nbsp;<span class="ident" id="1713563">fs</span>&nbsp;<span class="op" id="1713566">&lt;</span>&nbsp;<span class="ident" id="1713568">gs</span><span class="op" id="1713570">:</span>&nbsp;<span class="comment" id="1713572">//&nbsp;f&nbsp;&gt;&nbsp;0,&nbsp;g&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713590">return</span>&nbsp;<span class="op" id="1713597">+</span><span class="num" id="1713598">1</span><span class="op" id="1713599">,</span>&nbsp;<span class="builtintype" id="1713601">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1713609">//&nbsp;Same&nbsp;sign,&nbsp;not&nbsp;NaN.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1713633">//&nbsp;Can&nbsp;compare&nbsp;encodings&nbsp;directly&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1713673">//&nbsp;Reverse&nbsp;for&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713695">case</span>&nbsp;<span class="ident" id="1713700">fs</span>&nbsp;<span class="op" id="1713703">==</span>&nbsp;<span class="num" id="1713706">0</span>&nbsp;<span class="op" id="1713708">&amp;&amp;</span>&nbsp;<span class="ident" id="1713711">f</span>&nbsp;<span class="op" id="1713713">&lt;</span>&nbsp;<span class="ident" id="1713715">g</span><span class="op" id="1713716">,</span>&nbsp;<span class="ident" id="1713718">fs</span>&nbsp;<span class="op" id="1713721">!=</span>&nbsp;<span class="num" id="1713724">0</span>&nbsp;<span class="op" id="1713726">&amp;&amp;</span>&nbsp;<span class="ident" id="1713729">f</span>&nbsp;<span class="op" id="1713731">&gt;</span>&nbsp;<span class="ident" id="1713733">g</span><span class="op" id="1713734">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713738">return</span>&nbsp;<span class="op" id="1713745">-</span><span class="num" id="1713746">1</span><span class="op" id="1713747">,</span>&nbsp;<span class="builtintype" id="1713749">false</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713757">case</span>&nbsp;<span class="ident" id="1713762">fs</span>&nbsp;<span class="op" id="1713765">==</span>&nbsp;<span class="num" id="1713768">0</span>&nbsp;<span class="op" id="1713770">&amp;&amp;</span>&nbsp;<span class="ident" id="1713773">f</span>&nbsp;<span class="op" id="1713775">&gt;</span>&nbsp;<span class="ident" id="1713777">g</span><span class="op" id="1713778">,</span>&nbsp;<span class="ident" id="1713780">fs</span>&nbsp;<span class="op" id="1713783">!=</span>&nbsp;<span class="num" id="1713786">0</span>&nbsp;<span class="op" id="1713788">&amp;&amp;</span>&nbsp;<span class="ident" id="1713791">f</span>&nbsp;<span class="op" id="1713793">&lt;</span>&nbsp;<span class="ident" id="1713795">g</span><span class="op" id="1713796">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713800">return</span>&nbsp;<span class="op" id="1713807">+</span><span class="num" id="1713808">1</span><span class="op" id="1713809">,</span>&nbsp;<span class="builtintype" id="1713811">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1713818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1713822">//&nbsp;f&nbsp;==&nbsp;g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713833">return</span>&nbsp;<span class="num" id="1713840">0</span><span class="op" id="1713841">,</span>&nbsp;<span class="builtintype" id="1713843">false</span><br>
<span class="lineno"></span><span class="op" id="1713849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1713852">func</span>&nbsp;<span class="ident" id="1713857">f64toint</span><span class="op" id="1713865">(</span><span class="ident" id="1713866">f</span>&nbsp;<span class="ident" id="1713868">uint64</span><span class="op" id="1713874">)</span>&nbsp;<span class="op" id="1713876">(</span><span class="ident" id="1713877">val</span>&nbsp;<span class="ident" id="1713881">int64</span><span class="op" id="1713886">,</span>&nbsp;<span class="ident" id="1713888">ok</span>&nbsp;<span class="builtintype" id="1713891">bool</span><span class="op" id="1713895">)</span>&nbsp;<span class="op" id="1713897">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1713900">fs</span><span class="op" id="1713902">,</span>&nbsp;<span class="ident" id="1713904">fm</span><span class="op" id="1713906">,</span>&nbsp;<span class="ident" id="1713908">fe</span><span class="op" id="1713910">,</span>&nbsp;<span class="ident" id="1713912">fi</span><span class="op" id="1713914">,</span>&nbsp;<span class="ident" id="1713916">fn</span>&nbsp;<span class="op" id="1713919">:=</span>&nbsp;<span class="ident" id="1713922">funpack64</span><span class="op" id="1713931">(</span><span class="ident" id="1713932">f</span><span class="op" id="1713933">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713937">switch</span>&nbsp;<span class="op" id="1713944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713947">case</span>&nbsp;<span class="ident" id="1713952">fi</span><span class="op" id="1713954">,</span>&nbsp;<span class="ident" id="1713956">fn</span><span class="op" id="1713958">:</span>&nbsp;<span class="comment" id="1713960">//&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713969">return</span>&nbsp;<span class="num" id="1713976">0</span><span class="op" id="1713977">,</span>&nbsp;<span class="builtintype" id="1713979">false</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1713987">case</span>&nbsp;<span class="ident" id="1713992">fe</span>&nbsp;<span class="op" id="1713995">&lt;</span>&nbsp;<span class="op" id="1713997">-</span><span class="num" id="1713998">1</span><span class="op" id="1713999">:</span>&nbsp;<span class="comment" id="1714001">//&nbsp;f&nbsp;&lt;&nbsp;0.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714014">return</span>&nbsp;<span class="num" id="1714021">0</span><span class="op" id="1714022">,</span>&nbsp;<span class="builtintype" id="1714024">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714032">case</span>&nbsp;<span class="ident" id="1714037">fe</span>&nbsp;<span class="op" id="1714040">&gt;</span>&nbsp;<span class="num" id="1714042">63</span><span class="op" id="1714044">:</span>&nbsp;<span class="comment" id="1714046">//&nbsp;f&nbsp;&gt;=&nbsp;2^63</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714061">if</span>&nbsp;<span class="ident" id="1714064">fs</span>&nbsp;<span class="op" id="1714067">!=</span>&nbsp;<span class="num" id="1714070">0</span>&nbsp;<span class="op" id="1714072">&amp;&amp;</span>&nbsp;<span class="ident" id="1714075">fm</span>&nbsp;<span class="op" id="1714078">==</span>&nbsp;<span class="num" id="1714081">0</span>&nbsp;<span class="op" id="1714083">{</span>&nbsp;<span class="comment" id="1714085">//&nbsp;f&nbsp;==&nbsp;-2^63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714102">return</span>&nbsp;<span class="op" id="1714109">-</span><span class="num" id="1714110">1</span>&nbsp;<span class="op" id="1714112">&lt;&lt;</span>&nbsp;<span class="num" id="1714115">63</span><span class="op" id="1714117">,</span>&nbsp;<span class="builtintype" id="1714119">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714130">if</span>&nbsp;<span class="ident" id="1714133">fs</span>&nbsp;<span class="op" id="1714136">!=</span>&nbsp;<span class="num" id="1714139">0</span>&nbsp;<span class="op" id="1714141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714146">return</span>&nbsp;<span class="num" id="1714153">0</span><span class="op" id="1714154">,</span>&nbsp;<span class="builtintype" id="1714156">false</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714168">return</span>&nbsp;<span class="num" id="1714175">0</span><span class="op" id="1714176">,</span>&nbsp;<span class="builtintype" id="1714178">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714189">for</span>&nbsp;<span class="ident" id="1714193">fe</span>&nbsp;<span class="op" id="1714196">&gt;</span>&nbsp;<span class="builtintype" id="1714198">int</span><span class="op" id="1714201">(</span><span class="ident" id="1714202">mantbits64</span><span class="op" id="1714212">)</span>&nbsp;<span class="op" id="1714214">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714218">fe</span><span class="op" id="1714220">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714225">fm</span>&nbsp;<span class="op" id="1714228">&lt;&lt;=</span>&nbsp;<span class="num" id="1714232">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714238">for</span>&nbsp;<span class="ident" id="1714242">fe</span>&nbsp;<span class="op" id="1714245">&lt;</span>&nbsp;<span class="builtintype" id="1714247">int</span><span class="op" id="1714250">(</span><span class="ident" id="1714251">mantbits64</span><span class="op" id="1714261">)</span>&nbsp;<span class="op" id="1714263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714267">fe</span><span class="op" id="1714269">++</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714274">fm</span>&nbsp;<span class="op" id="1714277">&gt;&gt;=</span>&nbsp;<span class="num" id="1714281">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714287">val</span>&nbsp;<span class="op" id="1714291">=</span>&nbsp;<span class="ident" id="1714293">int64</span><span class="op" id="1714298">(</span><span class="ident" id="1714299">fm</span><span class="op" id="1714301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714304">if</span>&nbsp;<span class="ident" id="1714307">fs</span>&nbsp;<span class="op" id="1714310">!=</span>&nbsp;<span class="num" id="1714313">0</span>&nbsp;<span class="op" id="1714315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714319">val</span>&nbsp;<span class="op" id="1714323">=</span>&nbsp;<span class="op" id="1714325">-</span><span class="ident" id="1714326">val</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714334">return</span>&nbsp;<span class="ident" id="1714341">val</span><span class="op" id="1714344">,</span>&nbsp;<span class="builtintype" id="1714346">true</span><br>
<span class="lineno"></span><span class="op" id="1714351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1714354">func</span>&nbsp;<span class="ident" id="1714359">fintto64</span><span class="op" id="1714367">(</span><span class="ident" id="1714368">val</span>&nbsp;<span class="ident" id="1714372">int64</span><span class="op" id="1714377">)</span>&nbsp;<span class="op" id="1714379">(</span><span class="ident" id="1714380">f</span>&nbsp;<span class="ident" id="1714382">uint64</span><span class="op" id="1714388">)</span>&nbsp;<span class="op" id="1714390">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714393">fs</span>&nbsp;<span class="op" id="1714396">:=</span>&nbsp;<span class="ident" id="1714399">uint64</span><span class="op" id="1714405">(</span><span class="ident" id="1714406">val</span><span class="op" id="1714409">)</span>&nbsp;<span class="op" id="1714411">&amp;</span>&nbsp;<span class="op" id="1714413">(</span><span class="num" id="1714414">1</span>&nbsp;<span class="op" id="1714416">&lt;&lt;</span>&nbsp;<span class="num" id="1714419">63</span><span class="op" id="1714421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714424">mant</span>&nbsp;<span class="op" id="1714429">:=</span>&nbsp;<span class="ident" id="1714432">uint64</span><span class="op" id="1714438">(</span><span class="ident" id="1714439">val</span><span class="op" id="1714442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714445">if</span>&nbsp;<span class="ident" id="1714448">fs</span>&nbsp;<span class="op" id="1714451">!=</span>&nbsp;<span class="num" id="1714454">0</span>&nbsp;<span class="op" id="1714456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714460">mant</span>&nbsp;<span class="op" id="1714465">=</span>&nbsp;<span class="op" id="1714467">-</span><span class="ident" id="1714468">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714474">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714477">return</span>&nbsp;<span class="ident" id="1714484">fpack64</span><span class="op" id="1714491">(</span><span class="ident" id="1714492">fs</span><span class="op" id="1714494">,</span>&nbsp;<span class="ident" id="1714496">mant</span><span class="op" id="1714500">,</span>&nbsp;<span class="builtintype" id="1714502">int</span><span class="op" id="1714505">(</span><span class="ident" id="1714506">mantbits64</span><span class="op" id="1714516">)</span><span class="op" id="1714517">,</span>&nbsp;<span class="num" id="1714519">0</span><span class="op" id="1714520">)</span><br>
<span class="lineno"></span><span class="op" id="1714522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1714525">//&nbsp;64x64&nbsp;-&gt;&nbsp;128&nbsp;multiply.</span><br>
<span class="lineno"></span><span class="comment" id="1714551">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight.</span><br>
<span class="lineno">420</span><span class="keyword" id="1714585">func</span>&nbsp;<span class="ident" id="1714590">mullu</span><span class="op" id="1714595">(</span><span class="ident" id="1714596">u</span><span class="op" id="1714597">,</span>&nbsp;<span class="ident" id="1714599">v</span>&nbsp;<span class="ident" id="1714601">uint64</span><span class="op" id="1714607">)</span>&nbsp;<span class="op" id="1714609">(</span><span class="ident" id="1714610">lo</span><span class="op" id="1714612">,</span>&nbsp;<span class="ident" id="1714614">hi</span>&nbsp;<span class="ident" id="1714617">uint64</span><span class="op" id="1714623">)</span>&nbsp;<span class="op" id="1714625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714628">const</span>&nbsp;<span class="op" id="1714634">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714638">s</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714643">=</span>&nbsp;<span class="num" id="1714645">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714650">mask</span>&nbsp;<span class="op" id="1714655">=</span>&nbsp;<span class="num" id="1714657">1</span><span class="op" id="1714658">&lt;&lt;</span><span class="ident" id="1714660">s</span>&nbsp;<span class="op" id="1714662">-</span>&nbsp;<span class="num" id="1714664">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1714667">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714670">u0</span>&nbsp;<span class="op" id="1714673">:=</span>&nbsp;<span class="ident" id="1714676">u</span>&nbsp;<span class="op" id="1714678">&amp;</span>&nbsp;<span class="ident" id="1714680">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714686">u1</span>&nbsp;<span class="op" id="1714689">:=</span>&nbsp;<span class="ident" id="1714692">u</span>&nbsp;<span class="op" id="1714694">&gt;&gt;</span>&nbsp;<span class="ident" id="1714697">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714700">v0</span>&nbsp;<span class="op" id="1714703">:=</span>&nbsp;<span class="ident" id="1714706">v</span>&nbsp;<span class="op" id="1714708">&amp;</span>&nbsp;<span class="ident" id="1714710">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714716">v1</span>&nbsp;<span class="op" id="1714719">:=</span>&nbsp;<span class="ident" id="1714722">v</span>&nbsp;<span class="op" id="1714724">&gt;&gt;</span>&nbsp;<span class="ident" id="1714727">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714730">w0</span>&nbsp;<span class="op" id="1714733">:=</span>&nbsp;<span class="ident" id="1714736">u0</span>&nbsp;<span class="op" id="1714739">*</span>&nbsp;<span class="ident" id="1714741">v0</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714745">t</span>&nbsp;<span class="op" id="1714747">:=</span>&nbsp;<span class="ident" id="1714750">u1</span><span class="op" id="1714752">*</span><span class="ident" id="1714753">v0</span>&nbsp;<span class="op" id="1714756">+</span>&nbsp;<span class="ident" id="1714758">w0</span><span class="op" id="1714760">&gt;&gt;</span><span class="ident" id="1714762">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714765">w1</span>&nbsp;<span class="op" id="1714768">:=</span>&nbsp;<span class="ident" id="1714771">t</span>&nbsp;<span class="op" id="1714773">&amp;</span>&nbsp;<span class="ident" id="1714775">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714781">w2</span>&nbsp;<span class="op" id="1714784">:=</span>&nbsp;<span class="ident" id="1714787">t</span>&nbsp;<span class="op" id="1714789">&gt;&gt;</span>&nbsp;<span class="ident" id="1714792">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1714795">w1</span>&nbsp;<span class="op" id="1714798">+=</span>&nbsp;<span class="ident" id="1714801">u0</span>&nbsp;<span class="op" id="1714804">*</span>&nbsp;<span class="ident" id="1714806">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714810">return</span>&nbsp;<span class="ident" id="1714817">u</span>&nbsp;<span class="op" id="1714819">*</span>&nbsp;<span class="ident" id="1714821">v</span><span class="op" id="1714822">,</span>&nbsp;<span class="ident" id="1714824">u1</span><span class="op" id="1714826">*</span><span class="ident" id="1714827">v1</span>&nbsp;<span class="op" id="1714830">+</span>&nbsp;<span class="ident" id="1714832">w2</span>&nbsp;<span class="op" id="1714835">+</span>&nbsp;<span class="ident" id="1714837">w1</span><span class="op" id="1714839">&gt;&gt;</span><span class="ident" id="1714841">s</span><br>
<span class="lineno">435</span><span class="op" id="1714843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1714846">//&nbsp;128/64&nbsp;-&gt;&nbsp;64&nbsp;quotient,&nbsp;64&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="1714886">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight</span><br>
<span class="lineno"></span><span class="keyword" id="1714919">func</span>&nbsp;<span class="ident" id="1714924">divlu</span><span class="op" id="1714929">(</span><span class="ident" id="1714930">u1</span><span class="op" id="1714932">,</span>&nbsp;<span class="ident" id="1714934">u0</span><span class="op" id="1714936">,</span>&nbsp;<span class="ident" id="1714938">v</span>&nbsp;<span class="ident" id="1714940">uint64</span><span class="op" id="1714946">)</span>&nbsp;<span class="op" id="1714948">(</span><span class="ident" id="1714949">q</span><span class="op" id="1714950">,</span>&nbsp;<span class="ident" id="1714952">r</span>&nbsp;<span class="ident" id="1714954">uint64</span><span class="op" id="1714960">)</span>&nbsp;<span class="op" id="1714962">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714965">const</span>&nbsp;<span class="ident" id="1714971">b</span>&nbsp;<span class="op" id="1714973">=</span>&nbsp;<span class="num" id="1714975">1</span>&nbsp;<span class="op" id="1714977">&lt;&lt;</span>&nbsp;<span class="num" id="1714980">32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1714985">if</span>&nbsp;<span class="ident" id="1714988">u1</span>&nbsp;<span class="op" id="1714991">&gt;=</span>&nbsp;<span class="ident" id="1714994">v</span>&nbsp;<span class="op" id="1714996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715000">return</span>&nbsp;<span class="num" id="1715007">1</span><span class="op" id="1715008">&lt;&lt;</span><span class="num" id="1715010">64</span>&nbsp;<span class="op" id="1715013">-</span>&nbsp;<span class="num" id="1715015">1</span><span class="op" id="1715016">,</span>&nbsp;<span class="num" id="1715018">1</span><span class="op" id="1715019">&lt;&lt;</span><span class="num" id="1715021">64</span>&nbsp;<span class="op" id="1715024">-</span>&nbsp;<span class="num" id="1715026">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1715029">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1715033">//&nbsp;s&nbsp;=&nbsp;nlz(v);&nbsp;v&nbsp;&lt;&lt;=&nbsp;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715057">s</span>&nbsp;<span class="op" id="1715059">:=</span>&nbsp;<span class="builtintype" id="1715062">uint</span><span class="op" id="1715066">(</span><span class="num" id="1715067">0</span><span class="op" id="1715068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715071">for</span>&nbsp;<span class="ident" id="1715075">v</span><span class="op" id="1715076">&amp;</span><span class="op" id="1715077">(</span><span class="num" id="1715078">1</span><span class="op" id="1715079">&lt;&lt;</span><span class="num" id="1715081">63</span><span class="op" id="1715083">)</span>&nbsp;<span class="op" id="1715085">==</span>&nbsp;<span class="num" id="1715088">0</span>&nbsp;<span class="op" id="1715090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715094">s</span><span class="op" id="1715095">++</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715100">v</span>&nbsp;<span class="op" id="1715102">&lt;&lt;=</span>&nbsp;<span class="num" id="1715106">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1715109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715113">vn1</span>&nbsp;<span class="op" id="1715117">:=</span>&nbsp;<span class="ident" id="1715120">v</span>&nbsp;<span class="op" id="1715122">&gt;&gt;</span>&nbsp;<span class="num" id="1715125">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715129">vn0</span>&nbsp;<span class="op" id="1715133">:=</span>&nbsp;<span class="ident" id="1715136">v</span>&nbsp;<span class="op" id="1715138">&amp;</span>&nbsp;<span class="op" id="1715140">(</span><span class="num" id="1715141">1</span><span class="op" id="1715142">&lt;&lt;</span><span class="num" id="1715144">32</span>&nbsp;<span class="op" id="1715147">-</span>&nbsp;<span class="num" id="1715149">1</span><span class="op" id="1715150">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715153">un32</span>&nbsp;<span class="op" id="1715158">:=</span>&nbsp;<span class="ident" id="1715161">u1</span><span class="op" id="1715163">&lt;&lt;</span><span class="ident" id="1715165">s</span>&nbsp;<span class="op" id="1715167">|</span>&nbsp;<span class="ident" id="1715169">u0</span><span class="op" id="1715171">&gt;&gt;</span><span class="op" id="1715173">(</span><span class="num" id="1715174">64</span><span class="op" id="1715176">-</span><span class="ident" id="1715177">s</span><span class="op" id="1715178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715181">un10</span>&nbsp;<span class="op" id="1715186">:=</span>&nbsp;<span class="ident" id="1715189">u0</span>&nbsp;<span class="op" id="1715192">&lt;&lt;</span>&nbsp;<span class="ident" id="1715195">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715198">un1</span>&nbsp;<span class="op" id="1715202">:=</span>&nbsp;<span class="ident" id="1715205">un10</span>&nbsp;<span class="op" id="1715210">&gt;&gt;</span>&nbsp;<span class="num" id="1715213">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715217">un0</span>&nbsp;<span class="op" id="1715221">:=</span>&nbsp;<span class="ident" id="1715224">un10</span>&nbsp;<span class="op" id="1715229">&amp;</span>&nbsp;<span class="op" id="1715231">(</span><span class="num" id="1715232">1</span><span class="op" id="1715233">&lt;&lt;</span><span class="num" id="1715235">32</span>&nbsp;<span class="op" id="1715238">-</span>&nbsp;<span class="num" id="1715240">1</span><span class="op" id="1715241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715244">q1</span>&nbsp;<span class="op" id="1715247">:=</span>&nbsp;<span class="ident" id="1715250">un32</span>&nbsp;<span class="op" id="1715255">/</span>&nbsp;<span class="ident" id="1715257">vn1</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715262">rhat</span>&nbsp;<span class="op" id="1715267">:=</span>&nbsp;<span class="ident" id="1715270">un32</span>&nbsp;<span class="op" id="1715275">-</span>&nbsp;<span class="ident" id="1715277">q1</span><span class="op" id="1715279">*</span><span class="ident" id="1715280">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1715285">again1</span><span class="op" id="1715291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715294">if</span>&nbsp;<span class="ident" id="1715297">q1</span>&nbsp;<span class="op" id="1715300">&gt;=</span>&nbsp;<span class="ident" id="1715303">b</span>&nbsp;<span class="op" id="1715305">||</span>&nbsp;<span class="ident" id="1715308">q1</span><span class="op" id="1715310">*</span><span class="ident" id="1715311">vn0</span>&nbsp;<span class="op" id="1715315">&gt;</span>&nbsp;<span class="ident" id="1715317">b</span><span class="op" id="1715318">*</span><span class="ident" id="1715319">rhat</span><span class="op" id="1715323">+</span><span class="ident" id="1715324">un1</span>&nbsp;<span class="op" id="1715328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715332">q1</span><span class="op" id="1715334">--</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715339">rhat</span>&nbsp;<span class="op" id="1715344">+=</span>&nbsp;<span class="ident" id="1715347">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715353">if</span>&nbsp;<span class="ident" id="1715356">rhat</span>&nbsp;<span class="op" id="1715361">&lt;</span>&nbsp;<span class="ident" id="1715363">b</span>&nbsp;<span class="op" id="1715365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715370">goto</span>&nbsp;<span class="ident" id="1715375">again1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1715384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1715387">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715391">un21</span>&nbsp;<span class="op" id="1715396">:=</span>&nbsp;<span class="ident" id="1715399">un32</span><span class="op" id="1715403">*</span><span class="ident" id="1715404">b</span>&nbsp;<span class="op" id="1715406">+</span>&nbsp;<span class="ident" id="1715408">un1</span>&nbsp;<span class="op" id="1715412">-</span>&nbsp;<span class="ident" id="1715414">q1</span><span class="op" id="1715416">*</span><span class="ident" id="1715417">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715420">q0</span>&nbsp;<span class="op" id="1715423">:=</span>&nbsp;<span class="ident" id="1715426">un21</span>&nbsp;<span class="op" id="1715431">/</span>&nbsp;<span class="ident" id="1715433">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715438">rhat</span>&nbsp;<span class="op" id="1715443">=</span>&nbsp;<span class="ident" id="1715445">un21</span>&nbsp;<span class="op" id="1715450">-</span>&nbsp;<span class="ident" id="1715452">q0</span><span class="op" id="1715454">*</span><span class="ident" id="1715455">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="ident" id="1715460">again2</span><span class="op" id="1715466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715469">if</span>&nbsp;<span class="ident" id="1715472">q0</span>&nbsp;<span class="op" id="1715475">&gt;=</span>&nbsp;<span class="ident" id="1715478">b</span>&nbsp;<span class="op" id="1715480">||</span>&nbsp;<span class="ident" id="1715483">q0</span><span class="op" id="1715485">*</span><span class="ident" id="1715486">vn0</span>&nbsp;<span class="op" id="1715490">&gt;</span>&nbsp;<span class="ident" id="1715492">b</span><span class="op" id="1715493">*</span><span class="ident" id="1715494">rhat</span><span class="op" id="1715498">+</span><span class="ident" id="1715499">un0</span>&nbsp;<span class="op" id="1715503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715507">q0</span><span class="op" id="1715509">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1715514">rhat</span>&nbsp;<span class="op" id="1715519">+=</span>&nbsp;<span class="ident" id="1715522">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715528">if</span>&nbsp;<span class="ident" id="1715531">rhat</span>&nbsp;<span class="op" id="1715536">&lt;</span>&nbsp;<span class="ident" id="1715538">b</span>&nbsp;<span class="op" id="1715540">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715545">goto</span>&nbsp;<span class="ident" id="1715550">again2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1715559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1715562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1715566">return</span>&nbsp;<span class="ident" id="1715573">q1</span><span class="op" id="1715575">*</span><span class="ident" id="1715576">b</span>&nbsp;<span class="op" id="1715578">+</span>&nbsp;<span class="ident" id="1715580">q0</span><span class="op" id="1715582">,</span>&nbsp;<span class="op" id="1715584">(</span><span class="ident" id="1715585">un21</span><span class="op" id="1715589">*</span><span class="ident" id="1715590">b</span>&nbsp;<span class="op" id="1715592">+</span>&nbsp;<span class="ident" id="1715594">un0</span>&nbsp;<span class="op" id="1715598">-</span>&nbsp;<span class="ident" id="1715600">q0</span><span class="op" id="1715602">*</span><span class="ident" id="1715603">v</span><span class="op" id="1715604">)</span>&nbsp;<span class="op" id="1715606">&gt;&gt;</span>&nbsp;<span class="ident" id="1715609">s</span><br>
<span class="lineno">485</span><span class="op" id="1715611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1715614">//&nbsp;callable&nbsp;from&nbsp;C</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1715634">func</span>&nbsp;<span class="ident" id="1715639">fadd64c</span><span class="op" id="1715646">(</span><span class="ident" id="1715647">f</span><span class="op" id="1715648">,</span>&nbsp;<span class="ident" id="1715650">g</span>&nbsp;<span class="ident" id="1715652">uint64</span><span class="op" id="1715658">,</span>&nbsp;<span class="ident" id="1715660">ret</span>&nbsp;<span class="op" id="1715664">*</span><span class="ident" id="1715665">uint64</span><span class="op" id="1715671">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715684">{</span>&nbsp;<span class="op" id="1715686">*</span><span class="ident" id="1715687">ret</span>&nbsp;<span class="op" id="1715691">=</span>&nbsp;<span class="ident" id="1715693">fadd64</span><span class="op" id="1715699">(</span><span class="ident" id="1715700">f</span><span class="op" id="1715701">,</span>&nbsp;<span class="ident" id="1715703">g</span><span class="op" id="1715704">)</span>&nbsp;<span class="op" id="1715706">}</span><br>
<span class="lineno">490</span><span class="keyword" id="1715708">func</span>&nbsp;<span class="ident" id="1715713">fsub64c</span><span class="op" id="1715720">(</span><span class="ident" id="1715721">f</span><span class="op" id="1715722">,</span>&nbsp;<span class="ident" id="1715724">g</span>&nbsp;<span class="ident" id="1715726">uint64</span><span class="op" id="1715732">,</span>&nbsp;<span class="ident" id="1715734">ret</span>&nbsp;<span class="op" id="1715738">*</span><span class="ident" id="1715739">uint64</span><span class="op" id="1715745">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715758">{</span>&nbsp;<span class="op" id="1715760">*</span><span class="ident" id="1715761">ret</span>&nbsp;<span class="op" id="1715765">=</span>&nbsp;<span class="ident" id="1715767">fsub64</span><span class="op" id="1715773">(</span><span class="ident" id="1715774">f</span><span class="op" id="1715775">,</span>&nbsp;<span class="ident" id="1715777">g</span><span class="op" id="1715778">)</span>&nbsp;<span class="op" id="1715780">}</span><br>
<span class="lineno"></span><span class="keyword" id="1715782">func</span>&nbsp;<span class="ident" id="1715787">fmul64c</span><span class="op" id="1715794">(</span><span class="ident" id="1715795">f</span><span class="op" id="1715796">,</span>&nbsp;<span class="ident" id="1715798">g</span>&nbsp;<span class="ident" id="1715800">uint64</span><span class="op" id="1715806">,</span>&nbsp;<span class="ident" id="1715808">ret</span>&nbsp;<span class="op" id="1715812">*</span><span class="ident" id="1715813">uint64</span><span class="op" id="1715819">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715832">{</span>&nbsp;<span class="op" id="1715834">*</span><span class="ident" id="1715835">ret</span>&nbsp;<span class="op" id="1715839">=</span>&nbsp;<span class="ident" id="1715841">fmul64</span><span class="op" id="1715847">(</span><span class="ident" id="1715848">f</span><span class="op" id="1715849">,</span>&nbsp;<span class="ident" id="1715851">g</span><span class="op" id="1715852">)</span>&nbsp;<span class="op" id="1715854">}</span><br>
<span class="lineno"></span><span class="keyword" id="1715856">func</span>&nbsp;<span class="ident" id="1715861">fdiv64c</span><span class="op" id="1715868">(</span><span class="ident" id="1715869">f</span><span class="op" id="1715870">,</span>&nbsp;<span class="ident" id="1715872">g</span>&nbsp;<span class="ident" id="1715874">uint64</span><span class="op" id="1715880">,</span>&nbsp;<span class="ident" id="1715882">ret</span>&nbsp;<span class="op" id="1715886">*</span><span class="ident" id="1715887">uint64</span><span class="op" id="1715893">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715906">{</span>&nbsp;<span class="op" id="1715908">*</span><span class="ident" id="1715909">ret</span>&nbsp;<span class="op" id="1715913">=</span>&nbsp;<span class="ident" id="1715915">fdiv64</span><span class="op" id="1715921">(</span><span class="ident" id="1715922">f</span><span class="op" id="1715923">,</span>&nbsp;<span class="ident" id="1715925">g</span><span class="op" id="1715926">)</span>&nbsp;<span class="op" id="1715928">}</span><br>
<span class="lineno"></span><span class="keyword" id="1715930">func</span>&nbsp;<span class="ident" id="1715935">fneg64c</span><span class="op" id="1715942">(</span><span class="ident" id="1715943">f</span>&nbsp;<span class="ident" id="1715945">uint64</span><span class="op" id="1715951">,</span>&nbsp;<span class="ident" id="1715953">ret</span>&nbsp;<span class="op" id="1715957">*</span><span class="ident" id="1715958">uint64</span><span class="op" id="1715964">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715980">{</span>&nbsp;<span class="op" id="1715982">*</span><span class="ident" id="1715983">ret</span>&nbsp;<span class="op" id="1715987">=</span>&nbsp;<span class="ident" id="1715989">fneg64</span><span class="op" id="1715995">(</span><span class="ident" id="1715996">f</span><span class="op" id="1715997">)</span>&nbsp;<span class="op" id="1715999">}</span><br>
<span class="lineno"></span><span class="keyword" id="1716001">func</span>&nbsp;<span class="ident" id="1716006">f32to64c</span><span class="op" id="1716014">(</span><span class="ident" id="1716015">f</span>&nbsp;<span class="builtintype" id="1716017">uint32</span><span class="op" id="1716023">,</span>&nbsp;<span class="ident" id="1716025">ret</span>&nbsp;<span class="op" id="1716029">*</span><span class="ident" id="1716030">uint64</span><span class="op" id="1716036">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716051">{</span>&nbsp;<span class="op" id="1716053">*</span><span class="ident" id="1716054">ret</span>&nbsp;<span class="op" id="1716058">=</span>&nbsp;<span class="ident" id="1716060">f32to64</span><span class="op" id="1716067">(</span><span class="ident" id="1716068">f</span><span class="op" id="1716069">)</span>&nbsp;<span class="op" id="1716071">}</span><br>
<span class="lineno">495</span><span class="keyword" id="1716073">func</span>&nbsp;<span class="ident" id="1716078">f64to32c</span><span class="op" id="1716086">(</span><span class="ident" id="1716087">f</span>&nbsp;<span class="ident" id="1716089">uint64</span><span class="op" id="1716095">,</span>&nbsp;<span class="ident" id="1716097">ret</span>&nbsp;<span class="op" id="1716101">*</span><span class="builtintype" id="1716102">uint32</span><span class="op" id="1716108">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716123">{</span>&nbsp;<span class="op" id="1716125">*</span><span class="ident" id="1716126">ret</span>&nbsp;<span class="op" id="1716130">=</span>&nbsp;<span class="ident" id="1716132">f64to32</span><span class="op" id="1716139">(</span><span class="ident" id="1716140">f</span><span class="op" id="1716141">)</span>&nbsp;<span class="op" id="1716143">}</span><br>
<span class="lineno"></span><span class="keyword" id="1716145">func</span>&nbsp;<span class="ident" id="1716150">fcmp64c</span><span class="op" id="1716157">(</span><span class="ident" id="1716158">f</span><span class="op" id="1716159">,</span>&nbsp;<span class="ident" id="1716161">g</span>&nbsp;<span class="ident" id="1716163">uint64</span><span class="op" id="1716169">,</span>&nbsp;<span class="ident" id="1716171">ret</span>&nbsp;<span class="op" id="1716175">*</span><span class="builtintype" id="1716176">int</span><span class="op" id="1716179">,</span>&nbsp;<span class="ident" id="1716181">retnan</span>&nbsp;<span class="op" id="1716188">*</span><span class="builtintype" id="1716189">bool</span><span class="op" id="1716193">)</span>&nbsp;<span class="op" id="1716195">{</span>&nbsp;<span class="op" id="1716197">*</span><span class="ident" id="1716198">ret</span><span class="op" id="1716201">,</span>&nbsp;<span class="op" id="1716203">*</span><span class="ident" id="1716204">retnan</span>&nbsp;<span class="op" id="1716211">=</span>&nbsp;<span class="ident" id="1716213">fcmp64</span><span class="op" id="1716219">(</span><span class="ident" id="1716220">f</span><span class="op" id="1716221">,</span>&nbsp;<span class="ident" id="1716223">g</span><span class="op" id="1716224">)</span>&nbsp;<span class="op" id="1716226">}</span><br>
<span class="lineno"></span><span class="keyword" id="1716228">func</span>&nbsp;<span class="ident" id="1716233">fintto64c</span><span class="op" id="1716242">(</span><span class="ident" id="1716243">val</span>&nbsp;<span class="ident" id="1716247">int64</span><span class="op" id="1716252">,</span>&nbsp;<span class="ident" id="1716254">ret</span>&nbsp;<span class="op" id="1716258">*</span><span class="ident" id="1716259">uint64</span><span class="op" id="1716265">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716278">{</span>&nbsp;<span class="op" id="1716280">*</span><span class="ident" id="1716281">ret</span>&nbsp;<span class="op" id="1716285">=</span>&nbsp;<span class="ident" id="1716287">fintto64</span><span class="op" id="1716295">(</span><span class="ident" id="1716296">val</span><span class="op" id="1716299">)</span>&nbsp;<span class="op" id="1716301">}</span><br>
<span class="lineno"></span><span class="keyword" id="1716303">func</span>&nbsp;<span class="ident" id="1716308">f64tointc</span><span class="op" id="1716317">(</span><span class="ident" id="1716318">f</span>&nbsp;<span class="ident" id="1716320">uint64</span><span class="op" id="1716326">,</span>&nbsp;<span class="ident" id="1716328">ret</span>&nbsp;<span class="op" id="1716332">*</span><span class="ident" id="1716333">int64</span><span class="op" id="1716338">,</span>&nbsp;<span class="ident" id="1716340">retok</span>&nbsp;<span class="op" id="1716346">*</span><span class="builtintype" id="1716347">bool</span><span class="op" id="1716351">)</span>&nbsp;<span class="op" id="1716353">{</span>&nbsp;<span class="op" id="1716355">*</span><span class="ident" id="1716356">ret</span><span class="op" id="1716359">,</span>&nbsp;<span class="op" id="1716361">*</span><span class="ident" id="1716362">retok</span>&nbsp;<span class="op" id="1716368">=</span>&nbsp;<span class="ident" id="1716370">f64toint</span><span class="op" id="1716378">(</span><span class="ident" id="1716379">f</span><span class="op" id="1716380">)</span>&nbsp;<span class="op" id="1716382">}</span>
</div>
</body>
</html>
