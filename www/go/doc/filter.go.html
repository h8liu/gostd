<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6238562">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6238617">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6238671">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6238722">package</span>&nbsp;<span class="ident" id="6238730">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6238735">import</span>&nbsp;<span class="string" id="6238742">&#34;go/ast&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6238752">type</span>&nbsp;<span class="ident" id="6238757">Filter</span>&nbsp;<span class="keyword" id="6238764">func</span><span class="op" id="6238768">(</span><span class="builtintype" id="6238769">string</span><span class="op" id="6238775">)</span>&nbsp;<span class="builtintype" id="6238777">bool</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6238783">func</span>&nbsp;<span class="ident" id="6238788">matchFields</span><span class="op" id="6238799">(</span><span class="ident" id="6238800">fields</span>&nbsp;<span class="op" id="6238807">*</span><span class="ident" id="6238808">ast</span><span class="op" id="6238811">.</span><span class="ident" id="6238812">FieldList</span><span class="op" id="6238821">,</span>&nbsp;<span class="ident" id="6238823">f</span>&nbsp;<span class="ident" id="6238825">Filter</span><span class="op" id="6238831">)</span>&nbsp;<span class="builtintype" id="6238833">bool</span>&nbsp;<span class="op" id="6238838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6238841">if</span>&nbsp;<span class="ident" id="6238844">fields</span>&nbsp;<span class="op" id="6238851">!=</span>&nbsp;<span class="ident" id="6238854">nil</span>&nbsp;<span class="op" id="6238858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6238862">for</span>&nbsp;<span class="ident" id="6238866">_</span><span class="op" id="6238867">,</span>&nbsp;<span class="ident" id="6238869">field</span>&nbsp;<span class="op" id="6238875">:=</span>&nbsp;<span class="keyword" id="6238878">range</span>&nbsp;<span class="ident" id="6238884">fields</span><span class="op" id="6238890">.</span><span class="ident" id="6238891">List</span>&nbsp;<span class="op" id="6238896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6238901">for</span>&nbsp;<span class="ident" id="6238905">_</span><span class="op" id="6238906">,</span>&nbsp;<span class="ident" id="6238908">name</span>&nbsp;<span class="op" id="6238913">:=</span>&nbsp;<span class="keyword" id="6238916">range</span>&nbsp;<span class="ident" id="6238922">field</span><span class="op" id="6238927">.</span><span class="ident" id="6238928">Names</span>&nbsp;<span class="op" id="6238934">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6238940">if</span>&nbsp;<span class="ident" id="6238943">f</span><span class="op" id="6238944">(</span><span class="ident" id="6238945">name</span><span class="op" id="6238949">.</span><span class="ident" id="6238950">Name</span><span class="op" id="6238954">)</span>&nbsp;<span class="op" id="6238956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6238963">return</span>&nbsp;<span class="ident" id="6238970">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6238979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6238984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6238988">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6238991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6238994">return</span>&nbsp;<span class="ident" id="6239001">false</span><br>
<span class="lineno"></span><span class="op" id="6239007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6239010">func</span>&nbsp;<span class="ident" id="6239015">matchDecl</span><span class="op" id="6239024">(</span><span class="ident" id="6239025">d</span>&nbsp;<span class="op" id="6239027">*</span><span class="ident" id="6239028">ast</span><span class="op" id="6239031">.</span><span class="ident" id="6239032">GenDecl</span><span class="op" id="6239039">,</span>&nbsp;<span class="ident" id="6239041">f</span>&nbsp;<span class="ident" id="6239043">Filter</span><span class="op" id="6239049">)</span>&nbsp;<span class="builtintype" id="6239051">bool</span>&nbsp;<span class="op" id="6239056">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239059">for</span>&nbsp;<span class="ident" id="6239063">_</span><span class="op" id="6239064">,</span>&nbsp;<span class="ident" id="6239066">d</span>&nbsp;<span class="op" id="6239068">:=</span>&nbsp;<span class="keyword" id="6239071">range</span>&nbsp;<span class="ident" id="6239077">d</span><span class="op" id="6239078">.</span><span class="ident" id="6239079">Specs</span>&nbsp;<span class="op" id="6239085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239089">switch</span>&nbsp;<span class="ident" id="6239096">v</span>&nbsp;<span class="op" id="6239098">:=</span>&nbsp;<span class="ident" id="6239101">d</span><span class="op" id="6239102">.</span><span class="op" id="6239103">(</span><span class="keyword" id="6239104">type</span><span class="op" id="6239108">)</span>&nbsp;<span class="op" id="6239110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239114">case</span>&nbsp;<span class="op" id="6239119">*</span><span class="ident" id="6239120">ast</span><span class="op" id="6239123">.</span><span class="ident" id="6239124">ValueSpec</span><span class="op" id="6239133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239138">for</span>&nbsp;<span class="ident" id="6239142">_</span><span class="op" id="6239143">,</span>&nbsp;<span class="ident" id="6239145">name</span>&nbsp;<span class="op" id="6239150">:=</span>&nbsp;<span class="keyword" id="6239153">range</span>&nbsp;<span class="ident" id="6239159">v</span><span class="op" id="6239160">.</span><span class="ident" id="6239161">Names</span>&nbsp;<span class="op" id="6239167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239173">if</span>&nbsp;<span class="ident" id="6239176">f</span><span class="op" id="6239177">(</span><span class="ident" id="6239178">name</span><span class="op" id="6239182">.</span><span class="ident" id="6239183">Name</span><span class="op" id="6239187">)</span>&nbsp;<span class="op" id="6239189">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239196">return</span>&nbsp;<span class="ident" id="6239203">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239221">case</span>&nbsp;<span class="op" id="6239226">*</span><span class="ident" id="6239227">ast</span><span class="op" id="6239230">.</span><span class="ident" id="6239231">TypeSpec</span><span class="op" id="6239239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239244">if</span>&nbsp;<span class="ident" id="6239247">f</span><span class="op" id="6239248">(</span><span class="ident" id="6239249">v</span><span class="op" id="6239250">.</span><span class="ident" id="6239251">Name</span><span class="op" id="6239255">.</span><span class="ident" id="6239256">Name</span><span class="op" id="6239260">)</span>&nbsp;<span class="op" id="6239262">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239268">return</span>&nbsp;<span class="ident" id="6239275">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239288">switch</span>&nbsp;<span class="ident" id="6239295">t</span>&nbsp;<span class="op" id="6239297">:=</span>&nbsp;<span class="ident" id="6239300">v</span><span class="op" id="6239301">.</span><span class="ident" id="6239302">Type</span><span class="op" id="6239306">.</span><span class="op" id="6239307">(</span><span class="keyword" id="6239308">type</span><span class="op" id="6239312">)</span>&nbsp;<span class="op" id="6239314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239319">case</span>&nbsp;<span class="op" id="6239324">*</span><span class="ident" id="6239325">ast</span><span class="op" id="6239328">.</span><span class="ident" id="6239329">StructType</span><span class="op" id="6239339">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239345">if</span>&nbsp;<span class="ident" id="6239348">matchFields</span><span class="op" id="6239359">(</span><span class="ident" id="6239360">t</span><span class="op" id="6239361">.</span><span class="ident" id="6239362">Fields</span><span class="op" id="6239368">,</span>&nbsp;<span class="ident" id="6239370">f</span><span class="op" id="6239371">)</span>&nbsp;<span class="op" id="6239373">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239380">return</span>&nbsp;<span class="ident" id="6239387">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239401">case</span>&nbsp;<span class="op" id="6239406">*</span><span class="ident" id="6239407">ast</span><span class="op" id="6239410">.</span><span class="ident" id="6239411">InterfaceType</span><span class="op" id="6239424">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239430">if</span>&nbsp;<span class="ident" id="6239433">matchFields</span><span class="op" id="6239444">(</span><span class="ident" id="6239445">t</span><span class="op" id="6239446">.</span><span class="ident" id="6239447">Methods</span><span class="op" id="6239454">,</span>&nbsp;<span class="ident" id="6239456">f</span><span class="op" id="6239457">)</span>&nbsp;<span class="op" id="6239459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239466">return</span>&nbsp;<span class="ident" id="6239473">true</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239497">return</span>&nbsp;<span class="ident" id="6239504">false</span><br>
<span class="lineno">50</span><span class="op" id="6239510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6239513">func</span>&nbsp;<span class="ident" id="6239518">filterValues</span><span class="op" id="6239530">(</span><span class="ident" id="6239531">a</span>&nbsp;<span class="op" id="6239533">[</span><span class="op" id="6239534">]</span><span class="op" id="6239535">*</span><span class="ident" id="6239536">Value</span><span class="op" id="6239541">,</span>&nbsp;<span class="ident" id="6239543">f</span>&nbsp;<span class="ident" id="6239545">Filter</span><span class="op" id="6239551">)</span>&nbsp;<span class="op" id="6239553">[</span><span class="op" id="6239554">]</span><span class="op" id="6239555">*</span><span class="ident" id="6239556">Value</span>&nbsp;<span class="op" id="6239562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239565">w</span>&nbsp;<span class="op" id="6239567">:=</span>&nbsp;<span class="num" id="6239570">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239573">for</span>&nbsp;<span class="ident" id="6239577">_</span><span class="op" id="6239578">,</span>&nbsp;<span class="ident" id="6239580">vd</span>&nbsp;<span class="op" id="6239583">:=</span>&nbsp;<span class="keyword" id="6239586">range</span>&nbsp;<span class="ident" id="6239592">a</span>&nbsp;<span class="op" id="6239594">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239598">if</span>&nbsp;<span class="ident" id="6239601">matchDecl</span><span class="op" id="6239610">(</span><span class="ident" id="6239611">vd</span><span class="op" id="6239613">.</span><span class="ident" id="6239614">Decl</span><span class="op" id="6239618">,</span>&nbsp;<span class="ident" id="6239620">f</span><span class="op" id="6239621">)</span>&nbsp;<span class="op" id="6239623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239628">a</span><span class="op" id="6239629">[</span><span class="ident" id="6239630">w</span><span class="op" id="6239631">]</span>&nbsp;<span class="op" id="6239633">=</span>&nbsp;<span class="ident" id="6239635">vd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239641">w</span><span class="op" id="6239642">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239650">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239653">return</span>&nbsp;<span class="ident" id="6239660">a</span><span class="op" id="6239661">[</span><span class="num" id="6239662">0</span><span class="op" id="6239663">:</span><span class="ident" id="6239664">w</span><span class="op" id="6239665">]</span><br>
<span class="lineno"></span><span class="op" id="6239667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6239670">func</span>&nbsp;<span class="ident" id="6239675">filterFuncs</span><span class="op" id="6239686">(</span><span class="ident" id="6239687">a</span>&nbsp;<span class="op" id="6239689">[</span><span class="op" id="6239690">]</span><span class="op" id="6239691">*</span><span class="ident" id="6239692">Func</span><span class="op" id="6239696">,</span>&nbsp;<span class="ident" id="6239698">f</span>&nbsp;<span class="ident" id="6239700">Filter</span><span class="op" id="6239706">)</span>&nbsp;<span class="op" id="6239708">[</span><span class="op" id="6239709">]</span><span class="op" id="6239710">*</span><span class="ident" id="6239711">Func</span>&nbsp;<span class="op" id="6239716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239719">w</span>&nbsp;<span class="op" id="6239721">:=</span>&nbsp;<span class="num" id="6239724">0</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239727">for</span>&nbsp;<span class="ident" id="6239731">_</span><span class="op" id="6239732">,</span>&nbsp;<span class="ident" id="6239734">fd</span>&nbsp;<span class="op" id="6239737">:=</span>&nbsp;<span class="keyword" id="6239740">range</span>&nbsp;<span class="ident" id="6239746">a</span>&nbsp;<span class="op" id="6239748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239752">if</span>&nbsp;<span class="ident" id="6239755">f</span><span class="op" id="6239756">(</span><span class="ident" id="6239757">fd</span><span class="op" id="6239759">.</span><span class="ident" id="6239760">Name</span><span class="op" id="6239764">)</span>&nbsp;<span class="op" id="6239766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239771">a</span><span class="op" id="6239772">[</span><span class="ident" id="6239773">w</span><span class="op" id="6239774">]</span>&nbsp;<span class="op" id="6239776">=</span>&nbsp;<span class="ident" id="6239778">fd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239784">w</span><span class="op" id="6239785">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239790">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239796">return</span>&nbsp;<span class="ident" id="6239803">a</span><span class="op" id="6239804">[</span><span class="num" id="6239805">0</span><span class="op" id="6239806">:</span><span class="ident" id="6239807">w</span><span class="op" id="6239808">]</span><br>
<span class="lineno"></span><span class="op" id="6239810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6239813">func</span>&nbsp;<span class="ident" id="6239818">filterTypes</span><span class="op" id="6239829">(</span><span class="ident" id="6239830">a</span>&nbsp;<span class="op" id="6239832">[</span><span class="op" id="6239833">]</span><span class="op" id="6239834">*</span><span class="ident" id="6239835">Type</span><span class="op" id="6239839">,</span>&nbsp;<span class="ident" id="6239841">f</span>&nbsp;<span class="ident" id="6239843">Filter</span><span class="op" id="6239849">)</span>&nbsp;<span class="op" id="6239851">[</span><span class="op" id="6239852">]</span><span class="op" id="6239853">*</span><span class="ident" id="6239854">Type</span>&nbsp;<span class="op" id="6239859">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239862">w</span>&nbsp;<span class="op" id="6239864">:=</span>&nbsp;<span class="num" id="6239867">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239870">for</span>&nbsp;<span class="ident" id="6239874">_</span><span class="op" id="6239875">,</span>&nbsp;<span class="ident" id="6239877">td</span>&nbsp;<span class="op" id="6239880">:=</span>&nbsp;<span class="keyword" id="6239883">range</span>&nbsp;<span class="ident" id="6239889">a</span>&nbsp;<span class="op" id="6239891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239895">n</span>&nbsp;<span class="op" id="6239897">:=</span>&nbsp;<span class="num" id="6239900">0</span>&nbsp;<span class="comment" id="6239902">//&nbsp;number&nbsp;of&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6239925">if</span>&nbsp;<span class="ident" id="6239928">matchDecl</span><span class="op" id="6239937">(</span><span class="ident" id="6239938">td</span><span class="op" id="6239940">.</span><span class="ident" id="6239941">Decl</span><span class="op" id="6239945">,</span>&nbsp;<span class="ident" id="6239947">f</span><span class="op" id="6239948">)</span>&nbsp;<span class="op" id="6239950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6239955">n</span>&nbsp;<span class="op" id="6239957">=</span>&nbsp;<span class="num" id="6239959">1</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6239963">}</span>&nbsp;<span class="keyword" id="6239965">else</span>&nbsp;<span class="op" id="6239970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6239975">//&nbsp;type&nbsp;name&nbsp;doesn&#39;t&nbsp;match,&nbsp;but&nbsp;we&nbsp;may&nbsp;have&nbsp;matching&nbsp;consts,&nbsp;vars,&nbsp;factories&nbsp;or&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240066">td</span><span class="op" id="6240068">.</span><span class="ident" id="6240069">Consts</span>&nbsp;<span class="op" id="6240076">=</span>&nbsp;<span class="ident" id="6240078">filterValues</span><span class="op" id="6240090">(</span><span class="ident" id="6240091">td</span><span class="op" id="6240093">.</span><span class="ident" id="6240094">Consts</span><span class="op" id="6240100">,</span>&nbsp;<span class="ident" id="6240102">f</span><span class="op" id="6240103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240108">td</span><span class="op" id="6240110">.</span><span class="ident" id="6240111">Vars</span>&nbsp;<span class="op" id="6240116">=</span>&nbsp;<span class="ident" id="6240118">filterValues</span><span class="op" id="6240130">(</span><span class="ident" id="6240131">td</span><span class="op" id="6240133">.</span><span class="ident" id="6240134">Vars</span><span class="op" id="6240138">,</span>&nbsp;<span class="ident" id="6240140">f</span><span class="op" id="6240141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240146">td</span><span class="op" id="6240148">.</span><span class="ident" id="6240149">Funcs</span>&nbsp;<span class="op" id="6240155">=</span>&nbsp;<span class="ident" id="6240157">filterFuncs</span><span class="op" id="6240168">(</span><span class="ident" id="6240169">td</span><span class="op" id="6240171">.</span><span class="ident" id="6240172">Funcs</span><span class="op" id="6240177">,</span>&nbsp;<span class="ident" id="6240179">f</span><span class="op" id="6240180">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240185">td</span><span class="op" id="6240187">.</span><span class="ident" id="6240188">Methods</span>&nbsp;<span class="op" id="6240196">=</span>&nbsp;<span class="ident" id="6240198">filterFuncs</span><span class="op" id="6240209">(</span><span class="ident" id="6240210">td</span><span class="op" id="6240212">.</span><span class="ident" id="6240213">Methods</span><span class="op" id="6240220">,</span>&nbsp;<span class="ident" id="6240222">f</span><span class="op" id="6240223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240228">n</span>&nbsp;<span class="op" id="6240230">+=</span>&nbsp;<span class="builtinfunc" id="6240233">len</span><span class="op" id="6240236">(</span><span class="ident" id="6240237">td</span><span class="op" id="6240239">.</span><span class="ident" id="6240240">Consts</span><span class="op" id="6240246">)</span>&nbsp;<span class="op" id="6240248">+</span>&nbsp;<span class="builtinfunc" id="6240250">len</span><span class="op" id="6240253">(</span><span class="ident" id="6240254">td</span><span class="op" id="6240256">.</span><span class="ident" id="6240257">Vars</span><span class="op" id="6240261">)</span>&nbsp;<span class="op" id="6240263">+</span>&nbsp;<span class="builtinfunc" id="6240265">len</span><span class="op" id="6240268">(</span><span class="ident" id="6240269">td</span><span class="op" id="6240271">.</span><span class="ident" id="6240272">Funcs</span><span class="op" id="6240277">)</span>&nbsp;<span class="op" id="6240279">+</span>&nbsp;<span class="builtinfunc" id="6240281">len</span><span class="op" id="6240284">(</span><span class="ident" id="6240285">td</span><span class="op" id="6240287">.</span><span class="ident" id="6240288">Methods</span><span class="op" id="6240295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6240299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6240303">if</span>&nbsp;<span class="ident" id="6240306">n</span>&nbsp;<span class="op" id="6240308">&gt;</span>&nbsp;<span class="num" id="6240310">0</span>&nbsp;<span class="op" id="6240312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240317">a</span><span class="op" id="6240318">[</span><span class="ident" id="6240319">w</span><span class="op" id="6240320">]</span>&nbsp;<span class="op" id="6240322">=</span>&nbsp;<span class="ident" id="6240324">td</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240330">w</span><span class="op" id="6240331">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6240336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6240339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6240342">return</span>&nbsp;<span class="ident" id="6240349">a</span><span class="op" id="6240350">[</span><span class="num" id="6240351">0</span><span class="op" id="6240352">:</span><span class="ident" id="6240353">w</span><span class="op" id="6240354">]</span><br>
<span class="lineno"></span><span class="op" id="6240356">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="comment" id="6240359">//&nbsp;Filter&nbsp;eliminates&nbsp;documentation&nbsp;for&nbsp;names&nbsp;that&nbsp;don&#39;t&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="6240442">//&nbsp;TODO(gri):&nbsp;Recognize&nbsp;&#34;Type.Method&#34;&nbsp;as&nbsp;a&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="6240491">//</span><br>
<span class="lineno"></span><span class="keyword" id="6240494">func</span>&nbsp;<span class="op" id="6240499">(</span><span class="ident" id="6240500">p</span>&nbsp;<span class="op" id="6240502">*</span><span class="ident" id="6240503">Package</span><span class="op" id="6240510">)</span>&nbsp;<span class="ident" id="6240512">Filter</span><span class="op" id="6240518">(</span><span class="ident" id="6240519">f</span>&nbsp;<span class="ident" id="6240521">Filter</span><span class="op" id="6240527">)</span>&nbsp;<span class="op" id="6240529">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240532">p</span><span class="op" id="6240533">.</span><span class="ident" id="6240534">Consts</span>&nbsp;<span class="op" id="6240541">=</span>&nbsp;<span class="ident" id="6240543">filterValues</span><span class="op" id="6240555">(</span><span class="ident" id="6240556">p</span><span class="op" id="6240557">.</span><span class="ident" id="6240558">Consts</span><span class="op" id="6240564">,</span>&nbsp;<span class="ident" id="6240566">f</span><span class="op" id="6240567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240570">p</span><span class="op" id="6240571">.</span><span class="ident" id="6240572">Vars</span>&nbsp;<span class="op" id="6240577">=</span>&nbsp;<span class="ident" id="6240579">filterValues</span><span class="op" id="6240591">(</span><span class="ident" id="6240592">p</span><span class="op" id="6240593">.</span><span class="ident" id="6240594">Vars</span><span class="op" id="6240598">,</span>&nbsp;<span class="ident" id="6240600">f</span><span class="op" id="6240601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240604">p</span><span class="op" id="6240605">.</span><span class="ident" id="6240606">Types</span>&nbsp;<span class="op" id="6240612">=</span>&nbsp;<span class="ident" id="6240614">filterTypes</span><span class="op" id="6240625">(</span><span class="ident" id="6240626">p</span><span class="op" id="6240627">.</span><span class="ident" id="6240628">Types</span><span class="op" id="6240633">,</span>&nbsp;<span class="ident" id="6240635">f</span><span class="op" id="6240636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240639">p</span><span class="op" id="6240640">.</span><span class="ident" id="6240641">Funcs</span>&nbsp;<span class="op" id="6240647">=</span>&nbsp;<span class="ident" id="6240649">filterFuncs</span><span class="op" id="6240660">(</span><span class="ident" id="6240661">p</span><span class="op" id="6240662">.</span><span class="ident" id="6240663">Funcs</span><span class="op" id="6240668">,</span>&nbsp;<span class="ident" id="6240670">f</span><span class="op" id="6240671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6240674">p</span><span class="op" id="6240675">.</span><span class="ident" id="6240676">Doc</span>&nbsp;<span class="op" id="6240680">=</span>&nbsp;<span class="string" id="6240682">&#34;&#34;</span>&nbsp;<span class="comment" id="6240685">//&nbsp;don&#39;t&nbsp;show&nbsp;top-level&nbsp;package&nbsp;doc</span><br>
<span class="lineno">105</span><span class="op" id="6240721">}</span>
</div>
</body>
</html>
