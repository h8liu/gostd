<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8231833">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8231888">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8231942">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8231993">package</span>&nbsp;<span class="ident" id="8232001">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8232006">import</span>&nbsp;<span class="op" id="8232013">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8232016">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8232024">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8232034">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8232037">type</span>&nbsp;<span class="ident" id="8232042">hostTest</span>&nbsp;<span class="keyword" id="8232051">struct</span>&nbsp;<span class="op" id="8232058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232061">host</span>&nbsp;<span class="builtintype" id="8232066">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232074">ips</span>&nbsp;&nbsp;<span class="op" id="8232079">[</span><span class="op" id="8232080">]</span><span class="ident" id="8232081">IP</span><br>
<span class="lineno">15</span><span class="op" id="8232084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8232087">var</span>&nbsp;<span class="ident" id="8232091">hosttests</span>&nbsp;<span class="op" id="8232101">=</span>&nbsp;<span class="op" id="8232103">[</span><span class="op" id="8232104">]</span><span class="ident" id="8232105">hostTest</span><span class="op" id="8232113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232116">{</span><span class="string" id="8232117">&#34;odin&#34;</span><span class="op" id="8232123">,</span>&nbsp;<span class="op" id="8232125">[</span><span class="op" id="8232126">]</span><span class="ident" id="8232127">IP</span><span class="op" id="8232129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232133">IPv4</span><span class="op" id="8232137">(</span><span class="num" id="8232138">127</span><span class="op" id="8232141">,</span>&nbsp;<span class="num" id="8232143">0</span><span class="op" id="8232144">,</span>&nbsp;<span class="num" id="8232146">0</span><span class="op" id="8232147">,</span>&nbsp;<span class="num" id="8232149">2</span><span class="op" id="8232150">)</span><span class="op" id="8232151">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232155">IPv4</span><span class="op" id="8232159">(</span><span class="num" id="8232160">127</span><span class="op" id="8232163">,</span>&nbsp;<span class="num" id="8232165">0</span><span class="op" id="8232166">,</span>&nbsp;<span class="num" id="8232168">0</span><span class="op" id="8232169">,</span>&nbsp;<span class="num" id="8232171">3</span><span class="op" id="8232172">)</span><span class="op" id="8232173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232177">ParseIP</span><span class="op" id="8232184">(</span><span class="string" id="8232185">&#34;::2&#34;</span><span class="op" id="8232190">)</span><span class="op" id="8232191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232194">}</span><span class="op" id="8232195">}</span><span class="op" id="8232196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232199">{</span><span class="string" id="8232200">&#34;thor&#34;</span><span class="op" id="8232206">,</span>&nbsp;<span class="op" id="8232208">[</span><span class="op" id="8232209">]</span><span class="ident" id="8232210">IP</span><span class="op" id="8232212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232216">IPv4</span><span class="op" id="8232220">(</span><span class="num" id="8232221">127</span><span class="op" id="8232224">,</span>&nbsp;<span class="num" id="8232226">1</span><span class="op" id="8232227">,</span>&nbsp;<span class="num" id="8232229">1</span><span class="op" id="8232230">,</span>&nbsp;<span class="num" id="8232232">1</span><span class="op" id="8232233">)</span><span class="op" id="8232234">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232237">}</span><span class="op" id="8232238">}</span><span class="op" id="8232239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232242">{</span><span class="string" id="8232243">&#34;loki&#34;</span><span class="op" id="8232249">,</span>&nbsp;<span class="op" id="8232251">[</span><span class="op" id="8232252">]</span><span class="ident" id="8232253">IP</span><span class="op" id="8232255">{</span><span class="op" id="8232256">}</span><span class="op" id="8232257">}</span><span class="op" id="8232258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232261">{</span><span class="string" id="8232262">&#34;ullr&#34;</span><span class="op" id="8232268">,</span>&nbsp;<span class="op" id="8232270">[</span><span class="op" id="8232271">]</span><span class="ident" id="8232272">IP</span><span class="op" id="8232274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232278">IPv4</span><span class="op" id="8232282">(</span><span class="num" id="8232283">127</span><span class="op" id="8232286">,</span>&nbsp;<span class="num" id="8232288">1</span><span class="op" id="8232289">,</span>&nbsp;<span class="num" id="8232291">1</span><span class="op" id="8232292">,</span>&nbsp;<span class="num" id="8232294">2</span><span class="op" id="8232295">)</span><span class="op" id="8232296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232299">}</span><span class="op" id="8232300">}</span><span class="op" id="8232301">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232304">{</span><span class="string" id="8232305">&#34;ullrhost&#34;</span><span class="op" id="8232315">,</span>&nbsp;<span class="op" id="8232317">[</span><span class="op" id="8232318">]</span><span class="ident" id="8232319">IP</span><span class="op" id="8232321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232325">IPv4</span><span class="op" id="8232329">(</span><span class="num" id="8232330">127</span><span class="op" id="8232333">,</span>&nbsp;<span class="num" id="8232335">1</span><span class="op" id="8232336">,</span>&nbsp;<span class="num" id="8232338">1</span><span class="op" id="8232339">,</span>&nbsp;<span class="num" id="8232341">2</span><span class="op" id="8232342">)</span><span class="op" id="8232343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232346">}</span><span class="op" id="8232347">}</span><span class="op" id="8232348">,</span><br>
<span class="lineno"></span><span class="op" id="8232350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8232353">func</span>&nbsp;<span class="ident" id="8232358">TestLookupStaticHost</span><span class="op" id="8232378">(</span><span class="ident" id="8232379">t</span>&nbsp;<span class="op" id="8232381">*</span><span class="ident" id="8232382">testing</span><span class="op" id="8232389">.</span><span class="ident" id="8232390">T</span><span class="op" id="8232391">)</span>&nbsp;<span class="op" id="8232393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232396">p</span>&nbsp;<span class="op" id="8232398">:=</span>&nbsp;<span class="ident" id="8232401">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232412">hostsPath</span>&nbsp;<span class="op" id="8232422">=</span>&nbsp;<span class="string" id="8232424">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232442">for</span>&nbsp;<span class="ident" id="8232446">i</span>&nbsp;<span class="op" id="8232448">:=</span>&nbsp;<span class="num" id="8232451">0</span><span class="op" id="8232452">;</span>&nbsp;<span class="ident" id="8232454">i</span>&nbsp;<span class="op" id="8232456">&lt;</span>&nbsp;<span class="builtinfunc" id="8232458">len</span><span class="op" id="8232461">(</span><span class="ident" id="8232462">hosttests</span><span class="op" id="8232471">)</span><span class="op" id="8232472">;</span>&nbsp;<span class="ident" id="8232474">i</span><span class="op" id="8232475">++</span>&nbsp;<span class="op" id="8232478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232482">tt</span>&nbsp;<span class="op" id="8232485">:=</span>&nbsp;<span class="ident" id="8232488">hosttests</span><span class="op" id="8232497">[</span><span class="ident" id="8232498">i</span><span class="op" id="8232499">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232503">ips</span>&nbsp;<span class="op" id="8232507">:=</span>&nbsp;<span class="ident" id="8232510">lookupStaticHost</span><span class="op" id="8232526">(</span><span class="ident" id="8232527">tt</span><span class="op" id="8232529">.</span><span class="ident" id="8232530">host</span><span class="op" id="8232534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232538">if</span>&nbsp;<span class="builtinfunc" id="8232541">len</span><span class="op" id="8232544">(</span><span class="ident" id="8232545">ips</span><span class="op" id="8232548">)</span>&nbsp;<span class="op" id="8232550">!=</span>&nbsp;<span class="builtinfunc" id="8232553">len</span><span class="op" id="8232556">(</span><span class="ident" id="8232557">tt</span><span class="op" id="8232559">.</span><span class="ident" id="8232560">ips</span><span class="op" id="8232563">)</span>&nbsp;<span class="op" id="8232565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232570">t</span><span class="op" id="8232571">.</span><span class="ident" id="8232572">Errorf</span><span class="op" id="8232578">(</span><span class="string" id="8232579">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8232605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8232611">len</span><span class="op" id="8232614">(</span><span class="ident" id="8232615">ips</span><span class="op" id="8232618">)</span><span class="op" id="8232619">,</span>&nbsp;<span class="builtinfunc" id="8232621">len</span><span class="op" id="8232624">(</span><span class="ident" id="8232625">tt</span><span class="op" id="8232627">.</span><span class="ident" id="8232628">ips</span><span class="op" id="8232631">)</span><span class="op" id="8232632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232637">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232652">for</span>&nbsp;<span class="ident" id="8232656">k</span><span class="op" id="8232657">,</span>&nbsp;<span class="ident" id="8232659">v</span>&nbsp;<span class="op" id="8232661">:=</span>&nbsp;<span class="keyword" id="8232664">range</span>&nbsp;<span class="ident" id="8232670">ips</span>&nbsp;<span class="op" id="8232674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232679">if</span>&nbsp;<span class="ident" id="8232682">tt</span><span class="op" id="8232684">.</span><span class="ident" id="8232685">ips</span><span class="op" id="8232688">[</span><span class="ident" id="8232689">k</span><span class="op" id="8232690">]</span><span class="op" id="8232691">.</span><span class="ident" id="8232692">String</span><span class="op" id="8232698">(</span><span class="op" id="8232699">)</span>&nbsp;<span class="op" id="8232701">!=</span>&nbsp;<span class="ident" id="8232704">v</span>&nbsp;<span class="op" id="8232706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232712">t</span><span class="op" id="8232713">.</span><span class="ident" id="8232714">Errorf</span><span class="op" id="8232720">(</span><span class="string" id="8232721">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8232757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232764">tt</span><span class="op" id="8232766">.</span><span class="ident" id="8232767">host</span><span class="op" id="8232771">,</span>&nbsp;<span class="ident" id="8232773">v</span><span class="op" id="8232774">,</span>&nbsp;<span class="ident" id="8232776">tt</span><span class="op" id="8232778">.</span><span class="ident" id="8232779">ips</span><span class="op" id="8232782">[</span><span class="ident" id="8232783">k</span><span class="op" id="8232784">]</span><span class="op" id="8232785">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232800">hostsPath</span>&nbsp;<span class="op" id="8232810">=</span>&nbsp;<span class="ident" id="8232812">p</span><br>
<span class="lineno"></span><span class="op" id="8232814">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="8232817">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="8232871">func</span>&nbsp;<span class="ident" id="8232876">TestSingleLineHostsFile</span><span class="op" id="8232899">(</span><span class="ident" id="8232900">t</span>&nbsp;<span class="op" id="8232902">*</span><span class="ident" id="8232903">testing</span><span class="op" id="8232910">.</span><span class="ident" id="8232911">T</span><span class="op" id="8232912">)</span>&nbsp;<span class="op" id="8232914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232917">p</span>&nbsp;<span class="op" id="8232919">:=</span>&nbsp;<span class="ident" id="8232922">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232933">hostsPath</span>&nbsp;<span class="op" id="8232943">=</span>&nbsp;<span class="string" id="8232945">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232975">ips</span>&nbsp;<span class="op" id="8232979">:=</span>&nbsp;<span class="ident" id="8232982">lookupStaticHost</span><span class="op" id="8232998">(</span><span class="string" id="8232999">&#34;odin&#34;</span><span class="op" id="8233005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233008">if</span>&nbsp;<span class="builtinfunc" id="8233011">len</span><span class="op" id="8233014">(</span><span class="ident" id="8233015">ips</span><span class="op" id="8233018">)</span>&nbsp;<span class="op" id="8233020">!=</span>&nbsp;<span class="num" id="8233023">1</span>&nbsp;<span class="op" id="8233025">||</span>&nbsp;<span class="ident" id="8233028">ips</span><span class="op" id="8233031">[</span><span class="num" id="8233032">0</span><span class="op" id="8233033">]</span>&nbsp;<span class="op" id="8233035">!=</span>&nbsp;<span class="string" id="8233038">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="8233050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233054">t</span><span class="op" id="8233055">.</span><span class="ident" id="8233056">Errorf</span><span class="op" id="8233062">(</span><span class="string" id="8233063">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8233095">,</span>&nbsp;<span class="ident" id="8233097">ips</span><span class="op" id="8233100">,</span>&nbsp;<span class="op" id="8233102">[</span><span class="op" id="8233103">]</span><span class="builtintype" id="8233104">string</span><span class="op" id="8233110">{</span><span class="string" id="8233111">&#34;127.0.0.2&#34;</span><span class="op" id="8233122">}</span><span class="op" id="8233123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233126">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233130">hostsPath</span>&nbsp;<span class="op" id="8233140">=</span>&nbsp;<span class="ident" id="8233142">p</span><br>
<span class="lineno"></span><span class="op" id="8233144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8233147">func</span>&nbsp;<span class="ident" id="8233152">TestLookupHost</span><span class="op" id="8233166">(</span><span class="ident" id="8233167">t</span>&nbsp;<span class="op" id="8233169">*</span><span class="ident" id="8233170">testing</span><span class="op" id="8233177">.</span><span class="ident" id="8233178">T</span><span class="op" id="8233179">)</span>&nbsp;<span class="op" id="8233181">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8233184">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8233243">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8233301">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8233354">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233378">addrs</span><span class="op" id="8233383">,</span>&nbsp;<span class="ident" id="8233385">_</span>&nbsp;<span class="op" id="8233387">:=</span>&nbsp;<span class="ident" id="8233390">LookupHost</span><span class="op" id="8233400">(</span><span class="string" id="8233401">&#34;localhost&#34;</span><span class="op" id="8233412">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233415">sort</span><span class="op" id="8233419">.</span><span class="ident" id="8233420">Strings</span><span class="op" id="8233427">(</span><span class="ident" id="8233428">addrs</span><span class="op" id="8233433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233436">for</span>&nbsp;<span class="ident" id="8233440">i</span>&nbsp;<span class="op" id="8233442">:=</span>&nbsp;<span class="num" id="8233445">0</span><span class="op" id="8233446">;</span>&nbsp;<span class="ident" id="8233448">i</span><span class="op" id="8233449">+</span><span class="num" id="8233450">1</span>&nbsp;<span class="op" id="8233452">&lt;</span>&nbsp;<span class="builtinfunc" id="8233454">len</span><span class="op" id="8233457">(</span><span class="ident" id="8233458">addrs</span><span class="op" id="8233463">)</span><span class="op" id="8233464">;</span>&nbsp;<span class="ident" id="8233466">i</span><span class="op" id="8233467">++</span>&nbsp;<span class="op" id="8233470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233474">if</span>&nbsp;<span class="ident" id="8233477">addrs</span><span class="op" id="8233482">[</span><span class="ident" id="8233483">i</span><span class="op" id="8233484">]</span>&nbsp;<span class="op" id="8233486">==</span>&nbsp;<span class="ident" id="8233489">addrs</span><span class="op" id="8233494">[</span><span class="ident" id="8233495">i</span><span class="op" id="8233496">+</span><span class="num" id="8233497">1</span><span class="op" id="8233498">]</span>&nbsp;<span class="op" id="8233500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233505">t</span><span class="op" id="8233506">.</span><span class="ident" id="8233507">Fatalf</span><span class="op" id="8233513">(</span><span class="string" id="8233514">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="8233571">,</span>&nbsp;<span class="ident" id="8233573">addrs</span><span class="op" id="8233578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233582">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233585">}</span><br>
<span class="lineno"></span><span class="op" id="8233587">}</span>
</div>
</body>
</html>
