<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2329945">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2330000">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2330054">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2330105">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2330181">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2330255">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2330336">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2330407">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2330482">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2330553">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2330612">//</span><br>
<span class="lineno"></span><span class="comment" id="2330615">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2330691">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2330774">//</span><br>
<span class="lineno"></span><span class="comment" id="2330777">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2330845">//</span><br>
<span class="lineno"></span><span class="comment" id="2330848">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2330903">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2330922">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2330941">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2330946">//</span><br>
<span class="lineno"></span><span class="comment" id="2330949">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2331019">//</span><br>
<span class="lineno">25</span><span class="comment" id="2331022">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2331065">//</span><br>
<span class="lineno"></span><span class="comment" id="2331068">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2331136">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2331207">//</span><br>
<span class="lineno">30</span><span class="comment" id="2331210">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2331239">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2331272">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2331291">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2331310">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2331315">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2331373">//</span><br>
<span class="lineno"></span><span class="keyword" id="2331376">package</span>&nbsp;<span class="ident" id="2331384">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2331388">import</span>&nbsp;<span class="op" id="2331395">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2331398">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2331404">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2331414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2331417">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2331476">func</span>&nbsp;<span class="op" id="2331481">(</span><span class="ident" id="2331482">f</span>&nbsp;<span class="op" id="2331484">*</span><span class="ident" id="2331485">File</span><span class="op" id="2331489">)</span>&nbsp;<span class="ident" id="2331491">Name</span><span class="op" id="2331495">(</span><span class="op" id="2331496">)</span>&nbsp;<span class="builtintype" id="2331498">string</span>&nbsp;<span class="op" id="2331505">{</span>&nbsp;<span class="keyword" id="2331507">return</span>&nbsp;<span class="ident" id="2331514">f</span><span class="op" id="2331515">.</span><span class="ident" id="2331516">name</span>&nbsp;<span class="op" id="2331521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2331524">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2331600">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2331657">var</span>&nbsp;<span class="op" id="2331661">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2331664">Stdin</span>&nbsp;&nbsp;<span class="op" id="2331671">=</span>&nbsp;<span class="ident" id="2331673">NewFile</span><span class="op" id="2331680">(</span><span class="builtintype" id="2331681">uintptr</span><span class="op" id="2331688">(</span><span class="ident" id="2331689">syscall</span><span class="op" id="2331696">.</span><span class="ident" id="2331697">Stdin</span><span class="op" id="2331702">)</span><span class="op" id="2331703">,</span>&nbsp;<span class="string" id="2331705">&#34;/dev/stdin&#34;</span><span class="op" id="2331717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2331720">Stdout</span>&nbsp;<span class="op" id="2331727">=</span>&nbsp;<span class="ident" id="2331729">NewFile</span><span class="op" id="2331736">(</span><span class="builtintype" id="2331737">uintptr</span><span class="op" id="2331744">(</span><span class="ident" id="2331745">syscall</span><span class="op" id="2331752">.</span><span class="ident" id="2331753">Stdout</span><span class="op" id="2331759">)</span><span class="op" id="2331760">,</span>&nbsp;<span class="string" id="2331762">&#34;/dev/stdout&#34;</span><span class="op" id="2331775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2331778">Stderr</span>&nbsp;<span class="op" id="2331785">=</span>&nbsp;<span class="ident" id="2331787">NewFile</span><span class="op" id="2331794">(</span><span class="builtintype" id="2331795">uintptr</span><span class="op" id="2331802">(</span><span class="ident" id="2331803">syscall</span><span class="op" id="2331810">.</span><span class="ident" id="2331811">Stderr</span><span class="op" id="2331817">)</span><span class="op" id="2331818">,</span>&nbsp;<span class="string" id="2331820">&#34;/dev/stderr&#34;</span><span class="op" id="2331833">)</span><br>
<span class="lineno"></span><span class="op" id="2331835">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2331838">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2331910">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2331951">const</span>&nbsp;<span class="op" id="2331957">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2331960">O_RDONLY</span>&nbsp;<span class="builtintype" id="2331969">int</span>&nbsp;<span class="op" id="2331973">=</span>&nbsp;<span class="ident" id="2331975">syscall</span><span class="op" id="2331982">.</span><span class="ident" id="2331983">O_RDONLY</span>&nbsp;<span class="comment" id="2331992">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332021">O_WRONLY</span>&nbsp;<span class="builtintype" id="2332030">int</span>&nbsp;<span class="op" id="2332034">=</span>&nbsp;<span class="ident" id="2332036">syscall</span><span class="op" id="2332043">.</span><span class="ident" id="2332044">O_WRONLY</span>&nbsp;<span class="comment" id="2332053">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332083">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2332092">int</span>&nbsp;<span class="op" id="2332096">=</span>&nbsp;<span class="ident" id="2332098">syscall</span><span class="op" id="2332105">.</span><span class="ident" id="2332106">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2332115">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332145">O_APPEND</span>&nbsp;<span class="builtintype" id="2332154">int</span>&nbsp;<span class="op" id="2332158">=</span>&nbsp;<span class="ident" id="2332160">syscall</span><span class="op" id="2332167">.</span><span class="ident" id="2332168">O_APPEND</span>&nbsp;<span class="comment" id="2332177">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332219">O_CREATE</span>&nbsp;<span class="builtintype" id="2332228">int</span>&nbsp;<span class="op" id="2332232">=</span>&nbsp;<span class="ident" id="2332234">syscall</span><span class="op" id="2332241">.</span><span class="ident" id="2332242">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2332251">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332289">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2332298">int</span>&nbsp;<span class="op" id="2332302">=</span>&nbsp;<span class="ident" id="2332304">syscall</span><span class="op" id="2332311">.</span><span class="ident" id="2332312">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2332321">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332365">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2332374">int</span>&nbsp;<span class="op" id="2332378">=</span>&nbsp;<span class="ident" id="2332380">syscall</span><span class="op" id="2332387">.</span><span class="ident" id="2332388">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2332397">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332427">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2332436">int</span>&nbsp;<span class="op" id="2332440">=</span>&nbsp;<span class="ident" id="2332442">syscall</span><span class="op" id="2332449">.</span><span class="ident" id="2332450">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2332459">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2332502">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2332505">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2332528">const</span>&nbsp;<span class="op" id="2332534">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332537">SEEK_SET</span>&nbsp;<span class="builtintype" id="2332546">int</span>&nbsp;<span class="op" id="2332550">=</span>&nbsp;<span class="num" id="2332552">0</span>&nbsp;<span class="comment" id="2332554">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332598">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2332607">int</span>&nbsp;<span class="op" id="2332611">=</span>&nbsp;<span class="num" id="2332613">1</span>&nbsp;<span class="comment" id="2332615">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332655">SEEK_END</span>&nbsp;<span class="builtintype" id="2332664">int</span>&nbsp;<span class="op" id="2332668">=</span>&nbsp;<span class="num" id="2332670">2</span>&nbsp;<span class="comment" id="2332672">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2332700">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2332703">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2332768">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2332813">type</span>&nbsp;<span class="ident" id="2332818">LinkError</span>&nbsp;<span class="keyword" id="2332828">struct</span>&nbsp;<span class="op" id="2332835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332838">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2332842">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332850">Old</span>&nbsp;<span class="builtintype" id="2332854">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332862">New</span>&nbsp;<span class="builtintype" id="2332866">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332874">Err</span>&nbsp;<span class="builtintype" id="2332878">error</span><br>
<span class="lineno"></span><span class="op" id="2332884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2332887">func</span>&nbsp;<span class="op" id="2332892">(</span><span class="ident" id="2332893">e</span>&nbsp;<span class="op" id="2332895">*</span><span class="ident" id="2332896">LinkError</span><span class="op" id="2332905">)</span>&nbsp;<span class="ident" id="2332907">Error</span><span class="op" id="2332912">(</span><span class="op" id="2332913">)</span>&nbsp;<span class="builtintype" id="2332915">string</span>&nbsp;<span class="op" id="2332922">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2332925">return</span>&nbsp;<span class="ident" id="2332932">e</span><span class="op" id="2332933">.</span><span class="ident" id="2332934">Op</span>&nbsp;<span class="op" id="2332937">+</span>&nbsp;<span class="string" id="2332939">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2332943">+</span>&nbsp;<span class="ident" id="2332945">e</span><span class="op" id="2332946">.</span><span class="ident" id="2332947">Old</span>&nbsp;<span class="op" id="2332951">+</span>&nbsp;<span class="string" id="2332953">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2332957">+</span>&nbsp;<span class="ident" id="2332959">e</span><span class="op" id="2332960">.</span><span class="ident" id="2332961">New</span>&nbsp;<span class="op" id="2332965">+</span>&nbsp;<span class="string" id="2332967">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2332972">+</span>&nbsp;<span class="ident" id="2332974">e</span><span class="op" id="2332975">.</span><span class="ident" id="2332976">Err</span><span class="op" id="2332979">.</span><span class="ident" id="2332980">Error</span><span class="op" id="2332985">(</span><span class="op" id="2332986">)</span><br>
<span class="lineno"></span><span class="op" id="2332988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2332991">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2333039">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2333100">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2333159">func</span>&nbsp;<span class="op" id="2333164">(</span><span class="ident" id="2333165">f</span>&nbsp;<span class="op" id="2333167">*</span><span class="ident" id="2333168">File</span><span class="op" id="2333172">)</span>&nbsp;<span class="ident" id="2333174">Read</span><span class="op" id="2333178">(</span><span class="ident" id="2333179">b</span>&nbsp;<span class="op" id="2333181">[</span><span class="op" id="2333182">]</span><span class="builtintype" id="2333183">byte</span><span class="op" id="2333187">)</span>&nbsp;<span class="op" id="2333189">(</span><span class="ident" id="2333190">n</span>&nbsp;<span class="builtintype" id="2333192">int</span><span class="op" id="2333195">,</span>&nbsp;<span class="ident" id="2333197">err</span>&nbsp;<span class="builtintype" id="2333201">error</span><span class="op" id="2333206">)</span>&nbsp;<span class="op" id="2333208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333211">if</span>&nbsp;<span class="ident" id="2333214">f</span>&nbsp;<span class="op" id="2333216">==</span>&nbsp;<span class="ident" id="2333219">nil</span>&nbsp;<span class="op" id="2333223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333227">return</span>&nbsp;<span class="num" id="2333234">0</span><span class="op" id="2333235">,</span>&nbsp;<span class="ident" id="2333237">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333249">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333252">n</span><span class="op" id="2333253">,</span>&nbsp;<span class="ident" id="2333255">e</span>&nbsp;<span class="op" id="2333257">:=</span>&nbsp;<span class="ident" id="2333260">f</span><span class="op" id="2333261">.</span><span class="ident" id="2333262">read</span><span class="op" id="2333266">(</span><span class="ident" id="2333267">b</span><span class="op" id="2333268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333271">if</span>&nbsp;<span class="ident" id="2333274">n</span>&nbsp;<span class="op" id="2333276">&lt;</span>&nbsp;<span class="num" id="2333278">0</span>&nbsp;<span class="op" id="2333280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333284">n</span>&nbsp;<span class="op" id="2333286">=</span>&nbsp;<span class="num" id="2333288">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333294">if</span>&nbsp;<span class="ident" id="2333297">n</span>&nbsp;<span class="op" id="2333299">==</span>&nbsp;<span class="num" id="2333302">0</span>&nbsp;<span class="op" id="2333304">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2333307">len</span><span class="op" id="2333310">(</span><span class="ident" id="2333311">b</span><span class="op" id="2333312">)</span>&nbsp;<span class="op" id="2333314">&gt;</span>&nbsp;<span class="num" id="2333316">0</span>&nbsp;<span class="op" id="2333318">&amp;&amp;</span>&nbsp;<span class="ident" id="2333321">e</span>&nbsp;<span class="op" id="2333323">==</span>&nbsp;<span class="ident" id="2333326">nil</span>&nbsp;<span class="op" id="2333330">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333334">return</span>&nbsp;<span class="num" id="2333341">0</span><span class="op" id="2333342">,</span>&nbsp;<span class="ident" id="2333344">io</span><span class="op" id="2333346">.</span><span class="ident" id="2333347">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333355">if</span>&nbsp;<span class="ident" id="2333358">e</span>&nbsp;<span class="op" id="2333360">!=</span>&nbsp;<span class="ident" id="2333363">nil</span>&nbsp;<span class="op" id="2333367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333371">err</span>&nbsp;<span class="op" id="2333375">=</span>&nbsp;<span class="op" id="2333377">&amp;</span><span class="ident" id="2333378">PathError</span><span class="op" id="2333387">{</span><span class="string" id="2333388">&#34;read&#34;</span><span class="op" id="2333394">,</span>&nbsp;<span class="ident" id="2333396">f</span><span class="op" id="2333397">.</span><span class="ident" id="2333398">name</span><span class="op" id="2333402">,</span>&nbsp;<span class="ident" id="2333404">e</span><span class="op" id="2333405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333408">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333411">return</span>&nbsp;<span class="ident" id="2333418">n</span><span class="op" id="2333419">,</span>&nbsp;<span class="ident" id="2333421">err</span><br>
<span class="lineno"></span><span class="op" id="2333425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2333428">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2333500">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2333562">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2333620">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2333661">func</span>&nbsp;<span class="op" id="2333666">(</span><span class="ident" id="2333667">f</span>&nbsp;<span class="op" id="2333669">*</span><span class="ident" id="2333670">File</span><span class="op" id="2333674">)</span>&nbsp;<span class="ident" id="2333676">ReadAt</span><span class="op" id="2333682">(</span><span class="ident" id="2333683">b</span>&nbsp;<span class="op" id="2333685">[</span><span class="op" id="2333686">]</span><span class="builtintype" id="2333687">byte</span><span class="op" id="2333691">,</span>&nbsp;<span class="ident" id="2333693">off</span>&nbsp;<span class="ident" id="2333697">int64</span><span class="op" id="2333702">)</span>&nbsp;<span class="op" id="2333704">(</span><span class="ident" id="2333705">n</span>&nbsp;<span class="builtintype" id="2333707">int</span><span class="op" id="2333710">,</span>&nbsp;<span class="ident" id="2333712">err</span>&nbsp;<span class="builtintype" id="2333716">error</span><span class="op" id="2333721">)</span>&nbsp;<span class="op" id="2333723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333726">if</span>&nbsp;<span class="ident" id="2333729">f</span>&nbsp;<span class="op" id="2333731">==</span>&nbsp;<span class="ident" id="2333734">nil</span>&nbsp;<span class="op" id="2333738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333742">return</span>&nbsp;<span class="num" id="2333749">0</span><span class="op" id="2333750">,</span>&nbsp;<span class="ident" id="2333752">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333767">for</span>&nbsp;<span class="builtinfunc" id="2333771">len</span><span class="op" id="2333774">(</span><span class="ident" id="2333775">b</span><span class="op" id="2333776">)</span>&nbsp;<span class="op" id="2333778">&gt;</span>&nbsp;<span class="num" id="2333780">0</span>&nbsp;<span class="op" id="2333782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333786">m</span><span class="op" id="2333787">,</span>&nbsp;<span class="ident" id="2333789">e</span>&nbsp;<span class="op" id="2333791">:=</span>&nbsp;<span class="ident" id="2333794">f</span><span class="op" id="2333795">.</span><span class="ident" id="2333796">pread</span><span class="op" id="2333801">(</span><span class="ident" id="2333802">b</span><span class="op" id="2333803">,</span>&nbsp;<span class="ident" id="2333805">off</span><span class="op" id="2333808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333812">if</span>&nbsp;<span class="ident" id="2333815">m</span>&nbsp;<span class="op" id="2333817">==</span>&nbsp;<span class="num" id="2333820">0</span>&nbsp;<span class="op" id="2333822">&amp;&amp;</span>&nbsp;<span class="ident" id="2333825">e</span>&nbsp;<span class="op" id="2333827">==</span>&nbsp;<span class="ident" id="2333830">nil</span>&nbsp;<span class="op" id="2333834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333839">return</span>&nbsp;<span class="ident" id="2333846">n</span><span class="op" id="2333847">,</span>&nbsp;<span class="ident" id="2333849">io</span><span class="op" id="2333851">.</span><span class="ident" id="2333852">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333862">if</span>&nbsp;<span class="ident" id="2333865">e</span>&nbsp;<span class="op" id="2333867">!=</span>&nbsp;<span class="ident" id="2333870">nil</span>&nbsp;<span class="op" id="2333874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333879">err</span>&nbsp;<span class="op" id="2333883">=</span>&nbsp;<span class="op" id="2333885">&amp;</span><span class="ident" id="2333886">PathError</span><span class="op" id="2333895">{</span><span class="string" id="2333896">&#34;read&#34;</span><span class="op" id="2333902">,</span>&nbsp;<span class="ident" id="2333904">f</span><span class="op" id="2333905">.</span><span class="ident" id="2333906">name</span><span class="op" id="2333910">,</span>&nbsp;<span class="ident" id="2333912">e</span><span class="op" id="2333913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333918">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333926">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333930">n</span>&nbsp;<span class="op" id="2333932">+=</span>&nbsp;<span class="ident" id="2333935">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333939">b</span>&nbsp;<span class="op" id="2333941">=</span>&nbsp;<span class="ident" id="2333943">b</span><span class="op" id="2333944">[</span><span class="ident" id="2333945">m</span><span class="op" id="2333946">:</span><span class="op" id="2333947">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2333951">off</span>&nbsp;<span class="op" id="2333955">+=</span>&nbsp;<span class="ident" id="2333958">int64</span><span class="op" id="2333963">(</span><span class="ident" id="2333964">m</span><span class="op" id="2333965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2333968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2333971">return</span><br>
<span class="lineno">130</span><span class="op" id="2333978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2333981">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2334023">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2334087">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2334138">func</span>&nbsp;<span class="op" id="2334143">(</span><span class="ident" id="2334144">f</span>&nbsp;<span class="op" id="2334146">*</span><span class="ident" id="2334147">File</span><span class="op" id="2334151">)</span>&nbsp;<span class="ident" id="2334153">Write</span><span class="op" id="2334158">(</span><span class="ident" id="2334159">b</span>&nbsp;<span class="op" id="2334161">[</span><span class="op" id="2334162">]</span><span class="builtintype" id="2334163">byte</span><span class="op" id="2334167">)</span>&nbsp;<span class="op" id="2334169">(</span><span class="ident" id="2334170">n</span>&nbsp;<span class="builtintype" id="2334172">int</span><span class="op" id="2334175">,</span>&nbsp;<span class="ident" id="2334177">err</span>&nbsp;<span class="builtintype" id="2334181">error</span><span class="op" id="2334186">)</span>&nbsp;<span class="op" id="2334188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334191">if</span>&nbsp;<span class="ident" id="2334194">f</span>&nbsp;<span class="op" id="2334196">==</span>&nbsp;<span class="ident" id="2334199">nil</span>&nbsp;<span class="op" id="2334203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334207">return</span>&nbsp;<span class="num" id="2334214">0</span><span class="op" id="2334215">,</span>&nbsp;<span class="ident" id="2334217">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334232">n</span><span class="op" id="2334233">,</span>&nbsp;<span class="ident" id="2334235">e</span>&nbsp;<span class="op" id="2334237">:=</span>&nbsp;<span class="ident" id="2334240">f</span><span class="op" id="2334241">.</span><span class="ident" id="2334242">write</span><span class="op" id="2334247">(</span><span class="ident" id="2334248">b</span><span class="op" id="2334249">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334252">if</span>&nbsp;<span class="ident" id="2334255">n</span>&nbsp;<span class="op" id="2334257">&lt;</span>&nbsp;<span class="num" id="2334259">0</span>&nbsp;<span class="op" id="2334261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334265">n</span>&nbsp;<span class="op" id="2334267">=</span>&nbsp;<span class="num" id="2334269">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334275">if</span>&nbsp;<span class="ident" id="2334278">n</span>&nbsp;<span class="op" id="2334280">!=</span>&nbsp;<span class="builtinfunc" id="2334283">len</span><span class="op" id="2334286">(</span><span class="ident" id="2334287">b</span><span class="op" id="2334288">)</span>&nbsp;<span class="op" id="2334290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334294">err</span>&nbsp;<span class="op" id="2334298">=</span>&nbsp;<span class="ident" id="2334300">io</span><span class="op" id="2334302">.</span><span class="ident" id="2334303">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334322">epipecheck</span><span class="op" id="2334332">(</span><span class="ident" id="2334333">f</span><span class="op" id="2334334">,</span>&nbsp;<span class="ident" id="2334336">e</span><span class="op" id="2334337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334341">if</span>&nbsp;<span class="ident" id="2334344">e</span>&nbsp;<span class="op" id="2334346">!=</span>&nbsp;<span class="ident" id="2334349">nil</span>&nbsp;<span class="op" id="2334353">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334357">err</span>&nbsp;<span class="op" id="2334361">=</span>&nbsp;<span class="op" id="2334363">&amp;</span><span class="ident" id="2334364">PathError</span><span class="op" id="2334373">{</span><span class="string" id="2334374">&#34;write&#34;</span><span class="op" id="2334381">,</span>&nbsp;<span class="ident" id="2334383">f</span><span class="op" id="2334384">.</span><span class="ident" id="2334385">name</span><span class="op" id="2334389">,</span>&nbsp;<span class="ident" id="2334391">e</span><span class="op" id="2334392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334398">return</span>&nbsp;<span class="ident" id="2334405">n</span><span class="op" id="2334406">,</span>&nbsp;<span class="ident" id="2334408">err</span><br>
<span class="lineno"></span><span class="op" id="2334412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2334415">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2334487">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2334551">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2334604">func</span>&nbsp;<span class="op" id="2334609">(</span><span class="ident" id="2334610">f</span>&nbsp;<span class="op" id="2334612">*</span><span class="ident" id="2334613">File</span><span class="op" id="2334617">)</span>&nbsp;<span class="ident" id="2334619">WriteAt</span><span class="op" id="2334626">(</span><span class="ident" id="2334627">b</span>&nbsp;<span class="op" id="2334629">[</span><span class="op" id="2334630">]</span><span class="builtintype" id="2334631">byte</span><span class="op" id="2334635">,</span>&nbsp;<span class="ident" id="2334637">off</span>&nbsp;<span class="ident" id="2334641">int64</span><span class="op" id="2334646">)</span>&nbsp;<span class="op" id="2334648">(</span><span class="ident" id="2334649">n</span>&nbsp;<span class="builtintype" id="2334651">int</span><span class="op" id="2334654">,</span>&nbsp;<span class="ident" id="2334656">err</span>&nbsp;<span class="builtintype" id="2334660">error</span><span class="op" id="2334665">)</span>&nbsp;<span class="op" id="2334667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334670">if</span>&nbsp;<span class="ident" id="2334673">f</span>&nbsp;<span class="op" id="2334675">==</span>&nbsp;<span class="ident" id="2334678">nil</span>&nbsp;<span class="op" id="2334682">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334686">return</span>&nbsp;<span class="num" id="2334693">0</span><span class="op" id="2334694">,</span>&nbsp;<span class="ident" id="2334696">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334711">for</span>&nbsp;<span class="builtinfunc" id="2334715">len</span><span class="op" id="2334718">(</span><span class="ident" id="2334719">b</span><span class="op" id="2334720">)</span>&nbsp;<span class="op" id="2334722">&gt;</span>&nbsp;<span class="num" id="2334724">0</span>&nbsp;<span class="op" id="2334726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334730">m</span><span class="op" id="2334731">,</span>&nbsp;<span class="ident" id="2334733">e</span>&nbsp;<span class="op" id="2334735">:=</span>&nbsp;<span class="ident" id="2334738">f</span><span class="op" id="2334739">.</span><span class="ident" id="2334740">pwrite</span><span class="op" id="2334746">(</span><span class="ident" id="2334747">b</span><span class="op" id="2334748">,</span>&nbsp;<span class="ident" id="2334750">off</span><span class="op" id="2334753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334757">if</span>&nbsp;<span class="ident" id="2334760">e</span>&nbsp;<span class="op" id="2334762">!=</span>&nbsp;<span class="ident" id="2334765">nil</span>&nbsp;<span class="op" id="2334769">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334774">err</span>&nbsp;<span class="op" id="2334778">=</span>&nbsp;<span class="op" id="2334780">&amp;</span><span class="ident" id="2334781">PathError</span><span class="op" id="2334790">{</span><span class="string" id="2334791">&#34;write&#34;</span><span class="op" id="2334798">,</span>&nbsp;<span class="ident" id="2334800">f</span><span class="op" id="2334801">.</span><span class="ident" id="2334802">name</span><span class="op" id="2334806">,</span>&nbsp;<span class="ident" id="2334808">e</span><span class="op" id="2334809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334814">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334826">n</span>&nbsp;<span class="op" id="2334828">+=</span>&nbsp;<span class="ident" id="2334831">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334835">b</span>&nbsp;<span class="op" id="2334837">=</span>&nbsp;<span class="ident" id="2334839">b</span><span class="op" id="2334840">[</span><span class="ident" id="2334841">m</span><span class="op" id="2334842">:</span><span class="op" id="2334843">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2334847">off</span>&nbsp;<span class="op" id="2334851">+=</span>&nbsp;<span class="ident" id="2334854">int64</span><span class="op" id="2334859">(</span><span class="ident" id="2334860">m</span><span class="op" id="2334861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2334864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2334867">return</span><br>
<span class="lineno"></span><span class="op" id="2334874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2334877">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2334959">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2335035">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2335103">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2335154">func</span>&nbsp;<span class="op" id="2335159">(</span><span class="ident" id="2335160">f</span>&nbsp;<span class="op" id="2335162">*</span><span class="ident" id="2335163">File</span><span class="op" id="2335167">)</span>&nbsp;<span class="ident" id="2335169">Seek</span><span class="op" id="2335173">(</span><span class="ident" id="2335174">offset</span>&nbsp;<span class="ident" id="2335181">int64</span><span class="op" id="2335186">,</span>&nbsp;<span class="ident" id="2335188">whence</span>&nbsp;<span class="builtintype" id="2335195">int</span><span class="op" id="2335198">)</span>&nbsp;<span class="op" id="2335200">(</span><span class="ident" id="2335201">ret</span>&nbsp;<span class="ident" id="2335205">int64</span><span class="op" id="2335210">,</span>&nbsp;<span class="ident" id="2335212">err</span>&nbsp;<span class="builtintype" id="2335216">error</span><span class="op" id="2335221">)</span>&nbsp;<span class="op" id="2335223">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335226">if</span>&nbsp;<span class="ident" id="2335229">f</span>&nbsp;<span class="op" id="2335231">==</span>&nbsp;<span class="ident" id="2335234">nil</span>&nbsp;<span class="op" id="2335238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335242">return</span>&nbsp;<span class="num" id="2335249">0</span><span class="op" id="2335250">,</span>&nbsp;<span class="ident" id="2335252">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2335264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2335267">r</span><span class="op" id="2335268">,</span>&nbsp;<span class="ident" id="2335270">e</span>&nbsp;<span class="op" id="2335272">:=</span>&nbsp;<span class="ident" id="2335275">f</span><span class="op" id="2335276">.</span><span class="ident" id="2335277">seek</span><span class="op" id="2335281">(</span><span class="ident" id="2335282">offset</span><span class="op" id="2335288">,</span>&nbsp;<span class="ident" id="2335290">whence</span><span class="op" id="2335296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335299">if</span>&nbsp;<span class="ident" id="2335302">e</span>&nbsp;<span class="op" id="2335304">==</span>&nbsp;<span class="ident" id="2335307">nil</span>&nbsp;<span class="op" id="2335311">&amp;&amp;</span>&nbsp;<span class="ident" id="2335314">f</span><span class="op" id="2335315">.</span><span class="ident" id="2335316">dirinfo</span>&nbsp;<span class="op" id="2335324">!=</span>&nbsp;<span class="ident" id="2335327">nil</span>&nbsp;<span class="op" id="2335331">&amp;&amp;</span>&nbsp;<span class="ident" id="2335334">r</span>&nbsp;<span class="op" id="2335336">!=</span>&nbsp;<span class="num" id="2335339">0</span>&nbsp;<span class="op" id="2335341">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2335345">e</span>&nbsp;<span class="op" id="2335347">=</span>&nbsp;<span class="ident" id="2335349">syscall</span><span class="op" id="2335356">.</span><span class="ident" id="2335357">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2335365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335368">if</span>&nbsp;<span class="ident" id="2335371">e</span>&nbsp;<span class="op" id="2335373">!=</span>&nbsp;<span class="ident" id="2335376">nil</span>&nbsp;<span class="op" id="2335380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335384">return</span>&nbsp;<span class="num" id="2335391">0</span><span class="op" id="2335392">,</span>&nbsp;<span class="op" id="2335394">&amp;</span><span class="ident" id="2335395">PathError</span><span class="op" id="2335404">{</span><span class="string" id="2335405">&#34;seek&#34;</span><span class="op" id="2335411">,</span>&nbsp;<span class="ident" id="2335413">f</span><span class="op" id="2335414">.</span><span class="ident" id="2335415">name</span><span class="op" id="2335419">,</span>&nbsp;<span class="ident" id="2335421">e</span><span class="op" id="2335422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2335425">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335428">return</span>&nbsp;<span class="ident" id="2335435">r</span><span class="op" id="2335436">,</span>&nbsp;<span class="ident" id="2335438">nil</span><br>
<span class="lineno"></span><span class="op" id="2335442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335445">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2335523">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2335544">func</span>&nbsp;<span class="op" id="2335549">(</span><span class="ident" id="2335550">f</span>&nbsp;<span class="op" id="2335552">*</span><span class="ident" id="2335553">File</span><span class="op" id="2335557">)</span>&nbsp;<span class="ident" id="2335559">WriteString</span><span class="op" id="2335570">(</span><span class="ident" id="2335571">s</span>&nbsp;<span class="builtintype" id="2335573">string</span><span class="op" id="2335579">)</span>&nbsp;<span class="op" id="2335581">(</span><span class="ident" id="2335582">ret</span>&nbsp;<span class="builtintype" id="2335586">int</span><span class="op" id="2335589">,</span>&nbsp;<span class="ident" id="2335591">err</span>&nbsp;<span class="builtintype" id="2335595">error</span><span class="op" id="2335600">)</span>&nbsp;<span class="op" id="2335602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335605">if</span>&nbsp;<span class="ident" id="2335608">f</span>&nbsp;<span class="op" id="2335610">==</span>&nbsp;<span class="ident" id="2335613">nil</span>&nbsp;<span class="op" id="2335617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335621">return</span>&nbsp;<span class="num" id="2335628">0</span><span class="op" id="2335629">,</span>&nbsp;<span class="ident" id="2335631">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2335643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335646">return</span>&nbsp;<span class="ident" id="2335653">f</span><span class="op" id="2335654">.</span><span class="ident" id="2335655">Write</span><span class="op" id="2335660">(</span><span class="op" id="2335661">[</span><span class="op" id="2335662">]</span><span class="builtintype" id="2335663">byte</span><span class="op" id="2335667">(</span><span class="ident" id="2335668">s</span><span class="op" id="2335669">)</span><span class="op" id="2335670">)</span><br>
<span class="lineno">200</span><span class="op" id="2335672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335675">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2335753">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2335809">func</span>&nbsp;<span class="ident" id="2335814">Mkdir</span><span class="op" id="2335819">(</span><span class="ident" id="2335820">name</span>&nbsp;<span class="builtintype" id="2335825">string</span><span class="op" id="2335831">,</span>&nbsp;<span class="ident" id="2335833">perm</span>&nbsp;<span class="ident" id="2335838">FileMode</span><span class="op" id="2335846">)</span>&nbsp;<span class="builtintype" id="2335848">error</span>&nbsp;<span class="op" id="2335854">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2335857">e</span>&nbsp;<span class="op" id="2335859">:=</span>&nbsp;<span class="ident" id="2335862">syscall</span><span class="op" id="2335869">.</span><span class="ident" id="2335870">Mkdir</span><span class="op" id="2335875">(</span><span class="ident" id="2335876">name</span><span class="op" id="2335880">,</span>&nbsp;<span class="ident" id="2335882">syscallMode</span><span class="op" id="2335893">(</span><span class="ident" id="2335894">perm</span><span class="op" id="2335898">)</span><span class="op" id="2335899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335902">if</span>&nbsp;<span class="ident" id="2335905">e</span>&nbsp;<span class="op" id="2335907">!=</span>&nbsp;<span class="ident" id="2335910">nil</span>&nbsp;<span class="op" id="2335914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335918">return</span>&nbsp;<span class="op" id="2335925">&amp;</span><span class="ident" id="2335926">PathError</span><span class="op" id="2335935">{</span><span class="string" id="2335936">&#34;mkdir&#34;</span><span class="op" id="2335943">,</span>&nbsp;<span class="ident" id="2335945">name</span><span class="op" id="2335949">,</span>&nbsp;<span class="ident" id="2335951">e</span><span class="op" id="2335952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2335955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2335958">return</span>&nbsp;<span class="ident" id="2335965">nil</span><br>
<span class="lineno">210</span><span class="op" id="2335969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335972">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2336043">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2336099">func</span>&nbsp;<span class="ident" id="2336104">Chdir</span><span class="op" id="2336109">(</span><span class="ident" id="2336110">dir</span>&nbsp;<span class="builtintype" id="2336114">string</span><span class="op" id="2336120">)</span>&nbsp;<span class="builtintype" id="2336122">error</span>&nbsp;<span class="op" id="2336128">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336131">if</span>&nbsp;<span class="ident" id="2336134">e</span>&nbsp;<span class="op" id="2336136">:=</span>&nbsp;<span class="ident" id="2336139">syscall</span><span class="op" id="2336146">.</span><span class="ident" id="2336147">Chdir</span><span class="op" id="2336152">(</span><span class="ident" id="2336153">dir</span><span class="op" id="2336156">)</span><span class="op" id="2336157">;</span>&nbsp;<span class="ident" id="2336159">e</span>&nbsp;<span class="op" id="2336161">!=</span>&nbsp;<span class="ident" id="2336164">nil</span>&nbsp;<span class="op" id="2336168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336172">return</span>&nbsp;<span class="op" id="2336179">&amp;</span><span class="ident" id="2336180">PathError</span><span class="op" id="2336189">{</span><span class="string" id="2336190">&#34;chdir&#34;</span><span class="op" id="2336197">,</span>&nbsp;<span class="ident" id="2336199">dir</span><span class="op" id="2336202">,</span>&nbsp;<span class="ident" id="2336204">e</span><span class="op" id="2336205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2336208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336211">return</span>&nbsp;<span class="ident" id="2336218">nil</span><br>
<span class="lineno"></span><span class="op" id="2336222">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2336225">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2336285">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2336315">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2336371">func</span>&nbsp;<span class="op" id="2336376">(</span><span class="ident" id="2336377">f</span>&nbsp;<span class="op" id="2336379">*</span><span class="ident" id="2336380">File</span><span class="op" id="2336384">)</span>&nbsp;<span class="ident" id="2336386">Chdir</span><span class="op" id="2336391">(</span><span class="op" id="2336392">)</span>&nbsp;<span class="builtintype" id="2336394">error</span>&nbsp;<span class="op" id="2336400">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336403">if</span>&nbsp;<span class="ident" id="2336406">f</span>&nbsp;<span class="op" id="2336408">==</span>&nbsp;<span class="ident" id="2336411">nil</span>&nbsp;<span class="op" id="2336415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336419">return</span>&nbsp;<span class="ident" id="2336426">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2336438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336441">if</span>&nbsp;<span class="ident" id="2336444">e</span>&nbsp;<span class="op" id="2336446">:=</span>&nbsp;<span class="ident" id="2336449">syscall</span><span class="op" id="2336456">.</span><span class="ident" id="2336457">Fchdir</span><span class="op" id="2336463">(</span><span class="ident" id="2336464">f</span><span class="op" id="2336465">.</span><span class="ident" id="2336466">fd</span><span class="op" id="2336468">)</span><span class="op" id="2336469">;</span>&nbsp;<span class="ident" id="2336471">e</span>&nbsp;<span class="op" id="2336473">!=</span>&nbsp;<span class="ident" id="2336476">nil</span>&nbsp;<span class="op" id="2336480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336484">return</span>&nbsp;<span class="op" id="2336491">&amp;</span><span class="ident" id="2336492">PathError</span><span class="op" id="2336501">{</span><span class="string" id="2336502">&#34;chdir&#34;</span><span class="op" id="2336509">,</span>&nbsp;<span class="ident" id="2336511">f</span><span class="op" id="2336512">.</span><span class="ident" id="2336513">name</span><span class="op" id="2336517">,</span>&nbsp;<span class="ident" id="2336519">e</span><span class="op" id="2336520">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2336523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336526">return</span>&nbsp;<span class="ident" id="2336533">nil</span><br>
<span class="lineno"></span><span class="op" id="2336537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2336540">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2336609">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2336675">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2336708">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2336764">func</span>&nbsp;<span class="ident" id="2336769">Open</span><span class="op" id="2336773">(</span><span class="ident" id="2336774">name</span>&nbsp;<span class="builtintype" id="2336779">string</span><span class="op" id="2336785">)</span>&nbsp;<span class="op" id="2336787">(</span><span class="ident" id="2336788">file</span>&nbsp;<span class="op" id="2336793">*</span><span class="ident" id="2336794">File</span><span class="op" id="2336798">,</span>&nbsp;<span class="ident" id="2336800">err</span>&nbsp;<span class="builtintype" id="2336804">error</span><span class="op" id="2336809">)</span>&nbsp;<span class="op" id="2336811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2336814">return</span>&nbsp;<span class="ident" id="2336821">OpenFile</span><span class="op" id="2336829">(</span><span class="ident" id="2336830">name</span><span class="op" id="2336834">,</span>&nbsp;<span class="ident" id="2336836">O_RDONLY</span><span class="op" id="2336844">,</span>&nbsp;<span class="num" id="2336846">0</span><span class="op" id="2336847">)</span><br>
<span class="lineno">240</span><span class="op" id="2336849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2336852">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2336922">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2336990">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2337059">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2337070">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2337126">func</span>&nbsp;<span class="ident" id="2337131">Create</span><span class="op" id="2337137">(</span><span class="ident" id="2337138">name</span>&nbsp;<span class="builtintype" id="2337143">string</span><span class="op" id="2337149">)</span>&nbsp;<span class="op" id="2337151">(</span><span class="ident" id="2337152">file</span>&nbsp;<span class="op" id="2337157">*</span><span class="ident" id="2337158">File</span><span class="op" id="2337162">,</span>&nbsp;<span class="ident" id="2337164">err</span>&nbsp;<span class="builtintype" id="2337168">error</span><span class="op" id="2337173">)</span>&nbsp;<span class="op" id="2337175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2337178">return</span>&nbsp;<span class="ident" id="2337185">OpenFile</span><span class="op" id="2337193">(</span><span class="ident" id="2337194">name</span><span class="op" id="2337198">,</span>&nbsp;<span class="ident" id="2337200">O_RDWR</span><span class="op" id="2337206">|</span><span class="ident" id="2337207">O_CREATE</span><span class="op" id="2337215">|</span><span class="ident" id="2337216">O_TRUNC</span><span class="op" id="2337223">,</span>&nbsp;<span class="num" id="2337225">0666</span><span class="op" id="2337229">)</span><br>
<span class="lineno"></span><span class="op" id="2337231">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2337234">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2337267">var</span>&nbsp;<span class="ident" id="2337271">lstat</span>&nbsp;<span class="op" id="2337277">=</span>&nbsp;<span class="ident" id="2337279">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2337286">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2337358">func</span>&nbsp;<span class="ident" id="2337363">Rename</span><span class="op" id="2337369">(</span><span class="ident" id="2337370">oldpath</span><span class="op" id="2337377">,</span>&nbsp;<span class="ident" id="2337379">newpath</span>&nbsp;<span class="builtintype" id="2337387">string</span><span class="op" id="2337393">)</span>&nbsp;<span class="builtintype" id="2337395">error</span>&nbsp;<span class="op" id="2337401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2337404">return</span>&nbsp;<span class="ident" id="2337411">rename</span><span class="op" id="2337417">(</span><span class="ident" id="2337418">oldpath</span><span class="op" id="2337425">,</span>&nbsp;<span class="ident" id="2337427">newpath</span><span class="op" id="2337434">)</span><br>
<span class="lineno"></span><span class="op" id="2337436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2337439">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2337511">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2337575">func</span>&nbsp;<span class="ident" id="2337580">fixCount</span><span class="op" id="2337588">(</span><span class="ident" id="2337589">n</span>&nbsp;<span class="builtintype" id="2337591">int</span><span class="op" id="2337594">,</span>&nbsp;<span class="ident" id="2337596">err</span>&nbsp;<span class="builtintype" id="2337600">error</span><span class="op" id="2337605">)</span>&nbsp;<span class="op" id="2337607">(</span><span class="builtintype" id="2337608">int</span><span class="op" id="2337611">,</span>&nbsp;<span class="builtintype" id="2337613">error</span><span class="op" id="2337618">)</span>&nbsp;<span class="op" id="2337620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2337623">if</span>&nbsp;<span class="ident" id="2337626">n</span>&nbsp;<span class="op" id="2337628">&lt;</span>&nbsp;<span class="num" id="2337630">0</span>&nbsp;<span class="op" id="2337632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2337636">n</span>&nbsp;<span class="op" id="2337638">=</span>&nbsp;<span class="num" id="2337640">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2337643">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2337646">return</span>&nbsp;<span class="ident" id="2337653">n</span><span class="op" id="2337654">,</span>&nbsp;<span class="ident" id="2337656">err</span><br>
<span class="lineno"></span><span class="op" id="2337660">}</span>
</div>
</body>
</html>
