<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html" class="current">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2153056">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2153111">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2153165">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2153216">package</span>&nbsp;<span class="ident" id="2153224">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2153230">func</span>&nbsp;<span class="ident" id="2153235">isOddInt</span><span class="op" id="2153243">(</span><span class="ident" id="2153244">x</span>&nbsp;<span class="builtintype" id="2153246">float64</span><span class="op" id="2153253">)</span>&nbsp;<span class="builtintype" id="2153255">bool</span>&nbsp;<span class="op" id="2153260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2153263">xi</span><span class="op" id="2153265">,</span>&nbsp;<span class="ident" id="2153267">xf</span>&nbsp;<span class="op" id="2153270">:=</span>&nbsp;<span class="ident" id="2153273">Modf</span><span class="op" id="2153277">(</span><span class="ident" id="2153278">x</span><span class="op" id="2153279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2153282">return</span>&nbsp;<span class="ident" id="2153289">xf</span>&nbsp;<span class="op" id="2153292">==</span>&nbsp;<span class="num" id="2153295">0</span>&nbsp;<span class="op" id="2153297">&amp;&amp;</span>&nbsp;<span class="ident" id="2153300">int64</span><span class="op" id="2153305">(</span><span class="ident" id="2153306">xi</span><span class="op" id="2153308">)</span><span class="op" id="2153309">&amp;</span><span class="num" id="2153310">1</span>&nbsp;<span class="op" id="2153312">==</span>&nbsp;<span class="num" id="2153315">1</span><br>
<span class="lineno">10</span><span class="op" id="2153317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2153320">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2153388">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2153454">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2153504">//</span><br>
<span class="lineno"></span><span class="comment" id="2153507">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2153540">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2153569">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2153596">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2153623">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2153644">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2153665">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2153713">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2153738">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2153761">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2153823">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2153869">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2153929">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2153951">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2153986">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2154019">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2154052">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2154087">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2154120">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2154151">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2154181">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2154242">func</span>&nbsp;<span class="ident" id="2154247">Pow</span><span class="op" id="2154250">(</span><span class="ident" id="2154251">x</span><span class="op" id="2154252">,</span>&nbsp;<span class="ident" id="2154254">y</span>&nbsp;<span class="builtintype" id="2154256">float64</span><span class="op" id="2154263">)</span>&nbsp;<span class="builtintype" id="2154265">float64</span>&nbsp;<span class="op" id="2154273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154276">switch</span>&nbsp;<span class="op" id="2154283">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154286">case</span>&nbsp;<span class="ident" id="2154291">y</span>&nbsp;<span class="op" id="2154293">==</span>&nbsp;<span class="num" id="2154296">0</span>&nbsp;<span class="op" id="2154298">||</span>&nbsp;<span class="ident" id="2154301">x</span>&nbsp;<span class="op" id="2154303">==</span>&nbsp;<span class="num" id="2154306">1</span><span class="op" id="2154307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154311">return</span>&nbsp;<span class="num" id="2154318">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154321">case</span>&nbsp;<span class="ident" id="2154326">y</span>&nbsp;<span class="op" id="2154328">==</span>&nbsp;<span class="num" id="2154331">1</span><span class="op" id="2154332">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154336">return</span>&nbsp;<span class="ident" id="2154343">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154346">case</span>&nbsp;<span class="ident" id="2154351">y</span>&nbsp;<span class="op" id="2154353">==</span>&nbsp;<span class="num" id="2154356">0.5</span><span class="op" id="2154359">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154363">return</span>&nbsp;<span class="ident" id="2154370">Sqrt</span><span class="op" id="2154374">(</span><span class="ident" id="2154375">x</span><span class="op" id="2154376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154379">case</span>&nbsp;<span class="ident" id="2154384">y</span>&nbsp;<span class="op" id="2154386">==</span>&nbsp;<span class="op" id="2154389">-</span><span class="num" id="2154390">0.5</span><span class="op" id="2154393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154397">return</span>&nbsp;<span class="num" id="2154404">1</span>&nbsp;<span class="op" id="2154406">/</span>&nbsp;<span class="ident" id="2154408">Sqrt</span><span class="op" id="2154412">(</span><span class="ident" id="2154413">x</span><span class="op" id="2154414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154417">case</span>&nbsp;<span class="ident" id="2154422">IsNaN</span><span class="op" id="2154427">(</span><span class="ident" id="2154428">x</span><span class="op" id="2154429">)</span>&nbsp;<span class="op" id="2154431">||</span>&nbsp;<span class="ident" id="2154434">IsNaN</span><span class="op" id="2154439">(</span><span class="ident" id="2154440">y</span><span class="op" id="2154441">)</span><span class="op" id="2154442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154446">return</span>&nbsp;<span class="ident" id="2154453">NaN</span><span class="op" id="2154456">(</span><span class="op" id="2154457">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154460">case</span>&nbsp;<span class="ident" id="2154465">x</span>&nbsp;<span class="op" id="2154467">==</span>&nbsp;<span class="num" id="2154470">0</span><span class="op" id="2154471">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154475">switch</span>&nbsp;<span class="op" id="2154482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154486">case</span>&nbsp;<span class="ident" id="2154491">y</span>&nbsp;<span class="op" id="2154493">&lt;</span>&nbsp;<span class="num" id="2154495">0</span><span class="op" id="2154496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154501">if</span>&nbsp;<span class="ident" id="2154504">isOddInt</span><span class="op" id="2154512">(</span><span class="ident" id="2154513">y</span><span class="op" id="2154514">)</span>&nbsp;<span class="op" id="2154516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154522">return</span>&nbsp;<span class="ident" id="2154529">Copysign</span><span class="op" id="2154537">(</span><span class="ident" id="2154538">Inf</span><span class="op" id="2154541">(</span><span class="num" id="2154542">1</span><span class="op" id="2154543">)</span><span class="op" id="2154544">,</span>&nbsp;<span class="ident" id="2154546">x</span><span class="op" id="2154547">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154557">return</span>&nbsp;<span class="ident" id="2154564">Inf</span><span class="op" id="2154567">(</span><span class="num" id="2154568">1</span><span class="op" id="2154569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154573">case</span>&nbsp;<span class="ident" id="2154578">y</span>&nbsp;<span class="op" id="2154580">&gt;</span>&nbsp;<span class="num" id="2154582">0</span><span class="op" id="2154583">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154588">if</span>&nbsp;<span class="ident" id="2154591">isOddInt</span><span class="op" id="2154599">(</span><span class="ident" id="2154600">y</span><span class="op" id="2154601">)</span>&nbsp;<span class="op" id="2154603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154609">return</span>&nbsp;<span class="ident" id="2154616">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154626">return</span>&nbsp;<span class="num" id="2154633">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154640">case</span>&nbsp;<span class="ident" id="2154645">IsInf</span><span class="op" id="2154650">(</span><span class="ident" id="2154651">y</span><span class="op" id="2154652">,</span>&nbsp;<span class="num" id="2154654">0</span><span class="op" id="2154655">)</span><span class="op" id="2154656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154660">switch</span>&nbsp;<span class="op" id="2154667">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154671">case</span>&nbsp;<span class="ident" id="2154676">x</span>&nbsp;<span class="op" id="2154678">==</span>&nbsp;<span class="op" id="2154681">-</span><span class="num" id="2154682">1</span><span class="op" id="2154683">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154688">return</span>&nbsp;<span class="num" id="2154695">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154699">case</span>&nbsp;<span class="op" id="2154704">(</span><span class="ident" id="2154705">Abs</span><span class="op" id="2154708">(</span><span class="ident" id="2154709">x</span><span class="op" id="2154710">)</span>&nbsp;<span class="op" id="2154712">&lt;</span>&nbsp;<span class="num" id="2154714">1</span><span class="op" id="2154715">)</span>&nbsp;<span class="op" id="2154717">==</span>&nbsp;<span class="ident" id="2154720">IsInf</span><span class="op" id="2154725">(</span><span class="ident" id="2154726">y</span><span class="op" id="2154727">,</span>&nbsp;<span class="num" id="2154729">1</span><span class="op" id="2154730">)</span><span class="op" id="2154731">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154736">return</span>&nbsp;<span class="num" id="2154743">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154747">default</span><span class="op" id="2154754">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154759">return</span>&nbsp;<span class="ident" id="2154766">Inf</span><span class="op" id="2154769">(</span><span class="num" id="2154770">1</span><span class="op" id="2154771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154778">case</span>&nbsp;<span class="ident" id="2154783">IsInf</span><span class="op" id="2154788">(</span><span class="ident" id="2154789">x</span><span class="op" id="2154790">,</span>&nbsp;<span class="num" id="2154792">0</span><span class="op" id="2154793">)</span><span class="op" id="2154794">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154798">if</span>&nbsp;<span class="ident" id="2154801">IsInf</span><span class="op" id="2154806">(</span><span class="ident" id="2154807">x</span><span class="op" id="2154808">,</span>&nbsp;<span class="op" id="2154810">-</span><span class="num" id="2154811">1</span><span class="op" id="2154812">)</span>&nbsp;<span class="op" id="2154814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154819">return</span>&nbsp;<span class="ident" id="2154826">Pow</span><span class="op" id="2154829">(</span><span class="num" id="2154830">1</span><span class="op" id="2154831">/</span><span class="ident" id="2154832">x</span><span class="op" id="2154833">,</span>&nbsp;<span class="op" id="2154835">-</span><span class="ident" id="2154836">y</span><span class="op" id="2154837">)</span>&nbsp;<span class="comment" id="2154839">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154860">switch</span>&nbsp;<span class="op" id="2154867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154871">case</span>&nbsp;<span class="ident" id="2154876">y</span>&nbsp;<span class="op" id="2154878">&lt;</span>&nbsp;<span class="num" id="2154880">0</span><span class="op" id="2154881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154886">return</span>&nbsp;<span class="num" id="2154893">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154897">case</span>&nbsp;<span class="ident" id="2154902">y</span>&nbsp;<span class="op" id="2154904">&gt;</span>&nbsp;<span class="num" id="2154906">0</span><span class="op" id="2154907">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154912">return</span>&nbsp;<span class="ident" id="2154919">Inf</span><span class="op" id="2154922">(</span><span class="num" id="2154923">1</span><span class="op" id="2154924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154935">absy</span>&nbsp;<span class="op" id="2154940">:=</span>&nbsp;<span class="ident" id="2154943">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154946">flip</span>&nbsp;<span class="op" id="2154951">:=</span>&nbsp;<span class="builtintype" id="2154954">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154961">if</span>&nbsp;<span class="ident" id="2154964">absy</span>&nbsp;<span class="op" id="2154969">&lt;</span>&nbsp;<span class="num" id="2154971">0</span>&nbsp;<span class="op" id="2154973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154977">absy</span>&nbsp;<span class="op" id="2154982">=</span>&nbsp;<span class="op" id="2154984">-</span><span class="ident" id="2154985">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154992">flip</span>&nbsp;<span class="op" id="2154997">=</span>&nbsp;<span class="builtintype" id="2154999">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155005">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155008">yi</span><span class="op" id="2155010">,</span>&nbsp;<span class="ident" id="2155012">yf</span>&nbsp;<span class="op" id="2155015">:=</span>&nbsp;<span class="ident" id="2155018">Modf</span><span class="op" id="2155022">(</span><span class="ident" id="2155023">absy</span><span class="op" id="2155027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155030">if</span>&nbsp;<span class="ident" id="2155033">yf</span>&nbsp;<span class="op" id="2155036">!=</span>&nbsp;<span class="num" id="2155039">0</span>&nbsp;<span class="op" id="2155041">&amp;&amp;</span>&nbsp;<span class="ident" id="2155044">x</span>&nbsp;<span class="op" id="2155046">&lt;</span>&nbsp;<span class="num" id="2155048">0</span>&nbsp;<span class="op" id="2155050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155054">return</span>&nbsp;<span class="ident" id="2155061">NaN</span><span class="op" id="2155064">(</span><span class="op" id="2155065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155071">if</span>&nbsp;<span class="ident" id="2155074">yi</span>&nbsp;<span class="op" id="2155077">&gt;=</span>&nbsp;<span class="num" id="2155080">1</span><span class="op" id="2155081">&lt;&lt;</span><span class="num" id="2155083">63</span>&nbsp;<span class="op" id="2155086">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155090">return</span>&nbsp;<span class="ident" id="2155097">Exp</span><span class="op" id="2155100">(</span><span class="ident" id="2155101">y</span>&nbsp;<span class="op" id="2155103">*</span>&nbsp;<span class="ident" id="2155105">Log</span><span class="op" id="2155108">(</span><span class="ident" id="2155109">x</span><span class="op" id="2155110">)</span><span class="op" id="2155111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155118">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155154">a1</span>&nbsp;<span class="op" id="2155157">:=</span>&nbsp;<span class="num" id="2155160">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155165">ae</span>&nbsp;<span class="op" id="2155168">:=</span>&nbsp;<span class="num" id="2155171">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155175">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155192">if</span>&nbsp;<span class="ident" id="2155195">yf</span>&nbsp;<span class="op" id="2155198">!=</span>&nbsp;<span class="num" id="2155201">0</span>&nbsp;<span class="op" id="2155203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155207">if</span>&nbsp;<span class="ident" id="2155210">yf</span>&nbsp;<span class="op" id="2155213">&gt;</span>&nbsp;<span class="num" id="2155215">0.5</span>&nbsp;<span class="op" id="2155219">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155224">yf</span><span class="op" id="2155226">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155232">yi</span><span class="op" id="2155234">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155243">a1</span>&nbsp;<span class="op" id="2155246">=</span>&nbsp;<span class="ident" id="2155248">Exp</span><span class="op" id="2155251">(</span><span class="ident" id="2155252">yf</span>&nbsp;<span class="op" id="2155255">*</span>&nbsp;<span class="ident" id="2155257">Log</span><span class="op" id="2155260">(</span><span class="ident" id="2155261">x</span><span class="op" id="2155262">)</span><span class="op" id="2155263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155266">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155270">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155287">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155330">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155364">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155403">x1</span><span class="op" id="2155405">,</span>&nbsp;<span class="ident" id="2155407">xe</span>&nbsp;<span class="op" id="2155410">:=</span>&nbsp;<span class="ident" id="2155413">Frexp</span><span class="op" id="2155418">(</span><span class="ident" id="2155419">x</span><span class="op" id="2155420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155423">for</span>&nbsp;<span class="ident" id="2155427">i</span>&nbsp;<span class="op" id="2155429">:=</span>&nbsp;<span class="ident" id="2155432">int64</span><span class="op" id="2155437">(</span><span class="ident" id="2155438">yi</span><span class="op" id="2155440">)</span><span class="op" id="2155441">;</span>&nbsp;<span class="ident" id="2155443">i</span>&nbsp;<span class="op" id="2155445">!=</span>&nbsp;<span class="num" id="2155448">0</span><span class="op" id="2155449">;</span>&nbsp;<span class="ident" id="2155451">i</span>&nbsp;<span class="op" id="2155453">&gt;&gt;=</span>&nbsp;<span class="num" id="2155457">1</span>&nbsp;<span class="op" id="2155459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155463">if</span>&nbsp;<span class="ident" id="2155466">i</span><span class="op" id="2155467">&amp;</span><span class="num" id="2155468">1</span>&nbsp;<span class="op" id="2155470">==</span>&nbsp;<span class="num" id="2155473">1</span>&nbsp;<span class="op" id="2155475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155480">a1</span>&nbsp;<span class="op" id="2155483">*=</span>&nbsp;<span class="ident" id="2155486">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155492">ae</span>&nbsp;<span class="op" id="2155495">+=</span>&nbsp;<span class="ident" id="2155498">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155507">x1</span>&nbsp;<span class="op" id="2155510">*=</span>&nbsp;<span class="ident" id="2155513">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155518">xe</span>&nbsp;<span class="op" id="2155521">&lt;&lt;=</span>&nbsp;<span class="num" id="2155525">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155529">if</span>&nbsp;<span class="ident" id="2155532">x1</span>&nbsp;<span class="op" id="2155535">&lt;</span>&nbsp;<span class="num" id="2155537">.5</span>&nbsp;<span class="op" id="2155540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155545">x1</span>&nbsp;<span class="op" id="2155548">+=</span>&nbsp;<span class="ident" id="2155551">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155557">xe</span><span class="op" id="2155559">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155571">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155590">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2155620">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155650">if</span>&nbsp;<span class="ident" id="2155653">flip</span>&nbsp;<span class="op" id="2155658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155662">a1</span>&nbsp;<span class="op" id="2155665">=</span>&nbsp;<span class="num" id="2155667">1</span>&nbsp;<span class="op" id="2155669">/</span>&nbsp;<span class="ident" id="2155671">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155676">ae</span>&nbsp;<span class="op" id="2155679">=</span>&nbsp;<span class="op" id="2155681">-</span><span class="ident" id="2155682">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155689">return</span>&nbsp;<span class="ident" id="2155696">Ldexp</span><span class="op" id="2155701">(</span><span class="ident" id="2155702">a1</span><span class="op" id="2155704">,</span>&nbsp;<span class="ident" id="2155706">ae</span><span class="op" id="2155708">)</span><br>
<span class="lineno"></span><span class="op" id="2155710">}</span>
</div>
</body>
</html>
