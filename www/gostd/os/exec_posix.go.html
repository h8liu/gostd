<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html" class="current">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2492552">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2492607">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2492661">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2492712">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2492790">package</span>&nbsp;<span class="ident" id="2492798">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2492802">import</span>&nbsp;<span class="op" id="2492809">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2492812">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2492822">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2492825">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2492891">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2492956">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2492981">var</span>&nbsp;<span class="op" id="2492985">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2492988">Interrupt</span>&nbsp;<span class="ident" id="2492998">Signal</span>&nbsp;<span class="op" id="2493005">=</span>&nbsp;<span class="ident" id="2493007">syscall</span><span class="op" id="2493014">.</span><span class="ident" id="2493015">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493023">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493033">Signal</span>&nbsp;<span class="op" id="2493040">=</span>&nbsp;<span class="ident" id="2493042">syscall</span><span class="op" id="2493049">.</span><span class="ident" id="2493050">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2493058">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2493061">func</span>&nbsp;<span class="ident" id="2493066">startProcess</span><span class="op" id="2493078">(</span><span class="ident" id="2493079">name</span>&nbsp;<span class="builtintype" id="2493084">string</span><span class="op" id="2493090">,</span>&nbsp;<span class="ident" id="2493092">argv</span>&nbsp;<span class="op" id="2493097">[</span><span class="op" id="2493098">]</span><span class="builtintype" id="2493099">string</span><span class="op" id="2493105">,</span>&nbsp;<span class="ident" id="2493107">attr</span>&nbsp;<span class="op" id="2493112">*</span><span class="ident" id="2493113">ProcAttr</span><span class="op" id="2493121">)</span>&nbsp;<span class="op" id="2493123">(</span><span class="ident" id="2493124">p</span>&nbsp;<span class="op" id="2493126">*</span><span class="ident" id="2493127">Process</span><span class="op" id="2493134">,</span>&nbsp;<span class="ident" id="2493136">err</span>&nbsp;<span class="builtintype" id="2493140">error</span><span class="op" id="2493145">)</span>&nbsp;<span class="op" id="2493147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2493150">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2493207">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2493269">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493329">if</span>&nbsp;<span class="ident" id="2493332">attr</span>&nbsp;<span class="op" id="2493337">!=</span>&nbsp;<span class="ident" id="2493340">nil</span>&nbsp;<span class="op" id="2493344">&amp;&amp;</span>&nbsp;<span class="ident" id="2493347">attr</span><span class="op" id="2493351">.</span><span class="ident" id="2493352">Sys</span>&nbsp;<span class="op" id="2493356">==</span>&nbsp;<span class="ident" id="2493359">nil</span>&nbsp;<span class="op" id="2493363">&amp;&amp;</span>&nbsp;<span class="ident" id="2493366">attr</span><span class="op" id="2493370">.</span><span class="ident" id="2493371">Dir</span>&nbsp;<span class="op" id="2493375">!=</span>&nbsp;<span class="string" id="2493378">&#34;&#34;</span>&nbsp;<span class="op" id="2493381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493385">if</span>&nbsp;<span class="ident" id="2493388">_</span><span class="op" id="2493389">,</span>&nbsp;<span class="ident" id="2493391">err</span>&nbsp;<span class="op" id="2493395">:=</span>&nbsp;<span class="ident" id="2493398">Stat</span><span class="op" id="2493402">(</span><span class="ident" id="2493403">attr</span><span class="op" id="2493407">.</span><span class="ident" id="2493408">Dir</span><span class="op" id="2493411">)</span><span class="op" id="2493412">;</span>&nbsp;<span class="ident" id="2493414">err</span>&nbsp;<span class="op" id="2493418">!=</span>&nbsp;<span class="ident" id="2493421">nil</span>&nbsp;<span class="op" id="2493425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493430">pe</span>&nbsp;<span class="op" id="2493433">:=</span>&nbsp;<span class="ident" id="2493436">err</span><span class="op" id="2493439">.</span><span class="op" id="2493440">(</span><span class="op" id="2493441">*</span><span class="ident" id="2493442">PathError</span><span class="op" id="2493451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493456">pe</span><span class="op" id="2493458">.</span><span class="ident" id="2493459">Op</span>&nbsp;<span class="op" id="2493462">=</span>&nbsp;<span class="string" id="2493464">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493475">return</span>&nbsp;<span class="ident" id="2493482">nil</span><span class="op" id="2493485">,</span>&nbsp;<span class="ident" id="2493487">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493499">sysattr</span>&nbsp;<span class="op" id="2493507">:=</span>&nbsp;<span class="op" id="2493510">&amp;</span><span class="ident" id="2493511">syscall</span><span class="op" id="2493518">.</span><span class="ident" id="2493519">ProcAttr</span><span class="op" id="2493527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493531">Dir</span><span class="op" id="2493534">:</span>&nbsp;<span class="ident" id="2493536">attr</span><span class="op" id="2493540">.</span><span class="ident" id="2493541">Dir</span><span class="op" id="2493544">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493548">Env</span><span class="op" id="2493551">:</span>&nbsp;<span class="ident" id="2493553">attr</span><span class="op" id="2493557">.</span><span class="ident" id="2493558">Env</span><span class="op" id="2493561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493565">Sys</span><span class="op" id="2493568">:</span>&nbsp;<span class="ident" id="2493570">attr</span><span class="op" id="2493574">.</span><span class="ident" id="2493575">Sys</span><span class="op" id="2493578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493584">if</span>&nbsp;<span class="ident" id="2493587">sysattr</span><span class="op" id="2493594">.</span><span class="ident" id="2493595">Env</span>&nbsp;<span class="op" id="2493599">==</span>&nbsp;<span class="ident" id="2493602">nil</span>&nbsp;<span class="op" id="2493606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493610">sysattr</span><span class="op" id="2493617">.</span><span class="ident" id="2493618">Env</span>&nbsp;<span class="op" id="2493622">=</span>&nbsp;<span class="ident" id="2493624">Environ</span><span class="op" id="2493631">(</span><span class="op" id="2493632">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493638">for</span>&nbsp;<span class="ident" id="2493642">_</span><span class="op" id="2493643">,</span>&nbsp;<span class="ident" id="2493645">f</span>&nbsp;<span class="op" id="2493647">:=</span>&nbsp;<span class="keyword" id="2493650">range</span>&nbsp;<span class="ident" id="2493656">attr</span><span class="op" id="2493660">.</span><span class="ident" id="2493661">Files</span>&nbsp;<span class="op" id="2493667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493671">sysattr</span><span class="op" id="2493678">.</span><span class="ident" id="2493679">Files</span>&nbsp;<span class="op" id="2493685">=</span>&nbsp;<span class="builtinfunc" id="2493687">append</span><span class="op" id="2493693">(</span><span class="ident" id="2493694">sysattr</span><span class="op" id="2493701">.</span><span class="ident" id="2493702">Files</span><span class="op" id="2493707">,</span>&nbsp;<span class="ident" id="2493709">f</span><span class="op" id="2493710">.</span><span class="ident" id="2493711">Fd</span><span class="op" id="2493713">(</span><span class="op" id="2493714">)</span><span class="op" id="2493715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2493722">pid</span><span class="op" id="2493725">,</span>&nbsp;<span class="ident" id="2493727">h</span><span class="op" id="2493728">,</span>&nbsp;<span class="ident" id="2493730">e</span>&nbsp;<span class="op" id="2493732">:=</span>&nbsp;<span class="ident" id="2493735">syscall</span><span class="op" id="2493742">.</span><span class="ident" id="2493743">StartProcess</span><span class="op" id="2493755">(</span><span class="ident" id="2493756">name</span><span class="op" id="2493760">,</span>&nbsp;<span class="ident" id="2493762">argv</span><span class="op" id="2493766">,</span>&nbsp;<span class="ident" id="2493768">sysattr</span><span class="op" id="2493775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493778">if</span>&nbsp;<span class="ident" id="2493781">e</span>&nbsp;<span class="op" id="2493783">!=</span>&nbsp;<span class="ident" id="2493786">nil</span>&nbsp;<span class="op" id="2493790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493794">return</span>&nbsp;<span class="ident" id="2493801">nil</span><span class="op" id="2493804">,</span>&nbsp;<span class="op" id="2493806">&amp;</span><span class="ident" id="2493807">PathError</span><span class="op" id="2493816">{</span><span class="string" id="2493817">&#34;fork/exec&#34;</span><span class="op" id="2493828">,</span>&nbsp;<span class="ident" id="2493830">name</span><span class="op" id="2493834">,</span>&nbsp;<span class="ident" id="2493836">e</span><span class="op" id="2493837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2493840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493843">return</span>&nbsp;<span class="ident" id="2493850">newProcess</span><span class="op" id="2493860">(</span><span class="ident" id="2493861">pid</span><span class="op" id="2493864">,</span>&nbsp;<span class="ident" id="2493866">h</span><span class="op" id="2493867">)</span><span class="op" id="2493868">,</span>&nbsp;<span class="ident" id="2493870">nil</span><br>
<span class="lineno">50</span><span class="op" id="2493874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2493877">func</span>&nbsp;<span class="op" id="2493882">(</span><span class="ident" id="2493883">p</span>&nbsp;<span class="op" id="2493885">*</span><span class="ident" id="2493886">Process</span><span class="op" id="2493893">)</span>&nbsp;<span class="ident" id="2493895">kill</span><span class="op" id="2493899">(</span><span class="op" id="2493900">)</span>&nbsp;<span class="builtintype" id="2493902">error</span>&nbsp;<span class="op" id="2493908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2493911">return</span>&nbsp;<span class="ident" id="2493918">p</span><span class="op" id="2493919">.</span><span class="ident" id="2493920">Signal</span><span class="op" id="2493926">(</span><span class="ident" id="2493927">Kill</span><span class="op" id="2493931">)</span><br>
<span class="lineno"></span><span class="op" id="2493933">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2493936">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2494009">type</span>&nbsp;<span class="ident" id="2494014">ProcessState</span>&nbsp;<span class="keyword" id="2494027">struct</span>&nbsp;<span class="op" id="2494034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494037">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2494044">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494063">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494085">status</span>&nbsp;<span class="ident" id="2494092">syscall</span><span class="op" id="2494099">.</span><span class="ident" id="2494100">WaitStatus</span>&nbsp;<span class="comment" id="2494111">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494145">rusage</span>&nbsp;<span class="op" id="2494152">*</span><span class="ident" id="2494153">syscall</span><span class="op" id="2494160">.</span><span class="ident" id="2494161">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2494168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2494171">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2494224">func</span>&nbsp;<span class="op" id="2494229">(</span><span class="ident" id="2494230">p</span>&nbsp;<span class="op" id="2494232">*</span><span class="ident" id="2494233">ProcessState</span><span class="op" id="2494245">)</span>&nbsp;<span class="ident" id="2494247">Pid</span><span class="op" id="2494250">(</span><span class="op" id="2494251">)</span>&nbsp;<span class="builtintype" id="2494253">int</span>&nbsp;<span class="op" id="2494257">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494260">return</span>&nbsp;<span class="ident" id="2494267">p</span><span class="op" id="2494268">.</span><span class="ident" id="2494269">pid</span><br>
<span class="lineno"></span><span class="op" id="2494273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2494276">func</span>&nbsp;<span class="op" id="2494281">(</span><span class="ident" id="2494282">p</span>&nbsp;<span class="op" id="2494284">*</span><span class="ident" id="2494285">ProcessState</span><span class="op" id="2494297">)</span>&nbsp;<span class="ident" id="2494299">exited</span><span class="op" id="2494305">(</span><span class="op" id="2494306">)</span>&nbsp;<span class="builtintype" id="2494308">bool</span>&nbsp;<span class="op" id="2494313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494316">return</span>&nbsp;<span class="ident" id="2494323">p</span><span class="op" id="2494324">.</span><span class="ident" id="2494325">status</span><span class="op" id="2494331">.</span><span class="ident" id="2494332">Exited</span><span class="op" id="2494338">(</span><span class="op" id="2494339">)</span><br>
<span class="lineno">70</span><span class="op" id="2494341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2494344">func</span>&nbsp;<span class="op" id="2494349">(</span><span class="ident" id="2494350">p</span>&nbsp;<span class="op" id="2494352">*</span><span class="ident" id="2494353">ProcessState</span><span class="op" id="2494365">)</span>&nbsp;<span class="ident" id="2494367">success</span><span class="op" id="2494374">(</span><span class="op" id="2494375">)</span>&nbsp;<span class="builtintype" id="2494377">bool</span>&nbsp;<span class="op" id="2494382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494385">return</span>&nbsp;<span class="ident" id="2494392">p</span><span class="op" id="2494393">.</span><span class="ident" id="2494394">status</span><span class="op" id="2494400">.</span><span class="ident" id="2494401">ExitStatus</span><span class="op" id="2494411">(</span><span class="op" id="2494412">)</span>&nbsp;<span class="op" id="2494414">==</span>&nbsp;<span class="num" id="2494417">0</span><br>
<span class="lineno"></span><span class="op" id="2494419">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2494422">func</span>&nbsp;<span class="op" id="2494427">(</span><span class="ident" id="2494428">p</span>&nbsp;<span class="op" id="2494430">*</span><span class="ident" id="2494431">ProcessState</span><span class="op" id="2494443">)</span>&nbsp;<span class="ident" id="2494445">sys</span><span class="op" id="2494448">(</span><span class="op" id="2494449">)</span>&nbsp;<span class="keyword" id="2494451">interface</span><span class="op" id="2494460">{</span><span class="op" id="2494461">}</span>&nbsp;<span class="op" id="2494463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494466">return</span>&nbsp;<span class="ident" id="2494473">p</span><span class="op" id="2494474">.</span><span class="ident" id="2494475">status</span><br>
<span class="lineno"></span><span class="op" id="2494482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2494485">func</span>&nbsp;<span class="op" id="2494490">(</span><span class="ident" id="2494491">p</span>&nbsp;<span class="op" id="2494493">*</span><span class="ident" id="2494494">ProcessState</span><span class="op" id="2494506">)</span>&nbsp;<span class="ident" id="2494508">sysUsage</span><span class="op" id="2494516">(</span><span class="op" id="2494517">)</span>&nbsp;<span class="keyword" id="2494519">interface</span><span class="op" id="2494528">{</span><span class="op" id="2494529">}</span>&nbsp;<span class="op" id="2494531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494534">return</span>&nbsp;<span class="ident" id="2494541">p</span><span class="op" id="2494542">.</span><span class="ident" id="2494543">rusage</span><br>
<span class="lineno"></span><span class="op" id="2494550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2494553">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2494585">func</span>&nbsp;<span class="ident" id="2494590">itod</span><span class="op" id="2494594">(</span><span class="ident" id="2494595">i</span>&nbsp;<span class="builtintype" id="2494597">int</span><span class="op" id="2494600">)</span>&nbsp;<span class="builtintype" id="2494602">string</span>&nbsp;<span class="op" id="2494609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494612">if</span>&nbsp;<span class="ident" id="2494615">i</span>&nbsp;<span class="op" id="2494617">==</span>&nbsp;<span class="num" id="2494620">0</span>&nbsp;<span class="op" id="2494622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494626">return</span>&nbsp;<span class="string" id="2494633">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494642">u</span>&nbsp;<span class="op" id="2494644">:=</span>&nbsp;<span class="ident" id="2494647">uint64</span><span class="op" id="2494653">(</span><span class="ident" id="2494654">i</span><span class="op" id="2494655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494658">if</span>&nbsp;<span class="ident" id="2494661">i</span>&nbsp;<span class="op" id="2494663">&lt;</span>&nbsp;<span class="num" id="2494665">0</span>&nbsp;<span class="op" id="2494667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494671">u</span>&nbsp;<span class="op" id="2494673">=</span>&nbsp;<span class="op" id="2494675">-</span><span class="ident" id="2494676">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2494683">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494722">var</span>&nbsp;<span class="ident" id="2494726">b</span>&nbsp;<span class="op" id="2494728">[</span><span class="num" id="2494729">32</span><span class="op" id="2494731">]</span><span class="builtintype" id="2494732">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494738">bp</span>&nbsp;<span class="op" id="2494741">:=</span>&nbsp;<span class="builtinfunc" id="2494744">len</span><span class="op" id="2494747">(</span><span class="ident" id="2494748">b</span><span class="op" id="2494749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494752">for</span>&nbsp;<span class="op" id="2494756">;</span>&nbsp;<span class="ident" id="2494758">u</span>&nbsp;<span class="op" id="2494760">&gt;</span>&nbsp;<span class="num" id="2494762">0</span><span class="op" id="2494763">;</span>&nbsp;<span class="ident" id="2494765">u</span>&nbsp;<span class="op" id="2494767">/=</span>&nbsp;<span class="num" id="2494770">10</span>&nbsp;<span class="op" id="2494773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494777">bp</span><span class="op" id="2494779">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494784">b</span><span class="op" id="2494785">[</span><span class="ident" id="2494786">bp</span><span class="op" id="2494788">]</span>&nbsp;<span class="op" id="2494790">=</span>&nbsp;<span class="builtintype" id="2494792">byte</span><span class="op" id="2494796">(</span><span class="ident" id="2494797">u</span><span class="op" id="2494798">%</span><span class="num" id="2494799">10</span><span class="op" id="2494801">)</span>&nbsp;<span class="op" id="2494803">+</span>&nbsp;<span class="string" id="2494805">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494814">if</span>&nbsp;<span class="ident" id="2494817">i</span>&nbsp;<span class="op" id="2494819">&lt;</span>&nbsp;<span class="num" id="2494821">0</span>&nbsp;<span class="op" id="2494823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494827">bp</span><span class="op" id="2494829">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494834">b</span><span class="op" id="2494835">[</span><span class="ident" id="2494836">bp</span><span class="op" id="2494838">]</span>&nbsp;<span class="op" id="2494840">=</span>&nbsp;<span class="string" id="2494842">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494851">return</span>&nbsp;<span class="builtintype" id="2494858">string</span><span class="op" id="2494864">(</span><span class="ident" id="2494865">b</span><span class="op" id="2494866">[</span><span class="ident" id="2494867">bp</span><span class="op" id="2494869">:</span><span class="op" id="2494870">]</span><span class="op" id="2494871">)</span><br>
<span class="lineno"></span><span class="op" id="2494873">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2494876">func</span>&nbsp;<span class="op" id="2494881">(</span><span class="ident" id="2494882">p</span>&nbsp;<span class="op" id="2494884">*</span><span class="ident" id="2494885">ProcessState</span><span class="op" id="2494897">)</span>&nbsp;<span class="ident" id="2494899">String</span><span class="op" id="2494905">(</span><span class="op" id="2494906">)</span>&nbsp;<span class="builtintype" id="2494908">string</span>&nbsp;<span class="op" id="2494915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494918">if</span>&nbsp;<span class="ident" id="2494921">p</span>&nbsp;<span class="op" id="2494923">==</span>&nbsp;<span class="ident" id="2494926">nil</span>&nbsp;<span class="op" id="2494930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2494934">return</span>&nbsp;<span class="string" id="2494941">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2494950">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494953">status</span>&nbsp;<span class="op" id="2494960">:=</span>&nbsp;<span class="ident" id="2494963">p</span><span class="op" id="2494964">.</span><span class="ident" id="2494965">Sys</span><span class="op" id="2494968">(</span><span class="op" id="2494969">)</span><span class="op" id="2494970">.</span><span class="op" id="2494971">(</span><span class="ident" id="2494972">syscall</span><span class="op" id="2494979">.</span><span class="ident" id="2494980">WaitStatus</span><span class="op" id="2494990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2494993">res</span>&nbsp;<span class="op" id="2494997">:=</span>&nbsp;<span class="string" id="2495000">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495004">switch</span>&nbsp;<span class="op" id="2495011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495014">case</span>&nbsp;<span class="ident" id="2495019">status</span><span class="op" id="2495025">.</span><span class="ident" id="2495026">Exited</span><span class="op" id="2495032">(</span><span class="op" id="2495033">)</span><span class="op" id="2495034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495038">res</span>&nbsp;<span class="op" id="2495042">=</span>&nbsp;<span class="string" id="2495044">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2495059">+</span>&nbsp;<span class="ident" id="2495061">itod</span><span class="op" id="2495065">(</span><span class="ident" id="2495066">status</span><span class="op" id="2495072">.</span><span class="ident" id="2495073">ExitStatus</span><span class="op" id="2495083">(</span><span class="op" id="2495084">)</span><span class="op" id="2495085">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495088">case</span>&nbsp;<span class="ident" id="2495093">status</span><span class="op" id="2495099">.</span><span class="ident" id="2495100">Signaled</span><span class="op" id="2495108">(</span><span class="op" id="2495109">)</span><span class="op" id="2495110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495114">res</span>&nbsp;<span class="op" id="2495118">=</span>&nbsp;<span class="string" id="2495120">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2495131">+</span>&nbsp;<span class="ident" id="2495133">status</span><span class="op" id="2495139">.</span><span class="ident" id="2495140">Signal</span><span class="op" id="2495146">(</span><span class="op" id="2495147">)</span><span class="op" id="2495148">.</span><span class="ident" id="2495149">String</span><span class="op" id="2495155">(</span><span class="op" id="2495156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495159">case</span>&nbsp;<span class="ident" id="2495164">status</span><span class="op" id="2495170">.</span><span class="ident" id="2495171">Stopped</span><span class="op" id="2495178">(</span><span class="op" id="2495179">)</span><span class="op" id="2495180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495184">res</span>&nbsp;<span class="op" id="2495188">=</span>&nbsp;<span class="string" id="2495190">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2495206">+</span>&nbsp;<span class="ident" id="2495208">status</span><span class="op" id="2495214">.</span><span class="ident" id="2495215">StopSignal</span><span class="op" id="2495225">(</span><span class="op" id="2495226">)</span><span class="op" id="2495227">.</span><span class="ident" id="2495228">String</span><span class="op" id="2495234">(</span><span class="op" id="2495235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495239">if</span>&nbsp;<span class="ident" id="2495242">status</span><span class="op" id="2495248">.</span><span class="ident" id="2495249">StopSignal</span><span class="op" id="2495259">(</span><span class="op" id="2495260">)</span>&nbsp;<span class="op" id="2495262">==</span>&nbsp;<span class="ident" id="2495265">syscall</span><span class="op" id="2495272">.</span><span class="ident" id="2495273">SIGTRAP</span>&nbsp;<span class="op" id="2495281">&amp;&amp;</span>&nbsp;<span class="ident" id="2495284">status</span><span class="op" id="2495290">.</span><span class="ident" id="2495291">TrapCause</span><span class="op" id="2495300">(</span><span class="op" id="2495301">)</span>&nbsp;<span class="op" id="2495303">!=</span>&nbsp;<span class="num" id="2495306">0</span>&nbsp;<span class="op" id="2495308">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495313">res</span>&nbsp;<span class="op" id="2495317">+=</span>&nbsp;<span class="string" id="2495320">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2495330">+</span>&nbsp;<span class="ident" id="2495332">itod</span><span class="op" id="2495336">(</span><span class="ident" id="2495337">status</span><span class="op" id="2495343">.</span><span class="ident" id="2495344">TrapCause</span><span class="op" id="2495353">(</span><span class="op" id="2495354">)</span><span class="op" id="2495355">)</span>&nbsp;<span class="op" id="2495357">+</span>&nbsp;<span class="string" id="2495359">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495368">case</span>&nbsp;<span class="ident" id="2495373">status</span><span class="op" id="2495379">.</span><span class="ident" id="2495380">Continued</span><span class="op" id="2495389">(</span><span class="op" id="2495390">)</span><span class="op" id="2495391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495395">res</span>&nbsp;<span class="op" id="2495399">=</span>&nbsp;<span class="string" id="2495401">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495414">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495417">if</span>&nbsp;<span class="ident" id="2495420">status</span><span class="op" id="2495426">.</span><span class="ident" id="2495427">CoreDump</span><span class="op" id="2495435">(</span><span class="op" id="2495436">)</span>&nbsp;<span class="op" id="2495438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2495442">res</span>&nbsp;<span class="op" id="2495446">+=</span>&nbsp;<span class="string" id="2495449">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2495467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2495470">return</span>&nbsp;<span class="ident" id="2495477">res</span><br>
<span class="lineno"></span><span class="op" id="2495481">}</span>
</div>
</body>
</html>
