<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3530640">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3530696">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3530750">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3530801">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3530871">package</span>&nbsp;<span class="ident" id="3530879">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3530885">import</span>&nbsp;<span class="op" id="3530892">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530895">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530905">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530911">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3530921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3530924">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="3531014">var</span>&nbsp;<span class="ident" id="3531018">ErrNotFound</span>&nbsp;<span class="op" id="3531030">=</span>&nbsp;<span class="ident" id="3531032">errors</span><span class="op" id="3531038">.</span><span class="ident" id="3531039">New</span><span class="op" id="3531042">(</span><span class="string" id="3531043">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="3531079">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3531082">func</span>&nbsp;<span class="ident" id="3531087">findExecutable</span><span class="op" id="3531101">(</span><span class="ident" id="3531102">file</span>&nbsp;<span class="builtintype" id="3531107">string</span><span class="op" id="3531113">)</span>&nbsp;<span class="builtintype" id="3531115">error</span>&nbsp;<span class="op" id="3531121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3531124">d</span><span class="op" id="3531125">,</span>&nbsp;<span class="ident" id="3531127">err</span>&nbsp;<span class="op" id="3531131">:=</span>&nbsp;<span class="ident" id="3531134">os</span><span class="op" id="3531136">.</span><span class="ident" id="3531137">Stat</span><span class="op" id="3531141">(</span><span class="ident" id="3531142">file</span><span class="op" id="3531146">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531149">if</span>&nbsp;<span class="ident" id="3531152">err</span>&nbsp;<span class="op" id="3531156">!=</span>&nbsp;<span class="ident" id="3531159">nil</span>&nbsp;<span class="op" id="3531163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531167">return</span>&nbsp;<span class="ident" id="3531174">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531182">if</span>&nbsp;<span class="ident" id="3531185">m</span>&nbsp;<span class="op" id="3531187">:=</span>&nbsp;<span class="ident" id="3531190">d</span><span class="op" id="3531191">.</span><span class="ident" id="3531192">Mode</span><span class="op" id="3531196">(</span><span class="op" id="3531197">)</span><span class="op" id="3531198">;</span>&nbsp;<span class="op" id="3531200">!</span><span class="ident" id="3531201">m</span><span class="op" id="3531202">.</span><span class="ident" id="3531203">IsDir</span><span class="op" id="3531208">(</span><span class="op" id="3531209">)</span>&nbsp;<span class="op" id="3531211">&amp;&amp;</span>&nbsp;<span class="ident" id="3531214">m</span><span class="op" id="3531215">&amp;</span><span class="num" id="3531216">0111</span>&nbsp;<span class="op" id="3531221">!=</span>&nbsp;<span class="num" id="3531224">0</span>&nbsp;<span class="op" id="3531226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531230">return</span>&nbsp;<span class="ident" id="3531237">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531245">return</span>&nbsp;<span class="ident" id="3531252">os</span><span class="op" id="3531254">.</span><span class="ident" id="3531255">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="3531269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3531272">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="3531329">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="3531391">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="3531472">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="3531555">func</span>&nbsp;<span class="ident" id="3531560">LookPath</span><span class="op" id="3531568">(</span><span class="ident" id="3531569">file</span>&nbsp;<span class="builtintype" id="3531574">string</span><span class="op" id="3531580">)</span>&nbsp;<span class="op" id="3531582">(</span><span class="builtintype" id="3531583">string</span><span class="op" id="3531589">,</span>&nbsp;<span class="builtintype" id="3531591">error</span><span class="op" id="3531596">)</span>&nbsp;<span class="op" id="3531598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531601">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531661">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531723">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531774">if</span>&nbsp;<span class="ident" id="3531777">strings</span><span class="op" id="3531784">.</span><span class="ident" id="3531785">Contains</span><span class="op" id="3531793">(</span><span class="ident" id="3531794">file</span><span class="op" id="3531798">,</span>&nbsp;<span class="string" id="3531800">&#34;/&#34;</span><span class="op" id="3531803">)</span>&nbsp;<span class="op" id="3531805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3531809">err</span>&nbsp;<span class="op" id="3531813">:=</span>&nbsp;<span class="ident" id="3531816">findExecutable</span><span class="op" id="3531830">(</span><span class="ident" id="3531831">file</span><span class="op" id="3531835">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531839">if</span>&nbsp;<span class="ident" id="3531842">err</span>&nbsp;<span class="op" id="3531846">==</span>&nbsp;<span class="ident" id="3531849">nil</span>&nbsp;<span class="op" id="3531853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531858">return</span>&nbsp;<span class="ident" id="3531865">file</span><span class="op" id="3531869">,</span>&nbsp;<span class="ident" id="3531871">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531881">return</span>&nbsp;<span class="string" id="3531888">&#34;&#34;</span><span class="op" id="3531890">,</span>&nbsp;<span class="op" id="3531892">&amp;</span><span class="ident" id="3531893">Error</span><span class="op" id="3531898">{</span><span class="ident" id="3531899">file</span><span class="op" id="3531903">,</span>&nbsp;<span class="ident" id="3531905">err</span><span class="op" id="3531908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531911">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3531914">pathenv</span>&nbsp;<span class="op" id="3531922">:=</span>&nbsp;<span class="ident" id="3531925">os</span><span class="op" id="3531927">.</span><span class="ident" id="3531928">Getenv</span><span class="op" id="3531934">(</span><span class="string" id="3531935">&#34;PATH&#34;</span><span class="op" id="3531941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531944">if</span>&nbsp;<span class="ident" id="3531947">pathenv</span>&nbsp;<span class="op" id="3531955">==</span>&nbsp;<span class="string" id="3531958">&#34;&#34;</span>&nbsp;<span class="op" id="3531961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531965">return</span>&nbsp;<span class="string" id="3531972">&#34;&#34;</span><span class="op" id="3531974">,</span>&nbsp;<span class="op" id="3531976">&amp;</span><span class="ident" id="3531977">Error</span><span class="op" id="3531982">{</span><span class="ident" id="3531983">file</span><span class="op" id="3531987">,</span>&nbsp;<span class="ident" id="3531989">ErrNotFound</span><span class="op" id="3532000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532006">for</span>&nbsp;<span class="ident" id="3532010">_</span><span class="op" id="3532011">,</span>&nbsp;<span class="ident" id="3532013">dir</span>&nbsp;<span class="op" id="3532017">:=</span>&nbsp;<span class="keyword" id="3532020">range</span>&nbsp;<span class="ident" id="3532026">strings</span><span class="op" id="3532033">.</span><span class="ident" id="3532034">Split</span><span class="op" id="3532039">(</span><span class="ident" id="3532040">pathenv</span><span class="op" id="3532047">,</span>&nbsp;<span class="string" id="3532049">&#34;:&#34;</span><span class="op" id="3532052">)</span>&nbsp;<span class="op" id="3532054">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532058">if</span>&nbsp;<span class="ident" id="3532061">dir</span>&nbsp;<span class="op" id="3532065">==</span>&nbsp;<span class="string" id="3532068">&#34;&#34;</span>&nbsp;<span class="op" id="3532071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3532076">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3532130">dir</span>&nbsp;<span class="op" id="3532134">=</span>&nbsp;<span class="string" id="3532136">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3532146">path</span>&nbsp;<span class="op" id="3532151">:=</span>&nbsp;<span class="ident" id="3532154">dir</span>&nbsp;<span class="op" id="3532158">+</span>&nbsp;<span class="string" id="3532160">&#34;/&#34;</span>&nbsp;<span class="op" id="3532164">+</span>&nbsp;<span class="ident" id="3532166">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532173">if</span>&nbsp;<span class="ident" id="3532176">err</span>&nbsp;<span class="op" id="3532180">:=</span>&nbsp;<span class="ident" id="3532183">findExecutable</span><span class="op" id="3532197">(</span><span class="ident" id="3532198">path</span><span class="op" id="3532202">)</span><span class="op" id="3532203">;</span>&nbsp;<span class="ident" id="3532205">err</span>&nbsp;<span class="op" id="3532209">==</span>&nbsp;<span class="ident" id="3532212">nil</span>&nbsp;<span class="op" id="3532216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532221">return</span>&nbsp;<span class="ident" id="3532228">path</span><span class="op" id="3532232">,</span>&nbsp;<span class="ident" id="3532234">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532246">return</span>&nbsp;<span class="string" id="3532253">&#34;&#34;</span><span class="op" id="3532255">,</span>&nbsp;<span class="op" id="3532257">&amp;</span><span class="ident" id="3532258">Error</span><span class="op" id="3532263">{</span><span class="ident" id="3532264">file</span><span class="op" id="3532268">,</span>&nbsp;<span class="ident" id="3532270">ErrNotFound</span><span class="op" id="3532281">}</span><br>
<span class="lineno">60</span><span class="op" id="3532283">}</span>
</div>
</body>
</html>
