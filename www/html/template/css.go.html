<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3267022">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3267077">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3267131">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3267182">package</span>&nbsp;<span class="ident" id="3267190">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3267200">import</span>&nbsp;<span class="op" id="3267207">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3267210">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3267219">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3267226">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3267237">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3267252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3267255">//&nbsp;endsWithCSSKeyword&nbsp;reports&nbsp;whether&nbsp;b&nbsp;ends&nbsp;with&nbsp;an&nbsp;ident&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="3267319">//&nbsp;case-insensitively&nbsp;matches&nbsp;the&nbsp;lower-case&nbsp;kw.</span><br>
<span class="lineno"></span><span class="keyword" id="3267368">func</span>&nbsp;<span class="ident" id="3267373">endsWithCSSKeyword</span><span class="op" id="3267391">(</span><span class="ident" id="3267392">b</span>&nbsp;<span class="op" id="3267394">[</span><span class="op" id="3267395">]</span><span class="builtintype" id="3267396">byte</span><span class="op" id="3267400">,</span>&nbsp;<span class="ident" id="3267402">kw</span>&nbsp;<span class="builtintype" id="3267405">string</span><span class="op" id="3267411">)</span>&nbsp;<span class="builtintype" id="3267413">bool</span>&nbsp;<span class="op" id="3267418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3267421">i</span>&nbsp;<span class="op" id="3267423">:=</span>&nbsp;<span class="builtinfunc" id="3267426">len</span><span class="op" id="3267429">(</span><span class="ident" id="3267430"><a href="/html/template/css.go.html#3267392">b</a></span><span class="op" id="3267431">)</span>&nbsp;<span class="op" id="3267433">-</span>&nbsp;<span class="builtinfunc" id="3267435">len</span><span class="op" id="3267438">(</span><span class="ident" id="3267439"><a href="/html/template/css.go.html#3267402">kw</a></span><span class="op" id="3267441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3267444">if</span>&nbsp;<span class="ident" id="3267447"><a href="/html/template/css.go.html#3267421">i</a></span>&nbsp;<span class="op" id="3267449">&lt;</span>&nbsp;<span class="num" id="3267451">0</span>&nbsp;<span class="op" id="3267453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267457">//&nbsp;Too&nbsp;short.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3267473">return</span>&nbsp;<span class="ident" id="3267480">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3267487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3267490">if</span>&nbsp;<span class="ident" id="3267493"><a href="/html/template/css.go.html#3267421">i</a></span>&nbsp;<span class="op" id="3267495">!=</span>&nbsp;<span class="num" id="3267498">0</span>&nbsp;<span class="op" id="3267500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3267504">r</span><span class="op" id="3267505">,</span>&nbsp;<span class="ident" id="3267507">_</span>&nbsp;<span class="op" id="3267509">:=</span>&nbsp;<span class="ident" id="3267512"><a href="/html/template/css.go.html#3267237">utf8</a></span><span class="op" id="3267516">.</span><span class="ident" id="3267517">DecodeLastRune</span><span class="op" id="3267531">(</span><span class="ident" id="3267532"><a href="/html/template/css.go.html#3267392">b</a></span><span class="op" id="3267533">[</span><span class="op" id="3267534">:</span><span class="ident" id="3267535"><a href="/html/template/css.go.html#3267421">i</a></span><span class="op" id="3267536">]</span><span class="op" id="3267537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3267541">if</span>&nbsp;<span class="ident" id="3267544"><a href="/html/template/css.go.html#3268028">isCSSNmchar</a></span><span class="op" id="3267555">(</span><span class="ident" id="3267556"><a href="/html/template/css.go.html#3267504">r</a></span><span class="op" id="3267557">)</span>&nbsp;<span class="op" id="3267559">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267564">//&nbsp;Too&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3267580">return</span>&nbsp;<span class="ident" id="3267587">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3267595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3267598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267601">//&nbsp;Many&nbsp;CSS&nbsp;keywords,&nbsp;such&nbsp;as&nbsp;&#34;!important&#34;&nbsp;can&nbsp;have&nbsp;characters&nbsp;encoded,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267674">//&nbsp;but&nbsp;the&nbsp;URI&nbsp;production&nbsp;does&nbsp;not&nbsp;allow&nbsp;that&nbsp;according&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267734">//&nbsp;http://www.w3.org/TR/css3-syntax/#TOK-URI</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267780">//&nbsp;This&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;recognize&nbsp;encoded&nbsp;keywords.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3267850">//&nbsp;given&nbsp;&#34;\75\72\6c&#34;&nbsp;and&nbsp;&#34;url&#34;&nbsp;this&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3267901">return</span>&nbsp;<span class="builtintype" id="3267908">string</span><span class="op" id="3267914">(</span><span class="ident" id="3267915"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3267920">.</span><span class="ident" id="3267921">ToLower</span><span class="op" id="3267928">(</span><span class="ident" id="3267929"><a href="/html/template/css.go.html#3267392">b</a></span><span class="op" id="3267930">[</span><span class="ident" id="3267931"><a href="/html/template/css.go.html#3267421">i</a></span><span class="op" id="3267932">:</span><span class="op" id="3267933">]</span><span class="op" id="3267934">)</span><span class="op" id="3267935">)</span>&nbsp;<span class="op" id="3267937">==</span>&nbsp;<span class="ident" id="3267940"><a href="/html/template/css.go.html#3267402">kw</a></span><br>
<span class="lineno">35</span><span class="op" id="3267943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3267946">//&nbsp;isCSSNmchar&nbsp;reports&nbsp;whether&nbsp;rune&nbsp;is&nbsp;allowed&nbsp;anywhere&nbsp;in&nbsp;a&nbsp;CSS&nbsp;identifier.</span><br>
<span class="lineno"></span><span class="keyword" id="3268023">func</span>&nbsp;<span class="ident" id="3268028">isCSSNmchar</span><span class="op" id="3268039">(</span><span class="ident" id="3268040">r</span>&nbsp;<span class="builtintype" id="3268042">rune</span><span class="op" id="3268046">)</span>&nbsp;<span class="builtintype" id="3268048">bool</span>&nbsp;<span class="op" id="3268053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268056">//&nbsp;Based&nbsp;on&nbsp;the&nbsp;CSS3&nbsp;nmchar&nbsp;production&nbsp;but&nbsp;ignores&nbsp;multi-rune&nbsp;escape</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268126">//&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268141">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nmchar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268193">return</span>&nbsp;<span class="string" id="3268200">&#39;a&#39;</span>&nbsp;<span class="op" id="3268204">&lt;=</span>&nbsp;<span class="ident" id="3268207"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268209">&amp;&amp;</span>&nbsp;<span class="ident" id="3268212"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268214">&lt;=</span>&nbsp;<span class="string" id="3268217">&#39;z&#39;</span>&nbsp;<span class="op" id="3268221">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3268226">&#39;A&#39;</span>&nbsp;<span class="op" id="3268230">&lt;=</span>&nbsp;<span class="ident" id="3268233"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268235">&amp;&amp;</span>&nbsp;<span class="ident" id="3268238"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268240">&lt;=</span>&nbsp;<span class="string" id="3268243">&#39;Z&#39;</span>&nbsp;<span class="op" id="3268247">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3268252">&#39;0&#39;</span>&nbsp;<span class="op" id="3268256">&lt;=</span>&nbsp;<span class="ident" id="3268259"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268261">&amp;&amp;</span>&nbsp;<span class="ident" id="3268264"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268266">&lt;=</span>&nbsp;<span class="string" id="3268269">&#39;9&#39;</span>&nbsp;<span class="op" id="3268273">||</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268278"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268280">==</span>&nbsp;<span class="string" id="3268283">&#39;-&#39;</span>&nbsp;<span class="op" id="3268287">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268292"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268294">==</span>&nbsp;<span class="string" id="3268297">&#39;_&#39;</span>&nbsp;<span class="op" id="3268301">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268306">//&nbsp;Non-ASCII&nbsp;cases&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3268334">0x80</span>&nbsp;<span class="op" id="3268339">&lt;=</span>&nbsp;<span class="ident" id="3268342"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268344">&amp;&amp;</span>&nbsp;<span class="ident" id="3268347"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268349">&lt;=</span>&nbsp;<span class="num" id="3268352">0xd7ff</span>&nbsp;<span class="op" id="3268359">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3268364">0xe000</span>&nbsp;<span class="op" id="3268371">&lt;=</span>&nbsp;<span class="ident" id="3268374"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268376">&amp;&amp;</span>&nbsp;<span class="ident" id="3268379"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268381">&lt;=</span>&nbsp;<span class="num" id="3268384">0xfffd</span>&nbsp;<span class="op" id="3268391">||</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3268396">0x10000</span>&nbsp;<span class="op" id="3268404">&lt;=</span>&nbsp;<span class="ident" id="3268407"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268409">&amp;&amp;</span>&nbsp;<span class="ident" id="3268412"><a href="/html/template/css.go.html#3268040">r</a></span>&nbsp;<span class="op" id="3268414">&lt;=</span>&nbsp;<span class="num" id="3268417">0x10ffff</span><br>
<span class="lineno"></span><span class="op" id="3268426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3268429">//&nbsp;decodeCSS&nbsp;decodes&nbsp;CSS3&nbsp;escapes&nbsp;given&nbsp;a&nbsp;sequence&nbsp;of&nbsp;stringchars.</span><br>
<span class="lineno"></span><span class="comment" id="3268496">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;change,&nbsp;it&nbsp;returns&nbsp;the&nbsp;input,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno">55</span><span class="comment" id="3268573">//&nbsp;backed&nbsp;by&nbsp;a&nbsp;new&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="3268599">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-stringchar&nbsp;defines&nbsp;stringchar.</span><br>
<span class="lineno"></span><span class="keyword" id="3268674">func</span>&nbsp;<span class="ident" id="3268679">decodeCSS</span><span class="op" id="3268688">(</span><span class="ident" id="3268689">s</span>&nbsp;<span class="op" id="3268691">[</span><span class="op" id="3268692">]</span><span class="builtintype" id="3268693">byte</span><span class="op" id="3268697">)</span>&nbsp;<span class="op" id="3268699">[</span><span class="op" id="3268700">]</span><span class="builtintype" id="3268701">byte</span>&nbsp;<span class="op" id="3268706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268709">i</span>&nbsp;<span class="op" id="3268711">:=</span>&nbsp;<span class="ident" id="3268714"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3268719">.</span><span class="ident" id="3268720">IndexByte</span><span class="op" id="3268729">(</span><span class="ident" id="3268730"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3268731">,</span>&nbsp;<span class="string" id="3268733">&#39;\\&#39;</span><span class="op" id="3268737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268740">if</span>&nbsp;<span class="ident" id="3268743"><a href="/html/template/css.go.html#3268709">i</a></span>&nbsp;<span class="op" id="3268745">==</span>&nbsp;<span class="op" id="3268748">-</span><span class="num" id="3268749">1</span>&nbsp;<span class="op" id="3268751">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268755">return</span>&nbsp;<span class="ident" id="3268762"><a href="/html/template/css.go.html#3268689">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268768">//&nbsp;The&nbsp;UTF-8&nbsp;sequence&nbsp;for&nbsp;a&nbsp;codepoint&nbsp;is&nbsp;never&nbsp;longer&nbsp;than&nbsp;1&nbsp;+&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268836">//&nbsp;number&nbsp;hex&nbsp;digits&nbsp;need&nbsp;to&nbsp;represent&nbsp;that&nbsp;codepoint,&nbsp;so&nbsp;len(s)&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268908">//&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;output&nbsp;length.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268946">b</span>&nbsp;<span class="op" id="3268948">:=</span>&nbsp;<span class="builtinfunc" id="3268951">make</span><span class="op" id="3268955">(</span><span class="op" id="3268956">[</span><span class="op" id="3268957">]</span><span class="builtintype" id="3268958">byte</span><span class="op" id="3268962">,</span>&nbsp;<span class="num" id="3268964">0</span><span class="op" id="3268965">,</span>&nbsp;<span class="builtinfunc" id="3268967">len</span><span class="op" id="3268970">(</span><span class="ident" id="3268971"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3268972">)</span><span class="op" id="3268973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268976">for</span>&nbsp;<span class="builtinfunc" id="3268980">len</span><span class="op" id="3268983">(</span><span class="ident" id="3268984"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3268985">)</span>&nbsp;<span class="op" id="3268987">!=</span>&nbsp;<span class="num" id="3268990">0</span>&nbsp;<span class="op" id="3268992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268996">i</span>&nbsp;<span class="op" id="3268998">:=</span>&nbsp;<span class="ident" id="3269001"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3269006">.</span><span class="ident" id="3269007">IndexByte</span><span class="op" id="3269016">(</span><span class="ident" id="3269017"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269018">,</span>&nbsp;<span class="string" id="3269020">&#39;\\&#39;</span><span class="op" id="3269024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269028">if</span>&nbsp;<span class="ident" id="3269031"><a href="/html/template/css.go.html#3268996">i</a></span>&nbsp;<span class="op" id="3269033">==</span>&nbsp;<span class="op" id="3269036">-</span><span class="num" id="3269037">1</span>&nbsp;<span class="op" id="3269039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269044"><a href="/html/template/css.go.html#3268996">i</a></span>&nbsp;<span class="op" id="3269046">=</span>&nbsp;<span class="builtinfunc" id="3269048">len</span><span class="op" id="3269051">(</span><span class="ident" id="3269052"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269053">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269061"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269062">,</span>&nbsp;<span class="ident" id="3269064"><a href="/html/template/css.go.html#3268689">s</a></span>&nbsp;<span class="op" id="3269066">=</span>&nbsp;<span class="builtinfunc" id="3269068">append</span><span class="op" id="3269074">(</span><span class="ident" id="3269075"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269076">,</span>&nbsp;<span class="ident" id="3269078"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269079">[</span><span class="op" id="3269080">:</span><span class="ident" id="3269081"><a href="/html/template/css.go.html#3268996">i</a></span><span class="op" id="3269082">]</span><span class="op" id="3269083">...</span><span class="op" id="3269086">)</span><span class="op" id="3269087">,</span>&nbsp;<span class="ident" id="3269089"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269090">[</span><span class="ident" id="3269091"><a href="/html/template/css.go.html#3268996">i</a></span><span class="op" id="3269092">:</span><span class="op" id="3269093">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269097">if</span>&nbsp;<span class="builtinfunc" id="3269100">len</span><span class="op" id="3269103">(</span><span class="ident" id="3269104"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269105">)</span>&nbsp;<span class="op" id="3269107">&lt;</span>&nbsp;<span class="num" id="3269109">2</span>&nbsp;<span class="op" id="3269111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269116">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269124">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269128">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269181">//&nbsp;escape&nbsp;::=&nbsp;unicode&nbsp;|&nbsp;&#39;\&#39;&nbsp;[#x20-#x7E#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269263">if</span>&nbsp;<span class="ident" id="3269266"><a href="/html/template/css.go.html#3269978">isHex</a></span><span class="op" id="3269271">(</span><span class="ident" id="3269272"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269273">[</span><span class="num" id="3269274">1</span><span class="op" id="3269275">]</span><span class="op" id="3269276">)</span>&nbsp;<span class="op" id="3269278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269283">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-unicode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269338">//&nbsp;&nbsp;&nbsp;unicode&nbsp;::=&nbsp;&#39;\&#39;&nbsp;[0-9a-fA-F]{1,6}&nbsp;wc?</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269383">j</span>&nbsp;<span class="op" id="3269385">:=</span>&nbsp;<span class="num" id="3269388">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269393">for</span>&nbsp;<span class="ident" id="3269397"><a href="/html/template/css.go.html#3269383">j</a></span>&nbsp;<span class="op" id="3269399">&lt;</span>&nbsp;<span class="builtinfunc" id="3269401">len</span><span class="op" id="3269404">(</span><span class="ident" id="3269405"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269406">)</span>&nbsp;<span class="op" id="3269408">&amp;&amp;</span>&nbsp;<span class="ident" id="3269411"><a href="/html/template/css.go.html#3269383">j</a></span>&nbsp;<span class="op" id="3269413">&lt;</span>&nbsp;<span class="num" id="3269415">7</span>&nbsp;<span class="op" id="3269417">&amp;&amp;</span>&nbsp;<span class="ident" id="3269420"><a href="/html/template/css.go.html#3269978">isHex</a></span><span class="op" id="3269425">(</span><span class="ident" id="3269426"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269427">[</span><span class="ident" id="3269428"><a href="/html/template/css.go.html#3269383">j</a></span><span class="op" id="3269429">]</span><span class="op" id="3269430">)</span>&nbsp;<span class="op" id="3269432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269438"><a href="/html/template/css.go.html#3269383">j</a></span><span class="op" id="3269439">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269450">r</span>&nbsp;<span class="op" id="3269452">:=</span>&nbsp;<span class="ident" id="3269455"><a href="/html/template/css.go.html#3270145">hexDecode</a></span><span class="op" id="3269464">(</span><span class="ident" id="3269465"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269466">[</span><span class="num" id="3269467">1</span><span class="op" id="3269468">:</span><span class="ident" id="3269469"><a href="/html/template/css.go.html#3269383">j</a></span><span class="op" id="3269470">]</span><span class="op" id="3269471">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269476">if</span>&nbsp;<span class="ident" id="3269479"><a href="/html/template/css.go.html#3269450">r</a></span>&nbsp;<span class="op" id="3269481">&gt;</span>&nbsp;<span class="ident" id="3269483"><a href="/html/template/css.go.html#3267226">unicode</a></span><span class="op" id="3269490">.</span><span class="ident" id="3269491">MaxRune</span>&nbsp;<span class="op" id="3269499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269505"><a href="/html/template/css.go.html#3269450">r</a></span><span class="op" id="3269506">,</span>&nbsp;<span class="ident" id="3269508"><a href="/html/template/css.go.html#3269383">j</a></span>&nbsp;<span class="op" id="3269510">=</span>&nbsp;<span class="ident" id="3269512"><a href="/html/template/css.go.html#3269450">r</a></span><span class="op" id="3269513">/</span><span class="num" id="3269514">16</span><span class="op" id="3269516">,</span>&nbsp;<span class="ident" id="3269518"><a href="/html/template/css.go.html#3269383">j</a></span><span class="op" id="3269519">-</span><span class="num" id="3269520">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269530">n</span>&nbsp;<span class="op" id="3269532">:=</span>&nbsp;<span class="ident" id="3269535"><a href="/html/template/css.go.html#3267237">utf8</a></span><span class="op" id="3269539">.</span><span class="ident" id="3269540">EncodeRune</span><span class="op" id="3269550">(</span><span class="ident" id="3269551"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269552">[</span><span class="builtinfunc" id="3269553">len</span><span class="op" id="3269556">(</span><span class="ident" id="3269557"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269558">)</span><span class="op" id="3269559">:</span><span class="builtinfunc" id="3269560">cap</span><span class="op" id="3269563">(</span><span class="ident" id="3269564"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269565">)</span><span class="op" id="3269566">]</span><span class="op" id="3269567">,</span>&nbsp;<span class="ident" id="3269569"><a href="/html/template/css.go.html#3269450">r</a></span><span class="op" id="3269570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269575">//&nbsp;The&nbsp;optional&nbsp;space&nbsp;at&nbsp;the&nbsp;end&nbsp;allows&nbsp;a&nbsp;hex</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269624">//&nbsp;sequence&nbsp;to&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;literal&nbsp;hex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269672">//&nbsp;string(decodeCSS([]byte(`\A&nbsp;B`)))&nbsp;==&nbsp;&#34;\nB&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269721"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269722">,</span>&nbsp;<span class="ident" id="3269724"><a href="/html/template/css.go.html#3268689">s</a></span>&nbsp;<span class="op" id="3269726">=</span>&nbsp;<span class="ident" id="3269728"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269729">[</span><span class="op" id="3269730">:</span><span class="builtinfunc" id="3269731">len</span><span class="op" id="3269734">(</span><span class="ident" id="3269735"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269736">)</span><span class="op" id="3269737">+</span><span class="ident" id="3269738"><a href="/html/template/css.go.html#3269530">n</a></span><span class="op" id="3269739">]</span><span class="op" id="3269740">,</span>&nbsp;<span class="ident" id="3269742"><a href="/html/template/css.go.html#3270541">skipCSSSpace</a></span><span class="op" id="3269754">(</span><span class="ident" id="3269755"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269756">[</span><span class="ident" id="3269757"><a href="/html/template/css.go.html#3269383">j</a></span><span class="op" id="3269758">:</span><span class="op" id="3269759">]</span><span class="op" id="3269760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269764">}</span>&nbsp;<span class="keyword" id="3269766">else</span>&nbsp;<span class="op" id="3269771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3269776">//&nbsp;`\\`&nbsp;decodes&nbsp;to&nbsp;`\`&nbsp;and&nbsp;`\&#34;`&nbsp;to&nbsp;`&#34;`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269819">_</span><span class="op" id="3269820">,</span>&nbsp;<span class="ident" id="3269822">n</span>&nbsp;<span class="op" id="3269824">:=</span>&nbsp;<span class="ident" id="3269827"><a href="/html/template/css.go.html#3267237">utf8</a></span><span class="op" id="3269831">.</span><span class="ident" id="3269832">DecodeRune</span><span class="op" id="3269842">(</span><span class="ident" id="3269843"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269844">[</span><span class="num" id="3269845">1</span><span class="op" id="3269846">:</span><span class="op" id="3269847">]</span><span class="op" id="3269848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269853"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269854">,</span>&nbsp;<span class="ident" id="3269856"><a href="/html/template/css.go.html#3268689">s</a></span>&nbsp;<span class="op" id="3269858">=</span>&nbsp;<span class="builtinfunc" id="3269860">append</span><span class="op" id="3269866">(</span><span class="ident" id="3269867"><a href="/html/template/css.go.html#3268946">b</a></span><span class="op" id="3269868">,</span>&nbsp;<span class="ident" id="3269870"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269871">[</span><span class="num" id="3269872">1</span><span class="op" id="3269873">:</span><span class="num" id="3269874">1</span><span class="op" id="3269875">+</span><span class="ident" id="3269876"><a href="/html/template/css.go.html#3269822">n</a></span><span class="op" id="3269877">]</span><span class="op" id="3269878">...</span><span class="op" id="3269881">)</span><span class="op" id="3269882">,</span>&nbsp;<span class="ident" id="3269884"><a href="/html/template/css.go.html#3268689">s</a></span><span class="op" id="3269885">[</span><span class="num" id="3269886">1</span><span class="op" id="3269887">+</span><span class="ident" id="3269888"><a href="/html/template/css.go.html#3269822">n</a></span><span class="op" id="3269889">:</span><span class="op" id="3269890">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269900">return</span>&nbsp;<span class="ident" id="3269907"><a href="/html/template/css.go.html#3268946">b</a></span><br>
<span class="lineno">100</span><span class="op" id="3269909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3269912">//&nbsp;isHex&nbsp;reports&nbsp;whether&nbsp;the&nbsp;given&nbsp;character&nbsp;is&nbsp;a&nbsp;hex&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="3269973">func</span>&nbsp;<span class="ident" id="3269978">isHex</span><span class="op" id="3269983">(</span><span class="ident" id="3269984">c</span>&nbsp;<span class="builtintype" id="3269986">byte</span><span class="op" id="3269990">)</span>&nbsp;<span class="builtintype" id="3269992">bool</span>&nbsp;<span class="op" id="3269997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270000">return</span>&nbsp;<span class="string" id="3270007">&#39;0&#39;</span>&nbsp;<span class="op" id="3270011">&lt;=</span>&nbsp;<span class="ident" id="3270014"><a href="/html/template/css.go.html#3269984">c</a></span>&nbsp;<span class="op" id="3270016">&amp;&amp;</span>&nbsp;<span class="ident" id="3270019"><a href="/html/template/css.go.html#3269984">c</a></span>&nbsp;<span class="op" id="3270021">&lt;=</span>&nbsp;<span class="string" id="3270024">&#39;9&#39;</span>&nbsp;<span class="op" id="3270028">||</span>&nbsp;<span class="string" id="3270031">&#39;a&#39;</span>&nbsp;<span class="op" id="3270035">&lt;=</span>&nbsp;<span class="ident" id="3270038"><a href="/html/template/css.go.html#3269984">c</a></span>&nbsp;<span class="op" id="3270040">&amp;&amp;</span>&nbsp;<span class="ident" id="3270043"><a href="/html/template/css.go.html#3269984">c</a></span>&nbsp;<span class="op" id="3270045">&lt;=</span>&nbsp;<span class="string" id="3270048">&#39;f&#39;</span>&nbsp;<span class="op" id="3270052">||</span>&nbsp;<span class="string" id="3270055">&#39;A&#39;</span>&nbsp;<span class="op" id="3270059">&lt;=</span>&nbsp;<span class="ident" id="3270062"><a href="/html/template/css.go.html#3269984">c</a></span>&nbsp;<span class="op" id="3270064">&amp;&amp;</span>&nbsp;<span class="ident" id="3270067"><a href="/html/template/css.go.html#3269984">c</a></span>&nbsp;<span class="op" id="3270069">&lt;=</span>&nbsp;<span class="string" id="3270072">&#39;F&#39;</span><br>
<span class="lineno">105</span><span class="op" id="3270076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3270079">//&nbsp;hexDecode&nbsp;decodes&nbsp;a&nbsp;short&nbsp;hex&nbsp;digit&nbsp;sequence:&nbsp;&#34;10&#34;&nbsp;-&gt;&nbsp;16.</span><br>
<span class="lineno"></span><span class="keyword" id="3270140">func</span>&nbsp;<span class="ident" id="3270145">hexDecode</span><span class="op" id="3270154">(</span><span class="ident" id="3270155">s</span>&nbsp;<span class="op" id="3270157">[</span><span class="op" id="3270158">]</span><span class="builtintype" id="3270159">byte</span><span class="op" id="3270163">)</span>&nbsp;<span class="builtintype" id="3270165">rune</span>&nbsp;<span class="op" id="3270170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3270173">n</span>&nbsp;<span class="op" id="3270175">:=</span>&nbsp;<span class="string" id="3270178">&#39;\x00&#39;</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270186">for</span>&nbsp;<span class="ident" id="3270190">_</span><span class="op" id="3270191">,</span>&nbsp;<span class="ident" id="3270193">c</span>&nbsp;<span class="op" id="3270195">:=</span>&nbsp;<span class="keyword" id="3270198">range</span>&nbsp;<span class="ident" id="3270204"><a href="/html/template/css.go.html#3270155">s</a></span>&nbsp;<span class="op" id="3270206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3270210"><a href="/html/template/css.go.html#3270173">n</a></span>&nbsp;<span class="op" id="3270212">&lt;&lt;=</span>&nbsp;<span class="num" id="3270216">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270220">switch</span>&nbsp;<span class="op" id="3270227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270231">case</span>&nbsp;<span class="string" id="3270236">&#39;0&#39;</span>&nbsp;<span class="op" id="3270240">&lt;=</span>&nbsp;<span class="ident" id="3270243"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270245">&amp;&amp;</span>&nbsp;<span class="ident" id="3270248"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270250">&lt;=</span>&nbsp;<span class="string" id="3270253">&#39;9&#39;</span><span class="op" id="3270256">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3270261"><a href="/html/template/css.go.html#3270173">n</a></span>&nbsp;<span class="op" id="3270263">|=</span>&nbsp;<span class="builtintype" id="3270266">rune</span><span class="op" id="3270270">(</span><span class="ident" id="3270271"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270273">-</span>&nbsp;<span class="string" id="3270275">&#39;0&#39;</span><span class="op" id="3270278">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270282">case</span>&nbsp;<span class="string" id="3270287">&#39;a&#39;</span>&nbsp;<span class="op" id="3270291">&lt;=</span>&nbsp;<span class="ident" id="3270294"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270296">&amp;&amp;</span>&nbsp;<span class="ident" id="3270299"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270301">&lt;=</span>&nbsp;<span class="string" id="3270304">&#39;f&#39;</span><span class="op" id="3270307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3270312"><a href="/html/template/css.go.html#3270173">n</a></span>&nbsp;<span class="op" id="3270314">|=</span>&nbsp;<span class="builtintype" id="3270317">rune</span><span class="op" id="3270321">(</span><span class="ident" id="3270322"><a href="/html/template/css.go.html#3270193">c</a></span><span class="op" id="3270323">-</span><span class="string" id="3270324">&#39;a&#39;</span><span class="op" id="3270327">)</span>&nbsp;<span class="op" id="3270329">+</span>&nbsp;<span class="num" id="3270331">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270336">case</span>&nbsp;<span class="string" id="3270341">&#39;A&#39;</span>&nbsp;<span class="op" id="3270345">&lt;=</span>&nbsp;<span class="ident" id="3270348"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270350">&amp;&amp;</span>&nbsp;<span class="ident" id="3270353"><a href="/html/template/css.go.html#3270193">c</a></span>&nbsp;<span class="op" id="3270355">&lt;=</span>&nbsp;<span class="string" id="3270358">&#39;F&#39;</span><span class="op" id="3270361">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3270366"><a href="/html/template/css.go.html#3270173">n</a></span>&nbsp;<span class="op" id="3270368">|=</span>&nbsp;<span class="builtintype" id="3270371">rune</span><span class="op" id="3270375">(</span><span class="ident" id="3270376"><a href="/html/template/css.go.html#3270193">c</a></span><span class="op" id="3270377">-</span><span class="string" id="3270378">&#39;A&#39;</span><span class="op" id="3270381">)</span>&nbsp;<span class="op" id="3270383">+</span>&nbsp;<span class="num" id="3270385">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270390">default</span><span class="op" id="3270397">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3270402">panic</span><span class="op" id="3270407">(</span><span class="ident" id="3270408"><a href="/html/template/css.go.html#3267219">fmt</a></span><span class="op" id="3270411">.</span><span class="ident" id="3270412">Sprintf</span><span class="op" id="3270419">(</span><span class="string" id="3270420">&#34;Bad&nbsp;hex&nbsp;digit&nbsp;in&nbsp;%q&#34;</span><span class="op" id="3270441">,</span>&nbsp;<span class="ident" id="3270443"><a href="/html/template/css.go.html#3270155">s</a></span><span class="op" id="3270444">)</span><span class="op" id="3270445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3270449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3270452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270455">return</span>&nbsp;<span class="ident" id="3270462"><a href="/html/template/css.go.html#3270173">n</a></span><br>
<span class="lineno"></span><span class="op" id="3270464">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="3270467">//&nbsp;skipCSSSpace&nbsp;returns&nbsp;a&nbsp;suffix&nbsp;of&nbsp;c,&nbsp;skipping&nbsp;over&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3270536">func</span>&nbsp;<span class="ident" id="3270541">skipCSSSpace</span><span class="op" id="3270553">(</span><span class="ident" id="3270554">c</span>&nbsp;<span class="op" id="3270556">[</span><span class="op" id="3270557">]</span><span class="builtintype" id="3270558">byte</span><span class="op" id="3270562">)</span>&nbsp;<span class="op" id="3270564">[</span><span class="op" id="3270565">]</span><span class="builtintype" id="3270566">byte</span>&nbsp;<span class="op" id="3270571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270574">if</span>&nbsp;<span class="builtinfunc" id="3270577">len</span><span class="op" id="3270580">(</span><span class="ident" id="3270581"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270582">)</span>&nbsp;<span class="op" id="3270584">==</span>&nbsp;<span class="num" id="3270587">0</span>&nbsp;<span class="op" id="3270589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270593">return</span>&nbsp;<span class="ident" id="3270600"><a href="/html/template/css.go.html#3270554">c</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3270603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3270606">//&nbsp;wc&nbsp;::=&nbsp;#x9&nbsp;|&nbsp;#xA&nbsp;|&nbsp;#xC&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270646">switch</span>&nbsp;<span class="ident" id="3270653"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270654">[</span><span class="num" id="3270655">0</span><span class="op" id="3270656">]</span>&nbsp;<span class="op" id="3270658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270661">case</span>&nbsp;<span class="string" id="3270666">&#39;\t&#39;</span><span class="op" id="3270670">,</span>&nbsp;<span class="string" id="3270672">&#39;\n&#39;</span><span class="op" id="3270676">,</span>&nbsp;<span class="string" id="3270678">&#39;\f&#39;</span><span class="op" id="3270682">,</span>&nbsp;<span class="string" id="3270684">&#39;&nbsp;&#39;</span><span class="op" id="3270687">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270691">return</span>&nbsp;<span class="ident" id="3270698"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270699">[</span><span class="num" id="3270700">1</span><span class="op" id="3270701">:</span><span class="op" id="3270702">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270705">case</span>&nbsp;<span class="string" id="3270710">&#39;\r&#39;</span><span class="op" id="3270714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3270718">//&nbsp;This&nbsp;differs&nbsp;from&nbsp;CSS3&#39;s&nbsp;wc&nbsp;production&nbsp;because&nbsp;it&nbsp;contains&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3270784">//&nbsp;probable&nbsp;spec&nbsp;error&nbsp;whereby&nbsp;wc&nbsp;contains&nbsp;all&nbsp;the&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3270849">//&nbsp;sequences&nbsp;in&nbsp;nl&nbsp;(newline)&nbsp;but&nbsp;not&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270894">if</span>&nbsp;<span class="builtinfunc" id="3270897">len</span><span class="op" id="3270900">(</span><span class="ident" id="3270901"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270902">)</span>&nbsp;<span class="op" id="3270904">&gt;=</span>&nbsp;<span class="num" id="3270907">2</span>&nbsp;<span class="op" id="3270909">&amp;&amp;</span>&nbsp;<span class="ident" id="3270912"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270913">[</span><span class="num" id="3270914">1</span><span class="op" id="3270915">]</span>&nbsp;<span class="op" id="3270917">==</span>&nbsp;<span class="string" id="3270920">&#39;\n&#39;</span>&nbsp;<span class="op" id="3270925">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270930">return</span>&nbsp;<span class="ident" id="3270937"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270938">[</span><span class="num" id="3270939">2</span><span class="op" id="3270940">:</span><span class="op" id="3270941">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3270945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270949">return</span>&nbsp;<span class="ident" id="3270956"><a href="/html/template/css.go.html#3270554">c</a></span><span class="op" id="3270957">[</span><span class="num" id="3270958">1</span><span class="op" id="3270959">:</span><span class="op" id="3270960">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3270963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3270966">return</span>&nbsp;<span class="ident" id="3270973"><a href="/html/template/css.go.html#3270554">c</a></span><br>
<span class="lineno">145</span><span class="op" id="3270975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3270978">//&nbsp;isCSSSpace&nbsp;reports&nbsp;whether&nbsp;b&nbsp;is&nbsp;a&nbsp;CSS&nbsp;space&nbsp;char&nbsp;as&nbsp;defined&nbsp;in&nbsp;wc.</span><br>
<span class="lineno"></span><span class="keyword" id="3271048">func</span>&nbsp;<span class="ident" id="3271053">isCSSSpace</span><span class="op" id="3271063">(</span><span class="ident" id="3271064">b</span>&nbsp;<span class="builtintype" id="3271066">byte</span><span class="op" id="3271070">)</span>&nbsp;<span class="builtintype" id="3271072">bool</span>&nbsp;<span class="op" id="3271077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271080">switch</span>&nbsp;<span class="ident" id="3271087"><a href="/html/template/css.go.html#3271064">b</a></span>&nbsp;<span class="op" id="3271089">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271092">case</span>&nbsp;<span class="string" id="3271097">&#39;\t&#39;</span><span class="op" id="3271101">,</span>&nbsp;<span class="string" id="3271103">&#39;\n&#39;</span><span class="op" id="3271107">,</span>&nbsp;<span class="string" id="3271109">&#39;\f&#39;</span><span class="op" id="3271113">,</span>&nbsp;<span class="string" id="3271115">&#39;\r&#39;</span><span class="op" id="3271119">,</span>&nbsp;<span class="string" id="3271121">&#39;&nbsp;&#39;</span><span class="op" id="3271124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271128">return</span>&nbsp;<span class="ident" id="3271135">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3271141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271144">return</span>&nbsp;<span class="ident" id="3271151">false</span><br>
<span class="lineno"></span><span class="op" id="3271157">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3271160">//&nbsp;cssEscaper&nbsp;escapes&nbsp;HTML&nbsp;and&nbsp;CSS&nbsp;special&nbsp;characters&nbsp;using&nbsp;\&lt;hex&gt;+&nbsp;escapes.</span><br>
<span class="lineno"></span><span class="keyword" id="3271237">func</span>&nbsp;<span class="ident" id="3271242">cssEscaper</span><span class="op" id="3271252">(</span><span class="ident" id="3271253">args</span>&nbsp;<span class="op" id="3271258">...</span><span class="keyword" id="3271261">interface</span><span class="op" id="3271270">{</span><span class="op" id="3271271">}</span><span class="op" id="3271272">)</span>&nbsp;<span class="builtintype" id="3271274">string</span>&nbsp;<span class="op" id="3271281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271284">s</span><span class="op" id="3271285">,</span>&nbsp;<span class="ident" id="3271287">_</span>&nbsp;<span class="op" id="3271289">:=</span>&nbsp;<span class="ident" id="3271292"><a href="/html/template/content.go.html#3256165">stringify</a></span><span class="op" id="3271301">(</span><span class="ident" id="3271302"><a href="/html/template/css.go.html#3271253">args</a></span><span class="op" id="3271306">...</span><span class="op" id="3271309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271312">var</span>&nbsp;<span class="ident" id="3271316">b</span>&nbsp;<span class="ident" id="3271318"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3271323">.</span><span class="ident" id="3271324">Buffer</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271332">written</span>&nbsp;<span class="op" id="3271340">:=</span>&nbsp;<span class="num" id="3271343">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271346">for</span>&nbsp;<span class="ident" id="3271350">i</span><span class="op" id="3271351">,</span>&nbsp;<span class="ident" id="3271353">r</span>&nbsp;<span class="op" id="3271355">:=</span>&nbsp;<span class="keyword" id="3271358">range</span>&nbsp;<span class="ident" id="3271364"><a href="/html/template/css.go.html#3271284">s</a></span>&nbsp;<span class="op" id="3271366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271370">var</span>&nbsp;<span class="ident" id="3271374">repl</span>&nbsp;<span class="builtintype" id="3271379">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271388">switch</span>&nbsp;<span class="ident" id="3271395"><a href="/html/template/css.go.html#3271353">r</a></span>&nbsp;<span class="op" id="3271397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271401">case</span>&nbsp;<span class="num" id="3271406">0</span><span class="op" id="3271407">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271412"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271417">=</span>&nbsp;<span class="string" id="3271419">`\0`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271426">case</span>&nbsp;<span class="string" id="3271431">&#39;\t&#39;</span><span class="op" id="3271435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271440"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271445">=</span>&nbsp;<span class="string" id="3271447">`\9`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271454">case</span>&nbsp;<span class="string" id="3271459">&#39;\n&#39;</span><span class="op" id="3271463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271468"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271473">=</span>&nbsp;<span class="string" id="3271475">`\a`</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271482">case</span>&nbsp;<span class="string" id="3271487">&#39;\f&#39;</span><span class="op" id="3271491">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271496"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271501">=</span>&nbsp;<span class="string" id="3271503">`\c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271510">case</span>&nbsp;<span class="string" id="3271515">&#39;\r&#39;</span><span class="op" id="3271519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271524"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271529">=</span>&nbsp;<span class="string" id="3271531">`\d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3271538">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3271601">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271651">case</span>&nbsp;<span class="string" id="3271656">&#39;&#34;&#39;</span><span class="op" id="3271659">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271664"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271669">=</span>&nbsp;<span class="string" id="3271671">`\22`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271679">case</span>&nbsp;<span class="string" id="3271684">&#39;&amp;&#39;</span><span class="op" id="3271687">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271692"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271697">=</span>&nbsp;<span class="string" id="3271699">`\26`</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271707">case</span>&nbsp;<span class="string" id="3271712">&#39;\&#39;&#39;</span><span class="op" id="3271716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271721"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271726">=</span>&nbsp;<span class="string" id="3271728">`\27`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271736">case</span>&nbsp;<span class="string" id="3271741">&#39;(&#39;</span><span class="op" id="3271744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271749"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271754">=</span>&nbsp;<span class="string" id="3271756">`\28`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271764">case</span>&nbsp;<span class="string" id="3271769">&#39;)&#39;</span><span class="op" id="3271772">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271777"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271782">=</span>&nbsp;<span class="string" id="3271784">`\29`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271792">case</span>&nbsp;<span class="string" id="3271797">&#39;+&#39;</span><span class="op" id="3271800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271805"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271810">=</span>&nbsp;<span class="string" id="3271812">`\2b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271820">case</span>&nbsp;<span class="string" id="3271825">&#39;/&#39;</span><span class="op" id="3271828">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271833"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271838">=</span>&nbsp;<span class="string" id="3271840">`\2f`</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271848">case</span>&nbsp;<span class="string" id="3271853">&#39;:&#39;</span><span class="op" id="3271856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271861"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271866">=</span>&nbsp;<span class="string" id="3271868">`\3a`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271876">case</span>&nbsp;<span class="string" id="3271881">&#39;;&#39;</span><span class="op" id="3271884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271889"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271894">=</span>&nbsp;<span class="string" id="3271896">`\3b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271904">case</span>&nbsp;<span class="string" id="3271909">&#39;&lt;&#39;</span><span class="op" id="3271912">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271917"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271922">=</span>&nbsp;<span class="string" id="3271924">`\3c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271932">case</span>&nbsp;<span class="string" id="3271937">&#39;&gt;&#39;</span><span class="op" id="3271940">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271945"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271950">=</span>&nbsp;<span class="string" id="3271952">`\3e`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271960">case</span>&nbsp;<span class="string" id="3271965">&#39;\\&#39;</span><span class="op" id="3271969">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3271974"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3271979">=</span>&nbsp;<span class="string" id="3271981">`\\`</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3271988">case</span>&nbsp;<span class="string" id="3271993">&#39;{&#39;</span><span class="op" id="3271996">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272001"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3272006">=</span>&nbsp;<span class="string" id="3272008">`\7b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272016">case</span>&nbsp;<span class="string" id="3272021">&#39;}&#39;</span><span class="op" id="3272024">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272029"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3272034">=</span>&nbsp;<span class="string" id="3272036">`\7d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272044">default</span><span class="op" id="3272051">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272056">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3272067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272071"><a href="/html/template/css.go.html#3271316">b</a></span><span class="op" id="3272072">.</span><span class="ident" id="3272073">WriteString</span><span class="op" id="3272084">(</span><span class="ident" id="3272085"><a href="/html/template/css.go.html#3271284">s</a></span><span class="op" id="3272086">[</span><span class="ident" id="3272087"><a href="/html/template/css.go.html#3271332">written</a></span><span class="op" id="3272094">:</span><span class="ident" id="3272095"><a href="/html/template/css.go.html#3271350">i</a></span><span class="op" id="3272096">]</span><span class="op" id="3272097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272101"><a href="/html/template/css.go.html#3271316">b</a></span><span class="op" id="3272102">.</span><span class="ident" id="3272103">WriteString</span><span class="op" id="3272114">(</span><span class="ident" id="3272115"><a href="/html/template/css.go.html#3271374">repl</a></span><span class="op" id="3272119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272123"><a href="/html/template/css.go.html#3271332">written</a></span>&nbsp;<span class="op" id="3272131">=</span>&nbsp;<span class="ident" id="3272133"><a href="/html/template/css.go.html#3271350">i</a></span>&nbsp;<span class="op" id="3272135">+</span>&nbsp;<span class="ident" id="3272137"><a href="/html/template/css.go.html#3267237">utf8</a></span><span class="op" id="3272141">.</span><span class="ident" id="3272142">RuneLen</span><span class="op" id="3272149">(</span><span class="ident" id="3272150"><a href="/html/template/css.go.html#3271353">r</a></span><span class="op" id="3272151">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272155">if</span>&nbsp;<span class="ident" id="3272158"><a href="/html/template/css.go.html#3271374">repl</a></span>&nbsp;<span class="op" id="3272163">!=</span>&nbsp;<span class="string" id="3272166">`\\`</span>&nbsp;<span class="op" id="3272171">&amp;&amp;</span>&nbsp;<span class="op" id="3272174">(</span><span class="ident" id="3272175"><a href="/html/template/css.go.html#3271332">written</a></span>&nbsp;<span class="op" id="3272183">==</span>&nbsp;<span class="builtinfunc" id="3272186">len</span><span class="op" id="3272189">(</span><span class="ident" id="3272190"><a href="/html/template/css.go.html#3271284">s</a></span><span class="op" id="3272191">)</span>&nbsp;<span class="op" id="3272193">||</span>&nbsp;<span class="ident" id="3272196"><a href="/html/template/css.go.html#3269978">isHex</a></span><span class="op" id="3272201">(</span><span class="ident" id="3272202"><a href="/html/template/css.go.html#3271284">s</a></span><span class="op" id="3272203">[</span><span class="ident" id="3272204"><a href="/html/template/css.go.html#3271332">written</a></span><span class="op" id="3272211">]</span><span class="op" id="3272212">)</span>&nbsp;<span class="op" id="3272214">||</span>&nbsp;<span class="ident" id="3272217"><a href="/html/template/css.go.html#3271053">isCSSSpace</a></span><span class="op" id="3272227">(</span><span class="ident" id="3272228"><a href="/html/template/css.go.html#3271284">s</a></span><span class="op" id="3272229">[</span><span class="ident" id="3272230"><a href="/html/template/css.go.html#3271332">written</a></span><span class="op" id="3272237">]</span><span class="op" id="3272238">)</span><span class="op" id="3272239">)</span>&nbsp;<span class="op" id="3272241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272246"><a href="/html/template/css.go.html#3271316">b</a></span><span class="op" id="3272247">.</span><span class="ident" id="3272248">WriteByte</span><span class="op" id="3272257">(</span><span class="string" id="3272258">&#39;&nbsp;&#39;</span><span class="op" id="3272261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3272265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3272268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272271">if</span>&nbsp;<span class="ident" id="3272274"><a href="/html/template/css.go.html#3271332">written</a></span>&nbsp;<span class="op" id="3272282">==</span>&nbsp;<span class="num" id="3272285">0</span>&nbsp;<span class="op" id="3272287">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272291">return</span>&nbsp;<span class="ident" id="3272298"><a href="/html/template/css.go.html#3271284">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3272301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272304"><a href="/html/template/css.go.html#3271316">b</a></span><span class="op" id="3272305">.</span><span class="ident" id="3272306">WriteString</span><span class="op" id="3272317">(</span><span class="ident" id="3272318"><a href="/html/template/css.go.html#3271284">s</a></span><span class="op" id="3272319">[</span><span class="ident" id="3272320"><a href="/html/template/css.go.html#3271332">written</a></span><span class="op" id="3272327">:</span><span class="op" id="3272328">]</span><span class="op" id="3272329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272332">return</span>&nbsp;<span class="ident" id="3272339"><a href="/html/template/css.go.html#3271316">b</a></span><span class="op" id="3272340">.</span><span class="ident" id="3272341">String</span><span class="op" id="3272347">(</span><span class="op" id="3272348">)</span><br>
<span class="lineno"></span><span class="op" id="3272350">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="3272353">var</span>&nbsp;<span class="ident" id="3272357">expressionBytes</span>&nbsp;<span class="op" id="3272373">=</span>&nbsp;<span class="op" id="3272375">[</span><span class="op" id="3272376">]</span><span class="builtintype" id="3272377">byte</span><span class="op" id="3272381">(</span><span class="string" id="3272382">&#34;expression&#34;</span><span class="op" id="3272394">)</span><br>
<span class="lineno"></span><span class="keyword" id="3272396">var</span>&nbsp;<span class="ident" id="3272400">mozBindingBytes</span>&nbsp;<span class="op" id="3272416">=</span>&nbsp;<span class="op" id="3272418">[</span><span class="op" id="3272419">]</span><span class="builtintype" id="3272420">byte</span><span class="op" id="3272424">(</span><span class="string" id="3272425">&#34;mozbinding&#34;</span><span class="op" id="3272437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3272440">//&nbsp;cssValueFilter&nbsp;allows&nbsp;innocuous&nbsp;CSS&nbsp;values&nbsp;in&nbsp;the&nbsp;output&nbsp;including&nbsp;CSS</span><br>
<span class="lineno">225</span><span class="comment" id="3272514">//&nbsp;quantities&nbsp;(10px&nbsp;or&nbsp;25%),&nbsp;ID&nbsp;or&nbsp;class&nbsp;literals&nbsp;(#foo,&nbsp;.bar),&nbsp;keyword&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="3272593">//&nbsp;(inherit,&nbsp;blue),&nbsp;and&nbsp;colors&nbsp;(#888).</span><br>
<span class="lineno"></span><span class="comment" id="3272632">//&nbsp;It&nbsp;filters&nbsp;out&nbsp;unsafe&nbsp;values,&nbsp;such&nbsp;as&nbsp;those&nbsp;that&nbsp;affect&nbsp;token&nbsp;boundaries,</span><br>
<span class="lineno"></span><span class="comment" id="3272709">//&nbsp;and&nbsp;anything&nbsp;that&nbsp;might&nbsp;execute&nbsp;scripts.</span><br>
<span class="lineno"></span><span class="keyword" id="3272753">func</span>&nbsp;<span class="ident" id="3272758">cssValueFilter</span><span class="op" id="3272772">(</span><span class="ident" id="3272773">args</span>&nbsp;<span class="op" id="3272778">...</span><span class="keyword" id="3272781">interface</span><span class="op" id="3272790">{</span><span class="op" id="3272791">}</span><span class="op" id="3272792">)</span>&nbsp;<span class="builtintype" id="3272794">string</span>&nbsp;<span class="op" id="3272801">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272804">s</span><span class="op" id="3272805">,</span>&nbsp;<span class="ident" id="3272807">t</span>&nbsp;<span class="op" id="3272809">:=</span>&nbsp;<span class="ident" id="3272812"><a href="/html/template/content.go.html#3256165">stringify</a></span><span class="op" id="3272821">(</span><span class="ident" id="3272822"><a href="/html/template/css.go.html#3272773">args</a></span><span class="op" id="3272826">...</span><span class="op" id="3272829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272832">if</span>&nbsp;<span class="ident" id="3272835"><a href="/html/template/css.go.html#3272807">t</a></span>&nbsp;<span class="op" id="3272837">==</span>&nbsp;<span class="ident" id="3272840"><a href="/html/template/content.go.html#3254681">contentTypeCSS</a></span>&nbsp;<span class="op" id="3272855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3272859">return</span>&nbsp;<span class="ident" id="3272866"><a href="/html/template/css.go.html#3272804">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3272869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3272872">b</span><span class="op" id="3272873">,</span>&nbsp;<span class="ident" id="3272875">id</span>&nbsp;<span class="op" id="3272878">:=</span>&nbsp;<span class="ident" id="3272881"><a href="/html/template/css.go.html#3268679">decodeCSS</a></span><span class="op" id="3272890">(</span><span class="op" id="3272891">[</span><span class="op" id="3272892">]</span><span class="builtintype" id="3272893">byte</span><span class="op" id="3272897">(</span><span class="ident" id="3272898"><a href="/html/template/css.go.html#3272804">s</a></span><span class="op" id="3272899">)</span><span class="op" id="3272900">)</span><span class="op" id="3272901">,</span>&nbsp;<span class="builtinfunc" id="3272903">make</span><span class="op" id="3272907">(</span><span class="op" id="3272908">[</span><span class="op" id="3272909">]</span><span class="builtintype" id="3272910">byte</span><span class="op" id="3272914">,</span>&nbsp;<span class="num" id="3272916">0</span><span class="op" id="3272917">,</span>&nbsp;<span class="num" id="3272919">64</span><span class="op" id="3272921">)</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3272925">//&nbsp;CSS3&nbsp;error&nbsp;handling&nbsp;is&nbsp;specified&nbsp;as&nbsp;honoring&nbsp;string&nbsp;boundaries&nbsp;per</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3272996">//&nbsp;http://www.w3.org/TR/css3-syntax/#error-handling&nbsp;:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273051">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Malformed&nbsp;declarations.&nbsp;User&nbsp;agents&nbsp;must&nbsp;handle&nbsp;unexpected</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273118">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tokens&nbsp;encountered&nbsp;while&nbsp;parsing&nbsp;a&nbsp;declaration&nbsp;by&nbsp;reading&nbsp;until</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273190">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;declaration,&nbsp;while&nbsp;observing&nbsp;the&nbsp;rules&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273256">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matching&nbsp;pairs&nbsp;of&nbsp;(),&nbsp;[],&nbsp;{},&nbsp;&#34;&#34;,&nbsp;and&nbsp;&#39;&#39;,&nbsp;and&nbsp;correctly&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273329">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;a&nbsp;malformed&nbsp;declaration&nbsp;may&nbsp;be&nbsp;missing&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273400">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;property,&nbsp;colon&nbsp;(:)&nbsp;or&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273438">//&nbsp;So&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;values&nbsp;do&nbsp;not&nbsp;have&nbsp;mismatched&nbsp;bracket</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273509">//&nbsp;or&nbsp;quote&nbsp;characters&nbsp;to&nbsp;prevent&nbsp;the&nbsp;browser&nbsp;from&nbsp;restarting&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273580">//&nbsp;inside&nbsp;a&nbsp;string&nbsp;that&nbsp;might&nbsp;embed&nbsp;JavaScript&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273636">for</span>&nbsp;<span class="ident" id="3273640">i</span><span class="op" id="3273641">,</span>&nbsp;<span class="ident" id="3273643">c</span>&nbsp;<span class="op" id="3273645">:=</span>&nbsp;<span class="keyword" id="3273648">range</span>&nbsp;<span class="ident" id="3273654"><a href="/html/template/css.go.html#3272872">b</a></span>&nbsp;<span class="op" id="3273656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273660">switch</span>&nbsp;<span class="ident" id="3273667"><a href="/html/template/css.go.html#3273643">c</a></span>&nbsp;<span class="op" id="3273669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273673">case</span>&nbsp;<span class="num" id="3273678">0</span><span class="op" id="3273679">,</span>&nbsp;<span class="string" id="3273681">&#39;&#34;&#39;</span><span class="op" id="3273684">,</span>&nbsp;<span class="string" id="3273686">&#39;\&#39;&#39;</span><span class="op" id="3273690">,</span>&nbsp;<span class="string" id="3273692">&#39;(&#39;</span><span class="op" id="3273695">,</span>&nbsp;<span class="string" id="3273697">&#39;)&#39;</span><span class="op" id="3273700">,</span>&nbsp;<span class="string" id="3273702">&#39;/&#39;</span><span class="op" id="3273705">,</span>&nbsp;<span class="string" id="3273707">&#39;;&#39;</span><span class="op" id="3273710">,</span>&nbsp;<span class="string" id="3273712">&#39;@&#39;</span><span class="op" id="3273715">,</span>&nbsp;<span class="string" id="3273717">&#39;[&#39;</span><span class="op" id="3273720">,</span>&nbsp;<span class="string" id="3273722">&#39;\\&#39;</span><span class="op" id="3273726">,</span>&nbsp;<span class="string" id="3273728">&#39;]&#39;</span><span class="op" id="3273731">,</span>&nbsp;<span class="string" id="3273733">&#39;`&#39;</span><span class="op" id="3273736">,</span>&nbsp;<span class="string" id="3273738">&#39;{&#39;</span><span class="op" id="3273741">,</span>&nbsp;<span class="string" id="3273743">&#39;}&#39;</span><span class="op" id="3273746">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273751">return</span>&nbsp;<span class="ident" id="3273758"><a href="/html/template/escape.go.html#3291940">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273775">case</span>&nbsp;<span class="string" id="3273780">&#39;-&#39;</span><span class="op" id="3273783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273788">//&nbsp;Disallow&nbsp;&lt;!--&nbsp;or&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3273816">//&nbsp;--&nbsp;should&nbsp;not&nbsp;appear&nbsp;in&nbsp;valid&nbsp;identifiers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273865">if</span>&nbsp;<span class="ident" id="3273868"><a href="/html/template/css.go.html#3273640">i</a></span>&nbsp;<span class="op" id="3273870">!=</span>&nbsp;<span class="num" id="3273873">0</span>&nbsp;<span class="op" id="3273875">&amp;&amp;</span>&nbsp;<span class="ident" id="3273878"><a href="/html/template/css.go.html#3272872">b</a></span><span class="op" id="3273879">[</span><span class="ident" id="3273880"><a href="/html/template/css.go.html#3273640">i</a></span><span class="op" id="3273881">-</span><span class="num" id="3273882">1</span><span class="op" id="3273883">]</span>&nbsp;<span class="op" id="3273885">==</span>&nbsp;<span class="string" id="3273888">&#39;-&#39;</span>&nbsp;<span class="op" id="3273892">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273898">return</span>&nbsp;<span class="ident" id="3273905"><a href="/html/template/escape.go.html#3291940">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3273923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273927">default</span><span class="op" id="3273934">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3273939">if</span>&nbsp;<span class="ident" id="3273942"><a href="/html/template/css.go.html#3273643">c</a></span>&nbsp;<span class="op" id="3273944">&lt;</span>&nbsp;<span class="num" id="3273946">0x80</span>&nbsp;<span class="op" id="3273951">&amp;&amp;</span>&nbsp;<span class="ident" id="3273954"><a href="/html/template/css.go.html#3268028">isCSSNmchar</a></span><span class="op" id="3273965">(</span><span class="builtintype" id="3273966">rune</span><span class="op" id="3273970">(</span><span class="ident" id="3273971"><a href="/html/template/css.go.html#3273643">c</a></span><span class="op" id="3273972">)</span><span class="op" id="3273973">)</span>&nbsp;<span class="op" id="3273975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3273981"><a href="/html/template/css.go.html#3272875">id</a></span>&nbsp;<span class="op" id="3273984">=</span>&nbsp;<span class="builtinfunc" id="3273986">append</span><span class="op" id="3273992">(</span><span class="ident" id="3273993"><a href="/html/template/css.go.html#3272875">id</a></span><span class="op" id="3273995">,</span>&nbsp;<span class="ident" id="3273997"><a href="/html/template/css.go.html#3273643">c</a></span><span class="op" id="3273998">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3274003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3274007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3274010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3274013"><a href="/html/template/css.go.html#3272875">id</a></span>&nbsp;<span class="op" id="3274016">=</span>&nbsp;<span class="ident" id="3274018"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3274023">.</span><span class="ident" id="3274024">ToLower</span><span class="op" id="3274031">(</span><span class="ident" id="3274032"><a href="/html/template/css.go.html#3272875">id</a></span><span class="op" id="3274034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3274037">if</span>&nbsp;<span class="ident" id="3274040"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3274045">.</span><span class="ident" id="3274046">Index</span><span class="op" id="3274051">(</span><span class="ident" id="3274052"><a href="/html/template/css.go.html#3272875">id</a></span><span class="op" id="3274054">,</span>&nbsp;<span class="ident" id="3274056"><a href="/html/template/css.go.html#3272357">expressionBytes</a></span><span class="op" id="3274071">)</span>&nbsp;<span class="op" id="3274073">!=</span>&nbsp;<span class="op" id="3274076">-</span><span class="num" id="3274077">1</span>&nbsp;<span class="op" id="3274079">||</span>&nbsp;<span class="ident" id="3274082"><a href="/html/template/css.go.html#3267210">bytes</a></span><span class="op" id="3274087">.</span><span class="ident" id="3274088">Index</span><span class="op" id="3274093">(</span><span class="ident" id="3274094"><a href="/html/template/css.go.html#3272875">id</a></span><span class="op" id="3274096">,</span>&nbsp;<span class="ident" id="3274098"><a href="/html/template/css.go.html#3272400">mozBindingBytes</a></span><span class="op" id="3274113">)</span>&nbsp;<span class="op" id="3274115">!=</span>&nbsp;<span class="op" id="3274118">-</span><span class="num" id="3274119">1</span>&nbsp;<span class="op" id="3274121">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3274125">return</span>&nbsp;<span class="ident" id="3274132"><a href="/html/template/escape.go.html#3291940">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3274148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3274151">return</span>&nbsp;<span class="builtintype" id="3274158">string</span><span class="op" id="3274164">(</span><span class="ident" id="3274165"><a href="/html/template/css.go.html#3272872">b</a></span><span class="op" id="3274166">)</span><br>
<span class="lineno"></span><span class="op" id="3274168">}</span>
</div>
</body>
</html>
