<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5833821">package</span>&nbsp;<span class="ident" id="5833829">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5833835">import</span>&nbsp;<span class="op" id="5833842">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5833845">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5833852">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5833874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5833877">//&nbsp;StmtLexer&nbsp;replaces&nbsp;end-lines&nbsp;with&nbsp;semicolons</span><br>
<span class="lineno">10</span><span class="keyword" id="5833925">type</span>&nbsp;<span class="ident" id="5833930">stmtLexer</span>&nbsp;<span class="keyword" id="5833940">struct</span>&nbsp;<span class="op" id="5833947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833950">x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5833961">*</span><span class="ident" id="5833962">lex8</span><span class="op" id="5833966">.</span><span class="ident" id="5833967">Lexer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833974">save</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5833985">*</span><span class="ident" id="5833986">lex8</span><span class="op" id="5833990">.</span><span class="ident" id="5833991">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833998">insertSemi</span>&nbsp;<span class="builtintype" id="5834009">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834016">ParseComment</span>&nbsp;<span class="builtintype" id="5834029">bool</span><br>
<span class="lineno"></span><span class="op" id="5834034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5834037">//&nbsp;NewStmtLexer&nbsp;creates&nbsp;a&nbsp;new&nbsp;statement&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="5834084">func</span>&nbsp;<span class="ident" id="5834089">newStmtLexer</span><span class="op" id="5834101">(</span><span class="ident" id="5834102">file</span>&nbsp;<span class="builtintype" id="5834107">string</span><span class="op" id="5834113">,</span>&nbsp;<span class="ident" id="5834115">r</span>&nbsp;<span class="ident" id="5834117">io</span><span class="op" id="5834119">.</span><span class="ident" id="5834120">ReadCloser</span><span class="op" id="5834130">)</span>&nbsp;<span class="op" id="5834132">*</span><span class="ident" id="5834133">stmtLexer</span>&nbsp;<span class="op" id="5834143">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834146">ret</span>&nbsp;<span class="op" id="5834150">:=</span>&nbsp;<span class="builtinfunc" id="5834153">new</span><span class="op" id="5834156">(</span><span class="ident" id="5834157">stmtLexer</span><span class="op" id="5834166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834169">ret</span><span class="op" id="5834172">.</span><span class="ident" id="5834173">x</span>&nbsp;<span class="op" id="5834175">=</span>&nbsp;<span class="ident" id="5834177">newLexer</span><span class="op" id="5834185">(</span><span class="ident" id="5834186">file</span><span class="op" id="5834190">,</span>&nbsp;<span class="ident" id="5834192">r</span><span class="op" id="5834193">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834197">return</span>&nbsp;<span class="ident" id="5834204">ret</span><br>
<span class="lineno"></span><span class="op" id="5834208">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5834211">//&nbsp;Token&nbsp;returns&nbsp;the&nbsp;next&nbsp;token&nbsp;of&nbsp;lexing</span><br>
<span class="lineno"></span><span class="keyword" id="5834253">func</span>&nbsp;<span class="op" id="5834258">(</span><span class="ident" id="5834259">sx</span>&nbsp;<span class="op" id="5834262">*</span><span class="ident" id="5834263">stmtLexer</span><span class="op" id="5834272">)</span>&nbsp;<span class="ident" id="5834274">Token</span><span class="op" id="5834279">(</span><span class="op" id="5834280">)</span>&nbsp;<span class="op" id="5834282">*</span><span class="ident" id="5834283">lex8</span><span class="op" id="5834287">.</span><span class="ident" id="5834288">Token</span>&nbsp;<span class="op" id="5834294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834297">if</span>&nbsp;<span class="ident" id="5834300">sx</span><span class="op" id="5834302">.</span><span class="ident" id="5834303">save</span>&nbsp;<span class="op" id="5834308">!=</span>&nbsp;<span class="ident" id="5834311">nil</span>&nbsp;<span class="op" id="5834315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834319">ret</span>&nbsp;<span class="op" id="5834323">:=</span>&nbsp;<span class="ident" id="5834326">sx</span><span class="op" id="5834328">.</span><span class="ident" id="5834329">save</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834336">sx</span><span class="op" id="5834338">.</span><span class="ident" id="5834339">save</span>&nbsp;<span class="op" id="5834344">=</span>&nbsp;<span class="ident" id="5834346">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834352">return</span>&nbsp;<span class="ident" id="5834359">ret</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834368">for</span>&nbsp;<span class="op" id="5834372">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834376">t</span>&nbsp;<span class="op" id="5834378">:=</span>&nbsp;<span class="ident" id="5834381">sx</span><span class="op" id="5834383">.</span><span class="ident" id="5834384">x</span><span class="op" id="5834385">.</span><span class="ident" id="5834386">Token</span><span class="op" id="5834391">(</span><span class="op" id="5834392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834396">switch</span>&nbsp;<span class="ident" id="5834403">t</span><span class="op" id="5834404">.</span><span class="ident" id="5834405">Type</span>&nbsp;<span class="op" id="5834410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834414">case</span>&nbsp;<span class="ident" id="5834419">Lbrace</span><span class="op" id="5834425">,</span>&nbsp;<span class="ident" id="5834427">Semi</span><span class="op" id="5834431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834436">sx</span><span class="op" id="5834438">.</span><span class="ident" id="5834439">insertSemi</span>&nbsp;<span class="op" id="5834450">=</span>&nbsp;<span class="ident" id="5834452">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834460">case</span>&nbsp;<span class="ident" id="5834465">lex8</span><span class="op" id="5834469">.</span><span class="ident" id="5834470">EOF</span><span class="op" id="5834473">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834478">if</span>&nbsp;<span class="ident" id="5834481">sx</span><span class="op" id="5834483">.</span><span class="ident" id="5834484">insertSemi</span>&nbsp;<span class="op" id="5834495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834501">sx</span><span class="op" id="5834503">.</span><span class="ident" id="5834504">insertSemi</span>&nbsp;<span class="op" id="5834515">=</span>&nbsp;<span class="ident" id="5834517">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834527">sx</span><span class="op" id="5834529">.</span><span class="ident" id="5834530">save</span>&nbsp;<span class="op" id="5834535">=</span>&nbsp;<span class="ident" id="5834537">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834543">return</span>&nbsp;<span class="op" id="5834550">&amp;</span><span class="ident" id="5834551">lex8</span><span class="op" id="5834555">.</span><span class="ident" id="5834556">Token</span><span class="op" id="5834561">{</span><span class="ident" id="5834562">Semi</span><span class="op" id="5834566">,</span>&nbsp;<span class="ident" id="5834568">t</span><span class="op" id="5834569">.</span><span class="ident" id="5834570">Lit</span><span class="op" id="5834573">,</span>&nbsp;<span class="ident" id="5834575">t</span><span class="op" id="5834576">.</span><span class="ident" id="5834577">Pos</span><span class="op" id="5834580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834585">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834589">case</span>&nbsp;<span class="ident" id="5834594">Rbrace</span><span class="op" id="5834600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834605">if</span>&nbsp;<span class="ident" id="5834608">sx</span><span class="op" id="5834610">.</span><span class="ident" id="5834611">insertSemi</span>&nbsp;<span class="op" id="5834622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834628">sx</span><span class="op" id="5834630">.</span><span class="ident" id="5834631">save</span>&nbsp;<span class="op" id="5834636">=</span>&nbsp;<span class="ident" id="5834638">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834644">return</span>&nbsp;<span class="op" id="5834651">&amp;</span><span class="ident" id="5834652">lex8</span><span class="op" id="5834656">.</span><span class="ident" id="5834657">Token</span><span class="op" id="5834662">{</span><span class="ident" id="5834663">Semi</span><span class="op" id="5834667">,</span>&nbsp;<span class="ident" id="5834669">t</span><span class="op" id="5834670">.</span><span class="ident" id="5834671">Lit</span><span class="op" id="5834674">,</span>&nbsp;<span class="ident" id="5834676">t</span><span class="op" id="5834677">.</span><span class="ident" id="5834678">Pos</span><span class="op" id="5834681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834686">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834691">sx</span><span class="op" id="5834693">.</span><span class="ident" id="5834694">insertSemi</span>&nbsp;<span class="op" id="5834705">=</span>&nbsp;<span class="ident" id="5834707">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834714">case</span>&nbsp;<span class="ident" id="5834719">Endl</span><span class="op" id="5834723">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834728">if</span>&nbsp;<span class="ident" id="5834731">sx</span><span class="op" id="5834733">.</span><span class="ident" id="5834734">insertSemi</span>&nbsp;<span class="op" id="5834745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834751">sx</span><span class="op" id="5834753">.</span><span class="ident" id="5834754">insertSemi</span>&nbsp;<span class="op" id="5834765">=</span>&nbsp;<span class="ident" id="5834767">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834777">return</span>&nbsp;<span class="op" id="5834784">&amp;</span><span class="ident" id="5834785">lex8</span><span class="op" id="5834789">.</span><span class="ident" id="5834790">Token</span><span class="op" id="5834795">{</span><span class="ident" id="5834796">Semi</span><span class="op" id="5834800">,</span>&nbsp;<span class="string" id="5834802">&#34;\n&#34;</span><span class="op" id="5834806">,</span>&nbsp;<span class="ident" id="5834808">t</span><span class="op" id="5834809">.</span><span class="ident" id="5834810">Pos</span><span class="op" id="5834813">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834823">continue</span>&nbsp;<span class="comment" id="5834832">//&nbsp;ignore&nbsp;this&nbsp;end&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834858">case</span>&nbsp;<span class="ident" id="5834863">Comment</span><span class="op" id="5834870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834875">if</span>&nbsp;<span class="op" id="5834878">!</span><span class="ident" id="5834879">sx</span><span class="op" id="5834881">.</span><span class="ident" id="5834882">ParseComment</span>&nbsp;<span class="op" id="5834895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834901">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834917">default</span><span class="op" id="5834924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834929">sx</span><span class="op" id="5834931">.</span><span class="ident" id="5834932">insertSemi</span>&nbsp;<span class="op" id="5834943">=</span>&nbsp;<span class="ident" id="5834945">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834957">return</span>&nbsp;<span class="ident" id="5834964">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834967">}</span><br>
<span class="lineno"></span><span class="op" id="5834969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5834972">//&nbsp;Errs&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;lexing&nbsp;errors.</span><br>
<span class="lineno">70</span><span class="keyword" id="5835015">func</span>&nbsp;<span class="op" id="5835020">(</span><span class="ident" id="5835021">sx</span>&nbsp;<span class="op" id="5835024">*</span><span class="ident" id="5835025">stmtLexer</span><span class="op" id="5835034">)</span>&nbsp;<span class="ident" id="5835036">Errs</span><span class="op" id="5835040">(</span><span class="op" id="5835041">)</span>&nbsp;<span class="op" id="5835043">[</span><span class="op" id="5835044">]</span><span class="op" id="5835045">*</span><span class="ident" id="5835046">lex8</span><span class="op" id="5835050">.</span><span class="ident" id="5835051">Error</span>&nbsp;<span class="op" id="5835057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835060">return</span>&nbsp;<span class="ident" id="5835067">sx</span><span class="op" id="5835069">.</span><span class="ident" id="5835070">x</span><span class="op" id="5835071">.</span><span class="ident" id="5835072">Errs</span><span class="op" id="5835076">(</span><span class="op" id="5835077">)</span><br>
<span class="lineno"></span><span class="op" id="5835079">}</span>
</div>
</body>
</html>
