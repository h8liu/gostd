<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8234721">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8234776">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8234830">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8234881">package</span>&nbsp;<span class="ident" id="8234889">mime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8234895">import</span>&nbsp;<span class="op" id="8234902">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8234905">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8234915">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8234918">var</span>&nbsp;<span class="ident" id="8234922">typeTests</span>&nbsp;<span class="op" id="8234932">=</span>&nbsp;<span class="ident" id="8234934"><a href="/mime/type_unix.go.html#3604453">initMimeForTests</a></span><span class="op" id="8234950">(</span><span class="op" id="8234951">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8234954">func</span>&nbsp;<span class="ident" id="8234959">TestTypeByExtension</span><span class="op" id="8234978">(</span><span class="ident" id="8234979">t</span>&nbsp;<span class="op" id="8234981">*</span><span class="ident" id="8234982"><a href="/mime/type_test.go.html#8234905">testing</a></span><span class="op" id="8234989">.</span><span class="ident" id="8234990">T</span><span class="op" id="8234991">)</span>&nbsp;<span class="op" id="8234993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234996">for</span>&nbsp;<span class="ident" id="8235000">ext</span><span class="op" id="8235003">,</span>&nbsp;<span class="ident" id="8235005">want</span>&nbsp;<span class="op" id="8235010">:=</span>&nbsp;<span class="keyword" id="8235013">range</span>&nbsp;<span class="ident" id="8235019"><a href="/mime/type_test.go.html#8234922">typeTests</a></span>&nbsp;<span class="op" id="8235029">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235033">val</span>&nbsp;<span class="op" id="8235037">:=</span>&nbsp;<span class="ident" id="8235040"><a href="/mime/type.go.html#3601933">TypeByExtension</a></span><span class="op" id="8235055">(</span><span class="ident" id="8235056"><a href="/mime/type_test.go.html#8235000">ext</a></span><span class="op" id="8235059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235063">if</span>&nbsp;<span class="ident" id="8235066"><a href="/mime/type_test.go.html#8235033">val</a></span>&nbsp;<span class="op" id="8235070">!=</span>&nbsp;<span class="ident" id="8235073"><a href="/mime/type_test.go.html#8235005">want</a></span>&nbsp;<span class="op" id="8235078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235083"><a href="/mime/type_test.go.html#8234979">t</a></span><span class="op" id="8235084">.</span><span class="ident" id="8235085">Errorf</span><span class="op" id="8235091">(</span><span class="string" id="8235092">&#34;TypeByExtension(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8235127">,</span>&nbsp;<span class="ident" id="8235129"><a href="/mime/type_test.go.html#8235000">ext</a></span><span class="op" id="8235132">,</span>&nbsp;<span class="ident" id="8235134"><a href="/mime/type_test.go.html#8235033">val</a></span><span class="op" id="8235137">,</span>&nbsp;<span class="ident" id="8235139"><a href="/mime/type_test.go.html#8235005">want</a></span><span class="op" id="8235143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235150">}</span><br>
<span class="lineno">20</span><span class="op" id="8235152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8235155">func</span>&nbsp;<span class="ident" id="8235160">TestTypeByExtensionCase</span><span class="op" id="8235183">(</span><span class="ident" id="8235184">t</span>&nbsp;<span class="op" id="8235186">*</span><span class="ident" id="8235187"><a href="/mime/type_test.go.html#8234905">testing</a></span><span class="op" id="8235194">.</span><span class="ident" id="8235195">T</span><span class="op" id="8235196">)</span>&nbsp;<span class="op" id="8235198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235201">const</span>&nbsp;<span class="ident" id="8235207">custom</span>&nbsp;<span class="op" id="8235214">=</span>&nbsp;<span class="string" id="8235216">&#34;test/test;&nbsp;charset=iso-8859-1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235249">const</span>&nbsp;<span class="ident" id="8235255">caps</span>&nbsp;<span class="op" id="8235260">=</span>&nbsp;<span class="string" id="8235262">&#34;test/test;&nbsp;WAS=ALLCAPS&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235288">if</span>&nbsp;<span class="ident" id="8235291">err</span>&nbsp;<span class="op" id="8235295">:=</span>&nbsp;<span class="ident" id="8235298"><a href="/mime/type.go.html#3602864">AddExtensionType</a></span><span class="op" id="8235314">(</span><span class="string" id="8235315">&#34;.TEST&#34;</span><span class="op" id="8235322">,</span>&nbsp;<span class="ident" id="8235324"><a href="/mime/type_test.go.html#8235255">caps</a></span><span class="op" id="8235328">)</span><span class="op" id="8235329">;</span>&nbsp;<span class="ident" id="8235331"><a href="/mime/type_test.go.html#8235291">err</a></span>&nbsp;<span class="op" id="8235335">!=</span>&nbsp;<span class="ident" id="8235338">nil</span>&nbsp;<span class="op" id="8235342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235346"><a href="/mime/type_test.go.html#8235184">t</a></span><span class="op" id="8235347">.</span><span class="ident" id="8235348">Fatalf</span><span class="op" id="8235354">(</span><span class="string" id="8235355">&#34;error&nbsp;%s&nbsp;for&nbsp;AddExtension(%s)&#34;</span><span class="op" id="8235386">,</span>&nbsp;<span class="ident" id="8235388"><a href="/mime/type_test.go.html#8235291">err</a></span><span class="op" id="8235391">,</span>&nbsp;<span class="ident" id="8235393"><a href="/mime/type_test.go.html#8235207">custom</a></span><span class="op" id="8235399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235405">if</span>&nbsp;<span class="ident" id="8235408">err</span>&nbsp;<span class="op" id="8235412">:=</span>&nbsp;<span class="ident" id="8235415"><a href="/mime/type.go.html#3602864">AddExtensionType</a></span><span class="op" id="8235431">(</span><span class="string" id="8235432">&#34;.tesT&#34;</span><span class="op" id="8235439">,</span>&nbsp;<span class="ident" id="8235441"><a href="/mime/type_test.go.html#8235207">custom</a></span><span class="op" id="8235447">)</span><span class="op" id="8235448">;</span>&nbsp;<span class="ident" id="8235450"><a href="/mime/type_test.go.html#8235408">err</a></span>&nbsp;<span class="op" id="8235454">!=</span>&nbsp;<span class="ident" id="8235457">nil</span>&nbsp;<span class="op" id="8235461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235465"><a href="/mime/type_test.go.html#8235184">t</a></span><span class="op" id="8235466">.</span><span class="ident" id="8235467">Fatalf</span><span class="op" id="8235473">(</span><span class="string" id="8235474">&#34;error&nbsp;%s&nbsp;for&nbsp;AddExtension(%s)&#34;</span><span class="op" id="8235505">,</span>&nbsp;<span class="ident" id="8235507"><a href="/mime/type_test.go.html#8235408">err</a></span><span class="op" id="8235510">,</span>&nbsp;<span class="ident" id="8235512"><a href="/mime/type_test.go.html#8235207">custom</a></span><span class="op" id="8235518">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8235525">//&nbsp;case-sensitive&nbsp;lookup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235551">if</span>&nbsp;<span class="ident" id="8235554">got</span>&nbsp;<span class="op" id="8235558">:=</span>&nbsp;<span class="ident" id="8235561"><a href="/mime/type.go.html#3601933">TypeByExtension</a></span><span class="op" id="8235576">(</span><span class="string" id="8235577">&#34;.tesT&#34;</span><span class="op" id="8235584">)</span><span class="op" id="8235585">;</span>&nbsp;<span class="ident" id="8235587"><a href="/mime/type_test.go.html#8235554">got</a></span>&nbsp;<span class="op" id="8235591">!=</span>&nbsp;<span class="ident" id="8235594"><a href="/mime/type_test.go.html#8235207">custom</a></span>&nbsp;<span class="op" id="8235601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235605"><a href="/mime/type_test.go.html#8235184">t</a></span><span class="op" id="8235606">.</span><span class="ident" id="8235607">Fatalf</span><span class="op" id="8235613">(</span><span class="string" id="8235614">&#34;for&nbsp;.tesT,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8235642">,</span>&nbsp;<span class="ident" id="8235644"><a href="/mime/type_test.go.html#8235554">got</a></span><span class="op" id="8235647">,</span>&nbsp;<span class="ident" id="8235649"><a href="/mime/type_test.go.html#8235207">custom</a></span><span class="op" id="8235655">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235661">if</span>&nbsp;<span class="ident" id="8235664">got</span>&nbsp;<span class="op" id="8235668">:=</span>&nbsp;<span class="ident" id="8235671"><a href="/mime/type.go.html#3601933">TypeByExtension</a></span><span class="op" id="8235686">(</span><span class="string" id="8235687">&#34;.TEST&#34;</span><span class="op" id="8235694">)</span><span class="op" id="8235695">;</span>&nbsp;<span class="ident" id="8235697"><a href="/mime/type_test.go.html#8235664">got</a></span>&nbsp;<span class="op" id="8235701">!=</span>&nbsp;<span class="ident" id="8235704"><a href="/mime/type_test.go.html#8235255">caps</a></span>&nbsp;<span class="op" id="8235709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235713"><a href="/mime/type_test.go.html#8235184">t</a></span><span class="op" id="8235714">.</span><span class="ident" id="8235715">Fatalf</span><span class="op" id="8235721">(</span><span class="string" id="8235722">&#34;for&nbsp;.TEST,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8235750">,</span>&nbsp;<span class="ident" id="8235752"><a href="/mime/type_test.go.html#8235664">got</a></span><span class="op" id="8235755">,</span>&nbsp;<span class="ident" id="8235757"><a href="/mime/type_test.go.html#8235255">caps</a></span><span class="op" id="8235761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8235768">//&nbsp;case-insensitive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235789">if</span>&nbsp;<span class="ident" id="8235792">got</span>&nbsp;<span class="op" id="8235796">:=</span>&nbsp;<span class="ident" id="8235799"><a href="/mime/type.go.html#3601933">TypeByExtension</a></span><span class="op" id="8235814">(</span><span class="string" id="8235815">&#34;.TesT&#34;</span><span class="op" id="8235822">)</span><span class="op" id="8235823">;</span>&nbsp;<span class="ident" id="8235825"><a href="/mime/type_test.go.html#8235792">got</a></span>&nbsp;<span class="op" id="8235829">!=</span>&nbsp;<span class="ident" id="8235832"><a href="/mime/type_test.go.html#8235207">custom</a></span>&nbsp;<span class="op" id="8235839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235843"><a href="/mime/type_test.go.html#8235184">t</a></span><span class="op" id="8235844">.</span><span class="ident" id="8235845">Fatalf</span><span class="op" id="8235851">(</span><span class="string" id="8235852">&#34;for&nbsp;.TesT,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8235880">,</span>&nbsp;<span class="ident" id="8235882"><a href="/mime/type_test.go.html#8235792">got</a></span><span class="op" id="8235885">,</span>&nbsp;<span class="ident" id="8235887"><a href="/mime/type_test.go.html#8235207">custom</a></span><span class="op" id="8235893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235896">}</span><br>
<span class="lineno"></span><span class="op" id="8235898">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8235901">func</span>&nbsp;<span class="ident" id="8235906">TestLookupMallocs</span><span class="op" id="8235923">(</span><span class="ident" id="8235924">t</span>&nbsp;<span class="op" id="8235926">*</span><span class="ident" id="8235927"><a href="/mime/type_test.go.html#8234905">testing</a></span><span class="op" id="8235934">.</span><span class="ident" id="8235935">T</span><span class="op" id="8235936">)</span>&nbsp;<span class="op" id="8235938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235941">n</span>&nbsp;<span class="op" id="8235943">:=</span>&nbsp;<span class="ident" id="8235946"><a href="/mime/type_test.go.html#8234905">testing</a></span><span class="op" id="8235953">.</span><span class="ident" id="8235954">AllocsPerRun</span><span class="op" id="8235966">(</span><span class="num" id="8235967">10000</span><span class="op" id="8235972">,</span>&nbsp;<span class="keyword" id="8235974">func</span><span class="op" id="8235978">(</span><span class="op" id="8235979">)</span>&nbsp;<span class="op" id="8235981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235985"><a href="/mime/type.go.html#3601933">TypeByExtension</a></span><span class="op" id="8236000">(</span><span class="string" id="8236001">&#34;.html&#34;</span><span class="op" id="8236008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8236012"><a href="/mime/type.go.html#3601933">TypeByExtension</a></span><span class="op" id="8236027">(</span><span class="string" id="8236028">&#34;.HtML&#34;</span><span class="op" id="8236035">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236038">}</span><span class="op" id="8236039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8236042">if</span>&nbsp;<span class="ident" id="8236045"><a href="/mime/type_test.go.html#8235941">n</a></span>&nbsp;<span class="op" id="8236047">&gt;</span>&nbsp;<span class="num" id="8236049">0</span>&nbsp;<span class="op" id="8236051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8236055"><a href="/mime/type_test.go.html#8235924">t</a></span><span class="op" id="8236056">.</span><span class="ident" id="8236057">Errorf</span><span class="op" id="8236063">(</span><span class="string" id="8236064">&#34;allocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;0&#34;</span><span class="op" id="8236085">,</span>&nbsp;<span class="ident" id="8236087"><a href="/mime/type_test.go.html#8235941">n</a></span><span class="op" id="8236088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236091">}</span><br>
<span class="lineno"></span><span class="op" id="8236093">}</span>
</div>
</body>
</html>
