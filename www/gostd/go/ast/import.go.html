<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5015059">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5015114">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5015168">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5015219">package</span>&nbsp;<span class="ident" id="5015227">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5015232">import</span>&nbsp;<span class="op" id="5015239">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5015242">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5015254">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5015262">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="5015272">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5015275">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="5015352">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="5015437">func</span>&nbsp;<span class="ident" id="5015442">SortImports</span><span class="op" id="5015453">(</span><span class="ident" id="5015454">fset</span>&nbsp;<span class="op" id="5015459">*</span><span class="ident" id="5015460">token</span><span class="op" id="5015465">.</span><span class="ident" id="5015466">FileSet</span><span class="op" id="5015473">,</span>&nbsp;<span class="ident" id="5015475">f</span>&nbsp;<span class="op" id="5015477">*</span><span class="ident" id="5015478">File</span><span class="op" id="5015482">)</span>&nbsp;<span class="op" id="5015484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015487">for</span>&nbsp;<span class="ident" id="5015491">_</span><span class="op" id="5015492">,</span>&nbsp;<span class="ident" id="5015494">d</span>&nbsp;<span class="op" id="5015496">:=</span>&nbsp;<span class="keyword" id="5015499">range</span>&nbsp;<span class="ident" id="5015505">f</span><span class="op" id="5015506">.</span><span class="ident" id="5015507">Decls</span>&nbsp;<span class="op" id="5015513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5015517">d</span><span class="op" id="5015518">,</span>&nbsp;<span class="ident" id="5015520">ok</span>&nbsp;<span class="op" id="5015523">:=</span>&nbsp;<span class="ident" id="5015526">d</span><span class="op" id="5015527">.</span><span class="op" id="5015528">(</span><span class="op" id="5015529">*</span><span class="ident" id="5015530">GenDecl</span><span class="op" id="5015537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015541">if</span>&nbsp;<span class="op" id="5015544">!</span><span class="ident" id="5015545">ok</span>&nbsp;<span class="op" id="5015548">||</span>&nbsp;<span class="ident" id="5015551">d</span><span class="op" id="5015552">.</span><span class="ident" id="5015553">Tok</span>&nbsp;<span class="op" id="5015557">!=</span>&nbsp;<span class="ident" id="5015560">token</span><span class="op" id="5015565">.</span><span class="ident" id="5015566">IMPORT</span>&nbsp;<span class="op" id="5015573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5015578">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5015626">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015658">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5015666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015671">if</span>&nbsp;<span class="op" id="5015674">!</span><span class="ident" id="5015675">d</span><span class="op" id="5015676">.</span><span class="ident" id="5015677">Lparen</span><span class="op" id="5015683">.</span><span class="ident" id="5015684">IsValid</span><span class="op" id="5015691">(</span><span class="op" id="5015692">)</span>&nbsp;<span class="op" id="5015694">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5015699">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015737">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5015748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5015753">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5015811">i</span>&nbsp;<span class="op" id="5015813">:=</span>&nbsp;<span class="num" id="5015816">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5015820">specs</span>&nbsp;<span class="op" id="5015826">:=</span>&nbsp;<span class="ident" id="5015829">d</span><span class="op" id="5015830">.</span><span class="ident" id="5015831">Specs</span><span class="op" id="5015836">[</span><span class="op" id="5015837">:</span><span class="num" id="5015838">0</span><span class="op" id="5015839">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015843">for</span>&nbsp;<span class="ident" id="5015847">j</span><span class="op" id="5015848">,</span>&nbsp;<span class="ident" id="5015850">s</span>&nbsp;<span class="op" id="5015852">:=</span>&nbsp;<span class="keyword" id="5015855">range</span>&nbsp;<span class="ident" id="5015861">d</span><span class="op" id="5015862">.</span><span class="ident" id="5015863">Specs</span>&nbsp;<span class="op" id="5015869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5015874">if</span>&nbsp;<span class="ident" id="5015877">j</span>&nbsp;<span class="op" id="5015879">&gt;</span>&nbsp;<span class="ident" id="5015881">i</span>&nbsp;<span class="op" id="5015883">&amp;&amp;</span>&nbsp;<span class="ident" id="5015886">fset</span><span class="op" id="5015890">.</span><span class="ident" id="5015891">Position</span><span class="op" id="5015899">(</span><span class="ident" id="5015900">s</span><span class="op" id="5015901">.</span><span class="ident" id="5015902">Pos</span><span class="op" id="5015905">(</span><span class="op" id="5015906">)</span><span class="op" id="5015907">)</span><span class="op" id="5015908">.</span><span class="ident" id="5015909">Line</span>&nbsp;<span class="op" id="5015914">&gt;</span>&nbsp;<span class="num" id="5015916">1</span><span class="op" id="5015917">+</span><span class="ident" id="5015918">fset</span><span class="op" id="5015922">.</span><span class="ident" id="5015923">Position</span><span class="op" id="5015931">(</span><span class="ident" id="5015932">d</span><span class="op" id="5015933">.</span><span class="ident" id="5015934">Specs</span><span class="op" id="5015939">[</span><span class="ident" id="5015940">j</span><span class="op" id="5015941">-</span><span class="num" id="5015942">1</span><span class="op" id="5015943">]</span><span class="op" id="5015944">.</span><span class="ident" id="5015945">End</span><span class="op" id="5015948">(</span><span class="op" id="5015949">)</span><span class="op" id="5015950">)</span><span class="op" id="5015951">.</span><span class="ident" id="5015952">Line</span>&nbsp;<span class="op" id="5015957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5015963">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016005">specs</span>&nbsp;<span class="op" id="5016011">=</span>&nbsp;<span class="builtinfunc" id="5016013">append</span><span class="op" id="5016019">(</span><span class="ident" id="5016020">specs</span><span class="op" id="5016025">,</span>&nbsp;<span class="ident" id="5016027">sortSpecs</span><span class="op" id="5016036">(</span><span class="ident" id="5016037">fset</span><span class="op" id="5016041">,</span>&nbsp;<span class="ident" id="5016043">f</span><span class="op" id="5016044">,</span>&nbsp;<span class="ident" id="5016046">d</span><span class="op" id="5016047">.</span><span class="ident" id="5016048">Specs</span><span class="op" id="5016053">[</span><span class="ident" id="5016054">i</span><span class="op" id="5016055">:</span><span class="ident" id="5016056">j</span><span class="op" id="5016057">]</span><span class="op" id="5016058">)</span><span class="op" id="5016059">...</span><span class="op" id="5016062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016068">i</span>&nbsp;<span class="op" id="5016070">=</span>&nbsp;<span class="ident" id="5016072">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016085">specs</span>&nbsp;<span class="op" id="5016091">=</span>&nbsp;<span class="builtinfunc" id="5016093">append</span><span class="op" id="5016099">(</span><span class="ident" id="5016100">specs</span><span class="op" id="5016105">,</span>&nbsp;<span class="ident" id="5016107">sortSpecs</span><span class="op" id="5016116">(</span><span class="ident" id="5016117">fset</span><span class="op" id="5016121">,</span>&nbsp;<span class="ident" id="5016123">f</span><span class="op" id="5016124">,</span>&nbsp;<span class="ident" id="5016126">d</span><span class="op" id="5016127">.</span><span class="ident" id="5016128">Specs</span><span class="op" id="5016133">[</span><span class="ident" id="5016134">i</span><span class="op" id="5016135">:</span><span class="op" id="5016136">]</span><span class="op" id="5016137">)</span><span class="op" id="5016138">...</span><span class="op" id="5016141">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016145">d</span><span class="op" id="5016146">.</span><span class="ident" id="5016147">Specs</span>&nbsp;<span class="op" id="5016153">=</span>&nbsp;<span class="ident" id="5016155">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5016164">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016235">if</span>&nbsp;<span class="builtinfunc" id="5016238">len</span><span class="op" id="5016241">(</span><span class="ident" id="5016242">d</span><span class="op" id="5016243">.</span><span class="ident" id="5016244">Specs</span><span class="op" id="5016249">)</span>&nbsp;<span class="op" id="5016251">&gt;</span>&nbsp;<span class="num" id="5016253">0</span>&nbsp;<span class="op" id="5016255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016260">lastSpec</span>&nbsp;<span class="op" id="5016269">:=</span>&nbsp;<span class="ident" id="5016272">d</span><span class="op" id="5016273">.</span><span class="ident" id="5016274">Specs</span><span class="op" id="5016279">[</span><span class="builtinfunc" id="5016280">len</span><span class="op" id="5016283">(</span><span class="ident" id="5016284">d</span><span class="op" id="5016285">.</span><span class="ident" id="5016286">Specs</span><span class="op" id="5016291">)</span><span class="op" id="5016292">-</span><span class="num" id="5016293">1</span><span class="op" id="5016294">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016299">lastLine</span>&nbsp;<span class="op" id="5016308">:=</span>&nbsp;<span class="ident" id="5016311">fset</span><span class="op" id="5016315">.</span><span class="ident" id="5016316">Position</span><span class="op" id="5016324">(</span><span class="ident" id="5016325">lastSpec</span><span class="op" id="5016333">.</span><span class="ident" id="5016334">Pos</span><span class="op" id="5016337">(</span><span class="op" id="5016338">)</span><span class="op" id="5016339">)</span><span class="op" id="5016340">.</span><span class="ident" id="5016341">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016349">if</span>&nbsp;<span class="ident" id="5016352">rParenLine</span>&nbsp;<span class="op" id="5016363">:=</span>&nbsp;<span class="ident" id="5016366">fset</span><span class="op" id="5016370">.</span><span class="ident" id="5016371">Position</span><span class="op" id="5016379">(</span><span class="ident" id="5016380">d</span><span class="op" id="5016381">.</span><span class="ident" id="5016382">Rparen</span><span class="op" id="5016388">)</span><span class="op" id="5016389">.</span><span class="ident" id="5016390">Line</span><span class="op" id="5016394">;</span>&nbsp;<span class="ident" id="5016396">rParenLine</span>&nbsp;<span class="op" id="5016407">&gt;</span>&nbsp;<span class="ident" id="5016409">lastLine</span><span class="op" id="5016417">+</span><span class="num" id="5016418">1</span>&nbsp;<span class="op" id="5016420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016426">fset</span><span class="op" id="5016430">.</span><span class="ident" id="5016431">File</span><span class="op" id="5016435">(</span><span class="ident" id="5016436">d</span><span class="op" id="5016437">.</span><span class="ident" id="5016438">Rparen</span><span class="op" id="5016444">)</span><span class="op" id="5016445">.</span><span class="ident" id="5016446">MergeLine</span><span class="op" id="5016455">(</span><span class="ident" id="5016456">rParenLine</span>&nbsp;<span class="op" id="5016467">-</span>&nbsp;<span class="num" id="5016469">1</span><span class="op" id="5016470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016479">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016482">}</span><br>
<span class="lineno"></span><span class="op" id="5016484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5016487">func</span>&nbsp;<span class="ident" id="5016492">importPath</span><span class="op" id="5016502">(</span><span class="ident" id="5016503">s</span>&nbsp;<span class="ident" id="5016505">Spec</span><span class="op" id="5016509">)</span>&nbsp;<span class="builtintype" id="5016511">string</span>&nbsp;<span class="op" id="5016518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016521">t</span><span class="op" id="5016522">,</span>&nbsp;<span class="ident" id="5016524">err</span>&nbsp;<span class="op" id="5016528">:=</span>&nbsp;<span class="ident" id="5016531">strconv</span><span class="op" id="5016538">.</span><span class="ident" id="5016539">Unquote</span><span class="op" id="5016546">(</span><span class="ident" id="5016547">s</span><span class="op" id="5016548">.</span><span class="op" id="5016549">(</span><span class="op" id="5016550">*</span><span class="ident" id="5016551">ImportSpec</span><span class="op" id="5016561">)</span><span class="op" id="5016562">.</span><span class="ident" id="5016563">Path</span><span class="op" id="5016567">.</span><span class="ident" id="5016568">Value</span><span class="op" id="5016573">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016576">if</span>&nbsp;<span class="ident" id="5016579">err</span>&nbsp;<span class="op" id="5016583">==</span>&nbsp;<span class="builtintype" id="5016586">nil</span>&nbsp;<span class="op" id="5016590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016594">return</span>&nbsp;<span class="ident" id="5016601">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016607">return</span>&nbsp;<span class="string" id="5016614">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="5016617">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="5016620">func</span>&nbsp;<span class="ident" id="5016625">importName</span><span class="op" id="5016635">(</span><span class="ident" id="5016636">s</span>&nbsp;<span class="ident" id="5016638">Spec</span><span class="op" id="5016642">)</span>&nbsp;<span class="builtintype" id="5016644">string</span>&nbsp;<span class="op" id="5016651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016654">n</span>&nbsp;<span class="op" id="5016656">:=</span>&nbsp;<span class="ident" id="5016659">s</span><span class="op" id="5016660">.</span><span class="op" id="5016661">(</span><span class="op" id="5016662">*</span><span class="ident" id="5016663">ImportSpec</span><span class="op" id="5016673">)</span><span class="op" id="5016674">.</span><span class="ident" id="5016675">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016681">if</span>&nbsp;<span class="ident" id="5016684">n</span>&nbsp;<span class="op" id="5016686">==</span>&nbsp;<span class="builtintype" id="5016689">nil</span>&nbsp;<span class="op" id="5016693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016697">return</span>&nbsp;<span class="string" id="5016704">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016711">return</span>&nbsp;<span class="ident" id="5016718">n</span><span class="op" id="5016719">.</span><span class="ident" id="5016720">Name</span><br>
<span class="lineno"></span><span class="op" id="5016725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5016728">func</span>&nbsp;<span class="ident" id="5016733">importComment</span><span class="op" id="5016746">(</span><span class="ident" id="5016747">s</span>&nbsp;<span class="ident" id="5016749">Spec</span><span class="op" id="5016753">)</span>&nbsp;<span class="builtintype" id="5016755">string</span>&nbsp;<span class="op" id="5016762">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5016765">c</span>&nbsp;<span class="op" id="5016767">:=</span>&nbsp;<span class="ident" id="5016770">s</span><span class="op" id="5016771">.</span><span class="op" id="5016772">(</span><span class="op" id="5016773">*</span><span class="ident" id="5016774">ImportSpec</span><span class="op" id="5016784">)</span><span class="op" id="5016785">.</span><span class="ident" id="5016786">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016795">if</span>&nbsp;<span class="ident" id="5016798">c</span>&nbsp;<span class="op" id="5016800">==</span>&nbsp;<span class="builtintype" id="5016803">nil</span>&nbsp;<span class="op" id="5016807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016811">return</span>&nbsp;<span class="string" id="5016818">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5016822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016825">return</span>&nbsp;<span class="ident" id="5016832">c</span><span class="op" id="5016833">.</span><span class="ident" id="5016834">Text</span><span class="op" id="5016838">(</span><span class="op" id="5016839">)</span><br>
<span class="lineno">75</span><span class="op" id="5016841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5016844">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="5016914">func</span>&nbsp;<span class="ident" id="5016919">collapse</span><span class="op" id="5016927">(</span><span class="ident" id="5016928">prev</span><span class="op" id="5016932">,</span>&nbsp;<span class="ident" id="5016934">next</span>&nbsp;<span class="ident" id="5016939">Spec</span><span class="op" id="5016943">)</span>&nbsp;<span class="builtintype" id="5016945">bool</span>&nbsp;<span class="op" id="5016950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5016953">if</span>&nbsp;<span class="ident" id="5016956">importPath</span><span class="op" id="5016966">(</span><span class="ident" id="5016967">next</span><span class="op" id="5016971">)</span>&nbsp;<span class="op" id="5016973">!=</span>&nbsp;<span class="ident" id="5016976">importPath</span><span class="op" id="5016986">(</span><span class="ident" id="5016987">prev</span><span class="op" id="5016991">)</span>&nbsp;<span class="op" id="5016993">||</span>&nbsp;<span class="ident" id="5016996">importName</span><span class="op" id="5017006">(</span><span class="ident" id="5017007">next</span><span class="op" id="5017011">)</span>&nbsp;<span class="op" id="5017013">!=</span>&nbsp;<span class="ident" id="5017016">importName</span><span class="op" id="5017026">(</span><span class="ident" id="5017027">prev</span><span class="op" id="5017031">)</span>&nbsp;<span class="op" id="5017033">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017037">return</span>&nbsp;<span class="builtintype" id="5017044">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017054">return</span>&nbsp;<span class="ident" id="5017061">prev</span><span class="op" id="5017065">.</span><span class="op" id="5017066">(</span><span class="op" id="5017067">*</span><span class="ident" id="5017068">ImportSpec</span><span class="op" id="5017078">)</span><span class="op" id="5017079">.</span><span class="ident" id="5017080">Comment</span>&nbsp;<span class="op" id="5017088">==</span>&nbsp;<span class="builtintype" id="5017091">nil</span><br>
<span class="lineno"></span><span class="op" id="5017095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="5017098">type</span>&nbsp;<span class="ident" id="5017103">posSpan</span>&nbsp;<span class="keyword" id="5017111">struct</span>&nbsp;<span class="op" id="5017118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017121">Start</span>&nbsp;<span class="ident" id="5017127">token</span><span class="op" id="5017132">.</span><span class="ident" id="5017133">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017138">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5017144">token</span><span class="op" id="5017149">.</span><span class="ident" id="5017150">Pos</span><br>
<span class="lineno"></span><span class="op" id="5017154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="5017157">func</span>&nbsp;<span class="ident" id="5017162">sortSpecs</span><span class="op" id="5017171">(</span><span class="ident" id="5017172">fset</span>&nbsp;<span class="op" id="5017177">*</span><span class="ident" id="5017178">token</span><span class="op" id="5017183">.</span><span class="ident" id="5017184">FileSet</span><span class="op" id="5017191">,</span>&nbsp;<span class="ident" id="5017193">f</span>&nbsp;<span class="op" id="5017195">*</span><span class="ident" id="5017196">File</span><span class="op" id="5017200">,</span>&nbsp;<span class="ident" id="5017202">specs</span>&nbsp;<span class="op" id="5017208">[</span><span class="op" id="5017209">]</span><span class="ident" id="5017210">Spec</span><span class="op" id="5017214">)</span>&nbsp;<span class="op" id="5017216">[</span><span class="op" id="5017217">]</span><span class="ident" id="5017218">Spec</span>&nbsp;<span class="op" id="5017223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017226">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017289">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017334">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017385">if</span>&nbsp;<span class="builtinfunc" id="5017388">len</span><span class="op" id="5017391">(</span><span class="ident" id="5017392">specs</span><span class="op" id="5017397">)</span>&nbsp;<span class="op" id="5017399">&lt;=</span>&nbsp;<span class="num" id="5017402">1</span>&nbsp;<span class="op" id="5017404">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017408">return</span>&nbsp;<span class="ident" id="5017415">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017426">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017458">pos</span>&nbsp;<span class="op" id="5017462">:=</span>&nbsp;<span class="builtinfunc" id="5017465">make</span><span class="op" id="5017469">(</span><span class="op" id="5017470">[</span><span class="op" id="5017471">]</span><span class="ident" id="5017472">posSpan</span><span class="op" id="5017479">,</span>&nbsp;<span class="builtinfunc" id="5017481">len</span><span class="op" id="5017484">(</span><span class="ident" id="5017485">specs</span><span class="op" id="5017490">)</span><span class="op" id="5017491">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017494">for</span>&nbsp;<span class="ident" id="5017498">i</span><span class="op" id="5017499">,</span>&nbsp;<span class="ident" id="5017501">s</span>&nbsp;<span class="op" id="5017503">:=</span>&nbsp;<span class="keyword" id="5017506">range</span>&nbsp;<span class="ident" id="5017512">specs</span>&nbsp;<span class="op" id="5017518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017522">pos</span><span class="op" id="5017525">[</span><span class="ident" id="5017526">i</span><span class="op" id="5017527">]</span>&nbsp;<span class="op" id="5017529">=</span>&nbsp;<span class="ident" id="5017531">posSpan</span><span class="op" id="5017538">{</span><span class="ident" id="5017539">s</span><span class="op" id="5017540">.</span><span class="ident" id="5017541">Pos</span><span class="op" id="5017544">(</span><span class="op" id="5017545">)</span><span class="op" id="5017546">,</span>&nbsp;<span class="ident" id="5017548">s</span><span class="op" id="5017549">.</span><span class="ident" id="5017550">End</span><span class="op" id="5017553">(</span><span class="op" id="5017554">)</span><span class="op" id="5017555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017562">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017599">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017659">lastLine</span>&nbsp;<span class="op" id="5017668">:=</span>&nbsp;<span class="ident" id="5017671">fset</span><span class="op" id="5017675">.</span><span class="ident" id="5017676">Position</span><span class="op" id="5017684">(</span><span class="ident" id="5017685">pos</span><span class="op" id="5017688">[</span><span class="builtinfunc" id="5017689">len</span><span class="op" id="5017692">(</span><span class="ident" id="5017693">pos</span><span class="op" id="5017696">)</span><span class="op" id="5017697">-</span><span class="num" id="5017698">1</span><span class="op" id="5017699">]</span><span class="op" id="5017700">.</span><span class="ident" id="5017701">End</span><span class="op" id="5017704">)</span><span class="op" id="5017705">.</span><span class="ident" id="5017706">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017712">cstart</span>&nbsp;<span class="op" id="5017719">:=</span>&nbsp;<span class="builtinfunc" id="5017722">len</span><span class="op" id="5017725">(</span><span class="ident" id="5017726">f</span><span class="op" id="5017727">.</span><span class="ident" id="5017728">Comments</span><span class="op" id="5017736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017739">cend</span>&nbsp;<span class="op" id="5017744">:=</span>&nbsp;<span class="builtinfunc" id="5017747">len</span><span class="op" id="5017750">(</span><span class="ident" id="5017751">f</span><span class="op" id="5017752">.</span><span class="ident" id="5017753">Comments</span><span class="op" id="5017761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017764">for</span>&nbsp;<span class="ident" id="5017768">i</span><span class="op" id="5017769">,</span>&nbsp;<span class="ident" id="5017771">g</span>&nbsp;<span class="op" id="5017773">:=</span>&nbsp;<span class="keyword" id="5017776">range</span>&nbsp;<span class="ident" id="5017782">f</span><span class="op" id="5017783">.</span><span class="ident" id="5017784">Comments</span>&nbsp;<span class="op" id="5017793">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017797">if</span>&nbsp;<span class="ident" id="5017800">g</span><span class="op" id="5017801">.</span><span class="ident" id="5017802">Pos</span><span class="op" id="5017805">(</span><span class="op" id="5017806">)</span>&nbsp;<span class="op" id="5017808">&lt;</span>&nbsp;<span class="ident" id="5017810">pos</span><span class="op" id="5017813">[</span><span class="num" id="5017814">0</span><span class="op" id="5017815">]</span><span class="op" id="5017816">.</span><span class="ident" id="5017817">Start</span>&nbsp;<span class="op" id="5017823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017828">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017843">if</span>&nbsp;<span class="ident" id="5017846">i</span>&nbsp;<span class="op" id="5017848">&lt;</span>&nbsp;<span class="ident" id="5017850">cstart</span>&nbsp;<span class="op" id="5017857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017862">cstart</span>&nbsp;<span class="op" id="5017869">=</span>&nbsp;<span class="ident" id="5017871">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017879">if</span>&nbsp;<span class="ident" id="5017882">fset</span><span class="op" id="5017886">.</span><span class="ident" id="5017887">Position</span><span class="op" id="5017895">(</span><span class="ident" id="5017896">g</span><span class="op" id="5017897">.</span><span class="ident" id="5017898">End</span><span class="op" id="5017901">(</span><span class="op" id="5017902">)</span><span class="op" id="5017903">)</span><span class="op" id="5017904">.</span><span class="ident" id="5017905">Line</span>&nbsp;<span class="op" id="5017910">&gt;</span>&nbsp;<span class="ident" id="5017912">lastLine</span>&nbsp;<span class="op" id="5017921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017926">cend</span>&nbsp;<span class="op" id="5017931">=</span>&nbsp;<span class="ident" id="5017933">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5017938">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017946">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5017949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5017952">comments</span>&nbsp;<span class="op" id="5017961">:=</span>&nbsp;<span class="ident" id="5017964">f</span><span class="op" id="5017965">.</span><span class="ident" id="5017966">Comments</span><span class="op" id="5017974">[</span><span class="ident" id="5017975">cstart</span><span class="op" id="5017981">:</span><span class="ident" id="5017982">cend</span><span class="op" id="5017986">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5017990">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018047">importComment</span>&nbsp;<span class="op" id="5018061">:=</span>&nbsp;<span class="keyword" id="5018064">map</span><span class="op" id="5018067">[</span><span class="op" id="5018068">*</span><span class="ident" id="5018069">ImportSpec</span><span class="op" id="5018079">]</span><span class="op" id="5018080">[</span><span class="op" id="5018081">]</span><span class="op" id="5018082">*</span><span class="ident" id="5018083">CommentGroup</span><span class="op" id="5018095">{</span><span class="op" id="5018096">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018099">specIndex</span>&nbsp;<span class="op" id="5018109">:=</span>&nbsp;<span class="num" id="5018112">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5018115">for</span>&nbsp;<span class="ident" id="5018119">_</span><span class="op" id="5018120">,</span>&nbsp;<span class="ident" id="5018122">g</span>&nbsp;<span class="op" id="5018124">:=</span>&nbsp;<span class="keyword" id="5018127">range</span>&nbsp;<span class="ident" id="5018133">comments</span>&nbsp;<span class="op" id="5018142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5018146">for</span>&nbsp;<span class="ident" id="5018150">specIndex</span><span class="op" id="5018159">+</span><span class="num" id="5018160">1</span>&nbsp;<span class="op" id="5018162">&lt;</span>&nbsp;<span class="builtinfunc" id="5018164">len</span><span class="op" id="5018167">(</span><span class="ident" id="5018168">specs</span><span class="op" id="5018173">)</span>&nbsp;<span class="op" id="5018175">&amp;&amp;</span>&nbsp;<span class="ident" id="5018178">pos</span><span class="op" id="5018181">[</span><span class="ident" id="5018182">specIndex</span><span class="op" id="5018191">+</span><span class="num" id="5018192">1</span><span class="op" id="5018193">]</span><span class="op" id="5018194">.</span><span class="ident" id="5018195">Start</span>&nbsp;<span class="op" id="5018201">&lt;=</span>&nbsp;<span class="ident" id="5018204">g</span><span class="op" id="5018205">.</span><span class="ident" id="5018206">Pos</span><span class="op" id="5018209">(</span><span class="op" id="5018210">)</span>&nbsp;<span class="op" id="5018212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018217">specIndex</span><span class="op" id="5018226">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5018231">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018235">s</span>&nbsp;<span class="op" id="5018237">:=</span>&nbsp;<span class="ident" id="5018240">specs</span><span class="op" id="5018245">[</span><span class="ident" id="5018246">specIndex</span><span class="op" id="5018255">]</span><span class="op" id="5018256">.</span><span class="op" id="5018257">(</span><span class="op" id="5018258">*</span><span class="ident" id="5018259">ImportSpec</span><span class="op" id="5018269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018273">importComment</span><span class="op" id="5018286">[</span><span class="ident" id="5018287">s</span><span class="op" id="5018288">]</span>&nbsp;<span class="op" id="5018290">=</span>&nbsp;<span class="builtinfunc" id="5018292">append</span><span class="op" id="5018298">(</span><span class="ident" id="5018299">importComment</span><span class="op" id="5018312">[</span><span class="ident" id="5018313">s</span><span class="op" id="5018314">]</span><span class="op" id="5018315">,</span>&nbsp;<span class="ident" id="5018317">g</span><span class="op" id="5018318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5018321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018325">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018367">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018423">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018489">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018544">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018583">sort</span><span class="op" id="5018587">.</span><span class="ident" id="5018588">Sort</span><span class="op" id="5018592">(</span><span class="ident" id="5018593">byImportSpec</span><span class="op" id="5018605">(</span><span class="ident" id="5018606">specs</span><span class="op" id="5018611">)</span><span class="op" id="5018612">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018616">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018671">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018702">deduped</span>&nbsp;<span class="op" id="5018710">:=</span>&nbsp;<span class="ident" id="5018713">specs</span><span class="op" id="5018718">[</span><span class="op" id="5018719">:</span><span class="num" id="5018720">0</span><span class="op" id="5018721">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5018724">for</span>&nbsp;<span class="ident" id="5018728">i</span><span class="op" id="5018729">,</span>&nbsp;<span class="ident" id="5018731">s</span>&nbsp;<span class="op" id="5018733">:=</span>&nbsp;<span class="keyword" id="5018736">range</span>&nbsp;<span class="ident" id="5018742">specs</span>&nbsp;<span class="op" id="5018748">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5018752">if</span>&nbsp;<span class="ident" id="5018755">i</span>&nbsp;<span class="op" id="5018757">==</span>&nbsp;<span class="builtinfunc" id="5018760">len</span><span class="op" id="5018763">(</span><span class="ident" id="5018764">specs</span><span class="op" id="5018769">)</span><span class="op" id="5018770">-</span><span class="num" id="5018771">1</span>&nbsp;<span class="op" id="5018773">||</span>&nbsp;<span class="op" id="5018776">!</span><span class="ident" id="5018777">collapse</span><span class="op" id="5018785">(</span><span class="ident" id="5018786">s</span><span class="op" id="5018787">,</span>&nbsp;<span class="ident" id="5018789">specs</span><span class="op" id="5018794">[</span><span class="ident" id="5018795">i</span><span class="op" id="5018796">+</span><span class="num" id="5018797">1</span><span class="op" id="5018798">]</span><span class="op" id="5018799">)</span>&nbsp;<span class="op" id="5018801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018806">deduped</span>&nbsp;<span class="op" id="5018814">=</span>&nbsp;<span class="builtinfunc" id="5018816">append</span><span class="op" id="5018822">(</span><span class="ident" id="5018823">deduped</span><span class="op" id="5018830">,</span>&nbsp;<span class="ident" id="5018832">s</span><span class="op" id="5018833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5018837">}</span>&nbsp;<span class="keyword" id="5018839">else</span>&nbsp;<span class="op" id="5018844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018849">p</span>&nbsp;<span class="op" id="5018851">:=</span>&nbsp;<span class="ident" id="5018854">s</span><span class="op" id="5018855">.</span><span class="ident" id="5018856">Pos</span><span class="op" id="5018859">(</span><span class="op" id="5018860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018865">fset</span><span class="op" id="5018869">.</span><span class="ident" id="5018870">File</span><span class="op" id="5018874">(</span><span class="ident" id="5018875">p</span><span class="op" id="5018876">)</span><span class="op" id="5018877">.</span><span class="ident" id="5018878">MergeLine</span><span class="op" id="5018887">(</span><span class="ident" id="5018888">fset</span><span class="op" id="5018892">.</span><span class="ident" id="5018893">Position</span><span class="op" id="5018901">(</span><span class="ident" id="5018902">p</span><span class="op" id="5018903">)</span><span class="op" id="5018904">.</span><span class="ident" id="5018905">Line</span><span class="op" id="5018909">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5018913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5018916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018919">specs</span>&nbsp;<span class="op" id="5018925">=</span>&nbsp;<span class="ident" id="5018927">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5018937">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5018966">for</span>&nbsp;<span class="ident" id="5018970">i</span><span class="op" id="5018971">,</span>&nbsp;<span class="ident" id="5018973">s</span>&nbsp;<span class="op" id="5018975">:=</span>&nbsp;<span class="keyword" id="5018978">range</span>&nbsp;<span class="ident" id="5018984">specs</span>&nbsp;<span class="op" id="5018990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5018994">s</span>&nbsp;<span class="op" id="5018996">:=</span>&nbsp;<span class="ident" id="5018999">s</span><span class="op" id="5019000">.</span><span class="op" id="5019001">(</span><span class="op" id="5019002">*</span><span class="ident" id="5019003">ImportSpec</span><span class="op" id="5019013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019017">if</span>&nbsp;<span class="ident" id="5019020">s</span><span class="op" id="5019021">.</span><span class="ident" id="5019022">Name</span>&nbsp;<span class="op" id="5019027">!=</span>&nbsp;<span class="builtintype" id="5019030">nil</span>&nbsp;<span class="op" id="5019034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019039">s</span><span class="op" id="5019040">.</span><span class="ident" id="5019041">Name</span><span class="op" id="5019045">.</span><span class="ident" id="5019046">NamePos</span>&nbsp;<span class="op" id="5019054">=</span>&nbsp;<span class="ident" id="5019056">pos</span><span class="op" id="5019059">[</span><span class="ident" id="5019060">i</span><span class="op" id="5019061">]</span><span class="op" id="5019062">.</span><span class="ident" id="5019063">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019071">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019075">s</span><span class="op" id="5019076">.</span><span class="ident" id="5019077">Path</span><span class="op" id="5019081">.</span><span class="ident" id="5019082">ValuePos</span>&nbsp;<span class="op" id="5019091">=</span>&nbsp;<span class="ident" id="5019093">pos</span><span class="op" id="5019096">[</span><span class="ident" id="5019097">i</span><span class="op" id="5019098">]</span><span class="op" id="5019099">.</span><span class="ident" id="5019100">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019108">s</span><span class="op" id="5019109">.</span><span class="ident" id="5019110">EndPos</span>&nbsp;<span class="op" id="5019117">=</span>&nbsp;<span class="ident" id="5019119">pos</span><span class="op" id="5019122">[</span><span class="ident" id="5019123">i</span><span class="op" id="5019124">]</span><span class="op" id="5019125">.</span><span class="ident" id="5019126">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019132">for</span>&nbsp;<span class="ident" id="5019136">_</span><span class="op" id="5019137">,</span>&nbsp;<span class="ident" id="5019139">g</span>&nbsp;<span class="op" id="5019141">:=</span>&nbsp;<span class="keyword" id="5019144">range</span>&nbsp;<span class="ident" id="5019150">importComment</span><span class="op" id="5019163">[</span><span class="ident" id="5019164">s</span><span class="op" id="5019165">]</span>&nbsp;<span class="op" id="5019167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019172">for</span>&nbsp;<span class="ident" id="5019176">_</span><span class="op" id="5019177">,</span>&nbsp;<span class="ident" id="5019179">c</span>&nbsp;<span class="op" id="5019181">:=</span>&nbsp;<span class="keyword" id="5019184">range</span>&nbsp;<span class="ident" id="5019190">g</span><span class="op" id="5019191">.</span><span class="ident" id="5019192">List</span>&nbsp;<span class="op" id="5019197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019203">c</span><span class="op" id="5019204">.</span><span class="ident" id="5019205">Slash</span>&nbsp;<span class="op" id="5019211">=</span>&nbsp;<span class="ident" id="5019213">pos</span><span class="op" id="5019216">[</span><span class="ident" id="5019217">i</span><span class="op" id="5019218">]</span><span class="op" id="5019219">.</span><span class="ident" id="5019220">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019238">sort</span><span class="op" id="5019242">.</span><span class="ident" id="5019243">Sort</span><span class="op" id="5019247">(</span><span class="ident" id="5019248">byCommentPos</span><span class="op" id="5019260">(</span><span class="ident" id="5019261">comments</span><span class="op" id="5019269">)</span><span class="op" id="5019270">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019274">return</span>&nbsp;<span class="ident" id="5019281">specs</span><br>
<span class="lineno"></span><span class="op" id="5019287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5019290">type</span>&nbsp;<span class="ident" id="5019295">byImportSpec</span>&nbsp;<span class="op" id="5019308">[</span><span class="op" id="5019309">]</span><span class="ident" id="5019310">Spec</span>&nbsp;<span class="comment" id="5019315">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="5019340">func</span>&nbsp;<span class="op" id="5019345">(</span><span class="ident" id="5019346">x</span>&nbsp;<span class="ident" id="5019348">byImportSpec</span><span class="op" id="5019360">)</span>&nbsp;<span class="ident" id="5019362">Len</span><span class="op" id="5019365">(</span><span class="op" id="5019366">)</span>&nbsp;<span class="builtintype" id="5019368">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019377">{</span>&nbsp;<span class="keyword" id="5019379">return</span>&nbsp;<span class="builtinfunc" id="5019386">len</span><span class="op" id="5019389">(</span><span class="ident" id="5019390">x</span><span class="op" id="5019391">)</span>&nbsp;<span class="op" id="5019393">}</span><br>
<span class="lineno"></span><span class="keyword" id="5019395">func</span>&nbsp;<span class="op" id="5019400">(</span><span class="ident" id="5019401">x</span>&nbsp;<span class="ident" id="5019403">byImportSpec</span><span class="op" id="5019415">)</span>&nbsp;<span class="ident" id="5019417">Swap</span><span class="op" id="5019421">(</span><span class="ident" id="5019422">i</span><span class="op" id="5019423">,</span>&nbsp;<span class="ident" id="5019425">j</span>&nbsp;<span class="builtintype" id="5019427">int</span><span class="op" id="5019430">)</span>&nbsp;<span class="op" id="5019432">{</span>&nbsp;<span class="ident" id="5019434">x</span><span class="op" id="5019435">[</span><span class="ident" id="5019436">i</span><span class="op" id="5019437">]</span><span class="op" id="5019438">,</span>&nbsp;<span class="ident" id="5019440">x</span><span class="op" id="5019441">[</span><span class="ident" id="5019442">j</span><span class="op" id="5019443">]</span>&nbsp;<span class="op" id="5019445">=</span>&nbsp;<span class="ident" id="5019447">x</span><span class="op" id="5019448">[</span><span class="ident" id="5019449">j</span><span class="op" id="5019450">]</span><span class="op" id="5019451">,</span>&nbsp;<span class="ident" id="5019453">x</span><span class="op" id="5019454">[</span><span class="ident" id="5019455">i</span><span class="op" id="5019456">]</span>&nbsp;<span class="op" id="5019458">}</span><br>
<span class="lineno"></span><span class="keyword" id="5019460">func</span>&nbsp;<span class="op" id="5019465">(</span><span class="ident" id="5019466">x</span>&nbsp;<span class="ident" id="5019468">byImportSpec</span><span class="op" id="5019480">)</span>&nbsp;<span class="ident" id="5019482">Less</span><span class="op" id="5019486">(</span><span class="ident" id="5019487">i</span><span class="op" id="5019488">,</span>&nbsp;<span class="ident" id="5019490">j</span>&nbsp;<span class="builtintype" id="5019492">int</span><span class="op" id="5019495">)</span>&nbsp;<span class="builtintype" id="5019497">bool</span>&nbsp;<span class="op" id="5019502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019505">ipath</span>&nbsp;<span class="op" id="5019511">:=</span>&nbsp;<span class="ident" id="5019514">importPath</span><span class="op" id="5019524">(</span><span class="ident" id="5019525">x</span><span class="op" id="5019526">[</span><span class="ident" id="5019527">i</span><span class="op" id="5019528">]</span><span class="op" id="5019529">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019532">jpath</span>&nbsp;<span class="op" id="5019538">:=</span>&nbsp;<span class="ident" id="5019541">importPath</span><span class="op" id="5019551">(</span><span class="ident" id="5019552">x</span><span class="op" id="5019553">[</span><span class="ident" id="5019554">j</span><span class="op" id="5019555">]</span><span class="op" id="5019556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019559">if</span>&nbsp;<span class="ident" id="5019562">ipath</span>&nbsp;<span class="op" id="5019568">!=</span>&nbsp;<span class="ident" id="5019571">jpath</span>&nbsp;<span class="op" id="5019577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019581">return</span>&nbsp;<span class="ident" id="5019588">ipath</span>&nbsp;<span class="op" id="5019594">&lt;</span>&nbsp;<span class="ident" id="5019596">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019606">iname</span>&nbsp;<span class="op" id="5019612">:=</span>&nbsp;<span class="ident" id="5019615">importName</span><span class="op" id="5019625">(</span><span class="ident" id="5019626">x</span><span class="op" id="5019627">[</span><span class="ident" id="5019628">i</span><span class="op" id="5019629">]</span><span class="op" id="5019630">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5019633">jname</span>&nbsp;<span class="op" id="5019639">:=</span>&nbsp;<span class="ident" id="5019642">importName</span><span class="op" id="5019652">(</span><span class="ident" id="5019653">x</span><span class="op" id="5019654">[</span><span class="ident" id="5019655">j</span><span class="op" id="5019656">]</span><span class="op" id="5019657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019660">if</span>&nbsp;<span class="ident" id="5019663">iname</span>&nbsp;<span class="op" id="5019669">!=</span>&nbsp;<span class="ident" id="5019672">jname</span>&nbsp;<span class="op" id="5019678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019682">return</span>&nbsp;<span class="ident" id="5019689">iname</span>&nbsp;<span class="op" id="5019695">&lt;</span>&nbsp;<span class="ident" id="5019697">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5019707">return</span>&nbsp;<span class="ident" id="5019714">importComment</span><span class="op" id="5019727">(</span><span class="ident" id="5019728">x</span><span class="op" id="5019729">[</span><span class="ident" id="5019730">i</span><span class="op" id="5019731">]</span><span class="op" id="5019732">)</span>&nbsp;<span class="op" id="5019734">&lt;</span>&nbsp;<span class="ident" id="5019736">importComment</span><span class="op" id="5019749">(</span><span class="ident" id="5019750">x</span><span class="op" id="5019751">[</span><span class="ident" id="5019752">j</span><span class="op" id="5019753">]</span><span class="op" id="5019754">)</span><br>
<span class="lineno">190</span><span class="op" id="5019756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5019759">type</span>&nbsp;<span class="ident" id="5019764">byCommentPos</span>&nbsp;<span class="op" id="5019777">[</span><span class="op" id="5019778">]</span><span class="op" id="5019779">*</span><span class="ident" id="5019780">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5019794">func</span>&nbsp;<span class="op" id="5019799">(</span><span class="ident" id="5019800">x</span>&nbsp;<span class="ident" id="5019802">byCommentPos</span><span class="op" id="5019814">)</span>&nbsp;<span class="ident" id="5019816">Len</span><span class="op" id="5019819">(</span><span class="op" id="5019820">)</span>&nbsp;<span class="builtintype" id="5019822">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019836">{</span>&nbsp;<span class="keyword" id="5019838">return</span>&nbsp;<span class="builtinfunc" id="5019845">len</span><span class="op" id="5019848">(</span><span class="ident" id="5019849">x</span><span class="op" id="5019850">)</span>&nbsp;<span class="op" id="5019852">}</span><br>
<span class="lineno">195</span><span class="keyword" id="5019854">func</span>&nbsp;<span class="op" id="5019859">(</span><span class="ident" id="5019860">x</span>&nbsp;<span class="ident" id="5019862">byCommentPos</span><span class="op" id="5019874">)</span>&nbsp;<span class="ident" id="5019876">Swap</span><span class="op" id="5019880">(</span><span class="ident" id="5019881">i</span><span class="op" id="5019882">,</span>&nbsp;<span class="ident" id="5019884">j</span>&nbsp;<span class="builtintype" id="5019886">int</span><span class="op" id="5019889">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5019896">{</span>&nbsp;<span class="ident" id="5019898">x</span><span class="op" id="5019899">[</span><span class="ident" id="5019900">i</span><span class="op" id="5019901">]</span><span class="op" id="5019902">,</span>&nbsp;<span class="ident" id="5019904">x</span><span class="op" id="5019905">[</span><span class="ident" id="5019906">j</span><span class="op" id="5019907">]</span>&nbsp;<span class="op" id="5019909">=</span>&nbsp;<span class="ident" id="5019911">x</span><span class="op" id="5019912">[</span><span class="ident" id="5019913">j</span><span class="op" id="5019914">]</span><span class="op" id="5019915">,</span>&nbsp;<span class="ident" id="5019917">x</span><span class="op" id="5019918">[</span><span class="ident" id="5019919">i</span><span class="op" id="5019920">]</span>&nbsp;<span class="op" id="5019922">}</span><br>
<span class="lineno"></span><span class="keyword" id="5019924">func</span>&nbsp;<span class="op" id="5019929">(</span><span class="ident" id="5019930">x</span>&nbsp;<span class="ident" id="5019932">byCommentPos</span><span class="op" id="5019944">)</span>&nbsp;<span class="ident" id="5019946">Less</span><span class="op" id="5019950">(</span><span class="ident" id="5019951">i</span><span class="op" id="5019952">,</span>&nbsp;<span class="ident" id="5019954">j</span>&nbsp;<span class="builtintype" id="5019956">int</span><span class="op" id="5019959">)</span>&nbsp;<span class="builtintype" id="5019961">bool</span>&nbsp;<span class="op" id="5019966">{</span>&nbsp;<span class="keyword" id="5019968">return</span>&nbsp;<span class="ident" id="5019975">x</span><span class="op" id="5019976">[</span><span class="ident" id="5019977">i</span><span class="op" id="5019978">]</span><span class="op" id="5019979">.</span><span class="ident" id="5019980">Pos</span><span class="op" id="5019983">(</span><span class="op" id="5019984">)</span>&nbsp;<span class="op" id="5019986">&lt;</span>&nbsp;<span class="ident" id="5019988">x</span><span class="op" id="5019989">[</span><span class="ident" id="5019990">j</span><span class="op" id="5019991">]</span><span class="op" id="5019992">.</span><span class="ident" id="5019993">Pos</span><span class="op" id="5019996">(</span><span class="op" id="5019997">)</span>&nbsp;<span class="op" id="5019999">}</span>
</div>
</body>
</html>
