<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5323356">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5323411">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5323465">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5323516">package</span>&nbsp;<span class="ident" id="5323524">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5323529">import</span>&nbsp;<span class="op" id="5323536">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5323539">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5323551">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5323559">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="5323569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5323572">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="5323649">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="5323734">func</span>&nbsp;<span class="ident" id="5323739">SortImports</span><span class="op" id="5323750">(</span><span class="ident" id="5323751">fset</span>&nbsp;<span class="op" id="5323756">*</span><span class="ident" id="5323757">token</span><span class="op" id="5323762">.</span><span class="ident" id="5323763">FileSet</span><span class="op" id="5323770">,</span>&nbsp;<span class="ident" id="5323772">f</span>&nbsp;<span class="op" id="5323774">*</span><span class="ident" id="5323775">File</span><span class="op" id="5323779">)</span>&nbsp;<span class="op" id="5323781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5323784">for</span>&nbsp;<span class="ident" id="5323788">_</span><span class="op" id="5323789">,</span>&nbsp;<span class="ident" id="5323791">d</span>&nbsp;<span class="op" id="5323793">:=</span>&nbsp;<span class="keyword" id="5323796">range</span>&nbsp;<span class="ident" id="5323802">f</span><span class="op" id="5323803">.</span><span class="ident" id="5323804">Decls</span>&nbsp;<span class="op" id="5323810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323814">d</span><span class="op" id="5323815">,</span>&nbsp;<span class="ident" id="5323817">ok</span>&nbsp;<span class="op" id="5323820">:=</span>&nbsp;<span class="ident" id="5323823">d</span><span class="op" id="5323824">.</span><span class="op" id="5323825">(</span><span class="op" id="5323826">*</span><span class="ident" id="5323827">GenDecl</span><span class="op" id="5323834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5323838">if</span>&nbsp;<span class="op" id="5323841">!</span><span class="ident" id="5323842">ok</span>&nbsp;<span class="op" id="5323845">||</span>&nbsp;<span class="ident" id="5323848">d</span><span class="op" id="5323849">.</span><span class="ident" id="5323850">Tok</span>&nbsp;<span class="op" id="5323854">!=</span>&nbsp;<span class="ident" id="5323857">token</span><span class="op" id="5323862">.</span><span class="ident" id="5323863">IMPORT</span>&nbsp;<span class="op" id="5323870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323875">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323923">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5323955">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5323963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5323968">if</span>&nbsp;<span class="op" id="5323971">!</span><span class="ident" id="5323972">d</span><span class="op" id="5323973">.</span><span class="ident" id="5323974">Lparen</span><span class="op" id="5323980">.</span><span class="ident" id="5323981">IsValid</span><span class="op" id="5323988">(</span><span class="op" id="5323989">)</span>&nbsp;<span class="op" id="5323991">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323996">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324034">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5324050">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324108">i</span>&nbsp;<span class="op" id="5324110">:=</span>&nbsp;<span class="num" id="5324113">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324117">specs</span>&nbsp;<span class="op" id="5324123">:=</span>&nbsp;<span class="ident" id="5324126">d</span><span class="op" id="5324127">.</span><span class="ident" id="5324128">Specs</span><span class="op" id="5324133">[</span><span class="op" id="5324134">:</span><span class="num" id="5324135">0</span><span class="op" id="5324136">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324140">for</span>&nbsp;<span class="ident" id="5324144">j</span><span class="op" id="5324145">,</span>&nbsp;<span class="ident" id="5324147">s</span>&nbsp;<span class="op" id="5324149">:=</span>&nbsp;<span class="keyword" id="5324152">range</span>&nbsp;<span class="ident" id="5324158">d</span><span class="op" id="5324159">.</span><span class="ident" id="5324160">Specs</span>&nbsp;<span class="op" id="5324166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324171">if</span>&nbsp;<span class="ident" id="5324174">j</span>&nbsp;<span class="op" id="5324176">&gt;</span>&nbsp;<span class="ident" id="5324178">i</span>&nbsp;<span class="op" id="5324180">&amp;&amp;</span>&nbsp;<span class="ident" id="5324183">fset</span><span class="op" id="5324187">.</span><span class="ident" id="5324188">Position</span><span class="op" id="5324196">(</span><span class="ident" id="5324197">s</span><span class="op" id="5324198">.</span><span class="ident" id="5324199">Pos</span><span class="op" id="5324202">(</span><span class="op" id="5324203">)</span><span class="op" id="5324204">)</span><span class="op" id="5324205">.</span><span class="ident" id="5324206">Line</span>&nbsp;<span class="op" id="5324211">&gt;</span>&nbsp;<span class="num" id="5324213">1</span><span class="op" id="5324214">+</span><span class="ident" id="5324215">fset</span><span class="op" id="5324219">.</span><span class="ident" id="5324220">Position</span><span class="op" id="5324228">(</span><span class="ident" id="5324229">d</span><span class="op" id="5324230">.</span><span class="ident" id="5324231">Specs</span><span class="op" id="5324236">[</span><span class="ident" id="5324237">j</span><span class="op" id="5324238">-</span><span class="num" id="5324239">1</span><span class="op" id="5324240">]</span><span class="op" id="5324241">.</span><span class="ident" id="5324242">End</span><span class="op" id="5324245">(</span><span class="op" id="5324246">)</span><span class="op" id="5324247">)</span><span class="op" id="5324248">.</span><span class="ident" id="5324249">Line</span>&nbsp;<span class="op" id="5324254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5324260">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324302">specs</span>&nbsp;<span class="op" id="5324308">=</span>&nbsp;<span class="builtinfunc" id="5324310">append</span><span class="op" id="5324316">(</span><span class="ident" id="5324317">specs</span><span class="op" id="5324322">,</span>&nbsp;<span class="ident" id="5324324">sortSpecs</span><span class="op" id="5324333">(</span><span class="ident" id="5324334">fset</span><span class="op" id="5324338">,</span>&nbsp;<span class="ident" id="5324340">f</span><span class="op" id="5324341">,</span>&nbsp;<span class="ident" id="5324343">d</span><span class="op" id="5324344">.</span><span class="ident" id="5324345">Specs</span><span class="op" id="5324350">[</span><span class="ident" id="5324351">i</span><span class="op" id="5324352">:</span><span class="ident" id="5324353">j</span><span class="op" id="5324354">]</span><span class="op" id="5324355">)</span><span class="op" id="5324356">...</span><span class="op" id="5324359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324365">i</span>&nbsp;<span class="op" id="5324367">=</span>&nbsp;<span class="ident" id="5324369">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324382">specs</span>&nbsp;<span class="op" id="5324388">=</span>&nbsp;<span class="builtinfunc" id="5324390">append</span><span class="op" id="5324396">(</span><span class="ident" id="5324397">specs</span><span class="op" id="5324402">,</span>&nbsp;<span class="ident" id="5324404">sortSpecs</span><span class="op" id="5324413">(</span><span class="ident" id="5324414">fset</span><span class="op" id="5324418">,</span>&nbsp;<span class="ident" id="5324420">f</span><span class="op" id="5324421">,</span>&nbsp;<span class="ident" id="5324423">d</span><span class="op" id="5324424">.</span><span class="ident" id="5324425">Specs</span><span class="op" id="5324430">[</span><span class="ident" id="5324431">i</span><span class="op" id="5324432">:</span><span class="op" id="5324433">]</span><span class="op" id="5324434">)</span><span class="op" id="5324435">...</span><span class="op" id="5324438">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324442">d</span><span class="op" id="5324443">.</span><span class="ident" id="5324444">Specs</span>&nbsp;<span class="op" id="5324450">=</span>&nbsp;<span class="ident" id="5324452">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5324461">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324532">if</span>&nbsp;<span class="builtinfunc" id="5324535">len</span><span class="op" id="5324538">(</span><span class="ident" id="5324539">d</span><span class="op" id="5324540">.</span><span class="ident" id="5324541">Specs</span><span class="op" id="5324546">)</span>&nbsp;<span class="op" id="5324548">&gt;</span>&nbsp;<span class="num" id="5324550">0</span>&nbsp;<span class="op" id="5324552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324557">lastSpec</span>&nbsp;<span class="op" id="5324566">:=</span>&nbsp;<span class="ident" id="5324569">d</span><span class="op" id="5324570">.</span><span class="ident" id="5324571">Specs</span><span class="op" id="5324576">[</span><span class="builtinfunc" id="5324577">len</span><span class="op" id="5324580">(</span><span class="ident" id="5324581">d</span><span class="op" id="5324582">.</span><span class="ident" id="5324583">Specs</span><span class="op" id="5324588">)</span><span class="op" id="5324589">-</span><span class="num" id="5324590">1</span><span class="op" id="5324591">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324596">lastLine</span>&nbsp;<span class="op" id="5324605">:=</span>&nbsp;<span class="ident" id="5324608">fset</span><span class="op" id="5324612">.</span><span class="ident" id="5324613">Position</span><span class="op" id="5324621">(</span><span class="ident" id="5324622">lastSpec</span><span class="op" id="5324630">.</span><span class="ident" id="5324631">Pos</span><span class="op" id="5324634">(</span><span class="op" id="5324635">)</span><span class="op" id="5324636">)</span><span class="op" id="5324637">.</span><span class="ident" id="5324638">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324646">if</span>&nbsp;<span class="ident" id="5324649">rParenLine</span>&nbsp;<span class="op" id="5324660">:=</span>&nbsp;<span class="ident" id="5324663">fset</span><span class="op" id="5324667">.</span><span class="ident" id="5324668">Position</span><span class="op" id="5324676">(</span><span class="ident" id="5324677">d</span><span class="op" id="5324678">.</span><span class="ident" id="5324679">Rparen</span><span class="op" id="5324685">)</span><span class="op" id="5324686">.</span><span class="ident" id="5324687">Line</span><span class="op" id="5324691">;</span>&nbsp;<span class="ident" id="5324693">rParenLine</span>&nbsp;<span class="op" id="5324704">&gt;</span>&nbsp;<span class="ident" id="5324706">lastLine</span><span class="op" id="5324714">+</span><span class="num" id="5324715">1</span>&nbsp;<span class="op" id="5324717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324723">fset</span><span class="op" id="5324727">.</span><span class="ident" id="5324728">File</span><span class="op" id="5324732">(</span><span class="ident" id="5324733">d</span><span class="op" id="5324734">.</span><span class="ident" id="5324735">Rparen</span><span class="op" id="5324741">)</span><span class="op" id="5324742">.</span><span class="ident" id="5324743">MergeLine</span><span class="op" id="5324752">(</span><span class="ident" id="5324753">rParenLine</span>&nbsp;<span class="op" id="5324764">-</span>&nbsp;<span class="num" id="5324766">1</span><span class="op" id="5324767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324776">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324779">}</span><br>
<span class="lineno"></span><span class="op" id="5324781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5324784">func</span>&nbsp;<span class="ident" id="5324789">importPath</span><span class="op" id="5324799">(</span><span class="ident" id="5324800">s</span>&nbsp;<span class="ident" id="5324802">Spec</span><span class="op" id="5324806">)</span>&nbsp;<span class="builtintype" id="5324808">string</span>&nbsp;<span class="op" id="5324815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324818">t</span><span class="op" id="5324819">,</span>&nbsp;<span class="ident" id="5324821">err</span>&nbsp;<span class="op" id="5324825">:=</span>&nbsp;<span class="ident" id="5324828">strconv</span><span class="op" id="5324835">.</span><span class="ident" id="5324836">Unquote</span><span class="op" id="5324843">(</span><span class="ident" id="5324844">s</span><span class="op" id="5324845">.</span><span class="op" id="5324846">(</span><span class="op" id="5324847">*</span><span class="ident" id="5324848">ImportSpec</span><span class="op" id="5324858">)</span><span class="op" id="5324859">.</span><span class="ident" id="5324860">Path</span><span class="op" id="5324864">.</span><span class="ident" id="5324865">Value</span><span class="op" id="5324870">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324873">if</span>&nbsp;<span class="ident" id="5324876">err</span>&nbsp;<span class="op" id="5324880">==</span>&nbsp;<span class="ident" id="5324883">nil</span>&nbsp;<span class="op" id="5324887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324891">return</span>&nbsp;<span class="ident" id="5324898">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324904">return</span>&nbsp;<span class="string" id="5324911">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="5324914">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="5324917">func</span>&nbsp;<span class="ident" id="5324922">importName</span><span class="op" id="5324932">(</span><span class="ident" id="5324933">s</span>&nbsp;<span class="ident" id="5324935">Spec</span><span class="op" id="5324939">)</span>&nbsp;<span class="builtintype" id="5324941">string</span>&nbsp;<span class="op" id="5324948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324951">n</span>&nbsp;<span class="op" id="5324953">:=</span>&nbsp;<span class="ident" id="5324956">s</span><span class="op" id="5324957">.</span><span class="op" id="5324958">(</span><span class="op" id="5324959">*</span><span class="ident" id="5324960">ImportSpec</span><span class="op" id="5324970">)</span><span class="op" id="5324971">.</span><span class="ident" id="5324972">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324978">if</span>&nbsp;<span class="ident" id="5324981">n</span>&nbsp;<span class="op" id="5324983">==</span>&nbsp;<span class="ident" id="5324986">nil</span>&nbsp;<span class="op" id="5324990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324994">return</span>&nbsp;<span class="string" id="5325001">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325008">return</span>&nbsp;<span class="ident" id="5325015">n</span><span class="op" id="5325016">.</span><span class="ident" id="5325017">Name</span><br>
<span class="lineno"></span><span class="op" id="5325022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5325025">func</span>&nbsp;<span class="ident" id="5325030">importComment</span><span class="op" id="5325043">(</span><span class="ident" id="5325044">s</span>&nbsp;<span class="ident" id="5325046">Spec</span><span class="op" id="5325050">)</span>&nbsp;<span class="builtintype" id="5325052">string</span>&nbsp;<span class="op" id="5325059">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325062">c</span>&nbsp;<span class="op" id="5325064">:=</span>&nbsp;<span class="ident" id="5325067">s</span><span class="op" id="5325068">.</span><span class="op" id="5325069">(</span><span class="op" id="5325070">*</span><span class="ident" id="5325071">ImportSpec</span><span class="op" id="5325081">)</span><span class="op" id="5325082">.</span><span class="ident" id="5325083">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325092">if</span>&nbsp;<span class="ident" id="5325095">c</span>&nbsp;<span class="op" id="5325097">==</span>&nbsp;<span class="ident" id="5325100">nil</span>&nbsp;<span class="op" id="5325104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325108">return</span>&nbsp;<span class="string" id="5325115">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325122">return</span>&nbsp;<span class="ident" id="5325129">c</span><span class="op" id="5325130">.</span><span class="ident" id="5325131">Text</span><span class="op" id="5325135">(</span><span class="op" id="5325136">)</span><br>
<span class="lineno">75</span><span class="op" id="5325138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5325141">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="5325211">func</span>&nbsp;<span class="ident" id="5325216">collapse</span><span class="op" id="5325224">(</span><span class="ident" id="5325225">prev</span><span class="op" id="5325229">,</span>&nbsp;<span class="ident" id="5325231">next</span>&nbsp;<span class="ident" id="5325236">Spec</span><span class="op" id="5325240">)</span>&nbsp;<span class="builtintype" id="5325242">bool</span>&nbsp;<span class="op" id="5325247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325250">if</span>&nbsp;<span class="ident" id="5325253">importPath</span><span class="op" id="5325263">(</span><span class="ident" id="5325264">next</span><span class="op" id="5325268">)</span>&nbsp;<span class="op" id="5325270">!=</span>&nbsp;<span class="ident" id="5325273">importPath</span><span class="op" id="5325283">(</span><span class="ident" id="5325284">prev</span><span class="op" id="5325288">)</span>&nbsp;<span class="op" id="5325290">||</span>&nbsp;<span class="ident" id="5325293">importName</span><span class="op" id="5325303">(</span><span class="ident" id="5325304">next</span><span class="op" id="5325308">)</span>&nbsp;<span class="op" id="5325310">!=</span>&nbsp;<span class="ident" id="5325313">importName</span><span class="op" id="5325323">(</span><span class="ident" id="5325324">prev</span><span class="op" id="5325328">)</span>&nbsp;<span class="op" id="5325330">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325334">return</span>&nbsp;<span class="builtintype" id="5325341">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325351">return</span>&nbsp;<span class="ident" id="5325358">prev</span><span class="op" id="5325362">.</span><span class="op" id="5325363">(</span><span class="op" id="5325364">*</span><span class="ident" id="5325365">ImportSpec</span><span class="op" id="5325375">)</span><span class="op" id="5325376">.</span><span class="ident" id="5325377">Comment</span>&nbsp;<span class="op" id="5325385">==</span>&nbsp;<span class="ident" id="5325388">nil</span><br>
<span class="lineno"></span><span class="op" id="5325392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="5325395">type</span>&nbsp;<span class="ident" id="5325400">posSpan</span>&nbsp;<span class="keyword" id="5325408">struct</span>&nbsp;<span class="op" id="5325415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325418">Start</span>&nbsp;<span class="ident" id="5325424">token</span><span class="op" id="5325429">.</span><span class="ident" id="5325430">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325435">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5325441">token</span><span class="op" id="5325446">.</span><span class="ident" id="5325447">Pos</span><br>
<span class="lineno"></span><span class="op" id="5325451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="5325454">func</span>&nbsp;<span class="ident" id="5325459">sortSpecs</span><span class="op" id="5325468">(</span><span class="ident" id="5325469">fset</span>&nbsp;<span class="op" id="5325474">*</span><span class="ident" id="5325475">token</span><span class="op" id="5325480">.</span><span class="ident" id="5325481">FileSet</span><span class="op" id="5325488">,</span>&nbsp;<span class="ident" id="5325490">f</span>&nbsp;<span class="op" id="5325492">*</span><span class="ident" id="5325493">File</span><span class="op" id="5325497">,</span>&nbsp;<span class="ident" id="5325499">specs</span>&nbsp;<span class="op" id="5325505">[</span><span class="op" id="5325506">]</span><span class="ident" id="5325507">Spec</span><span class="op" id="5325511">)</span>&nbsp;<span class="op" id="5325513">[</span><span class="op" id="5325514">]</span><span class="ident" id="5325515">Spec</span>&nbsp;<span class="op" id="5325520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325523">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325586">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325631">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325682">if</span>&nbsp;<span class="builtinfunc" id="5325685">len</span><span class="op" id="5325688">(</span><span class="ident" id="5325689">specs</span><span class="op" id="5325694">)</span>&nbsp;<span class="op" id="5325696">&lt;=</span>&nbsp;<span class="num" id="5325699">1</span>&nbsp;<span class="op" id="5325701">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325705">return</span>&nbsp;<span class="ident" id="5325712">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325723">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325755">pos</span>&nbsp;<span class="op" id="5325759">:=</span>&nbsp;<span class="builtinfunc" id="5325762">make</span><span class="op" id="5325766">(</span><span class="op" id="5325767">[</span><span class="op" id="5325768">]</span><span class="ident" id="5325769">posSpan</span><span class="op" id="5325776">,</span>&nbsp;<span class="builtinfunc" id="5325778">len</span><span class="op" id="5325781">(</span><span class="ident" id="5325782">specs</span><span class="op" id="5325787">)</span><span class="op" id="5325788">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325791">for</span>&nbsp;<span class="ident" id="5325795">i</span><span class="op" id="5325796">,</span>&nbsp;<span class="ident" id="5325798">s</span>&nbsp;<span class="op" id="5325800">:=</span>&nbsp;<span class="keyword" id="5325803">range</span>&nbsp;<span class="ident" id="5325809">specs</span>&nbsp;<span class="op" id="5325815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325819">pos</span><span class="op" id="5325822">[</span><span class="ident" id="5325823">i</span><span class="op" id="5325824">]</span>&nbsp;<span class="op" id="5325826">=</span>&nbsp;<span class="ident" id="5325828">posSpan</span><span class="op" id="5325835">{</span><span class="ident" id="5325836">s</span><span class="op" id="5325837">.</span><span class="ident" id="5325838">Pos</span><span class="op" id="5325841">(</span><span class="op" id="5325842">)</span><span class="op" id="5325843">,</span>&nbsp;<span class="ident" id="5325845">s</span><span class="op" id="5325846">.</span><span class="ident" id="5325847">End</span><span class="op" id="5325850">(</span><span class="op" id="5325851">)</span><span class="op" id="5325852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325859">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5325896">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325956">lastLine</span>&nbsp;<span class="op" id="5325965">:=</span>&nbsp;<span class="ident" id="5325968">fset</span><span class="op" id="5325972">.</span><span class="ident" id="5325973">Position</span><span class="op" id="5325981">(</span><span class="ident" id="5325982">pos</span><span class="op" id="5325985">[</span><span class="builtinfunc" id="5325986">len</span><span class="op" id="5325989">(</span><span class="ident" id="5325990">pos</span><span class="op" id="5325993">)</span><span class="op" id="5325994">-</span><span class="num" id="5325995">1</span><span class="op" id="5325996">]</span><span class="op" id="5325997">.</span><span class="ident" id="5325998">End</span><span class="op" id="5326001">)</span><span class="op" id="5326002">.</span><span class="ident" id="5326003">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326009">cstart</span>&nbsp;<span class="op" id="5326016">:=</span>&nbsp;<span class="builtinfunc" id="5326019">len</span><span class="op" id="5326022">(</span><span class="ident" id="5326023">f</span><span class="op" id="5326024">.</span><span class="ident" id="5326025">Comments</span><span class="op" id="5326033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326036">cend</span>&nbsp;<span class="op" id="5326041">:=</span>&nbsp;<span class="builtinfunc" id="5326044">len</span><span class="op" id="5326047">(</span><span class="ident" id="5326048">f</span><span class="op" id="5326049">.</span><span class="ident" id="5326050">Comments</span><span class="op" id="5326058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326061">for</span>&nbsp;<span class="ident" id="5326065">i</span><span class="op" id="5326066">,</span>&nbsp;<span class="ident" id="5326068">g</span>&nbsp;<span class="op" id="5326070">:=</span>&nbsp;<span class="keyword" id="5326073">range</span>&nbsp;<span class="ident" id="5326079">f</span><span class="op" id="5326080">.</span><span class="ident" id="5326081">Comments</span>&nbsp;<span class="op" id="5326090">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326094">if</span>&nbsp;<span class="ident" id="5326097">g</span><span class="op" id="5326098">.</span><span class="ident" id="5326099">Pos</span><span class="op" id="5326102">(</span><span class="op" id="5326103">)</span>&nbsp;<span class="op" id="5326105">&lt;</span>&nbsp;<span class="ident" id="5326107">pos</span><span class="op" id="5326110">[</span><span class="num" id="5326111">0</span><span class="op" id="5326112">]</span><span class="op" id="5326113">.</span><span class="ident" id="5326114">Start</span>&nbsp;<span class="op" id="5326120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326125">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326140">if</span>&nbsp;<span class="ident" id="5326143">i</span>&nbsp;<span class="op" id="5326145">&lt;</span>&nbsp;<span class="ident" id="5326147">cstart</span>&nbsp;<span class="op" id="5326154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326159">cstart</span>&nbsp;<span class="op" id="5326166">=</span>&nbsp;<span class="ident" id="5326168">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326176">if</span>&nbsp;<span class="ident" id="5326179">fset</span><span class="op" id="5326183">.</span><span class="ident" id="5326184">Position</span><span class="op" id="5326192">(</span><span class="ident" id="5326193">g</span><span class="op" id="5326194">.</span><span class="ident" id="5326195">End</span><span class="op" id="5326198">(</span><span class="op" id="5326199">)</span><span class="op" id="5326200">)</span><span class="op" id="5326201">.</span><span class="ident" id="5326202">Line</span>&nbsp;<span class="op" id="5326207">&gt;</span>&nbsp;<span class="ident" id="5326209">lastLine</span>&nbsp;<span class="op" id="5326218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326223">cend</span>&nbsp;<span class="op" id="5326228">=</span>&nbsp;<span class="ident" id="5326230">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326235">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326243">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326249">comments</span>&nbsp;<span class="op" id="5326258">:=</span>&nbsp;<span class="ident" id="5326261">f</span><span class="op" id="5326262">.</span><span class="ident" id="5326263">Comments</span><span class="op" id="5326271">[</span><span class="ident" id="5326272">cstart</span><span class="op" id="5326278">:</span><span class="ident" id="5326279">cend</span><span class="op" id="5326283">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326287">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326344">importComment</span>&nbsp;<span class="op" id="5326358">:=</span>&nbsp;<span class="keyword" id="5326361">map</span><span class="op" id="5326364">[</span><span class="op" id="5326365">*</span><span class="ident" id="5326366">ImportSpec</span><span class="op" id="5326376">]</span><span class="op" id="5326377">[</span><span class="op" id="5326378">]</span><span class="op" id="5326379">*</span><span class="ident" id="5326380">CommentGroup</span><span class="op" id="5326392">{</span><span class="op" id="5326393">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326396">specIndex</span>&nbsp;<span class="op" id="5326406">:=</span>&nbsp;<span class="num" id="5326409">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326412">for</span>&nbsp;<span class="ident" id="5326416">_</span><span class="op" id="5326417">,</span>&nbsp;<span class="ident" id="5326419">g</span>&nbsp;<span class="op" id="5326421">:=</span>&nbsp;<span class="keyword" id="5326424">range</span>&nbsp;<span class="ident" id="5326430">comments</span>&nbsp;<span class="op" id="5326439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326443">for</span>&nbsp;<span class="ident" id="5326447">specIndex</span><span class="op" id="5326456">+</span><span class="num" id="5326457">1</span>&nbsp;<span class="op" id="5326459">&lt;</span>&nbsp;<span class="builtinfunc" id="5326461">len</span><span class="op" id="5326464">(</span><span class="ident" id="5326465">specs</span><span class="op" id="5326470">)</span>&nbsp;<span class="op" id="5326472">&amp;&amp;</span>&nbsp;<span class="ident" id="5326475">pos</span><span class="op" id="5326478">[</span><span class="ident" id="5326479">specIndex</span><span class="op" id="5326488">+</span><span class="num" id="5326489">1</span><span class="op" id="5326490">]</span><span class="op" id="5326491">.</span><span class="ident" id="5326492">Start</span>&nbsp;<span class="op" id="5326498">&lt;=</span>&nbsp;<span class="ident" id="5326501">g</span><span class="op" id="5326502">.</span><span class="ident" id="5326503">Pos</span><span class="op" id="5326506">(</span><span class="op" id="5326507">)</span>&nbsp;<span class="op" id="5326509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326514">specIndex</span><span class="op" id="5326523">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326528">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326532">s</span>&nbsp;<span class="op" id="5326534">:=</span>&nbsp;<span class="ident" id="5326537">specs</span><span class="op" id="5326542">[</span><span class="ident" id="5326543">specIndex</span><span class="op" id="5326552">]</span><span class="op" id="5326553">.</span><span class="op" id="5326554">(</span><span class="op" id="5326555">*</span><span class="ident" id="5326556">ImportSpec</span><span class="op" id="5326566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326570">importComment</span><span class="op" id="5326583">[</span><span class="ident" id="5326584">s</span><span class="op" id="5326585">]</span>&nbsp;<span class="op" id="5326587">=</span>&nbsp;<span class="builtinfunc" id="5326589">append</span><span class="op" id="5326595">(</span><span class="ident" id="5326596">importComment</span><span class="op" id="5326609">[</span><span class="ident" id="5326610">s</span><span class="op" id="5326611">]</span><span class="op" id="5326612">,</span>&nbsp;<span class="ident" id="5326614">g</span><span class="op" id="5326615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326622">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326664">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326720">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326786">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326841">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326880">sort</span><span class="op" id="5326884">.</span><span class="ident" id="5326885">Sort</span><span class="op" id="5326889">(</span><span class="ident" id="5326890">byImportSpec</span><span class="op" id="5326902">(</span><span class="ident" id="5326903">specs</span><span class="op" id="5326908">)</span><span class="op" id="5326909">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326913">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326968">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326999">deduped</span>&nbsp;<span class="op" id="5327007">:=</span>&nbsp;<span class="ident" id="5327010">specs</span><span class="op" id="5327015">[</span><span class="op" id="5327016">:</span><span class="num" id="5327017">0</span><span class="op" id="5327018">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327021">for</span>&nbsp;<span class="ident" id="5327025">i</span><span class="op" id="5327026">,</span>&nbsp;<span class="ident" id="5327028">s</span>&nbsp;<span class="op" id="5327030">:=</span>&nbsp;<span class="keyword" id="5327033">range</span>&nbsp;<span class="ident" id="5327039">specs</span>&nbsp;<span class="op" id="5327045">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327049">if</span>&nbsp;<span class="ident" id="5327052">i</span>&nbsp;<span class="op" id="5327054">==</span>&nbsp;<span class="builtinfunc" id="5327057">len</span><span class="op" id="5327060">(</span><span class="ident" id="5327061">specs</span><span class="op" id="5327066">)</span><span class="op" id="5327067">-</span><span class="num" id="5327068">1</span>&nbsp;<span class="op" id="5327070">||</span>&nbsp;<span class="op" id="5327073">!</span><span class="ident" id="5327074">collapse</span><span class="op" id="5327082">(</span><span class="ident" id="5327083">s</span><span class="op" id="5327084">,</span>&nbsp;<span class="ident" id="5327086">specs</span><span class="op" id="5327091">[</span><span class="ident" id="5327092">i</span><span class="op" id="5327093">+</span><span class="num" id="5327094">1</span><span class="op" id="5327095">]</span><span class="op" id="5327096">)</span>&nbsp;<span class="op" id="5327098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327103">deduped</span>&nbsp;<span class="op" id="5327111">=</span>&nbsp;<span class="builtinfunc" id="5327113">append</span><span class="op" id="5327119">(</span><span class="ident" id="5327120">deduped</span><span class="op" id="5327127">,</span>&nbsp;<span class="ident" id="5327129">s</span><span class="op" id="5327130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327134">}</span>&nbsp;<span class="keyword" id="5327136">else</span>&nbsp;<span class="op" id="5327141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327146">p</span>&nbsp;<span class="op" id="5327148">:=</span>&nbsp;<span class="ident" id="5327151">s</span><span class="op" id="5327152">.</span><span class="ident" id="5327153">Pos</span><span class="op" id="5327156">(</span><span class="op" id="5327157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327162">fset</span><span class="op" id="5327166">.</span><span class="ident" id="5327167">File</span><span class="op" id="5327171">(</span><span class="ident" id="5327172">p</span><span class="op" id="5327173">)</span><span class="op" id="5327174">.</span><span class="ident" id="5327175">MergeLine</span><span class="op" id="5327184">(</span><span class="ident" id="5327185">fset</span><span class="op" id="5327189">.</span><span class="ident" id="5327190">Position</span><span class="op" id="5327198">(</span><span class="ident" id="5327199">p</span><span class="op" id="5327200">)</span><span class="op" id="5327201">.</span><span class="ident" id="5327202">Line</span><span class="op" id="5327206">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327216">specs</span>&nbsp;<span class="op" id="5327222">=</span>&nbsp;<span class="ident" id="5327224">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5327234">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327263">for</span>&nbsp;<span class="ident" id="5327267">i</span><span class="op" id="5327268">,</span>&nbsp;<span class="ident" id="5327270">s</span>&nbsp;<span class="op" id="5327272">:=</span>&nbsp;<span class="keyword" id="5327275">range</span>&nbsp;<span class="ident" id="5327281">specs</span>&nbsp;<span class="op" id="5327287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327291">s</span>&nbsp;<span class="op" id="5327293">:=</span>&nbsp;<span class="ident" id="5327296">s</span><span class="op" id="5327297">.</span><span class="op" id="5327298">(</span><span class="op" id="5327299">*</span><span class="ident" id="5327300">ImportSpec</span><span class="op" id="5327310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327314">if</span>&nbsp;<span class="ident" id="5327317">s</span><span class="op" id="5327318">.</span><span class="ident" id="5327319">Name</span>&nbsp;<span class="op" id="5327324">!=</span>&nbsp;<span class="ident" id="5327327">nil</span>&nbsp;<span class="op" id="5327331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327336">s</span><span class="op" id="5327337">.</span><span class="ident" id="5327338">Name</span><span class="op" id="5327342">.</span><span class="ident" id="5327343">NamePos</span>&nbsp;<span class="op" id="5327351">=</span>&nbsp;<span class="ident" id="5327353">pos</span><span class="op" id="5327356">[</span><span class="ident" id="5327357">i</span><span class="op" id="5327358">]</span><span class="op" id="5327359">.</span><span class="ident" id="5327360">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327368">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327372">s</span><span class="op" id="5327373">.</span><span class="ident" id="5327374">Path</span><span class="op" id="5327378">.</span><span class="ident" id="5327379">ValuePos</span>&nbsp;<span class="op" id="5327388">=</span>&nbsp;<span class="ident" id="5327390">pos</span><span class="op" id="5327393">[</span><span class="ident" id="5327394">i</span><span class="op" id="5327395">]</span><span class="op" id="5327396">.</span><span class="ident" id="5327397">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327405">s</span><span class="op" id="5327406">.</span><span class="ident" id="5327407">EndPos</span>&nbsp;<span class="op" id="5327414">=</span>&nbsp;<span class="ident" id="5327416">pos</span><span class="op" id="5327419">[</span><span class="ident" id="5327420">i</span><span class="op" id="5327421">]</span><span class="op" id="5327422">.</span><span class="ident" id="5327423">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327429">for</span>&nbsp;<span class="ident" id="5327433">_</span><span class="op" id="5327434">,</span>&nbsp;<span class="ident" id="5327436">g</span>&nbsp;<span class="op" id="5327438">:=</span>&nbsp;<span class="keyword" id="5327441">range</span>&nbsp;<span class="ident" id="5327447">importComment</span><span class="op" id="5327460">[</span><span class="ident" id="5327461">s</span><span class="op" id="5327462">]</span>&nbsp;<span class="op" id="5327464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327469">for</span>&nbsp;<span class="ident" id="5327473">_</span><span class="op" id="5327474">,</span>&nbsp;<span class="ident" id="5327476">c</span>&nbsp;<span class="op" id="5327478">:=</span>&nbsp;<span class="keyword" id="5327481">range</span>&nbsp;<span class="ident" id="5327487">g</span><span class="op" id="5327488">.</span><span class="ident" id="5327489">List</span>&nbsp;<span class="op" id="5327494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327500">c</span><span class="op" id="5327501">.</span><span class="ident" id="5327502">Slash</span>&nbsp;<span class="op" id="5327508">=</span>&nbsp;<span class="ident" id="5327510">pos</span><span class="op" id="5327513">[</span><span class="ident" id="5327514">i</span><span class="op" id="5327515">]</span><span class="op" id="5327516">.</span><span class="ident" id="5327517">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327535">sort</span><span class="op" id="5327539">.</span><span class="ident" id="5327540">Sort</span><span class="op" id="5327544">(</span><span class="ident" id="5327545">byCommentPos</span><span class="op" id="5327557">(</span><span class="ident" id="5327558">comments</span><span class="op" id="5327566">)</span><span class="op" id="5327567">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327571">return</span>&nbsp;<span class="ident" id="5327578">specs</span><br>
<span class="lineno"></span><span class="op" id="5327584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5327587">type</span>&nbsp;<span class="ident" id="5327592">byImportSpec</span>&nbsp;<span class="op" id="5327605">[</span><span class="op" id="5327606">]</span><span class="ident" id="5327607">Spec</span>&nbsp;<span class="comment" id="5327612">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="5327637">func</span>&nbsp;<span class="op" id="5327642">(</span><span class="ident" id="5327643">x</span>&nbsp;<span class="ident" id="5327645">byImportSpec</span><span class="op" id="5327657">)</span>&nbsp;<span class="ident" id="5327659">Len</span><span class="op" id="5327662">(</span><span class="op" id="5327663">)</span>&nbsp;<span class="builtintype" id="5327665">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5327674">{</span>&nbsp;<span class="keyword" id="5327676">return</span>&nbsp;<span class="builtinfunc" id="5327683">len</span><span class="op" id="5327686">(</span><span class="ident" id="5327687">x</span><span class="op" id="5327688">)</span>&nbsp;<span class="op" id="5327690">}</span><br>
<span class="lineno"></span><span class="keyword" id="5327692">func</span>&nbsp;<span class="op" id="5327697">(</span><span class="ident" id="5327698">x</span>&nbsp;<span class="ident" id="5327700">byImportSpec</span><span class="op" id="5327712">)</span>&nbsp;<span class="ident" id="5327714">Swap</span><span class="op" id="5327718">(</span><span class="ident" id="5327719">i</span><span class="op" id="5327720">,</span>&nbsp;<span class="ident" id="5327722">j</span>&nbsp;<span class="builtintype" id="5327724">int</span><span class="op" id="5327727">)</span>&nbsp;<span class="op" id="5327729">{</span>&nbsp;<span class="ident" id="5327731">x</span><span class="op" id="5327732">[</span><span class="ident" id="5327733">i</span><span class="op" id="5327734">]</span><span class="op" id="5327735">,</span>&nbsp;<span class="ident" id="5327737">x</span><span class="op" id="5327738">[</span><span class="ident" id="5327739">j</span><span class="op" id="5327740">]</span>&nbsp;<span class="op" id="5327742">=</span>&nbsp;<span class="ident" id="5327744">x</span><span class="op" id="5327745">[</span><span class="ident" id="5327746">j</span><span class="op" id="5327747">]</span><span class="op" id="5327748">,</span>&nbsp;<span class="ident" id="5327750">x</span><span class="op" id="5327751">[</span><span class="ident" id="5327752">i</span><span class="op" id="5327753">]</span>&nbsp;<span class="op" id="5327755">}</span><br>
<span class="lineno"></span><span class="keyword" id="5327757">func</span>&nbsp;<span class="op" id="5327762">(</span><span class="ident" id="5327763">x</span>&nbsp;<span class="ident" id="5327765">byImportSpec</span><span class="op" id="5327777">)</span>&nbsp;<span class="ident" id="5327779">Less</span><span class="op" id="5327783">(</span><span class="ident" id="5327784">i</span><span class="op" id="5327785">,</span>&nbsp;<span class="ident" id="5327787">j</span>&nbsp;<span class="builtintype" id="5327789">int</span><span class="op" id="5327792">)</span>&nbsp;<span class="builtintype" id="5327794">bool</span>&nbsp;<span class="op" id="5327799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327802">ipath</span>&nbsp;<span class="op" id="5327808">:=</span>&nbsp;<span class="ident" id="5327811">importPath</span><span class="op" id="5327821">(</span><span class="ident" id="5327822">x</span><span class="op" id="5327823">[</span><span class="ident" id="5327824">i</span><span class="op" id="5327825">]</span><span class="op" id="5327826">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327829">jpath</span>&nbsp;<span class="op" id="5327835">:=</span>&nbsp;<span class="ident" id="5327838">importPath</span><span class="op" id="5327848">(</span><span class="ident" id="5327849">x</span><span class="op" id="5327850">[</span><span class="ident" id="5327851">j</span><span class="op" id="5327852">]</span><span class="op" id="5327853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327856">if</span>&nbsp;<span class="ident" id="5327859">ipath</span>&nbsp;<span class="op" id="5327865">!=</span>&nbsp;<span class="ident" id="5327868">jpath</span>&nbsp;<span class="op" id="5327874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327878">return</span>&nbsp;<span class="ident" id="5327885">ipath</span>&nbsp;<span class="op" id="5327891">&lt;</span>&nbsp;<span class="ident" id="5327893">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327903">iname</span>&nbsp;<span class="op" id="5327909">:=</span>&nbsp;<span class="ident" id="5327912">importName</span><span class="op" id="5327922">(</span><span class="ident" id="5327923">x</span><span class="op" id="5327924">[</span><span class="ident" id="5327925">i</span><span class="op" id="5327926">]</span><span class="op" id="5327927">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327930">jname</span>&nbsp;<span class="op" id="5327936">:=</span>&nbsp;<span class="ident" id="5327939">importName</span><span class="op" id="5327949">(</span><span class="ident" id="5327950">x</span><span class="op" id="5327951">[</span><span class="ident" id="5327952">j</span><span class="op" id="5327953">]</span><span class="op" id="5327954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327957">if</span>&nbsp;<span class="ident" id="5327960">iname</span>&nbsp;<span class="op" id="5327966">!=</span>&nbsp;<span class="ident" id="5327969">jname</span>&nbsp;<span class="op" id="5327975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327979">return</span>&nbsp;<span class="ident" id="5327986">iname</span>&nbsp;<span class="op" id="5327992">&lt;</span>&nbsp;<span class="ident" id="5327994">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328004">return</span>&nbsp;<span class="ident" id="5328011">importComment</span><span class="op" id="5328024">(</span><span class="ident" id="5328025">x</span><span class="op" id="5328026">[</span><span class="ident" id="5328027">i</span><span class="op" id="5328028">]</span><span class="op" id="5328029">)</span>&nbsp;<span class="op" id="5328031">&lt;</span>&nbsp;<span class="ident" id="5328033">importComment</span><span class="op" id="5328046">(</span><span class="ident" id="5328047">x</span><span class="op" id="5328048">[</span><span class="ident" id="5328049">j</span><span class="op" id="5328050">]</span><span class="op" id="5328051">)</span><br>
<span class="lineno">190</span><span class="op" id="5328053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5328056">type</span>&nbsp;<span class="ident" id="5328061">byCommentPos</span>&nbsp;<span class="op" id="5328074">[</span><span class="op" id="5328075">]</span><span class="op" id="5328076">*</span><span class="ident" id="5328077">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5328091">func</span>&nbsp;<span class="op" id="5328096">(</span><span class="ident" id="5328097">x</span>&nbsp;<span class="ident" id="5328099">byCommentPos</span><span class="op" id="5328111">)</span>&nbsp;<span class="ident" id="5328113">Len</span><span class="op" id="5328116">(</span><span class="op" id="5328117">)</span>&nbsp;<span class="builtintype" id="5328119">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5328133">{</span>&nbsp;<span class="keyword" id="5328135">return</span>&nbsp;<span class="builtinfunc" id="5328142">len</span><span class="op" id="5328145">(</span><span class="ident" id="5328146">x</span><span class="op" id="5328147">)</span>&nbsp;<span class="op" id="5328149">}</span><br>
<span class="lineno">195</span><span class="keyword" id="5328151">func</span>&nbsp;<span class="op" id="5328156">(</span><span class="ident" id="5328157">x</span>&nbsp;<span class="ident" id="5328159">byCommentPos</span><span class="op" id="5328171">)</span>&nbsp;<span class="ident" id="5328173">Swap</span><span class="op" id="5328177">(</span><span class="ident" id="5328178">i</span><span class="op" id="5328179">,</span>&nbsp;<span class="ident" id="5328181">j</span>&nbsp;<span class="builtintype" id="5328183">int</span><span class="op" id="5328186">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5328193">{</span>&nbsp;<span class="ident" id="5328195">x</span><span class="op" id="5328196">[</span><span class="ident" id="5328197">i</span><span class="op" id="5328198">]</span><span class="op" id="5328199">,</span>&nbsp;<span class="ident" id="5328201">x</span><span class="op" id="5328202">[</span><span class="ident" id="5328203">j</span><span class="op" id="5328204">]</span>&nbsp;<span class="op" id="5328206">=</span>&nbsp;<span class="ident" id="5328208">x</span><span class="op" id="5328209">[</span><span class="ident" id="5328210">j</span><span class="op" id="5328211">]</span><span class="op" id="5328212">,</span>&nbsp;<span class="ident" id="5328214">x</span><span class="op" id="5328215">[</span><span class="ident" id="5328216">i</span><span class="op" id="5328217">]</span>&nbsp;<span class="op" id="5328219">}</span><br>
<span class="lineno"></span><span class="keyword" id="5328221">func</span>&nbsp;<span class="op" id="5328226">(</span><span class="ident" id="5328227">x</span>&nbsp;<span class="ident" id="5328229">byCommentPos</span><span class="op" id="5328241">)</span>&nbsp;<span class="ident" id="5328243">Less</span><span class="op" id="5328247">(</span><span class="ident" id="5328248">i</span><span class="op" id="5328249">,</span>&nbsp;<span class="ident" id="5328251">j</span>&nbsp;<span class="builtintype" id="5328253">int</span><span class="op" id="5328256">)</span>&nbsp;<span class="builtintype" id="5328258">bool</span>&nbsp;<span class="op" id="5328263">{</span>&nbsp;<span class="keyword" id="5328265">return</span>&nbsp;<span class="ident" id="5328272">x</span><span class="op" id="5328273">[</span><span class="ident" id="5328274">i</span><span class="op" id="5328275">]</span><span class="op" id="5328276">.</span><span class="ident" id="5328277">Pos</span><span class="op" id="5328280">(</span><span class="op" id="5328281">)</span>&nbsp;<span class="op" id="5328283">&lt;</span>&nbsp;<span class="ident" id="5328285">x</span><span class="op" id="5328286">[</span><span class="ident" id="5328287">j</span><span class="op" id="5328288">]</span><span class="op" id="5328289">.</span><span class="ident" id="5328290">Pos</span><span class="op" id="5328293">(</span><span class="op" id="5328294">)</span>&nbsp;<span class="op" id="5328296">}</span>
</div>
</body>
</html>
