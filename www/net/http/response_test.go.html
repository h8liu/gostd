<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7075459">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7075515">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7075569">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7075620">package</span>&nbsp;<span class="ident" id="7075628">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075634">import</span>&nbsp;<span class="op" id="7075641">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075644">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075653">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075662">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075679">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075694">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075701">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075707">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075720">&#34;net/http/internal&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075741">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075752">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075763">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075773">&#34;strings&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7075784">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7075794">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075797">type</span>&nbsp;<span class="ident" id="7075802">respTest</span>&nbsp;<span class="keyword" id="7075811">struct</span>&nbsp;<span class="op" id="7075818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7075821">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="7075826">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7075834">Resp</span>&nbsp;<span class="ident" id="7075839"><a href="/net/http/response.go.html#3392041">Response</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7075849">Body</span>&nbsp;<span class="builtintype" id="7075854">string</span><br>
<span class="lineno"></span><span class="op" id="7075861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075864">func</span>&nbsp;<span class="ident" id="7075869">dummyReq</span><span class="op" id="7075877">(</span><span class="ident" id="7075878">method</span>&nbsp;<span class="builtintype" id="7075885">string</span><span class="op" id="7075891">)</span>&nbsp;<span class="op" id="7075893">*</span><span class="ident" id="7075894"><a href="/net/http/request.go.html#3366486">Request</a></span>&nbsp;<span class="op" id="7075902">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7075905">return</span>&nbsp;<span class="op" id="7075912">&amp;</span><span class="ident" id="7075913"><a href="/net/http/request.go.html#3366486">Request</a></span><span class="op" id="7075920">{</span><span class="ident" id="7075921">Method</span><span class="op" id="7075927">:</span>&nbsp;<span class="ident" id="7075929"><a href="/net/http/response_test.go.html#7075878">method</a></span><span class="op" id="7075935">}</span><br>
<span class="lineno"></span><span class="op" id="7075937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075940">func</span>&nbsp;<span class="ident" id="7075945">dummyReq11</span><span class="op" id="7075955">(</span><span class="ident" id="7075956">method</span>&nbsp;<span class="builtintype" id="7075963">string</span><span class="op" id="7075969">)</span>&nbsp;<span class="op" id="7075971">*</span><span class="ident" id="7075972"><a href="/net/http/request.go.html#3366486">Request</a></span>&nbsp;<span class="op" id="7075980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7075983">return</span>&nbsp;<span class="op" id="7075990">&amp;</span><span class="ident" id="7075991"><a href="/net/http/request.go.html#3366486">Request</a></span><span class="op" id="7075998">{</span><span class="ident" id="7075999">Method</span><span class="op" id="7076005">:</span>&nbsp;<span class="ident" id="7076007"><a href="/net/http/response_test.go.html#7075956">method</a></span><span class="op" id="7076013">,</span>&nbsp;<span class="ident" id="7076015">Proto</span><span class="op" id="7076020">:</span>&nbsp;<span class="string" id="7076022">&#34;HTTP/1.1&#34;</span><span class="op" id="7076032">,</span>&nbsp;<span class="ident" id="7076034">ProtoMajor</span><span class="op" id="7076044">:</span>&nbsp;<span class="num" id="7076046">1</span><span class="op" id="7076047">,</span>&nbsp;<span class="ident" id="7076049">ProtoMinor</span><span class="op" id="7076059">:</span>&nbsp;<span class="num" id="7076061">1</span><span class="op" id="7076062">}</span><br>
<span class="lineno">35</span><span class="op" id="7076064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7076067">var</span>&nbsp;<span class="ident" id="7076071">respTests</span>&nbsp;<span class="op" id="7076081">=</span>&nbsp;<span class="op" id="7076083">[</span><span class="op" id="7076084">]</span><span class="ident" id="7076085"><a href="/net/http/response_test.go.html#7075802">respTest</a></span><span class="op" id="7076093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7076096">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076143">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076147">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7076169">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076174">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7076198">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076203">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7076210">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076215">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7076228">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076233"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7076241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076246">Status</span><span class="op" id="7076252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7076258">&#34;200&nbsp;OK&#34;</span><span class="op" id="7076266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076271">StatusCode</span><span class="op" id="7076281">:</span>&nbsp;<span class="num" id="7076283">200</span><span class="op" id="7076286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076291">Proto</span><span class="op" id="7076296">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7076303">&#34;HTTP/1.0&#34;</span><span class="op" id="7076313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076318">ProtoMajor</span><span class="op" id="7076328">:</span>&nbsp;<span class="num" id="7076330">1</span><span class="op" id="7076331">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076336">ProtoMinor</span><span class="op" id="7076346">:</span>&nbsp;<span class="num" id="7076348">0</span><span class="op" id="7076349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076354">Request</span><span class="op" id="7076361">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076366"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7076374">(</span><span class="string" id="7076375">&#34;GET&#34;</span><span class="op" id="7076380">)</span><span class="op" id="7076381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076386">Header</span><span class="op" id="7076392">:</span>&nbsp;<span class="ident" id="7076394"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7076400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076406">&#34;Connection&#34;</span><span class="op" id="7076418">:</span>&nbsp;<span class="op" id="7076420">{</span><span class="string" id="7076421">&#34;close&#34;</span><span class="op" id="7076428">}</span><span class="op" id="7076429">,</span>&nbsp;<span class="comment" id="7076431">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076456">}</span><span class="op" id="7076457">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076462">Close</span><span class="op" id="7076467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7076477">true</span><span class="op" id="7076481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076486">ContentLength</span><span class="op" id="7076499">:</span>&nbsp;<span class="op" id="7076501">-</span><span class="num" id="7076502">1</span><span class="op" id="7076503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076507">}</span><span class="op" id="7076508">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076513">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7076526">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076529">}</span><span class="op" id="7076530">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7076534">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;response&nbsp;without&nbsp;Content-Length&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7076592">//&nbsp;Connection&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076616">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076620">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7076642">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076647">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7076654">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076659">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7076672">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076677"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7076685">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076690">Status</span><span class="op" id="7076696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7076705">&#34;200&nbsp;OK&#34;</span><span class="op" id="7076713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076718">StatusCode</span><span class="op" id="7076728">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7076733">200</span><span class="op" id="7076736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076741">Proto</span><span class="op" id="7076746">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7076756">&#34;HTTP/1.1&#34;</span><span class="op" id="7076766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076771">ProtoMajor</span><span class="op" id="7076781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7076786">1</span><span class="op" id="7076787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076792">ProtoMinor</span><span class="op" id="7076802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7076807">1</span><span class="op" id="7076808">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076813">Header</span><span class="op" id="7076819">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076828"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7076834">{</span><span class="op" id="7076835">}</span><span class="op" id="7076836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076841">Request</span><span class="op" id="7076848">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076856"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7076864">(</span><span class="string" id="7076865">&#34;GET&#34;</span><span class="op" id="7076870">)</span><span class="op" id="7076871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076876">Close</span><span class="op" id="7076881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7076891">true</span><span class="op" id="7076895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7076900">ContentLength</span><span class="op" id="7076913">:</span>&nbsp;<span class="op" id="7076915">-</span><span class="num" id="7076916">1</span><span class="op" id="7076917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076921">}</span><span class="op" id="7076922">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7076927">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7076940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7076943">}</span><span class="op" id="7076944">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7076948">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;204&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077012">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7077042">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077047">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7077054">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077059">&#34;Body&nbsp;should&nbsp;not&nbsp;be&nbsp;read!\n&#34;</span><span class="op" id="7077087">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077092"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7077100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077105">Status</span><span class="op" id="7077111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7077120">&#34;204&nbsp;No&nbsp;Content&#34;</span><span class="op" id="7077136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077141">StatusCode</span><span class="op" id="7077151">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7077156">204</span><span class="op" id="7077159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077164">Proto</span><span class="op" id="7077169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7077179">&#34;HTTP/1.1&#34;</span><span class="op" id="7077189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077194">ProtoMajor</span><span class="op" id="7077204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7077209">1</span><span class="op" id="7077210">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077215">ProtoMinor</span><span class="op" id="7077225">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7077230">1</span><span class="op" id="7077231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077236">Header</span><span class="op" id="7077242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077251"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7077257">{</span><span class="op" id="7077258">}</span><span class="op" id="7077259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077264">Request</span><span class="op" id="7077271">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077279"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7077287">(</span><span class="string" id="7077288">&#34;GET&#34;</span><span class="op" id="7077293">)</span><span class="op" id="7077294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077299">Close</span><span class="op" id="7077304">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7077314">false</span><span class="op" id="7077319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077324">ContentLength</span><span class="op" id="7077337">:</span>&nbsp;<span class="num" id="7077339">0</span><span class="op" id="7077340">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077344">}</span><span class="op" id="7077345">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077350">&#34;&#34;</span><span class="op" id="7077352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077355">}</span><span class="op" id="7077356">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7077360">//&nbsp;Unchunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077408">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7077430">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077435">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7077460">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077465">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7077489">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077494">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7077501">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077506">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7077519">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077524"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7077532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077537">Status</span><span class="op" id="7077543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7077549">&#34;200&nbsp;OK&#34;</span><span class="op" id="7077557">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077562">StatusCode</span><span class="op" id="7077572">:</span>&nbsp;<span class="num" id="7077574">200</span><span class="op" id="7077577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077582">Proto</span><span class="op" id="7077587">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7077594">&#34;HTTP/1.0&#34;</span><span class="op" id="7077604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077609">ProtoMajor</span><span class="op" id="7077619">:</span>&nbsp;<span class="num" id="7077621">1</span><span class="op" id="7077622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077627">ProtoMinor</span><span class="op" id="7077637">:</span>&nbsp;<span class="num" id="7077639">0</span><span class="op" id="7077640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077645">Request</span><span class="op" id="7077652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077657"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7077665">(</span><span class="string" id="7077666">&#34;GET&#34;</span><span class="op" id="7077671">)</span><span class="op" id="7077672">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077677">Header</span><span class="op" id="7077683">:</span>&nbsp;<span class="ident" id="7077685"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7077691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077697">&#34;Connection&#34;</span><span class="op" id="7077709">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077715">{</span><span class="string" id="7077716">&#34;close&#34;</span><span class="op" id="7077723">}</span><span class="op" id="7077724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077730">&#34;Content-Length&#34;</span><span class="op" id="7077746">:</span>&nbsp;<span class="op" id="7077748">{</span><span class="string" id="7077749">&#34;10&#34;</span><span class="op" id="7077753">}</span><span class="op" id="7077754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077759">}</span><span class="op" id="7077760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077765">Close</span><span class="op" id="7077770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7077780">true</span><span class="op" id="7077784">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7077789">ContentLength</span><span class="op" id="7077802">:</span>&nbsp;<span class="num" id="7077804">10</span><span class="op" id="7077806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077810">}</span><span class="op" id="7077811">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077816">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7077829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077832">}</span><span class="op" id="7077833">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7077837">//&nbsp;Chunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7077882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077886">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7077908">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077913">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7077946">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077951">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7077958">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077963">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7077972">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7077977">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7077995">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078000">&#34;09\r\n&#34;</span>&nbsp;<span class="op" id="7078009">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078014">&#34;continued\r\n&#34;</span>&nbsp;<span class="op" id="7078030">+</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078035">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7078043">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078048">&#34;\r\n&#34;</span><span class="op" id="7078054">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078059"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7078067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078072">Status</span><span class="op" id="7078078">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7078090">&#34;200&nbsp;OK&#34;</span><span class="op" id="7078098">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078103">StatusCode</span><span class="op" id="7078113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7078121">200</span><span class="op" id="7078124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078129">Proto</span><span class="op" id="7078134">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7078147">&#34;HTTP/1.1&#34;</span><span class="op" id="7078157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078162">ProtoMajor</span><span class="op" id="7078172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7078180">1</span><span class="op" id="7078181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078186">ProtoMinor</span><span class="op" id="7078196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7078204">1</span><span class="op" id="7078205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078210">Request</span><span class="op" id="7078217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078228"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7078236">(</span><span class="string" id="7078237">&#34;GET&#34;</span><span class="op" id="7078242">)</span><span class="op" id="7078243">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078248">Header</span><span class="op" id="7078254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078266"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7078272">{</span><span class="op" id="7078273">}</span><span class="op" id="7078274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078279">Close</span><span class="op" id="7078284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7078297">false</span><span class="op" id="7078302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078307">ContentLength</span><span class="op" id="7078320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078325">-</span><span class="num" id="7078326">1</span><span class="op" id="7078327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078332">TransferEncoding</span><span class="op" id="7078348">:</span>&nbsp;<span class="op" id="7078350">[</span><span class="op" id="7078351">]</span><span class="builtintype" id="7078352">string</span><span class="op" id="7078358">{</span><span class="string" id="7078359">&#34;chunked&#34;</span><span class="op" id="7078368">}</span><span class="op" id="7078369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7078373">}</span><span class="op" id="7078374">,</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078379">&#34;Body&nbsp;here\ncontinued&#34;</span><span class="op" id="7078401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7078404">}</span><span class="op" id="7078405">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7078409">//&nbsp;Chunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7078451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078455">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7078477">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078482">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7078515">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078520">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7078545">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078550">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7078557">+</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078562">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7078571">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078576">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7078594">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078599">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7078607">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078612">&#34;\r\n&#34;</span><span class="op" id="7078618">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078623"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7078631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078636">Status</span><span class="op" id="7078642">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7078654">&#34;200&nbsp;OK&#34;</span><span class="op" id="7078662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078667">StatusCode</span><span class="op" id="7078677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7078685">200</span><span class="op" id="7078688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078693">Proto</span><span class="op" id="7078698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7078711">&#34;HTTP/1.1&#34;</span><span class="op" id="7078721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078726">ProtoMajor</span><span class="op" id="7078736">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7078744">1</span><span class="op" id="7078745">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078750">ProtoMinor</span><span class="op" id="7078760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7078768">1</span><span class="op" id="7078769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078774">Request</span><span class="op" id="7078781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078792"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7078800">(</span><span class="string" id="7078801">&#34;GET&#34;</span><span class="op" id="7078806">)</span><span class="op" id="7078807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078812">Header</span><span class="op" id="7078818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078830"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7078836">{</span><span class="op" id="7078837">}</span><span class="op" id="7078838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078843">Close</span><span class="op" id="7078848">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7078861">false</span><span class="op" id="7078866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078871">ContentLength</span><span class="op" id="7078884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078889">-</span><span class="num" id="7078890">1</span><span class="op" id="7078891">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078896">TransferEncoding</span><span class="op" id="7078912">:</span>&nbsp;<span class="op" id="7078914">[</span><span class="op" id="7078915">]</span><span class="builtintype" id="7078916">string</span><span class="op" id="7078922">{</span><span class="string" id="7078923">&#34;chunked&#34;</span><span class="op" id="7078932">}</span><span class="op" id="7078933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7078937">}</span><span class="op" id="7078938">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7078943">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7078956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7078959">}</span><span class="op" id="7078960">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7078964">//&nbsp;Chunked&nbsp;response&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079019">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7079041">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079046">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7079079">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079084">&#34;\r\n&#34;</span><span class="op" id="7079090">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079095"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7079103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079108">Status</span><span class="op" id="7079114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7079126">&#34;200&nbsp;OK&#34;</span><span class="op" id="7079134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079139">StatusCode</span><span class="op" id="7079149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079157">200</span><span class="op" id="7079160">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079165">Proto</span><span class="op" id="7079170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7079183">&#34;HTTP/1.1&#34;</span><span class="op" id="7079193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079198">ProtoMajor</span><span class="op" id="7079208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079216">1</span><span class="op" id="7079217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079222">ProtoMinor</span><span class="op" id="7079232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079240">1</span><span class="op" id="7079241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079246">Request</span><span class="op" id="7079253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079264"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7079272">(</span><span class="string" id="7079273">&#34;HEAD&#34;</span><span class="op" id="7079279">)</span><span class="op" id="7079280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079285">Header</span><span class="op" id="7079291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079303"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7079309">{</span><span class="op" id="7079310">}</span><span class="op" id="7079311">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079316">TransferEncoding</span><span class="op" id="7079332">:</span>&nbsp;<span class="op" id="7079334">[</span><span class="op" id="7079335">]</span><span class="builtintype" id="7079336">string</span><span class="op" id="7079342">{</span><span class="string" id="7079343">&#34;chunked&#34;</span><span class="op" id="7079352">}</span><span class="op" id="7079353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079358">Close</span><span class="op" id="7079363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7079376">false</span><span class="op" id="7079381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079386">ContentLength</span><span class="op" id="7079399">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079404">-</span><span class="num" id="7079405">1</span><span class="op" id="7079406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079410">}</span><span class="op" id="7079411">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079416">&#34;&#34;</span><span class="op" id="7079418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079421">}</span><span class="op" id="7079422">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7079426">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079475">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079479">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7079501">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079506">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7079532">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079537">&#34;\r\n&#34;</span><span class="op" id="7079543">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079548"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7079556">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079561">Status</span><span class="op" id="7079567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7079579">&#34;200&nbsp;OK&#34;</span><span class="op" id="7079587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079592">StatusCode</span><span class="op" id="7079602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079610">200</span><span class="op" id="7079613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079618">Proto</span><span class="op" id="7079623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7079636">&#34;HTTP/1.0&#34;</span><span class="op" id="7079646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079651">ProtoMajor</span><span class="op" id="7079661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079669">1</span><span class="op" id="7079670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079675">ProtoMinor</span><span class="op" id="7079685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079693">0</span><span class="op" id="7079694">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079699">Request</span><span class="op" id="7079706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079717"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7079725">(</span><span class="string" id="7079726">&#34;HEAD&#34;</span><span class="op" id="7079732">)</span><span class="op" id="7079733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079738">Header</span><span class="op" id="7079744">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079756"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7079762">{</span><span class="string" id="7079763">&#34;Content-Length&#34;</span><span class="op" id="7079779">:</span>&nbsp;<span class="op" id="7079781">{</span><span class="string" id="7079782">&#34;256&#34;</span><span class="op" id="7079787">}</span><span class="op" id="7079788">}</span><span class="op" id="7079789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079794">TransferEncoding</span><span class="op" id="7079810">:</span>&nbsp;<span class="ident" id="7079812">nil</span><span class="op" id="7079815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079820">Close</span><span class="op" id="7079825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7079838">true</span><span class="op" id="7079842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079847">ContentLength</span><span class="op" id="7079860">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7079865">256</span><span class="op" id="7079868">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079872">}</span><span class="op" id="7079873">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079878">&#34;&#34;</span><span class="op" id="7079880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079883">}</span><span class="op" id="7079884">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7079888">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request&nbsp;with&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079955">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7079977">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7079982">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7080008">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080013">&#34;\r\n&#34;</span><span class="op" id="7080019">,</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080024"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7080032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080037">Status</span><span class="op" id="7080043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7080055">&#34;200&nbsp;OK&#34;</span><span class="op" id="7080063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080068">StatusCode</span><span class="op" id="7080078">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080086">200</span><span class="op" id="7080089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080094">Proto</span><span class="op" id="7080099">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7080112">&#34;HTTP/1.1&#34;</span><span class="op" id="7080122">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080127">ProtoMajor</span><span class="op" id="7080137">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080145">1</span><span class="op" id="7080146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080151">ProtoMinor</span><span class="op" id="7080161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080169">1</span><span class="op" id="7080170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080175">Request</span><span class="op" id="7080182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080193"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7080201">(</span><span class="string" id="7080202">&#34;HEAD&#34;</span><span class="op" id="7080208">)</span><span class="op" id="7080209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080214">Header</span><span class="op" id="7080220">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080232"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7080238">{</span><span class="string" id="7080239">&#34;Content-Length&#34;</span><span class="op" id="7080255">:</span>&nbsp;<span class="op" id="7080257">{</span><span class="string" id="7080258">&#34;256&#34;</span><span class="op" id="7080263">}</span><span class="op" id="7080264">}</span><span class="op" id="7080265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080270">TransferEncoding</span><span class="op" id="7080286">:</span>&nbsp;<span class="ident" id="7080288">nil</span><span class="op" id="7080291">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080296">Close</span><span class="op" id="7080301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7080314">false</span><span class="op" id="7080319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080324">ContentLength</span><span class="op" id="7080337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080342">256</span><span class="op" id="7080345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080349">}</span><span class="op" id="7080350">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080355">&#34;&#34;</span><span class="op" id="7080357">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080360">}</span><span class="op" id="7080361">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7080365">//&nbsp;No&nbsp;Content-Length&nbsp;or&nbsp;Chunked&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080432">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7080454">+</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080459">&#34;\r\n&#34;</span><span class="op" id="7080465">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080470"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7080478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080483">Status</span><span class="op" id="7080489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7080501">&#34;200&nbsp;OK&#34;</span><span class="op" id="7080509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080514">StatusCode</span><span class="op" id="7080524">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080532">200</span><span class="op" id="7080535">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080540">Proto</span><span class="op" id="7080545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7080558">&#34;HTTP/1.0&#34;</span><span class="op" id="7080568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080573">ProtoMajor</span><span class="op" id="7080583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080591">1</span><span class="op" id="7080592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080597">ProtoMinor</span><span class="op" id="7080607">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7080615">0</span><span class="op" id="7080616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080621">Request</span><span class="op" id="7080628">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080639"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7080647">(</span><span class="string" id="7080648">&#34;HEAD&#34;</span><span class="op" id="7080654">)</span><span class="op" id="7080655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080660">Header</span><span class="op" id="7080666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080678"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7080684">{</span><span class="op" id="7080685">}</span><span class="op" id="7080686">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080691">TransferEncoding</span><span class="op" id="7080707">:</span>&nbsp;<span class="ident" id="7080709">nil</span><span class="op" id="7080712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080717">Close</span><span class="op" id="7080722">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7080735">true</span><span class="op" id="7080739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080744">ContentLength</span><span class="op" id="7080757">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080762">-</span><span class="num" id="7080763">1</span><span class="op" id="7080764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080768">}</span><span class="op" id="7080769">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080774">&#34;&#34;</span><span class="op" id="7080776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080779">}</span><span class="op" id="7080780">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7080784">//&nbsp;explicit&nbsp;Content-Length&nbsp;of&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080818">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080822">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7080844">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080849">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7080873">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080878">&#34;\r\n&#34;</span><span class="op" id="7080884">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080889"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7080897">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080902">Status</span><span class="op" id="7080908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7080914">&#34;200&nbsp;OK&#34;</span><span class="op" id="7080922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080927">StatusCode</span><span class="op" id="7080937">:</span>&nbsp;<span class="num" id="7080939">200</span><span class="op" id="7080942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080947">Proto</span><span class="op" id="7080952">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7080959">&#34;HTTP/1.1&#34;</span><span class="op" id="7080969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080974">ProtoMajor</span><span class="op" id="7080984">:</span>&nbsp;<span class="num" id="7080986">1</span><span class="op" id="7080987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080992">ProtoMinor</span><span class="op" id="7081002">:</span>&nbsp;<span class="num" id="7081004">1</span><span class="op" id="7081005">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081010">Request</span><span class="op" id="7081017">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081022"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7081030">(</span><span class="string" id="7081031">&#34;GET&#34;</span><span class="op" id="7081036">)</span><span class="op" id="7081037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081042">Header</span><span class="op" id="7081048">:</span>&nbsp;<span class="ident" id="7081050"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7081056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7081062">&#34;Content-Length&#34;</span><span class="op" id="7081078">:</span>&nbsp;<span class="op" id="7081080">{</span><span class="string" id="7081081">&#34;0&#34;</span><span class="op" id="7081084">}</span><span class="op" id="7081085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081090">}</span><span class="op" id="7081091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081096">Close</span><span class="op" id="7081101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7081111">false</span><span class="op" id="7081116">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081121">ContentLength</span><span class="op" id="7081134">:</span>&nbsp;<span class="num" id="7081136">0</span><span class="op" id="7081137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081141">}</span><span class="op" id="7081142">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7081147">&#34;&#34;</span><span class="op" id="7081149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081152">}</span><span class="op" id="7081153">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7081157">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;but&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7081218">//&nbsp;(permitted&nbsp;by&nbsp;RFC&nbsp;2616)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7081250">&#34;HTTP/1.0&nbsp;303&nbsp;\r\n\r\n&#34;</span><span class="op" id="7081273">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081277"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7081285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081290">Status</span><span class="op" id="7081296">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7081305">&#34;303&nbsp;&#34;</span><span class="op" id="7081311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081316">StatusCode</span><span class="op" id="7081326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7081331">303</span><span class="op" id="7081334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081339">Proto</span><span class="op" id="7081344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7081354">&#34;HTTP/1.0&#34;</span><span class="op" id="7081364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081369">ProtoMajor</span><span class="op" id="7081379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7081384">1</span><span class="op" id="7081385">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081390">ProtoMinor</span><span class="op" id="7081400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7081405">0</span><span class="op" id="7081406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081411">Request</span><span class="op" id="7081418">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081426"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7081434">(</span><span class="string" id="7081435">&#34;GET&#34;</span><span class="op" id="7081440">)</span><span class="op" id="7081441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081446">Header</span><span class="op" id="7081452">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081461"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7081467">{</span><span class="op" id="7081468">}</span><span class="op" id="7081469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081474">Close</span><span class="op" id="7081479">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7081489">true</span><span class="op" id="7081493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081498">ContentLength</span><span class="op" id="7081511">:</span>&nbsp;<span class="op" id="7081513">-</span><span class="num" id="7081514">1</span><span class="op" id="7081515">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081519">}</span><span class="op" id="7081520">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7081525">&#34;&#34;</span><span class="op" id="7081527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081530">}</span><span class="op" id="7081531">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7081535">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;and&nbsp;no&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7081599">//&nbsp;(not&nbsp;permitted&nbsp;by&nbsp;RFC&nbsp;2616,&nbsp;but&nbsp;we&#39;ll&nbsp;accept&nbsp;it&nbsp;anyway)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7081663">&#34;HTTP/1.0&nbsp;303\r\n\r\n&#34;</span><span class="op" id="7081685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081689"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7081697">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081702">Status</span><span class="op" id="7081708">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7081717">&#34;303&nbsp;&#34;</span><span class="op" id="7081723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081728">StatusCode</span><span class="op" id="7081738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7081743">303</span><span class="op" id="7081746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081751">Proto</span><span class="op" id="7081756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7081766">&#34;HTTP/1.0&#34;</span><span class="op" id="7081776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081781">ProtoMajor</span><span class="op" id="7081791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7081796">1</span><span class="op" id="7081797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081802">ProtoMinor</span><span class="op" id="7081812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7081817">0</span><span class="op" id="7081818">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081823">Request</span><span class="op" id="7081830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081838"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7081846">(</span><span class="string" id="7081847">&#34;GET&#34;</span><span class="op" id="7081852">)</span><span class="op" id="7081853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081858">Header</span><span class="op" id="7081864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081873"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7081879">{</span><span class="op" id="7081880">}</span><span class="op" id="7081881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081886">Close</span><span class="op" id="7081891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7081901">true</span><span class="op" id="7081905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081910">ContentLength</span><span class="op" id="7081923">:</span>&nbsp;<span class="op" id="7081925">-</span><span class="num" id="7081926">1</span><span class="op" id="7081927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081931">}</span><span class="op" id="7081932">,</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7081937">&#34;&#34;</span><span class="op" id="7081939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081942">}</span><span class="op" id="7081943">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7081947">//&nbsp;golang.org/issue/4767:&nbsp;don&#39;t&nbsp;special-case&nbsp;multipart/byteranges&nbsp;responses</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082028">`HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content<br>
<span class="lineno"></span>Connection:&nbsp;close<br>
<span class="lineno"></span>Content-Type:&nbsp;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef<br>
<span class="lineno"></span><br>
<span class="lineno">340</span>some&nbsp;body`</span><span class="op" id="7082149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082153"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7082161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082166">Status</span><span class="op" id="7082172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7082178">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7082199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082204">StatusCode</span><span class="op" id="7082214">:</span>&nbsp;<span class="num" id="7082216">206</span><span class="op" id="7082219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082224">Proto</span><span class="op" id="7082229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7082236">&#34;HTTP/1.1&#34;</span><span class="op" id="7082246">,</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082251">ProtoMajor</span><span class="op" id="7082261">:</span>&nbsp;<span class="num" id="7082263">1</span><span class="op" id="7082264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082269">ProtoMinor</span><span class="op" id="7082279">:</span>&nbsp;<span class="num" id="7082281">1</span><span class="op" id="7082282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082287">Request</span><span class="op" id="7082294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7082299"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7082307">(</span><span class="string" id="7082308">&#34;GET&#34;</span><span class="op" id="7082313">)</span><span class="op" id="7082314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082319">Header</span><span class="op" id="7082325">:</span>&nbsp;<span class="ident" id="7082327"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7082333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082339">&#34;Content-Type&#34;</span><span class="op" id="7082353">:</span>&nbsp;<span class="op" id="7082355">[</span><span class="op" id="7082356">]</span><span class="builtintype" id="7082357">string</span><span class="op" id="7082363">{</span><span class="string" id="7082364">&#34;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef&#34;</span><span class="op" id="7082413">}</span><span class="op" id="7082414">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082419">}</span><span class="op" id="7082420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082425">Close</span><span class="op" id="7082430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7082440">true</span><span class="op" id="7082444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082449">ContentLength</span><span class="op" id="7082462">:</span>&nbsp;<span class="op" id="7082464">-</span><span class="num" id="7082465">1</span><span class="op" id="7082466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082470">}</span><span class="op" id="7082471">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082476">&#34;some&nbsp;body&#34;</span><span class="op" id="7082487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082490">}</span><span class="op" id="7082491">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7082495">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length,&nbsp;Request&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082557">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082561">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7082583">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082588">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7082612">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082617">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7082624">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082629">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7082642">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082647"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7082655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082660">Status</span><span class="op" id="7082666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7082672">&#34;200&nbsp;OK&#34;</span><span class="op" id="7082680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082685">StatusCode</span><span class="op" id="7082695">:</span>&nbsp;<span class="num" id="7082697">200</span><span class="op" id="7082700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082705">Proto</span><span class="op" id="7082710">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7082717">&#34;HTTP/1.0&#34;</span><span class="op" id="7082727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082732">ProtoMajor</span><span class="op" id="7082742">:</span>&nbsp;<span class="num" id="7082744">1</span><span class="op" id="7082745">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082750">ProtoMinor</span><span class="op" id="7082760">:</span>&nbsp;<span class="num" id="7082762">0</span><span class="op" id="7082763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082768">Header</span><span class="op" id="7082774">:</span>&nbsp;<span class="ident" id="7082776"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7082782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082788">&#34;Connection&#34;</span><span class="op" id="7082800">:</span>&nbsp;<span class="op" id="7082802">{</span><span class="string" id="7082803">&#34;close&#34;</span><span class="op" id="7082810">}</span><span class="op" id="7082811">,</span>&nbsp;<span class="comment" id="7082813">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082838">}</span><span class="op" id="7082839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082844">Close</span><span class="op" id="7082849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7082859">true</span><span class="op" id="7082863">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7082868">ContentLength</span><span class="op" id="7082881">:</span>&nbsp;<span class="op" id="7082883">-</span><span class="num" id="7082884">1</span><span class="op" id="7082885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082889">}</span><span class="op" id="7082890">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082895">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7082908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082911">}</span><span class="op" id="7082912">,</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7082916">//&nbsp;206&nbsp;Partial&nbsp;Content.&nbsp;golang.org/issue/8923</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7082963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7082967">&#34;HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7083002">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083007">&#34;Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8\r\n&#34;</span>&nbsp;<span class="op" id="7083053">+</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083058">&#34;Accept-Ranges:&nbsp;bytes\r\n&#34;</span>&nbsp;<span class="op" id="7083085">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083090">&#34;Content-Range:&nbsp;bytes&nbsp;0-5/1862\r\n&#34;</span>&nbsp;<span class="op" id="7083126">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083131">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7083159">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083164">&#34;foobar&#34;</span><span class="op" id="7083172">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083177"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7083185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083190">Status</span><span class="op" id="7083196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7083202">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7083223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083228">StatusCode</span><span class="op" id="7083238">:</span>&nbsp;<span class="num" id="7083240">206</span><span class="op" id="7083243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083248">Proto</span><span class="op" id="7083253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7083260">&#34;HTTP/1.1&#34;</span><span class="op" id="7083270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083275">ProtoMajor</span><span class="op" id="7083285">:</span>&nbsp;<span class="num" id="7083287">1</span><span class="op" id="7083288">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083293">ProtoMinor</span><span class="op" id="7083303">:</span>&nbsp;<span class="num" id="7083305">1</span><span class="op" id="7083306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083311">Request</span><span class="op" id="7083318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7083323"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7083331">(</span><span class="string" id="7083332">&#34;GET&#34;</span><span class="op" id="7083337">)</span><span class="op" id="7083338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083343">Header</span><span class="op" id="7083349">:</span>&nbsp;<span class="ident" id="7083351"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7083357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083363">&#34;Accept-Ranges&#34;</span><span class="op" id="7083378">:</span>&nbsp;&nbsp;<span class="op" id="7083381">[</span><span class="op" id="7083382">]</span><span class="builtintype" id="7083383">string</span><span class="op" id="7083389">{</span><span class="string" id="7083390">&#34;bytes&#34;</span><span class="op" id="7083397">}</span><span class="op" id="7083398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083404">&#34;Content-Length&#34;</span><span class="op" id="7083420">:</span>&nbsp;<span class="op" id="7083422">[</span><span class="op" id="7083423">]</span><span class="builtintype" id="7083424">string</span><span class="op" id="7083430">{</span><span class="string" id="7083431">&#34;6&#34;</span><span class="op" id="7083434">}</span><span class="op" id="7083435">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083441">&#34;Content-Type&#34;</span><span class="op" id="7083455">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7083459">[</span><span class="op" id="7083460">]</span><span class="builtintype" id="7083461">string</span><span class="op" id="7083467">{</span><span class="string" id="7083468">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="7083495">}</span><span class="op" id="7083496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083502">&#34;Content-Range&#34;</span><span class="op" id="7083517">:</span>&nbsp;&nbsp;<span class="op" id="7083520">[</span><span class="op" id="7083521">]</span><span class="builtintype" id="7083522">string</span><span class="op" id="7083528">{</span><span class="string" id="7083529">&#34;bytes&nbsp;0-5/1862&#34;</span><span class="op" id="7083545">}</span><span class="op" id="7083546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7083551">}</span><span class="op" id="7083552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083557">ContentLength</span><span class="op" id="7083570">:</span>&nbsp;<span class="num" id="7083572">6</span><span class="op" id="7083573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7083577">}</span><span class="op" id="7083578">,</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7083583">&#34;foobar&#34;</span><span class="op" id="7083591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7083594">}</span><span class="op" id="7083595">,</span><br>
<span class="lineno"></span><span class="op" id="7083597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7083600">func</span>&nbsp;<span class="ident" id="7083605">TestReadResponse</span><span class="op" id="7083621">(</span><span class="ident" id="7083622">t</span>&nbsp;<span class="op" id="7083624">*</span><span class="ident" id="7083625"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7083632">.</span><span class="ident" id="7083633">T</span><span class="op" id="7083634">)</span>&nbsp;<span class="op" id="7083636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7083639">for</span>&nbsp;<span class="ident" id="7083643">i</span><span class="op" id="7083644">,</span>&nbsp;<span class="ident" id="7083646">tt</span>&nbsp;<span class="op" id="7083649">:=</span>&nbsp;<span class="keyword" id="7083652">range</span>&nbsp;<span class="ident" id="7083658"><a href="/net/http/response_test.go.html#7076071">respTests</a></span>&nbsp;<span class="op" id="7083668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083672">resp</span><span class="op" id="7083676">,</span>&nbsp;<span class="ident" id="7083678">err</span>&nbsp;<span class="op" id="7083682">:=</span>&nbsp;<span class="ident" id="7083685"><a href="/net/http/response.go.html#3395244">ReadResponse</a></span><span class="op" id="7083697">(</span><span class="ident" id="7083698"><a href="/net/http/response_test.go.html#7075644">bufio</a></span><span class="op" id="7083703">.</span><span class="ident" id="7083704">NewReader</span><span class="op" id="7083713">(</span><span class="ident" id="7083714"><a href="/net/http/response_test.go.html#7075773">strings</a></span><span class="op" id="7083721">.</span><span class="ident" id="7083722">NewReader</span><span class="op" id="7083731">(</span><span class="ident" id="7083732"><a href="/net/http/response_test.go.html#7083646">tt</a></span><span class="op" id="7083734">.</span><span class="ident" id="7083735">Raw</span><span class="op" id="7083738">)</span><span class="op" id="7083739">)</span><span class="op" id="7083740">,</span>&nbsp;<span class="ident" id="7083742"><a href="/net/http/response_test.go.html#7083646">tt</a></span><span class="op" id="7083744">.</span><span class="ident" id="7083745">Resp</span><span class="op" id="7083749">.</span><span class="ident" id="7083750">Request</span><span class="op" id="7083757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7083761">if</span>&nbsp;<span class="ident" id="7083764"><a href="/net/http/response_test.go.html#7083678">err</a></span>&nbsp;<span class="op" id="7083768">!=</span>&nbsp;<span class="ident" id="7083771">nil</span>&nbsp;<span class="op" id="7083775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083780"><a href="/net/http/response_test.go.html#7083622">t</a></span><span class="op" id="7083781">.</span><span class="ident" id="7083782">Errorf</span><span class="op" id="7083788">(</span><span class="string" id="7083789">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7083798">,</span>&nbsp;<span class="ident" id="7083800"><a href="/net/http/response_test.go.html#7083643">i</a></span><span class="op" id="7083801">,</span>&nbsp;<span class="ident" id="7083803"><a href="/net/http/response_test.go.html#7083678">err</a></span><span class="op" id="7083806">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7083811">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7083822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083826">rbody</span>&nbsp;<span class="op" id="7083832">:=</span>&nbsp;<span class="ident" id="7083835"><a href="/net/http/response_test.go.html#7083672">resp</a></span><span class="op" id="7083839">.</span><span class="ident" id="7083840">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083847"><a href="/net/http/response_test.go.html#7083672">resp</a></span><span class="op" id="7083851">.</span><span class="ident" id="7083852">Body</span>&nbsp;<span class="op" id="7083857">=</span>&nbsp;<span class="ident" id="7083859">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083865"><a href="/net/http/response_test.go.html#7087365">diff</a></span><span class="op" id="7083869">(</span><span class="ident" id="7083870"><a href="/net/http/response_test.go.html#7083622">t</a></span><span class="op" id="7083871">,</span>&nbsp;<span class="ident" id="7083873"><a href="/net/http/response_test.go.html#7075694">fmt</a></span><span class="op" id="7083876">.</span><span class="ident" id="7083877">Sprintf</span><span class="op" id="7083884">(</span><span class="string" id="7083885">&#34;#%d&nbsp;Response&#34;</span><span class="op" id="7083899">,</span>&nbsp;<span class="ident" id="7083901"><a href="/net/http/response_test.go.html#7083643">i</a></span><span class="op" id="7083902">)</span><span class="op" id="7083903">,</span>&nbsp;<span class="ident" id="7083905"><a href="/net/http/response_test.go.html#7083672">resp</a></span><span class="op" id="7083909">,</span>&nbsp;<span class="op" id="7083911">&amp;</span><span class="ident" id="7083912"><a href="/net/http/response_test.go.html#7083646">tt</a></span><span class="op" id="7083914">.</span><span class="ident" id="7083915">Resp</span><span class="op" id="7083919">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7083923">var</span>&nbsp;<span class="ident" id="7083927">bout</span>&nbsp;<span class="ident" id="7083932"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7083937">.</span><span class="ident" id="7083938">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7083947">if</span>&nbsp;<span class="ident" id="7083950"><a href="/net/http/response_test.go.html#7083826">rbody</a></span>&nbsp;<span class="op" id="7083956">!=</span>&nbsp;<span class="ident" id="7083959">nil</span>&nbsp;<span class="op" id="7083963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7083968">_</span><span class="op" id="7083969">,</span>&nbsp;<span class="ident" id="7083971"><a href="/net/http/response_test.go.html#7083678">err</a></span>&nbsp;<span class="op" id="7083975">=</span>&nbsp;<span class="ident" id="7083977"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7083979">.</span><span class="ident" id="7083980">Copy</span><span class="op" id="7083984">(</span><span class="op" id="7083985">&amp;</span><span class="ident" id="7083986"><a href="/net/http/response_test.go.html#7083927">bout</a></span><span class="op" id="7083990">,</span>&nbsp;<span class="ident" id="7083992"><a href="/net/http/response_test.go.html#7083826">rbody</a></span><span class="op" id="7083997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084002">if</span>&nbsp;<span class="ident" id="7084005"><a href="/net/http/response_test.go.html#7083678">err</a></span>&nbsp;<span class="op" id="7084009">!=</span>&nbsp;<span class="ident" id="7084012">nil</span>&nbsp;<span class="op" id="7084016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084022"><a href="/net/http/response_test.go.html#7083622">t</a></span><span class="op" id="7084023">.</span><span class="ident" id="7084024">Errorf</span><span class="op" id="7084030">(</span><span class="string" id="7084031">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7084040">,</span>&nbsp;<span class="ident" id="7084042"><a href="/net/http/response_test.go.html#7083643">i</a></span><span class="op" id="7084043">,</span>&nbsp;<span class="ident" id="7084045"><a href="/net/http/response_test.go.html#7083678">err</a></span><span class="op" id="7084048">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084054">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084071"><a href="/net/http/response_test.go.html#7083826">rbody</a></span><span class="op" id="7084076">.</span><span class="ident" id="7084077">Close</span><span class="op" id="7084082">(</span><span class="op" id="7084083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084091">body</span>&nbsp;<span class="op" id="7084096">:=</span>&nbsp;<span class="ident" id="7084099"><a href="/net/http/response_test.go.html#7083927">bout</a></span><span class="op" id="7084103">.</span><span class="ident" id="7084104">String</span><span class="op" id="7084110">(</span><span class="op" id="7084111">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084115">if</span>&nbsp;<span class="ident" id="7084118"><a href="/net/http/response_test.go.html#7084091">body</a></span>&nbsp;<span class="op" id="7084123">!=</span>&nbsp;<span class="ident" id="7084126"><a href="/net/http/response_test.go.html#7083646">tt</a></span><span class="op" id="7084128">.</span><span class="ident" id="7084129">Body</span>&nbsp;<span class="op" id="7084134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084139"><a href="/net/http/response_test.go.html#7083622">t</a></span><span class="op" id="7084140">.</span><span class="ident" id="7084141">Errorf</span><span class="op" id="7084147">(</span><span class="string" id="7084148">&#34;#%d:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7084172">,</span>&nbsp;<span class="ident" id="7084174"><a href="/net/http/response_test.go.html#7083643">i</a></span><span class="op" id="7084175">,</span>&nbsp;<span class="ident" id="7084177"><a href="/net/http/response_test.go.html#7084091">body</a></span><span class="op" id="7084181">,</span>&nbsp;<span class="ident" id="7084183"><a href="/net/http/response_test.go.html#7083646">tt</a></span><span class="op" id="7084185">.</span><span class="ident" id="7084186">Body</span><span class="op" id="7084190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084197">}</span><br>
<span class="lineno"></span><span class="op" id="7084199">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="7084202">func</span>&nbsp;<span class="ident" id="7084207">TestWriteResponse</span><span class="op" id="7084224">(</span><span class="ident" id="7084225">t</span>&nbsp;<span class="op" id="7084227">*</span><span class="ident" id="7084228"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7084235">.</span><span class="ident" id="7084236">T</span><span class="op" id="7084237">)</span>&nbsp;<span class="op" id="7084239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084242">for</span>&nbsp;<span class="ident" id="7084246">i</span><span class="op" id="7084247">,</span>&nbsp;<span class="ident" id="7084249">tt</span>&nbsp;<span class="op" id="7084252">:=</span>&nbsp;<span class="keyword" id="7084255">range</span>&nbsp;<span class="ident" id="7084261"><a href="/net/http/response_test.go.html#7076071">respTests</a></span>&nbsp;<span class="op" id="7084271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084275">resp</span><span class="op" id="7084279">,</span>&nbsp;<span class="ident" id="7084281">err</span>&nbsp;<span class="op" id="7084285">:=</span>&nbsp;<span class="ident" id="7084288"><a href="/net/http/response.go.html#3395244">ReadResponse</a></span><span class="op" id="7084300">(</span><span class="ident" id="7084301"><a href="/net/http/response_test.go.html#7075644">bufio</a></span><span class="op" id="7084306">.</span><span class="ident" id="7084307">NewReader</span><span class="op" id="7084316">(</span><span class="ident" id="7084317"><a href="/net/http/response_test.go.html#7075773">strings</a></span><span class="op" id="7084324">.</span><span class="ident" id="7084325">NewReader</span><span class="op" id="7084334">(</span><span class="ident" id="7084335"><a href="/net/http/response_test.go.html#7084249">tt</a></span><span class="op" id="7084337">.</span><span class="ident" id="7084338">Raw</span><span class="op" id="7084341">)</span><span class="op" id="7084342">)</span><span class="op" id="7084343">,</span>&nbsp;<span class="ident" id="7084345"><a href="/net/http/response_test.go.html#7084249">tt</a></span><span class="op" id="7084347">.</span><span class="ident" id="7084348">Resp</span><span class="op" id="7084352">.</span><span class="ident" id="7084353">Request</span><span class="op" id="7084360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084364">if</span>&nbsp;<span class="ident" id="7084367"><a href="/net/http/response_test.go.html#7084281">err</a></span>&nbsp;<span class="op" id="7084371">!=</span>&nbsp;<span class="ident" id="7084374">nil</span>&nbsp;<span class="op" id="7084378">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084383"><a href="/net/http/response_test.go.html#7084225">t</a></span><span class="op" id="7084384">.</span><span class="ident" id="7084385">Errorf</span><span class="op" id="7084391">(</span><span class="string" id="7084392">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7084401">,</span>&nbsp;<span class="ident" id="7084403"><a href="/net/http/response_test.go.html#7084246">i</a></span><span class="op" id="7084404">,</span>&nbsp;<span class="ident" id="7084406"><a href="/net/http/response_test.go.html#7084281">err</a></span><span class="op" id="7084409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084414">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084429"><a href="/net/http/response_test.go.html#7084281">err</a></span>&nbsp;<span class="op" id="7084433">=</span>&nbsp;<span class="ident" id="7084435"><a href="/net/http/response_test.go.html#7084275">resp</a></span><span class="op" id="7084439">.</span><span class="ident" id="7084440">Write</span><span class="op" id="7084445">(</span><span class="ident" id="7084446"><a href="/net/http/response_test.go.html#7075707">ioutil</a></span><span class="op" id="7084452">.</span><span class="ident" id="7084453">Discard</span><span class="op" id="7084460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084464">if</span>&nbsp;<span class="ident" id="7084467"><a href="/net/http/response_test.go.html#7084281">err</a></span>&nbsp;<span class="op" id="7084471">!=</span>&nbsp;<span class="ident" id="7084474">nil</span>&nbsp;<span class="op" id="7084478">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084483"><a href="/net/http/response_test.go.html#7084225">t</a></span><span class="op" id="7084484">.</span><span class="ident" id="7084485">Errorf</span><span class="op" id="7084491">(</span><span class="string" id="7084492">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7084501">,</span>&nbsp;<span class="ident" id="7084503"><a href="/net/http/response_test.go.html#7084246">i</a></span><span class="op" id="7084504">,</span>&nbsp;<span class="ident" id="7084506"><a href="/net/http/response_test.go.html#7084281">err</a></span><span class="op" id="7084509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084514">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084528">}</span><br>
<span class="lineno"></span><span class="op" id="7084530">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7084533">var</span>&nbsp;<span class="ident" id="7084537">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7084568">=</span>&nbsp;<span class="op" id="7084570">[</span><span class="op" id="7084571">]</span><span class="keyword" id="7084572">struct</span>&nbsp;<span class="op" id="7084579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084582">chunked</span><span class="op" id="7084589">,</span>&nbsp;<span class="ident" id="7084591">compressed</span>&nbsp;<span class="builtintype" id="7084602">bool</span><br>
<span class="lineno"></span><span class="op" id="7084607">}</span><span class="op" id="7084608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084611">{</span><span class="builtintype" id="7084612">false</span><span class="op" id="7084617">,</span>&nbsp;<span class="builtintype" id="7084619">false</span><span class="op" id="7084624">}</span><span class="op" id="7084625">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084628">{</span><span class="builtintype" id="7084629">true</span><span class="op" id="7084633">,</span>&nbsp;<span class="builtintype" id="7084635">false</span><span class="op" id="7084640">}</span><span class="op" id="7084641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7084644">{</span><span class="builtintype" id="7084645">true</span><span class="op" id="7084649">,</span>&nbsp;<span class="builtintype" id="7084651">true</span><span class="op" id="7084655">}</span><span class="op" id="7084656">,</span><br>
<span class="lineno"></span><span class="op" id="7084658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7084661">//&nbsp;TestReadResponseCloseInMiddle&nbsp;tests&nbsp;that&nbsp;closing&nbsp;a&nbsp;body&nbsp;after</span><br>
<span class="lineno">460</span><span class="comment" id="7084726">//&nbsp;reading&nbsp;only&nbsp;part&nbsp;of&nbsp;its&nbsp;contents&nbsp;advances&nbsp;the&nbsp;read&nbsp;to&nbsp;the&nbsp;end&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="7084795">//&nbsp;the&nbsp;request,&nbsp;right&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="7084844">func</span>&nbsp;<span class="ident" id="7084849">TestReadResponseCloseInMiddle</span><span class="op" id="7084878">(</span><span class="ident" id="7084879">t</span>&nbsp;<span class="op" id="7084881">*</span><span class="ident" id="7084882"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7084889">.</span><span class="ident" id="7084890">T</span><span class="op" id="7084891">)</span>&nbsp;<span class="op" id="7084893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7084896">for</span>&nbsp;<span class="ident" id="7084900">_</span><span class="op" id="7084901">,</span>&nbsp;<span class="ident" id="7084903">test</span>&nbsp;<span class="op" id="7084908">:=</span>&nbsp;<span class="keyword" id="7084911">range</span>&nbsp;<span class="ident" id="7084917"><a href="/net/http/response_test.go.html#7084537">readResponseCloseInMiddleTests</a></span>&nbsp;<span class="op" id="7084948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7084952">fatalf</span>&nbsp;<span class="op" id="7084959">:=</span>&nbsp;<span class="keyword" id="7084962">func</span><span class="op" id="7084966">(</span><span class="ident" id="7084967">format</span>&nbsp;<span class="builtintype" id="7084974">string</span><span class="op" id="7084980">,</span>&nbsp;<span class="ident" id="7084982">args</span>&nbsp;<span class="op" id="7084987">...</span><span class="keyword" id="7084990">interface</span><span class="op" id="7084999">{</span><span class="op" id="7085000">}</span><span class="op" id="7085001">)</span>&nbsp;<span class="op" id="7085003">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085008"><a href="/net/http/response_test.go.html#7084982">args</a></span>&nbsp;<span class="op" id="7085013">=</span>&nbsp;<span class="builtinfunc" id="7085015">append</span><span class="op" id="7085021">(</span><span class="op" id="7085022">[</span><span class="op" id="7085023">]</span><span class="keyword" id="7085024">interface</span><span class="op" id="7085033">{</span><span class="op" id="7085034">}</span><span class="op" id="7085035">{</span><span class="ident" id="7085036"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085040">.</span><span class="ident" id="7085041">chunked</span><span class="op" id="7085048">,</span>&nbsp;<span class="ident" id="7085050"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085054">.</span><span class="ident" id="7085055">compressed</span><span class="op" id="7085065">}</span><span class="op" id="7085066">,</span>&nbsp;<span class="ident" id="7085068"><a href="/net/http/response_test.go.html#7084982">args</a></span><span class="op" id="7085072">...</span><span class="op" id="7085075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085080"><a href="/net/http/response_test.go.html#7084879">t</a></span><span class="op" id="7085081">.</span><span class="ident" id="7085082">Fatalf</span><span class="op" id="7085088">(</span><span class="string" id="7085089">&#34;on&nbsp;test&nbsp;chunked=%v,&nbsp;compressed=%v:&nbsp;&#34;</span><span class="op" id="7085126">+</span><span class="ident" id="7085127"><a href="/net/http/response_test.go.html#7084967">format</a></span><span class="op" id="7085133">,</span>&nbsp;<span class="ident" id="7085135"><a href="/net/http/response_test.go.html#7084982">args</a></span><span class="op" id="7085139">...</span><span class="op" id="7085142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085150">checkErr</span>&nbsp;<span class="op" id="7085159">:=</span>&nbsp;<span class="keyword" id="7085162">func</span><span class="op" id="7085166">(</span><span class="ident" id="7085167">err</span>&nbsp;<span class="builtintype" id="7085171">error</span><span class="op" id="7085176">,</span>&nbsp;<span class="ident" id="7085178">msg</span>&nbsp;<span class="builtintype" id="7085182">string</span><span class="op" id="7085188">)</span>&nbsp;<span class="op" id="7085190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085195">if</span>&nbsp;<span class="ident" id="7085198"><a href="/net/http/response_test.go.html#7085167">err</a></span>&nbsp;<span class="op" id="7085202">==</span>&nbsp;<span class="ident" id="7085205">nil</span>&nbsp;<span class="op" id="7085209">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085215">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085230"><a href="/net/http/response_test.go.html#7084952">fatalf</a></span><span class="op" id="7085236">(</span><span class="ident" id="7085237"><a href="/net/http/response_test.go.html#7085178">msg</a></span><span class="op" id="7085240">+</span><span class="string" id="7085241">&#34;:&nbsp;%v&#34;</span><span class="op" id="7085247">,</span>&nbsp;<span class="ident" id="7085249"><a href="/net/http/response_test.go.html#7085167">err</a></span><span class="op" id="7085252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085260">var</span>&nbsp;<span class="ident" id="7085264">buf</span>&nbsp;<span class="ident" id="7085268"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7085273">.</span><span class="ident" id="7085274">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085283"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7085286">.</span><span class="ident" id="7085287">WriteString</span><span class="op" id="7085298">(</span><span class="string" id="7085299">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="7085320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085324">if</span>&nbsp;<span class="ident" id="7085327"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085331">.</span><span class="ident" id="7085332">chunked</span>&nbsp;<span class="op" id="7085340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085345"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7085348">.</span><span class="ident" id="7085349">WriteString</span><span class="op" id="7085360">(</span><span class="string" id="7085361">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="7085393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085397">}</span>&nbsp;<span class="keyword" id="7085399">else</span>&nbsp;<span class="op" id="7085404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085409"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7085412">.</span><span class="ident" id="7085413">WriteString</span><span class="op" id="7085424">(</span><span class="string" id="7085425">&#34;Content-Length:&nbsp;1000000\r\n&#34;</span><span class="op" id="7085454">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085462">var</span>&nbsp;<span class="ident" id="7085466">wr</span>&nbsp;<span class="ident" id="7085469"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7085471">.</span><span class="ident" id="7085472">Writer</span>&nbsp;<span class="op" id="7085479">=</span>&nbsp;<span class="op" id="7085481">&amp;</span><span class="ident" id="7085482"><a href="/net/http/response_test.go.html#7085264">buf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085488">if</span>&nbsp;<span class="ident" id="7085491"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085495">.</span><span class="ident" id="7085496">chunked</span>&nbsp;<span class="op" id="7085504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085509"><a href="/net/http/response_test.go.html#7085466">wr</a></span>&nbsp;<span class="op" id="7085512">=</span>&nbsp;<span class="ident" id="7085514"><a href="/net/http/response_test.go.html#7075720">internal</a></span><span class="op" id="7085522">.</span><span class="ident" id="7085523">NewChunkedWriter</span><span class="op" id="7085539">(</span><span class="ident" id="7085540"><a href="/net/http/response_test.go.html#7085466">wr</a></span><span class="op" id="7085542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085546">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085550">if</span>&nbsp;<span class="ident" id="7085553"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085557">.</span><span class="ident" id="7085558">compressed</span>&nbsp;<span class="op" id="7085569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085574"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7085577">.</span><span class="ident" id="7085578">WriteString</span><span class="op" id="7085589">(</span><span class="string" id="7085590">&#34;Content-Encoding:&nbsp;gzip\r\n&#34;</span><span class="op" id="7085618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085623"><a href="/net/http/response_test.go.html#7085466">wr</a></span>&nbsp;<span class="op" id="7085626">=</span>&nbsp;<span class="ident" id="7085628"><a href="/net/http/response_test.go.html#7075662">gzip</a></span><span class="op" id="7085632">.</span><span class="ident" id="7085633">NewWriter</span><span class="op" id="7085642">(</span><span class="ident" id="7085643"><a href="/net/http/response_test.go.html#7085466">wr</a></span><span class="op" id="7085645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085653"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7085656">.</span><span class="ident" id="7085657">WriteString</span><span class="op" id="7085668">(</span><span class="string" id="7085669">&#34;\r\n&#34;</span><span class="op" id="7085675">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085680">chunk</span>&nbsp;<span class="op" id="7085686">:=</span>&nbsp;<span class="ident" id="7085689"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7085694">.</span><span class="ident" id="7085695">Repeat</span><span class="op" id="7085701">(</span><span class="op" id="7085702">[</span><span class="op" id="7085703">]</span><span class="builtintype" id="7085704">byte</span><span class="op" id="7085708">{</span><span class="string" id="7085709">&#39;x&#39;</span><span class="op" id="7085712">}</span><span class="op" id="7085713">,</span>&nbsp;<span class="num" id="7085715">1000</span><span class="op" id="7085719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085723">for</span>&nbsp;<span class="ident" id="7085727">i</span>&nbsp;<span class="op" id="7085729">:=</span>&nbsp;<span class="num" id="7085732">0</span><span class="op" id="7085733">;</span>&nbsp;<span class="ident" id="7085735"><a href="/net/http/response_test.go.html#7085727">i</a></span>&nbsp;<span class="op" id="7085737">&lt;</span>&nbsp;<span class="num" id="7085739">1000</span><span class="op" id="7085743">;</span>&nbsp;<span class="ident" id="7085745"><a href="/net/http/response_test.go.html#7085727">i</a></span><span class="op" id="7085746">++</span>&nbsp;<span class="op" id="7085749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085754">if</span>&nbsp;<span class="ident" id="7085757"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085761">.</span><span class="ident" id="7085762">compressed</span>&nbsp;<span class="op" id="7085773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7085779">//&nbsp;Otherwise&nbsp;this&nbsp;compresses&nbsp;too&nbsp;well.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085822">_</span><span class="op" id="7085823">,</span>&nbsp;<span class="ident" id="7085825">err</span>&nbsp;<span class="op" id="7085829">:=</span>&nbsp;<span class="ident" id="7085832"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7085834">.</span><span class="ident" id="7085835">ReadFull</span><span class="op" id="7085843">(</span><span class="ident" id="7085844"><a href="/net/http/response_test.go.html#7075679">rand</a></span><span class="op" id="7085848">.</span><span class="ident" id="7085849">Reader</span><span class="op" id="7085855">,</span>&nbsp;<span class="ident" id="7085857"><a href="/net/http/response_test.go.html#7085680">chunk</a></span><span class="op" id="7085862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085868"><a href="/net/http/response_test.go.html#7085150">checkErr</a></span><span class="op" id="7085876">(</span><span class="ident" id="7085877"><a href="/net/http/response_test.go.html#7085825">err</a></span><span class="op" id="7085880">,</span>&nbsp;<span class="string" id="7085882">&#34;rand.Reader&nbsp;ReadFull&#34;</span><span class="op" id="7085904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085914"><a href="/net/http/response_test.go.html#7085466">wr</a></span><span class="op" id="7085916">.</span><span class="ident" id="7085917">Write</span><span class="op" id="7085922">(</span><span class="ident" id="7085923"><a href="/net/http/response_test.go.html#7085680">chunk</a></span><span class="op" id="7085928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7085932">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7085936">if</span>&nbsp;<span class="ident" id="7085939"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7085943">.</span><span class="ident" id="7085944">compressed</span>&nbsp;<span class="op" id="7085955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085960">err</span>&nbsp;<span class="op" id="7085964">:=</span>&nbsp;<span class="ident" id="7085967"><a href="/net/http/response_test.go.html#7085466">wr</a></span><span class="op" id="7085969">.</span><span class="op" id="7085970">(</span><span class="op" id="7085971">*</span><span class="ident" id="7085972"><a href="/net/http/response_test.go.html#7075662">gzip</a></span><span class="op" id="7085976">.</span><span class="ident" id="7085977">Writer</span><span class="op" id="7085983">)</span><span class="op" id="7085984">.</span><span class="ident" id="7085985">Close</span><span class="op" id="7085990">(</span><span class="op" id="7085991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7085996"><a href="/net/http/response_test.go.html#7085150">checkErr</a></span><span class="op" id="7086004">(</span><span class="ident" id="7086005"><a href="/net/http/response_test.go.html#7085960">err</a></span><span class="op" id="7086008">,</span>&nbsp;<span class="string" id="7086010">&#34;compressor&nbsp;close&#34;</span><span class="op" id="7086028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086036">if</span>&nbsp;<span class="ident" id="7086039"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7086043">.</span><span class="ident" id="7086044">chunked</span>&nbsp;<span class="op" id="7086052">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086057"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7086060">.</span><span class="ident" id="7086061">WriteString</span><span class="op" id="7086072">(</span><span class="string" id="7086073">&#34;0\r\n\r\n&#34;</span><span class="op" id="7086084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086092"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7086095">.</span><span class="ident" id="7086096">WriteString</span><span class="op" id="7086107">(</span><span class="string" id="7086108">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7086127">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086132">bufr</span>&nbsp;<span class="op" id="7086137">:=</span>&nbsp;<span class="ident" id="7086140"><a href="/net/http/response_test.go.html#7075644">bufio</a></span><span class="op" id="7086145">.</span><span class="ident" id="7086146">NewReader</span><span class="op" id="7086155">(</span><span class="op" id="7086156">&amp;</span><span class="ident" id="7086157"><a href="/net/http/response_test.go.html#7085264">buf</a></span><span class="op" id="7086160">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086164">resp</span><span class="op" id="7086168">,</span>&nbsp;<span class="ident" id="7086170">err</span>&nbsp;<span class="op" id="7086174">:=</span>&nbsp;<span class="ident" id="7086177"><a href="/net/http/response.go.html#3395244">ReadResponse</a></span><span class="op" id="7086189">(</span><span class="ident" id="7086190"><a href="/net/http/response_test.go.html#7086132">bufr</a></span><span class="op" id="7086194">,</span>&nbsp;<span class="ident" id="7086196"><a href="/net/http/response_test.go.html#7075869">dummyReq</a></span><span class="op" id="7086204">(</span><span class="string" id="7086205">&#34;GET&#34;</span><span class="op" id="7086210">)</span><span class="op" id="7086211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086215"><a href="/net/http/response_test.go.html#7085150">checkErr</a></span><span class="op" id="7086223">(</span><span class="ident" id="7086224"><a href="/net/http/response_test.go.html#7086170">err</a></span><span class="op" id="7086227">,</span>&nbsp;<span class="string" id="7086229">&#34;ReadResponse&#34;</span><span class="op" id="7086243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086247">expectedLength</span>&nbsp;<span class="op" id="7086262">:=</span>&nbsp;<span class="ident" id="7086265">int64</span><span class="op" id="7086270">(</span><span class="op" id="7086271">-</span><span class="num" id="7086272">1</span><span class="op" id="7086273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086277">if</span>&nbsp;<span class="op" id="7086280">!</span><span class="ident" id="7086281"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7086285">.</span><span class="ident" id="7086286">chunked</span>&nbsp;<span class="op" id="7086294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086299"><a href="/net/http/response_test.go.html#7086247">expectedLength</a></span>&nbsp;<span class="op" id="7086314">=</span>&nbsp;<span class="num" id="7086316">1000000</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086330">if</span>&nbsp;<span class="ident" id="7086333"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086337">.</span><span class="ident" id="7086338">ContentLength</span>&nbsp;<span class="op" id="7086352">!=</span>&nbsp;<span class="ident" id="7086355"><a href="/net/http/response_test.go.html#7086247">expectedLength</a></span>&nbsp;<span class="op" id="7086370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086375"><a href="/net/http/response_test.go.html#7084952">fatalf</a></span><span class="op" id="7086381">(</span><span class="string" id="7086382">&#34;expected&nbsp;response&nbsp;length&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7086419">,</span>&nbsp;<span class="ident" id="7086421"><a href="/net/http/response_test.go.html#7086247">expectedLength</a></span><span class="op" id="7086435">,</span>&nbsp;<span class="ident" id="7086437"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086441">.</span><span class="ident" id="7086442">ContentLength</span><span class="op" id="7086455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086463">if</span>&nbsp;<span class="ident" id="7086466"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086470">.</span><span class="ident" id="7086471">Body</span>&nbsp;<span class="op" id="7086476">==</span>&nbsp;<span class="ident" id="7086479">nil</span>&nbsp;<span class="op" id="7086483">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086488"><a href="/net/http/response_test.go.html#7084952">fatalf</a></span><span class="op" id="7086494">(</span><span class="string" id="7086495">&#34;nil&nbsp;body&#34;</span><span class="op" id="7086505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086513">if</span>&nbsp;<span class="ident" id="7086516"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7086520">.</span><span class="ident" id="7086521">compressed</span>&nbsp;<span class="op" id="7086532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086537">gzReader</span><span class="op" id="7086545">,</span>&nbsp;<span class="ident" id="7086547">err</span>&nbsp;<span class="op" id="7086551">:=</span>&nbsp;<span class="ident" id="7086554"><a href="/net/http/response_test.go.html#7075662">gzip</a></span><span class="op" id="7086558">.</span><span class="ident" id="7086559">NewReader</span><span class="op" id="7086568">(</span><span class="ident" id="7086569"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086573">.</span><span class="ident" id="7086574">Body</span><span class="op" id="7086578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086583"><a href="/net/http/response_test.go.html#7085150">checkErr</a></span><span class="op" id="7086591">(</span><span class="ident" id="7086592"><a href="/net/http/response_test.go.html#7086547">err</a></span><span class="op" id="7086595">,</span>&nbsp;<span class="string" id="7086597">&#34;gzip.NewReader&#34;</span><span class="op" id="7086613">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086618"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086622">.</span><span class="ident" id="7086623">Body</span>&nbsp;<span class="op" id="7086628">=</span>&nbsp;<span class="op" id="7086630">&amp;</span><span class="ident" id="7086631"><a href="/net/http/transport.go.html#3523832">readerAndCloser</a></span><span class="op" id="7086646">{</span><span class="ident" id="7086647"><a href="/net/http/response_test.go.html#7086537">gzReader</a></span><span class="op" id="7086655">,</span>&nbsp;<span class="ident" id="7086657"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086661">.</span><span class="ident" id="7086662">Body</span><span class="op" id="7086666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086675">rbuf</span>&nbsp;<span class="op" id="7086680">:=</span>&nbsp;<span class="builtinfunc" id="7086683">make</span><span class="op" id="7086687">(</span><span class="op" id="7086688">[</span><span class="op" id="7086689">]</span><span class="builtintype" id="7086690">byte</span><span class="op" id="7086694">,</span>&nbsp;<span class="num" id="7086696">2500</span><span class="op" id="7086700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086704">n</span><span class="op" id="7086705">,</span>&nbsp;<span class="ident" id="7086707"><a href="/net/http/response_test.go.html#7086170">err</a></span>&nbsp;<span class="op" id="7086711">:=</span>&nbsp;<span class="ident" id="7086714"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7086716">.</span><span class="ident" id="7086717">ReadFull</span><span class="op" id="7086725">(</span><span class="ident" id="7086726"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7086730">.</span><span class="ident" id="7086731">Body</span><span class="op" id="7086735">,</span>&nbsp;<span class="ident" id="7086737"><a href="/net/http/response_test.go.html#7086675">rbuf</a></span><span class="op" id="7086741">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086745"><a href="/net/http/response_test.go.html#7085150">checkErr</a></span><span class="op" id="7086753">(</span><span class="ident" id="7086754"><a href="/net/http/response_test.go.html#7086170">err</a></span><span class="op" id="7086757">,</span>&nbsp;<span class="string" id="7086759">&#34;2500&nbsp;byte&nbsp;ReadFull&#34;</span><span class="op" id="7086779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086783">if</span>&nbsp;<span class="ident" id="7086786"><a href="/net/http/response_test.go.html#7086704">n</a></span>&nbsp;<span class="op" id="7086788">!=</span>&nbsp;<span class="num" id="7086791">2500</span>&nbsp;<span class="op" id="7086796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086801"><a href="/net/http/response_test.go.html#7084952">fatalf</a></span><span class="op" id="7086807">(</span><span class="string" id="7086808">&#34;ReadFull&nbsp;only&nbsp;read&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="7086837">,</span>&nbsp;<span class="ident" id="7086839"><a href="/net/http/response_test.go.html#7086704">n</a></span><span class="op" id="7086840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7086844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7086848">if</span>&nbsp;<span class="ident" id="7086851"><a href="/net/http/response_test.go.html#7084903">test</a></span><span class="op" id="7086855">.</span><span class="ident" id="7086856">compressed</span>&nbsp;<span class="op" id="7086867">==</span>&nbsp;<span class="builtintype" id="7086870">false</span>&nbsp;<span class="op" id="7086876">&amp;&amp;</span>&nbsp;<span class="op" id="7086879">!</span><span class="ident" id="7086880"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7086885">.</span><span class="ident" id="7086886">Equal</span><span class="op" id="7086891">(</span><span class="ident" id="7086892"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7086897">.</span><span class="ident" id="7086898">Repeat</span><span class="op" id="7086904">(</span><span class="op" id="7086905">[</span><span class="op" id="7086906">]</span><span class="builtintype" id="7086907">byte</span><span class="op" id="7086911">{</span><span class="string" id="7086912">&#39;x&#39;</span><span class="op" id="7086915">}</span><span class="op" id="7086916">,</span>&nbsp;<span class="num" id="7086918">2500</span><span class="op" id="7086922">)</span><span class="op" id="7086923">,</span>&nbsp;<span class="ident" id="7086925"><a href="/net/http/response_test.go.html#7086675">rbuf</a></span><span class="op" id="7086929">)</span>&nbsp;<span class="op" id="7086931">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7086936"><a href="/net/http/response_test.go.html#7084952">fatalf</a></span><span class="op" id="7086942">(</span><span class="string" id="7086943">&#34;ReadFull&nbsp;didn&#39;t&nbsp;read&nbsp;2500&nbsp;&#39;x&#39;;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7086982">,</span>&nbsp;<span class="builtintype" id="7086984">string</span><span class="op" id="7086990">(</span><span class="ident" id="7086991"><a href="/net/http/response_test.go.html#7086675">rbuf</a></span><span class="op" id="7086995">)</span><span class="op" id="7086996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087004"><a href="/net/http/response_test.go.html#7086164">resp</a></span><span class="op" id="7087008">.</span><span class="ident" id="7087009">Body</span><span class="op" id="7087013">.</span><span class="ident" id="7087014">Close</span><span class="op" id="7087019">(</span><span class="op" id="7087020">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087025">rest</span><span class="op" id="7087029">,</span>&nbsp;<span class="ident" id="7087031"><a href="/net/http/response_test.go.html#7086170">err</a></span>&nbsp;<span class="op" id="7087035">:=</span>&nbsp;<span class="ident" id="7087038"><a href="/net/http/response_test.go.html#7075707">ioutil</a></span><span class="op" id="7087044">.</span><span class="ident" id="7087045">ReadAll</span><span class="op" id="7087052">(</span><span class="ident" id="7087053"><a href="/net/http/response_test.go.html#7086132">bufr</a></span><span class="op" id="7087057">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087061"><a href="/net/http/response_test.go.html#7085150">checkErr</a></span><span class="op" id="7087069">(</span><span class="ident" id="7087070"><a href="/net/http/response_test.go.html#7086170">err</a></span><span class="op" id="7087073">,</span>&nbsp;<span class="string" id="7087075">&#34;ReadAll&nbsp;on&nbsp;remainder&#34;</span><span class="op" id="7087097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7087101">if</span>&nbsp;<span class="ident" id="7087104">e</span><span class="op" id="7087105">,</span>&nbsp;<span class="ident" id="7087107">g</span>&nbsp;<span class="op" id="7087109">:=</span>&nbsp;<span class="string" id="7087112">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7087131">,</span>&nbsp;<span class="builtintype" id="7087133">string</span><span class="op" id="7087139">(</span><span class="ident" id="7087140"><a href="/net/http/response_test.go.html#7087025">rest</a></span><span class="op" id="7087144">)</span><span class="op" id="7087145">;</span>&nbsp;<span class="ident" id="7087147"><a href="/net/http/response_test.go.html#7087104">e</a></span>&nbsp;<span class="op" id="7087149">!=</span>&nbsp;<span class="ident" id="7087152"><a href="/net/http/response_test.go.html#7087107">g</a></span>&nbsp;<span class="op" id="7087154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087159"><a href="/net/http/response_test.go.html#7087107">g</a></span>&nbsp;<span class="op" id="7087161">=</span>&nbsp;<span class="ident" id="7087163"><a href="/net/http/response_test.go.html#7075763">regexp</a></span><span class="op" id="7087169">.</span><span class="ident" id="7087170">MustCompile</span><span class="op" id="7087181">(</span><span class="string" id="7087182">`(xx+)`</span><span class="op" id="7087189">)</span><span class="op" id="7087190">.</span><span class="ident" id="7087191">ReplaceAllStringFunc</span><span class="op" id="7087211">(</span><span class="ident" id="7087212"><a href="/net/http/response_test.go.html#7087107">g</a></span><span class="op" id="7087213">,</span>&nbsp;<span class="keyword" id="7087215">func</span><span class="op" id="7087219">(</span><span class="ident" id="7087220">match</span>&nbsp;<span class="builtintype" id="7087226">string</span><span class="op" id="7087232">)</span>&nbsp;<span class="builtintype" id="7087234">string</span>&nbsp;<span class="op" id="7087241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7087247">return</span>&nbsp;<span class="ident" id="7087254"><a href="/net/http/response_test.go.html#7075694">fmt</a></span><span class="op" id="7087257">.</span><span class="ident" id="7087258">Sprintf</span><span class="op" id="7087265">(</span><span class="string" id="7087266">&#34;x(repeated&nbsp;x%d)&#34;</span><span class="op" id="7087283">,</span>&nbsp;<span class="builtinfunc" id="7087285">len</span><span class="op" id="7087288">(</span><span class="ident" id="7087289"><a href="/net/http/response_test.go.html#7087220">match</a></span><span class="op" id="7087294">)</span><span class="op" id="7087295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087300">}</span><span class="op" id="7087301">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087306"><a href="/net/http/response_test.go.html#7084952">fatalf</a></span><span class="op" id="7087312">(</span><span class="string" id="7087313">&#34;remainder&nbsp;=&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7087342">,</span>&nbsp;<span class="ident" id="7087344"><a href="/net/http/response_test.go.html#7087107">g</a></span><span class="op" id="7087345">,</span>&nbsp;<span class="ident" id="7087347"><a href="/net/http/response_test.go.html#7087104">e</a></span><span class="op" id="7087348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087355">}</span><br>
<span class="lineno"></span><span class="op" id="7087357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="keyword" id="7087360">func</span>&nbsp;<span class="ident" id="7087365">diff</span><span class="op" id="7087369">(</span><span class="ident" id="7087370">t</span>&nbsp;<span class="op" id="7087372">*</span><span class="ident" id="7087373"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7087380">.</span><span class="ident" id="7087381">T</span><span class="op" id="7087382">,</span>&nbsp;<span class="ident" id="7087384">prefix</span>&nbsp;<span class="builtintype" id="7087391">string</span><span class="op" id="7087397">,</span>&nbsp;<span class="ident" id="7087399">have</span><span class="op" id="7087403">,</span>&nbsp;<span class="ident" id="7087405">want</span>&nbsp;<span class="keyword" id="7087410">interface</span><span class="op" id="7087419">{</span><span class="op" id="7087420">}</span><span class="op" id="7087421">)</span>&nbsp;<span class="op" id="7087423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087426">hv</span>&nbsp;<span class="op" id="7087429">:=</span>&nbsp;<span class="ident" id="7087432"><a href="/net/http/response_test.go.html#7075752">reflect</a></span><span class="op" id="7087439">.</span><span class="ident" id="7087440">ValueOf</span><span class="op" id="7087447">(</span><span class="ident" id="7087448"><a href="/net/http/response_test.go.html#7087399">have</a></span><span class="op" id="7087452">)</span><span class="op" id="7087453">.</span><span class="ident" id="7087454">Elem</span><span class="op" id="7087458">(</span><span class="op" id="7087459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087462">wv</span>&nbsp;<span class="op" id="7087465">:=</span>&nbsp;<span class="ident" id="7087468"><a href="/net/http/response_test.go.html#7075752">reflect</a></span><span class="op" id="7087475">.</span><span class="ident" id="7087476">ValueOf</span><span class="op" id="7087483">(</span><span class="ident" id="7087484"><a href="/net/http/response_test.go.html#7087405">want</a></span><span class="op" id="7087488">)</span><span class="op" id="7087489">.</span><span class="ident" id="7087490">Elem</span><span class="op" id="7087494">(</span><span class="op" id="7087495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7087498">if</span>&nbsp;<span class="ident" id="7087501"><a href="/net/http/response_test.go.html#7087426">hv</a></span><span class="op" id="7087503">.</span><span class="ident" id="7087504">Type</span><span class="op" id="7087508">(</span><span class="op" id="7087509">)</span>&nbsp;<span class="op" id="7087511">!=</span>&nbsp;<span class="ident" id="7087514"><a href="/net/http/response_test.go.html#7087462">wv</a></span><span class="op" id="7087516">.</span><span class="ident" id="7087517">Type</span><span class="op" id="7087521">(</span><span class="op" id="7087522">)</span>&nbsp;<span class="op" id="7087524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087528"><a href="/net/http/response_test.go.html#7087370">t</a></span><span class="op" id="7087529">.</span><span class="ident" id="7087530">Errorf</span><span class="op" id="7087536">(</span><span class="string" id="7087537">&#34;%s:&nbsp;type&nbsp;mismatch&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7087567">,</span>&nbsp;<span class="ident" id="7087569"><a href="/net/http/response_test.go.html#7087384">prefix</a></span><span class="op" id="7087575">,</span>&nbsp;<span class="ident" id="7087577"><a href="/net/http/response_test.go.html#7087426">hv</a></span><span class="op" id="7087579">.</span><span class="ident" id="7087580">Type</span><span class="op" id="7087584">(</span><span class="op" id="7087585">)</span><span class="op" id="7087586">,</span>&nbsp;<span class="ident" id="7087588"><a href="/net/http/response_test.go.html#7087462">wv</a></span><span class="op" id="7087590">.</span><span class="ident" id="7087591">Type</span><span class="op" id="7087595">(</span><span class="op" id="7087596">)</span><span class="op" id="7087597">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7087603">for</span>&nbsp;<span class="ident" id="7087607">i</span>&nbsp;<span class="op" id="7087609">:=</span>&nbsp;<span class="num" id="7087612">0</span><span class="op" id="7087613">;</span>&nbsp;<span class="ident" id="7087615"><a href="/net/http/response_test.go.html#7087607">i</a></span>&nbsp;<span class="op" id="7087617">&lt;</span>&nbsp;<span class="ident" id="7087619"><a href="/net/http/response_test.go.html#7087426">hv</a></span><span class="op" id="7087621">.</span><span class="ident" id="7087622">NumField</span><span class="op" id="7087630">(</span><span class="op" id="7087631">)</span><span class="op" id="7087632">;</span>&nbsp;<span class="ident" id="7087634"><a href="/net/http/response_test.go.html#7087607">i</a></span><span class="op" id="7087635">++</span>&nbsp;<span class="op" id="7087638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087642">hf</span>&nbsp;<span class="op" id="7087645">:=</span>&nbsp;<span class="ident" id="7087648"><a href="/net/http/response_test.go.html#7087426">hv</a></span><span class="op" id="7087650">.</span><span class="ident" id="7087651">Field</span><span class="op" id="7087656">(</span><span class="ident" id="7087657"><a href="/net/http/response_test.go.html#7087607">i</a></span><span class="op" id="7087658">)</span><span class="op" id="7087659">.</span><span class="ident" id="7087660">Interface</span><span class="op" id="7087669">(</span><span class="op" id="7087670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087674">wf</span>&nbsp;<span class="op" id="7087677">:=</span>&nbsp;<span class="ident" id="7087680"><a href="/net/http/response_test.go.html#7087462">wv</a></span><span class="op" id="7087682">.</span><span class="ident" id="7087683">Field</span><span class="op" id="7087688">(</span><span class="ident" id="7087689"><a href="/net/http/response_test.go.html#7087607">i</a></span><span class="op" id="7087690">)</span><span class="op" id="7087691">.</span><span class="ident" id="7087692">Interface</span><span class="op" id="7087701">(</span><span class="op" id="7087702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7087706">if</span>&nbsp;<span class="op" id="7087709">!</span><span class="ident" id="7087710"><a href="/net/http/response_test.go.html#7075752">reflect</a></span><span class="op" id="7087717">.</span><span class="ident" id="7087718">DeepEqual</span><span class="op" id="7087727">(</span><span class="ident" id="7087728"><a href="/net/http/response_test.go.html#7087642">hf</a></span><span class="op" id="7087730">,</span>&nbsp;<span class="ident" id="7087732"><a href="/net/http/response_test.go.html#7087674">wf</a></span><span class="op" id="7087734">)</span>&nbsp;<span class="op" id="7087736">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087741"><a href="/net/http/response_test.go.html#7087370">t</a></span><span class="op" id="7087742">.</span><span class="ident" id="7087743">Errorf</span><span class="op" id="7087749">(</span><span class="string" id="7087750">&#34;%s:&nbsp;%s&nbsp;=&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7087771">,</span>&nbsp;<span class="ident" id="7087773"><a href="/net/http/response_test.go.html#7087384">prefix</a></span><span class="op" id="7087779">,</span>&nbsp;<span class="ident" id="7087781"><a href="/net/http/response_test.go.html#7087426">hv</a></span><span class="op" id="7087783">.</span><span class="ident" id="7087784">Type</span><span class="op" id="7087788">(</span><span class="op" id="7087789">)</span><span class="op" id="7087790">.</span><span class="ident" id="7087791">Field</span><span class="op" id="7087796">(</span><span class="ident" id="7087797"><a href="/net/http/response_test.go.html#7087607">i</a></span><span class="op" id="7087798">)</span><span class="op" id="7087799">.</span><span class="ident" id="7087800">Name</span><span class="op" id="7087804">,</span>&nbsp;<span class="ident" id="7087806"><a href="/net/http/response_test.go.html#7087642">hf</a></span><span class="op" id="7087808">,</span>&nbsp;<span class="ident" id="7087810"><a href="/net/http/response_test.go.html#7087674">wf</a></span><span class="op" id="7087812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7087819">}</span><br>
<span class="lineno"></span><span class="op" id="7087821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7087824">type</span>&nbsp;<span class="ident" id="7087829">responseLocationTest</span>&nbsp;<span class="keyword" id="7087850">struct</span>&nbsp;<span class="op" id="7087857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087860">location</span>&nbsp;<span class="builtintype" id="7087869">string</span>&nbsp;<span class="comment" id="7087876">//&nbsp;Response&#39;s&nbsp;Location&nbsp;header&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087913">requrl</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7087922">string</span>&nbsp;<span class="comment" id="7087929">//&nbsp;Response.Request.URL&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087960">want</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7087969">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087977">wantErr</span>&nbsp;&nbsp;<span class="builtintype" id="7087986">error</span><br>
<span class="lineno">570</span><span class="op" id="7087992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7087995">var</span>&nbsp;<span class="ident" id="7087999">responseLocationTests</span>&nbsp;<span class="op" id="7088021">=</span>&nbsp;<span class="op" id="7088023">[</span><span class="op" id="7088024">]</span><span class="ident" id="7088025"><a href="/net/http/response_test.go.html#7087829">responseLocationTest</a></span><span class="op" id="7088045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088048">{</span><span class="string" id="7088049">&#34;/foo&#34;</span><span class="op" id="7088055">,</span>&nbsp;<span class="string" id="7088057">&#34;http://bar.com/baz&#34;</span><span class="op" id="7088077">,</span>&nbsp;<span class="string" id="7088079">&#34;http://bar.com/foo&#34;</span><span class="op" id="7088099">,</span>&nbsp;<span class="ident" id="7088101">nil</span><span class="op" id="7088104">}</span><span class="op" id="7088105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088108">{</span><span class="string" id="7088109">&#34;http://foo.com/&#34;</span><span class="op" id="7088126">,</span>&nbsp;<span class="string" id="7088128">&#34;http://bar.com/baz&#34;</span><span class="op" id="7088148">,</span>&nbsp;<span class="string" id="7088150">&#34;http://foo.com/&#34;</span><span class="op" id="7088167">,</span>&nbsp;<span class="ident" id="7088169">nil</span><span class="op" id="7088172">}</span><span class="op" id="7088173">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088176">{</span><span class="string" id="7088177">&#34;&#34;</span><span class="op" id="7088179">,</span>&nbsp;<span class="string" id="7088181">&#34;http://bar.com/baz&#34;</span><span class="op" id="7088201">,</span>&nbsp;<span class="string" id="7088203">&#34;&#34;</span><span class="op" id="7088205">,</span>&nbsp;<span class="ident" id="7088207"><a href="/net/http/response.go.html#3394350">ErrNoLocation</a></span><span class="op" id="7088220">}</span><span class="op" id="7088221">,</span><br>
<span class="lineno"></span><span class="op" id="7088223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7088226">func</span>&nbsp;<span class="ident" id="7088231">TestLocationResponse</span><span class="op" id="7088251">(</span><span class="ident" id="7088252">t</span>&nbsp;<span class="op" id="7088254">*</span><span class="ident" id="7088255"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7088262">.</span><span class="ident" id="7088263">T</span><span class="op" id="7088264">)</span>&nbsp;<span class="op" id="7088266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088269">for</span>&nbsp;<span class="ident" id="7088273">i</span><span class="op" id="7088274">,</span>&nbsp;<span class="ident" id="7088276">tt</span>&nbsp;<span class="op" id="7088279">:=</span>&nbsp;<span class="keyword" id="7088282">range</span>&nbsp;<span class="ident" id="7088288"><a href="/net/http/response_test.go.html#7087999">responseLocationTests</a></span>&nbsp;<span class="op" id="7088310">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088314">res</span>&nbsp;<span class="op" id="7088318">:=</span>&nbsp;<span class="builtinfunc" id="7088321">new</span><span class="op" id="7088324">(</span><span class="ident" id="7088325"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7088333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088337"><a href="/net/http/response_test.go.html#7088314">res</a></span><span class="op" id="7088340">.</span><span class="ident" id="7088341">Header</span>&nbsp;<span class="op" id="7088348">=</span>&nbsp;<span class="builtinfunc" id="7088350">make</span><span class="op" id="7088354">(</span><span class="ident" id="7088355"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7088361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088365"><a href="/net/http/response_test.go.html#7088314">res</a></span><span class="op" id="7088368">.</span><span class="ident" id="7088369">Header</span><span class="op" id="7088375">.</span><span class="ident" id="7088376">Set</span><span class="op" id="7088379">(</span><span class="string" id="7088380">&#34;Location&#34;</span><span class="op" id="7088390">,</span>&nbsp;<span class="ident" id="7088392"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088394">.</span><span class="ident" id="7088395">location</span><span class="op" id="7088403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088407">if</span>&nbsp;<span class="ident" id="7088410"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088412">.</span><span class="ident" id="7088413">requrl</span>&nbsp;<span class="op" id="7088420">!=</span>&nbsp;<span class="string" id="7088423">&#34;&#34;</span>&nbsp;<span class="op" id="7088426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088431"><a href="/net/http/response_test.go.html#7088314">res</a></span><span class="op" id="7088434">.</span><span class="ident" id="7088435">Request</span>&nbsp;<span class="op" id="7088443">=</span>&nbsp;<span class="op" id="7088445">&amp;</span><span class="ident" id="7088446"><a href="/net/http/request.go.html#3366486">Request</a></span><span class="op" id="7088453">{</span><span class="op" id="7088454">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088459">var</span>&nbsp;<span class="ident" id="7088463">err</span>&nbsp;<span class="builtintype" id="7088467">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088476"><a href="/net/http/response_test.go.html#7088314">res</a></span><span class="op" id="7088479">.</span><span class="ident" id="7088480">Request</span><span class="op" id="7088487">.</span><span class="ident" id="7088488">URL</span><span class="op" id="7088491">,</span>&nbsp;<span class="ident" id="7088493"><a href="/net/http/response_test.go.html#7088463">err</a></span>&nbsp;<span class="op" id="7088497">=</span>&nbsp;<span class="ident" id="7088499"><a href="/net/http/response_test.go.html#7075741">url</a></span><span class="op" id="7088502">.</span><span class="ident" id="7088503">Parse</span><span class="op" id="7088508">(</span><span class="ident" id="7088509"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088511">.</span><span class="ident" id="7088512">requrl</span><span class="op" id="7088518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088523">if</span>&nbsp;<span class="ident" id="7088526"><a href="/net/http/response_test.go.html#7088463">err</a></span>&nbsp;<span class="op" id="7088530">!=</span>&nbsp;<span class="ident" id="7088533">nil</span>&nbsp;<span class="op" id="7088537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088543"><a href="/net/http/response_test.go.html#7088252">t</a></span><span class="op" id="7088544">.</span><span class="ident" id="7088545">Fatalf</span><span class="op" id="7088551">(</span><span class="string" id="7088552">&#34;bad&nbsp;test&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7088573">,</span>&nbsp;<span class="ident" id="7088575"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088577">.</span><span class="ident" id="7088578">requrl</span><span class="op" id="7088584">,</span>&nbsp;<span class="ident" id="7088586"><a href="/net/http/response_test.go.html#7088463">err</a></span><span class="op" id="7088589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088594">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088603">got</span><span class="op" id="7088606">,</span>&nbsp;<span class="ident" id="7088608">err</span>&nbsp;<span class="op" id="7088612">:=</span>&nbsp;<span class="ident" id="7088615"><a href="/net/http/response_test.go.html#7088314">res</a></span><span class="op" id="7088618">.</span><span class="ident" id="7088619">Location</span><span class="op" id="7088627">(</span><span class="op" id="7088628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088632">if</span>&nbsp;<span class="ident" id="7088635"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088637">.</span><span class="ident" id="7088638">wantErr</span>&nbsp;<span class="op" id="7088646">!=</span>&nbsp;<span class="ident" id="7088649">nil</span>&nbsp;<span class="op" id="7088653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088658">if</span>&nbsp;<span class="ident" id="7088661"><a href="/net/http/response_test.go.html#7088608">err</a></span>&nbsp;<span class="op" id="7088665">==</span>&nbsp;<span class="ident" id="7088668">nil</span>&nbsp;<span class="op" id="7088672">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088678"><a href="/net/http/response_test.go.html#7088252">t</a></span><span class="op" id="7088679">.</span><span class="ident" id="7088680">Errorf</span><span class="op" id="7088686">(</span><span class="string" id="7088687">&#34;%d.&nbsp;err=nil;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7088709">,</span>&nbsp;<span class="ident" id="7088711"><a href="/net/http/response_test.go.html#7088273">i</a></span><span class="op" id="7088712">,</span>&nbsp;<span class="ident" id="7088714"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088716">.</span><span class="ident" id="7088717">wantErr</span><span class="op" id="7088724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088730">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088747">if</span>&nbsp;<span class="ident" id="7088750">g</span><span class="op" id="7088751">,</span>&nbsp;<span class="ident" id="7088753">e</span>&nbsp;<span class="op" id="7088755">:=</span>&nbsp;<span class="ident" id="7088758"><a href="/net/http/response_test.go.html#7088608">err</a></span><span class="op" id="7088761">.</span><span class="ident" id="7088762">Error</span><span class="op" id="7088767">(</span><span class="op" id="7088768">)</span><span class="op" id="7088769">,</span>&nbsp;<span class="ident" id="7088771"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088773">.</span><span class="ident" id="7088774">wantErr</span><span class="op" id="7088781">.</span><span class="ident" id="7088782">Error</span><span class="op" id="7088787">(</span><span class="op" id="7088788">)</span><span class="op" id="7088789">;</span>&nbsp;<span class="ident" id="7088791"><a href="/net/http/response_test.go.html#7088750">g</a></span>&nbsp;<span class="op" id="7088793">!=</span>&nbsp;<span class="ident" id="7088796"><a href="/net/http/response_test.go.html#7088753">e</a></span>&nbsp;<span class="op" id="7088798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088804"><a href="/net/http/response_test.go.html#7088252">t</a></span><span class="op" id="7088805">.</span><span class="ident" id="7088806">Errorf</span><span class="op" id="7088812">(</span><span class="string" id="7088813">&#34;%d.&nbsp;err=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7088834">,</span>&nbsp;<span class="ident" id="7088836"><a href="/net/http/response_test.go.html#7088273">i</a></span><span class="op" id="7088837">,</span>&nbsp;<span class="ident" id="7088839"><a href="/net/http/response_test.go.html#7088750">g</a></span><span class="op" id="7088840">,</span>&nbsp;<span class="ident" id="7088842"><a href="/net/http/response_test.go.html#7088753">e</a></span><span class="op" id="7088843">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088849">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088866">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088881">if</span>&nbsp;<span class="ident" id="7088884"><a href="/net/http/response_test.go.html#7088608">err</a></span>&nbsp;<span class="op" id="7088888">!=</span>&nbsp;<span class="ident" id="7088891">nil</span>&nbsp;<span class="op" id="7088895">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088900"><a href="/net/http/response_test.go.html#7088252">t</a></span><span class="op" id="7088901">.</span><span class="ident" id="7088902">Errorf</span><span class="op" id="7088908">(</span><span class="string" id="7088909">&#34;%d.&nbsp;err=%q&#34;</span><span class="op" id="7088921">,</span>&nbsp;<span class="ident" id="7088923"><a href="/net/http/response_test.go.html#7088273">i</a></span><span class="op" id="7088924">,</span>&nbsp;<span class="ident" id="7088926"><a href="/net/http/response_test.go.html#7088608">err</a></span><span class="op" id="7088929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088934">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7088945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7088949">if</span>&nbsp;<span class="ident" id="7088952">g</span><span class="op" id="7088953">,</span>&nbsp;<span class="ident" id="7088955">e</span>&nbsp;<span class="op" id="7088957">:=</span>&nbsp;<span class="ident" id="7088960"><a href="/net/http/response_test.go.html#7088603">got</a></span><span class="op" id="7088963">.</span><span class="ident" id="7088964">String</span><span class="op" id="7088970">(</span><span class="op" id="7088971">)</span><span class="op" id="7088972">,</span>&nbsp;<span class="ident" id="7088974"><a href="/net/http/response_test.go.html#7088276">tt</a></span><span class="op" id="7088976">.</span><span class="ident" id="7088977">want</span><span class="op" id="7088981">;</span>&nbsp;<span class="ident" id="7088983"><a href="/net/http/response_test.go.html#7088952">g</a></span>&nbsp;<span class="op" id="7088985">!=</span>&nbsp;<span class="ident" id="7088988"><a href="/net/http/response_test.go.html#7088955">e</a></span>&nbsp;<span class="op" id="7088990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7088995"><a href="/net/http/response_test.go.html#7088252">t</a></span><span class="op" id="7088996">.</span><span class="ident" id="7088997">Errorf</span><span class="op" id="7089003">(</span><span class="string" id="7089004">&#34;%d.&nbsp;Location=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7089030">,</span>&nbsp;<span class="ident" id="7089032"><a href="/net/http/response_test.go.html#7088273">i</a></span><span class="op" id="7089033">,</span>&nbsp;<span class="ident" id="7089035"><a href="/net/http/response_test.go.html#7088952">g</a></span><span class="op" id="7089036">,</span>&nbsp;<span class="ident" id="7089038"><a href="/net/http/response_test.go.html#7088955">e</a></span><span class="op" id="7089039">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089046">}</span><br>
<span class="lineno"></span><span class="op" id="7089048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7089051">func</span>&nbsp;<span class="ident" id="7089056">TestResponseStatusStutter</span><span class="op" id="7089081">(</span><span class="ident" id="7089082">t</span>&nbsp;<span class="op" id="7089084">*</span><span class="ident" id="7089085"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7089092">.</span><span class="ident" id="7089093">T</span><span class="op" id="7089094">)</span>&nbsp;<span class="op" id="7089096">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089099">r</span>&nbsp;<span class="op" id="7089101">:=</span>&nbsp;<span class="op" id="7089104">&amp;</span><span class="ident" id="7089105"><a href="/net/http/response.go.html#3392041">Response</a></span><span class="op" id="7089113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089117">Status</span><span class="op" id="7089123">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7089129">&#34;123&nbsp;some&nbsp;status&#34;</span><span class="op" id="7089146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089150">StatusCode</span><span class="op" id="7089160">:</span>&nbsp;<span class="num" id="7089162">123</span><span class="op" id="7089165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089169">ProtoMajor</span><span class="op" id="7089179">:</span>&nbsp;<span class="num" id="7089181">1</span><span class="op" id="7089182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089186">ProtoMinor</span><span class="op" id="7089196">:</span>&nbsp;<span class="num" id="7089198">3</span><span class="op" id="7089199">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089205">var</span>&nbsp;<span class="ident" id="7089209">buf</span>&nbsp;<span class="ident" id="7089213"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7089218">.</span><span class="ident" id="7089219">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089227"><a href="/net/http/response_test.go.html#7089099">r</a></span><span class="op" id="7089228">.</span><span class="ident" id="7089229">Write</span><span class="op" id="7089234">(</span><span class="op" id="7089235">&amp;</span><span class="ident" id="7089236"><a href="/net/http/response_test.go.html#7089209">buf</a></span><span class="op" id="7089239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089242">if</span>&nbsp;<span class="ident" id="7089245"><a href="/net/http/response_test.go.html#7075773">strings</a></span><span class="op" id="7089252">.</span><span class="ident" id="7089253">Contains</span><span class="op" id="7089261">(</span><span class="ident" id="7089262"><a href="/net/http/response_test.go.html#7089209">buf</a></span><span class="op" id="7089265">.</span><span class="ident" id="7089266">String</span><span class="op" id="7089272">(</span><span class="op" id="7089273">)</span><span class="op" id="7089274">,</span>&nbsp;<span class="string" id="7089276">&#34;123&nbsp;123&#34;</span><span class="op" id="7089285">)</span>&nbsp;<span class="op" id="7089287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089291"><a href="/net/http/response_test.go.html#7089082">t</a></span><span class="op" id="7089292">.</span><span class="ident" id="7089293">Errorf</span><span class="op" id="7089299">(</span><span class="string" id="7089300">&#34;stutter&nbsp;in&nbsp;status:&nbsp;%s&#34;</span><span class="op" id="7089323">,</span>&nbsp;<span class="ident" id="7089325"><a href="/net/http/response_test.go.html#7089209">buf</a></span><span class="op" id="7089328">.</span><span class="ident" id="7089329">String</span><span class="op" id="7089335">(</span><span class="op" id="7089336">)</span><span class="op" id="7089337">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089340">}</span><br>
<span class="lineno"></span><span class="op" id="7089342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7089345">func</span>&nbsp;<span class="ident" id="7089350">TestResponseContentLengthShortBody</span><span class="op" id="7089384">(</span><span class="ident" id="7089385">t</span>&nbsp;<span class="op" id="7089387">*</span><span class="ident" id="7089388"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7089395">.</span><span class="ident" id="7089396">T</span><span class="op" id="7089397">)</span>&nbsp;<span class="op" id="7089399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089402">const</span>&nbsp;<span class="ident" id="7089408">shortBody</span>&nbsp;<span class="op" id="7089418">=</span>&nbsp;<span class="string" id="7089420">&#34;Short&nbsp;body,&nbsp;not&nbsp;123&nbsp;bytes.&#34;</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089450">br</span>&nbsp;<span class="op" id="7089453">:=</span>&nbsp;<span class="ident" id="7089456"><a href="/net/http/response_test.go.html#7075644">bufio</a></span><span class="op" id="7089461">.</span><span class="ident" id="7089462">NewReader</span><span class="op" id="7089471">(</span><span class="ident" id="7089472"><a href="/net/http/response_test.go.html#7075773">strings</a></span><span class="op" id="7089479">.</span><span class="ident" id="7089480">NewReader</span><span class="op" id="7089489">(</span><span class="string" id="7089490">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7089512">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7089516">&#34;Content-Length:&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7089542">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7089546">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7089553">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089557"><a href="/net/http/response_test.go.html#7089408">shortBody</a></span><span class="op" id="7089566">)</span><span class="op" id="7089567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089570">res</span><span class="op" id="7089573">,</span>&nbsp;<span class="ident" id="7089575">err</span>&nbsp;<span class="op" id="7089579">:=</span>&nbsp;<span class="ident" id="7089582"><a href="/net/http/response.go.html#3395244">ReadResponse</a></span><span class="op" id="7089594">(</span><span class="ident" id="7089595"><a href="/net/http/response_test.go.html#7089450">br</a></span><span class="op" id="7089597">,</span>&nbsp;<span class="op" id="7089599">&amp;</span><span class="ident" id="7089600"><a href="/net/http/request.go.html#3366486">Request</a></span><span class="op" id="7089607">{</span><span class="ident" id="7089608">Method</span><span class="op" id="7089614">:</span>&nbsp;<span class="string" id="7089616">&#34;GET&#34;</span><span class="op" id="7089621">}</span><span class="op" id="7089622">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089625">if</span>&nbsp;<span class="ident" id="7089628"><a href="/net/http/response_test.go.html#7089575">err</a></span>&nbsp;<span class="op" id="7089632">!=</span>&nbsp;<span class="ident" id="7089635">nil</span>&nbsp;<span class="op" id="7089639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089643"><a href="/net/http/response_test.go.html#7089385">t</a></span><span class="op" id="7089644">.</span><span class="ident" id="7089645">Fatal</span><span class="op" id="7089650">(</span><span class="ident" id="7089651"><a href="/net/http/response_test.go.html#7089575">err</a></span><span class="op" id="7089654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089660">if</span>&nbsp;<span class="ident" id="7089663"><a href="/net/http/response_test.go.html#7089570">res</a></span><span class="op" id="7089666">.</span><span class="ident" id="7089667">ContentLength</span>&nbsp;<span class="op" id="7089681">!=</span>&nbsp;<span class="num" id="7089684">123</span>&nbsp;<span class="op" id="7089688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089692"><a href="/net/http/response_test.go.html#7089385">t</a></span><span class="op" id="7089693">.</span><span class="ident" id="7089694">Fatalf</span><span class="op" id="7089700">(</span><span class="string" id="7089701">&#34;Content-Length&nbsp;=&nbsp;%d;&nbsp;want&nbsp;123&#34;</span><span class="op" id="7089732">,</span>&nbsp;<span class="ident" id="7089734"><a href="/net/http/response_test.go.html#7089570">res</a></span><span class="op" id="7089737">.</span><span class="ident" id="7089738">ContentLength</span><span class="op" id="7089751">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089757">var</span>&nbsp;<span class="ident" id="7089761">buf</span>&nbsp;<span class="ident" id="7089765"><a href="/net/http/response_test.go.html#7075653">bytes</a></span><span class="op" id="7089770">.</span><span class="ident" id="7089771">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089779">n</span><span class="op" id="7089780">,</span>&nbsp;<span class="ident" id="7089782"><a href="/net/http/response_test.go.html#7089575">err</a></span>&nbsp;<span class="op" id="7089786">:=</span>&nbsp;<span class="ident" id="7089789"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7089791">.</span><span class="ident" id="7089792">Copy</span><span class="op" id="7089796">(</span><span class="op" id="7089797">&amp;</span><span class="ident" id="7089798"><a href="/net/http/response_test.go.html#7089761">buf</a></span><span class="op" id="7089801">,</span>&nbsp;<span class="ident" id="7089803"><a href="/net/http/response_test.go.html#7089570">res</a></span><span class="op" id="7089806">.</span><span class="ident" id="7089807">Body</span><span class="op" id="7089811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089814">if</span>&nbsp;<span class="ident" id="7089817"><a href="/net/http/response_test.go.html#7089779">n</a></span>&nbsp;<span class="op" id="7089819">!=</span>&nbsp;<span class="ident" id="7089822">int64</span><span class="op" id="7089827">(</span><span class="builtinfunc" id="7089828">len</span><span class="op" id="7089831">(</span><span class="ident" id="7089832"><a href="/net/http/response_test.go.html#7089408">shortBody</a></span><span class="op" id="7089841">)</span><span class="op" id="7089842">)</span>&nbsp;<span class="op" id="7089844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089848"><a href="/net/http/response_test.go.html#7089385">t</a></span><span class="op" id="7089849">.</span><span class="ident" id="7089850">Errorf</span><span class="op" id="7089856">(</span><span class="string" id="7089857">&#34;Copied&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d,&nbsp;len(%q)&#34;</span><span class="op" id="7089892">,</span>&nbsp;<span class="ident" id="7089894"><a href="/net/http/response_test.go.html#7089779">n</a></span><span class="op" id="7089895">,</span>&nbsp;<span class="builtinfunc" id="7089897">len</span><span class="op" id="7089900">(</span><span class="ident" id="7089901"><a href="/net/http/response_test.go.html#7089408">shortBody</a></span><span class="op" id="7089910">)</span><span class="op" id="7089911">,</span>&nbsp;<span class="ident" id="7089913"><a href="/net/http/response_test.go.html#7089408">shortBody</a></span><span class="op" id="7089922">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7089925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7089928">if</span>&nbsp;<span class="ident" id="7089931"><a href="/net/http/response_test.go.html#7089761">buf</a></span><span class="op" id="7089934">.</span><span class="ident" id="7089935">String</span><span class="op" id="7089941">(</span><span class="op" id="7089942">)</span>&nbsp;<span class="op" id="7089944">!=</span>&nbsp;<span class="ident" id="7089947"><a href="/net/http/response_test.go.html#7089408">shortBody</a></span>&nbsp;<span class="op" id="7089957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7089961"><a href="/net/http/response_test.go.html#7089385">t</a></span><span class="op" id="7089962">.</span><span class="ident" id="7089963">Errorf</span><span class="op" id="7089969">(</span><span class="string" id="7089970">&#34;Read&nbsp;body&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7089993">,</span>&nbsp;<span class="ident" id="7089995"><a href="/net/http/response_test.go.html#7089761">buf</a></span><span class="op" id="7089998">.</span><span class="ident" id="7089999">String</span><span class="op" id="7090005">(</span><span class="op" id="7090006">)</span><span class="op" id="7090007">,</span>&nbsp;<span class="ident" id="7090009"><a href="/net/http/response_test.go.html#7089408">shortBody</a></span><span class="op" id="7090018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7090021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7090024">if</span>&nbsp;<span class="ident" id="7090027"><a href="/net/http/response_test.go.html#7089575">err</a></span>&nbsp;<span class="op" id="7090031">!=</span>&nbsp;<span class="ident" id="7090034"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7090036">.</span><span class="ident" id="7090037">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7090054">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090058"><a href="/net/http/response_test.go.html#7089385">t</a></span><span class="op" id="7090059">.</span><span class="ident" id="7090060">Errorf</span><span class="op" id="7090066">(</span><span class="string" id="7090067">&#34;io.Copy&nbsp;error&nbsp;=&nbsp;%#v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7090114">,</span>&nbsp;<span class="ident" id="7090116"><a href="/net/http/response_test.go.html#7089575">err</a></span><span class="op" id="7090119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7090122">}</span><br>
<span class="lineno"></span><span class="op" id="7090124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7090127">func</span>&nbsp;<span class="ident" id="7090132">TestReadResponseUnexpectedEOF</span><span class="op" id="7090161">(</span><span class="ident" id="7090162">t</span>&nbsp;<span class="op" id="7090164">*</span><span class="ident" id="7090165"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7090172">.</span><span class="ident" id="7090173">T</span><span class="op" id="7090174">)</span>&nbsp;<span class="op" id="7090176">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090179">br</span>&nbsp;<span class="op" id="7090182">:=</span>&nbsp;<span class="ident" id="7090185"><a href="/net/http/response_test.go.html#7075644">bufio</a></span><span class="op" id="7090190">.</span><span class="ident" id="7090191">NewReader</span><span class="op" id="7090200">(</span><span class="ident" id="7090201"><a href="/net/http/response_test.go.html#7075773">strings</a></span><span class="op" id="7090208">.</span><span class="ident" id="7090209">NewReader</span><span class="op" id="7090218">(</span><span class="string" id="7090219">&#34;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently\r\n&#34;</span>&nbsp;<span class="op" id="7090256">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7090260">&#34;Location:&nbsp;http://example.com&#34;</span><span class="op" id="7090290">)</span><span class="op" id="7090291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090294">_</span><span class="op" id="7090295">,</span>&nbsp;<span class="ident" id="7090297">err</span>&nbsp;<span class="op" id="7090301">:=</span>&nbsp;<span class="ident" id="7090304"><a href="/net/http/response.go.html#3395244">ReadResponse</a></span><span class="op" id="7090316">(</span><span class="ident" id="7090317"><a href="/net/http/response_test.go.html#7090179">br</a></span><span class="op" id="7090319">,</span>&nbsp;<span class="ident" id="7090321">nil</span><span class="op" id="7090324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7090327">if</span>&nbsp;<span class="ident" id="7090330"><a href="/net/http/response_test.go.html#7090297">err</a></span>&nbsp;<span class="op" id="7090334">!=</span>&nbsp;<span class="ident" id="7090337"><a href="/net/http/response_test.go.html#7075701">io</a></span><span class="op" id="7090339">.</span><span class="ident" id="7090340">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7090357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090361"><a href="/net/http/response_test.go.html#7090162">t</a></span><span class="op" id="7090362">.</span><span class="ident" id="7090363">Errorf</span><span class="op" id="7090369">(</span><span class="string" id="7090370">&#34;ReadResponse&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7090415">,</span>&nbsp;<span class="ident" id="7090417"><a href="/net/http/response_test.go.html#7090297">err</a></span><span class="op" id="7090420">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7090423">}</span><br>
<span class="lineno"></span><span class="op" id="7090425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7090428">func</span>&nbsp;<span class="ident" id="7090433">TestNeedsSniff</span><span class="op" id="7090447">(</span><span class="ident" id="7090448">t</span>&nbsp;<span class="op" id="7090450">*</span><span class="ident" id="7090451"><a href="/net/http/response_test.go.html#7075784">testing</a></span><span class="op" id="7090458">.</span><span class="ident" id="7090459">T</span><span class="op" id="7090460">)</span>&nbsp;<span class="op" id="7090462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7090465">//&nbsp;needsSniff&nbsp;returns&nbsp;true&nbsp;with&nbsp;an&nbsp;empty&nbsp;response.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090517">r</span>&nbsp;<span class="op" id="7090519">:=</span>&nbsp;<span class="op" id="7090522">&amp;</span><span class="ident" id="7090523"><a href="/net/http/server.go.html#3408205">response</a></span><span class="op" id="7090531">{</span><span class="op" id="7090532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7090535">if</span>&nbsp;<span class="ident" id="7090538">got</span><span class="op" id="7090541">,</span>&nbsp;<span class="ident" id="7090543">want</span>&nbsp;<span class="op" id="7090548">:=</span>&nbsp;<span class="ident" id="7090551"><a href="/net/http/response_test.go.html#7090517">r</a></span><span class="op" id="7090552">.</span><span class="ident" id="7090553">needsSniff</span><span class="op" id="7090563">(</span><span class="op" id="7090564">)</span><span class="op" id="7090565">,</span>&nbsp;<span class="builtintype" id="7090567">true</span><span class="op" id="7090571">;</span>&nbsp;<span class="ident" id="7090573"><a href="/net/http/response_test.go.html#7090538">got</a></span>&nbsp;<span class="op" id="7090577">!=</span>&nbsp;<span class="ident" id="7090580"><a href="/net/http/response_test.go.html#7090543">want</a></span>&nbsp;<span class="op" id="7090585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090589"><a href="/net/http/response_test.go.html#7090448">t</a></span><span class="op" id="7090590">.</span><span class="ident" id="7090591">Errorf</span><span class="op" id="7090597">(</span><span class="string" id="7090598">&#34;needsSniff&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7090624">,</span>&nbsp;<span class="ident" id="7090626"><a href="/net/http/response_test.go.html#7090538">got</a></span><span class="op" id="7090629">,</span>&nbsp;<span class="ident" id="7090631"><a href="/net/http/response_test.go.html#7090543">want</a></span><span class="op" id="7090635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7090638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7090641">//&nbsp;needsSniff&nbsp;returns&nbsp;false&nbsp;when&nbsp;Content-Type&nbsp;=&nbsp;nil.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090695"><a href="/net/http/response_test.go.html#7090517">r</a></span><span class="op" id="7090696">.</span><span class="ident" id="7090697">handlerHeader</span>&nbsp;<span class="op" id="7090711">=</span>&nbsp;<span class="ident" id="7090713"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7090719">{</span><span class="string" id="7090720">&#34;Content-Type&#34;</span><span class="op" id="7090734">:</span>&nbsp;<span class="ident" id="7090736">nil</span><span class="op" id="7090739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7090742">if</span>&nbsp;<span class="ident" id="7090745">got</span><span class="op" id="7090748">,</span>&nbsp;<span class="ident" id="7090750">want</span>&nbsp;<span class="op" id="7090755">:=</span>&nbsp;<span class="ident" id="7090758"><a href="/net/http/response_test.go.html#7090517">r</a></span><span class="op" id="7090759">.</span><span class="ident" id="7090760">needsSniff</span><span class="op" id="7090770">(</span><span class="op" id="7090771">)</span><span class="op" id="7090772">,</span>&nbsp;<span class="builtintype" id="7090774">false</span><span class="op" id="7090779">;</span>&nbsp;<span class="ident" id="7090781"><a href="/net/http/response_test.go.html#7090745">got</a></span>&nbsp;<span class="op" id="7090785">!=</span>&nbsp;<span class="ident" id="7090788"><a href="/net/http/response_test.go.html#7090750">want</a></span>&nbsp;<span class="op" id="7090793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090797"><a href="/net/http/response_test.go.html#7090448">t</a></span><span class="op" id="7090798">.</span><span class="ident" id="7090799">Errorf</span><span class="op" id="7090805">(</span><span class="string" id="7090806">&#34;needsSniff&nbsp;empty&nbsp;Content-Type&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7090851">,</span>&nbsp;<span class="ident" id="7090853"><a href="/net/http/response_test.go.html#7090745">got</a></span><span class="op" id="7090856">,</span>&nbsp;<span class="ident" id="7090858"><a href="/net/http/response_test.go.html#7090750">want</a></span><span class="op" id="7090862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7090865">}</span><br>
<span class="lineno"></span><span class="op" id="7090867">}</span>
</div>
</body>
</html>
