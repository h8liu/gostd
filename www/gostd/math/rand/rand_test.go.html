<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7599172">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7599227">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7599281">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7599332">package</span>&nbsp;<span class="ident" id="7599340">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7599346">import</span>&nbsp;<span class="op" id="7599353">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7599356">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7599366">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7599373">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7599381">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7599391">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7599394">const</span>&nbsp;<span class="op" id="7599400">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599403">numTestSamples</span>&nbsp;<span class="op" id="7599418">=</span>&nbsp;<span class="num" id="7599420">10000</span><br>
<span class="lineno"></span><span class="op" id="7599426">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7599429">type</span>&nbsp;<span class="ident" id="7599434">statsResults</span>&nbsp;<span class="keyword" id="7599447">struct</span>&nbsp;<span class="op" id="7599454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599457">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7599469">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599478">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7599490">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599499">closeEnough</span>&nbsp;<span class="builtintype" id="7599511">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599520">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7599532">float64</span><br>
<span class="lineno"></span><span class="op" id="7599540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7599543">func</span>&nbsp;<span class="ident" id="7599548">max</span><span class="op" id="7599551">(</span><span class="ident" id="7599552">a</span><span class="op" id="7599553">,</span>&nbsp;<span class="ident" id="7599555">b</span>&nbsp;<span class="builtintype" id="7599557">float64</span><span class="op" id="7599564">)</span>&nbsp;<span class="builtintype" id="7599566">float64</span>&nbsp;<span class="op" id="7599574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599577">if</span>&nbsp;<span class="ident" id="7599580">a</span>&nbsp;<span class="op" id="7599582">&gt;</span>&nbsp;<span class="ident" id="7599584">b</span>&nbsp;<span class="op" id="7599586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599590">return</span>&nbsp;<span class="ident" id="7599597">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599603">return</span>&nbsp;<span class="ident" id="7599610">b</span><br>
<span class="lineno">30</span><span class="op" id="7599612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7599615">func</span>&nbsp;<span class="ident" id="7599620">nearEqual</span><span class="op" id="7599629">(</span><span class="ident" id="7599630">a</span><span class="op" id="7599631">,</span>&nbsp;<span class="ident" id="7599633">b</span><span class="op" id="7599634">,</span>&nbsp;<span class="ident" id="7599636">closeEnough</span><span class="op" id="7599647">,</span>&nbsp;<span class="ident" id="7599649">maxError</span>&nbsp;<span class="builtintype" id="7599658">float64</span><span class="op" id="7599665">)</span>&nbsp;<span class="builtintype" id="7599667">bool</span>&nbsp;<span class="op" id="7599672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599675">absDiff</span>&nbsp;<span class="op" id="7599683">:=</span>&nbsp;<span class="ident" id="7599686">math</span><span class="op" id="7599690">.</span><span class="ident" id="7599691">Abs</span><span class="op" id="7599694">(</span><span class="ident" id="7599695">a</span>&nbsp;<span class="op" id="7599697">-</span>&nbsp;<span class="ident" id="7599699">b</span><span class="op" id="7599700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599703">if</span>&nbsp;<span class="ident" id="7599706">absDiff</span>&nbsp;<span class="op" id="7599714">&lt;</span>&nbsp;<span class="ident" id="7599716">closeEnough</span>&nbsp;<span class="op" id="7599728">{</span>&nbsp;<span class="comment" id="7599730">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599800">return</span>&nbsp;<span class="builtintype" id="7599807">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599816">return</span>&nbsp;<span class="ident" id="7599823">absDiff</span><span class="op" id="7599830">/</span><span class="ident" id="7599831">max</span><span class="op" id="7599834">(</span><span class="ident" id="7599835">math</span><span class="op" id="7599839">.</span><span class="ident" id="7599840">Abs</span><span class="op" id="7599843">(</span><span class="ident" id="7599844">a</span><span class="op" id="7599845">)</span><span class="op" id="7599846">,</span>&nbsp;<span class="ident" id="7599848">math</span><span class="op" id="7599852">.</span><span class="ident" id="7599853">Abs</span><span class="op" id="7599856">(</span><span class="ident" id="7599857">b</span><span class="op" id="7599858">)</span><span class="op" id="7599859">)</span>&nbsp;<span class="op" id="7599861">&lt;</span>&nbsp;<span class="ident" id="7599863">maxError</span><br>
<span class="lineno"></span><span class="op" id="7599872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7599875">var</span>&nbsp;<span class="ident" id="7599879">testSeeds</span>&nbsp;<span class="op" id="7599889">=</span>&nbsp;<span class="op" id="7599891">[</span><span class="op" id="7599892">]</span><span class="builtintype" id="7599893">int64</span><span class="op" id="7599898">{</span><span class="num" id="7599899">1</span><span class="op" id="7599900">,</span>&nbsp;<span class="num" id="7599902">1754801282</span><span class="op" id="7599912">,</span>&nbsp;<span class="num" id="7599914">1698661970</span><span class="op" id="7599924">,</span>&nbsp;<span class="num" id="7599926">1550503961</span><span class="op" id="7599936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7599939">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7600013">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7600046">func</span>&nbsp;<span class="op" id="7600051">(</span><span class="ident" id="7600052">this</span>&nbsp;<span class="op" id="7600057">*</span><span class="ident" id="7600058">statsResults</span><span class="op" id="7600070">)</span>&nbsp;<span class="ident" id="7600072">checkSimilarDistribution</span><span class="op" id="7600096">(</span><span class="ident" id="7600097">expected</span>&nbsp;<span class="op" id="7600106">*</span><span class="ident" id="7600107">statsResults</span><span class="op" id="7600119">)</span>&nbsp;<span class="builtintype" id="7600121">error</span>&nbsp;<span class="op" id="7600127">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600130">if</span>&nbsp;<span class="op" id="7600133">!</span><span class="ident" id="7600134">nearEqual</span><span class="op" id="7600143">(</span><span class="ident" id="7600144">this</span><span class="op" id="7600148">.</span><span class="ident" id="7600149">mean</span><span class="op" id="7600153">,</span>&nbsp;<span class="ident" id="7600155">expected</span><span class="op" id="7600163">.</span><span class="ident" id="7600164">mean</span><span class="op" id="7600168">,</span>&nbsp;<span class="ident" id="7600170">expected</span><span class="op" id="7600178">.</span><span class="ident" id="7600179">closeEnough</span><span class="op" id="7600190">,</span>&nbsp;<span class="ident" id="7600192">expected</span><span class="op" id="7600200">.</span><span class="ident" id="7600201">maxError</span><span class="op" id="7600209">)</span>&nbsp;<span class="op" id="7600211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600215">s</span>&nbsp;<span class="op" id="7600217">:=</span>&nbsp;<span class="ident" id="7600220">fmt</span><span class="op" id="7600223">.</span><span class="ident" id="7600224">Sprintf</span><span class="op" id="7600231">(</span><span class="string" id="7600232">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7600270">,</span>&nbsp;<span class="ident" id="7600272">this</span><span class="op" id="7600276">.</span><span class="ident" id="7600277">mean</span><span class="op" id="7600281">,</span>&nbsp;<span class="ident" id="7600283">expected</span><span class="op" id="7600291">.</span><span class="ident" id="7600292">mean</span><span class="op" id="7600296">,</span>&nbsp;<span class="ident" id="7600298">expected</span><span class="op" id="7600306">.</span><span class="ident" id="7600307">closeEnough</span><span class="op" id="7600318">,</span>&nbsp;<span class="ident" id="7600320">expected</span><span class="op" id="7600328">.</span><span class="ident" id="7600329">maxError</span><span class="op" id="7600337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600341">fmt</span><span class="op" id="7600344">.</span><span class="ident" id="7600345">Println</span><span class="op" id="7600352">(</span><span class="ident" id="7600353">s</span><span class="op" id="7600354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600358">return</span>&nbsp;<span class="ident" id="7600365">errors</span><span class="op" id="7600371">.</span><span class="ident" id="7600372">New</span><span class="op" id="7600375">(</span><span class="ident" id="7600376">s</span><span class="op" id="7600377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600380">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600383">if</span>&nbsp;<span class="op" id="7600386">!</span><span class="ident" id="7600387">nearEqual</span><span class="op" id="7600396">(</span><span class="ident" id="7600397">this</span><span class="op" id="7600401">.</span><span class="ident" id="7600402">stddev</span><span class="op" id="7600408">,</span>&nbsp;<span class="ident" id="7600410">expected</span><span class="op" id="7600418">.</span><span class="ident" id="7600419">stddev</span><span class="op" id="7600425">,</span>&nbsp;<span class="num" id="7600427">0</span><span class="op" id="7600428">,</span>&nbsp;<span class="ident" id="7600430">expected</span><span class="op" id="7600438">.</span><span class="ident" id="7600439">maxError</span><span class="op" id="7600447">)</span>&nbsp;<span class="op" id="7600449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600453">s</span>&nbsp;<span class="op" id="7600455">:=</span>&nbsp;<span class="ident" id="7600458">fmt</span><span class="op" id="7600461">.</span><span class="ident" id="7600462">Sprintf</span><span class="op" id="7600469">(</span><span class="string" id="7600470">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7600510">,</span>&nbsp;<span class="ident" id="7600512">this</span><span class="op" id="7600516">.</span><span class="ident" id="7600517">stddev</span><span class="op" id="7600523">,</span>&nbsp;<span class="ident" id="7600525">expected</span><span class="op" id="7600533">.</span><span class="ident" id="7600534">stddev</span><span class="op" id="7600540">,</span>&nbsp;<span class="ident" id="7600542">expected</span><span class="op" id="7600550">.</span><span class="ident" id="7600551">closeEnough</span><span class="op" id="7600562">,</span>&nbsp;<span class="ident" id="7600564">expected</span><span class="op" id="7600572">.</span><span class="ident" id="7600573">maxError</span><span class="op" id="7600581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600585">fmt</span><span class="op" id="7600588">.</span><span class="ident" id="7600589">Println</span><span class="op" id="7600596">(</span><span class="ident" id="7600597">s</span><span class="op" id="7600598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600602">return</span>&nbsp;<span class="ident" id="7600609">errors</span><span class="op" id="7600615">.</span><span class="ident" id="7600616">New</span><span class="op" id="7600619">(</span><span class="ident" id="7600620">s</span><span class="op" id="7600621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600624">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600627">return</span>&nbsp;<span class="builtintype" id="7600634">nil</span><br>
<span class="lineno"></span><span class="op" id="7600638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7600641">func</span>&nbsp;<span class="ident" id="7600646">getStatsResults</span><span class="op" id="7600661">(</span><span class="ident" id="7600662">samples</span>&nbsp;<span class="op" id="7600670">[</span><span class="op" id="7600671">]</span><span class="builtintype" id="7600672">float64</span><span class="op" id="7600679">)</span>&nbsp;<span class="op" id="7600681">*</span><span class="ident" id="7600682">statsResults</span>&nbsp;<span class="op" id="7600695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600698">res</span>&nbsp;<span class="op" id="7600702">:=</span>&nbsp;<span class="builtinfunc" id="7600705">new</span><span class="op" id="7600708">(</span><span class="ident" id="7600709">statsResults</span><span class="op" id="7600721">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600724">var</span>&nbsp;<span class="ident" id="7600728">sum</span><span class="op" id="7600731">,</span>&nbsp;<span class="ident" id="7600733">squaresum</span>&nbsp;<span class="builtintype" id="7600743">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600752">for</span>&nbsp;<span class="ident" id="7600756">_</span><span class="op" id="7600757">,</span>&nbsp;<span class="ident" id="7600759">s</span>&nbsp;<span class="op" id="7600761">:=</span>&nbsp;<span class="keyword" id="7600764">range</span>&nbsp;<span class="ident" id="7600770">samples</span>&nbsp;<span class="op" id="7600778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600782">sum</span>&nbsp;<span class="op" id="7600786">+=</span>&nbsp;<span class="ident" id="7600789">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600793">squaresum</span>&nbsp;<span class="op" id="7600803">+=</span>&nbsp;<span class="ident" id="7600806">s</span>&nbsp;<span class="op" id="7600808">*</span>&nbsp;<span class="ident" id="7600810">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600813">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600816">res</span><span class="op" id="7600819">.</span><span class="ident" id="7600820">mean</span>&nbsp;<span class="op" id="7600825">=</span>&nbsp;<span class="ident" id="7600827">sum</span>&nbsp;<span class="op" id="7600831">/</span>&nbsp;<span class="builtintype" id="7600833">float64</span><span class="op" id="7600840">(</span><span class="builtinfunc" id="7600841">len</span><span class="op" id="7600844">(</span><span class="ident" id="7600845">samples</span><span class="op" id="7600852">)</span><span class="op" id="7600853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600856">res</span><span class="op" id="7600859">.</span><span class="ident" id="7600860">stddev</span>&nbsp;<span class="op" id="7600867">=</span>&nbsp;<span class="ident" id="7600869">math</span><span class="op" id="7600873">.</span><span class="ident" id="7600874">Sqrt</span><span class="op" id="7600878">(</span><span class="ident" id="7600879">squaresum</span><span class="op" id="7600888">/</span><span class="builtintype" id="7600889">float64</span><span class="op" id="7600896">(</span><span class="builtinfunc" id="7600897">len</span><span class="op" id="7600900">(</span><span class="ident" id="7600901">samples</span><span class="op" id="7600908">)</span><span class="op" id="7600909">)</span>&nbsp;<span class="op" id="7600911">-</span>&nbsp;<span class="ident" id="7600913">res</span><span class="op" id="7600916">.</span><span class="ident" id="7600917">mean</span><span class="op" id="7600921">*</span><span class="ident" id="7600922">res</span><span class="op" id="7600925">.</span><span class="ident" id="7600926">mean</span><span class="op" id="7600930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600933">return</span>&nbsp;<span class="ident" id="7600940">res</span><br>
<span class="lineno"></span><span class="op" id="7600944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7600947">func</span>&nbsp;<span class="ident" id="7600952">checkSampleDistribution</span><span class="op" id="7600975">(</span><span class="ident" id="7600976">t</span>&nbsp;<span class="op" id="7600978">*</span><span class="ident" id="7600979">testing</span><span class="op" id="7600986">.</span><span class="ident" id="7600987">T</span><span class="op" id="7600988">,</span>&nbsp;<span class="ident" id="7600990">samples</span>&nbsp;<span class="op" id="7600998">[</span><span class="op" id="7600999">]</span><span class="builtintype" id="7601000">float64</span><span class="op" id="7601007">,</span>&nbsp;<span class="ident" id="7601009">expected</span>&nbsp;<span class="op" id="7601018">*</span><span class="ident" id="7601019">statsResults</span><span class="op" id="7601031">)</span>&nbsp;<span class="op" id="7601033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601036">actual</span>&nbsp;<span class="op" id="7601043">:=</span>&nbsp;<span class="ident" id="7601046">getStatsResults</span><span class="op" id="7601061">(</span><span class="ident" id="7601062">samples</span><span class="op" id="7601069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601072">err</span>&nbsp;<span class="op" id="7601076">:=</span>&nbsp;<span class="ident" id="7601079">actual</span><span class="op" id="7601085">.</span><span class="ident" id="7601086">checkSimilarDistribution</span><span class="op" id="7601110">(</span><span class="ident" id="7601111">expected</span><span class="op" id="7601119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601122">if</span>&nbsp;<span class="ident" id="7601125">err</span>&nbsp;<span class="op" id="7601129">!=</span>&nbsp;<span class="builtintype" id="7601132">nil</span>&nbsp;<span class="op" id="7601136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601140">t</span><span class="op" id="7601141">.</span><span class="ident" id="7601142">Errorf</span><span class="op" id="7601148">(</span><span class="ident" id="7601149">err</span><span class="op" id="7601152">.</span><span class="ident" id="7601153">Error</span><span class="op" id="7601158">(</span><span class="op" id="7601159">)</span><span class="op" id="7601160">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601163">}</span><br>
<span class="lineno"></span><span class="op" id="7601165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7601168">func</span>&nbsp;<span class="ident" id="7601173">checkSampleSliceDistributions</span><span class="op" id="7601202">(</span><span class="ident" id="7601203">t</span>&nbsp;<span class="op" id="7601205">*</span><span class="ident" id="7601206">testing</span><span class="op" id="7601213">.</span><span class="ident" id="7601214">T</span><span class="op" id="7601215">,</span>&nbsp;<span class="ident" id="7601217">samples</span>&nbsp;<span class="op" id="7601225">[</span><span class="op" id="7601226">]</span><span class="builtintype" id="7601227">float64</span><span class="op" id="7601234">,</span>&nbsp;<span class="ident" id="7601236">nslices</span>&nbsp;<span class="builtintype" id="7601244">int</span><span class="op" id="7601247">,</span>&nbsp;<span class="ident" id="7601249">expected</span>&nbsp;<span class="op" id="7601258">*</span><span class="ident" id="7601259">statsResults</span><span class="op" id="7601271">)</span>&nbsp;<span class="op" id="7601273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601276">chunk</span>&nbsp;<span class="op" id="7601282">:=</span>&nbsp;<span class="builtinfunc" id="7601285">len</span><span class="op" id="7601288">(</span><span class="ident" id="7601289">samples</span><span class="op" id="7601296">)</span>&nbsp;<span class="op" id="7601298">/</span>&nbsp;<span class="ident" id="7601300">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601309">for</span>&nbsp;<span class="ident" id="7601313">i</span>&nbsp;<span class="op" id="7601315">:=</span>&nbsp;<span class="num" id="7601318">0</span><span class="op" id="7601319">;</span>&nbsp;<span class="ident" id="7601321">i</span>&nbsp;<span class="op" id="7601323">&lt;</span>&nbsp;<span class="ident" id="7601325">nslices</span><span class="op" id="7601332">;</span>&nbsp;<span class="ident" id="7601334">i</span><span class="op" id="7601335">++</span>&nbsp;<span class="op" id="7601338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601342">low</span>&nbsp;<span class="op" id="7601346">:=</span>&nbsp;<span class="ident" id="7601349">i</span>&nbsp;<span class="op" id="7601351">*</span>&nbsp;<span class="ident" id="7601353">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601361">var</span>&nbsp;<span class="ident" id="7601365">high</span>&nbsp;<span class="builtintype" id="7601370">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601376">if</span>&nbsp;<span class="ident" id="7601379">i</span>&nbsp;<span class="op" id="7601381">==</span>&nbsp;<span class="ident" id="7601384">nslices</span><span class="op" id="7601391">-</span><span class="num" id="7601392">1</span>&nbsp;<span class="op" id="7601394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601399">high</span>&nbsp;<span class="op" id="7601404">=</span>&nbsp;<span class="builtinfunc" id="7601406">len</span><span class="op" id="7601409">(</span><span class="ident" id="7601410">samples</span><span class="op" id="7601417">)</span>&nbsp;<span class="op" id="7601419">-</span>&nbsp;<span class="num" id="7601421">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601425">}</span>&nbsp;<span class="keyword" id="7601427">else</span>&nbsp;<span class="op" id="7601432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601437">high</span>&nbsp;<span class="op" id="7601442">=</span>&nbsp;<span class="op" id="7601444">(</span><span class="ident" id="7601445">i</span>&nbsp;<span class="op" id="7601447">+</span>&nbsp;<span class="num" id="7601449">1</span><span class="op" id="7601450">)</span>&nbsp;<span class="op" id="7601452">*</span>&nbsp;<span class="ident" id="7601454">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601466">checkSampleDistribution</span><span class="op" id="7601489">(</span><span class="ident" id="7601490">t</span><span class="op" id="7601491">,</span>&nbsp;<span class="ident" id="7601493">samples</span><span class="op" id="7601500">[</span><span class="ident" id="7601501">low</span><span class="op" id="7601504">:</span><span class="ident" id="7601505">high</span><span class="op" id="7601509">]</span><span class="op" id="7601510">,</span>&nbsp;<span class="ident" id="7601512">expected</span><span class="op" id="7601520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601523">}</span><br>
<span class="lineno">90</span><span class="op" id="7601525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7601528">//</span><br>
<span class="lineno"></span><span class="comment" id="7601531">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7601560">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7601564">func</span>&nbsp;<span class="ident" id="7601569">generateNormalSamples</span><span class="op" id="7601590">(</span><span class="ident" id="7601591">nsamples</span>&nbsp;<span class="builtintype" id="7601600">int</span><span class="op" id="7601603">,</span>&nbsp;<span class="ident" id="7601605">mean</span><span class="op" id="7601609">,</span>&nbsp;<span class="ident" id="7601611">stddev</span>&nbsp;<span class="builtintype" id="7601618">float64</span><span class="op" id="7601625">,</span>&nbsp;<span class="ident" id="7601627">seed</span>&nbsp;<span class="builtintype" id="7601632">int64</span><span class="op" id="7601637">)</span>&nbsp;<span class="op" id="7601639">[</span><span class="op" id="7601640">]</span><span class="builtintype" id="7601641">float64</span>&nbsp;<span class="op" id="7601649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601652">r</span>&nbsp;<span class="op" id="7601654">:=</span>&nbsp;<span class="ident" id="7601657">New</span><span class="op" id="7601660">(</span><span class="ident" id="7601661">NewSource</span><span class="op" id="7601670">(</span><span class="ident" id="7601671">seed</span><span class="op" id="7601675">)</span><span class="op" id="7601676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601679">samples</span>&nbsp;<span class="op" id="7601687">:=</span>&nbsp;<span class="builtinfunc" id="7601690">make</span><span class="op" id="7601694">(</span><span class="op" id="7601695">[</span><span class="op" id="7601696">]</span><span class="builtintype" id="7601697">float64</span><span class="op" id="7601704">,</span>&nbsp;<span class="ident" id="7601706">nsamples</span><span class="op" id="7601714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601717">for</span>&nbsp;<span class="ident" id="7601721">i</span>&nbsp;<span class="op" id="7601723">:=</span>&nbsp;<span class="keyword" id="7601726">range</span>&nbsp;<span class="ident" id="7601732">samples</span>&nbsp;<span class="op" id="7601740">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601744">samples</span><span class="op" id="7601751">[</span><span class="ident" id="7601752">i</span><span class="op" id="7601753">]</span>&nbsp;<span class="op" id="7601755">=</span>&nbsp;<span class="ident" id="7601757">r</span><span class="op" id="7601758">.</span><span class="ident" id="7601759">NormFloat64</span><span class="op" id="7601770">(</span><span class="op" id="7601771">)</span><span class="op" id="7601772">*</span><span class="ident" id="7601773">stddev</span>&nbsp;<span class="op" id="7601780">+</span>&nbsp;<span class="ident" id="7601782">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601791">return</span>&nbsp;<span class="ident" id="7601798">samples</span><br>
<span class="lineno"></span><span class="op" id="7601806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7601809">func</span>&nbsp;<span class="ident" id="7601814">testNormalDistribution</span><span class="op" id="7601836">(</span><span class="ident" id="7601837">t</span>&nbsp;<span class="op" id="7601839">*</span><span class="ident" id="7601840">testing</span><span class="op" id="7601847">.</span><span class="ident" id="7601848">T</span><span class="op" id="7601849">,</span>&nbsp;<span class="ident" id="7601851">nsamples</span>&nbsp;<span class="builtintype" id="7601860">int</span><span class="op" id="7601863">,</span>&nbsp;<span class="ident" id="7601865">mean</span><span class="op" id="7601869">,</span>&nbsp;<span class="ident" id="7601871">stddev</span>&nbsp;<span class="builtintype" id="7601878">float64</span><span class="op" id="7601885">,</span>&nbsp;<span class="ident" id="7601887">seed</span>&nbsp;<span class="builtintype" id="7601892">int64</span><span class="op" id="7601897">)</span>&nbsp;<span class="op" id="7601899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601902">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601999">samples</span>&nbsp;<span class="op" id="7602007">:=</span>&nbsp;<span class="ident" id="7602010">generateNormalSamples</span><span class="op" id="7602031">(</span><span class="ident" id="7602032">nsamples</span><span class="op" id="7602040">,</span>&nbsp;<span class="ident" id="7602042">mean</span><span class="op" id="7602046">,</span>&nbsp;<span class="ident" id="7602048">stddev</span><span class="op" id="7602054">,</span>&nbsp;<span class="ident" id="7602056">seed</span><span class="op" id="7602060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602063">errorScale</span>&nbsp;<span class="op" id="7602074">:=</span>&nbsp;<span class="ident" id="7602077">max</span><span class="op" id="7602080">(</span><span class="num" id="7602081">1.0</span><span class="op" id="7602084">,</span>&nbsp;<span class="ident" id="7602086">stddev</span><span class="op" id="7602092">)</span>&nbsp;<span class="comment" id="7602094">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602123">expected</span>&nbsp;<span class="op" id="7602132">:=</span>&nbsp;<span class="op" id="7602135">&amp;</span><span class="ident" id="7602136">statsResults</span><span class="op" id="7602148">{</span><span class="ident" id="7602149">mean</span><span class="op" id="7602153">,</span>&nbsp;<span class="ident" id="7602155">stddev</span><span class="op" id="7602161">,</span>&nbsp;<span class="num" id="7602163">0.10</span>&nbsp;<span class="op" id="7602168">*</span>&nbsp;<span class="ident" id="7602170">errorScale</span><span class="op" id="7602180">,</span>&nbsp;<span class="num" id="7602182">0.08</span>&nbsp;<span class="op" id="7602187">*</span>&nbsp;<span class="ident" id="7602189">errorScale</span><span class="op" id="7602199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602203">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602272">checkSampleDistribution</span><span class="op" id="7602295">(</span><span class="ident" id="7602296">t</span><span class="op" id="7602297">,</span>&nbsp;<span class="ident" id="7602299">samples</span><span class="op" id="7602306">,</span>&nbsp;<span class="ident" id="7602308">expected</span><span class="op" id="7602316">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602320">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602395">checkSampleSliceDistributions</span><span class="op" id="7602424">(</span><span class="ident" id="7602425">t</span><span class="op" id="7602426">,</span>&nbsp;<span class="ident" id="7602428">samples</span><span class="op" id="7602435">,</span>&nbsp;<span class="num" id="7602437">2</span><span class="op" id="7602438">,</span>&nbsp;<span class="ident" id="7602440">expected</span><span class="op" id="7602448">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602452">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602526">checkSampleSliceDistributions</span><span class="op" id="7602555">(</span><span class="ident" id="7602556">t</span><span class="op" id="7602557">,</span>&nbsp;<span class="ident" id="7602559">samples</span><span class="op" id="7602566">,</span>&nbsp;<span class="num" id="7602568">7</span><span class="op" id="7602569">,</span>&nbsp;<span class="ident" id="7602571">expected</span><span class="op" id="7602579">)</span><br>
<span class="lineno">120</span><span class="op" id="7602581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7602584">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7602601">func</span>&nbsp;<span class="ident" id="7602606">TestStandardNormalValues</span><span class="op" id="7602630">(</span><span class="ident" id="7602631">t</span>&nbsp;<span class="op" id="7602633">*</span><span class="ident" id="7602634">testing</span><span class="op" id="7602641">.</span><span class="ident" id="7602642">T</span><span class="op" id="7602643">)</span>&nbsp;<span class="op" id="7602645">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602648">for</span>&nbsp;<span class="ident" id="7602652">_</span><span class="op" id="7602653">,</span>&nbsp;<span class="ident" id="7602655">seed</span>&nbsp;<span class="op" id="7602660">:=</span>&nbsp;<span class="keyword" id="7602663">range</span>&nbsp;<span class="ident" id="7602669">testSeeds</span>&nbsp;<span class="op" id="7602679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602683">testNormalDistribution</span><span class="op" id="7602705">(</span><span class="ident" id="7602706">t</span><span class="op" id="7602707">,</span>&nbsp;<span class="ident" id="7602709">numTestSamples</span><span class="op" id="7602723">,</span>&nbsp;<span class="num" id="7602725">0</span><span class="op" id="7602726">,</span>&nbsp;<span class="num" id="7602728">1</span><span class="op" id="7602729">,</span>&nbsp;<span class="ident" id="7602731">seed</span><span class="op" id="7602735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602738">}</span><br>
<span class="lineno"></span><span class="op" id="7602740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7602743">func</span>&nbsp;<span class="ident" id="7602748">TestNonStandardNormalValues</span><span class="op" id="7602775">(</span><span class="ident" id="7602776">t</span>&nbsp;<span class="op" id="7602778">*</span><span class="ident" id="7602779">testing</span><span class="op" id="7602786">.</span><span class="ident" id="7602787">T</span><span class="op" id="7602788">)</span>&nbsp;<span class="op" id="7602790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602793">sdmax</span>&nbsp;<span class="op" id="7602799">:=</span>&nbsp;<span class="num" id="7602802">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602810">mmax</span>&nbsp;<span class="op" id="7602815">:=</span>&nbsp;<span class="num" id="7602818">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602826">if</span>&nbsp;<span class="ident" id="7602829">testing</span><span class="op" id="7602836">.</span><span class="ident" id="7602837">Short</span><span class="op" id="7602842">(</span><span class="op" id="7602843">)</span>&nbsp;<span class="op" id="7602845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602849">sdmax</span>&nbsp;<span class="op" id="7602855">=</span>&nbsp;<span class="num" id="7602857">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602861">mmax</span>&nbsp;<span class="op" id="7602866">=</span>&nbsp;<span class="num" id="7602868">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602874">for</span>&nbsp;<span class="ident" id="7602878">sd</span>&nbsp;<span class="op" id="7602881">:=</span>&nbsp;<span class="num" id="7602884">0.5</span><span class="op" id="7602887">;</span>&nbsp;<span class="ident" id="7602889">sd</span>&nbsp;<span class="op" id="7602892">&lt;</span>&nbsp;<span class="ident" id="7602894">sdmax</span><span class="op" id="7602899">;</span>&nbsp;<span class="ident" id="7602901">sd</span>&nbsp;<span class="op" id="7602904">*=</span>&nbsp;<span class="num" id="7602907">2</span>&nbsp;<span class="op" id="7602909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602913">for</span>&nbsp;<span class="ident" id="7602917">m</span>&nbsp;<span class="op" id="7602919">:=</span>&nbsp;<span class="num" id="7602922">0.5</span><span class="op" id="7602925">;</span>&nbsp;<span class="ident" id="7602927">m</span>&nbsp;<span class="op" id="7602929">&lt;</span>&nbsp;<span class="ident" id="7602931">mmax</span><span class="op" id="7602935">;</span>&nbsp;<span class="ident" id="7602937">m</span>&nbsp;<span class="op" id="7602939">*=</span>&nbsp;<span class="num" id="7602942">2</span>&nbsp;<span class="op" id="7602944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602949">for</span>&nbsp;<span class="ident" id="7602953">_</span><span class="op" id="7602954">,</span>&nbsp;<span class="ident" id="7602956">seed</span>&nbsp;<span class="op" id="7602961">:=</span>&nbsp;<span class="keyword" id="7602964">range</span>&nbsp;<span class="ident" id="7602970">testSeeds</span>&nbsp;<span class="op" id="7602980">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602986">testNormalDistribution</span><span class="op" id="7603008">(</span><span class="ident" id="7603009">t</span><span class="op" id="7603010">,</span>&nbsp;<span class="ident" id="7603012">numTestSamples</span><span class="op" id="7603026">,</span>&nbsp;<span class="ident" id="7603028">m</span><span class="op" id="7603029">,</span>&nbsp;<span class="ident" id="7603031">sd</span><span class="op" id="7603033">,</span>&nbsp;<span class="ident" id="7603035">seed</span><span class="op" id="7603039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603045">if</span>&nbsp;<span class="ident" id="7603048">testing</span><span class="op" id="7603055">.</span><span class="ident" id="7603056">Short</span><span class="op" id="7603061">(</span><span class="op" id="7603062">)</span>&nbsp;<span class="op" id="7603064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603071">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603086">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603093">}</span><br>
<span class="lineno"></span><span class="op" id="7603095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7603098">//</span><br>
<span class="lineno">150</span><span class="comment" id="7603101">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7603135">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7603139">func</span>&nbsp;<span class="ident" id="7603144">generateExponentialSamples</span><span class="op" id="7603170">(</span><span class="ident" id="7603171">nsamples</span>&nbsp;<span class="builtintype" id="7603180">int</span><span class="op" id="7603183">,</span>&nbsp;<span class="ident" id="7603185">rate</span>&nbsp;<span class="builtintype" id="7603190">float64</span><span class="op" id="7603197">,</span>&nbsp;<span class="ident" id="7603199">seed</span>&nbsp;<span class="builtintype" id="7603204">int64</span><span class="op" id="7603209">)</span>&nbsp;<span class="op" id="7603211">[</span><span class="op" id="7603212">]</span><span class="builtintype" id="7603213">float64</span>&nbsp;<span class="op" id="7603221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603224">r</span>&nbsp;<span class="op" id="7603226">:=</span>&nbsp;<span class="ident" id="7603229">New</span><span class="op" id="7603232">(</span><span class="ident" id="7603233">NewSource</span><span class="op" id="7603242">(</span><span class="ident" id="7603243">seed</span><span class="op" id="7603247">)</span><span class="op" id="7603248">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603251">samples</span>&nbsp;<span class="op" id="7603259">:=</span>&nbsp;<span class="builtinfunc" id="7603262">make</span><span class="op" id="7603266">(</span><span class="op" id="7603267">[</span><span class="op" id="7603268">]</span><span class="builtintype" id="7603269">float64</span><span class="op" id="7603276">,</span>&nbsp;<span class="ident" id="7603278">nsamples</span><span class="op" id="7603286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603289">for</span>&nbsp;<span class="ident" id="7603293">i</span>&nbsp;<span class="op" id="7603295">:=</span>&nbsp;<span class="keyword" id="7603298">range</span>&nbsp;<span class="ident" id="7603304">samples</span>&nbsp;<span class="op" id="7603312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603316">samples</span><span class="op" id="7603323">[</span><span class="ident" id="7603324">i</span><span class="op" id="7603325">]</span>&nbsp;<span class="op" id="7603327">=</span>&nbsp;<span class="ident" id="7603329">r</span><span class="op" id="7603330">.</span><span class="ident" id="7603331">ExpFloat64</span><span class="op" id="7603341">(</span><span class="op" id="7603342">)</span>&nbsp;<span class="op" id="7603344">/</span>&nbsp;<span class="ident" id="7603346">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603355">return</span>&nbsp;<span class="ident" id="7603362">samples</span><br>
<span class="lineno">160</span><span class="op" id="7603370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7603373">func</span>&nbsp;<span class="ident" id="7603378">testExponentialDistribution</span><span class="op" id="7603405">(</span><span class="ident" id="7603406">t</span>&nbsp;<span class="op" id="7603408">*</span><span class="ident" id="7603409">testing</span><span class="op" id="7603416">.</span><span class="ident" id="7603417">T</span><span class="op" id="7603418">,</span>&nbsp;<span class="ident" id="7603420">nsamples</span>&nbsp;<span class="builtintype" id="7603429">int</span><span class="op" id="7603432">,</span>&nbsp;<span class="ident" id="7603434">rate</span>&nbsp;<span class="builtintype" id="7603439">float64</span><span class="op" id="7603446">,</span>&nbsp;<span class="ident" id="7603448">seed</span>&nbsp;<span class="builtintype" id="7603453">int64</span><span class="op" id="7603458">)</span>&nbsp;<span class="op" id="7603460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603463">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603542">mean</span>&nbsp;<span class="op" id="7603547">:=</span>&nbsp;<span class="num" id="7603550">1</span>&nbsp;<span class="op" id="7603552">/</span>&nbsp;<span class="ident" id="7603554">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603560">stddev</span>&nbsp;<span class="op" id="7603567">:=</span>&nbsp;<span class="ident" id="7603570">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603577">samples</span>&nbsp;<span class="op" id="7603585">:=</span>&nbsp;<span class="ident" id="7603588">generateExponentialSamples</span><span class="op" id="7603614">(</span><span class="ident" id="7603615">nsamples</span><span class="op" id="7603623">,</span>&nbsp;<span class="ident" id="7603625">rate</span><span class="op" id="7603629">,</span>&nbsp;<span class="ident" id="7603631">seed</span><span class="op" id="7603635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603638">errorScale</span>&nbsp;<span class="op" id="7603649">:=</span>&nbsp;<span class="ident" id="7603652">max</span><span class="op" id="7603655">(</span><span class="num" id="7603656">1.0</span><span class="op" id="7603659">,</span>&nbsp;<span class="num" id="7603661">1</span><span class="op" id="7603662">/</span><span class="ident" id="7603663">rate</span><span class="op" id="7603667">)</span>&nbsp;<span class="comment" id="7603669">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603715">expected</span>&nbsp;<span class="op" id="7603724">:=</span>&nbsp;<span class="op" id="7603727">&amp;</span><span class="ident" id="7603728">statsResults</span><span class="op" id="7603740">{</span><span class="ident" id="7603741">mean</span><span class="op" id="7603745">,</span>&nbsp;<span class="ident" id="7603747">stddev</span><span class="op" id="7603753">,</span>&nbsp;<span class="num" id="7603755">0.10</span>&nbsp;<span class="op" id="7603760">*</span>&nbsp;<span class="ident" id="7603762">errorScale</span><span class="op" id="7603772">,</span>&nbsp;<span class="num" id="7603774">0.20</span>&nbsp;<span class="op" id="7603779">*</span>&nbsp;<span class="ident" id="7603781">errorScale</span><span class="op" id="7603791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603795">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603864">checkSampleDistribution</span><span class="op" id="7603887">(</span><span class="ident" id="7603888">t</span><span class="op" id="7603889">,</span>&nbsp;<span class="ident" id="7603891">samples</span><span class="op" id="7603898">,</span>&nbsp;<span class="ident" id="7603900">expected</span><span class="op" id="7603908">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603912">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603987">checkSampleSliceDistributions</span><span class="op" id="7604016">(</span><span class="ident" id="7604017">t</span><span class="op" id="7604018">,</span>&nbsp;<span class="ident" id="7604020">samples</span><span class="op" id="7604027">,</span>&nbsp;<span class="num" id="7604029">2</span><span class="op" id="7604030">,</span>&nbsp;<span class="ident" id="7604032">expected</span><span class="op" id="7604040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7604044">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604118">checkSampleSliceDistributions</span><span class="op" id="7604147">(</span><span class="ident" id="7604148">t</span><span class="op" id="7604149">,</span>&nbsp;<span class="ident" id="7604151">samples</span><span class="op" id="7604158">,</span>&nbsp;<span class="num" id="7604160">7</span><span class="op" id="7604161">,</span>&nbsp;<span class="ident" id="7604163">expected</span><span class="op" id="7604171">)</span><br>
<span class="lineno">180</span><span class="op" id="7604173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7604176">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7604193">func</span>&nbsp;<span class="ident" id="7604198">TestStandardExponentialValues</span><span class="op" id="7604227">(</span><span class="ident" id="7604228">t</span>&nbsp;<span class="op" id="7604230">*</span><span class="ident" id="7604231">testing</span><span class="op" id="7604238">.</span><span class="ident" id="7604239">T</span><span class="op" id="7604240">)</span>&nbsp;<span class="op" id="7604242">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604245">for</span>&nbsp;<span class="ident" id="7604249">_</span><span class="op" id="7604250">,</span>&nbsp;<span class="ident" id="7604252">seed</span>&nbsp;<span class="op" id="7604257">:=</span>&nbsp;<span class="keyword" id="7604260">range</span>&nbsp;<span class="ident" id="7604266">testSeeds</span>&nbsp;<span class="op" id="7604276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604280">testExponentialDistribution</span><span class="op" id="7604307">(</span><span class="ident" id="7604308">t</span><span class="op" id="7604309">,</span>&nbsp;<span class="ident" id="7604311">numTestSamples</span><span class="op" id="7604325">,</span>&nbsp;<span class="num" id="7604327">1</span><span class="op" id="7604328">,</span>&nbsp;<span class="ident" id="7604330">seed</span><span class="op" id="7604334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604337">}</span><br>
<span class="lineno"></span><span class="op" id="7604339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7604342">func</span>&nbsp;<span class="ident" id="7604347">TestNonStandardExponentialValues</span><span class="op" id="7604379">(</span><span class="ident" id="7604380">t</span>&nbsp;<span class="op" id="7604382">*</span><span class="ident" id="7604383">testing</span><span class="op" id="7604390">.</span><span class="ident" id="7604391">T</span><span class="op" id="7604392">)</span>&nbsp;<span class="op" id="7604394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604397">for</span>&nbsp;<span class="ident" id="7604401">rate</span>&nbsp;<span class="op" id="7604406">:=</span>&nbsp;<span class="num" id="7604409">0.05</span><span class="op" id="7604413">;</span>&nbsp;<span class="ident" id="7604415">rate</span>&nbsp;<span class="op" id="7604420">&lt;</span>&nbsp;<span class="num" id="7604422">10</span><span class="op" id="7604424">;</span>&nbsp;<span class="ident" id="7604426">rate</span>&nbsp;<span class="op" id="7604431">*=</span>&nbsp;<span class="num" id="7604434">2</span>&nbsp;<span class="op" id="7604436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604440">for</span>&nbsp;<span class="ident" id="7604444">_</span><span class="op" id="7604445">,</span>&nbsp;<span class="ident" id="7604447">seed</span>&nbsp;<span class="op" id="7604452">:=</span>&nbsp;<span class="keyword" id="7604455">range</span>&nbsp;<span class="ident" id="7604461">testSeeds</span>&nbsp;<span class="op" id="7604471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604476">testExponentialDistribution</span><span class="op" id="7604503">(</span><span class="ident" id="7604504">t</span><span class="op" id="7604505">,</span>&nbsp;<span class="ident" id="7604507">numTestSamples</span><span class="op" id="7604521">,</span>&nbsp;<span class="ident" id="7604523">rate</span><span class="op" id="7604527">,</span>&nbsp;<span class="ident" id="7604529">seed</span><span class="op" id="7604533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604538">if</span>&nbsp;<span class="ident" id="7604541">testing</span><span class="op" id="7604548">.</span><span class="ident" id="7604549">Short</span><span class="op" id="7604554">(</span><span class="op" id="7604555">)</span>&nbsp;<span class="op" id="7604557">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604563">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604579">}</span><br>
<span class="lineno"></span><span class="op" id="7604581">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7604584">//</span><br>
<span class="lineno"></span><span class="comment" id="7604587">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7604613">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7604617">func</span>&nbsp;<span class="ident" id="7604622">initNorm</span><span class="op" id="7604630">(</span><span class="op" id="7604631">)</span>&nbsp;<span class="op" id="7604633">(</span><span class="ident" id="7604634">testKn</span>&nbsp;<span class="op" id="7604641">[</span><span class="op" id="7604642">]</span><span class="builtintype" id="7604643">uint32</span><span class="op" id="7604649">,</span>&nbsp;<span class="ident" id="7604651">testWn</span><span class="op" id="7604657">,</span>&nbsp;<span class="ident" id="7604659">testFn</span>&nbsp;<span class="op" id="7604666">[</span><span class="op" id="7604667">]</span><span class="builtintype" id="7604668">float32</span><span class="op" id="7604675">)</span>&nbsp;<span class="op" id="7604677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604680">const</span>&nbsp;<span class="ident" id="7604686">m1</span>&nbsp;<span class="op" id="7604689">=</span>&nbsp;<span class="num" id="7604691">1</span>&nbsp;<span class="op" id="7604693">&lt;&lt;</span>&nbsp;<span class="num" id="7604696">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604700">var</span>&nbsp;<span class="op" id="7604704">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604708">dn</span>&nbsp;<span class="builtintype" id="7604711">float64</span>&nbsp;<span class="op" id="7604719">=</span>&nbsp;<span class="ident" id="7604721">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604726">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604737">=</span>&nbsp;<span class="ident" id="7604739">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604744">vn</span>&nbsp;<span class="builtintype" id="7604747">float64</span>&nbsp;<span class="op" id="7604755">=</span>&nbsp;<span class="num" id="7604757">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604778">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604782">testKn</span>&nbsp;<span class="op" id="7604789">=</span>&nbsp;<span class="builtinfunc" id="7604791">make</span><span class="op" id="7604795">(</span><span class="op" id="7604796">[</span><span class="op" id="7604797">]</span><span class="builtintype" id="7604798">uint32</span><span class="op" id="7604804">,</span>&nbsp;<span class="num" id="7604806">128</span><span class="op" id="7604809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604812">testWn</span>&nbsp;<span class="op" id="7604819">=</span>&nbsp;<span class="builtinfunc" id="7604821">make</span><span class="op" id="7604825">(</span><span class="op" id="7604826">[</span><span class="op" id="7604827">]</span><span class="builtintype" id="7604828">float32</span><span class="op" id="7604835">,</span>&nbsp;<span class="num" id="7604837">128</span><span class="op" id="7604840">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604843">testFn</span>&nbsp;<span class="op" id="7604850">=</span>&nbsp;<span class="builtinfunc" id="7604852">make</span><span class="op" id="7604856">(</span><span class="op" id="7604857">[</span><span class="op" id="7604858">]</span><span class="builtintype" id="7604859">float32</span><span class="op" id="7604866">,</span>&nbsp;<span class="num" id="7604868">128</span><span class="op" id="7604871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604875">q</span>&nbsp;<span class="op" id="7604877">:=</span>&nbsp;<span class="ident" id="7604880">vn</span>&nbsp;<span class="op" id="7604883">/</span>&nbsp;<span class="ident" id="7604885">math</span><span class="op" id="7604889">.</span><span class="ident" id="7604890">Exp</span><span class="op" id="7604893">(</span><span class="op" id="7604894">-</span><span class="num" id="7604895">0.5</span><span class="op" id="7604898">*</span><span class="ident" id="7604899">dn</span><span class="op" id="7604901">*</span><span class="ident" id="7604902">dn</span><span class="op" id="7604904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604907">testKn</span><span class="op" id="7604913">[</span><span class="num" id="7604914">0</span><span class="op" id="7604915">]</span>&nbsp;<span class="op" id="7604917">=</span>&nbsp;<span class="builtintype" id="7604919">uint32</span><span class="op" id="7604925">(</span><span class="op" id="7604926">(</span><span class="ident" id="7604927">dn</span>&nbsp;<span class="op" id="7604930">/</span>&nbsp;<span class="ident" id="7604932">q</span><span class="op" id="7604933">)</span>&nbsp;<span class="op" id="7604935">*</span>&nbsp;<span class="ident" id="7604937">m1</span><span class="op" id="7604939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604942">testKn</span><span class="op" id="7604948">[</span><span class="num" id="7604949">1</span><span class="op" id="7604950">]</span>&nbsp;<span class="op" id="7604952">=</span>&nbsp;<span class="num" id="7604954">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604957">testWn</span><span class="op" id="7604963">[</span><span class="num" id="7604964">0</span><span class="op" id="7604965">]</span>&nbsp;<span class="op" id="7604967">=</span>&nbsp;<span class="builtintype" id="7604969">float32</span><span class="op" id="7604976">(</span><span class="ident" id="7604977">q</span>&nbsp;<span class="op" id="7604979">/</span>&nbsp;<span class="ident" id="7604981">m1</span><span class="op" id="7604983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604986">testWn</span><span class="op" id="7604992">[</span><span class="num" id="7604993">127</span><span class="op" id="7604996">]</span>&nbsp;<span class="op" id="7604998">=</span>&nbsp;<span class="builtintype" id="7605000">float32</span><span class="op" id="7605007">(</span><span class="ident" id="7605008">dn</span>&nbsp;<span class="op" id="7605011">/</span>&nbsp;<span class="ident" id="7605013">m1</span><span class="op" id="7605015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605018">testFn</span><span class="op" id="7605024">[</span><span class="num" id="7605025">0</span><span class="op" id="7605026">]</span>&nbsp;<span class="op" id="7605028">=</span>&nbsp;<span class="num" id="7605030">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605035">testFn</span><span class="op" id="7605041">[</span><span class="num" id="7605042">127</span><span class="op" id="7605045">]</span>&nbsp;<span class="op" id="7605047">=</span>&nbsp;<span class="builtintype" id="7605049">float32</span><span class="op" id="7605056">(</span><span class="ident" id="7605057">math</span><span class="op" id="7605061">.</span><span class="ident" id="7605062">Exp</span><span class="op" id="7605065">(</span><span class="op" id="7605066">-</span><span class="num" id="7605067">0.5</span>&nbsp;<span class="op" id="7605071">*</span>&nbsp;<span class="ident" id="7605073">dn</span>&nbsp;<span class="op" id="7605076">*</span>&nbsp;<span class="ident" id="7605078">dn</span><span class="op" id="7605080">)</span><span class="op" id="7605081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605084">for</span>&nbsp;<span class="ident" id="7605088">i</span>&nbsp;<span class="op" id="7605090">:=</span>&nbsp;<span class="num" id="7605093">126</span><span class="op" id="7605096">;</span>&nbsp;<span class="ident" id="7605098">i</span>&nbsp;<span class="op" id="7605100">&gt;=</span>&nbsp;<span class="num" id="7605103">1</span><span class="op" id="7605104">;</span>&nbsp;<span class="ident" id="7605106">i</span><span class="op" id="7605107">--</span>&nbsp;<span class="op" id="7605110">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605114">dn</span>&nbsp;<span class="op" id="7605117">=</span>&nbsp;<span class="ident" id="7605119">math</span><span class="op" id="7605123">.</span><span class="ident" id="7605124">Sqrt</span><span class="op" id="7605128">(</span><span class="op" id="7605129">-</span><span class="num" id="7605130">2.0</span>&nbsp;<span class="op" id="7605134">*</span>&nbsp;<span class="ident" id="7605136">math</span><span class="op" id="7605140">.</span><span class="ident" id="7605141">Log</span><span class="op" id="7605144">(</span><span class="ident" id="7605145">vn</span><span class="op" id="7605147">/</span><span class="ident" id="7605148">dn</span><span class="op" id="7605150">+</span><span class="ident" id="7605151">math</span><span class="op" id="7605155">.</span><span class="ident" id="7605156">Exp</span><span class="op" id="7605159">(</span><span class="op" id="7605160">-</span><span class="num" id="7605161">0.5</span><span class="op" id="7605164">*</span><span class="ident" id="7605165">dn</span><span class="op" id="7605167">*</span><span class="ident" id="7605168">dn</span><span class="op" id="7605170">)</span><span class="op" id="7605171">)</span><span class="op" id="7605172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605176">testKn</span><span class="op" id="7605182">[</span><span class="ident" id="7605183">i</span><span class="op" id="7605184">+</span><span class="num" id="7605185">1</span><span class="op" id="7605186">]</span>&nbsp;<span class="op" id="7605188">=</span>&nbsp;<span class="builtintype" id="7605190">uint32</span><span class="op" id="7605196">(</span><span class="op" id="7605197">(</span><span class="ident" id="7605198">dn</span>&nbsp;<span class="op" id="7605201">/</span>&nbsp;<span class="ident" id="7605203">tn</span><span class="op" id="7605205">)</span>&nbsp;<span class="op" id="7605207">*</span>&nbsp;<span class="ident" id="7605209">m1</span><span class="op" id="7605211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605215">tn</span>&nbsp;<span class="op" id="7605218">=</span>&nbsp;<span class="ident" id="7605220">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605225">testFn</span><span class="op" id="7605231">[</span><span class="ident" id="7605232">i</span><span class="op" id="7605233">]</span>&nbsp;<span class="op" id="7605235">=</span>&nbsp;<span class="builtintype" id="7605237">float32</span><span class="op" id="7605244">(</span><span class="ident" id="7605245">math</span><span class="op" id="7605249">.</span><span class="ident" id="7605250">Exp</span><span class="op" id="7605253">(</span><span class="op" id="7605254">-</span><span class="num" id="7605255">0.5</span>&nbsp;<span class="op" id="7605259">*</span>&nbsp;<span class="ident" id="7605261">dn</span>&nbsp;<span class="op" id="7605264">*</span>&nbsp;<span class="ident" id="7605266">dn</span><span class="op" id="7605268">)</span><span class="op" id="7605269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605273">testWn</span><span class="op" id="7605279">[</span><span class="ident" id="7605280">i</span><span class="op" id="7605281">]</span>&nbsp;<span class="op" id="7605283">=</span>&nbsp;<span class="builtintype" id="7605285">float32</span><span class="op" id="7605292">(</span><span class="ident" id="7605293">dn</span>&nbsp;<span class="op" id="7605296">/</span>&nbsp;<span class="ident" id="7605298">m1</span><span class="op" id="7605300">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605306">return</span><br>
<span class="lineno"></span><span class="op" id="7605313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7605316">func</span>&nbsp;<span class="ident" id="7605321">initExp</span><span class="op" id="7605328">(</span><span class="op" id="7605329">)</span>&nbsp;<span class="op" id="7605331">(</span><span class="ident" id="7605332">testKe</span>&nbsp;<span class="op" id="7605339">[</span><span class="op" id="7605340">]</span><span class="builtintype" id="7605341">uint32</span><span class="op" id="7605347">,</span>&nbsp;<span class="ident" id="7605349">testWe</span><span class="op" id="7605355">,</span>&nbsp;<span class="ident" id="7605357">testFe</span>&nbsp;<span class="op" id="7605364">[</span><span class="op" id="7605365">]</span><span class="builtintype" id="7605366">float32</span><span class="op" id="7605373">)</span>&nbsp;<span class="op" id="7605375">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605378">const</span>&nbsp;<span class="ident" id="7605384">m2</span>&nbsp;<span class="op" id="7605387">=</span>&nbsp;<span class="num" id="7605389">1</span>&nbsp;<span class="op" id="7605391">&lt;&lt;</span>&nbsp;<span class="num" id="7605394">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605398">var</span>&nbsp;<span class="op" id="7605402">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605406">de</span>&nbsp;<span class="builtintype" id="7605409">float64</span>&nbsp;<span class="op" id="7605417">=</span>&nbsp;<span class="ident" id="7605419">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605424">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605435">=</span>&nbsp;<span class="ident" id="7605437">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605442">ve</span>&nbsp;<span class="builtintype" id="7605445">float64</span>&nbsp;<span class="op" id="7605453">=</span>&nbsp;<span class="num" id="7605455">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605481">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605485">testKe</span>&nbsp;<span class="op" id="7605492">=</span>&nbsp;<span class="builtinfunc" id="7605494">make</span><span class="op" id="7605498">(</span><span class="op" id="7605499">[</span><span class="op" id="7605500">]</span><span class="builtintype" id="7605501">uint32</span><span class="op" id="7605507">,</span>&nbsp;<span class="num" id="7605509">256</span><span class="op" id="7605512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605515">testWe</span>&nbsp;<span class="op" id="7605522">=</span>&nbsp;<span class="builtinfunc" id="7605524">make</span><span class="op" id="7605528">(</span><span class="op" id="7605529">[</span><span class="op" id="7605530">]</span><span class="builtintype" id="7605531">float32</span><span class="op" id="7605538">,</span>&nbsp;<span class="num" id="7605540">256</span><span class="op" id="7605543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605546">testFe</span>&nbsp;<span class="op" id="7605553">=</span>&nbsp;<span class="builtinfunc" id="7605555">make</span><span class="op" id="7605559">(</span><span class="op" id="7605560">[</span><span class="op" id="7605561">]</span><span class="builtintype" id="7605562">float32</span><span class="op" id="7605569">,</span>&nbsp;<span class="num" id="7605571">256</span><span class="op" id="7605574">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605578">q</span>&nbsp;<span class="op" id="7605580">:=</span>&nbsp;<span class="ident" id="7605583">ve</span>&nbsp;<span class="op" id="7605586">/</span>&nbsp;<span class="ident" id="7605588">math</span><span class="op" id="7605592">.</span><span class="ident" id="7605593">Exp</span><span class="op" id="7605596">(</span><span class="op" id="7605597">-</span><span class="ident" id="7605598">de</span><span class="op" id="7605600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605603">testKe</span><span class="op" id="7605609">[</span><span class="num" id="7605610">0</span><span class="op" id="7605611">]</span>&nbsp;<span class="op" id="7605613">=</span>&nbsp;<span class="builtintype" id="7605615">uint32</span><span class="op" id="7605621">(</span><span class="op" id="7605622">(</span><span class="ident" id="7605623">de</span>&nbsp;<span class="op" id="7605626">/</span>&nbsp;<span class="ident" id="7605628">q</span><span class="op" id="7605629">)</span>&nbsp;<span class="op" id="7605631">*</span>&nbsp;<span class="ident" id="7605633">m2</span><span class="op" id="7605635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605638">testKe</span><span class="op" id="7605644">[</span><span class="num" id="7605645">1</span><span class="op" id="7605646">]</span>&nbsp;<span class="op" id="7605648">=</span>&nbsp;<span class="num" id="7605650">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605653">testWe</span><span class="op" id="7605659">[</span><span class="num" id="7605660">0</span><span class="op" id="7605661">]</span>&nbsp;<span class="op" id="7605663">=</span>&nbsp;<span class="builtintype" id="7605665">float32</span><span class="op" id="7605672">(</span><span class="ident" id="7605673">q</span>&nbsp;<span class="op" id="7605675">/</span>&nbsp;<span class="ident" id="7605677">m2</span><span class="op" id="7605679">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605682">testWe</span><span class="op" id="7605688">[</span><span class="num" id="7605689">255</span><span class="op" id="7605692">]</span>&nbsp;<span class="op" id="7605694">=</span>&nbsp;<span class="builtintype" id="7605696">float32</span><span class="op" id="7605703">(</span><span class="ident" id="7605704">de</span>&nbsp;<span class="op" id="7605707">/</span>&nbsp;<span class="ident" id="7605709">m2</span><span class="op" id="7605711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605714">testFe</span><span class="op" id="7605720">[</span><span class="num" id="7605721">0</span><span class="op" id="7605722">]</span>&nbsp;<span class="op" id="7605724">=</span>&nbsp;<span class="num" id="7605726">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605731">testFe</span><span class="op" id="7605737">[</span><span class="num" id="7605738">255</span><span class="op" id="7605741">]</span>&nbsp;<span class="op" id="7605743">=</span>&nbsp;<span class="builtintype" id="7605745">float32</span><span class="op" id="7605752">(</span><span class="ident" id="7605753">math</span><span class="op" id="7605757">.</span><span class="ident" id="7605758">Exp</span><span class="op" id="7605761">(</span><span class="op" id="7605762">-</span><span class="ident" id="7605763">de</span><span class="op" id="7605765">)</span><span class="op" id="7605766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605769">for</span>&nbsp;<span class="ident" id="7605773">i</span>&nbsp;<span class="op" id="7605775">:=</span>&nbsp;<span class="num" id="7605778">254</span><span class="op" id="7605781">;</span>&nbsp;<span class="ident" id="7605783">i</span>&nbsp;<span class="op" id="7605785">&gt;=</span>&nbsp;<span class="num" id="7605788">1</span><span class="op" id="7605789">;</span>&nbsp;<span class="ident" id="7605791">i</span><span class="op" id="7605792">--</span>&nbsp;<span class="op" id="7605795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605799">de</span>&nbsp;<span class="op" id="7605802">=</span>&nbsp;<span class="op" id="7605804">-</span><span class="ident" id="7605805">math</span><span class="op" id="7605809">.</span><span class="ident" id="7605810">Log</span><span class="op" id="7605813">(</span><span class="ident" id="7605814">ve</span><span class="op" id="7605816">/</span><span class="ident" id="7605817">de</span>&nbsp;<span class="op" id="7605820">+</span>&nbsp;<span class="ident" id="7605822">math</span><span class="op" id="7605826">.</span><span class="ident" id="7605827">Exp</span><span class="op" id="7605830">(</span><span class="op" id="7605831">-</span><span class="ident" id="7605832">de</span><span class="op" id="7605834">)</span><span class="op" id="7605835">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605839">testKe</span><span class="op" id="7605845">[</span><span class="ident" id="7605846">i</span><span class="op" id="7605847">+</span><span class="num" id="7605848">1</span><span class="op" id="7605849">]</span>&nbsp;<span class="op" id="7605851">=</span>&nbsp;<span class="builtintype" id="7605853">uint32</span><span class="op" id="7605859">(</span><span class="op" id="7605860">(</span><span class="ident" id="7605861">de</span>&nbsp;<span class="op" id="7605864">/</span>&nbsp;<span class="ident" id="7605866">te</span><span class="op" id="7605868">)</span>&nbsp;<span class="op" id="7605870">*</span>&nbsp;<span class="ident" id="7605872">m2</span><span class="op" id="7605874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605878">te</span>&nbsp;<span class="op" id="7605881">=</span>&nbsp;<span class="ident" id="7605883">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605888">testFe</span><span class="op" id="7605894">[</span><span class="ident" id="7605895">i</span><span class="op" id="7605896">]</span>&nbsp;<span class="op" id="7605898">=</span>&nbsp;<span class="builtintype" id="7605900">float32</span><span class="op" id="7605907">(</span><span class="ident" id="7605908">math</span><span class="op" id="7605912">.</span><span class="ident" id="7605913">Exp</span><span class="op" id="7605916">(</span><span class="op" id="7605917">-</span><span class="ident" id="7605918">de</span><span class="op" id="7605920">)</span><span class="op" id="7605921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605925">testWe</span><span class="op" id="7605931">[</span><span class="ident" id="7605932">i</span><span class="op" id="7605933">]</span>&nbsp;<span class="op" id="7605935">=</span>&nbsp;<span class="builtintype" id="7605937">float32</span><span class="op" id="7605944">(</span><span class="ident" id="7605945">de</span>&nbsp;<span class="op" id="7605948">/</span>&nbsp;<span class="ident" id="7605950">m2</span><span class="op" id="7605952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605955">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605958">return</span><br>
<span class="lineno"></span><span class="op" id="7605965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7605968">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7606036">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7606100">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7606118">func</span>&nbsp;<span class="ident" id="7606123">compareUint32Slices</span><span class="op" id="7606142">(</span><span class="ident" id="7606143">s1</span><span class="op" id="7606145">,</span>&nbsp;<span class="ident" id="7606147">s2</span>&nbsp;<span class="op" id="7606150">[</span><span class="op" id="7606151">]</span><span class="builtintype" id="7606152">uint32</span><span class="op" id="7606158">)</span>&nbsp;<span class="builtintype" id="7606160">int</span>&nbsp;<span class="op" id="7606164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606167">if</span>&nbsp;<span class="builtinfunc" id="7606170">len</span><span class="op" id="7606173">(</span><span class="ident" id="7606174">s1</span><span class="op" id="7606176">)</span>&nbsp;<span class="op" id="7606178">!=</span>&nbsp;<span class="builtinfunc" id="7606181">len</span><span class="op" id="7606184">(</span><span class="ident" id="7606185">s2</span><span class="op" id="7606187">)</span>&nbsp;<span class="op" id="7606189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606193">if</span>&nbsp;<span class="builtinfunc" id="7606196">len</span><span class="op" id="7606199">(</span><span class="ident" id="7606200">s1</span><span class="op" id="7606202">)</span>&nbsp;<span class="op" id="7606204">&gt;</span>&nbsp;<span class="builtinfunc" id="7606206">len</span><span class="op" id="7606209">(</span><span class="ident" id="7606210">s2</span><span class="op" id="7606212">)</span>&nbsp;<span class="op" id="7606214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606219">return</span>&nbsp;<span class="builtinfunc" id="7606226">len</span><span class="op" id="7606229">(</span><span class="ident" id="7606230">s2</span><span class="op" id="7606232">)</span>&nbsp;<span class="op" id="7606234">+</span>&nbsp;<span class="num" id="7606236">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606244">return</span>&nbsp;<span class="builtinfunc" id="7606251">len</span><span class="op" id="7606254">(</span><span class="ident" id="7606255">s1</span><span class="op" id="7606257">)</span>&nbsp;<span class="op" id="7606259">+</span>&nbsp;<span class="num" id="7606261">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606267">for</span>&nbsp;<span class="ident" id="7606271">i</span>&nbsp;<span class="op" id="7606273">:=</span>&nbsp;<span class="keyword" id="7606276">range</span>&nbsp;<span class="ident" id="7606282">s1</span>&nbsp;<span class="op" id="7606285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606289">if</span>&nbsp;<span class="ident" id="7606292">s1</span><span class="op" id="7606294">[</span><span class="ident" id="7606295">i</span><span class="op" id="7606296">]</span>&nbsp;<span class="op" id="7606298">!=</span>&nbsp;<span class="ident" id="7606301">s2</span><span class="op" id="7606303">[</span><span class="ident" id="7606304">i</span><span class="op" id="7606305">]</span>&nbsp;<span class="op" id="7606307">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606312">return</span>&nbsp;<span class="ident" id="7606319">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606329">return</span>&nbsp;<span class="op" id="7606336">-</span><span class="num" id="7606337">1</span><br>
<span class="lineno"></span><span class="op" id="7606339">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7606342">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7606411">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7606475">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7606493">func</span>&nbsp;<span class="ident" id="7606498">compareFloat32Slices</span><span class="op" id="7606518">(</span><span class="ident" id="7606519">s1</span><span class="op" id="7606521">,</span>&nbsp;<span class="ident" id="7606523">s2</span>&nbsp;<span class="op" id="7606526">[</span><span class="op" id="7606527">]</span><span class="builtintype" id="7606528">float32</span><span class="op" id="7606535">)</span>&nbsp;<span class="builtintype" id="7606537">int</span>&nbsp;<span class="op" id="7606541">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606544">if</span>&nbsp;<span class="builtinfunc" id="7606547">len</span><span class="op" id="7606550">(</span><span class="ident" id="7606551">s1</span><span class="op" id="7606553">)</span>&nbsp;<span class="op" id="7606555">!=</span>&nbsp;<span class="builtinfunc" id="7606558">len</span><span class="op" id="7606561">(</span><span class="ident" id="7606562">s2</span><span class="op" id="7606564">)</span>&nbsp;<span class="op" id="7606566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606570">if</span>&nbsp;<span class="builtinfunc" id="7606573">len</span><span class="op" id="7606576">(</span><span class="ident" id="7606577">s1</span><span class="op" id="7606579">)</span>&nbsp;<span class="op" id="7606581">&gt;</span>&nbsp;<span class="builtinfunc" id="7606583">len</span><span class="op" id="7606586">(</span><span class="ident" id="7606587">s2</span><span class="op" id="7606589">)</span>&nbsp;<span class="op" id="7606591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606596">return</span>&nbsp;<span class="builtinfunc" id="7606603">len</span><span class="op" id="7606606">(</span><span class="ident" id="7606607">s2</span><span class="op" id="7606609">)</span>&nbsp;<span class="op" id="7606611">+</span>&nbsp;<span class="num" id="7606613">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606621">return</span>&nbsp;<span class="builtinfunc" id="7606628">len</span><span class="op" id="7606631">(</span><span class="ident" id="7606632">s1</span><span class="op" id="7606634">)</span>&nbsp;<span class="op" id="7606636">+</span>&nbsp;<span class="num" id="7606638">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606644">for</span>&nbsp;<span class="ident" id="7606648">i</span>&nbsp;<span class="op" id="7606650">:=</span>&nbsp;<span class="keyword" id="7606653">range</span>&nbsp;<span class="ident" id="7606659">s1</span>&nbsp;<span class="op" id="7606662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606666">if</span>&nbsp;<span class="op" id="7606669">!</span><span class="ident" id="7606670">nearEqual</span><span class="op" id="7606679">(</span><span class="builtintype" id="7606680">float64</span><span class="op" id="7606687">(</span><span class="ident" id="7606688">s1</span><span class="op" id="7606690">[</span><span class="ident" id="7606691">i</span><span class="op" id="7606692">]</span><span class="op" id="7606693">)</span><span class="op" id="7606694">,</span>&nbsp;<span class="builtintype" id="7606696">float64</span><span class="op" id="7606703">(</span><span class="ident" id="7606704">s2</span><span class="op" id="7606706">[</span><span class="ident" id="7606707">i</span><span class="op" id="7606708">]</span><span class="op" id="7606709">)</span><span class="op" id="7606710">,</span>&nbsp;<span class="num" id="7606712">0</span><span class="op" id="7606713">,</span>&nbsp;<span class="num" id="7606715">1e-7</span><span class="op" id="7606719">)</span>&nbsp;<span class="op" id="7606721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606726">return</span>&nbsp;<span class="ident" id="7606733">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606737">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606743">return</span>&nbsp;<span class="op" id="7606750">-</span><span class="num" id="7606751">1</span><br>
<span class="lineno"></span><span class="op" id="7606753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7606756">func</span>&nbsp;<span class="ident" id="7606761">TestNormTables</span><span class="op" id="7606775">(</span><span class="ident" id="7606776">t</span>&nbsp;<span class="op" id="7606778">*</span><span class="ident" id="7606779">testing</span><span class="op" id="7606786">.</span><span class="ident" id="7606787">T</span><span class="op" id="7606788">)</span>&nbsp;<span class="op" id="7606790">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606793">testKn</span><span class="op" id="7606799">,</span>&nbsp;<span class="ident" id="7606801">testWn</span><span class="op" id="7606807">,</span>&nbsp;<span class="ident" id="7606809">testFn</span>&nbsp;<span class="op" id="7606816">:=</span>&nbsp;<span class="ident" id="7606819">initNorm</span><span class="op" id="7606827">(</span><span class="op" id="7606828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606831">if</span>&nbsp;<span class="ident" id="7606834">i</span>&nbsp;<span class="op" id="7606836">:=</span>&nbsp;<span class="ident" id="7606839">compareUint32Slices</span><span class="op" id="7606858">(</span><span class="ident" id="7606859">kn</span><span class="op" id="7606861">[</span><span class="num" id="7606862">0</span><span class="op" id="7606863">:</span><span class="op" id="7606864">]</span><span class="op" id="7606865">,</span>&nbsp;<span class="ident" id="7606867">testKn</span><span class="op" id="7606873">)</span><span class="op" id="7606874">;</span>&nbsp;<span class="ident" id="7606876">i</span>&nbsp;<span class="op" id="7606878">&gt;=</span>&nbsp;<span class="num" id="7606881">0</span>&nbsp;<span class="op" id="7606883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7606887">t</span><span class="op" id="7606888">.</span><span class="ident" id="7606889">Errorf</span><span class="op" id="7606895">(</span><span class="string" id="7606896">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7606932">,</span>&nbsp;<span class="ident" id="7606934">i</span><span class="op" id="7606935">,</span>&nbsp;<span class="ident" id="7606937">kn</span><span class="op" id="7606939">[</span><span class="ident" id="7606940">i</span><span class="op" id="7606941">]</span><span class="op" id="7606942">,</span>&nbsp;<span class="ident" id="7606944">testKn</span><span class="op" id="7606950">[</span><span class="ident" id="7606951">i</span><span class="op" id="7606952">]</span><span class="op" id="7606953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7606956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7606959">if</span>&nbsp;<span class="ident" id="7606962">i</span>&nbsp;<span class="op" id="7606964">:=</span>&nbsp;<span class="ident" id="7606967">compareFloat32Slices</span><span class="op" id="7606987">(</span><span class="ident" id="7606988">wn</span><span class="op" id="7606990">[</span><span class="num" id="7606991">0</span><span class="op" id="7606992">:</span><span class="op" id="7606993">]</span><span class="op" id="7606994">,</span>&nbsp;<span class="ident" id="7606996">testWn</span><span class="op" id="7607002">)</span><span class="op" id="7607003">;</span>&nbsp;<span class="ident" id="7607005">i</span>&nbsp;<span class="op" id="7607007">&gt;=</span>&nbsp;<span class="num" id="7607010">0</span>&nbsp;<span class="op" id="7607012">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607016">t</span><span class="op" id="7607017">.</span><span class="ident" id="7607018">Errorf</span><span class="op" id="7607024">(</span><span class="string" id="7607025">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7607061">,</span>&nbsp;<span class="ident" id="7607063">i</span><span class="op" id="7607064">,</span>&nbsp;<span class="ident" id="7607066">wn</span><span class="op" id="7607068">[</span><span class="ident" id="7607069">i</span><span class="op" id="7607070">]</span><span class="op" id="7607071">,</span>&nbsp;<span class="ident" id="7607073">testWn</span><span class="op" id="7607079">[</span><span class="ident" id="7607080">i</span><span class="op" id="7607081">]</span><span class="op" id="7607082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607088">if</span>&nbsp;<span class="ident" id="7607091">i</span>&nbsp;<span class="op" id="7607093">:=</span>&nbsp;<span class="ident" id="7607096">compareFloat32Slices</span><span class="op" id="7607116">(</span><span class="ident" id="7607117">fn</span><span class="op" id="7607119">[</span><span class="num" id="7607120">0</span><span class="op" id="7607121">:</span><span class="op" id="7607122">]</span><span class="op" id="7607123">,</span>&nbsp;<span class="ident" id="7607125">testFn</span><span class="op" id="7607131">)</span><span class="op" id="7607132">;</span>&nbsp;<span class="ident" id="7607134">i</span>&nbsp;<span class="op" id="7607136">&gt;=</span>&nbsp;<span class="num" id="7607139">0</span>&nbsp;<span class="op" id="7607141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607145">t</span><span class="op" id="7607146">.</span><span class="ident" id="7607147">Errorf</span><span class="op" id="7607153">(</span><span class="string" id="7607154">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7607190">,</span>&nbsp;<span class="ident" id="7607192">i</span><span class="op" id="7607193">,</span>&nbsp;<span class="ident" id="7607195">fn</span><span class="op" id="7607197">[</span><span class="ident" id="7607198">i</span><span class="op" id="7607199">]</span><span class="op" id="7607200">,</span>&nbsp;<span class="ident" id="7607202">testFn</span><span class="op" id="7607208">[</span><span class="ident" id="7607209">i</span><span class="op" id="7607210">]</span><span class="op" id="7607211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607214">}</span><br>
<span class="lineno">310</span><span class="op" id="7607216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7607219">func</span>&nbsp;<span class="ident" id="7607224">TestExpTables</span><span class="op" id="7607237">(</span><span class="ident" id="7607238">t</span>&nbsp;<span class="op" id="7607240">*</span><span class="ident" id="7607241">testing</span><span class="op" id="7607248">.</span><span class="ident" id="7607249">T</span><span class="op" id="7607250">)</span>&nbsp;<span class="op" id="7607252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607255">testKe</span><span class="op" id="7607261">,</span>&nbsp;<span class="ident" id="7607263">testWe</span><span class="op" id="7607269">,</span>&nbsp;<span class="ident" id="7607271">testFe</span>&nbsp;<span class="op" id="7607278">:=</span>&nbsp;<span class="ident" id="7607281">initExp</span><span class="op" id="7607288">(</span><span class="op" id="7607289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607292">if</span>&nbsp;<span class="ident" id="7607295">i</span>&nbsp;<span class="op" id="7607297">:=</span>&nbsp;<span class="ident" id="7607300">compareUint32Slices</span><span class="op" id="7607319">(</span><span class="ident" id="7607320">ke</span><span class="op" id="7607322">[</span><span class="num" id="7607323">0</span><span class="op" id="7607324">:</span><span class="op" id="7607325">]</span><span class="op" id="7607326">,</span>&nbsp;<span class="ident" id="7607328">testKe</span><span class="op" id="7607334">)</span><span class="op" id="7607335">;</span>&nbsp;<span class="ident" id="7607337">i</span>&nbsp;<span class="op" id="7607339">&gt;=</span>&nbsp;<span class="num" id="7607342">0</span>&nbsp;<span class="op" id="7607344">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607348">t</span><span class="op" id="7607349">.</span><span class="ident" id="7607350">Errorf</span><span class="op" id="7607356">(</span><span class="string" id="7607357">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7607393">,</span>&nbsp;<span class="ident" id="7607395">i</span><span class="op" id="7607396">,</span>&nbsp;<span class="ident" id="7607398">ke</span><span class="op" id="7607400">[</span><span class="ident" id="7607401">i</span><span class="op" id="7607402">]</span><span class="op" id="7607403">,</span>&nbsp;<span class="ident" id="7607405">testKe</span><span class="op" id="7607411">[</span><span class="ident" id="7607412">i</span><span class="op" id="7607413">]</span><span class="op" id="7607414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607420">if</span>&nbsp;<span class="ident" id="7607423">i</span>&nbsp;<span class="op" id="7607425">:=</span>&nbsp;<span class="ident" id="7607428">compareFloat32Slices</span><span class="op" id="7607448">(</span><span class="ident" id="7607449">we</span><span class="op" id="7607451">[</span><span class="num" id="7607452">0</span><span class="op" id="7607453">:</span><span class="op" id="7607454">]</span><span class="op" id="7607455">,</span>&nbsp;<span class="ident" id="7607457">testWe</span><span class="op" id="7607463">)</span><span class="op" id="7607464">;</span>&nbsp;<span class="ident" id="7607466">i</span>&nbsp;<span class="op" id="7607468">&gt;=</span>&nbsp;<span class="num" id="7607471">0</span>&nbsp;<span class="op" id="7607473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607477">t</span><span class="op" id="7607478">.</span><span class="ident" id="7607479">Errorf</span><span class="op" id="7607485">(</span><span class="string" id="7607486">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7607522">,</span>&nbsp;<span class="ident" id="7607524">i</span><span class="op" id="7607525">,</span>&nbsp;<span class="ident" id="7607527">we</span><span class="op" id="7607529">[</span><span class="ident" id="7607530">i</span><span class="op" id="7607531">]</span><span class="op" id="7607532">,</span>&nbsp;<span class="ident" id="7607534">testWe</span><span class="op" id="7607540">[</span><span class="ident" id="7607541">i</span><span class="op" id="7607542">]</span><span class="op" id="7607543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607546">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607549">if</span>&nbsp;<span class="ident" id="7607552">i</span>&nbsp;<span class="op" id="7607554">:=</span>&nbsp;<span class="ident" id="7607557">compareFloat32Slices</span><span class="op" id="7607577">(</span><span class="ident" id="7607578">fe</span><span class="op" id="7607580">[</span><span class="num" id="7607581">0</span><span class="op" id="7607582">:</span><span class="op" id="7607583">]</span><span class="op" id="7607584">,</span>&nbsp;<span class="ident" id="7607586">testFe</span><span class="op" id="7607592">)</span><span class="op" id="7607593">;</span>&nbsp;<span class="ident" id="7607595">i</span>&nbsp;<span class="op" id="7607597">&gt;=</span>&nbsp;<span class="num" id="7607600">0</span>&nbsp;<span class="op" id="7607602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607606">t</span><span class="op" id="7607607">.</span><span class="ident" id="7607608">Errorf</span><span class="op" id="7607614">(</span><span class="string" id="7607615">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7607651">,</span>&nbsp;<span class="ident" id="7607653">i</span><span class="op" id="7607654">,</span>&nbsp;<span class="ident" id="7607656">fe</span><span class="op" id="7607658">[</span><span class="ident" id="7607659">i</span><span class="op" id="7607660">]</span><span class="op" id="7607661">,</span>&nbsp;<span class="ident" id="7607663">testFe</span><span class="op" id="7607669">[</span><span class="ident" id="7607670">i</span><span class="op" id="7607671">]</span><span class="op" id="7607672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607675">}</span><br>
<span class="lineno"></span><span class="op" id="7607677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7607680">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7607752">func</span>&nbsp;<span class="ident" id="7607757">TestFloat32</span><span class="op" id="7607768">(</span><span class="ident" id="7607769">t</span>&nbsp;<span class="op" id="7607771">*</span><span class="ident" id="7607772">testing</span><span class="op" id="7607779">.</span><span class="ident" id="7607780">T</span><span class="op" id="7607781">)</span>&nbsp;<span class="op" id="7607783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607786">r</span>&nbsp;<span class="op" id="7607788">:=</span>&nbsp;<span class="ident" id="7607791">New</span><span class="op" id="7607794">(</span><span class="ident" id="7607795">NewSource</span><span class="op" id="7607804">(</span><span class="num" id="7607805">1</span><span class="op" id="7607806">)</span><span class="op" id="7607807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607810">for</span>&nbsp;<span class="ident" id="7607814">ct</span>&nbsp;<span class="op" id="7607817">:=</span>&nbsp;<span class="num" id="7607820">0</span><span class="op" id="7607821">;</span>&nbsp;<span class="ident" id="7607823">ct</span>&nbsp;<span class="op" id="7607826">&lt;</span>&nbsp;<span class="num" id="7607828">10e6</span><span class="op" id="7607832">;</span>&nbsp;<span class="ident" id="7607834">ct</span><span class="op" id="7607836">++</span>&nbsp;<span class="op" id="7607839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607843">f</span>&nbsp;<span class="op" id="7607845">:=</span>&nbsp;<span class="ident" id="7607848">r</span><span class="op" id="7607849">.</span><span class="ident" id="7607850">Float32</span><span class="op" id="7607857">(</span><span class="op" id="7607858">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7607862">if</span>&nbsp;<span class="ident" id="7607865">f</span>&nbsp;<span class="op" id="7607867">&gt;=</span>&nbsp;<span class="num" id="7607870">1</span>&nbsp;<span class="op" id="7607872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7607877">t</span><span class="op" id="7607878">.</span><span class="ident" id="7607879">Fatal</span><span class="op" id="7607884">(</span><span class="string" id="7607885">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7607926">,</span>&nbsp;<span class="ident" id="7607928">ct</span><span class="op" id="7607930">,</span>&nbsp;<span class="string" id="7607932">&#34;f:&#34;</span><span class="op" id="7607936">,</span>&nbsp;<span class="ident" id="7607938">f</span><span class="op" id="7607939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7607946">}</span><br>
<span class="lineno"></span><span class="op" id="7607948">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7607951">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7607966">func</span>&nbsp;<span class="ident" id="7607971">BenchmarkInt63Threadsafe</span><span class="op" id="7607995">(</span><span class="ident" id="7607996">b</span>&nbsp;<span class="op" id="7607998">*</span><span class="ident" id="7607999">testing</span><span class="op" id="7608006">.</span><span class="ident" id="7608007">B</span><span class="op" id="7608008">)</span>&nbsp;<span class="op" id="7608010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608013">for</span>&nbsp;<span class="ident" id="7608017">n</span>&nbsp;<span class="op" id="7608019">:=</span>&nbsp;<span class="ident" id="7608022">b</span><span class="op" id="7608023">.</span><span class="ident" id="7608024">N</span><span class="op" id="7608025">;</span>&nbsp;<span class="ident" id="7608027">n</span>&nbsp;<span class="op" id="7608029">&gt;</span>&nbsp;<span class="num" id="7608031">0</span><span class="op" id="7608032">;</span>&nbsp;<span class="ident" id="7608034">n</span><span class="op" id="7608035">--</span>&nbsp;<span class="op" id="7608038">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608042">Int63</span><span class="op" id="7608047">(</span><span class="op" id="7608048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608051">}</span><br>
<span class="lineno"></span><span class="op" id="7608053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608056">func</span>&nbsp;<span class="ident" id="7608061">BenchmarkInt63Unthreadsafe</span><span class="op" id="7608087">(</span><span class="ident" id="7608088">b</span>&nbsp;<span class="op" id="7608090">*</span><span class="ident" id="7608091">testing</span><span class="op" id="7608098">.</span><span class="ident" id="7608099">B</span><span class="op" id="7608100">)</span>&nbsp;<span class="op" id="7608102">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608105">r</span>&nbsp;<span class="op" id="7608107">:=</span>&nbsp;<span class="ident" id="7608110">New</span><span class="op" id="7608113">(</span><span class="ident" id="7608114">NewSource</span><span class="op" id="7608123">(</span><span class="num" id="7608124">1</span><span class="op" id="7608125">)</span><span class="op" id="7608126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608129">for</span>&nbsp;<span class="ident" id="7608133">n</span>&nbsp;<span class="op" id="7608135">:=</span>&nbsp;<span class="ident" id="7608138">b</span><span class="op" id="7608139">.</span><span class="ident" id="7608140">N</span><span class="op" id="7608141">;</span>&nbsp;<span class="ident" id="7608143">n</span>&nbsp;<span class="op" id="7608145">&gt;</span>&nbsp;<span class="num" id="7608147">0</span><span class="op" id="7608148">;</span>&nbsp;<span class="ident" id="7608150">n</span><span class="op" id="7608151">--</span>&nbsp;<span class="op" id="7608154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608158">r</span><span class="op" id="7608159">.</span><span class="ident" id="7608160">Int63</span><span class="op" id="7608165">(</span><span class="op" id="7608166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608169">}</span><br>
<span class="lineno"></span><span class="op" id="7608171">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7608174">func</span>&nbsp;<span class="ident" id="7608179">BenchmarkIntn1000</span><span class="op" id="7608196">(</span><span class="ident" id="7608197">b</span>&nbsp;<span class="op" id="7608199">*</span><span class="ident" id="7608200">testing</span><span class="op" id="7608207">.</span><span class="ident" id="7608208">B</span><span class="op" id="7608209">)</span>&nbsp;<span class="op" id="7608211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608214">r</span>&nbsp;<span class="op" id="7608216">:=</span>&nbsp;<span class="ident" id="7608219">New</span><span class="op" id="7608222">(</span><span class="ident" id="7608223">NewSource</span><span class="op" id="7608232">(</span><span class="num" id="7608233">1</span><span class="op" id="7608234">)</span><span class="op" id="7608235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608238">for</span>&nbsp;<span class="ident" id="7608242">n</span>&nbsp;<span class="op" id="7608244">:=</span>&nbsp;<span class="ident" id="7608247">b</span><span class="op" id="7608248">.</span><span class="ident" id="7608249">N</span><span class="op" id="7608250">;</span>&nbsp;<span class="ident" id="7608252">n</span>&nbsp;<span class="op" id="7608254">&gt;</span>&nbsp;<span class="num" id="7608256">0</span><span class="op" id="7608257">;</span>&nbsp;<span class="ident" id="7608259">n</span><span class="op" id="7608260">--</span>&nbsp;<span class="op" id="7608263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608267">r</span><span class="op" id="7608268">.</span><span class="ident" id="7608269">Intn</span><span class="op" id="7608273">(</span><span class="num" id="7608274">1000</span><span class="op" id="7608278">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608281">}</span><br>
<span class="lineno"></span><span class="op" id="7608283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608286">func</span>&nbsp;<span class="ident" id="7608291">BenchmarkInt63n1000</span><span class="op" id="7608310">(</span><span class="ident" id="7608311">b</span>&nbsp;<span class="op" id="7608313">*</span><span class="ident" id="7608314">testing</span><span class="op" id="7608321">.</span><span class="ident" id="7608322">B</span><span class="op" id="7608323">)</span>&nbsp;<span class="op" id="7608325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608328">r</span>&nbsp;<span class="op" id="7608330">:=</span>&nbsp;<span class="ident" id="7608333">New</span><span class="op" id="7608336">(</span><span class="ident" id="7608337">NewSource</span><span class="op" id="7608346">(</span><span class="num" id="7608347">1</span><span class="op" id="7608348">)</span><span class="op" id="7608349">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608352">for</span>&nbsp;<span class="ident" id="7608356">n</span>&nbsp;<span class="op" id="7608358">:=</span>&nbsp;<span class="ident" id="7608361">b</span><span class="op" id="7608362">.</span><span class="ident" id="7608363">N</span><span class="op" id="7608364">;</span>&nbsp;<span class="ident" id="7608366">n</span>&nbsp;<span class="op" id="7608368">&gt;</span>&nbsp;<span class="num" id="7608370">0</span><span class="op" id="7608371">;</span>&nbsp;<span class="ident" id="7608373">n</span><span class="op" id="7608374">--</span>&nbsp;<span class="op" id="7608377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608381">r</span><span class="op" id="7608382">.</span><span class="ident" id="7608383">Int63n</span><span class="op" id="7608389">(</span><span class="num" id="7608390">1000</span><span class="op" id="7608394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608397">}</span><br>
<span class="lineno"></span><span class="op" id="7608399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7608402">func</span>&nbsp;<span class="ident" id="7608407">BenchmarkInt31n1000</span><span class="op" id="7608426">(</span><span class="ident" id="7608427">b</span>&nbsp;<span class="op" id="7608429">*</span><span class="ident" id="7608430">testing</span><span class="op" id="7608437">.</span><span class="ident" id="7608438">B</span><span class="op" id="7608439">)</span>&nbsp;<span class="op" id="7608441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608444">r</span>&nbsp;<span class="op" id="7608446">:=</span>&nbsp;<span class="ident" id="7608449">New</span><span class="op" id="7608452">(</span><span class="ident" id="7608453">NewSource</span><span class="op" id="7608462">(</span><span class="num" id="7608463">1</span><span class="op" id="7608464">)</span><span class="op" id="7608465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608468">for</span>&nbsp;<span class="ident" id="7608472">n</span>&nbsp;<span class="op" id="7608474">:=</span>&nbsp;<span class="ident" id="7608477">b</span><span class="op" id="7608478">.</span><span class="ident" id="7608479">N</span><span class="op" id="7608480">;</span>&nbsp;<span class="ident" id="7608482">n</span>&nbsp;<span class="op" id="7608484">&gt;</span>&nbsp;<span class="num" id="7608486">0</span><span class="op" id="7608487">;</span>&nbsp;<span class="ident" id="7608489">n</span><span class="op" id="7608490">--</span>&nbsp;<span class="op" id="7608493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608497">r</span><span class="op" id="7608498">.</span><span class="ident" id="7608499">Int31n</span><span class="op" id="7608505">(</span><span class="num" id="7608506">1000</span><span class="op" id="7608510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608513">}</span><br>
<span class="lineno">370</span><span class="op" id="7608515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608518">func</span>&nbsp;<span class="ident" id="7608523">BenchmarkFloat32</span><span class="op" id="7608539">(</span><span class="ident" id="7608540">b</span>&nbsp;<span class="op" id="7608542">*</span><span class="ident" id="7608543">testing</span><span class="op" id="7608550">.</span><span class="ident" id="7608551">B</span><span class="op" id="7608552">)</span>&nbsp;<span class="op" id="7608554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608557">r</span>&nbsp;<span class="op" id="7608559">:=</span>&nbsp;<span class="ident" id="7608562">New</span><span class="op" id="7608565">(</span><span class="ident" id="7608566">NewSource</span><span class="op" id="7608575">(</span><span class="num" id="7608576">1</span><span class="op" id="7608577">)</span><span class="op" id="7608578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608581">for</span>&nbsp;<span class="ident" id="7608585">n</span>&nbsp;<span class="op" id="7608587">:=</span>&nbsp;<span class="ident" id="7608590">b</span><span class="op" id="7608591">.</span><span class="ident" id="7608592">N</span><span class="op" id="7608593">;</span>&nbsp;<span class="ident" id="7608595">n</span>&nbsp;<span class="op" id="7608597">&gt;</span>&nbsp;<span class="num" id="7608599">0</span><span class="op" id="7608600">;</span>&nbsp;<span class="ident" id="7608602">n</span><span class="op" id="7608603">--</span>&nbsp;<span class="op" id="7608606">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608610">r</span><span class="op" id="7608611">.</span><span class="ident" id="7608612">Float32</span><span class="op" id="7608619">(</span><span class="op" id="7608620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608623">}</span><br>
<span class="lineno"></span><span class="op" id="7608625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608628">func</span>&nbsp;<span class="ident" id="7608633">BenchmarkFloat64</span><span class="op" id="7608649">(</span><span class="ident" id="7608650">b</span>&nbsp;<span class="op" id="7608652">*</span><span class="ident" id="7608653">testing</span><span class="op" id="7608660">.</span><span class="ident" id="7608661">B</span><span class="op" id="7608662">)</span>&nbsp;<span class="op" id="7608664">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608667">r</span>&nbsp;<span class="op" id="7608669">:=</span>&nbsp;<span class="ident" id="7608672">New</span><span class="op" id="7608675">(</span><span class="ident" id="7608676">NewSource</span><span class="op" id="7608685">(</span><span class="num" id="7608686">1</span><span class="op" id="7608687">)</span><span class="op" id="7608688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608691">for</span>&nbsp;<span class="ident" id="7608695">n</span>&nbsp;<span class="op" id="7608697">:=</span>&nbsp;<span class="ident" id="7608700">b</span><span class="op" id="7608701">.</span><span class="ident" id="7608702">N</span><span class="op" id="7608703">;</span>&nbsp;<span class="ident" id="7608705">n</span>&nbsp;<span class="op" id="7608707">&gt;</span>&nbsp;<span class="num" id="7608709">0</span><span class="op" id="7608710">;</span>&nbsp;<span class="ident" id="7608712">n</span><span class="op" id="7608713">--</span>&nbsp;<span class="op" id="7608716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608720">r</span><span class="op" id="7608721">.</span><span class="ident" id="7608722">Float64</span><span class="op" id="7608729">(</span><span class="op" id="7608730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608733">}</span><br>
<span class="lineno"></span><span class="op" id="7608735">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7608738">func</span>&nbsp;<span class="ident" id="7608743">BenchmarkPerm3</span><span class="op" id="7608757">(</span><span class="ident" id="7608758">b</span>&nbsp;<span class="op" id="7608760">*</span><span class="ident" id="7608761">testing</span><span class="op" id="7608768">.</span><span class="ident" id="7608769">B</span><span class="op" id="7608770">)</span>&nbsp;<span class="op" id="7608772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608775">r</span>&nbsp;<span class="op" id="7608777">:=</span>&nbsp;<span class="ident" id="7608780">New</span><span class="op" id="7608783">(</span><span class="ident" id="7608784">NewSource</span><span class="op" id="7608793">(</span><span class="num" id="7608794">1</span><span class="op" id="7608795">)</span><span class="op" id="7608796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608799">for</span>&nbsp;<span class="ident" id="7608803">n</span>&nbsp;<span class="op" id="7608805">:=</span>&nbsp;<span class="ident" id="7608808">b</span><span class="op" id="7608809">.</span><span class="ident" id="7608810">N</span><span class="op" id="7608811">;</span>&nbsp;<span class="ident" id="7608813">n</span>&nbsp;<span class="op" id="7608815">&gt;</span>&nbsp;<span class="num" id="7608817">0</span><span class="op" id="7608818">;</span>&nbsp;<span class="ident" id="7608820">n</span><span class="op" id="7608821">--</span>&nbsp;<span class="op" id="7608824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608828">r</span><span class="op" id="7608829">.</span><span class="ident" id="7608830">Perm</span><span class="op" id="7608834">(</span><span class="num" id="7608835">3</span><span class="op" id="7608836">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608839">}</span><br>
<span class="lineno"></span><span class="op" id="7608841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7608844">func</span>&nbsp;<span class="ident" id="7608849">BenchmarkPerm30</span><span class="op" id="7608864">(</span><span class="ident" id="7608865">b</span>&nbsp;<span class="op" id="7608867">*</span><span class="ident" id="7608868">testing</span><span class="op" id="7608875">.</span><span class="ident" id="7608876">B</span><span class="op" id="7608877">)</span>&nbsp;<span class="op" id="7608879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608882">r</span>&nbsp;<span class="op" id="7608884">:=</span>&nbsp;<span class="ident" id="7608887">New</span><span class="op" id="7608890">(</span><span class="ident" id="7608891">NewSource</span><span class="op" id="7608900">(</span><span class="num" id="7608901">1</span><span class="op" id="7608902">)</span><span class="op" id="7608903">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7608906">for</span>&nbsp;<span class="ident" id="7608910">n</span>&nbsp;<span class="op" id="7608912">:=</span>&nbsp;<span class="ident" id="7608915">b</span><span class="op" id="7608916">.</span><span class="ident" id="7608917">N</span><span class="op" id="7608918">;</span>&nbsp;<span class="ident" id="7608920">n</span>&nbsp;<span class="op" id="7608922">&gt;</span>&nbsp;<span class="num" id="7608924">0</span><span class="op" id="7608925">;</span>&nbsp;<span class="ident" id="7608927">n</span><span class="op" id="7608928">--</span>&nbsp;<span class="op" id="7608931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7608935">r</span><span class="op" id="7608936">.</span><span class="ident" id="7608937">Perm</span><span class="op" id="7608941">(</span><span class="num" id="7608942">30</span><span class="op" id="7608944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7608947">}</span><br>
<span class="lineno"></span><span class="op" id="7608949">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
