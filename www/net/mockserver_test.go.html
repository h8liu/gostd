<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7923896">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7923951">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7924005">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7924056">package</span>&nbsp;<span class="ident" id="7924064">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924069">import</span>&nbsp;<span class="string" id="7924076">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924084">type</span>&nbsp;<span class="ident" id="7924089">streamListener</span>&nbsp;<span class="keyword" id="7924104">struct</span>&nbsp;<span class="op" id="7924111">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924114">net</span><span class="op" id="7924117">,</span>&nbsp;<span class="ident" id="7924119">addr</span>&nbsp;<span class="builtintype" id="7924124">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924132">ln</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7924142"><a href="/net/net.go.html#1471621">Listener</a></span><br>
<span class="lineno"></span><span class="op" id="7924151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924154">type</span>&nbsp;<span class="ident" id="7924159">dualStackServer</span>&nbsp;<span class="keyword" id="7924175">struct</span>&nbsp;<span class="op" id="7924182">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924185">lnmu</span>&nbsp;<span class="ident" id="7924190"><a href="/net/mockserver_test.go.html#7924076">sync</a></span><span class="op" id="7924194">.</span><span class="ident" id="7924195">RWMutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924204">lns</span>&nbsp;&nbsp;<span class="op" id="7924209">[</span><span class="op" id="7924210">]</span><span class="ident" id="7924211"><a href="/net/mockserver_test.go.html#7924089">streamListener</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924227">port</span>&nbsp;<span class="builtintype" id="7924232">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924241">cmu</span>&nbsp;<span class="ident" id="7924245"><a href="/net/mockserver_test.go.html#7924076">sync</a></span><span class="op" id="7924249">.</span><span class="ident" id="7924250">RWMutex</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924259">cs</span>&nbsp;&nbsp;<span class="op" id="7924263">[</span><span class="op" id="7924264">]</span><span class="ident" id="7924265"><a href="/net/net.go.html#1465335">Conn</a></span>&nbsp;<span class="comment" id="7924270">//&nbsp;established&nbsp;connections&nbsp;at&nbsp;the&nbsp;passive&nbsp;open&nbsp;side</span><br>
<span class="lineno"></span><span class="op" id="7924322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924325">func</span>&nbsp;<span class="op" id="7924330">(</span><span class="ident" id="7924331">dss</span>&nbsp;<span class="op" id="7924335">*</span><span class="ident" id="7924336"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7924351">)</span>&nbsp;<span class="ident" id="7924353">buildup</span><span class="op" id="7924360">(</span><span class="ident" id="7924361">server</span>&nbsp;<span class="keyword" id="7924368">func</span><span class="op" id="7924372">(</span><span class="op" id="7924373">*</span><span class="ident" id="7924374"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7924389">,</span>&nbsp;<span class="ident" id="7924391"><a href="/net/net.go.html#1471621">Listener</a></span><span class="op" id="7924399">)</span><span class="op" id="7924400">)</span>&nbsp;<span class="builtintype" id="7924402">error</span>&nbsp;<span class="op" id="7924408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924411">for</span>&nbsp;<span class="ident" id="7924415">i</span>&nbsp;<span class="op" id="7924417">:=</span>&nbsp;<span class="keyword" id="7924420">range</span>&nbsp;<span class="ident" id="7924426"><a href="/net/mockserver_test.go.html#7924331">dss</a></span><span class="op" id="7924429">.</span><span class="ident" id="7924430">lns</span>&nbsp;<span class="op" id="7924434">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924438">go</span>&nbsp;<span class="ident" id="7924441"><a href="/net/mockserver_test.go.html#7924361">server</a></span><span class="op" id="7924447">(</span><span class="ident" id="7924448"><a href="/net/mockserver_test.go.html#7924331">dss</a></span><span class="op" id="7924451">,</span>&nbsp;<span class="ident" id="7924453"><a href="/net/mockserver_test.go.html#7924331">dss</a></span><span class="op" id="7924456">.</span><span class="ident" id="7924457">lns</span><span class="op" id="7924460">[</span><span class="ident" id="7924461"><a href="/net/mockserver_test.go.html#7924415">i</a></span><span class="op" id="7924462">]</span><span class="op" id="7924463">.</span><span class="ident" id="7924464">ln</span><span class="op" id="7924466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924472">return</span>&nbsp;<span class="ident" id="7924479">nil</span><br>
<span class="lineno"></span><span class="op" id="7924483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7924486">func</span>&nbsp;<span class="op" id="7924491">(</span><span class="ident" id="7924492">dss</span>&nbsp;<span class="op" id="7924496">*</span><span class="ident" id="7924497"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7924512">)</span>&nbsp;<span class="ident" id="7924514">putConn</span><span class="op" id="7924521">(</span><span class="ident" id="7924522">c</span>&nbsp;<span class="ident" id="7924524"><a href="/net/net.go.html#1465335">Conn</a></span><span class="op" id="7924528">)</span>&nbsp;<span class="builtintype" id="7924530">error</span>&nbsp;<span class="op" id="7924536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924539"><a href="/net/mockserver_test.go.html#7924492">dss</a></span><span class="op" id="7924542">.</span><span class="ident" id="7924543">cmu</span><span class="op" id="7924546">.</span><span class="ident" id="7924547">Lock</span><span class="op" id="7924551">(</span><span class="op" id="7924552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924555"><a href="/net/mockserver_test.go.html#7924492">dss</a></span><span class="op" id="7924558">.</span><span class="ident" id="7924559">cs</span>&nbsp;<span class="op" id="7924562">=</span>&nbsp;<span class="builtinfunc" id="7924564">append</span><span class="op" id="7924570">(</span><span class="ident" id="7924571"><a href="/net/mockserver_test.go.html#7924492">dss</a></span><span class="op" id="7924574">.</span><span class="ident" id="7924575">cs</span><span class="op" id="7924577">,</span>&nbsp;<span class="ident" id="7924579"><a href="/net/mockserver_test.go.html#7924522">c</a></span><span class="op" id="7924580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924583"><a href="/net/mockserver_test.go.html#7924492">dss</a></span><span class="op" id="7924586">.</span><span class="ident" id="7924587">cmu</span><span class="op" id="7924590">.</span><span class="ident" id="7924591">Unlock</span><span class="op" id="7924597">(</span><span class="op" id="7924598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924601">return</span>&nbsp;<span class="ident" id="7924608">nil</span><br>
<span class="lineno">35</span><span class="op" id="7924612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924615">func</span>&nbsp;<span class="op" id="7924620">(</span><span class="ident" id="7924621">dss</span>&nbsp;<span class="op" id="7924625">*</span><span class="ident" id="7924626"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7924641">)</span>&nbsp;<span class="ident" id="7924643">teardownNetwork</span><span class="op" id="7924658">(</span><span class="ident" id="7924659">net</span>&nbsp;<span class="builtintype" id="7924663">string</span><span class="op" id="7924669">)</span>&nbsp;<span class="builtintype" id="7924671">error</span>&nbsp;<span class="op" id="7924677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924680"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924683">.</span><span class="ident" id="7924684">lnmu</span><span class="op" id="7924688">.</span><span class="ident" id="7924689">Lock</span><span class="op" id="7924693">(</span><span class="op" id="7924694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924697">for</span>&nbsp;<span class="ident" id="7924701">i</span>&nbsp;<span class="op" id="7924703">:=</span>&nbsp;<span class="keyword" id="7924706">range</span>&nbsp;<span class="ident" id="7924712"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924715">.</span><span class="ident" id="7924716">lns</span>&nbsp;<span class="op" id="7924720">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924724">if</span>&nbsp;<span class="ident" id="7924727"><a href="/net/mockserver_test.go.html#7924659">net</a></span>&nbsp;<span class="op" id="7924731">==</span>&nbsp;<span class="ident" id="7924734"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924737">.</span><span class="ident" id="7924738">lns</span><span class="op" id="7924741">[</span><span class="ident" id="7924742"><a href="/net/mockserver_test.go.html#7924701">i</a></span><span class="op" id="7924743">]</span><span class="op" id="7924744">.</span><span class="ident" id="7924745">net</span>&nbsp;<span class="op" id="7924749">&amp;&amp;</span>&nbsp;<span class="ident" id="7924752"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924755">.</span><span class="ident" id="7924756">lns</span><span class="op" id="7924759">[</span><span class="ident" id="7924760"><a href="/net/mockserver_test.go.html#7924701">i</a></span><span class="op" id="7924761">]</span><span class="op" id="7924762">.</span><span class="ident" id="7924763">ln</span>&nbsp;<span class="op" id="7924766">!=</span>&nbsp;<span class="ident" id="7924769">nil</span>&nbsp;<span class="op" id="7924773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924778"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924781">.</span><span class="ident" id="7924782">lns</span><span class="op" id="7924785">[</span><span class="ident" id="7924786"><a href="/net/mockserver_test.go.html#7924701">i</a></span><span class="op" id="7924787">]</span><span class="op" id="7924788">.</span><span class="ident" id="7924789">ln</span><span class="op" id="7924791">.</span><span class="ident" id="7924792">Close</span><span class="op" id="7924797">(</span><span class="op" id="7924798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924803"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924806">.</span><span class="ident" id="7924807">lns</span><span class="op" id="7924810">[</span><span class="ident" id="7924811"><a href="/net/mockserver_test.go.html#7924701">i</a></span><span class="op" id="7924812">]</span><span class="op" id="7924813">.</span><span class="ident" id="7924814">ln</span>&nbsp;<span class="op" id="7924817">=</span>&nbsp;<span class="ident" id="7924819">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924828">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924831"><a href="/net/mockserver_test.go.html#7924621">dss</a></span><span class="op" id="7924834">.</span><span class="ident" id="7924835">lnmu</span><span class="op" id="7924839">.</span><span class="ident" id="7924840">Unlock</span><span class="op" id="7924846">(</span><span class="op" id="7924847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924850">return</span>&nbsp;<span class="ident" id="7924857">nil</span><br>
<span class="lineno"></span><span class="op" id="7924861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924864">func</span>&nbsp;<span class="op" id="7924869">(</span><span class="ident" id="7924870">dss</span>&nbsp;<span class="op" id="7924874">*</span><span class="ident" id="7924875"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7924890">)</span>&nbsp;<span class="ident" id="7924892">teardown</span><span class="op" id="7924900">(</span><span class="op" id="7924901">)</span>&nbsp;<span class="builtintype" id="7924903">error</span>&nbsp;<span class="op" id="7924909">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924912"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7924915">.</span><span class="ident" id="7924916">lnmu</span><span class="op" id="7924920">.</span><span class="ident" id="7924921">Lock</span><span class="op" id="7924925">(</span><span class="op" id="7924926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924929">for</span>&nbsp;<span class="ident" id="7924933">i</span>&nbsp;<span class="op" id="7924935">:=</span>&nbsp;<span class="keyword" id="7924938">range</span>&nbsp;<span class="ident" id="7924944"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7924947">.</span><span class="ident" id="7924948">lns</span>&nbsp;<span class="op" id="7924952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924956">if</span>&nbsp;<span class="ident" id="7924959"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7924962">.</span><span class="ident" id="7924963">lns</span><span class="op" id="7924966">[</span><span class="ident" id="7924967"><a href="/net/mockserver_test.go.html#7924933">i</a></span><span class="op" id="7924968">]</span><span class="op" id="7924969">.</span><span class="ident" id="7924970">ln</span>&nbsp;<span class="op" id="7924973">!=</span>&nbsp;<span class="ident" id="7924976">nil</span>&nbsp;<span class="op" id="7924980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924985"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7924988">.</span><span class="ident" id="7924989">lns</span><span class="op" id="7924992">[</span><span class="ident" id="7924993"><a href="/net/mockserver_test.go.html#7924933">i</a></span><span class="op" id="7924994">]</span><span class="op" id="7924995">.</span><span class="ident" id="7924996">ln</span><span class="op" id="7924998">.</span><span class="ident" id="7924999">Close</span><span class="op" id="7925004">(</span><span class="op" id="7925005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925009">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925015"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7925018">.</span><span class="ident" id="7925019">lnmu</span><span class="op" id="7925023">.</span><span class="ident" id="7925024">Unlock</span><span class="op" id="7925030">(</span><span class="op" id="7925031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925034"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7925037">.</span><span class="ident" id="7925038">cmu</span><span class="op" id="7925041">.</span><span class="ident" id="7925042">Lock</span><span class="op" id="7925046">(</span><span class="op" id="7925047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925050">for</span>&nbsp;<span class="ident" id="7925054">_</span><span class="op" id="7925055">,</span>&nbsp;<span class="ident" id="7925057">c</span>&nbsp;<span class="op" id="7925059">:=</span>&nbsp;<span class="keyword" id="7925062">range</span>&nbsp;<span class="ident" id="7925068"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7925071">.</span><span class="ident" id="7925072">cs</span>&nbsp;<span class="op" id="7925075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925079"><a href="/net/mockserver_test.go.html#7925057">c</a></span><span class="op" id="7925080">.</span><span class="ident" id="7925081">Close</span><span class="op" id="7925086">(</span><span class="op" id="7925087">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925093"><a href="/net/mockserver_test.go.html#7924870">dss</a></span><span class="op" id="7925096">.</span><span class="ident" id="7925097">cmu</span><span class="op" id="7925100">.</span><span class="ident" id="7925101">Unlock</span><span class="op" id="7925107">(</span><span class="op" id="7925108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925111">return</span>&nbsp;<span class="ident" id="7925118">nil</span><br>
<span class="lineno"></span><span class="op" id="7925122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7925125">func</span>&nbsp;<span class="ident" id="7925130">newDualStackServer</span><span class="op" id="7925148">(</span><span class="ident" id="7925149">lns</span>&nbsp;<span class="op" id="7925153">[</span><span class="op" id="7925154">]</span><span class="ident" id="7925155"><a href="/net/mockserver_test.go.html#7924089">streamListener</a></span><span class="op" id="7925169">)</span>&nbsp;<span class="op" id="7925171">(</span><span class="op" id="7925172">*</span><span class="ident" id="7925173"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7925188">,</span>&nbsp;<span class="builtintype" id="7925190">error</span><span class="op" id="7925195">)</span>&nbsp;<span class="op" id="7925197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925200">dss</span>&nbsp;<span class="op" id="7925204">:=</span>&nbsp;<span class="op" id="7925207">&amp;</span><span class="ident" id="7925208"><a href="/net/mockserver_test.go.html#7924159">dualStackServer</a></span><span class="op" id="7925223">{</span><span class="ident" id="7925224">lns</span><span class="op" id="7925227">:</span>&nbsp;<span class="ident" id="7925229"><a href="/net/mockserver_test.go.html#7925149">lns</a></span><span class="op" id="7925232">,</span>&nbsp;<span class="ident" id="7925234">port</span><span class="op" id="7925238">:</span>&nbsp;<span class="string" id="7925240">&#34;0&#34;</span><span class="op" id="7925243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925246">for</span>&nbsp;<span class="ident" id="7925250">i</span>&nbsp;<span class="op" id="7925252">:=</span>&nbsp;<span class="keyword" id="7925255">range</span>&nbsp;<span class="ident" id="7925261"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925264">.</span><span class="ident" id="7925265">lns</span>&nbsp;<span class="op" id="7925269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925273">ln</span><span class="op" id="7925275">,</span>&nbsp;<span class="ident" id="7925277">err</span>&nbsp;<span class="op" id="7925281">:=</span>&nbsp;<span class="ident" id="7925284"><a href="/net/dial.go.html#1338035">Listen</a></span><span class="op" id="7925290">(</span><span class="ident" id="7925291"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925294">.</span><span class="ident" id="7925295">lns</span><span class="op" id="7925298">[</span><span class="ident" id="7925299"><a href="/net/mockserver_test.go.html#7925250">i</a></span><span class="op" id="7925300">]</span><span class="op" id="7925301">.</span><span class="ident" id="7925302">net</span><span class="op" id="7925305">,</span>&nbsp;<span class="ident" id="7925307"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925310">.</span><span class="ident" id="7925311">lns</span><span class="op" id="7925314">[</span><span class="ident" id="7925315"><a href="/net/mockserver_test.go.html#7925250">i</a></span><span class="op" id="7925316">]</span><span class="op" id="7925317">.</span><span class="ident" id="7925318">addr</span><span class="op" id="7925322">+</span><span class="string" id="7925323">&#34;:&#34;</span><span class="op" id="7925326">+</span><span class="ident" id="7925327"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925330">.</span><span class="ident" id="7925331">port</span><span class="op" id="7925335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925339">if</span>&nbsp;<span class="ident" id="7925342"><a href="/net/mockserver_test.go.html#7925277">err</a></span>&nbsp;<span class="op" id="7925346">!=</span>&nbsp;<span class="ident" id="7925349">nil</span>&nbsp;<span class="op" id="7925353">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925358"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925361">.</span><span class="ident" id="7925362">teardown</span><span class="op" id="7925370">(</span><span class="op" id="7925371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925376">return</span>&nbsp;<span class="ident" id="7925383">nil</span><span class="op" id="7925386">,</span>&nbsp;<span class="ident" id="7925388"><a href="/net/mockserver_test.go.html#7925277">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925398"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925401">.</span><span class="ident" id="7925402">lns</span><span class="op" id="7925405">[</span><span class="ident" id="7925406"><a href="/net/mockserver_test.go.html#7925250">i</a></span><span class="op" id="7925407">]</span><span class="op" id="7925408">.</span><span class="ident" id="7925409">ln</span>&nbsp;<span class="op" id="7925412">=</span>&nbsp;<span class="ident" id="7925414"><a href="/net/mockserver_test.go.html#7925273">ln</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925419">if</span>&nbsp;<span class="ident" id="7925422"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925425">.</span><span class="ident" id="7925426">port</span>&nbsp;<span class="op" id="7925431">==</span>&nbsp;<span class="string" id="7925434">&#34;0&#34;</span>&nbsp;<span class="op" id="7925438">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925443">if</span>&nbsp;<span class="ident" id="7925446">_</span><span class="op" id="7925447">,</span>&nbsp;<span class="ident" id="7925449"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925452">.</span><span class="ident" id="7925453">port</span><span class="op" id="7925457">,</span>&nbsp;<span class="ident" id="7925459"><a href="/net/mockserver_test.go.html#7925277">err</a></span>&nbsp;<span class="op" id="7925463">=</span>&nbsp;<span class="ident" id="7925465"><a href="/net/ipsock.go.html#1444126">SplitHostPort</a></span><span class="op" id="7925478">(</span><span class="ident" id="7925479"><a href="/net/mockserver_test.go.html#7925273">ln</a></span><span class="op" id="7925481">.</span><span class="ident" id="7925482">Addr</span><span class="op" id="7925486">(</span><span class="op" id="7925487">)</span><span class="op" id="7925488">.</span><span class="ident" id="7925489">String</span><span class="op" id="7925495">(</span><span class="op" id="7925496">)</span><span class="op" id="7925497">)</span><span class="op" id="7925498">;</span>&nbsp;<span class="ident" id="7925500"><a href="/net/mockserver_test.go.html#7925277">err</a></span>&nbsp;<span class="op" id="7925504">!=</span>&nbsp;<span class="ident" id="7925507">nil</span>&nbsp;<span class="op" id="7925511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925517"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925520">.</span><span class="ident" id="7925521">teardown</span><span class="op" id="7925529">(</span><span class="op" id="7925530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925536">return</span>&nbsp;<span class="ident" id="7925543">nil</span><span class="op" id="7925546">,</span>&nbsp;<span class="ident" id="7925548"><a href="/net/mockserver_test.go.html#7925277">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925559">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925565">return</span>&nbsp;<span class="ident" id="7925572"><a href="/net/mockserver_test.go.html#7925200">dss</a></span><span class="op" id="7925575">,</span>&nbsp;<span class="ident" id="7925577">nil</span><br>
<span class="lineno"></span><span class="op" id="7925581">}</span>
</div>
</body>
</html>
