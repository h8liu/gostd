<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html" class="current">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3014688">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3014743">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3014797">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3014848">package</span>&nbsp;<span class="ident" id="3014856">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3014861">import</span>&nbsp;<span class="op" id="3014868">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3014871">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3014884">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3014891">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3014894">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3014937">type</span>&nbsp;<span class="ident" id="3014942">DNSError</span>&nbsp;<span class="keyword" id="3014951">struct</span>&nbsp;<span class="op" id="3014958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3014961">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3014971">string</span>&nbsp;<span class="comment" id="3014978">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015007">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3015017">string</span>&nbsp;<span class="comment" id="3015024">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015044">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3015054">string</span>&nbsp;<span class="comment" id="3015061">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015077">IsTimeout</span>&nbsp;<span class="builtintype" id="3015087">bool</span><br>
<span class="lineno"></span><span class="op" id="3015092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="3015095">func</span>&nbsp;<span class="op" id="3015100">(</span><span class="ident" id="3015101">e</span>&nbsp;<span class="op" id="3015103">*</span><span class="ident" id="3015104">DNSError</span><span class="op" id="3015112">)</span>&nbsp;<span class="ident" id="3015114">Error</span><span class="op" id="3015119">(</span><span class="op" id="3015120">)</span>&nbsp;<span class="builtintype" id="3015122">string</span>&nbsp;<span class="op" id="3015129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015132">if</span>&nbsp;<span class="ident" id="3015135">e</span>&nbsp;<span class="op" id="3015137">==</span>&nbsp;<span class="ident" id="3015140">nil</span>&nbsp;<span class="op" id="3015144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015148">return</span>&nbsp;<span class="string" id="3015155">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3015164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015167">s</span>&nbsp;<span class="op" id="3015169">:=</span>&nbsp;<span class="string" id="3015172">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="3015182">+</span>&nbsp;<span class="ident" id="3015184">e</span><span class="op" id="3015185">.</span><span class="ident" id="3015186">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015192">if</span>&nbsp;<span class="ident" id="3015195">e</span><span class="op" id="3015196">.</span><span class="ident" id="3015197">Server</span>&nbsp;<span class="op" id="3015204">!=</span>&nbsp;<span class="string" id="3015207">&#34;&#34;</span>&nbsp;<span class="op" id="3015210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015214">s</span>&nbsp;<span class="op" id="3015216">+=</span>&nbsp;<span class="string" id="3015219">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="3015226">+</span>&nbsp;<span class="ident" id="3015228">e</span><span class="op" id="3015229">.</span><span class="ident" id="3015230">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3015238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015241">s</span>&nbsp;<span class="op" id="3015243">+=</span>&nbsp;<span class="string" id="3015246">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3015251">+</span>&nbsp;<span class="ident" id="3015253">e</span><span class="op" id="3015254">.</span><span class="ident" id="3015255">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015260">return</span>&nbsp;<span class="ident" id="3015267">s</span><br>
<span class="lineno">30</span><span class="op" id="3015269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3015272">func</span>&nbsp;<span class="op" id="3015277">(</span><span class="ident" id="3015278">e</span>&nbsp;<span class="op" id="3015280">*</span><span class="ident" id="3015281">DNSError</span><span class="op" id="3015289">)</span>&nbsp;<span class="ident" id="3015291">Timeout</span><span class="op" id="3015298">(</span><span class="op" id="3015299">)</span>&nbsp;<span class="builtintype" id="3015301">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3015308">{</span>&nbsp;<span class="keyword" id="3015310">return</span>&nbsp;<span class="ident" id="3015317">e</span><span class="op" id="3015318">.</span><span class="ident" id="3015319">IsTimeout</span>&nbsp;<span class="op" id="3015329">}</span><br>
<span class="lineno"></span><span class="keyword" id="3015331">func</span>&nbsp;<span class="op" id="3015336">(</span><span class="ident" id="3015337">e</span>&nbsp;<span class="op" id="3015339">*</span><span class="ident" id="3015340">DNSError</span><span class="op" id="3015348">)</span>&nbsp;<span class="ident" id="3015350">Temporary</span><span class="op" id="3015359">(</span><span class="op" id="3015360">)</span>&nbsp;<span class="builtintype" id="3015362">bool</span>&nbsp;<span class="op" id="3015367">{</span>&nbsp;<span class="keyword" id="3015369">return</span>&nbsp;<span class="ident" id="3015376">e</span><span class="op" id="3015377">.</span><span class="ident" id="3015378">IsTimeout</span>&nbsp;<span class="op" id="3015388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="3015391">const</span>&nbsp;<span class="ident" id="3015397">noSuchHost</span>&nbsp;<span class="op" id="3015408">=</span>&nbsp;<span class="string" id="3015410">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3015426">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3015499">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="3015577">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="3015605">func</span>&nbsp;<span class="ident" id="3015610">reverseaddr</span><span class="op" id="3015621">(</span><span class="ident" id="3015622">addr</span>&nbsp;<span class="builtintype" id="3015627">string</span><span class="op" id="3015633">)</span>&nbsp;<span class="op" id="3015635">(</span><span class="ident" id="3015636">arpa</span>&nbsp;<span class="builtintype" id="3015641">string</span><span class="op" id="3015647">,</span>&nbsp;<span class="ident" id="3015649">err</span>&nbsp;<span class="builtintype" id="3015653">error</span><span class="op" id="3015658">)</span>&nbsp;<span class="op" id="3015660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015663">ip</span>&nbsp;<span class="op" id="3015666">:=</span>&nbsp;<span class="ident" id="3015669">ParseIP</span><span class="op" id="3015676">(</span><span class="ident" id="3015677">addr</span><span class="op" id="3015681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015684">if</span>&nbsp;<span class="ident" id="3015687">ip</span>&nbsp;<span class="op" id="3015690">==</span>&nbsp;<span class="ident" id="3015693">nil</span>&nbsp;<span class="op" id="3015697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015701">return</span>&nbsp;<span class="string" id="3015708">&#34;&#34;</span><span class="op" id="3015710">,</span>&nbsp;<span class="op" id="3015712">&amp;</span><span class="ident" id="3015713">DNSError</span><span class="op" id="3015721">{</span><span class="ident" id="3015722">Err</span><span class="op" id="3015725">:</span>&nbsp;<span class="string" id="3015727">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="3015749">,</span>&nbsp;<span class="ident" id="3015751">Name</span><span class="op" id="3015755">:</span>&nbsp;<span class="ident" id="3015757">addr</span><span class="op" id="3015761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3015764">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015767">if</span>&nbsp;<span class="ident" id="3015770">ip</span><span class="op" id="3015772">.</span><span class="ident" id="3015773">To4</span><span class="op" id="3015776">(</span><span class="op" id="3015777">)</span>&nbsp;<span class="op" id="3015779">!=</span>&nbsp;<span class="ident" id="3015782">nil</span>&nbsp;<span class="op" id="3015786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3015790">return</span>&nbsp;<span class="ident" id="3015797">itoa</span><span class="op" id="3015801">(</span><span class="builtintype" id="3015802">int</span><span class="op" id="3015805">(</span><span class="ident" id="3015806">ip</span><span class="op" id="3015808">[</span><span class="num" id="3015809">15</span><span class="op" id="3015811">]</span><span class="op" id="3015812">)</span><span class="op" id="3015813">)</span>&nbsp;<span class="op" id="3015815">+</span>&nbsp;<span class="string" id="3015817">&#34;.&#34;</span>&nbsp;<span class="op" id="3015821">+</span>&nbsp;<span class="ident" id="3015823">itoa</span><span class="op" id="3015827">(</span><span class="builtintype" id="3015828">int</span><span class="op" id="3015831">(</span><span class="ident" id="3015832">ip</span><span class="op" id="3015834">[</span><span class="num" id="3015835">14</span><span class="op" id="3015837">]</span><span class="op" id="3015838">)</span><span class="op" id="3015839">)</span>&nbsp;<span class="op" id="3015841">+</span>&nbsp;<span class="string" id="3015843">&#34;.&#34;</span>&nbsp;<span class="op" id="3015847">+</span>&nbsp;<span class="ident" id="3015849">itoa</span><span class="op" id="3015853">(</span><span class="builtintype" id="3015854">int</span><span class="op" id="3015857">(</span><span class="ident" id="3015858">ip</span><span class="op" id="3015860">[</span><span class="num" id="3015861">13</span><span class="op" id="3015863">]</span><span class="op" id="3015864">)</span><span class="op" id="3015865">)</span>&nbsp;<span class="op" id="3015867">+</span>&nbsp;<span class="string" id="3015869">&#34;.&#34;</span>&nbsp;<span class="op" id="3015873">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015878">itoa</span><span class="op" id="3015882">(</span><span class="builtintype" id="3015883">int</span><span class="op" id="3015886">(</span><span class="ident" id="3015887">ip</span><span class="op" id="3015889">[</span><span class="num" id="3015890">12</span><span class="op" id="3015892">]</span><span class="op" id="3015893">)</span><span class="op" id="3015894">)</span>&nbsp;<span class="op" id="3015896">+</span>&nbsp;<span class="string" id="3015898">&#34;.in-addr.arpa.&#34;</span><span class="op" id="3015914">,</span>&nbsp;<span class="ident" id="3015916">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3015921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3015924">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3015941">buf</span>&nbsp;<span class="op" id="3015945">:=</span>&nbsp;<span class="builtinfunc" id="3015948">make</span><span class="op" id="3015952">(</span><span class="op" id="3015953">[</span><span class="op" id="3015954">]</span><span class="builtintype" id="3015955">byte</span><span class="op" id="3015959">,</span>&nbsp;<span class="num" id="3015961">0</span><span class="op" id="3015962">,</span>&nbsp;<span class="builtinfunc" id="3015964">len</span><span class="op" id="3015967">(</span><span class="ident" id="3015968">ip</span><span class="op" id="3015970">)</span><span class="op" id="3015971">*</span><span class="num" id="3015972">4</span><span class="op" id="3015973">+</span><span class="builtinfunc" id="3015974">len</span><span class="op" id="3015977">(</span><span class="string" id="3015978">&#34;ip6.arpa.&#34;</span><span class="op" id="3015989">)</span><span class="op" id="3015990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3015993">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3016031">for</span>&nbsp;<span class="ident" id="3016035">i</span>&nbsp;<span class="op" id="3016037">:=</span>&nbsp;<span class="builtinfunc" id="3016040">len</span><span class="op" id="3016043">(</span><span class="ident" id="3016044">ip</span><span class="op" id="3016046">)</span>&nbsp;<span class="op" id="3016048">-</span>&nbsp;<span class="num" id="3016050">1</span><span class="op" id="3016051">;</span>&nbsp;<span class="ident" id="3016053">i</span>&nbsp;<span class="op" id="3016055">&gt;=</span>&nbsp;<span class="num" id="3016058">0</span><span class="op" id="3016059">;</span>&nbsp;<span class="ident" id="3016061">i</span><span class="op" id="3016062">--</span>&nbsp;<span class="op" id="3016065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016069">v</span>&nbsp;<span class="op" id="3016071">:=</span>&nbsp;<span class="ident" id="3016074">ip</span><span class="op" id="3016076">[</span><span class="ident" id="3016077">i</span><span class="op" id="3016078">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016082">buf</span>&nbsp;<span class="op" id="3016086">=</span>&nbsp;<span class="builtinfunc" id="3016088">append</span><span class="op" id="3016094">(</span><span class="ident" id="3016095">buf</span><span class="op" id="3016098">,</span>&nbsp;<span class="ident" id="3016100">hexDigit</span><span class="op" id="3016108">[</span><span class="ident" id="3016109">v</span><span class="op" id="3016110">&amp;</span><span class="num" id="3016111">0xF</span><span class="op" id="3016114">]</span><span class="op" id="3016115">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016119">buf</span>&nbsp;<span class="op" id="3016123">=</span>&nbsp;<span class="builtinfunc" id="3016125">append</span><span class="op" id="3016131">(</span><span class="ident" id="3016132">buf</span><span class="op" id="3016135">,</span>&nbsp;<span class="string" id="3016137">&#39;.&#39;</span><span class="op" id="3016140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016144">buf</span>&nbsp;<span class="op" id="3016148">=</span>&nbsp;<span class="builtinfunc" id="3016150">append</span><span class="op" id="3016156">(</span><span class="ident" id="3016157">buf</span><span class="op" id="3016160">,</span>&nbsp;<span class="ident" id="3016162">hexDigit</span><span class="op" id="3016170">[</span><span class="ident" id="3016171">v</span><span class="op" id="3016172">&gt;&gt;</span><span class="num" id="3016174">4</span><span class="op" id="3016175">]</span><span class="op" id="3016176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016180">buf</span>&nbsp;<span class="op" id="3016184">=</span>&nbsp;<span class="builtinfunc" id="3016186">append</span><span class="op" id="3016192">(</span><span class="ident" id="3016193">buf</span><span class="op" id="3016196">,</span>&nbsp;<span class="string" id="3016198">&#39;.&#39;</span><span class="op" id="3016201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3016204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3016207">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016271">buf</span>&nbsp;<span class="op" id="3016275">=</span>&nbsp;<span class="builtinfunc" id="3016277">append</span><span class="op" id="3016283">(</span><span class="ident" id="3016284">buf</span><span class="op" id="3016287">,</span>&nbsp;<span class="string" id="3016289">&#34;ip6.arpa.&#34;</span><span class="op" id="3016300">...</span><span class="op" id="3016303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3016306">return</span>&nbsp;<span class="builtintype" id="3016313">string</span><span class="op" id="3016319">(</span><span class="ident" id="3016320">buf</span><span class="op" id="3016323">)</span><span class="op" id="3016324">,</span>&nbsp;<span class="ident" id="3016326">nil</span><br>
<span class="lineno"></span><span class="op" id="3016330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3016333">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="3016373">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3016416">func</span>&nbsp;<span class="ident" id="3016421">answer</span><span class="op" id="3016427">(</span><span class="ident" id="3016428">name</span><span class="op" id="3016432">,</span>&nbsp;<span class="ident" id="3016434">server</span>&nbsp;<span class="builtintype" id="3016441">string</span><span class="op" id="3016447">,</span>&nbsp;<span class="ident" id="3016449">dns</span>&nbsp;<span class="op" id="3016453">*</span><span class="ident" id="3016454">dnsMsg</span><span class="op" id="3016460">,</span>&nbsp;<span class="ident" id="3016462">qtype</span>&nbsp;<span class="builtintype" id="3016468">uint16</span><span class="op" id="3016474">)</span>&nbsp;<span class="op" id="3016476">(</span><span class="ident" id="3016477">cname</span>&nbsp;<span class="builtintype" id="3016483">string</span><span class="op" id="3016489">,</span>&nbsp;<span class="ident" id="3016491">addrs</span>&nbsp;<span class="op" id="3016497">[</span><span class="op" id="3016498">]</span><span class="ident" id="3016499">dnsRR</span><span class="op" id="3016504">,</span>&nbsp;<span class="ident" id="3016506">err</span>&nbsp;<span class="builtintype" id="3016510">error</span><span class="op" id="3016515">)</span>&nbsp;<span class="op" id="3016517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3016520">addrs</span>&nbsp;<span class="op" id="3016526">=</span>&nbsp;<span class="builtinfunc" id="3016528">make</span><span class="op" id="3016532">(</span><span class="op" id="3016533">[</span><span class="op" id="3016534">]</span><span class="ident" id="3016535">dnsRR</span><span class="op" id="3016540">,</span>&nbsp;<span class="num" id="3016542">0</span><span class="op" id="3016543">,</span>&nbsp;<span class="builtinfunc" id="3016545">len</span><span class="op" id="3016548">(</span><span class="ident" id="3016549">dns</span><span class="op" id="3016552">.</span><span class="ident" id="3016553">answer</span><span class="op" id="3016559">)</span><span class="op" id="3016560">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3016564">if</span>&nbsp;<span class="ident" id="3016567">dns</span><span class="op" id="3016570">.</span><span class="ident" id="3016571">rcode</span>&nbsp;<span class="op" id="3016577">==</span>&nbsp;<span class="ident" id="3016580">dnsRcodeNameError</span>&nbsp;<span class="op" id="3016598">&amp;&amp;</span>&nbsp;<span class="ident" id="3016601">dns</span><span class="op" id="3016604">.</span><span class="ident" id="3016605">recursion_available</span>&nbsp;<span class="op" id="3016625">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3016629">return</span>&nbsp;<span class="string" id="3016636">&#34;&#34;</span><span class="op" id="3016638">,</span>&nbsp;<span class="ident" id="3016640">nil</span><span class="op" id="3016643">,</span>&nbsp;<span class="op" id="3016645">&amp;</span><span class="ident" id="3016646">DNSError</span><span class="op" id="3016654">{</span><span class="ident" id="3016655">Err</span><span class="op" id="3016658">:</span>&nbsp;<span class="ident" id="3016660">noSuchHost</span><span class="op" id="3016670">,</span>&nbsp;<span class="ident" id="3016672">Name</span><span class="op" id="3016676">:</span>&nbsp;<span class="ident" id="3016678">name</span><span class="op" id="3016682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3016685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3016688">if</span>&nbsp;<span class="ident" id="3016691">dns</span><span class="op" id="3016694">.</span><span class="ident" id="3016695">rcode</span>&nbsp;<span class="op" id="3016701">!=</span>&nbsp;<span class="ident" id="3016704">dnsRcodeSuccess</span>&nbsp;<span class="op" id="3016720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3016724">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3016764">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3016810">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3016855">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3016896">return</span>&nbsp;<span class="string" id="3016903">&#34;&#34;</span><span class="op" id="3016905">,</span>&nbsp;<span class="ident" id="3016907">nil</span><span class="op" id="3016910">,</span>&nbsp;<span class="op" id="3016912">&amp;</span><span class="ident" id="3016913">DNSError</span><span class="op" id="3016921">{</span><span class="ident" id="3016922">Err</span><span class="op" id="3016925">:</span>&nbsp;<span class="string" id="3016927">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="3016947">,</span>&nbsp;<span class="ident" id="3016949">Name</span><span class="op" id="3016953">:</span>&nbsp;<span class="ident" id="3016955">name</span><span class="op" id="3016959">,</span>&nbsp;<span class="ident" id="3016961">Server</span><span class="op" id="3016967">:</span>&nbsp;<span class="ident" id="3016969">server</span><span class="op" id="3016975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3016978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3016982">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017005">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017066">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017112">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017167">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="3017214">Cname</span><span class="op" id="3017219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017222">for</span>&nbsp;<span class="ident" id="3017226">cnameloop</span>&nbsp;<span class="op" id="3017236">:=</span>&nbsp;<span class="num" id="3017239">0</span><span class="op" id="3017240">;</span>&nbsp;<span class="ident" id="3017242">cnameloop</span>&nbsp;<span class="op" id="3017252">&lt;</span>&nbsp;<span class="num" id="3017254">10</span><span class="op" id="3017256">;</span>&nbsp;<span class="ident" id="3017258">cnameloop</span><span class="op" id="3017267">++</span>&nbsp;<span class="op" id="3017270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3017274">addrs</span>&nbsp;<span class="op" id="3017280">=</span>&nbsp;<span class="ident" id="3017282">addrs</span><span class="op" id="3017287">[</span><span class="num" id="3017288">0</span><span class="op" id="3017289">:</span><span class="num" id="3017290">0</span><span class="op" id="3017291">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017295">for</span>&nbsp;<span class="ident" id="3017299">_</span><span class="op" id="3017300">,</span>&nbsp;<span class="ident" id="3017302">rr</span>&nbsp;<span class="op" id="3017305">:=</span>&nbsp;<span class="keyword" id="3017308">range</span>&nbsp;<span class="ident" id="3017314">dns</span><span class="op" id="3017317">.</span><span class="ident" id="3017318">answer</span>&nbsp;<span class="op" id="3017325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017330">if</span>&nbsp;<span class="ident" id="3017333">_</span><span class="op" id="3017334">,</span>&nbsp;<span class="ident" id="3017336">justHeader</span>&nbsp;<span class="op" id="3017347">:=</span>&nbsp;<span class="ident" id="3017350">rr</span><span class="op" id="3017352">.</span><span class="op" id="3017353">(</span><span class="op" id="3017354">*</span><span class="ident" id="3017355">dnsRR_Header</span><span class="op" id="3017367">)</span><span class="op" id="3017368">;</span>&nbsp;<span class="ident" id="3017370">justHeader</span>&nbsp;<span class="op" id="3017381">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017387">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017425">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017467">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017502">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017533">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3017545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3017550">h</span>&nbsp;<span class="op" id="3017552">:=</span>&nbsp;<span class="ident" id="3017555">rr</span><span class="op" id="3017557">.</span><span class="ident" id="3017558">Header</span><span class="op" id="3017564">(</span><span class="op" id="3017565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017570">if</span>&nbsp;<span class="ident" id="3017573">h</span><span class="op" id="3017574">.</span><span class="ident" id="3017575">Class</span>&nbsp;<span class="op" id="3017581">==</span>&nbsp;<span class="ident" id="3017584">dnsClassINET</span>&nbsp;<span class="op" id="3017597">&amp;&amp;</span>&nbsp;<span class="ident" id="3017600">h</span><span class="op" id="3017601">.</span><span class="ident" id="3017602">Name</span>&nbsp;<span class="op" id="3017607">==</span>&nbsp;<span class="ident" id="3017610">name</span>&nbsp;<span class="op" id="3017615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017621">switch</span>&nbsp;<span class="ident" id="3017628">h</span><span class="op" id="3017629">.</span><span class="ident" id="3017630">Rrtype</span>&nbsp;<span class="op" id="3017637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017643">case</span>&nbsp;<span class="ident" id="3017648">qtype</span><span class="op" id="3017653">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3017660">addrs</span>&nbsp;<span class="op" id="3017666">=</span>&nbsp;<span class="builtinfunc" id="3017668">append</span><span class="op" id="3017674">(</span><span class="ident" id="3017675">addrs</span><span class="op" id="3017680">,</span>&nbsp;<span class="ident" id="3017682">rr</span><span class="op" id="3017684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017690">case</span>&nbsp;<span class="ident" id="3017695">dnsTypeCNAME</span><span class="op" id="3017707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3017714">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3017740">name</span>&nbsp;<span class="op" id="3017745">=</span>&nbsp;<span class="ident" id="3017747">rr</span><span class="op" id="3017749">.</span><span class="op" id="3017750">(</span><span class="op" id="3017751">*</span><span class="ident" id="3017752">dnsRR_CNAME</span><span class="op" id="3017763">)</span><span class="op" id="3017764">.</span><span class="ident" id="3017765">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017776">continue</span>&nbsp;<span class="ident" id="3017785">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3017795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3017800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3017804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017808">if</span>&nbsp;<span class="builtinfunc" id="3017811">len</span><span class="op" id="3017814">(</span><span class="ident" id="3017815">addrs</span><span class="op" id="3017820">)</span>&nbsp;<span class="op" id="3017822">==</span>&nbsp;<span class="num" id="3017825">0</span>&nbsp;<span class="op" id="3017827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017832">return</span>&nbsp;<span class="string" id="3017839">&#34;&#34;</span><span class="op" id="3017841">,</span>&nbsp;<span class="ident" id="3017843">nil</span><span class="op" id="3017846">,</span>&nbsp;<span class="op" id="3017848">&amp;</span><span class="ident" id="3017849">DNSError</span><span class="op" id="3017857">{</span><span class="ident" id="3017858">Err</span><span class="op" id="3017861">:</span>&nbsp;<span class="ident" id="3017863">noSuchHost</span><span class="op" id="3017873">,</span>&nbsp;<span class="ident" id="3017875">Name</span><span class="op" id="3017879">:</span>&nbsp;<span class="ident" id="3017881">name</span><span class="op" id="3017885">,</span>&nbsp;<span class="ident" id="3017887">Server</span><span class="op" id="3017893">:</span>&nbsp;<span class="ident" id="3017895">server</span><span class="op" id="3017901">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3017905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017909">return</span>&nbsp;<span class="ident" id="3017916">name</span><span class="op" id="3017920">,</span>&nbsp;<span class="ident" id="3017922">addrs</span><span class="op" id="3017927">,</span>&nbsp;<span class="ident" id="3017929">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3017934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3017938">return</span>&nbsp;<span class="string" id="3017945">&#34;&#34;</span><span class="op" id="3017947">,</span>&nbsp;<span class="ident" id="3017949">nil</span><span class="op" id="3017952">,</span>&nbsp;<span class="op" id="3017954">&amp;</span><span class="ident" id="3017955">DNSError</span><span class="op" id="3017963">{</span><span class="ident" id="3017964">Err</span><span class="op" id="3017967">:</span>&nbsp;<span class="string" id="3017969">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="3017989">,</span>&nbsp;<span class="ident" id="3017991">Name</span><span class="op" id="3017995">:</span>&nbsp;<span class="ident" id="3017997">name</span><span class="op" id="3018001">,</span>&nbsp;<span class="ident" id="3018003">Server</span><span class="op" id="3018009">:</span>&nbsp;<span class="ident" id="3018011">server</span><span class="op" id="3018017">}</span><br>
<span class="lineno">115</span><span class="op" id="3018019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3018022">func</span>&nbsp;<span class="ident" id="3018027">isDomainName</span><span class="op" id="3018039">(</span><span class="ident" id="3018040">s</span>&nbsp;<span class="builtintype" id="3018042">string</span><span class="op" id="3018048">)</span>&nbsp;<span class="builtintype" id="3018050">bool</span>&nbsp;<span class="op" id="3018055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3018058">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018086">if</span>&nbsp;<span class="builtinfunc" id="3018089">len</span><span class="op" id="3018092">(</span><span class="ident" id="3018093">s</span><span class="op" id="3018094">)</span>&nbsp;<span class="op" id="3018096">==</span>&nbsp;<span class="num" id="3018099">0</span>&nbsp;<span class="op" id="3018101">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018105">return</span>&nbsp;<span class="builtintype" id="3018112">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018122">if</span>&nbsp;<span class="builtinfunc" id="3018125">len</span><span class="op" id="3018128">(</span><span class="ident" id="3018129">s</span><span class="op" id="3018130">)</span>&nbsp;<span class="op" id="3018132">&gt;</span>&nbsp;<span class="num" id="3018134">255</span>&nbsp;<span class="op" id="3018138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018142">return</span>&nbsp;<span class="builtintype" id="3018149">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018156">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018160">last</span>&nbsp;<span class="op" id="3018165">:=</span>&nbsp;<span class="builtintype" id="3018168">byte</span><span class="op" id="3018172">(</span><span class="string" id="3018173">&#39;.&#39;</span><span class="op" id="3018176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018179">ok</span>&nbsp;<span class="op" id="3018182">:=</span>&nbsp;<span class="builtintype" id="3018185">false</span>&nbsp;<span class="comment" id="3018191">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018224">partlen</span>&nbsp;<span class="op" id="3018232">:=</span>&nbsp;<span class="num" id="3018235">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018238">for</span>&nbsp;<span class="ident" id="3018242">i</span>&nbsp;<span class="op" id="3018244">:=</span>&nbsp;<span class="num" id="3018247">0</span><span class="op" id="3018248">;</span>&nbsp;<span class="ident" id="3018250">i</span>&nbsp;<span class="op" id="3018252">&lt;</span>&nbsp;<span class="builtinfunc" id="3018254">len</span><span class="op" id="3018257">(</span><span class="ident" id="3018258">s</span><span class="op" id="3018259">)</span><span class="op" id="3018260">;</span>&nbsp;<span class="ident" id="3018262">i</span><span class="op" id="3018263">++</span>&nbsp;<span class="op" id="3018266">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018270">c</span>&nbsp;<span class="op" id="3018272">:=</span>&nbsp;<span class="ident" id="3018275">s</span><span class="op" id="3018276">[</span><span class="ident" id="3018277">i</span><span class="op" id="3018278">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018282">switch</span>&nbsp;<span class="op" id="3018289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018293">default</span><span class="op" id="3018300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018305">return</span>&nbsp;<span class="builtintype" id="3018312">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018320">case</span>&nbsp;<span class="string" id="3018325">&#39;a&#39;</span>&nbsp;<span class="op" id="3018329">&lt;=</span>&nbsp;<span class="ident" id="3018332">c</span>&nbsp;<span class="op" id="3018334">&amp;&amp;</span>&nbsp;<span class="ident" id="3018337">c</span>&nbsp;<span class="op" id="3018339">&lt;=</span>&nbsp;<span class="string" id="3018342">&#39;z&#39;</span>&nbsp;<span class="op" id="3018346">||</span>&nbsp;<span class="string" id="3018349">&#39;A&#39;</span>&nbsp;<span class="op" id="3018353">&lt;=</span>&nbsp;<span class="ident" id="3018356">c</span>&nbsp;<span class="op" id="3018358">&amp;&amp;</span>&nbsp;<span class="ident" id="3018361">c</span>&nbsp;<span class="op" id="3018363">&lt;=</span>&nbsp;<span class="string" id="3018366">&#39;Z&#39;</span>&nbsp;<span class="op" id="3018370">||</span>&nbsp;<span class="ident" id="3018373">c</span>&nbsp;<span class="op" id="3018375">==</span>&nbsp;<span class="string" id="3018378">&#39;_&#39;</span><span class="op" id="3018381">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018386">ok</span>&nbsp;<span class="op" id="3018389">=</span>&nbsp;<span class="builtintype" id="3018391">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018399">partlen</span><span class="op" id="3018406">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018411">case</span>&nbsp;<span class="string" id="3018416">&#39;0&#39;</span>&nbsp;<span class="op" id="3018420">&lt;=</span>&nbsp;<span class="ident" id="3018423">c</span>&nbsp;<span class="op" id="3018425">&amp;&amp;</span>&nbsp;<span class="ident" id="3018428">c</span>&nbsp;<span class="op" id="3018430">&lt;=</span>&nbsp;<span class="string" id="3018433">&#39;9&#39;</span><span class="op" id="3018436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3018441">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018452">partlen</span><span class="op" id="3018459">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018464">case</span>&nbsp;<span class="ident" id="3018469">c</span>&nbsp;<span class="op" id="3018471">==</span>&nbsp;<span class="string" id="3018474">&#39;-&#39;</span><span class="op" id="3018477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3018482">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018520">if</span>&nbsp;<span class="ident" id="3018523">last</span>&nbsp;<span class="op" id="3018528">==</span>&nbsp;<span class="string" id="3018531">&#39;.&#39;</span>&nbsp;<span class="op" id="3018535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018541">return</span>&nbsp;<span class="builtintype" id="3018548">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018557">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018562">partlen</span><span class="op" id="3018569">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018574">case</span>&nbsp;<span class="ident" id="3018579">c</span>&nbsp;<span class="op" id="3018581">==</span>&nbsp;<span class="string" id="3018584">&#39;.&#39;</span><span class="op" id="3018587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3018592">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018635">if</span>&nbsp;<span class="ident" id="3018638">last</span>&nbsp;<span class="op" id="3018643">==</span>&nbsp;<span class="string" id="3018646">&#39;.&#39;</span>&nbsp;<span class="op" id="3018650">||</span>&nbsp;<span class="ident" id="3018653">last</span>&nbsp;<span class="op" id="3018658">==</span>&nbsp;<span class="string" id="3018661">&#39;-&#39;</span>&nbsp;<span class="op" id="3018665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018671">return</span>&nbsp;<span class="builtintype" id="3018678">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018692">if</span>&nbsp;<span class="ident" id="3018695">partlen</span>&nbsp;<span class="op" id="3018703">&gt;</span>&nbsp;<span class="num" id="3018705">63</span>&nbsp;<span class="op" id="3018708">||</span>&nbsp;<span class="ident" id="3018711">partlen</span>&nbsp;<span class="op" id="3018719">==</span>&nbsp;<span class="num" id="3018722">0</span>&nbsp;<span class="op" id="3018724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018730">return</span>&nbsp;<span class="builtintype" id="3018737">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018751">partlen</span>&nbsp;<span class="op" id="3018759">=</span>&nbsp;<span class="num" id="3018761">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018769">last</span>&nbsp;<span class="op" id="3018774">=</span>&nbsp;<span class="ident" id="3018776">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018782">if</span>&nbsp;<span class="ident" id="3018785">last</span>&nbsp;<span class="op" id="3018790">==</span>&nbsp;<span class="string" id="3018793">&#39;-&#39;</span>&nbsp;<span class="op" id="3018797">||</span>&nbsp;<span class="ident" id="3018800">partlen</span>&nbsp;<span class="op" id="3018808">&gt;</span>&nbsp;<span class="num" id="3018810">63</span>&nbsp;<span class="op" id="3018813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018817">return</span>&nbsp;<span class="builtintype" id="3018824">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3018831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3018835">return</span>&nbsp;<span class="ident" id="3018842">ok</span><br>
<span class="lineno"></span><span class="op" id="3018845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3018848">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3018894">type</span>&nbsp;<span class="ident" id="3018899">SRV</span>&nbsp;<span class="keyword" id="3018903">struct</span>&nbsp;<span class="op" id="3018910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018913">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3018922">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018930">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3018939">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018947">Priority</span>&nbsp;<span class="builtintype" id="3018956">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3018964">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3018973">uint16</span><br>
<span class="lineno"></span><span class="op" id="3018980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3018983">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="3019055">type</span>&nbsp;<span class="ident" id="3019060">byPriorityWeight</span>&nbsp;<span class="op" id="3019077">[</span><span class="op" id="3019078">]</span><span class="op" id="3019079">*</span><span class="ident" id="3019080">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3019085">func</span>&nbsp;<span class="op" id="3019090">(</span><span class="ident" id="3019091">s</span>&nbsp;<span class="ident" id="3019093">byPriorityWeight</span><span class="op" id="3019109">)</span>&nbsp;<span class="ident" id="3019111">Len</span><span class="op" id="3019114">(</span><span class="op" id="3019115">)</span>&nbsp;<span class="builtintype" id="3019117">int</span>&nbsp;<span class="op" id="3019121">{</span>&nbsp;<span class="keyword" id="3019123">return</span>&nbsp;<span class="builtinfunc" id="3019130">len</span><span class="op" id="3019133">(</span><span class="ident" id="3019134">s</span><span class="op" id="3019135">)</span>&nbsp;<span class="op" id="3019137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3019140">func</span>&nbsp;<span class="op" id="3019145">(</span><span class="ident" id="3019146">s</span>&nbsp;<span class="ident" id="3019148">byPriorityWeight</span><span class="op" id="3019164">)</span>&nbsp;<span class="ident" id="3019166">Swap</span><span class="op" id="3019170">(</span><span class="ident" id="3019171">i</span><span class="op" id="3019172">,</span>&nbsp;<span class="ident" id="3019174">j</span>&nbsp;<span class="builtintype" id="3019176">int</span><span class="op" id="3019179">)</span>&nbsp;<span class="op" id="3019181">{</span>&nbsp;<span class="ident" id="3019183">s</span><span class="op" id="3019184">[</span><span class="ident" id="3019185">i</span><span class="op" id="3019186">]</span><span class="op" id="3019187">,</span>&nbsp;<span class="ident" id="3019189">s</span><span class="op" id="3019190">[</span><span class="ident" id="3019191">j</span><span class="op" id="3019192">]</span>&nbsp;<span class="op" id="3019194">=</span>&nbsp;<span class="ident" id="3019196">s</span><span class="op" id="3019197">[</span><span class="ident" id="3019198">j</span><span class="op" id="3019199">]</span><span class="op" id="3019200">,</span>&nbsp;<span class="ident" id="3019202">s</span><span class="op" id="3019203">[</span><span class="ident" id="3019204">i</span><span class="op" id="3019205">]</span>&nbsp;<span class="op" id="3019207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="3019210">func</span>&nbsp;<span class="op" id="3019215">(</span><span class="ident" id="3019216">s</span>&nbsp;<span class="ident" id="3019218">byPriorityWeight</span><span class="op" id="3019234">)</span>&nbsp;<span class="ident" id="3019236">Less</span><span class="op" id="3019240">(</span><span class="ident" id="3019241">i</span><span class="op" id="3019242">,</span>&nbsp;<span class="ident" id="3019244">j</span>&nbsp;<span class="builtintype" id="3019246">int</span><span class="op" id="3019249">)</span>&nbsp;<span class="builtintype" id="3019251">bool</span>&nbsp;<span class="op" id="3019256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019259">return</span>&nbsp;<span class="ident" id="3019266">s</span><span class="op" id="3019267">[</span><span class="ident" id="3019268">i</span><span class="op" id="3019269">]</span><span class="op" id="3019270">.</span><span class="ident" id="3019271">Priority</span>&nbsp;<span class="op" id="3019280">&lt;</span>&nbsp;<span class="ident" id="3019282">s</span><span class="op" id="3019283">[</span><span class="ident" id="3019284">j</span><span class="op" id="3019285">]</span><span class="op" id="3019286">.</span><span class="ident" id="3019287">Priority</span>&nbsp;<span class="op" id="3019296">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3019301">(</span><span class="ident" id="3019302">s</span><span class="op" id="3019303">[</span><span class="ident" id="3019304">i</span><span class="op" id="3019305">]</span><span class="op" id="3019306">.</span><span class="ident" id="3019307">Priority</span>&nbsp;<span class="op" id="3019316">==</span>&nbsp;<span class="ident" id="3019319">s</span><span class="op" id="3019320">[</span><span class="ident" id="3019321">j</span><span class="op" id="3019322">]</span><span class="op" id="3019323">.</span><span class="ident" id="3019324">Priority</span>&nbsp;<span class="op" id="3019333">&amp;&amp;</span>&nbsp;<span class="ident" id="3019336">s</span><span class="op" id="3019337">[</span><span class="ident" id="3019338">i</span><span class="op" id="3019339">]</span><span class="op" id="3019340">.</span><span class="ident" id="3019341">Weight</span>&nbsp;<span class="op" id="3019348">&lt;</span>&nbsp;<span class="ident" id="3019350">s</span><span class="op" id="3019351">[</span><span class="ident" id="3019352">j</span><span class="op" id="3019353">]</span><span class="op" id="3019354">.</span><span class="ident" id="3019355">Weight</span><span class="op" id="3019361">)</span><br>
<span class="lineno"></span><span class="op" id="3019363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="3019366">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="3019436">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="3019462">func</span>&nbsp;<span class="op" id="3019467">(</span><span class="ident" id="3019468">addrs</span>&nbsp;<span class="ident" id="3019474">byPriorityWeight</span><span class="op" id="3019490">)</span>&nbsp;<span class="ident" id="3019492">shuffleByWeight</span><span class="op" id="3019507">(</span><span class="op" id="3019508">)</span>&nbsp;<span class="op" id="3019510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019513">sum</span>&nbsp;<span class="op" id="3019517">:=</span>&nbsp;<span class="num" id="3019520">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019523">for</span>&nbsp;<span class="ident" id="3019527">_</span><span class="op" id="3019528">,</span>&nbsp;<span class="ident" id="3019530">addr</span>&nbsp;<span class="op" id="3019535">:=</span>&nbsp;<span class="keyword" id="3019538">range</span>&nbsp;<span class="ident" id="3019544">addrs</span>&nbsp;<span class="op" id="3019550">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019554">sum</span>&nbsp;<span class="op" id="3019558">+=</span>&nbsp;<span class="builtintype" id="3019561">int</span><span class="op" id="3019564">(</span><span class="ident" id="3019565">addr</span><span class="op" id="3019569">.</span><span class="ident" id="3019570">Weight</span><span class="op" id="3019576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3019579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019582">for</span>&nbsp;<span class="ident" id="3019586">sum</span>&nbsp;<span class="op" id="3019590">&gt;</span>&nbsp;<span class="num" id="3019592">0</span>&nbsp;<span class="op" id="3019594">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3019597">len</span><span class="op" id="3019600">(</span><span class="ident" id="3019601">addrs</span><span class="op" id="3019606">)</span>&nbsp;<span class="op" id="3019608">&gt;</span>&nbsp;<span class="num" id="3019610">1</span>&nbsp;<span class="op" id="3019612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019616">s</span>&nbsp;<span class="op" id="3019618">:=</span>&nbsp;<span class="num" id="3019621">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019625">n</span>&nbsp;<span class="op" id="3019627">:=</span>&nbsp;<span class="ident" id="3019630">rand</span><span class="op" id="3019634">.</span><span class="ident" id="3019635">Intn</span><span class="op" id="3019639">(</span><span class="ident" id="3019640">sum</span><span class="op" id="3019643">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019647">for</span>&nbsp;<span class="ident" id="3019651">i</span>&nbsp;<span class="op" id="3019653">:=</span>&nbsp;<span class="keyword" id="3019656">range</span>&nbsp;<span class="ident" id="3019662">addrs</span>&nbsp;<span class="op" id="3019668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019673">s</span>&nbsp;<span class="op" id="3019675">+=</span>&nbsp;<span class="builtintype" id="3019678">int</span><span class="op" id="3019681">(</span><span class="ident" id="3019682">addrs</span><span class="op" id="3019687">[</span><span class="ident" id="3019688">i</span><span class="op" id="3019689">]</span><span class="op" id="3019690">.</span><span class="ident" id="3019691">Weight</span><span class="op" id="3019697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019702">if</span>&nbsp;<span class="ident" id="3019705">s</span>&nbsp;<span class="op" id="3019707">&gt;</span>&nbsp;<span class="ident" id="3019709">n</span>&nbsp;<span class="op" id="3019711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019717">if</span>&nbsp;<span class="ident" id="3019720">i</span>&nbsp;<span class="op" id="3019722">&gt;</span>&nbsp;<span class="num" id="3019724">0</span>&nbsp;<span class="op" id="3019726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019733">addrs</span><span class="op" id="3019738">[</span><span class="num" id="3019739">0</span><span class="op" id="3019740">]</span><span class="op" id="3019741">,</span>&nbsp;<span class="ident" id="3019743">addrs</span><span class="op" id="3019748">[</span><span class="ident" id="3019749">i</span><span class="op" id="3019750">]</span>&nbsp;<span class="op" id="3019752">=</span>&nbsp;<span class="ident" id="3019754">addrs</span><span class="op" id="3019759">[</span><span class="ident" id="3019760">i</span><span class="op" id="3019761">]</span><span class="op" id="3019762">,</span>&nbsp;<span class="ident" id="3019764">addrs</span><span class="op" id="3019769">[</span><span class="num" id="3019770">0</span><span class="op" id="3019771">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3019777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019783">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3019792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3019796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019800">sum</span>&nbsp;<span class="op" id="3019804">-=</span>&nbsp;<span class="builtintype" id="3019807">int</span><span class="op" id="3019810">(</span><span class="ident" id="3019811">addrs</span><span class="op" id="3019816">[</span><span class="num" id="3019817">0</span><span class="op" id="3019818">]</span><span class="op" id="3019819">.</span><span class="ident" id="3019820">Weight</span><span class="op" id="3019826">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019830">addrs</span>&nbsp;<span class="op" id="3019836">=</span>&nbsp;<span class="ident" id="3019838">addrs</span><span class="op" id="3019843">[</span><span class="num" id="3019844">1</span><span class="op" id="3019845">:</span><span class="op" id="3019846">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3019849">}</span><br>
<span class="lineno"></span><span class="op" id="3019851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3019854">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="3019909">func</span>&nbsp;<span class="op" id="3019914">(</span><span class="ident" id="3019915">addrs</span>&nbsp;<span class="ident" id="3019921">byPriorityWeight</span><span class="op" id="3019937">)</span>&nbsp;<span class="ident" id="3019939">sort</span><span class="op" id="3019943">(</span><span class="op" id="3019944">)</span>&nbsp;<span class="op" id="3019946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019949">sort</span><span class="op" id="3019953">.</span><span class="ident" id="3019954">Sort</span><span class="op" id="3019958">(</span><span class="ident" id="3019959">addrs</span><span class="op" id="3019964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3019967">i</span>&nbsp;<span class="op" id="3019969">:=</span>&nbsp;<span class="num" id="3019972">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3019975">for</span>&nbsp;<span class="ident" id="3019979">j</span>&nbsp;<span class="op" id="3019981">:=</span>&nbsp;<span class="num" id="3019984">1</span><span class="op" id="3019985">;</span>&nbsp;<span class="ident" id="3019987">j</span>&nbsp;<span class="op" id="3019989">&lt;</span>&nbsp;<span class="builtinfunc" id="3019991">len</span><span class="op" id="3019994">(</span><span class="ident" id="3019995">addrs</span><span class="op" id="3020000">)</span><span class="op" id="3020001">;</span>&nbsp;<span class="ident" id="3020003">j</span><span class="op" id="3020004">++</span>&nbsp;<span class="op" id="3020007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3020011">if</span>&nbsp;<span class="ident" id="3020014">addrs</span><span class="op" id="3020019">[</span><span class="ident" id="3020020">i</span><span class="op" id="3020021">]</span><span class="op" id="3020022">.</span><span class="ident" id="3020023">Priority</span>&nbsp;<span class="op" id="3020032">!=</span>&nbsp;<span class="ident" id="3020035">addrs</span><span class="op" id="3020040">[</span><span class="ident" id="3020041">j</span><span class="op" id="3020042">]</span><span class="op" id="3020043">.</span><span class="ident" id="3020044">Priority</span>&nbsp;<span class="op" id="3020053">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020058">addrs</span><span class="op" id="3020063">[</span><span class="ident" id="3020064">i</span><span class="op" id="3020065">:</span><span class="ident" id="3020066">j</span><span class="op" id="3020067">]</span><span class="op" id="3020068">.</span><span class="ident" id="3020069">shuffleByWeight</span><span class="op" id="3020084">(</span><span class="op" id="3020085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020090">i</span>&nbsp;<span class="op" id="3020092">=</span>&nbsp;<span class="ident" id="3020094">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3020098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3020101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020104">addrs</span><span class="op" id="3020109">[</span><span class="ident" id="3020110">i</span><span class="op" id="3020111">:</span><span class="op" id="3020112">]</span><span class="op" id="3020113">.</span><span class="ident" id="3020114">shuffleByWeight</span><span class="op" id="3020129">(</span><span class="op" id="3020130">)</span><br>
<span class="lineno">220</span><span class="op" id="3020132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3020135">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3020179">type</span>&nbsp;<span class="ident" id="3020184">MX</span>&nbsp;<span class="keyword" id="3020187">struct</span>&nbsp;<span class="op" id="3020194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020197">Host</span>&nbsp;<span class="builtintype" id="3020202">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020210">Pref</span>&nbsp;<span class="builtintype" id="3020215">uint16</span><br>
<span class="lineno"></span><span class="op" id="3020222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3020225">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="3020294">type</span>&nbsp;<span class="ident" id="3020299">byPref</span>&nbsp;<span class="op" id="3020306">[</span><span class="op" id="3020307">]</span><span class="op" id="3020308">*</span><span class="ident" id="3020309">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="3020313">func</span>&nbsp;<span class="op" id="3020318">(</span><span class="ident" id="3020319">s</span>&nbsp;<span class="ident" id="3020321">byPref</span><span class="op" id="3020327">)</span>&nbsp;<span class="ident" id="3020329">Len</span><span class="op" id="3020332">(</span><span class="op" id="3020333">)</span>&nbsp;<span class="builtintype" id="3020335">int</span>&nbsp;<span class="op" id="3020339">{</span>&nbsp;<span class="keyword" id="3020341">return</span>&nbsp;<span class="builtinfunc" id="3020348">len</span><span class="op" id="3020351">(</span><span class="ident" id="3020352">s</span><span class="op" id="3020353">)</span>&nbsp;<span class="op" id="3020355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3020358">func</span>&nbsp;<span class="op" id="3020363">(</span><span class="ident" id="3020364">s</span>&nbsp;<span class="ident" id="3020366">byPref</span><span class="op" id="3020372">)</span>&nbsp;<span class="ident" id="3020374">Less</span><span class="op" id="3020378">(</span><span class="ident" id="3020379">i</span><span class="op" id="3020380">,</span>&nbsp;<span class="ident" id="3020382">j</span>&nbsp;<span class="builtintype" id="3020384">int</span><span class="op" id="3020387">)</span>&nbsp;<span class="builtintype" id="3020389">bool</span>&nbsp;<span class="op" id="3020394">{</span>&nbsp;<span class="keyword" id="3020396">return</span>&nbsp;<span class="ident" id="3020403">s</span><span class="op" id="3020404">[</span><span class="ident" id="3020405">i</span><span class="op" id="3020406">]</span><span class="op" id="3020407">.</span><span class="ident" id="3020408">Pref</span>&nbsp;<span class="op" id="3020413">&lt;</span>&nbsp;<span class="ident" id="3020415">s</span><span class="op" id="3020416">[</span><span class="ident" id="3020417">j</span><span class="op" id="3020418">]</span><span class="op" id="3020419">.</span><span class="ident" id="3020420">Pref</span>&nbsp;<span class="op" id="3020425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3020428">func</span>&nbsp;<span class="op" id="3020433">(</span><span class="ident" id="3020434">s</span>&nbsp;<span class="ident" id="3020436">byPref</span><span class="op" id="3020442">)</span>&nbsp;<span class="ident" id="3020444">Swap</span><span class="op" id="3020448">(</span><span class="ident" id="3020449">i</span><span class="op" id="3020450">,</span>&nbsp;<span class="ident" id="3020452">j</span>&nbsp;<span class="builtintype" id="3020454">int</span><span class="op" id="3020457">)</span>&nbsp;<span class="op" id="3020459">{</span>&nbsp;<span class="ident" id="3020461">s</span><span class="op" id="3020462">[</span><span class="ident" id="3020463">i</span><span class="op" id="3020464">]</span><span class="op" id="3020465">,</span>&nbsp;<span class="ident" id="3020467">s</span><span class="op" id="3020468">[</span><span class="ident" id="3020469">j</span><span class="op" id="3020470">]</span>&nbsp;<span class="op" id="3020472">=</span>&nbsp;<span class="ident" id="3020474">s</span><span class="op" id="3020475">[</span><span class="ident" id="3020476">j</span><span class="op" id="3020477">]</span><span class="op" id="3020478">,</span>&nbsp;<span class="ident" id="3020480">s</span><span class="op" id="3020481">[</span><span class="ident" id="3020482">i</span><span class="op" id="3020483">]</span>&nbsp;<span class="op" id="3020485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3020488">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="3020542">func</span>&nbsp;<span class="op" id="3020547">(</span><span class="ident" id="3020548">s</span>&nbsp;<span class="ident" id="3020550">byPref</span><span class="op" id="3020556">)</span>&nbsp;<span class="ident" id="3020558">sort</span><span class="op" id="3020562">(</span><span class="op" id="3020563">)</span>&nbsp;<span class="op" id="3020565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3020568">for</span>&nbsp;<span class="ident" id="3020572">i</span>&nbsp;<span class="op" id="3020574">:=</span>&nbsp;<span class="keyword" id="3020577">range</span>&nbsp;<span class="ident" id="3020583">s</span>&nbsp;<span class="op" id="3020585">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020589">j</span>&nbsp;<span class="op" id="3020591">:=</span>&nbsp;<span class="ident" id="3020594">rand</span><span class="op" id="3020598">.</span><span class="ident" id="3020599">Intn</span><span class="op" id="3020603">(</span><span class="ident" id="3020604">i</span>&nbsp;<span class="op" id="3020606">+</span>&nbsp;<span class="num" id="3020608">1</span><span class="op" id="3020609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020613">s</span><span class="op" id="3020614">[</span><span class="ident" id="3020615">i</span><span class="op" id="3020616">]</span><span class="op" id="3020617">,</span>&nbsp;<span class="ident" id="3020619">s</span><span class="op" id="3020620">[</span><span class="ident" id="3020621">j</span><span class="op" id="3020622">]</span>&nbsp;<span class="op" id="3020624">=</span>&nbsp;<span class="ident" id="3020626">s</span><span class="op" id="3020627">[</span><span class="ident" id="3020628">j</span><span class="op" id="3020629">]</span><span class="op" id="3020630">,</span>&nbsp;<span class="ident" id="3020632">s</span><span class="op" id="3020633">[</span><span class="ident" id="3020634">i</span><span class="op" id="3020635">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3020638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020641">sort</span><span class="op" id="3020645">.</span><span class="ident" id="3020646">Sort</span><span class="op" id="3020650">(</span><span class="ident" id="3020651">s</span><span class="op" id="3020652">)</span><br>
<span class="lineno"></span><span class="op" id="3020654">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="3020657">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3020701">type</span>&nbsp;<span class="ident" id="3020706">NS</span>&nbsp;<span class="keyword" id="3020709">struct</span>&nbsp;<span class="op" id="3020716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3020719">Host</span>&nbsp;<span class="builtintype" id="3020724">string</span><br>
<span class="lineno"></span><span class="op" id="3020731">}</span>
</div>
</body>
</html>
