<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6061927">package</span>&nbsp;<span class="ident" id="6061935">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6061941">import</span>&nbsp;<span class="op" id="6061948">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061951">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061958">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061981">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6062004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="comment" id="6062007">//&nbsp;BuildSingleFile&nbsp;builds&nbsp;a&nbsp;package&nbsp;named&nbsp;&#34;main&#34;&nbsp;from&nbsp;a&nbsp;single&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6062076">func</span>&nbsp;<span class="ident" id="6062081">BuildSingleFile</span><span class="op" id="6062096">(</span><span class="ident" id="6062097">f</span>&nbsp;<span class="builtintype" id="6062099">string</span><span class="op" id="6062105">,</span>&nbsp;<span class="ident" id="6062107">rc</span>&nbsp;<span class="ident" id="6062110"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6061951">io</a></span><span class="op" id="6062112">.</span><span class="ident" id="6062113">ReadCloser</span><span class="op" id="6062123">)</span>&nbsp;<span class="op" id="6062125">(</span><span class="op" id="6062126">[</span><span class="op" id="6062127">]</span><span class="builtintype" id="6062128">byte</span><span class="op" id="6062132">,</span>&nbsp;<span class="op" id="6062134">[</span><span class="op" id="6062135">]</span><span class="op" id="6062136">*</span><span class="ident" id="6062137"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6061958">lex8</a></span><span class="op" id="6062141">.</span><span class="ident" id="6062142">Error</span><span class="op" id="6062147">)</span>&nbsp;<span class="op" id="6062149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062152">p</span>&nbsp;<span class="op" id="6062154">:=</span>&nbsp;<span class="ident" id="6062157"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059913">newParser</a></span><span class="op" id="6062166">(</span><span class="ident" id="6062167"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062097">f</a></span><span class="op" id="6062168">,</span>&nbsp;<span class="ident" id="6062170"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062107">rc</a></span><span class="op" id="6062172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062175">file</span>&nbsp;<span class="op" id="6062180">:=</span>&nbsp;<span class="ident" id="6062183"><a href="/lonnie.io/e8vm/asm8/parse_file.go.html#6052895">parseFile</a></span><span class="op" id="6062192">(</span><span class="ident" id="6062193"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062152">p</a></span><span class="op" id="6062194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062197">if</span>&nbsp;<span class="ident" id="6062200">es</span>&nbsp;<span class="op" id="6062203">:=</span>&nbsp;<span class="ident" id="6062206"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062152">p</a></span><span class="op" id="6062207">.</span><span class="ident" id="6062208">Errs</span><span class="op" id="6062212">(</span><span class="op" id="6062213">)</span><span class="op" id="6062214">;</span>&nbsp;<span class="ident" id="6062216"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062200">es</a></span>&nbsp;<span class="op" id="6062219">!=</span>&nbsp;<span class="ident" id="6062222">nil</span>&nbsp;<span class="op" id="6062226">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062230">return</span>&nbsp;<span class="ident" id="6062237">nil</span><span class="op" id="6062240">,</span>&nbsp;<span class="ident" id="6062242"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062200">es</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062250">pkgName</span>&nbsp;<span class="op" id="6062258">:=</span>&nbsp;<span class="string" id="6062261">&#34;main&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062269">pkg</span>&nbsp;<span class="op" id="6062273">:=</span>&nbsp;<span class="ident" id="6062276"><a href="/lonnie.io/e8vm/asm8/package.go.html#6052435">newPkg</a></span><span class="op" id="6062282">(</span><span class="ident" id="6062283"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062250">pkgName</a></span><span class="op" id="6062290">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062293"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062269">pkg</a></span><span class="op" id="6062296">.</span><span class="ident" id="6062297">AddFile</span><span class="op" id="6062304">(</span><span class="ident" id="6062305"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062175">file</a></span><span class="op" id="6062309">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062313">b</span>&nbsp;<span class="op" id="6062315">:=</span>&nbsp;<span class="ident" id="6062318"><a href="/lonnie.io/e8vm/asm8/builder.go.html#6033981">newBuilder</a></span><span class="op" id="6062328">(</span><span class="op" id="6062329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062332">main</span>&nbsp;<span class="op" id="6062337">:=</span>&nbsp;<span class="ident" id="6062340"><a href="/lonnie.io/e8vm/asm8/build_lib.go.html#6032699">buildLib</a></span><span class="op" id="6062348">(</span><span class="ident" id="6062349"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062313">b</a></span><span class="op" id="6062350">,</span>&nbsp;<span class="ident" id="6062352"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062269">pkg</a></span><span class="op" id="6062355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062358">if</span>&nbsp;<span class="ident" id="6062361">es</span>&nbsp;<span class="op" id="6062364">:=</span>&nbsp;<span class="ident" id="6062367"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062313">b</a></span><span class="op" id="6062368">.</span><span class="ident" id="6062369">Errs</span><span class="op" id="6062373">(</span><span class="op" id="6062374">)</span><span class="op" id="6062375">;</span>&nbsp;<span class="ident" id="6062377"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062361">es</a></span>&nbsp;<span class="op" id="6062380">!=</span>&nbsp;<span class="ident" id="6062383">nil</span>&nbsp;<span class="op" id="6062387">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062391">return</span>&nbsp;<span class="ident" id="6062398">nil</span><span class="op" id="6062401">,</span>&nbsp;<span class="ident" id="6062403"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062361">es</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062411">ret</span><span class="op" id="6062414">,</span>&nbsp;<span class="ident" id="6062416">e</span>&nbsp;<span class="op" id="6062418">:=</span>&nbsp;<span class="ident" id="6062421"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6061981">link8</a></span><span class="op" id="6062426">.</span><span class="ident" id="6062427">LinkMain</span><span class="op" id="6062435">(</span><span class="ident" id="6062436"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062332">main</a></span><span class="op" id="6062440">.</span><span class="ident" id="6062441">Package</span><span class="op" id="6062448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062451">if</span>&nbsp;<span class="ident" id="6062454"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062416">e</a></span>&nbsp;<span class="op" id="6062456">!=</span>&nbsp;<span class="ident" id="6062459">nil</span>&nbsp;<span class="op" id="6062463">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062467">return</span>&nbsp;<span class="ident" id="6062474">nil</span><span class="op" id="6062477">,</span>&nbsp;<span class="ident" id="6062479"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6061958">lex8</a></span><span class="op" id="6062483">.</span><span class="ident" id="6062484">SingleErr</span><span class="op" id="6062493">(</span><span class="ident" id="6062494"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062416">e</a></span><span class="op" id="6062495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062502">return</span>&nbsp;<span class="ident" id="6062509"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#6062411">ret</a></span><span class="op" id="6062512">,</span>&nbsp;<span class="ident" id="6062514">nil</span><br>
<span class="lineno"></span><span class="op" id="6062518">}</span>
</div>
</body>
</html>
