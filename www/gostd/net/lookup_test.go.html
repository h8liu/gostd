<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8255115">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8255170">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8255224">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8255275">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="8255339">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255366">package</span>&nbsp;<span class="ident" id="8255374">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="8255379">import</span>&nbsp;<span class="op" id="8255386">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255389">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255397">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255408">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8255418">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8255421">var</span>&nbsp;<span class="ident" id="8255425">testExternal</span>&nbsp;<span class="op" id="8255438">=</span>&nbsp;<span class="ident" id="8255440">flag</span><span class="op" id="8255444">.</span><span class="ident" id="8255445">Bool</span><span class="op" id="8255449">(</span><span class="string" id="8255450">&#34;external&#34;</span><span class="op" id="8255460">,</span>&nbsp;<span class="builtintype" id="8255462">true</span><span class="op" id="8255466">,</span>&nbsp;<span class="string" id="8255468">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="8255517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255520">var</span>&nbsp;<span class="ident" id="8255524">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="8255545">=</span>&nbsp;<span class="op" id="8255547">[</span><span class="op" id="8255548">]</span><span class="keyword" id="8255549">struct</span>&nbsp;<span class="op" id="8255556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255559">service</span><span class="op" id="8255566">,</span>&nbsp;<span class="ident" id="8255568">proto</span><span class="op" id="8255573">,</span>&nbsp;<span class="ident" id="8255575">name</span>&nbsp;<span class="builtintype" id="8255580">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255588">cname</span><span class="op" id="8255593">,</span>&nbsp;<span class="ident" id="8255595">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8255609">string</span><br>
<span class="lineno"></span><span class="op" id="8255616">}</span><span class="op" id="8255617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255624">&#34;xmpp-server&#34;</span><span class="op" id="8255637">,</span>&nbsp;<span class="string" id="8255639">&#34;tcp&#34;</span><span class="op" id="8255644">,</span>&nbsp;<span class="string" id="8255646">&#34;google.com&#34;</span><span class="op" id="8255658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255662">&#34;.google.com&#34;</span><span class="op" id="8255675">,</span>&nbsp;<span class="string" id="8255677">&#34;.google.com&#34;</span><span class="op" id="8255690">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255693">}</span><span class="op" id="8255694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255701">&#34;&#34;</span><span class="op" id="8255703">,</span>&nbsp;<span class="string" id="8255705">&#34;&#34;</span><span class="op" id="8255707">,</span>&nbsp;<span class="string" id="8255709">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="8255739">,</span>&nbsp;<span class="comment" id="8255741">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8255769">&#34;.google.com&#34;</span><span class="op" id="8255782">,</span>&nbsp;<span class="string" id="8255784">&#34;.google.com&#34;</span><span class="op" id="8255797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255800">}</span><span class="op" id="8255801">,</span><br>
<span class="lineno">30</span><span class="op" id="8255803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255806">func</span>&nbsp;<span class="ident" id="8255811">TestLookupGoogleSRV</span><span class="op" id="8255830">(</span><span class="ident" id="8255831">t</span>&nbsp;<span class="op" id="8255833">*</span><span class="ident" id="8255834">testing</span><span class="op" id="8255841">.</span><span class="ident" id="8255842">T</span><span class="op" id="8255843">)</span>&nbsp;<span class="op" id="8255845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8255848">if</span>&nbsp;<span class="ident" id="8255851">testing</span><span class="op" id="8255858">.</span><span class="ident" id="8255859">Short</span><span class="op" id="8255864">(</span><span class="op" id="8255865">)</span>&nbsp;<span class="op" id="8255867">||</span>&nbsp;<span class="op" id="8255870">!</span><span class="op" id="8255871">*</span><span class="ident" id="8255872">testExternal</span>&nbsp;<span class="op" id="8255885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255889">t</span><span class="op" id="8255890">.</span><span class="ident" id="8255891">Skip</span><span class="op" id="8255895">(</span><span class="string" id="8255896">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8255937">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8255944">for</span>&nbsp;<span class="ident" id="8255948">_</span><span class="op" id="8255949">,</span>&nbsp;<span class="ident" id="8255951">tt</span>&nbsp;<span class="op" id="8255954">:=</span>&nbsp;<span class="keyword" id="8255957">range</span>&nbsp;<span class="ident" id="8255963">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="8255984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255988">cname</span><span class="op" id="8255993">,</span>&nbsp;<span class="ident" id="8255995">srvs</span><span class="op" id="8255999">,</span>&nbsp;<span class="ident" id="8256001">err</span>&nbsp;<span class="op" id="8256005">:=</span>&nbsp;<span class="ident" id="8256008">LookupSRV</span><span class="op" id="8256017">(</span><span class="ident" id="8256018">tt</span><span class="op" id="8256020">.</span><span class="ident" id="8256021">service</span><span class="op" id="8256028">,</span>&nbsp;<span class="ident" id="8256030">tt</span><span class="op" id="8256032">.</span><span class="ident" id="8256033">proto</span><span class="op" id="8256038">,</span>&nbsp;<span class="ident" id="8256040">tt</span><span class="op" id="8256042">.</span><span class="ident" id="8256043">name</span><span class="op" id="8256047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256051">if</span>&nbsp;<span class="ident" id="8256054">err</span>&nbsp;<span class="op" id="8256058">!=</span>&nbsp;<span class="ident" id="8256061">nil</span>&nbsp;<span class="op" id="8256065">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256070">t</span><span class="op" id="8256071">.</span><span class="ident" id="8256072">Fatal</span><span class="op" id="8256077">(</span><span class="ident" id="8256078">err</span><span class="op" id="8256081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256089">if</span>&nbsp;<span class="builtinfunc" id="8256092">len</span><span class="op" id="8256095">(</span><span class="ident" id="8256096">srvs</span><span class="op" id="8256100">)</span>&nbsp;<span class="op" id="8256102">==</span>&nbsp;<span class="num" id="8256105">0</span>&nbsp;<span class="op" id="8256107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256112">t</span><span class="op" id="8256113">.</span><span class="ident" id="8256114">Error</span><span class="op" id="8256119">(</span><span class="string" id="8256120">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8256135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256139">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256143">if</span>&nbsp;<span class="op" id="8256146">!</span><span class="ident" id="8256147">strings</span><span class="op" id="8256154">.</span><span class="ident" id="8256155">Contains</span><span class="op" id="8256163">(</span><span class="ident" id="8256164">cname</span><span class="op" id="8256169">,</span>&nbsp;<span class="ident" id="8256171">tt</span><span class="op" id="8256173">.</span><span class="ident" id="8256174">cname</span><span class="op" id="8256179">)</span>&nbsp;<span class="op" id="8256181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256186">t</span><span class="op" id="8256187">.</span><span class="ident" id="8256188">Errorf</span><span class="op" id="8256194">(</span><span class="string" id="8256195">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8256212">,</span>&nbsp;<span class="ident" id="8256214">cname</span><span class="op" id="8256219">,</span>&nbsp;<span class="ident" id="8256221">tt</span><span class="op" id="8256223">.</span><span class="ident" id="8256224">cname</span><span class="op" id="8256229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256237">for</span>&nbsp;<span class="ident" id="8256241">_</span><span class="op" id="8256242">,</span>&nbsp;<span class="ident" id="8256244">srv</span>&nbsp;<span class="op" id="8256248">:=</span>&nbsp;<span class="keyword" id="8256251">range</span>&nbsp;<span class="ident" id="8256257">srvs</span>&nbsp;<span class="op" id="8256262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256267">if</span>&nbsp;<span class="op" id="8256270">!</span><span class="ident" id="8256271">strings</span><span class="op" id="8256278">.</span><span class="ident" id="8256279">Contains</span><span class="op" id="8256287">(</span><span class="ident" id="8256288">srv</span><span class="op" id="8256291">.</span><span class="ident" id="8256292">Target</span><span class="op" id="8256298">,</span>&nbsp;<span class="ident" id="8256300">tt</span><span class="op" id="8256302">.</span><span class="ident" id="8256303">target</span><span class="op" id="8256309">)</span>&nbsp;<span class="op" id="8256311">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256317">t</span><span class="op" id="8256318">.</span><span class="ident" id="8256319">Errorf</span><span class="op" id="8256325">(</span><span class="string" id="8256326">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="8256363">,</span>&nbsp;<span class="ident" id="8256365">srv</span><span class="op" id="8256368">,</span>&nbsp;<span class="ident" id="8256370">tt</span><span class="op" id="8256372">.</span><span class="ident" id="8256373">target</span><span class="op" id="8256379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256391">}</span><br>
<span class="lineno"></span><span class="op" id="8256393">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8256396">func</span>&nbsp;<span class="ident" id="8256401">TestLookupGmailMX</span><span class="op" id="8256418">(</span><span class="ident" id="8256419">t</span>&nbsp;<span class="op" id="8256421">*</span><span class="ident" id="8256422">testing</span><span class="op" id="8256429">.</span><span class="ident" id="8256430">T</span><span class="op" id="8256431">)</span>&nbsp;<span class="op" id="8256433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256436">if</span>&nbsp;<span class="ident" id="8256439">testing</span><span class="op" id="8256446">.</span><span class="ident" id="8256447">Short</span><span class="op" id="8256452">(</span><span class="op" id="8256453">)</span>&nbsp;<span class="op" id="8256455">||</span>&nbsp;<span class="op" id="8256458">!</span><span class="op" id="8256459">*</span><span class="ident" id="8256460">testExternal</span>&nbsp;<span class="op" id="8256473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256477">t</span><span class="op" id="8256478">.</span><span class="ident" id="8256479">Skip</span><span class="op" id="8256483">(</span><span class="string" id="8256484">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8256525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256528">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256532">mxs</span><span class="op" id="8256535">,</span>&nbsp;<span class="ident" id="8256537">err</span>&nbsp;<span class="op" id="8256541">:=</span>&nbsp;<span class="ident" id="8256544">LookupMX</span><span class="op" id="8256552">(</span><span class="string" id="8256553">&#34;gmail.com&#34;</span><span class="op" id="8256564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256567">if</span>&nbsp;<span class="ident" id="8256570">err</span>&nbsp;<span class="op" id="8256574">!=</span>&nbsp;<span class="ident" id="8256577">nil</span>&nbsp;<span class="op" id="8256581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256585">t</span><span class="op" id="8256586">.</span><span class="ident" id="8256587">Fatal</span><span class="op" id="8256592">(</span><span class="ident" id="8256593">err</span><span class="op" id="8256596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256599">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256602">if</span>&nbsp;<span class="builtinfunc" id="8256605">len</span><span class="op" id="8256608">(</span><span class="ident" id="8256609">mxs</span><span class="op" id="8256612">)</span>&nbsp;<span class="op" id="8256614">==</span>&nbsp;<span class="num" id="8256617">0</span>&nbsp;<span class="op" id="8256619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256623">t</span><span class="op" id="8256624">.</span><span class="ident" id="8256625">Error</span><span class="op" id="8256630">(</span><span class="string" id="8256631">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8256646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256652">for</span>&nbsp;<span class="ident" id="8256656">_</span><span class="op" id="8256657">,</span>&nbsp;<span class="ident" id="8256659">mx</span>&nbsp;<span class="op" id="8256662">:=</span>&nbsp;<span class="keyword" id="8256665">range</span>&nbsp;<span class="ident" id="8256671">mxs</span>&nbsp;<span class="op" id="8256675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256679">if</span>&nbsp;<span class="op" id="8256682">!</span><span class="ident" id="8256683">strings</span><span class="op" id="8256690">.</span><span class="ident" id="8256691">Contains</span><span class="op" id="8256699">(</span><span class="ident" id="8256700">mx</span><span class="op" id="8256702">.</span><span class="ident" id="8256703">Host</span><span class="op" id="8256707">,</span>&nbsp;<span class="string" id="8256709">&#34;.google.com&#34;</span><span class="op" id="8256722">)</span>&nbsp;<span class="op" id="8256724">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256729">t</span><span class="op" id="8256730">.</span><span class="ident" id="8256731">Errorf</span><span class="op" id="8256737">(</span><span class="string" id="8256738">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="8256785">,</span>&nbsp;<span class="ident" id="8256787">mx</span><span class="op" id="8256789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256796">}</span><br>
<span class="lineno"></span><span class="op" id="8256798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8256801">func</span>&nbsp;<span class="ident" id="8256806">TestLookupGmailNS</span><span class="op" id="8256823">(</span><span class="ident" id="8256824">t</span>&nbsp;<span class="op" id="8256826">*</span><span class="ident" id="8256827">testing</span><span class="op" id="8256834">.</span><span class="ident" id="8256835">T</span><span class="op" id="8256836">)</span>&nbsp;<span class="op" id="8256838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256841">if</span>&nbsp;<span class="ident" id="8256844">testing</span><span class="op" id="8256851">.</span><span class="ident" id="8256852">Short</span><span class="op" id="8256857">(</span><span class="op" id="8256858">)</span>&nbsp;<span class="op" id="8256860">||</span>&nbsp;<span class="op" id="8256863">!</span><span class="op" id="8256864">*</span><span class="ident" id="8256865">testExternal</span>&nbsp;<span class="op" id="8256878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256882">t</span><span class="op" id="8256883">.</span><span class="ident" id="8256884">Skip</span><span class="op" id="8256888">(</span><span class="string" id="8256889">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8256930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256937">nss</span><span class="op" id="8256940">,</span>&nbsp;<span class="ident" id="8256942">err</span>&nbsp;<span class="op" id="8256946">:=</span>&nbsp;<span class="ident" id="8256949">LookupNS</span><span class="op" id="8256957">(</span><span class="string" id="8256958">&#34;gmail.com&#34;</span><span class="op" id="8256969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256972">if</span>&nbsp;<span class="ident" id="8256975">err</span>&nbsp;<span class="op" id="8256979">!=</span>&nbsp;<span class="ident" id="8256982">nil</span>&nbsp;<span class="op" id="8256986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256990">t</span><span class="op" id="8256991">.</span><span class="ident" id="8256992">Fatal</span><span class="op" id="8256997">(</span><span class="ident" id="8256998">err</span><span class="op" id="8257001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257007">if</span>&nbsp;<span class="builtinfunc" id="8257010">len</span><span class="op" id="8257013">(</span><span class="ident" id="8257014">nss</span><span class="op" id="8257017">)</span>&nbsp;<span class="op" id="8257019">==</span>&nbsp;<span class="num" id="8257022">0</span>&nbsp;<span class="op" id="8257024">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257028">t</span><span class="op" id="8257029">.</span><span class="ident" id="8257030">Error</span><span class="op" id="8257035">(</span><span class="string" id="8257036">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8257051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257057">for</span>&nbsp;<span class="ident" id="8257061">_</span><span class="op" id="8257062">,</span>&nbsp;<span class="ident" id="8257064">ns</span>&nbsp;<span class="op" id="8257067">:=</span>&nbsp;<span class="keyword" id="8257070">range</span>&nbsp;<span class="ident" id="8257076">nss</span>&nbsp;<span class="op" id="8257080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257084">if</span>&nbsp;<span class="op" id="8257087">!</span><span class="ident" id="8257088">strings</span><span class="op" id="8257095">.</span><span class="ident" id="8257096">Contains</span><span class="op" id="8257104">(</span><span class="ident" id="8257105">ns</span><span class="op" id="8257107">.</span><span class="ident" id="8257108">Host</span><span class="op" id="8257112">,</span>&nbsp;<span class="string" id="8257114">&#34;.google.com&#34;</span><span class="op" id="8257127">)</span>&nbsp;<span class="op" id="8257129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257134">t</span><span class="op" id="8257135">.</span><span class="ident" id="8257136">Errorf</span><span class="op" id="8257142">(</span><span class="string" id="8257143">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="8257190">,</span>&nbsp;<span class="ident" id="8257192">ns</span><span class="op" id="8257194">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257201">}</span><br>
<span class="lineno"></span><span class="op" id="8257203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8257206">func</span>&nbsp;<span class="ident" id="8257211">TestLookupGmailTXT</span><span class="op" id="8257229">(</span><span class="ident" id="8257230">t</span>&nbsp;<span class="op" id="8257232">*</span><span class="ident" id="8257233">testing</span><span class="op" id="8257240">.</span><span class="ident" id="8257241">T</span><span class="op" id="8257242">)</span>&nbsp;<span class="op" id="8257244">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257247">if</span>&nbsp;<span class="ident" id="8257250">testing</span><span class="op" id="8257257">.</span><span class="ident" id="8257258">Short</span><span class="op" id="8257263">(</span><span class="op" id="8257264">)</span>&nbsp;<span class="op" id="8257266">||</span>&nbsp;<span class="op" id="8257269">!</span><span class="op" id="8257270">*</span><span class="ident" id="8257271">testExternal</span>&nbsp;<span class="op" id="8257284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257288">t</span><span class="op" id="8257289">.</span><span class="ident" id="8257290">Skip</span><span class="op" id="8257294">(</span><span class="string" id="8257295">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8257336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257343">txts</span><span class="op" id="8257347">,</span>&nbsp;<span class="ident" id="8257349">err</span>&nbsp;<span class="op" id="8257353">:=</span>&nbsp;<span class="ident" id="8257356">LookupTXT</span><span class="op" id="8257365">(</span><span class="string" id="8257366">&#34;gmail.com&#34;</span><span class="op" id="8257377">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257380">if</span>&nbsp;<span class="ident" id="8257383">err</span>&nbsp;<span class="op" id="8257387">!=</span>&nbsp;<span class="ident" id="8257390">nil</span>&nbsp;<span class="op" id="8257394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257398">t</span><span class="op" id="8257399">.</span><span class="ident" id="8257400">Fatal</span><span class="op" id="8257405">(</span><span class="ident" id="8257406">err</span><span class="op" id="8257409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257415">if</span>&nbsp;<span class="builtinfunc" id="8257418">len</span><span class="op" id="8257421">(</span><span class="ident" id="8257422">txts</span><span class="op" id="8257426">)</span>&nbsp;<span class="op" id="8257428">==</span>&nbsp;<span class="num" id="8257431">0</span>&nbsp;<span class="op" id="8257433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257437">t</span><span class="op" id="8257438">.</span><span class="ident" id="8257439">Error</span><span class="op" id="8257444">(</span><span class="string" id="8257445">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8257460">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257466">for</span>&nbsp;<span class="ident" id="8257470">_</span><span class="op" id="8257471">,</span>&nbsp;<span class="ident" id="8257473">txt</span>&nbsp;<span class="op" id="8257477">:=</span>&nbsp;<span class="keyword" id="8257480">range</span>&nbsp;<span class="ident" id="8257486">txts</span>&nbsp;<span class="op" id="8257491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257495">if</span>&nbsp;<span class="op" id="8257498">!</span><span class="ident" id="8257499">strings</span><span class="op" id="8257506">.</span><span class="ident" id="8257507">Contains</span><span class="op" id="8257515">(</span><span class="ident" id="8257516">txt</span><span class="op" id="8257519">,</span>&nbsp;<span class="string" id="8257521">&#34;spf&#34;</span><span class="op" id="8257526">)</span>&nbsp;<span class="op" id="8257528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257533">t</span><span class="op" id="8257534">.</span><span class="ident" id="8257535">Errorf</span><span class="op" id="8257541">(</span><span class="string" id="8257542">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="8257569">,</span>&nbsp;<span class="ident" id="8257571">txt</span><span class="op" id="8257574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257578">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257581">}</span><br>
<span class="lineno"></span><span class="op" id="8257583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8257586">var</span>&nbsp;<span class="ident" id="8257590">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="8257617">=</span>&nbsp;<span class="op" id="8257619">[</span><span class="op" id="8257620">]</span><span class="keyword" id="8257621">struct</span>&nbsp;<span class="op" id="8257628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257631">addr</span>&nbsp;<span class="builtintype" id="8257636">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257644">name</span>&nbsp;<span class="builtintype" id="8257649">string</span><br>
<span class="lineno"></span><span class="op" id="8257656">}</span><span class="op" id="8257657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257660">{</span><span class="string" id="8257661">&#34;8.8.8.8&#34;</span><span class="op" id="8257670">,</span>&nbsp;<span class="string" id="8257672">&#34;.google.com.&#34;</span><span class="op" id="8257686">}</span><span class="op" id="8257687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257690">{</span><span class="string" id="8257691">&#34;8.8.4.4&#34;</span><span class="op" id="8257700">,</span>&nbsp;<span class="string" id="8257702">&#34;.google.com.&#34;</span><span class="op" id="8257716">}</span><span class="op" id="8257717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257720">{</span><span class="string" id="8257721">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="8257743">,</span>&nbsp;<span class="string" id="8257745">&#34;.google.com.&#34;</span><span class="op" id="8257759">}</span><span class="op" id="8257760">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257763">{</span><span class="string" id="8257764">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="8257786">,</span>&nbsp;<span class="string" id="8257788">&#34;.google.com.&#34;</span><span class="op" id="8257802">}</span><span class="op" id="8257803">,</span><br>
<span class="lineno"></span><span class="op" id="8257805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8257808">func</span>&nbsp;<span class="ident" id="8257813">TestLookupGooglePublicDNSAddr</span><span class="op" id="8257842">(</span><span class="ident" id="8257843">t</span>&nbsp;<span class="op" id="8257845">*</span><span class="ident" id="8257846">testing</span><span class="op" id="8257853">.</span><span class="ident" id="8257854">T</span><span class="op" id="8257855">)</span>&nbsp;<span class="op" id="8257857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257860">if</span>&nbsp;<span class="ident" id="8257863">testing</span><span class="op" id="8257870">.</span><span class="ident" id="8257871">Short</span><span class="op" id="8257876">(</span><span class="op" id="8257877">)</span>&nbsp;<span class="op" id="8257879">||</span>&nbsp;<span class="op" id="8257882">!</span><span class="op" id="8257883">*</span><span class="ident" id="8257884">testExternal</span>&nbsp;<span class="op" id="8257897">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257901">t</span><span class="op" id="8257902">.</span><span class="ident" id="8257903">Skip</span><span class="op" id="8257907">(</span><span class="string" id="8257908">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8257949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8257956">for</span>&nbsp;<span class="ident" id="8257960">_</span><span class="op" id="8257961">,</span>&nbsp;<span class="ident" id="8257963">tt</span>&nbsp;<span class="op" id="8257966">:=</span>&nbsp;<span class="keyword" id="8257969">range</span>&nbsp;<span class="ident" id="8257975">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="8258002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258006">names</span><span class="op" id="8258011">,</span>&nbsp;<span class="ident" id="8258013">err</span>&nbsp;<span class="op" id="8258017">:=</span>&nbsp;<span class="ident" id="8258020">LookupAddr</span><span class="op" id="8258030">(</span><span class="ident" id="8258031">tt</span><span class="op" id="8258033">.</span><span class="ident" id="8258034">addr</span><span class="op" id="8258038">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258042">if</span>&nbsp;<span class="ident" id="8258045">err</span>&nbsp;<span class="op" id="8258049">!=</span>&nbsp;<span class="ident" id="8258052">nil</span>&nbsp;<span class="op" id="8258056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258061">t</span><span class="op" id="8258062">.</span><span class="ident" id="8258063">Fatal</span><span class="op" id="8258068">(</span><span class="ident" id="8258069">err</span><span class="op" id="8258072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258080">if</span>&nbsp;<span class="builtinfunc" id="8258083">len</span><span class="op" id="8258086">(</span><span class="ident" id="8258087">names</span><span class="op" id="8258092">)</span>&nbsp;<span class="op" id="8258094">==</span>&nbsp;<span class="num" id="8258097">0</span>&nbsp;<span class="op" id="8258099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258104">t</span><span class="op" id="8258105">.</span><span class="ident" id="8258106">Error</span><span class="op" id="8258111">(</span><span class="string" id="8258112">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8258127">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258135">for</span>&nbsp;<span class="ident" id="8258139">_</span><span class="op" id="8258140">,</span>&nbsp;<span class="ident" id="8258142">name</span>&nbsp;<span class="op" id="8258147">:=</span>&nbsp;<span class="keyword" id="8258150">range</span>&nbsp;<span class="ident" id="8258156">names</span>&nbsp;<span class="op" id="8258162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258167">if</span>&nbsp;<span class="op" id="8258170">!</span><span class="ident" id="8258171">strings</span><span class="op" id="8258178">.</span><span class="ident" id="8258179">HasSuffix</span><span class="op" id="8258188">(</span><span class="ident" id="8258189">name</span><span class="op" id="8258193">,</span>&nbsp;<span class="ident" id="8258195">tt</span><span class="op" id="8258197">.</span><span class="ident" id="8258198">name</span><span class="op" id="8258202">)</span>&nbsp;<span class="op" id="8258204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258210">t</span><span class="op" id="8258211">.</span><span class="ident" id="8258212">Errorf</span><span class="op" id="8258218">(</span><span class="string" id="8258219">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="8258256">,</span>&nbsp;<span class="ident" id="8258258">name</span><span class="op" id="8258262">,</span>&nbsp;<span class="ident" id="8258264">tt</span><span class="op" id="8258266">.</span><span class="ident" id="8258267">name</span><span class="op" id="8258271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258276">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258283">}</span><br>
<span class="lineno"></span><span class="op" id="8258285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8258288">func</span>&nbsp;<span class="ident" id="8258293">TestLookupIANACNAME</span><span class="op" id="8258312">(</span><span class="ident" id="8258313">t</span>&nbsp;<span class="op" id="8258315">*</span><span class="ident" id="8258316">testing</span><span class="op" id="8258323">.</span><span class="ident" id="8258324">T</span><span class="op" id="8258325">)</span>&nbsp;<span class="op" id="8258327">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258330">if</span>&nbsp;<span class="ident" id="8258333">testing</span><span class="op" id="8258340">.</span><span class="ident" id="8258341">Short</span><span class="op" id="8258346">(</span><span class="op" id="8258347">)</span>&nbsp;<span class="op" id="8258349">||</span>&nbsp;<span class="op" id="8258352">!</span><span class="op" id="8258353">*</span><span class="ident" id="8258354">testExternal</span>&nbsp;<span class="op" id="8258367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258371">t</span><span class="op" id="8258372">.</span><span class="ident" id="8258373">Skip</span><span class="op" id="8258377">(</span><span class="string" id="8258378">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8258419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258426">cname</span><span class="op" id="8258431">,</span>&nbsp;<span class="ident" id="8258433">err</span>&nbsp;<span class="op" id="8258437">:=</span>&nbsp;<span class="ident" id="8258440">LookupCNAME</span><span class="op" id="8258451">(</span><span class="string" id="8258452">&#34;www.iana.org&#34;</span><span class="op" id="8258466">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258469">if</span>&nbsp;<span class="ident" id="8258472">err</span>&nbsp;<span class="op" id="8258476">!=</span>&nbsp;<span class="ident" id="8258479">nil</span>&nbsp;<span class="op" id="8258483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258487">t</span><span class="op" id="8258488">.</span><span class="ident" id="8258489">Fatal</span><span class="op" id="8258494">(</span><span class="ident" id="8258495">err</span><span class="op" id="8258498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258504">if</span>&nbsp;<span class="op" id="8258507">!</span><span class="ident" id="8258508">strings</span><span class="op" id="8258515">.</span><span class="ident" id="8258516">HasSuffix</span><span class="op" id="8258525">(</span><span class="ident" id="8258526">cname</span><span class="op" id="8258531">,</span>&nbsp;<span class="string" id="8258533">&#34;.icann.org.&#34;</span><span class="op" id="8258546">)</span>&nbsp;<span class="op" id="8258548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258552">t</span><span class="op" id="8258553">.</span><span class="ident" id="8258554">Errorf</span><span class="op" id="8258560">(</span><span class="string" id="8258561">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="8258607">,</span>&nbsp;<span class="ident" id="8258609">cname</span><span class="op" id="8258614">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258617">}</span><br>
<span class="lineno"></span><span class="op" id="8258619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8258622">func</span>&nbsp;<span class="ident" id="8258627">TestLookupGoogleHost</span><span class="op" id="8258647">(</span><span class="ident" id="8258648">t</span>&nbsp;<span class="op" id="8258650">*</span><span class="ident" id="8258651">testing</span><span class="op" id="8258658">.</span><span class="ident" id="8258659">T</span><span class="op" id="8258660">)</span>&nbsp;<span class="op" id="8258662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258665">if</span>&nbsp;<span class="ident" id="8258668">testing</span><span class="op" id="8258675">.</span><span class="ident" id="8258676">Short</span><span class="op" id="8258681">(</span><span class="op" id="8258682">)</span>&nbsp;<span class="op" id="8258684">||</span>&nbsp;<span class="op" id="8258687">!</span><span class="op" id="8258688">*</span><span class="ident" id="8258689">testExternal</span>&nbsp;<span class="op" id="8258702">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258706">t</span><span class="op" id="8258707">.</span><span class="ident" id="8258708">Skip</span><span class="op" id="8258712">(</span><span class="string" id="8258713">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8258754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258761">addrs</span><span class="op" id="8258766">,</span>&nbsp;<span class="ident" id="8258768">err</span>&nbsp;<span class="op" id="8258772">:=</span>&nbsp;<span class="ident" id="8258775">LookupHost</span><span class="op" id="8258785">(</span><span class="string" id="8258786">&#34;google.com&#34;</span><span class="op" id="8258798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258801">if</span>&nbsp;<span class="ident" id="8258804">err</span>&nbsp;<span class="op" id="8258808">!=</span>&nbsp;<span class="ident" id="8258811">nil</span>&nbsp;<span class="op" id="8258815">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258819">t</span><span class="op" id="8258820">.</span><span class="ident" id="8258821">Fatal</span><span class="op" id="8258826">(</span><span class="ident" id="8258827">err</span><span class="op" id="8258830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258836">if</span>&nbsp;<span class="builtinfunc" id="8258839">len</span><span class="op" id="8258842">(</span><span class="ident" id="8258843">addrs</span><span class="op" id="8258848">)</span>&nbsp;<span class="op" id="8258850">==</span>&nbsp;<span class="num" id="8258853">0</span>&nbsp;<span class="op" id="8258855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258859">t</span><span class="op" id="8258860">.</span><span class="ident" id="8258861">Error</span><span class="op" id="8258866">(</span><span class="string" id="8258867">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8258882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258885">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258888">for</span>&nbsp;<span class="ident" id="8258892">_</span><span class="op" id="8258893">,</span>&nbsp;<span class="ident" id="8258895">addr</span>&nbsp;<span class="op" id="8258900">:=</span>&nbsp;<span class="keyword" id="8258903">range</span>&nbsp;<span class="ident" id="8258909">addrs</span>&nbsp;<span class="op" id="8258915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258919">if</span>&nbsp;<span class="ident" id="8258922">ParseIP</span><span class="op" id="8258929">(</span><span class="ident" id="8258930">addr</span><span class="op" id="8258934">)</span>&nbsp;<span class="op" id="8258936">==</span>&nbsp;<span class="ident" id="8258939">nil</span>&nbsp;<span class="op" id="8258943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258948">t</span><span class="op" id="8258949">.</span><span class="ident" id="8258950">Errorf</span><span class="op" id="8258956">(</span><span class="string" id="8258957">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="8258992">,</span>&nbsp;<span class="ident" id="8258994">addr</span><span class="op" id="8258998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259005">}</span><br>
<span class="lineno">175</span><span class="op" id="8259007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259010">func</span>&nbsp;<span class="ident" id="8259015">TestLookupGoogleIP</span><span class="op" id="8259033">(</span><span class="ident" id="8259034">t</span>&nbsp;<span class="op" id="8259036">*</span><span class="ident" id="8259037">testing</span><span class="op" id="8259044">.</span><span class="ident" id="8259045">T</span><span class="op" id="8259046">)</span>&nbsp;<span class="op" id="8259048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259051">if</span>&nbsp;<span class="ident" id="8259054">testing</span><span class="op" id="8259061">.</span><span class="ident" id="8259062">Short</span><span class="op" id="8259067">(</span><span class="op" id="8259068">)</span>&nbsp;<span class="op" id="8259070">||</span>&nbsp;<span class="op" id="8259073">!</span><span class="op" id="8259074">*</span><span class="ident" id="8259075">testExternal</span>&nbsp;<span class="op" id="8259088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259092">t</span><span class="op" id="8259093">.</span><span class="ident" id="8259094">Skip</span><span class="op" id="8259098">(</span><span class="string" id="8259099">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8259140">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259147">ips</span><span class="op" id="8259150">,</span>&nbsp;<span class="ident" id="8259152">err</span>&nbsp;<span class="op" id="8259156">:=</span>&nbsp;<span class="ident" id="8259159">LookupIP</span><span class="op" id="8259167">(</span><span class="string" id="8259168">&#34;google.com&#34;</span><span class="op" id="8259180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259183">if</span>&nbsp;<span class="ident" id="8259186">err</span>&nbsp;<span class="op" id="8259190">!=</span>&nbsp;<span class="ident" id="8259193">nil</span>&nbsp;<span class="op" id="8259197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259201">t</span><span class="op" id="8259202">.</span><span class="ident" id="8259203">Fatal</span><span class="op" id="8259208">(</span><span class="ident" id="8259209">err</span><span class="op" id="8259212">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259218">if</span>&nbsp;<span class="builtinfunc" id="8259221">len</span><span class="op" id="8259224">(</span><span class="ident" id="8259225">ips</span><span class="op" id="8259228">)</span>&nbsp;<span class="op" id="8259230">==</span>&nbsp;<span class="num" id="8259233">0</span>&nbsp;<span class="op" id="8259235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259239">t</span><span class="op" id="8259240">.</span><span class="ident" id="8259241">Error</span><span class="op" id="8259246">(</span><span class="string" id="8259247">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8259262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259268">for</span>&nbsp;<span class="ident" id="8259272">_</span><span class="op" id="8259273">,</span>&nbsp;<span class="ident" id="8259275">ip</span>&nbsp;<span class="op" id="8259278">:=</span>&nbsp;<span class="keyword" id="8259281">range</span>&nbsp;<span class="ident" id="8259287">ips</span>&nbsp;<span class="op" id="8259291">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259295">if</span>&nbsp;<span class="ident" id="8259298">ip</span><span class="op" id="8259300">.</span><span class="ident" id="8259301">To4</span><span class="op" id="8259304">(</span><span class="op" id="8259305">)</span>&nbsp;<span class="op" id="8259307">==</span>&nbsp;<span class="ident" id="8259310">nil</span>&nbsp;<span class="op" id="8259314">&amp;&amp;</span>&nbsp;<span class="ident" id="8259317">ip</span><span class="op" id="8259319">.</span><span class="ident" id="8259320">To16</span><span class="op" id="8259324">(</span><span class="op" id="8259325">)</span>&nbsp;<span class="op" id="8259327">==</span>&nbsp;<span class="ident" id="8259330">nil</span>&nbsp;<span class="op" id="8259334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259339">t</span><span class="op" id="8259340">.</span><span class="ident" id="8259341">Errorf</span><span class="op" id="8259347">(</span><span class="string" id="8259348">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="8259376">,</span>&nbsp;<span class="ident" id="8259378">ip</span><span class="op" id="8259380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259387">}</span><br>
<span class="lineno"></span><span class="op" id="8259389">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8259392">var</span>&nbsp;<span class="ident" id="8259396">revAddrTests</span>&nbsp;<span class="op" id="8259409">=</span>&nbsp;<span class="op" id="8259411">[</span><span class="op" id="8259412">]</span><span class="keyword" id="8259413">struct</span>&nbsp;<span class="op" id="8259420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259423">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8259433">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259441">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8259451">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259459">ErrPrefix</span>&nbsp;<span class="builtintype" id="8259469">string</span><br>
<span class="lineno">200</span><span class="op" id="8259476">}</span><span class="op" id="8259477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259480">{</span><span class="string" id="8259481">&#34;1.2.3.4&#34;</span><span class="op" id="8259490">,</span>&nbsp;<span class="string" id="8259492">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="8259515">,</span>&nbsp;<span class="string" id="8259517">&#34;&#34;</span><span class="op" id="8259519">}</span><span class="op" id="8259520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259523">{</span><span class="string" id="8259524">&#34;245.110.36.114&#34;</span><span class="op" id="8259540">,</span>&nbsp;<span class="string" id="8259542">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="8259572">,</span>&nbsp;<span class="string" id="8259574">&#34;&#34;</span><span class="op" id="8259576">}</span><span class="op" id="8259577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259580">{</span><span class="string" id="8259581">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="8259601">,</span>&nbsp;<span class="string" id="8259603">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="8259630">,</span>&nbsp;<span class="string" id="8259632">&#34;&#34;</span><span class="op" id="8259634">}</span><span class="op" id="8259635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259638">{</span><span class="string" id="8259639">&#34;::1&#34;</span><span class="op" id="8259644">,</span>&nbsp;<span class="string" id="8259646">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="8259721">,</span>&nbsp;<span class="string" id="8259723">&#34;&#34;</span><span class="op" id="8259725">}</span><span class="op" id="8259726">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259729">{</span><span class="string" id="8259730">&#34;1::&#34;</span><span class="op" id="8259735">,</span>&nbsp;<span class="string" id="8259737">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="8259812">,</span>&nbsp;<span class="string" id="8259814">&#34;&#34;</span><span class="op" id="8259816">}</span><span class="op" id="8259817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259820">{</span><span class="string" id="8259821">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="8259841">,</span>&nbsp;<span class="string" id="8259843">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="8259918">,</span>&nbsp;<span class="string" id="8259920">&#34;&#34;</span><span class="op" id="8259922">}</span><span class="op" id="8259923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259926">{</span><span class="string" id="8259927">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="8259966">,</span>&nbsp;<span class="string" id="8259968">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="8260043">,</span>&nbsp;<span class="string" id="8260045">&#34;&#34;</span><span class="op" id="8260047">}</span><span class="op" id="8260048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260051">{</span><span class="string" id="8260052">&#34;1.2.3&#34;</span><span class="op" id="8260059">,</span>&nbsp;<span class="string" id="8260061">&#34;&#34;</span><span class="op" id="8260063">,</span>&nbsp;<span class="string" id="8260065">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8260087">}</span><span class="op" id="8260088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260091">{</span><span class="string" id="8260092">&#34;1.2.3.4.5&#34;</span><span class="op" id="8260103">,</span>&nbsp;<span class="string" id="8260105">&#34;&#34;</span><span class="op" id="8260107">,</span>&nbsp;<span class="string" id="8260109">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8260131">}</span><span class="op" id="8260132">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260135">{</span><span class="string" id="8260136">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="8260162">,</span>&nbsp;<span class="string" id="8260164">&#34;&#34;</span><span class="op" id="8260166">,</span>&nbsp;<span class="string" id="8260168">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8260190">}</span><span class="op" id="8260191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260194">{</span><span class="string" id="8260195">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="8260226">,</span>&nbsp;<span class="string" id="8260228">&#34;&#34;</span><span class="op" id="8260230">,</span>&nbsp;<span class="string" id="8260232">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8260254">}</span><span class="op" id="8260255">,</span><br>
<span class="lineno"></span><span class="op" id="8260257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8260260">func</span>&nbsp;<span class="ident" id="8260265">TestReverseAddress</span><span class="op" id="8260283">(</span><span class="ident" id="8260284">t</span>&nbsp;<span class="op" id="8260286">*</span><span class="ident" id="8260287">testing</span><span class="op" id="8260294">.</span><span class="ident" id="8260295">T</span><span class="op" id="8260296">)</span>&nbsp;<span class="op" id="8260298">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260301">for</span>&nbsp;<span class="ident" id="8260305">i</span><span class="op" id="8260306">,</span>&nbsp;<span class="ident" id="8260308">tt</span>&nbsp;<span class="op" id="8260311">:=</span>&nbsp;<span class="keyword" id="8260314">range</span>&nbsp;<span class="ident" id="8260320">revAddrTests</span>&nbsp;<span class="op" id="8260333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260337">a</span><span class="op" id="8260338">,</span>&nbsp;<span class="ident" id="8260340">err</span>&nbsp;<span class="op" id="8260344">:=</span>&nbsp;<span class="ident" id="8260347">reverseaddr</span><span class="op" id="8260358">(</span><span class="ident" id="8260359">tt</span><span class="op" id="8260361">.</span><span class="ident" id="8260362">Addr</span><span class="op" id="8260366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260370">if</span>&nbsp;<span class="builtinfunc" id="8260373">len</span><span class="op" id="8260376">(</span><span class="ident" id="8260377">tt</span><span class="op" id="8260379">.</span><span class="ident" id="8260380">ErrPrefix</span><span class="op" id="8260389">)</span>&nbsp;<span class="op" id="8260391">&gt;</span>&nbsp;<span class="num" id="8260393">0</span>&nbsp;<span class="op" id="8260395">&amp;&amp;</span>&nbsp;<span class="ident" id="8260398">err</span>&nbsp;<span class="op" id="8260402">==</span>&nbsp;<span class="ident" id="8260405">nil</span>&nbsp;<span class="op" id="8260409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260414">t</span><span class="op" id="8260415">.</span><span class="ident" id="8260416">Errorf</span><span class="op" id="8260422">(</span><span class="string" id="8260423">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="8260460">,</span>&nbsp;<span class="ident" id="8260462">i</span><span class="op" id="8260463">,</span>&nbsp;<span class="ident" id="8260465">tt</span><span class="op" id="8260467">.</span><span class="ident" id="8260468">ErrPrefix</span><span class="op" id="8260477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260482">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260497">if</span>&nbsp;<span class="builtinfunc" id="8260500">len</span><span class="op" id="8260503">(</span><span class="ident" id="8260504">tt</span><span class="op" id="8260506">.</span><span class="ident" id="8260507">ErrPrefix</span><span class="op" id="8260516">)</span>&nbsp;<span class="op" id="8260518">==</span>&nbsp;<span class="num" id="8260521">0</span>&nbsp;<span class="op" id="8260523">&amp;&amp;</span>&nbsp;<span class="ident" id="8260526">err</span>&nbsp;<span class="op" id="8260530">!=</span>&nbsp;<span class="ident" id="8260533">nil</span>&nbsp;<span class="op" id="8260537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260542">t</span><span class="op" id="8260543">.</span><span class="ident" id="8260544">Errorf</span><span class="op" id="8260550">(</span><span class="string" id="8260551">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="8260588">,</span>&nbsp;<span class="ident" id="8260590">i</span><span class="op" id="8260591">,</span>&nbsp;<span class="ident" id="8260593">err</span><span class="op" id="8260596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260604">if</span>&nbsp;<span class="ident" id="8260607">err</span>&nbsp;<span class="op" id="8260611">!=</span>&nbsp;<span class="ident" id="8260614">nil</span>&nbsp;<span class="op" id="8260618">&amp;&amp;</span>&nbsp;<span class="ident" id="8260621">err</span><span class="op" id="8260624">.</span><span class="op" id="8260625">(</span><span class="op" id="8260626">*</span><span class="ident" id="8260627">DNSError</span><span class="op" id="8260635">)</span><span class="op" id="8260636">.</span><span class="ident" id="8260637">Err</span>&nbsp;<span class="op" id="8260641">!=</span>&nbsp;<span class="ident" id="8260644">tt</span><span class="op" id="8260646">.</span><span class="ident" id="8260647">ErrPrefix</span>&nbsp;<span class="op" id="8260657">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260662">t</span><span class="op" id="8260663">.</span><span class="ident" id="8260664">Errorf</span><span class="op" id="8260670">(</span><span class="string" id="8260671">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="8260716">,</span>&nbsp;<span class="ident" id="8260718">i</span><span class="op" id="8260719">,</span>&nbsp;<span class="ident" id="8260721">tt</span><span class="op" id="8260723">.</span><span class="ident" id="8260724">ErrPrefix</span><span class="op" id="8260733">,</span>&nbsp;<span class="ident" id="8260735">err</span><span class="op" id="8260738">.</span><span class="op" id="8260739">(</span><span class="op" id="8260740">*</span><span class="ident" id="8260741">DNSError</span><span class="op" id="8260749">)</span><span class="op" id="8260750">.</span><span class="ident" id="8260751">Err</span><span class="op" id="8260754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260762">if</span>&nbsp;<span class="ident" id="8260765">a</span>&nbsp;<span class="op" id="8260767">!=</span>&nbsp;<span class="ident" id="8260770">tt</span><span class="op" id="8260772">.</span><span class="ident" id="8260773">Reverse</span>&nbsp;<span class="op" id="8260781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260786">t</span><span class="op" id="8260787">.</span><span class="ident" id="8260788">Errorf</span><span class="op" id="8260794">(</span><span class="string" id="8260795">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="8260839">,</span>&nbsp;<span class="ident" id="8260841">i</span><span class="op" id="8260842">,</span>&nbsp;<span class="ident" id="8260844">tt</span><span class="op" id="8260846">.</span><span class="ident" id="8260847">Reverse</span><span class="op" id="8260854">,</span>&nbsp;<span class="ident" id="8260856">a</span><span class="op" id="8260857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260861">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260864">}</span><br>
<span class="lineno"></span><span class="op" id="8260866">}</span>
</div>
</body>
</html>
