<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5178971">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5179026">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5179080">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5179131">package</span>&nbsp;<span class="ident" id="5179139">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5179150">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5179213">import</span>&nbsp;<span class="op" id="5179220">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5179223">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5179230">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5179241">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5179256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5179259">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5179313">//</span><br>
<span class="lineno"></span><span class="comment" id="5179316">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5179395">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5179445">const</span>&nbsp;<span class="op" id="5179451">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179454">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5179466">int32</span>&nbsp;<span class="op" id="5179472">=</span>&nbsp;<span class="num" id="5179474">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179478">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5179490">int32</span>&nbsp;<span class="op" id="5179496">=</span>&nbsp;<span class="num" id="5179498">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179503">initialBias</span>&nbsp;<span class="builtintype" id="5179515">int32</span>&nbsp;<span class="op" id="5179521">=</span>&nbsp;<span class="num" id="5179523">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179527">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5179539">int32</span>&nbsp;<span class="op" id="5179545">=</span>&nbsp;<span class="num" id="5179547">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179552">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5179564">int32</span>&nbsp;<span class="op" id="5179570">=</span>&nbsp;<span class="num" id="5179572">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179576">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5179588">int32</span>&nbsp;<span class="op" id="5179594">=</span>&nbsp;<span class="num" id="5179596">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179600">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5179612">int32</span>&nbsp;<span class="op" id="5179618">=</span>&nbsp;<span class="num" id="5179620">1</span><br>
<span class="lineno"></span><span class="op" id="5179622">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5179625">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5179703">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5179718">//</span><br>
<span class="lineno"></span><span class="comment" id="5179721">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5179793">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5179873">func</span>&nbsp;<span class="ident" id="5179878">encode</span><span class="op" id="5179884">(</span><span class="ident" id="5179885">prefix</span><span class="op" id="5179891">,</span>&nbsp;<span class="ident" id="5179893">s</span>&nbsp;<span class="builtintype" id="5179895">string</span><span class="op" id="5179901">)</span>&nbsp;<span class="op" id="5179903">(</span><span class="builtintype" id="5179904">string</span><span class="op" id="5179910">,</span>&nbsp;<span class="builtintype" id="5179912">error</span><span class="op" id="5179917">)</span>&nbsp;<span class="op" id="5179919">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5179922">output</span>&nbsp;<span class="op" id="5179929">:=</span>&nbsp;<span class="builtinfunc" id="5179932">make</span><span class="op" id="5179936">(</span><span class="op" id="5179937">[</span><span class="op" id="5179938">]</span><span class="builtintype" id="5179939">byte</span><span class="op" id="5179943">,</span>&nbsp;<span class="builtinfunc" id="5179945">len</span><span class="op" id="5179948">(</span><span class="ident" id="5179949"><a href="/net/http/cookiejar/punycode.go.html#5179885">prefix</a></span><span class="op" id="5179955">)</span><span class="op" id="5179956">,</span>&nbsp;<span class="builtinfunc" id="5179958">len</span><span class="op" id="5179961">(</span><span class="ident" id="5179962"><a href="/net/http/cookiejar/punycode.go.html#5179885">prefix</a></span><span class="op" id="5179968">)</span><span class="op" id="5179969">+</span><span class="num" id="5179970">1</span><span class="op" id="5179971">+</span><span class="num" id="5179972">2</span><span class="op" id="5179973">*</span><span class="builtinfunc" id="5179974">len</span><span class="op" id="5179977">(</span><span class="ident" id="5179978"><a href="/net/http/cookiejar/punycode.go.html#5179893">s</a></span><span class="op" id="5179979">)</span><span class="op" id="5179980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5179983">copy</span><span class="op" id="5179987">(</span><span class="ident" id="5179988"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span><span class="op" id="5179994">,</span>&nbsp;<span class="ident" id="5179996"><a href="/net/http/cookiejar/punycode.go.html#5179885">prefix</a></span><span class="op" id="5180002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180005">delta</span><span class="op" id="5180010">,</span>&nbsp;<span class="ident" id="5180012">n</span><span class="op" id="5180013">,</span>&nbsp;<span class="ident" id="5180015">bias</span>&nbsp;<span class="op" id="5180020">:=</span>&nbsp;<span class="builtintype" id="5180023">int32</span><span class="op" id="5180028">(</span><span class="num" id="5180029">0</span><span class="op" id="5180030">)</span><span class="op" id="5180031">,</span>&nbsp;<span class="ident" id="5180033"><a href="/net/http/cookiejar/punycode.go.html#5179527">initialN</a></span><span class="op" id="5180041">,</span>&nbsp;<span class="ident" id="5180043"><a href="/net/http/cookiejar/punycode.go.html#5179503">initialBias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180056">b</span><span class="op" id="5180057">,</span>&nbsp;<span class="ident" id="5180059">remaining</span>&nbsp;<span class="op" id="5180069">:=</span>&nbsp;<span class="builtintype" id="5180072">int32</span><span class="op" id="5180077">(</span><span class="num" id="5180078">0</span><span class="op" id="5180079">)</span><span class="op" id="5180080">,</span>&nbsp;<span class="builtintype" id="5180082">int32</span><span class="op" id="5180087">(</span><span class="num" id="5180088">0</span><span class="op" id="5180089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180092">for</span>&nbsp;<span class="ident" id="5180096">_</span><span class="op" id="5180097">,</span>&nbsp;<span class="ident" id="5180099">r</span>&nbsp;<span class="op" id="5180101">:=</span>&nbsp;<span class="keyword" id="5180104">range</span>&nbsp;<span class="ident" id="5180110"><a href="/net/http/cookiejar/punycode.go.html#5179893">s</a></span>&nbsp;<span class="op" id="5180112">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180116">if</span>&nbsp;<span class="ident" id="5180119"><a href="/net/http/cookiejar/punycode.go.html#5180099">r</a></span>&nbsp;<span class="op" id="5180121">&lt;</span>&nbsp;<span class="num" id="5180123">0x80</span>&nbsp;<span class="op" id="5180128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180133"><a href="/net/http/cookiejar/punycode.go.html#5180056">b</a></span><span class="op" id="5180134">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180140"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span>&nbsp;<span class="op" id="5180147">=</span>&nbsp;<span class="builtinfunc" id="5180149">append</span><span class="op" id="5180155">(</span><span class="ident" id="5180156"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span><span class="op" id="5180162">,</span>&nbsp;<span class="builtintype" id="5180164">byte</span><span class="op" id="5180168">(</span><span class="ident" id="5180169"><a href="/net/http/cookiejar/punycode.go.html#5180099">r</a></span><span class="op" id="5180170">)</span><span class="op" id="5180171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180175">}</span>&nbsp;<span class="keyword" id="5180177">else</span>&nbsp;<span class="op" id="5180182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180187"><a href="/net/http/cookiejar/punycode.go.html#5180059">remaining</a></span><span class="op" id="5180196">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180207">h</span>&nbsp;<span class="op" id="5180209">:=</span>&nbsp;<span class="ident" id="5180212"><a href="/net/http/cookiejar/punycode.go.html#5180056">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180215">if</span>&nbsp;<span class="ident" id="5180218"><a href="/net/http/cookiejar/punycode.go.html#5180056">b</a></span>&nbsp;<span class="op" id="5180220">&gt;</span>&nbsp;<span class="num" id="5180222">0</span>&nbsp;<span class="op" id="5180224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180228"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span>&nbsp;<span class="op" id="5180235">=</span>&nbsp;<span class="builtinfunc" id="5180237">append</span><span class="op" id="5180243">(</span><span class="ident" id="5180244"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span><span class="op" id="5180250">,</span>&nbsp;<span class="string" id="5180252">&#39;-&#39;</span><span class="op" id="5180255">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180261">for</span>&nbsp;<span class="ident" id="5180265"><a href="/net/http/cookiejar/punycode.go.html#5180059">remaining</a></span>&nbsp;<span class="op" id="5180275">!=</span>&nbsp;<span class="num" id="5180278">0</span>&nbsp;<span class="op" id="5180280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180284">m</span>&nbsp;<span class="op" id="5180286">:=</span>&nbsp;<span class="builtintype" id="5180289">int32</span><span class="op" id="5180294">(</span><span class="num" id="5180295">0x7fffffff</span><span class="op" id="5180305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180309">for</span>&nbsp;<span class="ident" id="5180313">_</span><span class="op" id="5180314">,</span>&nbsp;<span class="ident" id="5180316">r</span>&nbsp;<span class="op" id="5180318">:=</span>&nbsp;<span class="keyword" id="5180321">range</span>&nbsp;<span class="ident" id="5180327"><a href="/net/http/cookiejar/punycode.go.html#5179893">s</a></span>&nbsp;<span class="op" id="5180329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180334">if</span>&nbsp;<span class="ident" id="5180337"><a href="/net/http/cookiejar/punycode.go.html#5180284">m</a></span>&nbsp;<span class="op" id="5180339">&gt;</span>&nbsp;<span class="ident" id="5180341"><a href="/net/http/cookiejar/punycode.go.html#5180316">r</a></span>&nbsp;<span class="op" id="5180343">&amp;&amp;</span>&nbsp;<span class="ident" id="5180346"><a href="/net/http/cookiejar/punycode.go.html#5180316">r</a></span>&nbsp;<span class="op" id="5180348">&gt;=</span>&nbsp;<span class="ident" id="5180351"><a href="/net/http/cookiejar/punycode.go.html#5180012">n</a></span>&nbsp;<span class="op" id="5180353">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180359"><a href="/net/http/cookiejar/punycode.go.html#5180284">m</a></span>&nbsp;<span class="op" id="5180361">=</span>&nbsp;<span class="ident" id="5180363"><a href="/net/http/cookiejar/punycode.go.html#5180316">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180376"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span>&nbsp;<span class="op" id="5180382">+=</span>&nbsp;<span class="op" id="5180385">(</span><span class="ident" id="5180386"><a href="/net/http/cookiejar/punycode.go.html#5180284">m</a></span>&nbsp;<span class="op" id="5180388">-</span>&nbsp;<span class="ident" id="5180390"><a href="/net/http/cookiejar/punycode.go.html#5180012">n</a></span><span class="op" id="5180391">)</span>&nbsp;<span class="op" id="5180393">*</span>&nbsp;<span class="op" id="5180395">(</span><span class="ident" id="5180396"><a href="/net/http/cookiejar/punycode.go.html#5180207">h</a></span>&nbsp;<span class="op" id="5180398">+</span>&nbsp;<span class="num" id="5180400">1</span><span class="op" id="5180401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180405">if</span>&nbsp;<span class="ident" id="5180408"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span>&nbsp;<span class="op" id="5180414">&lt;</span>&nbsp;<span class="num" id="5180416">0</span>&nbsp;<span class="op" id="5180418">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180423">return</span>&nbsp;<span class="string" id="5180430">&#34;&#34;</span><span class="op" id="5180432">,</span>&nbsp;<span class="ident" id="5180434"><a href="/net/http/cookiejar/punycode.go.html#5179223">fmt</a></span><span class="op" id="5180437">.</span><span class="ident" id="5180438">Errorf</span><span class="op" id="5180444">(</span><span class="string" id="5180445">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5180474">,</span>&nbsp;<span class="ident" id="5180476"><a href="/net/http/cookiejar/punycode.go.html#5179893">s</a></span><span class="op" id="5180477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180485"><a href="/net/http/cookiejar/punycode.go.html#5180012">n</a></span>&nbsp;<span class="op" id="5180487">=</span>&nbsp;<span class="ident" id="5180489"><a href="/net/http/cookiejar/punycode.go.html#5180284">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180493">for</span>&nbsp;<span class="ident" id="5180497">_</span><span class="op" id="5180498">,</span>&nbsp;<span class="ident" id="5180500">r</span>&nbsp;<span class="op" id="5180502">:=</span>&nbsp;<span class="keyword" id="5180505">range</span>&nbsp;<span class="ident" id="5180511"><a href="/net/http/cookiejar/punycode.go.html#5179893">s</a></span>&nbsp;<span class="op" id="5180513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180518">if</span>&nbsp;<span class="ident" id="5180521"><a href="/net/http/cookiejar/punycode.go.html#5180500">r</a></span>&nbsp;<span class="op" id="5180523">&lt;</span>&nbsp;<span class="ident" id="5180525"><a href="/net/http/cookiejar/punycode.go.html#5180012">n</a></span>&nbsp;<span class="op" id="5180527">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180533"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span><span class="op" id="5180538">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180545">if</span>&nbsp;<span class="ident" id="5180548"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span>&nbsp;<span class="op" id="5180554">&lt;</span>&nbsp;<span class="num" id="5180556">0</span>&nbsp;<span class="op" id="5180558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180565">return</span>&nbsp;<span class="string" id="5180572">&#34;&#34;</span><span class="op" id="5180574">,</span>&nbsp;<span class="ident" id="5180576"><a href="/net/http/cookiejar/punycode.go.html#5179223">fmt</a></span><span class="op" id="5180579">.</span><span class="ident" id="5180580">Errorf</span><span class="op" id="5180586">(</span><span class="string" id="5180587">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5180616">,</span>&nbsp;<span class="ident" id="5180618"><a href="/net/http/cookiejar/punycode.go.html#5179893">s</a></span><span class="op" id="5180619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180631">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180648">if</span>&nbsp;<span class="ident" id="5180651"><a href="/net/http/cookiejar/punycode.go.html#5180500">r</a></span>&nbsp;<span class="op" id="5180653">&gt;</span>&nbsp;<span class="ident" id="5180655"><a href="/net/http/cookiejar/punycode.go.html#5180012">n</a></span>&nbsp;<span class="op" id="5180657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180663">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180680">q</span>&nbsp;<span class="op" id="5180682">:=</span>&nbsp;<span class="ident" id="5180685"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180694">for</span>&nbsp;<span class="ident" id="5180698">k</span>&nbsp;<span class="op" id="5180700">:=</span>&nbsp;<span class="ident" id="5180703"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span><span class="op" id="5180707">;</span>&nbsp;<span class="op" id="5180709">;</span>&nbsp;<span class="ident" id="5180711"><a href="/net/http/cookiejar/punycode.go.html#5180698">k</a></span>&nbsp;<span class="op" id="5180713">+=</span>&nbsp;<span class="ident" id="5180716"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span>&nbsp;<span class="op" id="5180721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180727">t</span>&nbsp;<span class="op" id="5180729">:=</span>&nbsp;<span class="ident" id="5180732"><a href="/net/http/cookiejar/punycode.go.html#5180698">k</a></span>&nbsp;<span class="op" id="5180734">-</span>&nbsp;<span class="ident" id="5180736"><a href="/net/http/cookiejar/punycode.go.html#5180015">bias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180745">if</span>&nbsp;<span class="ident" id="5180748"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span>&nbsp;<span class="op" id="5180750">&lt;</span>&nbsp;<span class="ident" id="5180752"><a href="/net/http/cookiejar/punycode.go.html#5179600">tmin</a></span>&nbsp;<span class="op" id="5180757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180764"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span>&nbsp;<span class="op" id="5180766">=</span>&nbsp;<span class="ident" id="5180768"><a href="/net/http/cookiejar/punycode.go.html#5179600">tmin</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180777">}</span>&nbsp;<span class="keyword" id="5180779">else</span>&nbsp;<span class="keyword" id="5180784">if</span>&nbsp;<span class="ident" id="5180787"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span>&nbsp;<span class="op" id="5180789">&gt;</span>&nbsp;<span class="ident" id="5180791"><a href="/net/http/cookiejar/punycode.go.html#5179576">tmax</a></span>&nbsp;<span class="op" id="5180796">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180803"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span>&nbsp;<span class="op" id="5180805">=</span>&nbsp;<span class="ident" id="5180807"><a href="/net/http/cookiejar/punycode.go.html#5179576">tmax</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180822">if</span>&nbsp;<span class="ident" id="5180825"><a href="/net/http/cookiejar/punycode.go.html#5180680">q</a></span>&nbsp;<span class="op" id="5180827">&lt;</span>&nbsp;<span class="ident" id="5180829"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span>&nbsp;<span class="op" id="5180831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5180838">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180848">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180854"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span>&nbsp;<span class="op" id="5180861">=</span>&nbsp;<span class="builtinfunc" id="5180863">append</span><span class="op" id="5180869">(</span><span class="ident" id="5180870"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span><span class="op" id="5180876">,</span>&nbsp;<span class="ident" id="5180878"><a href="/net/http/cookiejar/punycode.go.html#5181116">encodeDigit</a></span><span class="op" id="5180889">(</span><span class="ident" id="5180890"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span><span class="op" id="5180891">+</span><span class="op" id="5180892">(</span><span class="ident" id="5180893"><a href="/net/http/cookiejar/punycode.go.html#5180680">q</a></span><span class="op" id="5180894">-</span><span class="ident" id="5180895"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span><span class="op" id="5180896">)</span><span class="op" id="5180897">%</span><span class="op" id="5180898">(</span><span class="ident" id="5180899"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span><span class="op" id="5180903">-</span><span class="ident" id="5180904"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span><span class="op" id="5180905">)</span><span class="op" id="5180906">)</span><span class="op" id="5180907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180913"><a href="/net/http/cookiejar/punycode.go.html#5180680">q</a></span>&nbsp;<span class="op" id="5180915">=</span>&nbsp;<span class="op" id="5180917">(</span><span class="ident" id="5180918"><a href="/net/http/cookiejar/punycode.go.html#5180680">q</a></span>&nbsp;<span class="op" id="5180920">-</span>&nbsp;<span class="ident" id="5180922"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span><span class="op" id="5180923">)</span>&nbsp;<span class="op" id="5180925">/</span>&nbsp;<span class="op" id="5180927">(</span><span class="ident" id="5180928"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span>&nbsp;<span class="op" id="5180933">-</span>&nbsp;<span class="ident" id="5180935"><a href="/net/http/cookiejar/punycode.go.html#5180727">t</a></span><span class="op" id="5180936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5180941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180946"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span>&nbsp;<span class="op" id="5180953">=</span>&nbsp;<span class="builtinfunc" id="5180955">append</span><span class="op" id="5180961">(</span><span class="ident" id="5180962"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span><span class="op" id="5180968">,</span>&nbsp;<span class="ident" id="5180970"><a href="/net/http/cookiejar/punycode.go.html#5181116">encodeDigit</a></span><span class="op" id="5180981">(</span><span class="ident" id="5180982"><a href="/net/http/cookiejar/punycode.go.html#5180680">q</a></span><span class="op" id="5180983">)</span><span class="op" id="5180984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5180989"><a href="/net/http/cookiejar/punycode.go.html#5180015">bias</a></span>&nbsp;<span class="op" id="5180994">=</span>&nbsp;<span class="ident" id="5180996"><a href="/net/http/cookiejar/punycode.go.html#5181419">adapt</a></span><span class="op" id="5181001">(</span><span class="ident" id="5181002"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span><span class="op" id="5181007">,</span>&nbsp;<span class="ident" id="5181009"><a href="/net/http/cookiejar/punycode.go.html#5180207">h</a></span><span class="op" id="5181010">+</span><span class="num" id="5181011">1</span><span class="op" id="5181012">,</span>&nbsp;<span class="ident" id="5181014"><a href="/net/http/cookiejar/punycode.go.html#5180207">h</a></span>&nbsp;<span class="op" id="5181016">==</span>&nbsp;<span class="ident" id="5181019"><a href="/net/http/cookiejar/punycode.go.html#5180056">b</a></span><span class="op" id="5181020">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181025"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span>&nbsp;<span class="op" id="5181031">=</span>&nbsp;<span class="num" id="5181033">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181038"><a href="/net/http/cookiejar/punycode.go.html#5180207">h</a></span><span class="op" id="5181039">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181045"><a href="/net/http/cookiejar/punycode.go.html#5180059">remaining</a></span><span class="op" id="5181054">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5181059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181063"><a href="/net/http/cookiejar/punycode.go.html#5180005">delta</a></span><span class="op" id="5181068">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181073"><a href="/net/http/cookiejar/punycode.go.html#5180012">n</a></span><span class="op" id="5181074">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5181078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181081">return</span>&nbsp;<span class="builtintype" id="5181088">string</span><span class="op" id="5181094">(</span><span class="ident" id="5181095"><a href="/net/http/cookiejar/punycode.go.html#5179922">output</a></span><span class="op" id="5181101">)</span><span class="op" id="5181102">,</span>&nbsp;<span class="ident" id="5181104">nil</span><br>
<span class="lineno"></span><span class="op" id="5181108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5181111">func</span>&nbsp;<span class="ident" id="5181116">encodeDigit</span><span class="op" id="5181127">(</span><span class="ident" id="5181128">digit</span>&nbsp;<span class="builtintype" id="5181134">int32</span><span class="op" id="5181139">)</span>&nbsp;<span class="builtintype" id="5181141">byte</span>&nbsp;<span class="op" id="5181146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181149">switch</span>&nbsp;<span class="op" id="5181156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181159">case</span>&nbsp;<span class="num" id="5181164">0</span>&nbsp;<span class="op" id="5181166">&lt;=</span>&nbsp;<span class="ident" id="5181169"><a href="/net/http/cookiejar/punycode.go.html#5181128">digit</a></span>&nbsp;<span class="op" id="5181175">&amp;&amp;</span>&nbsp;<span class="ident" id="5181178"><a href="/net/http/cookiejar/punycode.go.html#5181128">digit</a></span>&nbsp;<span class="op" id="5181184">&lt;</span>&nbsp;<span class="num" id="5181186">26</span><span class="op" id="5181188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181192">return</span>&nbsp;<span class="builtintype" id="5181199">byte</span><span class="op" id="5181203">(</span><span class="ident" id="5181204"><a href="/net/http/cookiejar/punycode.go.html#5181128">digit</a></span>&nbsp;<span class="op" id="5181210">+</span>&nbsp;<span class="string" id="5181212">&#39;a&#39;</span><span class="op" id="5181215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181218">case</span>&nbsp;<span class="num" id="5181223">26</span>&nbsp;<span class="op" id="5181226">&lt;=</span>&nbsp;<span class="ident" id="5181229"><a href="/net/http/cookiejar/punycode.go.html#5181128">digit</a></span>&nbsp;<span class="op" id="5181235">&amp;&amp;</span>&nbsp;<span class="ident" id="5181238"><a href="/net/http/cookiejar/punycode.go.html#5181128">digit</a></span>&nbsp;<span class="op" id="5181244">&lt;</span>&nbsp;<span class="num" id="5181246">36</span><span class="op" id="5181248">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181252">return</span>&nbsp;<span class="builtintype" id="5181259">byte</span><span class="op" id="5181263">(</span><span class="ident" id="5181264"><a href="/net/http/cookiejar/punycode.go.html#5181128">digit</a></span>&nbsp;<span class="op" id="5181270">+</span>&nbsp;<span class="op" id="5181272">(</span><span class="string" id="5181273">&#39;0&#39;</span>&nbsp;<span class="op" id="5181277">-</span>&nbsp;<span class="num" id="5181279">26</span><span class="op" id="5181281">)</span><span class="op" id="5181282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5181285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5181288">panic</span><span class="op" id="5181293">(</span><span class="string" id="5181294">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5181342">)</span><br>
<span class="lineno"></span><span class="op" id="5181344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5181347">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5181414">func</span>&nbsp;<span class="ident" id="5181419">adapt</span><span class="op" id="5181424">(</span><span class="ident" id="5181425">delta</span><span class="op" id="5181430">,</span>&nbsp;<span class="ident" id="5181432">numPoints</span>&nbsp;<span class="builtintype" id="5181442">int32</span><span class="op" id="5181447">,</span>&nbsp;<span class="ident" id="5181449">firstTime</span>&nbsp;<span class="builtintype" id="5181459">bool</span><span class="op" id="5181463">)</span>&nbsp;<span class="builtintype" id="5181465">int32</span>&nbsp;<span class="op" id="5181471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181474">if</span>&nbsp;<span class="ident" id="5181477"><a href="/net/http/cookiejar/punycode.go.html#5181449">firstTime</a></span>&nbsp;<span class="op" id="5181487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181491"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span>&nbsp;<span class="op" id="5181497">/=</span>&nbsp;<span class="ident" id="5181500"><a href="/net/http/cookiejar/punycode.go.html#5179478">damp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5181506">}</span>&nbsp;<span class="keyword" id="5181508">else</span>&nbsp;<span class="op" id="5181513">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181517"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span>&nbsp;<span class="op" id="5181523">/=</span>&nbsp;<span class="num" id="5181526">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5181529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181532"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span>&nbsp;<span class="op" id="5181538">+=</span>&nbsp;<span class="ident" id="5181541"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span>&nbsp;<span class="op" id="5181547">/</span>&nbsp;<span class="ident" id="5181549"><a href="/net/http/cookiejar/punycode.go.html#5181432">numPoints</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181560">k</span>&nbsp;<span class="op" id="5181562">:=</span>&nbsp;<span class="builtintype" id="5181565">int32</span><span class="op" id="5181570">(</span><span class="num" id="5181571">0</span><span class="op" id="5181572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181575">for</span>&nbsp;<span class="ident" id="5181579"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span>&nbsp;<span class="op" id="5181585">&gt;</span>&nbsp;<span class="op" id="5181587">(</span><span class="op" id="5181588">(</span><span class="ident" id="5181589"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span><span class="op" id="5181593">-</span><span class="ident" id="5181594"><a href="/net/http/cookiejar/punycode.go.html#5179600">tmin</a></span><span class="op" id="5181598">)</span><span class="op" id="5181599">*</span><span class="ident" id="5181600"><a href="/net/http/cookiejar/punycode.go.html#5179576">tmax</a></span><span class="op" id="5181604">)</span><span class="op" id="5181605">/</span><span class="num" id="5181606">2</span>&nbsp;<span class="op" id="5181608">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181612"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span>&nbsp;<span class="op" id="5181618">/=</span>&nbsp;<span class="ident" id="5181621"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span>&nbsp;<span class="op" id="5181626">-</span>&nbsp;<span class="ident" id="5181628"><a href="/net/http/cookiejar/punycode.go.html#5179600">tmin</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5181635"><a href="/net/http/cookiejar/punycode.go.html#5181560">k</a></span>&nbsp;<span class="op" id="5181637">+=</span>&nbsp;<span class="ident" id="5181640"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5181646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5181649">return</span>&nbsp;<span class="ident" id="5181656"><a href="/net/http/cookiejar/punycode.go.html#5181560">k</a></span>&nbsp;<span class="op" id="5181658">+</span>&nbsp;<span class="op" id="5181660">(</span><span class="ident" id="5181661"><a href="/net/http/cookiejar/punycode.go.html#5179454">base</a></span><span class="op" id="5181665">-</span><span class="ident" id="5181666"><a href="/net/http/cookiejar/punycode.go.html#5179600">tmin</a></span><span class="op" id="5181670">+</span><span class="num" id="5181671">1</span><span class="op" id="5181672">)</span><span class="op" id="5181673">*</span><span class="ident" id="5181674"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span><span class="op" id="5181679">/</span><span class="op" id="5181680">(</span><span class="ident" id="5181681"><a href="/net/http/cookiejar/punycode.go.html#5181425">delta</a></span><span class="op" id="5181686">+</span><span class="ident" id="5181687"><a href="/net/http/cookiejar/punycode.go.html#5179552">skew</a></span><span class="op" id="5181691">)</span><br>
<span class="lineno"></span><span class="op" id="5181693">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5181696">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5181773">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5181822">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5181876">const</span>&nbsp;<span class="ident" id="5181882">acePrefix</span>&nbsp;<span class="op" id="5181892">=</span>&nbsp;<span class="string" id="5181894">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5181902">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5181979">//&nbsp;toASCII(&#34;bücher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5182049">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5182083">func</span>&nbsp;<span class="ident" id="5182088">toASCII</span><span class="op" id="5182095">(</span><span class="ident" id="5182096">s</span>&nbsp;<span class="builtintype" id="5182098">string</span><span class="op" id="5182104">)</span>&nbsp;<span class="op" id="5182106">(</span><span class="builtintype" id="5182107">string</span><span class="op" id="5182113">,</span>&nbsp;<span class="builtintype" id="5182115">error</span><span class="op" id="5182120">)</span>&nbsp;<span class="op" id="5182122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182125">if</span>&nbsp;<span class="ident" id="5182128"><a href="/net/http/cookiejar/punycode.go.html#5182396">ascii</a></span><span class="op" id="5182133">(</span><span class="ident" id="5182134"><a href="/net/http/cookiejar/punycode.go.html#5182096">s</a></span><span class="op" id="5182135">)</span>&nbsp;<span class="op" id="5182137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182141">return</span>&nbsp;<span class="ident" id="5182148"><a href="/net/http/cookiejar/punycode.go.html#5182096">s</a></span><span class="op" id="5182149">,</span>&nbsp;<span class="ident" id="5182151">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5182156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5182159">labels</span>&nbsp;<span class="op" id="5182166">:=</span>&nbsp;<span class="ident" id="5182169"><a href="/net/http/cookiejar/punycode.go.html#5179230">strings</a></span><span class="op" id="5182176">.</span><span class="ident" id="5182177">Split</span><span class="op" id="5182182">(</span><span class="ident" id="5182183"><a href="/net/http/cookiejar/punycode.go.html#5182096">s</a></span><span class="op" id="5182184">,</span>&nbsp;<span class="string" id="5182186">&#34;.&#34;</span><span class="op" id="5182189">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182192">for</span>&nbsp;<span class="ident" id="5182196">i</span><span class="op" id="5182197">,</span>&nbsp;<span class="ident" id="5182199">label</span>&nbsp;<span class="op" id="5182205">:=</span>&nbsp;<span class="keyword" id="5182208">range</span>&nbsp;<span class="ident" id="5182214"><a href="/net/http/cookiejar/punycode.go.html#5182159">labels</a></span>&nbsp;<span class="op" id="5182221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182225">if</span>&nbsp;<span class="op" id="5182228">!</span><span class="ident" id="5182229"><a href="/net/http/cookiejar/punycode.go.html#5182396">ascii</a></span><span class="op" id="5182234">(</span><span class="ident" id="5182235"><a href="/net/http/cookiejar/punycode.go.html#5182199">label</a></span><span class="op" id="5182240">)</span>&nbsp;<span class="op" id="5182242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5182247">a</span><span class="op" id="5182248">,</span>&nbsp;<span class="ident" id="5182250">err</span>&nbsp;<span class="op" id="5182254">:=</span>&nbsp;<span class="ident" id="5182257"><a href="/net/http/cookiejar/punycode.go.html#5179878">encode</a></span><span class="op" id="5182263">(</span><span class="ident" id="5182264"><a href="/net/http/cookiejar/punycode.go.html#5181882">acePrefix</a></span><span class="op" id="5182273">,</span>&nbsp;<span class="ident" id="5182275"><a href="/net/http/cookiejar/punycode.go.html#5182199">label</a></span><span class="op" id="5182280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182285">if</span>&nbsp;<span class="ident" id="5182288"><a href="/net/http/cookiejar/punycode.go.html#5182250">err</a></span>&nbsp;<span class="op" id="5182292">!=</span>&nbsp;<span class="ident" id="5182295">nil</span>&nbsp;<span class="op" id="5182299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182305">return</span>&nbsp;<span class="string" id="5182312">&#34;&#34;</span><span class="op" id="5182314">,</span>&nbsp;<span class="ident" id="5182316"><a href="/net/http/cookiejar/punycode.go.html#5182250">err</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5182323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5182328"><a href="/net/http/cookiejar/punycode.go.html#5182159">labels</a></span><span class="op" id="5182334">[</span><span class="ident" id="5182335"><a href="/net/http/cookiejar/punycode.go.html#5182196">i</a></span><span class="op" id="5182336">]</span>&nbsp;<span class="op" id="5182338">=</span>&nbsp;<span class="ident" id="5182340"><a href="/net/http/cookiejar/punycode.go.html#5182247">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5182344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5182347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182350">return</span>&nbsp;<span class="ident" id="5182357"><a href="/net/http/cookiejar/punycode.go.html#5179230">strings</a></span><span class="op" id="5182364">.</span><span class="ident" id="5182365">Join</span><span class="op" id="5182369">(</span><span class="ident" id="5182370"><a href="/net/http/cookiejar/punycode.go.html#5182159">labels</a></span><span class="op" id="5182376">,</span>&nbsp;<span class="string" id="5182378">&#34;.&#34;</span><span class="op" id="5182381">)</span><span class="op" id="5182382">,</span>&nbsp;<span class="ident" id="5182384">nil</span><br>
<span class="lineno">150</span><span class="op" id="5182388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5182391">func</span>&nbsp;<span class="ident" id="5182396">ascii</span><span class="op" id="5182401">(</span><span class="ident" id="5182402">s</span>&nbsp;<span class="builtintype" id="5182404">string</span><span class="op" id="5182410">)</span>&nbsp;<span class="builtintype" id="5182412">bool</span>&nbsp;<span class="op" id="5182417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182420">for</span>&nbsp;<span class="ident" id="5182424">i</span>&nbsp;<span class="op" id="5182426">:=</span>&nbsp;<span class="num" id="5182429">0</span><span class="op" id="5182430">;</span>&nbsp;<span class="ident" id="5182432"><a href="/net/http/cookiejar/punycode.go.html#5182424">i</a></span>&nbsp;<span class="op" id="5182434">&lt;</span>&nbsp;<span class="builtinfunc" id="5182436">len</span><span class="op" id="5182439">(</span><span class="ident" id="5182440"><a href="/net/http/cookiejar/punycode.go.html#5182402">s</a></span><span class="op" id="5182441">)</span><span class="op" id="5182442">;</span>&nbsp;<span class="ident" id="5182444"><a href="/net/http/cookiejar/punycode.go.html#5182424">i</a></span><span class="op" id="5182445">++</span>&nbsp;<span class="op" id="5182448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182452">if</span>&nbsp;<span class="ident" id="5182455"><a href="/net/http/cookiejar/punycode.go.html#5182402">s</a></span><span class="op" id="5182456">[</span><span class="ident" id="5182457"><a href="/net/http/cookiejar/punycode.go.html#5182424">i</a></span><span class="op" id="5182458">]</span>&nbsp;<span class="op" id="5182460">&gt;=</span>&nbsp;<span class="ident" id="5182463"><a href="/net/http/cookiejar/punycode.go.html#5179241">utf8</a></span><span class="op" id="5182467">.</span><span class="ident" id="5182468">RuneSelf</span>&nbsp;<span class="op" id="5182477">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182482">return</span>&nbsp;<span class="ident" id="5182489">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5182497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5182500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5182503">return</span>&nbsp;<span class="ident" id="5182510">true</span><br>
<span class="lineno"></span><span class="op" id="5182515">}</span>
</div>
</body>
</html>
