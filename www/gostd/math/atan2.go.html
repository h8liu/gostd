<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1526075">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1526130">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1526184">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1526235">package</span>&nbsp;<span class="ident" id="1526243">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1526249">//&nbsp;Atan2&nbsp;returns&nbsp;the&nbsp;arc&nbsp;tangent&nbsp;of&nbsp;y/x,&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="1526296">//&nbsp;the&nbsp;signs&nbsp;of&nbsp;the&nbsp;two&nbsp;to&nbsp;determine&nbsp;the&nbsp;quadrant</span><br>
<span class="lineno"></span><span class="comment" id="1526346">//&nbsp;of&nbsp;the&nbsp;return&nbsp;value.</span><br>
<span class="lineno">10</span><span class="comment" id="1526370">//</span><br>
<span class="lineno"></span><span class="comment" id="1526373">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="1526406">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1526429">//&nbsp;&nbsp;&nbsp;&nbspAtan2(NaN,&nbsp;x)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1526452">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+0,&nbsp;x&gt;=0)&nbsp;=&nbsp;+0</span><br>
<span class="lineno">15</span><span class="comment" id="1526476">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-0,&nbsp;x&gt;=0)&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span><span class="comment" id="1526500">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+0,&nbsp;x&lt;=-0)&nbsp;=&nbsp;+Pi</span><br>
<span class="lineno"></span><span class="comment" id="1526526">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-0,&nbsp;x&lt;=-0)&nbsp;=&nbsp;-Pi</span><br>
<span class="lineno"></span><span class="comment" id="1526552">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&gt;0,&nbsp;0)&nbsp;=&nbsp;+Pi/2</span><br>
<span class="lineno"></span><span class="comment" id="1526577">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&lt;0,&nbsp;0)&nbsp;=&nbsp;-Pi/2</span><br>
<span class="lineno">20</span><span class="comment" id="1526602">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+Inf,&nbsp;+Inf)&nbsp;=&nbsp;+Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1526631">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-Inf,&nbsp;+Inf)&nbsp;=&nbsp;-Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1526660">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+Inf,&nbsp;-Inf)&nbsp;=&nbsp;3Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1526689">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-Inf,&nbsp;-Inf)&nbsp;=&nbsp;-3Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1526719">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y,&nbsp;+Inf)&nbsp;=&nbsp;0</span><br>
<span class="lineno">25</span><span class="comment" id="1526741">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&gt;0,&nbsp;-Inf)&nbsp;=&nbsp;+Pi</span><br>
<span class="lineno"></span><span class="comment" id="1526767">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&lt;0,&nbsp;-Inf)&nbsp;=&nbsp;-Pi</span><br>
<span class="lineno"></span><span class="comment" id="1526793">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+Inf,&nbsp;x)&nbsp;=&nbsp;+Pi/2</span><br>
<span class="lineno"></span><span class="comment" id="1526819">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-Inf,&nbsp;x)&nbsp;=&nbsp;-Pi/2</span><br>
<span class="lineno"></span><span class="keyword" id="1526845">func</span>&nbsp;<span class="ident" id="1526850">Atan2</span><span class="op" id="1526855">(</span><span class="ident" id="1526856">y</span><span class="op" id="1526857">,</span>&nbsp;<span class="ident" id="1526859">x</span>&nbsp;<span class="builtintype" id="1526861">float64</span><span class="op" id="1526868">)</span>&nbsp;<span class="builtintype" id="1526870">float64</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="1526879">func</span>&nbsp;<span class="ident" id="1526884">atan2</span><span class="op" id="1526889">(</span><span class="ident" id="1526890">y</span><span class="op" id="1526891">,</span>&nbsp;<span class="ident" id="1526893">x</span>&nbsp;<span class="builtintype" id="1526895">float64</span><span class="op" id="1526902">)</span>&nbsp;<span class="builtintype" id="1526904">float64</span>&nbsp;<span class="op" id="1526912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1526915">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526933">switch</span>&nbsp;<span class="op" id="1526940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526943">case</span>&nbsp;<span class="ident" id="1526948">IsNaN</span><span class="op" id="1526953">(</span><span class="ident" id="1526954">y</span><span class="op" id="1526955">)</span>&nbsp;<span class="op" id="1526957">||</span>&nbsp;<span class="ident" id="1526960">IsNaN</span><span class="op" id="1526965">(</span><span class="ident" id="1526966">x</span><span class="op" id="1526967">)</span><span class="op" id="1526968">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526972">return</span>&nbsp;<span class="ident" id="1526979">NaN</span><span class="op" id="1526982">(</span><span class="op" id="1526983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526986">case</span>&nbsp;<span class="ident" id="1526991">y</span>&nbsp;<span class="op" id="1526993">==</span>&nbsp;<span class="num" id="1526996">0</span><span class="op" id="1526997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527001">if</span>&nbsp;<span class="ident" id="1527004">x</span>&nbsp;<span class="op" id="1527006">&gt;=</span>&nbsp;<span class="num" id="1527009">0</span>&nbsp;<span class="op" id="1527011">&amp;&amp;</span>&nbsp;<span class="op" id="1527014">!</span><span class="ident" id="1527015">Signbit</span><span class="op" id="1527022">(</span><span class="ident" id="1527023">x</span><span class="op" id="1527024">)</span>&nbsp;<span class="op" id="1527026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527031">return</span>&nbsp;<span class="ident" id="1527038">Copysign</span><span class="op" id="1527046">(</span><span class="num" id="1527047">0</span><span class="op" id="1527048">,</span>&nbsp;<span class="ident" id="1527050">y</span><span class="op" id="1527051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527055">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527059">return</span>&nbsp;<span class="ident" id="1527066">Copysign</span><span class="op" id="1527074">(</span><span class="ident" id="1527075">Pi</span><span class="op" id="1527077">,</span>&nbsp;<span class="ident" id="1527079">y</span><span class="op" id="1527080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527083">case</span>&nbsp;<span class="ident" id="1527088">x</span>&nbsp;<span class="op" id="1527090">==</span>&nbsp;<span class="num" id="1527093">0</span><span class="op" id="1527094">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527098">return</span>&nbsp;<span class="ident" id="1527105">Copysign</span><span class="op" id="1527113">(</span><span class="ident" id="1527114">Pi</span><span class="op" id="1527116">/</span><span class="num" id="1527117">2</span><span class="op" id="1527118">,</span>&nbsp;<span class="ident" id="1527120">y</span><span class="op" id="1527121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527124">case</span>&nbsp;<span class="ident" id="1527129">IsInf</span><span class="op" id="1527134">(</span><span class="ident" id="1527135">x</span><span class="op" id="1527136">,</span>&nbsp;<span class="num" id="1527138">0</span><span class="op" id="1527139">)</span><span class="op" id="1527140">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527144">if</span>&nbsp;<span class="ident" id="1527147">IsInf</span><span class="op" id="1527152">(</span><span class="ident" id="1527153">x</span><span class="op" id="1527154">,</span>&nbsp;<span class="num" id="1527156">1</span><span class="op" id="1527157">)</span>&nbsp;<span class="op" id="1527159">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527164">switch</span>&nbsp;<span class="op" id="1527171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527176">case</span>&nbsp;<span class="ident" id="1527181">IsInf</span><span class="op" id="1527186">(</span><span class="ident" id="1527187">y</span><span class="op" id="1527188">,</span>&nbsp;<span class="num" id="1527190">0</span><span class="op" id="1527191">)</span><span class="op" id="1527192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527198">return</span>&nbsp;<span class="ident" id="1527205">Copysign</span><span class="op" id="1527213">(</span><span class="ident" id="1527214">Pi</span><span class="op" id="1527216">/</span><span class="num" id="1527217">4</span><span class="op" id="1527218">,</span>&nbsp;<span class="ident" id="1527220">y</span><span class="op" id="1527221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527226">default</span><span class="op" id="1527233">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527239">return</span>&nbsp;<span class="ident" id="1527246">Copysign</span><span class="op" id="1527254">(</span><span class="num" id="1527255">0</span><span class="op" id="1527256">,</span>&nbsp;<span class="ident" id="1527258">y</span><span class="op" id="1527259">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527272">switch</span>&nbsp;<span class="op" id="1527279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527283">case</span>&nbsp;<span class="ident" id="1527288">IsInf</span><span class="op" id="1527293">(</span><span class="ident" id="1527294">y</span><span class="op" id="1527295">,</span>&nbsp;<span class="num" id="1527297">0</span><span class="op" id="1527298">)</span><span class="op" id="1527299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527304">return</span>&nbsp;<span class="ident" id="1527311">Copysign</span><span class="op" id="1527319">(</span><span class="num" id="1527320">3</span><span class="op" id="1527321">*</span><span class="ident" id="1527322">Pi</span><span class="op" id="1527324">/</span><span class="num" id="1527325">4</span><span class="op" id="1527326">,</span>&nbsp;<span class="ident" id="1527328">y</span><span class="op" id="1527329">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527333">default</span><span class="op" id="1527340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527345">return</span>&nbsp;<span class="ident" id="1527352">Copysign</span><span class="op" id="1527360">(</span><span class="ident" id="1527361">Pi</span><span class="op" id="1527363">,</span>&nbsp;<span class="ident" id="1527365">y</span><span class="op" id="1527366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527373">case</span>&nbsp;<span class="ident" id="1527378">IsInf</span><span class="op" id="1527383">(</span><span class="ident" id="1527384">y</span><span class="op" id="1527385">,</span>&nbsp;<span class="num" id="1527387">0</span><span class="op" id="1527388">)</span><span class="op" id="1527389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527393">return</span>&nbsp;<span class="ident" id="1527400">Copysign</span><span class="op" id="1527408">(</span><span class="ident" id="1527409">Pi</span><span class="op" id="1527411">/</span><span class="num" id="1527412">2</span><span class="op" id="1527413">,</span>&nbsp;<span class="ident" id="1527415">y</span><span class="op" id="1527416">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1527423">//&nbsp;Call&nbsp;atan&nbsp;and&nbsp;determine&nbsp;the&nbsp;quadrant.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1527465">q</span>&nbsp;<span class="op" id="1527467">:=</span>&nbsp;<span class="ident" id="1527470">Atan</span><span class="op" id="1527474">(</span><span class="ident" id="1527475">y</span>&nbsp;<span class="op" id="1527477">/</span>&nbsp;<span class="ident" id="1527479">x</span><span class="op" id="1527480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527483">if</span>&nbsp;<span class="ident" id="1527486">x</span>&nbsp;<span class="op" id="1527488">&lt;</span>&nbsp;<span class="num" id="1527490">0</span>&nbsp;<span class="op" id="1527492">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527496">if</span>&nbsp;<span class="ident" id="1527499">q</span>&nbsp;<span class="op" id="1527501">&lt;=</span>&nbsp;<span class="num" id="1527504">0</span>&nbsp;<span class="op" id="1527506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527511">return</span>&nbsp;<span class="ident" id="1527518">q</span>&nbsp;<span class="op" id="1527520">+</span>&nbsp;<span class="ident" id="1527522">Pi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527531">return</span>&nbsp;<span class="ident" id="1527538">q</span>&nbsp;<span class="op" id="1527540">-</span>&nbsp;<span class="ident" id="1527542">Pi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1527546">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1527549">return</span>&nbsp;<span class="ident" id="1527556">q</span><br>
<span class="lineno"></span><span class="op" id="1527558">}</span>
</div>
</body>
</html>
