<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7023531">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7023586">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7023640">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7023691">package</span>&nbsp;<span class="ident" id="7023699">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7023707">import</span>&nbsp;<span class="op" id="7023714">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7023717">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7023726">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7023743">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7023764">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7023775">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7023785">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7023788">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7023833">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7023860">func</span>&nbsp;<span class="ident" id="7023865">RemoveAll</span><span class="op" id="7023874">(</span><span class="op" id="7023875">)</span>&nbsp;<span class="op" id="7023877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023880">mutex</span><span class="op" id="7023885">.</span><span class="ident" id="7023886">Lock</span><span class="op" id="7023890">(</span><span class="op" id="7023891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7023894">defer</span>&nbsp;<span class="ident" id="7023900">mutex</span><span class="op" id="7023905">.</span><span class="ident" id="7023906">Unlock</span><span class="op" id="7023912">(</span><span class="op" id="7023913">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023916">vars</span>&nbsp;<span class="op" id="7023921">=</span>&nbsp;<span class="builtinfunc" id="7023923">make</span><span class="op" id="7023927">(</span><span class="keyword" id="7023928">map</span><span class="op" id="7023931">[</span><span class="builtintype" id="7023932">string</span><span class="op" id="7023938">]</span><span class="ident" id="7023939">Var</span><span class="op" id="7023942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023945">varKeys</span>&nbsp;<span class="op" id="7023953">=</span>&nbsp;<span class="ident" id="7023955">nil</span><br>
<span class="lineno"></span><span class="op" id="7023959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7023962">func</span>&nbsp;<span class="ident" id="7023967">TestInt</span><span class="op" id="7023974">(</span><span class="ident" id="7023975">t</span>&nbsp;<span class="op" id="7023977">*</span><span class="ident" id="7023978">testing</span><span class="op" id="7023985">.</span><span class="ident" id="7023986">T</span><span class="op" id="7023987">)</span>&nbsp;<span class="op" id="7023989">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023992">RemoveAll</span><span class="op" id="7024001">(</span><span class="op" id="7024002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024005">reqs</span>&nbsp;<span class="op" id="7024010">:=</span>&nbsp;<span class="ident" id="7024013">NewInt</span><span class="op" id="7024019">(</span><span class="string" id="7024020">&#34;requests&#34;</span><span class="op" id="7024030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024033">if</span>&nbsp;<span class="ident" id="7024036">reqs</span><span class="op" id="7024040">.</span><span class="ident" id="7024041">i</span>&nbsp;<span class="op" id="7024043">!=</span>&nbsp;<span class="num" id="7024046">0</span>&nbsp;<span class="op" id="7024048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024052">t</span><span class="op" id="7024053">.</span><span class="ident" id="7024054">Errorf</span><span class="op" id="7024060">(</span><span class="string" id="7024061">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7024082">,</span>&nbsp;<span class="ident" id="7024084">reqs</span><span class="op" id="7024088">.</span><span class="ident" id="7024089">i</span><span class="op" id="7024090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024093">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024096">if</span>&nbsp;<span class="ident" id="7024099">reqs</span>&nbsp;<span class="op" id="7024104">!=</span>&nbsp;<span class="ident" id="7024107">Get</span><span class="op" id="7024110">(</span><span class="string" id="7024111">&#34;requests&#34;</span><span class="op" id="7024121">)</span><span class="op" id="7024122">.</span><span class="op" id="7024123">(</span><span class="op" id="7024124">*</span><span class="ident" id="7024125">Int</span><span class="op" id="7024128">)</span>&nbsp;<span class="op" id="7024130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024134">t</span><span class="op" id="7024135">.</span><span class="ident" id="7024136">Errorf</span><span class="op" id="7024142">(</span><span class="string" id="7024143">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7024158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024165">reqs</span><span class="op" id="7024169">.</span><span class="ident" id="7024170">Add</span><span class="op" id="7024173">(</span><span class="num" id="7024174">1</span><span class="op" id="7024175">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024178">reqs</span><span class="op" id="7024182">.</span><span class="ident" id="7024183">Add</span><span class="op" id="7024186">(</span><span class="num" id="7024187">3</span><span class="op" id="7024188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024191">if</span>&nbsp;<span class="ident" id="7024194">reqs</span><span class="op" id="7024198">.</span><span class="ident" id="7024199">i</span>&nbsp;<span class="op" id="7024201">!=</span>&nbsp;<span class="num" id="7024204">4</span>&nbsp;<span class="op" id="7024206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024210">t</span><span class="op" id="7024211">.</span><span class="ident" id="7024212">Errorf</span><span class="op" id="7024218">(</span><span class="string" id="7024219">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7024240">,</span>&nbsp;<span class="ident" id="7024242">reqs</span><span class="op" id="7024246">.</span><span class="ident" id="7024247">i</span><span class="op" id="7024248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024255">if</span>&nbsp;<span class="ident" id="7024258">s</span>&nbsp;<span class="op" id="7024260">:=</span>&nbsp;<span class="ident" id="7024263">reqs</span><span class="op" id="7024267">.</span><span class="ident" id="7024268">String</span><span class="op" id="7024274">(</span><span class="op" id="7024275">)</span><span class="op" id="7024276">;</span>&nbsp;<span class="ident" id="7024278">s</span>&nbsp;<span class="op" id="7024280">!=</span>&nbsp;<span class="string" id="7024283">&#34;4&#34;</span>&nbsp;<span class="op" id="7024287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024291">t</span><span class="op" id="7024292">.</span><span class="ident" id="7024293">Errorf</span><span class="op" id="7024299">(</span><span class="string" id="7024300">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7024332">,</span>&nbsp;<span class="ident" id="7024334">s</span><span class="op" id="7024335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024342">reqs</span><span class="op" id="7024346">.</span><span class="ident" id="7024347">Set</span><span class="op" id="7024350">(</span><span class="op" id="7024351">-</span><span class="num" id="7024352">2</span><span class="op" id="7024353">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024356">if</span>&nbsp;<span class="ident" id="7024359">reqs</span><span class="op" id="7024363">.</span><span class="ident" id="7024364">i</span>&nbsp;<span class="op" id="7024366">!=</span>&nbsp;<span class="op" id="7024369">-</span><span class="num" id="7024370">2</span>&nbsp;<span class="op" id="7024372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024376">t</span><span class="op" id="7024377">.</span><span class="ident" id="7024378">Errorf</span><span class="op" id="7024384">(</span><span class="string" id="7024385">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7024407">,</span>&nbsp;<span class="ident" id="7024409">reqs</span><span class="op" id="7024413">.</span><span class="ident" id="7024414">i</span><span class="op" id="7024415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024418">}</span><br>
<span class="lineno"></span><span class="op" id="7024420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7024423">func</span>&nbsp;<span class="ident" id="7024428">TestFloat</span><span class="op" id="7024437">(</span><span class="ident" id="7024438">t</span>&nbsp;<span class="op" id="7024440">*</span><span class="ident" id="7024441">testing</span><span class="op" id="7024448">.</span><span class="ident" id="7024449">T</span><span class="op" id="7024450">)</span>&nbsp;<span class="op" id="7024452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024455">RemoveAll</span><span class="op" id="7024464">(</span><span class="op" id="7024465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024468">reqs</span>&nbsp;<span class="op" id="7024473">:=</span>&nbsp;<span class="ident" id="7024476">NewFloat</span><span class="op" id="7024484">(</span><span class="string" id="7024485">&#34;requests-float&#34;</span><span class="op" id="7024501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024504">if</span>&nbsp;<span class="ident" id="7024507">reqs</span><span class="op" id="7024511">.</span><span class="ident" id="7024512">f</span>&nbsp;<span class="op" id="7024514">!=</span>&nbsp;<span class="num" id="7024517">0.0</span>&nbsp;<span class="op" id="7024521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024525">t</span><span class="op" id="7024526">.</span><span class="ident" id="7024527">Errorf</span><span class="op" id="7024533">(</span><span class="string" id="7024534">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7024555">,</span>&nbsp;<span class="ident" id="7024557">reqs</span><span class="op" id="7024561">.</span><span class="ident" id="7024562">f</span><span class="op" id="7024563">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024569">if</span>&nbsp;<span class="ident" id="7024572">reqs</span>&nbsp;<span class="op" id="7024577">!=</span>&nbsp;<span class="ident" id="7024580">Get</span><span class="op" id="7024583">(</span><span class="string" id="7024584">&#34;requests-float&#34;</span><span class="op" id="7024600">)</span><span class="op" id="7024601">.</span><span class="op" id="7024602">(</span><span class="op" id="7024603">*</span><span class="ident" id="7024604">Float</span><span class="op" id="7024609">)</span>&nbsp;<span class="op" id="7024611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024615">t</span><span class="op" id="7024616">.</span><span class="ident" id="7024617">Errorf</span><span class="op" id="7024623">(</span><span class="string" id="7024624">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7024639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024646">reqs</span><span class="op" id="7024650">.</span><span class="ident" id="7024651">Add</span><span class="op" id="7024654">(</span><span class="num" id="7024655">1.5</span><span class="op" id="7024658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024661">reqs</span><span class="op" id="7024665">.</span><span class="ident" id="7024666">Add</span><span class="op" id="7024669">(</span><span class="num" id="7024670">1.25</span><span class="op" id="7024674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024677">if</span>&nbsp;<span class="ident" id="7024680">reqs</span><span class="op" id="7024684">.</span><span class="ident" id="7024685">f</span>&nbsp;<span class="op" id="7024687">!=</span>&nbsp;<span class="num" id="7024690">2.75</span>&nbsp;<span class="op" id="7024695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024699">t</span><span class="op" id="7024700">.</span><span class="ident" id="7024701">Errorf</span><span class="op" id="7024707">(</span><span class="string" id="7024708">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7024732">,</span>&nbsp;<span class="ident" id="7024734">reqs</span><span class="op" id="7024738">.</span><span class="ident" id="7024739">f</span><span class="op" id="7024740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024743">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024747">if</span>&nbsp;<span class="ident" id="7024750">s</span>&nbsp;<span class="op" id="7024752">:=</span>&nbsp;<span class="ident" id="7024755">reqs</span><span class="op" id="7024759">.</span><span class="ident" id="7024760">String</span><span class="op" id="7024766">(</span><span class="op" id="7024767">)</span><span class="op" id="7024768">;</span>&nbsp;<span class="ident" id="7024770">s</span>&nbsp;<span class="op" id="7024772">!=</span>&nbsp;<span class="string" id="7024775">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7024782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024786">t</span><span class="op" id="7024787">.</span><span class="ident" id="7024788">Errorf</span><span class="op" id="7024794">(</span><span class="string" id="7024795">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7024830">,</span>&nbsp;<span class="ident" id="7024832">s</span><span class="op" id="7024833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024840">reqs</span><span class="op" id="7024844">.</span><span class="ident" id="7024845">Add</span><span class="op" id="7024848">(</span><span class="op" id="7024849">-</span><span class="num" id="7024850">2</span><span class="op" id="7024851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7024854">if</span>&nbsp;<span class="ident" id="7024857">reqs</span><span class="op" id="7024861">.</span><span class="ident" id="7024862">f</span>&nbsp;<span class="op" id="7024864">!=</span>&nbsp;<span class="num" id="7024867">0.75</span>&nbsp;<span class="op" id="7024872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024876">t</span><span class="op" id="7024877">.</span><span class="ident" id="7024878">Errorf</span><span class="op" id="7024884">(</span><span class="string" id="7024885">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7024909">,</span>&nbsp;<span class="ident" id="7024911">reqs</span><span class="op" id="7024915">.</span><span class="ident" id="7024916">f</span><span class="op" id="7024917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7024920">}</span><br>
<span class="lineno"></span><span class="op" id="7024922">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7024925">func</span>&nbsp;<span class="ident" id="7024930">TestString</span><span class="op" id="7024940">(</span><span class="ident" id="7024941">t</span>&nbsp;<span class="op" id="7024943">*</span><span class="ident" id="7024944">testing</span><span class="op" id="7024951">.</span><span class="ident" id="7024952">T</span><span class="op" id="7024953">)</span>&nbsp;<span class="op" id="7024955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024958">RemoveAll</span><span class="op" id="7024967">(</span><span class="op" id="7024968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7024971">name</span>&nbsp;<span class="op" id="7024976">:=</span>&nbsp;<span class="ident" id="7024979">NewString</span><span class="op" id="7024988">(</span><span class="string" id="7024989">&#34;my-name&#34;</span><span class="op" id="7024998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025001">if</span>&nbsp;<span class="ident" id="7025004">name</span><span class="op" id="7025008">.</span><span class="ident" id="7025009">s</span>&nbsp;<span class="op" id="7025011">!=</span>&nbsp;<span class="string" id="7025014">&#34;&#34;</span>&nbsp;<span class="op" id="7025017">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025021">t</span><span class="op" id="7025022">.</span><span class="ident" id="7025023">Errorf</span><span class="op" id="7025029">(</span><span class="string" id="7025030">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7025054">,</span>&nbsp;<span class="ident" id="7025056">name</span><span class="op" id="7025060">.</span><span class="ident" id="7025061">s</span><span class="op" id="7025062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7025065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025069">name</span><span class="op" id="7025073">.</span><span class="ident" id="7025074">Set</span><span class="op" id="7025077">(</span><span class="string" id="7025078">&#34;Mike&#34;</span><span class="op" id="7025084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025087">if</span>&nbsp;<span class="ident" id="7025090">name</span><span class="op" id="7025094">.</span><span class="ident" id="7025095">s</span>&nbsp;<span class="op" id="7025097">!=</span>&nbsp;<span class="string" id="7025100">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7025107">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025111">t</span><span class="op" id="7025112">.</span><span class="ident" id="7025113">Errorf</span><span class="op" id="7025119">(</span><span class="string" id="7025120">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7025148">,</span>&nbsp;<span class="ident" id="7025150">name</span><span class="op" id="7025154">.</span><span class="ident" id="7025155">s</span><span class="op" id="7025156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7025159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025163">if</span>&nbsp;<span class="ident" id="7025166">s</span>&nbsp;<span class="op" id="7025168">:=</span>&nbsp;<span class="ident" id="7025171">name</span><span class="op" id="7025175">.</span><span class="ident" id="7025176">String</span><span class="op" id="7025182">(</span><span class="op" id="7025183">)</span><span class="op" id="7025184">;</span>&nbsp;<span class="ident" id="7025186">s</span>&nbsp;<span class="op" id="7025188">!=</span>&nbsp;<span class="string" id="7025191">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7025202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025206">t</span><span class="op" id="7025207">.</span><span class="ident" id="7025208">Errorf</span><span class="op" id="7025214">(</span><span class="string" id="7025215">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7025254">,</span>&nbsp;<span class="ident" id="7025256">s</span><span class="op" id="7025257">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7025260">}</span><br>
<span class="lineno"></span><span class="op" id="7025262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7025265">func</span>&nbsp;<span class="ident" id="7025270">TestMapCounter</span><span class="op" id="7025284">(</span><span class="ident" id="7025285">t</span>&nbsp;<span class="op" id="7025287">*</span><span class="ident" id="7025288">testing</span><span class="op" id="7025295">.</span><span class="ident" id="7025296">T</span><span class="op" id="7025297">)</span>&nbsp;<span class="op" id="7025299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025302">RemoveAll</span><span class="op" id="7025311">(</span><span class="op" id="7025312">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025315">colors</span>&nbsp;<span class="op" id="7025322">:=</span>&nbsp;<span class="ident" id="7025325">NewMap</span><span class="op" id="7025331">(</span><span class="string" id="7025332">&#34;bike-shed-colors&#34;</span><span class="op" id="7025350">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025354">colors</span><span class="op" id="7025360">.</span><span class="ident" id="7025361">Add</span><span class="op" id="7025364">(</span><span class="string" id="7025365">&#34;red&#34;</span><span class="op" id="7025370">,</span>&nbsp;<span class="num" id="7025372">1</span><span class="op" id="7025373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025376">colors</span><span class="op" id="7025382">.</span><span class="ident" id="7025383">Add</span><span class="op" id="7025386">(</span><span class="string" id="7025387">&#34;red&#34;</span><span class="op" id="7025392">,</span>&nbsp;<span class="num" id="7025394">2</span><span class="op" id="7025395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025398">colors</span><span class="op" id="7025404">.</span><span class="ident" id="7025405">Add</span><span class="op" id="7025408">(</span><span class="string" id="7025409">&#34;blue&#34;</span><span class="op" id="7025415">,</span>&nbsp;<span class="num" id="7025417">4</span><span class="op" id="7025418">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025421">colors</span><span class="op" id="7025427">.</span><span class="ident" id="7025428">AddFloat</span><span class="op" id="7025436">(</span><span class="string" id="7025437">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7025453">,</span>&nbsp;<span class="num" id="7025455">4.125</span><span class="op" id="7025460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025463">if</span>&nbsp;<span class="ident" id="7025466">x</span>&nbsp;<span class="op" id="7025468">:=</span>&nbsp;<span class="ident" id="7025471">colors</span><span class="op" id="7025477">.</span><span class="ident" id="7025478">m</span><span class="op" id="7025479">[</span><span class="string" id="7025480">&#34;red&#34;</span><span class="op" id="7025485">]</span><span class="op" id="7025486">.</span><span class="op" id="7025487">(</span><span class="op" id="7025488">*</span><span class="ident" id="7025489">Int</span><span class="op" id="7025492">)</span><span class="op" id="7025493">.</span><span class="ident" id="7025494">i</span><span class="op" id="7025495">;</span>&nbsp;<span class="ident" id="7025497">x</span>&nbsp;<span class="op" id="7025499">!=</span>&nbsp;<span class="num" id="7025502">3</span>&nbsp;<span class="op" id="7025504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025508">t</span><span class="op" id="7025509">.</span><span class="ident" id="7025510">Errorf</span><span class="op" id="7025516">(</span><span class="string" id="7025517">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7025549">,</span>&nbsp;<span class="ident" id="7025551">x</span><span class="op" id="7025552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7025555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025558">if</span>&nbsp;<span class="ident" id="7025561">x</span>&nbsp;<span class="op" id="7025563">:=</span>&nbsp;<span class="ident" id="7025566">colors</span><span class="op" id="7025572">.</span><span class="ident" id="7025573">m</span><span class="op" id="7025574">[</span><span class="string" id="7025575">&#34;blue&#34;</span><span class="op" id="7025581">]</span><span class="op" id="7025582">.</span><span class="op" id="7025583">(</span><span class="op" id="7025584">*</span><span class="ident" id="7025585">Int</span><span class="op" id="7025588">)</span><span class="op" id="7025589">.</span><span class="ident" id="7025590">i</span><span class="op" id="7025591">;</span>&nbsp;<span class="ident" id="7025593">x</span>&nbsp;<span class="op" id="7025595">!=</span>&nbsp;<span class="num" id="7025598">4</span>&nbsp;<span class="op" id="7025600">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025604">t</span><span class="op" id="7025605">.</span><span class="ident" id="7025606">Errorf</span><span class="op" id="7025612">(</span><span class="string" id="7025613">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7025646">,</span>&nbsp;<span class="ident" id="7025648">x</span><span class="op" id="7025649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7025652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025655">if</span>&nbsp;<span class="ident" id="7025658">x</span>&nbsp;<span class="op" id="7025660">:=</span>&nbsp;<span class="ident" id="7025663">colors</span><span class="op" id="7025669">.</span><span class="ident" id="7025670">m</span><span class="op" id="7025671">[</span><span class="string" id="7025672">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7025688">]</span><span class="op" id="7025689">.</span><span class="op" id="7025690">(</span><span class="op" id="7025691">*</span><span class="ident" id="7025692">Float</span><span class="op" id="7025697">)</span><span class="op" id="7025698">.</span><span class="ident" id="7025699">f</span><span class="op" id="7025700">;</span>&nbsp;<span class="ident" id="7025702">x</span>&nbsp;<span class="op" id="7025704">!=</span>&nbsp;<span class="num" id="7025707">4.125</span>&nbsp;<span class="op" id="7025713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025717">t</span><span class="op" id="7025718">.</span><span class="ident" id="7025719">Errorf</span><span class="op" id="7025725">(</span><span class="string" id="7025726">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7025771">,</span>&nbsp;<span class="ident" id="7025773">x</span><span class="op" id="7025774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7025777">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7025781">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7025834">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025883">s</span>&nbsp;<span class="op" id="7025885">:=</span>&nbsp;<span class="ident" id="7025888">colors</span><span class="op" id="7025894">.</span><span class="ident" id="7025895">String</span><span class="op" id="7025901">(</span><span class="op" id="7025902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025905">var</span>&nbsp;<span class="ident" id="7025909">j</span>&nbsp;<span class="keyword" id="7025911">interface</span><span class="op" id="7025920">{</span><span class="op" id="7025921">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025924">err</span>&nbsp;<span class="op" id="7025928">:=</span>&nbsp;<span class="ident" id="7025931">json</span><span class="op" id="7025935">.</span><span class="ident" id="7025936">Unmarshal</span><span class="op" id="7025945">(</span><span class="op" id="7025946">[</span><span class="op" id="7025947">]</span><span class="builtintype" id="7025948">byte</span><span class="op" id="7025952">(</span><span class="ident" id="7025953">s</span><span class="op" id="7025954">)</span><span class="op" id="7025955">,</span>&nbsp;<span class="op" id="7025957">&amp;</span><span class="ident" id="7025958">j</span><span class="op" id="7025959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7025962">if</span>&nbsp;<span class="ident" id="7025965">err</span>&nbsp;<span class="op" id="7025969">!=</span>&nbsp;<span class="ident" id="7025972">nil</span>&nbsp;<span class="op" id="7025976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025980">t</span><span class="op" id="7025981">.</span><span class="ident" id="7025982">Errorf</span><span class="op" id="7025988">(</span><span class="string" id="7025989">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7026027">,</span>&nbsp;<span class="ident" id="7026029">err</span><span class="op" id="7026032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026038">m</span><span class="op" id="7026039">,</span>&nbsp;<span class="ident" id="7026041">ok</span>&nbsp;<span class="op" id="7026044">:=</span>&nbsp;<span class="ident" id="7026047">j</span><span class="op" id="7026048">.</span><span class="op" id="7026049">(</span><span class="keyword" id="7026050">map</span><span class="op" id="7026053">[</span><span class="builtintype" id="7026054">string</span><span class="op" id="7026060">]</span><span class="keyword" id="7026061">interface</span><span class="op" id="7026070">{</span><span class="op" id="7026071">}</span><span class="op" id="7026072">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026075">if</span>&nbsp;<span class="op" id="7026078">!</span><span class="ident" id="7026079">ok</span>&nbsp;<span class="op" id="7026082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026086">t</span><span class="op" id="7026087">.</span><span class="ident" id="7026088">Error</span><span class="op" id="7026093">(</span><span class="string" id="7026094">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7026133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026139">red</span>&nbsp;<span class="op" id="7026143">:=</span>&nbsp;<span class="ident" id="7026146">m</span><span class="op" id="7026147">[</span><span class="string" id="7026148">&#34;red&#34;</span><span class="op" id="7026153">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026156">x</span><span class="op" id="7026157">,</span>&nbsp;<span class="ident" id="7026159">ok</span>&nbsp;<span class="op" id="7026162">:=</span>&nbsp;<span class="ident" id="7026165">red</span><span class="op" id="7026168">.</span><span class="op" id="7026169">(</span><span class="builtintype" id="7026170">float64</span><span class="op" id="7026177">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026180">if</span>&nbsp;<span class="op" id="7026183">!</span><span class="ident" id="7026184">ok</span>&nbsp;<span class="op" id="7026187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026191">t</span><span class="op" id="7026192">.</span><span class="ident" id="7026193">Error</span><span class="op" id="7026198">(</span><span class="string" id="7026199">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7026228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026234">if</span>&nbsp;<span class="ident" id="7026237">x</span>&nbsp;<span class="op" id="7026239">!=</span>&nbsp;<span class="num" id="7026242">3</span>&nbsp;<span class="op" id="7026244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026248">t</span><span class="op" id="7026249">.</span><span class="ident" id="7026250">Errorf</span><span class="op" id="7026256">(</span><span class="string" id="7026257">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7026275">,</span>&nbsp;<span class="ident" id="7026277">x</span><span class="op" id="7026278">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026281">}</span><br>
<span class="lineno"></span><span class="op" id="7026283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7026286">func</span>&nbsp;<span class="ident" id="7026291">TestFunc</span><span class="op" id="7026299">(</span><span class="ident" id="7026300">t</span>&nbsp;<span class="op" id="7026302">*</span><span class="ident" id="7026303">testing</span><span class="op" id="7026310">.</span><span class="ident" id="7026311">T</span><span class="op" id="7026312">)</span>&nbsp;<span class="op" id="7026314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026317">RemoveAll</span><span class="op" id="7026326">(</span><span class="op" id="7026327">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026330">var</span>&nbsp;<span class="ident" id="7026334">x</span>&nbsp;<span class="keyword" id="7026336">interface</span><span class="op" id="7026345">{</span><span class="op" id="7026346">}</span>&nbsp;<span class="op" id="7026348">=</span>&nbsp;<span class="op" id="7026350">[</span><span class="op" id="7026351">]</span><span class="builtintype" id="7026352">string</span><span class="op" id="7026358">{</span><span class="string" id="7026359">&#34;a&#34;</span><span class="op" id="7026362">,</span>&nbsp;<span class="string" id="7026364">&#34;b&#34;</span><span class="op" id="7026367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026370">f</span>&nbsp;<span class="op" id="7026372">:=</span>&nbsp;<span class="ident" id="7026375">Func</span><span class="op" id="7026379">(</span><span class="keyword" id="7026380">func</span><span class="op" id="7026384">(</span><span class="op" id="7026385">)</span>&nbsp;<span class="keyword" id="7026387">interface</span><span class="op" id="7026396">{</span><span class="op" id="7026397">}</span>&nbsp;<span class="op" id="7026399">{</span>&nbsp;<span class="keyword" id="7026401">return</span>&nbsp;<span class="ident" id="7026408">x</span>&nbsp;<span class="op" id="7026410">}</span><span class="op" id="7026411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026414">if</span>&nbsp;<span class="ident" id="7026417">s</span><span class="op" id="7026418">,</span>&nbsp;<span class="ident" id="7026420">exp</span>&nbsp;<span class="op" id="7026424">:=</span>&nbsp;<span class="ident" id="7026427">f</span><span class="op" id="7026428">.</span><span class="ident" id="7026429">String</span><span class="op" id="7026435">(</span><span class="op" id="7026436">)</span><span class="op" id="7026437">,</span>&nbsp;<span class="string" id="7026439">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7026450">;</span>&nbsp;<span class="ident" id="7026452">s</span>&nbsp;<span class="op" id="7026454">!=</span>&nbsp;<span class="ident" id="7026457">exp</span>&nbsp;<span class="op" id="7026461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026465">t</span><span class="op" id="7026466">.</span><span class="ident" id="7026467">Errorf</span><span class="op" id="7026473">(</span><span class="string" id="7026474">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7026500">,</span>&nbsp;<span class="ident" id="7026502">s</span><span class="op" id="7026503">,</span>&nbsp;<span class="ident" id="7026505">exp</span><span class="op" id="7026508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026511">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026515">x</span>&nbsp;<span class="op" id="7026517">=</span>&nbsp;<span class="num" id="7026519">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026523">if</span>&nbsp;<span class="ident" id="7026526">s</span><span class="op" id="7026527">,</span>&nbsp;<span class="ident" id="7026529">exp</span>&nbsp;<span class="op" id="7026533">:=</span>&nbsp;<span class="ident" id="7026536">f</span><span class="op" id="7026537">.</span><span class="ident" id="7026538">String</span><span class="op" id="7026544">(</span><span class="op" id="7026545">)</span><span class="op" id="7026546">,</span>&nbsp;<span class="string" id="7026548">`17`</span><span class="op" id="7026552">;</span>&nbsp;<span class="ident" id="7026554">s</span>&nbsp;<span class="op" id="7026556">!=</span>&nbsp;<span class="ident" id="7026559">exp</span>&nbsp;<span class="op" id="7026563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026567">t</span><span class="op" id="7026568">.</span><span class="ident" id="7026569">Errorf</span><span class="op" id="7026575">(</span><span class="string" id="7026576">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7026602">,</span>&nbsp;<span class="ident" id="7026604">s</span><span class="op" id="7026605">,</span>&nbsp;<span class="ident" id="7026607">exp</span><span class="op" id="7026610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026613">}</span><br>
<span class="lineno">145</span><span class="op" id="7026615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7026618">func</span>&nbsp;<span class="ident" id="7026623">TestHandler</span><span class="op" id="7026634">(</span><span class="ident" id="7026635">t</span>&nbsp;<span class="op" id="7026637">*</span><span class="ident" id="7026638">testing</span><span class="op" id="7026645">.</span><span class="ident" id="7026646">T</span><span class="op" id="7026647">)</span>&nbsp;<span class="op" id="7026649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026652">RemoveAll</span><span class="op" id="7026661">(</span><span class="op" id="7026662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026665">m</span>&nbsp;<span class="op" id="7026667">:=</span>&nbsp;<span class="ident" id="7026670">NewMap</span><span class="op" id="7026676">(</span><span class="string" id="7026677">&#34;map1&#34;</span><span class="op" id="7026683">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026686">m</span><span class="op" id="7026687">.</span><span class="ident" id="7026688">Add</span><span class="op" id="7026691">(</span><span class="string" id="7026692">&#34;a&#34;</span><span class="op" id="7026695">,</span>&nbsp;<span class="num" id="7026697">1</span><span class="op" id="7026698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026701">m</span><span class="op" id="7026702">.</span><span class="ident" id="7026703">Add</span><span class="op" id="7026706">(</span><span class="string" id="7026707">&#34;z&#34;</span><span class="op" id="7026710">,</span>&nbsp;<span class="num" id="7026712">2</span><span class="op" id="7026713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026716">m2</span>&nbsp;<span class="op" id="7026719">:=</span>&nbsp;<span class="ident" id="7026722">NewMap</span><span class="op" id="7026728">(</span><span class="string" id="7026729">&#34;map2&#34;</span><span class="op" id="7026735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026738">for</span>&nbsp;<span class="ident" id="7026742">i</span>&nbsp;<span class="op" id="7026744">:=</span>&nbsp;<span class="num" id="7026747">0</span><span class="op" id="7026748">;</span>&nbsp;<span class="ident" id="7026750">i</span>&nbsp;<span class="op" id="7026752">&lt;</span>&nbsp;<span class="num" id="7026754">9</span><span class="op" id="7026755">;</span>&nbsp;<span class="ident" id="7026757">i</span><span class="op" id="7026758">++</span>&nbsp;<span class="op" id="7026761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026765">m2</span><span class="op" id="7026767">.</span><span class="ident" id="7026768">Add</span><span class="op" id="7026771">(</span><span class="ident" id="7026772">strconv</span><span class="op" id="7026779">.</span><span class="ident" id="7026780">Itoa</span><span class="op" id="7026784">(</span><span class="ident" id="7026785">i</span><span class="op" id="7026786">)</span><span class="op" id="7026787">,</span>&nbsp;<span class="ident" id="7026789">int64</span><span class="op" id="7026794">(</span><span class="ident" id="7026795">i</span><span class="op" id="7026796">)</span><span class="op" id="7026797">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026803">rr</span>&nbsp;<span class="op" id="7026806">:=</span>&nbsp;<span class="ident" id="7026809">httptest</span><span class="op" id="7026817">.</span><span class="ident" id="7026818">NewRecorder</span><span class="op" id="7026829">(</span><span class="op" id="7026830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026833">rr</span><span class="op" id="7026835">.</span><span class="ident" id="7026836">Body</span>&nbsp;<span class="op" id="7026841">=</span>&nbsp;<span class="builtinfunc" id="7026843">new</span><span class="op" id="7026846">(</span><span class="ident" id="7026847">bytes</span><span class="op" id="7026852">.</span><span class="ident" id="7026853">Buffer</span><span class="op" id="7026859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026862">expvarHandler</span><span class="op" id="7026875">(</span><span class="ident" id="7026876">rr</span><span class="op" id="7026878">,</span>&nbsp;<span class="ident" id="7026880">nil</span><span class="op" id="7026883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026886">want</span>&nbsp;<span class="op" id="7026891">:=</span>&nbsp;<span class="string" id="7026894">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7027009">if</span>&nbsp;<span class="ident" id="7027012">got</span>&nbsp;<span class="op" id="7027016">:=</span>&nbsp;<span class="ident" id="7027019">rr</span><span class="op" id="7027021">.</span><span class="ident" id="7027022">Body</span><span class="op" id="7027026">.</span><span class="ident" id="7027027">String</span><span class="op" id="7027033">(</span><span class="op" id="7027034">)</span><span class="op" id="7027035">;</span>&nbsp;<span class="ident" id="7027037">got</span>&nbsp;<span class="op" id="7027041">!=</span>&nbsp;<span class="ident" id="7027044">want</span>&nbsp;<span class="op" id="7027049">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7027053">t</span><span class="op" id="7027054">.</span><span class="ident" id="7027055">Errorf</span><span class="op" id="7027061">(</span><span class="string" id="7027062">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7027098">,</span>&nbsp;<span class="ident" id="7027100">got</span><span class="op" id="7027103">,</span>&nbsp;<span class="ident" id="7027105">want</span><span class="op" id="7027109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027112">}</span><br>
<span class="lineno"></span><span class="op" id="7027114">}</span>
</div>
</body>
</html>
