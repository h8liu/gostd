<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html" class="current">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2385444">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2385499">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2385553">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2385604">//&nbsp;Binary&nbsp;to&nbsp;decimal&nbsp;floating&nbsp;point&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2385652">//&nbsp;Algorithm:</span><br>
<span class="lineno"></span><span class="comment" id="2385666">//&nbsp;&nbsp;&nbsp;1)&nbsp;store&nbsp;mantissa&nbsp;in&nbsp;multiprecision&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2385715">//&nbsp;&nbsp;&nbsp;2)&nbsp;shift&nbsp;decimal&nbsp;by&nbsp;exponent</span><br>
<span class="lineno"></span><span class="comment" id="2385749">//&nbsp;&nbsp;&nbsp;3)&nbsp;read&nbsp;digits&nbsp;out&nbsp;&amp;&nbsp;format</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2385783">package</span>&nbsp;<span class="ident" id="2385791">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2385800">import</span>&nbsp;<span class="string" id="2385807">&#34;math&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2385815">//&nbsp;TODO:&nbsp;move&nbsp;elsewhere?</span><br>
<span class="lineno"></span><span class="keyword" id="2385840">type</span>&nbsp;<span class="ident" id="2385845">floatInfo</span>&nbsp;<span class="keyword" id="2385855">struct</span>&nbsp;<span class="op" id="2385862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2385865">mantbits</span>&nbsp;<span class="builtintype" id="2385874">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2385880">expbits</span>&nbsp;&nbsp;<span class="builtintype" id="2385889">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2385895">bias</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2385904">int</span><br>
<span class="lineno">20</span><span class="op" id="2385908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2385911">var</span>&nbsp;<span class="ident" id="2385915">float32info</span>&nbsp;<span class="op" id="2385927">=</span>&nbsp;<span class="ident" id="2385929"><a href="/gostd/strconv/ftoa.go.html#2385845">floatInfo</a></span><span class="op" id="2385938">{</span><span class="num" id="2385939">23</span><span class="op" id="2385941">,</span>&nbsp;<span class="num" id="2385943">8</span><span class="op" id="2385944">,</span>&nbsp;<span class="op" id="2385946">-</span><span class="num" id="2385947">127</span><span class="op" id="2385950">}</span><br>
<span class="lineno"></span><span class="keyword" id="2385952">var</span>&nbsp;<span class="ident" id="2385956">float64info</span>&nbsp;<span class="op" id="2385968">=</span>&nbsp;<span class="ident" id="2385970"><a href="/gostd/strconv/ftoa.go.html#2385845">floatInfo</a></span><span class="op" id="2385979">{</span><span class="num" id="2385980">52</span><span class="op" id="2385982">,</span>&nbsp;<span class="num" id="2385984">11</span><span class="op" id="2385986">,</span>&nbsp;<span class="op" id="2385988">-</span><span class="num" id="2385989">1023</span><span class="op" id="2385993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="2385996">//&nbsp;FormatFloat&nbsp;converts&nbsp;the&nbsp;floating-point&nbsp;number&nbsp;f&nbsp;to&nbsp;a&nbsp;string,</span><br>
<span class="lineno"></span><span class="comment" id="2386061">//&nbsp;according&nbsp;to&nbsp;the&nbsp;format&nbsp;fmt&nbsp;and&nbsp;precision&nbsp;prec.&nbsp;&nbsp;It&nbsp;rounds&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2386127">//&nbsp;result&nbsp;assuming&nbsp;that&nbsp;the&nbsp;original&nbsp;was&nbsp;obtained&nbsp;from&nbsp;a&nbsp;floating-point</span><br>
<span class="lineno"></span><span class="comment" id="2386199">//&nbsp;value&nbsp;of&nbsp;bitSize&nbsp;bits&nbsp;(32&nbsp;for&nbsp;float32,&nbsp;64&nbsp;for&nbsp;float64).</span><br>
<span class="lineno"></span><span class="comment" id="2386258">//</span><br>
<span class="lineno">30</span><span class="comment" id="2386261">//&nbsp;The&nbsp;format&nbsp;fmt&nbsp;is&nbsp;one&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2386289">//&nbsp;&#39;b&#39;&nbsp;(-ddddp±ddd,&nbsp;a&nbsp;binary&nbsp;exponent),</span><br>
<span class="lineno"></span><span class="comment" id="2386330">//&nbsp;&#39;e&#39;&nbsp;(-d.dddde±dd,&nbsp;a&nbsp;decimal&nbsp;exponent),</span><br>
<span class="lineno"></span><span class="comment" id="2386373">//&nbsp;&#39;E&#39;&nbsp;(-d.ddddE±dd,&nbsp;a&nbsp;decimal&nbsp;exponent),</span><br>
<span class="lineno"></span><span class="comment" id="2386416">//&nbsp;&#39;f&#39;&nbsp;(-ddd.dddd,&nbsp;no&nbsp;exponent),</span><br>
<span class="lineno">35</span><span class="comment" id="2386449">//&nbsp;&#39;g&#39;&nbsp;(&#39;e&#39;&nbsp;for&nbsp;large&nbsp;exponents,&nbsp;&#39;f&#39;&nbsp;otherwise),&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2386501">//&nbsp;&#39;G&#39;&nbsp;(&#39;E&#39;&nbsp;for&nbsp;large&nbsp;exponents,&nbsp;&#39;f&#39;&nbsp;otherwise).</span><br>
<span class="lineno"></span><span class="comment" id="2386550">//</span><br>
<span class="lineno"></span><span class="comment" id="2386553">//&nbsp;The&nbsp;precision&nbsp;prec&nbsp;controls&nbsp;the&nbsp;number&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="2386605">//&nbsp;(excluding&nbsp;the&nbsp;exponent)&nbsp;printed&nbsp;by&nbsp;the&nbsp;&#39;e&#39;,&nbsp;&#39;E&#39;,&nbsp;&#39;f&#39;,&nbsp;&#39;g&#39;,&nbsp;and&nbsp;&#39;G&#39;&nbsp;formats.</span><br>
<span class="lineno">40</span><span class="comment" id="2386685">//&nbsp;For&nbsp;&#39;e&#39;,&nbsp;&#39;E&#39;,&nbsp;and&nbsp;&#39;f&#39;&nbsp;it&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;digits&nbsp;after&nbsp;the&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span><span class="comment" id="2386762">//&nbsp;For&nbsp;&#39;g&#39;&nbsp;and&nbsp;&#39;G&#39;&nbsp;it&nbsp;is&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;digits.</span><br>
<span class="lineno"></span><span class="comment" id="2386815">//&nbsp;The&nbsp;special&nbsp;precision&nbsp;-1&nbsp;uses&nbsp;the&nbsp;smallest&nbsp;number&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="2386878">//&nbsp;necessary&nbsp;such&nbsp;that&nbsp;ParseFloat&nbsp;will&nbsp;return&nbsp;f&nbsp;exactly.</span><br>
<span class="lineno"></span><span class="keyword" id="2386935">func</span>&nbsp;<span class="ident" id="2386940">FormatFloat</span><span class="op" id="2386951">(</span><span class="ident" id="2386952">f</span>&nbsp;<span class="builtintype" id="2386954">float64</span><span class="op" id="2386961">,</span>&nbsp;<span class="ident" id="2386963">fmt</span>&nbsp;<span class="builtintype" id="2386967">byte</span><span class="op" id="2386971">,</span>&nbsp;<span class="ident" id="2386973">prec</span><span class="op" id="2386977">,</span>&nbsp;<span class="ident" id="2386979">bitSize</span>&nbsp;<span class="builtintype" id="2386987">int</span><span class="op" id="2386990">)</span>&nbsp;<span class="builtintype" id="2386992">string</span>&nbsp;<span class="op" id="2386999">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387002">return</span>&nbsp;<span class="builtintype" id="2387009">string</span><span class="op" id="2387015">(</span><span class="ident" id="2387016"><a href="/gostd/strconv/ftoa.go.html#2387370">genericFtoa</a></span><span class="op" id="2387027">(</span><span class="builtinfunc" id="2387028">make</span><span class="op" id="2387032">(</span><span class="op" id="2387033">[</span><span class="op" id="2387034">]</span><span class="builtintype" id="2387035">byte</span><span class="op" id="2387039">,</span>&nbsp;<span class="num" id="2387041">0</span><span class="op" id="2387042">,</span>&nbsp;<span class="ident" id="2387044"><a href="/gostd/strconv/ftoa.go.html#2396746">max</a></span><span class="op" id="2387047">(</span><span class="ident" id="2387048"><a href="/gostd/strconv/ftoa.go.html#2386973">prec</a></span><span class="op" id="2387052">+</span><span class="num" id="2387053">4</span><span class="op" id="2387054">,</span>&nbsp;<span class="num" id="2387056">24</span><span class="op" id="2387058">)</span><span class="op" id="2387059">)</span><span class="op" id="2387060">,</span>&nbsp;<span class="ident" id="2387062"><a href="/gostd/strconv/ftoa.go.html#2386952">f</a></span><span class="op" id="2387063">,</span>&nbsp;<span class="ident" id="2387065"><a href="/gostd/strconv/ftoa.go.html#2386963">fmt</a></span><span class="op" id="2387068">,</span>&nbsp;<span class="ident" id="2387070"><a href="/gostd/strconv/ftoa.go.html#2386973">prec</a></span><span class="op" id="2387074">,</span>&nbsp;<span class="ident" id="2387076"><a href="/gostd/strconv/ftoa.go.html#2386979">bitSize</a></span><span class="op" id="2387083">)</span><span class="op" id="2387084">)</span><br>
<span class="lineno"></span><span class="op" id="2387086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2387089">//&nbsp;AppendFloat&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;floating-point&nbsp;number&nbsp;f,</span><br>
<span class="lineno"></span><span class="comment" id="2387160">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatFloat,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">50</span><span class="keyword" id="2387232">func</span>&nbsp;<span class="ident" id="2387237">AppendFloat</span><span class="op" id="2387248">(</span><span class="ident" id="2387249">dst</span>&nbsp;<span class="op" id="2387253">[</span><span class="op" id="2387254">]</span><span class="builtintype" id="2387255">byte</span><span class="op" id="2387259">,</span>&nbsp;<span class="ident" id="2387261">f</span>&nbsp;<span class="builtintype" id="2387263">float64</span><span class="op" id="2387270">,</span>&nbsp;<span class="ident" id="2387272">fmt</span>&nbsp;<span class="builtintype" id="2387276">byte</span><span class="op" id="2387280">,</span>&nbsp;<span class="ident" id="2387282">prec</span>&nbsp;<span class="builtintype" id="2387287">int</span><span class="op" id="2387290">,</span>&nbsp;<span class="ident" id="2387292">bitSize</span>&nbsp;<span class="builtintype" id="2387300">int</span><span class="op" id="2387303">)</span>&nbsp;<span class="op" id="2387305">[</span><span class="op" id="2387306">]</span><span class="builtintype" id="2387307">byte</span>&nbsp;<span class="op" id="2387312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387315">return</span>&nbsp;<span class="ident" id="2387322"><a href="/gostd/strconv/ftoa.go.html#2387370">genericFtoa</a></span><span class="op" id="2387333">(</span><span class="ident" id="2387334"><a href="/gostd/strconv/ftoa.go.html#2387249">dst</a></span><span class="op" id="2387337">,</span>&nbsp;<span class="ident" id="2387339"><a href="/gostd/strconv/ftoa.go.html#2387261">f</a></span><span class="op" id="2387340">,</span>&nbsp;<span class="ident" id="2387342"><a href="/gostd/strconv/ftoa.go.html#2387272">fmt</a></span><span class="op" id="2387345">,</span>&nbsp;<span class="ident" id="2387347"><a href="/gostd/strconv/ftoa.go.html#2387282">prec</a></span><span class="op" id="2387351">,</span>&nbsp;<span class="ident" id="2387353"><a href="/gostd/strconv/ftoa.go.html#2387292">bitSize</a></span><span class="op" id="2387360">)</span><br>
<span class="lineno"></span><span class="op" id="2387362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2387365">func</span>&nbsp;<span class="ident" id="2387370">genericFtoa</span><span class="op" id="2387381">(</span><span class="ident" id="2387382">dst</span>&nbsp;<span class="op" id="2387386">[</span><span class="op" id="2387387">]</span><span class="builtintype" id="2387388">byte</span><span class="op" id="2387392">,</span>&nbsp;<span class="ident" id="2387394">val</span>&nbsp;<span class="builtintype" id="2387398">float64</span><span class="op" id="2387405">,</span>&nbsp;<span class="ident" id="2387407">fmt</span>&nbsp;<span class="builtintype" id="2387411">byte</span><span class="op" id="2387415">,</span>&nbsp;<span class="ident" id="2387417">prec</span><span class="op" id="2387421">,</span>&nbsp;<span class="ident" id="2387423">bitSize</span>&nbsp;<span class="builtintype" id="2387431">int</span><span class="op" id="2387434">)</span>&nbsp;<span class="op" id="2387436">[</span><span class="op" id="2387437">]</span><span class="builtintype" id="2387438">byte</span>&nbsp;<span class="op" id="2387443">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387446">var</span>&nbsp;<span class="ident" id="2387450">bits</span>&nbsp;<span class="builtintype" id="2387455">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387463">var</span>&nbsp;<span class="ident" id="2387467">flt</span>&nbsp;<span class="op" id="2387471">*</span><span class="ident" id="2387472"><a href="/gostd/strconv/ftoa.go.html#2385845">floatInfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387483">switch</span>&nbsp;<span class="ident" id="2387490"><a href="/gostd/strconv/ftoa.go.html#2387423">bitSize</a></span>&nbsp;<span class="op" id="2387498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387501">case</span>&nbsp;<span class="num" id="2387506">32</span><span class="op" id="2387508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387512"><a href="/gostd/strconv/ftoa.go.html#2387450">bits</a></span>&nbsp;<span class="op" id="2387517">=</span>&nbsp;<span class="builtintype" id="2387519">uint64</span><span class="op" id="2387525">(</span><span class="ident" id="2387526"><a href="/gostd/strconv/ftoa.go.html#2385807">math</a></span><span class="op" id="2387530">.</span><span class="ident" id="2387531"><a href="/gostd/math/unsafe.go.html#2339725">Float32bits</a></span><span class="op" id="2387542">(</span><span class="builtintype" id="2387543">float32</span><span class="op" id="2387550">(</span><span class="ident" id="2387551"><a href="/gostd/strconv/ftoa.go.html#2387394">val</a></span><span class="op" id="2387554">)</span><span class="op" id="2387555">)</span><span class="op" id="2387556">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387560"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span>&nbsp;<span class="op" id="2387564">=</span>&nbsp;<span class="op" id="2387566">&amp;</span><span class="ident" id="2387567"><a href="/gostd/strconv/ftoa.go.html#2385915">float32info</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387580">case</span>&nbsp;<span class="num" id="2387585">64</span><span class="op" id="2387587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387591"><a href="/gostd/strconv/ftoa.go.html#2387450">bits</a></span>&nbsp;<span class="op" id="2387596">=</span>&nbsp;<span class="ident" id="2387598"><a href="/gostd/strconv/ftoa.go.html#2385807">math</a></span><span class="op" id="2387602">.</span><span class="ident" id="2387603"><a href="/gostd/math/unsafe.go.html#2340061">Float64bits</a></span><span class="op" id="2387614">(</span><span class="ident" id="2387615"><a href="/gostd/strconv/ftoa.go.html#2387394">val</a></span><span class="op" id="2387618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387622"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span>&nbsp;<span class="op" id="2387626">=</span>&nbsp;<span class="op" id="2387628">&amp;</span><span class="ident" id="2387629"><a href="/gostd/strconv/ftoa.go.html#2385956">float64info</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387642">default</span><span class="op" id="2387649">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2387653">panic</span><span class="op" id="2387658">(</span><span class="string" id="2387659">&#34;strconv:&nbsp;illegal&nbsp;AppendFloat/FormatFloat&nbsp;bitSize&#34;</span><span class="op" id="2387709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2387712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387716">neg</span>&nbsp;<span class="op" id="2387720">:=</span>&nbsp;<span class="ident" id="2387723"><a href="/gostd/strconv/ftoa.go.html#2387450">bits</a></span><span class="op" id="2387727">&gt;&gt;</span><span class="op" id="2387729">(</span><span class="ident" id="2387730"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2387733">.</span><span class="ident" id="2387734"><a href="/gostd/strconv/ftoa.go.html#2385880">expbits</a></span><span class="op" id="2387741">+</span><span class="ident" id="2387742"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2387745">.</span><span class="ident" id="2387746"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2387754">)</span>&nbsp;<span class="op" id="2387756">!=</span>&nbsp;<span class="num" id="2387759">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387762">exp</span>&nbsp;<span class="op" id="2387766">:=</span>&nbsp;<span class="builtintype" id="2387769">int</span><span class="op" id="2387772">(</span><span class="ident" id="2387773"><a href="/gostd/strconv/ftoa.go.html#2387450">bits</a></span><span class="op" id="2387777">&gt;&gt;</span><span class="ident" id="2387779"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2387782">.</span><span class="ident" id="2387783"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2387791">)</span>&nbsp;<span class="op" id="2387793">&amp;</span>&nbsp;<span class="op" id="2387795">(</span><span class="num" id="2387796">1</span><span class="op" id="2387797">&lt;&lt;</span><span class="ident" id="2387799"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2387802">.</span><span class="ident" id="2387803"><a href="/gostd/strconv/ftoa.go.html#2385880">expbits</a></span>&nbsp;<span class="op" id="2387811">-</span>&nbsp;<span class="num" id="2387813">1</span><span class="op" id="2387814">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387817">mant</span>&nbsp;<span class="op" id="2387822">:=</span>&nbsp;<span class="ident" id="2387825"><a href="/gostd/strconv/ftoa.go.html#2387450">bits</a></span>&nbsp;<span class="op" id="2387830">&amp;</span>&nbsp;<span class="op" id="2387832">(</span><span class="builtintype" id="2387833">uint64</span><span class="op" id="2387839">(</span><span class="num" id="2387840">1</span><span class="op" id="2387841">)</span><span class="op" id="2387842">&lt;&lt;</span><span class="ident" id="2387844"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2387847">.</span><span class="ident" id="2387848"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span>&nbsp;<span class="op" id="2387857">-</span>&nbsp;<span class="num" id="2387859">1</span><span class="op" id="2387860">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387864">switch</span>&nbsp;<span class="ident" id="2387871"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span>&nbsp;<span class="op" id="2387875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387878">case</span>&nbsp;<span class="num" id="2387883">1</span><span class="op" id="2387884">&lt;&lt;</span><span class="ident" id="2387886"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2387889">.</span><span class="ident" id="2387890"><a href="/gostd/strconv/ftoa.go.html#2385880">expbits</a></span>&nbsp;<span class="op" id="2387898">-</span>&nbsp;<span class="num" id="2387900">1</span><span class="op" id="2387901">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2387905">//&nbsp;Inf,&nbsp;NaN</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387919">var</span>&nbsp;<span class="ident" id="2387923">s</span>&nbsp;<span class="builtintype" id="2387925">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387934">switch</span>&nbsp;<span class="op" id="2387941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387945">case</span>&nbsp;<span class="ident" id="2387950"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span>&nbsp;<span class="op" id="2387955">!=</span>&nbsp;<span class="num" id="2387958">0</span><span class="op" id="2387959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387964"><a href="/gostd/strconv/ftoa.go.html#2387923">s</a></span>&nbsp;<span class="op" id="2387966">=</span>&nbsp;<span class="string" id="2387968">&#34;NaN&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2387976">case</span>&nbsp;<span class="ident" id="2387981"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2387984">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2387989"><a href="/gostd/strconv/ftoa.go.html#2387923">s</a></span>&nbsp;<span class="op" id="2387991">=</span>&nbsp;<span class="string" id="2387993">&#34;-Inf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388002">default</span><span class="op" id="2388009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388014"><a href="/gostd/strconv/ftoa.go.html#2387923">s</a></span>&nbsp;<span class="op" id="2388016">=</span>&nbsp;<span class="string" id="2388018">&#34;+Inf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388031">return</span>&nbsp;<span class="builtinfunc" id="2388038">append</span><span class="op" id="2388044">(</span><span class="ident" id="2388045"><a href="/gostd/strconv/ftoa.go.html#2387382">dst</a></span><span class="op" id="2388048">,</span>&nbsp;<span class="ident" id="2388050"><a href="/gostd/strconv/ftoa.go.html#2387923">s</a></span><span class="op" id="2388051">...</span><span class="op" id="2388054">)</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388058">case</span>&nbsp;<span class="num" id="2388063">0</span><span class="op" id="2388064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388068">//&nbsp;denormalized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388086"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span><span class="op" id="2388089">++</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388094">default</span><span class="op" id="2388101">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388105">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388131"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span>&nbsp;<span class="op" id="2388136">|=</span>&nbsp;<span class="builtintype" id="2388139">uint64</span><span class="op" id="2388145">(</span><span class="num" id="2388146">1</span><span class="op" id="2388147">)</span>&nbsp;<span class="op" id="2388149">&lt;&lt;</span>&nbsp;<span class="ident" id="2388152"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2388155">.</span><span class="ident" id="2388156"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388169"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span>&nbsp;<span class="op" id="2388173">+=</span>&nbsp;<span class="ident" id="2388176"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2388179">.</span><span class="ident" id="2388180"><a href="/gostd/strconv/ftoa.go.html#2385895">bias</a></span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388187">//&nbsp;Pick&nbsp;off&nbsp;easy&nbsp;binary&nbsp;format.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388220">if</span>&nbsp;<span class="ident" id="2388223"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span>&nbsp;<span class="op" id="2388227">==</span>&nbsp;<span class="string" id="2388230">&#39;b&#39;</span>&nbsp;<span class="op" id="2388234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388238">return</span>&nbsp;<span class="ident" id="2388245"><a href="/gostd/strconv/ftoa.go.html#2396255">fmtB</a></span><span class="op" id="2388249">(</span><span class="ident" id="2388250"><a href="/gostd/strconv/ftoa.go.html#2387382">dst</a></span><span class="op" id="2388253">,</span>&nbsp;<span class="ident" id="2388255"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2388258">,</span>&nbsp;<span class="ident" id="2388260"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span><span class="op" id="2388264">,</span>&nbsp;<span class="ident" id="2388266"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span><span class="op" id="2388269">,</span>&nbsp;<span class="ident" id="2388271"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2388274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388277">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388281">if</span>&nbsp;<span class="op" id="2388284">!</span><span class="ident" id="2388285"><a href="/gostd/strconv/atof.go.html#2341848">optimize</a></span>&nbsp;<span class="op" id="2388294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388298">return</span>&nbsp;<span class="ident" id="2388305"><a href="/gostd/strconv/ftoa.go.html#2389553">bigFtoa</a></span><span class="op" id="2388312">(</span><span class="ident" id="2388313"><a href="/gostd/strconv/ftoa.go.html#2387382">dst</a></span><span class="op" id="2388316">,</span>&nbsp;<span class="ident" id="2388318"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span><span class="op" id="2388322">,</span>&nbsp;<span class="ident" id="2388324"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span><span class="op" id="2388327">,</span>&nbsp;<span class="ident" id="2388329"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2388332">,</span>&nbsp;<span class="ident" id="2388334"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span><span class="op" id="2388338">,</span>&nbsp;<span class="ident" id="2388340"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span><span class="op" id="2388343">,</span>&nbsp;<span class="ident" id="2388345"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2388348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388355">var</span>&nbsp;<span class="ident" id="2388359">digs</span>&nbsp;<span class="ident" id="2388364"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388378">ok</span>&nbsp;<span class="op" id="2388381">:=</span>&nbsp;<span class="builtintype" id="2388384">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388391">//&nbsp;Negative&nbsp;precision&nbsp;means&nbsp;&#34;only&nbsp;as&nbsp;much&nbsp;as&nbsp;needed&nbsp;to&nbsp;be&nbsp;exact.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388458">shortest</span>&nbsp;<span class="op" id="2388467">:=</span>&nbsp;<span class="ident" id="2388470"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span>&nbsp;<span class="op" id="2388475">&lt;</span>&nbsp;<span class="num" id="2388477">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388480">if</span>&nbsp;<span class="ident" id="2388483"><a href="/gostd/strconv/ftoa.go.html#2388458">shortest</a></span>&nbsp;<span class="op" id="2388492">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388496">//&nbsp;Try&nbsp;Grisu3&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388523">f</span>&nbsp;<span class="op" id="2388525">:=</span>&nbsp;<span class="builtinfunc" id="2388528">new</span><span class="op" id="2388531">(</span><span class="ident" id="2388532"><a href="/gostd/strconv/extfloat.go.html#2365602">extFloat</a></span><span class="op" id="2388540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388544">lower</span><span class="op" id="2388549">,</span>&nbsp;<span class="ident" id="2388551">upper</span>&nbsp;<span class="op" id="2388557">:=</span>&nbsp;<span class="ident" id="2388560"><a href="/gostd/strconv/ftoa.go.html#2388523">f</a></span><span class="op" id="2388561">.</span><span class="ident" id="2388562"><a href="/gostd/strconv/extfloat.go.html#2371646">AssignComputeBounds</a></span><span class="op" id="2388581">(</span><span class="ident" id="2388582"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span><span class="op" id="2388586">,</span>&nbsp;<span class="ident" id="2388588"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span><span class="op" id="2388591">,</span>&nbsp;<span class="ident" id="2388593"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2388596">,</span>&nbsp;<span class="ident" id="2388598"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2388601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388605">var</span>&nbsp;<span class="ident" id="2388609">buf</span>&nbsp;<span class="op" id="2388613">[</span><span class="num" id="2388614">32</span><span class="op" id="2388616">]</span><span class="builtintype" id="2388617">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388624"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2388628">.</span><span class="ident" id="2388629"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span>&nbsp;<span class="op" id="2388631">=</span>&nbsp;<span class="ident" id="2388633"><a href="/gostd/strconv/ftoa.go.html#2388609">buf</a></span><span class="op" id="2388636">[</span><span class="op" id="2388637">:</span><span class="op" id="2388638">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388642"><a href="/gostd/strconv/ftoa.go.html#2388378">ok</a></span>&nbsp;<span class="op" id="2388645">=</span>&nbsp;<span class="ident" id="2388647"><a href="/gostd/strconv/ftoa.go.html#2388523">f</a></span><span class="op" id="2388648">.</span><span class="ident" id="2388649"><a href="/gostd/strconv/extfloat.go.html#2381628">ShortestDecimal</a></span><span class="op" id="2388664">(</span><span class="op" id="2388665">&amp;</span><span class="ident" id="2388666"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2388670">,</span>&nbsp;<span class="op" id="2388672">&amp;</span><span class="ident" id="2388673"><a href="/gostd/strconv/ftoa.go.html#2388544">lower</a></span><span class="op" id="2388678">,</span>&nbsp;<span class="op" id="2388680">&amp;</span><span class="ident" id="2388681"><a href="/gostd/strconv/ftoa.go.html#2388551">upper</a></span><span class="op" id="2388686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388690">if</span>&nbsp;<span class="op" id="2388693">!</span><span class="ident" id="2388694"><a href="/gostd/strconv/ftoa.go.html#2388378">ok</a></span>&nbsp;<span class="op" id="2388697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388702">return</span>&nbsp;<span class="ident" id="2388709"><a href="/gostd/strconv/ftoa.go.html#2389553">bigFtoa</a></span><span class="op" id="2388716">(</span><span class="ident" id="2388717"><a href="/gostd/strconv/ftoa.go.html#2387382">dst</a></span><span class="op" id="2388720">,</span>&nbsp;<span class="ident" id="2388722"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span><span class="op" id="2388726">,</span>&nbsp;<span class="ident" id="2388728"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span><span class="op" id="2388731">,</span>&nbsp;<span class="ident" id="2388733"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2388736">,</span>&nbsp;<span class="ident" id="2388738"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span><span class="op" id="2388742">,</span>&nbsp;<span class="ident" id="2388744"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span><span class="op" id="2388747">,</span>&nbsp;<span class="ident" id="2388749"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2388752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388760">//&nbsp;Precision&nbsp;for&nbsp;shortest&nbsp;representation&nbsp;mode.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388809">switch</span>&nbsp;<span class="ident" id="2388816"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span>&nbsp;<span class="op" id="2388820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388824">case</span>&nbsp;<span class="string" id="2388829">&#39;e&#39;</span><span class="op" id="2388832">,</span>&nbsp;<span class="string" id="2388834">&#39;E&#39;</span><span class="op" id="2388837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388842"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span>&nbsp;<span class="op" id="2388847">=</span>&nbsp;<span class="ident" id="2388849"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2388853">.</span><span class="ident" id="2388854"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2388857">-</span>&nbsp;<span class="num" id="2388859">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388863">case</span>&nbsp;<span class="string" id="2388868">&#39;f&#39;</span><span class="op" id="2388871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388876"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span>&nbsp;<span class="op" id="2388881">=</span>&nbsp;<span class="ident" id="2388883"><a href="/gostd/strconv/ftoa.go.html#2396746">max</a></span><span class="op" id="2388886">(</span><span class="ident" id="2388887"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2388891">.</span><span class="ident" id="2388892"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><span class="op" id="2388894">-</span><span class="ident" id="2388895"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2388899">.</span><span class="ident" id="2388900"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span><span class="op" id="2388902">,</span>&nbsp;<span class="num" id="2388904">0</span><span class="op" id="2388905">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2388909">case</span>&nbsp;<span class="string" id="2388914">&#39;g&#39;</span><span class="op" id="2388917">,</span>&nbsp;<span class="string" id="2388919">&#39;G&#39;</span><span class="op" id="2388922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2388927"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span>&nbsp;<span class="op" id="2388932">=</span>&nbsp;<span class="ident" id="2388934"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2388938">.</span><span class="ident" id="2388939"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2388947">}</span>&nbsp;<span class="keyword" id="2388949">else</span>&nbsp;<span class="keyword" id="2388954">if</span>&nbsp;<span class="ident" id="2388957"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span>&nbsp;<span class="op" id="2388961">!=</span>&nbsp;<span class="string" id="2388964">&#39;f&#39;</span>&nbsp;<span class="op" id="2388968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2388972">//&nbsp;Fixed&nbsp;number&nbsp;of&nbsp;digits.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389001">digits</span>&nbsp;<span class="op" id="2389008">:=</span>&nbsp;<span class="ident" id="2389011"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389018">switch</span>&nbsp;<span class="ident" id="2389025"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span>&nbsp;<span class="op" id="2389029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389033">case</span>&nbsp;<span class="string" id="2389038">&#39;e&#39;</span><span class="op" id="2389041">,</span>&nbsp;<span class="string" id="2389043">&#39;E&#39;</span><span class="op" id="2389046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389051"><a href="/gostd/strconv/ftoa.go.html#2389001">digits</a></span><span class="op" id="2389057">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389062">case</span>&nbsp;<span class="string" id="2389067">&#39;g&#39;</span><span class="op" id="2389070">,</span>&nbsp;<span class="string" id="2389072">&#39;G&#39;</span><span class="op" id="2389075">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389080">if</span>&nbsp;<span class="ident" id="2389083"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span>&nbsp;<span class="op" id="2389088">==</span>&nbsp;<span class="num" id="2389091">0</span>&nbsp;<span class="op" id="2389093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389099"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span>&nbsp;<span class="op" id="2389104">=</span>&nbsp;<span class="num" id="2389106">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2389111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389116"><a href="/gostd/strconv/ftoa.go.html#2389001">digits</a></span>&nbsp;<span class="op" id="2389123">=</span>&nbsp;<span class="ident" id="2389125"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2389132">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389136">if</span>&nbsp;<span class="ident" id="2389139"><a href="/gostd/strconv/ftoa.go.html#2389001">digits</a></span>&nbsp;<span class="op" id="2389146">&lt;=</span>&nbsp;<span class="num" id="2389149">15</span>&nbsp;<span class="op" id="2389152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2389157">//&nbsp;try&nbsp;fast&nbsp;algorithm&nbsp;when&nbsp;the&nbsp;number&nbsp;of&nbsp;digits&nbsp;is&nbsp;reasonable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389223">var</span>&nbsp;<span class="ident" id="2389227">buf</span>&nbsp;<span class="op" id="2389231">[</span><span class="num" id="2389232">24</span><span class="op" id="2389234">]</span><span class="builtintype" id="2389235">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389243"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2389247">.</span><span class="ident" id="2389248"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span>&nbsp;<span class="op" id="2389250">=</span>&nbsp;<span class="ident" id="2389252"><a href="/gostd/strconv/ftoa.go.html#2389227">buf</a></span><span class="op" id="2389255">[</span><span class="op" id="2389256">:</span><span class="op" id="2389257">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389262">f</span>&nbsp;<span class="op" id="2389264">:=</span>&nbsp;<span class="ident" id="2389267"><a href="/gostd/strconv/extfloat.go.html#2365602">extFloat</a></span><span class="op" id="2389275">{</span><span class="ident" id="2389276"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span><span class="op" id="2389280">,</span>&nbsp;<span class="ident" id="2389282"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span>&nbsp;<span class="op" id="2389286">-</span>&nbsp;<span class="builtintype" id="2389288">int</span><span class="op" id="2389291">(</span><span class="ident" id="2389292"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2389295">.</span><span class="ident" id="2389296"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2389304">)</span><span class="op" id="2389305">,</span>&nbsp;<span class="ident" id="2389307"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2389310">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389315"><a href="/gostd/strconv/ftoa.go.html#2388378">ok</a></span>&nbsp;<span class="op" id="2389318">=</span>&nbsp;<span class="ident" id="2389320"><a href="/gostd/strconv/ftoa.go.html#2389262">f</a></span><span class="op" id="2389321">.</span><span class="ident" id="2389322"><a href="/gostd/strconv/extfloat.go.html#2377463">FixedDecimal</a></span><span class="op" id="2389334">(</span><span class="op" id="2389335">&amp;</span><span class="ident" id="2389336"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2389340">,</span>&nbsp;<span class="ident" id="2389342"><a href="/gostd/strconv/ftoa.go.html#2389001">digits</a></span><span class="op" id="2389348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2389352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2389355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389358">if</span>&nbsp;<span class="op" id="2389361">!</span><span class="ident" id="2389362"><a href="/gostd/strconv/ftoa.go.html#2388378">ok</a></span>&nbsp;<span class="op" id="2389365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389369">return</span>&nbsp;<span class="ident" id="2389376"><a href="/gostd/strconv/ftoa.go.html#2389553">bigFtoa</a></span><span class="op" id="2389383">(</span><span class="ident" id="2389384"><a href="/gostd/strconv/ftoa.go.html#2387382">dst</a></span><span class="op" id="2389387">,</span>&nbsp;<span class="ident" id="2389389"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span><span class="op" id="2389393">,</span>&nbsp;<span class="ident" id="2389395"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span><span class="op" id="2389398">,</span>&nbsp;<span class="ident" id="2389400"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2389403">,</span>&nbsp;<span class="ident" id="2389405"><a href="/gostd/strconv/ftoa.go.html#2387817">mant</a></span><span class="op" id="2389409">,</span>&nbsp;<span class="ident" id="2389411"><a href="/gostd/strconv/ftoa.go.html#2387762">exp</a></span><span class="op" id="2389414">,</span>&nbsp;<span class="ident" id="2389416"><a href="/gostd/strconv/ftoa.go.html#2387467">flt</a></span><span class="op" id="2389419">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2389422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389425">return</span>&nbsp;<span class="ident" id="2389432"><a href="/gostd/strconv/ftoa.go.html#2390376">formatDigits</a></span><span class="op" id="2389444">(</span><span class="ident" id="2389445"><a href="/gostd/strconv/ftoa.go.html#2387382">dst</a></span><span class="op" id="2389448">,</span>&nbsp;<span class="ident" id="2389450"><a href="/gostd/strconv/ftoa.go.html#2388458">shortest</a></span><span class="op" id="2389458">,</span>&nbsp;<span class="ident" id="2389460"><a href="/gostd/strconv/ftoa.go.html#2387716">neg</a></span><span class="op" id="2389463">,</span>&nbsp;<span class="ident" id="2389465"><a href="/gostd/strconv/ftoa.go.html#2388359">digs</a></span><span class="op" id="2389469">,</span>&nbsp;<span class="ident" id="2389471"><a href="/gostd/strconv/ftoa.go.html#2387417">prec</a></span><span class="op" id="2389475">,</span>&nbsp;<span class="ident" id="2389477"><a href="/gostd/strconv/ftoa.go.html#2387407">fmt</a></span><span class="op" id="2389480">)</span><br>
<span class="lineno"></span><span class="op" id="2389482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2389485">//&nbsp;bigFtoa&nbsp;uses&nbsp;multiprecision&nbsp;computations&nbsp;to&nbsp;format&nbsp;a&nbsp;float.</span><br>
<span class="lineno">155</span><span class="keyword" id="2389548">func</span>&nbsp;<span class="ident" id="2389553">bigFtoa</span><span class="op" id="2389560">(</span><span class="ident" id="2389561">dst</span>&nbsp;<span class="op" id="2389565">[</span><span class="op" id="2389566">]</span><span class="builtintype" id="2389567">byte</span><span class="op" id="2389571">,</span>&nbsp;<span class="ident" id="2389573">prec</span>&nbsp;<span class="builtintype" id="2389578">int</span><span class="op" id="2389581">,</span>&nbsp;<span class="ident" id="2389583">fmt</span>&nbsp;<span class="builtintype" id="2389587">byte</span><span class="op" id="2389591">,</span>&nbsp;<span class="ident" id="2389593">neg</span>&nbsp;<span class="builtintype" id="2389597">bool</span><span class="op" id="2389601">,</span>&nbsp;<span class="ident" id="2389603">mant</span>&nbsp;<span class="builtintype" id="2389608">uint64</span><span class="op" id="2389614">,</span>&nbsp;<span class="ident" id="2389616">exp</span>&nbsp;<span class="builtintype" id="2389620">int</span><span class="op" id="2389623">,</span>&nbsp;<span class="ident" id="2389625">flt</span>&nbsp;<span class="op" id="2389629">*</span><span class="ident" id="2389630"><a href="/gostd/strconv/ftoa.go.html#2385845">floatInfo</a></span><span class="op" id="2389639">)</span>&nbsp;<span class="op" id="2389641">[</span><span class="op" id="2389642">]</span><span class="builtintype" id="2389643">byte</span>&nbsp;<span class="op" id="2389648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389651">d</span>&nbsp;<span class="op" id="2389653">:=</span>&nbsp;<span class="builtinfunc" id="2389656">new</span><span class="op" id="2389659">(</span><span class="ident" id="2389660"><a href="/gostd/strconv/decimal.go.html#2357629">decimal</a></span><span class="op" id="2389667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389670"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2389671">.</span><span class="ident" id="2389672"><a href="/gostd/strconv/decimal.go.html#2358877">Assign</a></span><span class="op" id="2389678">(</span><span class="ident" id="2389679"><a href="/gostd/strconv/ftoa.go.html#2389603">mant</a></span><span class="op" id="2389683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389686"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2389687">.</span><span class="ident" id="2389688"><a href="/gostd/strconv/decimal.go.html#2363312">Shift</a></span><span class="op" id="2389693">(</span><span class="ident" id="2389694"><a href="/gostd/strconv/ftoa.go.html#2389616">exp</a></span>&nbsp;<span class="op" id="2389698">-</span>&nbsp;<span class="builtintype" id="2389700">int</span><span class="op" id="2389703">(</span><span class="ident" id="2389704"><a href="/gostd/strconv/ftoa.go.html#2389625">flt</a></span><span class="op" id="2389707">.</span><span class="ident" id="2389708"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2389716">)</span><span class="op" id="2389717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389720">var</span>&nbsp;<span class="ident" id="2389724">digs</span>&nbsp;<span class="ident" id="2389729"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389743">shortest</span>&nbsp;<span class="op" id="2389752">:=</span>&nbsp;<span class="ident" id="2389755"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2389760">&lt;</span>&nbsp;<span class="num" id="2389762">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389765">if</span>&nbsp;<span class="ident" id="2389768"><a href="/gostd/strconv/ftoa.go.html#2389743">shortest</a></span>&nbsp;<span class="op" id="2389777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389781"><a href="/gostd/strconv/ftoa.go.html#2391487">roundShortest</a></span><span class="op" id="2389794">(</span><span class="ident" id="2389795"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2389796">,</span>&nbsp;<span class="ident" id="2389798"><a href="/gostd/strconv/ftoa.go.html#2389603">mant</a></span><span class="op" id="2389802">,</span>&nbsp;<span class="ident" id="2389804"><a href="/gostd/strconv/ftoa.go.html#2389616">exp</a></span><span class="op" id="2389807">,</span>&nbsp;<span class="ident" id="2389809"><a href="/gostd/strconv/ftoa.go.html#2389625">flt</a></span><span class="op" id="2389812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389816"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span>&nbsp;<span class="op" id="2389821">=</span>&nbsp;<span class="ident" id="2389823"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><span class="op" id="2389835">{</span><span class="ident" id="2389836"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span><span class="op" id="2389837">:</span>&nbsp;<span class="ident" id="2389839"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2389840">.</span><span class="ident" id="2389841"><a href="/gostd/strconv/decimal.go.html#2357647">d</a></span><span class="op" id="2389842">[</span><span class="op" id="2389843">:</span><span class="op" id="2389844">]</span><span class="op" id="2389845">,</span>&nbsp;<span class="ident" id="2389847"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><span class="op" id="2389849">:</span>&nbsp;<span class="ident" id="2389851"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2389852">.</span><span class="ident" id="2389853"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span><span class="op" id="2389855">,</span>&nbsp;<span class="ident" id="2389857"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span><span class="op" id="2389859">:</span>&nbsp;<span class="ident" id="2389861"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2389862">.</span><span class="ident" id="2389863"><a href="/gostd/strconv/decimal.go.html#2357716">dp</a></span><span class="op" id="2389865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2389869">//&nbsp;Precision&nbsp;for&nbsp;shortest&nbsp;representation&nbsp;mode.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389918">switch</span>&nbsp;<span class="ident" id="2389925"><a href="/gostd/strconv/ftoa.go.html#2389583">fmt</a></span>&nbsp;<span class="op" id="2389929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389933">case</span>&nbsp;<span class="string" id="2389938">&#39;e&#39;</span><span class="op" id="2389941">,</span>&nbsp;<span class="string" id="2389943">&#39;E&#39;</span><span class="op" id="2389946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389951"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2389956">=</span>&nbsp;<span class="ident" id="2389958"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span><span class="op" id="2389962">.</span><span class="ident" id="2389963"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2389966">-</span>&nbsp;<span class="num" id="2389968">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2389972">case</span>&nbsp;<span class="string" id="2389977">&#39;f&#39;</span><span class="op" id="2389980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2389985"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2389990">=</span>&nbsp;<span class="ident" id="2389992"><a href="/gostd/strconv/ftoa.go.html#2396746">max</a></span><span class="op" id="2389995">(</span><span class="ident" id="2389996"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span><span class="op" id="2390000">.</span><span class="ident" id="2390001"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><span class="op" id="2390003">-</span><span class="ident" id="2390004"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span><span class="op" id="2390008">.</span><span class="ident" id="2390009"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span><span class="op" id="2390011">,</span>&nbsp;<span class="num" id="2390013">0</span><span class="op" id="2390014">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390018">case</span>&nbsp;<span class="string" id="2390023">&#39;g&#39;</span><span class="op" id="2390026">,</span>&nbsp;<span class="string" id="2390028">&#39;G&#39;</span><span class="op" id="2390031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390036"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2390041">=</span>&nbsp;<span class="ident" id="2390043"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span><span class="op" id="2390047">.</span><span class="ident" id="2390048"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390056">}</span>&nbsp;<span class="keyword" id="2390058">else</span>&nbsp;<span class="op" id="2390063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2390067">//&nbsp;Round&nbsp;appropriately.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390093">switch</span>&nbsp;<span class="ident" id="2390100"><a href="/gostd/strconv/ftoa.go.html#2389583">fmt</a></span>&nbsp;<span class="op" id="2390104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390108">case</span>&nbsp;<span class="string" id="2390113">&#39;e&#39;</span><span class="op" id="2390116">,</span>&nbsp;<span class="string" id="2390118">&#39;E&#39;</span><span class="op" id="2390121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390126"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390127">.</span><span class="ident" id="2390128"><a href="/gostd/strconv/decimal.go.html#2364183">Round</a></span><span class="op" id="2390133">(</span><span class="ident" id="2390134"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2390139">+</span>&nbsp;<span class="num" id="2390141">1</span><span class="op" id="2390142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390146">case</span>&nbsp;<span class="string" id="2390151">&#39;f&#39;</span><span class="op" id="2390154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390159"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390160">.</span><span class="ident" id="2390161"><a href="/gostd/strconv/decimal.go.html#2364183">Round</a></span><span class="op" id="2390166">(</span><span class="ident" id="2390167"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390168">.</span><span class="ident" id="2390169"><a href="/gostd/strconv/decimal.go.html#2357716">dp</a></span>&nbsp;<span class="op" id="2390172">+</span>&nbsp;<span class="ident" id="2390174"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span><span class="op" id="2390178">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390182">case</span>&nbsp;<span class="string" id="2390187">&#39;g&#39;</span><span class="op" id="2390190">,</span>&nbsp;<span class="string" id="2390192">&#39;G&#39;</span><span class="op" id="2390195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390200">if</span>&nbsp;<span class="ident" id="2390203"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2390208">==</span>&nbsp;<span class="num" id="2390211">0</span>&nbsp;<span class="op" id="2390213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390219"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span>&nbsp;<span class="op" id="2390224">=</span>&nbsp;<span class="num" id="2390226">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390236"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390237">.</span><span class="ident" id="2390238"><a href="/gostd/strconv/decimal.go.html#2364183">Round</a></span><span class="op" id="2390243">(</span><span class="ident" id="2390244"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span><span class="op" id="2390248">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390256"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span>&nbsp;<span class="op" id="2390261">=</span>&nbsp;<span class="ident" id="2390263"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><span class="op" id="2390275">{</span><span class="ident" id="2390276"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span><span class="op" id="2390277">:</span>&nbsp;<span class="ident" id="2390279"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390280">.</span><span class="ident" id="2390281"><a href="/gostd/strconv/decimal.go.html#2357647">d</a></span><span class="op" id="2390282">[</span><span class="op" id="2390283">:</span><span class="op" id="2390284">]</span><span class="op" id="2390285">,</span>&nbsp;<span class="ident" id="2390287"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><span class="op" id="2390289">:</span>&nbsp;<span class="ident" id="2390291"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390292">.</span><span class="ident" id="2390293"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span><span class="op" id="2390295">,</span>&nbsp;<span class="ident" id="2390297"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span><span class="op" id="2390299">:</span>&nbsp;<span class="ident" id="2390301"><a href="/gostd/strconv/ftoa.go.html#2389651">d</a></span><span class="op" id="2390302">.</span><span class="ident" id="2390303"><a href="/gostd/strconv/decimal.go.html#2357716">dp</a></span><span class="op" id="2390305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390311">return</span>&nbsp;<span class="ident" id="2390318"><a href="/gostd/strconv/ftoa.go.html#2390376">formatDigits</a></span><span class="op" id="2390330">(</span><span class="ident" id="2390331"><a href="/gostd/strconv/ftoa.go.html#2389561">dst</a></span><span class="op" id="2390334">,</span>&nbsp;<span class="ident" id="2390336"><a href="/gostd/strconv/ftoa.go.html#2389743">shortest</a></span><span class="op" id="2390344">,</span>&nbsp;<span class="ident" id="2390346"><a href="/gostd/strconv/ftoa.go.html#2389593">neg</a></span><span class="op" id="2390349">,</span>&nbsp;<span class="ident" id="2390351"><a href="/gostd/strconv/ftoa.go.html#2389724">digs</a></span><span class="op" id="2390355">,</span>&nbsp;<span class="ident" id="2390357"><a href="/gostd/strconv/ftoa.go.html#2389573">prec</a></span><span class="op" id="2390361">,</span>&nbsp;<span class="ident" id="2390363"><a href="/gostd/strconv/ftoa.go.html#2389583">fmt</a></span><span class="op" id="2390366">)</span><br>
<span class="lineno"></span><span class="op" id="2390368">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="keyword" id="2390371">func</span>&nbsp;<span class="ident" id="2390376">formatDigits</span><span class="op" id="2390388">(</span><span class="ident" id="2390389">dst</span>&nbsp;<span class="op" id="2390393">[</span><span class="op" id="2390394">]</span><span class="builtintype" id="2390395">byte</span><span class="op" id="2390399">,</span>&nbsp;<span class="ident" id="2390401">shortest</span>&nbsp;<span class="builtintype" id="2390410">bool</span><span class="op" id="2390414">,</span>&nbsp;<span class="ident" id="2390416">neg</span>&nbsp;<span class="builtintype" id="2390420">bool</span><span class="op" id="2390424">,</span>&nbsp;<span class="ident" id="2390426">digs</span>&nbsp;<span class="ident" id="2390431"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><span class="op" id="2390443">,</span>&nbsp;<span class="ident" id="2390445">prec</span>&nbsp;<span class="builtintype" id="2390450">int</span><span class="op" id="2390453">,</span>&nbsp;<span class="ident" id="2390455">fmt</span>&nbsp;<span class="builtintype" id="2390459">byte</span><span class="op" id="2390463">)</span>&nbsp;<span class="op" id="2390465">[</span><span class="op" id="2390466">]</span><span class="builtintype" id="2390467">byte</span>&nbsp;<span class="op" id="2390472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390475">switch</span>&nbsp;<span class="ident" id="2390482"><a href="/gostd/strconv/ftoa.go.html#2390455">fmt</a></span>&nbsp;<span class="op" id="2390486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390489">case</span>&nbsp;<span class="string" id="2390494">&#39;e&#39;</span><span class="op" id="2390497">,</span>&nbsp;<span class="string" id="2390499">&#39;E&#39;</span><span class="op" id="2390502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390506">return</span>&nbsp;<span class="ident" id="2390513"><a href="/gostd/strconv/ftoa.go.html#2394669">fmtE</a></span><span class="op" id="2390517">(</span><span class="ident" id="2390518"><a href="/gostd/strconv/ftoa.go.html#2390389">dst</a></span><span class="op" id="2390521">,</span>&nbsp;<span class="ident" id="2390523"><a href="/gostd/strconv/ftoa.go.html#2390416">neg</a></span><span class="op" id="2390526">,</span>&nbsp;<span class="ident" id="2390528"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390532">,</span>&nbsp;<span class="ident" id="2390534"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span><span class="op" id="2390538">,</span>&nbsp;<span class="ident" id="2390540"><a href="/gostd/strconv/ftoa.go.html#2390455">fmt</a></span><span class="op" id="2390543">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390546">case</span>&nbsp;<span class="string" id="2390551">&#39;f&#39;</span><span class="op" id="2390554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390558">return</span>&nbsp;<span class="ident" id="2390565"><a href="/gostd/strconv/ftoa.go.html#2395669">fmtF</a></span><span class="op" id="2390569">(</span><span class="ident" id="2390570"><a href="/gostd/strconv/ftoa.go.html#2390389">dst</a></span><span class="op" id="2390573">,</span>&nbsp;<span class="ident" id="2390575"><a href="/gostd/strconv/ftoa.go.html#2390416">neg</a></span><span class="op" id="2390578">,</span>&nbsp;<span class="ident" id="2390580"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390584">,</span>&nbsp;<span class="ident" id="2390586"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span><span class="op" id="2390590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390593">case</span>&nbsp;<span class="string" id="2390598">&#39;g&#39;</span><span class="op" id="2390601">,</span>&nbsp;<span class="string" id="2390603">&#39;G&#39;</span><span class="op" id="2390606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2390610">//&nbsp;trailing&nbsp;fractional&nbsp;zeros&nbsp;in&nbsp;&#39;e&#39;&nbsp;form&nbsp;will&nbsp;be&nbsp;trimmed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390670">eprec</span>&nbsp;<span class="op" id="2390676">:=</span>&nbsp;<span class="ident" id="2390679"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390686">if</span>&nbsp;<span class="ident" id="2390689"><a href="/gostd/strconv/ftoa.go.html#2390670">eprec</a></span>&nbsp;<span class="op" id="2390695">&gt;</span>&nbsp;<span class="ident" id="2390697"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390701">.</span><span class="ident" id="2390702"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2390705">&amp;&amp;</span>&nbsp;<span class="ident" id="2390708"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390712">.</span><span class="ident" id="2390713"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2390716">&gt;=</span>&nbsp;<span class="ident" id="2390719"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390723">.</span><span class="ident" id="2390724"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2390727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390732"><a href="/gostd/strconv/ftoa.go.html#2390670">eprec</a></span>&nbsp;<span class="op" id="2390738">=</span>&nbsp;<span class="ident" id="2390740"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390744">.</span><span class="ident" id="2390745"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2390754">//&nbsp;%e&nbsp;is&nbsp;used&nbsp;if&nbsp;the&nbsp;exponent&nbsp;from&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2390806">//&nbsp;is&nbsp;less&nbsp;than&nbsp;-4&nbsp;or&nbsp;greater&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;the&nbsp;precision.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2390870">//&nbsp;if&nbsp;precision&nbsp;was&nbsp;the&nbsp;shortest&nbsp;possible,&nbsp;use&nbsp;precision&nbsp;6&nbsp;for&nbsp;this&nbsp;decision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2390950">if</span>&nbsp;<span class="ident" id="2390953"><a href="/gostd/strconv/ftoa.go.html#2390401">shortest</a></span>&nbsp;<span class="op" id="2390962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390967"><a href="/gostd/strconv/ftoa.go.html#2390670">eprec</a></span>&nbsp;<span class="op" id="2390973">=</span>&nbsp;<span class="num" id="2390975">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2390983">exp</span>&nbsp;<span class="op" id="2390987">:=</span>&nbsp;<span class="ident" id="2390990"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2390994">.</span><span class="ident" id="2390995"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2390998">-</span>&nbsp;<span class="num" id="2391000">1</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391004">if</span>&nbsp;<span class="ident" id="2391007"><a href="/gostd/strconv/ftoa.go.html#2390983">exp</a></span>&nbsp;<span class="op" id="2391011">&lt;</span>&nbsp;<span class="op" id="2391013">-</span><span class="num" id="2391014">4</span>&nbsp;<span class="op" id="2391016">||</span>&nbsp;<span class="ident" id="2391019"><a href="/gostd/strconv/ftoa.go.html#2390983">exp</a></span>&nbsp;<span class="op" id="2391023">&gt;=</span>&nbsp;<span class="ident" id="2391026"><a href="/gostd/strconv/ftoa.go.html#2390670">eprec</a></span>&nbsp;<span class="op" id="2391032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391037">if</span>&nbsp;<span class="ident" id="2391040"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span>&nbsp;<span class="op" id="2391045">&gt;</span>&nbsp;<span class="ident" id="2391047"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391051">.</span><span class="ident" id="2391052"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2391055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2391061"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span>&nbsp;<span class="op" id="2391066">=</span>&nbsp;<span class="ident" id="2391068"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391072">.</span><span class="ident" id="2391073"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391084">return</span>&nbsp;<span class="ident" id="2391091"><a href="/gostd/strconv/ftoa.go.html#2394669">fmtE</a></span><span class="op" id="2391095">(</span><span class="ident" id="2391096"><a href="/gostd/strconv/ftoa.go.html#2390389">dst</a></span><span class="op" id="2391099">,</span>&nbsp;<span class="ident" id="2391101"><a href="/gostd/strconv/ftoa.go.html#2390416">neg</a></span><span class="op" id="2391104">,</span>&nbsp;<span class="ident" id="2391106"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391110">,</span>&nbsp;<span class="ident" id="2391112"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span><span class="op" id="2391116">-</span><span class="num" id="2391117">1</span><span class="op" id="2391118">,</span>&nbsp;<span class="ident" id="2391120"><a href="/gostd/strconv/ftoa.go.html#2390455">fmt</a></span><span class="op" id="2391123">+</span><span class="string" id="2391124">&#39;e&#39;</span><span class="op" id="2391127">-</span><span class="string" id="2391128">&#39;g&#39;</span><span class="op" id="2391131">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391139">if</span>&nbsp;<span class="ident" id="2391142"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span>&nbsp;<span class="op" id="2391147">&gt;</span>&nbsp;<span class="ident" id="2391149"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391153">.</span><span class="ident" id="2391154"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2391157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2391162"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span>&nbsp;<span class="op" id="2391167">=</span>&nbsp;<span class="ident" id="2391169"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391173">.</span><span class="ident" id="2391174"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391183">return</span>&nbsp;<span class="ident" id="2391190"><a href="/gostd/strconv/ftoa.go.html#2395669">fmtF</a></span><span class="op" id="2391194">(</span><span class="ident" id="2391195"><a href="/gostd/strconv/ftoa.go.html#2390389">dst</a></span><span class="op" id="2391198">,</span>&nbsp;<span class="ident" id="2391200"><a href="/gostd/strconv/ftoa.go.html#2390416">neg</a></span><span class="op" id="2391203">,</span>&nbsp;<span class="ident" id="2391205"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391209">,</span>&nbsp;<span class="ident" id="2391211"><a href="/gostd/strconv/ftoa.go.html#2396746">max</a></span><span class="op" id="2391214">(</span><span class="ident" id="2391215"><a href="/gostd/strconv/ftoa.go.html#2390445">prec</a></span><span class="op" id="2391219">-</span><span class="ident" id="2391220"><a href="/gostd/strconv/ftoa.go.html#2390426">digs</a></span><span class="op" id="2391224">.</span><span class="ident" id="2391225"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span><span class="op" id="2391227">,</span>&nbsp;<span class="num" id="2391229">0</span><span class="op" id="2391230">)</span><span class="op" id="2391231">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391238">//&nbsp;unknown&nbsp;format</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391257">return</span>&nbsp;<span class="builtinfunc" id="2391264">append</span><span class="op" id="2391270">(</span><span class="ident" id="2391271"><a href="/gostd/strconv/ftoa.go.html#2390389">dst</a></span><span class="op" id="2391274">,</span>&nbsp;<span class="string" id="2391276">&#39;%&#39;</span><span class="op" id="2391279">,</span>&nbsp;<span class="ident" id="2391281"><a href="/gostd/strconv/ftoa.go.html#2390455">fmt</a></span><span class="op" id="2391284">)</span><br>
<span class="lineno"></span><span class="op" id="2391286">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2391289">//&nbsp;Round&nbsp;d&nbsp;(=&nbsp;mant&nbsp;*&nbsp;2^exp)&nbsp;to&nbsp;the&nbsp;shortest&nbsp;number&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="2391350">//&nbsp;that&nbsp;will&nbsp;let&nbsp;the&nbsp;original&nbsp;floating&nbsp;point&nbsp;value&nbsp;be&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2391414">//&nbsp;reconstructed.&nbsp;&nbsp;Size&nbsp;is&nbsp;original&nbsp;floating&nbsp;point&nbsp;size&nbsp;(64&nbsp;or&nbsp;32).</span><br>
<span class="lineno"></span><span class="keyword" id="2391482">func</span>&nbsp;<span class="ident" id="2391487">roundShortest</span><span class="op" id="2391500">(</span><span class="ident" id="2391501">d</span>&nbsp;<span class="op" id="2391503">*</span><span class="ident" id="2391504"><a href="/gostd/strconv/decimal.go.html#2357629">decimal</a></span><span class="op" id="2391511">,</span>&nbsp;<span class="ident" id="2391513">mant</span>&nbsp;<span class="builtintype" id="2391518">uint64</span><span class="op" id="2391524">,</span>&nbsp;<span class="ident" id="2391526">exp</span>&nbsp;<span class="builtintype" id="2391530">int</span><span class="op" id="2391533">,</span>&nbsp;<span class="ident" id="2391535">flt</span>&nbsp;<span class="op" id="2391539">*</span><span class="ident" id="2391540"><a href="/gostd/strconv/ftoa.go.html#2385845">floatInfo</a></span><span class="op" id="2391549">)</span>&nbsp;<span class="op" id="2391551">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391554">//&nbsp;If&nbsp;mantissa&nbsp;is&nbsp;zero,&nbsp;the&nbsp;number&nbsp;is&nbsp;zero;&nbsp;stop&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391609">if</span>&nbsp;<span class="ident" id="2391612"><a href="/gostd/strconv/ftoa.go.html#2391513">mant</a></span>&nbsp;<span class="op" id="2391617">==</span>&nbsp;<span class="num" id="2391620">0</span>&nbsp;<span class="op" id="2391622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2391626"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2391627">.</span><span class="ident" id="2391628"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span>&nbsp;<span class="op" id="2391631">=</span>&nbsp;<span class="num" id="2391633">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2391637">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391645">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391649">//&nbsp;Compute&nbsp;upper&nbsp;and&nbsp;lower&nbsp;such&nbsp;that&nbsp;any&nbsp;decimal&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391706">//&nbsp;between&nbsp;upper&nbsp;and&nbsp;lower&nbsp;(possibly&nbsp;inclusive)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391755">//&nbsp;will&nbsp;round&nbsp;to&nbsp;the&nbsp;original&nbsp;floating&nbsp;point&nbsp;number.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391810">//&nbsp;We&nbsp;may&nbsp;see&nbsp;at&nbsp;once&nbsp;that&nbsp;the&nbsp;number&nbsp;is&nbsp;already&nbsp;shortest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391870">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391874">//&nbsp;Suppose&nbsp;d&nbsp;is&nbsp;not&nbsp;denormal,&nbsp;so&nbsp;that&nbsp;2^exp&nbsp;&lt;=&nbsp;d&nbsp;&lt;&nbsp;10^dp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391933">//&nbsp;The&nbsp;closest&nbsp;shorter&nbsp;number&nbsp;is&nbsp;at&nbsp;least&nbsp;10^(dp-nd)&nbsp;away.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2391993">//&nbsp;The&nbsp;lower/upper&nbsp;bounds&nbsp;computed&nbsp;below&nbsp;are&nbsp;at&nbsp;distance</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392051">//&nbsp;at&nbsp;most&nbsp;2^(exp-mantbits).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392081">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392085">//&nbsp;So&nbsp;the&nbsp;number&nbsp;is&nbsp;already&nbsp;shortest&nbsp;if&nbsp;10^(dp-nd)&nbsp;&gt;&nbsp;2^(exp-mantbits),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392157">//&nbsp;or&nbsp;equivalently&nbsp;log2(10)*(dp-nd)&nbsp;&gt;&nbsp;exp-mantbits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392210">//&nbsp;It&nbsp;is&nbsp;true&nbsp;if&nbsp;332/100*(dp-nd)&nbsp;&gt;=&nbsp;exp-mantbits&nbsp;(log2(10)&nbsp;&gt;&nbsp;3.32).</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2392279">minexp</span>&nbsp;<span class="op" id="2392286">:=</span>&nbsp;<span class="ident" id="2392289"><a href="/gostd/strconv/ftoa.go.html#2391535">flt</a></span><span class="op" id="2392292">.</span><span class="ident" id="2392293"><a href="/gostd/strconv/ftoa.go.html#2385895">bias</a></span>&nbsp;<span class="op" id="2392298">+</span>&nbsp;<span class="num" id="2392300">1</span>&nbsp;<span class="comment" id="2392302">//&nbsp;minimum&nbsp;possible&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2392332">if</span>&nbsp;<span class="ident" id="2392335"><a href="/gostd/strconv/ftoa.go.html#2391526">exp</a></span>&nbsp;<span class="op" id="2392339">&gt;</span>&nbsp;<span class="ident" id="2392341"><a href="/gostd/strconv/ftoa.go.html#2392279">minexp</a></span>&nbsp;<span class="op" id="2392348">&amp;&amp;</span>&nbsp;<span class="num" id="2392351">332</span><span class="op" id="2392354">*</span><span class="op" id="2392355">(</span><span class="ident" id="2392356"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2392357">.</span><span class="ident" id="2392358"><a href="/gostd/strconv/decimal.go.html#2357716">dp</a></span><span class="op" id="2392360">-</span><span class="ident" id="2392361"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2392362">.</span><span class="ident" id="2392363"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span><span class="op" id="2392365">)</span>&nbsp;<span class="op" id="2392367">&gt;=</span>&nbsp;<span class="num" id="2392370">100</span><span class="op" id="2392373">*</span><span class="op" id="2392374">(</span><span class="ident" id="2392375"><a href="/gostd/strconv/ftoa.go.html#2391526">exp</a></span><span class="op" id="2392378">-</span><span class="builtintype" id="2392379">int</span><span class="op" id="2392382">(</span><span class="ident" id="2392383"><a href="/gostd/strconv/ftoa.go.html#2391535">flt</a></span><span class="op" id="2392386">.</span><span class="ident" id="2392387"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2392395">)</span><span class="op" id="2392396">)</span>&nbsp;<span class="op" id="2392398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392402">//&nbsp;The&nbsp;number&nbsp;is&nbsp;already&nbsp;shortest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2392439">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2392447">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392451">//&nbsp;d&nbsp;=&nbsp;mant&nbsp;&lt;&lt;&nbsp;(exp&nbsp;-&nbsp;mantbits)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392484">//&nbsp;Next&nbsp;highest&nbsp;floating&nbsp;point&nbsp;number&nbsp;is&nbsp;mant+1&nbsp;&lt;&lt;&nbsp;exp-mantbits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392550">//&nbsp;Our&nbsp;upper&nbsp;bound&nbsp;is&nbsp;halfway&nbsp;between,&nbsp;mant*2+1&nbsp;&lt;&lt;&nbsp;exp-mantbits-1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2392618">upper</span>&nbsp;<span class="op" id="2392624">:=</span>&nbsp;<span class="builtinfunc" id="2392627">new</span><span class="op" id="2392630">(</span><span class="ident" id="2392631"><a href="/gostd/strconv/decimal.go.html#2357629">decimal</a></span><span class="op" id="2392638">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2392641"><a href="/gostd/strconv/ftoa.go.html#2392618">upper</a></span><span class="op" id="2392646">.</span><span class="ident" id="2392647"><a href="/gostd/strconv/decimal.go.html#2358877">Assign</a></span><span class="op" id="2392653">(</span><span class="ident" id="2392654"><a href="/gostd/strconv/ftoa.go.html#2391513">mant</a></span><span class="op" id="2392658">*</span><span class="num" id="2392659">2</span>&nbsp;<span class="op" id="2392661">+</span>&nbsp;<span class="num" id="2392663">1</span><span class="op" id="2392664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2392667"><a href="/gostd/strconv/ftoa.go.html#2392618">upper</a></span><span class="op" id="2392672">.</span><span class="ident" id="2392673"><a href="/gostd/strconv/decimal.go.html#2363312">Shift</a></span><span class="op" id="2392678">(</span><span class="ident" id="2392679"><a href="/gostd/strconv/ftoa.go.html#2391526">exp</a></span>&nbsp;<span class="op" id="2392683">-</span>&nbsp;<span class="builtintype" id="2392685">int</span><span class="op" id="2392688">(</span><span class="ident" id="2392689"><a href="/gostd/strconv/ftoa.go.html#2391535">flt</a></span><span class="op" id="2392692">.</span><span class="ident" id="2392693"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2392701">)</span>&nbsp;<span class="op" id="2392703">-</span>&nbsp;<span class="num" id="2392705">1</span><span class="op" id="2392706">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392710">//&nbsp;d&nbsp;=&nbsp;mant&nbsp;&lt;&lt;&nbsp;(exp&nbsp;-&nbsp;mantbits)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392743">//&nbsp;Next&nbsp;lowest&nbsp;floating&nbsp;point&nbsp;number&nbsp;is&nbsp;mant-1&nbsp;&lt;&lt;&nbsp;exp-mantbits,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392808">//&nbsp;unless&nbsp;mant-1&nbsp;drops&nbsp;the&nbsp;significant&nbsp;bit&nbsp;and&nbsp;exp&nbsp;is&nbsp;not&nbsp;the&nbsp;minimum&nbsp;exp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392884">//&nbsp;in&nbsp;which&nbsp;case&nbsp;the&nbsp;next&nbsp;lowest&nbsp;is&nbsp;mant*2-1&nbsp;&lt;&lt;&nbsp;exp-mantbits-1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392949">//&nbsp;Either&nbsp;way,&nbsp;call&nbsp;it&nbsp;mantlo&nbsp;&lt;&lt;&nbsp;explo-mantbits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2392999">//&nbsp;Our&nbsp;lower&nbsp;bound&nbsp;is&nbsp;halfway&nbsp;between,&nbsp;mantlo*2+1&nbsp;&lt;&lt;&nbsp;explo-mantbits-1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393071">var</span>&nbsp;<span class="ident" id="2393075">mantlo</span>&nbsp;<span class="builtintype" id="2393082">uint64</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393090">var</span>&nbsp;<span class="ident" id="2393094">explo</span>&nbsp;<span class="builtintype" id="2393100">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393105">if</span>&nbsp;<span class="ident" id="2393108"><a href="/gostd/strconv/ftoa.go.html#2391513">mant</a></span>&nbsp;<span class="op" id="2393113">&gt;</span>&nbsp;<span class="num" id="2393115">1</span><span class="op" id="2393116">&lt;&lt;</span><span class="ident" id="2393118"><a href="/gostd/strconv/ftoa.go.html#2391535">flt</a></span><span class="op" id="2393121">.</span><span class="ident" id="2393122"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span>&nbsp;<span class="op" id="2393131">||</span>&nbsp;<span class="ident" id="2393134"><a href="/gostd/strconv/ftoa.go.html#2391526">exp</a></span>&nbsp;<span class="op" id="2393138">==</span>&nbsp;<span class="ident" id="2393141"><a href="/gostd/strconv/ftoa.go.html#2392279">minexp</a></span>&nbsp;<span class="op" id="2393148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393152"><a href="/gostd/strconv/ftoa.go.html#2393075">mantlo</a></span>&nbsp;<span class="op" id="2393159">=</span>&nbsp;<span class="ident" id="2393161"><a href="/gostd/strconv/ftoa.go.html#2391513">mant</a></span>&nbsp;<span class="op" id="2393166">-</span>&nbsp;<span class="num" id="2393168">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393172"><a href="/gostd/strconv/ftoa.go.html#2393094">explo</a></span>&nbsp;<span class="op" id="2393178">=</span>&nbsp;<span class="ident" id="2393180"><a href="/gostd/strconv/ftoa.go.html#2391526">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2393185">}</span>&nbsp;<span class="keyword" id="2393187">else</span>&nbsp;<span class="op" id="2393192">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393196"><a href="/gostd/strconv/ftoa.go.html#2393075">mantlo</a></span>&nbsp;<span class="op" id="2393203">=</span>&nbsp;<span class="ident" id="2393205"><a href="/gostd/strconv/ftoa.go.html#2391513">mant</a></span><span class="op" id="2393209">*</span><span class="num" id="2393210">2</span>&nbsp;<span class="op" id="2393212">-</span>&nbsp;<span class="num" id="2393214">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393218"><a href="/gostd/strconv/ftoa.go.html#2393094">explo</a></span>&nbsp;<span class="op" id="2393224">=</span>&nbsp;<span class="ident" id="2393226"><a href="/gostd/strconv/ftoa.go.html#2391526">exp</a></span>&nbsp;<span class="op" id="2393230">-</span>&nbsp;<span class="num" id="2393232">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2393235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393238">lower</span>&nbsp;<span class="op" id="2393244">:=</span>&nbsp;<span class="builtinfunc" id="2393247">new</span><span class="op" id="2393250">(</span><span class="ident" id="2393251"><a href="/gostd/strconv/decimal.go.html#2357629">decimal</a></span><span class="op" id="2393258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393261"><a href="/gostd/strconv/ftoa.go.html#2393238">lower</a></span><span class="op" id="2393266">.</span><span class="ident" id="2393267"><a href="/gostd/strconv/decimal.go.html#2358877">Assign</a></span><span class="op" id="2393273">(</span><span class="ident" id="2393274"><a href="/gostd/strconv/ftoa.go.html#2393075">mantlo</a></span><span class="op" id="2393280">*</span><span class="num" id="2393281">2</span>&nbsp;<span class="op" id="2393283">+</span>&nbsp;<span class="num" id="2393285">1</span><span class="op" id="2393286">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393289"><a href="/gostd/strconv/ftoa.go.html#2393238">lower</a></span><span class="op" id="2393294">.</span><span class="ident" id="2393295"><a href="/gostd/strconv/decimal.go.html#2363312">Shift</a></span><span class="op" id="2393300">(</span><span class="ident" id="2393301"><a href="/gostd/strconv/ftoa.go.html#2393094">explo</a></span>&nbsp;<span class="op" id="2393307">-</span>&nbsp;<span class="builtintype" id="2393309">int</span><span class="op" id="2393312">(</span><span class="ident" id="2393313"><a href="/gostd/strconv/ftoa.go.html#2391535">flt</a></span><span class="op" id="2393316">.</span><span class="ident" id="2393317"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2393325">)</span>&nbsp;<span class="op" id="2393327">-</span>&nbsp;<span class="num" id="2393329">1</span><span class="op" id="2393330">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393334">//&nbsp;The&nbsp;upper&nbsp;and&nbsp;lower&nbsp;bounds&nbsp;are&nbsp;possible&nbsp;outputs&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393394">//&nbsp;the&nbsp;original&nbsp;mantissa&nbsp;is&nbsp;even,&nbsp;so&nbsp;that&nbsp;IEEE&nbsp;round-to-even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393456">//&nbsp;would&nbsp;round&nbsp;to&nbsp;the&nbsp;original&nbsp;mantissa&nbsp;and&nbsp;not&nbsp;the&nbsp;neighbors.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393520">inclusive</span>&nbsp;<span class="op" id="2393530">:=</span>&nbsp;<span class="ident" id="2393533"><a href="/gostd/strconv/ftoa.go.html#2391513">mant</a></span><span class="op" id="2393537">%</span><span class="num" id="2393538">2</span>&nbsp;<span class="op" id="2393540">==</span>&nbsp;<span class="num" id="2393543">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393547">//&nbsp;Now&nbsp;we&nbsp;can&nbsp;figure&nbsp;out&nbsp;the&nbsp;minimum&nbsp;number&nbsp;of&nbsp;digits&nbsp;required.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393612">//&nbsp;Walk&nbsp;along&nbsp;until&nbsp;d&nbsp;has&nbsp;distinguished&nbsp;itself&nbsp;from&nbsp;upper&nbsp;and&nbsp;lower.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393682">for</span>&nbsp;<span class="ident" id="2393686">i</span>&nbsp;<span class="op" id="2393688">:=</span>&nbsp;<span class="num" id="2393691">0</span><span class="op" id="2393692">;</span>&nbsp;<span class="ident" id="2393694"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span>&nbsp;<span class="op" id="2393696">&lt;</span>&nbsp;<span class="ident" id="2393698"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2393699">.</span><span class="ident" id="2393700"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span><span class="op" id="2393702">;</span>&nbsp;<span class="ident" id="2393704"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span><span class="op" id="2393705">++</span>&nbsp;<span class="op" id="2393708">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393712">var</span>&nbsp;<span class="ident" id="2393716">l</span><span class="op" id="2393717">,</span>&nbsp;<span class="ident" id="2393719">m</span><span class="op" id="2393720">,</span>&nbsp;<span class="ident" id="2393722">u</span>&nbsp;<span class="builtintype" id="2393724">byte</span>&nbsp;<span class="comment" id="2393729">//&nbsp;lower,&nbsp;middle,&nbsp;upper&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393762">if</span>&nbsp;<span class="ident" id="2393765"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span>&nbsp;<span class="op" id="2393767">&lt;</span>&nbsp;<span class="ident" id="2393769"><a href="/gostd/strconv/ftoa.go.html#2393238">lower</a></span><span class="op" id="2393774">.</span><span class="ident" id="2393775"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span>&nbsp;<span class="op" id="2393778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393783"><a href="/gostd/strconv/ftoa.go.html#2393716">l</a></span>&nbsp;<span class="op" id="2393785">=</span>&nbsp;<span class="ident" id="2393787"><a href="/gostd/strconv/ftoa.go.html#2393238">lower</a></span><span class="op" id="2393792">.</span><span class="ident" id="2393793"><a href="/gostd/strconv/decimal.go.html#2357647">d</a></span><span class="op" id="2393794">[</span><span class="ident" id="2393795"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span><span class="op" id="2393796">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2393800">}</span>&nbsp;<span class="keyword" id="2393802">else</span>&nbsp;<span class="op" id="2393807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393812"><a href="/gostd/strconv/ftoa.go.html#2393716">l</a></span>&nbsp;<span class="op" id="2393814">=</span>&nbsp;<span class="string" id="2393816">&#39;0&#39;</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2393822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393826"><a href="/gostd/strconv/ftoa.go.html#2393719">m</a></span>&nbsp;<span class="op" id="2393828">=</span>&nbsp;<span class="ident" id="2393830"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2393831">.</span><span class="ident" id="2393832"><a href="/gostd/strconv/decimal.go.html#2357647">d</a></span><span class="op" id="2393833">[</span><span class="ident" id="2393834"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span><span class="op" id="2393835">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2393839">if</span>&nbsp;<span class="ident" id="2393842"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span>&nbsp;<span class="op" id="2393844">&lt;</span>&nbsp;<span class="ident" id="2393846"><a href="/gostd/strconv/ftoa.go.html#2392618">upper</a></span><span class="op" id="2393851">.</span><span class="ident" id="2393852"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span>&nbsp;<span class="op" id="2393855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393860"><a href="/gostd/strconv/ftoa.go.html#2393722">u</a></span>&nbsp;<span class="op" id="2393862">=</span>&nbsp;<span class="ident" id="2393864"><a href="/gostd/strconv/ftoa.go.html#2392618">upper</a></span><span class="op" id="2393869">.</span><span class="ident" id="2393870"><a href="/gostd/strconv/decimal.go.html#2357647">d</a></span><span class="op" id="2393871">[</span><span class="ident" id="2393872"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span><span class="op" id="2393873">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2393877">}</span>&nbsp;<span class="keyword" id="2393879">else</span>&nbsp;<span class="op" id="2393884">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2393889"><a href="/gostd/strconv/ftoa.go.html#2393722">u</a></span>&nbsp;<span class="op" id="2393891">=</span>&nbsp;<span class="string" id="2393893">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2393899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393904">//&nbsp;Okay&nbsp;to&nbsp;round&nbsp;down&nbsp;(truncate)&nbsp;if&nbsp;lower&nbsp;has&nbsp;a&nbsp;different&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2393970">//&nbsp;or&nbsp;if&nbsp;lower&nbsp;is&nbsp;inclusive&nbsp;and&nbsp;is&nbsp;exactly&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;down.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394044">okdown</span>&nbsp;<span class="op" id="2394051">:=</span>&nbsp;<span class="ident" id="2394054"><a href="/gostd/strconv/ftoa.go.html#2393716">l</a></span>&nbsp;<span class="op" id="2394056">!=</span>&nbsp;<span class="ident" id="2394059"><a href="/gostd/strconv/ftoa.go.html#2393719">m</a></span>&nbsp;<span class="op" id="2394061">||</span>&nbsp;<span class="op" id="2394064">(</span><span class="ident" id="2394065"><a href="/gostd/strconv/ftoa.go.html#2393520">inclusive</a></span>&nbsp;<span class="op" id="2394075">&amp;&amp;</span>&nbsp;<span class="ident" id="2394078"><a href="/gostd/strconv/ftoa.go.html#2393716">l</a></span>&nbsp;<span class="op" id="2394080">==</span>&nbsp;<span class="ident" id="2394083"><a href="/gostd/strconv/ftoa.go.html#2393719">m</a></span>&nbsp;<span class="op" id="2394085">&amp;&amp;</span>&nbsp;<span class="ident" id="2394088"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span><span class="op" id="2394089">+</span><span class="num" id="2394090">1</span>&nbsp;<span class="op" id="2394092">==</span>&nbsp;<span class="ident" id="2394095"><a href="/gostd/strconv/ftoa.go.html#2393238">lower</a></span><span class="op" id="2394100">.</span><span class="ident" id="2394101"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span><span class="op" id="2394103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394108">//&nbsp;Okay&nbsp;to&nbsp;round&nbsp;up&nbsp;if&nbsp;upper&nbsp;has&nbsp;a&nbsp;different&nbsp;digit&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394165">//&nbsp;either&nbsp;upper&nbsp;is&nbsp;inclusive&nbsp;or&nbsp;upper&nbsp;is&nbsp;bigger&nbsp;than&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394247">okup</span>&nbsp;<span class="op" id="2394252">:=</span>&nbsp;<span class="ident" id="2394255"><a href="/gostd/strconv/ftoa.go.html#2393719">m</a></span>&nbsp;<span class="op" id="2394257">!=</span>&nbsp;<span class="ident" id="2394260"><a href="/gostd/strconv/ftoa.go.html#2393722">u</a></span>&nbsp;<span class="op" id="2394262">&amp;&amp;</span>&nbsp;<span class="op" id="2394265">(</span><span class="ident" id="2394266"><a href="/gostd/strconv/ftoa.go.html#2393520">inclusive</a></span>&nbsp;<span class="op" id="2394276">||</span>&nbsp;<span class="ident" id="2394279"><a href="/gostd/strconv/ftoa.go.html#2393719">m</a></span><span class="op" id="2394280">+</span><span class="num" id="2394281">1</span>&nbsp;<span class="op" id="2394283">&lt;</span>&nbsp;<span class="ident" id="2394285"><a href="/gostd/strconv/ftoa.go.html#2393722">u</a></span>&nbsp;<span class="op" id="2394287">||</span>&nbsp;<span class="ident" id="2394290"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span><span class="op" id="2394291">+</span><span class="num" id="2394292">1</span>&nbsp;<span class="op" id="2394294">&lt;</span>&nbsp;<span class="ident" id="2394296"><a href="/gostd/strconv/ftoa.go.html#2392618">upper</a></span><span class="op" id="2394301">.</span><span class="ident" id="2394302"><a href="/gostd/strconv/decimal.go.html#2357674">nd</a></span><span class="op" id="2394304">)</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394309">//&nbsp;If&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;do&nbsp;either,&nbsp;then&nbsp;round&nbsp;to&nbsp;the&nbsp;nearest&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394372">//&nbsp;If&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;do&nbsp;only&nbsp;one,&nbsp;do&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394413">switch</span>&nbsp;<span class="op" id="2394420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394424">case</span>&nbsp;<span class="ident" id="2394429"><a href="/gostd/strconv/ftoa.go.html#2394044">okdown</a></span>&nbsp;<span class="op" id="2394436">&amp;&amp;</span>&nbsp;<span class="ident" id="2394439"><a href="/gostd/strconv/ftoa.go.html#2394247">okup</a></span><span class="op" id="2394443">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394448"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2394449">.</span><span class="ident" id="2394450"><a href="/gostd/strconv/decimal.go.html#2364183">Round</a></span><span class="op" id="2394455">(</span><span class="ident" id="2394456"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span>&nbsp;<span class="op" id="2394458">+</span>&nbsp;<span class="num" id="2394460">1</span><span class="op" id="2394461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394466">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394475">case</span>&nbsp;<span class="ident" id="2394480"><a href="/gostd/strconv/ftoa.go.html#2394044">okdown</a></span><span class="op" id="2394486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394491"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2394492">.</span><span class="ident" id="2394493"><a href="/gostd/strconv/decimal.go.html#2364374">RoundDown</a></span><span class="op" id="2394502">(</span><span class="ident" id="2394503"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span>&nbsp;<span class="op" id="2394505">+</span>&nbsp;<span class="num" id="2394507">1</span><span class="op" id="2394508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394513">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394522">case</span>&nbsp;<span class="ident" id="2394527"><a href="/gostd/strconv/ftoa.go.html#2394247">okup</a></span><span class="op" id="2394531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394536"><a href="/gostd/strconv/ftoa.go.html#2391501">d</a></span><span class="op" id="2394537">.</span><span class="ident" id="2394538"><a href="/gostd/strconv/decimal.go.html#2364513">RoundUp</a></span><span class="op" id="2394545">(</span><span class="ident" id="2394546"><a href="/gostd/strconv/ftoa.go.html#2393686">i</a></span>&nbsp;<span class="op" id="2394548">+</span>&nbsp;<span class="num" id="2394550">1</span><span class="op" id="2394551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394556">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2394565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2394568">}</span><br>
<span class="lineno">325</span><span class="op" id="2394570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2394573">type</span>&nbsp;<span class="ident" id="2394578">decimalSlice</span>&nbsp;<span class="keyword" id="2394591">struct</span>&nbsp;<span class="op" id="2394598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394601">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2394608">[</span><span class="op" id="2394609">]</span><span class="builtintype" id="2394610">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394616">nd</span><span class="op" id="2394618">,</span>&nbsp;<span class="ident" id="2394620">dp</span>&nbsp;<span class="builtintype" id="2394623">int</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394628">neg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2394635">bool</span><br>
<span class="lineno"></span><span class="op" id="2394640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2394643">//&nbsp;%e:&nbsp;-d.ddddde±dd</span><br>
<span class="lineno"></span><span class="keyword" id="2394664">func</span>&nbsp;<span class="ident" id="2394669">fmtE</span><span class="op" id="2394673">(</span><span class="ident" id="2394674">dst</span>&nbsp;<span class="op" id="2394678">[</span><span class="op" id="2394679">]</span><span class="builtintype" id="2394680">byte</span><span class="op" id="2394684">,</span>&nbsp;<span class="ident" id="2394686">neg</span>&nbsp;<span class="builtintype" id="2394690">bool</span><span class="op" id="2394694">,</span>&nbsp;<span class="ident" id="2394696">d</span>&nbsp;<span class="ident" id="2394698"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><span class="op" id="2394710">,</span>&nbsp;<span class="ident" id="2394712">prec</span>&nbsp;<span class="builtintype" id="2394717">int</span><span class="op" id="2394720">,</span>&nbsp;<span class="ident" id="2394722">fmt</span>&nbsp;<span class="builtintype" id="2394726">byte</span><span class="op" id="2394730">)</span>&nbsp;<span class="op" id="2394732">[</span><span class="op" id="2394733">]</span><span class="builtintype" id="2394734">byte</span>&nbsp;<span class="op" id="2394739">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394742">//&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394751">if</span>&nbsp;<span class="ident" id="2394754"><a href="/gostd/strconv/ftoa.go.html#2394686">neg</a></span>&nbsp;<span class="op" id="2394758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394762"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2394766">=</span>&nbsp;<span class="builtinfunc" id="2394768">append</span><span class="op" id="2394774">(</span><span class="ident" id="2394775"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2394778">,</span>&nbsp;<span class="string" id="2394780">&#39;-&#39;</span><span class="op" id="2394783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2394786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394790">//&nbsp;first&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394806">ch</span>&nbsp;<span class="op" id="2394809">:=</span>&nbsp;<span class="builtintype" id="2394812">byte</span><span class="op" id="2394816">(</span><span class="string" id="2394817">&#39;0&#39;</span><span class="op" id="2394820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394823">if</span>&nbsp;<span class="ident" id="2394826"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2394827">.</span><span class="ident" id="2394828"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2394831">!=</span>&nbsp;<span class="num" id="2394834">0</span>&nbsp;<span class="op" id="2394836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394840"><a href="/gostd/strconv/ftoa.go.html#2394806">ch</a></span>&nbsp;<span class="op" id="2394843">=</span>&nbsp;<span class="ident" id="2394845"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2394846">.</span><span class="ident" id="2394847"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span><span class="op" id="2394848">[</span><span class="num" id="2394849">0</span><span class="op" id="2394850">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2394853">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394856"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2394860">=</span>&nbsp;<span class="builtinfunc" id="2394862">append</span><span class="op" id="2394868">(</span><span class="ident" id="2394869"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2394872">,</span>&nbsp;<span class="ident" id="2394874"><a href="/gostd/strconv/ftoa.go.html#2394806">ch</a></span><span class="op" id="2394876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2394880">//&nbsp;.moredigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394896">if</span>&nbsp;<span class="ident" id="2394899"><a href="/gostd/strconv/ftoa.go.html#2394712">prec</a></span>&nbsp;<span class="op" id="2394904">&gt;</span>&nbsp;<span class="num" id="2394906">0</span>&nbsp;<span class="op" id="2394908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394912"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2394916">=</span>&nbsp;<span class="builtinfunc" id="2394918">append</span><span class="op" id="2394924">(</span><span class="ident" id="2394925"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2394928">,</span>&nbsp;<span class="string" id="2394930">&#39;.&#39;</span><span class="op" id="2394933">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394937">i</span>&nbsp;<span class="op" id="2394939">:=</span>&nbsp;<span class="num" id="2394942">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2394946">m</span>&nbsp;<span class="op" id="2394948">:=</span>&nbsp;<span class="ident" id="2394951"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2394952">.</span><span class="ident" id="2394953"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2394956">+</span>&nbsp;<span class="ident" id="2394958"><a href="/gostd/strconv/ftoa.go.html#2394712">prec</a></span>&nbsp;<span class="op" id="2394963">+</span>&nbsp;<span class="num" id="2394965">1</span>&nbsp;<span class="op" id="2394967">-</span>&nbsp;<span class="ident" id="2394969"><a href="/gostd/strconv/ftoa.go.html#2396746">max</a></span><span class="op" id="2394972">(</span><span class="ident" id="2394973"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2394974">.</span><span class="ident" id="2394975"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><span class="op" id="2394977">,</span>&nbsp;<span class="ident" id="2394979"><a href="/gostd/strconv/ftoa.go.html#2394712">prec</a></span><span class="op" id="2394983">+</span><span class="num" id="2394984">1</span><span class="op" id="2394985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2394989">for</span>&nbsp;<span class="ident" id="2394993"><a href="/gostd/strconv/ftoa.go.html#2394937">i</a></span>&nbsp;<span class="op" id="2394995">&lt;</span>&nbsp;<span class="ident" id="2394997"><a href="/gostd/strconv/ftoa.go.html#2394946">m</a></span>&nbsp;<span class="op" id="2394999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395004"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395008">=</span>&nbsp;<span class="builtinfunc" id="2395010">append</span><span class="op" id="2395016">(</span><span class="ident" id="2395017"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395020">,</span>&nbsp;<span class="ident" id="2395022"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2395023">.</span><span class="ident" id="2395024"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span><span class="op" id="2395025">[</span><span class="ident" id="2395026"><a href="/gostd/strconv/ftoa.go.html#2394937">i</a></span><span class="op" id="2395027">]</span><span class="op" id="2395028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395033"><a href="/gostd/strconv/ftoa.go.html#2394937">i</a></span><span class="op" id="2395034">++</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395043">for</span>&nbsp;<span class="ident" id="2395047"><a href="/gostd/strconv/ftoa.go.html#2394937">i</a></span>&nbsp;<span class="op" id="2395049">&lt;=</span>&nbsp;<span class="ident" id="2395052"><a href="/gostd/strconv/ftoa.go.html#2394712">prec</a></span>&nbsp;<span class="op" id="2395057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395062"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395066">=</span>&nbsp;<span class="builtinfunc" id="2395068">append</span><span class="op" id="2395074">(</span><span class="ident" id="2395075"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395078">,</span>&nbsp;<span class="string" id="2395080">&#39;0&#39;</span><span class="op" id="2395083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395088"><a href="/gostd/strconv/ftoa.go.html#2394937">i</a></span><span class="op" id="2395089">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395094">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2395101">//&nbsp;e±</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395109"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395113">=</span>&nbsp;<span class="builtinfunc" id="2395115">append</span><span class="op" id="2395121">(</span><span class="ident" id="2395122"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395125">,</span>&nbsp;<span class="ident" id="2395127"><a href="/gostd/strconv/ftoa.go.html#2394722">fmt</a></span><span class="op" id="2395130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395133">exp</span>&nbsp;<span class="op" id="2395137">:=</span>&nbsp;<span class="ident" id="2395140"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2395141">.</span><span class="ident" id="2395142"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2395145">-</span>&nbsp;<span class="num" id="2395147">1</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395150">if</span>&nbsp;<span class="ident" id="2395153"><a href="/gostd/strconv/ftoa.go.html#2394696">d</a></span><span class="op" id="2395154">.</span><span class="ident" id="2395155"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2395158">==</span>&nbsp;<span class="num" id="2395161">0</span>&nbsp;<span class="op" id="2395163">{</span>&nbsp;<span class="comment" id="2395165">//&nbsp;special&nbsp;case:&nbsp;0&nbsp;has&nbsp;exponent&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395201"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span>&nbsp;<span class="op" id="2395205">=</span>&nbsp;<span class="num" id="2395207">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395213">if</span>&nbsp;<span class="ident" id="2395216"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span>&nbsp;<span class="op" id="2395220">&lt;</span>&nbsp;<span class="num" id="2395222">0</span>&nbsp;<span class="op" id="2395224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395228"><a href="/gostd/strconv/ftoa.go.html#2394806">ch</a></span>&nbsp;<span class="op" id="2395231">=</span>&nbsp;<span class="string" id="2395233">&#39;-&#39;</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395239"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span>&nbsp;<span class="op" id="2395243">=</span>&nbsp;<span class="op" id="2395245">-</span><span class="ident" id="2395246"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395251">}</span>&nbsp;<span class="keyword" id="2395253">else</span>&nbsp;<span class="op" id="2395258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395262"><a href="/gostd/strconv/ftoa.go.html#2394806">ch</a></span>&nbsp;<span class="op" id="2395265">=</span>&nbsp;<span class="string" id="2395267">&#39;+&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395275"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395279">=</span>&nbsp;<span class="builtinfunc" id="2395281">append</span><span class="op" id="2395287">(</span><span class="ident" id="2395288"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395291">,</span>&nbsp;<span class="ident" id="2395293"><a href="/gostd/strconv/ftoa.go.html#2394806">ch</a></span><span class="op" id="2395295">)</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2395299">//&nbsp;dddd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395308">var</span>&nbsp;<span class="ident" id="2395312">buf</span>&nbsp;<span class="op" id="2395316">[</span><span class="num" id="2395317">3</span><span class="op" id="2395318">]</span><span class="builtintype" id="2395319">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395325">i</span>&nbsp;<span class="op" id="2395327">:=</span>&nbsp;<span class="builtinfunc" id="2395330">len</span><span class="op" id="2395333">(</span><span class="ident" id="2395334"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395340">for</span>&nbsp;<span class="ident" id="2395344"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span>&nbsp;<span class="op" id="2395348">&gt;=</span>&nbsp;<span class="num" id="2395351">10</span>&nbsp;<span class="op" id="2395354">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395358"><a href="/gostd/strconv/ftoa.go.html#2395325">i</a></span><span class="op" id="2395359">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395364"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395367">[</span><span class="ident" id="2395368"><a href="/gostd/strconv/ftoa.go.html#2395325">i</a></span><span class="op" id="2395369">]</span>&nbsp;<span class="op" id="2395371">=</span>&nbsp;<span class="builtintype" id="2395373">byte</span><span class="op" id="2395377">(</span><span class="ident" id="2395378"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span><span class="op" id="2395381">%</span><span class="num" id="2395382">10</span>&nbsp;<span class="op" id="2395385">+</span>&nbsp;<span class="string" id="2395387">&#39;0&#39;</span><span class="op" id="2395390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395394"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span>&nbsp;<span class="op" id="2395398">/=</span>&nbsp;<span class="num" id="2395401">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2395408">//&nbsp;exp&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395421"><a href="/gostd/strconv/ftoa.go.html#2395325">i</a></span><span class="op" id="2395422">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395426"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395429">[</span><span class="ident" id="2395430"><a href="/gostd/strconv/ftoa.go.html#2395325">i</a></span><span class="op" id="2395431">]</span>&nbsp;<span class="op" id="2395433">=</span>&nbsp;<span class="builtintype" id="2395435">byte</span><span class="op" id="2395439">(</span><span class="ident" id="2395440"><a href="/gostd/strconv/ftoa.go.html#2395133">exp</a></span>&nbsp;<span class="op" id="2395444">+</span>&nbsp;<span class="string" id="2395446">&#39;0&#39;</span><span class="op" id="2395449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395453">switch</span>&nbsp;<span class="ident" id="2395460"><a href="/gostd/strconv/ftoa.go.html#2395325">i</a></span>&nbsp;<span class="op" id="2395462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395465">case</span>&nbsp;<span class="num" id="2395470">0</span><span class="op" id="2395471">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395475"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395479">=</span>&nbsp;<span class="builtinfunc" id="2395481">append</span><span class="op" id="2395487">(</span><span class="ident" id="2395488"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395491">,</span>&nbsp;<span class="ident" id="2395493"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395496">[</span><span class="num" id="2395497">0</span><span class="op" id="2395498">]</span><span class="op" id="2395499">,</span>&nbsp;<span class="ident" id="2395501"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395504">[</span><span class="num" id="2395505">1</span><span class="op" id="2395506">]</span><span class="op" id="2395507">,</span>&nbsp;<span class="ident" id="2395509"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395512">[</span><span class="num" id="2395513">2</span><span class="op" id="2395514">]</span><span class="op" id="2395515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395518">case</span>&nbsp;<span class="num" id="2395523">1</span><span class="op" id="2395524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395528"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395532">=</span>&nbsp;<span class="builtinfunc" id="2395534">append</span><span class="op" id="2395540">(</span><span class="ident" id="2395541"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395544">,</span>&nbsp;<span class="ident" id="2395546"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395549">[</span><span class="num" id="2395550">1</span><span class="op" id="2395551">]</span><span class="op" id="2395552">,</span>&nbsp;<span class="ident" id="2395554"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395557">[</span><span class="num" id="2395558">2</span><span class="op" id="2395559">]</span><span class="op" id="2395560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395563">case</span>&nbsp;<span class="num" id="2395568">2</span><span class="op" id="2395569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2395573">//&nbsp;leading&nbsp;zeroes</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395593"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span>&nbsp;<span class="op" id="2395597">=</span>&nbsp;<span class="builtinfunc" id="2395599">append</span><span class="op" id="2395605">(</span><span class="ident" id="2395606"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><span class="op" id="2395609">,</span>&nbsp;<span class="string" id="2395611">&#39;0&#39;</span><span class="op" id="2395614">,</span>&nbsp;<span class="ident" id="2395616"><a href="/gostd/strconv/ftoa.go.html#2395312">buf</a></span><span class="op" id="2395619">[</span><span class="num" id="2395620">2</span><span class="op" id="2395621">]</span><span class="op" id="2395622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395628">return</span>&nbsp;<span class="ident" id="2395635"><a href="/gostd/strconv/ftoa.go.html#2394674">dst</a></span><br>
<span class="lineno"></span><span class="op" id="2395639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="2395642">//&nbsp;%f:&nbsp;-ddddddd.ddddd</span><br>
<span class="lineno"></span><span class="keyword" id="2395664">func</span>&nbsp;<span class="ident" id="2395669">fmtF</span><span class="op" id="2395673">(</span><span class="ident" id="2395674">dst</span>&nbsp;<span class="op" id="2395678">[</span><span class="op" id="2395679">]</span><span class="builtintype" id="2395680">byte</span><span class="op" id="2395684">,</span>&nbsp;<span class="ident" id="2395686">neg</span>&nbsp;<span class="builtintype" id="2395690">bool</span><span class="op" id="2395694">,</span>&nbsp;<span class="ident" id="2395696">d</span>&nbsp;<span class="ident" id="2395698"><a href="/gostd/strconv/ftoa.go.html#2394578">decimalSlice</a></span><span class="op" id="2395710">,</span>&nbsp;<span class="ident" id="2395712">prec</span>&nbsp;<span class="builtintype" id="2395717">int</span><span class="op" id="2395720">)</span>&nbsp;<span class="op" id="2395722">[</span><span class="op" id="2395723">]</span><span class="builtintype" id="2395724">byte</span>&nbsp;<span class="op" id="2395729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2395732">//&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395741">if</span>&nbsp;<span class="ident" id="2395744"><a href="/gostd/strconv/ftoa.go.html#2395686">neg</a></span>&nbsp;<span class="op" id="2395748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395752"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span>&nbsp;<span class="op" id="2395756">=</span>&nbsp;<span class="builtinfunc" id="2395758">append</span><span class="op" id="2395764">(</span><span class="ident" id="2395765"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><span class="op" id="2395768">,</span>&nbsp;<span class="string" id="2395770">&#39;-&#39;</span><span class="op" id="2395773">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2395780">//&nbsp;integer,&nbsp;padded&nbsp;with&nbsp;zeros&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395822">if</span>&nbsp;<span class="ident" id="2395825"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2395826">.</span><span class="ident" id="2395827"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2395830">&gt;</span>&nbsp;<span class="num" id="2395832">0</span>&nbsp;<span class="op" id="2395834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395838">var</span>&nbsp;<span class="ident" id="2395842">i</span>&nbsp;<span class="builtintype" id="2395844">int</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395850">for</span>&nbsp;<span class="ident" id="2395854"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span>&nbsp;<span class="op" id="2395856">=</span>&nbsp;<span class="num" id="2395858">0</span><span class="op" id="2395859">;</span>&nbsp;<span class="ident" id="2395861"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span>&nbsp;<span class="op" id="2395863">&lt;</span>&nbsp;<span class="ident" id="2395865"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2395866">.</span><span class="ident" id="2395867"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2395870">&amp;&amp;</span>&nbsp;<span class="ident" id="2395873"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span>&nbsp;<span class="op" id="2395875">&lt;</span>&nbsp;<span class="ident" id="2395877"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2395878">.</span><span class="ident" id="2395879"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span><span class="op" id="2395881">;</span>&nbsp;<span class="ident" id="2395883"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span><span class="op" id="2395884">++</span>&nbsp;<span class="op" id="2395887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395892"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span>&nbsp;<span class="op" id="2395896">=</span>&nbsp;<span class="builtinfunc" id="2395898">append</span><span class="op" id="2395904">(</span><span class="ident" id="2395905"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><span class="op" id="2395908">,</span>&nbsp;<span class="ident" id="2395910"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2395911">.</span><span class="ident" id="2395912"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span><span class="op" id="2395913">[</span><span class="ident" id="2395914"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span><span class="op" id="2395915">]</span><span class="op" id="2395916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2395924">for</span>&nbsp;<span class="op" id="2395928">;</span>&nbsp;<span class="ident" id="2395930"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span>&nbsp;<span class="op" id="2395932">&lt;</span>&nbsp;<span class="ident" id="2395934"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2395935">.</span><span class="ident" id="2395936"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span><span class="op" id="2395938">;</span>&nbsp;<span class="ident" id="2395940"><a href="/gostd/strconv/ftoa.go.html#2395842">i</a></span><span class="op" id="2395941">++</span>&nbsp;<span class="op" id="2395944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395949"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span>&nbsp;<span class="op" id="2395953">=</span>&nbsp;<span class="builtinfunc" id="2395955">append</span><span class="op" id="2395961">(</span><span class="ident" id="2395962"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><span class="op" id="2395965">,</span>&nbsp;<span class="string" id="2395967">&#39;0&#39;</span><span class="op" id="2395970">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2395977">}</span>&nbsp;<span class="keyword" id="2395979">else</span>&nbsp;<span class="op" id="2395984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2395988"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span>&nbsp;<span class="op" id="2395992">=</span>&nbsp;<span class="builtinfunc" id="2395994">append</span><span class="op" id="2396000">(</span><span class="ident" id="2396001"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><span class="op" id="2396004">,</span>&nbsp;<span class="string" id="2396006">&#39;0&#39;</span><span class="op" id="2396009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2396016">//&nbsp;fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396029">if</span>&nbsp;<span class="ident" id="2396032"><a href="/gostd/strconv/ftoa.go.html#2395712">prec</a></span>&nbsp;<span class="op" id="2396037">&gt;</span>&nbsp;<span class="num" id="2396039">0</span>&nbsp;<span class="op" id="2396041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396045"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span>&nbsp;<span class="op" id="2396049">=</span>&nbsp;<span class="builtinfunc" id="2396051">append</span><span class="op" id="2396057">(</span><span class="ident" id="2396058"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><span class="op" id="2396061">,</span>&nbsp;<span class="string" id="2396063">&#39;.&#39;</span><span class="op" id="2396066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396070">for</span>&nbsp;<span class="ident" id="2396074">i</span>&nbsp;<span class="op" id="2396076">:=</span>&nbsp;<span class="num" id="2396079">0</span><span class="op" id="2396080">;</span>&nbsp;<span class="ident" id="2396082"><a href="/gostd/strconv/ftoa.go.html#2396074">i</a></span>&nbsp;<span class="op" id="2396084">&lt;</span>&nbsp;<span class="ident" id="2396086"><a href="/gostd/strconv/ftoa.go.html#2395712">prec</a></span><span class="op" id="2396090">;</span>&nbsp;<span class="ident" id="2396092"><a href="/gostd/strconv/ftoa.go.html#2396074">i</a></span><span class="op" id="2396093">++</span>&nbsp;<span class="op" id="2396096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396101">ch</span>&nbsp;<span class="op" id="2396104">:=</span>&nbsp;<span class="builtintype" id="2396107">byte</span><span class="op" id="2396111">(</span><span class="string" id="2396112">&#39;0&#39;</span><span class="op" id="2396115">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396120">if</span>&nbsp;<span class="ident" id="2396123">j</span>&nbsp;<span class="op" id="2396125">:=</span>&nbsp;<span class="ident" id="2396128"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2396129">.</span><span class="ident" id="2396130"><a href="/gostd/strconv/ftoa.go.html#2394620">dp</a></span>&nbsp;<span class="op" id="2396133">+</span>&nbsp;<span class="ident" id="2396135"><a href="/gostd/strconv/ftoa.go.html#2396074">i</a></span><span class="op" id="2396136">;</span>&nbsp;<span class="num" id="2396138">0</span>&nbsp;<span class="op" id="2396140">&lt;=</span>&nbsp;<span class="ident" id="2396143"><a href="/gostd/strconv/ftoa.go.html#2396123">j</a></span>&nbsp;<span class="op" id="2396145">&amp;&amp;</span>&nbsp;<span class="ident" id="2396148"><a href="/gostd/strconv/ftoa.go.html#2396123">j</a></span>&nbsp;<span class="op" id="2396150">&lt;</span>&nbsp;<span class="ident" id="2396152"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2396153">.</span><span class="ident" id="2396154"><a href="/gostd/strconv/ftoa.go.html#2394616">nd</a></span>&nbsp;<span class="op" id="2396157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396163"><a href="/gostd/strconv/ftoa.go.html#2396101">ch</a></span>&nbsp;<span class="op" id="2396166">=</span>&nbsp;<span class="ident" id="2396168"><a href="/gostd/strconv/ftoa.go.html#2395696">d</a></span><span class="op" id="2396169">.</span><span class="ident" id="2396170"><a href="/gostd/strconv/ftoa.go.html#2394601">d</a></span><span class="op" id="2396171">[</span><span class="ident" id="2396172"><a href="/gostd/strconv/ftoa.go.html#2396123">j</a></span><span class="op" id="2396173">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396183"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span>&nbsp;<span class="op" id="2396187">=</span>&nbsp;<span class="builtinfunc" id="2396189">append</span><span class="op" id="2396195">(</span><span class="ident" id="2396196"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><span class="op" id="2396199">,</span>&nbsp;<span class="ident" id="2396201"><a href="/gostd/strconv/ftoa.go.html#2396101">ch</a></span><span class="op" id="2396203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396207">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396214">return</span>&nbsp;<span class="ident" id="2396221"><a href="/gostd/strconv/ftoa.go.html#2395674">dst</a></span><br>
<span class="lineno"></span><span class="op" id="2396225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="comment" id="2396228">//&nbsp;%b:&nbsp;-ddddddddp+ddd</span><br>
<span class="lineno"></span><span class="keyword" id="2396250">func</span>&nbsp;<span class="ident" id="2396255">fmtB</span><span class="op" id="2396259">(</span><span class="ident" id="2396260">dst</span>&nbsp;<span class="op" id="2396264">[</span><span class="op" id="2396265">]</span><span class="builtintype" id="2396266">byte</span><span class="op" id="2396270">,</span>&nbsp;<span class="ident" id="2396272">neg</span>&nbsp;<span class="builtintype" id="2396276">bool</span><span class="op" id="2396280">,</span>&nbsp;<span class="ident" id="2396282">mant</span>&nbsp;<span class="builtintype" id="2396287">uint64</span><span class="op" id="2396293">,</span>&nbsp;<span class="ident" id="2396295">exp</span>&nbsp;<span class="builtintype" id="2396299">int</span><span class="op" id="2396302">,</span>&nbsp;<span class="ident" id="2396304">flt</span>&nbsp;<span class="op" id="2396308">*</span><span class="ident" id="2396309"><a href="/gostd/strconv/ftoa.go.html#2385845">floatInfo</a></span><span class="op" id="2396318">)</span>&nbsp;<span class="op" id="2396320">[</span><span class="op" id="2396321">]</span><span class="builtintype" id="2396322">byte</span>&nbsp;<span class="op" id="2396327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396330">var</span>&nbsp;<span class="ident" id="2396334">buf</span>&nbsp;<span class="op" id="2396338">[</span><span class="num" id="2396339">50</span><span class="op" id="2396341">]</span><span class="builtintype" id="2396342">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396348">w</span>&nbsp;<span class="op" id="2396350">:=</span>&nbsp;<span class="builtinfunc" id="2396353">len</span><span class="op" id="2396356">(</span><span class="ident" id="2396357"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396363"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span>&nbsp;<span class="op" id="2396367">-=</span>&nbsp;<span class="builtintype" id="2396370">int</span><span class="op" id="2396373">(</span><span class="ident" id="2396374"><a href="/gostd/strconv/ftoa.go.html#2396304">flt</a></span><span class="op" id="2396377">.</span><span class="ident" id="2396378"><a href="/gostd/strconv/ftoa.go.html#2385865">mantbits</a></span><span class="op" id="2396386">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396389">esign</span>&nbsp;<span class="op" id="2396395">:=</span>&nbsp;<span class="builtintype" id="2396398">byte</span><span class="op" id="2396402">(</span><span class="string" id="2396403">&#39;+&#39;</span><span class="op" id="2396406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396409">if</span>&nbsp;<span class="ident" id="2396412"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span>&nbsp;<span class="op" id="2396416">&lt;</span>&nbsp;<span class="num" id="2396418">0</span>&nbsp;<span class="op" id="2396420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396424"><a href="/gostd/strconv/ftoa.go.html#2396389">esign</a></span>&nbsp;<span class="op" id="2396430">=</span>&nbsp;<span class="string" id="2396432">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396438"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span>&nbsp;<span class="op" id="2396442">=</span>&nbsp;<span class="op" id="2396444">-</span><span class="ident" id="2396445"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396450">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396453">n</span>&nbsp;<span class="op" id="2396455">:=</span>&nbsp;<span class="num" id="2396458">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396461">for</span>&nbsp;<span class="ident" id="2396465"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span>&nbsp;<span class="op" id="2396469">&gt;</span>&nbsp;<span class="num" id="2396471">0</span>&nbsp;<span class="op" id="2396473">||</span>&nbsp;<span class="ident" id="2396476"><a href="/gostd/strconv/ftoa.go.html#2396453">n</a></span>&nbsp;<span class="op" id="2396478">&lt;</span>&nbsp;<span class="num" id="2396480">1</span>&nbsp;<span class="op" id="2396482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396486"><a href="/gostd/strconv/ftoa.go.html#2396453">n</a></span><span class="op" id="2396487">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396492"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396493">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396498"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396501">[</span><span class="ident" id="2396502"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396503">]</span>&nbsp;<span class="op" id="2396505">=</span>&nbsp;<span class="builtintype" id="2396507">byte</span><span class="op" id="2396511">(</span><span class="ident" id="2396512"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span><span class="op" id="2396515">%</span><span class="num" id="2396516">10</span>&nbsp;<span class="op" id="2396519">+</span>&nbsp;<span class="string" id="2396521">&#39;0&#39;</span><span class="op" id="2396524">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396528"><a href="/gostd/strconv/ftoa.go.html#2396295">exp</a></span>&nbsp;<span class="op" id="2396532">/=</span>&nbsp;<span class="num" id="2396535">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396542"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396543">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396547"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396550">[</span><span class="ident" id="2396551"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396552">]</span>&nbsp;<span class="op" id="2396554">=</span>&nbsp;<span class="ident" id="2396556"><a href="/gostd/strconv/ftoa.go.html#2396389">esign</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396563"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396564">--</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396568"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396571">[</span><span class="ident" id="2396572"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396573">]</span>&nbsp;<span class="op" id="2396575">=</span>&nbsp;<span class="string" id="2396577">&#39;p&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396582"><a href="/gostd/strconv/ftoa.go.html#2396453">n</a></span>&nbsp;<span class="op" id="2396584">=</span>&nbsp;<span class="num" id="2396586">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396589">for</span>&nbsp;<span class="ident" id="2396593"><a href="/gostd/strconv/ftoa.go.html#2396282">mant</a></span>&nbsp;<span class="op" id="2396598">&gt;</span>&nbsp;<span class="num" id="2396600">0</span>&nbsp;<span class="op" id="2396602">||</span>&nbsp;<span class="ident" id="2396605"><a href="/gostd/strconv/ftoa.go.html#2396453">n</a></span>&nbsp;<span class="op" id="2396607">&lt;</span>&nbsp;<span class="num" id="2396609">1</span>&nbsp;<span class="op" id="2396611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396615"><a href="/gostd/strconv/ftoa.go.html#2396453">n</a></span><span class="op" id="2396616">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396621"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396622">--</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396627"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396630">[</span><span class="ident" id="2396631"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396632">]</span>&nbsp;<span class="op" id="2396634">=</span>&nbsp;<span class="builtintype" id="2396636">byte</span><span class="op" id="2396640">(</span><span class="ident" id="2396641"><a href="/gostd/strconv/ftoa.go.html#2396282">mant</a></span><span class="op" id="2396645">%</span><span class="num" id="2396646">10</span>&nbsp;<span class="op" id="2396649">+</span>&nbsp;<span class="string" id="2396651">&#39;0&#39;</span><span class="op" id="2396654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396658"><a href="/gostd/strconv/ftoa.go.html#2396282">mant</a></span>&nbsp;<span class="op" id="2396663">/=</span>&nbsp;<span class="num" id="2396666">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396673">if</span>&nbsp;<span class="ident" id="2396676"><a href="/gostd/strconv/ftoa.go.html#2396272">neg</a></span>&nbsp;<span class="op" id="2396680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396684"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396685">--</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2396690"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396693">[</span><span class="ident" id="2396694"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396695">]</span>&nbsp;<span class="op" id="2396697">=</span>&nbsp;<span class="string" id="2396699">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396707">return</span>&nbsp;<span class="builtinfunc" id="2396714">append</span><span class="op" id="2396720">(</span><span class="ident" id="2396721"><a href="/gostd/strconv/ftoa.go.html#2396260">dst</a></span><span class="op" id="2396724">,</span>&nbsp;<span class="ident" id="2396726"><a href="/gostd/strconv/ftoa.go.html#2396334">buf</a></span><span class="op" id="2396729">[</span><span class="ident" id="2396730"><a href="/gostd/strconv/ftoa.go.html#2396348">w</a></span><span class="op" id="2396731">:</span><span class="op" id="2396732">]</span><span class="op" id="2396733">...</span><span class="op" id="2396736">)</span><br>
<span class="lineno"></span><span class="op" id="2396738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">470</span><span class="keyword" id="2396741">func</span>&nbsp;<span class="ident" id="2396746">max</span><span class="op" id="2396749">(</span><span class="ident" id="2396750">a</span><span class="op" id="2396751">,</span>&nbsp;<span class="ident" id="2396753">b</span>&nbsp;<span class="builtintype" id="2396755">int</span><span class="op" id="2396758">)</span>&nbsp;<span class="builtintype" id="2396760">int</span>&nbsp;<span class="op" id="2396764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396767">if</span>&nbsp;<span class="ident" id="2396770"><a href="/gostd/strconv/ftoa.go.html#2396750">a</a></span>&nbsp;<span class="op" id="2396772">&gt;</span>&nbsp;<span class="ident" id="2396774"><a href="/gostd/strconv/ftoa.go.html#2396753">b</a></span>&nbsp;<span class="op" id="2396776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396780">return</span>&nbsp;<span class="ident" id="2396787"><a href="/gostd/strconv/ftoa.go.html#2396750">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2396790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2396793">return</span>&nbsp;<span class="ident" id="2396800"><a href="/gostd/strconv/ftoa.go.html#2396753">b</a></span><br>
<span class="lineno">475</span><span class="op" id="2396802">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
