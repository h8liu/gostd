<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html" class="current">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5533566">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5533622">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5533676">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5533727">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5533797">package</span>&nbsp;<span class="ident" id="5533805">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5533811">import</span>&nbsp;<span class="op" id="5533818">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5533821">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5533831">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5533837">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5533847">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5533850">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5533940">var</span>&nbsp;<span class="ident" id="5533944">ErrNotFound</span>&nbsp;<span class="op" id="5533956">=</span>&nbsp;<span class="ident" id="5533958">errors</span><span class="op" id="5533964">.</span><span class="ident" id="5533965">New</span><span class="op" id="5533968">(</span><span class="string" id="5533969">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5534005">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5534008">func</span>&nbsp;<span class="ident" id="5534013">findExecutable</span><span class="op" id="5534027">(</span><span class="ident" id="5534028">file</span>&nbsp;<span class="builtintype" id="5534033">string</span><span class="op" id="5534039">)</span>&nbsp;<span class="builtintype" id="5534041">error</span>&nbsp;<span class="op" id="5534047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5534050">d</span><span class="op" id="5534051">,</span>&nbsp;<span class="ident" id="5534053">err</span>&nbsp;<span class="op" id="5534057">:=</span>&nbsp;<span class="ident" id="5534060">os</span><span class="op" id="5534062">.</span><span class="ident" id="5534063">Stat</span><span class="op" id="5534067">(</span><span class="ident" id="5534068">file</span><span class="op" id="5534072">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534075">if</span>&nbsp;<span class="ident" id="5534078">err</span>&nbsp;<span class="op" id="5534082">!=</span>&nbsp;<span class="builtintype" id="5534085">nil</span>&nbsp;<span class="op" id="5534089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534093">return</span>&nbsp;<span class="ident" id="5534100">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5534105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534108">if</span>&nbsp;<span class="ident" id="5534111">m</span>&nbsp;<span class="op" id="5534113">:=</span>&nbsp;<span class="ident" id="5534116">d</span><span class="op" id="5534117">.</span><span class="ident" id="5534118">Mode</span><span class="op" id="5534122">(</span><span class="op" id="5534123">)</span><span class="op" id="5534124">;</span>&nbsp;<span class="op" id="5534126">!</span><span class="ident" id="5534127">m</span><span class="op" id="5534128">.</span><span class="ident" id="5534129">IsDir</span><span class="op" id="5534134">(</span><span class="op" id="5534135">)</span>&nbsp;<span class="op" id="5534137">&amp;&amp;</span>&nbsp;<span class="ident" id="5534140">m</span><span class="op" id="5534141">&amp;</span><span class="num" id="5534142">0111</span>&nbsp;<span class="op" id="5534147">!=</span>&nbsp;<span class="num" id="5534150">0</span>&nbsp;<span class="op" id="5534152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534156">return</span>&nbsp;<span class="builtintype" id="5534163">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5534168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534171">return</span>&nbsp;<span class="ident" id="5534178">os</span><span class="op" id="5534180">.</span><span class="ident" id="5534181">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5534195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5534198">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5534255">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5534317">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5534398">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5534481">func</span>&nbsp;<span class="ident" id="5534486">LookPath</span><span class="op" id="5534494">(</span><span class="ident" id="5534495">file</span>&nbsp;<span class="builtintype" id="5534500">string</span><span class="op" id="5534506">)</span>&nbsp;<span class="op" id="5534508">(</span><span class="builtintype" id="5534509">string</span><span class="op" id="5534515">,</span>&nbsp;<span class="builtintype" id="5534517">error</span><span class="op" id="5534522">)</span>&nbsp;<span class="op" id="5534524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5534527">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5534587">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5534649">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534700">if</span>&nbsp;<span class="ident" id="5534703">strings</span><span class="op" id="5534710">.</span><span class="ident" id="5534711">Contains</span><span class="op" id="5534719">(</span><span class="ident" id="5534720">file</span><span class="op" id="5534724">,</span>&nbsp;<span class="string" id="5534726">&#34;/&#34;</span><span class="op" id="5534729">)</span>&nbsp;<span class="op" id="5534731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5534735">err</span>&nbsp;<span class="op" id="5534739">:=</span>&nbsp;<span class="ident" id="5534742">findExecutable</span><span class="op" id="5534756">(</span><span class="ident" id="5534757">file</span><span class="op" id="5534761">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534765">if</span>&nbsp;<span class="ident" id="5534768">err</span>&nbsp;<span class="op" id="5534772">==</span>&nbsp;<span class="builtintype" id="5534775">nil</span>&nbsp;<span class="op" id="5534779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534784">return</span>&nbsp;<span class="ident" id="5534791">file</span><span class="op" id="5534795">,</span>&nbsp;<span class="builtintype" id="5534797">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5534803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534807">return</span>&nbsp;<span class="string" id="5534814">&#34;&#34;</span><span class="op" id="5534816">,</span>&nbsp;<span class="op" id="5534818">&amp;</span><span class="ident" id="5534819">Error</span><span class="op" id="5534824">{</span><span class="ident" id="5534825">file</span><span class="op" id="5534829">,</span>&nbsp;<span class="ident" id="5534831">err</span><span class="op" id="5534834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5534837">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5534840">pathenv</span>&nbsp;<span class="op" id="5534848">:=</span>&nbsp;<span class="ident" id="5534851">os</span><span class="op" id="5534853">.</span><span class="ident" id="5534854">Getenv</span><span class="op" id="5534860">(</span><span class="string" id="5534861">&#34;PATH&#34;</span><span class="op" id="5534867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534870">if</span>&nbsp;<span class="ident" id="5534873">pathenv</span>&nbsp;<span class="op" id="5534881">==</span>&nbsp;<span class="string" id="5534884">&#34;&#34;</span>&nbsp;<span class="op" id="5534887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534891">return</span>&nbsp;<span class="string" id="5534898">&#34;&#34;</span><span class="op" id="5534900">,</span>&nbsp;<span class="op" id="5534902">&amp;</span><span class="ident" id="5534903">Error</span><span class="op" id="5534908">{</span><span class="ident" id="5534909">file</span><span class="op" id="5534913">,</span>&nbsp;<span class="ident" id="5534915">ErrNotFound</span><span class="op" id="5534926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5534929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534932">for</span>&nbsp;<span class="ident" id="5534936">_</span><span class="op" id="5534937">,</span>&nbsp;<span class="ident" id="5534939">dir</span>&nbsp;<span class="op" id="5534943">:=</span>&nbsp;<span class="keyword" id="5534946">range</span>&nbsp;<span class="ident" id="5534952">strings</span><span class="op" id="5534959">.</span><span class="ident" id="5534960">Split</span><span class="op" id="5534965">(</span><span class="ident" id="5534966">pathenv</span><span class="op" id="5534973">,</span>&nbsp;<span class="string" id="5534975">&#34;:&#34;</span><span class="op" id="5534978">)</span>&nbsp;<span class="op" id="5534980">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5534984">if</span>&nbsp;<span class="ident" id="5534987">dir</span>&nbsp;<span class="op" id="5534991">==</span>&nbsp;<span class="string" id="5534994">&#34;&#34;</span>&nbsp;<span class="op" id="5534997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5535002">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5535056">dir</span>&nbsp;<span class="op" id="5535060">=</span>&nbsp;<span class="string" id="5535062">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5535068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5535072">path</span>&nbsp;<span class="op" id="5535077">:=</span>&nbsp;<span class="ident" id="5535080">dir</span>&nbsp;<span class="op" id="5535084">+</span>&nbsp;<span class="string" id="5535086">&#34;/&#34;</span>&nbsp;<span class="op" id="5535090">+</span>&nbsp;<span class="ident" id="5535092">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5535099">if</span>&nbsp;<span class="ident" id="5535102">err</span>&nbsp;<span class="op" id="5535106">:=</span>&nbsp;<span class="ident" id="5535109">findExecutable</span><span class="op" id="5535123">(</span><span class="ident" id="5535124">path</span><span class="op" id="5535128">)</span><span class="op" id="5535129">;</span>&nbsp;<span class="ident" id="5535131">err</span>&nbsp;<span class="op" id="5535135">==</span>&nbsp;<span class="builtintype" id="5535138">nil</span>&nbsp;<span class="op" id="5535142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5535147">return</span>&nbsp;<span class="ident" id="5535154">path</span><span class="op" id="5535158">,</span>&nbsp;<span class="builtintype" id="5535160">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5535166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5535169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5535172">return</span>&nbsp;<span class="string" id="5535179">&#34;&#34;</span><span class="op" id="5535181">,</span>&nbsp;<span class="op" id="5535183">&amp;</span><span class="ident" id="5535184">Error</span><span class="op" id="5535189">{</span><span class="ident" id="5535190">file</span><span class="op" id="5535194">,</span>&nbsp;<span class="ident" id="5535196">ErrNotFound</span><span class="op" id="5535207">}</span><br>
<span class="lineno">60</span><span class="op" id="5535209">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
