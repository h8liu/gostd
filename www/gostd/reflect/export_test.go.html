<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html" class="current">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7314487">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7314543">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7314597">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7314648">package</span>&nbsp;<span class="ident" id="7314656">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7314665">//&nbsp;MakeRO&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;read-only&nbsp;flag&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="7314724">func</span>&nbsp;<span class="ident" id="7314729">MakeRO</span><span class="op" id="7314735">(</span><span class="ident" id="7314736">v</span>&nbsp;<span class="ident" id="7314738">Value</span><span class="op" id="7314743">)</span>&nbsp;<span class="ident" id="7314745">Value</span>&nbsp;<span class="op" id="7314751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314754">v</span><span class="op" id="7314755">.</span><span class="ident" id="7314756">flag</span>&nbsp;<span class="op" id="7314761">|=</span>&nbsp;<span class="ident" id="7314764">flagRO</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7314772">return</span>&nbsp;<span class="ident" id="7314779">v</span><br>
<span class="lineno"></span><span class="op" id="7314781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7314784">//&nbsp;IsRO&nbsp;reports&nbsp;whether&nbsp;v&#39;s&nbsp;read-only&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="7314835">func</span>&nbsp;<span class="ident" id="7314840">IsRO</span><span class="op" id="7314844">(</span><span class="ident" id="7314845">v</span>&nbsp;<span class="ident" id="7314847">Value</span><span class="op" id="7314852">)</span>&nbsp;<span class="builtintype" id="7314854">bool</span>&nbsp;<span class="op" id="7314859">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7314862">return</span>&nbsp;<span class="ident" id="7314869">v</span><span class="op" id="7314870">.</span><span class="ident" id="7314871">flag</span><span class="op" id="7314875">&amp;</span><span class="ident" id="7314876">flagRO</span>&nbsp;<span class="op" id="7314883">!=</span>&nbsp;<span class="num" id="7314886">0</span><br>
<span class="lineno"></span><span class="op" id="7314888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7314891">var</span>&nbsp;<span class="ident" id="7314895">ArrayOf</span>&nbsp;<span class="op" id="7314903">=</span>&nbsp;<span class="ident" id="7314905">arrayOf</span><br>
<span class="lineno"></span><span class="keyword" id="7314913">var</span>&nbsp;<span class="ident" id="7314917">CallGC</span>&nbsp;<span class="op" id="7314924">=</span>&nbsp;<span class="op" id="7314926">&amp;</span><span class="ident" id="7314927">callGC</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7314935">const</span>&nbsp;<span class="ident" id="7314941">PtrSize</span>&nbsp;<span class="op" id="7314949">=</span>&nbsp;<span class="ident" id="7314951">ptrSize</span><br>
<span class="lineno"></span><span class="keyword" id="7314959">const</span>&nbsp;<span class="ident" id="7314965">BitsPointer</span>&nbsp;<span class="op" id="7314977">=</span>&nbsp;<span class="ident" id="7314979">bitsPointer</span><br>
<span class="lineno"></span><span class="keyword" id="7314991">const</span>&nbsp;<span class="ident" id="7314997">BitsScalar</span>&nbsp;<span class="op" id="7315008">=</span>&nbsp;<span class="ident" id="7315010">bitsScalar</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7315022">func</span>&nbsp;<span class="ident" id="7315027">FuncLayout</span><span class="op" id="7315037">(</span><span class="ident" id="7315038">t</span>&nbsp;<span class="ident" id="7315040">Type</span><span class="op" id="7315044">,</span>&nbsp;<span class="ident" id="7315046">rcvr</span>&nbsp;<span class="ident" id="7315051">Type</span><span class="op" id="7315055">)</span>&nbsp;<span class="op" id="7315057">(</span><span class="ident" id="7315058">frametype</span>&nbsp;<span class="ident" id="7315068">Type</span><span class="op" id="7315072">,</span>&nbsp;<span class="ident" id="7315074">argSize</span><span class="op" id="7315081">,</span>&nbsp;<span class="ident" id="7315083">retOffset</span>&nbsp;<span class="builtintype" id="7315093">uintptr</span><span class="op" id="7315100">,</span>&nbsp;<span class="ident" id="7315102">stack</span>&nbsp;<span class="op" id="7315108">[</span><span class="op" id="7315109">]</span><span class="builtintype" id="7315110">byte</span><span class="op" id="7315114">)</span>&nbsp;<span class="op" id="7315116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315119">var</span>&nbsp;<span class="ident" id="7315123">ft</span>&nbsp;<span class="op" id="7315126">*</span><span class="ident" id="7315127">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315134">var</span>&nbsp;<span class="ident" id="7315138">s</span>&nbsp;<span class="op" id="7315140">*</span><span class="ident" id="7315141">bitVector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315152">if</span>&nbsp;<span class="ident" id="7315155">rcvr</span>&nbsp;<span class="op" id="7315160">!=</span>&nbsp;<span class="builtintype" id="7315163">nil</span>&nbsp;<span class="op" id="7315167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315171">ft</span><span class="op" id="7315173">,</span>&nbsp;<span class="ident" id="7315175">argSize</span><span class="op" id="7315182">,</span>&nbsp;<span class="ident" id="7315184">retOffset</span><span class="op" id="7315193">,</span>&nbsp;<span class="ident" id="7315195">s</span>&nbsp;<span class="op" id="7315197">=</span>&nbsp;<span class="ident" id="7315199">funcLayout</span><span class="op" id="7315209">(</span><span class="ident" id="7315210">t</span><span class="op" id="7315211">.</span><span class="op" id="7315212">(</span><span class="op" id="7315213">*</span><span class="ident" id="7315214">rtype</span><span class="op" id="7315219">)</span><span class="op" id="7315220">,</span>&nbsp;<span class="ident" id="7315222">rcvr</span><span class="op" id="7315226">.</span><span class="op" id="7315227">(</span><span class="op" id="7315228">*</span><span class="ident" id="7315229">rtype</span><span class="op" id="7315234">)</span><span class="op" id="7315235">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315238">}</span>&nbsp;<span class="keyword" id="7315240">else</span>&nbsp;<span class="op" id="7315245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315249">ft</span><span class="op" id="7315251">,</span>&nbsp;<span class="ident" id="7315253">argSize</span><span class="op" id="7315260">,</span>&nbsp;<span class="ident" id="7315262">retOffset</span><span class="op" id="7315271">,</span>&nbsp;<span class="ident" id="7315273">s</span>&nbsp;<span class="op" id="7315275">=</span>&nbsp;<span class="ident" id="7315277">funcLayout</span><span class="op" id="7315287">(</span><span class="ident" id="7315288">t</span><span class="op" id="7315289">.</span><span class="op" id="7315290">(</span><span class="op" id="7315291">*</span><span class="ident" id="7315292">rtype</span><span class="op" id="7315297">)</span><span class="op" id="7315298">,</span>&nbsp;<span class="builtintype" id="7315300">nil</span><span class="op" id="7315303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315309">frametype</span>&nbsp;<span class="op" id="7315319">=</span>&nbsp;<span class="ident" id="7315321">ft</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315325">for</span>&nbsp;<span class="ident" id="7315329">i</span>&nbsp;<span class="op" id="7315331">:=</span>&nbsp;<span class="builtintype" id="7315334">uint32</span><span class="op" id="7315340">(</span><span class="num" id="7315341">0</span><span class="op" id="7315342">)</span><span class="op" id="7315343">;</span>&nbsp;<span class="ident" id="7315345">i</span>&nbsp;<span class="op" id="7315347">&lt;</span>&nbsp;<span class="ident" id="7315349">s</span><span class="op" id="7315350">.</span><span class="ident" id="7315351">n</span><span class="op" id="7315352">;</span>&nbsp;<span class="ident" id="7315354">i</span>&nbsp;<span class="op" id="7315356">+=</span>&nbsp;<span class="num" id="7315359">2</span>&nbsp;<span class="op" id="7315361">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315365">stack</span>&nbsp;<span class="op" id="7315371">=</span>&nbsp;<span class="builtinfunc" id="7315373">append</span><span class="op" id="7315379">(</span><span class="ident" id="7315380">stack</span><span class="op" id="7315385">,</span>&nbsp;<span class="ident" id="7315387">s</span><span class="op" id="7315388">.</span><span class="ident" id="7315389">data</span><span class="op" id="7315393">[</span><span class="ident" id="7315394">i</span><span class="op" id="7315395">/</span><span class="num" id="7315396">8</span><span class="op" id="7315397">]</span><span class="op" id="7315398">&gt;&gt;</span><span class="op" id="7315400">(</span><span class="ident" id="7315401">i</span><span class="op" id="7315402">%</span><span class="num" id="7315403">8</span><span class="op" id="7315404">)</span><span class="op" id="7315405">&amp;</span><span class="num" id="7315406">3</span><span class="op" id="7315407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315413">return</span><br>
<span class="lineno"></span><span class="op" id="7315420">}</span>
</div>
</body>
</html>
