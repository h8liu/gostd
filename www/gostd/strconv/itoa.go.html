<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2028905">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2028960">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2029014">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2029065">package</span>&nbsp;<span class="ident" id="2029073">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2029082">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2029154">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2029228">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2029255">func</span>&nbsp;<span class="ident" id="2029260">FormatUint</span><span class="op" id="2029270">(</span><span class="ident" id="2029271">i</span>&nbsp;<span class="ident" id="2029273">uint64</span><span class="op" id="2029279">,</span>&nbsp;<span class="ident" id="2029281">base</span>&nbsp;<span class="builtintype" id="2029286">int</span><span class="op" id="2029289">)</span>&nbsp;<span class="builtintype" id="2029291">string</span>&nbsp;<span class="op" id="2029298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2029301">_</span><span class="op" id="2029302">,</span>&nbsp;<span class="ident" id="2029304">s</span>&nbsp;<span class="op" id="2029306">:=</span>&nbsp;<span class="ident" id="2029309">formatBits</span><span class="op" id="2029319">(</span><span class="ident" id="2029320">nil</span><span class="op" id="2029323">,</span>&nbsp;<span class="ident" id="2029325">i</span><span class="op" id="2029326">,</span>&nbsp;<span class="ident" id="2029328">base</span><span class="op" id="2029332">,</span>&nbsp;<span class="builtintype" id="2029334">false</span><span class="op" id="2029339">,</span>&nbsp;<span class="builtintype" id="2029341">false</span><span class="op" id="2029346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2029349">return</span>&nbsp;<span class="ident" id="2029356">s</span><br>
<span class="lineno"></span><span class="op" id="2029358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2029361">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2029432">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2029506">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2029533">func</span>&nbsp;<span class="ident" id="2029538">FormatInt</span><span class="op" id="2029547">(</span><span class="ident" id="2029548">i</span>&nbsp;<span class="ident" id="2029550">int64</span><span class="op" id="2029555">,</span>&nbsp;<span class="ident" id="2029557">base</span>&nbsp;<span class="builtintype" id="2029562">int</span><span class="op" id="2029565">)</span>&nbsp;<span class="builtintype" id="2029567">string</span>&nbsp;<span class="op" id="2029574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2029577">_</span><span class="op" id="2029578">,</span>&nbsp;<span class="ident" id="2029580">s</span>&nbsp;<span class="op" id="2029582">:=</span>&nbsp;<span class="ident" id="2029585">formatBits</span><span class="op" id="2029595">(</span><span class="ident" id="2029596">nil</span><span class="op" id="2029599">,</span>&nbsp;<span class="ident" id="2029601">uint64</span><span class="op" id="2029607">(</span><span class="ident" id="2029608">i</span><span class="op" id="2029609">)</span><span class="op" id="2029610">,</span>&nbsp;<span class="ident" id="2029612">base</span><span class="op" id="2029616">,</span>&nbsp;<span class="ident" id="2029618">i</span>&nbsp;<span class="op" id="2029620">&lt;</span>&nbsp;<span class="num" id="2029622">0</span><span class="op" id="2029623">,</span>&nbsp;<span class="builtintype" id="2029625">false</span><span class="op" id="2029630">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2029633">return</span>&nbsp;<span class="ident" id="2029640">s</span><br>
<span class="lineno"></span><span class="op" id="2029642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2029645">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2029688">func</span>&nbsp;<span class="ident" id="2029693">Itoa</span><span class="op" id="2029697">(</span><span class="ident" id="2029698">i</span>&nbsp;<span class="builtintype" id="2029700">int</span><span class="op" id="2029703">)</span>&nbsp;<span class="builtintype" id="2029705">string</span>&nbsp;<span class="op" id="2029712">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2029715">return</span>&nbsp;<span class="ident" id="2029722">FormatInt</span><span class="op" id="2029731">(</span><span class="ident" id="2029732">int64</span><span class="op" id="2029737">(</span><span class="ident" id="2029738">i</span><span class="op" id="2029739">)</span><span class="op" id="2029740">,</span>&nbsp;<span class="num" id="2029742">10</span><span class="op" id="2029744">)</span><br>
<span class="lineno"></span><span class="op" id="2029746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2029749">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2029804">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2029874">func</span>&nbsp;<span class="ident" id="2029879">AppendInt</span><span class="op" id="2029888">(</span><span class="ident" id="2029889">dst</span>&nbsp;<span class="op" id="2029893">[</span><span class="op" id="2029894">]</span><span class="builtintype" id="2029895">byte</span><span class="op" id="2029899">,</span>&nbsp;<span class="ident" id="2029901">i</span>&nbsp;<span class="ident" id="2029903">int64</span><span class="op" id="2029908">,</span>&nbsp;<span class="ident" id="2029910">base</span>&nbsp;<span class="builtintype" id="2029915">int</span><span class="op" id="2029918">)</span>&nbsp;<span class="op" id="2029920">[</span><span class="op" id="2029921">]</span><span class="builtintype" id="2029922">byte</span>&nbsp;<span class="op" id="2029927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2029930">dst</span><span class="op" id="2029933">,</span>&nbsp;<span class="ident" id="2029935">_</span>&nbsp;<span class="op" id="2029937">=</span>&nbsp;<span class="ident" id="2029939">formatBits</span><span class="op" id="2029949">(</span><span class="ident" id="2029950">dst</span><span class="op" id="2029953">,</span>&nbsp;<span class="ident" id="2029955">uint64</span><span class="op" id="2029961">(</span><span class="ident" id="2029962">i</span><span class="op" id="2029963">)</span><span class="op" id="2029964">,</span>&nbsp;<span class="ident" id="2029966">base</span><span class="op" id="2029970">,</span>&nbsp;<span class="ident" id="2029972">i</span>&nbsp;<span class="op" id="2029974">&lt;</span>&nbsp;<span class="num" id="2029976">0</span><span class="op" id="2029977">,</span>&nbsp;<span class="builtintype" id="2029979">true</span><span class="op" id="2029983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2029986">return</span>&nbsp;<span class="ident" id="2029993">dst</span><br>
<span class="lineno"></span><span class="op" id="2029997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2030000">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2030065">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2030136">func</span>&nbsp;<span class="ident" id="2030141">AppendUint</span><span class="op" id="2030151">(</span><span class="ident" id="2030152">dst</span>&nbsp;<span class="op" id="2030156">[</span><span class="op" id="2030157">]</span><span class="builtintype" id="2030158">byte</span><span class="op" id="2030162">,</span>&nbsp;<span class="ident" id="2030164">i</span>&nbsp;<span class="ident" id="2030166">uint64</span><span class="op" id="2030172">,</span>&nbsp;<span class="ident" id="2030174">base</span>&nbsp;<span class="builtintype" id="2030179">int</span><span class="op" id="2030182">)</span>&nbsp;<span class="op" id="2030184">[</span><span class="op" id="2030185">]</span><span class="builtintype" id="2030186">byte</span>&nbsp;<span class="op" id="2030191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2030194">dst</span><span class="op" id="2030197">,</span>&nbsp;<span class="ident" id="2030199">_</span>&nbsp;<span class="op" id="2030201">=</span>&nbsp;<span class="ident" id="2030203">formatBits</span><span class="op" id="2030213">(</span><span class="ident" id="2030214">dst</span><span class="op" id="2030217">,</span>&nbsp;<span class="ident" id="2030219">i</span><span class="op" id="2030220">,</span>&nbsp;<span class="ident" id="2030222">base</span><span class="op" id="2030226">,</span>&nbsp;<span class="builtintype" id="2030228">false</span><span class="op" id="2030233">,</span>&nbsp;<span class="builtintype" id="2030235">true</span><span class="op" id="2030239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2030242">return</span>&nbsp;<span class="ident" id="2030249">dst</span><br>
<span class="lineno">40</span><span class="op" id="2030253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2030256">const</span>&nbsp;<span class="op" id="2030262">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2030265">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2030274">=</span>&nbsp;<span class="string" id="2030276">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2030316">digits01</span>&nbsp;<span class="op" id="2030325">=</span>&nbsp;<span class="string" id="2030327">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2030431">digits10</span>&nbsp;<span class="op" id="2030440">=</span>&nbsp;<span class="string" id="2030442">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2030545">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2030548">var</span>&nbsp;<span class="ident" id="2030552">shifts</span>&nbsp;<span class="op" id="2030559">=</span>&nbsp;<span class="op" id="2030561">[</span><span class="builtinfunc" id="2030562">len</span><span class="op" id="2030565">(</span><span class="ident" id="2030566">digits</span><span class="op" id="2030572">)</span>&nbsp;<span class="op" id="2030574">+</span>&nbsp;<span class="num" id="2030576">1</span><span class="op" id="2030577">]</span><span class="builtintype" id="2030578">uint</span><span class="op" id="2030582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2030585">1</span>&nbsp;<span class="op" id="2030587">&lt;&lt;</span>&nbsp;<span class="num" id="2030590">1</span><span class="op" id="2030591">:</span>&nbsp;<span class="num" id="2030593">1</span><span class="op" id="2030594">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2030597">1</span>&nbsp;<span class="op" id="2030599">&lt;&lt;</span>&nbsp;<span class="num" id="2030602">2</span><span class="op" id="2030603">:</span>&nbsp;<span class="num" id="2030605">2</span><span class="op" id="2030606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2030609">1</span>&nbsp;<span class="op" id="2030611">&lt;&lt;</span>&nbsp;<span class="num" id="2030614">3</span><span class="op" id="2030615">:</span>&nbsp;<span class="num" id="2030617">3</span><span class="op" id="2030618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2030621">1</span>&nbsp;<span class="op" id="2030623">&lt;&lt;</span>&nbsp;<span class="num" id="2030626">4</span><span class="op" id="2030627">:</span>&nbsp;<span class="num" id="2030629">4</span><span class="op" id="2030630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2030633">1</span>&nbsp;<span class="op" id="2030635">&lt;&lt;</span>&nbsp;<span class="num" id="2030638">5</span><span class="op" id="2030639">:</span>&nbsp;<span class="num" id="2030641">5</span><span class="op" id="2030642">,</span><br>
<span class="lineno"></span><span class="op" id="2030644">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2030647">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2030720">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2030790">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2030860">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2030932">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2030963">//</span><br>
<span class="lineno"></span><span class="keyword" id="2030966">func</span>&nbsp;<span class="ident" id="2030971">formatBits</span><span class="op" id="2030981">(</span><span class="ident" id="2030982">dst</span>&nbsp;<span class="op" id="2030986">[</span><span class="op" id="2030987">]</span><span class="builtintype" id="2030988">byte</span><span class="op" id="2030992">,</span>&nbsp;<span class="ident" id="2030994">u</span>&nbsp;<span class="ident" id="2030996">uint64</span><span class="op" id="2031002">,</span>&nbsp;<span class="ident" id="2031004">base</span>&nbsp;<span class="builtintype" id="2031009">int</span><span class="op" id="2031012">,</span>&nbsp;<span class="ident" id="2031014">neg</span><span class="op" id="2031017">,</span>&nbsp;<span class="ident" id="2031019">append_</span>&nbsp;<span class="builtintype" id="2031027">bool</span><span class="op" id="2031031">)</span>&nbsp;<span class="op" id="2031033">(</span><span class="ident" id="2031034">d</span>&nbsp;<span class="op" id="2031036">[</span><span class="op" id="2031037">]</span><span class="builtintype" id="2031038">byte</span><span class="op" id="2031042">,</span>&nbsp;<span class="ident" id="2031044">s</span>&nbsp;<span class="builtintype" id="2031046">string</span><span class="op" id="2031052">)</span>&nbsp;<span class="op" id="2031054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031057">if</span>&nbsp;<span class="ident" id="2031060">base</span>&nbsp;<span class="op" id="2031065">&lt;</span>&nbsp;<span class="num" id="2031067">2</span>&nbsp;<span class="op" id="2031069">||</span>&nbsp;<span class="ident" id="2031072">base</span>&nbsp;<span class="op" id="2031077">&gt;</span>&nbsp;<span class="builtinfunc" id="2031079">len</span><span class="op" id="2031082">(</span><span class="ident" id="2031083">digits</span><span class="op" id="2031089">)</span>&nbsp;<span class="op" id="2031091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2031095">panic</span><span class="op" id="2031100">(</span><span class="string" id="2031101">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2031144">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031150">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031188">var</span>&nbsp;<span class="ident" id="2031192">a</span>&nbsp;<span class="op" id="2031194">[</span><span class="num" id="2031195">64</span>&nbsp;<span class="op" id="2031198">+</span>&nbsp;<span class="num" id="2031200">1</span><span class="op" id="2031201">]</span><span class="builtintype" id="2031202">byte</span>&nbsp;<span class="comment" id="2031207">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031248">i</span>&nbsp;<span class="op" id="2031250">:=</span>&nbsp;<span class="builtinfunc" id="2031253">len</span><span class="op" id="2031256">(</span><span class="ident" id="2031257">a</span><span class="op" id="2031258">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031262">if</span>&nbsp;<span class="ident" id="2031265">neg</span>&nbsp;<span class="op" id="2031269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031273">u</span>&nbsp;<span class="op" id="2031275">=</span>&nbsp;<span class="op" id="2031277">-</span><span class="ident" id="2031278">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031285">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031302">if</span>&nbsp;<span class="ident" id="2031305">base</span>&nbsp;<span class="op" id="2031310">==</span>&nbsp;<span class="num" id="2031313">10</span>&nbsp;<span class="op" id="2031316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031320">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031372">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031429">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031450">for</span>&nbsp;<span class="ident" id="2031454">u</span>&nbsp;<span class="op" id="2031456">&gt;=</span>&nbsp;<span class="num" id="2031459">100</span>&nbsp;<span class="op" id="2031463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031468">i</span>&nbsp;<span class="op" id="2031470">-=</span>&nbsp;<span class="num" id="2031473">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031478">q</span>&nbsp;<span class="op" id="2031480">:=</span>&nbsp;<span class="ident" id="2031483">u</span>&nbsp;<span class="op" id="2031485">/</span>&nbsp;<span class="num" id="2031487">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031494">j</span>&nbsp;<span class="op" id="2031496">:=</span>&nbsp;<span class="builtintype" id="2031499">uintptr</span><span class="op" id="2031506">(</span><span class="ident" id="2031507">u</span>&nbsp;<span class="op" id="2031509">-</span>&nbsp;<span class="ident" id="2031511">q</span><span class="op" id="2031512">*</span><span class="num" id="2031513">100</span><span class="op" id="2031516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031521">a</span><span class="op" id="2031522">[</span><span class="ident" id="2031523">i</span><span class="op" id="2031524">+</span><span class="num" id="2031525">1</span><span class="op" id="2031526">]</span>&nbsp;<span class="op" id="2031528">=</span>&nbsp;<span class="ident" id="2031530">digits01</span><span class="op" id="2031538">[</span><span class="ident" id="2031539">j</span><span class="op" id="2031540">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031545">a</span><span class="op" id="2031546">[</span><span class="ident" id="2031547">i</span><span class="op" id="2031548">+</span><span class="num" id="2031549">0</span><span class="op" id="2031550">]</span>&nbsp;<span class="op" id="2031552">=</span>&nbsp;<span class="ident" id="2031554">digits10</span><span class="op" id="2031562">[</span><span class="ident" id="2031563">j</span><span class="op" id="2031564">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031569">u</span>&nbsp;<span class="op" id="2031571">=</span>&nbsp;<span class="ident" id="2031573">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031581">if</span>&nbsp;<span class="ident" id="2031584">u</span>&nbsp;<span class="op" id="2031586">&gt;=</span>&nbsp;<span class="num" id="2031589">10</span>&nbsp;<span class="op" id="2031592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031597">i</span><span class="op" id="2031598">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031604">q</span>&nbsp;<span class="op" id="2031606">:=</span>&nbsp;<span class="ident" id="2031609">u</span>&nbsp;<span class="op" id="2031611">/</span>&nbsp;<span class="num" id="2031613">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031619">a</span><span class="op" id="2031620">[</span><span class="ident" id="2031621">i</span><span class="op" id="2031622">]</span>&nbsp;<span class="op" id="2031624">=</span>&nbsp;<span class="ident" id="2031626">digits</span><span class="op" id="2031632">[</span><span class="builtintype" id="2031633">uintptr</span><span class="op" id="2031640">(</span><span class="ident" id="2031641">u</span><span class="op" id="2031642">-</span><span class="ident" id="2031643">q</span><span class="op" id="2031644">*</span><span class="num" id="2031645">10</span><span class="op" id="2031647">)</span><span class="op" id="2031648">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031653">u</span>&nbsp;<span class="op" id="2031655">=</span>&nbsp;<span class="ident" id="2031657">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031665">}</span>&nbsp;<span class="keyword" id="2031667">else</span>&nbsp;<span class="keyword" id="2031672">if</span>&nbsp;<span class="ident" id="2031675">s</span>&nbsp;<span class="op" id="2031677">:=</span>&nbsp;<span class="ident" id="2031680">shifts</span><span class="op" id="2031686">[</span><span class="ident" id="2031687">base</span><span class="op" id="2031691">]</span><span class="op" id="2031692">;</span>&nbsp;<span class="ident" id="2031694">s</span>&nbsp;<span class="op" id="2031696">&gt;</span>&nbsp;<span class="num" id="2031698">0</span>&nbsp;<span class="op" id="2031700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031704">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031769">b</span>&nbsp;<span class="op" id="2031771">:=</span>&nbsp;<span class="ident" id="2031774">uint64</span><span class="op" id="2031780">(</span><span class="ident" id="2031781">base</span><span class="op" id="2031785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031789">m</span>&nbsp;<span class="op" id="2031791">:=</span>&nbsp;<span class="builtintype" id="2031794">uintptr</span><span class="op" id="2031801">(</span><span class="ident" id="2031802">b</span><span class="op" id="2031803">)</span>&nbsp;<span class="op" id="2031805">-</span>&nbsp;<span class="num" id="2031807">1</span>&nbsp;<span class="comment" id="2031809">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031826">for</span>&nbsp;<span class="ident" id="2031830">u</span>&nbsp;<span class="op" id="2031832">&gt;=</span>&nbsp;<span class="ident" id="2031835">b</span>&nbsp;<span class="op" id="2031837">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031842">i</span><span class="op" id="2031843">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031849">a</span><span class="op" id="2031850">[</span><span class="ident" id="2031851">i</span><span class="op" id="2031852">]</span>&nbsp;<span class="op" id="2031854">=</span>&nbsp;<span class="ident" id="2031856">digits</span><span class="op" id="2031862">[</span><span class="builtintype" id="2031863">uintptr</span><span class="op" id="2031870">(</span><span class="ident" id="2031871">u</span><span class="op" id="2031872">)</span><span class="op" id="2031873">&amp;</span><span class="ident" id="2031874">m</span><span class="op" id="2031875">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031880">u</span>&nbsp;<span class="op" id="2031882">&gt;&gt;=</span>&nbsp;<span class="ident" id="2031886">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2031894">}</span>&nbsp;<span class="keyword" id="2031896">else</span>&nbsp;<span class="op" id="2031901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2031905">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031923">b</span>&nbsp;<span class="op" id="2031925">:=</span>&nbsp;<span class="ident" id="2031928">uint64</span><span class="op" id="2031934">(</span><span class="ident" id="2031935">base</span><span class="op" id="2031939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2031943">for</span>&nbsp;<span class="ident" id="2031947">u</span>&nbsp;<span class="op" id="2031949">&gt;=</span>&nbsp;<span class="ident" id="2031952">b</span>&nbsp;<span class="op" id="2031954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031959">i</span><span class="op" id="2031960">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031966">a</span><span class="op" id="2031967">[</span><span class="ident" id="2031968">i</span><span class="op" id="2031969">]</span>&nbsp;<span class="op" id="2031971">=</span>&nbsp;<span class="ident" id="2031973">digits</span><span class="op" id="2031979">[</span><span class="builtintype" id="2031980">uintptr</span><span class="op" id="2031987">(</span><span class="ident" id="2031988">u</span><span class="op" id="2031989">%</span><span class="ident" id="2031990">b</span><span class="op" id="2031991">)</span><span class="op" id="2031992">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2031997">u</span>&nbsp;<span class="op" id="2031999">/=</span>&nbsp;<span class="ident" id="2032002">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2032006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2032009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2032013">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2032026">i</span><span class="op" id="2032027">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2032031">a</span><span class="op" id="2032032">[</span><span class="ident" id="2032033">i</span><span class="op" id="2032034">]</span>&nbsp;<span class="op" id="2032036">=</span>&nbsp;<span class="ident" id="2032038">digits</span><span class="op" id="2032044">[</span><span class="builtintype" id="2032045">uintptr</span><span class="op" id="2032052">(</span><span class="ident" id="2032053">u</span><span class="op" id="2032054">)</span><span class="op" id="2032055">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2032059">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2032080">if</span>&nbsp;<span class="ident" id="2032083">neg</span>&nbsp;<span class="op" id="2032087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2032091">i</span><span class="op" id="2032092">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2032097">a</span><span class="op" id="2032098">[</span><span class="ident" id="2032099">i</span><span class="op" id="2032100">]</span>&nbsp;<span class="op" id="2032102">=</span>&nbsp;<span class="string" id="2032104">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2032109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2032113">if</span>&nbsp;<span class="ident" id="2032116">append_</span>&nbsp;<span class="op" id="2032124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2032128">d</span>&nbsp;<span class="op" id="2032130">=</span>&nbsp;<span class="builtinfunc" id="2032132">append</span><span class="op" id="2032138">(</span><span class="ident" id="2032139">dst</span><span class="op" id="2032142">,</span>&nbsp;<span class="ident" id="2032144">a</span><span class="op" id="2032145">[</span><span class="ident" id="2032146">i</span><span class="op" id="2032147">:</span><span class="op" id="2032148">]</span><span class="op" id="2032149">...</span><span class="op" id="2032152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2032156">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2032164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2032167">s</span>&nbsp;<span class="op" id="2032169">=</span>&nbsp;<span class="builtintype" id="2032171">string</span><span class="op" id="2032177">(</span><span class="ident" id="2032178">a</span><span class="op" id="2032179">[</span><span class="ident" id="2032180">i</span><span class="op" id="2032181">:</span><span class="op" id="2032182">]</span><span class="op" id="2032183">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2032186">return</span><br>
<span class="lineno"></span><span class="op" id="2032193">}</span>
</div>
</body>
</html>
