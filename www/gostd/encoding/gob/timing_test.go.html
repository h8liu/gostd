<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html" class="current">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8494878">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8494933">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8494987">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8495038">package</span>&nbsp;<span class="ident" id="8495046">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8495051">import</span>&nbsp;<span class="op" id="8495058">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8495061">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8495070">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8495076">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8495082">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8495093">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8495103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8495106">type</span>&nbsp;<span class="ident" id="8495111">Bench</span>&nbsp;<span class="keyword" id="8495117">struct</span>&nbsp;<span class="op" id="8495124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495127">A</span>&nbsp;<span class="builtintype" id="8495129">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495134">B</span>&nbsp;<span class="builtintype" id="8495136">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495145">C</span>&nbsp;<span class="builtintype" id="8495147">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495155">D</span>&nbsp;<span class="op" id="8495157">[</span><span class="op" id="8495158">]</span><span class="builtintype" id="8495159">byte</span><br>
<span class="lineno">20</span><span class="op" id="8495164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8495167">func</span>&nbsp;<span class="ident" id="8495172">benchmarkEndToEnd</span><span class="op" id="8495189">(</span><span class="ident" id="8495190">b</span>&nbsp;<span class="op" id="8495192">*</span><span class="ident" id="8495193">testing</span><span class="op" id="8495200">.</span><span class="ident" id="8495201">B</span><span class="op" id="8495202">,</span>&nbsp;<span class="ident" id="8495204">ctor</span>&nbsp;<span class="keyword" id="8495209">func</span><span class="op" id="8495213">(</span><span class="op" id="8495214">)</span>&nbsp;<span class="keyword" id="8495216">interface</span><span class="op" id="8495225">{</span><span class="op" id="8495226">}</span><span class="op" id="8495227">,</span>&nbsp;<span class="ident" id="8495229">pipe</span>&nbsp;<span class="keyword" id="8495234">func</span><span class="op" id="8495238">(</span><span class="op" id="8495239">)</span>&nbsp;<span class="op" id="8495241">(</span><span class="ident" id="8495242">r</span>&nbsp;<span class="ident" id="8495244">io</span><span class="op" id="8495246">.</span><span class="ident" id="8495247">Reader</span><span class="op" id="8495253">,</span>&nbsp;<span class="ident" id="8495255">w</span>&nbsp;<span class="ident" id="8495257">io</span><span class="op" id="8495259">.</span><span class="ident" id="8495260">Writer</span><span class="op" id="8495266">,</span>&nbsp;<span class="ident" id="8495268">err</span>&nbsp;<span class="builtintype" id="8495272">error</span><span class="op" id="8495277">)</span><span class="op" id="8495278">)</span>&nbsp;<span class="op" id="8495280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495283">b</span><span class="op" id="8495284">.</span><span class="ident" id="8495285">RunParallel</span><span class="op" id="8495296">(</span><span class="keyword" id="8495297">func</span><span class="op" id="8495301">(</span><span class="ident" id="8495302">pb</span>&nbsp;<span class="op" id="8495305">*</span><span class="ident" id="8495306">testing</span><span class="op" id="8495313">.</span><span class="ident" id="8495314">PB</span><span class="op" id="8495316">)</span>&nbsp;<span class="op" id="8495318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495322">r</span><span class="op" id="8495323">,</span>&nbsp;<span class="ident" id="8495325">w</span><span class="op" id="8495326">,</span>&nbsp;<span class="ident" id="8495328">err</span>&nbsp;<span class="op" id="8495332">:=</span>&nbsp;<span class="ident" id="8495335">pipe</span><span class="op" id="8495339">(</span><span class="op" id="8495340">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8495344">if</span>&nbsp;<span class="ident" id="8495347">err</span>&nbsp;<span class="op" id="8495351">!=</span>&nbsp;<span class="ident" id="8495354">nil</span>&nbsp;<span class="op" id="8495358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495363">b</span><span class="op" id="8495364">.</span><span class="ident" id="8495365">Fatal</span><span class="op" id="8495370">(</span><span class="string" id="8495371">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="8495388">,</span>&nbsp;<span class="ident" id="8495390">err</span><span class="op" id="8495393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495401">v</span>&nbsp;<span class="op" id="8495403">:=</span>&nbsp;<span class="ident" id="8495406">ctor</span><span class="op" id="8495410">(</span><span class="op" id="8495411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495415">enc</span>&nbsp;<span class="op" id="8495419">:=</span>&nbsp;<span class="ident" id="8495422">NewEncoder</span><span class="op" id="8495432">(</span><span class="ident" id="8495433">w</span><span class="op" id="8495434">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495438">dec</span>&nbsp;<span class="op" id="8495442">:=</span>&nbsp;<span class="ident" id="8495445">NewDecoder</span><span class="op" id="8495455">(</span><span class="ident" id="8495456">r</span><span class="op" id="8495457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8495461">for</span>&nbsp;<span class="ident" id="8495465">pb</span><span class="op" id="8495467">.</span><span class="ident" id="8495468">Next</span><span class="op" id="8495472">(</span><span class="op" id="8495473">)</span>&nbsp;<span class="op" id="8495475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8495480">if</span>&nbsp;<span class="ident" id="8495483">err</span>&nbsp;<span class="op" id="8495487">:=</span>&nbsp;<span class="ident" id="8495490">enc</span><span class="op" id="8495493">.</span><span class="ident" id="8495494">Encode</span><span class="op" id="8495500">(</span><span class="ident" id="8495501">v</span><span class="op" id="8495502">)</span><span class="op" id="8495503">;</span>&nbsp;<span class="ident" id="8495505">err</span>&nbsp;<span class="op" id="8495509">!=</span>&nbsp;<span class="ident" id="8495512">nil</span>&nbsp;<span class="op" id="8495516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495522">b</span><span class="op" id="8495523">.</span><span class="ident" id="8495524">Fatal</span><span class="op" id="8495529">(</span><span class="string" id="8495530">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8495545">,</span>&nbsp;<span class="ident" id="8495547">err</span><span class="op" id="8495550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495555">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8495560">if</span>&nbsp;<span class="ident" id="8495563">err</span>&nbsp;<span class="op" id="8495567">:=</span>&nbsp;<span class="ident" id="8495570">dec</span><span class="op" id="8495573">.</span><span class="ident" id="8495574">Decode</span><span class="op" id="8495580">(</span><span class="ident" id="8495581">v</span><span class="op" id="8495582">)</span><span class="op" id="8495583">;</span>&nbsp;<span class="ident" id="8495585">err</span>&nbsp;<span class="op" id="8495589">!=</span>&nbsp;<span class="ident" id="8495592">nil</span>&nbsp;<span class="op" id="8495596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495602">b</span><span class="op" id="8495603">.</span><span class="ident" id="8495604">Fatal</span><span class="op" id="8495609">(</span><span class="string" id="8495610">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8495625">,</span>&nbsp;<span class="ident" id="8495627">err</span><span class="op" id="8495630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495642">}</span><span class="op" id="8495643">)</span><br>
<span class="lineno">40</span><span class="op" id="8495645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8495648">func</span>&nbsp;<span class="ident" id="8495653">BenchmarkEndToEndPipe</span><span class="op" id="8495674">(</span><span class="ident" id="8495675">b</span>&nbsp;<span class="op" id="8495677">*</span><span class="ident" id="8495678">testing</span><span class="op" id="8495685">.</span><span class="ident" id="8495686">B</span><span class="op" id="8495687">)</span>&nbsp;<span class="op" id="8495689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495692">benchmarkEndToEnd</span><span class="op" id="8495709">(</span><span class="ident" id="8495710">b</span><span class="op" id="8495711">,</span>&nbsp;<span class="keyword" id="8495713">func</span><span class="op" id="8495717">(</span><span class="op" id="8495718">)</span>&nbsp;<span class="keyword" id="8495720">interface</span><span class="op" id="8495729">{</span><span class="op" id="8495730">}</span>&nbsp;<span class="op" id="8495732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8495736">return</span>&nbsp;<span class="op" id="8495743">&amp;</span><span class="ident" id="8495744">Bench</span><span class="op" id="8495749">{</span><span class="num" id="8495750">7</span><span class="op" id="8495751">,</span>&nbsp;<span class="num" id="8495753">3.2</span><span class="op" id="8495756">,</span>&nbsp;<span class="string" id="8495758">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8495775">,</span>&nbsp;<span class="ident" id="8495777">bytes</span><span class="op" id="8495782">.</span><span class="ident" id="8495783">Repeat</span><span class="op" id="8495789">(</span><span class="op" id="8495790">[</span><span class="op" id="8495791">]</span><span class="builtintype" id="8495792">byte</span><span class="op" id="8495796">(</span><span class="string" id="8495797">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8495815">)</span><span class="op" id="8495816">,</span>&nbsp;<span class="num" id="8495818">100</span><span class="op" id="8495821">)</span><span class="op" id="8495822">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495825">}</span><span class="op" id="8495826">,</span>&nbsp;<span class="keyword" id="8495828">func</span><span class="op" id="8495832">(</span><span class="op" id="8495833">)</span>&nbsp;<span class="op" id="8495835">(</span><span class="ident" id="8495836">r</span>&nbsp;<span class="ident" id="8495838">io</span><span class="op" id="8495840">.</span><span class="ident" id="8495841">Reader</span><span class="op" id="8495847">,</span>&nbsp;<span class="ident" id="8495849">w</span>&nbsp;<span class="ident" id="8495851">io</span><span class="op" id="8495853">.</span><span class="ident" id="8495854">Writer</span><span class="op" id="8495860">,</span>&nbsp;<span class="ident" id="8495862">err</span>&nbsp;<span class="builtintype" id="8495866">error</span><span class="op" id="8495871">)</span>&nbsp;<span class="op" id="8495873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495877">r</span><span class="op" id="8495878">,</span>&nbsp;<span class="ident" id="8495880">w</span><span class="op" id="8495881">,</span>&nbsp;<span class="ident" id="8495883">err</span>&nbsp;<span class="op" id="8495887">=</span>&nbsp;<span class="ident" id="8495889">os</span><span class="op" id="8495891">.</span><span class="ident" id="8495892">Pipe</span><span class="op" id="8495896">(</span><span class="op" id="8495897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8495901">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8495909">}</span><span class="op" id="8495910">)</span><br>
<span class="lineno"></span><span class="op" id="8495912">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8495915">func</span>&nbsp;<span class="ident" id="8495920">BenchmarkEndToEndByteBuffer</span><span class="op" id="8495947">(</span><span class="ident" id="8495948">b</span>&nbsp;<span class="op" id="8495950">*</span><span class="ident" id="8495951">testing</span><span class="op" id="8495958">.</span><span class="ident" id="8495959">B</span><span class="op" id="8495960">)</span>&nbsp;<span class="op" id="8495962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8495965">benchmarkEndToEnd</span><span class="op" id="8495982">(</span><span class="ident" id="8495983">b</span><span class="op" id="8495984">,</span>&nbsp;<span class="keyword" id="8495986">func</span><span class="op" id="8495990">(</span><span class="op" id="8495991">)</span>&nbsp;<span class="keyword" id="8495993">interface</span><span class="op" id="8496002">{</span><span class="op" id="8496003">}</span>&nbsp;<span class="op" id="8496005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496009">return</span>&nbsp;<span class="op" id="8496016">&amp;</span><span class="ident" id="8496017">Bench</span><span class="op" id="8496022">{</span><span class="num" id="8496023">7</span><span class="op" id="8496024">,</span>&nbsp;<span class="num" id="8496026">3.2</span><span class="op" id="8496029">,</span>&nbsp;<span class="string" id="8496031">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8496048">,</span>&nbsp;<span class="ident" id="8496050">bytes</span><span class="op" id="8496055">.</span><span class="ident" id="8496056">Repeat</span><span class="op" id="8496062">(</span><span class="op" id="8496063">[</span><span class="op" id="8496064">]</span><span class="builtintype" id="8496065">byte</span><span class="op" id="8496069">(</span><span class="string" id="8496070">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8496088">)</span><span class="op" id="8496089">,</span>&nbsp;<span class="num" id="8496091">100</span><span class="op" id="8496094">)</span><span class="op" id="8496095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496098">}</span><span class="op" id="8496099">,</span>&nbsp;<span class="keyword" id="8496101">func</span><span class="op" id="8496105">(</span><span class="op" id="8496106">)</span>&nbsp;<span class="op" id="8496108">(</span><span class="ident" id="8496109">r</span>&nbsp;<span class="ident" id="8496111">io</span><span class="op" id="8496113">.</span><span class="ident" id="8496114">Reader</span><span class="op" id="8496120">,</span>&nbsp;<span class="ident" id="8496122">w</span>&nbsp;<span class="ident" id="8496124">io</span><span class="op" id="8496126">.</span><span class="ident" id="8496127">Writer</span><span class="op" id="8496133">,</span>&nbsp;<span class="ident" id="8496135">err</span>&nbsp;<span class="builtintype" id="8496139">error</span><span class="op" id="8496144">)</span>&nbsp;<span class="op" id="8496146">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496150">var</span>&nbsp;<span class="ident" id="8496154">buf</span>&nbsp;<span class="ident" id="8496158">bytes</span><span class="op" id="8496163">.</span><span class="ident" id="8496164">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496173">return</span>&nbsp;<span class="op" id="8496180">&amp;</span><span class="ident" id="8496181">buf</span><span class="op" id="8496184">,</span>&nbsp;<span class="op" id="8496186">&amp;</span><span class="ident" id="8496187">buf</span><span class="op" id="8496190">,</span>&nbsp;<span class="ident" id="8496192">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496197">}</span><span class="op" id="8496198">)</span><br>
<span class="lineno"></span><span class="op" id="8496200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8496203">func</span>&nbsp;<span class="ident" id="8496208">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="8496240">(</span><span class="ident" id="8496241">b</span>&nbsp;<span class="op" id="8496243">*</span><span class="ident" id="8496244">testing</span><span class="op" id="8496251">.</span><span class="ident" id="8496252">B</span><span class="op" id="8496253">)</span>&nbsp;<span class="op" id="8496255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496258">benchmarkEndToEnd</span><span class="op" id="8496275">(</span><span class="ident" id="8496276">b</span><span class="op" id="8496277">,</span>&nbsp;<span class="keyword" id="8496279">func</span><span class="op" id="8496283">(</span><span class="op" id="8496284">)</span>&nbsp;<span class="keyword" id="8496286">interface</span><span class="op" id="8496295">{</span><span class="op" id="8496296">}</span>&nbsp;<span class="op" id="8496298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496302">v</span>&nbsp;<span class="op" id="8496304">:=</span>&nbsp;<span class="op" id="8496307">&amp;</span><span class="ident" id="8496308">Bench</span><span class="op" id="8496313">{</span><span class="num" id="8496314">7</span><span class="op" id="8496315">,</span>&nbsp;<span class="num" id="8496317">3.2</span><span class="op" id="8496320">,</span>&nbsp;<span class="string" id="8496322">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8496339">,</span>&nbsp;<span class="ident" id="8496341">nil</span><span class="op" id="8496344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496348">Register</span><span class="op" id="8496356">(</span><span class="ident" id="8496357">v</span><span class="op" id="8496358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496362">arr</span>&nbsp;<span class="op" id="8496366">:=</span>&nbsp;<span class="builtinfunc" id="8496369">make</span><span class="op" id="8496373">(</span><span class="op" id="8496374">[</span><span class="op" id="8496375">]</span><span class="keyword" id="8496376">interface</span><span class="op" id="8496385">{</span><span class="op" id="8496386">}</span><span class="op" id="8496387">,</span>&nbsp;<span class="num" id="8496389">100</span><span class="op" id="8496392">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496396">for</span>&nbsp;<span class="ident" id="8496400">i</span>&nbsp;<span class="op" id="8496402">:=</span>&nbsp;<span class="keyword" id="8496405">range</span>&nbsp;<span class="ident" id="8496411">arr</span>&nbsp;<span class="op" id="8496415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496420">arr</span><span class="op" id="8496423">[</span><span class="ident" id="8496424">i</span><span class="op" id="8496425">]</span>&nbsp;<span class="op" id="8496427">=</span>&nbsp;<span class="ident" id="8496429">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496437">return</span>&nbsp;<span class="op" id="8496444">&amp;</span><span class="ident" id="8496445">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496450">}</span><span class="op" id="8496451">,</span>&nbsp;<span class="keyword" id="8496453">func</span><span class="op" id="8496457">(</span><span class="op" id="8496458">)</span>&nbsp;<span class="op" id="8496460">(</span><span class="ident" id="8496461">r</span>&nbsp;<span class="ident" id="8496463">io</span><span class="op" id="8496465">.</span><span class="ident" id="8496466">Reader</span><span class="op" id="8496472">,</span>&nbsp;<span class="ident" id="8496474">w</span>&nbsp;<span class="ident" id="8496476">io</span><span class="op" id="8496478">.</span><span class="ident" id="8496479">Writer</span><span class="op" id="8496485">,</span>&nbsp;<span class="ident" id="8496487">err</span>&nbsp;<span class="builtintype" id="8496491">error</span><span class="op" id="8496496">)</span>&nbsp;<span class="op" id="8496498">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496502">var</span>&nbsp;<span class="ident" id="8496506">buf</span>&nbsp;<span class="ident" id="8496510">bytes</span><span class="op" id="8496515">.</span><span class="ident" id="8496516">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496525">return</span>&nbsp;<span class="op" id="8496532">&amp;</span><span class="ident" id="8496533">buf</span><span class="op" id="8496536">,</span>&nbsp;<span class="op" id="8496538">&amp;</span><span class="ident" id="8496539">buf</span><span class="op" id="8496542">,</span>&nbsp;<span class="ident" id="8496544">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496549">}</span><span class="op" id="8496550">)</span><br>
<span class="lineno"></span><span class="op" id="8496552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8496555">func</span>&nbsp;<span class="ident" id="8496560">TestCountEncodeMallocs</span><span class="op" id="8496582">(</span><span class="ident" id="8496583">t</span>&nbsp;<span class="op" id="8496585">*</span><span class="ident" id="8496586">testing</span><span class="op" id="8496593">.</span><span class="ident" id="8496594">T</span><span class="op" id="8496595">)</span>&nbsp;<span class="op" id="8496597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496600">if</span>&nbsp;<span class="ident" id="8496603">testing</span><span class="op" id="8496610">.</span><span class="ident" id="8496611">Short</span><span class="op" id="8496616">(</span><span class="op" id="8496617">)</span>&nbsp;<span class="op" id="8496619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496623">t</span><span class="op" id="8496624">.</span><span class="ident" id="8496625">Skip</span><span class="op" id="8496629">(</span><span class="string" id="8496630">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8496667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496673">if</span>&nbsp;<span class="ident" id="8496676">runtime</span><span class="op" id="8496683">.</span><span class="ident" id="8496684">GOMAXPROCS</span><span class="op" id="8496694">(</span><span class="num" id="8496695">0</span><span class="op" id="8496696">)</span>&nbsp;<span class="op" id="8496698">&gt;</span>&nbsp;<span class="num" id="8496700">1</span>&nbsp;<span class="op" id="8496702">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496706">t</span><span class="op" id="8496707">.</span><span class="ident" id="8496708">Skip</span><span class="op" id="8496712">(</span><span class="string" id="8496713">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8496737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496744">const</span>&nbsp;<span class="ident" id="8496750">N</span>&nbsp;<span class="op" id="8496752">=</span>&nbsp;<span class="num" id="8496754">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496761">var</span>&nbsp;<span class="ident" id="8496765">buf</span>&nbsp;<span class="ident" id="8496769">bytes</span><span class="op" id="8496774">.</span><span class="ident" id="8496775">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496783">enc</span>&nbsp;<span class="op" id="8496787">:=</span>&nbsp;<span class="ident" id="8496790">NewEncoder</span><span class="op" id="8496800">(</span><span class="op" id="8496801">&amp;</span><span class="ident" id="8496802">buf</span><span class="op" id="8496805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496808">bench</span>&nbsp;<span class="op" id="8496814">:=</span>&nbsp;<span class="op" id="8496817">&amp;</span><span class="ident" id="8496818">Bench</span><span class="op" id="8496823">{</span><span class="num" id="8496824">7</span><span class="op" id="8496825">,</span>&nbsp;<span class="num" id="8496827">3.2</span><span class="op" id="8496830">,</span>&nbsp;<span class="string" id="8496832">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8496849">,</span>&nbsp;<span class="op" id="8496851">[</span><span class="op" id="8496852">]</span><span class="builtintype" id="8496853">byte</span><span class="op" id="8496857">(</span><span class="string" id="8496858">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8496876">)</span><span class="op" id="8496877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496881">allocs</span>&nbsp;<span class="op" id="8496888">:=</span>&nbsp;<span class="ident" id="8496891">testing</span><span class="op" id="8496898">.</span><span class="ident" id="8496899">AllocsPerRun</span><span class="op" id="8496911">(</span><span class="ident" id="8496912">N</span><span class="op" id="8496913">,</span>&nbsp;<span class="keyword" id="8496915">func</span><span class="op" id="8496919">(</span><span class="op" id="8496920">)</span>&nbsp;<span class="op" id="8496922">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496926">err</span>&nbsp;<span class="op" id="8496930">:=</span>&nbsp;<span class="ident" id="8496933">enc</span><span class="op" id="8496936">.</span><span class="ident" id="8496937">Encode</span><span class="op" id="8496943">(</span><span class="ident" id="8496944">bench</span><span class="op" id="8496949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8496953">if</span>&nbsp;<span class="ident" id="8496956">err</span>&nbsp;<span class="op" id="8496960">!=</span>&nbsp;<span class="ident" id="8496963">nil</span>&nbsp;<span class="op" id="8496967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8496972">t</span><span class="op" id="8496973">.</span><span class="ident" id="8496974">Fatal</span><span class="op" id="8496979">(</span><span class="string" id="8496980">&#34;encode:&#34;</span><span class="op" id="8496989">,</span>&nbsp;<span class="ident" id="8496991">err</span><span class="op" id="8496994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8496998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497001">}</span><span class="op" id="8497002">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497005">if</span>&nbsp;<span class="ident" id="8497008">allocs</span>&nbsp;<span class="op" id="8497015">!=</span>&nbsp;<span class="num" id="8497018">0</span>&nbsp;<span class="op" id="8497020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497024">t</span><span class="op" id="8497025">.</span><span class="ident" id="8497026">Fatalf</span><span class="op" id="8497032">(</span><span class="string" id="8497033">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="8497083">,</span>&nbsp;<span class="ident" id="8497085">allocs</span><span class="op" id="8497091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497094">}</span><br>
<span class="lineno"></span><span class="op" id="8497096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="8497099">func</span>&nbsp;<span class="ident" id="8497104">TestCountDecodeMallocs</span><span class="op" id="8497126">(</span><span class="ident" id="8497127">t</span>&nbsp;<span class="op" id="8497129">*</span><span class="ident" id="8497130">testing</span><span class="op" id="8497137">.</span><span class="ident" id="8497138">T</span><span class="op" id="8497139">)</span>&nbsp;<span class="op" id="8497141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497144">if</span>&nbsp;<span class="ident" id="8497147">testing</span><span class="op" id="8497154">.</span><span class="ident" id="8497155">Short</span><span class="op" id="8497160">(</span><span class="op" id="8497161">)</span>&nbsp;<span class="op" id="8497163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497167">t</span><span class="op" id="8497168">.</span><span class="ident" id="8497169">Skip</span><span class="op" id="8497173">(</span><span class="string" id="8497174">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8497211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497217">if</span>&nbsp;<span class="ident" id="8497220">runtime</span><span class="op" id="8497227">.</span><span class="ident" id="8497228">GOMAXPROCS</span><span class="op" id="8497238">(</span><span class="num" id="8497239">0</span><span class="op" id="8497240">)</span>&nbsp;<span class="op" id="8497242">&gt;</span>&nbsp;<span class="num" id="8497244">1</span>&nbsp;<span class="op" id="8497246">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497250">t</span><span class="op" id="8497251">.</span><span class="ident" id="8497252">Skip</span><span class="op" id="8497256">(</span><span class="string" id="8497257">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8497281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497288">const</span>&nbsp;<span class="ident" id="8497294">N</span>&nbsp;<span class="op" id="8497296">=</span>&nbsp;<span class="num" id="8497298">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497305">var</span>&nbsp;<span class="ident" id="8497309">buf</span>&nbsp;<span class="ident" id="8497313">bytes</span><span class="op" id="8497318">.</span><span class="ident" id="8497319">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497327">enc</span>&nbsp;<span class="op" id="8497331">:=</span>&nbsp;<span class="ident" id="8497334">NewEncoder</span><span class="op" id="8497344">(</span><span class="op" id="8497345">&amp;</span><span class="ident" id="8497346">buf</span><span class="op" id="8497349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497352">bench</span>&nbsp;<span class="op" id="8497358">:=</span>&nbsp;<span class="op" id="8497361">&amp;</span><span class="ident" id="8497362">Bench</span><span class="op" id="8497367">{</span><span class="num" id="8497368">7</span><span class="op" id="8497369">,</span>&nbsp;<span class="num" id="8497371">3.2</span><span class="op" id="8497374">,</span>&nbsp;<span class="string" id="8497376">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8497393">,</span>&nbsp;<span class="op" id="8497395">[</span><span class="op" id="8497396">]</span><span class="builtintype" id="8497397">byte</span><span class="op" id="8497401">(</span><span class="string" id="8497402">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8497420">)</span><span class="op" id="8497421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8497425">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497467">testing</span><span class="op" id="8497474">.</span><span class="ident" id="8497475">AllocsPerRun</span><span class="op" id="8497487">(</span><span class="ident" id="8497488">N</span><span class="op" id="8497489">,</span>&nbsp;<span class="keyword" id="8497491">func</span><span class="op" id="8497495">(</span><span class="op" id="8497496">)</span>&nbsp;<span class="op" id="8497498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497502">err</span>&nbsp;<span class="op" id="8497506">:=</span>&nbsp;<span class="ident" id="8497509">enc</span><span class="op" id="8497512">.</span><span class="ident" id="8497513">Encode</span><span class="op" id="8497519">(</span><span class="ident" id="8497520">bench</span><span class="op" id="8497525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497529">if</span>&nbsp;<span class="ident" id="8497532">err</span>&nbsp;<span class="op" id="8497536">!=</span>&nbsp;<span class="ident" id="8497539">nil</span>&nbsp;<span class="op" id="8497543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497548">t</span><span class="op" id="8497549">.</span><span class="ident" id="8497550">Fatal</span><span class="op" id="8497555">(</span><span class="string" id="8497556">&#34;encode:&#34;</span><span class="op" id="8497565">,</span>&nbsp;<span class="ident" id="8497567">err</span><span class="op" id="8497570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497574">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497577">}</span><span class="op" id="8497578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497582">dec</span>&nbsp;<span class="op" id="8497586">:=</span>&nbsp;<span class="ident" id="8497589">NewDecoder</span><span class="op" id="8497599">(</span><span class="op" id="8497600">&amp;</span><span class="ident" id="8497601">buf</span><span class="op" id="8497604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497607">allocs</span>&nbsp;<span class="op" id="8497614">:=</span>&nbsp;<span class="ident" id="8497617">testing</span><span class="op" id="8497624">.</span><span class="ident" id="8497625">AllocsPerRun</span><span class="op" id="8497637">(</span><span class="ident" id="8497638">N</span><span class="op" id="8497639">,</span>&nbsp;<span class="keyword" id="8497641">func</span><span class="op" id="8497645">(</span><span class="op" id="8497646">)</span>&nbsp;<span class="op" id="8497648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497652">*</span><span class="ident" id="8497653">bench</span>&nbsp;<span class="op" id="8497659">=</span>&nbsp;<span class="ident" id="8497661">Bench</span><span class="op" id="8497666">{</span><span class="op" id="8497667">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497671">err</span>&nbsp;<span class="op" id="8497675">:=</span>&nbsp;<span class="ident" id="8497678">dec</span><span class="op" id="8497681">.</span><span class="ident" id="8497682">Decode</span><span class="op" id="8497688">(</span><span class="op" id="8497689">&amp;</span><span class="ident" id="8497690">bench</span><span class="op" id="8497695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497699">if</span>&nbsp;<span class="ident" id="8497702">err</span>&nbsp;<span class="op" id="8497706">!=</span>&nbsp;<span class="ident" id="8497709">nil</span>&nbsp;<span class="op" id="8497713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497718">t</span><span class="op" id="8497719">.</span><span class="ident" id="8497720">Fatal</span><span class="op" id="8497725">(</span><span class="string" id="8497726">&#34;decode:&#34;</span><span class="op" id="8497735">,</span>&nbsp;<span class="ident" id="8497737">err</span><span class="op" id="8497740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497747">}</span><span class="op" id="8497748">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497751">if</span>&nbsp;<span class="ident" id="8497754">allocs</span>&nbsp;<span class="op" id="8497761">!=</span>&nbsp;<span class="num" id="8497764">4</span>&nbsp;<span class="op" id="8497766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497770">t</span><span class="op" id="8497771">.</span><span class="ident" id="8497772">Fatalf</span><span class="op" id="8497778">(</span><span class="string" id="8497779">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="8497829">,</span>&nbsp;<span class="ident" id="8497831">allocs</span><span class="op" id="8497837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8497840">}</span><br>
<span class="lineno"></span><span class="op" id="8497842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8497845">func</span>&nbsp;<span class="ident" id="8497850">BenchmarkEncodeComplex128Slice</span><span class="op" id="8497880">(</span><span class="ident" id="8497881">b</span>&nbsp;<span class="op" id="8497883">*</span><span class="ident" id="8497884">testing</span><span class="op" id="8497891">.</span><span class="ident" id="8497892">B</span><span class="op" id="8497893">)</span>&nbsp;<span class="op" id="8497895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497898">var</span>&nbsp;<span class="ident" id="8497902">buf</span>&nbsp;<span class="ident" id="8497906">bytes</span><span class="op" id="8497911">.</span><span class="ident" id="8497912">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497920">enc</span>&nbsp;<span class="op" id="8497924">:=</span>&nbsp;<span class="ident" id="8497927">NewEncoder</span><span class="op" id="8497937">(</span><span class="op" id="8497938">&amp;</span><span class="ident" id="8497939">buf</span><span class="op" id="8497942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497945">a</span>&nbsp;<span class="op" id="8497947">:=</span>&nbsp;<span class="builtinfunc" id="8497950">make</span><span class="op" id="8497954">(</span><span class="op" id="8497955">[</span><span class="op" id="8497956">]</span><span class="builtintype" id="8497957">complex128</span><span class="op" id="8497967">,</span>&nbsp;<span class="num" id="8497969">1000</span><span class="op" id="8497973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8497976">for</span>&nbsp;<span class="ident" id="8497980">i</span>&nbsp;<span class="op" id="8497982">:=</span>&nbsp;<span class="keyword" id="8497985">range</span>&nbsp;<span class="ident" id="8497991">a</span>&nbsp;<span class="op" id="8497993">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8497997">a</span><span class="op" id="8497998">[</span><span class="ident" id="8497999">i</span><span class="op" id="8498000">]</span>&nbsp;<span class="op" id="8498002">=</span>&nbsp;<span class="num" id="8498004">1.2</span>&nbsp;<span class="op" id="8498008">+</span>&nbsp;<span class="num" id="8498010">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498019">b</span><span class="op" id="8498020">.</span><span class="ident" id="8498021">ResetTimer</span><span class="op" id="8498031">(</span><span class="op" id="8498032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498035">for</span>&nbsp;<span class="ident" id="8498039">i</span>&nbsp;<span class="op" id="8498041">:=</span>&nbsp;<span class="num" id="8498044">0</span><span class="op" id="8498045">;</span>&nbsp;<span class="ident" id="8498047">i</span>&nbsp;<span class="op" id="8498049">&lt;</span>&nbsp;<span class="ident" id="8498051">b</span><span class="op" id="8498052">.</span><span class="ident" id="8498053">N</span><span class="op" id="8498054">;</span>&nbsp;<span class="ident" id="8498056">i</span><span class="op" id="8498057">++</span>&nbsp;<span class="op" id="8498060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498064">buf</span><span class="op" id="8498067">.</span><span class="ident" id="8498068">Reset</span><span class="op" id="8498073">(</span><span class="op" id="8498074">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498078">err</span>&nbsp;<span class="op" id="8498082">:=</span>&nbsp;<span class="ident" id="8498085">enc</span><span class="op" id="8498088">.</span><span class="ident" id="8498089">Encode</span><span class="op" id="8498095">(</span><span class="ident" id="8498096">a</span><span class="op" id="8498097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498101">if</span>&nbsp;<span class="ident" id="8498104">err</span>&nbsp;<span class="op" id="8498108">!=</span>&nbsp;<span class="ident" id="8498111">nil</span>&nbsp;<span class="op" id="8498115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498120">b</span><span class="op" id="8498121">.</span><span class="ident" id="8498122">Fatal</span><span class="op" id="8498127">(</span><span class="ident" id="8498128">err</span><span class="op" id="8498131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498138">}</span><br>
<span class="lineno">150</span><span class="op" id="8498140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8498143">func</span>&nbsp;<span class="ident" id="8498148">BenchmarkEncodeFloat64Slice</span><span class="op" id="8498175">(</span><span class="ident" id="8498176">b</span>&nbsp;<span class="op" id="8498178">*</span><span class="ident" id="8498179">testing</span><span class="op" id="8498186">.</span><span class="ident" id="8498187">B</span><span class="op" id="8498188">)</span>&nbsp;<span class="op" id="8498190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498193">var</span>&nbsp;<span class="ident" id="8498197">buf</span>&nbsp;<span class="ident" id="8498201">bytes</span><span class="op" id="8498206">.</span><span class="ident" id="8498207">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498215">enc</span>&nbsp;<span class="op" id="8498219">:=</span>&nbsp;<span class="ident" id="8498222">NewEncoder</span><span class="op" id="8498232">(</span><span class="op" id="8498233">&amp;</span><span class="ident" id="8498234">buf</span><span class="op" id="8498237">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498240">a</span>&nbsp;<span class="op" id="8498242">:=</span>&nbsp;<span class="builtinfunc" id="8498245">make</span><span class="op" id="8498249">(</span><span class="op" id="8498250">[</span><span class="op" id="8498251">]</span><span class="builtintype" id="8498252">float64</span><span class="op" id="8498259">,</span>&nbsp;<span class="num" id="8498261">1000</span><span class="op" id="8498265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498268">for</span>&nbsp;<span class="ident" id="8498272">i</span>&nbsp;<span class="op" id="8498274">:=</span>&nbsp;<span class="keyword" id="8498277">range</span>&nbsp;<span class="ident" id="8498283">a</span>&nbsp;<span class="op" id="8498285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498289">a</span><span class="op" id="8498290">[</span><span class="ident" id="8498291">i</span><span class="op" id="8498292">]</span>&nbsp;<span class="op" id="8498294">=</span>&nbsp;<span class="num" id="8498296">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498307">b</span><span class="op" id="8498308">.</span><span class="ident" id="8498309">ResetTimer</span><span class="op" id="8498319">(</span><span class="op" id="8498320">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498323">for</span>&nbsp;<span class="ident" id="8498327">i</span>&nbsp;<span class="op" id="8498329">:=</span>&nbsp;<span class="num" id="8498332">0</span><span class="op" id="8498333">;</span>&nbsp;<span class="ident" id="8498335">i</span>&nbsp;<span class="op" id="8498337">&lt;</span>&nbsp;<span class="ident" id="8498339">b</span><span class="op" id="8498340">.</span><span class="ident" id="8498341">N</span><span class="op" id="8498342">;</span>&nbsp;<span class="ident" id="8498344">i</span><span class="op" id="8498345">++</span>&nbsp;<span class="op" id="8498348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498352">buf</span><span class="op" id="8498355">.</span><span class="ident" id="8498356">Reset</span><span class="op" id="8498361">(</span><span class="op" id="8498362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498366">err</span>&nbsp;<span class="op" id="8498370">:=</span>&nbsp;<span class="ident" id="8498373">enc</span><span class="op" id="8498376">.</span><span class="ident" id="8498377">Encode</span><span class="op" id="8498383">(</span><span class="ident" id="8498384">a</span><span class="op" id="8498385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498389">if</span>&nbsp;<span class="ident" id="8498392">err</span>&nbsp;<span class="op" id="8498396">!=</span>&nbsp;<span class="ident" id="8498399">nil</span>&nbsp;<span class="op" id="8498403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498408">b</span><span class="op" id="8498409">.</span><span class="ident" id="8498410">Fatal</span><span class="op" id="8498415">(</span><span class="ident" id="8498416">err</span><span class="op" id="8498419">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498426">}</span><br>
<span class="lineno"></span><span class="op" id="8498428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8498431">func</span>&nbsp;<span class="ident" id="8498436">BenchmarkEncodeInt32Slice</span><span class="op" id="8498461">(</span><span class="ident" id="8498462">b</span>&nbsp;<span class="op" id="8498464">*</span><span class="ident" id="8498465">testing</span><span class="op" id="8498472">.</span><span class="ident" id="8498473">B</span><span class="op" id="8498474">)</span>&nbsp;<span class="op" id="8498476">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498479">var</span>&nbsp;<span class="ident" id="8498483">buf</span>&nbsp;<span class="ident" id="8498487">bytes</span><span class="op" id="8498492">.</span><span class="ident" id="8498493">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498501">enc</span>&nbsp;<span class="op" id="8498505">:=</span>&nbsp;<span class="ident" id="8498508">NewEncoder</span><span class="op" id="8498518">(</span><span class="op" id="8498519">&amp;</span><span class="ident" id="8498520">buf</span><span class="op" id="8498523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498526">a</span>&nbsp;<span class="op" id="8498528">:=</span>&nbsp;<span class="builtinfunc" id="8498531">make</span><span class="op" id="8498535">(</span><span class="op" id="8498536">[</span><span class="op" id="8498537">]</span><span class="builtintype" id="8498538">int32</span><span class="op" id="8498543">,</span>&nbsp;<span class="num" id="8498545">1000</span><span class="op" id="8498549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498552">for</span>&nbsp;<span class="ident" id="8498556">i</span>&nbsp;<span class="op" id="8498558">:=</span>&nbsp;<span class="keyword" id="8498561">range</span>&nbsp;<span class="ident" id="8498567">a</span>&nbsp;<span class="op" id="8498569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498573">a</span><span class="op" id="8498574">[</span><span class="ident" id="8498575">i</span><span class="op" id="8498576">]</span>&nbsp;<span class="op" id="8498578">=</span>&nbsp;<span class="num" id="8498580">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498589">b</span><span class="op" id="8498590">.</span><span class="ident" id="8498591">ResetTimer</span><span class="op" id="8498601">(</span><span class="op" id="8498602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498605">for</span>&nbsp;<span class="ident" id="8498609">i</span>&nbsp;<span class="op" id="8498611">:=</span>&nbsp;<span class="num" id="8498614">0</span><span class="op" id="8498615">;</span>&nbsp;<span class="ident" id="8498617">i</span>&nbsp;<span class="op" id="8498619">&lt;</span>&nbsp;<span class="ident" id="8498621">b</span><span class="op" id="8498622">.</span><span class="ident" id="8498623">N</span><span class="op" id="8498624">;</span>&nbsp;<span class="ident" id="8498626">i</span><span class="op" id="8498627">++</span>&nbsp;<span class="op" id="8498630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498634">buf</span><span class="op" id="8498637">.</span><span class="ident" id="8498638">Reset</span><span class="op" id="8498643">(</span><span class="op" id="8498644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498648">err</span>&nbsp;<span class="op" id="8498652">:=</span>&nbsp;<span class="ident" id="8498655">enc</span><span class="op" id="8498658">.</span><span class="ident" id="8498659">Encode</span><span class="op" id="8498665">(</span><span class="ident" id="8498666">a</span><span class="op" id="8498667">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498671">if</span>&nbsp;<span class="ident" id="8498674">err</span>&nbsp;<span class="op" id="8498678">!=</span>&nbsp;<span class="ident" id="8498681">nil</span>&nbsp;<span class="op" id="8498685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498690">b</span><span class="op" id="8498691">.</span><span class="ident" id="8498692">Fatal</span><span class="op" id="8498697">(</span><span class="ident" id="8498698">err</span><span class="op" id="8498701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498708">}</span><br>
<span class="lineno"></span><span class="op" id="8498710">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8498713">func</span>&nbsp;<span class="ident" id="8498718">BenchmarkEncodeStringSlice</span><span class="op" id="8498744">(</span><span class="ident" id="8498745">b</span>&nbsp;<span class="op" id="8498747">*</span><span class="ident" id="8498748">testing</span><span class="op" id="8498755">.</span><span class="ident" id="8498756">B</span><span class="op" id="8498757">)</span>&nbsp;<span class="op" id="8498759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498762">var</span>&nbsp;<span class="ident" id="8498766">buf</span>&nbsp;<span class="ident" id="8498770">bytes</span><span class="op" id="8498775">.</span><span class="ident" id="8498776">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498784">enc</span>&nbsp;<span class="op" id="8498788">:=</span>&nbsp;<span class="ident" id="8498791">NewEncoder</span><span class="op" id="8498801">(</span><span class="op" id="8498802">&amp;</span><span class="ident" id="8498803">buf</span><span class="op" id="8498806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498809">a</span>&nbsp;<span class="op" id="8498811">:=</span>&nbsp;<span class="builtinfunc" id="8498814">make</span><span class="op" id="8498818">(</span><span class="op" id="8498819">[</span><span class="op" id="8498820">]</span><span class="builtintype" id="8498821">string</span><span class="op" id="8498827">,</span>&nbsp;<span class="num" id="8498829">1000</span><span class="op" id="8498833">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498836">for</span>&nbsp;<span class="ident" id="8498840">i</span>&nbsp;<span class="op" id="8498842">:=</span>&nbsp;<span class="keyword" id="8498845">range</span>&nbsp;<span class="ident" id="8498851">a</span>&nbsp;<span class="op" id="8498853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498857">a</span><span class="op" id="8498858">[</span><span class="ident" id="8498859">i</span><span class="op" id="8498860">]</span>&nbsp;<span class="op" id="8498862">=</span>&nbsp;<span class="string" id="8498864">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8498883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498886">b</span><span class="op" id="8498887">.</span><span class="ident" id="8498888">ResetTimer</span><span class="op" id="8498898">(</span><span class="op" id="8498899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498902">for</span>&nbsp;<span class="ident" id="8498906">i</span>&nbsp;<span class="op" id="8498908">:=</span>&nbsp;<span class="num" id="8498911">0</span><span class="op" id="8498912">;</span>&nbsp;<span class="ident" id="8498914">i</span>&nbsp;<span class="op" id="8498916">&lt;</span>&nbsp;<span class="ident" id="8498918">b</span><span class="op" id="8498919">.</span><span class="ident" id="8498920">N</span><span class="op" id="8498921">;</span>&nbsp;<span class="ident" id="8498923">i</span><span class="op" id="8498924">++</span>&nbsp;<span class="op" id="8498927">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498931">buf</span><span class="op" id="8498934">.</span><span class="ident" id="8498935">Reset</span><span class="op" id="8498940">(</span><span class="op" id="8498941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498945">err</span>&nbsp;<span class="op" id="8498949">:=</span>&nbsp;<span class="ident" id="8498952">enc</span><span class="op" id="8498955">.</span><span class="ident" id="8498956">Encode</span><span class="op" id="8498962">(</span><span class="ident" id="8498963">a</span><span class="op" id="8498964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8498968">if</span>&nbsp;<span class="ident" id="8498971">err</span>&nbsp;<span class="op" id="8498975">!=</span>&nbsp;<span class="ident" id="8498978">nil</span>&nbsp;<span class="op" id="8498982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8498987">b</span><span class="op" id="8498988">.</span><span class="ident" id="8498989">Fatal</span><span class="op" id="8498994">(</span><span class="ident" id="8498995">err</span><span class="op" id="8498998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499002">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499005">}</span><br>
<span class="lineno"></span><span class="op" id="8499007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8499010">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="8499056">type</span>&nbsp;<span class="ident" id="8499061">benchmarkBuf</span>&nbsp;<span class="keyword" id="8499074">struct</span>&nbsp;<span class="op" id="8499081">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499084">offset</span>&nbsp;<span class="builtintype" id="8499091">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499096">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8499103">[</span><span class="op" id="8499104">]</span><span class="builtintype" id="8499105">byte</span><br>
<span class="lineno"></span><span class="op" id="8499110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8499113">func</span>&nbsp;<span class="op" id="8499118">(</span><span class="ident" id="8499119">b</span>&nbsp;<span class="op" id="8499121">*</span><span class="ident" id="8499122">benchmarkBuf</span><span class="op" id="8499134">)</span>&nbsp;<span class="ident" id="8499136">Read</span><span class="op" id="8499140">(</span><span class="ident" id="8499141">p</span>&nbsp;<span class="op" id="8499143">[</span><span class="op" id="8499144">]</span><span class="builtintype" id="8499145">byte</span><span class="op" id="8499149">)</span>&nbsp;<span class="op" id="8499151">(</span><span class="ident" id="8499152">n</span>&nbsp;<span class="builtintype" id="8499154">int</span><span class="op" id="8499157">,</span>&nbsp;<span class="ident" id="8499159">err</span>&nbsp;<span class="builtintype" id="8499163">error</span><span class="op" id="8499168">)</span>&nbsp;<span class="op" id="8499170">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499173">n</span>&nbsp;<span class="op" id="8499175">=</span>&nbsp;<span class="builtinfunc" id="8499177">copy</span><span class="op" id="8499181">(</span><span class="ident" id="8499182">p</span><span class="op" id="8499183">,</span>&nbsp;<span class="ident" id="8499185">b</span><span class="op" id="8499186">.</span><span class="ident" id="8499187">data</span><span class="op" id="8499191">[</span><span class="ident" id="8499192">b</span><span class="op" id="8499193">.</span><span class="ident" id="8499194">offset</span><span class="op" id="8499200">:</span><span class="op" id="8499201">]</span><span class="op" id="8499202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499205">if</span>&nbsp;<span class="ident" id="8499208">n</span>&nbsp;<span class="op" id="8499210">==</span>&nbsp;<span class="num" id="8499213">0</span>&nbsp;<span class="op" id="8499215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499219">return</span>&nbsp;<span class="num" id="8499226">0</span><span class="op" id="8499227">,</span>&nbsp;<span class="ident" id="8499229">io</span><span class="op" id="8499231">.</span><span class="ident" id="8499232">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499240">b</span><span class="op" id="8499241">.</span><span class="ident" id="8499242">offset</span>&nbsp;<span class="op" id="8499249">+=</span>&nbsp;<span class="ident" id="8499252">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499255">return</span><br>
<span class="lineno"></span><span class="op" id="8499262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8499265">func</span>&nbsp;<span class="op" id="8499270">(</span><span class="ident" id="8499271">b</span>&nbsp;<span class="op" id="8499273">*</span><span class="ident" id="8499274">benchmarkBuf</span><span class="op" id="8499286">)</span>&nbsp;<span class="ident" id="8499288">ReadByte</span><span class="op" id="8499296">(</span><span class="op" id="8499297">)</span>&nbsp;<span class="op" id="8499299">(</span><span class="ident" id="8499300">c</span>&nbsp;<span class="builtintype" id="8499302">byte</span><span class="op" id="8499306">,</span>&nbsp;<span class="ident" id="8499308">err</span>&nbsp;<span class="builtintype" id="8499312">error</span><span class="op" id="8499317">)</span>&nbsp;<span class="op" id="8499319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499322">if</span>&nbsp;<span class="ident" id="8499325">b</span><span class="op" id="8499326">.</span><span class="ident" id="8499327">offset</span>&nbsp;<span class="op" id="8499334">&gt;=</span>&nbsp;<span class="builtinfunc" id="8499337">len</span><span class="op" id="8499340">(</span><span class="ident" id="8499341">b</span><span class="op" id="8499342">.</span><span class="ident" id="8499343">data</span><span class="op" id="8499347">)</span>&nbsp;<span class="op" id="8499349">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499353">return</span>&nbsp;<span class="num" id="8499360">0</span><span class="op" id="8499361">,</span>&nbsp;<span class="ident" id="8499363">io</span><span class="op" id="8499365">.</span><span class="ident" id="8499366">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499374">c</span>&nbsp;<span class="op" id="8499376">=</span>&nbsp;<span class="ident" id="8499378">b</span><span class="op" id="8499379">.</span><span class="ident" id="8499380">data</span><span class="op" id="8499384">[</span><span class="ident" id="8499385">b</span><span class="op" id="8499386">.</span><span class="ident" id="8499387">offset</span><span class="op" id="8499393">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499396">b</span><span class="op" id="8499397">.</span><span class="ident" id="8499398">offset</span><span class="op" id="8499404">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499408">return</span><br>
<span class="lineno">225</span><span class="op" id="8499415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8499418">func</span>&nbsp;<span class="op" id="8499423">(</span><span class="ident" id="8499424">b</span>&nbsp;<span class="op" id="8499426">*</span><span class="ident" id="8499427">benchmarkBuf</span><span class="op" id="8499439">)</span>&nbsp;<span class="ident" id="8499441">reset</span><span class="op" id="8499446">(</span><span class="op" id="8499447">)</span>&nbsp;<span class="op" id="8499449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499452">b</span><span class="op" id="8499453">.</span><span class="ident" id="8499454">offset</span>&nbsp;<span class="op" id="8499461">=</span>&nbsp;<span class="num" id="8499463">0</span><br>
<span class="lineno"></span><span class="op" id="8499465">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8499468">func</span>&nbsp;<span class="ident" id="8499473">BenchmarkDecodeComplex128Slice</span><span class="op" id="8499503">(</span><span class="ident" id="8499504">b</span>&nbsp;<span class="op" id="8499506">*</span><span class="ident" id="8499507">testing</span><span class="op" id="8499514">.</span><span class="ident" id="8499515">B</span><span class="op" id="8499516">)</span>&nbsp;<span class="op" id="8499518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499521">var</span>&nbsp;<span class="ident" id="8499525">buf</span>&nbsp;<span class="ident" id="8499529">bytes</span><span class="op" id="8499534">.</span><span class="ident" id="8499535">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499543">enc</span>&nbsp;<span class="op" id="8499547">:=</span>&nbsp;<span class="ident" id="8499550">NewEncoder</span><span class="op" id="8499560">(</span><span class="op" id="8499561">&amp;</span><span class="ident" id="8499562">buf</span><span class="op" id="8499565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499568">a</span>&nbsp;<span class="op" id="8499570">:=</span>&nbsp;<span class="builtinfunc" id="8499573">make</span><span class="op" id="8499577">(</span><span class="op" id="8499578">[</span><span class="op" id="8499579">]</span><span class="builtintype" id="8499580">complex128</span><span class="op" id="8499590">,</span>&nbsp;<span class="num" id="8499592">1000</span><span class="op" id="8499596">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499599">for</span>&nbsp;<span class="ident" id="8499603">i</span>&nbsp;<span class="op" id="8499605">:=</span>&nbsp;<span class="keyword" id="8499608">range</span>&nbsp;<span class="ident" id="8499614">a</span>&nbsp;<span class="op" id="8499616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499620">a</span><span class="op" id="8499621">[</span><span class="ident" id="8499622">i</span><span class="op" id="8499623">]</span>&nbsp;<span class="op" id="8499625">=</span>&nbsp;<span class="num" id="8499627">1.2</span>&nbsp;<span class="op" id="8499631">+</span>&nbsp;<span class="num" id="8499633">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499642">err</span>&nbsp;<span class="op" id="8499646">:=</span>&nbsp;<span class="ident" id="8499649">enc</span><span class="op" id="8499652">.</span><span class="ident" id="8499653">Encode</span><span class="op" id="8499659">(</span><span class="ident" id="8499660">a</span><span class="op" id="8499661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499664">if</span>&nbsp;<span class="ident" id="8499667">err</span>&nbsp;<span class="op" id="8499671">!=</span>&nbsp;<span class="ident" id="8499674">nil</span>&nbsp;<span class="op" id="8499678">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499682">b</span><span class="op" id="8499683">.</span><span class="ident" id="8499684">Fatal</span><span class="op" id="8499689">(</span><span class="ident" id="8499690">err</span><span class="op" id="8499693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499699">x</span>&nbsp;<span class="op" id="8499701">:=</span>&nbsp;<span class="builtinfunc" id="8499704">make</span><span class="op" id="8499708">(</span><span class="op" id="8499709">[</span><span class="op" id="8499710">]</span><span class="builtintype" id="8499711">complex128</span><span class="op" id="8499721">,</span>&nbsp;<span class="num" id="8499723">1000</span><span class="op" id="8499727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499730">bbuf</span>&nbsp;<span class="op" id="8499735">:=</span>&nbsp;<span class="ident" id="8499738">benchmarkBuf</span><span class="op" id="8499750">{</span><span class="ident" id="8499751">data</span><span class="op" id="8499755">:</span>&nbsp;<span class="ident" id="8499757">buf</span><span class="op" id="8499760">.</span><span class="ident" id="8499761">Bytes</span><span class="op" id="8499766">(</span><span class="op" id="8499767">)</span><span class="op" id="8499768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499771">b</span><span class="op" id="8499772">.</span><span class="ident" id="8499773">ResetTimer</span><span class="op" id="8499783">(</span><span class="op" id="8499784">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499787">for</span>&nbsp;<span class="ident" id="8499791">i</span>&nbsp;<span class="op" id="8499793">:=</span>&nbsp;<span class="num" id="8499796">0</span><span class="op" id="8499797">;</span>&nbsp;<span class="ident" id="8499799">i</span>&nbsp;<span class="op" id="8499801">&lt;</span>&nbsp;<span class="ident" id="8499803">b</span><span class="op" id="8499804">.</span><span class="ident" id="8499805">N</span><span class="op" id="8499806">;</span>&nbsp;<span class="ident" id="8499808">i</span><span class="op" id="8499809">++</span>&nbsp;<span class="op" id="8499812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499816">bbuf</span><span class="op" id="8499820">.</span><span class="ident" id="8499821">reset</span><span class="op" id="8499826">(</span><span class="op" id="8499827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499831">dec</span>&nbsp;<span class="op" id="8499835">:=</span>&nbsp;<span class="ident" id="8499838">NewDecoder</span><span class="op" id="8499848">(</span><span class="op" id="8499849">&amp;</span><span class="ident" id="8499850">bbuf</span><span class="op" id="8499854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499858">err</span>&nbsp;<span class="op" id="8499862">:=</span>&nbsp;<span class="ident" id="8499865">dec</span><span class="op" id="8499868">.</span><span class="ident" id="8499869">Decode</span><span class="op" id="8499875">(</span><span class="op" id="8499876">&amp;</span><span class="ident" id="8499877">x</span><span class="op" id="8499878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499882">if</span>&nbsp;<span class="ident" id="8499885">err</span>&nbsp;<span class="op" id="8499889">!=</span>&nbsp;<span class="ident" id="8499892">nil</span>&nbsp;<span class="op" id="8499896">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499901">b</span><span class="op" id="8499902">.</span><span class="ident" id="8499903">Fatal</span><span class="op" id="8499908">(</span><span class="ident" id="8499909">i</span><span class="op" id="8499910">,</span>&nbsp;<span class="ident" id="8499912">err</span><span class="op" id="8499915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499922">}</span><br>
<span class="lineno"></span><span class="op" id="8499924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8499927">func</span>&nbsp;<span class="ident" id="8499932">BenchmarkDecodeFloat64Slice</span><span class="op" id="8499959">(</span><span class="ident" id="8499960">b</span>&nbsp;<span class="op" id="8499962">*</span><span class="ident" id="8499963">testing</span><span class="op" id="8499970">.</span><span class="ident" id="8499971">B</span><span class="op" id="8499972">)</span>&nbsp;<span class="op" id="8499974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499977">var</span>&nbsp;<span class="ident" id="8499981">buf</span>&nbsp;<span class="ident" id="8499985">bytes</span><span class="op" id="8499990">.</span><span class="ident" id="8499991">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499999">enc</span>&nbsp;<span class="op" id="8500003">:=</span>&nbsp;<span class="ident" id="8500006">NewEncoder</span><span class="op" id="8500016">(</span><span class="op" id="8500017">&amp;</span><span class="ident" id="8500018">buf</span><span class="op" id="8500021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500024">a</span>&nbsp;<span class="op" id="8500026">:=</span>&nbsp;<span class="builtinfunc" id="8500029">make</span><span class="op" id="8500033">(</span><span class="op" id="8500034">[</span><span class="op" id="8500035">]</span><span class="builtintype" id="8500036">float64</span><span class="op" id="8500043">,</span>&nbsp;<span class="num" id="8500045">1000</span><span class="op" id="8500049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500052">for</span>&nbsp;<span class="ident" id="8500056">i</span>&nbsp;<span class="op" id="8500058">:=</span>&nbsp;<span class="keyword" id="8500061">range</span>&nbsp;<span class="ident" id="8500067">a</span>&nbsp;<span class="op" id="8500069">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500073">a</span><span class="op" id="8500074">[</span><span class="ident" id="8500075">i</span><span class="op" id="8500076">]</span>&nbsp;<span class="op" id="8500078">=</span>&nbsp;<span class="num" id="8500080">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500091">err</span>&nbsp;<span class="op" id="8500095">:=</span>&nbsp;<span class="ident" id="8500098">enc</span><span class="op" id="8500101">.</span><span class="ident" id="8500102">Encode</span><span class="op" id="8500108">(</span><span class="ident" id="8500109">a</span><span class="op" id="8500110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500113">if</span>&nbsp;<span class="ident" id="8500116">err</span>&nbsp;<span class="op" id="8500120">!=</span>&nbsp;<span class="ident" id="8500123">nil</span>&nbsp;<span class="op" id="8500127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500131">b</span><span class="op" id="8500132">.</span><span class="ident" id="8500133">Fatal</span><span class="op" id="8500138">(</span><span class="ident" id="8500139">err</span><span class="op" id="8500142">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500148">x</span>&nbsp;<span class="op" id="8500150">:=</span>&nbsp;<span class="builtinfunc" id="8500153">make</span><span class="op" id="8500157">(</span><span class="op" id="8500158">[</span><span class="op" id="8500159">]</span><span class="builtintype" id="8500160">float64</span><span class="op" id="8500167">,</span>&nbsp;<span class="num" id="8500169">1000</span><span class="op" id="8500173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500176">bbuf</span>&nbsp;<span class="op" id="8500181">:=</span>&nbsp;<span class="ident" id="8500184">benchmarkBuf</span><span class="op" id="8500196">{</span><span class="ident" id="8500197">data</span><span class="op" id="8500201">:</span>&nbsp;<span class="ident" id="8500203">buf</span><span class="op" id="8500206">.</span><span class="ident" id="8500207">Bytes</span><span class="op" id="8500212">(</span><span class="op" id="8500213">)</span><span class="op" id="8500214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500217">b</span><span class="op" id="8500218">.</span><span class="ident" id="8500219">ResetTimer</span><span class="op" id="8500229">(</span><span class="op" id="8500230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500233">for</span>&nbsp;<span class="ident" id="8500237">i</span>&nbsp;<span class="op" id="8500239">:=</span>&nbsp;<span class="num" id="8500242">0</span><span class="op" id="8500243">;</span>&nbsp;<span class="ident" id="8500245">i</span>&nbsp;<span class="op" id="8500247">&lt;</span>&nbsp;<span class="ident" id="8500249">b</span><span class="op" id="8500250">.</span><span class="ident" id="8500251">N</span><span class="op" id="8500252">;</span>&nbsp;<span class="ident" id="8500254">i</span><span class="op" id="8500255">++</span>&nbsp;<span class="op" id="8500258">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500262">bbuf</span><span class="op" id="8500266">.</span><span class="ident" id="8500267">reset</span><span class="op" id="8500272">(</span><span class="op" id="8500273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500277">dec</span>&nbsp;<span class="op" id="8500281">:=</span>&nbsp;<span class="ident" id="8500284">NewDecoder</span><span class="op" id="8500294">(</span><span class="op" id="8500295">&amp;</span><span class="ident" id="8500296">bbuf</span><span class="op" id="8500300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500304">err</span>&nbsp;<span class="op" id="8500308">:=</span>&nbsp;<span class="ident" id="8500311">dec</span><span class="op" id="8500314">.</span><span class="ident" id="8500315">Decode</span><span class="op" id="8500321">(</span><span class="op" id="8500322">&amp;</span><span class="ident" id="8500323">x</span><span class="op" id="8500324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500328">if</span>&nbsp;<span class="ident" id="8500331">err</span>&nbsp;<span class="op" id="8500335">!=</span>&nbsp;<span class="ident" id="8500338">nil</span>&nbsp;<span class="op" id="8500342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500347">b</span><span class="op" id="8500348">.</span><span class="ident" id="8500349">Fatal</span><span class="op" id="8500354">(</span><span class="ident" id="8500355">i</span><span class="op" id="8500356">,</span>&nbsp;<span class="ident" id="8500358">err</span><span class="op" id="8500361">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500368">}</span><br>
<span class="lineno"></span><span class="op" id="8500370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8500373">func</span>&nbsp;<span class="ident" id="8500378">BenchmarkDecodeInt32Slice</span><span class="op" id="8500403">(</span><span class="ident" id="8500404">b</span>&nbsp;<span class="op" id="8500406">*</span><span class="ident" id="8500407">testing</span><span class="op" id="8500414">.</span><span class="ident" id="8500415">B</span><span class="op" id="8500416">)</span>&nbsp;<span class="op" id="8500418">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500421">var</span>&nbsp;<span class="ident" id="8500425">buf</span>&nbsp;<span class="ident" id="8500429">bytes</span><span class="op" id="8500434">.</span><span class="ident" id="8500435">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500443">enc</span>&nbsp;<span class="op" id="8500447">:=</span>&nbsp;<span class="ident" id="8500450">NewEncoder</span><span class="op" id="8500460">(</span><span class="op" id="8500461">&amp;</span><span class="ident" id="8500462">buf</span><span class="op" id="8500465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500468">a</span>&nbsp;<span class="op" id="8500470">:=</span>&nbsp;<span class="builtinfunc" id="8500473">make</span><span class="op" id="8500477">(</span><span class="op" id="8500478">[</span><span class="op" id="8500479">]</span><span class="builtintype" id="8500480">int32</span><span class="op" id="8500485">,</span>&nbsp;<span class="num" id="8500487">1000</span><span class="op" id="8500491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500494">for</span>&nbsp;<span class="ident" id="8500498">i</span>&nbsp;<span class="op" id="8500500">:=</span>&nbsp;<span class="keyword" id="8500503">range</span>&nbsp;<span class="ident" id="8500509">a</span>&nbsp;<span class="op" id="8500511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500515">a</span><span class="op" id="8500516">[</span><span class="ident" id="8500517">i</span><span class="op" id="8500518">]</span>&nbsp;<span class="op" id="8500520">=</span>&nbsp;<span class="num" id="8500522">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500531">err</span>&nbsp;<span class="op" id="8500535">:=</span>&nbsp;<span class="ident" id="8500538">enc</span><span class="op" id="8500541">.</span><span class="ident" id="8500542">Encode</span><span class="op" id="8500548">(</span><span class="ident" id="8500549">a</span><span class="op" id="8500550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500553">if</span>&nbsp;<span class="ident" id="8500556">err</span>&nbsp;<span class="op" id="8500560">!=</span>&nbsp;<span class="ident" id="8500563">nil</span>&nbsp;<span class="op" id="8500567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500571">b</span><span class="op" id="8500572">.</span><span class="ident" id="8500573">Fatal</span><span class="op" id="8500578">(</span><span class="ident" id="8500579">err</span><span class="op" id="8500582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500585">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500588">x</span>&nbsp;<span class="op" id="8500590">:=</span>&nbsp;<span class="builtinfunc" id="8500593">make</span><span class="op" id="8500597">(</span><span class="op" id="8500598">[</span><span class="op" id="8500599">]</span><span class="builtintype" id="8500600">int32</span><span class="op" id="8500605">,</span>&nbsp;<span class="num" id="8500607">1000</span><span class="op" id="8500611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500614">bbuf</span>&nbsp;<span class="op" id="8500619">:=</span>&nbsp;<span class="ident" id="8500622">benchmarkBuf</span><span class="op" id="8500634">{</span><span class="ident" id="8500635">data</span><span class="op" id="8500639">:</span>&nbsp;<span class="ident" id="8500641">buf</span><span class="op" id="8500644">.</span><span class="ident" id="8500645">Bytes</span><span class="op" id="8500650">(</span><span class="op" id="8500651">)</span><span class="op" id="8500652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500655">b</span><span class="op" id="8500656">.</span><span class="ident" id="8500657">ResetTimer</span><span class="op" id="8500667">(</span><span class="op" id="8500668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500671">for</span>&nbsp;<span class="ident" id="8500675">i</span>&nbsp;<span class="op" id="8500677">:=</span>&nbsp;<span class="num" id="8500680">0</span><span class="op" id="8500681">;</span>&nbsp;<span class="ident" id="8500683">i</span>&nbsp;<span class="op" id="8500685">&lt;</span>&nbsp;<span class="ident" id="8500687">b</span><span class="op" id="8500688">.</span><span class="ident" id="8500689">N</span><span class="op" id="8500690">;</span>&nbsp;<span class="ident" id="8500692">i</span><span class="op" id="8500693">++</span>&nbsp;<span class="op" id="8500696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500700">bbuf</span><span class="op" id="8500704">.</span><span class="ident" id="8500705">reset</span><span class="op" id="8500710">(</span><span class="op" id="8500711">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500715">dec</span>&nbsp;<span class="op" id="8500719">:=</span>&nbsp;<span class="ident" id="8500722">NewDecoder</span><span class="op" id="8500732">(</span><span class="op" id="8500733">&amp;</span><span class="ident" id="8500734">bbuf</span><span class="op" id="8500738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500742">err</span>&nbsp;<span class="op" id="8500746">:=</span>&nbsp;<span class="ident" id="8500749">dec</span><span class="op" id="8500752">.</span><span class="ident" id="8500753">Decode</span><span class="op" id="8500759">(</span><span class="op" id="8500760">&amp;</span><span class="ident" id="8500761">x</span><span class="op" id="8500762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500766">if</span>&nbsp;<span class="ident" id="8500769">err</span>&nbsp;<span class="op" id="8500773">!=</span>&nbsp;<span class="ident" id="8500776">nil</span>&nbsp;<span class="op" id="8500780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500785">b</span><span class="op" id="8500786">.</span><span class="ident" id="8500787">Fatal</span><span class="op" id="8500792">(</span><span class="ident" id="8500793">i</span><span class="op" id="8500794">,</span>&nbsp;<span class="ident" id="8500796">err</span><span class="op" id="8500799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500803">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500806">}</span><br>
<span class="lineno"></span><span class="op" id="8500808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8500811">func</span>&nbsp;<span class="ident" id="8500816">BenchmarkDecodeStringSlice</span><span class="op" id="8500842">(</span><span class="ident" id="8500843">b</span>&nbsp;<span class="op" id="8500845">*</span><span class="ident" id="8500846">testing</span><span class="op" id="8500853">.</span><span class="ident" id="8500854">B</span><span class="op" id="8500855">)</span>&nbsp;<span class="op" id="8500857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500860">var</span>&nbsp;<span class="ident" id="8500864">buf</span>&nbsp;<span class="ident" id="8500868">bytes</span><span class="op" id="8500873">.</span><span class="ident" id="8500874">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500882">enc</span>&nbsp;<span class="op" id="8500886">:=</span>&nbsp;<span class="ident" id="8500889">NewEncoder</span><span class="op" id="8500899">(</span><span class="op" id="8500900">&amp;</span><span class="ident" id="8500901">buf</span><span class="op" id="8500904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500907">a</span>&nbsp;<span class="op" id="8500909">:=</span>&nbsp;<span class="builtinfunc" id="8500912">make</span><span class="op" id="8500916">(</span><span class="op" id="8500917">[</span><span class="op" id="8500918">]</span><span class="builtintype" id="8500919">string</span><span class="op" id="8500925">,</span>&nbsp;<span class="num" id="8500927">1000</span><span class="op" id="8500931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500934">for</span>&nbsp;<span class="ident" id="8500938">i</span>&nbsp;<span class="op" id="8500940">:=</span>&nbsp;<span class="keyword" id="8500943">range</span>&nbsp;<span class="ident" id="8500949">a</span>&nbsp;<span class="op" id="8500951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500955">a</span><span class="op" id="8500956">[</span><span class="ident" id="8500957">i</span><span class="op" id="8500958">]</span>&nbsp;<span class="op" id="8500960">=</span>&nbsp;<span class="string" id="8500962">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500981">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500984">err</span>&nbsp;<span class="op" id="8500988">:=</span>&nbsp;<span class="ident" id="8500991">enc</span><span class="op" id="8500994">.</span><span class="ident" id="8500995">Encode</span><span class="op" id="8501001">(</span><span class="ident" id="8501002">a</span><span class="op" id="8501003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501006">if</span>&nbsp;<span class="ident" id="8501009">err</span>&nbsp;<span class="op" id="8501013">!=</span>&nbsp;<span class="ident" id="8501016">nil</span>&nbsp;<span class="op" id="8501020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501024">b</span><span class="op" id="8501025">.</span><span class="ident" id="8501026">Fatal</span><span class="op" id="8501031">(</span><span class="ident" id="8501032">err</span><span class="op" id="8501035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501041">x</span>&nbsp;<span class="op" id="8501043">:=</span>&nbsp;<span class="builtinfunc" id="8501046">make</span><span class="op" id="8501050">(</span><span class="op" id="8501051">[</span><span class="op" id="8501052">]</span><span class="builtintype" id="8501053">string</span><span class="op" id="8501059">,</span>&nbsp;<span class="num" id="8501061">1000</span><span class="op" id="8501065">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501068">bbuf</span>&nbsp;<span class="op" id="8501073">:=</span>&nbsp;<span class="ident" id="8501076">benchmarkBuf</span><span class="op" id="8501088">{</span><span class="ident" id="8501089">data</span><span class="op" id="8501093">:</span>&nbsp;<span class="ident" id="8501095">buf</span><span class="op" id="8501098">.</span><span class="ident" id="8501099">Bytes</span><span class="op" id="8501104">(</span><span class="op" id="8501105">)</span><span class="op" id="8501106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501109">b</span><span class="op" id="8501110">.</span><span class="ident" id="8501111">ResetTimer</span><span class="op" id="8501121">(</span><span class="op" id="8501122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501125">for</span>&nbsp;<span class="ident" id="8501129">i</span>&nbsp;<span class="op" id="8501131">:=</span>&nbsp;<span class="num" id="8501134">0</span><span class="op" id="8501135">;</span>&nbsp;<span class="ident" id="8501137">i</span>&nbsp;<span class="op" id="8501139">&lt;</span>&nbsp;<span class="ident" id="8501141">b</span><span class="op" id="8501142">.</span><span class="ident" id="8501143">N</span><span class="op" id="8501144">;</span>&nbsp;<span class="ident" id="8501146">i</span><span class="op" id="8501147">++</span>&nbsp;<span class="op" id="8501150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501154">bbuf</span><span class="op" id="8501158">.</span><span class="ident" id="8501159">reset</span><span class="op" id="8501164">(</span><span class="op" id="8501165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501169">dec</span>&nbsp;<span class="op" id="8501173">:=</span>&nbsp;<span class="ident" id="8501176">NewDecoder</span><span class="op" id="8501186">(</span><span class="op" id="8501187">&amp;</span><span class="ident" id="8501188">bbuf</span><span class="op" id="8501192">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501196">err</span>&nbsp;<span class="op" id="8501200">:=</span>&nbsp;<span class="ident" id="8501203">dec</span><span class="op" id="8501206">.</span><span class="ident" id="8501207">Decode</span><span class="op" id="8501213">(</span><span class="op" id="8501214">&amp;</span><span class="ident" id="8501215">x</span><span class="op" id="8501216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501220">if</span>&nbsp;<span class="ident" id="8501223">err</span>&nbsp;<span class="op" id="8501227">!=</span>&nbsp;<span class="ident" id="8501230">nil</span>&nbsp;<span class="op" id="8501234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501239">b</span><span class="op" id="8501240">.</span><span class="ident" id="8501241">Fatal</span><span class="op" id="8501246">(</span><span class="ident" id="8501247">i</span><span class="op" id="8501248">,</span>&nbsp;<span class="ident" id="8501250">err</span><span class="op" id="8501253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501260">}</span><br>
<span class="lineno">325</span><span class="op" id="8501262">}</span>
</div>
</body>
</html>
