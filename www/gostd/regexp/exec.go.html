<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp</h2>
<ul>
<li><a href="/gostd/regexp/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/regexp/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/regexp/exec.go.html" class="current">exec.go</a></li>
<li><a href="/gostd/regexp/exec2_test.go.html">exec2_test.go</a></li>
<li><a href="/gostd/regexp/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/regexp/find_test.go.html">find_test.go</a></li>
<li><a href="/gostd/regexp/onepass.go.html">onepass.go</a></li>
<li><a href="/gostd/regexp/onepass_test.go.html">onepass_test.go</a></li>
<li><a href="/gostd/regexp/regexp.go.html">regexp.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3536623">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3536678">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3536732">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3536783">package</span>&nbsp;<span class="ident" id="3536791">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3536799">import</span>&nbsp;<span class="op" id="3536806">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3536809">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3536815">&#34;regexp/syntax&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3536831">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3536834">//&nbsp;A&nbsp;queue&nbsp;is&nbsp;a&nbsp;&#39;sparse&nbsp;array&#39;&nbsp;holding&nbsp;pending&nbsp;threads&nbsp;of&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="3536903">//&nbsp;See&nbsp;http://research.swtch.com/2008/03/using-uninitialized-memory-for-fun-and.html</span><br>
<span class="lineno"></span><span class="keyword" id="3536988">type</span>&nbsp;<span class="ident" id="3536993">queue</span>&nbsp;<span class="keyword" id="3536999">struct</span>&nbsp;<span class="op" id="3537006">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537009">sparse</span>&nbsp;<span class="op" id="3537016">[</span><span class="op" id="3537017">]</span><span class="builtintype" id="3537018">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537026">dense</span>&nbsp;&nbsp;<span class="op" id="3537033">[</span><span class="op" id="3537034">]</span><span class="ident" id="3537035"><a href="/gostd/regexp/exec.go.html#3537273">entry</a></span><br>
<span class="lineno"></span><span class="op" id="3537041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3537044">//&nbsp;A&nbsp;entry&nbsp;is&nbsp;an&nbsp;entry&nbsp;on&nbsp;a&nbsp;queue.</span><br>
<span class="lineno">20</span><span class="comment" id="3537079">//&nbsp;It&nbsp;holds&nbsp;both&nbsp;the&nbsp;instruction&nbsp;pc&nbsp;and&nbsp;the&nbsp;actual&nbsp;thread.</span><br>
<span class="lineno"></span><span class="comment" id="3537138">//&nbsp;Some&nbsp;queue&nbsp;entries&nbsp;are&nbsp;just&nbsp;place&nbsp;holders&nbsp;so&nbsp;that&nbsp;the&nbsp;machine</span><br>
<span class="lineno"></span><span class="comment" id="3537203">//&nbsp;knows&nbsp;it&nbsp;has&nbsp;considered&nbsp;that&nbsp;pc.&nbsp;&nbsp;Such&nbsp;entries&nbsp;have&nbsp;t&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3537268">type</span>&nbsp;<span class="ident" id="3537273">entry</span>&nbsp;<span class="keyword" id="3537279">struct</span>&nbsp;<span class="op" id="3537286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537289">pc</span>&nbsp;<span class="builtintype" id="3537292">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537300">t</span>&nbsp;&nbsp;<span class="op" id="3537303">*</span><span class="ident" id="3537304"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span><br>
<span class="lineno"></span><span class="op" id="3537311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3537314">//&nbsp;A&nbsp;thread&nbsp;is&nbsp;the&nbsp;state&nbsp;of&nbsp;a&nbsp;single&nbsp;path&nbsp;through&nbsp;the&nbsp;machine:</span><br>
<span class="lineno"></span><span class="comment" id="3537377">//&nbsp;an&nbsp;instruction&nbsp;and&nbsp;a&nbsp;corresponding&nbsp;capture&nbsp;array.</span><br>
<span class="lineno">30</span><span class="comment" id="3537430">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp2.html</span><br>
<span class="lineno"></span><span class="keyword" id="3537479">type</span>&nbsp;<span class="ident" id="3537484">thread</span>&nbsp;<span class="keyword" id="3537491">struct</span>&nbsp;<span class="op" id="3537498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537501">inst</span>&nbsp;<span class="op" id="3537506">*</span><span class="ident" id="3537507"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3537513">.</span><span class="ident" id="3537514"><a href="/gostd/regexp/syntax/prog.go.html#3661062">Inst</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3537520">cap</span>&nbsp;&nbsp;<span class="op" id="3537525">[</span><span class="op" id="3537526">]</span><span class="builtintype" id="3537527">int</span><br>
<span class="lineno"></span><span class="op" id="3537531">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3537534">//&nbsp;A&nbsp;machine&nbsp;holds&nbsp;all&nbsp;the&nbsp;state&nbsp;during&nbsp;an&nbsp;NFA&nbsp;simulation&nbsp;for&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="3537599">type</span>&nbsp;<span class="ident" id="3537604">machine</span>&nbsp;<span class="keyword" id="3537612">struct</span>&nbsp;<span class="op" id="3537619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537622">re</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3537631">*</span><span class="ident" id="3537632"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3537644">//&nbsp;corresponding&nbsp;Regexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537669">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3537678">*</span><span class="ident" id="3537679"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3537685">.</span><span class="ident" id="3537686"><a href="/gostd/regexp/syntax/prog.go.html#3659010">Prog</a></span>&nbsp;<span class="comment" id="3537691">//&nbsp;compiled&nbsp;program</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537712">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3537721">*</span><span class="ident" id="3537722"><a href="/gostd/regexp/onepass.go.html#3548182">onePassProg</a></span>&nbsp;<span class="comment" id="3537734">//&nbsp;compiled&nbsp;onepass&nbsp;program,&nbsp;or&nbsp;notOnePass</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537778">q0</span><span class="op" id="3537780">,</span>&nbsp;<span class="ident" id="3537782">q1</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3537787"><a href="/gostd/regexp/exec.go.html#3536993">queue</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3537800">//&nbsp;two&nbsp;queues&nbsp;for&nbsp;runq,&nbsp;nextq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537831">pool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3537840">[</span><span class="op" id="3537841">]</span><span class="op" id="3537842">*</span><span class="ident" id="3537843"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3537853">//&nbsp;pool&nbsp;of&nbsp;available&nbsp;threads</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537883">matched</span>&nbsp;&nbsp;<span class="builtintype" id="3537892">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3537905">//&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3537935">matchcap</span>&nbsp;<span class="op" id="3537944">[</span><span class="op" id="3537945">]</span><span class="builtintype" id="3537946">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3537957">//&nbsp;capture&nbsp;information&nbsp;for&nbsp;the&nbsp;match</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3537996">//&nbsp;cached&nbsp;inputs,&nbsp;to&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538035">inputBytes</span>&nbsp;&nbsp;<span class="ident" id="3538047"><a href="/gostd/regexp/regexp.go.html#3574359">inputBytes</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538059">inputString</span>&nbsp;<span class="ident" id="3538071"><a href="/gostd/regexp/regexp.go.html#3573515">inputString</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538084">inputReader</span>&nbsp;<span class="ident" id="3538096"><a href="/gostd/regexp/regexp.go.html#3575180">inputReader</a></span><br>
<span class="lineno">50</span><span class="op" id="3538108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3538111">func</span>&nbsp;<span class="op" id="3538116">(</span><span class="ident" id="3538117">m</span>&nbsp;<span class="op" id="3538119">*</span><span class="ident" id="3538120"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3538127">)</span>&nbsp;<span class="ident" id="3538129">newInputBytes</span><span class="op" id="3538142">(</span><span class="ident" id="3538143">b</span>&nbsp;<span class="op" id="3538145">[</span><span class="op" id="3538146">]</span><span class="builtintype" id="3538147">byte</span><span class="op" id="3538151">)</span>&nbsp;<span class="ident" id="3538153"><a href="/gostd/regexp/regexp.go.html#3573233">input</a></span>&nbsp;<span class="op" id="3538159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538162"><a href="/gostd/regexp/exec.go.html#3538117">m</a></span><span class="op" id="3538163">.</span><span class="ident" id="3538164"><a href="/gostd/regexp/exec.go.html#3538035">inputBytes</a></span><span class="op" id="3538174">.</span><span class="ident" id="3538175"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span>&nbsp;<span class="op" id="3538179">=</span>&nbsp;<span class="ident" id="3538181"><a href="/gostd/regexp/exec.go.html#3538143">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3538184">return</span>&nbsp;<span class="op" id="3538191">&amp;</span><span class="ident" id="3538192"><a href="/gostd/regexp/exec.go.html#3538117">m</a></span><span class="op" id="3538193">.</span><span class="ident" id="3538194"><a href="/gostd/regexp/exec.go.html#3538035">inputBytes</a></span><br>
<span class="lineno">55</span><span class="op" id="3538205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3538208">func</span>&nbsp;<span class="op" id="3538213">(</span><span class="ident" id="3538214">m</span>&nbsp;<span class="op" id="3538216">*</span><span class="ident" id="3538217"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3538224">)</span>&nbsp;<span class="ident" id="3538226">newInputString</span><span class="op" id="3538240">(</span><span class="ident" id="3538241">s</span>&nbsp;<span class="builtintype" id="3538243">string</span><span class="op" id="3538249">)</span>&nbsp;<span class="ident" id="3538251"><a href="/gostd/regexp/regexp.go.html#3573233">input</a></span>&nbsp;<span class="op" id="3538257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538260"><a href="/gostd/regexp/exec.go.html#3538214">m</a></span><span class="op" id="3538261">.</span><span class="ident" id="3538262"><a href="/gostd/regexp/exec.go.html#3538059">inputString</a></span><span class="op" id="3538273">.</span><span class="ident" id="3538274"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span>&nbsp;<span class="op" id="3538278">=</span>&nbsp;<span class="ident" id="3538280"><a href="/gostd/regexp/exec.go.html#3538241">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3538283">return</span>&nbsp;<span class="op" id="3538290">&amp;</span><span class="ident" id="3538291"><a href="/gostd/regexp/exec.go.html#3538214">m</a></span><span class="op" id="3538292">.</span><span class="ident" id="3538293"><a href="/gostd/regexp/exec.go.html#3538059">inputString</a></span><br>
<span class="lineno">60</span><span class="op" id="3538305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3538308">func</span>&nbsp;<span class="op" id="3538313">(</span><span class="ident" id="3538314">m</span>&nbsp;<span class="op" id="3538316">*</span><span class="ident" id="3538317"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3538324">)</span>&nbsp;<span class="ident" id="3538326">newInputReader</span><span class="op" id="3538340">(</span><span class="ident" id="3538341">r</span>&nbsp;<span class="ident" id="3538343"><a href="/gostd/regexp/exec.go.html#3536809">io</a></span><span class="op" id="3538345">.</span><span class="ident" id="3538346"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><span class="op" id="3538356">)</span>&nbsp;<span class="ident" id="3538358"><a href="/gostd/regexp/regexp.go.html#3573233">input</a></span>&nbsp;<span class="op" id="3538364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538367"><a href="/gostd/regexp/exec.go.html#3538314">m</a></span><span class="op" id="3538368">.</span><span class="ident" id="3538369"><a href="/gostd/regexp/exec.go.html#3538084">inputReader</a></span><span class="op" id="3538380">.</span><span class="ident" id="3538381"><a href="/gostd/regexp/regexp.go.html#3575202">r</a></span>&nbsp;<span class="op" id="3538383">=</span>&nbsp;<span class="ident" id="3538385"><a href="/gostd/regexp/exec.go.html#3538341">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538388"><a href="/gostd/regexp/exec.go.html#3538314">m</a></span><span class="op" id="3538389">.</span><span class="ident" id="3538390"><a href="/gostd/regexp/exec.go.html#3538084">inputReader</a></span><span class="op" id="3538401">.</span><span class="ident" id="3538402"><a href="/gostd/regexp/regexp.go.html#3575223">atEOT</a></span>&nbsp;<span class="op" id="3538408">=</span>&nbsp;<span class="builtintype" id="3538410">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538417"><a href="/gostd/regexp/exec.go.html#3538314">m</a></span><span class="op" id="3538418">.</span><span class="ident" id="3538419"><a href="/gostd/regexp/exec.go.html#3538084">inputReader</a></span><span class="op" id="3538430">.</span><span class="ident" id="3538431"><a href="/gostd/regexp/regexp.go.html#3575235">pos</a></span>&nbsp;<span class="op" id="3538435">=</span>&nbsp;<span class="num" id="3538437">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3538440">return</span>&nbsp;<span class="op" id="3538447">&amp;</span><span class="ident" id="3538448"><a href="/gostd/regexp/exec.go.html#3538314">m</a></span><span class="op" id="3538449">.</span><span class="ident" id="3538450"><a href="/gostd/regexp/exec.go.html#3538084">inputReader</a></span><br>
<span class="lineno"></span><span class="op" id="3538462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3538465">//&nbsp;progMachine&nbsp;returns&nbsp;a&nbsp;new&nbsp;machine&nbsp;running&nbsp;the&nbsp;prog&nbsp;p.</span><br>
<span class="lineno">70</span><span class="keyword" id="3538522">func</span>&nbsp;<span class="ident" id="3538527">progMachine</span><span class="op" id="3538538">(</span><span class="ident" id="3538539">p</span>&nbsp;<span class="op" id="3538541">*</span><span class="ident" id="3538542"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3538548">.</span><span class="ident" id="3538549"><a href="/gostd/regexp/syntax/prog.go.html#3659010">Prog</a></span><span class="op" id="3538553">,</span>&nbsp;<span class="ident" id="3538555">op</span>&nbsp;<span class="op" id="3538558">*</span><span class="ident" id="3538559"><a href="/gostd/regexp/onepass.go.html#3548182">onePassProg</a></span><span class="op" id="3538570">)</span>&nbsp;<span class="op" id="3538572">*</span><span class="ident" id="3538573"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span>&nbsp;<span class="op" id="3538581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538584">m</span>&nbsp;<span class="op" id="3538586">:=</span>&nbsp;<span class="op" id="3538589">&amp;</span><span class="ident" id="3538590"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3538597">{</span><span class="ident" id="3538598"><a href="/gostd/regexp/exec.go.html#3537669">p</a></span><span class="op" id="3538599">:</span>&nbsp;<span class="ident" id="3538601"><a href="/gostd/regexp/exec.go.html#3538539">p</a></span><span class="op" id="3538602">,</span>&nbsp;<span class="ident" id="3538604"><a href="/gostd/regexp/exec.go.html#3537712">op</a></span><span class="op" id="3538606">:</span>&nbsp;<span class="ident" id="3538608"><a href="/gostd/regexp/exec.go.html#3538555">op</a></span><span class="op" id="3538610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538613">n</span>&nbsp;<span class="op" id="3538615">:=</span>&nbsp;<span class="builtinfunc" id="3538618">len</span><span class="op" id="3538621">(</span><span class="ident" id="3538622"><a href="/gostd/regexp/exec.go.html#3538584">m</a></span><span class="op" id="3538623">.</span><span class="ident" id="3538624"><a href="/gostd/regexp/exec.go.html#3537669">p</a></span><span class="op" id="3538625">.</span><span class="ident" id="3538626"><a href="/gostd/regexp/syntax/prog.go.html#3659025">Inst</a></span><span class="op" id="3538630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538633"><a href="/gostd/regexp/exec.go.html#3538584">m</a></span><span class="op" id="3538634">.</span><span class="ident" id="3538635"><a href="/gostd/regexp/exec.go.html#3537778">q0</a></span>&nbsp;<span class="op" id="3538638">=</span>&nbsp;<span class="ident" id="3538640"><a href="/gostd/regexp/exec.go.html#3536993">queue</a></span><span class="op" id="3538645">{</span><span class="builtinfunc" id="3538646">make</span><span class="op" id="3538650">(</span><span class="op" id="3538651">[</span><span class="op" id="3538652">]</span><span class="builtintype" id="3538653">uint32</span><span class="op" id="3538659">,</span>&nbsp;<span class="ident" id="3538661"><a href="/gostd/regexp/exec.go.html#3538613">n</a></span><span class="op" id="3538662">)</span><span class="op" id="3538663">,</span>&nbsp;<span class="builtinfunc" id="3538665">make</span><span class="op" id="3538669">(</span><span class="op" id="3538670">[</span><span class="op" id="3538671">]</span><span class="ident" id="3538672"><a href="/gostd/regexp/exec.go.html#3537273">entry</a></span><span class="op" id="3538677">,</span>&nbsp;<span class="num" id="3538679">0</span><span class="op" id="3538680">,</span>&nbsp;<span class="ident" id="3538682"><a href="/gostd/regexp/exec.go.html#3538613">n</a></span><span class="op" id="3538683">)</span><span class="op" id="3538684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538687"><a href="/gostd/regexp/exec.go.html#3538584">m</a></span><span class="op" id="3538688">.</span><span class="ident" id="3538689"><a href="/gostd/regexp/exec.go.html#3537782">q1</a></span>&nbsp;<span class="op" id="3538692">=</span>&nbsp;<span class="ident" id="3538694"><a href="/gostd/regexp/exec.go.html#3536993">queue</a></span><span class="op" id="3538699">{</span><span class="builtinfunc" id="3538700">make</span><span class="op" id="3538704">(</span><span class="op" id="3538705">[</span><span class="op" id="3538706">]</span><span class="builtintype" id="3538707">uint32</span><span class="op" id="3538713">,</span>&nbsp;<span class="ident" id="3538715"><a href="/gostd/regexp/exec.go.html#3538613">n</a></span><span class="op" id="3538716">)</span><span class="op" id="3538717">,</span>&nbsp;<span class="builtinfunc" id="3538719">make</span><span class="op" id="3538723">(</span><span class="op" id="3538724">[</span><span class="op" id="3538725">]</span><span class="ident" id="3538726"><a href="/gostd/regexp/exec.go.html#3537273">entry</a></span><span class="op" id="3538731">,</span>&nbsp;<span class="num" id="3538733">0</span><span class="op" id="3538734">,</span>&nbsp;<span class="ident" id="3538736"><a href="/gostd/regexp/exec.go.html#3538613">n</a></span><span class="op" id="3538737">)</span><span class="op" id="3538738">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538741">ncap</span>&nbsp;<span class="op" id="3538746">:=</span>&nbsp;<span class="ident" id="3538749"><a href="/gostd/regexp/exec.go.html#3538539">p</a></span><span class="op" id="3538750">.</span><span class="ident" id="3538751"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3538759">if</span>&nbsp;<span class="ident" id="3538762"><a href="/gostd/regexp/exec.go.html#3538741">ncap</a></span>&nbsp;<span class="op" id="3538767">&lt;</span>&nbsp;<span class="num" id="3538769">2</span>&nbsp;<span class="op" id="3538771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538775"><a href="/gostd/regexp/exec.go.html#3538741">ncap</a></span>&nbsp;<span class="op" id="3538780">=</span>&nbsp;<span class="num" id="3538782">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3538785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538788"><a href="/gostd/regexp/exec.go.html#3538584">m</a></span><span class="op" id="3538789">.</span><span class="ident" id="3538790"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span>&nbsp;<span class="op" id="3538799">=</span>&nbsp;<span class="builtinfunc" id="3538801">make</span><span class="op" id="3538805">(</span><span class="op" id="3538806">[</span><span class="op" id="3538807">]</span><span class="builtintype" id="3538808">int</span><span class="op" id="3538811">,</span>&nbsp;<span class="ident" id="3538813"><a href="/gostd/regexp/exec.go.html#3538741">ncap</a></span><span class="op" id="3538817">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3538820">return</span>&nbsp;<span class="ident" id="3538827"><a href="/gostd/regexp/exec.go.html#3538584">m</a></span><br>
<span class="lineno"></span><span class="op" id="3538829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3538832">func</span>&nbsp;<span class="op" id="3538837">(</span><span class="ident" id="3538838">m</span>&nbsp;<span class="op" id="3538840">*</span><span class="ident" id="3538841"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3538848">)</span>&nbsp;<span class="ident" id="3538850">init</span><span class="op" id="3538854">(</span><span class="ident" id="3538855">ncap</span>&nbsp;<span class="builtintype" id="3538860">int</span><span class="op" id="3538863">)</span>&nbsp;<span class="op" id="3538865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3538868">for</span>&nbsp;<span class="ident" id="3538872">_</span><span class="op" id="3538873">,</span>&nbsp;<span class="ident" id="3538875">t</span>&nbsp;<span class="op" id="3538877">:=</span>&nbsp;<span class="keyword" id="3538880">range</span>&nbsp;<span class="ident" id="3538886"><a href="/gostd/regexp/exec.go.html#3538838">m</a></span><span class="op" id="3538887">.</span><span class="ident" id="3538888"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3538893">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538897"><a href="/gostd/regexp/exec.go.html#3538875">t</a></span><span class="op" id="3538898">.</span><span class="builtinfunc" id="3538899"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span>&nbsp;<span class="op" id="3538903">=</span>&nbsp;<span class="ident" id="3538905"><a href="/gostd/regexp/exec.go.html#3538875">t</a></span><span class="op" id="3538906">.</span><span class="builtinfunc" id="3538907"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3538910">[</span><span class="op" id="3538911">:</span><span class="ident" id="3538912"><a href="/gostd/regexp/exec.go.html#3538855">ncap</a></span><span class="op" id="3538916">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3538919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3538922"><a href="/gostd/regexp/exec.go.html#3538838">m</a></span><span class="op" id="3538923">.</span><span class="ident" id="3538924"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span>&nbsp;<span class="op" id="3538933">=</span>&nbsp;<span class="ident" id="3538935"><a href="/gostd/regexp/exec.go.html#3538838">m</a></span><span class="op" id="3538936">.</span><span class="ident" id="3538937"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3538945">[</span><span class="op" id="3538946">:</span><span class="ident" id="3538947"><a href="/gostd/regexp/exec.go.html#3538855">ncap</a></span><span class="op" id="3538951">]</span><br>
<span class="lineno"></span><span class="op" id="3538953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="3538956">//&nbsp;alloc&nbsp;allocates&nbsp;a&nbsp;new&nbsp;thread&nbsp;with&nbsp;the&nbsp;given&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="3539016">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;free&nbsp;pool&nbsp;if&nbsp;possible.</span><br>
<span class="lineno"></span><span class="keyword" id="3539054">func</span>&nbsp;<span class="op" id="3539059">(</span><span class="ident" id="3539060">m</span>&nbsp;<span class="op" id="3539062">*</span><span class="ident" id="3539063"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3539070">)</span>&nbsp;<span class="ident" id="3539072">alloc</span><span class="op" id="3539077">(</span><span class="ident" id="3539078">i</span>&nbsp;<span class="op" id="3539080">*</span><span class="ident" id="3539081"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3539087">.</span><span class="ident" id="3539088"><a href="/gostd/regexp/syntax/prog.go.html#3661062">Inst</a></span><span class="op" id="3539092">)</span>&nbsp;<span class="op" id="3539094">*</span><span class="ident" id="3539095"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span>&nbsp;<span class="op" id="3539102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539105">var</span>&nbsp;<span class="ident" id="3539109">t</span>&nbsp;<span class="op" id="3539111">*</span><span class="ident" id="3539112"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539120">if</span>&nbsp;<span class="ident" id="3539123">n</span>&nbsp;<span class="op" id="3539125">:=</span>&nbsp;<span class="builtinfunc" id="3539128">len</span><span class="op" id="3539131">(</span><span class="ident" id="3539132"><a href="/gostd/regexp/exec.go.html#3539060">m</a></span><span class="op" id="3539133">.</span><span class="ident" id="3539134"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3539138">)</span><span class="op" id="3539139">;</span>&nbsp;<span class="ident" id="3539141"><a href="/gostd/regexp/exec.go.html#3539123">n</a></span>&nbsp;<span class="op" id="3539143">&gt;</span>&nbsp;<span class="num" id="3539145">0</span>&nbsp;<span class="op" id="3539147">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539151"><a href="/gostd/regexp/exec.go.html#3539109">t</a></span>&nbsp;<span class="op" id="3539153">=</span>&nbsp;<span class="ident" id="3539155"><a href="/gostd/regexp/exec.go.html#3539060">m</a></span><span class="op" id="3539156">.</span><span class="ident" id="3539157"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3539161">[</span><span class="ident" id="3539162"><a href="/gostd/regexp/exec.go.html#3539123">n</a></span><span class="op" id="3539163">-</span><span class="num" id="3539164">1</span><span class="op" id="3539165">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539169"><a href="/gostd/regexp/exec.go.html#3539060">m</a></span><span class="op" id="3539170">.</span><span class="ident" id="3539171"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3539176">=</span>&nbsp;<span class="ident" id="3539178"><a href="/gostd/regexp/exec.go.html#3539060">m</a></span><span class="op" id="3539179">.</span><span class="ident" id="3539180"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3539184">[</span><span class="op" id="3539185">:</span><span class="ident" id="3539186"><a href="/gostd/regexp/exec.go.html#3539123">n</a></span><span class="op" id="3539187">-</span><span class="num" id="3539188">1</span><span class="op" id="3539189">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3539192">}</span>&nbsp;<span class="keyword" id="3539194">else</span>&nbsp;<span class="op" id="3539199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539203"><a href="/gostd/regexp/exec.go.html#3539109">t</a></span>&nbsp;<span class="op" id="3539205">=</span>&nbsp;<span class="builtinfunc" id="3539207">new</span><span class="op" id="3539210">(</span><span class="ident" id="3539211"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span><span class="op" id="3539217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539221"><a href="/gostd/regexp/exec.go.html#3539109">t</a></span><span class="op" id="3539222">.</span><span class="builtinfunc" id="3539223"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span>&nbsp;<span class="op" id="3539227">=</span>&nbsp;<span class="builtinfunc" id="3539229">make</span><span class="op" id="3539233">(</span><span class="op" id="3539234">[</span><span class="op" id="3539235">]</span><span class="builtintype" id="3539236">int</span><span class="op" id="3539239">,</span>&nbsp;<span class="builtinfunc" id="3539241">len</span><span class="op" id="3539244">(</span><span class="ident" id="3539245"><a href="/gostd/regexp/exec.go.html#3539060">m</a></span><span class="op" id="3539246">.</span><span class="ident" id="3539247"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3539255">)</span><span class="op" id="3539256">,</span>&nbsp;<span class="builtinfunc" id="3539258">cap</span><span class="op" id="3539261">(</span><span class="ident" id="3539262"><a href="/gostd/regexp/exec.go.html#3539060">m</a></span><span class="op" id="3539263">.</span><span class="ident" id="3539264"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3539272">)</span><span class="op" id="3539273">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3539276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539279"><a href="/gostd/regexp/exec.go.html#3539109">t</a></span><span class="op" id="3539280">.</span><span class="ident" id="3539281"><a href="/gostd/regexp/exec.go.html#3537501">inst</a></span>&nbsp;<span class="op" id="3539286">=</span>&nbsp;<span class="ident" id="3539288"><a href="/gostd/regexp/exec.go.html#3539078">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539291">return</span>&nbsp;<span class="ident" id="3539298"><a href="/gostd/regexp/exec.go.html#3539109">t</a></span><br>
<span class="lineno"></span><span class="op" id="3539300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3539303">//&nbsp;free&nbsp;returns&nbsp;t&nbsp;to&nbsp;the&nbsp;free&nbsp;pool.</span><br>
<span class="lineno"></span><span class="keyword" id="3539339">func</span>&nbsp;<span class="op" id="3539344">(</span><span class="ident" id="3539345">m</span>&nbsp;<span class="op" id="3539347">*</span><span class="ident" id="3539348"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3539355">)</span>&nbsp;<span class="ident" id="3539357">free</span><span class="op" id="3539361">(</span><span class="ident" id="3539362">t</span>&nbsp;<span class="op" id="3539364">*</span><span class="ident" id="3539365"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span><span class="op" id="3539371">)</span>&nbsp;<span class="op" id="3539373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539376"><a href="/gostd/regexp/exec.go.html#3539345">m</a></span><span class="op" id="3539377">.</span><span class="ident" id="3539378"><a href="/gostd/regexp/exec.go.html#3538035">inputBytes</a></span><span class="op" id="3539388">.</span><span class="ident" id="3539389"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span>&nbsp;<span class="op" id="3539393">=</span>&nbsp;<span class="builtintype" id="3539395">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539400"><a href="/gostd/regexp/exec.go.html#3539345">m</a></span><span class="op" id="3539401">.</span><span class="ident" id="3539402"><a href="/gostd/regexp/exec.go.html#3538059">inputString</a></span><span class="op" id="3539413">.</span><span class="ident" id="3539414"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span>&nbsp;<span class="op" id="3539418">=</span>&nbsp;<span class="string" id="3539420">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539424"><a href="/gostd/regexp/exec.go.html#3539345">m</a></span><span class="op" id="3539425">.</span><span class="ident" id="3539426"><a href="/gostd/regexp/exec.go.html#3538084">inputReader</a></span><span class="op" id="3539437">.</span><span class="ident" id="3539438"><a href="/gostd/regexp/regexp.go.html#3575202">r</a></span>&nbsp;<span class="op" id="3539440">=</span>&nbsp;<span class="builtintype" id="3539442">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539447"><a href="/gostd/regexp/exec.go.html#3539345">m</a></span><span class="op" id="3539448">.</span><span class="ident" id="3539449"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3539454">=</span>&nbsp;<span class="builtinfunc" id="3539456">append</span><span class="op" id="3539462">(</span><span class="ident" id="3539463"><a href="/gostd/regexp/exec.go.html#3539345">m</a></span><span class="op" id="3539464">.</span><span class="ident" id="3539465"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3539469">,</span>&nbsp;<span class="ident" id="3539471"><a href="/gostd/regexp/exec.go.html#3539362">t</a></span><span class="op" id="3539472">)</span><br>
<span class="lineno"></span><span class="op" id="3539474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3539477">//&nbsp;match&nbsp;runs&nbsp;the&nbsp;machine&nbsp;over&nbsp;the&nbsp;input&nbsp;starting&nbsp;at&nbsp;pos.</span><br>
<span class="lineno"></span><span class="comment" id="3539535">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found.</span><br>
<span class="lineno">115</span><span class="comment" id="3539576">//&nbsp;If&nbsp;so,&nbsp;m.matchcap&nbsp;holds&nbsp;the&nbsp;submatch&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="3539629">func</span>&nbsp;<span class="op" id="3539634">(</span><span class="ident" id="3539635">m</span>&nbsp;<span class="op" id="3539637">*</span><span class="ident" id="3539638"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3539645">)</span>&nbsp;<span class="ident" id="3539647">match</span><span class="op" id="3539652">(</span><span class="ident" id="3539653">i</span>&nbsp;<span class="ident" id="3539655"><a href="/gostd/regexp/regexp.go.html#3573233">input</a></span><span class="op" id="3539660">,</span>&nbsp;<span class="ident" id="3539662">pos</span>&nbsp;<span class="builtintype" id="3539666">int</span><span class="op" id="3539669">)</span>&nbsp;<span class="builtintype" id="3539671">bool</span>&nbsp;<span class="op" id="3539676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539679">startCond</span>&nbsp;<span class="op" id="3539689">:=</span>&nbsp;<span class="ident" id="3539692"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3539693">.</span><span class="ident" id="3539694"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3539696">.</span><span class="ident" id="3539697"><a href="/gostd/regexp/regexp.go.html#3567533">cond</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539703">if</span>&nbsp;<span class="ident" id="3539706"><a href="/gostd/regexp/exec.go.html#3539679">startCond</a></span>&nbsp;<span class="op" id="3539716">==</span>&nbsp;<span class="op" id="3539719">^</span><span class="ident" id="3539720"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3539726">.</span><span class="ident" id="3539727"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3539734">(</span><span class="num" id="3539735">0</span><span class="op" id="3539736">)</span>&nbsp;<span class="op" id="3539738">{</span>&nbsp;<span class="comment" id="3539740">//&nbsp;impossible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539756">return</span>&nbsp;<span class="builtintype" id="3539763">false</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3539770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539773"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3539774">.</span><span class="ident" id="3539775"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3539783">=</span>&nbsp;<span class="builtintype" id="3539785">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539792">for</span>&nbsp;<span class="ident" id="3539796">i</span>&nbsp;<span class="op" id="3539798">:=</span>&nbsp;<span class="keyword" id="3539801">range</span>&nbsp;<span class="ident" id="3539807"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3539808">.</span><span class="ident" id="3539809"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span>&nbsp;<span class="op" id="3539818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539822"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3539823">.</span><span class="ident" id="3539824"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3539832">[</span><span class="ident" id="3539833"><a href="/gostd/regexp/exec.go.html#3539796">i</a></span><span class="op" id="3539834">]</span>&nbsp;<span class="op" id="3539836">=</span>&nbsp;<span class="op" id="3539838">-</span><span class="num" id="3539839">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3539842">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539845">runq</span><span class="op" id="3539849">,</span>&nbsp;<span class="ident" id="3539851">nextq</span>&nbsp;<span class="op" id="3539857">:=</span>&nbsp;<span class="op" id="3539860">&amp;</span><span class="ident" id="3539861"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3539862">.</span><span class="ident" id="3539863"><a href="/gostd/regexp/exec.go.html#3537778">q0</a></span><span class="op" id="3539865">,</span>&nbsp;<span class="op" id="3539867">&amp;</span><span class="ident" id="3539868"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3539869">.</span><span class="ident" id="3539870"><a href="/gostd/regexp/exec.go.html#3537782">q1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539874">r</span><span class="op" id="3539875">,</span>&nbsp;<span class="ident" id="3539877">r1</span>&nbsp;<span class="op" id="3539880">:=</span>&nbsp;<span class="ident" id="3539883"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3539892">,</span>&nbsp;<span class="ident" id="3539894"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539905">width</span><span class="op" id="3539910">,</span>&nbsp;<span class="ident" id="3539912">width1</span>&nbsp;<span class="op" id="3539919">:=</span>&nbsp;<span class="num" id="3539922">0</span><span class="op" id="3539923">,</span>&nbsp;<span class="num" id="3539925">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539928"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span><span class="op" id="3539929">,</span>&nbsp;<span class="ident" id="3539931"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span>&nbsp;<span class="op" id="3539937">=</span>&nbsp;<span class="ident" id="3539939"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3539940">.</span><span class="ident" id="3539941"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3539945">(</span><span class="ident" id="3539946"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3539949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3539952">if</span>&nbsp;<span class="ident" id="3539955"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span>&nbsp;<span class="op" id="3539957">!=</span>&nbsp;<span class="ident" id="3539960"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span>&nbsp;<span class="op" id="3539970">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3539974"><a href="/gostd/regexp/exec.go.html#3539877">r1</a></span><span class="op" id="3539976">,</span>&nbsp;<span class="ident" id="3539978"><a href="/gostd/regexp/exec.go.html#3539912">width1</a></span>&nbsp;<span class="op" id="3539985">=</span>&nbsp;<span class="ident" id="3539987"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3539988">.</span><span class="ident" id="3539989"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3539993">(</span><span class="ident" id="3539994"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3539998">+</span>&nbsp;<span class="ident" id="3540000"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span><span class="op" id="3540005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540011">var</span>&nbsp;<span class="ident" id="3540015">flag</span>&nbsp;<span class="ident" id="3540020"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3540026">.</span><span class="ident" id="3540027"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540036">if</span>&nbsp;<span class="ident" id="3540039"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3540043">==</span>&nbsp;<span class="num" id="3540046">0</span>&nbsp;<span class="op" id="3540048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540052"><a href="/gostd/regexp/exec.go.html#3540015">flag</a></span>&nbsp;<span class="op" id="3540057">=</span>&nbsp;<span class="ident" id="3540059"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3540065">.</span><span class="ident" id="3540066"><a href="/gostd/regexp/syntax/prog.go.html#3660159">EmptyOpContext</a></span><span class="op" id="3540080">(</span><span class="op" id="3540081">-</span><span class="num" id="3540082">1</span><span class="op" id="3540083">,</span>&nbsp;<span class="ident" id="3540085"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span><span class="op" id="3540086">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540089">}</span>&nbsp;<span class="keyword" id="3540091">else</span>&nbsp;<span class="op" id="3540096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540100"><a href="/gostd/regexp/exec.go.html#3540015">flag</a></span>&nbsp;<span class="op" id="3540105">=</span>&nbsp;<span class="ident" id="3540107"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3540108">.</span><span class="ident" id="3540109"><a href="/gostd/regexp/regexp.go.html#3573444">context</a></span><span class="op" id="3540116">(</span><span class="ident" id="3540117"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3540120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540126">for</span>&nbsp;<span class="op" id="3540130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540134">if</span>&nbsp;<span class="builtinfunc" id="3540137">len</span><span class="op" id="3540140">(</span><span class="ident" id="3540141"><a href="/gostd/regexp/exec.go.html#3539845">runq</a></span><span class="op" id="3540145">.</span><span class="ident" id="3540146"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3540151">)</span>&nbsp;<span class="op" id="3540153">==</span>&nbsp;<span class="num" id="3540156">0</span>&nbsp;<span class="op" id="3540158">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540163">if</span>&nbsp;<span class="ident" id="3540166"><a href="/gostd/regexp/exec.go.html#3539679">startCond</a></span><span class="op" id="3540175">&amp;</span><span class="ident" id="3540176"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3540182">.</span><span class="ident" id="3540183"><a href="/gostd/regexp/syntax/prog.go.html#3659810">EmptyBeginText</a></span>&nbsp;<span class="op" id="3540198">!=</span>&nbsp;<span class="num" id="3540201">0</span>&nbsp;<span class="op" id="3540203">&amp;&amp;</span>&nbsp;<span class="ident" id="3540206"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3540210">!=</span>&nbsp;<span class="num" id="3540213">0</span>&nbsp;<span class="op" id="3540215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3540221">//&nbsp;Anchored&nbsp;match,&nbsp;past&nbsp;beginning&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540268">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540282">if</span>&nbsp;<span class="ident" id="3540285"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540286">.</span><span class="ident" id="3540287"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3540295">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3540301">//&nbsp;Have&nbsp;match;&nbsp;finished&nbsp;exploring&nbsp;alternatives.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540353">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540367">if</span>&nbsp;<span class="builtinfunc" id="3540370">len</span><span class="op" id="3540373">(</span><span class="ident" id="3540374"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540375">.</span><span class="ident" id="3540376"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3540378">.</span><span class="ident" id="3540379"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3540385">)</span>&nbsp;<span class="op" id="3540387">&gt;</span>&nbsp;<span class="num" id="3540389">0</span>&nbsp;<span class="op" id="3540391">&amp;&amp;</span>&nbsp;<span class="ident" id="3540394"><a href="/gostd/regexp/exec.go.html#3539877">r1</a></span>&nbsp;<span class="op" id="3540397">!=</span>&nbsp;<span class="ident" id="3540400"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540401">.</span><span class="ident" id="3540402"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3540404">.</span><span class="ident" id="3540405"><a href="/gostd/regexp/regexp.go.html#3567417">prefixRune</a></span>&nbsp;<span class="op" id="3540416">&amp;&amp;</span>&nbsp;<span class="ident" id="3540419"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3540420">.</span><span class="ident" id="3540421"><a href="/gostd/regexp/regexp.go.html#3573307">canCheckPrefix</a></span><span class="op" id="3540435">(</span><span class="op" id="3540436">)</span>&nbsp;<span class="op" id="3540438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3540444">//&nbsp;Match&nbsp;requires&nbsp;literal&nbsp;prefix;&nbsp;fast&nbsp;search&nbsp;for&nbsp;it.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540502">advance</span>&nbsp;<span class="op" id="3540510">:=</span>&nbsp;<span class="ident" id="3540513"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3540514">.</span><span class="ident" id="3540515"><a href="/gostd/regexp/regexp.go.html#3573412">index</a></span><span class="op" id="3540520">(</span><span class="ident" id="3540521"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540522">.</span><span class="ident" id="3540523"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3540525">,</span>&nbsp;<span class="ident" id="3540527"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3540530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540536">if</span>&nbsp;<span class="ident" id="3540539"><a href="/gostd/regexp/exec.go.html#3540502">advance</a></span>&nbsp;<span class="op" id="3540547">&lt;</span>&nbsp;<span class="num" id="3540549">0</span>&nbsp;<span class="op" id="3540551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540558">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540574"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3540578">+=</span>&nbsp;<span class="ident" id="3540581"><a href="/gostd/regexp/exec.go.html#3540502">advance</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540593"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span><span class="op" id="3540594">,</span>&nbsp;<span class="ident" id="3540596"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span>&nbsp;<span class="op" id="3540602">=</span>&nbsp;<span class="ident" id="3540604"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3540605">.</span><span class="ident" id="3540606"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3540610">(</span><span class="ident" id="3540611"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3540614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540620"><a href="/gostd/regexp/exec.go.html#3539877">r1</a></span><span class="op" id="3540622">,</span>&nbsp;<span class="ident" id="3540624"><a href="/gostd/regexp/exec.go.html#3539912">width1</a></span>&nbsp;<span class="op" id="3540631">=</span>&nbsp;<span class="ident" id="3540633"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3540634">.</span><span class="ident" id="3540635"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3540639">(</span><span class="ident" id="3540640"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3540644">+</span>&nbsp;<span class="ident" id="3540646"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span><span class="op" id="3540651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540664">if</span>&nbsp;<span class="op" id="3540667">!</span><span class="ident" id="3540668"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540669">.</span><span class="ident" id="3540670"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3540678">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540683">if</span>&nbsp;<span class="builtinfunc" id="3540686">len</span><span class="op" id="3540689">(</span><span class="ident" id="3540690"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540691">.</span><span class="ident" id="3540692"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3540700">)</span>&nbsp;<span class="op" id="3540702">&gt;</span>&nbsp;<span class="num" id="3540704">0</span>&nbsp;<span class="op" id="3540706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540712"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540713">.</span><span class="ident" id="3540714"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3540722">[</span><span class="num" id="3540723">0</span><span class="op" id="3540724">]</span>&nbsp;<span class="op" id="3540726">=</span>&nbsp;<span class="ident" id="3540728"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540740"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540741">.</span><span class="ident" id="3540742"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3540745">(</span><span class="ident" id="3540746"><a href="/gostd/regexp/exec.go.html#3539845">runq</a></span><span class="op" id="3540750">,</span>&nbsp;<span class="builtintype" id="3540752">uint32</span><span class="op" id="3540758">(</span><span class="ident" id="3540759"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540760">.</span><span class="ident" id="3540761"><a href="/gostd/regexp/exec.go.html#3537669">p</a></span><span class="op" id="3540762">.</span><span class="ident" id="3540763"><a href="/gostd/regexp/syntax/prog.go.html#3659040">Start</a></span><span class="op" id="3540768">)</span><span class="op" id="3540769">,</span>&nbsp;<span class="ident" id="3540771"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3540774">,</span>&nbsp;<span class="ident" id="3540776"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540777">.</span><span class="ident" id="3540778"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3540786">,</span>&nbsp;<span class="ident" id="3540788"><a href="/gostd/regexp/exec.go.html#3540015">flag</a></span><span class="op" id="3540792">,</span>&nbsp;<span class="builtintype" id="3540794">nil</span><span class="op" id="3540797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540801">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540805"><a href="/gostd/regexp/exec.go.html#3540015">flag</a></span>&nbsp;<span class="op" id="3540810">=</span>&nbsp;<span class="ident" id="3540812"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3540818">.</span><span class="ident" id="3540819"><a href="/gostd/regexp/syntax/prog.go.html#3660159">EmptyOpContext</a></span><span class="op" id="3540833">(</span><span class="ident" id="3540834"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span><span class="op" id="3540835">,</span>&nbsp;<span class="ident" id="3540837"><a href="/gostd/regexp/exec.go.html#3539877">r1</a></span><span class="op" id="3540839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3540843"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540844">.</span><span class="ident" id="3540845"><a href="/gostd/regexp/exec.go.html#3541757">step</a></span><span class="op" id="3540849">(</span><span class="ident" id="3540850"><a href="/gostd/regexp/exec.go.html#3539845">runq</a></span><span class="op" id="3540854">,</span>&nbsp;<span class="ident" id="3540856"><a href="/gostd/regexp/exec.go.html#3539851">nextq</a></span><span class="op" id="3540861">,</span>&nbsp;<span class="ident" id="3540863"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3540866">,</span>&nbsp;<span class="ident" id="3540868"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span><span class="op" id="3540871">+</span><span class="ident" id="3540872"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span><span class="op" id="3540877">,</span>&nbsp;<span class="ident" id="3540879"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span><span class="op" id="3540880">,</span>&nbsp;<span class="ident" id="3540882"><a href="/gostd/regexp/exec.go.html#3540015">flag</a></span><span class="op" id="3540886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540890">if</span>&nbsp;<span class="ident" id="3540893"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span>&nbsp;<span class="op" id="3540899">==</span>&nbsp;<span class="num" id="3540902">0</span>&nbsp;<span class="op" id="3540904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540909">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3540917">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3540921">if</span>&nbsp;<span class="builtinfunc" id="3540924">len</span><span class="op" id="3540927">(</span><span class="ident" id="3540928"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540929">.</span><span class="ident" id="3540930"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3540938">)</span>&nbsp;<span class="op" id="3540940">==</span>&nbsp;<span class="num" id="3540943">0</span>&nbsp;<span class="op" id="3540945">&amp;&amp;</span>&nbsp;<span class="ident" id="3540948"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3540949">.</span><span class="ident" id="3540950"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3540958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3540963">//&nbsp;Found&nbsp;a&nbsp;match&nbsp;and&nbsp;not&nbsp;paying&nbsp;attention</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3541008">//&nbsp;to&nbsp;where&nbsp;it&nbsp;is,&nbsp;so&nbsp;any&nbsp;match&nbsp;will&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541052">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3541060">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541064"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3541068">+=</span>&nbsp;<span class="ident" id="3541071"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541079"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span><span class="op" id="3541080">,</span>&nbsp;<span class="ident" id="3541082"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span>&nbsp;<span class="op" id="3541088">=</span>&nbsp;<span class="ident" id="3541090"><a href="/gostd/regexp/exec.go.html#3539877">r1</a></span><span class="op" id="3541092">,</span>&nbsp;<span class="ident" id="3541094"><a href="/gostd/regexp/exec.go.html#3539912">width1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541103">if</span>&nbsp;<span class="ident" id="3541106"><a href="/gostd/regexp/exec.go.html#3539874">r</a></span>&nbsp;<span class="op" id="3541108">!=</span>&nbsp;<span class="ident" id="3541111"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span>&nbsp;<span class="op" id="3541121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541126"><a href="/gostd/regexp/exec.go.html#3539877">r1</a></span><span class="op" id="3541128">,</span>&nbsp;<span class="ident" id="3541130"><a href="/gostd/regexp/exec.go.html#3539912">width1</a></span>&nbsp;<span class="op" id="3541137">=</span>&nbsp;<span class="ident" id="3541139"><a href="/gostd/regexp/exec.go.html#3539653">i</a></span><span class="op" id="3541140">.</span><span class="ident" id="3541141"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3541145">(</span><span class="ident" id="3541146"><a href="/gostd/regexp/exec.go.html#3539662">pos</a></span>&nbsp;<span class="op" id="3541150">+</span>&nbsp;<span class="ident" id="3541152"><a href="/gostd/regexp/exec.go.html#3539905">width</a></span><span class="op" id="3541157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3541161">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541165"><a href="/gostd/regexp/exec.go.html#3539845">runq</a></span><span class="op" id="3541169">,</span>&nbsp;<span class="ident" id="3541171"><a href="/gostd/regexp/exec.go.html#3539851">nextq</a></span>&nbsp;<span class="op" id="3541177">=</span>&nbsp;<span class="ident" id="3541179"><a href="/gostd/regexp/exec.go.html#3539851">nextq</a></span><span class="op" id="3541184">,</span>&nbsp;<span class="ident" id="3541186"><a href="/gostd/regexp/exec.go.html#3539845">runq</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3541192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541195"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3541196">.</span><span class="ident" id="3541197"><a href="/gostd/regexp/exec.go.html#3541297">clear</a></span><span class="op" id="3541202">(</span><span class="ident" id="3541203"><a href="/gostd/regexp/exec.go.html#3539851">nextq</a></span><span class="op" id="3541208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541211">return</span>&nbsp;<span class="ident" id="3541218"><a href="/gostd/regexp/exec.go.html#3539635">m</a></span><span class="op" id="3541219">.</span><span class="ident" id="3541220"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span><span class="op" id="3541228">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="3541231">//&nbsp;clear&nbsp;frees&nbsp;all&nbsp;threads&nbsp;on&nbsp;the&nbsp;thread&nbsp;queue.</span><br>
<span class="lineno"></span><span class="keyword" id="3541279">func</span>&nbsp;<span class="op" id="3541284">(</span><span class="ident" id="3541285">m</span>&nbsp;<span class="op" id="3541287">*</span><span class="ident" id="3541288"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3541295">)</span>&nbsp;<span class="ident" id="3541297">clear</span><span class="op" id="3541302">(</span><span class="ident" id="3541303">q</span>&nbsp;<span class="op" id="3541305">*</span><span class="ident" id="3541306"><a href="/gostd/regexp/exec.go.html#3536993">queue</a></span><span class="op" id="3541311">)</span>&nbsp;<span class="op" id="3541313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541316">for</span>&nbsp;<span class="ident" id="3541320">_</span><span class="op" id="3541321">,</span>&nbsp;<span class="ident" id="3541323">d</span>&nbsp;<span class="op" id="3541325">:=</span>&nbsp;<span class="keyword" id="3541328">range</span>&nbsp;<span class="ident" id="3541334"><a href="/gostd/regexp/exec.go.html#3541303">q</a></span><span class="op" id="3541335">.</span><span class="ident" id="3541336"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span>&nbsp;<span class="op" id="3541342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541346">if</span>&nbsp;<span class="ident" id="3541349"><a href="/gostd/regexp/exec.go.html#3541323">d</a></span><span class="op" id="3541350">.</span><span class="ident" id="3541351"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span>&nbsp;<span class="op" id="3541353">!=</span>&nbsp;<span class="builtintype" id="3541356">nil</span>&nbsp;<span class="op" id="3541360">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3541365">//&nbsp;m.free(d.t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541383"><a href="/gostd/regexp/exec.go.html#3541285">m</a></span><span class="op" id="3541384">.</span><span class="ident" id="3541385"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3541390">=</span>&nbsp;<span class="builtinfunc" id="3541392">append</span><span class="op" id="3541398">(</span><span class="ident" id="3541399"><a href="/gostd/regexp/exec.go.html#3541285">m</a></span><span class="op" id="3541400">.</span><span class="ident" id="3541401"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3541405">,</span>&nbsp;<span class="ident" id="3541407"><a href="/gostd/regexp/exec.go.html#3541323">d</a></span><span class="op" id="3541408">.</span><span class="ident" id="3541409"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span><span class="op" id="3541410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3541414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3541417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541420"><a href="/gostd/regexp/exec.go.html#3541303">q</a></span><span class="op" id="3541421">.</span><span class="ident" id="3541422"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span>&nbsp;<span class="op" id="3541428">=</span>&nbsp;<span class="ident" id="3541430"><a href="/gostd/regexp/exec.go.html#3541303">q</a></span><span class="op" id="3541431">.</span><span class="ident" id="3541432"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3541437">[</span><span class="op" id="3541438">:</span><span class="num" id="3541439">0</span><span class="op" id="3541440">]</span><br>
<span class="lineno">195</span><span class="op" id="3541442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3541445">//&nbsp;step&nbsp;executes&nbsp;one&nbsp;step&nbsp;of&nbsp;the&nbsp;machine,&nbsp;running&nbsp;each&nbsp;of&nbsp;the&nbsp;threads</span><br>
<span class="lineno"></span><span class="comment" id="3541515">//&nbsp;on&nbsp;runq&nbsp;and&nbsp;appending&nbsp;new&nbsp;threads&nbsp;to&nbsp;nextq.</span><br>
<span class="lineno"></span><span class="comment" id="3541562">//&nbsp;The&nbsp;step&nbsp;processes&nbsp;the&nbsp;rune&nbsp;c&nbsp;(which&nbsp;may&nbsp;be&nbsp;endOfText),</span><br>
<span class="lineno">200</span><span class="comment" id="3541621">//&nbsp;which&nbsp;starts&nbsp;at&nbsp;position&nbsp;pos&nbsp;and&nbsp;ends&nbsp;at&nbsp;nextPos.</span><br>
<span class="lineno"></span><span class="comment" id="3541674">//&nbsp;nextCond&nbsp;gives&nbsp;the&nbsp;setting&nbsp;for&nbsp;the&nbsp;empty-width&nbsp;flags&nbsp;after&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="3541739">func</span>&nbsp;<span class="op" id="3541744">(</span><span class="ident" id="3541745">m</span>&nbsp;<span class="op" id="3541747">*</span><span class="ident" id="3541748"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3541755">)</span>&nbsp;<span class="ident" id="3541757">step</span><span class="op" id="3541761">(</span><span class="ident" id="3541762">runq</span><span class="op" id="3541766">,</span>&nbsp;<span class="ident" id="3541768">nextq</span>&nbsp;<span class="op" id="3541774">*</span><span class="ident" id="3541775"><a href="/gostd/regexp/exec.go.html#3536993">queue</a></span><span class="op" id="3541780">,</span>&nbsp;<span class="ident" id="3541782">pos</span><span class="op" id="3541785">,</span>&nbsp;<span class="ident" id="3541787">nextPos</span>&nbsp;<span class="builtintype" id="3541795">int</span><span class="op" id="3541798">,</span>&nbsp;<span class="ident" id="3541800">c</span>&nbsp;<span class="builtintype" id="3541802">rune</span><span class="op" id="3541806">,</span>&nbsp;<span class="ident" id="3541808">nextCond</span>&nbsp;<span class="ident" id="3541817"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3541823">.</span><span class="ident" id="3541824"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3541831">)</span>&nbsp;<span class="op" id="3541833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541836">longest</span>&nbsp;<span class="op" id="3541844">:=</span>&nbsp;<span class="ident" id="3541847"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3541848">.</span><span class="ident" id="3541849"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3541851">.</span><span class="ident" id="3541852"><a href="/gostd/regexp/regexp.go.html#3567662">longest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541861">for</span>&nbsp;<span class="ident" id="3541865">j</span>&nbsp;<span class="op" id="3541867">:=</span>&nbsp;<span class="num" id="3541870">0</span><span class="op" id="3541871">;</span>&nbsp;<span class="ident" id="3541873"><a href="/gostd/regexp/exec.go.html#3541865">j</a></span>&nbsp;<span class="op" id="3541875">&lt;</span>&nbsp;<span class="builtinfunc" id="3541877">len</span><span class="op" id="3541880">(</span><span class="ident" id="3541881"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3541885">.</span><span class="ident" id="3541886"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3541891">)</span><span class="op" id="3541892">;</span>&nbsp;<span class="ident" id="3541894"><a href="/gostd/regexp/exec.go.html#3541865">j</a></span><span class="op" id="3541895">++</span>&nbsp;<span class="op" id="3541898">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541902">d</span>&nbsp;<span class="op" id="3541904">:=</span>&nbsp;<span class="op" id="3541907">&amp;</span><span class="ident" id="3541908"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3541912">.</span><span class="ident" id="3541913"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3541918">[</span><span class="ident" id="3541919"><a href="/gostd/regexp/exec.go.html#3541865">j</a></span><span class="op" id="3541920">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3541924">t</span>&nbsp;<span class="op" id="3541926">:=</span>&nbsp;<span class="ident" id="3541929"><a href="/gostd/regexp/exec.go.html#3541902">d</a></span><span class="op" id="3541930">.</span><span class="ident" id="3541931"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541935">if</span>&nbsp;<span class="ident" id="3541938"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span>&nbsp;<span class="op" id="3541940">==</span>&nbsp;<span class="builtintype" id="3541943">nil</span>&nbsp;<span class="op" id="3541947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541952">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3541963">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3541967">if</span>&nbsp;<span class="ident" id="3541970"><a href="/gostd/regexp/exec.go.html#3541836">longest</a></span>&nbsp;<span class="op" id="3541978">&amp;&amp;</span>&nbsp;<span class="ident" id="3541981"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3541982">.</span><span class="ident" id="3541983"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3541991">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3541994">len</span><span class="op" id="3541997">(</span><span class="ident" id="3541998"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3541999">.</span><span class="builtinfunc" id="3542000"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3542003">)</span>&nbsp;<span class="op" id="3542005">&gt;</span>&nbsp;<span class="num" id="3542007">0</span>&nbsp;<span class="op" id="3542009">&amp;&amp;</span>&nbsp;<span class="ident" id="3542012"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542013">.</span><span class="ident" id="3542014"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3542022">[</span><span class="num" id="3542023">0</span><span class="op" id="3542024">]</span>&nbsp;<span class="op" id="3542026">&lt;</span>&nbsp;<span class="ident" id="3542028"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542029">.</span><span class="builtinfunc" id="3542030"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3542033">[</span><span class="num" id="3542034">0</span><span class="op" id="3542035">]</span>&nbsp;<span class="op" id="3542037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3542042">//&nbsp;m.free(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542058"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542059">.</span><span class="ident" id="3542060"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3542065">=</span>&nbsp;<span class="builtinfunc" id="3542067">append</span><span class="op" id="3542073">(</span><span class="ident" id="3542074"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542075">.</span><span class="ident" id="3542076"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3542080">,</span>&nbsp;<span class="ident" id="3542082"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542088">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542099">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542103">i</span>&nbsp;<span class="op" id="3542105">:=</span>&nbsp;<span class="ident" id="3542108"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542109">.</span><span class="ident" id="3542110"><a href="/gostd/regexp/exec.go.html#3537501">inst</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542117">add</span>&nbsp;<span class="op" id="3542121">:=</span>&nbsp;<span class="builtintype" id="3542124">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542132">switch</span>&nbsp;<span class="ident" id="3542139"><a href="/gostd/regexp/exec.go.html#3542103">i</a></span><span class="op" id="3542140">.</span><span class="ident" id="3542141"><a href="/gostd/regexp/syntax/prog.go.html#3661077">Op</a></span>&nbsp;<span class="op" id="3542144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542148">default</span><span class="op" id="3542155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3542160">panic</span><span class="op" id="3542165">(</span><span class="string" id="3542166">&#34;bad&nbsp;inst&#34;</span><span class="op" id="3542176">)</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542181">case</span>&nbsp;<span class="ident" id="3542186"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3542192">.</span><span class="ident" id="3542193"><a href="/gostd/regexp/syntax/prog.go.html#3659266">InstMatch</a></span><span class="op" id="3542202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542207">if</span>&nbsp;<span class="builtinfunc" id="3542210">len</span><span class="op" id="3542213">(</span><span class="ident" id="3542214"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542215">.</span><span class="builtinfunc" id="3542216"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3542219">)</span>&nbsp;<span class="op" id="3542221">&gt;</span>&nbsp;<span class="num" id="3542223">0</span>&nbsp;<span class="op" id="3542225">&amp;&amp;</span>&nbsp;<span class="op" id="3542228">(</span><span class="op" id="3542229">!</span><span class="ident" id="3542230"><a href="/gostd/regexp/exec.go.html#3541836">longest</a></span>&nbsp;<span class="op" id="3542238">||</span>&nbsp;<span class="op" id="3542241">!</span><span class="ident" id="3542242"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542243">.</span><span class="ident" id="3542244"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3542252">||</span>&nbsp;<span class="ident" id="3542255"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542256">.</span><span class="ident" id="3542257"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3542265">[</span><span class="num" id="3542266">1</span><span class="op" id="3542267">]</span>&nbsp;<span class="op" id="3542269">&lt;</span>&nbsp;<span class="ident" id="3542271"><a href="/gostd/regexp/exec.go.html#3541782">pos</a></span><span class="op" id="3542274">)</span>&nbsp;<span class="op" id="3542276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542282"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542283">.</span><span class="builtinfunc" id="3542284"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3542287">[</span><span class="num" id="3542288">1</span><span class="op" id="3542289">]</span>&nbsp;<span class="op" id="3542291">=</span>&nbsp;<span class="ident" id="3542293"><a href="/gostd/regexp/exec.go.html#3541782">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3542301">copy</span><span class="op" id="3542305">(</span><span class="ident" id="3542306"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542307">.</span><span class="ident" id="3542308"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3542316">,</span>&nbsp;<span class="ident" id="3542318"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542319">.</span><span class="builtinfunc" id="3542320"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3542323">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542333">if</span>&nbsp;<span class="op" id="3542336">!</span><span class="ident" id="3542337"><a href="/gostd/regexp/exec.go.html#3541836">longest</a></span>&nbsp;<span class="op" id="3542345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3542351">//&nbsp;First-match&nbsp;mode:&nbsp;cut&nbsp;off&nbsp;all&nbsp;lower-priority&nbsp;threads.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542412">for</span>&nbsp;<span class="ident" id="3542416">_</span><span class="op" id="3542417">,</span>&nbsp;<span class="ident" id="3542419">d</span>&nbsp;<span class="op" id="3542421">:=</span>&nbsp;<span class="keyword" id="3542424">range</span>&nbsp;<span class="ident" id="3542430"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3542434">.</span><span class="ident" id="3542435"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3542440">[</span><span class="ident" id="3542441"><a href="/gostd/regexp/exec.go.html#3541865">j</a></span><span class="op" id="3542442">+</span><span class="num" id="3542443">1</span><span class="op" id="3542444">:</span><span class="op" id="3542445">]</span>&nbsp;<span class="op" id="3542447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542454">if</span>&nbsp;<span class="ident" id="3542457"><a href="/gostd/regexp/exec.go.html#3542419">d</a></span><span class="op" id="3542458">.</span><span class="ident" id="3542459"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span>&nbsp;<span class="op" id="3542461">!=</span>&nbsp;<span class="builtintype" id="3542464">nil</span>&nbsp;<span class="op" id="3542468">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3542476">//&nbsp;m.free(d.t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542497"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542498">.</span><span class="ident" id="3542499"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3542504">=</span>&nbsp;<span class="builtinfunc" id="3542506">append</span><span class="op" id="3542512">(</span><span class="ident" id="3542513"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542514">.</span><span class="ident" id="3542515"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3542519">,</span>&nbsp;<span class="ident" id="3542521"><a href="/gostd/regexp/exec.go.html#3542419">d</a></span><span class="op" id="3542522">.</span><span class="ident" id="3542523"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span><span class="op" id="3542524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542543"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3542547">.</span><span class="ident" id="3542548"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span>&nbsp;<span class="op" id="3542554">=</span>&nbsp;<span class="ident" id="3542556"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3542560">.</span><span class="ident" id="3542561"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3542566">[</span><span class="op" id="3542567">:</span><span class="num" id="3542568">0</span><span class="op" id="3542569">]</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542579"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542580">.</span><span class="ident" id="3542581"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3542589">=</span>&nbsp;<span class="builtintype" id="3542591">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542599">case</span>&nbsp;<span class="ident" id="3542604"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3542610">.</span><span class="ident" id="3542611"><a href="/gostd/regexp/syntax/prog.go.html#3659296">InstRune</a></span><span class="op" id="3542619">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542624"><a href="/gostd/regexp/exec.go.html#3542117">add</a></span>&nbsp;<span class="op" id="3542628">=</span>&nbsp;<span class="ident" id="3542630"><a href="/gostd/regexp/exec.go.html#3542103">i</a></span><span class="op" id="3542631">.</span><span class="ident" id="3542632"><a href="/gostd/regexp/syntax/prog.go.html#3663002">MatchRune</a></span><span class="op" id="3542641">(</span><span class="ident" id="3542642"><a href="/gostd/regexp/exec.go.html#3541800">c</a></span><span class="op" id="3542643">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542647">case</span>&nbsp;<span class="ident" id="3542652"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3542658">.</span><span class="ident" id="3542659"><a href="/gostd/regexp/syntax/prog.go.html#3659306">InstRune1</a></span><span class="op" id="3542668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542673"><a href="/gostd/regexp/exec.go.html#3542117">add</a></span>&nbsp;<span class="op" id="3542677">=</span>&nbsp;<span class="ident" id="3542679"><a href="/gostd/regexp/exec.go.html#3541800">c</a></span>&nbsp;<span class="op" id="3542681">==</span>&nbsp;<span class="ident" id="3542684"><a href="/gostd/regexp/exec.go.html#3542103">i</a></span><span class="op" id="3542685">.</span><span class="ident" id="3542686"><a href="/gostd/regexp/syntax/prog.go.html#3661201">Rune</a></span><span class="op" id="3542690">[</span><span class="num" id="3542691">0</span><span class="op" id="3542692">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542696">case</span>&nbsp;<span class="ident" id="3542701"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3542707">.</span><span class="ident" id="3542708"><a href="/gostd/regexp/syntax/prog.go.html#3659317">InstRuneAny</a></span><span class="op" id="3542719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542724"><a href="/gostd/regexp/exec.go.html#3542117">add</a></span>&nbsp;<span class="op" id="3542728">=</span>&nbsp;<span class="builtintype" id="3542730">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542737">case</span>&nbsp;<span class="ident" id="3542742"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3542748">.</span><span class="ident" id="3542749"><a href="/gostd/regexp/syntax/prog.go.html#3659330">InstRuneAnyNotNL</a></span><span class="op" id="3542765">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542770"><a href="/gostd/regexp/exec.go.html#3542117">add</a></span>&nbsp;<span class="op" id="3542774">=</span>&nbsp;<span class="ident" id="3542776"><a href="/gostd/regexp/exec.go.html#3541800">c</a></span>&nbsp;<span class="op" id="3542778">!=</span>&nbsp;<span class="string" id="3542781">&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542792">if</span>&nbsp;<span class="ident" id="3542795"><a href="/gostd/regexp/exec.go.html#3542117">add</a></span>&nbsp;<span class="op" id="3542799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542804"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span>&nbsp;<span class="op" id="3542806">=</span>&nbsp;<span class="ident" id="3542808"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542809">.</span><span class="ident" id="3542810"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3542813">(</span><span class="ident" id="3542814"><a href="/gostd/regexp/exec.go.html#3541768">nextq</a></span><span class="op" id="3542819">,</span>&nbsp;<span class="ident" id="3542821"><a href="/gostd/regexp/exec.go.html#3542103">i</a></span><span class="op" id="3542822">.</span><span class="ident" id="3542823"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3542826">,</span>&nbsp;<span class="ident" id="3542828"><a href="/gostd/regexp/exec.go.html#3541787">nextPos</a></span><span class="op" id="3542835">,</span>&nbsp;<span class="ident" id="3542837"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542838">.</span><span class="builtinfunc" id="3542839"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3542842">,</span>&nbsp;<span class="ident" id="3542844"><a href="/gostd/regexp/exec.go.html#3541808">nextCond</a></span><span class="op" id="3542852">,</span>&nbsp;<span class="ident" id="3542854"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542859">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3542863">if</span>&nbsp;<span class="ident" id="3542866"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span>&nbsp;<span class="op" id="3542868">!=</span>&nbsp;<span class="builtintype" id="3542871">nil</span>&nbsp;<span class="op" id="3542875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3542880">//&nbsp;m.free(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542896"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542897">.</span><span class="ident" id="3542898"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span>&nbsp;<span class="op" id="3542903">=</span>&nbsp;<span class="builtinfunc" id="3542905">append</span><span class="op" id="3542911">(</span><span class="ident" id="3542912"><a href="/gostd/regexp/exec.go.html#3541745">m</a></span><span class="op" id="3542913">.</span><span class="ident" id="3542914"><a href="/gostd/regexp/exec.go.html#3537831">pool</a></span><span class="op" id="3542918">,</span>&nbsp;<span class="ident" id="3542920"><a href="/gostd/regexp/exec.go.html#3541924">t</a></span><span class="op" id="3542921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3542928">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3542931"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3542935">.</span><span class="ident" id="3542936"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span>&nbsp;<span class="op" id="3542942">=</span>&nbsp;<span class="ident" id="3542944"><a href="/gostd/regexp/exec.go.html#3541762">runq</a></span><span class="op" id="3542948">.</span><span class="ident" id="3542949"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3542954">[</span><span class="op" id="3542955">:</span><span class="num" id="3542956">0</span><span class="op" id="3542957">]</span><br>
<span class="lineno"></span><span class="op" id="3542959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3542962">//&nbsp;add&nbsp;adds&nbsp;an&nbsp;entry&nbsp;to&nbsp;q&nbsp;for&nbsp;pc,&nbsp;unless&nbsp;the&nbsp;q&nbsp;already&nbsp;has&nbsp;such&nbsp;an&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="3543036">//&nbsp;It&nbsp;also&nbsp;recursively&nbsp;adds&nbsp;an&nbsp;entry&nbsp;for&nbsp;all&nbsp;instructions&nbsp;reachable&nbsp;from&nbsp;pc&nbsp;by&nbsp;following</span><br>
<span class="lineno">260</span><span class="comment" id="3543125">//&nbsp;empty-width&nbsp;conditions&nbsp;satisfied&nbsp;by&nbsp;cond.&nbsp;&nbsp;pos&nbsp;gives&nbsp;the&nbsp;current&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="3543202">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="3543219">func</span>&nbsp;<span class="op" id="3543224">(</span><span class="ident" id="3543225">m</span>&nbsp;<span class="op" id="3543227">*</span><span class="ident" id="3543228"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3543235">)</span>&nbsp;<span class="ident" id="3543237">add</span><span class="op" id="3543240">(</span><span class="ident" id="3543241">q</span>&nbsp;<span class="op" id="3543243">*</span><span class="ident" id="3543244"><a href="/gostd/regexp/exec.go.html#3536993">queue</a></span><span class="op" id="3543249">,</span>&nbsp;<span class="ident" id="3543251">pc</span>&nbsp;<span class="builtintype" id="3543254">uint32</span><span class="op" id="3543260">,</span>&nbsp;<span class="ident" id="3543262">pos</span>&nbsp;<span class="builtintype" id="3543266">int</span><span class="op" id="3543269">,</span>&nbsp;<span class="builtinfunc" id="3543271">cap</span>&nbsp;<span class="op" id="3543275">[</span><span class="op" id="3543276">]</span><span class="builtintype" id="3543277">int</span><span class="op" id="3543280">,</span>&nbsp;<span class="ident" id="3543282">cond</span>&nbsp;<span class="ident" id="3543287"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543293">.</span><span class="ident" id="3543294"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3543301">,</span>&nbsp;<span class="ident" id="3543303">t</span>&nbsp;<span class="op" id="3543305">*</span><span class="ident" id="3543306"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span><span class="op" id="3543312">)</span>&nbsp;<span class="op" id="3543314">*</span><span class="ident" id="3543315"><a href="/gostd/regexp/exec.go.html#3537484">thread</a></span>&nbsp;<span class="op" id="3543322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543325">if</span>&nbsp;<span class="ident" id="3543328"><a href="/gostd/regexp/exec.go.html#3543251">pc</a></span>&nbsp;<span class="op" id="3543331">==</span>&nbsp;<span class="num" id="3543334">0</span>&nbsp;<span class="op" id="3543336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543340">return</span>&nbsp;<span class="ident" id="3543347"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3543350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543353">if</span>&nbsp;<span class="ident" id="3543356">j</span>&nbsp;<span class="op" id="3543358">:=</span>&nbsp;<span class="ident" id="3543361"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543362">.</span><span class="ident" id="3543363"><a href="/gostd/regexp/exec.go.html#3537009">sparse</a></span><span class="op" id="3543369">[</span><span class="ident" id="3543370"><a href="/gostd/regexp/exec.go.html#3543251">pc</a></span><span class="op" id="3543372">]</span><span class="op" id="3543373">;</span>&nbsp;<span class="ident" id="3543375"><a href="/gostd/regexp/exec.go.html#3543356">j</a></span>&nbsp;<span class="op" id="3543377">&lt;</span>&nbsp;<span class="builtintype" id="3543379">uint32</span><span class="op" id="3543385">(</span><span class="builtinfunc" id="3543386">len</span><span class="op" id="3543389">(</span><span class="ident" id="3543390"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543391">.</span><span class="ident" id="3543392"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3543397">)</span><span class="op" id="3543398">)</span>&nbsp;<span class="op" id="3543400">&amp;&amp;</span>&nbsp;<span class="ident" id="3543403"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543404">.</span><span class="ident" id="3543405"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3543410">[</span><span class="ident" id="3543411"><a href="/gostd/regexp/exec.go.html#3543356">j</a></span><span class="op" id="3543412">]</span><span class="op" id="3543413">.</span><span class="ident" id="3543414"><a href="/gostd/regexp/exec.go.html#3537289">pc</a></span>&nbsp;<span class="op" id="3543417">==</span>&nbsp;<span class="ident" id="3543420"><a href="/gostd/regexp/exec.go.html#3543251">pc</a></span>&nbsp;<span class="op" id="3543423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543427">return</span>&nbsp;<span class="ident" id="3543434"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3543437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543441">j</span>&nbsp;<span class="op" id="3543443">:=</span>&nbsp;<span class="builtinfunc" id="3543446">len</span><span class="op" id="3543449">(</span><span class="ident" id="3543450"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543451">.</span><span class="ident" id="3543452"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3543457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543460"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543461">.</span><span class="ident" id="3543462"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span>&nbsp;<span class="op" id="3543468">=</span>&nbsp;<span class="ident" id="3543470"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543471">.</span><span class="ident" id="3543472"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3543477">[</span><span class="op" id="3543478">:</span><span class="ident" id="3543479"><a href="/gostd/regexp/exec.go.html#3543441">j</a></span><span class="op" id="3543480">+</span><span class="num" id="3543481">1</span><span class="op" id="3543482">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543485">d</span>&nbsp;<span class="op" id="3543487">:=</span>&nbsp;<span class="op" id="3543490">&amp;</span><span class="ident" id="3543491"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543492">.</span><span class="ident" id="3543493"><a href="/gostd/regexp/exec.go.html#3537026">dense</a></span><span class="op" id="3543498">[</span><span class="ident" id="3543499"><a href="/gostd/regexp/exec.go.html#3543441">j</a></span><span class="op" id="3543500">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543503"><a href="/gostd/regexp/exec.go.html#3543485">d</a></span><span class="op" id="3543504">.</span><span class="ident" id="3543505"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span>&nbsp;<span class="op" id="3543507">=</span>&nbsp;<span class="builtintype" id="3543509">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543514"><a href="/gostd/regexp/exec.go.html#3543485">d</a></span><span class="op" id="3543515">.</span><span class="ident" id="3543516"><a href="/gostd/regexp/exec.go.html#3537289">pc</a></span>&nbsp;<span class="op" id="3543519">=</span>&nbsp;<span class="ident" id="3543521"><a href="/gostd/regexp/exec.go.html#3543251">pc</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543525"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543526">.</span><span class="ident" id="3543527"><a href="/gostd/regexp/exec.go.html#3537009">sparse</a></span><span class="op" id="3543533">[</span><span class="ident" id="3543534"><a href="/gostd/regexp/exec.go.html#3543251">pc</a></span><span class="op" id="3543536">]</span>&nbsp;<span class="op" id="3543538">=</span>&nbsp;<span class="builtintype" id="3543540">uint32</span><span class="op" id="3543546">(</span><span class="ident" id="3543547"><a href="/gostd/regexp/exec.go.html#3543441">j</a></span><span class="op" id="3543548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543552">i</span>&nbsp;<span class="op" id="3543554">:=</span>&nbsp;<span class="op" id="3543557">&amp;</span><span class="ident" id="3543558"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3543559">.</span><span class="ident" id="3543560"><a href="/gostd/regexp/exec.go.html#3537669">p</a></span><span class="op" id="3543561">.</span><span class="ident" id="3543562"><a href="/gostd/regexp/syntax/prog.go.html#3659025">Inst</a></span><span class="op" id="3543566">[</span><span class="ident" id="3543567"><a href="/gostd/regexp/exec.go.html#3543251">pc</a></span><span class="op" id="3543569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543572">switch</span>&nbsp;<span class="ident" id="3543579"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543580">.</span><span class="ident" id="3543581"><a href="/gostd/regexp/syntax/prog.go.html#3661077">Op</a></span>&nbsp;<span class="op" id="3543584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543587">default</span><span class="op" id="3543594">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3543598">panic</span><span class="op" id="3543603">(</span><span class="string" id="3543604">&#34;unhandled&#34;</span><span class="op" id="3543615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543618">case</span>&nbsp;<span class="ident" id="3543623"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543629">.</span><span class="ident" id="3543630"><a href="/gostd/regexp/syntax/prog.go.html#3659277">InstFail</a></span><span class="op" id="3543638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3543642">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543654">case</span>&nbsp;<span class="ident" id="3543659"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543665">.</span><span class="ident" id="3543666"><a href="/gostd/regexp/syntax/prog.go.html#3659200">InstAlt</a></span><span class="op" id="3543673">,</span>&nbsp;<span class="ident" id="3543675"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543681">.</span><span class="ident" id="3543682"><a href="/gostd/regexp/syntax/prog.go.html#3659223">InstAltMatch</a></span><span class="op" id="3543694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543698"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3543700">=</span>&nbsp;<span class="ident" id="3543702"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3543703">.</span><span class="ident" id="3543704"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3543707">(</span><span class="ident" id="3543708"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543709">,</span>&nbsp;<span class="ident" id="3543711"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543712">.</span><span class="ident" id="3543713"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3543716">,</span>&nbsp;<span class="ident" id="3543718"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><span class="op" id="3543721">,</span>&nbsp;<span class="builtinfunc" id="3543723"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3543726">,</span>&nbsp;<span class="ident" id="3543728"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span><span class="op" id="3543732">,</span>&nbsp;<span class="ident" id="3543734"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3543735">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543739"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3543741">=</span>&nbsp;<span class="ident" id="3543743"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3543744">.</span><span class="ident" id="3543745"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3543748">(</span><span class="ident" id="3543749"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543750">,</span>&nbsp;<span class="ident" id="3543752"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543753">.</span><span class="ident" id="3543754"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3543757">,</span>&nbsp;<span class="ident" id="3543759"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><span class="op" id="3543762">,</span>&nbsp;<span class="builtinfunc" id="3543764"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3543767">,</span>&nbsp;<span class="ident" id="3543769"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span><span class="op" id="3543773">,</span>&nbsp;<span class="ident" id="3543775"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3543776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543779">case</span>&nbsp;<span class="ident" id="3543784"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543790">.</span><span class="ident" id="3543791"><a href="/gostd/regexp/syntax/prog.go.html#3659250">InstEmptyWidth</a></span><span class="op" id="3543805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543809">if</span>&nbsp;<span class="ident" id="3543812"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543818">.</span><span class="ident" id="3543819"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3543826">(</span><span class="ident" id="3543827"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543828">.</span><span class="ident" id="3543829"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3543832">)</span><span class="op" id="3543833">&amp;^</span><span class="ident" id="3543835"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span>&nbsp;<span class="op" id="3543840">==</span>&nbsp;<span class="num" id="3543843">0</span>&nbsp;<span class="op" id="3543845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543850"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3543852">=</span>&nbsp;<span class="ident" id="3543854"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3543855">.</span><span class="ident" id="3543856"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3543859">(</span><span class="ident" id="3543860"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543861">,</span>&nbsp;<span class="ident" id="3543863"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543864">.</span><span class="ident" id="3543865"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3543868">,</span>&nbsp;<span class="ident" id="3543870"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><span class="op" id="3543873">,</span>&nbsp;<span class="builtinfunc" id="3543875"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3543878">,</span>&nbsp;<span class="ident" id="3543880"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span><span class="op" id="3543884">,</span>&nbsp;<span class="ident" id="3543886"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3543887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3543891">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543894">case</span>&nbsp;<span class="ident" id="3543899"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543905">.</span><span class="ident" id="3543906"><a href="/gostd/regexp/syntax/prog.go.html#3659287">InstNop</a></span><span class="op" id="3543913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3543917"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3543919">=</span>&nbsp;<span class="ident" id="3543921"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3543922">.</span><span class="ident" id="3543923"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3543926">(</span><span class="ident" id="3543927"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3543928">,</span>&nbsp;<span class="ident" id="3543930"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543931">.</span><span class="ident" id="3543932"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3543935">,</span>&nbsp;<span class="ident" id="3543937"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><span class="op" id="3543940">,</span>&nbsp;<span class="builtinfunc" id="3543942"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3543945">,</span>&nbsp;<span class="ident" id="3543947"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span><span class="op" id="3543951">,</span>&nbsp;<span class="ident" id="3543953"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3543954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543957">case</span>&nbsp;<span class="ident" id="3543962"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3543968">.</span><span class="ident" id="3543969"><a href="/gostd/regexp/syntax/prog.go.html#3659237">InstCapture</a></span><span class="op" id="3543980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3543984">if</span>&nbsp;<span class="builtintype" id="3543987">int</span><span class="op" id="3543990">(</span><span class="ident" id="3543991"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3543992">.</span><span class="ident" id="3543993"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3543996">)</span>&nbsp;<span class="op" id="3543998">&lt;</span>&nbsp;<span class="builtinfunc" id="3544000">len</span><span class="op" id="3544003">(</span><span class="builtinfunc" id="3544004"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544007">)</span>&nbsp;<span class="op" id="3544009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544014">opos</span>&nbsp;<span class="op" id="3544019">:=</span>&nbsp;<span class="builtinfunc" id="3544022"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544025">[</span><span class="ident" id="3544026"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3544027">.</span><span class="ident" id="3544028"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3544031">]</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3544036"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544039">[</span><span class="ident" id="3544040"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3544041">.</span><span class="ident" id="3544042"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3544045">]</span>&nbsp;<span class="op" id="3544047">=</span>&nbsp;<span class="ident" id="3544049"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544056"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3544057">.</span><span class="ident" id="3544058"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3544061">(</span><span class="ident" id="3544062"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3544063">,</span>&nbsp;<span class="ident" id="3544065"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3544066">.</span><span class="ident" id="3544067"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3544070">,</span>&nbsp;<span class="ident" id="3544072"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><span class="op" id="3544075">,</span>&nbsp;<span class="builtinfunc" id="3544077"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544080">,</span>&nbsp;<span class="ident" id="3544082"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span><span class="op" id="3544086">,</span>&nbsp;<span class="builtintype" id="3544088">nil</span><span class="op" id="3544091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3544096"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544099">[</span><span class="ident" id="3544100"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3544101">.</span><span class="ident" id="3544102"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3544105">]</span>&nbsp;<span class="op" id="3544107">=</span>&nbsp;<span class="ident" id="3544109"><a href="/gostd/regexp/exec.go.html#3544014">opos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544116">}</span>&nbsp;<span class="keyword" id="3544118">else</span>&nbsp;<span class="op" id="3544123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544128"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3544130">=</span>&nbsp;<span class="ident" id="3544132"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3544133">.</span><span class="ident" id="3544134"><a href="/gostd/regexp/exec.go.html#3543237">add</a></span><span class="op" id="3544137">(</span><span class="ident" id="3544138"><a href="/gostd/regexp/exec.go.html#3543241">q</a></span><span class="op" id="3544139">,</span>&nbsp;<span class="ident" id="3544141"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3544142">.</span><span class="ident" id="3544143"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3544146">,</span>&nbsp;<span class="ident" id="3544148"><a href="/gostd/regexp/exec.go.html#3543262">pos</a></span><span class="op" id="3544151">,</span>&nbsp;<span class="builtinfunc" id="3544153"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544156">,</span>&nbsp;<span class="ident" id="3544158"><a href="/gostd/regexp/exec.go.html#3543282">cond</a></span><span class="op" id="3544162">,</span>&nbsp;<span class="ident" id="3544164"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3544165">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544172">case</span>&nbsp;<span class="ident" id="3544177"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544183">.</span><span class="ident" id="3544184"><a href="/gostd/regexp/syntax/prog.go.html#3659266">InstMatch</a></span><span class="op" id="3544193">,</span>&nbsp;<span class="ident" id="3544195"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544201">.</span><span class="ident" id="3544202"><a href="/gostd/regexp/syntax/prog.go.html#3659296">InstRune</a></span><span class="op" id="3544210">,</span>&nbsp;<span class="ident" id="3544212"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544218">.</span><span class="ident" id="3544219"><a href="/gostd/regexp/syntax/prog.go.html#3659306">InstRune1</a></span><span class="op" id="3544228">,</span>&nbsp;<span class="ident" id="3544230"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544236">.</span><span class="ident" id="3544237"><a href="/gostd/regexp/syntax/prog.go.html#3659317">InstRuneAny</a></span><span class="op" id="3544248">,</span>&nbsp;<span class="ident" id="3544250"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544256">.</span><span class="ident" id="3544257"><a href="/gostd/regexp/syntax/prog.go.html#3659330">InstRuneAnyNotNL</a></span><span class="op" id="3544273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544277">if</span>&nbsp;<span class="ident" id="3544280"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3544282">==</span>&nbsp;<span class="builtintype" id="3544285">nil</span>&nbsp;<span class="op" id="3544289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544294"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3544296">=</span>&nbsp;<span class="ident" id="3544298"><a href="/gostd/regexp/exec.go.html#3543225">m</a></span><span class="op" id="3544299">.</span><span class="ident" id="3544300"><a href="/gostd/regexp/exec.go.html#3539072">alloc</a></span><span class="op" id="3544305">(</span><span class="ident" id="3544306"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><span class="op" id="3544307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544311">}</span>&nbsp;<span class="keyword" id="3544313">else</span>&nbsp;<span class="op" id="3544318">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544323"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3544324">.</span><span class="ident" id="3544325"><a href="/gostd/regexp/exec.go.html#3537501">inst</a></span>&nbsp;<span class="op" id="3544330">=</span>&nbsp;<span class="ident" id="3544332"><a href="/gostd/regexp/exec.go.html#3543552">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544340">if</span>&nbsp;<span class="builtinfunc" id="3544343">len</span><span class="op" id="3544346">(</span><span class="builtinfunc" id="3544347"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544350">)</span>&nbsp;<span class="op" id="3544352">&gt;</span>&nbsp;<span class="num" id="3544354">0</span>&nbsp;<span class="op" id="3544356">&amp;&amp;</span>&nbsp;<span class="op" id="3544359">&amp;</span><span class="ident" id="3544360"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3544361">.</span><span class="builtinfunc" id="3544362"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3544365">[</span><span class="num" id="3544366">0</span><span class="op" id="3544367">]</span>&nbsp;<span class="op" id="3544369">!=</span>&nbsp;<span class="op" id="3544372">&amp;</span><span class="builtinfunc" id="3544373"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544376">[</span><span class="num" id="3544377">0</span><span class="op" id="3544378">]</span>&nbsp;<span class="op" id="3544380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3544385">copy</span><span class="op" id="3544389">(</span><span class="ident" id="3544390"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><span class="op" id="3544391">.</span><span class="builtinfunc" id="3544392"><a href="/gostd/regexp/exec.go.html#3537520">cap</a></span><span class="op" id="3544395">,</span>&nbsp;<span class="builtinfunc" id="3544397"><a href="/gostd/regexp/exec.go.html#3543271">cap</a></span><span class="op" id="3544400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544404">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544408"><a href="/gostd/regexp/exec.go.html#3543485">d</a></span><span class="op" id="3544409">.</span><span class="ident" id="3544410"><a href="/gostd/regexp/exec.go.html#3537300">t</a></span>&nbsp;<span class="op" id="3544412">=</span>&nbsp;<span class="ident" id="3544414"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544418"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span>&nbsp;<span class="op" id="3544420">=</span>&nbsp;<span class="builtintype" id="3544422">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544430">return</span>&nbsp;<span class="ident" id="3544437"><a href="/gostd/regexp/exec.go.html#3543303">t</a></span><br>
<span class="lineno"></span><span class="op" id="3544439">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="comment" id="3544442">//&nbsp;onepass&nbsp;runs&nbsp;the&nbsp;machine&nbsp;over&nbsp;the&nbsp;input&nbsp;starting&nbsp;at&nbsp;pos.</span><br>
<span class="lineno"></span><span class="comment" id="3544502">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="3544543">//&nbsp;If&nbsp;so,&nbsp;m.matchcap&nbsp;holds&nbsp;the&nbsp;submatch&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="3544596">func</span>&nbsp;<span class="op" id="3544601">(</span><span class="ident" id="3544602">m</span>&nbsp;<span class="op" id="3544604">*</span><span class="ident" id="3544605"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3544612">)</span>&nbsp;<span class="ident" id="3544614">onepass</span><span class="op" id="3544621">(</span><span class="ident" id="3544622">i</span>&nbsp;<span class="ident" id="3544624"><a href="/gostd/regexp/regexp.go.html#3573233">input</a></span><span class="op" id="3544629">,</span>&nbsp;<span class="ident" id="3544631">pos</span>&nbsp;<span class="builtintype" id="3544635">int</span><span class="op" id="3544638">)</span>&nbsp;<span class="builtintype" id="3544640">bool</span>&nbsp;<span class="op" id="3544645">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544648">startCond</span>&nbsp;<span class="op" id="3544658">:=</span>&nbsp;<span class="ident" id="3544661"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3544662">.</span><span class="ident" id="3544663"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3544665">.</span><span class="ident" id="3544666"><a href="/gostd/regexp/regexp.go.html#3567533">cond</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544672">if</span>&nbsp;<span class="ident" id="3544675"><a href="/gostd/regexp/exec.go.html#3544648">startCond</a></span>&nbsp;<span class="op" id="3544685">==</span>&nbsp;<span class="op" id="3544688">^</span><span class="ident" id="3544689"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544695">.</span><span class="ident" id="3544696"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3544703">(</span><span class="num" id="3544704">0</span><span class="op" id="3544705">)</span>&nbsp;<span class="op" id="3544707">{</span>&nbsp;<span class="comment" id="3544709">//&nbsp;impossible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544725">return</span>&nbsp;<span class="builtintype" id="3544732">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544742"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3544743">.</span><span class="ident" id="3544744"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3544752">=</span>&nbsp;<span class="builtintype" id="3544754">false</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544761">for</span>&nbsp;<span class="ident" id="3544765">i</span>&nbsp;<span class="op" id="3544767">:=</span>&nbsp;<span class="keyword" id="3544770">range</span>&nbsp;<span class="ident" id="3544776"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3544777">.</span><span class="ident" id="3544778"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span>&nbsp;<span class="op" id="3544787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544791"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3544792">.</span><span class="ident" id="3544793"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3544801">[</span><span class="ident" id="3544802"><a href="/gostd/regexp/exec.go.html#3544765">i</a></span><span class="op" id="3544803">]</span>&nbsp;<span class="op" id="3544805">=</span>&nbsp;<span class="op" id="3544807">-</span><span class="num" id="3544808">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544814">r</span><span class="op" id="3544815">,</span>&nbsp;<span class="ident" id="3544817">r1</span>&nbsp;<span class="op" id="3544820">:=</span>&nbsp;<span class="ident" id="3544823"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3544832">,</span>&nbsp;<span class="ident" id="3544834"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544845">width</span><span class="op" id="3544850">,</span>&nbsp;<span class="ident" id="3544852">width1</span>&nbsp;<span class="op" id="3544859">:=</span>&nbsp;<span class="num" id="3544862">0</span><span class="op" id="3544863">,</span>&nbsp;<span class="num" id="3544865">0</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544868"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3544869">,</span>&nbsp;<span class="ident" id="3544871"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span>&nbsp;<span class="op" id="3544877">=</span>&nbsp;<span class="ident" id="3544879"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3544880">.</span><span class="ident" id="3544881"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3544885">(</span><span class="ident" id="3544886"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span><span class="op" id="3544889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544892">if</span>&nbsp;<span class="ident" id="3544895"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span>&nbsp;<span class="op" id="3544897">!=</span>&nbsp;<span class="ident" id="3544900"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span>&nbsp;<span class="op" id="3544910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544914"><a href="/gostd/regexp/exec.go.html#3544817">r1</a></span><span class="op" id="3544916">,</span>&nbsp;<span class="ident" id="3544918"><a href="/gostd/regexp/exec.go.html#3544852">width1</a></span>&nbsp;<span class="op" id="3544925">=</span>&nbsp;<span class="ident" id="3544927"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3544928">.</span><span class="ident" id="3544929"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3544933">(</span><span class="ident" id="3544934"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3544938">+</span>&nbsp;<span class="ident" id="3544940"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span><span class="op" id="3544945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3544948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544951">var</span>&nbsp;<span class="ident" id="3544955">flag</span>&nbsp;<span class="ident" id="3544960"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3544966">.</span><span class="ident" id="3544967"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3544976">if</span>&nbsp;<span class="ident" id="3544979"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3544983">==</span>&nbsp;<span class="num" id="3544986">0</span>&nbsp;<span class="op" id="3544988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3544992"><a href="/gostd/regexp/exec.go.html#3544955">flag</a></span>&nbsp;<span class="op" id="3544997">=</span>&nbsp;<span class="ident" id="3544999"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545005">.</span><span class="ident" id="3545006"><a href="/gostd/regexp/syntax/prog.go.html#3660159">EmptyOpContext</a></span><span class="op" id="3545020">(</span><span class="op" id="3545021">-</span><span class="num" id="3545022">1</span><span class="op" id="3545023">,</span>&nbsp;<span class="ident" id="3545025"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3545026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545029">}</span>&nbsp;<span class="keyword" id="3545031">else</span>&nbsp;<span class="op" id="3545036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545040"><a href="/gostd/regexp/exec.go.html#3544955">flag</a></span>&nbsp;<span class="op" id="3545045">=</span>&nbsp;<span class="ident" id="3545047"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3545048">.</span><span class="ident" id="3545049"><a href="/gostd/regexp/regexp.go.html#3573444">context</a></span><span class="op" id="3545056">(</span><span class="ident" id="3545057"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span><span class="op" id="3545060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545063">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545066">pc</span>&nbsp;<span class="op" id="3545069">:=</span>&nbsp;<span class="ident" id="3545072"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545073">.</span><span class="ident" id="3545074"><a href="/gostd/regexp/exec.go.html#3537712">op</a></span><span class="op" id="3545076">.</span><span class="ident" id="3545077"><a href="/gostd/regexp/onepass.go.html#3548226">Start</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545084">inst</span>&nbsp;<span class="op" id="3545089">:=</span>&nbsp;<span class="ident" id="3545092"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545093">.</span><span class="ident" id="3545094"><a href="/gostd/regexp/exec.go.html#3537712">op</a></span><span class="op" id="3545096">.</span><span class="ident" id="3545097"><a href="/gostd/regexp/onepass.go.html#3548204">Inst</a></span><span class="op" id="3545101">[</span><span class="ident" id="3545102"><a href="/gostd/regexp/exec.go.html#3545066">pc</a></span><span class="op" id="3545104">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3545107">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;simple&nbsp;literal&nbsp;prefix,&nbsp;skip&nbsp;over&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545162">if</span>&nbsp;<span class="ident" id="3545165"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3545169">==</span>&nbsp;<span class="num" id="3545172">0</span>&nbsp;<span class="op" id="3545174">&amp;&amp;</span>&nbsp;<span class="ident" id="3545177"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545183">.</span><span class="ident" id="3545184"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3545191">(</span><span class="ident" id="3545192"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3545196">.</span><span class="ident" id="3545197"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3545200">)</span><span class="op" id="3545201">&amp;^</span><span class="ident" id="3545203"><a href="/gostd/regexp/exec.go.html#3544955">flag</a></span>&nbsp;<span class="op" id="3545208">==</span>&nbsp;<span class="num" id="3545211">0</span>&nbsp;<span class="op" id="3545213">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3545218">len</span><span class="op" id="3545221">(</span><span class="ident" id="3545222"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545223">.</span><span class="ident" id="3545224"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3545226">.</span><span class="ident" id="3545227"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3545233">)</span>&nbsp;<span class="op" id="3545235">&gt;</span>&nbsp;<span class="num" id="3545237">0</span>&nbsp;<span class="op" id="3545239">&amp;&amp;</span>&nbsp;<span class="ident" id="3545242"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3545243">.</span><span class="ident" id="3545244"><a href="/gostd/regexp/regexp.go.html#3573307">canCheckPrefix</a></span><span class="op" id="3545258">(</span><span class="op" id="3545259">)</span>&nbsp;<span class="op" id="3545261">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3545265">//&nbsp;Match&nbsp;requires&nbsp;literal&nbsp;prefix;&nbsp;fast&nbsp;search&nbsp;for&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545321">if</span>&nbsp;<span class="ident" id="3545324"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3545325">.</span><span class="ident" id="3545326"><a href="/gostd/regexp/regexp.go.html#3573384">hasPrefix</a></span><span class="op" id="3545335">(</span><span class="ident" id="3545336"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545337">.</span><span class="ident" id="3545338"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3545340">)</span>&nbsp;<span class="op" id="3545342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545347"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3545351">+=</span>&nbsp;<span class="builtinfunc" id="3545354">len</span><span class="op" id="3545357">(</span><span class="ident" id="3545358"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545359">.</span><span class="ident" id="3545360"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3545362">.</span><span class="ident" id="3545363"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3545369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545374"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3545375">,</span>&nbsp;<span class="ident" id="3545377"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span>&nbsp;<span class="op" id="3545383">=</span>&nbsp;<span class="ident" id="3545385"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3545386">.</span><span class="ident" id="3545387"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3545391">(</span><span class="ident" id="3545392"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span><span class="op" id="3545395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545400"><a href="/gostd/regexp/exec.go.html#3544817">r1</a></span><span class="op" id="3545402">,</span>&nbsp;<span class="ident" id="3545404"><a href="/gostd/regexp/exec.go.html#3544852">width1</a></span>&nbsp;<span class="op" id="3545411">=</span>&nbsp;<span class="ident" id="3545413"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3545414">.</span><span class="ident" id="3545415"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3545419">(</span><span class="ident" id="3545420"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3545424">+</span>&nbsp;<span class="ident" id="3545426"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span><span class="op" id="3545431">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545436"><a href="/gostd/regexp/exec.go.html#3544955">flag</a></span>&nbsp;<span class="op" id="3545441">=</span>&nbsp;<span class="ident" id="3545443"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3545444">.</span><span class="ident" id="3545445"><a href="/gostd/regexp/regexp.go.html#3573444">context</a></span><span class="op" id="3545452">(</span><span class="ident" id="3545453"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span><span class="op" id="3545456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545461"><a href="/gostd/regexp/exec.go.html#3545066">pc</a></span>&nbsp;<span class="op" id="3545464">=</span>&nbsp;<span class="builtintype" id="3545466">int</span><span class="op" id="3545469">(</span><span class="ident" id="3545470"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545471">.</span><span class="ident" id="3545472"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span><span class="op" id="3545474">.</span><span class="ident" id="3545475"><a href="/gostd/regexp/regexp.go.html#3567472">prefixEnd</a></span><span class="op" id="3545484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545488">}</span>&nbsp;<span class="keyword" id="3545490">else</span>&nbsp;<span class="op" id="3545495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545500">return</span>&nbsp;<span class="ident" id="3545507"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545508">.</span><span class="ident" id="3545509"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545519">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545525">for</span>&nbsp;<span class="op" id="3545529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545533"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span>&nbsp;<span class="op" id="3545538">=</span>&nbsp;<span class="ident" id="3545540"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545541">.</span><span class="ident" id="3545542"><a href="/gostd/regexp/exec.go.html#3537712">op</a></span><span class="op" id="3545544">.</span><span class="ident" id="3545545"><a href="/gostd/regexp/onepass.go.html#3548204">Inst</a></span><span class="op" id="3545549">[</span><span class="ident" id="3545550"><a href="/gostd/regexp/exec.go.html#3545066">pc</a></span><span class="op" id="3545552">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545556"><a href="/gostd/regexp/exec.go.html#3545066">pc</a></span>&nbsp;<span class="op" id="3545559">=</span>&nbsp;<span class="builtintype" id="3545561">int</span><span class="op" id="3545564">(</span><span class="ident" id="3545565"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3545569">.</span><span class="ident" id="3545570"><a href="/gostd/regexp/syntax/prog.go.html#3661090">Out</a></span><span class="op" id="3545573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545577">switch</span>&nbsp;<span class="ident" id="3545584"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3545588">.</span><span class="ident" id="3545589"><a href="/gostd/regexp/syntax/prog.go.html#3661077">Op</a></span>&nbsp;<span class="op" id="3545592">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545596">default</span><span class="op" id="3545603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3545608">panic</span><span class="op" id="3545613">(</span><span class="string" id="3545614">&#34;bad&nbsp;inst&#34;</span><span class="op" id="3545624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545628">case</span>&nbsp;<span class="ident" id="3545633"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545639">.</span><span class="ident" id="3545640"><a href="/gostd/regexp/syntax/prog.go.html#3659266">InstMatch</a></span><span class="op" id="3545649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545654"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545655">.</span><span class="ident" id="3545656"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span>&nbsp;<span class="op" id="3545664">=</span>&nbsp;<span class="builtintype" id="3545666">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545674">if</span>&nbsp;<span class="builtinfunc" id="3545677">len</span><span class="op" id="3545680">(</span><span class="ident" id="3545681"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545682">.</span><span class="ident" id="3545683"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3545691">)</span>&nbsp;<span class="op" id="3545693">&gt;</span>&nbsp;<span class="num" id="3545695">0</span>&nbsp;<span class="op" id="3545697">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545703"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545704">.</span><span class="ident" id="3545705"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3545713">[</span><span class="num" id="3545714">0</span><span class="op" id="3545715">]</span>&nbsp;<span class="op" id="3545717">=</span>&nbsp;<span class="num" id="3545719">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3545725"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545726">.</span><span class="ident" id="3545727"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3545735">[</span><span class="num" id="3545736">1</span><span class="op" id="3545737">]</span>&nbsp;<span class="op" id="3545739">=</span>&nbsp;<span class="ident" id="3545741"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545753">return</span>&nbsp;<span class="ident" id="3545760"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545761">.</span><span class="ident" id="3545762"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545772">case</span>&nbsp;<span class="ident" id="3545777"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545783">.</span><span class="ident" id="3545784"><a href="/gostd/regexp/syntax/prog.go.html#3659296">InstRune</a></span><span class="op" id="3545792">:</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545797">if</span>&nbsp;<span class="op" id="3545800">!</span><span class="ident" id="3545801"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3545805">.</span><span class="ident" id="3545806"><a href="/gostd/regexp/syntax/prog.go.html#3663002">MatchRune</a></span><span class="op" id="3545815">(</span><span class="ident" id="3545816"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3545817">)</span>&nbsp;<span class="op" id="3545819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545825">return</span>&nbsp;<span class="ident" id="3545832"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545833">.</span><span class="ident" id="3545834"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545849">case</span>&nbsp;<span class="ident" id="3545854"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545860">.</span><span class="ident" id="3545861"><a href="/gostd/regexp/syntax/prog.go.html#3659306">InstRune1</a></span><span class="op" id="3545870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545875">if</span>&nbsp;<span class="ident" id="3545878"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span>&nbsp;<span class="op" id="3545880">!=</span>&nbsp;<span class="ident" id="3545883"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3545887">.</span><span class="ident" id="3545888"><a href="/gostd/regexp/syntax/prog.go.html#3661201">Rune</a></span><span class="op" id="3545892">[</span><span class="num" id="3545893">0</span><span class="op" id="3545894">]</span>&nbsp;<span class="op" id="3545896">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545902">return</span>&nbsp;<span class="ident" id="3545909"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3545910">.</span><span class="ident" id="3545911"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3545922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545926">case</span>&nbsp;<span class="ident" id="3545931"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545937">.</span><span class="ident" id="3545938"><a href="/gostd/regexp/syntax/prog.go.html#3659317">InstRuneAny</a></span><span class="op" id="3545949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3545954">//&nbsp;Nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3545967">case</span>&nbsp;<span class="ident" id="3545972"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3545978">.</span><span class="ident" id="3545979"><a href="/gostd/regexp/syntax/prog.go.html#3659330">InstRuneAnyNotNL</a></span><span class="op" id="3545995">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546000">if</span>&nbsp;<span class="ident" id="3546003"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span>&nbsp;<span class="op" id="3546005">==</span>&nbsp;<span class="string" id="3546008">&#39;\n&#39;</span>&nbsp;<span class="op" id="3546013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546019">return</span>&nbsp;<span class="ident" id="3546026"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3546027">.</span><span class="ident" id="3546028"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3546043">//&nbsp;peek&nbsp;at&nbsp;the&nbsp;input&nbsp;rune&nbsp;to&nbsp;see&nbsp;which&nbsp;branch&nbsp;of&nbsp;the&nbsp;Alt&nbsp;to&nbsp;take</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546110">case</span>&nbsp;<span class="ident" id="3546115"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546121">.</span><span class="ident" id="3546122"><a href="/gostd/regexp/syntax/prog.go.html#3659200">InstAlt</a></span><span class="op" id="3546129">,</span>&nbsp;<span class="ident" id="3546131"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546137">.</span><span class="ident" id="3546138"><a href="/gostd/regexp/syntax/prog.go.html#3659223">InstAltMatch</a></span><span class="op" id="3546150">:</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3546155"><a href="/gostd/regexp/exec.go.html#3545066">pc</a></span>&nbsp;<span class="op" id="3546158">=</span>&nbsp;<span class="builtintype" id="3546160">int</span><span class="op" id="3546163">(</span><span class="ident" id="3546164"><a href="/gostd/regexp/onepass.go.html#3550007">onePassNext</a></span><span class="op" id="3546175">(</span><span class="op" id="3546176">&amp;</span><span class="ident" id="3546177"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3546181">,</span>&nbsp;<span class="ident" id="3546183"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3546184">)</span><span class="op" id="3546185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546190">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546201">case</span>&nbsp;<span class="ident" id="3546206"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546212">.</span><span class="ident" id="3546213"><a href="/gostd/regexp/syntax/prog.go.html#3659277">InstFail</a></span><span class="op" id="3546221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546226">return</span>&nbsp;<span class="ident" id="3546233"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3546234">.</span><span class="ident" id="3546235"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546245">case</span>&nbsp;<span class="ident" id="3546250"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546256">.</span><span class="ident" id="3546257"><a href="/gostd/regexp/syntax/prog.go.html#3659287">InstNop</a></span><span class="op" id="3546264">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546269">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546280">case</span>&nbsp;<span class="ident" id="3546285"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546291">.</span><span class="ident" id="3546292"><a href="/gostd/regexp/syntax/prog.go.html#3659250">InstEmptyWidth</a></span><span class="op" id="3546306">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546311">if</span>&nbsp;<span class="ident" id="3546314"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546320">.</span><span class="ident" id="3546321"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><span class="op" id="3546328">(</span><span class="ident" id="3546329"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3546333">.</span><span class="ident" id="3546334"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3546337">)</span><span class="op" id="3546338">&amp;^</span><span class="ident" id="3546340"><a href="/gostd/regexp/exec.go.html#3544955">flag</a></span>&nbsp;<span class="op" id="3546345">!=</span>&nbsp;<span class="num" id="3546348">0</span>&nbsp;<span class="op" id="3546350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546356">return</span>&nbsp;<span class="ident" id="3546363"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3546364">.</span><span class="ident" id="3546365"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546376">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546381">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546392">case</span>&nbsp;<span class="ident" id="3546397"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546403">.</span><span class="ident" id="3546404"><a href="/gostd/regexp/syntax/prog.go.html#3659237">InstCapture</a></span><span class="op" id="3546415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546420">if</span>&nbsp;<span class="builtintype" id="3546423">int</span><span class="op" id="3546426">(</span><span class="ident" id="3546427"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3546431">.</span><span class="ident" id="3546432"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3546435">)</span>&nbsp;<span class="op" id="3546437">&lt;</span>&nbsp;<span class="builtinfunc" id="3546439">len</span><span class="op" id="3546442">(</span><span class="ident" id="3546443"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3546444">.</span><span class="ident" id="3546445"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3546453">)</span>&nbsp;<span class="op" id="3546455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3546461"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3546462">.</span><span class="ident" id="3546463"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3546471">[</span><span class="ident" id="3546472"><a href="/gostd/regexp/exec.go.html#3545084">inst</a></span><span class="op" id="3546476">.</span><span class="ident" id="3546477"><a href="/gostd/regexp/syntax/prog.go.html#3661134">Arg</a></span><span class="op" id="3546480">]</span>&nbsp;<span class="op" id="3546482">=</span>&nbsp;<span class="ident" id="3546484"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546491">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546496">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546511">if</span>&nbsp;<span class="ident" id="3546514"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span>&nbsp;<span class="op" id="3546520">==</span>&nbsp;<span class="num" id="3546523">0</span>&nbsp;<span class="op" id="3546525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546530">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546538">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3546542"><a href="/gostd/regexp/exec.go.html#3544955">flag</a></span>&nbsp;<span class="op" id="3546547">=</span>&nbsp;<span class="ident" id="3546549"><a href="/gostd/regexp/exec.go.html#3536815">syntax</a></span><span class="op" id="3546555">.</span><span class="ident" id="3546556"><a href="/gostd/regexp/syntax/prog.go.html#3660159">EmptyOpContext</a></span><span class="op" id="3546570">(</span><span class="ident" id="3546571"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3546572">,</span>&nbsp;<span class="ident" id="3546574"><a href="/gostd/regexp/exec.go.html#3544817">r1</a></span><span class="op" id="3546576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3546580"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3546584">+=</span>&nbsp;<span class="ident" id="3546587"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3546595"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span><span class="op" id="3546596">,</span>&nbsp;<span class="ident" id="3546598"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span>&nbsp;<span class="op" id="3546604">=</span>&nbsp;<span class="ident" id="3546606"><a href="/gostd/regexp/exec.go.html#3544817">r1</a></span><span class="op" id="3546608">,</span>&nbsp;<span class="ident" id="3546610"><a href="/gostd/regexp/exec.go.html#3544852">width1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546619">if</span>&nbsp;<span class="ident" id="3546622"><a href="/gostd/regexp/exec.go.html#3544814">r</a></span>&nbsp;<span class="op" id="3546624">!=</span>&nbsp;<span class="ident" id="3546627"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span>&nbsp;<span class="op" id="3546637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3546642"><a href="/gostd/regexp/exec.go.html#3544817">r1</a></span><span class="op" id="3546644">,</span>&nbsp;<span class="ident" id="3546646"><a href="/gostd/regexp/exec.go.html#3544852">width1</a></span>&nbsp;<span class="op" id="3546653">=</span>&nbsp;<span class="ident" id="3546655"><a href="/gostd/regexp/exec.go.html#3544622">i</a></span><span class="op" id="3546656">.</span><span class="ident" id="3546657"><a href="/gostd/regexp/regexp.go.html#3573252">step</a></span><span class="op" id="3546661">(</span><span class="ident" id="3546662"><a href="/gostd/regexp/exec.go.html#3544631">pos</a></span>&nbsp;<span class="op" id="3546666">+</span>&nbsp;<span class="ident" id="3546668"><a href="/gostd/regexp/exec.go.html#3544845">width</a></span><span class="op" id="3546673">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3546680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3546683">return</span>&nbsp;<span class="ident" id="3546690"><a href="/gostd/regexp/exec.go.html#3544602">m</a></span><span class="op" id="3546691">.</span><span class="ident" id="3546692"><a href="/gostd/regexp/exec.go.html#3537883">matched</a></span><br>
<span class="lineno"></span><span class="op" id="3546700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="3546703">//&nbsp;empty&nbsp;is&nbsp;a&nbsp;non-nil&nbsp;0-element&nbsp;slice,</span><br>
<span class="lineno"></span><span class="comment" id="3546742">//&nbsp;so&nbsp;doExecute&nbsp;can&nbsp;avoid&nbsp;an&nbsp;allocation</span><br>
<span class="lineno"></span><span class="comment" id="3546782">//&nbsp;when&nbsp;0&nbsp;captures&nbsp;are&nbsp;requested&nbsp;from&nbsp;a&nbsp;successful&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3546840">var</span>&nbsp;<span class="ident" id="3546844">empty</span>&nbsp;<span class="op" id="3546850">=</span>&nbsp;<span class="builtinfunc" id="3546852">make</span><span class="op" id="3546856">(</span><span class="op" id="3546857">[</span><span class="op" id="3546858">]</span><span class="builtintype" id="3546859">int</span><span class="op" id="3546862">,</span>&nbsp;<span class="num" id="3546864">0</span><span class="op" id="3546865">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="3546868">//&nbsp;doExecute&nbsp;finds&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3546931">//&nbsp;the&nbsp;position&nbsp;of&nbsp;its&nbsp;subexpressions.</span><br>
<span class="lineno"></span><span class="keyword" id="3546970">func</span>&nbsp;<span class="op" id="3546975">(</span><span class="ident" id="3546976">re</span>&nbsp;<span class="op" id="3546979">*</span><span class="ident" id="3546980"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3546986">)</span>&nbsp;<span class="ident" id="3546988">doExecute</span><span class="op" id="3546997">(</span><span class="ident" id="3546998">r</span>&nbsp;<span class="ident" id="3547000"><a href="/gostd/regexp/exec.go.html#3536809">io</a></span><span class="op" id="3547002">.</span><span class="ident" id="3547003"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><span class="op" id="3547013">,</span>&nbsp;<span class="ident" id="3547015">b</span>&nbsp;<span class="op" id="3547017">[</span><span class="op" id="3547018">]</span><span class="builtintype" id="3547019">byte</span><span class="op" id="3547023">,</span>&nbsp;<span class="ident" id="3547025">s</span>&nbsp;<span class="builtintype" id="3547027">string</span><span class="op" id="3547033">,</span>&nbsp;<span class="ident" id="3547035">pos</span>&nbsp;<span class="builtintype" id="3547039">int</span><span class="op" id="3547042">,</span>&nbsp;<span class="ident" id="3547044">ncap</span>&nbsp;<span class="builtintype" id="3547049">int</span><span class="op" id="3547052">)</span>&nbsp;<span class="op" id="3547054">[</span><span class="op" id="3547055">]</span><span class="builtintype" id="3547056">int</span>&nbsp;<span class="op" id="3547060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547063">m</span>&nbsp;<span class="op" id="3547065">:=</span>&nbsp;<span class="ident" id="3547068"><a href="/gostd/regexp/exec.go.html#3546976">re</a></span><span class="op" id="3547070">.</span><span class="ident" id="3547071"><a href="/gostd/regexp/regexp.go.html#3571134">get</a></span><span class="op" id="3547074">(</span><span class="op" id="3547075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547078">var</span>&nbsp;<span class="ident" id="3547082">i</span>&nbsp;<span class="ident" id="3547084"><a href="/gostd/regexp/regexp.go.html#3573233">input</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547091">if</span>&nbsp;<span class="ident" id="3547094"><a href="/gostd/regexp/exec.go.html#3546998">r</a></span>&nbsp;<span class="op" id="3547096">!=</span>&nbsp;<span class="builtintype" id="3547099">nil</span>&nbsp;<span class="op" id="3547103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547107"><a href="/gostd/regexp/exec.go.html#3547082">i</a></span>&nbsp;<span class="op" id="3547109">=</span>&nbsp;<span class="ident" id="3547111"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547112">.</span><span class="ident" id="3547113"><a href="/gostd/regexp/exec.go.html#3538326">newInputReader</a></span><span class="op" id="3547127">(</span><span class="ident" id="3547128"><a href="/gostd/regexp/exec.go.html#3546998">r</a></span><span class="op" id="3547129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547132">}</span>&nbsp;<span class="keyword" id="3547134">else</span>&nbsp;<span class="keyword" id="3547139">if</span>&nbsp;<span class="ident" id="3547142"><a href="/gostd/regexp/exec.go.html#3547015">b</a></span>&nbsp;<span class="op" id="3547144">!=</span>&nbsp;<span class="builtintype" id="3547147">nil</span>&nbsp;<span class="op" id="3547151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547155"><a href="/gostd/regexp/exec.go.html#3547082">i</a></span>&nbsp;<span class="op" id="3547157">=</span>&nbsp;<span class="ident" id="3547159"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547160">.</span><span class="ident" id="3547161"><a href="/gostd/regexp/exec.go.html#3538129">newInputBytes</a></span><span class="op" id="3547174">(</span><span class="ident" id="3547175"><a href="/gostd/regexp/exec.go.html#3547015">b</a></span><span class="op" id="3547176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547179">}</span>&nbsp;<span class="keyword" id="3547181">else</span>&nbsp;<span class="op" id="3547186">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547190"><a href="/gostd/regexp/exec.go.html#3547082">i</a></span>&nbsp;<span class="op" id="3547192">=</span>&nbsp;<span class="ident" id="3547194"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547195">.</span><span class="ident" id="3547196"><a href="/gostd/regexp/exec.go.html#3538226">newInputString</a></span><span class="op" id="3547210">(</span><span class="ident" id="3547211"><a href="/gostd/regexp/exec.go.html#3547025">s</a></span><span class="op" id="3547212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547218">if</span>&nbsp;<span class="ident" id="3547221"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547222">.</span><span class="ident" id="3547223"><a href="/gostd/regexp/exec.go.html#3537712">op</a></span>&nbsp;<span class="op" id="3547226">!=</span>&nbsp;<span class="ident" id="3547229"><a href="/gostd/regexp/onepass.go.html#3562168">notOnePass</a></span>&nbsp;<span class="op" id="3547240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547244">if</span>&nbsp;<span class="op" id="3547247">!</span><span class="ident" id="3547248"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547249">.</span><span class="ident" id="3547250"><a href="/gostd/regexp/exec.go.html#3544614">onepass</a></span><span class="op" id="3547257">(</span><span class="ident" id="3547258"><a href="/gostd/regexp/exec.go.html#3547082">i</a></span><span class="op" id="3547259">,</span>&nbsp;<span class="ident" id="3547261"><a href="/gostd/regexp/exec.go.html#3547035">pos</a></span><span class="op" id="3547264">)</span>&nbsp;<span class="op" id="3547266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547271"><a href="/gostd/regexp/exec.go.html#3546976">re</a></span><span class="op" id="3547273">.</span><span class="ident" id="3547274"><a href="/gostd/regexp/regexp.go.html#3571624">put</a></span><span class="op" id="3547277">(</span><span class="ident" id="3547278"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547279">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547284">return</span>&nbsp;<span class="builtintype" id="3547291">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547300">}</span>&nbsp;<span class="keyword" id="3547302">else</span>&nbsp;<span class="op" id="3547307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547311"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547312">.</span><span class="ident" id="3547313"><a href="/gostd/regexp/exec.go.html#3538850">init</a></span><span class="op" id="3547317">(</span><span class="ident" id="3547318"><a href="/gostd/regexp/exec.go.html#3547044">ncap</a></span><span class="op" id="3547322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547326">if</span>&nbsp;<span class="op" id="3547329">!</span><span class="ident" id="3547330"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547331">.</span><span class="ident" id="3547332"><a href="/gostd/regexp/exec.go.html#3539647">match</a></span><span class="op" id="3547337">(</span><span class="ident" id="3547338"><a href="/gostd/regexp/exec.go.html#3547082">i</a></span><span class="op" id="3547339">,</span>&nbsp;<span class="ident" id="3547341"><a href="/gostd/regexp/exec.go.html#3547035">pos</a></span><span class="op" id="3547344">)</span>&nbsp;<span class="op" id="3547346">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547351"><a href="/gostd/regexp/exec.go.html#3546976">re</a></span><span class="op" id="3547353">.</span><span class="ident" id="3547354"><a href="/gostd/regexp/regexp.go.html#3571624">put</a></span><span class="op" id="3547357">(</span><span class="ident" id="3547358"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547364">return</span>&nbsp;<span class="builtintype" id="3547371">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547383">if</span>&nbsp;<span class="ident" id="3547386"><a href="/gostd/regexp/exec.go.html#3547044">ncap</a></span>&nbsp;<span class="op" id="3547391">==</span>&nbsp;<span class="num" id="3547394">0</span>&nbsp;<span class="op" id="3547396">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547400"><a href="/gostd/regexp/exec.go.html#3546976">re</a></span><span class="op" id="3547402">.</span><span class="ident" id="3547403"><a href="/gostd/regexp/regexp.go.html#3571624">put</a></span><span class="op" id="3547406">(</span><span class="ident" id="3547407"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547412">return</span>&nbsp;<span class="ident" id="3547419"><a href="/gostd/regexp/exec.go.html#3546844">empty</a></span>&nbsp;<span class="comment" id="3547425">//&nbsp;empty&nbsp;but&nbsp;not&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3547447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3547450">cap</span>&nbsp;<span class="op" id="3547454">:=</span>&nbsp;<span class="builtinfunc" id="3547457">make</span><span class="op" id="3547461">(</span><span class="op" id="3547462">[</span><span class="op" id="3547463">]</span><span class="builtintype" id="3547464">int</span><span class="op" id="3547467">,</span>&nbsp;<span class="builtinfunc" id="3547469">len</span><span class="op" id="3547472">(</span><span class="ident" id="3547473"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547474">.</span><span class="ident" id="3547475"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3547483">)</span><span class="op" id="3547484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3547487">copy</span><span class="op" id="3547491">(</span><span class="builtinfunc" id="3547492"><a href="/gostd/regexp/exec.go.html#3547450">cap</a></span><span class="op" id="3547495">,</span>&nbsp;<span class="ident" id="3547497"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547498">.</span><span class="ident" id="3547499"><a href="/gostd/regexp/exec.go.html#3537935">matchcap</a></span><span class="op" id="3547507">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3547510"><a href="/gostd/regexp/exec.go.html#3546976">re</a></span><span class="op" id="3547512">.</span><span class="ident" id="3547513"><a href="/gostd/regexp/regexp.go.html#3571624">put</a></span><span class="op" id="3547516">(</span><span class="ident" id="3547517"><a href="/gostd/regexp/exec.go.html#3547063">m</a></span><span class="op" id="3547518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3547521">return</span>&nbsp;<span class="builtinfunc" id="3547528"><a href="/gostd/regexp/exec.go.html#3547450">cap</a></span><br>
<span class="lineno"></span><span class="op" id="3547532">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
