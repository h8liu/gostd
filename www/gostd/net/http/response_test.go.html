<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html" class="current">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7511024">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7511080">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7511134">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7511185">package</span>&nbsp;<span class="ident" id="7511193">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7511199">import</span>&nbsp;<span class="op" id="7511206">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511209">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511218">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511227">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511244">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511259">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511266">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511272">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511285">&#34;net/http/internal&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511306">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511317">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511328">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511338">&#34;strings&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511349">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7511359">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7511362">type</span>&nbsp;<span class="ident" id="7511367">respTest</span>&nbsp;<span class="keyword" id="7511376">struct</span>&nbsp;<span class="op" id="7511383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511386">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="7511391">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511399">Resp</span>&nbsp;<span class="ident" id="7511404">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511414">Body</span>&nbsp;<span class="builtintype" id="7511419">string</span><br>
<span class="lineno"></span><span class="op" id="7511426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7511429">func</span>&nbsp;<span class="ident" id="7511434">dummyReq</span><span class="op" id="7511442">(</span><span class="ident" id="7511443">method</span>&nbsp;<span class="builtintype" id="7511450">string</span><span class="op" id="7511456">)</span>&nbsp;<span class="op" id="7511458">*</span><span class="ident" id="7511459">Request</span>&nbsp;<span class="op" id="7511467">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7511470">return</span>&nbsp;<span class="op" id="7511477">&amp;</span><span class="ident" id="7511478">Request</span><span class="op" id="7511485">{</span><span class="ident" id="7511486">Method</span><span class="op" id="7511492">:</span>&nbsp;<span class="ident" id="7511494">method</span><span class="op" id="7511500">}</span><br>
<span class="lineno"></span><span class="op" id="7511502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7511505">func</span>&nbsp;<span class="ident" id="7511510">dummyReq11</span><span class="op" id="7511520">(</span><span class="ident" id="7511521">method</span>&nbsp;<span class="builtintype" id="7511528">string</span><span class="op" id="7511534">)</span>&nbsp;<span class="op" id="7511536">*</span><span class="ident" id="7511537">Request</span>&nbsp;<span class="op" id="7511545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7511548">return</span>&nbsp;<span class="op" id="7511555">&amp;</span><span class="ident" id="7511556">Request</span><span class="op" id="7511563">{</span><span class="ident" id="7511564">Method</span><span class="op" id="7511570">:</span>&nbsp;<span class="ident" id="7511572">method</span><span class="op" id="7511578">,</span>&nbsp;<span class="ident" id="7511580">Proto</span><span class="op" id="7511585">:</span>&nbsp;<span class="string" id="7511587">&#34;HTTP/1.1&#34;</span><span class="op" id="7511597">,</span>&nbsp;<span class="ident" id="7511599">ProtoMajor</span><span class="op" id="7511609">:</span>&nbsp;<span class="num" id="7511611">1</span><span class="op" id="7511612">,</span>&nbsp;<span class="ident" id="7511614">ProtoMinor</span><span class="op" id="7511624">:</span>&nbsp;<span class="num" id="7511626">1</span><span class="op" id="7511627">}</span><br>
<span class="lineno">35</span><span class="op" id="7511629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7511632">var</span>&nbsp;<span class="ident" id="7511636">respTests</span>&nbsp;<span class="op" id="7511646">=</span>&nbsp;<span class="op" id="7511648">[</span><span class="op" id="7511649">]</span><span class="ident" id="7511650">respTest</span><span class="op" id="7511658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7511661">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7511708">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511712">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7511734">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511739">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7511763">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511768">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7511775">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511780">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7511793">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511798">Response</span><span class="op" id="7511806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511811">Status</span><span class="op" id="7511817">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511823">&#34;200&nbsp;OK&#34;</span><span class="op" id="7511831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511836">StatusCode</span><span class="op" id="7511846">:</span>&nbsp;<span class="num" id="7511848">200</span><span class="op" id="7511851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511856">Proto</span><span class="op" id="7511861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511868">&#34;HTTP/1.0&#34;</span><span class="op" id="7511878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511883">ProtoMajor</span><span class="op" id="7511893">:</span>&nbsp;<span class="num" id="7511895">1</span><span class="op" id="7511896">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511901">ProtoMinor</span><span class="op" id="7511911">:</span>&nbsp;<span class="num" id="7511913">0</span><span class="op" id="7511914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511919">Request</span><span class="op" id="7511926">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511931">dummyReq</span><span class="op" id="7511939">(</span><span class="string" id="7511940">&#34;GET&#34;</span><span class="op" id="7511945">)</span><span class="op" id="7511946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511951">Header</span><span class="op" id="7511957">:</span>&nbsp;<span class="ident" id="7511959">Header</span><span class="op" id="7511965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511971">&#34;Connection&#34;</span><span class="op" id="7511983">:</span>&nbsp;<span class="op" id="7511985">{</span><span class="string" id="7511986">&#34;close&#34;</span><span class="op" id="7511993">}</span><span class="op" id="7511994">,</span>&nbsp;<span class="comment" id="7511996">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512021">}</span><span class="op" id="7512022">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512027">Close</span><span class="op" id="7512032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7512042">true</span><span class="op" id="7512046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512051">ContentLength</span><span class="op" id="7512064">:</span>&nbsp;<span class="op" id="7512066">-</span><span class="num" id="7512067">1</span><span class="op" id="7512068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512072">}</span><span class="op" id="7512073">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512078">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7512091">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512094">}</span><span class="op" id="7512095">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7512099">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;response&nbsp;without&nbsp;Content-Length&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7512157">//&nbsp;Connection&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512181">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512185">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7512207">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512212">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7512219">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512224">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7512237">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512242">Response</span><span class="op" id="7512250">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512255">Status</span><span class="op" id="7512261">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512270">&#34;200&nbsp;OK&#34;</span><span class="op" id="7512278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512283">StatusCode</span><span class="op" id="7512293">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512298">200</span><span class="op" id="7512301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512306">Proto</span><span class="op" id="7512311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512321">&#34;HTTP/1.1&#34;</span><span class="op" id="7512331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512336">ProtoMajor</span><span class="op" id="7512346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512351">1</span><span class="op" id="7512352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512357">ProtoMinor</span><span class="op" id="7512367">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512372">1</span><span class="op" id="7512373">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512378">Header</span><span class="op" id="7512384">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512393">Header</span><span class="op" id="7512399">{</span><span class="op" id="7512400">}</span><span class="op" id="7512401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512406">Request</span><span class="op" id="7512413">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512421">dummyReq</span><span class="op" id="7512429">(</span><span class="string" id="7512430">&#34;GET&#34;</span><span class="op" id="7512435">)</span><span class="op" id="7512436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512441">Close</span><span class="op" id="7512446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7512456">true</span><span class="op" id="7512460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512465">ContentLength</span><span class="op" id="7512478">:</span>&nbsp;<span class="op" id="7512480">-</span><span class="num" id="7512481">1</span><span class="op" id="7512482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512486">}</span><span class="op" id="7512487">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512492">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7512505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512508">}</span><span class="op" id="7512509">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7512513">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;204&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512577">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7512607">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512612">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7512619">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512624">&#34;Body&nbsp;should&nbsp;not&nbsp;be&nbsp;read!\n&#34;</span><span class="op" id="7512652">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512657">Response</span><span class="op" id="7512665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512670">Status</span><span class="op" id="7512676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512685">&#34;204&nbsp;No&nbsp;Content&#34;</span><span class="op" id="7512701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512706">StatusCode</span><span class="op" id="7512716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512721">204</span><span class="op" id="7512724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512729">Proto</span><span class="op" id="7512734">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512744">&#34;HTTP/1.1&#34;</span><span class="op" id="7512754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512759">ProtoMajor</span><span class="op" id="7512769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512774">1</span><span class="op" id="7512775">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512780">ProtoMinor</span><span class="op" id="7512790">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512795">1</span><span class="op" id="7512796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512801">Header</span><span class="op" id="7512807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512816">Header</span><span class="op" id="7512822">{</span><span class="op" id="7512823">}</span><span class="op" id="7512824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512829">Request</span><span class="op" id="7512836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512844">dummyReq</span><span class="op" id="7512852">(</span><span class="string" id="7512853">&#34;GET&#34;</span><span class="op" id="7512858">)</span><span class="op" id="7512859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512864">Close</span><span class="op" id="7512869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7512879">false</span><span class="op" id="7512884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512889">ContentLength</span><span class="op" id="7512902">:</span>&nbsp;<span class="num" id="7512904">0</span><span class="op" id="7512905">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512909">}</span><span class="op" id="7512910">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512915">&#34;&#34;</span><span class="op" id="7512917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512920">}</span><span class="op" id="7512921">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7512925">//&nbsp;Unchunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7512969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512973">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7512995">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513000">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7513025">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513030">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7513054">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513059">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7513066">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513071">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7513084">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513089">Response</span><span class="op" id="7513097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513102">Status</span><span class="op" id="7513108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513114">&#34;200&nbsp;OK&#34;</span><span class="op" id="7513122">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513127">StatusCode</span><span class="op" id="7513137">:</span>&nbsp;<span class="num" id="7513139">200</span><span class="op" id="7513142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513147">Proto</span><span class="op" id="7513152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513159">&#34;HTTP/1.0&#34;</span><span class="op" id="7513169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513174">ProtoMajor</span><span class="op" id="7513184">:</span>&nbsp;<span class="num" id="7513186">1</span><span class="op" id="7513187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513192">ProtoMinor</span><span class="op" id="7513202">:</span>&nbsp;<span class="num" id="7513204">0</span><span class="op" id="7513205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513210">Request</span><span class="op" id="7513217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513222">dummyReq</span><span class="op" id="7513230">(</span><span class="string" id="7513231">&#34;GET&#34;</span><span class="op" id="7513236">)</span><span class="op" id="7513237">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513242">Header</span><span class="op" id="7513248">:</span>&nbsp;<span class="ident" id="7513250">Header</span><span class="op" id="7513256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513262">&#34;Connection&#34;</span><span class="op" id="7513274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513280">{</span><span class="string" id="7513281">&#34;close&#34;</span><span class="op" id="7513288">}</span><span class="op" id="7513289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513295">&#34;Content-Length&#34;</span><span class="op" id="7513311">:</span>&nbsp;<span class="op" id="7513313">{</span><span class="string" id="7513314">&#34;10&#34;</span><span class="op" id="7513318">}</span><span class="op" id="7513319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513324">}</span><span class="op" id="7513325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513330">Close</span><span class="op" id="7513335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7513345">true</span><span class="op" id="7513349">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513354">ContentLength</span><span class="op" id="7513367">:</span>&nbsp;<span class="num" id="7513369">10</span><span class="op" id="7513371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513375">}</span><span class="op" id="7513376">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513381">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7513394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513397">}</span><span class="op" id="7513398">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7513402">//&nbsp;Chunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513451">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7513473">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513478">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7513511">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513516">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7513523">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513528">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7513537">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513542">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7513560">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513565">&#34;09\r\n&#34;</span>&nbsp;<span class="op" id="7513574">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513579">&#34;continued\r\n&#34;</span>&nbsp;<span class="op" id="7513595">+</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513600">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7513608">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513613">&#34;\r\n&#34;</span><span class="op" id="7513619">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513624">Response</span><span class="op" id="7513632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513637">Status</span><span class="op" id="7513643">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513655">&#34;200&nbsp;OK&#34;</span><span class="op" id="7513663">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513668">StatusCode</span><span class="op" id="7513678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7513686">200</span><span class="op" id="7513689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513694">Proto</span><span class="op" id="7513699">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513712">&#34;HTTP/1.1&#34;</span><span class="op" id="7513722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513727">ProtoMajor</span><span class="op" id="7513737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7513745">1</span><span class="op" id="7513746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513751">ProtoMinor</span><span class="op" id="7513761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7513769">1</span><span class="op" id="7513770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513775">Request</span><span class="op" id="7513782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513793">dummyReq</span><span class="op" id="7513801">(</span><span class="string" id="7513802">&#34;GET&#34;</span><span class="op" id="7513807">)</span><span class="op" id="7513808">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513813">Header</span><span class="op" id="7513819">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513831">Header</span><span class="op" id="7513837">{</span><span class="op" id="7513838">}</span><span class="op" id="7513839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513844">Close</span><span class="op" id="7513849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7513862">false</span><span class="op" id="7513867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513872">ContentLength</span><span class="op" id="7513885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513890">-</span><span class="num" id="7513891">1</span><span class="op" id="7513892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7513897">TransferEncoding</span><span class="op" id="7513913">:</span>&nbsp;<span class="op" id="7513915">[</span><span class="op" id="7513916">]</span><span class="builtintype" id="7513917">string</span><span class="op" id="7513923">{</span><span class="string" id="7513924">&#34;chunked&#34;</span><span class="op" id="7513933">}</span><span class="op" id="7513934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513938">}</span><span class="op" id="7513939">,</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7513944">&#34;Body&nbsp;here\ncontinued&#34;</span><span class="op" id="7513966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7513969">}</span><span class="op" id="7513970">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7513974">//&nbsp;Chunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514020">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7514042">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514047">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7514080">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514085">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7514110">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514115">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7514122">+</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514127">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7514136">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514141">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7514159">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514164">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7514172">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514177">&#34;\r\n&#34;</span><span class="op" id="7514183">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514188">Response</span><span class="op" id="7514196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514201">Status</span><span class="op" id="7514207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514219">&#34;200&nbsp;OK&#34;</span><span class="op" id="7514227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514232">StatusCode</span><span class="op" id="7514242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7514250">200</span><span class="op" id="7514253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514258">Proto</span><span class="op" id="7514263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514276">&#34;HTTP/1.1&#34;</span><span class="op" id="7514286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514291">ProtoMajor</span><span class="op" id="7514301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7514309">1</span><span class="op" id="7514310">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514315">ProtoMinor</span><span class="op" id="7514325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7514333">1</span><span class="op" id="7514334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514339">Request</span><span class="op" id="7514346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514357">dummyReq</span><span class="op" id="7514365">(</span><span class="string" id="7514366">&#34;GET&#34;</span><span class="op" id="7514371">)</span><span class="op" id="7514372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514377">Header</span><span class="op" id="7514383">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514395">Header</span><span class="op" id="7514401">{</span><span class="op" id="7514402">}</span><span class="op" id="7514403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514408">Close</span><span class="op" id="7514413">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7514426">false</span><span class="op" id="7514431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514436">ContentLength</span><span class="op" id="7514449">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514454">-</span><span class="num" id="7514455">1</span><span class="op" id="7514456">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514461">TransferEncoding</span><span class="op" id="7514477">:</span>&nbsp;<span class="op" id="7514479">[</span><span class="op" id="7514480">]</span><span class="builtintype" id="7514481">string</span><span class="op" id="7514487">{</span><span class="string" id="7514488">&#34;chunked&#34;</span><span class="op" id="7514497">}</span><span class="op" id="7514498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514502">}</span><span class="op" id="7514503">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514508">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7514521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514524">}</span><span class="op" id="7514525">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7514529">//&nbsp;Chunked&nbsp;response&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514584">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7514606">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514611">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7514644">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514649">&#34;\r\n&#34;</span><span class="op" id="7514655">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514660">Response</span><span class="op" id="7514668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514673">Status</span><span class="op" id="7514679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514691">&#34;200&nbsp;OK&#34;</span><span class="op" id="7514699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514704">StatusCode</span><span class="op" id="7514714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7514722">200</span><span class="op" id="7514725">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514730">Proto</span><span class="op" id="7514735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514748">&#34;HTTP/1.1&#34;</span><span class="op" id="7514758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514763">ProtoMajor</span><span class="op" id="7514773">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7514781">1</span><span class="op" id="7514782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514787">ProtoMinor</span><span class="op" id="7514797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7514805">1</span><span class="op" id="7514806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514811">Request</span><span class="op" id="7514818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514829">dummyReq</span><span class="op" id="7514837">(</span><span class="string" id="7514838">&#34;HEAD&#34;</span><span class="op" id="7514844">)</span><span class="op" id="7514845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514850">Header</span><span class="op" id="7514856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514868">Header</span><span class="op" id="7514874">{</span><span class="op" id="7514875">}</span><span class="op" id="7514876">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514881">TransferEncoding</span><span class="op" id="7514897">:</span>&nbsp;<span class="op" id="7514899">[</span><span class="op" id="7514900">]</span><span class="builtintype" id="7514901">string</span><span class="op" id="7514907">{</span><span class="string" id="7514908">&#34;chunked&#34;</span><span class="op" id="7514917">}</span><span class="op" id="7514918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514923">Close</span><span class="op" id="7514928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7514941">false</span><span class="op" id="7514946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7514951">ContentLength</span><span class="op" id="7514964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514969">-</span><span class="num" id="7514970">1</span><span class="op" id="7514971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514975">}</span><span class="op" id="7514976">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7514981">&#34;&#34;</span><span class="op" id="7514983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7514986">}</span><span class="op" id="7514987">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7514991">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515040">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515044">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7515066">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515071">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7515097">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515102">&#34;\r\n&#34;</span><span class="op" id="7515108">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515113">Response</span><span class="op" id="7515121">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515126">Status</span><span class="op" id="7515132">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515144">&#34;200&nbsp;OK&#34;</span><span class="op" id="7515152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515157">StatusCode</span><span class="op" id="7515167">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515175">200</span><span class="op" id="7515178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515183">Proto</span><span class="op" id="7515188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515201">&#34;HTTP/1.0&#34;</span><span class="op" id="7515211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515216">ProtoMajor</span><span class="op" id="7515226">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515234">1</span><span class="op" id="7515235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515240">ProtoMinor</span><span class="op" id="7515250">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515258">0</span><span class="op" id="7515259">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515264">Request</span><span class="op" id="7515271">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515282">dummyReq</span><span class="op" id="7515290">(</span><span class="string" id="7515291">&#34;HEAD&#34;</span><span class="op" id="7515297">)</span><span class="op" id="7515298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515303">Header</span><span class="op" id="7515309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515321">Header</span><span class="op" id="7515327">{</span><span class="string" id="7515328">&#34;Content-Length&#34;</span><span class="op" id="7515344">:</span>&nbsp;<span class="op" id="7515346">{</span><span class="string" id="7515347">&#34;256&#34;</span><span class="op" id="7515352">}</span><span class="op" id="7515353">}</span><span class="op" id="7515354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515359">TransferEncoding</span><span class="op" id="7515375">:</span>&nbsp;<span class="builtintype" id="7515377">nil</span><span class="op" id="7515380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515385">Close</span><span class="op" id="7515390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7515403">true</span><span class="op" id="7515407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515412">ContentLength</span><span class="op" id="7515425">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515430">256</span><span class="op" id="7515433">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515437">}</span><span class="op" id="7515438">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515443">&#34;&#34;</span><span class="op" id="7515445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515448">}</span><span class="op" id="7515449">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7515453">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request&nbsp;with&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515520">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7515542">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515547">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7515573">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515578">&#34;\r\n&#34;</span><span class="op" id="7515584">,</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515589">Response</span><span class="op" id="7515597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515602">Status</span><span class="op" id="7515608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515620">&#34;200&nbsp;OK&#34;</span><span class="op" id="7515628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515633">StatusCode</span><span class="op" id="7515643">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515651">200</span><span class="op" id="7515654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515659">Proto</span><span class="op" id="7515664">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515677">&#34;HTTP/1.1&#34;</span><span class="op" id="7515687">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515692">ProtoMajor</span><span class="op" id="7515702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515710">1</span><span class="op" id="7515711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515716">ProtoMinor</span><span class="op" id="7515726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515734">1</span><span class="op" id="7515735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515740">Request</span><span class="op" id="7515747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515758">dummyReq</span><span class="op" id="7515766">(</span><span class="string" id="7515767">&#34;HEAD&#34;</span><span class="op" id="7515773">)</span><span class="op" id="7515774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515779">Header</span><span class="op" id="7515785">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515797">Header</span><span class="op" id="7515803">{</span><span class="string" id="7515804">&#34;Content-Length&#34;</span><span class="op" id="7515820">:</span>&nbsp;<span class="op" id="7515822">{</span><span class="string" id="7515823">&#34;256&#34;</span><span class="op" id="7515828">}</span><span class="op" id="7515829">}</span><span class="op" id="7515830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515835">TransferEncoding</span><span class="op" id="7515851">:</span>&nbsp;<span class="builtintype" id="7515853">nil</span><span class="op" id="7515856">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515861">Close</span><span class="op" id="7515866">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7515879">false</span><span class="op" id="7515884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7515889">ContentLength</span><span class="op" id="7515902">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7515907">256</span><span class="op" id="7515910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515914">}</span><span class="op" id="7515915">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515920">&#34;&#34;</span><span class="op" id="7515922">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515925">}</span><span class="op" id="7515926">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7515930">//&nbsp;No&nbsp;Content-Length&nbsp;or&nbsp;Chunked&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7515993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7515997">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7516019">+</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516024">&#34;\r\n&#34;</span><span class="op" id="7516030">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516035">Response</span><span class="op" id="7516043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516048">Status</span><span class="op" id="7516054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516066">&#34;200&nbsp;OK&#34;</span><span class="op" id="7516074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516079">StatusCode</span><span class="op" id="7516089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7516097">200</span><span class="op" id="7516100">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516105">Proto</span><span class="op" id="7516110">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516123">&#34;HTTP/1.0&#34;</span><span class="op" id="7516133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516138">ProtoMajor</span><span class="op" id="7516148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7516156">1</span><span class="op" id="7516157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516162">ProtoMinor</span><span class="op" id="7516172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7516180">0</span><span class="op" id="7516181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516186">Request</span><span class="op" id="7516193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516204">dummyReq</span><span class="op" id="7516212">(</span><span class="string" id="7516213">&#34;HEAD&#34;</span><span class="op" id="7516219">)</span><span class="op" id="7516220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516225">Header</span><span class="op" id="7516231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516243">Header</span><span class="op" id="7516249">{</span><span class="op" id="7516250">}</span><span class="op" id="7516251">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516256">TransferEncoding</span><span class="op" id="7516272">:</span>&nbsp;<span class="builtintype" id="7516274">nil</span><span class="op" id="7516277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516282">Close</span><span class="op" id="7516287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7516300">true</span><span class="op" id="7516304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516309">ContentLength</span><span class="op" id="7516322">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516327">-</span><span class="num" id="7516328">1</span><span class="op" id="7516329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516333">}</span><span class="op" id="7516334">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516339">&#34;&#34;</span><span class="op" id="7516341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516344">}</span><span class="op" id="7516345">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7516349">//&nbsp;explicit&nbsp;Content-Length&nbsp;of&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516383">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516387">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7516409">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516414">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7516438">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516443">&#34;\r\n&#34;</span><span class="op" id="7516449">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516454">Response</span><span class="op" id="7516462">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516467">Status</span><span class="op" id="7516473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516479">&#34;200&nbsp;OK&#34;</span><span class="op" id="7516487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516492">StatusCode</span><span class="op" id="7516502">:</span>&nbsp;<span class="num" id="7516504">200</span><span class="op" id="7516507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516512">Proto</span><span class="op" id="7516517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516524">&#34;HTTP/1.1&#34;</span><span class="op" id="7516534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516539">ProtoMajor</span><span class="op" id="7516549">:</span>&nbsp;<span class="num" id="7516551">1</span><span class="op" id="7516552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516557">ProtoMinor</span><span class="op" id="7516567">:</span>&nbsp;<span class="num" id="7516569">1</span><span class="op" id="7516570">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516575">Request</span><span class="op" id="7516582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516587">dummyReq</span><span class="op" id="7516595">(</span><span class="string" id="7516596">&#34;GET&#34;</span><span class="op" id="7516601">)</span><span class="op" id="7516602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516607">Header</span><span class="op" id="7516613">:</span>&nbsp;<span class="ident" id="7516615">Header</span><span class="op" id="7516621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516627">&#34;Content-Length&#34;</span><span class="op" id="7516643">:</span>&nbsp;<span class="op" id="7516645">{</span><span class="string" id="7516646">&#34;0&#34;</span><span class="op" id="7516649">}</span><span class="op" id="7516650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516655">}</span><span class="op" id="7516656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516661">Close</span><span class="op" id="7516666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7516676">false</span><span class="op" id="7516681">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516686">ContentLength</span><span class="op" id="7516699">:</span>&nbsp;<span class="num" id="7516701">0</span><span class="op" id="7516702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516706">}</span><span class="op" id="7516707">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516712">&#34;&#34;</span><span class="op" id="7516714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516717">}</span><span class="op" id="7516718">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7516722">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;but&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7516783">//&nbsp;(permitted&nbsp;by&nbsp;RFC&nbsp;2616)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7516811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516815">&#34;HTTP/1.0&nbsp;303&nbsp;\r\n\r\n&#34;</span><span class="op" id="7516838">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516842">Response</span><span class="op" id="7516850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516855">Status</span><span class="op" id="7516861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516870">&#34;303&nbsp;&#34;</span><span class="op" id="7516876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516881">StatusCode</span><span class="op" id="7516891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7516896">303</span><span class="op" id="7516899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516904">Proto</span><span class="op" id="7516909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7516919">&#34;HTTP/1.0&#34;</span><span class="op" id="7516929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516934">ProtoMajor</span><span class="op" id="7516944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7516949">1</span><span class="op" id="7516950">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516955">ProtoMinor</span><span class="op" id="7516965">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7516970">0</span><span class="op" id="7516971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516976">Request</span><span class="op" id="7516983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7516991">dummyReq</span><span class="op" id="7516999">(</span><span class="string" id="7517000">&#34;GET&#34;</span><span class="op" id="7517005">)</span><span class="op" id="7517006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517011">Header</span><span class="op" id="7517017">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517026">Header</span><span class="op" id="7517032">{</span><span class="op" id="7517033">}</span><span class="op" id="7517034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517039">Close</span><span class="op" id="7517044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7517054">true</span><span class="op" id="7517058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517063">ContentLength</span><span class="op" id="7517076">:</span>&nbsp;<span class="op" id="7517078">-</span><span class="num" id="7517079">1</span><span class="op" id="7517080">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517084">}</span><span class="op" id="7517085">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517090">&#34;&#34;</span><span class="op" id="7517092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517095">}</span><span class="op" id="7517096">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7517100">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;and&nbsp;no&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7517164">//&nbsp;(not&nbsp;permitted&nbsp;by&nbsp;RFC&nbsp;2616,&nbsp;but&nbsp;we&#39;ll&nbsp;accept&nbsp;it&nbsp;anyway)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517228">&#34;HTTP/1.0&nbsp;303\r\n\r\n&#34;</span><span class="op" id="7517250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517254">Response</span><span class="op" id="7517262">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517267">Status</span><span class="op" id="7517273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517282">&#34;303&nbsp;&#34;</span><span class="op" id="7517288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517293">StatusCode</span><span class="op" id="7517303">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7517308">303</span><span class="op" id="7517311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517316">Proto</span><span class="op" id="7517321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517331">&#34;HTTP/1.0&#34;</span><span class="op" id="7517341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517346">ProtoMajor</span><span class="op" id="7517356">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7517361">1</span><span class="op" id="7517362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517367">ProtoMinor</span><span class="op" id="7517377">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7517382">0</span><span class="op" id="7517383">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517388">Request</span><span class="op" id="7517395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517403">dummyReq</span><span class="op" id="7517411">(</span><span class="string" id="7517412">&#34;GET&#34;</span><span class="op" id="7517417">)</span><span class="op" id="7517418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517423">Header</span><span class="op" id="7517429">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517438">Header</span><span class="op" id="7517444">{</span><span class="op" id="7517445">}</span><span class="op" id="7517446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517451">Close</span><span class="op" id="7517456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7517466">true</span><span class="op" id="7517470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517475">ContentLength</span><span class="op" id="7517488">:</span>&nbsp;<span class="op" id="7517490">-</span><span class="num" id="7517491">1</span><span class="op" id="7517492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517496">}</span><span class="op" id="7517497">,</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517502">&#34;&#34;</span><span class="op" id="7517504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517507">}</span><span class="op" id="7517508">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7517512">//&nbsp;golang.org/issue/4767:&nbsp;don&#39;t&nbsp;special-case&nbsp;multipart/byteranges&nbsp;responses</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517593">`HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content<br>
<span class="lineno"></span>Connection:&nbsp;close<br>
<span class="lineno"></span>Content-Type:&nbsp;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef<br>
<span class="lineno"></span><br>
<span class="lineno">340</span>some&nbsp;body`</span><span class="op" id="7517714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517718">Response</span><span class="op" id="7517726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517731">Status</span><span class="op" id="7517737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517743">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7517764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517769">StatusCode</span><span class="op" id="7517779">:</span>&nbsp;<span class="num" id="7517781">206</span><span class="op" id="7517784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517789">Proto</span><span class="op" id="7517794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517801">&#34;HTTP/1.1&#34;</span><span class="op" id="7517811">,</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517816">ProtoMajor</span><span class="op" id="7517826">:</span>&nbsp;<span class="num" id="7517828">1</span><span class="op" id="7517829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517834">ProtoMinor</span><span class="op" id="7517844">:</span>&nbsp;<span class="num" id="7517846">1</span><span class="op" id="7517847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517852">Request</span><span class="op" id="7517859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517864">dummyReq</span><span class="op" id="7517872">(</span><span class="string" id="7517873">&#34;GET&#34;</span><span class="op" id="7517878">)</span><span class="op" id="7517879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517884">Header</span><span class="op" id="7517890">:</span>&nbsp;<span class="ident" id="7517892">Header</span><span class="op" id="7517898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517904">&#34;Content-Type&#34;</span><span class="op" id="7517918">:</span>&nbsp;<span class="op" id="7517920">[</span><span class="op" id="7517921">]</span><span class="builtintype" id="7517922">string</span><span class="op" id="7517928">{</span><span class="string" id="7517929">&#34;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef&#34;</span><span class="op" id="7517978">}</span><span class="op" id="7517979">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7517984">}</span><span class="op" id="7517985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517990">Close</span><span class="op" id="7517995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7518005">true</span><span class="op" id="7518009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518014">ContentLength</span><span class="op" id="7518027">:</span>&nbsp;<span class="op" id="7518029">-</span><span class="num" id="7518030">1</span><span class="op" id="7518031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518035">}</span><span class="op" id="7518036">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518041">&#34;some&nbsp;body&#34;</span><span class="op" id="7518052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518055">}</span><span class="op" id="7518056">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7518060">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length,&nbsp;Request&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518122">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518126">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7518148">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518153">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7518177">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518182">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7518189">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518194">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7518207">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518212">Response</span><span class="op" id="7518220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518225">Status</span><span class="op" id="7518231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518237">&#34;200&nbsp;OK&#34;</span><span class="op" id="7518245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518250">StatusCode</span><span class="op" id="7518260">:</span>&nbsp;<span class="num" id="7518262">200</span><span class="op" id="7518265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518270">Proto</span><span class="op" id="7518275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518282">&#34;HTTP/1.0&#34;</span><span class="op" id="7518292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518297">ProtoMajor</span><span class="op" id="7518307">:</span>&nbsp;<span class="num" id="7518309">1</span><span class="op" id="7518310">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518315">ProtoMinor</span><span class="op" id="7518325">:</span>&nbsp;<span class="num" id="7518327">0</span><span class="op" id="7518328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518333">Header</span><span class="op" id="7518339">:</span>&nbsp;<span class="ident" id="7518341">Header</span><span class="op" id="7518347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518353">&#34;Connection&#34;</span><span class="op" id="7518365">:</span>&nbsp;<span class="op" id="7518367">{</span><span class="string" id="7518368">&#34;close&#34;</span><span class="op" id="7518375">}</span><span class="op" id="7518376">,</span>&nbsp;<span class="comment" id="7518378">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518403">}</span><span class="op" id="7518404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518409">Close</span><span class="op" id="7518414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7518424">true</span><span class="op" id="7518428">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518433">ContentLength</span><span class="op" id="7518446">:</span>&nbsp;<span class="op" id="7518448">-</span><span class="num" id="7518449">1</span><span class="op" id="7518450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518454">}</span><span class="op" id="7518455">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518460">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7518473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518476">}</span><span class="op" id="7518477">,</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7518481">//&nbsp;206&nbsp;Partial&nbsp;Content.&nbsp;golang.org/issue/8923</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7518528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518532">&#34;HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7518567">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518572">&#34;Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8\r\n&#34;</span>&nbsp;<span class="op" id="7518618">+</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518623">&#34;Accept-Ranges:&nbsp;bytes\r\n&#34;</span>&nbsp;<span class="op" id="7518650">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518655">&#34;Content-Range:&nbsp;bytes&nbsp;0-5/1862\r\n&#34;</span>&nbsp;<span class="op" id="7518691">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518696">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7518724">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518729">&#34;foobar&#34;</span><span class="op" id="7518737">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518742">Response</span><span class="op" id="7518750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518755">Status</span><span class="op" id="7518761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518767">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7518788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518793">StatusCode</span><span class="op" id="7518803">:</span>&nbsp;<span class="num" id="7518805">206</span><span class="op" id="7518808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518813">Proto</span><span class="op" id="7518818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518825">&#34;HTTP/1.1&#34;</span><span class="op" id="7518835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518840">ProtoMajor</span><span class="op" id="7518850">:</span>&nbsp;<span class="num" id="7518852">1</span><span class="op" id="7518853">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518858">ProtoMinor</span><span class="op" id="7518868">:</span>&nbsp;<span class="num" id="7518870">1</span><span class="op" id="7518871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518876">Request</span><span class="op" id="7518883">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518888">dummyReq</span><span class="op" id="7518896">(</span><span class="string" id="7518897">&#34;GET&#34;</span><span class="op" id="7518902">)</span><span class="op" id="7518903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7518908">Header</span><span class="op" id="7518914">:</span>&nbsp;<span class="ident" id="7518916">Header</span><span class="op" id="7518922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518928">&#34;Accept-Ranges&#34;</span><span class="op" id="7518943">:</span>&nbsp;&nbsp;<span class="op" id="7518946">[</span><span class="op" id="7518947">]</span><span class="builtintype" id="7518948">string</span><span class="op" id="7518954">{</span><span class="string" id="7518955">&#34;bytes&#34;</span><span class="op" id="7518962">}</span><span class="op" id="7518963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7518969">&#34;Content-Length&#34;</span><span class="op" id="7518985">:</span>&nbsp;<span class="op" id="7518987">[</span><span class="op" id="7518988">]</span><span class="builtintype" id="7518989">string</span><span class="op" id="7518995">{</span><span class="string" id="7518996">&#34;6&#34;</span><span class="op" id="7518999">}</span><span class="op" id="7519000">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7519006">&#34;Content-Type&#34;</span><span class="op" id="7519020">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7519024">[</span><span class="op" id="7519025">]</span><span class="builtintype" id="7519026">string</span><span class="op" id="7519032">{</span><span class="string" id="7519033">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="7519060">}</span><span class="op" id="7519061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7519067">&#34;Content-Range&#34;</span><span class="op" id="7519082">:</span>&nbsp;&nbsp;<span class="op" id="7519085">[</span><span class="op" id="7519086">]</span><span class="builtintype" id="7519087">string</span><span class="op" id="7519093">{</span><span class="string" id="7519094">&#34;bytes&nbsp;0-5/1862&#34;</span><span class="op" id="7519110">}</span><span class="op" id="7519111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519116">}</span><span class="op" id="7519117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519122">ContentLength</span><span class="op" id="7519135">:</span>&nbsp;<span class="num" id="7519137">6</span><span class="op" id="7519138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519142">}</span><span class="op" id="7519143">,</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7519148">&#34;foobar&#34;</span><span class="op" id="7519156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519159">}</span><span class="op" id="7519160">,</span><br>
<span class="lineno"></span><span class="op" id="7519162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7519165">func</span>&nbsp;<span class="ident" id="7519170">TestReadResponse</span><span class="op" id="7519186">(</span><span class="ident" id="7519187">t</span>&nbsp;<span class="op" id="7519189">*</span><span class="ident" id="7519190">testing</span><span class="op" id="7519197">.</span><span class="ident" id="7519198">T</span><span class="op" id="7519199">)</span>&nbsp;<span class="op" id="7519201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519204">for</span>&nbsp;<span class="ident" id="7519208">i</span><span class="op" id="7519209">,</span>&nbsp;<span class="ident" id="7519211">tt</span>&nbsp;<span class="op" id="7519214">:=</span>&nbsp;<span class="keyword" id="7519217">range</span>&nbsp;<span class="ident" id="7519223">respTests</span>&nbsp;<span class="op" id="7519233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519237">resp</span><span class="op" id="7519241">,</span>&nbsp;<span class="ident" id="7519243">err</span>&nbsp;<span class="op" id="7519247">:=</span>&nbsp;<span class="ident" id="7519250">ReadResponse</span><span class="op" id="7519262">(</span><span class="ident" id="7519263">bufio</span><span class="op" id="7519268">.</span><span class="ident" id="7519269">NewReader</span><span class="op" id="7519278">(</span><span class="ident" id="7519279">strings</span><span class="op" id="7519286">.</span><span class="ident" id="7519287">NewReader</span><span class="op" id="7519296">(</span><span class="ident" id="7519297">tt</span><span class="op" id="7519299">.</span><span class="ident" id="7519300">Raw</span><span class="op" id="7519303">)</span><span class="op" id="7519304">)</span><span class="op" id="7519305">,</span>&nbsp;<span class="ident" id="7519307">tt</span><span class="op" id="7519309">.</span><span class="ident" id="7519310">Resp</span><span class="op" id="7519314">.</span><span class="ident" id="7519315">Request</span><span class="op" id="7519322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519326">if</span>&nbsp;<span class="ident" id="7519329">err</span>&nbsp;<span class="op" id="7519333">!=</span>&nbsp;<span class="builtintype" id="7519336">nil</span>&nbsp;<span class="op" id="7519340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519345">t</span><span class="op" id="7519346">.</span><span class="ident" id="7519347">Errorf</span><span class="op" id="7519353">(</span><span class="string" id="7519354">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7519363">,</span>&nbsp;<span class="ident" id="7519365">i</span><span class="op" id="7519366">,</span>&nbsp;<span class="ident" id="7519368">err</span><span class="op" id="7519371">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519376">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519391">rbody</span>&nbsp;<span class="op" id="7519397">:=</span>&nbsp;<span class="ident" id="7519400">resp</span><span class="op" id="7519404">.</span><span class="ident" id="7519405">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519412">resp</span><span class="op" id="7519416">.</span><span class="ident" id="7519417">Body</span>&nbsp;<span class="op" id="7519422">=</span>&nbsp;<span class="builtintype" id="7519424">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519430">diff</span><span class="op" id="7519434">(</span><span class="ident" id="7519435">t</span><span class="op" id="7519436">,</span>&nbsp;<span class="ident" id="7519438">fmt</span><span class="op" id="7519441">.</span><span class="ident" id="7519442">Sprintf</span><span class="op" id="7519449">(</span><span class="string" id="7519450">&#34;#%d&nbsp;Response&#34;</span><span class="op" id="7519464">,</span>&nbsp;<span class="ident" id="7519466">i</span><span class="op" id="7519467">)</span><span class="op" id="7519468">,</span>&nbsp;<span class="ident" id="7519470">resp</span><span class="op" id="7519474">,</span>&nbsp;<span class="op" id="7519476">&amp;</span><span class="ident" id="7519477">tt</span><span class="op" id="7519479">.</span><span class="ident" id="7519480">Resp</span><span class="op" id="7519484">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519488">var</span>&nbsp;<span class="ident" id="7519492">bout</span>&nbsp;<span class="ident" id="7519497">bytes</span><span class="op" id="7519502">.</span><span class="ident" id="7519503">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519512">if</span>&nbsp;<span class="ident" id="7519515">rbody</span>&nbsp;<span class="op" id="7519521">!=</span>&nbsp;<span class="builtintype" id="7519524">nil</span>&nbsp;<span class="op" id="7519528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519533">_</span><span class="op" id="7519534">,</span>&nbsp;<span class="ident" id="7519536">err</span>&nbsp;<span class="op" id="7519540">=</span>&nbsp;<span class="ident" id="7519542">io</span><span class="op" id="7519544">.</span><span class="ident" id="7519545">Copy</span><span class="op" id="7519549">(</span><span class="op" id="7519550">&amp;</span><span class="ident" id="7519551">bout</span><span class="op" id="7519555">,</span>&nbsp;<span class="ident" id="7519557">rbody</span><span class="op" id="7519562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519567">if</span>&nbsp;<span class="ident" id="7519570">err</span>&nbsp;<span class="op" id="7519574">!=</span>&nbsp;<span class="builtintype" id="7519577">nil</span>&nbsp;<span class="op" id="7519581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519587">t</span><span class="op" id="7519588">.</span><span class="ident" id="7519589">Errorf</span><span class="op" id="7519595">(</span><span class="string" id="7519596">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7519605">,</span>&nbsp;<span class="ident" id="7519607">i</span><span class="op" id="7519608">,</span>&nbsp;<span class="ident" id="7519610">err</span><span class="op" id="7519613">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519619">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519636">rbody</span><span class="op" id="7519641">.</span><span class="ident" id="7519642">Close</span><span class="op" id="7519647">(</span><span class="op" id="7519648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519656">body</span>&nbsp;<span class="op" id="7519661">:=</span>&nbsp;<span class="ident" id="7519664">bout</span><span class="op" id="7519668">.</span><span class="ident" id="7519669">String</span><span class="op" id="7519675">(</span><span class="op" id="7519676">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519680">if</span>&nbsp;<span class="ident" id="7519683">body</span>&nbsp;<span class="op" id="7519688">!=</span>&nbsp;<span class="ident" id="7519691">tt</span><span class="op" id="7519693">.</span><span class="ident" id="7519694">Body</span>&nbsp;<span class="op" id="7519699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519704">t</span><span class="op" id="7519705">.</span><span class="ident" id="7519706">Errorf</span><span class="op" id="7519712">(</span><span class="string" id="7519713">&#34;#%d:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7519737">,</span>&nbsp;<span class="ident" id="7519739">i</span><span class="op" id="7519740">,</span>&nbsp;<span class="ident" id="7519742">body</span><span class="op" id="7519746">,</span>&nbsp;<span class="ident" id="7519748">tt</span><span class="op" id="7519750">.</span><span class="ident" id="7519751">Body</span><span class="op" id="7519755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519762">}</span><br>
<span class="lineno"></span><span class="op" id="7519764">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="7519767">func</span>&nbsp;<span class="ident" id="7519772">TestWriteResponse</span><span class="op" id="7519789">(</span><span class="ident" id="7519790">t</span>&nbsp;<span class="op" id="7519792">*</span><span class="ident" id="7519793">testing</span><span class="op" id="7519800">.</span><span class="ident" id="7519801">T</span><span class="op" id="7519802">)</span>&nbsp;<span class="op" id="7519804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519807">for</span>&nbsp;<span class="ident" id="7519811">i</span><span class="op" id="7519812">,</span>&nbsp;<span class="ident" id="7519814">tt</span>&nbsp;<span class="op" id="7519817">:=</span>&nbsp;<span class="keyword" id="7519820">range</span>&nbsp;<span class="ident" id="7519826">respTests</span>&nbsp;<span class="op" id="7519836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519840">resp</span><span class="op" id="7519844">,</span>&nbsp;<span class="ident" id="7519846">err</span>&nbsp;<span class="op" id="7519850">:=</span>&nbsp;<span class="ident" id="7519853">ReadResponse</span><span class="op" id="7519865">(</span><span class="ident" id="7519866">bufio</span><span class="op" id="7519871">.</span><span class="ident" id="7519872">NewReader</span><span class="op" id="7519881">(</span><span class="ident" id="7519882">strings</span><span class="op" id="7519889">.</span><span class="ident" id="7519890">NewReader</span><span class="op" id="7519899">(</span><span class="ident" id="7519900">tt</span><span class="op" id="7519902">.</span><span class="ident" id="7519903">Raw</span><span class="op" id="7519906">)</span><span class="op" id="7519907">)</span><span class="op" id="7519908">,</span>&nbsp;<span class="ident" id="7519910">tt</span><span class="op" id="7519912">.</span><span class="ident" id="7519913">Resp</span><span class="op" id="7519917">.</span><span class="ident" id="7519918">Request</span><span class="op" id="7519925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519929">if</span>&nbsp;<span class="ident" id="7519932">err</span>&nbsp;<span class="op" id="7519936">!=</span>&nbsp;<span class="builtintype" id="7519939">nil</span>&nbsp;<span class="op" id="7519943">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519948">t</span><span class="op" id="7519949">.</span><span class="ident" id="7519950">Errorf</span><span class="op" id="7519956">(</span><span class="string" id="7519957">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7519966">,</span>&nbsp;<span class="ident" id="7519968">i</span><span class="op" id="7519969">,</span>&nbsp;<span class="ident" id="7519971">err</span><span class="op" id="7519974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7519979">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7519990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7519994">err</span>&nbsp;<span class="op" id="7519998">=</span>&nbsp;<span class="ident" id="7520000">resp</span><span class="op" id="7520004">.</span><span class="ident" id="7520005">Write</span><span class="op" id="7520010">(</span><span class="ident" id="7520011">ioutil</span><span class="op" id="7520017">.</span><span class="ident" id="7520018">Discard</span><span class="op" id="7520025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520029">if</span>&nbsp;<span class="ident" id="7520032">err</span>&nbsp;<span class="op" id="7520036">!=</span>&nbsp;<span class="builtintype" id="7520039">nil</span>&nbsp;<span class="op" id="7520043">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520048">t</span><span class="op" id="7520049">.</span><span class="ident" id="7520050">Errorf</span><span class="op" id="7520056">(</span><span class="string" id="7520057">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7520066">,</span>&nbsp;<span class="ident" id="7520068">i</span><span class="op" id="7520069">,</span>&nbsp;<span class="ident" id="7520071">err</span><span class="op" id="7520074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520079">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520093">}</span><br>
<span class="lineno"></span><span class="op" id="7520095">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7520098">var</span>&nbsp;<span class="ident" id="7520102">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7520133">=</span>&nbsp;<span class="op" id="7520135">[</span><span class="op" id="7520136">]</span><span class="keyword" id="7520137">struct</span>&nbsp;<span class="op" id="7520144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520147">chunked</span><span class="op" id="7520154">,</span>&nbsp;<span class="ident" id="7520156">compressed</span>&nbsp;<span class="builtintype" id="7520167">bool</span><br>
<span class="lineno"></span><span class="op" id="7520172">}</span><span class="op" id="7520173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520176">{</span><span class="builtintype" id="7520177">false</span><span class="op" id="7520182">,</span>&nbsp;<span class="builtintype" id="7520184">false</span><span class="op" id="7520189">}</span><span class="op" id="7520190">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520193">{</span><span class="builtintype" id="7520194">true</span><span class="op" id="7520198">,</span>&nbsp;<span class="builtintype" id="7520200">false</span><span class="op" id="7520205">}</span><span class="op" id="7520206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520209">{</span><span class="builtintype" id="7520210">true</span><span class="op" id="7520214">,</span>&nbsp;<span class="builtintype" id="7520216">true</span><span class="op" id="7520220">}</span><span class="op" id="7520221">,</span><br>
<span class="lineno"></span><span class="op" id="7520223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7520226">//&nbsp;TestReadResponseCloseInMiddle&nbsp;tests&nbsp;that&nbsp;closing&nbsp;a&nbsp;body&nbsp;after</span><br>
<span class="lineno">460</span><span class="comment" id="7520291">//&nbsp;reading&nbsp;only&nbsp;part&nbsp;of&nbsp;its&nbsp;contents&nbsp;advances&nbsp;the&nbsp;read&nbsp;to&nbsp;the&nbsp;end&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="7520360">//&nbsp;the&nbsp;request,&nbsp;right&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="7520409">func</span>&nbsp;<span class="ident" id="7520414">TestReadResponseCloseInMiddle</span><span class="op" id="7520443">(</span><span class="ident" id="7520444">t</span>&nbsp;<span class="op" id="7520446">*</span><span class="ident" id="7520447">testing</span><span class="op" id="7520454">.</span><span class="ident" id="7520455">T</span><span class="op" id="7520456">)</span>&nbsp;<span class="op" id="7520458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520461">for</span>&nbsp;<span class="ident" id="7520465">_</span><span class="op" id="7520466">,</span>&nbsp;<span class="ident" id="7520468">test</span>&nbsp;<span class="op" id="7520473">:=</span>&nbsp;<span class="keyword" id="7520476">range</span>&nbsp;<span class="ident" id="7520482">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7520513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520517">fatalf</span>&nbsp;<span class="op" id="7520524">:=</span>&nbsp;<span class="keyword" id="7520527">func</span><span class="op" id="7520531">(</span><span class="ident" id="7520532">format</span>&nbsp;<span class="builtintype" id="7520539">string</span><span class="op" id="7520545">,</span>&nbsp;<span class="ident" id="7520547">args</span>&nbsp;<span class="op" id="7520552">...</span><span class="keyword" id="7520555">interface</span><span class="op" id="7520564">{</span><span class="op" id="7520565">}</span><span class="op" id="7520566">)</span>&nbsp;<span class="op" id="7520568">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520573">args</span>&nbsp;<span class="op" id="7520578">=</span>&nbsp;<span class="builtinfunc" id="7520580">append</span><span class="op" id="7520586">(</span><span class="op" id="7520587">[</span><span class="op" id="7520588">]</span><span class="keyword" id="7520589">interface</span><span class="op" id="7520598">{</span><span class="op" id="7520599">}</span><span class="op" id="7520600">{</span><span class="ident" id="7520601">test</span><span class="op" id="7520605">.</span><span class="ident" id="7520606">chunked</span><span class="op" id="7520613">,</span>&nbsp;<span class="ident" id="7520615">test</span><span class="op" id="7520619">.</span><span class="ident" id="7520620">compressed</span><span class="op" id="7520630">}</span><span class="op" id="7520631">,</span>&nbsp;<span class="ident" id="7520633">args</span><span class="op" id="7520637">...</span><span class="op" id="7520640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520645">t</span><span class="op" id="7520646">.</span><span class="ident" id="7520647">Fatalf</span><span class="op" id="7520653">(</span><span class="string" id="7520654">&#34;on&nbsp;test&nbsp;chunked=%v,&nbsp;compressed=%v:&nbsp;&#34;</span><span class="op" id="7520691">+</span><span class="ident" id="7520692">format</span><span class="op" id="7520698">,</span>&nbsp;<span class="ident" id="7520700">args</span><span class="op" id="7520704">...</span><span class="op" id="7520707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520715">checkErr</span>&nbsp;<span class="op" id="7520724">:=</span>&nbsp;<span class="keyword" id="7520727">func</span><span class="op" id="7520731">(</span><span class="ident" id="7520732">err</span>&nbsp;<span class="builtintype" id="7520736">error</span><span class="op" id="7520741">,</span>&nbsp;<span class="ident" id="7520743">msg</span>&nbsp;<span class="builtintype" id="7520747">string</span><span class="op" id="7520753">)</span>&nbsp;<span class="op" id="7520755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520760">if</span>&nbsp;<span class="ident" id="7520763">err</span>&nbsp;<span class="op" id="7520767">==</span>&nbsp;<span class="builtintype" id="7520770">nil</span>&nbsp;<span class="op" id="7520774">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520780">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520795">fatalf</span><span class="op" id="7520801">(</span><span class="ident" id="7520802">msg</span><span class="op" id="7520805">+</span><span class="string" id="7520806">&#34;:&nbsp;%v&#34;</span><span class="op" id="7520812">,</span>&nbsp;<span class="ident" id="7520814">err</span><span class="op" id="7520817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520825">var</span>&nbsp;<span class="ident" id="7520829">buf</span>&nbsp;<span class="ident" id="7520833">bytes</span><span class="op" id="7520838">.</span><span class="ident" id="7520839">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520848">buf</span><span class="op" id="7520851">.</span><span class="ident" id="7520852">WriteString</span><span class="op" id="7520863">(</span><span class="string" id="7520864">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="7520885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7520889">if</span>&nbsp;<span class="ident" id="7520892">test</span><span class="op" id="7520896">.</span><span class="ident" id="7520897">chunked</span>&nbsp;<span class="op" id="7520905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520910">buf</span><span class="op" id="7520913">.</span><span class="ident" id="7520914">WriteString</span><span class="op" id="7520925">(</span><span class="string" id="7520926">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="7520958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7520962">}</span>&nbsp;<span class="keyword" id="7520964">else</span>&nbsp;<span class="op" id="7520969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7520974">buf</span><span class="op" id="7520977">.</span><span class="ident" id="7520978">WriteString</span><span class="op" id="7520989">(</span><span class="string" id="7520990">&#34;Content-Length:&nbsp;1000000\r\n&#34;</span><span class="op" id="7521019">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521027">var</span>&nbsp;<span class="ident" id="7521031">wr</span>&nbsp;<span class="ident" id="7521034">io</span><span class="op" id="7521036">.</span><span class="ident" id="7521037">Writer</span>&nbsp;<span class="op" id="7521044">=</span>&nbsp;<span class="op" id="7521046">&amp;</span><span class="ident" id="7521047">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521053">if</span>&nbsp;<span class="ident" id="7521056">test</span><span class="op" id="7521060">.</span><span class="ident" id="7521061">chunked</span>&nbsp;<span class="op" id="7521069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521074">wr</span>&nbsp;<span class="op" id="7521077">=</span>&nbsp;<span class="ident" id="7521079">internal</span><span class="op" id="7521087">.</span><span class="ident" id="7521088">NewChunkedWriter</span><span class="op" id="7521104">(</span><span class="ident" id="7521105">wr</span><span class="op" id="7521107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521111">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521115">if</span>&nbsp;<span class="ident" id="7521118">test</span><span class="op" id="7521122">.</span><span class="ident" id="7521123">compressed</span>&nbsp;<span class="op" id="7521134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521139">buf</span><span class="op" id="7521142">.</span><span class="ident" id="7521143">WriteString</span><span class="op" id="7521154">(</span><span class="string" id="7521155">&#34;Content-Encoding:&nbsp;gzip\r\n&#34;</span><span class="op" id="7521183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521188">wr</span>&nbsp;<span class="op" id="7521191">=</span>&nbsp;<span class="ident" id="7521193">gzip</span><span class="op" id="7521197">.</span><span class="ident" id="7521198">NewWriter</span><span class="op" id="7521207">(</span><span class="ident" id="7521208">wr</span><span class="op" id="7521210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521218">buf</span><span class="op" id="7521221">.</span><span class="ident" id="7521222">WriteString</span><span class="op" id="7521233">(</span><span class="string" id="7521234">&#34;\r\n&#34;</span><span class="op" id="7521240">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521245">chunk</span>&nbsp;<span class="op" id="7521251">:=</span>&nbsp;<span class="ident" id="7521254">bytes</span><span class="op" id="7521259">.</span><span class="ident" id="7521260">Repeat</span><span class="op" id="7521266">(</span><span class="op" id="7521267">[</span><span class="op" id="7521268">]</span><span class="builtintype" id="7521269">byte</span><span class="op" id="7521273">{</span><span class="string" id="7521274">&#39;x&#39;</span><span class="op" id="7521277">}</span><span class="op" id="7521278">,</span>&nbsp;<span class="num" id="7521280">1000</span><span class="op" id="7521284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521288">for</span>&nbsp;<span class="ident" id="7521292">i</span>&nbsp;<span class="op" id="7521294">:=</span>&nbsp;<span class="num" id="7521297">0</span><span class="op" id="7521298">;</span>&nbsp;<span class="ident" id="7521300">i</span>&nbsp;<span class="op" id="7521302">&lt;</span>&nbsp;<span class="num" id="7521304">1000</span><span class="op" id="7521308">;</span>&nbsp;<span class="ident" id="7521310">i</span><span class="op" id="7521311">++</span>&nbsp;<span class="op" id="7521314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521319">if</span>&nbsp;<span class="ident" id="7521322">test</span><span class="op" id="7521326">.</span><span class="ident" id="7521327">compressed</span>&nbsp;<span class="op" id="7521338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7521344">//&nbsp;Otherwise&nbsp;this&nbsp;compresses&nbsp;too&nbsp;well.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521387">_</span><span class="op" id="7521388">,</span>&nbsp;<span class="ident" id="7521390">err</span>&nbsp;<span class="op" id="7521394">:=</span>&nbsp;<span class="ident" id="7521397">io</span><span class="op" id="7521399">.</span><span class="ident" id="7521400">ReadFull</span><span class="op" id="7521408">(</span><span class="ident" id="7521409">rand</span><span class="op" id="7521413">.</span><span class="ident" id="7521414">Reader</span><span class="op" id="7521420">,</span>&nbsp;<span class="ident" id="7521422">chunk</span><span class="op" id="7521427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521433">checkErr</span><span class="op" id="7521441">(</span><span class="ident" id="7521442">err</span><span class="op" id="7521445">,</span>&nbsp;<span class="string" id="7521447">&#34;rand.Reader&nbsp;ReadFull&#34;</span><span class="op" id="7521469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521479">wr</span><span class="op" id="7521481">.</span><span class="ident" id="7521482">Write</span><span class="op" id="7521487">(</span><span class="ident" id="7521488">chunk</span><span class="op" id="7521493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521497">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521501">if</span>&nbsp;<span class="ident" id="7521504">test</span><span class="op" id="7521508">.</span><span class="ident" id="7521509">compressed</span>&nbsp;<span class="op" id="7521520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521525">err</span>&nbsp;<span class="op" id="7521529">:=</span>&nbsp;<span class="ident" id="7521532">wr</span><span class="op" id="7521534">.</span><span class="op" id="7521535">(</span><span class="op" id="7521536">*</span><span class="ident" id="7521537">gzip</span><span class="op" id="7521541">.</span><span class="ident" id="7521542">Writer</span><span class="op" id="7521548">)</span><span class="op" id="7521549">.</span><span class="ident" id="7521550">Close</span><span class="op" id="7521555">(</span><span class="op" id="7521556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521561">checkErr</span><span class="op" id="7521569">(</span><span class="ident" id="7521570">err</span><span class="op" id="7521573">,</span>&nbsp;<span class="string" id="7521575">&#34;compressor&nbsp;close&#34;</span><span class="op" id="7521593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521601">if</span>&nbsp;<span class="ident" id="7521604">test</span><span class="op" id="7521608">.</span><span class="ident" id="7521609">chunked</span>&nbsp;<span class="op" id="7521617">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521622">buf</span><span class="op" id="7521625">.</span><span class="ident" id="7521626">WriteString</span><span class="op" id="7521637">(</span><span class="string" id="7521638">&#34;0\r\n\r\n&#34;</span><span class="op" id="7521649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521657">buf</span><span class="op" id="7521660">.</span><span class="ident" id="7521661">WriteString</span><span class="op" id="7521672">(</span><span class="string" id="7521673">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7521692">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521697">bufr</span>&nbsp;<span class="op" id="7521702">:=</span>&nbsp;<span class="ident" id="7521705">bufio</span><span class="op" id="7521710">.</span><span class="ident" id="7521711">NewReader</span><span class="op" id="7521720">(</span><span class="op" id="7521721">&amp;</span><span class="ident" id="7521722">buf</span><span class="op" id="7521725">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521729">resp</span><span class="op" id="7521733">,</span>&nbsp;<span class="ident" id="7521735">err</span>&nbsp;<span class="op" id="7521739">:=</span>&nbsp;<span class="ident" id="7521742">ReadResponse</span><span class="op" id="7521754">(</span><span class="ident" id="7521755">bufr</span><span class="op" id="7521759">,</span>&nbsp;<span class="ident" id="7521761">dummyReq</span><span class="op" id="7521769">(</span><span class="string" id="7521770">&#34;GET&#34;</span><span class="op" id="7521775">)</span><span class="op" id="7521776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521780">checkErr</span><span class="op" id="7521788">(</span><span class="ident" id="7521789">err</span><span class="op" id="7521792">,</span>&nbsp;<span class="string" id="7521794">&#34;ReadResponse&#34;</span><span class="op" id="7521808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521812">expectedLength</span>&nbsp;<span class="op" id="7521827">:=</span>&nbsp;<span class="builtintype" id="7521830">int64</span><span class="op" id="7521835">(</span><span class="op" id="7521836">-</span><span class="num" id="7521837">1</span><span class="op" id="7521838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521842">if</span>&nbsp;<span class="op" id="7521845">!</span><span class="ident" id="7521846">test</span><span class="op" id="7521850">.</span><span class="ident" id="7521851">chunked</span>&nbsp;<span class="op" id="7521859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521864">expectedLength</span>&nbsp;<span class="op" id="7521879">=</span>&nbsp;<span class="num" id="7521881">1000000</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7521891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7521895">if</span>&nbsp;<span class="ident" id="7521898">resp</span><span class="op" id="7521902">.</span><span class="ident" id="7521903">ContentLength</span>&nbsp;<span class="op" id="7521917">!=</span>&nbsp;<span class="ident" id="7521920">expectedLength</span>&nbsp;<span class="op" id="7521935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7521940">fatalf</span><span class="op" id="7521946">(</span><span class="string" id="7521947">&#34;expected&nbsp;response&nbsp;length&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7521984">,</span>&nbsp;<span class="ident" id="7521986">expectedLength</span><span class="op" id="7522000">,</span>&nbsp;<span class="ident" id="7522002">resp</span><span class="op" id="7522006">.</span><span class="ident" id="7522007">ContentLength</span><span class="op" id="7522020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7522028">if</span>&nbsp;<span class="ident" id="7522031">resp</span><span class="op" id="7522035">.</span><span class="ident" id="7522036">Body</span>&nbsp;<span class="op" id="7522041">==</span>&nbsp;<span class="builtintype" id="7522044">nil</span>&nbsp;<span class="op" id="7522048">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522053">fatalf</span><span class="op" id="7522059">(</span><span class="string" id="7522060">&#34;nil&nbsp;body&#34;</span><span class="op" id="7522070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7522078">if</span>&nbsp;<span class="ident" id="7522081">test</span><span class="op" id="7522085">.</span><span class="ident" id="7522086">compressed</span>&nbsp;<span class="op" id="7522097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522102">gzReader</span><span class="op" id="7522110">,</span>&nbsp;<span class="ident" id="7522112">err</span>&nbsp;<span class="op" id="7522116">:=</span>&nbsp;<span class="ident" id="7522119">gzip</span><span class="op" id="7522123">.</span><span class="ident" id="7522124">NewReader</span><span class="op" id="7522133">(</span><span class="ident" id="7522134">resp</span><span class="op" id="7522138">.</span><span class="ident" id="7522139">Body</span><span class="op" id="7522143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522148">checkErr</span><span class="op" id="7522156">(</span><span class="ident" id="7522157">err</span><span class="op" id="7522160">,</span>&nbsp;<span class="string" id="7522162">&#34;gzip.NewReader&#34;</span><span class="op" id="7522178">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522183">resp</span><span class="op" id="7522187">.</span><span class="ident" id="7522188">Body</span>&nbsp;<span class="op" id="7522193">=</span>&nbsp;<span class="op" id="7522195">&amp;</span><span class="ident" id="7522196">readerAndCloser</span><span class="op" id="7522211">{</span><span class="ident" id="7522212">gzReader</span><span class="op" id="7522220">,</span>&nbsp;<span class="ident" id="7522222">resp</span><span class="op" id="7522226">.</span><span class="ident" id="7522227">Body</span><span class="op" id="7522231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522240">rbuf</span>&nbsp;<span class="op" id="7522245">:=</span>&nbsp;<span class="builtinfunc" id="7522248">make</span><span class="op" id="7522252">(</span><span class="op" id="7522253">[</span><span class="op" id="7522254">]</span><span class="builtintype" id="7522255">byte</span><span class="op" id="7522259">,</span>&nbsp;<span class="num" id="7522261">2500</span><span class="op" id="7522265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522269">n</span><span class="op" id="7522270">,</span>&nbsp;<span class="ident" id="7522272">err</span>&nbsp;<span class="op" id="7522276">:=</span>&nbsp;<span class="ident" id="7522279">io</span><span class="op" id="7522281">.</span><span class="ident" id="7522282">ReadFull</span><span class="op" id="7522290">(</span><span class="ident" id="7522291">resp</span><span class="op" id="7522295">.</span><span class="ident" id="7522296">Body</span><span class="op" id="7522300">,</span>&nbsp;<span class="ident" id="7522302">rbuf</span><span class="op" id="7522306">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522310">checkErr</span><span class="op" id="7522318">(</span><span class="ident" id="7522319">err</span><span class="op" id="7522322">,</span>&nbsp;<span class="string" id="7522324">&#34;2500&nbsp;byte&nbsp;ReadFull&#34;</span><span class="op" id="7522344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7522348">if</span>&nbsp;<span class="ident" id="7522351">n</span>&nbsp;<span class="op" id="7522353">!=</span>&nbsp;<span class="num" id="7522356">2500</span>&nbsp;<span class="op" id="7522361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522366">fatalf</span><span class="op" id="7522372">(</span><span class="string" id="7522373">&#34;ReadFull&nbsp;only&nbsp;read&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="7522402">,</span>&nbsp;<span class="ident" id="7522404">n</span><span class="op" id="7522405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7522413">if</span>&nbsp;<span class="ident" id="7522416">test</span><span class="op" id="7522420">.</span><span class="ident" id="7522421">compressed</span>&nbsp;<span class="op" id="7522432">==</span>&nbsp;<span class="builtintype" id="7522435">false</span>&nbsp;<span class="op" id="7522441">&amp;&amp;</span>&nbsp;<span class="op" id="7522444">!</span><span class="ident" id="7522445">bytes</span><span class="op" id="7522450">.</span><span class="ident" id="7522451">Equal</span><span class="op" id="7522456">(</span><span class="ident" id="7522457">bytes</span><span class="op" id="7522462">.</span><span class="ident" id="7522463">Repeat</span><span class="op" id="7522469">(</span><span class="op" id="7522470">[</span><span class="op" id="7522471">]</span><span class="builtintype" id="7522472">byte</span><span class="op" id="7522476">{</span><span class="string" id="7522477">&#39;x&#39;</span><span class="op" id="7522480">}</span><span class="op" id="7522481">,</span>&nbsp;<span class="num" id="7522483">2500</span><span class="op" id="7522487">)</span><span class="op" id="7522488">,</span>&nbsp;<span class="ident" id="7522490">rbuf</span><span class="op" id="7522494">)</span>&nbsp;<span class="op" id="7522496">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522501">fatalf</span><span class="op" id="7522507">(</span><span class="string" id="7522508">&#34;ReadFull&nbsp;didn&#39;t&nbsp;read&nbsp;2500&nbsp;&#39;x&#39;;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7522547">,</span>&nbsp;<span class="builtintype" id="7522549">string</span><span class="op" id="7522555">(</span><span class="ident" id="7522556">rbuf</span><span class="op" id="7522560">)</span><span class="op" id="7522561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522569">resp</span><span class="op" id="7522573">.</span><span class="ident" id="7522574">Body</span><span class="op" id="7522578">.</span><span class="ident" id="7522579">Close</span><span class="op" id="7522584">(</span><span class="op" id="7522585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522590">rest</span><span class="op" id="7522594">,</span>&nbsp;<span class="ident" id="7522596">err</span>&nbsp;<span class="op" id="7522600">:=</span>&nbsp;<span class="ident" id="7522603">ioutil</span><span class="op" id="7522609">.</span><span class="ident" id="7522610">ReadAll</span><span class="op" id="7522617">(</span><span class="ident" id="7522618">bufr</span><span class="op" id="7522622">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522626">checkErr</span><span class="op" id="7522634">(</span><span class="ident" id="7522635">err</span><span class="op" id="7522638">,</span>&nbsp;<span class="string" id="7522640">&#34;ReadAll&nbsp;on&nbsp;remainder&#34;</span><span class="op" id="7522662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7522666">if</span>&nbsp;<span class="ident" id="7522669">e</span><span class="op" id="7522670">,</span>&nbsp;<span class="ident" id="7522672">g</span>&nbsp;<span class="op" id="7522674">:=</span>&nbsp;<span class="string" id="7522677">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7522696">,</span>&nbsp;<span class="builtintype" id="7522698">string</span><span class="op" id="7522704">(</span><span class="ident" id="7522705">rest</span><span class="op" id="7522709">)</span><span class="op" id="7522710">;</span>&nbsp;<span class="ident" id="7522712">e</span>&nbsp;<span class="op" id="7522714">!=</span>&nbsp;<span class="ident" id="7522717">g</span>&nbsp;<span class="op" id="7522719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522724">g</span>&nbsp;<span class="op" id="7522726">=</span>&nbsp;<span class="ident" id="7522728">regexp</span><span class="op" id="7522734">.</span><span class="ident" id="7522735">MustCompile</span><span class="op" id="7522746">(</span><span class="string" id="7522747">`(xx+)`</span><span class="op" id="7522754">)</span><span class="op" id="7522755">.</span><span class="ident" id="7522756">ReplaceAllStringFunc</span><span class="op" id="7522776">(</span><span class="ident" id="7522777">g</span><span class="op" id="7522778">,</span>&nbsp;<span class="keyword" id="7522780">func</span><span class="op" id="7522784">(</span><span class="ident" id="7522785">match</span>&nbsp;<span class="builtintype" id="7522791">string</span><span class="op" id="7522797">)</span>&nbsp;<span class="builtintype" id="7522799">string</span>&nbsp;<span class="op" id="7522806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7522812">return</span>&nbsp;<span class="ident" id="7522819">fmt</span><span class="op" id="7522822">.</span><span class="ident" id="7522823">Sprintf</span><span class="op" id="7522830">(</span><span class="string" id="7522831">&#34;x(repeated&nbsp;x%d)&#34;</span><span class="op" id="7522848">,</span>&nbsp;<span class="builtinfunc" id="7522850">len</span><span class="op" id="7522853">(</span><span class="ident" id="7522854">match</span><span class="op" id="7522859">)</span><span class="op" id="7522860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522865">}</span><span class="op" id="7522866">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522871">fatalf</span><span class="op" id="7522877">(</span><span class="string" id="7522878">&#34;remainder&nbsp;=&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7522907">,</span>&nbsp;<span class="ident" id="7522909">g</span><span class="op" id="7522910">,</span>&nbsp;<span class="ident" id="7522912">e</span><span class="op" id="7522913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7522920">}</span><br>
<span class="lineno"></span><span class="op" id="7522922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="keyword" id="7522925">func</span>&nbsp;<span class="ident" id="7522930">diff</span><span class="op" id="7522934">(</span><span class="ident" id="7522935">t</span>&nbsp;<span class="op" id="7522937">*</span><span class="ident" id="7522938">testing</span><span class="op" id="7522945">.</span><span class="ident" id="7522946">T</span><span class="op" id="7522947">,</span>&nbsp;<span class="ident" id="7522949">prefix</span>&nbsp;<span class="builtintype" id="7522956">string</span><span class="op" id="7522962">,</span>&nbsp;<span class="ident" id="7522964">have</span><span class="op" id="7522968">,</span>&nbsp;<span class="ident" id="7522970">want</span>&nbsp;<span class="keyword" id="7522975">interface</span><span class="op" id="7522984">{</span><span class="op" id="7522985">}</span><span class="op" id="7522986">)</span>&nbsp;<span class="op" id="7522988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7522991">hv</span>&nbsp;<span class="op" id="7522994">:=</span>&nbsp;<span class="ident" id="7522997">reflect</span><span class="op" id="7523004">.</span><span class="ident" id="7523005">ValueOf</span><span class="op" id="7523012">(</span><span class="ident" id="7523013">have</span><span class="op" id="7523017">)</span><span class="op" id="7523018">.</span><span class="ident" id="7523019">Elem</span><span class="op" id="7523023">(</span><span class="op" id="7523024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523027">wv</span>&nbsp;<span class="op" id="7523030">:=</span>&nbsp;<span class="ident" id="7523033">reflect</span><span class="op" id="7523040">.</span><span class="ident" id="7523041">ValueOf</span><span class="op" id="7523048">(</span><span class="ident" id="7523049">want</span><span class="op" id="7523053">)</span><span class="op" id="7523054">.</span><span class="ident" id="7523055">Elem</span><span class="op" id="7523059">(</span><span class="op" id="7523060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7523063">if</span>&nbsp;<span class="ident" id="7523066">hv</span><span class="op" id="7523068">.</span><span class="ident" id="7523069">Type</span><span class="op" id="7523073">(</span><span class="op" id="7523074">)</span>&nbsp;<span class="op" id="7523076">!=</span>&nbsp;<span class="ident" id="7523079">wv</span><span class="op" id="7523081">.</span><span class="ident" id="7523082">Type</span><span class="op" id="7523086">(</span><span class="op" id="7523087">)</span>&nbsp;<span class="op" id="7523089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523093">t</span><span class="op" id="7523094">.</span><span class="ident" id="7523095">Errorf</span><span class="op" id="7523101">(</span><span class="string" id="7523102">&#34;%s:&nbsp;type&nbsp;mismatch&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7523132">,</span>&nbsp;<span class="ident" id="7523134">prefix</span><span class="op" id="7523140">,</span>&nbsp;<span class="ident" id="7523142">hv</span><span class="op" id="7523144">.</span><span class="ident" id="7523145">Type</span><span class="op" id="7523149">(</span><span class="op" id="7523150">)</span><span class="op" id="7523151">,</span>&nbsp;<span class="ident" id="7523153">wv</span><span class="op" id="7523155">.</span><span class="ident" id="7523156">Type</span><span class="op" id="7523160">(</span><span class="op" id="7523161">)</span><span class="op" id="7523162">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7523165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7523168">for</span>&nbsp;<span class="ident" id="7523172">i</span>&nbsp;<span class="op" id="7523174">:=</span>&nbsp;<span class="num" id="7523177">0</span><span class="op" id="7523178">;</span>&nbsp;<span class="ident" id="7523180">i</span>&nbsp;<span class="op" id="7523182">&lt;</span>&nbsp;<span class="ident" id="7523184">hv</span><span class="op" id="7523186">.</span><span class="ident" id="7523187">NumField</span><span class="op" id="7523195">(</span><span class="op" id="7523196">)</span><span class="op" id="7523197">;</span>&nbsp;<span class="ident" id="7523199">i</span><span class="op" id="7523200">++</span>&nbsp;<span class="op" id="7523203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523207">hf</span>&nbsp;<span class="op" id="7523210">:=</span>&nbsp;<span class="ident" id="7523213">hv</span><span class="op" id="7523215">.</span><span class="ident" id="7523216">Field</span><span class="op" id="7523221">(</span><span class="ident" id="7523222">i</span><span class="op" id="7523223">)</span><span class="op" id="7523224">.</span><span class="ident" id="7523225">Interface</span><span class="op" id="7523234">(</span><span class="op" id="7523235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523239">wf</span>&nbsp;<span class="op" id="7523242">:=</span>&nbsp;<span class="ident" id="7523245">wv</span><span class="op" id="7523247">.</span><span class="ident" id="7523248">Field</span><span class="op" id="7523253">(</span><span class="ident" id="7523254">i</span><span class="op" id="7523255">)</span><span class="op" id="7523256">.</span><span class="ident" id="7523257">Interface</span><span class="op" id="7523266">(</span><span class="op" id="7523267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7523271">if</span>&nbsp;<span class="op" id="7523274">!</span><span class="ident" id="7523275">reflect</span><span class="op" id="7523282">.</span><span class="ident" id="7523283">DeepEqual</span><span class="op" id="7523292">(</span><span class="ident" id="7523293">hf</span><span class="op" id="7523295">,</span>&nbsp;<span class="ident" id="7523297">wf</span><span class="op" id="7523299">)</span>&nbsp;<span class="op" id="7523301">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523306">t</span><span class="op" id="7523307">.</span><span class="ident" id="7523308">Errorf</span><span class="op" id="7523314">(</span><span class="string" id="7523315">&#34;%s:&nbsp;%s&nbsp;=&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7523336">,</span>&nbsp;<span class="ident" id="7523338">prefix</span><span class="op" id="7523344">,</span>&nbsp;<span class="ident" id="7523346">hv</span><span class="op" id="7523348">.</span><span class="ident" id="7523349">Type</span><span class="op" id="7523353">(</span><span class="op" id="7523354">)</span><span class="op" id="7523355">.</span><span class="ident" id="7523356">Field</span><span class="op" id="7523361">(</span><span class="ident" id="7523362">i</span><span class="op" id="7523363">)</span><span class="op" id="7523364">.</span><span class="ident" id="7523365">Name</span><span class="op" id="7523369">,</span>&nbsp;<span class="ident" id="7523371">hf</span><span class="op" id="7523373">,</span>&nbsp;<span class="ident" id="7523375">wf</span><span class="op" id="7523377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7523381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7523384">}</span><br>
<span class="lineno"></span><span class="op" id="7523386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7523389">type</span>&nbsp;<span class="ident" id="7523394">responseLocationTest</span>&nbsp;<span class="keyword" id="7523415">struct</span>&nbsp;<span class="op" id="7523422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523425">location</span>&nbsp;<span class="builtintype" id="7523434">string</span>&nbsp;<span class="comment" id="7523441">//&nbsp;Response&#39;s&nbsp;Location&nbsp;header&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523478">requrl</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7523487">string</span>&nbsp;<span class="comment" id="7523494">//&nbsp;Response.Request.URL&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523525">want</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7523534">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523542">wantErr</span>&nbsp;&nbsp;<span class="builtintype" id="7523551">error</span><br>
<span class="lineno">570</span><span class="op" id="7523557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7523560">var</span>&nbsp;<span class="ident" id="7523564">responseLocationTests</span>&nbsp;<span class="op" id="7523586">=</span>&nbsp;<span class="op" id="7523588">[</span><span class="op" id="7523589">]</span><span class="ident" id="7523590">responseLocationTest</span><span class="op" id="7523610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7523613">{</span><span class="string" id="7523614">&#34;/foo&#34;</span><span class="op" id="7523620">,</span>&nbsp;<span class="string" id="7523622">&#34;http://bar.com/baz&#34;</span><span class="op" id="7523642">,</span>&nbsp;<span class="string" id="7523644">&#34;http://bar.com/foo&#34;</span><span class="op" id="7523664">,</span>&nbsp;<span class="builtintype" id="7523666">nil</span><span class="op" id="7523669">}</span><span class="op" id="7523670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7523673">{</span><span class="string" id="7523674">&#34;http://foo.com/&#34;</span><span class="op" id="7523691">,</span>&nbsp;<span class="string" id="7523693">&#34;http://bar.com/baz&#34;</span><span class="op" id="7523713">,</span>&nbsp;<span class="string" id="7523715">&#34;http://foo.com/&#34;</span><span class="op" id="7523732">,</span>&nbsp;<span class="builtintype" id="7523734">nil</span><span class="op" id="7523737">}</span><span class="op" id="7523738">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7523741">{</span><span class="string" id="7523742">&#34;&#34;</span><span class="op" id="7523744">,</span>&nbsp;<span class="string" id="7523746">&#34;http://bar.com/baz&#34;</span><span class="op" id="7523766">,</span>&nbsp;<span class="string" id="7523768">&#34;&#34;</span><span class="op" id="7523770">,</span>&nbsp;<span class="ident" id="7523772">ErrNoLocation</span><span class="op" id="7523785">}</span><span class="op" id="7523786">,</span><br>
<span class="lineno"></span><span class="op" id="7523788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7523791">func</span>&nbsp;<span class="ident" id="7523796">TestLocationResponse</span><span class="op" id="7523816">(</span><span class="ident" id="7523817">t</span>&nbsp;<span class="op" id="7523819">*</span><span class="ident" id="7523820">testing</span><span class="op" id="7523827">.</span><span class="ident" id="7523828">T</span><span class="op" id="7523829">)</span>&nbsp;<span class="op" id="7523831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7523834">for</span>&nbsp;<span class="ident" id="7523838">i</span><span class="op" id="7523839">,</span>&nbsp;<span class="ident" id="7523841">tt</span>&nbsp;<span class="op" id="7523844">:=</span>&nbsp;<span class="keyword" id="7523847">range</span>&nbsp;<span class="ident" id="7523853">responseLocationTests</span>&nbsp;<span class="op" id="7523875">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523879">res</span>&nbsp;<span class="op" id="7523883">:=</span>&nbsp;<span class="builtinfunc" id="7523886">new</span><span class="op" id="7523889">(</span><span class="ident" id="7523890">Response</span><span class="op" id="7523898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523902">res</span><span class="op" id="7523905">.</span><span class="ident" id="7523906">Header</span>&nbsp;<span class="op" id="7523913">=</span>&nbsp;<span class="builtinfunc" id="7523915">make</span><span class="op" id="7523919">(</span><span class="ident" id="7523920">Header</span><span class="op" id="7523926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523930">res</span><span class="op" id="7523933">.</span><span class="ident" id="7523934">Header</span><span class="op" id="7523940">.</span><span class="ident" id="7523941">Set</span><span class="op" id="7523944">(</span><span class="string" id="7523945">&#34;Location&#34;</span><span class="op" id="7523955">,</span>&nbsp;<span class="ident" id="7523957">tt</span><span class="op" id="7523959">.</span><span class="ident" id="7523960">location</span><span class="op" id="7523968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7523972">if</span>&nbsp;<span class="ident" id="7523975">tt</span><span class="op" id="7523977">.</span><span class="ident" id="7523978">requrl</span>&nbsp;<span class="op" id="7523985">!=</span>&nbsp;<span class="string" id="7523988">&#34;&#34;</span>&nbsp;<span class="op" id="7523991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7523996">res</span><span class="op" id="7523999">.</span><span class="ident" id="7524000">Request</span>&nbsp;<span class="op" id="7524008">=</span>&nbsp;<span class="op" id="7524010">&amp;</span><span class="ident" id="7524011">Request</span><span class="op" id="7524018">{</span><span class="op" id="7524019">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524024">var</span>&nbsp;<span class="ident" id="7524028">err</span>&nbsp;<span class="builtintype" id="7524032">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524041">res</span><span class="op" id="7524044">.</span><span class="ident" id="7524045">Request</span><span class="op" id="7524052">.</span><span class="ident" id="7524053">URL</span><span class="op" id="7524056">,</span>&nbsp;<span class="ident" id="7524058">err</span>&nbsp;<span class="op" id="7524062">=</span>&nbsp;<span class="ident" id="7524064">url</span><span class="op" id="7524067">.</span><span class="ident" id="7524068">Parse</span><span class="op" id="7524073">(</span><span class="ident" id="7524074">tt</span><span class="op" id="7524076">.</span><span class="ident" id="7524077">requrl</span><span class="op" id="7524083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524088">if</span>&nbsp;<span class="ident" id="7524091">err</span>&nbsp;<span class="op" id="7524095">!=</span>&nbsp;<span class="builtintype" id="7524098">nil</span>&nbsp;<span class="op" id="7524102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524108">t</span><span class="op" id="7524109">.</span><span class="ident" id="7524110">Fatalf</span><span class="op" id="7524116">(</span><span class="string" id="7524117">&#34;bad&nbsp;test&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7524138">,</span>&nbsp;<span class="ident" id="7524140">tt</span><span class="op" id="7524142">.</span><span class="ident" id="7524143">requrl</span><span class="op" id="7524149">,</span>&nbsp;<span class="ident" id="7524151">err</span><span class="op" id="7524154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524159">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524168">got</span><span class="op" id="7524171">,</span>&nbsp;<span class="ident" id="7524173">err</span>&nbsp;<span class="op" id="7524177">:=</span>&nbsp;<span class="ident" id="7524180">res</span><span class="op" id="7524183">.</span><span class="ident" id="7524184">Location</span><span class="op" id="7524192">(</span><span class="op" id="7524193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524197">if</span>&nbsp;<span class="ident" id="7524200">tt</span><span class="op" id="7524202">.</span><span class="ident" id="7524203">wantErr</span>&nbsp;<span class="op" id="7524211">!=</span>&nbsp;<span class="builtintype" id="7524214">nil</span>&nbsp;<span class="op" id="7524218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524223">if</span>&nbsp;<span class="ident" id="7524226">err</span>&nbsp;<span class="op" id="7524230">==</span>&nbsp;<span class="builtintype" id="7524233">nil</span>&nbsp;<span class="op" id="7524237">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524243">t</span><span class="op" id="7524244">.</span><span class="ident" id="7524245">Errorf</span><span class="op" id="7524251">(</span><span class="string" id="7524252">&#34;%d.&nbsp;err=nil;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7524274">,</span>&nbsp;<span class="ident" id="7524276">i</span><span class="op" id="7524277">,</span>&nbsp;<span class="ident" id="7524279">tt</span><span class="op" id="7524281">.</span><span class="ident" id="7524282">wantErr</span><span class="op" id="7524289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524295">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524312">if</span>&nbsp;<span class="ident" id="7524315">g</span><span class="op" id="7524316">,</span>&nbsp;<span class="ident" id="7524318">e</span>&nbsp;<span class="op" id="7524320">:=</span>&nbsp;<span class="ident" id="7524323">err</span><span class="op" id="7524326">.</span><span class="ident" id="7524327">Error</span><span class="op" id="7524332">(</span><span class="op" id="7524333">)</span><span class="op" id="7524334">,</span>&nbsp;<span class="ident" id="7524336">tt</span><span class="op" id="7524338">.</span><span class="ident" id="7524339">wantErr</span><span class="op" id="7524346">.</span><span class="ident" id="7524347">Error</span><span class="op" id="7524352">(</span><span class="op" id="7524353">)</span><span class="op" id="7524354">;</span>&nbsp;<span class="ident" id="7524356">g</span>&nbsp;<span class="op" id="7524358">!=</span>&nbsp;<span class="ident" id="7524361">e</span>&nbsp;<span class="op" id="7524363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524369">t</span><span class="op" id="7524370">.</span><span class="ident" id="7524371">Errorf</span><span class="op" id="7524377">(</span><span class="string" id="7524378">&#34;%d.&nbsp;err=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7524399">,</span>&nbsp;<span class="ident" id="7524401">i</span><span class="op" id="7524402">,</span>&nbsp;<span class="ident" id="7524404">g</span><span class="op" id="7524405">,</span>&nbsp;<span class="ident" id="7524407">e</span><span class="op" id="7524408">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524414">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524431">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524446">if</span>&nbsp;<span class="ident" id="7524449">err</span>&nbsp;<span class="op" id="7524453">!=</span>&nbsp;<span class="builtintype" id="7524456">nil</span>&nbsp;<span class="op" id="7524460">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524465">t</span><span class="op" id="7524466">.</span><span class="ident" id="7524467">Errorf</span><span class="op" id="7524473">(</span><span class="string" id="7524474">&#34;%d.&nbsp;err=%q&#34;</span><span class="op" id="7524486">,</span>&nbsp;<span class="ident" id="7524488">i</span><span class="op" id="7524489">,</span>&nbsp;<span class="ident" id="7524491">err</span><span class="op" id="7524494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524499">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524514">if</span>&nbsp;<span class="ident" id="7524517">g</span><span class="op" id="7524518">,</span>&nbsp;<span class="ident" id="7524520">e</span>&nbsp;<span class="op" id="7524522">:=</span>&nbsp;<span class="ident" id="7524525">got</span><span class="op" id="7524528">.</span><span class="ident" id="7524529">String</span><span class="op" id="7524535">(</span><span class="op" id="7524536">)</span><span class="op" id="7524537">,</span>&nbsp;<span class="ident" id="7524539">tt</span><span class="op" id="7524541">.</span><span class="ident" id="7524542">want</span><span class="op" id="7524546">;</span>&nbsp;<span class="ident" id="7524548">g</span>&nbsp;<span class="op" id="7524550">!=</span>&nbsp;<span class="ident" id="7524553">e</span>&nbsp;<span class="op" id="7524555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524560">t</span><span class="op" id="7524561">.</span><span class="ident" id="7524562">Errorf</span><span class="op" id="7524568">(</span><span class="string" id="7524569">&#34;%d.&nbsp;Location=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7524595">,</span>&nbsp;<span class="ident" id="7524597">i</span><span class="op" id="7524598">,</span>&nbsp;<span class="ident" id="7524600">g</span><span class="op" id="7524601">,</span>&nbsp;<span class="ident" id="7524603">e</span><span class="op" id="7524604">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524611">}</span><br>
<span class="lineno"></span><span class="op" id="7524613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7524616">func</span>&nbsp;<span class="ident" id="7524621">TestResponseStatusStutter</span><span class="op" id="7524646">(</span><span class="ident" id="7524647">t</span>&nbsp;<span class="op" id="7524649">*</span><span class="ident" id="7524650">testing</span><span class="op" id="7524657">.</span><span class="ident" id="7524658">T</span><span class="op" id="7524659">)</span>&nbsp;<span class="op" id="7524661">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524664">r</span>&nbsp;<span class="op" id="7524666">:=</span>&nbsp;<span class="op" id="7524669">&amp;</span><span class="ident" id="7524670">Response</span><span class="op" id="7524678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524682">Status</span><span class="op" id="7524688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7524694">&#34;123&nbsp;some&nbsp;status&#34;</span><span class="op" id="7524711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524715">StatusCode</span><span class="op" id="7524725">:</span>&nbsp;<span class="num" id="7524727">123</span><span class="op" id="7524730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524734">ProtoMajor</span><span class="op" id="7524744">:</span>&nbsp;<span class="num" id="7524746">1</span><span class="op" id="7524747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524751">ProtoMinor</span><span class="op" id="7524761">:</span>&nbsp;<span class="num" id="7524763">3</span><span class="op" id="7524764">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524770">var</span>&nbsp;<span class="ident" id="7524774">buf</span>&nbsp;<span class="ident" id="7524778">bytes</span><span class="op" id="7524783">.</span><span class="ident" id="7524784">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524792">r</span><span class="op" id="7524793">.</span><span class="ident" id="7524794">Write</span><span class="op" id="7524799">(</span><span class="op" id="7524800">&amp;</span><span class="ident" id="7524801">buf</span><span class="op" id="7524804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524807">if</span>&nbsp;<span class="ident" id="7524810">strings</span><span class="op" id="7524817">.</span><span class="ident" id="7524818">Contains</span><span class="op" id="7524826">(</span><span class="ident" id="7524827">buf</span><span class="op" id="7524830">.</span><span class="ident" id="7524831">String</span><span class="op" id="7524837">(</span><span class="op" id="7524838">)</span><span class="op" id="7524839">,</span>&nbsp;<span class="string" id="7524841">&#34;123&nbsp;123&#34;</span><span class="op" id="7524850">)</span>&nbsp;<span class="op" id="7524852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7524856">t</span><span class="op" id="7524857">.</span><span class="ident" id="7524858">Errorf</span><span class="op" id="7524864">(</span><span class="string" id="7524865">&#34;stutter&nbsp;in&nbsp;status:&nbsp;%s&#34;</span><span class="op" id="7524888">,</span>&nbsp;<span class="ident" id="7524890">buf</span><span class="op" id="7524893">.</span><span class="ident" id="7524894">String</span><span class="op" id="7524900">(</span><span class="op" id="7524901">)</span><span class="op" id="7524902">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7524905">}</span><br>
<span class="lineno"></span><span class="op" id="7524907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7524910">func</span>&nbsp;<span class="ident" id="7524915">TestResponseContentLengthShortBody</span><span class="op" id="7524949">(</span><span class="ident" id="7524950">t</span>&nbsp;<span class="op" id="7524952">*</span><span class="ident" id="7524953">testing</span><span class="op" id="7524960">.</span><span class="ident" id="7524961">T</span><span class="op" id="7524962">)</span>&nbsp;<span class="op" id="7524964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7524967">const</span>&nbsp;<span class="ident" id="7524973">shortBody</span>&nbsp;<span class="op" id="7524983">=</span>&nbsp;<span class="string" id="7524985">&#34;Short&nbsp;body,&nbsp;not&nbsp;123&nbsp;bytes.&#34;</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525015">br</span>&nbsp;<span class="op" id="7525018">:=</span>&nbsp;<span class="ident" id="7525021">bufio</span><span class="op" id="7525026">.</span><span class="ident" id="7525027">NewReader</span><span class="op" id="7525036">(</span><span class="ident" id="7525037">strings</span><span class="op" id="7525044">.</span><span class="ident" id="7525045">NewReader</span><span class="op" id="7525054">(</span><span class="string" id="7525055">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7525077">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525081">&#34;Content-Length:&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7525107">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525111">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7525118">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525122">shortBody</span><span class="op" id="7525131">)</span><span class="op" id="7525132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525135">res</span><span class="op" id="7525138">,</span>&nbsp;<span class="ident" id="7525140">err</span>&nbsp;<span class="op" id="7525144">:=</span>&nbsp;<span class="ident" id="7525147">ReadResponse</span><span class="op" id="7525159">(</span><span class="ident" id="7525160">br</span><span class="op" id="7525162">,</span>&nbsp;<span class="op" id="7525164">&amp;</span><span class="ident" id="7525165">Request</span><span class="op" id="7525172">{</span><span class="ident" id="7525173">Method</span><span class="op" id="7525179">:</span>&nbsp;<span class="string" id="7525181">&#34;GET&#34;</span><span class="op" id="7525186">}</span><span class="op" id="7525187">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525190">if</span>&nbsp;<span class="ident" id="7525193">err</span>&nbsp;<span class="op" id="7525197">!=</span>&nbsp;<span class="builtintype" id="7525200">nil</span>&nbsp;<span class="op" id="7525204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525208">t</span><span class="op" id="7525209">.</span><span class="ident" id="7525210">Fatal</span><span class="op" id="7525215">(</span><span class="ident" id="7525216">err</span><span class="op" id="7525219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525225">if</span>&nbsp;<span class="ident" id="7525228">res</span><span class="op" id="7525231">.</span><span class="ident" id="7525232">ContentLength</span>&nbsp;<span class="op" id="7525246">!=</span>&nbsp;<span class="num" id="7525249">123</span>&nbsp;<span class="op" id="7525253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525257">t</span><span class="op" id="7525258">.</span><span class="ident" id="7525259">Fatalf</span><span class="op" id="7525265">(</span><span class="string" id="7525266">&#34;Content-Length&nbsp;=&nbsp;%d;&nbsp;want&nbsp;123&#34;</span><span class="op" id="7525297">,</span>&nbsp;<span class="ident" id="7525299">res</span><span class="op" id="7525302">.</span><span class="ident" id="7525303">ContentLength</span><span class="op" id="7525316">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525322">var</span>&nbsp;<span class="ident" id="7525326">buf</span>&nbsp;<span class="ident" id="7525330">bytes</span><span class="op" id="7525335">.</span><span class="ident" id="7525336">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525344">n</span><span class="op" id="7525345">,</span>&nbsp;<span class="ident" id="7525347">err</span>&nbsp;<span class="op" id="7525351">:=</span>&nbsp;<span class="ident" id="7525354">io</span><span class="op" id="7525356">.</span><span class="ident" id="7525357">Copy</span><span class="op" id="7525361">(</span><span class="op" id="7525362">&amp;</span><span class="ident" id="7525363">buf</span><span class="op" id="7525366">,</span>&nbsp;<span class="ident" id="7525368">res</span><span class="op" id="7525371">.</span><span class="ident" id="7525372">Body</span><span class="op" id="7525376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525379">if</span>&nbsp;<span class="ident" id="7525382">n</span>&nbsp;<span class="op" id="7525384">!=</span>&nbsp;<span class="builtintype" id="7525387">int64</span><span class="op" id="7525392">(</span><span class="builtinfunc" id="7525393">len</span><span class="op" id="7525396">(</span><span class="ident" id="7525397">shortBody</span><span class="op" id="7525406">)</span><span class="op" id="7525407">)</span>&nbsp;<span class="op" id="7525409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525413">t</span><span class="op" id="7525414">.</span><span class="ident" id="7525415">Errorf</span><span class="op" id="7525421">(</span><span class="string" id="7525422">&#34;Copied&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d,&nbsp;len(%q)&#34;</span><span class="op" id="7525457">,</span>&nbsp;<span class="ident" id="7525459">n</span><span class="op" id="7525460">,</span>&nbsp;<span class="builtinfunc" id="7525462">len</span><span class="op" id="7525465">(</span><span class="ident" id="7525466">shortBody</span><span class="op" id="7525475">)</span><span class="op" id="7525476">,</span>&nbsp;<span class="ident" id="7525478">shortBody</span><span class="op" id="7525487">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525493">if</span>&nbsp;<span class="ident" id="7525496">buf</span><span class="op" id="7525499">.</span><span class="ident" id="7525500">String</span><span class="op" id="7525506">(</span><span class="op" id="7525507">)</span>&nbsp;<span class="op" id="7525509">!=</span>&nbsp;<span class="ident" id="7525512">shortBody</span>&nbsp;<span class="op" id="7525522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525526">t</span><span class="op" id="7525527">.</span><span class="ident" id="7525528">Errorf</span><span class="op" id="7525534">(</span><span class="string" id="7525535">&#34;Read&nbsp;body&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7525558">,</span>&nbsp;<span class="ident" id="7525560">buf</span><span class="op" id="7525563">.</span><span class="ident" id="7525564">String</span><span class="op" id="7525570">(</span><span class="op" id="7525571">)</span><span class="op" id="7525572">,</span>&nbsp;<span class="ident" id="7525574">shortBody</span><span class="op" id="7525583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525589">if</span>&nbsp;<span class="ident" id="7525592">err</span>&nbsp;<span class="op" id="7525596">!=</span>&nbsp;<span class="ident" id="7525599">io</span><span class="op" id="7525601">.</span><span class="ident" id="7525602">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7525619">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525623">t</span><span class="op" id="7525624">.</span><span class="ident" id="7525625">Errorf</span><span class="op" id="7525631">(</span><span class="string" id="7525632">&#34;io.Copy&nbsp;error&nbsp;=&nbsp;%#v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7525679">,</span>&nbsp;<span class="ident" id="7525681">err</span><span class="op" id="7525684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525687">}</span><br>
<span class="lineno"></span><span class="op" id="7525689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525692">func</span>&nbsp;<span class="ident" id="7525697">TestReadResponseUnexpectedEOF</span><span class="op" id="7525726">(</span><span class="ident" id="7525727">t</span>&nbsp;<span class="op" id="7525729">*</span><span class="ident" id="7525730">testing</span><span class="op" id="7525737">.</span><span class="ident" id="7525738">T</span><span class="op" id="7525739">)</span>&nbsp;<span class="op" id="7525741">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525744">br</span>&nbsp;<span class="op" id="7525747">:=</span>&nbsp;<span class="ident" id="7525750">bufio</span><span class="op" id="7525755">.</span><span class="ident" id="7525756">NewReader</span><span class="op" id="7525765">(</span><span class="ident" id="7525766">strings</span><span class="op" id="7525773">.</span><span class="ident" id="7525774">NewReader</span><span class="op" id="7525783">(</span><span class="string" id="7525784">&#34;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently\r\n&#34;</span>&nbsp;<span class="op" id="7525821">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525825">&#34;Location:&nbsp;http://example.com&#34;</span><span class="op" id="7525855">)</span><span class="op" id="7525856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525859">_</span><span class="op" id="7525860">,</span>&nbsp;<span class="ident" id="7525862">err</span>&nbsp;<span class="op" id="7525866">:=</span>&nbsp;<span class="ident" id="7525869">ReadResponse</span><span class="op" id="7525881">(</span><span class="ident" id="7525882">br</span><span class="op" id="7525884">,</span>&nbsp;<span class="builtintype" id="7525886">nil</span><span class="op" id="7525889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7525892">if</span>&nbsp;<span class="ident" id="7525895">err</span>&nbsp;<span class="op" id="7525899">!=</span>&nbsp;<span class="ident" id="7525902">io</span><span class="op" id="7525904">.</span><span class="ident" id="7525905">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7525922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525926">t</span><span class="op" id="7525927">.</span><span class="ident" id="7525928">Errorf</span><span class="op" id="7525934">(</span><span class="string" id="7525935">&#34;ReadResponse&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7525980">,</span>&nbsp;<span class="ident" id="7525982">err</span><span class="op" id="7525985">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525988">}</span><br>
<span class="lineno"></span><span class="op" id="7525990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525993">func</span>&nbsp;<span class="ident" id="7525998">TestNeedsSniff</span><span class="op" id="7526012">(</span><span class="ident" id="7526013">t</span>&nbsp;<span class="op" id="7526015">*</span><span class="ident" id="7526016">testing</span><span class="op" id="7526023">.</span><span class="ident" id="7526024">T</span><span class="op" id="7526025">)</span>&nbsp;<span class="op" id="7526027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7526030">//&nbsp;needsSniff&nbsp;returns&nbsp;true&nbsp;with&nbsp;an&nbsp;empty&nbsp;response.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526082">r</span>&nbsp;<span class="op" id="7526084">:=</span>&nbsp;<span class="op" id="7526087">&amp;</span><span class="ident" id="7526088">response</span><span class="op" id="7526096">{</span><span class="op" id="7526097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7526100">if</span>&nbsp;<span class="ident" id="7526103">got</span><span class="op" id="7526106">,</span>&nbsp;<span class="ident" id="7526108">want</span>&nbsp;<span class="op" id="7526113">:=</span>&nbsp;<span class="ident" id="7526116">r</span><span class="op" id="7526117">.</span><span class="ident" id="7526118">needsSniff</span><span class="op" id="7526128">(</span><span class="op" id="7526129">)</span><span class="op" id="7526130">,</span>&nbsp;<span class="builtintype" id="7526132">true</span><span class="op" id="7526136">;</span>&nbsp;<span class="ident" id="7526138">got</span>&nbsp;<span class="op" id="7526142">!=</span>&nbsp;<span class="ident" id="7526145">want</span>&nbsp;<span class="op" id="7526150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526154">t</span><span class="op" id="7526155">.</span><span class="ident" id="7526156">Errorf</span><span class="op" id="7526162">(</span><span class="string" id="7526163">&#34;needsSniff&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7526189">,</span>&nbsp;<span class="ident" id="7526191">got</span><span class="op" id="7526194">,</span>&nbsp;<span class="ident" id="7526196">want</span><span class="op" id="7526200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7526203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7526206">//&nbsp;needsSniff&nbsp;returns&nbsp;false&nbsp;when&nbsp;Content-Type&nbsp;=&nbsp;nil.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526260">r</span><span class="op" id="7526261">.</span><span class="ident" id="7526262">handlerHeader</span>&nbsp;<span class="op" id="7526276">=</span>&nbsp;<span class="ident" id="7526278">Header</span><span class="op" id="7526284">{</span><span class="string" id="7526285">&#34;Content-Type&#34;</span><span class="op" id="7526299">:</span>&nbsp;<span class="builtintype" id="7526301">nil</span><span class="op" id="7526304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7526307">if</span>&nbsp;<span class="ident" id="7526310">got</span><span class="op" id="7526313">,</span>&nbsp;<span class="ident" id="7526315">want</span>&nbsp;<span class="op" id="7526320">:=</span>&nbsp;<span class="ident" id="7526323">r</span><span class="op" id="7526324">.</span><span class="ident" id="7526325">needsSniff</span><span class="op" id="7526335">(</span><span class="op" id="7526336">)</span><span class="op" id="7526337">,</span>&nbsp;<span class="builtintype" id="7526339">false</span><span class="op" id="7526344">;</span>&nbsp;<span class="ident" id="7526346">got</span>&nbsp;<span class="op" id="7526350">!=</span>&nbsp;<span class="ident" id="7526353">want</span>&nbsp;<span class="op" id="7526358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526362">t</span><span class="op" id="7526363">.</span><span class="ident" id="7526364">Errorf</span><span class="op" id="7526370">(</span><span class="string" id="7526371">&#34;needsSniff&nbsp;empty&nbsp;Content-Type&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7526416">,</span>&nbsp;<span class="ident" id="7526418">got</span><span class="op" id="7526421">,</span>&nbsp;<span class="ident" id="7526423">want</span><span class="op" id="7526427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7526430">}</span><br>
<span class="lineno"></span><span class="op" id="7526432">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
