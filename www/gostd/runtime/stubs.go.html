<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html" class="current">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1684828">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1684883">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1684937">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1684988">package</span>&nbsp;<span class="ident" id="1684996">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1685005">import</span>&nbsp;<span class="string" id="1685012">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1685022">//&nbsp;Declarations&nbsp;for&nbsp;runtime&nbsp;services&nbsp;implemented&nbsp;in&nbsp;C&nbsp;or&nbsp;assembly.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1685090">const</span>&nbsp;<span class="ident" id="1685096">ptrSize</span>&nbsp;<span class="op" id="1685104">=</span>&nbsp;<span class="num" id="1685106">4</span>&nbsp;<span class="op" id="1685108">&lt;&lt;</span>&nbsp;<span class="op" id="1685111">(</span><span class="op" id="1685112">^</span><span class="builtintype" id="1685113">uintptr</span><span class="op" id="1685120">(</span><span class="num" id="1685121">0</span><span class="op" id="1685122">)</span>&nbsp;<span class="op" id="1685124">&gt;&gt;</span>&nbsp;<span class="num" id="1685127">63</span><span class="op" id="1685129">)</span>&nbsp;<span class="comment" id="1685131">//&nbsp;unsafe.Sizeof(uintptr(0))&nbsp;but&nbsp;an&nbsp;ideal&nbsp;const</span><br>
<span class="lineno"></span><span class="keyword" id="1685179">const</span>&nbsp;<span class="ident" id="1685185">regSize</span>&nbsp;<span class="op" id="1685193">=</span>&nbsp;<span class="num" id="1685195">4</span>&nbsp;<span class="op" id="1685197">&lt;&lt;</span>&nbsp;<span class="op" id="1685200">(</span><span class="op" id="1685201">^</span><span class="ident" id="1685202">uintreg</span><span class="op" id="1685209">(</span><span class="num" id="1685210">0</span><span class="op" id="1685211">)</span>&nbsp;<span class="op" id="1685213">&gt;&gt;</span>&nbsp;<span class="num" id="1685216">63</span><span class="op" id="1685218">)</span>&nbsp;<span class="comment" id="1685220">//&nbsp;unsafe.Sizeof(uintreg(0))&nbsp;but&nbsp;an&nbsp;ideal&nbsp;const</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1685269">//&nbsp;Should&nbsp;be&nbsp;a&nbsp;built-in&nbsp;for&nbsp;unsafe.Pointer?</span><br>
<span class="lineno">15</span><span class="comment" id="1685313">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1685326">func</span>&nbsp;<span class="ident" id="1685331">add</span><span class="op" id="1685334">(</span><span class="ident" id="1685335">p</span>&nbsp;<span class="ident" id="1685337">unsafe</span><span class="op" id="1685343">.</span><span class="ident" id="1685344">Pointer</span><span class="op" id="1685351">,</span>&nbsp;<span class="ident" id="1685353">x</span>&nbsp;<span class="builtintype" id="1685355">uintptr</span><span class="op" id="1685362">)</span>&nbsp;<span class="ident" id="1685364">unsafe</span><span class="op" id="1685370">.</span><span class="ident" id="1685371">Pointer</span>&nbsp;<span class="op" id="1685379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685382">return</span>&nbsp;<span class="ident" id="1685389">unsafe</span><span class="op" id="1685395">.</span><span class="ident" id="1685396">Pointer</span><span class="op" id="1685403">(</span><span class="builtintype" id="1685404">uintptr</span><span class="op" id="1685411">(</span><span class="ident" id="1685412">p</span><span class="op" id="1685413">)</span>&nbsp;<span class="op" id="1685415">+</span>&nbsp;<span class="ident" id="1685417">x</span><span class="op" id="1685418">)</span><br>
<span class="lineno"></span><span class="op" id="1685420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1685423">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;2</span><br>
<span class="lineno"></span><span class="keyword" id="1685449">func</span>&nbsp;<span class="ident" id="1685454">roundup</span><span class="op" id="1685461">(</span><span class="ident" id="1685462">p</span>&nbsp;<span class="ident" id="1685464">unsafe</span><span class="op" id="1685470">.</span><span class="ident" id="1685471">Pointer</span><span class="op" id="1685478">,</span>&nbsp;<span class="ident" id="1685480">n</span>&nbsp;<span class="builtintype" id="1685482">uintptr</span><span class="op" id="1685489">)</span>&nbsp;<span class="ident" id="1685491">unsafe</span><span class="op" id="1685497">.</span><span class="ident" id="1685498">Pointer</span>&nbsp;<span class="op" id="1685506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685509">delta</span>&nbsp;<span class="op" id="1685515">:=</span>&nbsp;<span class="op" id="1685518">-</span><span class="builtintype" id="1685519">uintptr</span><span class="op" id="1685526">(</span><span class="ident" id="1685527">p</span><span class="op" id="1685528">)</span>&nbsp;<span class="op" id="1685530">&amp;</span>&nbsp;<span class="op" id="1685532">(</span><span class="ident" id="1685533">n</span>&nbsp;<span class="op" id="1685535">-</span>&nbsp;<span class="num" id="1685537">1</span><span class="op" id="1685538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685541">return</span>&nbsp;<span class="ident" id="1685548">unsafe</span><span class="op" id="1685554">.</span><span class="ident" id="1685555">Pointer</span><span class="op" id="1685562">(</span><span class="builtintype" id="1685563">uintptr</span><span class="op" id="1685570">(</span><span class="ident" id="1685571">p</span><span class="op" id="1685572">)</span>&nbsp;<span class="op" id="1685574">+</span>&nbsp;<span class="ident" id="1685576">delta</span><span class="op" id="1685581">)</span><br>
<span class="lineno"></span><span class="op" id="1685583">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1685586">//&nbsp;in&nbsp;runtime.c</span><br>
<span class="lineno"></span><span class="keyword" id="1685602">func</span>&nbsp;<span class="ident" id="1685607">getg</span><span class="op" id="1685611">(</span><span class="op" id="1685612">)</span>&nbsp;<span class="op" id="1685614">*</span><span class="ident" id="1685615">g</span><br>
<span class="lineno"></span><span class="keyword" id="1685617">func</span>&nbsp;<span class="ident" id="1685622">acquirem</span><span class="op" id="1685630">(</span><span class="op" id="1685631">)</span>&nbsp;<span class="op" id="1685633">*</span><span class="ident" id="1685634">m</span><br>
<span class="lineno"></span><span class="keyword" id="1685636">func</span>&nbsp;<span class="ident" id="1685641">releasem</span><span class="op" id="1685649">(</span><span class="ident" id="1685650">mp</span>&nbsp;<span class="op" id="1685653">*</span><span class="ident" id="1685654">m</span><span class="op" id="1685655">)</span><br>
<span class="lineno">30</span><span class="keyword" id="1685657">func</span>&nbsp;<span class="ident" id="1685662">gomcache</span><span class="op" id="1685670">(</span><span class="op" id="1685671">)</span>&nbsp;<span class="op" id="1685673">*</span><span class="ident" id="1685674">mcache</span><br>
<span class="lineno"></span><span class="keyword" id="1685681">func</span>&nbsp;<span class="ident" id="1685686">readgstatus</span><span class="op" id="1685697">(</span><span class="op" id="1685698">*</span><span class="ident" id="1685699">g</span><span class="op" id="1685700">)</span>&nbsp;<span class="builtintype" id="1685702">uint32</span>&nbsp;<span class="comment" id="1685709">//&nbsp;proc.c</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1685720">//&nbsp;mcall&nbsp;switches&nbsp;from&nbsp;the&nbsp;g&nbsp;to&nbsp;the&nbsp;g0&nbsp;stack&nbsp;and&nbsp;invokes&nbsp;fn(g),</span><br>
<span class="lineno"></span><span class="comment" id="1685784">//&nbsp;where&nbsp;g&nbsp;is&nbsp;the&nbsp;goroutine&nbsp;that&nbsp;made&nbsp;the&nbsp;call.</span><br>
<span class="lineno">35</span><span class="comment" id="1685832">//&nbsp;mcall&nbsp;saves&nbsp;g&#39;s&nbsp;current&nbsp;PC/SP&nbsp;in&nbsp;g-&gt;sched&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;restored&nbsp;later.</span><br>
<span class="lineno"></span><span class="comment" id="1685911">//&nbsp;It&nbsp;is&nbsp;up&nbsp;to&nbsp;fn&nbsp;to&nbsp;arrange&nbsp;for&nbsp;that&nbsp;later&nbsp;execution,&nbsp;typically&nbsp;by&nbsp;recording</span><br>
<span class="lineno"></span><span class="comment" id="1685989">//&nbsp;g&nbsp;in&nbsp;a&nbsp;data&nbsp;structure,&nbsp;causing&nbsp;something&nbsp;to&nbsp;call&nbsp;ready(g)&nbsp;later.</span><br>
<span class="lineno"></span><span class="comment" id="1686057">//&nbsp;mcall&nbsp;returns&nbsp;to&nbsp;the&nbsp;original&nbsp;goroutine&nbsp;g&nbsp;later,&nbsp;when&nbsp;g&nbsp;has&nbsp;been&nbsp;rescheduled.</span><br>
<span class="lineno"></span><span class="comment" id="1686138">//&nbsp;fn&nbsp;must&nbsp;not&nbsp;return&nbsp;at&nbsp;all;&nbsp;typically&nbsp;it&nbsp;ends&nbsp;by&nbsp;calling&nbsp;schedule,&nbsp;to&nbsp;let&nbsp;the&nbsp;m</span><br>
<span class="lineno">40</span><span class="comment" id="1686220">//&nbsp;run&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="1686245">//</span><br>
<span class="lineno"></span><span class="comment" id="1686248">//&nbsp;mcall&nbsp;can&nbsp;only&nbsp;be&nbsp;called&nbsp;from&nbsp;g&nbsp;stacks&nbsp;(not&nbsp;g0,&nbsp;not&nbsp;gsignal).</span><br>
<span class="lineno"></span><span class="comment" id="1686313">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1686327">func</span>&nbsp;<span class="ident" id="1686332">mcall</span><span class="op" id="1686337">(</span><span class="ident" id="1686338">fn</span>&nbsp;<span class="keyword" id="1686341">func</span><span class="op" id="1686345">(</span><span class="op" id="1686346">*</span><span class="ident" id="1686347">g</span><span class="op" id="1686348">)</span><span class="op" id="1686349">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1686352">//&nbsp;onM&nbsp;switches&nbsp;from&nbsp;the&nbsp;g&nbsp;to&nbsp;the&nbsp;g0&nbsp;stack&nbsp;and&nbsp;invokes&nbsp;fn().</span><br>
<span class="lineno"></span><span class="comment" id="1686413">//&nbsp;When&nbsp;fn&nbsp;returns,&nbsp;onM&nbsp;switches&nbsp;back&nbsp;to&nbsp;the&nbsp;g&nbsp;and&nbsp;returns,</span><br>
<span class="lineno"></span><span class="comment" id="1686473">//&nbsp;continuing&nbsp;execution&nbsp;on&nbsp;the&nbsp;g&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="1686513">//&nbsp;If&nbsp;arguments&nbsp;must&nbsp;be&nbsp;passed&nbsp;to&nbsp;fn,&nbsp;they&nbsp;can&nbsp;be&nbsp;written&nbsp;to</span><br>
<span class="lineno">50</span><span class="comment" id="1686574">//&nbsp;g-&gt;m-&gt;ptrarg&nbsp;(pointers)&nbsp;and&nbsp;g-&gt;m-&gt;scalararg&nbsp;(non-pointers)</span><br>
<span class="lineno"></span><span class="comment" id="1686636">//&nbsp;before&nbsp;the&nbsp;call&nbsp;and&nbsp;then&nbsp;consulted&nbsp;during&nbsp;fn.</span><br>
<span class="lineno"></span><span class="comment" id="1686685">//&nbsp;Similarly,&nbsp;fn&nbsp;can&nbsp;pass&nbsp;return&nbsp;values&nbsp;back&nbsp;in&nbsp;those&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="1686750">//&nbsp;If&nbsp;fn&nbsp;is&nbsp;written&nbsp;in&nbsp;Go,&nbsp;it&nbsp;can&nbsp;be&nbsp;a&nbsp;closure,&nbsp;which&nbsp;avoids&nbsp;the&nbsp;need&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="1686824">//&nbsp;ptrarg&nbsp;and&nbsp;scalararg&nbsp;entirely.</span><br>
<span class="lineno">55</span><span class="comment" id="1686858">//&nbsp;After&nbsp;reading&nbsp;values&nbsp;out&nbsp;of&nbsp;ptrarg&nbsp;and&nbsp;scalararg&nbsp;it&nbsp;is&nbsp;conventional</span><br>
<span class="lineno"></span><span class="comment" id="1686929">//&nbsp;to&nbsp;zero&nbsp;them&nbsp;to&nbsp;avoid&nbsp;(memory&nbsp;or&nbsp;information)&nbsp;leaks.</span><br>
<span class="lineno"></span><span class="comment" id="1686985">//</span><br>
<span class="lineno"></span><span class="comment" id="1686988">//&nbsp;If&nbsp;onM&nbsp;is&nbsp;called&nbsp;from&nbsp;a&nbsp;g0&nbsp;stack,&nbsp;it&nbsp;invokes&nbsp;fn&nbsp;and&nbsp;returns,</span><br>
<span class="lineno"></span><span class="comment" id="1687052">//&nbsp;without&nbsp;any&nbsp;stack&nbsp;switches.</span><br>
<span class="lineno">60</span><span class="comment" id="1687083">//</span><br>
<span class="lineno"></span><span class="comment" id="1687086">//&nbsp;If&nbsp;onM&nbsp;is&nbsp;called&nbsp;from&nbsp;a&nbsp;gsignal&nbsp;stack,&nbsp;it&nbsp;crashes&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="comment" id="1687152">//&nbsp;The&nbsp;implication&nbsp;is&nbsp;that&nbsp;functions&nbsp;used&nbsp;in&nbsp;signal&nbsp;handlers&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="1687218">//&nbsp;not&nbsp;use&nbsp;onM.</span><br>
<span class="lineno"></span><span class="comment" id="1687234">//</span><br>
<span class="lineno">65</span><span class="comment" id="1687237">//&nbsp;NOTE(rsc):&nbsp;We&nbsp;could&nbsp;introduce&nbsp;a&nbsp;separate&nbsp;onMsignal&nbsp;that&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1687299">//&nbsp;like&nbsp;onM&nbsp;but&nbsp;if&nbsp;called&nbsp;from&nbsp;a&nbsp;gsignal&nbsp;stack&nbsp;would&nbsp;just&nbsp;run&nbsp;fn&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1687367">//&nbsp;that&nbsp;stack.&nbsp;The&nbsp;caller&nbsp;of&nbsp;onMsignal&nbsp;would&nbsp;be&nbsp;required&nbsp;to&nbsp;save&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1687436">//&nbsp;old&nbsp;values&nbsp;of&nbsp;ptrarg/scalararg&nbsp;and&nbsp;restore&nbsp;them&nbsp;when&nbsp;the&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="1687501">//&nbsp;was&nbsp;finished,&nbsp;in&nbsp;case&nbsp;the&nbsp;signal&nbsp;interrupted&nbsp;an&nbsp;onM&nbsp;sequence</span><br>
<span class="lineno">70</span><span class="comment" id="1687565">//&nbsp;in&nbsp;progress&nbsp;on&nbsp;the&nbsp;g&nbsp;or&nbsp;g0&nbsp;stacks.&nbsp;Until&nbsp;there&nbsp;is&nbsp;a&nbsp;clear&nbsp;need&nbsp;for&nbsp;this,</span><br>
<span class="lineno"></span><span class="comment" id="1687641">//&nbsp;we&nbsp;just&nbsp;reject&nbsp;onM&nbsp;in&nbsp;signal&nbsp;handling&nbsp;contexts&nbsp;entirely.</span><br>
<span class="lineno"></span><span class="comment" id="1687701">//</span><br>
<span class="lineno"></span><span class="comment" id="1687704">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1687718">func</span>&nbsp;<span class="ident" id="1687723">onM</span><span class="op" id="1687726">(</span><span class="ident" id="1687727">fn</span>&nbsp;<span class="keyword" id="1687730">func</span><span class="op" id="1687734">(</span><span class="op" id="1687735">)</span><span class="op" id="1687736">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="1687739">//&nbsp;onMsignal&nbsp;is&nbsp;like&nbsp;onM&nbsp;but&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;used&nbsp;in&nbsp;code&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1687803">//&nbsp;might&nbsp;run&nbsp;on&nbsp;the&nbsp;gsignal&nbsp;stack.&nbsp;Code&nbsp;running&nbsp;on&nbsp;a&nbsp;signal&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="1687869">//&nbsp;may&nbsp;be&nbsp;interrupting&nbsp;an&nbsp;onM&nbsp;sequence&nbsp;on&nbsp;the&nbsp;main&nbsp;stack,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="1687930">//&nbsp;if&nbsp;the&nbsp;onMsignal&nbsp;calling&nbsp;sequence&nbsp;writes&nbsp;to&nbsp;ptrarg/scalararg,</span><br>
<span class="lineno">80</span><span class="comment" id="1687995">//&nbsp;it&nbsp;must&nbsp;first&nbsp;save&nbsp;the&nbsp;old&nbsp;values&nbsp;and&nbsp;then&nbsp;restore&nbsp;them&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="1688059">//&nbsp;finished.&nbsp;As&nbsp;an&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule,&nbsp;it&nbsp;is&nbsp;fine&nbsp;not&nbsp;to&nbsp;save&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1688128">//&nbsp;restore&nbsp;the&nbsp;values&nbsp;if&nbsp;the&nbsp;program&nbsp;is&nbsp;trying&nbsp;to&nbsp;crash&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="1688196">//&nbsp;return&nbsp;from&nbsp;the&nbsp;signal&nbsp;handler.</span><br>
<span class="lineno"></span><span class="comment" id="1688231">//&nbsp;Once&nbsp;all&nbsp;the&nbsp;runtime&nbsp;is&nbsp;written&nbsp;in&nbsp;Go,&nbsp;there&nbsp;will&nbsp;be&nbsp;no&nbsp;ptrarg/scalararg</span><br>
<span class="lineno">85</span><span class="comment" id="1688307">//&nbsp;and&nbsp;the&nbsp;distinction&nbsp;between&nbsp;onM&nbsp;and&nbsp;onMsignal&nbsp;(and&nbsp;perhaps&nbsp;mcall)</span><br>
<span class="lineno"></span><span class="comment" id="1688376">//&nbsp;can&nbsp;go&nbsp;away.</span><br>
<span class="lineno"></span><span class="comment" id="1688392">//</span><br>
<span class="lineno"></span><span class="comment" id="1688395">//&nbsp;If&nbsp;onMsignal&nbsp;is&nbsp;called&nbsp;from&nbsp;a&nbsp;gsignal&nbsp;stack,&nbsp;it&nbsp;invokes&nbsp;fn&nbsp;directly,</span><br>
<span class="lineno"></span><span class="comment" id="1688467">//&nbsp;without&nbsp;a&nbsp;stack&nbsp;switch.&nbsp;Otherwise&nbsp;onMsignal&nbsp;behaves&nbsp;like&nbsp;onM.</span><br>
<span class="lineno">90</span><span class="comment" id="1688532">//</span><br>
<span class="lineno"></span><span class="comment" id="1688535">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1688549">func</span>&nbsp;<span class="ident" id="1688554">onM_signalok</span><span class="op" id="1688566">(</span><span class="ident" id="1688567">fn</span>&nbsp;<span class="keyword" id="1688570">func</span><span class="op" id="1688574">(</span><span class="op" id="1688575">)</span><span class="op" id="1688576">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1688579">func</span>&nbsp;<span class="ident" id="1688584">badonm</span><span class="op" id="1688590">(</span><span class="op" id="1688591">)</span>&nbsp;<span class="op" id="1688593">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688596">gothrow</span><span class="op" id="1688603">(</span><span class="string" id="1688604">&#34;onM&nbsp;called&nbsp;from&nbsp;signal&nbsp;goroutine&#34;</span><span class="op" id="1688638">)</span><br>
<span class="lineno"></span><span class="op" id="1688640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1688643">//&nbsp;C&nbsp;functions&nbsp;that&nbsp;run&nbsp;on&nbsp;the&nbsp;M&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="1688683">//&nbsp;Call&nbsp;using&nbsp;mcall.</span><br>
<span class="lineno">100</span><span class="keyword" id="1688704">func</span>&nbsp;<span class="ident" id="1688709">gosched_m</span><span class="op" id="1688718">(</span><span class="op" id="1688719">*</span><span class="ident" id="1688720">g</span><span class="op" id="1688721">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688723">func</span>&nbsp;<span class="ident" id="1688728">park_m</span><span class="op" id="1688734">(</span><span class="op" id="1688735">*</span><span class="ident" id="1688736">g</span><span class="op" id="1688737">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688739">func</span>&nbsp;<span class="ident" id="1688744">recovery_m</span><span class="op" id="1688754">(</span><span class="op" id="1688755">*</span><span class="ident" id="1688756">g</span><span class="op" id="1688757">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1688760">//&nbsp;More&nbsp;C&nbsp;functions&nbsp;that&nbsp;run&nbsp;on&nbsp;the&nbsp;M&nbsp;stack.</span><br>
<span class="lineno">105</span><span class="comment" id="1688805">//&nbsp;Call&nbsp;using&nbsp;onM.</span><br>
<span class="lineno"></span><span class="keyword" id="1688824">func</span>&nbsp;<span class="ident" id="1688829">mcacheRefill_m</span><span class="op" id="1688843">(</span><span class="op" id="1688844">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688846">func</span>&nbsp;<span class="ident" id="1688851">largeAlloc_m</span><span class="op" id="1688863">(</span><span class="op" id="1688864">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688866">func</span>&nbsp;<span class="ident" id="1688871">gc_m</span><span class="op" id="1688875">(</span><span class="op" id="1688876">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688878">func</span>&nbsp;<span class="ident" id="1688883">scavenge_m</span><span class="op" id="1688893">(</span><span class="op" id="1688894">)</span><br>
<span class="lineno">110</span><span class="keyword" id="1688896">func</span>&nbsp;<span class="ident" id="1688901">setFinalizer_m</span><span class="op" id="1688915">(</span><span class="op" id="1688916">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688918">func</span>&nbsp;<span class="ident" id="1688923">removeFinalizer_m</span><span class="op" id="1688940">(</span><span class="op" id="1688941">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688943">func</span>&nbsp;<span class="ident" id="1688948">markallocated_m</span><span class="op" id="1688963">(</span><span class="op" id="1688964">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688966">func</span>&nbsp;<span class="ident" id="1688971">unrollgcprog_m</span><span class="op" id="1688985">(</span><span class="op" id="1688986">)</span><br>
<span class="lineno"></span><span class="keyword" id="1688988">func</span>&nbsp;<span class="ident" id="1688993">unrollgcproginplace_m</span><span class="op" id="1689014">(</span><span class="op" id="1689015">)</span><br>
<span class="lineno">115</span><span class="keyword" id="1689017">func</span>&nbsp;<span class="ident" id="1689022">setgcpercent_m</span><span class="op" id="1689036">(</span><span class="op" id="1689037">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689039">func</span>&nbsp;<span class="ident" id="1689044">setmaxthreads_m</span><span class="op" id="1689059">(</span><span class="op" id="1689060">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689062">func</span>&nbsp;<span class="ident" id="1689067">ready_m</span><span class="op" id="1689074">(</span><span class="op" id="1689075">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689077">func</span>&nbsp;<span class="ident" id="1689082">deferproc_m</span><span class="op" id="1689093">(</span><span class="op" id="1689094">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689096">func</span>&nbsp;<span class="ident" id="1689101">goexit_m</span><span class="op" id="1689109">(</span><span class="op" id="1689110">)</span><br>
<span class="lineno">120</span><span class="keyword" id="1689112">func</span>&nbsp;<span class="ident" id="1689117">startpanic_m</span><span class="op" id="1689129">(</span><span class="op" id="1689130">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689132">func</span>&nbsp;<span class="ident" id="1689137">dopanic_m</span><span class="op" id="1689146">(</span><span class="op" id="1689147">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689149">func</span>&nbsp;<span class="ident" id="1689154">readmemstats_m</span><span class="op" id="1689168">(</span><span class="op" id="1689169">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689171">func</span>&nbsp;<span class="ident" id="1689176">writeheapdump_m</span><span class="op" id="1689191">(</span><span class="op" id="1689192">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="1689195">//&nbsp;memclr&nbsp;clears&nbsp;n&nbsp;bytes&nbsp;starting&nbsp;at&nbsp;ptr.</span><br>
<span class="lineno"></span><span class="comment" id="1689237">//&nbsp;in&nbsp;memclr_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1689254">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1689268">func</span>&nbsp;<span class="ident" id="1689273">memclr</span><span class="op" id="1689279">(</span><span class="ident" id="1689280">ptr</span>&nbsp;<span class="ident" id="1689284">unsafe</span><span class="op" id="1689290">.</span><span class="ident" id="1689291">Pointer</span><span class="op" id="1689298">,</span>&nbsp;<span class="ident" id="1689300">n</span>&nbsp;<span class="builtintype" id="1689302">uintptr</span><span class="op" id="1689309">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="1689312">//&nbsp;memmove&nbsp;copies&nbsp;n&nbsp;bytes&nbsp;from&nbsp;&#34;from&#34;&nbsp;to&nbsp;&#34;to&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1689359">//&nbsp;in&nbsp;memmove_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1689377">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1689391">func</span>&nbsp;<span class="ident" id="1689396">memmove</span><span class="op" id="1689403">(</span><span class="ident" id="1689404">to</span>&nbsp;<span class="ident" id="1689407">unsafe</span><span class="op" id="1689413">.</span><span class="ident" id="1689414">Pointer</span><span class="op" id="1689421">,</span>&nbsp;<span class="ident" id="1689423">from</span>&nbsp;<span class="ident" id="1689428">unsafe</span><span class="op" id="1689434">.</span><span class="ident" id="1689435">Pointer</span><span class="op" id="1689442">,</span>&nbsp;<span class="ident" id="1689444">n</span>&nbsp;<span class="builtintype" id="1689446">uintptr</span><span class="op" id="1689453">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="1689456">func</span>&nbsp;<span class="ident" id="1689461">starttheworld</span><span class="op" id="1689474">(</span><span class="op" id="1689475">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689477">func</span>&nbsp;<span class="ident" id="1689482">stoptheworld</span><span class="op" id="1689494">(</span><span class="op" id="1689495">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689497">func</span>&nbsp;<span class="ident" id="1689502">newextram</span><span class="op" id="1689511">(</span><span class="op" id="1689512">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689514">func</span>&nbsp;<span class="ident" id="1689519">lockOSThread</span><span class="op" id="1689531">(</span><span class="op" id="1689532">)</span><br>
<span class="lineno"></span><span class="keyword" id="1689534">func</span>&nbsp;<span class="ident" id="1689539">unlockOSThread</span><span class="op" id="1689553">(</span><span class="op" id="1689554">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1689557">//&nbsp;exported&nbsp;value&nbsp;for&nbsp;testing</span><br>
<span class="lineno"></span><span class="keyword" id="1689587">var</span>&nbsp;<span class="ident" id="1689591">hashLoad</span>&nbsp;<span class="op" id="1689600">=</span>&nbsp;<span class="ident" id="1689602">loadFactor</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1689614">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno">145</span><span class="keyword" id="1689628">func</span>&nbsp;<span class="ident" id="1689633">fastrand1</span><span class="op" id="1689642">(</span><span class="op" id="1689643">)</span>&nbsp;<span class="builtintype" id="1689645">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1689653">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1689667">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1689681">func</span>&nbsp;<span class="ident" id="1689686">memeq</span><span class="op" id="1689691">(</span><span class="ident" id="1689692">a</span><span class="op" id="1689693">,</span>&nbsp;<span class="ident" id="1689695">b</span>&nbsp;<span class="ident" id="1689697">unsafe</span><span class="op" id="1689703">.</span><span class="ident" id="1689704">Pointer</span><span class="op" id="1689711">,</span>&nbsp;<span class="ident" id="1689713">size</span>&nbsp;<span class="builtintype" id="1689718">uintptr</span><span class="op" id="1689725">)</span>&nbsp;<span class="builtintype" id="1689727">bool</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="comment" id="1689733">//&nbsp;noescape&nbsp;hides&nbsp;a&nbsp;pointer&nbsp;from&nbsp;escape&nbsp;analysis.&nbsp;&nbsp;noescape&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1689796">//&nbsp;the&nbsp;identity&nbsp;function&nbsp;but&nbsp;escape&nbsp;analysis&nbsp;doesn&#39;t&nbsp;think&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1689859">//&nbsp;output&nbsp;depends&nbsp;on&nbsp;the&nbsp;input.&nbsp;&nbsp;noescape&nbsp;is&nbsp;inlined&nbsp;and&nbsp;currently</span><br>
<span class="lineno"></span><span class="comment" id="1689926">//&nbsp;compiles&nbsp;down&nbsp;to&nbsp;a&nbsp;single&nbsp;xor&nbsp;instruction.</span><br>
<span class="lineno">155</span><span class="comment" id="1689972">//&nbsp;USE&nbsp;CAREFULLY!</span><br>
<span class="lineno"></span><span class="comment" id="1689990">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1690003">func</span>&nbsp;<span class="ident" id="1690008">noescape</span><span class="op" id="1690016">(</span><span class="ident" id="1690017">p</span>&nbsp;<span class="ident" id="1690019">unsafe</span><span class="op" id="1690025">.</span><span class="ident" id="1690026">Pointer</span><span class="op" id="1690033">)</span>&nbsp;<span class="ident" id="1690035">unsafe</span><span class="op" id="1690041">.</span><span class="ident" id="1690042">Pointer</span>&nbsp;<span class="op" id="1690050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690053">x</span>&nbsp;<span class="op" id="1690055">:=</span>&nbsp;<span class="builtintype" id="1690058">uintptr</span><span class="op" id="1690065">(</span><span class="ident" id="1690066">p</span><span class="op" id="1690067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690070">return</span>&nbsp;<span class="ident" id="1690077">unsafe</span><span class="op" id="1690083">.</span><span class="ident" id="1690084">Pointer</span><span class="op" id="1690091">(</span><span class="ident" id="1690092">x</span>&nbsp;<span class="op" id="1690094">^</span>&nbsp;<span class="num" id="1690096">0</span><span class="op" id="1690097">)</span><br>
<span class="lineno">160</span><span class="op" id="1690099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690102">func</span>&nbsp;<span class="ident" id="1690107">entersyscall</span><span class="op" id="1690119">(</span><span class="op" id="1690120">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690122">func</span>&nbsp;<span class="ident" id="1690127">reentersyscall</span><span class="op" id="1690141">(</span><span class="ident" id="1690142">pc</span>&nbsp;<span class="builtintype" id="1690145">uintptr</span><span class="op" id="1690152">,</span>&nbsp;<span class="ident" id="1690154">sp</span>&nbsp;<span class="ident" id="1690157">unsafe</span><span class="op" id="1690163">.</span><span class="ident" id="1690164">Pointer</span><span class="op" id="1690171">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690173">func</span>&nbsp;<span class="ident" id="1690178">entersyscallblock</span><span class="op" id="1690195">(</span><span class="op" id="1690196">)</span><br>
<span class="lineno">165</span><span class="keyword" id="1690198">func</span>&nbsp;<span class="ident" id="1690203">exitsyscall</span><span class="op" id="1690214">(</span><span class="op" id="1690215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690218">func</span>&nbsp;<span class="ident" id="1690223">cgocallback</span><span class="op" id="1690234">(</span><span class="ident" id="1690235">fn</span><span class="op" id="1690237">,</span>&nbsp;<span class="ident" id="1690239">frame</span>&nbsp;<span class="ident" id="1690245">unsafe</span><span class="op" id="1690251">.</span><span class="ident" id="1690252">Pointer</span><span class="op" id="1690259">,</span>&nbsp;<span class="ident" id="1690261">framesize</span>&nbsp;<span class="builtintype" id="1690271">uintptr</span><span class="op" id="1690278">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690280">func</span>&nbsp;<span class="ident" id="1690285">gogo</span><span class="op" id="1690289">(</span><span class="ident" id="1690290">buf</span>&nbsp;<span class="op" id="1690294">*</span><span class="ident" id="1690295">gobuf</span><span class="op" id="1690300">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690302">func</span>&nbsp;<span class="ident" id="1690307">gosave</span><span class="op" id="1690313">(</span><span class="ident" id="1690314">buf</span>&nbsp;<span class="op" id="1690318">*</span><span class="ident" id="1690319">gobuf</span><span class="op" id="1690324">)</span><br>
<span class="lineno">170</span><span class="keyword" id="1690326">func</span>&nbsp;<span class="ident" id="1690331">read</span><span class="op" id="1690335">(</span><span class="ident" id="1690336">fd</span>&nbsp;<span class="builtintype" id="1690339">int32</span><span class="op" id="1690344">,</span>&nbsp;<span class="ident" id="1690346">p</span>&nbsp;<span class="ident" id="1690348">unsafe</span><span class="op" id="1690354">.</span><span class="ident" id="1690355">Pointer</span><span class="op" id="1690362">,</span>&nbsp;<span class="ident" id="1690364">n</span>&nbsp;<span class="builtintype" id="1690366">int32</span><span class="op" id="1690371">)</span>&nbsp;<span class="builtintype" id="1690373">int32</span><br>
<span class="lineno"></span><span class="keyword" id="1690379">func</span>&nbsp;<span class="builtinfunc" id="1690384">close</span><span class="op" id="1690389">(</span><span class="ident" id="1690390">fd</span>&nbsp;<span class="builtintype" id="1690393">int32</span><span class="op" id="1690398">)</span>&nbsp;<span class="builtintype" id="1690400">int32</span><br>
<span class="lineno"></span><span class="keyword" id="1690406">func</span>&nbsp;<span class="ident" id="1690411">mincore</span><span class="op" id="1690418">(</span><span class="ident" id="1690419">addr</span>&nbsp;<span class="ident" id="1690424">unsafe</span><span class="op" id="1690430">.</span><span class="ident" id="1690431">Pointer</span><span class="op" id="1690438">,</span>&nbsp;<span class="ident" id="1690440">n</span>&nbsp;<span class="builtintype" id="1690442">uintptr</span><span class="op" id="1690449">,</span>&nbsp;<span class="ident" id="1690451">dst</span>&nbsp;<span class="op" id="1690455">*</span><span class="builtintype" id="1690456">byte</span><span class="op" id="1690460">)</span>&nbsp;<span class="builtintype" id="1690462">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1690469">//go:noescape</span><br>
<span class="lineno">175</span><span class="keyword" id="1690483">func</span>&nbsp;<span class="ident" id="1690488">jmpdefer</span><span class="op" id="1690496">(</span><span class="ident" id="1690497">fv</span>&nbsp;<span class="op" id="1690500">*</span><span class="ident" id="1690501">funcval</span><span class="op" id="1690508">,</span>&nbsp;<span class="ident" id="1690510">argp</span>&nbsp;<span class="builtintype" id="1690515">uintptr</span><span class="op" id="1690522">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690524">func</span>&nbsp;<span class="ident" id="1690529">exit1</span><span class="op" id="1690534">(</span><span class="ident" id="1690535">code</span>&nbsp;<span class="builtintype" id="1690540">int32</span><span class="op" id="1690545">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690547">func</span>&nbsp;<span class="ident" id="1690552">asminit</span><span class="op" id="1690559">(</span><span class="op" id="1690560">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690562">func</span>&nbsp;<span class="ident" id="1690567">setg</span><span class="op" id="1690571">(</span><span class="ident" id="1690572">gg</span>&nbsp;<span class="op" id="1690575">*</span><span class="ident" id="1690576">g</span><span class="op" id="1690577">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690579">func</span>&nbsp;<span class="ident" id="1690584">exit</span><span class="op" id="1690588">(</span><span class="ident" id="1690589">code</span>&nbsp;<span class="builtintype" id="1690594">int32</span><span class="op" id="1690599">)</span><br>
<span class="lineno">180</span><span class="keyword" id="1690601">func</span>&nbsp;<span class="ident" id="1690606">breakpoint</span><span class="op" id="1690616">(</span><span class="op" id="1690617">)</span><br>
<span class="lineno"></span><span class="keyword" id="1690619">func</span>&nbsp;<span class="ident" id="1690624">nanotime</span><span class="op" id="1690632">(</span><span class="op" id="1690633">)</span>&nbsp;<span class="ident" id="1690635">int64</span><br>
<span class="lineno"></span><span class="keyword" id="1690641">func</span>&nbsp;<span class="ident" id="1690646">usleep</span><span class="op" id="1690652">(</span><span class="ident" id="1690653">usec</span>&nbsp;<span class="builtintype" id="1690658">uint32</span><span class="op" id="1690664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1690667">//&nbsp;careful:&nbsp;cputicks&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;monotonic!&nbsp;&nbsp;In&nbsp;particular,&nbsp;we&nbsp;have</span><br>
<span class="lineno">185</span><span class="comment" id="1690747">//&nbsp;noticed&nbsp;drift&nbsp;between&nbsp;cpus&nbsp;on&nbsp;certain&nbsp;os/arch&nbsp;combinations.&nbsp;&nbsp;See&nbsp;issue&nbsp;8976.</span><br>
<span class="lineno"></span><span class="keyword" id="1690827">func</span>&nbsp;<span class="ident" id="1690832">cputicks</span><span class="op" id="1690840">(</span><span class="op" id="1690841">)</span>&nbsp;<span class="ident" id="1690843">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690850">func</span>&nbsp;<span class="ident" id="1690855">mmap</span><span class="op" id="1690859">(</span><span class="ident" id="1690860">addr</span>&nbsp;<span class="ident" id="1690865">unsafe</span><span class="op" id="1690871">.</span><span class="ident" id="1690872">Pointer</span><span class="op" id="1690879">,</span>&nbsp;<span class="ident" id="1690881">n</span>&nbsp;<span class="builtintype" id="1690883">uintptr</span><span class="op" id="1690890">,</span>&nbsp;<span class="ident" id="1690892">prot</span><span class="op" id="1690896">,</span>&nbsp;<span class="ident" id="1690898">flags</span><span class="op" id="1690903">,</span>&nbsp;<span class="ident" id="1690905">fd</span>&nbsp;<span class="builtintype" id="1690908">int32</span><span class="op" id="1690913">,</span>&nbsp;<span class="ident" id="1690915">off</span>&nbsp;<span class="builtintype" id="1690919">uint32</span><span class="op" id="1690925">)</span>&nbsp;<span class="ident" id="1690927">unsafe</span><span class="op" id="1690933">.</span><span class="ident" id="1690934">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="1690942">func</span>&nbsp;<span class="ident" id="1690947">munmap</span><span class="op" id="1690953">(</span><span class="ident" id="1690954">addr</span>&nbsp;<span class="ident" id="1690959">unsafe</span><span class="op" id="1690965">.</span><span class="ident" id="1690966">Pointer</span><span class="op" id="1690973">,</span>&nbsp;<span class="ident" id="1690975">n</span>&nbsp;<span class="builtintype" id="1690977">uintptr</span><span class="op" id="1690984">)</span><br>
<span class="lineno">190</span><span class="keyword" id="1690986">func</span>&nbsp;<span class="ident" id="1690991">madvise</span><span class="op" id="1690998">(</span><span class="ident" id="1690999">addr</span>&nbsp;<span class="ident" id="1691004">unsafe</span><span class="op" id="1691010">.</span><span class="ident" id="1691011">Pointer</span><span class="op" id="1691018">,</span>&nbsp;<span class="ident" id="1691020">n</span>&nbsp;<span class="builtintype" id="1691022">uintptr</span><span class="op" id="1691029">,</span>&nbsp;<span class="ident" id="1691031">flags</span>&nbsp;<span class="builtintype" id="1691037">int32</span><span class="op" id="1691042">)</span><br>
<span class="lineno"></span><span class="keyword" id="1691044">func</span>&nbsp;<span class="ident" id="1691049">reflectcall</span><span class="op" id="1691060">(</span><span class="ident" id="1691061">fn</span><span class="op" id="1691063">,</span>&nbsp;<span class="ident" id="1691065">arg</span>&nbsp;<span class="ident" id="1691069">unsafe</span><span class="op" id="1691075">.</span><span class="ident" id="1691076">Pointer</span><span class="op" id="1691083">,</span>&nbsp;<span class="ident" id="1691085">n</span>&nbsp;<span class="builtintype" id="1691087">uint32</span><span class="op" id="1691093">,</span>&nbsp;<span class="ident" id="1691095">retoffset</span>&nbsp;<span class="builtintype" id="1691105">uint32</span><span class="op" id="1691111">)</span><br>
<span class="lineno"></span><span class="keyword" id="1691113">func</span>&nbsp;<span class="ident" id="1691118">osyield</span><span class="op" id="1691125">(</span><span class="op" id="1691126">)</span><br>
<span class="lineno"></span><span class="keyword" id="1691128">func</span>&nbsp;<span class="ident" id="1691133">procyield</span><span class="op" id="1691142">(</span><span class="ident" id="1691143">cycles</span>&nbsp;<span class="builtintype" id="1691150">uint32</span><span class="op" id="1691156">)</span><br>
<span class="lineno"></span><span class="keyword" id="1691158">func</span>&nbsp;<span class="ident" id="1691163">cgocallback_gofunc</span><span class="op" id="1691181">(</span><span class="ident" id="1691182">fv</span>&nbsp;<span class="op" id="1691185">*</span><span class="ident" id="1691186">funcval</span><span class="op" id="1691193">,</span>&nbsp;<span class="ident" id="1691195">frame</span>&nbsp;<span class="ident" id="1691201">unsafe</span><span class="op" id="1691207">.</span><span class="ident" id="1691208">Pointer</span><span class="op" id="1691215">,</span>&nbsp;<span class="ident" id="1691217">framesize</span>&nbsp;<span class="builtintype" id="1691227">uintptr</span><span class="op" id="1691234">)</span><br>
<span class="lineno">195</span><span class="keyword" id="1691236">func</span>&nbsp;<span class="ident" id="1691241">readgogc</span><span class="op" id="1691249">(</span><span class="op" id="1691250">)</span>&nbsp;<span class="builtintype" id="1691252">int32</span><br>
<span class="lineno"></span><span class="keyword" id="1691258">func</span>&nbsp;<span class="ident" id="1691263">purgecachedstats</span><span class="op" id="1691279">(</span><span class="ident" id="1691280">c</span>&nbsp;<span class="op" id="1691282">*</span><span class="ident" id="1691283">mcache</span><span class="op" id="1691289">)</span><br>
<span class="lineno"></span><span class="keyword" id="1691291">func</span>&nbsp;<span class="ident" id="1691296">gostringnocopy</span><span class="op" id="1691310">(</span><span class="ident" id="1691311">b</span>&nbsp;<span class="op" id="1691313">*</span><span class="builtintype" id="1691314">byte</span><span class="op" id="1691318">)</span>&nbsp;<span class="builtintype" id="1691320">string</span><br>
<span class="lineno"></span><span class="keyword" id="1691327">func</span>&nbsp;<span class="ident" id="1691332">goexit</span><span class="op" id="1691338">(</span><span class="op" id="1691339">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="1691342">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691356">func</span>&nbsp;<span class="ident" id="1691361">write</span><span class="op" id="1691366">(</span><span class="ident" id="1691367">fd</span>&nbsp;<span class="builtintype" id="1691370">uintptr</span><span class="op" id="1691377">,</span>&nbsp;<span class="ident" id="1691379">p</span>&nbsp;<span class="ident" id="1691381">unsafe</span><span class="op" id="1691387">.</span><span class="ident" id="1691388">Pointer</span><span class="op" id="1691395">,</span>&nbsp;<span class="ident" id="1691397">n</span>&nbsp;<span class="builtintype" id="1691399">int32</span><span class="op" id="1691404">)</span>&nbsp;<span class="builtintype" id="1691406">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1691413">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691427">func</span>&nbsp;<span class="ident" id="1691432">cas</span><span class="op" id="1691435">(</span><span class="ident" id="1691436">ptr</span>&nbsp;<span class="op" id="1691440">*</span><span class="builtintype" id="1691441">uint32</span><span class="op" id="1691447">,</span>&nbsp;<span class="ident" id="1691449">old</span><span class="op" id="1691452">,</span>&nbsp;<span class="builtinfunc" id="1691454">new</span>&nbsp;<span class="builtintype" id="1691458">uint32</span><span class="op" id="1691464">)</span>&nbsp;<span class="builtintype" id="1691466">bool</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="1691472">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691486">func</span>&nbsp;<span class="ident" id="1691491">casp</span><span class="op" id="1691495">(</span><span class="ident" id="1691496">ptr</span>&nbsp;<span class="op" id="1691500">*</span><span class="ident" id="1691501">unsafe</span><span class="op" id="1691507">.</span><span class="ident" id="1691508">Pointer</span><span class="op" id="1691515">,</span>&nbsp;<span class="ident" id="1691517">old</span><span class="op" id="1691520">,</span>&nbsp;<span class="builtinfunc" id="1691522">new</span>&nbsp;<span class="ident" id="1691526">unsafe</span><span class="op" id="1691532">.</span><span class="ident" id="1691533">Pointer</span><span class="op" id="1691540">)</span>&nbsp;<span class="builtintype" id="1691542">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1691548">//go:noescape</span><br>
<span class="lineno">210</span><span class="keyword" id="1691562">func</span>&nbsp;<span class="ident" id="1691567">casuintptr</span><span class="op" id="1691577">(</span><span class="ident" id="1691578">ptr</span>&nbsp;<span class="op" id="1691582">*</span><span class="builtintype" id="1691583">uintptr</span><span class="op" id="1691590">,</span>&nbsp;<span class="ident" id="1691592">old</span><span class="op" id="1691595">,</span>&nbsp;<span class="builtinfunc" id="1691597">new</span>&nbsp;<span class="builtintype" id="1691601">uintptr</span><span class="op" id="1691608">)</span>&nbsp;<span class="builtintype" id="1691610">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1691616">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691630">func</span>&nbsp;<span class="ident" id="1691635">atomicstoreuintptr</span><span class="op" id="1691653">(</span><span class="ident" id="1691654">ptr</span>&nbsp;<span class="op" id="1691658">*</span><span class="builtintype" id="1691659">uintptr</span><span class="op" id="1691666">,</span>&nbsp;<span class="builtinfunc" id="1691668">new</span>&nbsp;<span class="builtintype" id="1691672">uintptr</span><span class="op" id="1691679">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="1691682">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691696">func</span>&nbsp;<span class="ident" id="1691701">atomicloaduintptr</span><span class="op" id="1691718">(</span><span class="ident" id="1691719">ptr</span>&nbsp;<span class="op" id="1691723">*</span><span class="builtintype" id="1691724">uintptr</span><span class="op" id="1691731">)</span>&nbsp;<span class="builtintype" id="1691733">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1691742">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691756">func</span>&nbsp;<span class="ident" id="1691761">atomicloaduint</span><span class="op" id="1691775">(</span><span class="ident" id="1691776">ptr</span>&nbsp;<span class="op" id="1691780">*</span><span class="builtintype" id="1691781">uint</span><span class="op" id="1691785">)</span>&nbsp;<span class="builtintype" id="1691787">uint</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="1691793">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1691807">func</span>&nbsp;<span class="ident" id="1691812">setcallerpc</span><span class="op" id="1691823">(</span><span class="ident" id="1691824">argp</span>&nbsp;<span class="ident" id="1691829">unsafe</span><span class="op" id="1691835">.</span><span class="ident" id="1691836">Pointer</span><span class="op" id="1691843">,</span>&nbsp;<span class="ident" id="1691845">pc</span>&nbsp;<span class="builtintype" id="1691848">uintptr</span><span class="op" id="1691855">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1691858">//&nbsp;getcallerpc&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;(PC)&nbsp;of&nbsp;its&nbsp;caller&#39;s&nbsp;caller.</span><br>
<span class="lineno">225</span><span class="comment" id="1691930">//&nbsp;getcallersp&nbsp;returns&nbsp;the&nbsp;stack&nbsp;pointer&nbsp;(SP)&nbsp;of&nbsp;its&nbsp;caller&#39;s&nbsp;caller.</span><br>
<span class="lineno"></span><span class="comment" id="1692000">//&nbsp;For&nbsp;both,&nbsp;the&nbsp;argp&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;caller&#39;s&nbsp;first&nbsp;function&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="1692081">//&nbsp;The&nbsp;implementation&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;use&nbsp;argp,&nbsp;depending&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1692141">//&nbsp;the&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="comment" id="1692162">//</span><br>
<span class="lineno">230</span><span class="comment" id="1692165">//&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="1692181">//</span><br>
<span class="lineno"></span><span class="comment" id="1692184">//&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;f(arg1,&nbsp;arg2,&nbsp;arg3&nbsp;int)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="1692218">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pc&nbsp;:=&nbsp;getcallerpc(unsafe.Pointer(&amp;arg1))</span><br>
<span class="lineno"></span><span class="comment" id="1692263">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sp&nbsp;:=&nbsp;getcallerpc(unsafe.Pointer(&amp;arg2))</span><br>
<span class="lineno">235</span><span class="comment" id="1692308">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="1692313">//</span><br>
<span class="lineno"></span><span class="comment" id="1692316">//&nbsp;These&nbsp;two&nbsp;lines&nbsp;find&nbsp;the&nbsp;PC&nbsp;and&nbsp;SP&nbsp;immediately&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="1692376">//&nbsp;the&nbsp;call&nbsp;to&nbsp;f&nbsp;(where&nbsp;f&nbsp;will&nbsp;return).</span><br>
<span class="lineno"></span><span class="comment" id="1692416">//</span><br>
<span class="lineno">240</span><span class="comment" id="1692419">//&nbsp;The&nbsp;call&nbsp;to&nbsp;getcallerpc&nbsp;and&nbsp;getcallersp&nbsp;must&nbsp;be&nbsp;done&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1692482">//&nbsp;frame&nbsp;being&nbsp;asked&nbsp;about.&nbsp;It&nbsp;would&nbsp;not&nbsp;be&nbsp;correct&nbsp;for&nbsp;f&nbsp;to&nbsp;pass&nbsp;&amp;arg1</span><br>
<span class="lineno"></span><span class="comment" id="1692554">//&nbsp;to&nbsp;another&nbsp;function&nbsp;g&nbsp;and&nbsp;let&nbsp;g&nbsp;call&nbsp;getcallerpc/getcallersp.</span><br>
<span class="lineno"></span><span class="comment" id="1692619">//&nbsp;The&nbsp;call&nbsp;inside&nbsp;g&nbsp;might&nbsp;return&nbsp;information&nbsp;about&nbsp;g&#39;s&nbsp;caller&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1692685">//&nbsp;information&nbsp;about&nbsp;f&#39;s&nbsp;caller&nbsp;or&nbsp;complete&nbsp;garbage.</span><br>
<span class="lineno">245</span><span class="comment" id="1692738">//</span><br>
<span class="lineno"></span><span class="comment" id="1692741">//&nbsp;The&nbsp;result&nbsp;of&nbsp;getcallersp&nbsp;is&nbsp;correct&nbsp;at&nbsp;the&nbsp;time&nbsp;of&nbsp;the&nbsp;return,</span><br>
<span class="lineno"></span><span class="comment" id="1692808">//&nbsp;but&nbsp;it&nbsp;may&nbsp;be&nbsp;invalidated&nbsp;by&nbsp;any&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="1692874">//&nbsp;that&nbsp;might&nbsp;relocate&nbsp;the&nbsp;stack&nbsp;in&nbsp;order&nbsp;to&nbsp;grow&nbsp;or&nbsp;shrink&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="1692938">//&nbsp;A&nbsp;general&nbsp;rule&nbsp;is&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;getcallersp&nbsp;should&nbsp;be&nbsp;used</span><br>
<span class="lineno">250</span><span class="comment" id="1693005">//&nbsp;immediately&nbsp;and&nbsp;can&nbsp;only&nbsp;be&nbsp;passed&nbsp;to&nbsp;nosplit&nbsp;functions.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693066">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1693080">func</span>&nbsp;<span class="ident" id="1693085">getcallerpc</span><span class="op" id="1693096">(</span><span class="ident" id="1693097">argp</span>&nbsp;<span class="ident" id="1693102">unsafe</span><span class="op" id="1693108">.</span><span class="ident" id="1693109">Pointer</span><span class="op" id="1693116">)</span>&nbsp;<span class="builtintype" id="1693118">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="1693127">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1693141">func</span>&nbsp;<span class="ident" id="1693146">getcallersp</span><span class="op" id="1693157">(</span><span class="ident" id="1693158">argp</span>&nbsp;<span class="ident" id="1693163">unsafe</span><span class="op" id="1693169">.</span><span class="ident" id="1693170">Pointer</span><span class="op" id="1693177">)</span>&nbsp;<span class="builtintype" id="1693179">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693188">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1693202">func</span>&nbsp;<span class="ident" id="1693207">asmcgocall</span><span class="op" id="1693217">(</span><span class="ident" id="1693218">fn</span><span class="op" id="1693220">,</span>&nbsp;<span class="ident" id="1693222">arg</span>&nbsp;<span class="ident" id="1693226">unsafe</span><span class="op" id="1693232">.</span><span class="ident" id="1693233">Pointer</span><span class="op" id="1693240">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="1693243">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1693257">func</span>&nbsp;<span class="ident" id="1693262">asmcgocall_errno</span><span class="op" id="1693278">(</span><span class="ident" id="1693279">fn</span><span class="op" id="1693281">,</span>&nbsp;<span class="ident" id="1693283">arg</span>&nbsp;<span class="ident" id="1693287">unsafe</span><span class="op" id="1693293">.</span><span class="ident" id="1693294">Pointer</span><span class="op" id="1693301">)</span>&nbsp;<span class="builtintype" id="1693303">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693310">//go:noescape</span><br>
<span class="lineno">265</span><span class="keyword" id="1693324">func</span>&nbsp;<span class="ident" id="1693329">open</span><span class="op" id="1693333">(</span><span class="ident" id="1693334">name</span>&nbsp;<span class="op" id="1693339">*</span><span class="builtintype" id="1693340">byte</span><span class="op" id="1693344">,</span>&nbsp;<span class="ident" id="1693346">mode</span><span class="op" id="1693350">,</span>&nbsp;<span class="ident" id="1693352">perm</span>&nbsp;<span class="builtintype" id="1693357">int32</span><span class="op" id="1693362">)</span>&nbsp;<span class="builtintype" id="1693364">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693371">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1693385">func</span>&nbsp;<span class="ident" id="1693390">gotraceback</span><span class="op" id="1693401">(</span><span class="op" id="1693402">*</span><span class="builtintype" id="1693403">bool</span><span class="op" id="1693407">)</span>&nbsp;<span class="builtintype" id="1693409">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="1693416">const</span>&nbsp;<span class="ident" id="1693422">_NoArgs</span>&nbsp;<span class="op" id="1693430">=</span>&nbsp;<span class="op" id="1693432">^</span><span class="builtintype" id="1693433">uintptr</span><span class="op" id="1693440">(</span><span class="num" id="1693441">0</span><span class="op" id="1693442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1693445">func</span>&nbsp;<span class="ident" id="1693450">newstack</span><span class="op" id="1693458">(</span><span class="op" id="1693459">)</span><br>
<span class="lineno"></span><span class="keyword" id="1693461">func</span>&nbsp;<span class="ident" id="1693466">newproc</span><span class="op" id="1693473">(</span><span class="op" id="1693474">)</span><br>
<span class="lineno"></span><span class="keyword" id="1693476">func</span>&nbsp;<span class="ident" id="1693481">morestack</span><span class="op" id="1693490">(</span><span class="op" id="1693491">)</span><br>
<span class="lineno">275</span><span class="keyword" id="1693493">func</span>&nbsp;<span class="ident" id="1693498">mstart</span><span class="op" id="1693504">(</span><span class="op" id="1693505">)</span><br>
<span class="lineno"></span><span class="keyword" id="1693507">func</span>&nbsp;<span class="ident" id="1693512">rt0_go</span><span class="op" id="1693518">(</span><span class="op" id="1693519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693522">//&nbsp;return0&nbsp;is&nbsp;a&nbsp;stub&nbsp;used&nbsp;to&nbsp;return&nbsp;0&nbsp;from&nbsp;deferproc.</span><br>
<span class="lineno"></span><span class="comment" id="1693576">//&nbsp;It&nbsp;is&nbsp;called&nbsp;at&nbsp;the&nbsp;very&nbsp;end&nbsp;of&nbsp;deferproc&nbsp;to&nbsp;signal</span><br>
<span class="lineno">280</span><span class="comment" id="1693631">//&nbsp;the&nbsp;calling&nbsp;Go&nbsp;function&nbsp;that&nbsp;it&nbsp;should&nbsp;not&nbsp;jump</span><br>
<span class="lineno"></span><span class="comment" id="1693682">//&nbsp;to&nbsp;deferreturn.</span><br>
<span class="lineno"></span><span class="comment" id="1693701">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno"></span><span class="keyword" id="1693715">func</span>&nbsp;<span class="ident" id="1693720">return0</span><span class="op" id="1693727">(</span><span class="op" id="1693728">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="1693731">//&nbsp;thunk&nbsp;to&nbsp;call&nbsp;time.now.</span><br>
<span class="lineno"></span><span class="keyword" id="1693758">func</span>&nbsp;<span class="ident" id="1693763">timenow</span><span class="op" id="1693770">(</span><span class="op" id="1693771">)</span>&nbsp;<span class="op" id="1693773">(</span><span class="ident" id="1693774">sec</span>&nbsp;<span class="ident" id="1693778">int64</span><span class="op" id="1693783">,</span>&nbsp;<span class="ident" id="1693785">nsec</span>&nbsp;<span class="builtintype" id="1693790">int32</span><span class="op" id="1693795">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693798">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1693812">//&nbsp;not&nbsp;called&nbsp;directly;&nbsp;definitions&nbsp;here&nbsp;supply&nbsp;type&nbsp;information&nbsp;for&nbsp;traceback.</span><br>
<span class="lineno">290</span><span class="keyword" id="1693892">func</span>&nbsp;<span class="ident" id="1693897">call16</span><span class="op" id="1693903">(</span><span class="ident" id="1693904">fn</span><span class="op" id="1693906">,</span>&nbsp;<span class="ident" id="1693908">arg</span>&nbsp;<span class="ident" id="1693912">unsafe</span><span class="op" id="1693918">.</span><span class="ident" id="1693919">Pointer</span><span class="op" id="1693926">,</span>&nbsp;<span class="ident" id="1693928">n</span><span class="op" id="1693929">,</span>&nbsp;<span class="ident" id="1693931">retoffset</span>&nbsp;<span class="builtintype" id="1693941">uint32</span><span class="op" id="1693947">)</span><br>
<span class="lineno"></span><span class="keyword" id="1693949">func</span>&nbsp;<span class="ident" id="1693954">call32</span><span class="op" id="1693960">(</span><span class="ident" id="1693961">fn</span><span class="op" id="1693963">,</span>&nbsp;<span class="ident" id="1693965">arg</span>&nbsp;<span class="ident" id="1693969">unsafe</span><span class="op" id="1693975">.</span><span class="ident" id="1693976">Pointer</span><span class="op" id="1693983">,</span>&nbsp;<span class="ident" id="1693985">n</span><span class="op" id="1693986">,</span>&nbsp;<span class="ident" id="1693988">retoffset</span>&nbsp;<span class="builtintype" id="1693998">uint32</span><span class="op" id="1694004">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694006">func</span>&nbsp;<span class="ident" id="1694011">call64</span><span class="op" id="1694017">(</span><span class="ident" id="1694018">fn</span><span class="op" id="1694020">,</span>&nbsp;<span class="ident" id="1694022">arg</span>&nbsp;<span class="ident" id="1694026">unsafe</span><span class="op" id="1694032">.</span><span class="ident" id="1694033">Pointer</span><span class="op" id="1694040">,</span>&nbsp;<span class="ident" id="1694042">n</span><span class="op" id="1694043">,</span>&nbsp;<span class="ident" id="1694045">retoffset</span>&nbsp;<span class="builtintype" id="1694055">uint32</span><span class="op" id="1694061">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694063">func</span>&nbsp;<span class="ident" id="1694068">call128</span><span class="op" id="1694075">(</span><span class="ident" id="1694076">fn</span><span class="op" id="1694078">,</span>&nbsp;<span class="ident" id="1694080">arg</span>&nbsp;<span class="ident" id="1694084">unsafe</span><span class="op" id="1694090">.</span><span class="ident" id="1694091">Pointer</span><span class="op" id="1694098">,</span>&nbsp;<span class="ident" id="1694100">n</span><span class="op" id="1694101">,</span>&nbsp;<span class="ident" id="1694103">retoffset</span>&nbsp;<span class="builtintype" id="1694113">uint32</span><span class="op" id="1694119">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694121">func</span>&nbsp;<span class="ident" id="1694126">call256</span><span class="op" id="1694133">(</span><span class="ident" id="1694134">fn</span><span class="op" id="1694136">,</span>&nbsp;<span class="ident" id="1694138">arg</span>&nbsp;<span class="ident" id="1694142">unsafe</span><span class="op" id="1694148">.</span><span class="ident" id="1694149">Pointer</span><span class="op" id="1694156">,</span>&nbsp;<span class="ident" id="1694158">n</span><span class="op" id="1694159">,</span>&nbsp;<span class="ident" id="1694161">retoffset</span>&nbsp;<span class="builtintype" id="1694171">uint32</span><span class="op" id="1694177">)</span><br>
<span class="lineno">295</span><span class="keyword" id="1694179">func</span>&nbsp;<span class="ident" id="1694184">call512</span><span class="op" id="1694191">(</span><span class="ident" id="1694192">fn</span><span class="op" id="1694194">,</span>&nbsp;<span class="ident" id="1694196">arg</span>&nbsp;<span class="ident" id="1694200">unsafe</span><span class="op" id="1694206">.</span><span class="ident" id="1694207">Pointer</span><span class="op" id="1694214">,</span>&nbsp;<span class="ident" id="1694216">n</span><span class="op" id="1694217">,</span>&nbsp;<span class="ident" id="1694219">retoffset</span>&nbsp;<span class="builtintype" id="1694229">uint32</span><span class="op" id="1694235">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694237">func</span>&nbsp;<span class="ident" id="1694242">call1024</span><span class="op" id="1694250">(</span><span class="ident" id="1694251">fn</span><span class="op" id="1694253">,</span>&nbsp;<span class="ident" id="1694255">arg</span>&nbsp;<span class="ident" id="1694259">unsafe</span><span class="op" id="1694265">.</span><span class="ident" id="1694266">Pointer</span><span class="op" id="1694273">,</span>&nbsp;<span class="ident" id="1694275">n</span><span class="op" id="1694276">,</span>&nbsp;<span class="ident" id="1694278">retoffset</span>&nbsp;<span class="builtintype" id="1694288">uint32</span><span class="op" id="1694294">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694296">func</span>&nbsp;<span class="ident" id="1694301">call2048</span><span class="op" id="1694309">(</span><span class="ident" id="1694310">fn</span><span class="op" id="1694312">,</span>&nbsp;<span class="ident" id="1694314">arg</span>&nbsp;<span class="ident" id="1694318">unsafe</span><span class="op" id="1694324">.</span><span class="ident" id="1694325">Pointer</span><span class="op" id="1694332">,</span>&nbsp;<span class="ident" id="1694334">n</span><span class="op" id="1694335">,</span>&nbsp;<span class="ident" id="1694337">retoffset</span>&nbsp;<span class="builtintype" id="1694347">uint32</span><span class="op" id="1694353">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694355">func</span>&nbsp;<span class="ident" id="1694360">call4096</span><span class="op" id="1694368">(</span><span class="ident" id="1694369">fn</span><span class="op" id="1694371">,</span>&nbsp;<span class="ident" id="1694373">arg</span>&nbsp;<span class="ident" id="1694377">unsafe</span><span class="op" id="1694383">.</span><span class="ident" id="1694384">Pointer</span><span class="op" id="1694391">,</span>&nbsp;<span class="ident" id="1694393">n</span><span class="op" id="1694394">,</span>&nbsp;<span class="ident" id="1694396">retoffset</span>&nbsp;<span class="builtintype" id="1694406">uint32</span><span class="op" id="1694412">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694414">func</span>&nbsp;<span class="ident" id="1694419">call8192</span><span class="op" id="1694427">(</span><span class="ident" id="1694428">fn</span><span class="op" id="1694430">,</span>&nbsp;<span class="ident" id="1694432">arg</span>&nbsp;<span class="ident" id="1694436">unsafe</span><span class="op" id="1694442">.</span><span class="ident" id="1694443">Pointer</span><span class="op" id="1694450">,</span>&nbsp;<span class="ident" id="1694452">n</span><span class="op" id="1694453">,</span>&nbsp;<span class="ident" id="1694455">retoffset</span>&nbsp;<span class="builtintype" id="1694465">uint32</span><span class="op" id="1694471">)</span><br>
<span class="lineno">300</span><span class="keyword" id="1694473">func</span>&nbsp;<span class="ident" id="1694478">call16384</span><span class="op" id="1694487">(</span><span class="ident" id="1694488">fn</span><span class="op" id="1694490">,</span>&nbsp;<span class="ident" id="1694492">arg</span>&nbsp;<span class="ident" id="1694496">unsafe</span><span class="op" id="1694502">.</span><span class="ident" id="1694503">Pointer</span><span class="op" id="1694510">,</span>&nbsp;<span class="ident" id="1694512">n</span><span class="op" id="1694513">,</span>&nbsp;<span class="ident" id="1694515">retoffset</span>&nbsp;<span class="builtintype" id="1694525">uint32</span><span class="op" id="1694531">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694533">func</span>&nbsp;<span class="ident" id="1694538">call32768</span><span class="op" id="1694547">(</span><span class="ident" id="1694548">fn</span><span class="op" id="1694550">,</span>&nbsp;<span class="ident" id="1694552">arg</span>&nbsp;<span class="ident" id="1694556">unsafe</span><span class="op" id="1694562">.</span><span class="ident" id="1694563">Pointer</span><span class="op" id="1694570">,</span>&nbsp;<span class="ident" id="1694572">n</span><span class="op" id="1694573">,</span>&nbsp;<span class="ident" id="1694575">retoffset</span>&nbsp;<span class="builtintype" id="1694585">uint32</span><span class="op" id="1694591">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694593">func</span>&nbsp;<span class="ident" id="1694598">call65536</span><span class="op" id="1694607">(</span><span class="ident" id="1694608">fn</span><span class="op" id="1694610">,</span>&nbsp;<span class="ident" id="1694612">arg</span>&nbsp;<span class="ident" id="1694616">unsafe</span><span class="op" id="1694622">.</span><span class="ident" id="1694623">Pointer</span><span class="op" id="1694630">,</span>&nbsp;<span class="ident" id="1694632">n</span><span class="op" id="1694633">,</span>&nbsp;<span class="ident" id="1694635">retoffset</span>&nbsp;<span class="builtintype" id="1694645">uint32</span><span class="op" id="1694651">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694653">func</span>&nbsp;<span class="ident" id="1694658">call131072</span><span class="op" id="1694668">(</span><span class="ident" id="1694669">fn</span><span class="op" id="1694671">,</span>&nbsp;<span class="ident" id="1694673">arg</span>&nbsp;<span class="ident" id="1694677">unsafe</span><span class="op" id="1694683">.</span><span class="ident" id="1694684">Pointer</span><span class="op" id="1694691">,</span>&nbsp;<span class="ident" id="1694693">n</span><span class="op" id="1694694">,</span>&nbsp;<span class="ident" id="1694696">retoffset</span>&nbsp;<span class="builtintype" id="1694706">uint32</span><span class="op" id="1694712">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694714">func</span>&nbsp;<span class="ident" id="1694719">call262144</span><span class="op" id="1694729">(</span><span class="ident" id="1694730">fn</span><span class="op" id="1694732">,</span>&nbsp;<span class="ident" id="1694734">arg</span>&nbsp;<span class="ident" id="1694738">unsafe</span><span class="op" id="1694744">.</span><span class="ident" id="1694745">Pointer</span><span class="op" id="1694752">,</span>&nbsp;<span class="ident" id="1694754">n</span><span class="op" id="1694755">,</span>&nbsp;<span class="ident" id="1694757">retoffset</span>&nbsp;<span class="builtintype" id="1694767">uint32</span><span class="op" id="1694773">)</span><br>
<span class="lineno">305</span><span class="keyword" id="1694775">func</span>&nbsp;<span class="ident" id="1694780">call524288</span><span class="op" id="1694790">(</span><span class="ident" id="1694791">fn</span><span class="op" id="1694793">,</span>&nbsp;<span class="ident" id="1694795">arg</span>&nbsp;<span class="ident" id="1694799">unsafe</span><span class="op" id="1694805">.</span><span class="ident" id="1694806">Pointer</span><span class="op" id="1694813">,</span>&nbsp;<span class="ident" id="1694815">n</span><span class="op" id="1694816">,</span>&nbsp;<span class="ident" id="1694818">retoffset</span>&nbsp;<span class="builtintype" id="1694828">uint32</span><span class="op" id="1694834">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694836">func</span>&nbsp;<span class="ident" id="1694841">call1048576</span><span class="op" id="1694852">(</span><span class="ident" id="1694853">fn</span><span class="op" id="1694855">,</span>&nbsp;<span class="ident" id="1694857">arg</span>&nbsp;<span class="ident" id="1694861">unsafe</span><span class="op" id="1694867">.</span><span class="ident" id="1694868">Pointer</span><span class="op" id="1694875">,</span>&nbsp;<span class="ident" id="1694877">n</span><span class="op" id="1694878">,</span>&nbsp;<span class="ident" id="1694880">retoffset</span>&nbsp;<span class="builtintype" id="1694890">uint32</span><span class="op" id="1694896">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694898">func</span>&nbsp;<span class="ident" id="1694903">call2097152</span><span class="op" id="1694914">(</span><span class="ident" id="1694915">fn</span><span class="op" id="1694917">,</span>&nbsp;<span class="ident" id="1694919">arg</span>&nbsp;<span class="ident" id="1694923">unsafe</span><span class="op" id="1694929">.</span><span class="ident" id="1694930">Pointer</span><span class="op" id="1694937">,</span>&nbsp;<span class="ident" id="1694939">n</span><span class="op" id="1694940">,</span>&nbsp;<span class="ident" id="1694942">retoffset</span>&nbsp;<span class="builtintype" id="1694952">uint32</span><span class="op" id="1694958">)</span><br>
<span class="lineno"></span><span class="keyword" id="1694960">func</span>&nbsp;<span class="ident" id="1694965">call4194304</span><span class="op" id="1694976">(</span><span class="ident" id="1694977">fn</span><span class="op" id="1694979">,</span>&nbsp;<span class="ident" id="1694981">arg</span>&nbsp;<span class="ident" id="1694985">unsafe</span><span class="op" id="1694991">.</span><span class="ident" id="1694992">Pointer</span><span class="op" id="1694999">,</span>&nbsp;<span class="ident" id="1695001">n</span><span class="op" id="1695002">,</span>&nbsp;<span class="ident" id="1695004">retoffset</span>&nbsp;<span class="builtintype" id="1695014">uint32</span><span class="op" id="1695020">)</span><br>
<span class="lineno"></span><span class="keyword" id="1695022">func</span>&nbsp;<span class="ident" id="1695027">call8388608</span><span class="op" id="1695038">(</span><span class="ident" id="1695039">fn</span><span class="op" id="1695041">,</span>&nbsp;<span class="ident" id="1695043">arg</span>&nbsp;<span class="ident" id="1695047">unsafe</span><span class="op" id="1695053">.</span><span class="ident" id="1695054">Pointer</span><span class="op" id="1695061">,</span>&nbsp;<span class="ident" id="1695063">n</span><span class="op" id="1695064">,</span>&nbsp;<span class="ident" id="1695066">retoffset</span>&nbsp;<span class="builtintype" id="1695076">uint32</span><span class="op" id="1695082">)</span><br>
<span class="lineno">310</span><span class="keyword" id="1695084">func</span>&nbsp;<span class="ident" id="1695089">call16777216</span><span class="op" id="1695101">(</span><span class="ident" id="1695102">fn</span><span class="op" id="1695104">,</span>&nbsp;<span class="ident" id="1695106">arg</span>&nbsp;<span class="ident" id="1695110">unsafe</span><span class="op" id="1695116">.</span><span class="ident" id="1695117">Pointer</span><span class="op" id="1695124">,</span>&nbsp;<span class="ident" id="1695126">n</span><span class="op" id="1695127">,</span>&nbsp;<span class="ident" id="1695129">retoffset</span>&nbsp;<span class="builtintype" id="1695139">uint32</span><span class="op" id="1695145">)</span><br>
<span class="lineno"></span><span class="keyword" id="1695147">func</span>&nbsp;<span class="ident" id="1695152">call33554432</span><span class="op" id="1695164">(</span><span class="ident" id="1695165">fn</span><span class="op" id="1695167">,</span>&nbsp;<span class="ident" id="1695169">arg</span>&nbsp;<span class="ident" id="1695173">unsafe</span><span class="op" id="1695179">.</span><span class="ident" id="1695180">Pointer</span><span class="op" id="1695187">,</span>&nbsp;<span class="ident" id="1695189">n</span><span class="op" id="1695190">,</span>&nbsp;<span class="ident" id="1695192">retoffset</span>&nbsp;<span class="builtintype" id="1695202">uint32</span><span class="op" id="1695208">)</span><br>
<span class="lineno"></span><span class="keyword" id="1695210">func</span>&nbsp;<span class="ident" id="1695215">call67108864</span><span class="op" id="1695227">(</span><span class="ident" id="1695228">fn</span><span class="op" id="1695230">,</span>&nbsp;<span class="ident" id="1695232">arg</span>&nbsp;<span class="ident" id="1695236">unsafe</span><span class="op" id="1695242">.</span><span class="ident" id="1695243">Pointer</span><span class="op" id="1695250">,</span>&nbsp;<span class="ident" id="1695252">n</span><span class="op" id="1695253">,</span>&nbsp;<span class="ident" id="1695255">retoffset</span>&nbsp;<span class="builtintype" id="1695265">uint32</span><span class="op" id="1695271">)</span><br>
<span class="lineno"></span><span class="keyword" id="1695273">func</span>&nbsp;<span class="ident" id="1695278">call134217728</span><span class="op" id="1695291">(</span><span class="ident" id="1695292">fn</span><span class="op" id="1695294">,</span>&nbsp;<span class="ident" id="1695296">arg</span>&nbsp;<span class="ident" id="1695300">unsafe</span><span class="op" id="1695306">.</span><span class="ident" id="1695307">Pointer</span><span class="op" id="1695314">,</span>&nbsp;<span class="ident" id="1695316">n</span><span class="op" id="1695317">,</span>&nbsp;<span class="ident" id="1695319">retoffset</span>&nbsp;<span class="builtintype" id="1695329">uint32</span><span class="op" id="1695335">)</span><br>
<span class="lineno"></span><span class="keyword" id="1695337">func</span>&nbsp;<span class="ident" id="1695342">call268435456</span><span class="op" id="1695355">(</span><span class="ident" id="1695356">fn</span><span class="op" id="1695358">,</span>&nbsp;<span class="ident" id="1695360">arg</span>&nbsp;<span class="ident" id="1695364">unsafe</span><span class="op" id="1695370">.</span><span class="ident" id="1695371">Pointer</span><span class="op" id="1695378">,</span>&nbsp;<span class="ident" id="1695380">n</span><span class="op" id="1695381">,</span>&nbsp;<span class="ident" id="1695383">retoffset</span>&nbsp;<span class="builtintype" id="1695393">uint32</span><span class="op" id="1695399">)</span><br>
<span class="lineno">315</span><span class="keyword" id="1695401">func</span>&nbsp;<span class="ident" id="1695406">call536870912</span><span class="op" id="1695419">(</span><span class="ident" id="1695420">fn</span><span class="op" id="1695422">,</span>&nbsp;<span class="ident" id="1695424">arg</span>&nbsp;<span class="ident" id="1695428">unsafe</span><span class="op" id="1695434">.</span><span class="ident" id="1695435">Pointer</span><span class="op" id="1695442">,</span>&nbsp;<span class="ident" id="1695444">n</span><span class="op" id="1695445">,</span>&nbsp;<span class="ident" id="1695447">retoffset</span>&nbsp;<span class="builtintype" id="1695457">uint32</span><span class="op" id="1695463">)</span><br>
<span class="lineno"></span><span class="keyword" id="1695465">func</span>&nbsp;<span class="ident" id="1695470">call1073741824</span><span class="op" id="1695484">(</span><span class="ident" id="1695485">fn</span><span class="op" id="1695487">,</span>&nbsp;<span class="ident" id="1695489">arg</span>&nbsp;<span class="ident" id="1695493">unsafe</span><span class="op" id="1695499">.</span><span class="ident" id="1695500">Pointer</span><span class="op" id="1695507">,</span>&nbsp;<span class="ident" id="1695509">n</span><span class="op" id="1695510">,</span>&nbsp;<span class="ident" id="1695512">retoffset</span>&nbsp;<span class="builtintype" id="1695522">uint32</span><span class="op" id="1695528">)</span>
</div>
</body>
</html>
