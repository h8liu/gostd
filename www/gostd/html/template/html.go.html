<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html" class="current">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4928764">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4928819">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4928873">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4928924">package</span>&nbsp;<span class="ident" id="4928932">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4928942">import</span>&nbsp;<span class="op" id="4928949">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4928952">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4928961">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4928968">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4928979">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4928994">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4928997">//&nbsp;htmlNospaceEscaper&nbsp;escapes&nbsp;for&nbsp;inclusion&nbsp;in&nbsp;unquoted&nbsp;attribute&nbsp;values.</span><br>
<span class="lineno">15</span><span class="keyword" id="4929071">func</span>&nbsp;<span class="ident" id="4929076">htmlNospaceEscaper</span><span class="op" id="4929094">(</span><span class="ident" id="4929095">args</span>&nbsp;<span class="op" id="4929100">...</span><span class="keyword" id="4929103">interface</span><span class="op" id="4929112">{</span><span class="op" id="4929113">}</span><span class="op" id="4929114">)</span>&nbsp;<span class="builtintype" id="4929116">string</span>&nbsp;<span class="op" id="4929123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929126">s</span><span class="op" id="4929127">,</span>&nbsp;<span class="ident" id="4929129">t</span>&nbsp;<span class="op" id="4929131">:=</span>&nbsp;<span class="ident" id="4929134"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4929143">(</span><span class="ident" id="4929144"><a href="/gostd/html/template/html.go.html#4929095">args</a></span><span class="op" id="4929148">...</span><span class="op" id="4929151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929154">if</span>&nbsp;<span class="ident" id="4929157"><a href="/gostd/html/template/html.go.html#4929129">t</a></span>&nbsp;<span class="op" id="4929159">==</span>&nbsp;<span class="ident" id="4929162"><a href="/gostd/html/template/content.go.html#4870328">contentTypeHTML</a></span>&nbsp;<span class="op" id="4929178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929182">return</span>&nbsp;<span class="ident" id="4929189"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4929201">(</span><span class="ident" id="4929202"><a href="/gostd/html/template/html.go.html#4933582">stripTags</a></span><span class="op" id="4929211">(</span><span class="ident" id="4929212"><a href="/gostd/html/template/html.go.html#4929126">s</a></span><span class="op" id="4929213">)</span><span class="op" id="4929214">,</span>&nbsp;<span class="ident" id="4929216"><a href="/gostd/html/template/html.go.html#4932131">htmlNospaceNormReplacementTable</a></span><span class="op" id="4929247">,</span>&nbsp;<span class="builtintype" id="4929249">false</span><span class="op" id="4929254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929257">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929260">return</span>&nbsp;<span class="ident" id="4929267"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4929279">(</span><span class="ident" id="4929280"><a href="/gostd/html/template/html.go.html#4929126">s</a></span><span class="op" id="4929281">,</span>&nbsp;<span class="ident" id="4929283"><a href="/gostd/html/template/html.go.html#4931580">htmlNospaceReplacementTable</a></span><span class="op" id="4929310">,</span>&nbsp;<span class="builtintype" id="4929312">false</span><span class="op" id="4929317">)</span><br>
<span class="lineno"></span><span class="op" id="4929319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4929322">//&nbsp;attrEscaper&nbsp;escapes&nbsp;for&nbsp;inclusion&nbsp;in&nbsp;quoted&nbsp;attribute&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="4929387">func</span>&nbsp;<span class="ident" id="4929392">attrEscaper</span><span class="op" id="4929403">(</span><span class="ident" id="4929404">args</span>&nbsp;<span class="op" id="4929409">...</span><span class="keyword" id="4929412">interface</span><span class="op" id="4929421">{</span><span class="op" id="4929422">}</span><span class="op" id="4929423">)</span>&nbsp;<span class="builtintype" id="4929425">string</span>&nbsp;<span class="op" id="4929432">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929435">s</span><span class="op" id="4929436">,</span>&nbsp;<span class="ident" id="4929438">t</span>&nbsp;<span class="op" id="4929440">:=</span>&nbsp;<span class="ident" id="4929443"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4929452">(</span><span class="ident" id="4929453"><a href="/gostd/html/template/html.go.html#4929404">args</a></span><span class="op" id="4929457">...</span><span class="op" id="4929460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929463">if</span>&nbsp;<span class="ident" id="4929466"><a href="/gostd/html/template/html.go.html#4929438">t</a></span>&nbsp;<span class="op" id="4929468">==</span>&nbsp;<span class="ident" id="4929471"><a href="/gostd/html/template/content.go.html#4870328">contentTypeHTML</a></span>&nbsp;<span class="op" id="4929487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929491">return</span>&nbsp;<span class="ident" id="4929498"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4929510">(</span><span class="ident" id="4929511"><a href="/gostd/html/template/html.go.html#4933582">stripTags</a></span><span class="op" id="4929520">(</span><span class="ident" id="4929521"><a href="/gostd/html/template/html.go.html#4929435">s</a></span><span class="op" id="4929522">)</span><span class="op" id="4929523">,</span>&nbsp;<span class="ident" id="4929525"><a href="/gostd/html/template/html.go.html#4930803">htmlNormReplacementTable</a></span><span class="op" id="4929549">,</span>&nbsp;<span class="builtintype" id="4929551">true</span><span class="op" id="4929555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929561">return</span>&nbsp;<span class="ident" id="4929568"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4929580">(</span><span class="ident" id="4929581"><a href="/gostd/html/template/html.go.html#4929435">s</a></span><span class="op" id="4929582">,</span>&nbsp;<span class="ident" id="4929584"><a href="/gostd/html/template/html.go.html#4930247">htmlReplacementTable</a></span><span class="op" id="4929604">,</span>&nbsp;<span class="builtintype" id="4929606">true</span><span class="op" id="4929610">)</span><br>
<span class="lineno">30</span><span class="op" id="4929612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4929615">//&nbsp;rcdataEscaper&nbsp;escapes&nbsp;for&nbsp;inclusion&nbsp;in&nbsp;an&nbsp;RCDATA&nbsp;element&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="4929681">func</span>&nbsp;<span class="ident" id="4929686">rcdataEscaper</span><span class="op" id="4929699">(</span><span class="ident" id="4929700">args</span>&nbsp;<span class="op" id="4929705">...</span><span class="keyword" id="4929708">interface</span><span class="op" id="4929717">{</span><span class="op" id="4929718">}</span><span class="op" id="4929719">)</span>&nbsp;<span class="builtintype" id="4929721">string</span>&nbsp;<span class="op" id="4929728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929731">s</span><span class="op" id="4929732">,</span>&nbsp;<span class="ident" id="4929734">t</span>&nbsp;<span class="op" id="4929736">:=</span>&nbsp;<span class="ident" id="4929739"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4929748">(</span><span class="ident" id="4929749"><a href="/gostd/html/template/html.go.html#4929700">args</a></span><span class="op" id="4929753">...</span><span class="op" id="4929756">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929759">if</span>&nbsp;<span class="ident" id="4929762"><a href="/gostd/html/template/html.go.html#4929734">t</a></span>&nbsp;<span class="op" id="4929764">==</span>&nbsp;<span class="ident" id="4929767"><a href="/gostd/html/template/content.go.html#4870328">contentTypeHTML</a></span>&nbsp;<span class="op" id="4929783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929787">return</span>&nbsp;<span class="ident" id="4929794"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4929806">(</span><span class="ident" id="4929807"><a href="/gostd/html/template/html.go.html#4929731">s</a></span><span class="op" id="4929808">,</span>&nbsp;<span class="ident" id="4929810"><a href="/gostd/html/template/html.go.html#4930803">htmlNormReplacementTable</a></span><span class="op" id="4929834">,</span>&nbsp;<span class="builtintype" id="4929836">true</span><span class="op" id="4929840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929846">return</span>&nbsp;<span class="ident" id="4929853"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4929865">(</span><span class="ident" id="4929866"><a href="/gostd/html/template/html.go.html#4929731">s</a></span><span class="op" id="4929867">,</span>&nbsp;<span class="ident" id="4929869"><a href="/gostd/html/template/html.go.html#4930247">htmlReplacementTable</a></span><span class="op" id="4929889">,</span>&nbsp;<span class="builtintype" id="4929891">true</span><span class="op" id="4929895">)</span><br>
<span class="lineno"></span><span class="op" id="4929897">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="4929900">//&nbsp;htmlEscaper&nbsp;escapes&nbsp;for&nbsp;inclusion&nbsp;in&nbsp;HTML&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="4929951">func</span>&nbsp;<span class="ident" id="4929956">htmlEscaper</span><span class="op" id="4929967">(</span><span class="ident" id="4929968">args</span>&nbsp;<span class="op" id="4929973">...</span><span class="keyword" id="4929976">interface</span><span class="op" id="4929985">{</span><span class="op" id="4929986">}</span><span class="op" id="4929987">)</span>&nbsp;<span class="builtintype" id="4929989">string</span>&nbsp;<span class="op" id="4929996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929999">s</span><span class="op" id="4930000">,</span>&nbsp;<span class="ident" id="4930002">t</span>&nbsp;<span class="op" id="4930004">:=</span>&nbsp;<span class="ident" id="4930007"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4930016">(</span><span class="ident" id="4930017"><a href="/gostd/html/template/html.go.html#4929968">args</a></span><span class="op" id="4930021">...</span><span class="op" id="4930024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930027">if</span>&nbsp;<span class="ident" id="4930030"><a href="/gostd/html/template/html.go.html#4930002">t</a></span>&nbsp;<span class="op" id="4930032">==</span>&nbsp;<span class="ident" id="4930035"><a href="/gostd/html/template/content.go.html#4870328">contentTypeHTML</a></span>&nbsp;<span class="op" id="4930051">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930055">return</span>&nbsp;<span class="ident" id="4930062"><a href="/gostd/html/template/html.go.html#4929999">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930068">return</span>&nbsp;<span class="ident" id="4930075"><a href="/gostd/html/template/html.go.html#4932694">htmlReplacer</a></span><span class="op" id="4930087">(</span><span class="ident" id="4930088"><a href="/gostd/html/template/html.go.html#4929999">s</a></span><span class="op" id="4930089">,</span>&nbsp;<span class="ident" id="4930091"><a href="/gostd/html/template/html.go.html#4930247">htmlReplacementTable</a></span><span class="op" id="4930111">,</span>&nbsp;<span class="builtintype" id="4930113">true</span><span class="op" id="4930117">)</span><br>
<span class="lineno"></span><span class="op" id="4930119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4930122">//&nbsp;htmlReplacementTable&nbsp;contains&nbsp;the&nbsp;runes&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;escaped</span><br>
<span class="lineno"></span><span class="comment" id="4930189">//&nbsp;inside&nbsp;a&nbsp;quoted&nbsp;attribute&nbsp;value&nbsp;or&nbsp;in&nbsp;a&nbsp;text&nbsp;node.</span><br>
<span class="lineno"></span><span class="keyword" id="4930243">var</span>&nbsp;<span class="ident" id="4930247">htmlReplacementTable</span>&nbsp;<span class="op" id="4930268">=</span>&nbsp;<span class="op" id="4930270">[</span><span class="op" id="4930271">]</span><span class="builtintype" id="4930272">string</span><span class="op" id="4930278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930281">//&nbsp;http://www.w3.org/TR/html5/syntax.html#attribute-value-(unquoted)-state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930357">//&nbsp;U+0000&nbsp;NULL&nbsp;Parse&nbsp;error.&nbsp;Append&nbsp;a&nbsp;U+FFFD&nbsp;REPLACEMENT</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930414">//&nbsp;CHARACTER&nbsp;character&nbsp;to&nbsp;the&nbsp;current&nbsp;attribute&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930472">//&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930478">//&nbsp;and&nbsp;similarly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930496">//&nbsp;http://www.w3.org/TR/html5/syntax.html#before-attribute-value-state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4930568">0</span><span class="op" id="4930569">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930574">&#34;\uFFFD&#34;</span><span class="op" id="4930582">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930585">&#39;&#34;&#39;</span><span class="op" id="4930588">:</span>&nbsp;&nbsp;<span class="string" id="4930591">&#34;&amp;#34;&#34;</span><span class="op" id="4930598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930601">&#39;&amp;&#39;</span><span class="op" id="4930604">:</span>&nbsp;&nbsp;<span class="string" id="4930607">&#34;&amp;amp;&#34;</span><span class="op" id="4930614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930617">&#39;\&#39;&#39;</span><span class="op" id="4930621">:</span>&nbsp;<span class="string" id="4930623">&#34;&amp;#39;&#34;</span><span class="op" id="4930630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930633">&#39;+&#39;</span><span class="op" id="4930636">:</span>&nbsp;&nbsp;<span class="string" id="4930639">&#34;&amp;#43;&#34;</span><span class="op" id="4930646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930649">&#39;&lt;&#39;</span><span class="op" id="4930652">:</span>&nbsp;&nbsp;<span class="string" id="4930655">&#34;&amp;lt;&#34;</span><span class="op" id="4930661">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930664">&#39;&gt;&#39;</span><span class="op" id="4930667">:</span>&nbsp;&nbsp;<span class="string" id="4930670">&#34;&amp;gt;&#34;</span><span class="op" id="4930676">,</span><br>
<span class="lineno"></span><span class="op" id="4930678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4930681">//&nbsp;htmlNormReplacementTable&nbsp;is&nbsp;like&nbsp;htmlReplacementTable&nbsp;but&nbsp;without&nbsp;&#39;&amp;&#39;&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4930757">//&nbsp;avoid&nbsp;over-encoding&nbsp;existing&nbsp;entities.</span><br>
<span class="lineno">70</span><span class="keyword" id="4930799">var</span>&nbsp;<span class="ident" id="4930803">htmlNormReplacementTable</span>&nbsp;<span class="op" id="4930828">=</span>&nbsp;<span class="op" id="4930830">[</span><span class="op" id="4930831">]</span><span class="builtintype" id="4930832">string</span><span class="op" id="4930838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4930841">0</span><span class="op" id="4930842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930847">&#34;\uFFFD&#34;</span><span class="op" id="4930855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930858">&#39;&#34;&#39;</span><span class="op" id="4930861">:</span>&nbsp;&nbsp;<span class="string" id="4930864">&#34;&amp;#34;&#34;</span><span class="op" id="4930871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930874">&#39;\&#39;&#39;</span><span class="op" id="4930878">:</span>&nbsp;<span class="string" id="4930880">&#34;&amp;#39;&#34;</span><span class="op" id="4930887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930890">&#39;+&#39;</span><span class="op" id="4930893">:</span>&nbsp;&nbsp;<span class="string" id="4930896">&#34;&amp;#43;&#34;</span><span class="op" id="4930903">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930906">&#39;&lt;&#39;</span><span class="op" id="4930909">:</span>&nbsp;&nbsp;<span class="string" id="4930912">&#34;&amp;lt;&#34;</span><span class="op" id="4930918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4930921">&#39;&gt;&#39;</span><span class="op" id="4930924">:</span>&nbsp;&nbsp;<span class="string" id="4930927">&#34;&amp;gt;&#34;</span><span class="op" id="4930933">,</span><br>
<span class="lineno"></span><span class="op" id="4930935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4930938">//&nbsp;htmlNospaceReplacementTable&nbsp;contains&nbsp;the&nbsp;runes&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;escaped</span><br>
<span class="lineno">80</span><span class="comment" id="4931012">//&nbsp;inside&nbsp;an&nbsp;unquoted&nbsp;attribute&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4931051">//&nbsp;The&nbsp;set&nbsp;of&nbsp;runes&nbsp;escaped&nbsp;is&nbsp;the&nbsp;union&nbsp;of&nbsp;the&nbsp;HTML&nbsp;specials&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4931117">//&nbsp;those&nbsp;determined&nbsp;by&nbsp;running&nbsp;the&nbsp;JS&nbsp;below&nbsp;in&nbsp;browsers:</span><br>
<span class="lineno"></span><span class="comment" id="4931174">//&nbsp;&lt;div&nbsp;id=d&gt;&lt;/div&gt;</span><br>
<span class="lineno"></span><span class="comment" id="4931194">//&nbsp;&lt;script&gt;(function&nbsp;()&nbsp;{</span><br>
<span class="lineno">85</span><span class="comment" id="4931220">//&nbsp;var&nbsp;a&nbsp;=&nbsp;[],&nbsp;d&nbsp;=&nbsp;document.getElementById(&#34;d&#34;),&nbsp;i,&nbsp;c,&nbsp;s;</span><br>
<span class="lineno"></span><span class="comment" id="4931278">//&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;0x10000;&nbsp;++i)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4931313">//&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;String.fromCharCode(i);</span><br>
<span class="lineno"></span><span class="comment" id="4931346">//&nbsp;&nbsp;&nbsp;d.innerHTML&nbsp;=&nbsp;&#34;&lt;span&nbsp;title=&#34;&nbsp;+&nbsp;c&nbsp;+&nbsp;&#34;lt&#34;&nbsp;+&nbsp;c&nbsp;+&nbsp;&#34;&gt;&lt;/span&gt;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4931408">//&nbsp;&nbsp;&nbsp;s&nbsp;=&nbsp;d.getElementsByTagName(&#34;SPAN&#34;)[0];</span><br>
<span class="lineno">90</span><span class="comment" id="4931452">//&nbsp;&nbsp;&nbsp;if&nbsp;(!s&nbsp;||&nbsp;s.title&nbsp;!==&nbsp;c&nbsp;+&nbsp;&#34;lt&#34;&nbsp;+&nbsp;c)&nbsp;{&nbsp;a.push(i.toString(16));&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4931521">//&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4931526">//&nbsp;document.write(a.join(&#34;,&nbsp;&#34;));</span><br>
<span class="lineno"></span><span class="comment" id="4931559">//&nbsp;})()&lt;/script&gt;</span><br>
<span class="lineno"></span><span class="keyword" id="4931576">var</span>&nbsp;<span class="ident" id="4931580">htmlNospaceReplacementTable</span>&nbsp;<span class="op" id="4931608">=</span>&nbsp;<span class="op" id="4931610">[</span><span class="op" id="4931611">]</span><span class="builtintype" id="4931612">string</span><span class="op" id="4931618">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4931621">0</span><span class="op" id="4931622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931627">&#34;&amp;#xfffd;&#34;</span><span class="op" id="4931637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931640">&#39;\t&#39;</span><span class="op" id="4931644">:</span>&nbsp;<span class="string" id="4931646">&#34;&amp;#9;&#34;</span><span class="op" id="4931652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931655">&#39;\n&#39;</span><span class="op" id="4931659">:</span>&nbsp;<span class="string" id="4931661">&#34;&amp;#10;&#34;</span><span class="op" id="4931668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931671">&#39;\v&#39;</span><span class="op" id="4931675">:</span>&nbsp;<span class="string" id="4931677">&#34;&amp;#11;&#34;</span><span class="op" id="4931684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931687">&#39;\f&#39;</span><span class="op" id="4931691">:</span>&nbsp;<span class="string" id="4931693">&#34;&amp;#12;&#34;</span><span class="op" id="4931700">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931703">&#39;\r&#39;</span><span class="op" id="4931707">:</span>&nbsp;<span class="string" id="4931709">&#34;&amp;#13;&#34;</span><span class="op" id="4931716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931719">&#39;&nbsp;&#39;</span><span class="op" id="4931722">:</span>&nbsp;&nbsp;<span class="string" id="4931725">&#34;&amp;#32;&#34;</span><span class="op" id="4931732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931735">&#39;&#34;&#39;</span><span class="op" id="4931738">:</span>&nbsp;&nbsp;<span class="string" id="4931741">&#34;&amp;#34;&#34;</span><span class="op" id="4931748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931751">&#39;&amp;&#39;</span><span class="op" id="4931754">:</span>&nbsp;&nbsp;<span class="string" id="4931757">&#34;&amp;amp;&#34;</span><span class="op" id="4931764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931767">&#39;\&#39;&#39;</span><span class="op" id="4931771">:</span>&nbsp;<span class="string" id="4931773">&#34;&amp;#39;&#34;</span><span class="op" id="4931780">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931783">&#39;+&#39;</span><span class="op" id="4931786">:</span>&nbsp;&nbsp;<span class="string" id="4931789">&#34;&amp;#43;&#34;</span><span class="op" id="4931796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931799">&#39;&lt;&#39;</span><span class="op" id="4931802">:</span>&nbsp;&nbsp;<span class="string" id="4931805">&#34;&amp;lt;&#34;</span><span class="op" id="4931811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931814">&#39;=&#39;</span><span class="op" id="4931817">:</span>&nbsp;&nbsp;<span class="string" id="4931820">&#34;&amp;#61;&#34;</span><span class="op" id="4931827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931830">&#39;&gt;&#39;</span><span class="op" id="4931833">:</span>&nbsp;&nbsp;<span class="string" id="4931836">&#34;&amp;gt;&#34;</span><span class="op" id="4931842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4931845">//&nbsp;A&nbsp;parse&nbsp;error&nbsp;in&nbsp;the&nbsp;attribute&nbsp;value&nbsp;(unquoted)&nbsp;and</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4931901">//&nbsp;before&nbsp;attribute&nbsp;value&nbsp;states.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4931936">//&nbsp;Treated&nbsp;as&nbsp;a&nbsp;quoting&nbsp;character&nbsp;by&nbsp;IE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4931978">&#39;`&#39;</span><span class="op" id="4931981">:</span>&nbsp;<span class="string" id="4931983">&#34;&amp;#96;&#34;</span><span class="op" id="4931990">,</span><br>
<span class="lineno"></span><span class="op" id="4931992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="4931995">//&nbsp;htmlNospaceNormReplacementTable&nbsp;is&nbsp;like&nbsp;htmlNospaceReplacementTable&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="4932070">//&nbsp;without&nbsp;&#39;&amp;&#39;&nbsp;to&nbsp;avoid&nbsp;over-encoding&nbsp;existing&nbsp;entities.</span><br>
<span class="lineno"></span><span class="keyword" id="4932127">var</span>&nbsp;<span class="ident" id="4932131">htmlNospaceNormReplacementTable</span>&nbsp;<span class="op" id="4932163">=</span>&nbsp;<span class="op" id="4932165">[</span><span class="op" id="4932166">]</span><span class="builtintype" id="4932167">string</span><span class="op" id="4932173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4932176">0</span><span class="op" id="4932177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932182">&#34;&amp;#xfffd;&#34;</span><span class="op" id="4932192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932195">&#39;\t&#39;</span><span class="op" id="4932199">:</span>&nbsp;<span class="string" id="4932201">&#34;&amp;#9;&#34;</span><span class="op" id="4932207">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932210">&#39;\n&#39;</span><span class="op" id="4932214">:</span>&nbsp;<span class="string" id="4932216">&#34;&amp;#10;&#34;</span><span class="op" id="4932223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932226">&#39;\v&#39;</span><span class="op" id="4932230">:</span>&nbsp;<span class="string" id="4932232">&#34;&amp;#11;&#34;</span><span class="op" id="4932239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932242">&#39;\f&#39;</span><span class="op" id="4932246">:</span>&nbsp;<span class="string" id="4932248">&#34;&amp;#12;&#34;</span><span class="op" id="4932255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932258">&#39;\r&#39;</span><span class="op" id="4932262">:</span>&nbsp;<span class="string" id="4932264">&#34;&amp;#13;&#34;</span><span class="op" id="4932271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932274">&#39;&nbsp;&#39;</span><span class="op" id="4932277">:</span>&nbsp;&nbsp;<span class="string" id="4932280">&#34;&amp;#32;&#34;</span><span class="op" id="4932287">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932290">&#39;&#34;&#39;</span><span class="op" id="4932293">:</span>&nbsp;&nbsp;<span class="string" id="4932296">&#34;&amp;#34;&#34;</span><span class="op" id="4932303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932306">&#39;\&#39;&#39;</span><span class="op" id="4932310">:</span>&nbsp;<span class="string" id="4932312">&#34;&amp;#39;&#34;</span><span class="op" id="4932319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932322">&#39;+&#39;</span><span class="op" id="4932325">:</span>&nbsp;&nbsp;<span class="string" id="4932328">&#34;&amp;#43;&#34;</span><span class="op" id="4932335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932338">&#39;&lt;&#39;</span><span class="op" id="4932341">:</span>&nbsp;&nbsp;<span class="string" id="4932344">&#34;&amp;lt;&#34;</span><span class="op" id="4932350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932353">&#39;=&#39;</span><span class="op" id="4932356">:</span>&nbsp;&nbsp;<span class="string" id="4932359">&#34;&amp;#61;&#34;</span><span class="op" id="4932366">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932369">&#39;&gt;&#39;</span><span class="op" id="4932372">:</span>&nbsp;&nbsp;<span class="string" id="4932375">&#34;&amp;gt;&#34;</span><span class="op" id="4932381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932384">//&nbsp;A&nbsp;parse&nbsp;error&nbsp;in&nbsp;the&nbsp;attribute&nbsp;value&nbsp;(unquoted)&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932440">//&nbsp;before&nbsp;attribute&nbsp;value&nbsp;states.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932475">//&nbsp;Treated&nbsp;as&nbsp;a&nbsp;quoting&nbsp;character&nbsp;by&nbsp;IE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4932517">&#39;`&#39;</span><span class="op" id="4932520">:</span>&nbsp;<span class="string" id="4932522">&#34;&amp;#96;&#34;</span><span class="op" id="4932529">,</span><br>
<span class="lineno">135</span><span class="op" id="4932531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4932534">//&nbsp;htmlReplacer&nbsp;returns&nbsp;s&nbsp;with&nbsp;runes&nbsp;replaced&nbsp;according&nbsp;to&nbsp;replacementTable</span><br>
<span class="lineno"></span><span class="comment" id="4932610">//&nbsp;and&nbsp;when&nbsp;badRunes&nbsp;is&nbsp;true,&nbsp;certain&nbsp;bad&nbsp;runes&nbsp;are&nbsp;allowed&nbsp;through&nbsp;unescaped.</span><br>
<span class="lineno"></span><span class="keyword" id="4932689">func</span>&nbsp;<span class="ident" id="4932694">htmlReplacer</span><span class="op" id="4932706">(</span><span class="ident" id="4932707">s</span>&nbsp;<span class="builtintype" id="4932709">string</span><span class="op" id="4932715">,</span>&nbsp;<span class="ident" id="4932717">replacementTable</span>&nbsp;<span class="op" id="4932734">[</span><span class="op" id="4932735">]</span><span class="builtintype" id="4932736">string</span><span class="op" id="4932742">,</span>&nbsp;<span class="ident" id="4932744">badRunes</span>&nbsp;<span class="builtintype" id="4932753">bool</span><span class="op" id="4932757">)</span>&nbsp;<span class="builtintype" id="4932759">string</span>&nbsp;<span class="op" id="4932766">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932769">written</span><span class="op" id="4932776">,</span>&nbsp;<span class="ident" id="4932778">b</span>&nbsp;<span class="op" id="4932780">:=</span>&nbsp;<span class="num" id="4932783">0</span><span class="op" id="4932784">,</span>&nbsp;<span class="builtinfunc" id="4932786">new</span><span class="op" id="4932789">(</span><span class="ident" id="4932790"><a href="/gostd/html/template/html.go.html#4928952">bytes</a></span><span class="op" id="4932795">.</span><span class="ident" id="4932796"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="4932802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932805">for</span>&nbsp;<span class="ident" id="4932809">i</span><span class="op" id="4932810">,</span>&nbsp;<span class="ident" id="4932812">r</span>&nbsp;<span class="op" id="4932814">:=</span>&nbsp;<span class="keyword" id="4932817">range</span>&nbsp;<span class="ident" id="4932823"><a href="/gostd/html/template/html.go.html#4932707">s</a></span>&nbsp;<span class="op" id="4932825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932829">if</span>&nbsp;<span class="builtintype" id="4932832">int</span><span class="op" id="4932835">(</span><span class="ident" id="4932836"><a href="/gostd/html/template/html.go.html#4932812">r</a></span><span class="op" id="4932837">)</span>&nbsp;<span class="op" id="4932839">&lt;</span>&nbsp;<span class="builtinfunc" id="4932841">len</span><span class="op" id="4932844">(</span><span class="ident" id="4932845"><a href="/gostd/html/template/html.go.html#4932717">replacementTable</a></span><span class="op" id="4932861">)</span>&nbsp;<span class="op" id="4932863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932868">if</span>&nbsp;<span class="ident" id="4932871">repl</span>&nbsp;<span class="op" id="4932876">:=</span>&nbsp;<span class="ident" id="4932879"><a href="/gostd/html/template/html.go.html#4932717">replacementTable</a></span><span class="op" id="4932895">[</span><span class="ident" id="4932896"><a href="/gostd/html/template/html.go.html#4932812">r</a></span><span class="op" id="4932897">]</span><span class="op" id="4932898">;</span>&nbsp;<span class="builtinfunc" id="4932900">len</span><span class="op" id="4932903">(</span><span class="ident" id="4932904"><a href="/gostd/html/template/html.go.html#4932871">repl</a></span><span class="op" id="4932908">)</span>&nbsp;<span class="op" id="4932910">!=</span>&nbsp;<span class="num" id="4932913">0</span>&nbsp;<span class="op" id="4932915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932921"><a href="/gostd/html/template/html.go.html#4932778">b</a></span><span class="op" id="4932922">.</span><span class="ident" id="4932923"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4932934">(</span><span class="ident" id="4932935"><a href="/gostd/html/template/html.go.html#4932707">s</a></span><span class="op" id="4932936">[</span><span class="ident" id="4932937"><a href="/gostd/html/template/html.go.html#4932769">written</a></span><span class="op" id="4932944">:</span><span class="ident" id="4932945"><a href="/gostd/html/template/html.go.html#4932809">i</a></span><span class="op" id="4932946">]</span><span class="op" id="4932947">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932953"><a href="/gostd/html/template/html.go.html#4932778">b</a></span><span class="op" id="4932954">.</span><span class="ident" id="4932955"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4932966">(</span><span class="ident" id="4932967"><a href="/gostd/html/template/html.go.html#4932871">repl</a></span><span class="op" id="4932971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932977">//&nbsp;Valid&nbsp;as&nbsp;long&nbsp;as&nbsp;replacementTable&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933026">//&nbsp;include&nbsp;anything&nbsp;above&nbsp;0x7f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933062"><a href="/gostd/html/template/html.go.html#4932769">written</a></span>&nbsp;<span class="op" id="4933070">=</span>&nbsp;<span class="ident" id="4933072"><a href="/gostd/html/template/html.go.html#4932809">i</a></span>&nbsp;<span class="op" id="4933074">+</span>&nbsp;<span class="ident" id="4933076"><a href="/gostd/html/template/html.go.html#4928979">utf8</a></span><span class="op" id="4933080">.</span><span class="ident" id="4933081"><a href="/gostd/unicode/utf8/utf8.go.html#1812711">RuneLen</a></span><span class="op" id="4933088">(</span><span class="ident" id="4933089"><a href="/gostd/html/template/html.go.html#4932812">r</a></span><span class="op" id="4933090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933095">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933099">}</span>&nbsp;<span class="keyword" id="4933101">else</span>&nbsp;<span class="keyword" id="4933106">if</span>&nbsp;<span class="ident" id="4933109"><a href="/gostd/html/template/html.go.html#4932744">badRunes</a></span>&nbsp;<span class="op" id="4933118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933123">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933136">//&nbsp;IE&nbsp;does&nbsp;not&nbsp;allow&nbsp;these&nbsp;ranges&nbsp;in&nbsp;unquoted&nbsp;attrs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933191">}</span>&nbsp;<span class="keyword" id="4933193">else</span>&nbsp;<span class="keyword" id="4933198">if</span>&nbsp;<span class="num" id="4933201">0xfdd0</span>&nbsp;<span class="op" id="4933208">&lt;=</span>&nbsp;<span class="ident" id="4933211"><a href="/gostd/html/template/html.go.html#4932812">r</a></span>&nbsp;<span class="op" id="4933213">&amp;&amp;</span>&nbsp;<span class="ident" id="4933216"><a href="/gostd/html/template/html.go.html#4932812">r</a></span>&nbsp;<span class="op" id="4933218">&lt;=</span>&nbsp;<span class="num" id="4933221">0xfdef</span>&nbsp;<span class="op" id="4933228">||</span>&nbsp;<span class="num" id="4933231">0xfff0</span>&nbsp;<span class="op" id="4933238">&lt;=</span>&nbsp;<span class="ident" id="4933241"><a href="/gostd/html/template/html.go.html#4932812">r</a></span>&nbsp;<span class="op" id="4933243">&amp;&amp;</span>&nbsp;<span class="ident" id="4933246"><a href="/gostd/html/template/html.go.html#4932812">r</a></span>&nbsp;<span class="op" id="4933248">&lt;=</span>&nbsp;<span class="num" id="4933251">0xffff</span>&nbsp;<span class="op" id="4933258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933263"><a href="/gostd/html/template/html.go.html#4928961">fmt</a></span><span class="op" id="4933266">.</span><span class="ident" id="4933267"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="4933274">(</span><span class="ident" id="4933275"><a href="/gostd/html/template/html.go.html#4932778">b</a></span><span class="op" id="4933276">,</span>&nbsp;<span class="string" id="4933278">&#34;%s&amp;#x%x;&#34;</span><span class="op" id="4933288">,</span>&nbsp;<span class="ident" id="4933290"><a href="/gostd/html/template/html.go.html#4932707">s</a></span><span class="op" id="4933291">[</span><span class="ident" id="4933292"><a href="/gostd/html/template/html.go.html#4932769">written</a></span><span class="op" id="4933299">:</span><span class="ident" id="4933300"><a href="/gostd/html/template/html.go.html#4932809">i</a></span><span class="op" id="4933301">]</span><span class="op" id="4933302">,</span>&nbsp;<span class="ident" id="4933304"><a href="/gostd/html/template/html.go.html#4932812">r</a></span><span class="op" id="4933305">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933310"><a href="/gostd/html/template/html.go.html#4932769">written</a></span>&nbsp;<span class="op" id="4933318">=</span>&nbsp;<span class="ident" id="4933320"><a href="/gostd/html/template/html.go.html#4932809">i</a></span>&nbsp;<span class="op" id="4933322">+</span>&nbsp;<span class="ident" id="4933324"><a href="/gostd/html/template/html.go.html#4928979">utf8</a></span><span class="op" id="4933328">.</span><span class="ident" id="4933329"><a href="/gostd/unicode/utf8/utf8.go.html#1812711">RuneLen</a></span><span class="op" id="4933336">(</span><span class="ident" id="4933337"><a href="/gostd/html/template/html.go.html#4932812">r</a></span><span class="op" id="4933338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933348">if</span>&nbsp;<span class="ident" id="4933351"><a href="/gostd/html/template/html.go.html#4932769">written</a></span>&nbsp;<span class="op" id="4933359">==</span>&nbsp;<span class="num" id="4933362">0</span>&nbsp;<span class="op" id="4933364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933368">return</span>&nbsp;<span class="ident" id="4933375"><a href="/gostd/html/template/html.go.html#4932707">s</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933381"><a href="/gostd/html/template/html.go.html#4932778">b</a></span><span class="op" id="4933382">.</span><span class="ident" id="4933383"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4933394">(</span><span class="ident" id="4933395"><a href="/gostd/html/template/html.go.html#4932707">s</a></span><span class="op" id="4933396">[</span><span class="ident" id="4933397"><a href="/gostd/html/template/html.go.html#4932769">written</a></span><span class="op" id="4933404">:</span><span class="op" id="4933405">]</span><span class="op" id="4933406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933409">return</span>&nbsp;<span class="ident" id="4933416"><a href="/gostd/html/template/html.go.html#4932778">b</a></span><span class="op" id="4933417">.</span><span class="ident" id="4933418"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="4933424">(</span><span class="op" id="4933425">)</span><br>
<span class="lineno"></span><span class="op" id="4933427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="4933430">//&nbsp;stripTags&nbsp;takes&nbsp;a&nbsp;snippet&nbsp;of&nbsp;HTML&nbsp;and&nbsp;returns&nbsp;only&nbsp;the&nbsp;text&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="4933502">//&nbsp;For&nbsp;example,&nbsp;`&lt;b&gt;&amp;iexcl;Hi!&lt;/b&gt;&nbsp;&lt;script&gt;...&lt;/script&gt;`&nbsp;-&gt;&nbsp;`&amp;iexcl;Hi!&nbsp;`.</span><br>
<span class="lineno"></span><span class="keyword" id="4933577">func</span>&nbsp;<span class="ident" id="4933582">stripTags</span><span class="op" id="4933591">(</span><span class="ident" id="4933592">html</span>&nbsp;<span class="builtintype" id="4933597">string</span><span class="op" id="4933603">)</span>&nbsp;<span class="builtintype" id="4933605">string</span>&nbsp;<span class="op" id="4933612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933615">var</span>&nbsp;<span class="ident" id="4933619">b</span>&nbsp;<span class="ident" id="4933621"><a href="/gostd/html/template/html.go.html#4928952">bytes</a></span><span class="op" id="4933626">.</span><span class="ident" id="4933627"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933635">s</span><span class="op" id="4933636">,</span>&nbsp;<span class="ident" id="4933638">c</span><span class="op" id="4933639">,</span>&nbsp;<span class="ident" id="4933641">i</span><span class="op" id="4933642">,</span>&nbsp;<span class="ident" id="4933644">allText</span>&nbsp;<span class="op" id="4933652">:=</span>&nbsp;<span class="op" id="4933655">[</span><span class="op" id="4933656">]</span><span class="builtintype" id="4933657">byte</span><span class="op" id="4933661">(</span><span class="ident" id="4933662"><a href="/gostd/html/template/html.go.html#4933592">html</a></span><span class="op" id="4933666">)</span><span class="op" id="4933667">,</span>&nbsp;<span class="ident" id="4933669"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4933676">{</span><span class="op" id="4933677">}</span><span class="op" id="4933678">,</span>&nbsp;<span class="num" id="4933680">0</span><span class="op" id="4933681">,</span>&nbsp;<span class="builtintype" id="4933683">true</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933689">//&nbsp;Using&nbsp;the&nbsp;transition&nbsp;funcs&nbsp;helps&nbsp;us&nbsp;avoid&nbsp;mangling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933744">//&nbsp;`&lt;div&nbsp;title=&#34;1&gt;2&#34;&gt;`&nbsp;or&nbsp;`I&nbsp;&lt;3&nbsp;Ponies!`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933787">for</span>&nbsp;<span class="ident" id="4933791"><a href="/gostd/html/template/html.go.html#4933641">i</a></span>&nbsp;<span class="op" id="4933793">!=</span>&nbsp;<span class="builtinfunc" id="4933796">len</span><span class="op" id="4933799">(</span><span class="ident" id="4933800"><a href="/gostd/html/template/html.go.html#4933635">s</a></span><span class="op" id="4933801">)</span>&nbsp;<span class="op" id="4933803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933807">if</span>&nbsp;<span class="ident" id="4933810"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4933811">.</span><span class="ident" id="4933812"><a href="/gostd/html/template/context.go.html#4872981">delim</a></span>&nbsp;<span class="op" id="4933818">==</span>&nbsp;<span class="ident" id="4933821"><a href="/gostd/html/template/context.go.html#4878579">delimNone</a></span>&nbsp;<span class="op" id="4933831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933836">st</span>&nbsp;<span class="op" id="4933839">:=</span>&nbsp;<span class="ident" id="4933842"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4933843">.</span><span class="ident" id="4933844"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933853">//&nbsp;Use&nbsp;RCDATA&nbsp;instead&nbsp;of&nbsp;parsing&nbsp;into&nbsp;JS&nbsp;or&nbsp;CSS&nbsp;styles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933912">if</span>&nbsp;<span class="ident" id="4933915"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4933916">.</span><span class="ident" id="4933917"><a href="/gostd/html/template/context.go.html#4873042">element</a></span>&nbsp;<span class="op" id="4933925">!=</span>&nbsp;<span class="ident" id="4933928"><a href="/gostd/html/template/context.go.html#4881273">elementNone</a></span>&nbsp;<span class="op" id="4933940">&amp;&amp;</span>&nbsp;<span class="op" id="4933943">!</span><span class="ident" id="4933944"><a href="/gostd/html/template/context.go.html#4878294">isInTag</a></span><span class="op" id="4933951">(</span><span class="ident" id="4933952"><a href="/gostd/html/template/html.go.html#4933836">st</a></span><span class="op" id="4933954">)</span>&nbsp;<span class="op" id="4933956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933962"><a href="/gostd/html/template/html.go.html#4933836">st</a></span>&nbsp;<span class="op" id="4933965">=</span>&nbsp;<span class="ident" id="4933967"><a href="/gostd/html/template/context.go.html#4875567">stateRCDATA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933987">d</span><span class="op" id="4933988">,</span>&nbsp;<span class="ident" id="4933990">nread</span>&nbsp;<span class="op" id="4933996">:=</span>&nbsp;<span class="ident" id="4933999"><a href="/gostd/html/template/transition.go.html#4959238">transitionFunc</a></span><span class="op" id="4934013">[</span><span class="ident" id="4934014"><a href="/gostd/html/template/html.go.html#4933836">st</a></span><span class="op" id="4934016">]</span><span class="op" id="4934017">(</span><span class="ident" id="4934018"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934019">,</span>&nbsp;<span class="ident" id="4934021"><a href="/gostd/html/template/html.go.html#4933635">s</a></span><span class="op" id="4934022">[</span><span class="ident" id="4934023"><a href="/gostd/html/template/html.go.html#4933641">i</a></span><span class="op" id="4934024">:</span><span class="op" id="4934025">]</span><span class="op" id="4934026">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934031">i1</span>&nbsp;<span class="op" id="4934034">:=</span>&nbsp;<span class="ident" id="4934037"><a href="/gostd/html/template/html.go.html#4933641">i</a></span>&nbsp;<span class="op" id="4934039">+</span>&nbsp;<span class="ident" id="4934041"><a href="/gostd/html/template/html.go.html#4933990">nread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934050">if</span>&nbsp;<span class="ident" id="4934053"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934054">.</span><span class="ident" id="4934055"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4934061">==</span>&nbsp;<span class="ident" id="4934064"><a href="/gostd/html/template/context.go.html#4874843">stateText</a></span>&nbsp;<span class="op" id="4934074">||</span>&nbsp;<span class="ident" id="4934077"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934078">.</span><span class="ident" id="4934079"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4934085">==</span>&nbsp;<span class="ident" id="4934088"><a href="/gostd/html/template/context.go.html#4875567">stateRCDATA</a></span>&nbsp;<span class="op" id="4934100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4934106">//&nbsp;Emit&nbsp;text&nbsp;up&nbsp;to&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;tag&nbsp;or&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934162">j</span>&nbsp;<span class="op" id="4934164">:=</span>&nbsp;<span class="ident" id="4934167"><a href="/gostd/html/template/html.go.html#4934031">i1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934174">if</span>&nbsp;<span class="ident" id="4934177"><a href="/gostd/html/template/html.go.html#4933987">d</a></span><span class="op" id="4934178">.</span><span class="ident" id="4934179"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4934185">!=</span>&nbsp;<span class="ident" id="4934188"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934189">.</span><span class="ident" id="4934190"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4934196">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934203">for</span>&nbsp;<span class="ident" id="4934207">j1</span>&nbsp;<span class="op" id="4934210">:=</span>&nbsp;<span class="ident" id="4934213"><a href="/gostd/html/template/html.go.html#4934162">j</a></span>&nbsp;<span class="op" id="4934215">-</span>&nbsp;<span class="num" id="4934217">1</span><span class="op" id="4934218">;</span>&nbsp;<span class="ident" id="4934220"><a href="/gostd/html/template/html.go.html#4934207">j1</a></span>&nbsp;<span class="op" id="4934223">&gt;=</span>&nbsp;<span class="ident" id="4934226"><a href="/gostd/html/template/html.go.html#4933641">i</a></span><span class="op" id="4934227">;</span>&nbsp;<span class="ident" id="4934229"><a href="/gostd/html/template/html.go.html#4934207">j1</a></span><span class="op" id="4934231">--</span>&nbsp;<span class="op" id="4934234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934242">if</span>&nbsp;<span class="ident" id="4934245"><a href="/gostd/html/template/html.go.html#4933635">s</a></span><span class="op" id="4934246">[</span><span class="ident" id="4934247"><a href="/gostd/html/template/html.go.html#4934207">j1</a></span><span class="op" id="4934249">]</span>&nbsp;<span class="op" id="4934251">==</span>&nbsp;<span class="string" id="4934254">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="4934258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934267"><a href="/gostd/html/template/html.go.html#4934162">j</a></span>&nbsp;<span class="op" id="4934269">=</span>&nbsp;<span class="ident" id="4934271"><a href="/gostd/html/template/html.go.html#4934207">j1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934281">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934293">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934312"><a href="/gostd/html/template/html.go.html#4933619">b</a></span><span class="op" id="4934313">.</span><span class="ident" id="4934314"><a href="/gostd/bytes/buffer.go.html#1387016">Write</a></span><span class="op" id="4934319">(</span><span class="ident" id="4934320"><a href="/gostd/html/template/html.go.html#4933635">s</a></span><span class="op" id="4934321">[</span><span class="ident" id="4934322"><a href="/gostd/html/template/html.go.html#4933641">i</a></span><span class="op" id="4934323">:</span><span class="ident" id="4934324"><a href="/gostd/html/template/html.go.html#4934162">j</a></span><span class="op" id="4934325">]</span><span class="op" id="4934326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934331">}</span>&nbsp;<span class="keyword" id="4934333">else</span>&nbsp;<span class="op" id="4934338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934344"><a href="/gostd/html/template/html.go.html#4933644">allText</a></span>&nbsp;<span class="op" id="4934352">=</span>&nbsp;<span class="builtintype" id="4934354">false</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934368"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934369">,</span>&nbsp;<span class="ident" id="4934371"><a href="/gostd/html/template/html.go.html#4933641">i</a></span>&nbsp;<span class="op" id="4934373">=</span>&nbsp;<span class="ident" id="4934375"><a href="/gostd/html/template/html.go.html#4933987">d</a></span><span class="op" id="4934376">,</span>&nbsp;<span class="ident" id="4934378"><a href="/gostd/html/template/html.go.html#4934031">i1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934384">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934399">i1</span>&nbsp;<span class="op" id="4934402">:=</span>&nbsp;<span class="ident" id="4934405"><a href="/gostd/html/template/html.go.html#4933641">i</a></span>&nbsp;<span class="op" id="4934407">+</span>&nbsp;<span class="ident" id="4934409"><a href="/gostd/html/template/html.go.html#4928952">bytes</a></span><span class="op" id="4934414">.</span><span class="ident" id="4934415"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4934423">(</span><span class="ident" id="4934424"><a href="/gostd/html/template/html.go.html#4933635">s</a></span><span class="op" id="4934425">[</span><span class="ident" id="4934426"><a href="/gostd/html/template/html.go.html#4933641">i</a></span><span class="op" id="4934427">:</span><span class="op" id="4934428">]</span><span class="op" id="4934429">,</span>&nbsp;<span class="ident" id="4934431"><a href="/gostd/html/template/escape.go.html#4921560">delimEnds</a></span><span class="op" id="4934440">[</span><span class="ident" id="4934441"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934442">.</span><span class="ident" id="4934443"><a href="/gostd/html/template/context.go.html#4872981">delim</a></span><span class="op" id="4934448">]</span><span class="op" id="4934449">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934453">if</span>&nbsp;<span class="ident" id="4934456"><a href="/gostd/html/template/html.go.html#4934399">i1</a></span>&nbsp;<span class="op" id="4934459">&lt;</span>&nbsp;<span class="ident" id="4934461"><a href="/gostd/html/template/html.go.html#4933641">i</a></span>&nbsp;<span class="op" id="4934463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934468">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934480">if</span>&nbsp;<span class="ident" id="4934483"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934484">.</span><span class="ident" id="4934485"><a href="/gostd/html/template/context.go.html#4872981">delim</a></span>&nbsp;<span class="op" id="4934491">!=</span>&nbsp;<span class="ident" id="4934494"><a href="/gostd/html/template/context.go.html#4878883">delimSpaceOrTagEnd</a></span>&nbsp;<span class="op" id="4934513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4934518">//&nbsp;Consume&nbsp;any&nbsp;quote.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934543"><a href="/gostd/html/template/html.go.html#4934399">i1</a></span><span class="op" id="4934545">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934554"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934555">,</span>&nbsp;<span class="ident" id="4934557"><a href="/gostd/html/template/html.go.html#4933641">i</a></span>&nbsp;<span class="op" id="4934559">=</span>&nbsp;<span class="ident" id="4934561"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4934568">{</span><span class="ident" id="4934569"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4934574">:</span>&nbsp;<span class="ident" id="4934576"><a href="/gostd/html/template/context.go.html#4874933">stateTag</a></span><span class="op" id="4934584">,</span>&nbsp;<span class="ident" id="4934586"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4934593">:</span>&nbsp;<span class="ident" id="4934595"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934596">.</span><span class="ident" id="4934597"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4934604">}</span><span class="op" id="4934605">,</span>&nbsp;<span class="ident" id="4934607"><a href="/gostd/html/template/html.go.html#4934399">i1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934614">if</span>&nbsp;<span class="ident" id="4934617"><a href="/gostd/html/template/html.go.html#4933644">allText</a></span>&nbsp;<span class="op" id="4934625">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934629">return</span>&nbsp;<span class="ident" id="4934636"><a href="/gostd/html/template/html.go.html#4933592">html</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934642">}</span>&nbsp;<span class="keyword" id="4934644">else</span>&nbsp;<span class="keyword" id="4934649">if</span>&nbsp;<span class="ident" id="4934652"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934653">.</span><span class="ident" id="4934654"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4934660">==</span>&nbsp;<span class="ident" id="4934663"><a href="/gostd/html/template/context.go.html#4874843">stateText</a></span>&nbsp;<span class="op" id="4934673">||</span>&nbsp;<span class="ident" id="4934676"><a href="/gostd/html/template/html.go.html#4933638">c</a></span><span class="op" id="4934677">.</span><span class="ident" id="4934678"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4934684">==</span>&nbsp;<span class="ident" id="4934687"><a href="/gostd/html/template/context.go.html#4875567">stateRCDATA</a></span>&nbsp;<span class="op" id="4934699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934703"><a href="/gostd/html/template/html.go.html#4933619">b</a></span><span class="op" id="4934704">.</span><span class="ident" id="4934705"><a href="/gostd/bytes/buffer.go.html#1387016">Write</a></span><span class="op" id="4934710">(</span><span class="ident" id="4934711"><a href="/gostd/html/template/html.go.html#4933635">s</a></span><span class="op" id="4934712">[</span><span class="ident" id="4934713"><a href="/gostd/html/template/html.go.html#4933641">i</a></span><span class="op" id="4934714">:</span><span class="op" id="4934715">]</span><span class="op" id="4934716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934722">return</span>&nbsp;<span class="ident" id="4934729"><a href="/gostd/html/template/html.go.html#4933619">b</a></span><span class="op" id="4934730">.</span><span class="ident" id="4934731"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="4934737">(</span><span class="op" id="4934738">)</span><br>
<span class="lineno">215</span><span class="op" id="4934740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4934743">//&nbsp;htmlNameFilter&nbsp;accepts&nbsp;valid&nbsp;parts&nbsp;of&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;or&nbsp;tag&nbsp;name&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4934817">//&nbsp;a&nbsp;known-safe&nbsp;HTML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="keyword" id="4934849">func</span>&nbsp;<span class="ident" id="4934854">htmlNameFilter</span><span class="op" id="4934868">(</span><span class="ident" id="4934869">args</span>&nbsp;<span class="op" id="4934874">...</span><span class="keyword" id="4934877">interface</span><span class="op" id="4934886">{</span><span class="op" id="4934887">}</span><span class="op" id="4934888">)</span>&nbsp;<span class="builtintype" id="4934890">string</span>&nbsp;<span class="op" id="4934897">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934900">s</span><span class="op" id="4934901">,</span>&nbsp;<span class="ident" id="4934903">t</span>&nbsp;<span class="op" id="4934905">:=</span>&nbsp;<span class="ident" id="4934908"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4934917">(</span><span class="ident" id="4934918"><a href="/gostd/html/template/html.go.html#4934869">args</a></span><span class="op" id="4934922">...</span><span class="op" id="4934925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934928">if</span>&nbsp;<span class="ident" id="4934931"><a href="/gostd/html/template/html.go.html#4934903">t</a></span>&nbsp;<span class="op" id="4934933">==</span>&nbsp;<span class="ident" id="4934936"><a href="/gostd/html/template/content.go.html#4870345">contentTypeHTMLAttr</a></span>&nbsp;<span class="op" id="4934956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934960">return</span>&nbsp;<span class="ident" id="4934967"><a href="/gostd/html/template/html.go.html#4934900">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934973">if</span>&nbsp;<span class="builtinfunc" id="4934976">len</span><span class="op" id="4934979">(</span><span class="ident" id="4934980"><a href="/gostd/html/template/html.go.html#4934900">s</a></span><span class="op" id="4934981">)</span>&nbsp;<span class="op" id="4934983">==</span>&nbsp;<span class="num" id="4934986">0</span>&nbsp;<span class="op" id="4934988">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4934992">//&nbsp;Avoid&nbsp;violation&nbsp;of&nbsp;structure&nbsp;preservation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935040">//&nbsp;&lt;input&nbsp;checked&nbsp;{{.K}}={{.V}}&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935076">//&nbsp;Without&nbsp;this,&nbsp;if&nbsp;.K&nbsp;is&nbsp;empty&nbsp;then&nbsp;.V&nbsp;is&nbsp;the&nbsp;value&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935134">//&nbsp;checked,&nbsp;but&nbsp;otherwise&nbsp;.V&nbsp;is&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;attribute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935195">//&nbsp;named&nbsp;.K.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935210">return</span>&nbsp;<span class="ident" id="4935217"><a href="/gostd/html/template/escape.go.html#4907571">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935236"><a href="/gostd/html/template/html.go.html#4934900">s</a></span>&nbsp;<span class="op" id="4935238">=</span>&nbsp;<span class="ident" id="4935240"><a href="/gostd/html/template/html.go.html#4928968">strings</a></span><span class="op" id="4935247">.</span><span class="ident" id="4935248"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4935255">(</span><span class="ident" id="4935256"><a href="/gostd/html/template/html.go.html#4934900">s</a></span><span class="op" id="4935257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935260">if</span>&nbsp;<span class="ident" id="4935263">t</span>&nbsp;<span class="op" id="4935265">:=</span>&nbsp;<span class="ident" id="4935268"><a href="/gostd/html/template/attr.go.html#4866659">attrType</a></span><span class="op" id="4935276">(</span><span class="ident" id="4935277"><a href="/gostd/html/template/html.go.html#4934900">s</a></span><span class="op" id="4935278">)</span><span class="op" id="4935279">;</span>&nbsp;<span class="ident" id="4935281"><a href="/gostd/html/template/html.go.html#4935263">t</a></span>&nbsp;<span class="op" id="4935283">!=</span>&nbsp;<span class="ident" id="4935286"><a href="/gostd/html/template/content.go.html#4870275">contentTypePlain</a></span>&nbsp;<span class="op" id="4935303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935307">//&nbsp;TODO:&nbsp;Split&nbsp;attr&nbsp;and&nbsp;element&nbsp;name&nbsp;part&nbsp;filters&nbsp;so&nbsp;we&nbsp;can&nbsp;whitelist</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935379">//&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935396">return</span>&nbsp;<span class="ident" id="4935403"><a href="/gostd/html/template/escape.go.html#4907571">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935422">for</span>&nbsp;<span class="ident" id="4935426">_</span><span class="op" id="4935427">,</span>&nbsp;<span class="ident" id="4935429">r</span>&nbsp;<span class="op" id="4935431">:=</span>&nbsp;<span class="keyword" id="4935434">range</span>&nbsp;<span class="ident" id="4935440"><a href="/gostd/html/template/html.go.html#4934900">s</a></span>&nbsp;<span class="op" id="4935442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935446">switch</span>&nbsp;<span class="op" id="4935453">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935457">case</span>&nbsp;<span class="string" id="4935462">&#39;0&#39;</span>&nbsp;<span class="op" id="4935466">&lt;=</span>&nbsp;<span class="ident" id="4935469"><a href="/gostd/html/template/html.go.html#4935429">r</a></span>&nbsp;<span class="op" id="4935471">&amp;&amp;</span>&nbsp;<span class="ident" id="4935474"><a href="/gostd/html/template/html.go.html#4935429">r</a></span>&nbsp;<span class="op" id="4935476">&lt;=</span>&nbsp;<span class="string" id="4935479">&#39;9&#39;</span><span class="op" id="4935482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935486">case</span>&nbsp;<span class="string" id="4935491">&#39;a&#39;</span>&nbsp;<span class="op" id="4935495">&lt;=</span>&nbsp;<span class="ident" id="4935498"><a href="/gostd/html/template/html.go.html#4935429">r</a></span>&nbsp;<span class="op" id="4935500">&amp;&amp;</span>&nbsp;<span class="ident" id="4935503"><a href="/gostd/html/template/html.go.html#4935429">r</a></span>&nbsp;<span class="op" id="4935505">&lt;=</span>&nbsp;<span class="string" id="4935508">&#39;z&#39;</span><span class="op" id="4935511">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935515">default</span><span class="op" id="4935522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935527">return</span>&nbsp;<span class="ident" id="4935534"><a href="/gostd/html/template/escape.go.html#4907571">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935551">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935557">return</span>&nbsp;<span class="ident" id="4935564"><a href="/gostd/html/template/html.go.html#4934900">s</a></span><br>
<span class="lineno"></span><span class="op" id="4935566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4935569">//&nbsp;commentEscaper&nbsp;returns&nbsp;the&nbsp;empty&nbsp;string&nbsp;regardless&nbsp;of&nbsp;input.</span><br>
<span class="lineno">250</span><span class="comment" id="4935633">//&nbsp;Comment&nbsp;content&nbsp;does&nbsp;not&nbsp;correspond&nbsp;to&nbsp;any&nbsp;parsed&nbsp;structure&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4935699">//&nbsp;human-readable&nbsp;content,&nbsp;so&nbsp;the&nbsp;simplest&nbsp;and&nbsp;most&nbsp;secure&nbsp;policy&nbsp;is&nbsp;to&nbsp;drop</span><br>
<span class="lineno"></span><span class="comment" id="4935776">//&nbsp;content&nbsp;interpolated&nbsp;into&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="4935815">//&nbsp;This&nbsp;approach&nbsp;is&nbsp;equally&nbsp;valid&nbsp;whether&nbsp;or&nbsp;not&nbsp;static&nbsp;comment&nbsp;content&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4935890">//&nbsp;removed&nbsp;from&nbsp;the&nbsp;template.</span><br>
<span class="lineno">255</span><span class="keyword" id="4935920">func</span>&nbsp;<span class="ident" id="4935925">commentEscaper</span><span class="op" id="4935939">(</span><span class="ident" id="4935940">args</span>&nbsp;<span class="op" id="4935945">...</span><span class="keyword" id="4935948">interface</span><span class="op" id="4935957">{</span><span class="op" id="4935958">}</span><span class="op" id="4935959">)</span>&nbsp;<span class="builtintype" id="4935961">string</span>&nbsp;<span class="op" id="4935968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935971">return</span>&nbsp;<span class="string" id="4935978">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4935981">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
