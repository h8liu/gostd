<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6037924">package</span>&nbsp;<span class="ident" id="6037932">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6037938">import</span>&nbsp;<span class="op" id="6037945">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6037948">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="6037970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6037973">var</span>&nbsp;<span class="op" id="6037977">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6037980">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;label</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038001">opBrMap</span>&nbsp;<span class="op" id="6038009">=</span>&nbsp;<span class="keyword" id="6038011">map</span><span class="op" id="6038014">[</span><span class="builtintype" id="6038015">string</span><span class="op" id="6038021">]</span><span class="builtintype" id="6038022">uint32</span><span class="op" id="6038028">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038032">&#34;bne&#34;</span><span class="op" id="6038037">:</span>&nbsp;<span class="num" id="6038039">32</span><span class="op" id="6038041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038045">&#34;beq&#34;</span><span class="op" id="6038050">:</span>&nbsp;<span class="num" id="6038052">33</span><span class="op" id="6038054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038057">}</span><br>
<span class="lineno"></span><span class="op" id="6038059">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6038062">func</span>&nbsp;<span class="ident" id="6038067">makeInstBr</span><span class="op" id="6038077">(</span><span class="ident" id="6038078">op</span><span class="op" id="6038080">,</span>&nbsp;<span class="ident" id="6038082">s1</span><span class="op" id="6038084">,</span>&nbsp;<span class="ident" id="6038086">s2</span>&nbsp;<span class="builtintype" id="6038089">uint32</span><span class="op" id="6038095">)</span>&nbsp;<span class="op" id="6038097">*</span><span class="ident" id="6038098"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span>&nbsp;<span class="op" id="6038103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038106">ret</span>&nbsp;<span class="op" id="6038110">:=</span>&nbsp;<span class="op" id="6038113">(</span><span class="ident" id="6038114"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038078">op</a></span>&nbsp;<span class="op" id="6038117">&amp;</span>&nbsp;<span class="num" id="6038119">0xff</span><span class="op" id="6038123">)</span>&nbsp;<span class="op" id="6038125">&lt;&lt;</span>&nbsp;<span class="num" id="6038128">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038132"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038106">ret</a></span>&nbsp;<span class="op" id="6038136">|=</span>&nbsp;<span class="op" id="6038139">(</span><span class="ident" id="6038140"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038082">s1</a></span>&nbsp;<span class="op" id="6038143">&amp;</span>&nbsp;<span class="num" id="6038145">0x7</span><span class="op" id="6038148">)</span>&nbsp;<span class="op" id="6038150">&lt;&lt;</span>&nbsp;<span class="num" id="6038153">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038157"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038106">ret</a></span>&nbsp;<span class="op" id="6038161">|=</span>&nbsp;<span class="op" id="6038164">(</span><span class="ident" id="6038165"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038086">s2</a></span>&nbsp;<span class="op" id="6038168">&amp;</span>&nbsp;<span class="num" id="6038170">0x7</span><span class="op" id="6038173">)</span>&nbsp;<span class="op" id="6038175">&lt;&lt;</span>&nbsp;<span class="num" id="6038178">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038182">return</span>&nbsp;<span class="op" id="6038189">&amp;</span><span class="ident" id="6038190"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span><span class="op" id="6038194">{</span><span class="ident" id="6038195">inst</span><span class="op" id="6038199">:</span>&nbsp;<span class="ident" id="6038201"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038106">ret</a></span><span class="op" id="6038204">}</span><br>
<span class="lineno">20</span><span class="op" id="6038206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6038209">func</span>&nbsp;<span class="ident" id="6038214">parseInstBr</span><span class="op" id="6038225">(</span><span class="ident" id="6038226">p</span>&nbsp;<span class="op" id="6038228">*</span><span class="ident" id="6038229"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6038235">,</span>&nbsp;<span class="ident" id="6038237">ops</span>&nbsp;<span class="op" id="6038241">[</span><span class="op" id="6038242">]</span><span class="op" id="6038243">*</span><span class="ident" id="6038244"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6037948">lex8</a></span><span class="op" id="6038248">.</span><span class="ident" id="6038249">Token</span><span class="op" id="6038254">)</span>&nbsp;<span class="op" id="6038256">(</span><span class="op" id="6038257">*</span><span class="ident" id="6038258"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span><span class="op" id="6038262">,</span>&nbsp;<span class="builtintype" id="6038264">bool</span><span class="op" id="6038268">)</span>&nbsp;<span class="op" id="6038270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038273">op0</span>&nbsp;<span class="op" id="6038277">:=</span>&nbsp;<span class="ident" id="6038280"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038237">ops</a></span><span class="op" id="6038283">[</span><span class="num" id="6038284">0</span><span class="op" id="6038285">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038288">opName</span>&nbsp;<span class="op" id="6038295">:=</span>&nbsp;<span class="ident" id="6038298"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038273">op0</a></span><span class="op" id="6038301">.</span><span class="ident" id="6038302">Lit</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038307">args</span>&nbsp;<span class="op" id="6038312">:=</span>&nbsp;<span class="ident" id="6038315"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038237">ops</a></span><span class="op" id="6038318">[</span><span class="num" id="6038319">1</span><span class="op" id="6038320">:</span><span class="op" id="6038321">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038325">var</span>&nbsp;<span class="op" id="6038329">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038333">op</span><span class="op" id="6038335">,</span>&nbsp;<span class="ident" id="6038337">s1</span><span class="op" id="6038339">,</span>&nbsp;<span class="ident" id="6038341">s2</span>&nbsp;<span class="builtintype" id="6038344">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038353">lab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6038364">string</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038373">symTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6038384">*</span><span class="ident" id="6038385"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6037948">lex8</a></span><span class="op" id="6038389">.</span><span class="ident" id="6038390">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038399">found</span>&nbsp;<span class="builtintype" id="6038405">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038411">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038415">if</span>&nbsp;<span class="ident" id="6038418"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038333">op</a></span><span class="op" id="6038420">,</span>&nbsp;<span class="ident" id="6038422"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038399">found</a></span>&nbsp;<span class="op" id="6038428">=</span>&nbsp;<span class="ident" id="6038430"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038001">opBrMap</a></span><span class="op" id="6038437">[</span><span class="ident" id="6038438"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038288">opName</a></span><span class="op" id="6038444">]</span><span class="op" id="6038445">;</span>&nbsp;<span class="ident" id="6038447"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038399">found</a></span>&nbsp;<span class="op" id="6038453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038457">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;label</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038479">if</span>&nbsp;<span class="ident" id="6038482"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#6052672">argCount</a></span><span class="op" id="6038490">(</span><span class="ident" id="6038491"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038226">p</a></span><span class="op" id="6038492">,</span>&nbsp;<span class="ident" id="6038494"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038237">ops</a></span><span class="op" id="6038497">,</span>&nbsp;<span class="num" id="6038499">3</span><span class="op" id="6038500">)</span>&nbsp;<span class="op" id="6038502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038507"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038337">s1</a></span>&nbsp;<span class="op" id="6038510">=</span>&nbsp;<span class="ident" id="6038512"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6038520">(</span><span class="ident" id="6038521"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038226">p</a></span><span class="op" id="6038522">,</span>&nbsp;<span class="ident" id="6038524"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038307">args</a></span><span class="op" id="6038528">[</span><span class="num" id="6038529">0</span><span class="op" id="6038530">]</span><span class="op" id="6038531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038536"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038341">s2</a></span>&nbsp;<span class="op" id="6038539">=</span>&nbsp;<span class="ident" id="6038541"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6038549">(</span><span class="ident" id="6038550"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038226">p</a></span><span class="op" id="6038551">,</span>&nbsp;<span class="ident" id="6038553"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038307">args</a></span><span class="op" id="6038557">[</span><span class="num" id="6038558">1</span><span class="op" id="6038559">]</span><span class="op" id="6038560">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038565"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038373">symTok</a></span>&nbsp;<span class="op" id="6038572">=</span>&nbsp;<span class="ident" id="6038574"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038307">args</a></span><span class="op" id="6038578">[</span><span class="num" id="6038579">2</span><span class="op" id="6038580">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038585">if</span>&nbsp;<span class="ident" id="6038588"><a href="/lonnie.io/e8vm/asm8/parse_label.go.html#6055866">parseLabel</a></span><span class="op" id="6038598">(</span><span class="ident" id="6038599"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038226">p</a></span><span class="op" id="6038600">,</span>&nbsp;<span class="ident" id="6038602"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038373">symTok</a></span><span class="op" id="6038608">)</span>&nbsp;<span class="op" id="6038610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038616"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038353">lab</a></span>&nbsp;<span class="op" id="6038620">=</span>&nbsp;<span class="ident" id="6038622"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038373">symTok</a></span><span class="op" id="6038628">.</span><span class="ident" id="6038629">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038636">}</span>&nbsp;<span class="keyword" id="6038638">else</span>&nbsp;<span class="op" id="6038643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038649"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038226">p</a></span><span class="op" id="6038650">.</span><span class="ident" id="6038651">err</span><span class="op" id="6038654">(</span><span class="ident" id="6038655"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038373">symTok</a></span><span class="op" id="6038661">.</span><span class="ident" id="6038662">Pos</span><span class="op" id="6038665">,</span>&nbsp;<span class="string" id="6038667">&#34;expects&nbsp;a&nbsp;label&nbsp;for&nbsp;%s&#34;</span><span class="op" id="6038691">,</span>&nbsp;<span class="ident" id="6038693"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038288">opName</a></span><span class="op" id="6038699">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038711">}</span>&nbsp;<span class="keyword" id="6038713">else</span>&nbsp;<span class="op" id="6038718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038722">return</span>&nbsp;<span class="ident" id="6038729">nil</span><span class="op" id="6038732">,</span>&nbsp;<span class="builtintype" id="6038734">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038741">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038745">ret</span>&nbsp;<span class="op" id="6038749">:=</span>&nbsp;<span class="ident" id="6038752"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038067">makeInstBr</a></span><span class="op" id="6038762">(</span><span class="ident" id="6038763"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038333">op</a></span><span class="op" id="6038765">,</span>&nbsp;<span class="ident" id="6038767"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038337">s1</a></span><span class="op" id="6038769">,</span>&nbsp;<span class="ident" id="6038771"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038341">s2</a></span><span class="op" id="6038773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038776"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038745">ret</a></span><span class="op" id="6038779">.</span><span class="ident" id="6038780">symbol</span>&nbsp;<span class="op" id="6038787">=</span>&nbsp;<span class="ident" id="6038789"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038353">lab</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038794"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038745">ret</a></span><span class="op" id="6038797">.</span><span class="ident" id="6038798">fill</span>&nbsp;<span class="op" id="6038803">=</span>&nbsp;<span class="ident" id="6038805"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037503">fillLabel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038816"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038745">ret</a></span><span class="op" id="6038819">.</span><span class="ident" id="6038820">symTok</span>&nbsp;<span class="op" id="6038827">=</span>&nbsp;<span class="ident" id="6038829"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038373">symTok</a></span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038838">return</span>&nbsp;<span class="ident" id="6038845"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#6038745">ret</a></span><span class="op" id="6038848">,</span>&nbsp;<span class="builtintype" id="6038850">true</span><br>
<span class="lineno"></span><span class="op" id="6038855">}</span>
</div>
</body>
</html>
