<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5300864">package</span>&nbsp;<span class="ident" id="5300872">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5300879">import</span>&nbsp;<span class="op" id="5300886">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5300889">&#34;io&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5300894">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5300897">//&nbsp;Machine&nbsp;is&nbsp;a&nbsp;multicore&nbsp;shared&nbsp;memory&nbsp;simulated&nbsp;arch8&nbsp;machine.</span><br>
<span class="lineno"></span><span class="keyword" id="5300962">type</span>&nbsp;<span class="ident" id="5300967">Machine</span>&nbsp;<span class="keyword" id="5300975">struct</span>&nbsp;<span class="op" id="5300982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300985">phyMem</span>&nbsp;&nbsp;<span class="op" id="5300993">*</span><span class="ident" id="5300994"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301005">inst</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5301013"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5285746">inst</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301019">cores</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5301027">*</span><span class="ident" id="5301028"><a href="/lonnie.io/e8vm/arch8/multi_core.go.html#5302993">multiCore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301039">serial</span>&nbsp;&nbsp;<span class="op" id="5301047">*</span><span class="ident" id="5301048"><a href="/lonnie.io/e8vm/arch8/serial.go.html#5312311">serial</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301056">console</span>&nbsp;<span class="op" id="5301064">*</span><span class="ident" id="5301065"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284704">console</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301075">devices</span>&nbsp;<span class="op" id="5301083">[</span><span class="op" id="5301084">]</span><span class="ident" id="5301085"><a href="/lonnie.io/e8vm/arch8/device.go.html#5290204">device</a></span><br>
<span class="lineno"></span><span class="op" id="5301092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5301095">//&nbsp;NewMachine&nbsp;creates&nbsp;a&nbsp;machine&nbsp;with&nbsp;memory&nbsp;and&nbsp;cores.</span><br>
<span class="lineno"></span><span class="keyword" id="5301150">func</span>&nbsp;<span class="ident" id="5301155">NewMachine</span><span class="op" id="5301165">(</span><span class="ident" id="5301166">memSize</span>&nbsp;<span class="builtintype" id="5301174">uint32</span><span class="op" id="5301180">,</span>&nbsp;<span class="ident" id="5301182">ncore</span>&nbsp;<span class="builtintype" id="5301188">int</span><span class="op" id="5301191">)</span>&nbsp;<span class="op" id="5301193">*</span><span class="ident" id="5301194"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span>&nbsp;<span class="op" id="5301202">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301205">ret</span>&nbsp;<span class="op" id="5301209">:=</span>&nbsp;<span class="builtinfunc" id="5301212">new</span><span class="op" id="5301215">(</span><span class="ident" id="5301216"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5301223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301226"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301229">.</span><span class="ident" id="5301230">phyMem</span>&nbsp;<span class="op" id="5301237">=</span>&nbsp;<span class="ident" id="5301239"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309431">newPhyMemory</a></span><span class="op" id="5301251">(</span><span class="ident" id="5301252"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301166">memSize</a></span><span class="op" id="5301259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301262"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301265">.</span><span class="ident" id="5301266">inst</span>&nbsp;<span class="op" id="5301271">=</span>&nbsp;<span class="builtinfunc" id="5301273">new</span><span class="op" id="5301276">(</span><span class="ident" id="5301277"><a href="/lonnie.io/e8vm/arch8/inst_all.go.html#5291403">instArch8</a></span><span class="op" id="5301286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301289"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301292">.</span><span class="ident" id="5301293">cores</span>&nbsp;<span class="op" id="5301299">=</span>&nbsp;<span class="ident" id="5301301"><a href="/lonnie.io/e8vm/arch8/multi_core.go.html#5303115">newMultiCore</a></span><span class="op" id="5301313">(</span><span class="ident" id="5301314"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301182">ncore</a></span><span class="op" id="5301319">,</span>&nbsp;<span class="ident" id="5301321"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301324">.</span><span class="ident" id="5301325">phyMem</span><span class="op" id="5301331">,</span>&nbsp;<span class="ident" id="5301333"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301336">.</span><span class="ident" id="5301337">inst</span><span class="op" id="5301341">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5301345">//&nbsp;hook-up&nbsp;devices</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301365">p</span>&nbsp;<span class="op" id="5301367">:=</span>&nbsp;<span class="ident" id="5301370"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301373">.</span><span class="ident" id="5301374">phyMem</span><span class="op" id="5301380">.</span><span class="ident" id="5301381">Page</span><span class="op" id="5301385">(</span><span class="ident" id="5301386"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309328">pageBasicIO</a></span><span class="op" id="5301397">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301401"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301404">.</span><span class="ident" id="5301405">serial</span>&nbsp;<span class="op" id="5301412">=</span>&nbsp;<span class="ident" id="5301414"><a href="/lonnie.io/e8vm/arch8/serial.go.html#5313191">newSerial</a></span><span class="op" id="5301423">(</span><span class="ident" id="5301424"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301365">p</a></span><span class="op" id="5301425">,</span>&nbsp;<span class="ident" id="5301427"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301430">.</span><span class="ident" id="5301431">cores</span><span class="op" id="5301436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301439"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301442">.</span><span class="ident" id="5301443">console</span>&nbsp;<span class="op" id="5301451">=</span>&nbsp;<span class="ident" id="5301453"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284861">newConsole</a></span><span class="op" id="5301463">(</span><span class="ident" id="5301464"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301365">p</a></span><span class="op" id="5301465">,</span>&nbsp;<span class="ident" id="5301467"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301470">.</span><span class="ident" id="5301471">cores</span><span class="op" id="5301476">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301480"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301483">.</span><span class="ident" id="5301484">addDevice</span><span class="op" id="5301493">(</span><span class="ident" id="5301494"><a href="/lonnie.io/e8vm/arch8/ticker.go.html#5316172">newTicker</a></span><span class="op" id="5301503">(</span><span class="ident" id="5301504"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301507">.</span><span class="ident" id="5301508">cores</span><span class="op" id="5301513">)</span><span class="op" id="5301514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301517"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301520">.</span><span class="ident" id="5301521">addDevice</span><span class="op" id="5301530">(</span><span class="ident" id="5301531"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301534">.</span><span class="ident" id="5301535">serial</span><span class="op" id="5301541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301544"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301547">.</span><span class="ident" id="5301548">addDevice</span><span class="op" id="5301557">(</span><span class="ident" id="5301558"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><span class="op" id="5301561">.</span><span class="ident" id="5301562">console</span><span class="op" id="5301569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301573">return</span>&nbsp;<span class="ident" id="5301580"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301205">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5301584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5301587">//&nbsp;SetOutput&nbsp;sets&nbsp;the&nbsp;output&nbsp;writer&nbsp;of&nbsp;the&nbsp;machine&#39;s&nbsp;serial</span><br>
<span class="lineno"></span><span class="comment" id="5301647">//&nbsp;console.</span><br>
<span class="lineno">40</span><span class="keyword" id="5301659">func</span>&nbsp;<span class="op" id="5301664">(</span><span class="ident" id="5301665">m</span>&nbsp;<span class="op" id="5301667">*</span><span class="ident" id="5301668"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5301675">)</span>&nbsp;<span class="ident" id="5301677">SetOutput</span><span class="op" id="5301686">(</span><span class="ident" id="5301687">w</span>&nbsp;<span class="ident" id="5301689"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300889">io</a></span><span class="op" id="5301691">.</span><span class="ident" id="5301692">Writer</span><span class="op" id="5301698">)</span>&nbsp;<span class="op" id="5301700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301703"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301665">m</a></span><span class="op" id="5301704">.</span><span class="ident" id="5301705">serial</span><span class="op" id="5301711">.</span><span class="ident" id="5301712">Output</span>&nbsp;<span class="op" id="5301719">=</span>&nbsp;<span class="ident" id="5301721"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301687">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301724"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301665">m</a></span><span class="op" id="5301725">.</span><span class="ident" id="5301726">console</span><span class="op" id="5301733">.</span><span class="ident" id="5301734">Output</span>&nbsp;<span class="op" id="5301741">=</span>&nbsp;<span class="ident" id="5301743"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301687">w</a></span><br>
<span class="lineno"></span><span class="op" id="5301745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="5301748">//&nbsp;AddDevice&nbsp;adds&nbsp;a&nbsp;devices&nbsp;to&nbsp;the&nbsp;machine.</span><br>
<span class="lineno"></span><span class="keyword" id="5301792">func</span>&nbsp;<span class="op" id="5301797">(</span><span class="ident" id="5301798">m</span>&nbsp;<span class="op" id="5301800">*</span><span class="ident" id="5301801"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5301808">)</span>&nbsp;<span class="ident" id="5301810">addDevice</span><span class="op" id="5301819">(</span><span class="ident" id="5301820">d</span>&nbsp;<span class="ident" id="5301822"><a href="/lonnie.io/e8vm/arch8/device.go.html#5290204">device</a></span><span class="op" id="5301828">)</span>&nbsp;<span class="op" id="5301830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301833"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301798">m</a></span><span class="op" id="5301834">.</span><span class="ident" id="5301835">devices</span>&nbsp;<span class="op" id="5301843">=</span>&nbsp;<span class="builtinfunc" id="5301845">append</span><span class="op" id="5301851">(</span><span class="ident" id="5301852"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301798">m</a></span><span class="op" id="5301853">.</span><span class="ident" id="5301854">devices</span><span class="op" id="5301861">,</span>&nbsp;<span class="ident" id="5301863"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301820">d</a></span><span class="op" id="5301864">)</span><br>
<span class="lineno"></span><span class="op" id="5301866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5301869">//&nbsp;Tick&nbsp;proceeds&nbsp;the&nbsp;simulation&nbsp;by&nbsp;one&nbsp;tick.</span><br>
<span class="lineno"></span><span class="keyword" id="5301914">func</span>&nbsp;<span class="op" id="5301919">(</span><span class="ident" id="5301920">m</span>&nbsp;<span class="op" id="5301922">*</span><span class="ident" id="5301923"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5301930">)</span>&nbsp;<span class="ident" id="5301932">Tick</span><span class="op" id="5301936">(</span><span class="op" id="5301937">)</span>&nbsp;<span class="op" id="5301939">*</span><span class="ident" id="5301940"><a href="/lonnie.io/e8vm/arch8/multi_core.go.html#5303448">CoreExcep</a></span>&nbsp;<span class="op" id="5301950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301953">for</span>&nbsp;<span class="ident" id="5301957">_</span><span class="op" id="5301958">,</span>&nbsp;<span class="ident" id="5301960">d</span>&nbsp;<span class="op" id="5301962">:=</span>&nbsp;<span class="keyword" id="5301965">range</span>&nbsp;<span class="ident" id="5301971"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301920">m</a></span><span class="op" id="5301972">.</span><span class="ident" id="5301973">devices</span>&nbsp;<span class="op" id="5301981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301985"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301960">d</a></span><span class="op" id="5301986">.</span><span class="ident" id="5301987">Tick</span><span class="op" id="5301991">(</span><span class="op" id="5301992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301995">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301999">return</span>&nbsp;<span class="ident" id="5302006"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5301920">m</a></span><span class="op" id="5302007">.</span><span class="ident" id="5302008">cores</span><span class="op" id="5302013">.</span><span class="ident" id="5302014">Tick</span><span class="op" id="5302018">(</span><span class="op" id="5302019">)</span><br>
<span class="lineno"></span><span class="op" id="5302021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5302024">//&nbsp;Run&nbsp;simulates&nbsp;nticks.&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;ticks</span><br>
<span class="lineno">60</span><span class="comment" id="5302080">//&nbsp;simulated&nbsp;without&nbsp;error,&nbsp;and&nbsp;the&nbsp;first&nbsp;met&nbsp;error&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="5302140">func</span>&nbsp;<span class="op" id="5302145">(</span><span class="ident" id="5302146">m</span>&nbsp;<span class="op" id="5302148">*</span><span class="ident" id="5302149"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5302156">)</span>&nbsp;<span class="ident" id="5302158">Run</span><span class="op" id="5302161">(</span><span class="ident" id="5302162">nticks</span>&nbsp;<span class="builtintype" id="5302169">int</span><span class="op" id="5302172">)</span>&nbsp;<span class="op" id="5302174">(</span><span class="builtintype" id="5302175">int</span><span class="op" id="5302178">,</span>&nbsp;<span class="op" id="5302180">*</span><span class="ident" id="5302181"><a href="/lonnie.io/e8vm/arch8/multi_core.go.html#5303448">CoreExcep</a></span><span class="op" id="5302190">)</span>&nbsp;<span class="op" id="5302192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302195">n</span>&nbsp;<span class="op" id="5302197">:=</span>&nbsp;<span class="num" id="5302200">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302203">for</span>&nbsp;<span class="ident" id="5302207">i</span>&nbsp;<span class="op" id="5302209">:=</span>&nbsp;<span class="num" id="5302212">0</span><span class="op" id="5302213">;</span>&nbsp;<span class="ident" id="5302215"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302162">nticks</a></span>&nbsp;<span class="op" id="5302222">==</span>&nbsp;<span class="num" id="5302225">0</span>&nbsp;<span class="op" id="5302227">||</span>&nbsp;<span class="ident" id="5302230"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302207">i</a></span>&nbsp;<span class="op" id="5302232">&lt;</span>&nbsp;<span class="ident" id="5302234"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302162">nticks</a></span><span class="op" id="5302240">;</span>&nbsp;<span class="ident" id="5302242"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302207">i</a></span><span class="op" id="5302243">++</span>&nbsp;<span class="op" id="5302246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302250">e</span>&nbsp;<span class="op" id="5302252">:=</span>&nbsp;<span class="ident" id="5302255"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302146">m</a></span><span class="op" id="5302256">.</span><span class="ident" id="5302257">Tick</span><span class="op" id="5302261">(</span><span class="op" id="5302262">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302266"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302195">n</a></span><span class="op" id="5302267">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302272">if</span>&nbsp;<span class="ident" id="5302275"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302250">e</a></span>&nbsp;<span class="op" id="5302277">!=</span>&nbsp;<span class="ident" id="5302280">nil</span>&nbsp;<span class="op" id="5302284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302289">return</span>&nbsp;<span class="ident" id="5302296"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302195">n</a></span><span class="op" id="5302297">,</span>&nbsp;<span class="ident" id="5302299"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302250">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302306">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302310">return</span>&nbsp;<span class="ident" id="5302317"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302195">n</a></span><span class="op" id="5302318">,</span>&nbsp;<span class="ident" id="5302320">nil</span><br>
<span class="lineno"></span><span class="op" id="5302324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5302327">//&nbsp;LoadImage&nbsp;loads&nbsp;an&nbsp;booting&nbsp;image&nbsp;from&nbsp;a&nbsp;reader&nbsp;and&nbsp;put&nbsp;it</span><br>
<span class="lineno">75</span><span class="comment" id="5302388">//&nbsp;at&nbsp;a&nbsp;particular&nbsp;offset&nbsp;in&nbsp;the&nbsp;physical&nbsp;memory.</span><br>
<span class="lineno"></span><span class="keyword" id="5302438">func</span>&nbsp;<span class="op" id="5302443">(</span><span class="ident" id="5302444">m</span>&nbsp;<span class="op" id="5302446">*</span><span class="ident" id="5302447"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5302454">)</span>&nbsp;<span class="ident" id="5302456">LoadImage</span><span class="op" id="5302465">(</span><span class="ident" id="5302466">r</span>&nbsp;<span class="ident" id="5302468"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300889">io</a></span><span class="op" id="5302470">.</span><span class="ident" id="5302471">Reader</span><span class="op" id="5302477">,</span>&nbsp;<span class="ident" id="5302479">offset</span>&nbsp;<span class="builtintype" id="5302486">uint32</span><span class="op" id="5302492">)</span>&nbsp;<span class="builtintype" id="5302494">error</span>&nbsp;<span class="op" id="5302500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302503">if</span>&nbsp;<span class="ident" id="5302506"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302479">offset</a></span><span class="op" id="5302512">%</span><span class="ident" id="5302513"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span>&nbsp;<span class="op" id="5302522">!=</span>&nbsp;<span class="num" id="5302525">0</span>&nbsp;<span class="op" id="5302527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5302531">panic</span><span class="op" id="5302536">(</span><span class="string" id="5302537">&#34;boot&nbsp;image&nbsp;not&nbsp;page&nbsp;aligned&#34;</span><span class="op" id="5302566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302569">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302573">pn</span>&nbsp;<span class="op" id="5302576">:=</span>&nbsp;<span class="ident" id="5302579"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302479">offset</a></span>&nbsp;<span class="op" id="5302586">/</span>&nbsp;<span class="ident" id="5302588"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302599">for</span>&nbsp;<span class="op" id="5302603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302607">p</span>&nbsp;<span class="op" id="5302609">:=</span>&nbsp;<span class="ident" id="5302612"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302444">m</a></span><span class="op" id="5302613">.</span><span class="ident" id="5302614">phyMem</span><span class="op" id="5302620">.</span><span class="ident" id="5302621">Page</span><span class="op" id="5302625">(</span><span class="ident" id="5302626"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302573">pn</a></span><span class="op" id="5302628">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302632">if</span>&nbsp;<span class="ident" id="5302635"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302607">p</a></span>&nbsp;<span class="op" id="5302637">==</span>&nbsp;<span class="ident" id="5302640">nil</span>&nbsp;<span class="op" id="5302644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302649">return</span>&nbsp;<span class="ident" id="5302656"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290972">errOutOfRange</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302676">_</span><span class="op" id="5302677">,</span>&nbsp;<span class="ident" id="5302679">e</span>&nbsp;<span class="op" id="5302681">:=</span>&nbsp;<span class="ident" id="5302684"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302466">r</a></span><span class="op" id="5302685">.</span><span class="ident" id="5302686">Read</span><span class="op" id="5302690">(</span><span class="ident" id="5302691"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302607">p</a></span><span class="op" id="5302692">.</span><span class="ident" id="5302693">Bytes</span><span class="op" id="5302698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302702">if</span>&nbsp;<span class="ident" id="5302705"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302679">e</a></span>&nbsp;<span class="op" id="5302707">==</span>&nbsp;<span class="ident" id="5302710"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300889">io</a></span><span class="op" id="5302712">.</span><span class="ident" id="5302713">EOF</span>&nbsp;<span class="op" id="5302717">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302722">return</span>&nbsp;<span class="ident" id="5302729">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302735">}</span>&nbsp;<span class="keyword" id="5302737">else</span>&nbsp;<span class="keyword" id="5302742">if</span>&nbsp;<span class="ident" id="5302745"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302679">e</a></span>&nbsp;<span class="op" id="5302747">!=</span>&nbsp;<span class="ident" id="5302750">nil</span>&nbsp;<span class="op" id="5302754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302759">return</span>&nbsp;<span class="ident" id="5302766"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302679">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302775"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302573">pn</a></span><span class="op" id="5302777">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302781">}</span><br>
<span class="lineno"></span><span class="op" id="5302783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5302786">//&nbsp;PrintCoreStatus&nbsp;prints&nbsp;the&nbsp;cpu&nbsp;statuses.</span><br>
<span class="lineno">100</span><span class="keyword" id="5302830">func</span>&nbsp;<span class="op" id="5302835">(</span><span class="ident" id="5302836">m</span>&nbsp;<span class="op" id="5302838">*</span><span class="ident" id="5302839"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5300967">Machine</a></span><span class="op" id="5302846">)</span>&nbsp;<span class="ident" id="5302848">PrintCoreStatus</span><span class="op" id="5302863">(</span><span class="op" id="5302864">)</span>&nbsp;<span class="op" id="5302866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302869"><a href="/lonnie.io/e8vm/arch8/machine.go.html#5302836">m</a></span><span class="op" id="5302870">.</span><span class="ident" id="5302871">cores</span><span class="op" id="5302876">.</span><span class="ident" id="5302877">PrintStatus</span><span class="op" id="5302888">(</span><span class="op" id="5302889">)</span><br>
<span class="lineno"></span><span class="op" id="5302891">}</span>
</div>
</body>
</html>
