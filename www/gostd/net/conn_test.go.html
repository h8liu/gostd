<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html" class="current">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6405038">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6405094">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6405148">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6405199">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6405278">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405287">package</span>&nbsp;<span class="ident" id="6405295">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6405300">import</span>&nbsp;<span class="op" id="6405307">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405310">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405316">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405327">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405338">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6405345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405348">var</span>&nbsp;<span class="ident" id="6405352">connTests</span>&nbsp;<span class="op" id="6405362">=</span>&nbsp;<span class="op" id="6405364">[</span><span class="op" id="6405365">]</span><span class="keyword" id="6405366">struct</span>&nbsp;<span class="op" id="6405373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405376">net</span>&nbsp;&nbsp;<span class="builtintype" id="6405381">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405389">addr</span>&nbsp;<span class="builtintype" id="6405394">string</span><br>
<span class="lineno">20</span><span class="op" id="6405401">}</span><span class="op" id="6405402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405405">{</span><span class="string" id="6405406">&#34;tcp&#34;</span><span class="op" id="6405411">,</span>&nbsp;<span class="string" id="6405413">&#34;127.0.0.1:0&#34;</span><span class="op" id="6405426">}</span><span class="op" id="6405427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405430">{</span><span class="string" id="6405431">&#34;unix&#34;</span><span class="op" id="6405437">,</span>&nbsp;<span class="ident" id="6405439">testUnixAddr</span><span class="op" id="6405451">(</span><span class="op" id="6405452">)</span><span class="op" id="6405453">}</span><span class="op" id="6405454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405457">{</span><span class="string" id="6405458">&#34;unixpacket&#34;</span><span class="op" id="6405470">,</span>&nbsp;<span class="ident" id="6405472">testUnixAddr</span><span class="op" id="6405484">(</span><span class="op" id="6405485">)</span><span class="op" id="6405486">}</span><span class="op" id="6405487">,</span><br>
<span class="lineno"></span><span class="op" id="6405489">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6405492">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="6405558">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="6405621">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="6405669">const</span>&nbsp;<span class="ident" id="6405675">someTimeout</span>&nbsp;<span class="op" id="6405687">=</span>&nbsp;<span class="num" id="6405689">10</span>&nbsp;<span class="op" id="6405692">*</span>&nbsp;<span class="ident" id="6405694">time</span><span class="op" id="6405698">.</span><span class="ident" id="6405699">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6405707">func</span>&nbsp;<span class="ident" id="6405712">TestConnAndListener</span><span class="op" id="6405731">(</span><span class="ident" id="6405732">t</span>&nbsp;<span class="op" id="6405734">*</span><span class="ident" id="6405735">testing</span><span class="op" id="6405742">.</span><span class="ident" id="6405743">T</span><span class="op" id="6405744">)</span>&nbsp;<span class="op" id="6405746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405749">for</span>&nbsp;<span class="ident" id="6405753">_</span><span class="op" id="6405754">,</span>&nbsp;<span class="ident" id="6405756">tt</span>&nbsp;<span class="op" id="6405759">:=</span>&nbsp;<span class="keyword" id="6405762">range</span>&nbsp;<span class="ident" id="6405768">connTests</span>&nbsp;<span class="op" id="6405778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405782">switch</span>&nbsp;<span class="ident" id="6405789">tt</span><span class="op" id="6405791">.</span><span class="ident" id="6405792">net</span>&nbsp;<span class="op" id="6405796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405800">case</span>&nbsp;<span class="string" id="6405805">&#34;unix&#34;</span><span class="op" id="6405811">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405816">switch</span>&nbsp;<span class="ident" id="6405823">runtime</span><span class="op" id="6405830">.</span><span class="ident" id="6405831">GOOS</span>&nbsp;<span class="op" id="6405836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405841">case</span>&nbsp;<span class="string" id="6405846">&#34;nacl&#34;</span><span class="op" id="6405852">,</span>&nbsp;<span class="string" id="6405854">&#34;plan9&#34;</span><span class="op" id="6405861">,</span>&nbsp;<span class="string" id="6405863">&#34;windows&#34;</span><span class="op" id="6405872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405878">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405894">case</span>&nbsp;<span class="string" id="6405899">&#34;unixpacket&#34;</span><span class="op" id="6405911">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405916">switch</span>&nbsp;<span class="ident" id="6405923">runtime</span><span class="op" id="6405930">.</span><span class="ident" id="6405931">GOOS</span>&nbsp;<span class="op" id="6405936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6405941">case</span>&nbsp;<span class="string" id="6405946">&#34;android&#34;</span><span class="op" id="6405955">,</span>&nbsp;<span class="string" id="6405957">&#34;darwin&#34;</span><span class="op" id="6405965">,</span>&nbsp;<span class="string" id="6405967">&#34;nacl&#34;</span><span class="op" id="6405973">,</span>&nbsp;<span class="string" id="6405975">&#34;openbsd&#34;</span><span class="op" id="6405984">,</span>&nbsp;<span class="string" id="6405986">&#34;plan9&#34;</span><span class="op" id="6405993">,</span>&nbsp;<span class="string" id="6405995">&#34;windows&#34;</span><span class="op" id="6406004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406010">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406022">case</span>&nbsp;<span class="string" id="6406027">&#34;freebsd&#34;</span><span class="op" id="6406036">:</span>&nbsp;<span class="comment" id="6406038">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406082">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406103">ln</span><span class="op" id="6406105">,</span>&nbsp;<span class="ident" id="6406107">err</span>&nbsp;<span class="op" id="6406111">:=</span>&nbsp;<span class="ident" id="6406114">Listen</span><span class="op" id="6406120">(</span><span class="ident" id="6406121">tt</span><span class="op" id="6406123">.</span><span class="ident" id="6406124">net</span><span class="op" id="6406127">,</span>&nbsp;<span class="ident" id="6406129">tt</span><span class="op" id="6406131">.</span><span class="ident" id="6406132">addr</span><span class="op" id="6406136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406140">if</span>&nbsp;<span class="ident" id="6406143">err</span>&nbsp;<span class="op" id="6406147">!=</span>&nbsp;<span class="builtintype" id="6406150">nil</span>&nbsp;<span class="op" id="6406154">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406159">t</span><span class="op" id="6406160">.</span><span class="ident" id="6406161">Fatalf</span><span class="op" id="6406167">(</span><span class="string" id="6406168">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6406187">,</span>&nbsp;<span class="ident" id="6406189">err</span><span class="op" id="6406192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406200">defer</span>&nbsp;<span class="keyword" id="6406206">func</span><span class="op" id="6406210">(</span><span class="ident" id="6406211">ln</span>&nbsp;<span class="ident" id="6406214">Listener</span><span class="op" id="6406222">,</span>&nbsp;<span class="ident" id="6406224">net</span><span class="op" id="6406227">,</span>&nbsp;<span class="ident" id="6406229">addr</span>&nbsp;<span class="builtintype" id="6406234">string</span><span class="op" id="6406240">)</span>&nbsp;<span class="op" id="6406242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406247">ln</span><span class="op" id="6406249">.</span><span class="ident" id="6406250">Close</span><span class="op" id="6406255">(</span><span class="op" id="6406256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406261">switch</span>&nbsp;<span class="ident" id="6406268">net</span>&nbsp;<span class="op" id="6406272">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406277">case</span>&nbsp;<span class="string" id="6406282">&#34;unix&#34;</span><span class="op" id="6406288">,</span>&nbsp;<span class="string" id="6406290">&#34;unixpacket&#34;</span><span class="op" id="6406302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406308">os</span><span class="op" id="6406310">.</span><span class="ident" id="6406311">Remove</span><span class="op" id="6406317">(</span><span class="ident" id="6406318">addr</span><span class="op" id="6406322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406331">}</span><span class="op" id="6406332">(</span><span class="ident" id="6406333">ln</span><span class="op" id="6406335">,</span>&nbsp;<span class="ident" id="6406337">tt</span><span class="op" id="6406339">.</span><span class="ident" id="6406340">net</span><span class="op" id="6406343">,</span>&nbsp;<span class="ident" id="6406345">tt</span><span class="op" id="6406347">.</span><span class="ident" id="6406348">addr</span><span class="op" id="6406352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406356">if</span>&nbsp;<span class="ident" id="6406359">ln</span><span class="op" id="6406361">.</span><span class="ident" id="6406362">Addr</span><span class="op" id="6406366">(</span><span class="op" id="6406367">)</span><span class="op" id="6406368">.</span><span class="ident" id="6406369">Network</span><span class="op" id="6406376">(</span><span class="op" id="6406377">)</span>&nbsp;<span class="op" id="6406379">!=</span>&nbsp;<span class="ident" id="6406382">tt</span><span class="op" id="6406384">.</span><span class="ident" id="6406385">net</span>&nbsp;<span class="op" id="6406389">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406394">t</span><span class="op" id="6406395">.</span><span class="ident" id="6406396">Fatalf</span><span class="op" id="6406402">(</span><span class="string" id="6406403">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6406424">,</span>&nbsp;<span class="ident" id="6406426">ln</span><span class="op" id="6406428">.</span><span class="ident" id="6406429">Addr</span><span class="op" id="6406433">(</span><span class="op" id="6406434">)</span><span class="op" id="6406435">.</span><span class="ident" id="6406436">Network</span><span class="op" id="6406443">(</span><span class="op" id="6406444">)</span><span class="op" id="6406445">,</span>&nbsp;<span class="ident" id="6406447">tt</span><span class="op" id="6406449">.</span><span class="ident" id="6406450">net</span><span class="op" id="6406453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406462">done</span>&nbsp;<span class="op" id="6406467">:=</span>&nbsp;<span class="builtinfunc" id="6406470">make</span><span class="op" id="6406474">(</span><span class="keyword" id="6406475">chan</span>&nbsp;<span class="builtintype" id="6406480">int</span><span class="op" id="6406483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406487">go</span>&nbsp;<span class="ident" id="6406490">transponder</span><span class="op" id="6406501">(</span><span class="ident" id="6406502">t</span><span class="op" id="6406503">,</span>&nbsp;<span class="ident" id="6406505">ln</span><span class="op" id="6406507">,</span>&nbsp;<span class="ident" id="6406509">done</span><span class="op" id="6406513">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406518">c</span><span class="op" id="6406519">,</span>&nbsp;<span class="ident" id="6406521">err</span>&nbsp;<span class="op" id="6406525">:=</span>&nbsp;<span class="ident" id="6406528">Dial</span><span class="op" id="6406532">(</span><span class="ident" id="6406533">tt</span><span class="op" id="6406535">.</span><span class="ident" id="6406536">net</span><span class="op" id="6406539">,</span>&nbsp;<span class="ident" id="6406541">ln</span><span class="op" id="6406543">.</span><span class="ident" id="6406544">Addr</span><span class="op" id="6406548">(</span><span class="op" id="6406549">)</span><span class="op" id="6406550">.</span><span class="ident" id="6406551">String</span><span class="op" id="6406557">(</span><span class="op" id="6406558">)</span><span class="op" id="6406559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406563">if</span>&nbsp;<span class="ident" id="6406566">err</span>&nbsp;<span class="op" id="6406570">!=</span>&nbsp;<span class="builtintype" id="6406573">nil</span>&nbsp;<span class="op" id="6406577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406582">t</span><span class="op" id="6406583">.</span><span class="ident" id="6406584">Fatalf</span><span class="op" id="6406590">(</span><span class="string" id="6406591">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6406608">,</span>&nbsp;<span class="ident" id="6406610">err</span><span class="op" id="6406613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406617">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406621">defer</span>&nbsp;<span class="ident" id="6406627">c</span><span class="op" id="6406628">.</span><span class="ident" id="6406629">Close</span><span class="op" id="6406634">(</span><span class="op" id="6406635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406639">if</span>&nbsp;<span class="ident" id="6406642">c</span><span class="op" id="6406643">.</span><span class="ident" id="6406644">LocalAddr</span><span class="op" id="6406653">(</span><span class="op" id="6406654">)</span><span class="op" id="6406655">.</span><span class="ident" id="6406656">Network</span><span class="op" id="6406663">(</span><span class="op" id="6406664">)</span>&nbsp;<span class="op" id="6406666">!=</span>&nbsp;<span class="ident" id="6406669">tt</span><span class="op" id="6406671">.</span><span class="ident" id="6406672">net</span>&nbsp;<span class="op" id="6406676">||</span>&nbsp;<span class="ident" id="6406679">c</span><span class="op" id="6406680">.</span><span class="ident" id="6406681">LocalAddr</span><span class="op" id="6406690">(</span><span class="op" id="6406691">)</span><span class="op" id="6406692">.</span><span class="ident" id="6406693">Network</span><span class="op" id="6406700">(</span><span class="op" id="6406701">)</span>&nbsp;<span class="op" id="6406703">!=</span>&nbsp;<span class="ident" id="6406706">tt</span><span class="op" id="6406708">.</span><span class="ident" id="6406709">net</span>&nbsp;<span class="op" id="6406713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406718">t</span><span class="op" id="6406719">.</span><span class="ident" id="6406720">Fatalf</span><span class="op" id="6406726">(</span><span class="string" id="6406727">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6406756">,</span>&nbsp;<span class="ident" id="6406758">c</span><span class="op" id="6406759">.</span><span class="ident" id="6406760">LocalAddr</span><span class="op" id="6406769">(</span><span class="op" id="6406770">)</span><span class="op" id="6406771">.</span><span class="ident" id="6406772">Network</span><span class="op" id="6406779">(</span><span class="op" id="6406780">)</span><span class="op" id="6406781">,</span>&nbsp;<span class="ident" id="6406783">c</span><span class="op" id="6406784">.</span><span class="ident" id="6406785">RemoteAddr</span><span class="op" id="6406795">(</span><span class="op" id="6406796">)</span><span class="op" id="6406797">.</span><span class="ident" id="6406798">Network</span><span class="op" id="6406805">(</span><span class="op" id="6406806">)</span><span class="op" id="6406807">,</span>&nbsp;<span class="ident" id="6406809">tt</span><span class="op" id="6406811">.</span><span class="ident" id="6406812">net</span><span class="op" id="6406815">,</span>&nbsp;<span class="ident" id="6406817">tt</span><span class="op" id="6406819">.</span><span class="ident" id="6406820">net</span><span class="op" id="6406823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406831">c</span><span class="op" id="6406832">.</span><span class="ident" id="6406833">SetDeadline</span><span class="op" id="6406844">(</span><span class="ident" id="6406845">time</span><span class="op" id="6406849">.</span><span class="ident" id="6406850">Now</span><span class="op" id="6406853">(</span><span class="op" id="6406854">)</span><span class="op" id="6406855">.</span><span class="ident" id="6406856">Add</span><span class="op" id="6406859">(</span><span class="ident" id="6406860">someTimeout</span><span class="op" id="6406871">)</span><span class="op" id="6406872">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406876">c</span><span class="op" id="6406877">.</span><span class="ident" id="6406878">SetReadDeadline</span><span class="op" id="6406893">(</span><span class="ident" id="6406894">time</span><span class="op" id="6406898">.</span><span class="ident" id="6406899">Now</span><span class="op" id="6406902">(</span><span class="op" id="6406903">)</span><span class="op" id="6406904">.</span><span class="ident" id="6406905">Add</span><span class="op" id="6406908">(</span><span class="ident" id="6406909">someTimeout</span><span class="op" id="6406920">)</span><span class="op" id="6406921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406925">c</span><span class="op" id="6406926">.</span><span class="ident" id="6406927">SetWriteDeadline</span><span class="op" id="6406943">(</span><span class="ident" id="6406944">time</span><span class="op" id="6406948">.</span><span class="ident" id="6406949">Now</span><span class="op" id="6406952">(</span><span class="op" id="6406953">)</span><span class="op" id="6406954">.</span><span class="ident" id="6406955">Add</span><span class="op" id="6406958">(</span><span class="ident" id="6406959">someTimeout</span><span class="op" id="6406970">)</span><span class="op" id="6406971">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6406976">if</span>&nbsp;<span class="ident" id="6406979">_</span><span class="op" id="6406980">,</span>&nbsp;<span class="ident" id="6406982">err</span>&nbsp;<span class="op" id="6406986">:=</span>&nbsp;<span class="ident" id="6406989">c</span><span class="op" id="6406990">.</span><span class="ident" id="6406991">Write</span><span class="op" id="6406996">(</span><span class="op" id="6406997">[</span><span class="op" id="6406998">]</span><span class="builtintype" id="6406999">byte</span><span class="op" id="6407003">(</span><span class="string" id="6407004">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="6407015">)</span><span class="op" id="6407016">)</span><span class="op" id="6407017">;</span>&nbsp;<span class="ident" id="6407019">err</span>&nbsp;<span class="op" id="6407023">!=</span>&nbsp;<span class="builtintype" id="6407026">nil</span>&nbsp;<span class="op" id="6407030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407035">t</span><span class="op" id="6407036">.</span><span class="ident" id="6407037">Fatalf</span><span class="op" id="6407043">(</span><span class="string" id="6407044">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6407067">,</span>&nbsp;<span class="ident" id="6407069">err</span><span class="op" id="6407072">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407080">rb</span>&nbsp;<span class="op" id="6407083">:=</span>&nbsp;<span class="builtinfunc" id="6407086">make</span><span class="op" id="6407090">(</span><span class="op" id="6407091">[</span><span class="op" id="6407092">]</span><span class="builtintype" id="6407093">byte</span><span class="op" id="6407097">,</span>&nbsp;<span class="num" id="6407099">128</span><span class="op" id="6407102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407106">if</span>&nbsp;<span class="ident" id="6407109">_</span><span class="op" id="6407110">,</span>&nbsp;<span class="ident" id="6407112">err</span>&nbsp;<span class="op" id="6407116">:=</span>&nbsp;<span class="ident" id="6407119">c</span><span class="op" id="6407120">.</span><span class="ident" id="6407121">Read</span><span class="op" id="6407125">(</span><span class="ident" id="6407126">rb</span><span class="op" id="6407128">)</span><span class="op" id="6407129">;</span>&nbsp;<span class="ident" id="6407131">err</span>&nbsp;<span class="op" id="6407135">!=</span>&nbsp;<span class="builtintype" id="6407138">nil</span>&nbsp;<span class="op" id="6407142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407147">t</span><span class="op" id="6407148">.</span><span class="ident" id="6407149">Fatalf</span><span class="op" id="6407155">(</span><span class="string" id="6407156">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6407178">,</span>&nbsp;<span class="ident" id="6407180">err</span><span class="op" id="6407183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407187">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407192">&lt;-</span><span class="ident" id="6407194">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407200">}</span><br>
<span class="lineno"></span><span class="op" id="6407202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6407205">func</span>&nbsp;<span class="ident" id="6407210">transponder</span><span class="op" id="6407221">(</span><span class="ident" id="6407222">t</span>&nbsp;<span class="op" id="6407224">*</span><span class="ident" id="6407225">testing</span><span class="op" id="6407232">.</span><span class="ident" id="6407233">T</span><span class="op" id="6407234">,</span>&nbsp;<span class="ident" id="6407236">ln</span>&nbsp;<span class="ident" id="6407239">Listener</span><span class="op" id="6407247">,</span>&nbsp;<span class="ident" id="6407249">done</span>&nbsp;<span class="keyword" id="6407254">chan</span><span class="op" id="6407258">&lt;-</span>&nbsp;<span class="builtintype" id="6407261">int</span><span class="op" id="6407264">)</span>&nbsp;<span class="op" id="6407266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407269">defer</span>&nbsp;<span class="keyword" id="6407275">func</span><span class="op" id="6407279">(</span><span class="op" id="6407280">)</span>&nbsp;<span class="op" id="6407282">{</span>&nbsp;<span class="ident" id="6407284">done</span>&nbsp;<span class="op" id="6407289">&lt;-</span>&nbsp;<span class="num" id="6407292">1</span>&nbsp;<span class="op" id="6407294">}</span><span class="op" id="6407295">(</span><span class="op" id="6407296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407300">switch</span>&nbsp;<span class="ident" id="6407307">ln</span>&nbsp;<span class="op" id="6407310">:=</span>&nbsp;<span class="ident" id="6407313">ln</span><span class="op" id="6407315">.</span><span class="op" id="6407316">(</span><span class="keyword" id="6407317">type</span><span class="op" id="6407321">)</span>&nbsp;<span class="op" id="6407323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407326">case</span>&nbsp;<span class="op" id="6407331">*</span><span class="ident" id="6407332">TCPListener</span><span class="op" id="6407343">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407347">ln</span><span class="op" id="6407349">.</span><span class="ident" id="6407350">SetDeadline</span><span class="op" id="6407361">(</span><span class="ident" id="6407362">time</span><span class="op" id="6407366">.</span><span class="ident" id="6407367">Now</span><span class="op" id="6407370">(</span><span class="op" id="6407371">)</span><span class="op" id="6407372">.</span><span class="ident" id="6407373">Add</span><span class="op" id="6407376">(</span><span class="ident" id="6407377">someTimeout</span><span class="op" id="6407388">)</span><span class="op" id="6407389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407392">case</span>&nbsp;<span class="op" id="6407397">*</span><span class="ident" id="6407398">UnixListener</span><span class="op" id="6407410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407414">ln</span><span class="op" id="6407416">.</span><span class="ident" id="6407417">SetDeadline</span><span class="op" id="6407428">(</span><span class="ident" id="6407429">time</span><span class="op" id="6407433">.</span><span class="ident" id="6407434">Now</span><span class="op" id="6407437">(</span><span class="op" id="6407438">)</span><span class="op" id="6407439">.</span><span class="ident" id="6407440">Add</span><span class="op" id="6407443">(</span><span class="ident" id="6407444">someTimeout</span><span class="op" id="6407455">)</span><span class="op" id="6407456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407462">c</span><span class="op" id="6407463">,</span>&nbsp;<span class="ident" id="6407465">err</span>&nbsp;<span class="op" id="6407469">:=</span>&nbsp;<span class="ident" id="6407472">ln</span><span class="op" id="6407474">.</span><span class="ident" id="6407475">Accept</span><span class="op" id="6407481">(</span><span class="op" id="6407482">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407485">if</span>&nbsp;<span class="ident" id="6407488">err</span>&nbsp;<span class="op" id="6407492">!=</span>&nbsp;<span class="builtintype" id="6407495">nil</span>&nbsp;<span class="op" id="6407499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407503">t</span><span class="op" id="6407504">.</span><span class="ident" id="6407505">Errorf</span><span class="op" id="6407511">(</span><span class="string" id="6407512">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6407540">,</span>&nbsp;<span class="ident" id="6407542">err</span><span class="op" id="6407545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407549">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407560">defer</span>&nbsp;<span class="ident" id="6407566">c</span><span class="op" id="6407567">.</span><span class="ident" id="6407568">Close</span><span class="op" id="6407573">(</span><span class="op" id="6407574">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407577">network</span>&nbsp;<span class="op" id="6407585">:=</span>&nbsp;<span class="ident" id="6407588">ln</span><span class="op" id="6407590">.</span><span class="ident" id="6407591">Addr</span><span class="op" id="6407595">(</span><span class="op" id="6407596">)</span><span class="op" id="6407597">.</span><span class="ident" id="6407598">Network</span><span class="op" id="6407605">(</span><span class="op" id="6407606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407609">if</span>&nbsp;<span class="ident" id="6407612">c</span><span class="op" id="6407613">.</span><span class="ident" id="6407614">LocalAddr</span><span class="op" id="6407623">(</span><span class="op" id="6407624">)</span><span class="op" id="6407625">.</span><span class="ident" id="6407626">Network</span><span class="op" id="6407633">(</span><span class="op" id="6407634">)</span>&nbsp;<span class="op" id="6407636">!=</span>&nbsp;<span class="ident" id="6407639">network</span>&nbsp;<span class="op" id="6407647">||</span>&nbsp;<span class="ident" id="6407650">c</span><span class="op" id="6407651">.</span><span class="ident" id="6407652">LocalAddr</span><span class="op" id="6407661">(</span><span class="op" id="6407662">)</span><span class="op" id="6407663">.</span><span class="ident" id="6407664">Network</span><span class="op" id="6407671">(</span><span class="op" id="6407672">)</span>&nbsp;<span class="op" id="6407674">!=</span>&nbsp;<span class="ident" id="6407677">network</span>&nbsp;<span class="op" id="6407685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407689">t</span><span class="op" id="6407690">.</span><span class="ident" id="6407691">Errorf</span><span class="op" id="6407697">(</span><span class="string" id="6407698">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6407727">,</span>&nbsp;<span class="ident" id="6407729">c</span><span class="op" id="6407730">.</span><span class="ident" id="6407731">LocalAddr</span><span class="op" id="6407740">(</span><span class="op" id="6407741">)</span><span class="op" id="6407742">.</span><span class="ident" id="6407743">Network</span><span class="op" id="6407750">(</span><span class="op" id="6407751">)</span><span class="op" id="6407752">,</span>&nbsp;<span class="ident" id="6407754">c</span><span class="op" id="6407755">.</span><span class="ident" id="6407756">RemoteAddr</span><span class="op" id="6407766">(</span><span class="op" id="6407767">)</span><span class="op" id="6407768">.</span><span class="ident" id="6407769">Network</span><span class="op" id="6407776">(</span><span class="op" id="6407777">)</span><span class="op" id="6407778">,</span>&nbsp;<span class="ident" id="6407780">network</span><span class="op" id="6407787">,</span>&nbsp;<span class="ident" id="6407789">network</span><span class="op" id="6407796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407800">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407808">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407811">c</span><span class="op" id="6407812">.</span><span class="ident" id="6407813">SetDeadline</span><span class="op" id="6407824">(</span><span class="ident" id="6407825">time</span><span class="op" id="6407829">.</span><span class="ident" id="6407830">Now</span><span class="op" id="6407833">(</span><span class="op" id="6407834">)</span><span class="op" id="6407835">.</span><span class="ident" id="6407836">Add</span><span class="op" id="6407839">(</span><span class="ident" id="6407840">someTimeout</span><span class="op" id="6407851">)</span><span class="op" id="6407852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407855">c</span><span class="op" id="6407856">.</span><span class="ident" id="6407857">SetReadDeadline</span><span class="op" id="6407872">(</span><span class="ident" id="6407873">time</span><span class="op" id="6407877">.</span><span class="ident" id="6407878">Now</span><span class="op" id="6407881">(</span><span class="op" id="6407882">)</span><span class="op" id="6407883">.</span><span class="ident" id="6407884">Add</span><span class="op" id="6407887">(</span><span class="ident" id="6407888">someTimeout</span><span class="op" id="6407899">)</span><span class="op" id="6407900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407903">c</span><span class="op" id="6407904">.</span><span class="ident" id="6407905">SetWriteDeadline</span><span class="op" id="6407921">(</span><span class="ident" id="6407922">time</span><span class="op" id="6407926">.</span><span class="ident" id="6407927">Now</span><span class="op" id="6407930">(</span><span class="op" id="6407931">)</span><span class="op" id="6407932">.</span><span class="ident" id="6407933">Add</span><span class="op" id="6407936">(</span><span class="ident" id="6407937">someTimeout</span><span class="op" id="6407948">)</span><span class="op" id="6407949">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407953">b</span>&nbsp;<span class="op" id="6407955">:=</span>&nbsp;<span class="builtinfunc" id="6407958">make</span><span class="op" id="6407962">(</span><span class="op" id="6407963">[</span><span class="op" id="6407964">]</span><span class="builtintype" id="6407965">byte</span><span class="op" id="6407969">,</span>&nbsp;<span class="num" id="6407971">128</span><span class="op" id="6407974">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407977">n</span><span class="op" id="6407978">,</span>&nbsp;<span class="ident" id="6407980">err</span>&nbsp;<span class="op" id="6407984">:=</span>&nbsp;<span class="ident" id="6407987">c</span><span class="op" id="6407988">.</span><span class="ident" id="6407989">Read</span><span class="op" id="6407993">(</span><span class="ident" id="6407994">b</span><span class="op" id="6407995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6407998">if</span>&nbsp;<span class="ident" id="6408001">err</span>&nbsp;<span class="op" id="6408005">!=</span>&nbsp;<span class="builtintype" id="6408008">nil</span>&nbsp;<span class="op" id="6408012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408016">t</span><span class="op" id="6408017">.</span><span class="ident" id="6408018">Errorf</span><span class="op" id="6408024">(</span><span class="string" id="6408025">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6408047">,</span>&nbsp;<span class="ident" id="6408049">err</span><span class="op" id="6408052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408056">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408064">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408067">if</span>&nbsp;<span class="ident" id="6408070">_</span><span class="op" id="6408071">,</span>&nbsp;<span class="ident" id="6408073">err</span>&nbsp;<span class="op" id="6408077">:=</span>&nbsp;<span class="ident" id="6408080">c</span><span class="op" id="6408081">.</span><span class="ident" id="6408082">Write</span><span class="op" id="6408087">(</span><span class="ident" id="6408088">b</span><span class="op" id="6408089">[</span><span class="op" id="6408090">:</span><span class="ident" id="6408091">n</span><span class="op" id="6408092">]</span><span class="op" id="6408093">)</span><span class="op" id="6408094">;</span>&nbsp;<span class="ident" id="6408096">err</span>&nbsp;<span class="op" id="6408100">!=</span>&nbsp;<span class="builtintype" id="6408103">nil</span>&nbsp;<span class="op" id="6408107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408111">t</span><span class="op" id="6408112">.</span><span class="ident" id="6408113">Errorf</span><span class="op" id="6408119">(</span><span class="string" id="6408120">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6408143">,</span>&nbsp;<span class="ident" id="6408145">err</span><span class="op" id="6408148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408152">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408160">}</span><br>
<span class="lineno"></span><span class="op" id="6408162">}</span>
</div>
</body>
</html>
