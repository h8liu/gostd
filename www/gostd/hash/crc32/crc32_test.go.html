<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6527681">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6527736">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6527790">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6527841">package</span>&nbsp;<span class="ident" id="6527849">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527856">import</span>&nbsp;<span class="op" id="6527863">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6527866">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6527872">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6527882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527885">type</span>&nbsp;<span class="ident" id="6527890">test</span>&nbsp;<span class="keyword" id="6527895">struct</span>&nbsp;<span class="op" id="6527902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6527905">ieee</span><span class="op" id="6527909">,</span>&nbsp;<span class="ident" id="6527911">castagnoli</span>&nbsp;<span class="builtintype" id="6527922">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6527930">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6527947">string</span><br>
<span class="lineno">15</span><span class="op" id="6527954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527957">var</span>&nbsp;<span class="ident" id="6527961">golden</span>&nbsp;<span class="op" id="6527968">=</span>&nbsp;<span class="op" id="6527970">[</span><span class="op" id="6527971">]</span><span class="ident" id="6527972">test</span><span class="op" id="6527976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6527979">{</span><span class="num" id="6527980">0x0</span><span class="op" id="6527983">,</span>&nbsp;<span class="num" id="6527985">0x0</span><span class="op" id="6527988">,</span>&nbsp;<span class="string" id="6527990">&#34;&#34;</span><span class="op" id="6527992">}</span><span class="op" id="6527993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6527996">{</span><span class="num" id="6527997">0xe8b7be43</span><span class="op" id="6528007">,</span>&nbsp;<span class="num" id="6528009">0xc1d04330</span><span class="op" id="6528019">,</span>&nbsp;<span class="string" id="6528021">&#34;a&#34;</span><span class="op" id="6528024">}</span><span class="op" id="6528025">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528028">{</span><span class="num" id="6528029">0x9e83486d</span><span class="op" id="6528039">,</span>&nbsp;<span class="num" id="6528041">0xe2a22936</span><span class="op" id="6528051">,</span>&nbsp;<span class="string" id="6528053">&#34;ab&#34;</span><span class="op" id="6528057">}</span><span class="op" id="6528058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528061">{</span><span class="num" id="6528062">0x352441c2</span><span class="op" id="6528072">,</span>&nbsp;<span class="num" id="6528074">0x364b3fb7</span><span class="op" id="6528084">,</span>&nbsp;<span class="string" id="6528086">&#34;abc&#34;</span><span class="op" id="6528091">}</span><span class="op" id="6528092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528095">{</span><span class="num" id="6528096">0xed82cd11</span><span class="op" id="6528106">,</span>&nbsp;<span class="num" id="6528108">0x92c80a31</span><span class="op" id="6528118">,</span>&nbsp;<span class="string" id="6528120">&#34;abcd&#34;</span><span class="op" id="6528126">}</span><span class="op" id="6528127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528130">{</span><span class="num" id="6528131">0x8587d865</span><span class="op" id="6528141">,</span>&nbsp;<span class="num" id="6528143">0xc450d697</span><span class="op" id="6528153">,</span>&nbsp;<span class="string" id="6528155">&#34;abcde&#34;</span><span class="op" id="6528162">}</span><span class="op" id="6528163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528166">{</span><span class="num" id="6528167">0x4b8e39ef</span><span class="op" id="6528177">,</span>&nbsp;<span class="num" id="6528179">0x53bceff1</span><span class="op" id="6528189">,</span>&nbsp;<span class="string" id="6528191">&#34;abcdef&#34;</span><span class="op" id="6528199">}</span><span class="op" id="6528200">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528203">{</span><span class="num" id="6528204">0x312a6aa6</span><span class="op" id="6528214">,</span>&nbsp;<span class="num" id="6528216">0xe627f441</span><span class="op" id="6528226">,</span>&nbsp;<span class="string" id="6528228">&#34;abcdefg&#34;</span><span class="op" id="6528237">}</span><span class="op" id="6528238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528241">{</span><span class="num" id="6528242">0xaeef2a50</span><span class="op" id="6528252">,</span>&nbsp;<span class="num" id="6528254">0xa9421b7</span><span class="op" id="6528263">,</span>&nbsp;<span class="string" id="6528265">&#34;abcdefgh&#34;</span><span class="op" id="6528275">}</span><span class="op" id="6528276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528279">{</span><span class="num" id="6528280">0x8da988af</span><span class="op" id="6528290">,</span>&nbsp;<span class="num" id="6528292">0x2ddc99fc</span><span class="op" id="6528302">,</span>&nbsp;<span class="string" id="6528304">&#34;abcdefghi&#34;</span><span class="op" id="6528315">}</span><span class="op" id="6528316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528319">{</span><span class="num" id="6528320">0x3981703a</span><span class="op" id="6528330">,</span>&nbsp;<span class="num" id="6528332">0xe6599437</span><span class="op" id="6528342">,</span>&nbsp;<span class="string" id="6528344">&#34;abcdefghij&#34;</span><span class="op" id="6528356">}</span><span class="op" id="6528357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528360">{</span><span class="num" id="6528361">0x6b9cdfe7</span><span class="op" id="6528371">,</span>&nbsp;<span class="num" id="6528373">0xb2cc01fe</span><span class="op" id="6528383">,</span>&nbsp;<span class="string" id="6528385">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="6528428">}</span><span class="op" id="6528429">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528432">{</span><span class="num" id="6528433">0xc90ef73f</span><span class="op" id="6528443">,</span>&nbsp;<span class="num" id="6528445">0xe28207f</span><span class="op" id="6528454">,</span>&nbsp;<span class="string" id="6528456">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="6528515">}</span><span class="op" id="6528516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528519">{</span><span class="num" id="6528520">0xb902341f</span><span class="op" id="6528530">,</span>&nbsp;<span class="num" id="6528532">0xbe93f964</span><span class="op" id="6528542">,</span>&nbsp;<span class="string" id="6528544">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="6528588">}</span><span class="op" id="6528589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528592">{</span><span class="num" id="6528593">0x42080e8</span><span class="op" id="6528602">,</span>&nbsp;<span class="num" id="6528604">0x9e3be0c3</span><span class="op" id="6528614">,</span>&nbsp;<span class="string" id="6528616">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="6528675">}</span><span class="op" id="6528676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528679">{</span><span class="num" id="6528680">0x154c6d11</span><span class="op" id="6528690">,</span>&nbsp;<span class="num" id="6528692">0xf505ef04</span><span class="op" id="6528702">,</span>&nbsp;<span class="string" id="6528704">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="6528764">}</span><span class="op" id="6528765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528768">{</span><span class="num" id="6528769">0x4c418325</span><span class="op" id="6528779">,</span>&nbsp;<span class="num" id="6528781">0x85d3dc82</span><span class="op" id="6528791">,</span>&nbsp;<span class="string" id="6528793">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="6528822">}</span><span class="op" id="6528823">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528826">{</span><span class="num" id="6528827">0x33955150</span><span class="op" id="6528837">,</span>&nbsp;<span class="num" id="6528839">0xc5142380</span><span class="op" id="6528849">,</span>&nbsp;<span class="string" id="6528851">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="6528920">}</span><span class="op" id="6528921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6528924">{</span><span class="num" id="6528925">0x26216a4b</span><span class="op" id="6528935">,</span>&nbsp;<span class="num" id="6528937">0x75eb77dd</span><span class="op" id="6528947">,</span>&nbsp;<span class="string" id="6528949">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="6529008">}</span><span class="op" id="6529009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529012">{</span><span class="num" id="6529013">0x1abbe45e</span><span class="op" id="6529023">,</span>&nbsp;<span class="num" id="6529025">0x91ebe9f7</span><span class="op" id="6529035">,</span>&nbsp;<span class="string" id="6529037">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="6529127">}</span><span class="op" id="6529128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529131">{</span><span class="num" id="6529132">0xc89a94f7</span><span class="op" id="6529142">,</span>&nbsp;<span class="num" id="6529144">0xf0b1168e</span><span class="op" id="6529154">,</span>&nbsp;<span class="string" id="6529156">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="6529233">}</span><span class="op" id="6529234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529237">{</span><span class="num" id="6529238">0xab3abe14</span><span class="op" id="6529248">,</span>&nbsp;<span class="num" id="6529250">0x572b74e2</span><span class="op" id="6529260">,</span>&nbsp;<span class="string" id="6529262">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="6529288">}</span><span class="op" id="6529289">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529292">{</span><span class="num" id="6529293">0xbab102b6</span><span class="op" id="6529303">,</span>&nbsp;<span class="num" id="6529305">0x8a58a6d5</span><span class="op" id="6529315">,</span>&nbsp;<span class="string" id="6529317">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="6529368">}</span><span class="op" id="6529369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529372">{</span><span class="num" id="6529373">0x999149d7</span><span class="op" id="6529383">,</span>&nbsp;<span class="num" id="6529385">0x9c426c50</span><span class="op" id="6529395">,</span>&nbsp;<span class="string" id="6529397">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="6529471">}</span><span class="op" id="6529472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529475">{</span><span class="num" id="6529476">0x6d52a33c</span><span class="op" id="6529486">,</span>&nbsp;<span class="num" id="6529488">0x735400a4</span><span class="op" id="6529498">,</span>&nbsp;<span class="string" id="6529500">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="6529548">}</span><span class="op" id="6529549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529552">{</span><span class="num" id="6529553">0x90631e8d</span><span class="op" id="6529563">,</span>&nbsp;<span class="num" id="6529565">0xbec49c95</span><span class="op" id="6529575">,</span>&nbsp;<span class="string" id="6529577">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="6529649">}</span><span class="op" id="6529650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529653">{</span><span class="num" id="6529654">0x78309130</span><span class="op" id="6529664">,</span>&nbsp;<span class="num" id="6529666">0xa95a2079</span><span class="op" id="6529676">,</span>&nbsp;<span class="string" id="6529678">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="6529748">}</span><span class="op" id="6529749">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529752">{</span><span class="num" id="6529753">0x7d0a377f</span><span class="op" id="6529763">,</span>&nbsp;<span class="num" id="6529765">0xde2e65c5</span><span class="op" id="6529775">,</span>&nbsp;<span class="string" id="6529777">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="6529811">}</span><span class="op" id="6529812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529815">{</span><span class="num" id="6529816">0x8c79fd79</span><span class="op" id="6529826">,</span>&nbsp;<span class="num" id="6529828">0x297a88ed</span><span class="op" id="6529838">,</span>&nbsp;<span class="string" id="6529840">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="6529930">}</span><span class="op" id="6529931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529934">{</span><span class="num" id="6529935">0xa20b7167</span><span class="op" id="6529945">,</span>&nbsp;<span class="num" id="6529947">0x66ed1d8b</span><span class="op" id="6529957">,</span>&nbsp;<span class="string" id="6529959">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="6530093">}</span><span class="op" id="6530094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530097">{</span><span class="num" id="6530098">0x8e0bb443</span><span class="op" id="6530108">,</span>&nbsp;<span class="num" id="6530110">0xdcded527</span><span class="op" id="6530120">,</span>&nbsp;<span class="string" id="6530122">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="6530180">}</span><span class="op" id="6530181">,</span><br>
<span class="lineno"></span><span class="op" id="6530183">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6530186">func</span>&nbsp;<span class="ident" id="6530191">TestGolden</span><span class="op" id="6530201">(</span><span class="ident" id="6530202">t</span>&nbsp;<span class="op" id="6530204">*</span><span class="ident" id="6530205">testing</span><span class="op" id="6530212">.</span><span class="ident" id="6530213">T</span><span class="op" id="6530214">)</span>&nbsp;<span class="op" id="6530216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530219">castagnoliTab</span>&nbsp;<span class="op" id="6530233">:=</span>&nbsp;<span class="ident" id="6530236">MakeTable</span><span class="op" id="6530245">(</span><span class="ident" id="6530246">Castagnoli</span><span class="op" id="6530256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530260">for</span>&nbsp;<span class="ident" id="6530264">_</span><span class="op" id="6530265">,</span>&nbsp;<span class="ident" id="6530267">g</span>&nbsp;<span class="op" id="6530269">:=</span>&nbsp;<span class="keyword" id="6530272">range</span>&nbsp;<span class="ident" id="6530278">golden</span>&nbsp;<span class="op" id="6530285">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530289">ieee</span>&nbsp;<span class="op" id="6530294">:=</span>&nbsp;<span class="ident" id="6530297">NewIEEE</span><span class="op" id="6530304">(</span><span class="op" id="6530305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530309">io</span><span class="op" id="6530311">.</span><span class="ident" id="6530312">WriteString</span><span class="op" id="6530323">(</span><span class="ident" id="6530324">ieee</span><span class="op" id="6530328">,</span>&nbsp;<span class="ident" id="6530330">g</span><span class="op" id="6530331">.</span><span class="ident" id="6530332">in</span><span class="op" id="6530334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530338">s</span>&nbsp;<span class="op" id="6530340">:=</span>&nbsp;<span class="ident" id="6530343">ieee</span><span class="op" id="6530347">.</span><span class="ident" id="6530348">Sum32</span><span class="op" id="6530353">(</span><span class="op" id="6530354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530358">if</span>&nbsp;<span class="ident" id="6530361">s</span>&nbsp;<span class="op" id="6530363">!=</span>&nbsp;<span class="ident" id="6530366">g</span><span class="op" id="6530367">.</span><span class="ident" id="6530368">ieee</span>&nbsp;<span class="op" id="6530373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530378">t</span><span class="op" id="6530379">.</span><span class="ident" id="6530380">Errorf</span><span class="op" id="6530386">(</span><span class="string" id="6530387">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6530414">,</span>&nbsp;<span class="ident" id="6530416">g</span><span class="op" id="6530417">.</span><span class="ident" id="6530418">in</span><span class="op" id="6530420">,</span>&nbsp;<span class="ident" id="6530422">s</span><span class="op" id="6530423">,</span>&nbsp;<span class="ident" id="6530425">g</span><span class="op" id="6530426">.</span><span class="ident" id="6530427">ieee</span><span class="op" id="6530431">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530440">castagnoli</span>&nbsp;<span class="op" id="6530451">:=</span>&nbsp;<span class="ident" id="6530454">New</span><span class="op" id="6530457">(</span><span class="ident" id="6530458">castagnoliTab</span><span class="op" id="6530471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530475">io</span><span class="op" id="6530477">.</span><span class="ident" id="6530478">WriteString</span><span class="op" id="6530489">(</span><span class="ident" id="6530490">castagnoli</span><span class="op" id="6530500">,</span>&nbsp;<span class="ident" id="6530502">g</span><span class="op" id="6530503">.</span><span class="ident" id="6530504">in</span><span class="op" id="6530506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530510">s</span>&nbsp;<span class="op" id="6530512">=</span>&nbsp;<span class="ident" id="6530514">castagnoli</span><span class="op" id="6530524">.</span><span class="ident" id="6530525">Sum32</span><span class="op" id="6530530">(</span><span class="op" id="6530531">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530535">if</span>&nbsp;<span class="ident" id="6530538">s</span>&nbsp;<span class="op" id="6530540">!=</span>&nbsp;<span class="ident" id="6530543">g</span><span class="op" id="6530544">.</span><span class="ident" id="6530545">castagnoli</span>&nbsp;<span class="op" id="6530556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530561">t</span><span class="op" id="6530562">.</span><span class="ident" id="6530563">Errorf</span><span class="op" id="6530569">(</span><span class="string" id="6530570">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6530603">,</span>&nbsp;<span class="ident" id="6530605">g</span><span class="op" id="6530606">.</span><span class="ident" id="6530607">in</span><span class="op" id="6530609">,</span>&nbsp;<span class="ident" id="6530611">s</span><span class="op" id="6530612">,</span>&nbsp;<span class="ident" id="6530614">g</span><span class="op" id="6530615">.</span><span class="ident" id="6530616">castagnoli</span><span class="op" id="6530626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530635">if</span>&nbsp;<span class="builtinfunc" id="6530638">len</span><span class="op" id="6530641">(</span><span class="ident" id="6530642">g</span><span class="op" id="6530643">.</span><span class="ident" id="6530644">in</span><span class="op" id="6530646">)</span>&nbsp;<span class="op" id="6530648">&gt;</span>&nbsp;<span class="num" id="6530650">0</span>&nbsp;<span class="op" id="6530652">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6530657">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6530714">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6530772">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530783">castagnoli</span>&nbsp;<span class="op" id="6530794">=</span>&nbsp;<span class="ident" id="6530796">New</span><span class="op" id="6530799">(</span><span class="ident" id="6530800">castagnoliTab</span><span class="op" id="6530813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530818">io</span><span class="op" id="6530820">.</span><span class="ident" id="6530821">WriteString</span><span class="op" id="6530832">(</span><span class="ident" id="6530833">castagnoli</span><span class="op" id="6530843">,</span>&nbsp;<span class="ident" id="6530845">g</span><span class="op" id="6530846">.</span><span class="ident" id="6530847">in</span><span class="op" id="6530849">[</span><span class="op" id="6530850">:</span><span class="num" id="6530851">1</span><span class="op" id="6530852">]</span><span class="op" id="6530853">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530858">io</span><span class="op" id="6530860">.</span><span class="ident" id="6530861">WriteString</span><span class="op" id="6530872">(</span><span class="ident" id="6530873">castagnoli</span><span class="op" id="6530883">,</span>&nbsp;<span class="ident" id="6530885">g</span><span class="op" id="6530886">.</span><span class="ident" id="6530887">in</span><span class="op" id="6530889">[</span><span class="num" id="6530890">1</span><span class="op" id="6530891">:</span><span class="op" id="6530892">]</span><span class="op" id="6530893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530898">s</span>&nbsp;<span class="op" id="6530900">=</span>&nbsp;<span class="ident" id="6530902">castagnoli</span><span class="op" id="6530912">.</span><span class="ident" id="6530913">Sum32</span><span class="op" id="6530918">(</span><span class="op" id="6530919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530924">if</span>&nbsp;<span class="ident" id="6530927">s</span>&nbsp;<span class="op" id="6530929">!=</span>&nbsp;<span class="ident" id="6530932">g</span><span class="op" id="6530933">.</span><span class="ident" id="6530934">castagnoli</span>&nbsp;<span class="op" id="6530945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530951">t</span><span class="op" id="6530952">.</span><span class="ident" id="6530953">Errorf</span><span class="op" id="6530959">(</span><span class="string" id="6530960">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6531005">,</span>&nbsp;<span class="ident" id="6531007">g</span><span class="op" id="6531008">.</span><span class="ident" id="6531009">in</span><span class="op" id="6531011">,</span>&nbsp;<span class="ident" id="6531013">s</span><span class="op" id="6531014">,</span>&nbsp;<span class="ident" id="6531016">g</span><span class="op" id="6531017">.</span><span class="ident" id="6531018">castagnoli</span><span class="op" id="6531028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6531033">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6531037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6531040">}</span><br>
<span class="lineno"></span><span class="op" id="6531042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6531045">func</span>&nbsp;<span class="ident" id="6531050">BenchmarkCrc32KB</span><span class="op" id="6531066">(</span><span class="ident" id="6531067">b</span>&nbsp;<span class="op" id="6531069">*</span><span class="ident" id="6531070">testing</span><span class="op" id="6531077">.</span><span class="ident" id="6531078">B</span><span class="op" id="6531079">)</span>&nbsp;<span class="op" id="6531081">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531084">b</span><span class="op" id="6531085">.</span><span class="ident" id="6531086">SetBytes</span><span class="op" id="6531094">(</span><span class="num" id="6531095">1024</span><span class="op" id="6531099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531102">data</span>&nbsp;<span class="op" id="6531107">:=</span>&nbsp;<span class="builtinfunc" id="6531110">make</span><span class="op" id="6531114">(</span><span class="op" id="6531115">[</span><span class="op" id="6531116">]</span><span class="builtintype" id="6531117">byte</span><span class="op" id="6531121">,</span>&nbsp;<span class="num" id="6531123">1024</span><span class="op" id="6531127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6531130">for</span>&nbsp;<span class="ident" id="6531134">i</span>&nbsp;<span class="op" id="6531136">:=</span>&nbsp;<span class="keyword" id="6531139">range</span>&nbsp;<span class="ident" id="6531145">data</span>&nbsp;<span class="op" id="6531150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531154">data</span><span class="op" id="6531158">[</span><span class="ident" id="6531159">i</span><span class="op" id="6531160">]</span>&nbsp;<span class="op" id="6531162">=</span>&nbsp;<span class="builtintype" id="6531164">byte</span><span class="op" id="6531168">(</span><span class="ident" id="6531169">i</span><span class="op" id="6531170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6531173">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531176">h</span>&nbsp;<span class="op" id="6531178">:=</span>&nbsp;<span class="ident" id="6531181">NewIEEE</span><span class="op" id="6531188">(</span><span class="op" id="6531189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531192">in</span>&nbsp;<span class="op" id="6531195">:=</span>&nbsp;<span class="builtinfunc" id="6531198">make</span><span class="op" id="6531202">(</span><span class="op" id="6531203">[</span><span class="op" id="6531204">]</span><span class="builtintype" id="6531205">byte</span><span class="op" id="6531209">,</span>&nbsp;<span class="num" id="6531211">0</span><span class="op" id="6531212">,</span>&nbsp;<span class="ident" id="6531214">h</span><span class="op" id="6531215">.</span><span class="ident" id="6531216">Size</span><span class="op" id="6531220">(</span><span class="op" id="6531221">)</span><span class="op" id="6531222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531226">b</span><span class="op" id="6531227">.</span><span class="ident" id="6531228">ResetTimer</span><span class="op" id="6531238">(</span><span class="op" id="6531239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6531242">for</span>&nbsp;<span class="ident" id="6531246">i</span>&nbsp;<span class="op" id="6531248">:=</span>&nbsp;<span class="num" id="6531251">0</span><span class="op" id="6531252">;</span>&nbsp;<span class="ident" id="6531254">i</span>&nbsp;<span class="op" id="6531256">&lt;</span>&nbsp;<span class="ident" id="6531258">b</span><span class="op" id="6531259">.</span><span class="ident" id="6531260">N</span><span class="op" id="6531261">;</span>&nbsp;<span class="ident" id="6531263">i</span><span class="op" id="6531264">++</span>&nbsp;<span class="op" id="6531267">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531271">h</span><span class="op" id="6531272">.</span><span class="ident" id="6531273">Reset</span><span class="op" id="6531278">(</span><span class="op" id="6531279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531283">h</span><span class="op" id="6531284">.</span><span class="ident" id="6531285">Write</span><span class="op" id="6531290">(</span><span class="ident" id="6531291">data</span><span class="op" id="6531295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6531299">h</span><span class="op" id="6531300">.</span><span class="ident" id="6531301">Sum</span><span class="op" id="6531304">(</span><span class="ident" id="6531305">in</span><span class="op" id="6531307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6531310">}</span><br>
<span class="lineno"></span><span class="op" id="6531312">}</span>
</div>
</body>
</html>
