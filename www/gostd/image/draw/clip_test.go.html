<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8169196">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8169251">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8169305">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8169356">package</span>&nbsp;<span class="ident" id="8169364">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8169370">import</span>&nbsp;<span class="op" id="8169377">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8169380">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8169389">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8169399">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8169402">type</span>&nbsp;<span class="ident" id="8169407">clipTest</span>&nbsp;<span class="keyword" id="8169416">struct</span>&nbsp;<span class="op" id="8169423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169426">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8169440">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169448">r</span><span class="op" id="8169449">,</span>&nbsp;<span class="ident" id="8169451">dr</span><span class="op" id="8169453">,</span>&nbsp;<span class="ident" id="8169455">sr</span><span class="op" id="8169457">,</span>&nbsp;<span class="ident" id="8169459">mr</span>&nbsp;<span class="ident" id="8169462">image</span><span class="op" id="8169467">.</span><span class="ident" id="8169468">Rectangle</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169479">sp</span><span class="op" id="8169481">,</span>&nbsp;<span class="ident" id="8169483">mp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8169493">image</span><span class="op" id="8169498">.</span><span class="ident" id="8169499">Point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169506">nilMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8169520">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169526">r0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8169540">image</span><span class="op" id="8169545">.</span><span class="ident" id="8169546">Rectangle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169557">sp0</span><span class="op" id="8169560">,</span>&nbsp;<span class="ident" id="8169562">mp0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8169571">image</span><span class="op" id="8169576">.</span><span class="ident" id="8169577">Point</span><br>
<span class="lineno"></span><span class="op" id="8169583">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8169586">var</span>&nbsp;<span class="ident" id="8169590">clipTests</span>&nbsp;<span class="op" id="8169600">=</span>&nbsp;<span class="op" id="8169602">[</span><span class="op" id="8169603">]</span><span class="ident" id="8169604">clipTest</span><span class="op" id="8169612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8169615">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8169664">&#34;basic&#34;</span><span class="op" id="8169671">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169675">image</span><span class="op" id="8169680">.</span><span class="ident" id="8169681">Rect</span><span class="op" id="8169685">(</span><span class="num" id="8169686">0</span><span class="op" id="8169687">,</span>&nbsp;<span class="num" id="8169689">0</span><span class="op" id="8169690">,</span>&nbsp;<span class="num" id="8169692">100</span><span class="op" id="8169695">,</span>&nbsp;<span class="num" id="8169697">100</span><span class="op" id="8169700">)</span><span class="op" id="8169701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169705">image</span><span class="op" id="8169710">.</span><span class="ident" id="8169711">Rect</span><span class="op" id="8169715">(</span><span class="num" id="8169716">0</span><span class="op" id="8169717">,</span>&nbsp;<span class="num" id="8169719">0</span><span class="op" id="8169720">,</span>&nbsp;<span class="num" id="8169722">100</span><span class="op" id="8169725">,</span>&nbsp;<span class="num" id="8169727">100</span><span class="op" id="8169730">)</span><span class="op" id="8169731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169735">image</span><span class="op" id="8169740">.</span><span class="ident" id="8169741">Rect</span><span class="op" id="8169745">(</span><span class="num" id="8169746">0</span><span class="op" id="8169747">,</span>&nbsp;<span class="num" id="8169749">0</span><span class="op" id="8169750">,</span>&nbsp;<span class="num" id="8169752">100</span><span class="op" id="8169755">,</span>&nbsp;<span class="num" id="8169757">100</span><span class="op" id="8169760">)</span><span class="op" id="8169761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169765">image</span><span class="op" id="8169770">.</span><span class="ident" id="8169771">ZR</span><span class="op" id="8169773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169777">image</span><span class="op" id="8169782">.</span><span class="ident" id="8169783">ZP</span><span class="op" id="8169785">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169789">image</span><span class="op" id="8169794">.</span><span class="ident" id="8169795">ZP</span><span class="op" id="8169797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8169801">true</span><span class="op" id="8169805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169809">image</span><span class="op" id="8169814">.</span><span class="ident" id="8169815">Rect</span><span class="op" id="8169819">(</span><span class="num" id="8169820">0</span><span class="op" id="8169821">,</span>&nbsp;<span class="num" id="8169823">0</span><span class="op" id="8169824">,</span>&nbsp;<span class="num" id="8169826">100</span><span class="op" id="8169829">,</span>&nbsp;<span class="num" id="8169831">100</span><span class="op" id="8169834">)</span><span class="op" id="8169835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169839">image</span><span class="op" id="8169844">.</span><span class="ident" id="8169845">ZP</span><span class="op" id="8169847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169851">image</span><span class="op" id="8169856">.</span><span class="ident" id="8169857">ZP</span><span class="op" id="8169859">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169862">}</span><span class="op" id="8169863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8169866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8169870">&#34;clip&nbsp;dr&#34;</span><span class="op" id="8169879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169883">image</span><span class="op" id="8169888">.</span><span class="ident" id="8169889">Rect</span><span class="op" id="8169893">(</span><span class="num" id="8169894">0</span><span class="op" id="8169895">,</span>&nbsp;<span class="num" id="8169897">0</span><span class="op" id="8169898">,</span>&nbsp;<span class="num" id="8169900">100</span><span class="op" id="8169903">,</span>&nbsp;<span class="num" id="8169905">100</span><span class="op" id="8169908">)</span><span class="op" id="8169909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169913">image</span><span class="op" id="8169918">.</span><span class="ident" id="8169919">Rect</span><span class="op" id="8169923">(</span><span class="num" id="8169924">40</span><span class="op" id="8169926">,</span>&nbsp;<span class="num" id="8169928">40</span><span class="op" id="8169930">,</span>&nbsp;<span class="num" id="8169932">60</span><span class="op" id="8169934">,</span>&nbsp;<span class="num" id="8169936">60</span><span class="op" id="8169938">)</span><span class="op" id="8169939">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169943">image</span><span class="op" id="8169948">.</span><span class="ident" id="8169949">Rect</span><span class="op" id="8169953">(</span><span class="num" id="8169954">0</span><span class="op" id="8169955">,</span>&nbsp;<span class="num" id="8169957">0</span><span class="op" id="8169958">,</span>&nbsp;<span class="num" id="8169960">100</span><span class="op" id="8169963">,</span>&nbsp;<span class="num" id="8169965">100</span><span class="op" id="8169968">)</span><span class="op" id="8169969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169973">image</span><span class="op" id="8169978">.</span><span class="ident" id="8169979">ZR</span><span class="op" id="8169981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169985">image</span><span class="op" id="8169990">.</span><span class="ident" id="8169991">ZP</span><span class="op" id="8169993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8169997">image</span><span class="op" id="8170002">.</span><span class="ident" id="8170003">ZP</span><span class="op" id="8170005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8170009">true</span><span class="op" id="8170013">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170017">image</span><span class="op" id="8170022">.</span><span class="ident" id="8170023">Rect</span><span class="op" id="8170027">(</span><span class="num" id="8170028">40</span><span class="op" id="8170030">,</span>&nbsp;<span class="num" id="8170032">40</span><span class="op" id="8170034">,</span>&nbsp;<span class="num" id="8170036">60</span><span class="op" id="8170038">,</span>&nbsp;<span class="num" id="8170040">60</span><span class="op" id="8170042">)</span><span class="op" id="8170043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170047">image</span><span class="op" id="8170052">.</span><span class="ident" id="8170053">Pt</span><span class="op" id="8170055">(</span><span class="num" id="8170056">40</span><span class="op" id="8170058">,</span>&nbsp;<span class="num" id="8170060">40</span><span class="op" id="8170062">)</span><span class="op" id="8170063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170067">image</span><span class="op" id="8170072">.</span><span class="ident" id="8170073">ZP</span><span class="op" id="8170075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170078">}</span><span class="op" id="8170079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170082">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8170086">&#34;clip&nbsp;sr&#34;</span><span class="op" id="8170095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170099">image</span><span class="op" id="8170104">.</span><span class="ident" id="8170105">Rect</span><span class="op" id="8170109">(</span><span class="num" id="8170110">0</span><span class="op" id="8170111">,</span>&nbsp;<span class="num" id="8170113">0</span><span class="op" id="8170114">,</span>&nbsp;<span class="num" id="8170116">100</span><span class="op" id="8170119">,</span>&nbsp;<span class="num" id="8170121">100</span><span class="op" id="8170124">)</span><span class="op" id="8170125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170129">image</span><span class="op" id="8170134">.</span><span class="ident" id="8170135">Rect</span><span class="op" id="8170139">(</span><span class="num" id="8170140">0</span><span class="op" id="8170141">,</span>&nbsp;<span class="num" id="8170143">0</span><span class="op" id="8170144">,</span>&nbsp;<span class="num" id="8170146">100</span><span class="op" id="8170149">,</span>&nbsp;<span class="num" id="8170151">100</span><span class="op" id="8170154">)</span><span class="op" id="8170155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170159">image</span><span class="op" id="8170164">.</span><span class="ident" id="8170165">Rect</span><span class="op" id="8170169">(</span><span class="num" id="8170170">20</span><span class="op" id="8170172">,</span>&nbsp;<span class="num" id="8170174">20</span><span class="op" id="8170176">,</span>&nbsp;<span class="num" id="8170178">80</span><span class="op" id="8170180">,</span>&nbsp;<span class="num" id="8170182">80</span><span class="op" id="8170184">)</span><span class="op" id="8170185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170189">image</span><span class="op" id="8170194">.</span><span class="ident" id="8170195">ZR</span><span class="op" id="8170197">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170201">image</span><span class="op" id="8170206">.</span><span class="ident" id="8170207">ZP</span><span class="op" id="8170209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170213">image</span><span class="op" id="8170218">.</span><span class="ident" id="8170219">ZP</span><span class="op" id="8170221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8170225">true</span><span class="op" id="8170229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170233">image</span><span class="op" id="8170238">.</span><span class="ident" id="8170239">Rect</span><span class="op" id="8170243">(</span><span class="num" id="8170244">20</span><span class="op" id="8170246">,</span>&nbsp;<span class="num" id="8170248">20</span><span class="op" id="8170250">,</span>&nbsp;<span class="num" id="8170252">80</span><span class="op" id="8170254">,</span>&nbsp;<span class="num" id="8170256">80</span><span class="op" id="8170258">)</span><span class="op" id="8170259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170263">image</span><span class="op" id="8170268">.</span><span class="ident" id="8170269">Pt</span><span class="op" id="8170271">(</span><span class="num" id="8170272">20</span><span class="op" id="8170274">,</span>&nbsp;<span class="num" id="8170276">20</span><span class="op" id="8170278">)</span><span class="op" id="8170279">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170283">image</span><span class="op" id="8170288">.</span><span class="ident" id="8170289">ZP</span><span class="op" id="8170291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170294">}</span><span class="op" id="8170295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8170302">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr&#34;</span><span class="op" id="8170318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170322">image</span><span class="op" id="8170327">.</span><span class="ident" id="8170328">Rect</span><span class="op" id="8170332">(</span><span class="num" id="8170333">0</span><span class="op" id="8170334">,</span>&nbsp;<span class="num" id="8170336">0</span><span class="op" id="8170337">,</span>&nbsp;<span class="num" id="8170339">100</span><span class="op" id="8170342">,</span>&nbsp;<span class="num" id="8170344">100</span><span class="op" id="8170347">)</span><span class="op" id="8170348">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170352">image</span><span class="op" id="8170357">.</span><span class="ident" id="8170358">Rect</span><span class="op" id="8170362">(</span><span class="num" id="8170363">0</span><span class="op" id="8170364">,</span>&nbsp;<span class="num" id="8170366">0</span><span class="op" id="8170367">,</span>&nbsp;<span class="num" id="8170369">50</span><span class="op" id="8170371">,</span>&nbsp;<span class="num" id="8170373">100</span><span class="op" id="8170376">)</span><span class="op" id="8170377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170381">image</span><span class="op" id="8170386">.</span><span class="ident" id="8170387">Rect</span><span class="op" id="8170391">(</span><span class="num" id="8170392">20</span><span class="op" id="8170394">,</span>&nbsp;<span class="num" id="8170396">20</span><span class="op" id="8170398">,</span>&nbsp;<span class="num" id="8170400">80</span><span class="op" id="8170402">,</span>&nbsp;<span class="num" id="8170404">80</span><span class="op" id="8170406">)</span><span class="op" id="8170407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170411">image</span><span class="op" id="8170416">.</span><span class="ident" id="8170417">ZR</span><span class="op" id="8170419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170423">image</span><span class="op" id="8170428">.</span><span class="ident" id="8170429">ZP</span><span class="op" id="8170431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170435">image</span><span class="op" id="8170440">.</span><span class="ident" id="8170441">ZP</span><span class="op" id="8170443">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8170447">true</span><span class="op" id="8170451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170455">image</span><span class="op" id="8170460">.</span><span class="ident" id="8170461">Rect</span><span class="op" id="8170465">(</span><span class="num" id="8170466">20</span><span class="op" id="8170468">,</span>&nbsp;<span class="num" id="8170470">20</span><span class="op" id="8170472">,</span>&nbsp;<span class="num" id="8170474">50</span><span class="op" id="8170476">,</span>&nbsp;<span class="num" id="8170478">80</span><span class="op" id="8170480">)</span><span class="op" id="8170481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170485">image</span><span class="op" id="8170490">.</span><span class="ident" id="8170491">Pt</span><span class="op" id="8170493">(</span><span class="num" id="8170494">20</span><span class="op" id="8170496">,</span>&nbsp;<span class="num" id="8170498">20</span><span class="op" id="8170500">)</span><span class="op" id="8170501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170505">image</span><span class="op" id="8170510">.</span><span class="ident" id="8170511">ZP</span><span class="op" id="8170513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170516">}</span><span class="op" id="8170517">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8170524">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(top-left)&#34;</span><span class="op" id="8170566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170570">image</span><span class="op" id="8170575">.</span><span class="ident" id="8170576">Rect</span><span class="op" id="8170580">(</span><span class="num" id="8170581">0</span><span class="op" id="8170582">,</span>&nbsp;<span class="num" id="8170584">0</span><span class="op" id="8170585">,</span>&nbsp;<span class="num" id="8170587">100</span><span class="op" id="8170590">,</span>&nbsp;<span class="num" id="8170592">100</span><span class="op" id="8170595">)</span><span class="op" id="8170596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170600">image</span><span class="op" id="8170605">.</span><span class="ident" id="8170606">Rect</span><span class="op" id="8170610">(</span><span class="num" id="8170611">0</span><span class="op" id="8170612">,</span>&nbsp;<span class="num" id="8170614">0</span><span class="op" id="8170615">,</span>&nbsp;<span class="num" id="8170617">50</span><span class="op" id="8170619">,</span>&nbsp;<span class="num" id="8170621">100</span><span class="op" id="8170624">)</span><span class="op" id="8170625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170629">image</span><span class="op" id="8170634">.</span><span class="ident" id="8170635">Rect</span><span class="op" id="8170639">(</span><span class="num" id="8170640">20</span><span class="op" id="8170642">,</span>&nbsp;<span class="num" id="8170644">20</span><span class="op" id="8170646">,</span>&nbsp;<span class="num" id="8170648">80</span><span class="op" id="8170650">,</span>&nbsp;<span class="num" id="8170652">80</span><span class="op" id="8170654">)</span><span class="op" id="8170655">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170659">image</span><span class="op" id="8170664">.</span><span class="ident" id="8170665">ZR</span><span class="op" id="8170667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170671">image</span><span class="op" id="8170676">.</span><span class="ident" id="8170677">Pt</span><span class="op" id="8170679">(</span><span class="num" id="8170680">15</span><span class="op" id="8170682">,</span>&nbsp;<span class="num" id="8170684">8</span><span class="op" id="8170685">)</span><span class="op" id="8170686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170690">image</span><span class="op" id="8170695">.</span><span class="ident" id="8170696">ZP</span><span class="op" id="8170698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8170702">true</span><span class="op" id="8170706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170710">image</span><span class="op" id="8170715">.</span><span class="ident" id="8170716">Rect</span><span class="op" id="8170720">(</span><span class="num" id="8170721">5</span><span class="op" id="8170722">,</span>&nbsp;<span class="num" id="8170724">12</span><span class="op" id="8170726">,</span>&nbsp;<span class="num" id="8170728">50</span><span class="op" id="8170730">,</span>&nbsp;<span class="num" id="8170732">72</span><span class="op" id="8170734">)</span><span class="op" id="8170735">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170739">image</span><span class="op" id="8170744">.</span><span class="ident" id="8170745">Pt</span><span class="op" id="8170747">(</span><span class="num" id="8170748">20</span><span class="op" id="8170750">,</span>&nbsp;<span class="num" id="8170752">20</span><span class="op" id="8170754">)</span><span class="op" id="8170755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170759">image</span><span class="op" id="8170764">.</span><span class="ident" id="8170765">ZP</span><span class="op" id="8170767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170770">}</span><span class="op" id="8170771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8170774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8170778">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(middle-left)&#34;</span><span class="op" id="8170823">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170827">image</span><span class="op" id="8170832">.</span><span class="ident" id="8170833">Rect</span><span class="op" id="8170837">(</span><span class="num" id="8170838">0</span><span class="op" id="8170839">,</span>&nbsp;<span class="num" id="8170841">0</span><span class="op" id="8170842">,</span>&nbsp;<span class="num" id="8170844">100</span><span class="op" id="8170847">,</span>&nbsp;<span class="num" id="8170849">100</span><span class="op" id="8170852">)</span><span class="op" id="8170853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170857">image</span><span class="op" id="8170862">.</span><span class="ident" id="8170863">Rect</span><span class="op" id="8170867">(</span><span class="num" id="8170868">0</span><span class="op" id="8170869">,</span>&nbsp;<span class="num" id="8170871">0</span><span class="op" id="8170872">,</span>&nbsp;<span class="num" id="8170874">50</span><span class="op" id="8170876">,</span>&nbsp;<span class="num" id="8170878">100</span><span class="op" id="8170881">)</span><span class="op" id="8170882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170886">image</span><span class="op" id="8170891">.</span><span class="ident" id="8170892">Rect</span><span class="op" id="8170896">(</span><span class="num" id="8170897">20</span><span class="op" id="8170899">,</span>&nbsp;<span class="num" id="8170901">20</span><span class="op" id="8170903">,</span>&nbsp;<span class="num" id="8170905">80</span><span class="op" id="8170907">,</span>&nbsp;<span class="num" id="8170909">80</span><span class="op" id="8170911">)</span><span class="op" id="8170912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170916">image</span><span class="op" id="8170921">.</span><span class="ident" id="8170922">ZR</span><span class="op" id="8170924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170928">image</span><span class="op" id="8170933">.</span><span class="ident" id="8170934">Pt</span><span class="op" id="8170936">(</span><span class="num" id="8170937">15</span><span class="op" id="8170939">,</span>&nbsp;<span class="num" id="8170941">66</span><span class="op" id="8170943">)</span><span class="op" id="8170944">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170948">image</span><span class="op" id="8170953">.</span><span class="ident" id="8170954">ZP</span><span class="op" id="8170956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8170960">true</span><span class="op" id="8170964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170968">image</span><span class="op" id="8170973">.</span><span class="ident" id="8170974">Rect</span><span class="op" id="8170978">(</span><span class="num" id="8170979">5</span><span class="op" id="8170980">,</span>&nbsp;<span class="num" id="8170982">0</span><span class="op" id="8170983">,</span>&nbsp;<span class="num" id="8170985">50</span><span class="op" id="8170987">,</span>&nbsp;<span class="num" id="8170989">14</span><span class="op" id="8170991">)</span><span class="op" id="8170992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8170996">image</span><span class="op" id="8171001">.</span><span class="ident" id="8171002">Pt</span><span class="op" id="8171004">(</span><span class="num" id="8171005">20</span><span class="op" id="8171007">,</span>&nbsp;<span class="num" id="8171009">66</span><span class="op" id="8171011">)</span><span class="op" id="8171012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171016">image</span><span class="op" id="8171021">.</span><span class="ident" id="8171022">ZP</span><span class="op" id="8171024">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171027">}</span><span class="op" id="8171028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8171035">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(bottom-left)&#34;</span><span class="op" id="8171080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171084">image</span><span class="op" id="8171089">.</span><span class="ident" id="8171090">Rect</span><span class="op" id="8171094">(</span><span class="num" id="8171095">0</span><span class="op" id="8171096">,</span>&nbsp;<span class="num" id="8171098">0</span><span class="op" id="8171099">,</span>&nbsp;<span class="num" id="8171101">100</span><span class="op" id="8171104">,</span>&nbsp;<span class="num" id="8171106">100</span><span class="op" id="8171109">)</span><span class="op" id="8171110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171114">image</span><span class="op" id="8171119">.</span><span class="ident" id="8171120">Rect</span><span class="op" id="8171124">(</span><span class="num" id="8171125">0</span><span class="op" id="8171126">,</span>&nbsp;<span class="num" id="8171128">0</span><span class="op" id="8171129">,</span>&nbsp;<span class="num" id="8171131">50</span><span class="op" id="8171133">,</span>&nbsp;<span class="num" id="8171135">100</span><span class="op" id="8171138">)</span><span class="op" id="8171139">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171143">image</span><span class="op" id="8171148">.</span><span class="ident" id="8171149">Rect</span><span class="op" id="8171153">(</span><span class="num" id="8171154">20</span><span class="op" id="8171156">,</span>&nbsp;<span class="num" id="8171158">20</span><span class="op" id="8171160">,</span>&nbsp;<span class="num" id="8171162">80</span><span class="op" id="8171164">,</span>&nbsp;<span class="num" id="8171166">80</span><span class="op" id="8171168">)</span><span class="op" id="8171169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171173">image</span><span class="op" id="8171178">.</span><span class="ident" id="8171179">ZR</span><span class="op" id="8171181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171185">image</span><span class="op" id="8171190">.</span><span class="ident" id="8171191">Pt</span><span class="op" id="8171193">(</span><span class="num" id="8171194">15</span><span class="op" id="8171196">,</span>&nbsp;<span class="num" id="8171198">91</span><span class="op" id="8171200">)</span><span class="op" id="8171201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171205">image</span><span class="op" id="8171210">.</span><span class="ident" id="8171211">ZP</span><span class="op" id="8171213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8171217">true</span><span class="op" id="8171221">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171225">image</span><span class="op" id="8171230">.</span><span class="ident" id="8171231">ZR</span><span class="op" id="8171233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171237">image</span><span class="op" id="8171242">.</span><span class="ident" id="8171243">Pt</span><span class="op" id="8171245">(</span><span class="num" id="8171246">15</span><span class="op" id="8171248">,</span>&nbsp;<span class="num" id="8171250">91</span><span class="op" id="8171252">)</span><span class="op" id="8171253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171257">image</span><span class="op" id="8171262">.</span><span class="ident" id="8171263">ZP</span><span class="op" id="8171265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171268">}</span><span class="op" id="8171269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171272">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8171276">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;inside&nbsp;sr&#34;</span><span class="op" id="8171306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171310">image</span><span class="op" id="8171315">.</span><span class="ident" id="8171316">Rect</span><span class="op" id="8171320">(</span><span class="num" id="8171321">0</span><span class="op" id="8171322">,</span>&nbsp;<span class="num" id="8171324">0</span><span class="op" id="8171325">,</span>&nbsp;<span class="num" id="8171327">100</span><span class="op" id="8171330">,</span>&nbsp;<span class="num" id="8171332">100</span><span class="op" id="8171335">)</span><span class="op" id="8171336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171340">image</span><span class="op" id="8171345">.</span><span class="ident" id="8171346">Rect</span><span class="op" id="8171350">(</span><span class="num" id="8171351">0</span><span class="op" id="8171352">,</span>&nbsp;<span class="num" id="8171354">0</span><span class="op" id="8171355">,</span>&nbsp;<span class="num" id="8171357">50</span><span class="op" id="8171359">,</span>&nbsp;<span class="num" id="8171361">100</span><span class="op" id="8171364">)</span><span class="op" id="8171365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171369">image</span><span class="op" id="8171374">.</span><span class="ident" id="8171375">Rect</span><span class="op" id="8171379">(</span><span class="num" id="8171380">20</span><span class="op" id="8171382">,</span>&nbsp;<span class="num" id="8171384">20</span><span class="op" id="8171386">,</span>&nbsp;<span class="num" id="8171388">80</span><span class="op" id="8171390">,</span>&nbsp;<span class="num" id="8171392">80</span><span class="op" id="8171394">)</span><span class="op" id="8171395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171399">image</span><span class="op" id="8171404">.</span><span class="ident" id="8171405">ZR</span><span class="op" id="8171407">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171411">image</span><span class="op" id="8171416">.</span><span class="ident" id="8171417">Pt</span><span class="op" id="8171419">(</span><span class="num" id="8171420">44</span><span class="op" id="8171422">,</span>&nbsp;<span class="num" id="8171424">33</span><span class="op" id="8171426">)</span><span class="op" id="8171427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171431">image</span><span class="op" id="8171436">.</span><span class="ident" id="8171437">ZP</span><span class="op" id="8171439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8171443">true</span><span class="op" id="8171447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171451">image</span><span class="op" id="8171456">.</span><span class="ident" id="8171457">Rect</span><span class="op" id="8171461">(</span><span class="num" id="8171462">0</span><span class="op" id="8171463">,</span>&nbsp;<span class="num" id="8171465">0</span><span class="op" id="8171466">,</span>&nbsp;<span class="num" id="8171468">36</span><span class="op" id="8171470">,</span>&nbsp;<span class="num" id="8171472">47</span><span class="op" id="8171474">)</span><span class="op" id="8171475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171479">image</span><span class="op" id="8171484">.</span><span class="ident" id="8171485">Pt</span><span class="op" id="8171487">(</span><span class="num" id="8171488">44</span><span class="op" id="8171490">,</span>&nbsp;<span class="num" id="8171492">33</span><span class="op" id="8171494">)</span><span class="op" id="8171495">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171499">image</span><span class="op" id="8171504">.</span><span class="ident" id="8171505">ZP</span><span class="op" id="8171507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171510">}</span><span class="op" id="8171511">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8171515">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;non-nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171564">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8171568">&#34;basic&nbsp;mask&#34;</span><span class="op" id="8171580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171584">image</span><span class="op" id="8171589">.</span><span class="ident" id="8171590">Rect</span><span class="op" id="8171594">(</span><span class="num" id="8171595">0</span><span class="op" id="8171596">,</span>&nbsp;<span class="num" id="8171598">0</span><span class="op" id="8171599">,</span>&nbsp;<span class="num" id="8171601">80</span><span class="op" id="8171603">,</span>&nbsp;<span class="num" id="8171605">80</span><span class="op" id="8171607">)</span><span class="op" id="8171608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171612">image</span><span class="op" id="8171617">.</span><span class="ident" id="8171618">Rect</span><span class="op" id="8171622">(</span><span class="num" id="8171623">20</span><span class="op" id="8171625">,</span>&nbsp;<span class="num" id="8171627">0</span><span class="op" id="8171628">,</span>&nbsp;<span class="num" id="8171630">100</span><span class="op" id="8171633">,</span>&nbsp;<span class="num" id="8171635">80</span><span class="op" id="8171637">)</span><span class="op" id="8171638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171642">image</span><span class="op" id="8171647">.</span><span class="ident" id="8171648">Rect</span><span class="op" id="8171652">(</span><span class="num" id="8171653">0</span><span class="op" id="8171654">,</span>&nbsp;<span class="num" id="8171656">0</span><span class="op" id="8171657">,</span>&nbsp;<span class="num" id="8171659">50</span><span class="op" id="8171661">,</span>&nbsp;<span class="num" id="8171663">49</span><span class="op" id="8171665">)</span><span class="op" id="8171666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171670">image</span><span class="op" id="8171675">.</span><span class="ident" id="8171676">Rect</span><span class="op" id="8171680">(</span><span class="num" id="8171681">0</span><span class="op" id="8171682">,</span>&nbsp;<span class="num" id="8171684">0</span><span class="op" id="8171685">,</span>&nbsp;<span class="num" id="8171687">46</span><span class="op" id="8171689">,</span>&nbsp;<span class="num" id="8171691">47</span><span class="op" id="8171693">)</span><span class="op" id="8171694">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171698">image</span><span class="op" id="8171703">.</span><span class="ident" id="8171704">ZP</span><span class="op" id="8171706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171710">image</span><span class="op" id="8171715">.</span><span class="ident" id="8171716">ZP</span><span class="op" id="8171718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8171722">false</span><span class="op" id="8171727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171731">image</span><span class="op" id="8171736">.</span><span class="ident" id="8171737">Rect</span><span class="op" id="8171741">(</span><span class="num" id="8171742">20</span><span class="op" id="8171744">,</span>&nbsp;<span class="num" id="8171746">0</span><span class="op" id="8171747">,</span>&nbsp;<span class="num" id="8171749">46</span><span class="op" id="8171751">,</span>&nbsp;<span class="num" id="8171753">47</span><span class="op" id="8171755">)</span><span class="op" id="8171756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171760">image</span><span class="op" id="8171765">.</span><span class="ident" id="8171766">Pt</span><span class="op" id="8171768">(</span><span class="num" id="8171769">20</span><span class="op" id="8171771">,</span>&nbsp;<span class="num" id="8171773">0</span><span class="op" id="8171774">)</span><span class="op" id="8171775">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171779">image</span><span class="op" id="8171784">.</span><span class="ident" id="8171785">Pt</span><span class="op" id="8171787">(</span><span class="num" id="8171788">20</span><span class="op" id="8171790">,</span>&nbsp;<span class="num" id="8171792">0</span><span class="op" id="8171793">)</span><span class="op" id="8171794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171797">}</span><span class="op" id="8171798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8171801">//&nbsp;TODO(nigeltao):&nbsp;write&nbsp;more&nbsp;tests.</span><br>
<span class="lineno"></span><span class="op" id="8171838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="8171841">func</span>&nbsp;<span class="ident" id="8171846">TestClip</span><span class="op" id="8171854">(</span><span class="ident" id="8171855">t</span>&nbsp;<span class="op" id="8171857">*</span><span class="ident" id="8171858">testing</span><span class="op" id="8171865">.</span><span class="ident" id="8171866">T</span><span class="op" id="8171867">)</span>&nbsp;<span class="op" id="8171869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171872">dst0</span>&nbsp;<span class="op" id="8171877">:=</span>&nbsp;<span class="ident" id="8171880">image</span><span class="op" id="8171885">.</span><span class="ident" id="8171886">NewRGBA</span><span class="op" id="8171893">(</span><span class="ident" id="8171894">image</span><span class="op" id="8171899">.</span><span class="ident" id="8171900">Rect</span><span class="op" id="8171904">(</span><span class="num" id="8171905">0</span><span class="op" id="8171906">,</span>&nbsp;<span class="num" id="8171908">0</span><span class="op" id="8171909">,</span>&nbsp;<span class="num" id="8171911">100</span><span class="op" id="8171914">,</span>&nbsp;<span class="num" id="8171916">100</span><span class="op" id="8171919">)</span><span class="op" id="8171920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171923">src0</span>&nbsp;<span class="op" id="8171928">:=</span>&nbsp;<span class="ident" id="8171931">image</span><span class="op" id="8171936">.</span><span class="ident" id="8171937">NewRGBA</span><span class="op" id="8171944">(</span><span class="ident" id="8171945">image</span><span class="op" id="8171950">.</span><span class="ident" id="8171951">Rect</span><span class="op" id="8171955">(</span><span class="num" id="8171956">0</span><span class="op" id="8171957">,</span>&nbsp;<span class="num" id="8171959">0</span><span class="op" id="8171960">,</span>&nbsp;<span class="num" id="8171962">100</span><span class="op" id="8171965">,</span>&nbsp;<span class="num" id="8171967">100</span><span class="op" id="8171970">)</span><span class="op" id="8171971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171974">mask0</span>&nbsp;<span class="op" id="8171980">:=</span>&nbsp;<span class="ident" id="8171983">image</span><span class="op" id="8171988">.</span><span class="ident" id="8171989">NewRGBA</span><span class="op" id="8171996">(</span><span class="ident" id="8171997">image</span><span class="op" id="8172002">.</span><span class="ident" id="8172003">Rect</span><span class="op" id="8172007">(</span><span class="num" id="8172008">0</span><span class="op" id="8172009">,</span>&nbsp;<span class="num" id="8172011">0</span><span class="op" id="8172012">,</span>&nbsp;<span class="num" id="8172014">100</span><span class="op" id="8172017">,</span>&nbsp;<span class="num" id="8172019">100</span><span class="op" id="8172022">)</span><span class="op" id="8172023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172026">for</span>&nbsp;<span class="ident" id="8172030">_</span><span class="op" id="8172031">,</span>&nbsp;<span class="ident" id="8172033">c</span>&nbsp;<span class="op" id="8172035">:=</span>&nbsp;<span class="keyword" id="8172038">range</span>&nbsp;<span class="ident" id="8172044">clipTests</span>&nbsp;<span class="op" id="8172054">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172058">dst</span>&nbsp;<span class="op" id="8172062">:=</span>&nbsp;<span class="ident" id="8172065">dst0</span><span class="op" id="8172069">.</span><span class="ident" id="8172070">SubImage</span><span class="op" id="8172078">(</span><span class="ident" id="8172079">c</span><span class="op" id="8172080">.</span><span class="ident" id="8172081">dr</span><span class="op" id="8172083">)</span><span class="op" id="8172084">.</span><span class="op" id="8172085">(</span><span class="op" id="8172086">*</span><span class="ident" id="8172087">image</span><span class="op" id="8172092">.</span><span class="ident" id="8172093">RGBA</span><span class="op" id="8172097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172101">src</span>&nbsp;<span class="op" id="8172105">:=</span>&nbsp;<span class="ident" id="8172108">src0</span><span class="op" id="8172112">.</span><span class="ident" id="8172113">SubImage</span><span class="op" id="8172121">(</span><span class="ident" id="8172122">c</span><span class="op" id="8172123">.</span><span class="ident" id="8172124">sr</span><span class="op" id="8172126">)</span><span class="op" id="8172127">.</span><span class="op" id="8172128">(</span><span class="op" id="8172129">*</span><span class="ident" id="8172130">image</span><span class="op" id="8172135">.</span><span class="ident" id="8172136">RGBA</span><span class="op" id="8172140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172144">var</span>&nbsp;<span class="ident" id="8172148">mask</span>&nbsp;<span class="ident" id="8172153">image</span><span class="op" id="8172158">.</span><span class="ident" id="8172159">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172167">if</span>&nbsp;<span class="op" id="8172170">!</span><span class="ident" id="8172171">c</span><span class="op" id="8172172">.</span><span class="ident" id="8172173">nilMask</span>&nbsp;<span class="op" id="8172181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172186">mask</span>&nbsp;<span class="op" id="8172191">=</span>&nbsp;<span class="ident" id="8172193">mask0</span><span class="op" id="8172198">.</span><span class="ident" id="8172199">SubImage</span><span class="op" id="8172207">(</span><span class="ident" id="8172208">c</span><span class="op" id="8172209">.</span><span class="ident" id="8172210">mr</span><span class="op" id="8172212">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172220">r</span><span class="op" id="8172221">,</span>&nbsp;<span class="ident" id="8172223">sp</span><span class="op" id="8172225">,</span>&nbsp;<span class="ident" id="8172227">mp</span>&nbsp;<span class="op" id="8172230">:=</span>&nbsp;<span class="ident" id="8172233">c</span><span class="op" id="8172234">.</span><span class="ident" id="8172235">r</span><span class="op" id="8172236">,</span>&nbsp;<span class="ident" id="8172238">c</span><span class="op" id="8172239">.</span><span class="ident" id="8172240">sp</span><span class="op" id="8172242">,</span>&nbsp;<span class="ident" id="8172244">c</span><span class="op" id="8172245">.</span><span class="ident" id="8172246">mp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172251">clip</span><span class="op" id="8172255">(</span><span class="ident" id="8172256">dst</span><span class="op" id="8172259">,</span>&nbsp;<span class="op" id="8172261">&amp;</span><span class="ident" id="8172262">r</span><span class="op" id="8172263">,</span>&nbsp;<span class="ident" id="8172265">src</span><span class="op" id="8172268">,</span>&nbsp;<span class="op" id="8172270">&amp;</span><span class="ident" id="8172271">sp</span><span class="op" id="8172273">,</span>&nbsp;<span class="ident" id="8172275">mask</span><span class="op" id="8172279">,</span>&nbsp;<span class="op" id="8172281">&amp;</span><span class="ident" id="8172282">mp</span><span class="op" id="8172284">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8172289">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;actual&nbsp;results&nbsp;equal&nbsp;the&nbsp;expected&nbsp;results.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172352">if</span>&nbsp;<span class="op" id="8172355">!</span><span class="ident" id="8172356">c</span><span class="op" id="8172357">.</span><span class="ident" id="8172358">r0</span><span class="op" id="8172360">.</span><span class="ident" id="8172361">Eq</span><span class="op" id="8172363">(</span><span class="ident" id="8172364">r</span><span class="op" id="8172365">)</span>&nbsp;<span class="op" id="8172367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172372">t</span><span class="op" id="8172373">.</span><span class="ident" id="8172374">Errorf</span><span class="op" id="8172380">(</span><span class="string" id="8172381">&#34;%s:&nbsp;clip&nbsp;rectangle&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8172416">,</span>&nbsp;<span class="ident" id="8172418">c</span><span class="op" id="8172419">.</span><span class="ident" id="8172420">desc</span><span class="op" id="8172424">,</span>&nbsp;<span class="ident" id="8172426">c</span><span class="op" id="8172427">.</span><span class="ident" id="8172428">r0</span><span class="op" id="8172430">,</span>&nbsp;<span class="ident" id="8172432">r</span><span class="op" id="8172433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172438">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172453">if</span>&nbsp;<span class="op" id="8172456">!</span><span class="ident" id="8172457">c</span><span class="op" id="8172458">.</span><span class="ident" id="8172459">sp0</span><span class="op" id="8172462">.</span><span class="ident" id="8172463">Eq</span><span class="op" id="8172465">(</span><span class="ident" id="8172466">sp</span><span class="op" id="8172468">)</span>&nbsp;<span class="op" id="8172470">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172475">t</span><span class="op" id="8172476">.</span><span class="ident" id="8172477">Errorf</span><span class="op" id="8172483">(</span><span class="string" id="8172484">&#34;%s:&nbsp;sp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8172507">,</span>&nbsp;<span class="ident" id="8172509">c</span><span class="op" id="8172510">.</span><span class="ident" id="8172511">desc</span><span class="op" id="8172515">,</span>&nbsp;<span class="ident" id="8172517">c</span><span class="op" id="8172518">.</span><span class="ident" id="8172519">sp0</span><span class="op" id="8172522">,</span>&nbsp;<span class="ident" id="8172524">sp</span><span class="op" id="8172526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172531">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172546">if</span>&nbsp;<span class="op" id="8172549">!</span><span class="ident" id="8172550">c</span><span class="op" id="8172551">.</span><span class="ident" id="8172552">nilMask</span>&nbsp;<span class="op" id="8172560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172565">if</span>&nbsp;<span class="op" id="8172568">!</span><span class="ident" id="8172569">c</span><span class="op" id="8172570">.</span><span class="ident" id="8172571">mp0</span><span class="op" id="8172574">.</span><span class="ident" id="8172575">Eq</span><span class="op" id="8172577">(</span><span class="ident" id="8172578">mp</span><span class="op" id="8172580">)</span>&nbsp;<span class="op" id="8172582">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172588">t</span><span class="op" id="8172589">.</span><span class="ident" id="8172590">Errorf</span><span class="op" id="8172596">(</span><span class="string" id="8172597">&#34;%s:&nbsp;mp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8172620">,</span>&nbsp;<span class="ident" id="8172622">c</span><span class="op" id="8172623">.</span><span class="ident" id="8172624">desc</span><span class="op" id="8172628">,</span>&nbsp;<span class="ident" id="8172630">c</span><span class="op" id="8172631">.</span><span class="ident" id="8172632">mp0</span><span class="op" id="8172635">,</span>&nbsp;<span class="ident" id="8172637">mp</span><span class="op" id="8172639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172645">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8172666">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;clipped&nbsp;rectangle&nbsp;is&nbsp;contained&nbsp;by&nbsp;the&nbsp;dst&nbsp;/&nbsp;src&nbsp;/&nbsp;mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8172741">//&nbsp;rectangles,&nbsp;in&nbsp;their&nbsp;respective&nbsp;co-ordinate&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172798">if</span>&nbsp;<span class="op" id="8172801">!</span><span class="ident" id="8172802">r</span><span class="op" id="8172803">.</span><span class="ident" id="8172804">In</span><span class="op" id="8172806">(</span><span class="ident" id="8172807">c</span><span class="op" id="8172808">.</span><span class="ident" id="8172809">dr</span><span class="op" id="8172811">)</span>&nbsp;<span class="op" id="8172813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172818">t</span><span class="op" id="8172819">.</span><span class="ident" id="8172820">Errorf</span><span class="op" id="8172826">(</span><span class="string" id="8172827">&#34;%s:&nbsp;c.dr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;r&nbsp;%v&#34;</span><span class="op" id="8172862">,</span>&nbsp;<span class="ident" id="8172864">c</span><span class="op" id="8172865">.</span><span class="ident" id="8172866">desc</span><span class="op" id="8172870">,</span>&nbsp;<span class="ident" id="8172872">c</span><span class="op" id="8172873">.</span><span class="ident" id="8172874">dr</span><span class="op" id="8172876">,</span>&nbsp;<span class="ident" id="8172878">r</span><span class="op" id="8172879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172883">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8172887">//&nbsp;sr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;src&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172941">sr</span>&nbsp;<span class="op" id="8172944">:=</span>&nbsp;<span class="ident" id="8172947">r</span><span class="op" id="8172948">.</span><span class="ident" id="8172949">Add</span><span class="op" id="8172952">(</span><span class="ident" id="8172953">c</span><span class="op" id="8172954">.</span><span class="ident" id="8172955">sp</span><span class="op" id="8172957">.</span><span class="ident" id="8172958">Sub</span><span class="op" id="8172961">(</span><span class="ident" id="8172962">c</span><span class="op" id="8172963">.</span><span class="ident" id="8172964">dr</span><span class="op" id="8172966">.</span><span class="ident" id="8172967">Min</span><span class="op" id="8172970">)</span><span class="op" id="8172971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172975">if</span>&nbsp;<span class="op" id="8172978">!</span><span class="ident" id="8172979">sr</span><span class="op" id="8172981">.</span><span class="ident" id="8172982">In</span><span class="op" id="8172984">(</span><span class="ident" id="8172985">c</span><span class="op" id="8172986">.</span><span class="ident" id="8172987">sr</span><span class="op" id="8172989">)</span>&nbsp;<span class="op" id="8172991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172996">t</span><span class="op" id="8172997">.</span><span class="ident" id="8172998">Errorf</span><span class="op" id="8173004">(</span><span class="string" id="8173005">&#34;%s:&nbsp;c.sr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;sr&nbsp;%v&#34;</span><span class="op" id="8173041">,</span>&nbsp;<span class="ident" id="8173043">c</span><span class="op" id="8173044">.</span><span class="ident" id="8173045">desc</span><span class="op" id="8173049">,</span>&nbsp;<span class="ident" id="8173051">c</span><span class="op" id="8173052">.</span><span class="ident" id="8173053">sr</span><span class="op" id="8173055">,</span>&nbsp;<span class="ident" id="8173057">sr</span><span class="op" id="8173059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173063">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173067">if</span>&nbsp;<span class="op" id="8173070">!</span><span class="ident" id="8173071">c</span><span class="op" id="8173072">.</span><span class="ident" id="8173073">nilMask</span>&nbsp;<span class="op" id="8173081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8173086">//&nbsp;mr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;mask&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173142">mr</span>&nbsp;<span class="op" id="8173145">:=</span>&nbsp;<span class="ident" id="8173148">r</span><span class="op" id="8173149">.</span><span class="ident" id="8173150">Add</span><span class="op" id="8173153">(</span><span class="ident" id="8173154">c</span><span class="op" id="8173155">.</span><span class="ident" id="8173156">mp</span><span class="op" id="8173158">.</span><span class="ident" id="8173159">Sub</span><span class="op" id="8173162">(</span><span class="ident" id="8173163">c</span><span class="op" id="8173164">.</span><span class="ident" id="8173165">dr</span><span class="op" id="8173167">.</span><span class="ident" id="8173168">Min</span><span class="op" id="8173171">)</span><span class="op" id="8173172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173177">if</span>&nbsp;<span class="op" id="8173180">!</span><span class="ident" id="8173181">mr</span><span class="op" id="8173183">.</span><span class="ident" id="8173184">In</span><span class="op" id="8173186">(</span><span class="ident" id="8173187">c</span><span class="op" id="8173188">.</span><span class="ident" id="8173189">mr</span><span class="op" id="8173191">)</span>&nbsp;<span class="op" id="8173193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173199">t</span><span class="op" id="8173200">.</span><span class="ident" id="8173201">Errorf</span><span class="op" id="8173207">(</span><span class="string" id="8173208">&#34;%s:&nbsp;c.mr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;mr&nbsp;%v&#34;</span><span class="op" id="8173244">,</span>&nbsp;<span class="ident" id="8173246">c</span><span class="op" id="8173247">.</span><span class="ident" id="8173248">desc</span><span class="op" id="8173252">,</span>&nbsp;<span class="ident" id="8173254">c</span><span class="op" id="8173255">.</span><span class="ident" id="8173256">mr</span><span class="op" id="8173258">,</span>&nbsp;<span class="ident" id="8173260">mr</span><span class="op" id="8173262">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173274">}</span><br>
<span class="lineno"></span><span class="op" id="8173276">}</span>
</div>
</body>
</html>
