<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8256745">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8256800">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8256854">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8256905">package</span>&nbsp;<span class="ident" id="8256913">suffixarray</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8256926">import</span>&nbsp;<span class="op" id="8256933">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8256936">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8256945">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8256958">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8256968">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8256976">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8256987">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8256997">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8257000">type</span>&nbsp;<span class="ident" id="8257005">testCase</span>&nbsp;<span class="keyword" id="8257014">struct</span>&nbsp;<span class="op" id="8257021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257024">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8257033">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8257042">//&nbsp;name&nbsp;of&nbsp;test&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257064">source</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8257073">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8257082">//&nbsp;source&nbsp;to&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257102">patterns</span>&nbsp;<span class="op" id="8257111">[</span><span class="op" id="8257112">]</span><span class="builtintype" id="8257113">string</span>&nbsp;<span class="comment" id="8257120">//&nbsp;patterns&nbsp;to&nbsp;lookup</span><br>
<span class="lineno">20</span><span class="op" id="8257142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8257145">var</span>&nbsp;<span class="ident" id="8257149">testCases</span>&nbsp;<span class="op" id="8257159">=</span>&nbsp;<span class="op" id="8257161">[</span><span class="op" id="8257162">]</span><span class="ident" id="8257163"><a href="/index/suffixarray/suffixarray_test.go.html#8257005">testCase</a></span><span class="op" id="8257171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257178">&#34;empty&nbsp;string&#34;</span><span class="op" id="8257192">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257196">&#34;&#34;</span><span class="op" id="8257198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257202">[</span><span class="op" id="8257203">]</span><span class="builtintype" id="8257204">string</span><span class="op" id="8257210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257215">&#34;&#34;</span><span class="op" id="8257217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257222">&#34;foo&#34;</span><span class="op" id="8257227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257232">&#34;(foo)&#34;</span><span class="op" id="8257239">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257244">&#34;.*&#34;</span><span class="op" id="8257248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257253">&#34;a*&#34;</span><span class="op" id="8257257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257261">}</span><span class="op" id="8257262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257265">}</span><span class="op" id="8257266">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257274">&#34;all&nbsp;a&#39;s&#34;</span><span class="op" id="8257283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257287">&#34;aaaaaaaaaa&#34;</span><span class="op" id="8257299">,</span>&nbsp;<span class="comment" id="8257301">//&nbsp;10&nbsp;a&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257313">[</span><span class="op" id="8257314">]</span><span class="builtintype" id="8257315">string</span><span class="op" id="8257321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257326">&#34;&#34;</span><span class="op" id="8257328">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257333">&#34;a&#34;</span><span class="op" id="8257336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257341">&#34;aa&#34;</span><span class="op" id="8257345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257350">&#34;aaa&#34;</span><span class="op" id="8257355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257360">&#34;aaaa&#34;</span><span class="op" id="8257366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257371">&#34;aaaaa&#34;</span><span class="op" id="8257378">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257383">&#34;aaaaaa&#34;</span><span class="op" id="8257391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257396">&#34;aaaaaaa&#34;</span><span class="op" id="8257405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257410">&#34;aaaaaaaa&#34;</span><span class="op" id="8257420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257425">&#34;aaaaaaaaa&#34;</span><span class="op" id="8257436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257441">&#34;aaaaaaaaaa&#34;</span><span class="op" id="8257453">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257458">&#34;aaaaaaaaaaa&#34;</span><span class="op" id="8257471">,</span>&nbsp;<span class="comment" id="8257473">//&nbsp;11&nbsp;a&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257486">&#34;.&#34;</span><span class="op" id="8257489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257494">&#34;.*&#34;</span><span class="op" id="8257498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257503">&#34;a+&#34;</span><span class="op" id="8257507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257512">&#34;aa+&#34;</span><span class="op" id="8257517">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257522">&#34;aaaa[b]?&#34;</span><span class="op" id="8257532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257537">&#34;aaa*&#34;</span><span class="op" id="8257543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257547">}</span><span class="op" id="8257548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257551">}</span><span class="op" id="8257552">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257560">&#34;abc&#34;</span><span class="op" id="8257565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257569">&#34;abc&#34;</span><span class="op" id="8257574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257578">[</span><span class="op" id="8257579">]</span><span class="builtintype" id="8257580">string</span><span class="op" id="8257586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257591">&#34;a&#34;</span><span class="op" id="8257594">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257599">&#34;b&#34;</span><span class="op" id="8257602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257607">&#34;c&#34;</span><span class="op" id="8257610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257615">&#34;ab&#34;</span><span class="op" id="8257619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257624">&#34;bc&#34;</span><span class="op" id="8257628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257633">&#34;abc&#34;</span><span class="op" id="8257638">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257643">&#34;a.c&#34;</span><span class="op" id="8257648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257653">&#34;a(b|c)&#34;</span><span class="op" id="8257661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257666">&#34;abc?&#34;</span><span class="op" id="8257672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257676">}</span><span class="op" id="8257677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257680">}</span><span class="op" id="8257681">,</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257689">&#34;barbara*3&#34;</span><span class="op" id="8257700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257704">&#34;barbarabarbarabarbara&#34;</span><span class="op" id="8257727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257731">[</span><span class="op" id="8257732">]</span><span class="builtintype" id="8257733">string</span><span class="op" id="8257739">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257744">&#34;a&#34;</span><span class="op" id="8257747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257752">&#34;bar&#34;</span><span class="op" id="8257757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257762">&#34;rab&#34;</span><span class="op" id="8257767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257772">&#34;arab&#34;</span><span class="op" id="8257778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257783">&#34;barbar&#34;</span><span class="op" id="8257791">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257796">&#34;bara?bar&#34;</span><span class="op" id="8257806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257810">}</span><span class="op" id="8257811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257814">}</span><span class="op" id="8257815">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257819">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257823">&#34;typing&nbsp;drill&#34;</span><span class="op" id="8257837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257841">&#34;Now&nbsp;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&nbsp;to&nbsp;come&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&nbsp;country.&#34;</span><span class="op" id="8257912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257916">[</span><span class="op" id="8257917">]</span><span class="builtintype" id="8257918">string</span><span class="op" id="8257924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257929">&#34;Now&#34;</span><span class="op" id="8257934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257939">&#34;the&nbsp;time&#34;</span><span class="op" id="8257949">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257954">&#34;to&nbsp;come&nbsp;the&nbsp;aid&#34;</span><span class="op" id="8257971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8257976">&#34;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&nbsp;to&nbsp;come&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&#34;</span><span class="op" id="8258034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8258039">&#34;to&nbsp;(come|the)?&#34;</span><span class="op" id="8258055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258059">}</span><span class="op" id="8258060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258063">}</span><span class="op" id="8258064">,</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8258072">&#34;godoc&nbsp;simulation&#34;</span><span class="op" id="8258090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8258094">&#34;package&nbsp;main\n\nimport(\n&nbsp;&nbsp;&nbsp;&nbsp;\&#34;rand\&#34;\n&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8258139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258143">[</span><span class="op" id="8258144">]</span><span class="builtintype" id="8258145">string</span><span class="op" id="8258151">{</span><span class="op" id="8258152">}</span><span class="op" id="8258153">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258156">}</span><span class="op" id="8258157">,</span><br>
<span class="lineno"></span><span class="op" id="8258159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8258162">//&nbsp;find&nbsp;all&nbsp;occurrences&nbsp;of&nbsp;s&nbsp;in&nbsp;source;&nbsp;report&nbsp;at&nbsp;most&nbsp;n&nbsp;occurrences</span><br>
<span class="lineno"></span><span class="keyword" id="8258231">func</span>&nbsp;<span class="ident" id="8258236">find</span><span class="op" id="8258240">(</span><span class="ident" id="8258241">src</span><span class="op" id="8258244">,</span>&nbsp;<span class="ident" id="8258246">s</span>&nbsp;<span class="builtintype" id="8258248">string</span><span class="op" id="8258254">,</span>&nbsp;<span class="ident" id="8258256">n</span>&nbsp;<span class="builtintype" id="8258258">int</span><span class="op" id="8258261">)</span>&nbsp;<span class="op" id="8258263">[</span><span class="op" id="8258264">]</span><span class="builtintype" id="8258265">int</span>&nbsp;<span class="op" id="8258269">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258272">var</span>&nbsp;<span class="ident" id="8258276">res</span>&nbsp;<span class="op" id="8258280">[</span><span class="op" id="8258281">]</span><span class="builtintype" id="8258282">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258287">if</span>&nbsp;<span class="ident" id="8258290"><a href="/index/suffixarray/suffixarray_test.go.html#8258246">s</a></span>&nbsp;<span class="op" id="8258292">!=</span>&nbsp;<span class="string" id="8258295">&#34;&#34;</span>&nbsp;<span class="op" id="8258298">&amp;&amp;</span>&nbsp;<span class="ident" id="8258301"><a href="/index/suffixarray/suffixarray_test.go.html#8258256">n</a></span>&nbsp;<span class="op" id="8258303">!=</span>&nbsp;<span class="num" id="8258306">0</span>&nbsp;<span class="op" id="8258308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258312">//&nbsp;find&nbsp;at&nbsp;most&nbsp;n&nbsp;occurrences&nbsp;of&nbsp;s&nbsp;in&nbsp;src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258356">for</span>&nbsp;<span class="ident" id="8258360">i</span>&nbsp;<span class="op" id="8258362">:=</span>&nbsp;<span class="op" id="8258365">-</span><span class="num" id="8258366">1</span><span class="op" id="8258367">;</span>&nbsp;<span class="ident" id="8258369"><a href="/index/suffixarray/suffixarray_test.go.html#8258256">n</a></span>&nbsp;<span class="op" id="8258371">&lt;</span>&nbsp;<span class="num" id="8258373">0</span>&nbsp;<span class="op" id="8258375">||</span>&nbsp;<span class="builtinfunc" id="8258378">len</span><span class="op" id="8258381">(</span><span class="ident" id="8258382"><a href="/index/suffixarray/suffixarray_test.go.html#8258276">res</a></span><span class="op" id="8258385">)</span>&nbsp;<span class="op" id="8258387">&lt;</span>&nbsp;<span class="ident" id="8258389"><a href="/index/suffixarray/suffixarray_test.go.html#8258256">n</a></span><span class="op" id="8258390">;</span>&nbsp;<span class="op" id="8258392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258397">j</span>&nbsp;<span class="op" id="8258399">:=</span>&nbsp;<span class="ident" id="8258402"><a href="/index/suffixarray/suffixarray_test.go.html#8256976">strings</a></span><span class="op" id="8258409">.</span><span class="ident" id="8258410">Index</span><span class="op" id="8258415">(</span><span class="ident" id="8258416"><a href="/index/suffixarray/suffixarray_test.go.html#8258241">src</a></span><span class="op" id="8258419">[</span><span class="ident" id="8258420"><a href="/index/suffixarray/suffixarray_test.go.html#8258360">i</a></span><span class="op" id="8258421">+</span><span class="num" id="8258422">1</span><span class="op" id="8258423">:</span><span class="op" id="8258424">]</span><span class="op" id="8258425">,</span>&nbsp;<span class="ident" id="8258427"><a href="/index/suffixarray/suffixarray_test.go.html#8258246">s</a></span><span class="op" id="8258428">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258433">if</span>&nbsp;<span class="ident" id="8258436"><a href="/index/suffixarray/suffixarray_test.go.html#8258397">j</a></span>&nbsp;<span class="op" id="8258438">&lt;</span>&nbsp;<span class="num" id="8258440">0</span>&nbsp;<span class="op" id="8258442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258448">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258462"><a href="/index/suffixarray/suffixarray_test.go.html#8258360">i</a></span>&nbsp;<span class="op" id="8258464">+=</span>&nbsp;<span class="ident" id="8258467"><a href="/index/suffixarray/suffixarray_test.go.html#8258397">j</a></span>&nbsp;<span class="op" id="8258469">+</span>&nbsp;<span class="num" id="8258471">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258476"><a href="/index/suffixarray/suffixarray_test.go.html#8258276">res</a></span>&nbsp;<span class="op" id="8258480">=</span>&nbsp;<span class="builtinfunc" id="8258482">append</span><span class="op" id="8258488">(</span><span class="ident" id="8258489"><a href="/index/suffixarray/suffixarray_test.go.html#8258276">res</a></span><span class="op" id="8258492">,</span>&nbsp;<span class="ident" id="8258494"><a href="/index/suffixarray/suffixarray_test.go.html#8258360">i</a></span><span class="op" id="8258495">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258505">return</span>&nbsp;<span class="ident" id="8258512"><a href="/index/suffixarray/suffixarray_test.go.html#8258276">res</a></span><br>
<span class="lineno"></span><span class="op" id="8258516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="8258519">func</span>&nbsp;<span class="ident" id="8258524">testLookup</span><span class="op" id="8258534">(</span><span class="ident" id="8258535">t</span>&nbsp;<span class="op" id="8258537">*</span><span class="ident" id="8258538"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8258545">.</span><span class="ident" id="8258546">T</span><span class="op" id="8258547">,</span>&nbsp;<span class="ident" id="8258549">tc</span>&nbsp;<span class="op" id="8258552">*</span><span class="ident" id="8258553"><a href="/index/suffixarray/suffixarray_test.go.html#8257005">testCase</a></span><span class="op" id="8258561">,</span>&nbsp;<span class="ident" id="8258563">x</span>&nbsp;<span class="op" id="8258565">*</span><span class="ident" id="8258566"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><span class="op" id="8258571">,</span>&nbsp;<span class="ident" id="8258573">s</span>&nbsp;<span class="builtintype" id="8258575">string</span><span class="op" id="8258581">,</span>&nbsp;<span class="ident" id="8258583">n</span>&nbsp;<span class="builtintype" id="8258585">int</span><span class="op" id="8258588">)</span>&nbsp;<span class="op" id="8258590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258593">res</span>&nbsp;<span class="op" id="8258597">:=</span>&nbsp;<span class="ident" id="8258600"><a href="/index/suffixarray/suffixarray_test.go.html#8258563">x</a></span><span class="op" id="8258601">.</span><span class="ident" id="8258602">Lookup</span><span class="op" id="8258608">(</span><span class="op" id="8258609">[</span><span class="op" id="8258610">]</span><span class="builtintype" id="8258611">byte</span><span class="op" id="8258615">(</span><span class="ident" id="8258616"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8258617">)</span><span class="op" id="8258618">,</span>&nbsp;<span class="ident" id="8258620"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span><span class="op" id="8258621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258624">exp</span>&nbsp;<span class="op" id="8258628">:=</span>&nbsp;<span class="ident" id="8258631"><a href="/index/suffixarray/suffixarray_test.go.html#8258236">find</a></span><span class="op" id="8258635">(</span><span class="ident" id="8258636"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8258638">.</span><span class="ident" id="8258639">source</span><span class="op" id="8258645">,</span>&nbsp;<span class="ident" id="8258647"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8258648">,</span>&nbsp;<span class="ident" id="8258650"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span><span class="op" id="8258651">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258655">//&nbsp;check&nbsp;that&nbsp;the&nbsp;lengths&nbsp;match</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258688">if</span>&nbsp;<span class="builtinfunc" id="8258691">len</span><span class="op" id="8258694">(</span><span class="ident" id="8258695"><a href="/index/suffixarray/suffixarray_test.go.html#8258593">res</a></span><span class="op" id="8258698">)</span>&nbsp;<span class="op" id="8258700">!=</span>&nbsp;<span class="builtinfunc" id="8258703">len</span><span class="op" id="8258706">(</span><span class="ident" id="8258707"><a href="/index/suffixarray/suffixarray_test.go.html#8258624">exp</a></span><span class="op" id="8258710">)</span>&nbsp;<span class="op" id="8258712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258716"><a href="/index/suffixarray/suffixarray_test.go.html#8258535">t</a></span><span class="op" id="8258717">.</span><span class="ident" id="8258718">Errorf</span><span class="op" id="8258724">(</span><span class="string" id="8258725">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;expected&nbsp;%d&nbsp;results;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8258783">,</span>&nbsp;<span class="ident" id="8258785"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8258787">.</span><span class="ident" id="8258788">name</span><span class="op" id="8258792">,</span>&nbsp;<span class="ident" id="8258794"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8258795">,</span>&nbsp;<span class="ident" id="8258797"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span><span class="op" id="8258798">,</span>&nbsp;<span class="builtinfunc" id="8258800">len</span><span class="op" id="8258803">(</span><span class="ident" id="8258804"><a href="/index/suffixarray/suffixarray_test.go.html#8258624">exp</a></span><span class="op" id="8258807">)</span><span class="op" id="8258808">,</span>&nbsp;<span class="builtinfunc" id="8258810">len</span><span class="op" id="8258813">(</span><span class="ident" id="8258814"><a href="/index/suffixarray/suffixarray_test.go.html#8258593">res</a></span><span class="op" id="8258817">)</span><span class="op" id="8258818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258825">//&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0&nbsp;the&nbsp;number&nbsp;of&nbsp;results&nbsp;is&nbsp;limited&nbsp;---&nbsp;unless&nbsp;n&nbsp;&gt;=&nbsp;all&nbsp;results,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258901">//&nbsp;we&nbsp;may&nbsp;obtain&nbsp;different&nbsp;positions&nbsp;from&nbsp;the&nbsp;Index&nbsp;and&nbsp;from&nbsp;find&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258977">//&nbsp;Index&nbsp;may&nbsp;not&nbsp;find&nbsp;the&nbsp;results&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;find)&nbsp;=&gt;&nbsp;in&nbsp;general</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8259053">//&nbsp;we&nbsp;cannot&nbsp;simply&nbsp;check&nbsp;that&nbsp;the&nbsp;res&nbsp;and&nbsp;exp&nbsp;lists&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8259118">//&nbsp;check&nbsp;that&nbsp;each&nbsp;result&nbsp;is&nbsp;in&nbsp;fact&nbsp;a&nbsp;correct&nbsp;match&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;duplicates</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259200"><a href="/index/suffixarray/suffixarray_test.go.html#8256968">sort</a></span><span class="op" id="8259204">.</span><span class="ident" id="8259205">Ints</span><span class="op" id="8259209">(</span><span class="ident" id="8259210"><a href="/index/suffixarray/suffixarray_test.go.html#8258593">res</a></span><span class="op" id="8259213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259216">for</span>&nbsp;<span class="ident" id="8259220">i</span><span class="op" id="8259221">,</span>&nbsp;<span class="ident" id="8259223">r</span>&nbsp;<span class="op" id="8259225">:=</span>&nbsp;<span class="keyword" id="8259228">range</span>&nbsp;<span class="ident" id="8259234"><a href="/index/suffixarray/suffixarray_test.go.html#8258593">res</a></span>&nbsp;<span class="op" id="8259238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259242">if</span>&nbsp;<span class="ident" id="8259245"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span>&nbsp;<span class="op" id="8259247">&lt;</span>&nbsp;<span class="num" id="8259249">0</span>&nbsp;<span class="op" id="8259251">||</span>&nbsp;<span class="builtinfunc" id="8259254">len</span><span class="op" id="8259257">(</span><span class="ident" id="8259258"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259260">.</span><span class="ident" id="8259261">source</span><span class="op" id="8259267">)</span>&nbsp;<span class="op" id="8259269">&lt;=</span>&nbsp;<span class="ident" id="8259272"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span>&nbsp;<span class="op" id="8259274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259279"><a href="/index/suffixarray/suffixarray_test.go.html#8258535">t</a></span><span class="op" id="8259280">.</span><span class="ident" id="8259281">Errorf</span><span class="op" id="8259287">(</span><span class="string" id="8259288">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;index&nbsp;%d&nbsp;out&nbsp;of&nbsp;range&nbsp;[0,&nbsp;%d[&#34;</span><span class="op" id="8259359">,</span>&nbsp;<span class="ident" id="8259361"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259363">.</span><span class="ident" id="8259364">name</span><span class="op" id="8259368">,</span>&nbsp;<span class="ident" id="8259370"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8259371">,</span>&nbsp;<span class="ident" id="8259373"><a href="/index/suffixarray/suffixarray_test.go.html#8259220">i</a></span><span class="op" id="8259374">,</span>&nbsp;<span class="ident" id="8259376"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span><span class="op" id="8259377">,</span>&nbsp;<span class="ident" id="8259379"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span><span class="op" id="8259380">,</span>&nbsp;<span class="builtinfunc" id="8259382">len</span><span class="op" id="8259385">(</span><span class="ident" id="8259386"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259388">.</span><span class="ident" id="8259389">source</span><span class="op" id="8259395">)</span><span class="op" id="8259396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259400">}</span>&nbsp;<span class="keyword" id="8259402">else</span>&nbsp;<span class="keyword" id="8259407">if</span>&nbsp;<span class="op" id="8259410">!</span><span class="ident" id="8259411"><a href="/index/suffixarray/suffixarray_test.go.html#8256976">strings</a></span><span class="op" id="8259418">.</span><span class="ident" id="8259419">HasPrefix</span><span class="op" id="8259428">(</span><span class="ident" id="8259429"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259431">.</span><span class="ident" id="8259432">source</span><span class="op" id="8259438">[</span><span class="ident" id="8259439"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span><span class="op" id="8259440">:</span><span class="op" id="8259441">]</span><span class="op" id="8259442">,</span>&nbsp;<span class="ident" id="8259444"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8259445">)</span>&nbsp;<span class="op" id="8259447">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259452"><a href="/index/suffixarray/suffixarray_test.go.html#8258535">t</a></span><span class="op" id="8259453">.</span><span class="ident" id="8259454">Errorf</span><span class="op" id="8259460">(</span><span class="string" id="8259461">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;index&nbsp;%d&nbsp;not&nbsp;a&nbsp;match&#34;</span><span class="op" id="8259523">,</span>&nbsp;<span class="ident" id="8259525"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259527">.</span><span class="ident" id="8259528">name</span><span class="op" id="8259532">,</span>&nbsp;<span class="ident" id="8259534"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8259535">,</span>&nbsp;<span class="ident" id="8259537"><a href="/index/suffixarray/suffixarray_test.go.html#8259220">i</a></span><span class="op" id="8259538">,</span>&nbsp;<span class="ident" id="8259540"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span><span class="op" id="8259541">,</span>&nbsp;<span class="ident" id="8259543"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span><span class="op" id="8259544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259552">if</span>&nbsp;<span class="ident" id="8259555"><a href="/index/suffixarray/suffixarray_test.go.html#8259220">i</a></span>&nbsp;<span class="op" id="8259557">&gt;</span>&nbsp;<span class="num" id="8259559">0</span>&nbsp;<span class="op" id="8259561">&amp;&amp;</span>&nbsp;<span class="ident" id="8259564"><a href="/index/suffixarray/suffixarray_test.go.html#8258593">res</a></span><span class="op" id="8259567">[</span><span class="ident" id="8259568"><a href="/index/suffixarray/suffixarray_test.go.html#8259220">i</a></span><span class="op" id="8259569">-</span><span class="num" id="8259570">1</span><span class="op" id="8259571">]</span>&nbsp;<span class="op" id="8259573">==</span>&nbsp;<span class="ident" id="8259576"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span>&nbsp;<span class="op" id="8259578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259583"><a href="/index/suffixarray/suffixarray_test.go.html#8258535">t</a></span><span class="op" id="8259584">.</span><span class="ident" id="8259585">Errorf</span><span class="op" id="8259591">(</span><span class="string" id="8259592">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;found&nbsp;duplicate&nbsp;index&nbsp;%d&#34;</span><span class="op" id="8259658">,</span>&nbsp;<span class="ident" id="8259660"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259662">.</span><span class="ident" id="8259663">name</span><span class="op" id="8259667">,</span>&nbsp;<span class="ident" id="8259669"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8259670">,</span>&nbsp;<span class="ident" id="8259672"><a href="/index/suffixarray/suffixarray_test.go.html#8259220">i</a></span><span class="op" id="8259673">,</span>&nbsp;<span class="ident" id="8259675"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span><span class="op" id="8259676">,</span>&nbsp;<span class="ident" id="8259678"><a href="/index/suffixarray/suffixarray_test.go.html#8259223">r</a></span><span class="op" id="8259679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259683">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259690">if</span>&nbsp;<span class="ident" id="8259693"><a href="/index/suffixarray/suffixarray_test.go.html#8258583">n</a></span>&nbsp;<span class="op" id="8259695">&lt;</span>&nbsp;<span class="num" id="8259697">0</span>&nbsp;<span class="op" id="8259699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8259703">//&nbsp;all&nbsp;results&nbsp;computed&nbsp;-&nbsp;sorted&nbsp;res&nbsp;and&nbsp;exp&nbsp;must&nbsp;be&nbsp;equal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259764">for</span>&nbsp;<span class="ident" id="8259768">i</span><span class="op" id="8259769">,</span>&nbsp;<span class="ident" id="8259771">r</span>&nbsp;<span class="op" id="8259773">:=</span>&nbsp;<span class="keyword" id="8259776">range</span>&nbsp;<span class="ident" id="8259782"><a href="/index/suffixarray/suffixarray_test.go.html#8258593">res</a></span>&nbsp;<span class="op" id="8259786">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259791">e</span>&nbsp;<span class="op" id="8259793">:=</span>&nbsp;<span class="ident" id="8259796"><a href="/index/suffixarray/suffixarray_test.go.html#8258624">exp</a></span><span class="op" id="8259799">[</span><span class="ident" id="8259800"><a href="/index/suffixarray/suffixarray_test.go.html#8259768">i</a></span><span class="op" id="8259801">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259806">if</span>&nbsp;<span class="ident" id="8259809"><a href="/index/suffixarray/suffixarray_test.go.html#8259771">r</a></span>&nbsp;<span class="op" id="8259811">!=</span>&nbsp;<span class="ident" id="8259814"><a href="/index/suffixarray/suffixarray_test.go.html#8259791">e</a></span>&nbsp;<span class="op" id="8259816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259822"><a href="/index/suffixarray/suffixarray_test.go.html#8258535">t</a></span><span class="op" id="8259823">.</span><span class="ident" id="8259824">Errorf</span><span class="op" id="8259830">(</span><span class="string" id="8259831">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d:&nbsp;expected&nbsp;index&nbsp;%d;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8259889">,</span>&nbsp;<span class="ident" id="8259891"><a href="/index/suffixarray/suffixarray_test.go.html#8258549">tc</a></span><span class="op" id="8259893">.</span><span class="ident" id="8259894">name</span><span class="op" id="8259898">,</span>&nbsp;<span class="ident" id="8259900"><a href="/index/suffixarray/suffixarray_test.go.html#8258573">s</a></span><span class="op" id="8259901">,</span>&nbsp;<span class="ident" id="8259903"><a href="/index/suffixarray/suffixarray_test.go.html#8259768">i</a></span><span class="op" id="8259904">,</span>&nbsp;<span class="ident" id="8259906"><a href="/index/suffixarray/suffixarray_test.go.html#8259791">e</a></span><span class="op" id="8259907">,</span>&nbsp;<span class="ident" id="8259909"><a href="/index/suffixarray/suffixarray_test.go.html#8259771">r</a></span><span class="op" id="8259910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259919">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259922">}</span><br>
<span class="lineno"></span><span class="op" id="8259924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259927">func</span>&nbsp;<span class="ident" id="8259932">testFindAllIndex</span><span class="op" id="8259948">(</span><span class="ident" id="8259949">t</span>&nbsp;<span class="op" id="8259951">*</span><span class="ident" id="8259952"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8259959">.</span><span class="ident" id="8259960">T</span><span class="op" id="8259961">,</span>&nbsp;<span class="ident" id="8259963">tc</span>&nbsp;<span class="op" id="8259966">*</span><span class="ident" id="8259967"><a href="/index/suffixarray/suffixarray_test.go.html#8257005">testCase</a></span><span class="op" id="8259975">,</span>&nbsp;<span class="ident" id="8259977">x</span>&nbsp;<span class="op" id="8259979">*</span><span class="ident" id="8259980"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><span class="op" id="8259985">,</span>&nbsp;<span class="ident" id="8259987">rx</span>&nbsp;<span class="op" id="8259990">*</span><span class="ident" id="8259991"><a href="/index/suffixarray/suffixarray_test.go.html#8256958">regexp</a></span><span class="op" id="8259997">.</span><span class="ident" id="8259998">Regexp</span><span class="op" id="8260004">,</span>&nbsp;<span class="ident" id="8260006">n</span>&nbsp;<span class="builtintype" id="8260008">int</span><span class="op" id="8260011">)</span>&nbsp;<span class="op" id="8260013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260016">res</span>&nbsp;<span class="op" id="8260020">:=</span>&nbsp;<span class="ident" id="8260023"><a href="/index/suffixarray/suffixarray_test.go.html#8259977">x</a></span><span class="op" id="8260024">.</span><span class="ident" id="8260025">FindAllIndex</span><span class="op" id="8260037">(</span><span class="ident" id="8260038"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8260040">,</span>&nbsp;<span class="ident" id="8260042"><a href="/index/suffixarray/suffixarray_test.go.html#8260006">n</a></span><span class="op" id="8260043">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260046">exp</span>&nbsp;<span class="op" id="8260050">:=</span>&nbsp;<span class="ident" id="8260053"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8260055">.</span><span class="ident" id="8260056">FindAllStringIndex</span><span class="op" id="8260074">(</span><span class="ident" id="8260075"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8260077">.</span><span class="ident" id="8260078">source</span><span class="op" id="8260084">,</span>&nbsp;<span class="ident" id="8260086"><a href="/index/suffixarray/suffixarray_test.go.html#8260006">n</a></span><span class="op" id="8260087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260091">//&nbsp;check&nbsp;that&nbsp;the&nbsp;lengths&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260124">if</span>&nbsp;<span class="builtinfunc" id="8260127">len</span><span class="op" id="8260130">(</span><span class="ident" id="8260131"><a href="/index/suffixarray/suffixarray_test.go.html#8260016">res</a></span><span class="op" id="8260134">)</span>&nbsp;<span class="op" id="8260136">!=</span>&nbsp;<span class="builtinfunc" id="8260139">len</span><span class="op" id="8260142">(</span><span class="ident" id="8260143"><a href="/index/suffixarray/suffixarray_test.go.html#8260046">exp</a></span><span class="op" id="8260146">)</span>&nbsp;<span class="op" id="8260148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260152"><a href="/index/suffixarray/suffixarray_test.go.html#8259949">t</a></span><span class="op" id="8260153">.</span><span class="ident" id="8260154">Errorf</span><span class="op" id="8260160">(</span><span class="string" id="8260161">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;expected&nbsp;%d&nbsp;results;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8260225">,</span>&nbsp;<span class="ident" id="8260227"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8260229">.</span><span class="ident" id="8260230">name</span><span class="op" id="8260234">,</span>&nbsp;<span class="ident" id="8260236"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8260238">,</span>&nbsp;<span class="ident" id="8260240"><a href="/index/suffixarray/suffixarray_test.go.html#8260006">n</a></span><span class="op" id="8260241">,</span>&nbsp;<span class="builtinfunc" id="8260243">len</span><span class="op" id="8260246">(</span><span class="ident" id="8260247"><a href="/index/suffixarray/suffixarray_test.go.html#8260046">exp</a></span><span class="op" id="8260250">)</span><span class="op" id="8260251">,</span>&nbsp;<span class="builtinfunc" id="8260253">len</span><span class="op" id="8260256">(</span><span class="ident" id="8260257"><a href="/index/suffixarray/suffixarray_test.go.html#8260016">res</a></span><span class="op" id="8260260">)</span><span class="op" id="8260261">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260268">//&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0&nbsp;the&nbsp;number&nbsp;of&nbsp;results&nbsp;is&nbsp;limited&nbsp;---&nbsp;unless&nbsp;n&nbsp;&gt;=&nbsp;all&nbsp;results,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260344">//&nbsp;we&nbsp;may&nbsp;obtain&nbsp;different&nbsp;positions&nbsp;from&nbsp;the&nbsp;Index&nbsp;and&nbsp;from&nbsp;regexp&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260422">//&nbsp;Index&nbsp;may&nbsp;not&nbsp;find&nbsp;the&nbsp;results&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;regexp)&nbsp;=&gt;&nbsp;in&nbsp;general</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260500">//&nbsp;we&nbsp;cannot&nbsp;simply&nbsp;check&nbsp;that&nbsp;the&nbsp;res&nbsp;and&nbsp;exp&nbsp;lists&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8260565">//&nbsp;check&nbsp;that&nbsp;each&nbsp;result&nbsp;is&nbsp;in&nbsp;fact&nbsp;a&nbsp;correct&nbsp;match&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;sorted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260644">for</span>&nbsp;<span class="ident" id="8260648">i</span><span class="op" id="8260649">,</span>&nbsp;<span class="ident" id="8260651">r</span>&nbsp;<span class="op" id="8260653">:=</span>&nbsp;<span class="keyword" id="8260656">range</span>&nbsp;<span class="ident" id="8260662"><a href="/index/suffixarray/suffixarray_test.go.html#8260016">res</a></span>&nbsp;<span class="op" id="8260666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260670">if</span>&nbsp;<span class="ident" id="8260673"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260674">[</span><span class="num" id="8260675">0</span><span class="op" id="8260676">]</span>&nbsp;<span class="op" id="8260678">&lt;</span>&nbsp;<span class="num" id="8260680">0</span>&nbsp;<span class="op" id="8260682">||</span>&nbsp;<span class="ident" id="8260685"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260686">[</span><span class="num" id="8260687">0</span><span class="op" id="8260688">]</span>&nbsp;<span class="op" id="8260690">&gt;</span>&nbsp;<span class="ident" id="8260692"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260693">[</span><span class="num" id="8260694">1</span><span class="op" id="8260695">]</span>&nbsp;<span class="op" id="8260697">||</span>&nbsp;<span class="builtinfunc" id="8260700">len</span><span class="op" id="8260703">(</span><span class="ident" id="8260704"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8260706">.</span><span class="ident" id="8260707">source</span><span class="op" id="8260713">)</span>&nbsp;<span class="op" id="8260715">&lt;</span>&nbsp;<span class="ident" id="8260717"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260718">[</span><span class="num" id="8260719">1</span><span class="op" id="8260720">]</span>&nbsp;<span class="op" id="8260722">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260727"><a href="/index/suffixarray/suffixarray_test.go.html#8259949">t</a></span><span class="op" id="8260728">.</span><span class="ident" id="8260729">Errorf</span><span class="op" id="8260735">(</span><span class="string" id="8260736">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;==&nbsp;%d):&nbsp;illegal&nbsp;match&nbsp;[%d,&nbsp;%d]&#34;</span><span class="op" id="8260807">,</span>&nbsp;<span class="ident" id="8260809"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8260811">.</span><span class="ident" id="8260812">name</span><span class="op" id="8260816">,</span>&nbsp;<span class="ident" id="8260818"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8260820">,</span>&nbsp;<span class="ident" id="8260822"><a href="/index/suffixarray/suffixarray_test.go.html#8260648">i</a></span><span class="op" id="8260823">,</span>&nbsp;<span class="ident" id="8260825"><a href="/index/suffixarray/suffixarray_test.go.html#8260006">n</a></span><span class="op" id="8260826">,</span>&nbsp;<span class="ident" id="8260828"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260829">[</span><span class="num" id="8260830">0</span><span class="op" id="8260831">]</span><span class="op" id="8260832">,</span>&nbsp;<span class="ident" id="8260834"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260835">[</span><span class="num" id="8260836">1</span><span class="op" id="8260837">]</span><span class="op" id="8260838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260842">}</span>&nbsp;<span class="keyword" id="8260844">else</span>&nbsp;<span class="keyword" id="8260849">if</span>&nbsp;<span class="op" id="8260852">!</span><span class="ident" id="8260853"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8260855">.</span><span class="ident" id="8260856">MatchString</span><span class="op" id="8260867">(</span><span class="ident" id="8260868"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8260870">.</span><span class="ident" id="8260871">source</span><span class="op" id="8260877">[</span><span class="ident" id="8260878"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260879">[</span><span class="num" id="8260880">0</span><span class="op" id="8260881">]</span><span class="op" id="8260882">:</span><span class="ident" id="8260883"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260884">[</span><span class="num" id="8260885">1</span><span class="op" id="8260886">]</span><span class="op" id="8260887">]</span><span class="op" id="8260888">)</span>&nbsp;<span class="op" id="8260890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260895"><a href="/index/suffixarray/suffixarray_test.go.html#8259949">t</a></span><span class="op" id="8260896">.</span><span class="ident" id="8260897">Errorf</span><span class="op" id="8260903">(</span><span class="string" id="8260904">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;[%d,&nbsp;%d]&nbsp;not&nbsp;a&nbsp;match&#34;</span><span class="op" id="8260972">,</span>&nbsp;<span class="ident" id="8260974"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8260976">.</span><span class="ident" id="8260977">name</span><span class="op" id="8260981">,</span>&nbsp;<span class="ident" id="8260983"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8260985">,</span>&nbsp;<span class="ident" id="8260987"><a href="/index/suffixarray/suffixarray_test.go.html#8260648">i</a></span><span class="op" id="8260988">,</span>&nbsp;<span class="ident" id="8260990"><a href="/index/suffixarray/suffixarray_test.go.html#8260006">n</a></span><span class="op" id="8260991">,</span>&nbsp;<span class="ident" id="8260993"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8260994">[</span><span class="num" id="8260995">0</span><span class="op" id="8260996">]</span><span class="op" id="8260997">,</span>&nbsp;<span class="ident" id="8260999"><a href="/index/suffixarray/suffixarray_test.go.html#8260651">r</a></span><span class="op" id="8261000">[</span><span class="num" id="8261001">1</span><span class="op" id="8261002">]</span><span class="op" id="8261003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261010">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261014">if</span>&nbsp;<span class="ident" id="8261017"><a href="/index/suffixarray/suffixarray_test.go.html#8260006">n</a></span>&nbsp;<span class="op" id="8261019">&lt;</span>&nbsp;<span class="num" id="8261021">0</span>&nbsp;<span class="op" id="8261023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261027">//&nbsp;all&nbsp;results&nbsp;computed&nbsp;-&nbsp;sorted&nbsp;res&nbsp;and&nbsp;exp&nbsp;must&nbsp;be&nbsp;equal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261088">for</span>&nbsp;<span class="ident" id="8261092">i</span><span class="op" id="8261093">,</span>&nbsp;<span class="ident" id="8261095">r</span>&nbsp;<span class="op" id="8261097">:=</span>&nbsp;<span class="keyword" id="8261100">range</span>&nbsp;<span class="ident" id="8261106"><a href="/index/suffixarray/suffixarray_test.go.html#8260016">res</a></span>&nbsp;<span class="op" id="8261110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261115">e</span>&nbsp;<span class="op" id="8261117">:=</span>&nbsp;<span class="ident" id="8261120"><a href="/index/suffixarray/suffixarray_test.go.html#8260046">exp</a></span><span class="op" id="8261123">[</span><span class="ident" id="8261124"><a href="/index/suffixarray/suffixarray_test.go.html#8261092">i</a></span><span class="op" id="8261125">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261130">if</span>&nbsp;<span class="ident" id="8261133"><a href="/index/suffixarray/suffixarray_test.go.html#8261095">r</a></span><span class="op" id="8261134">[</span><span class="num" id="8261135">0</span><span class="op" id="8261136">]</span>&nbsp;<span class="op" id="8261138">!=</span>&nbsp;<span class="ident" id="8261141"><a href="/index/suffixarray/suffixarray_test.go.html#8261115">e</a></span><span class="op" id="8261142">[</span><span class="num" id="8261143">0</span><span class="op" id="8261144">]</span>&nbsp;<span class="op" id="8261146">||</span>&nbsp;<span class="ident" id="8261149"><a href="/index/suffixarray/suffixarray_test.go.html#8261095">r</a></span><span class="op" id="8261150">[</span><span class="num" id="8261151">1</span><span class="op" id="8261152">]</span>&nbsp;<span class="op" id="8261154">!=</span>&nbsp;<span class="ident" id="8261157"><a href="/index/suffixarray/suffixarray_test.go.html#8261115">e</a></span><span class="op" id="8261158">[</span><span class="num" id="8261159">1</span><span class="op" id="8261160">]</span>&nbsp;<span class="op" id="8261162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261168"><a href="/index/suffixarray/suffixarray_test.go.html#8259949">t</a></span><span class="op" id="8261169">.</span><span class="ident" id="8261170">Errorf</span><span class="op" id="8261176">(</span><span class="string" id="8261177">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q,&nbsp;result&nbsp;%d:&nbsp;expected&nbsp;match&nbsp;[%d,&nbsp;%d];&nbsp;got&nbsp;[%d,&nbsp;%d]&#34;</span><span class="op" id="8261253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261260"><a href="/index/suffixarray/suffixarray_test.go.html#8259963">tc</a></span><span class="op" id="8261262">.</span><span class="ident" id="8261263">name</span><span class="op" id="8261267">,</span>&nbsp;<span class="ident" id="8261269"><a href="/index/suffixarray/suffixarray_test.go.html#8259987">rx</a></span><span class="op" id="8261271">,</span>&nbsp;<span class="ident" id="8261273"><a href="/index/suffixarray/suffixarray_test.go.html#8261092">i</a></span><span class="op" id="8261274">,</span>&nbsp;<span class="ident" id="8261276"><a href="/index/suffixarray/suffixarray_test.go.html#8261115">e</a></span><span class="op" id="8261277">[</span><span class="num" id="8261278">0</span><span class="op" id="8261279">]</span><span class="op" id="8261280">,</span>&nbsp;<span class="ident" id="8261282"><a href="/index/suffixarray/suffixarray_test.go.html#8261115">e</a></span><span class="op" id="8261283">[</span><span class="num" id="8261284">1</span><span class="op" id="8261285">]</span><span class="op" id="8261286">,</span>&nbsp;<span class="ident" id="8261288"><a href="/index/suffixarray/suffixarray_test.go.html#8261095">r</a></span><span class="op" id="8261289">[</span><span class="num" id="8261290">0</span><span class="op" id="8261291">]</span><span class="op" id="8261292">,</span>&nbsp;<span class="ident" id="8261294"><a href="/index/suffixarray/suffixarray_test.go.html#8261095">r</a></span><span class="op" id="8261295">[</span><span class="num" id="8261296">1</span><span class="op" id="8261297">]</span><span class="op" id="8261298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261307">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261310">}</span><br>
<span class="lineno"></span><span class="op" id="8261312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8261315">func</span>&nbsp;<span class="ident" id="8261320">testLookups</span><span class="op" id="8261331">(</span><span class="ident" id="8261332">t</span>&nbsp;<span class="op" id="8261334">*</span><span class="ident" id="8261335"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8261342">.</span><span class="ident" id="8261343">T</span><span class="op" id="8261344">,</span>&nbsp;<span class="ident" id="8261346">tc</span>&nbsp;<span class="op" id="8261349">*</span><span class="ident" id="8261350"><a href="/index/suffixarray/suffixarray_test.go.html#8257005">testCase</a></span><span class="op" id="8261358">,</span>&nbsp;<span class="ident" id="8261360">x</span>&nbsp;<span class="op" id="8261362">*</span><span class="ident" id="8261363"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><span class="op" id="8261368">,</span>&nbsp;<span class="ident" id="8261370">n</span>&nbsp;<span class="builtintype" id="8261372">int</span><span class="op" id="8261375">)</span>&nbsp;<span class="op" id="8261377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261380">for</span>&nbsp;<span class="ident" id="8261384">_</span><span class="op" id="8261385">,</span>&nbsp;<span class="ident" id="8261387">pat</span>&nbsp;<span class="op" id="8261391">:=</span>&nbsp;<span class="keyword" id="8261394">range</span>&nbsp;<span class="ident" id="8261400"><a href="/index/suffixarray/suffixarray_test.go.html#8261346">tc</a></span><span class="op" id="8261402">.</span><span class="ident" id="8261403">patterns</span>&nbsp;<span class="op" id="8261412">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261416"><a href="/index/suffixarray/suffixarray_test.go.html#8258524">testLookup</a></span><span class="op" id="8261426">(</span><span class="ident" id="8261427"><a href="/index/suffixarray/suffixarray_test.go.html#8261332">t</a></span><span class="op" id="8261428">,</span>&nbsp;<span class="ident" id="8261430"><a href="/index/suffixarray/suffixarray_test.go.html#8261346">tc</a></span><span class="op" id="8261432">,</span>&nbsp;<span class="ident" id="8261434"><a href="/index/suffixarray/suffixarray_test.go.html#8261360">x</a></span><span class="op" id="8261435">,</span>&nbsp;<span class="ident" id="8261437"><a href="/index/suffixarray/suffixarray_test.go.html#8261387">pat</a></span><span class="op" id="8261440">,</span>&nbsp;<span class="ident" id="8261442"><a href="/index/suffixarray/suffixarray_test.go.html#8261370">n</a></span><span class="op" id="8261443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261447">if</span>&nbsp;<span class="ident" id="8261450">rx</span><span class="op" id="8261452">,</span>&nbsp;<span class="ident" id="8261454">err</span>&nbsp;<span class="op" id="8261458">:=</span>&nbsp;<span class="ident" id="8261461"><a href="/index/suffixarray/suffixarray_test.go.html#8256958">regexp</a></span><span class="op" id="8261467">.</span><span class="ident" id="8261468">Compile</span><span class="op" id="8261475">(</span><span class="ident" id="8261476"><a href="/index/suffixarray/suffixarray_test.go.html#8261387">pat</a></span><span class="op" id="8261479">)</span><span class="op" id="8261480">;</span>&nbsp;<span class="ident" id="8261482"><a href="/index/suffixarray/suffixarray_test.go.html#8261454">err</a></span>&nbsp;<span class="op" id="8261486">==</span>&nbsp;<span class="ident" id="8261489">nil</span>&nbsp;<span class="op" id="8261493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261498"><a href="/index/suffixarray/suffixarray_test.go.html#8259932">testFindAllIndex</a></span><span class="op" id="8261514">(</span><span class="ident" id="8261515"><a href="/index/suffixarray/suffixarray_test.go.html#8261332">t</a></span><span class="op" id="8261516">,</span>&nbsp;<span class="ident" id="8261518"><a href="/index/suffixarray/suffixarray_test.go.html#8261346">tc</a></span><span class="op" id="8261520">,</span>&nbsp;<span class="ident" id="8261522"><a href="/index/suffixarray/suffixarray_test.go.html#8261360">x</a></span><span class="op" id="8261523">,</span>&nbsp;<span class="ident" id="8261525"><a href="/index/suffixarray/suffixarray_test.go.html#8261450">rx</a></span><span class="op" id="8261527">,</span>&nbsp;<span class="ident" id="8261529"><a href="/index/suffixarray/suffixarray_test.go.html#8261370">n</a></span><span class="op" id="8261530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261537">}</span><br>
<span class="lineno">205</span><span class="op" id="8261539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8261542">//&nbsp;index&nbsp;is&nbsp;used&nbsp;to&nbsp;hide&nbsp;the&nbsp;sort.Interface</span><br>
<span class="lineno"></span><span class="keyword" id="8261586">type</span>&nbsp;<span class="ident" id="8261591">index</span>&nbsp;<span class="ident" id="8261597"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="8261604">func</span>&nbsp;<span class="op" id="8261609">(</span><span class="ident" id="8261610">x</span>&nbsp;<span class="op" id="8261612">*</span><span class="ident" id="8261613"><a href="/index/suffixarray/suffixarray_test.go.html#8261591">index</a></span><span class="op" id="8261618">)</span>&nbsp;<span class="ident" id="8261620">Len</span><span class="op" id="8261623">(</span><span class="op" id="8261624">)</span>&nbsp;<span class="builtintype" id="8261626">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8261640">{</span>&nbsp;<span class="keyword" id="8261642">return</span>&nbsp;<span class="builtinfunc" id="8261649">len</span><span class="op" id="8261652">(</span><span class="ident" id="8261653"><a href="/index/suffixarray/suffixarray_test.go.html#8261610">x</a></span><span class="op" id="8261654">.</span><span class="ident" id="8261655">sa</span><span class="op" id="8261657">)</span>&nbsp;<span class="op" id="8261659">}</span><br>
<span class="lineno"></span><span class="keyword" id="8261661">func</span>&nbsp;<span class="op" id="8261666">(</span><span class="ident" id="8261667">x</span>&nbsp;<span class="op" id="8261669">*</span><span class="ident" id="8261670"><a href="/index/suffixarray/suffixarray_test.go.html#8261591">index</a></span><span class="op" id="8261675">)</span>&nbsp;<span class="ident" id="8261677">Less</span><span class="op" id="8261681">(</span><span class="ident" id="8261682">i</span><span class="op" id="8261683">,</span>&nbsp;<span class="ident" id="8261685">j</span>&nbsp;<span class="builtintype" id="8261687">int</span><span class="op" id="8261690">)</span>&nbsp;<span class="builtintype" id="8261692">bool</span>&nbsp;<span class="op" id="8261697">{</span>&nbsp;<span class="keyword" id="8261699">return</span>&nbsp;<span class="ident" id="8261706"><a href="/index/suffixarray/suffixarray_test.go.html#8256936">bytes</a></span><span class="op" id="8261711">.</span><span class="ident" id="8261712">Compare</span><span class="op" id="8261719">(</span><span class="ident" id="8261720"><a href="/index/suffixarray/suffixarray_test.go.html#8261667">x</a></span><span class="op" id="8261721">.</span><span class="ident" id="8261722">at</span><span class="op" id="8261724">(</span><span class="ident" id="8261725"><a href="/index/suffixarray/suffixarray_test.go.html#8261682">i</a></span><span class="op" id="8261726">)</span><span class="op" id="8261727">,</span>&nbsp;<span class="ident" id="8261729"><a href="/index/suffixarray/suffixarray_test.go.html#8261667">x</a></span><span class="op" id="8261730">.</span><span class="ident" id="8261731">at</span><span class="op" id="8261733">(</span><span class="ident" id="8261734"><a href="/index/suffixarray/suffixarray_test.go.html#8261685">j</a></span><span class="op" id="8261735">)</span><span class="op" id="8261736">)</span>&nbsp;<span class="op" id="8261738">&lt;</span>&nbsp;<span class="num" id="8261740">0</span>&nbsp;<span class="op" id="8261742">}</span><br>
<span class="lineno"></span><span class="keyword" id="8261744">func</span>&nbsp;<span class="op" id="8261749">(</span><span class="ident" id="8261750">x</span>&nbsp;<span class="op" id="8261752">*</span><span class="ident" id="8261753"><a href="/index/suffixarray/suffixarray_test.go.html#8261591">index</a></span><span class="op" id="8261758">)</span>&nbsp;<span class="ident" id="8261760">Swap</span><span class="op" id="8261764">(</span><span class="ident" id="8261765">i</span><span class="op" id="8261766">,</span>&nbsp;<span class="ident" id="8261768">j</span>&nbsp;<span class="builtintype" id="8261770">int</span><span class="op" id="8261773">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8261780">{</span>&nbsp;<span class="ident" id="8261782"><a href="/index/suffixarray/suffixarray_test.go.html#8261750">x</a></span><span class="op" id="8261783">.</span><span class="ident" id="8261784">sa</span><span class="op" id="8261786">[</span><span class="ident" id="8261787"><a href="/index/suffixarray/suffixarray_test.go.html#8261765">i</a></span><span class="op" id="8261788">]</span><span class="op" id="8261789">,</span>&nbsp;<span class="ident" id="8261791"><a href="/index/suffixarray/suffixarray_test.go.html#8261750">x</a></span><span class="op" id="8261792">.</span><span class="ident" id="8261793">sa</span><span class="op" id="8261795">[</span><span class="ident" id="8261796"><a href="/index/suffixarray/suffixarray_test.go.html#8261768">j</a></span><span class="op" id="8261797">]</span>&nbsp;<span class="op" id="8261799">=</span>&nbsp;<span class="ident" id="8261801"><a href="/index/suffixarray/suffixarray_test.go.html#8261750">x</a></span><span class="op" id="8261802">.</span><span class="ident" id="8261803">sa</span><span class="op" id="8261805">[</span><span class="ident" id="8261806"><a href="/index/suffixarray/suffixarray_test.go.html#8261768">j</a></span><span class="op" id="8261807">]</span><span class="op" id="8261808">,</span>&nbsp;<span class="ident" id="8261810"><a href="/index/suffixarray/suffixarray_test.go.html#8261750">x</a></span><span class="op" id="8261811">.</span><span class="ident" id="8261812">sa</span><span class="op" id="8261814">[</span><span class="ident" id="8261815"><a href="/index/suffixarray/suffixarray_test.go.html#8261765">i</a></span><span class="op" id="8261816">]</span>&nbsp;<span class="op" id="8261818">}</span><br>
<span class="lineno"></span><span class="keyword" id="8261820">func</span>&nbsp;<span class="op" id="8261825">(</span><span class="ident" id="8261826">a</span>&nbsp;<span class="op" id="8261828">*</span><span class="ident" id="8261829"><a href="/index/suffixarray/suffixarray_test.go.html#8261591">index</a></span><span class="op" id="8261834">)</span>&nbsp;<span class="ident" id="8261836">at</span><span class="op" id="8261838">(</span><span class="ident" id="8261839">i</span>&nbsp;<span class="builtintype" id="8261841">int</span><span class="op" id="8261844">)</span>&nbsp;<span class="op" id="8261846">[</span><span class="op" id="8261847">]</span><span class="builtintype" id="8261848">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8261856">{</span>&nbsp;<span class="keyword" id="8261858">return</span>&nbsp;<span class="ident" id="8261865"><a href="/index/suffixarray/suffixarray_test.go.html#8261826">a</a></span><span class="op" id="8261866">.</span><span class="ident" id="8261867">data</span><span class="op" id="8261871">[</span><span class="ident" id="8261872"><a href="/index/suffixarray/suffixarray_test.go.html#8261826">a</a></span><span class="op" id="8261873">.</span><span class="ident" id="8261874">sa</span><span class="op" id="8261876">[</span><span class="ident" id="8261877"><a href="/index/suffixarray/suffixarray_test.go.html#8261839">i</a></span><span class="op" id="8261878">]</span><span class="op" id="8261879">:</span><span class="op" id="8261880">]</span>&nbsp;<span class="op" id="8261882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="8261885">func</span>&nbsp;<span class="ident" id="8261890">testConstruction</span><span class="op" id="8261906">(</span><span class="ident" id="8261907">t</span>&nbsp;<span class="op" id="8261909">*</span><span class="ident" id="8261910"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8261917">.</span><span class="ident" id="8261918">T</span><span class="op" id="8261919">,</span>&nbsp;<span class="ident" id="8261921">tc</span>&nbsp;<span class="op" id="8261924">*</span><span class="ident" id="8261925"><a href="/index/suffixarray/suffixarray_test.go.html#8257005">testCase</a></span><span class="op" id="8261933">,</span>&nbsp;<span class="ident" id="8261935">x</span>&nbsp;<span class="op" id="8261937">*</span><span class="ident" id="8261938"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><span class="op" id="8261943">)</span>&nbsp;<span class="op" id="8261945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261948">if</span>&nbsp;<span class="op" id="8261951">!</span><span class="ident" id="8261952"><a href="/index/suffixarray/suffixarray_test.go.html#8256968">sort</a></span><span class="op" id="8261956">.</span><span class="ident" id="8261957">IsSorted</span><span class="op" id="8261965">(</span><span class="op" id="8261966">(</span><span class="op" id="8261967">*</span><span class="ident" id="8261968"><a href="/index/suffixarray/suffixarray_test.go.html#8261591">index</a></span><span class="op" id="8261973">)</span><span class="op" id="8261974">(</span><span class="ident" id="8261975"><a href="/index/suffixarray/suffixarray_test.go.html#8261935">x</a></span><span class="op" id="8261976">)</span><span class="op" id="8261977">)</span>&nbsp;<span class="op" id="8261979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261983"><a href="/index/suffixarray/suffixarray_test.go.html#8261907">t</a></span><span class="op" id="8261984">.</span><span class="ident" id="8261985">Errorf</span><span class="op" id="8261991">(</span><span class="string" id="8261992">&#34;failed&nbsp;testConstruction&nbsp;%s&#34;</span><span class="op" id="8262020">,</span>&nbsp;<span class="ident" id="8262022"><a href="/index/suffixarray/suffixarray_test.go.html#8261921">tc</a></span><span class="op" id="8262024">.</span><span class="ident" id="8262025">name</span><span class="op" id="8262029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262032">}</span><br>
<span class="lineno"></span><span class="op" id="8262034">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="8262037">func</span>&nbsp;<span class="ident" id="8262042">equal</span><span class="op" id="8262047">(</span><span class="ident" id="8262048">x</span><span class="op" id="8262049">,</span>&nbsp;<span class="ident" id="8262051">y</span>&nbsp;<span class="op" id="8262053">*</span><span class="ident" id="8262054"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><span class="op" id="8262059">)</span>&nbsp;<span class="builtintype" id="8262061">bool</span>&nbsp;<span class="op" id="8262066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262069">if</span>&nbsp;<span class="op" id="8262072">!</span><span class="ident" id="8262073"><a href="/index/suffixarray/suffixarray_test.go.html#8256936">bytes</a></span><span class="op" id="8262078">.</span><span class="ident" id="8262079">Equal</span><span class="op" id="8262084">(</span><span class="ident" id="8262085"><a href="/index/suffixarray/suffixarray_test.go.html#8262048">x</a></span><span class="op" id="8262086">.</span><span class="ident" id="8262087">data</span><span class="op" id="8262091">,</span>&nbsp;<span class="ident" id="8262093"><a href="/index/suffixarray/suffixarray_test.go.html#8262051">y</a></span><span class="op" id="8262094">.</span><span class="ident" id="8262095">data</span><span class="op" id="8262099">)</span>&nbsp;<span class="op" id="8262101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262105">return</span>&nbsp;<span class="builtintype" id="8262112">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262119">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262122">for</span>&nbsp;<span class="ident" id="8262126">i</span><span class="op" id="8262127">,</span>&nbsp;<span class="ident" id="8262129">j</span>&nbsp;<span class="op" id="8262131">:=</span>&nbsp;<span class="keyword" id="8262134">range</span>&nbsp;<span class="ident" id="8262140"><a href="/index/suffixarray/suffixarray_test.go.html#8262048">x</a></span><span class="op" id="8262141">.</span><span class="ident" id="8262142">sa</span>&nbsp;<span class="op" id="8262145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262149">if</span>&nbsp;<span class="ident" id="8262152"><a href="/index/suffixarray/suffixarray_test.go.html#8262129">j</a></span>&nbsp;<span class="op" id="8262154">!=</span>&nbsp;<span class="ident" id="8262157"><a href="/index/suffixarray/suffixarray_test.go.html#8262051">y</a></span><span class="op" id="8262158">.</span><span class="ident" id="8262159">sa</span><span class="op" id="8262161">[</span><span class="ident" id="8262162"><a href="/index/suffixarray/suffixarray_test.go.html#8262126">i</a></span><span class="op" id="8262163">]</span>&nbsp;<span class="op" id="8262165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262170">return</span>&nbsp;<span class="builtintype" id="8262177">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262188">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262191">return</span>&nbsp;<span class="builtintype" id="8262198">true</span><br>
<span class="lineno"></span><span class="op" id="8262203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8262206">//&nbsp;returns&nbsp;the&nbsp;serialized&nbsp;index&nbsp;size</span><br>
<span class="lineno"></span><span class="keyword" id="8262243">func</span>&nbsp;<span class="ident" id="8262248">testSaveRestore</span><span class="op" id="8262263">(</span><span class="ident" id="8262264">t</span>&nbsp;<span class="op" id="8262266">*</span><span class="ident" id="8262267"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8262274">.</span><span class="ident" id="8262275">T</span><span class="op" id="8262276">,</span>&nbsp;<span class="ident" id="8262278">tc</span>&nbsp;<span class="op" id="8262281">*</span><span class="ident" id="8262282"><a href="/index/suffixarray/suffixarray_test.go.html#8257005">testCase</a></span><span class="op" id="8262290">,</span>&nbsp;<span class="ident" id="8262292">x</span>&nbsp;<span class="op" id="8262294">*</span><span class="ident" id="8262295"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><span class="op" id="8262300">)</span>&nbsp;<span class="builtintype" id="8262302">int</span>&nbsp;<span class="op" id="8262306">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262309">var</span>&nbsp;<span class="ident" id="8262313">buf</span>&nbsp;<span class="ident" id="8262317"><a href="/index/suffixarray/suffixarray_test.go.html#8256936">bytes</a></span><span class="op" id="8262322">.</span><span class="ident" id="8262323">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262331">if</span>&nbsp;<span class="ident" id="8262334">err</span>&nbsp;<span class="op" id="8262338">:=</span>&nbsp;<span class="ident" id="8262341"><a href="/index/suffixarray/suffixarray_test.go.html#8262292">x</a></span><span class="op" id="8262342">.</span><span class="ident" id="8262343">Write</span><span class="op" id="8262348">(</span><span class="op" id="8262349">&amp;</span><span class="ident" id="8262350"><a href="/index/suffixarray/suffixarray_test.go.html#8262313">buf</a></span><span class="op" id="8262353">)</span><span class="op" id="8262354">;</span>&nbsp;<span class="ident" id="8262356"><a href="/index/suffixarray/suffixarray_test.go.html#8262334">err</a></span>&nbsp;<span class="op" id="8262360">!=</span>&nbsp;<span class="ident" id="8262363">nil</span>&nbsp;<span class="op" id="8262367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262371"><a href="/index/suffixarray/suffixarray_test.go.html#8262264">t</a></span><span class="op" id="8262372">.</span><span class="ident" id="8262373">Errorf</span><span class="op" id="8262379">(</span><span class="string" id="8262380">&#34;failed&nbsp;writing&nbsp;index&nbsp;%s&nbsp;(%s)&#34;</span><span class="op" id="8262410">,</span>&nbsp;<span class="ident" id="8262412"><a href="/index/suffixarray/suffixarray_test.go.html#8262278">tc</a></span><span class="op" id="8262414">.</span><span class="ident" id="8262415">name</span><span class="op" id="8262419">,</span>&nbsp;<span class="ident" id="8262421"><a href="/index/suffixarray/suffixarray_test.go.html#8262334">err</a></span><span class="op" id="8262424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262430">size</span>&nbsp;<span class="op" id="8262435">:=</span>&nbsp;<span class="ident" id="8262438"><a href="/index/suffixarray/suffixarray_test.go.html#8262313">buf</a></span><span class="op" id="8262441">.</span><span class="ident" id="8262442">Len</span><span class="op" id="8262445">(</span><span class="op" id="8262446">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262449">var</span>&nbsp;<span class="ident" id="8262453">y</span>&nbsp;<span class="ident" id="8262455"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262462">if</span>&nbsp;<span class="ident" id="8262465">err</span>&nbsp;<span class="op" id="8262469">:=</span>&nbsp;<span class="ident" id="8262472"><a href="/index/suffixarray/suffixarray_test.go.html#8262453">y</a></span><span class="op" id="8262473">.</span><span class="ident" id="8262474">Read</span><span class="op" id="8262478">(</span><span class="op" id="8262479">&amp;</span><span class="ident" id="8262480"><a href="/index/suffixarray/suffixarray_test.go.html#8262313">buf</a></span><span class="op" id="8262483">)</span><span class="op" id="8262484">;</span>&nbsp;<span class="ident" id="8262486"><a href="/index/suffixarray/suffixarray_test.go.html#8262465">err</a></span>&nbsp;<span class="op" id="8262490">!=</span>&nbsp;<span class="ident" id="8262493">nil</span>&nbsp;<span class="op" id="8262497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262501"><a href="/index/suffixarray/suffixarray_test.go.html#8262264">t</a></span><span class="op" id="8262502">.</span><span class="ident" id="8262503">Errorf</span><span class="op" id="8262509">(</span><span class="string" id="8262510">&#34;failed&nbsp;reading&nbsp;index&nbsp;%s&nbsp;(%s)&#34;</span><span class="op" id="8262540">,</span>&nbsp;<span class="ident" id="8262542"><a href="/index/suffixarray/suffixarray_test.go.html#8262278">tc</a></span><span class="op" id="8262544">.</span><span class="ident" id="8262545">name</span><span class="op" id="8262549">,</span>&nbsp;<span class="ident" id="8262551"><a href="/index/suffixarray/suffixarray_test.go.html#8262465">err</a></span><span class="op" id="8262554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262560">if</span>&nbsp;<span class="op" id="8262563">!</span><span class="ident" id="8262564"><a href="/index/suffixarray/suffixarray_test.go.html#8262042">equal</a></span><span class="op" id="8262569">(</span><span class="ident" id="8262570"><a href="/index/suffixarray/suffixarray_test.go.html#8262292">x</a></span><span class="op" id="8262571">,</span>&nbsp;<span class="op" id="8262573">&amp;</span><span class="ident" id="8262574"><a href="/index/suffixarray/suffixarray_test.go.html#8262453">y</a></span><span class="op" id="8262575">)</span>&nbsp;<span class="op" id="8262577">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262581"><a href="/index/suffixarray/suffixarray_test.go.html#8262264">t</a></span><span class="op" id="8262582">.</span><span class="ident" id="8262583">Errorf</span><span class="op" id="8262589">(</span><span class="string" id="8262590">&#34;restored&nbsp;index&nbsp;doesn&#39;t&nbsp;match&nbsp;saved&nbsp;index&nbsp;%s&#34;</span><span class="op" id="8262635">,</span>&nbsp;<span class="ident" id="8262637"><a href="/index/suffixarray/suffixarray_test.go.html#8262278">tc</a></span><span class="op" id="8262639">.</span><span class="ident" id="8262640">name</span><span class="op" id="8262644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262650">return</span>&nbsp;<span class="ident" id="8262657"><a href="/index/suffixarray/suffixarray_test.go.html#8262430">size</a></span><br>
<span class="lineno"></span><span class="op" id="8262662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="8262665">func</span>&nbsp;<span class="ident" id="8262670">TestIndex</span><span class="op" id="8262679">(</span><span class="ident" id="8262680">t</span>&nbsp;<span class="op" id="8262682">*</span><span class="ident" id="8262683"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8262690">.</span><span class="ident" id="8262691">T</span><span class="op" id="8262692">)</span>&nbsp;<span class="op" id="8262694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262697">for</span>&nbsp;<span class="ident" id="8262701">_</span><span class="op" id="8262702">,</span>&nbsp;<span class="ident" id="8262704">tc</span>&nbsp;<span class="op" id="8262707">:=</span>&nbsp;<span class="keyword" id="8262710">range</span>&nbsp;<span class="ident" id="8262716"><a href="/index/suffixarray/suffixarray_test.go.html#8257149">testCases</a></span>&nbsp;<span class="op" id="8262726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262730">x</span>&nbsp;<span class="op" id="8262732">:=</span>&nbsp;<span class="ident" id="8262735"><a href="/index/suffixarray/suffixarray.go.html#5367812">New</a></span><span class="op" id="8262738">(</span><span class="op" id="8262739">[</span><span class="op" id="8262740">]</span><span class="builtintype" id="8262741">byte</span><span class="op" id="8262745">(</span><span class="ident" id="8262746"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262748">.</span><span class="ident" id="8262749">source</span><span class="op" id="8262755">)</span><span class="op" id="8262756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262760"><a href="/index/suffixarray/suffixarray_test.go.html#8261890">testConstruction</a></span><span class="op" id="8262776">(</span><span class="ident" id="8262777"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262778">,</span>&nbsp;<span class="op" id="8262780">&amp;</span><span class="ident" id="8262781"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262783">,</span>&nbsp;<span class="ident" id="8262785"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262790"><a href="/index/suffixarray/suffixarray_test.go.html#8262248">testSaveRestore</a></span><span class="op" id="8262805">(</span><span class="ident" id="8262806"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262807">,</span>&nbsp;<span class="op" id="8262809">&amp;</span><span class="ident" id="8262810"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262812">,</span>&nbsp;<span class="ident" id="8262814"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262815">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262819"><a href="/index/suffixarray/suffixarray_test.go.html#8261320">testLookups</a></span><span class="op" id="8262830">(</span><span class="ident" id="8262831"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262832">,</span>&nbsp;<span class="op" id="8262834">&amp;</span><span class="ident" id="8262835"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262837">,</span>&nbsp;<span class="ident" id="8262839"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262840">,</span>&nbsp;<span class="num" id="8262842">0</span><span class="op" id="8262843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262847"><a href="/index/suffixarray/suffixarray_test.go.html#8261320">testLookups</a></span><span class="op" id="8262858">(</span><span class="ident" id="8262859"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262860">,</span>&nbsp;<span class="op" id="8262862">&amp;</span><span class="ident" id="8262863"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262865">,</span>&nbsp;<span class="ident" id="8262867"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262868">,</span>&nbsp;<span class="num" id="8262870">1</span><span class="op" id="8262871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262875"><a href="/index/suffixarray/suffixarray_test.go.html#8261320">testLookups</a></span><span class="op" id="8262886">(</span><span class="ident" id="8262887"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262888">,</span>&nbsp;<span class="op" id="8262890">&amp;</span><span class="ident" id="8262891"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262893">,</span>&nbsp;<span class="ident" id="8262895"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262896">,</span>&nbsp;<span class="num" id="8262898">10</span><span class="op" id="8262900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262904"><a href="/index/suffixarray/suffixarray_test.go.html#8261320">testLookups</a></span><span class="op" id="8262915">(</span><span class="ident" id="8262916"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262917">,</span>&nbsp;<span class="op" id="8262919">&amp;</span><span class="ident" id="8262920"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262922">,</span>&nbsp;<span class="ident" id="8262924"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262925">,</span>&nbsp;<span class="num" id="8262927">2e9</span><span class="op" id="8262930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262934"><a href="/index/suffixarray/suffixarray_test.go.html#8261320">testLookups</a></span><span class="op" id="8262945">(</span><span class="ident" id="8262946"><a href="/index/suffixarray/suffixarray_test.go.html#8262680">t</a></span><span class="op" id="8262947">,</span>&nbsp;<span class="op" id="8262949">&amp;</span><span class="ident" id="8262950"><a href="/index/suffixarray/suffixarray_test.go.html#8262704">tc</a></span><span class="op" id="8262952">,</span>&nbsp;<span class="ident" id="8262954"><a href="/index/suffixarray/suffixarray_test.go.html#8262730">x</a></span><span class="op" id="8262955">,</span>&nbsp;<span class="op" id="8262957">-</span><span class="num" id="8262958">1</span><span class="op" id="8262959">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262962">}</span><br>
<span class="lineno"></span><span class="op" id="8262964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8262967">//&nbsp;Of&nbsp;all&nbsp;possible&nbsp;inputs,&nbsp;the&nbsp;random&nbsp;bytes&nbsp;have&nbsp;the&nbsp;least&nbsp;amount&nbsp;of&nbsp;substring</span><br>
<span class="lineno"></span><span class="comment" id="8263046">//&nbsp;repetition,&nbsp;and&nbsp;the&nbsp;repeated&nbsp;bytes&nbsp;have&nbsp;the&nbsp;most.&nbsp;For&nbsp;most&nbsp;algorithms,</span><br>
<span class="lineno">265</span><span class="comment" id="8263120">//&nbsp;the&nbsp;running&nbsp;time&nbsp;of&nbsp;every&nbsp;input&nbsp;will&nbsp;be&nbsp;between&nbsp;these&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="8263182">func</span>&nbsp;<span class="ident" id="8263187">benchmarkNew</span><span class="op" id="8263199">(</span><span class="ident" id="8263200">b</span>&nbsp;<span class="op" id="8263202">*</span><span class="ident" id="8263203"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8263210">.</span><span class="ident" id="8263211">B</span><span class="op" id="8263212">,</span>&nbsp;<span class="ident" id="8263214">random</span>&nbsp;<span class="builtintype" id="8263221">bool</span><span class="op" id="8263225">)</span>&nbsp;<span class="op" id="8263227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263230"><a href="/index/suffixarray/suffixarray_test.go.html#8263200">b</a></span><span class="op" id="8263231">.</span><span class="ident" id="8263232">StopTimer</span><span class="op" id="8263241">(</span><span class="op" id="8263242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263245">data</span>&nbsp;<span class="op" id="8263250">:=</span>&nbsp;<span class="builtinfunc" id="8263253">make</span><span class="op" id="8263257">(</span><span class="op" id="8263258">[</span><span class="op" id="8263259">]</span><span class="builtintype" id="8263260">byte</span><span class="op" id="8263264">,</span>&nbsp;<span class="num" id="8263266">1e6</span><span class="op" id="8263269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263272">if</span>&nbsp;<span class="ident" id="8263275"><a href="/index/suffixarray/suffixarray_test.go.html#8263214">random</a></span>&nbsp;<span class="op" id="8263282">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263286">for</span>&nbsp;<span class="ident" id="8263290">i</span>&nbsp;<span class="op" id="8263292">:=</span>&nbsp;<span class="keyword" id="8263295">range</span>&nbsp;<span class="ident" id="8263301"><a href="/index/suffixarray/suffixarray_test.go.html#8263245">data</a></span>&nbsp;<span class="op" id="8263306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263311"><a href="/index/suffixarray/suffixarray_test.go.html#8263245">data</a></span><span class="op" id="8263315">[</span><span class="ident" id="8263316"><a href="/index/suffixarray/suffixarray_test.go.html#8263290">i</a></span><span class="op" id="8263317">]</span>&nbsp;<span class="op" id="8263319">=</span>&nbsp;<span class="builtintype" id="8263321">byte</span><span class="op" id="8263325">(</span><span class="ident" id="8263326"><a href="/index/suffixarray/suffixarray_test.go.html#8256945">rand</a></span><span class="op" id="8263330">.</span><span class="ident" id="8263331">Intn</span><span class="op" id="8263335">(</span><span class="num" id="8263336">256</span><span class="op" id="8263339">)</span><span class="op" id="8263340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263350"><a href="/index/suffixarray/suffixarray_test.go.html#8263200">b</a></span><span class="op" id="8263351">.</span><span class="ident" id="8263352">StartTimer</span><span class="op" id="8263362">(</span><span class="op" id="8263363">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263366">for</span>&nbsp;<span class="ident" id="8263370">i</span>&nbsp;<span class="op" id="8263372">:=</span>&nbsp;<span class="num" id="8263375">0</span><span class="op" id="8263376">;</span>&nbsp;<span class="ident" id="8263378"><a href="/index/suffixarray/suffixarray_test.go.html#8263370">i</a></span>&nbsp;<span class="op" id="8263380">&lt;</span>&nbsp;<span class="ident" id="8263382"><a href="/index/suffixarray/suffixarray_test.go.html#8263200">b</a></span><span class="op" id="8263383">.</span><span class="ident" id="8263384">N</span><span class="op" id="8263385">;</span>&nbsp;<span class="ident" id="8263387"><a href="/index/suffixarray/suffixarray_test.go.html#8263370">i</a></span><span class="op" id="8263388">++</span>&nbsp;<span class="op" id="8263391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263395"><a href="/index/suffixarray/suffixarray.go.html#5367812">New</a></span><span class="op" id="8263398">(</span><span class="ident" id="8263399"><a href="/index/suffixarray/suffixarray_test.go.html#8263245">data</a></span><span class="op" id="8263403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263406">}</span><br>
<span class="lineno"></span><span class="op" id="8263408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="8263411">func</span>&nbsp;<span class="ident" id="8263416">BenchmarkNewIndexRandom</span><span class="op" id="8263439">(</span><span class="ident" id="8263440">b</span>&nbsp;<span class="op" id="8263442">*</span><span class="ident" id="8263443"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8263450">.</span><span class="ident" id="8263451">B</span><span class="op" id="8263452">)</span>&nbsp;<span class="op" id="8263454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263457"><a href="/index/suffixarray/suffixarray_test.go.html#8263187">benchmarkNew</a></span><span class="op" id="8263469">(</span><span class="ident" id="8263470"><a href="/index/suffixarray/suffixarray_test.go.html#8263440">b</a></span><span class="op" id="8263471">,</span>&nbsp;<span class="builtintype" id="8263473">true</span><span class="op" id="8263477">)</span><br>
<span class="lineno"></span><span class="op" id="8263479">}</span><br>
<span class="lineno"></span><span class="keyword" id="8263481">func</span>&nbsp;<span class="ident" id="8263486">BenchmarkNewIndexRepeat</span><span class="op" id="8263509">(</span><span class="ident" id="8263510">b</span>&nbsp;<span class="op" id="8263512">*</span><span class="ident" id="8263513"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8263520">.</span><span class="ident" id="8263521">B</span><span class="op" id="8263522">)</span>&nbsp;<span class="op" id="8263524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263527"><a href="/index/suffixarray/suffixarray_test.go.html#8263187">benchmarkNew</a></span><span class="op" id="8263539">(</span><span class="ident" id="8263540"><a href="/index/suffixarray/suffixarray_test.go.html#8263510">b</a></span><span class="op" id="8263541">,</span>&nbsp;<span class="builtintype" id="8263543">false</span><span class="op" id="8263548">)</span><br>
<span class="lineno">285</span><span class="op" id="8263550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8263553">func</span>&nbsp;<span class="ident" id="8263558">BenchmarkSaveRestore</span><span class="op" id="8263578">(</span><span class="ident" id="8263579">b</span>&nbsp;<span class="op" id="8263581">*</span><span class="ident" id="8263582"><a href="/index/suffixarray/suffixarray_test.go.html#8256987">testing</a></span><span class="op" id="8263589">.</span><span class="ident" id="8263590">B</span><span class="op" id="8263591">)</span>&nbsp;<span class="op" id="8263593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263596"><a href="/index/suffixarray/suffixarray_test.go.html#8263579">b</a></span><span class="op" id="8263597">.</span><span class="ident" id="8263598">StopTimer</span><span class="op" id="8263607">(</span><span class="op" id="8263608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263611">r</span>&nbsp;<span class="op" id="8263613">:=</span>&nbsp;<span class="ident" id="8263616"><a href="/index/suffixarray/suffixarray_test.go.html#8256945">rand</a></span><span class="op" id="8263620">.</span><span class="ident" id="8263621">New</span><span class="op" id="8263624">(</span><span class="ident" id="8263625"><a href="/index/suffixarray/suffixarray_test.go.html#8256945">rand</a></span><span class="op" id="8263629">.</span><span class="ident" id="8263630">NewSource</span><span class="op" id="8263639">(</span><span class="num" id="8263640">0x5a77a1</span><span class="op" id="8263648">)</span><span class="op" id="8263649">)</span>&nbsp;<span class="comment" id="8263651">//&nbsp;guarantee&nbsp;always&nbsp;same&nbsp;sequence</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263686">data</span>&nbsp;<span class="op" id="8263691">:=</span>&nbsp;<span class="builtinfunc" id="8263694">make</span><span class="op" id="8263698">(</span><span class="op" id="8263699">[</span><span class="op" id="8263700">]</span><span class="builtintype" id="8263701">byte</span><span class="op" id="8263705">,</span>&nbsp;<span class="num" id="8263707">1</span><span class="op" id="8263708">&lt;&lt;</span><span class="num" id="8263710">20</span><span class="op" id="8263712">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8263726">//&nbsp;1MB&nbsp;of&nbsp;data&nbsp;to&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263751">for</span>&nbsp;<span class="ident" id="8263755">i</span>&nbsp;<span class="op" id="8263757">:=</span>&nbsp;<span class="keyword" id="8263760">range</span>&nbsp;<span class="ident" id="8263766"><a href="/index/suffixarray/suffixarray_test.go.html#8263686">data</a></span>&nbsp;<span class="op" id="8263771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263775"><a href="/index/suffixarray/suffixarray_test.go.html#8263686">data</a></span><span class="op" id="8263779">[</span><span class="ident" id="8263780"><a href="/index/suffixarray/suffixarray_test.go.html#8263755">i</a></span><span class="op" id="8263781">]</span>&nbsp;<span class="op" id="8263783">=</span>&nbsp;<span class="builtintype" id="8263785">byte</span><span class="op" id="8263789">(</span><span class="ident" id="8263790"><a href="/index/suffixarray/suffixarray_test.go.html#8263611">r</a></span><span class="op" id="8263791">.</span><span class="ident" id="8263792">Intn</span><span class="op" id="8263796">(</span><span class="num" id="8263797">256</span><span class="op" id="8263800">)</span><span class="op" id="8263801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8263804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263807">x</span>&nbsp;<span class="op" id="8263809">:=</span>&nbsp;<span class="ident" id="8263812"><a href="/index/suffixarray/suffixarray.go.html#5367812">New</a></span><span class="op" id="8263815">(</span><span class="ident" id="8263816"><a href="/index/suffixarray/suffixarray_test.go.html#8263686">data</a></span><span class="op" id="8263820">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263823">size</span>&nbsp;<span class="op" id="8263828">:=</span>&nbsp;<span class="ident" id="8263831"><a href="/index/suffixarray/suffixarray_test.go.html#8262248">testSaveRestore</a></span><span class="op" id="8263846">(</span><span class="ident" id="8263847">nil</span><span class="op" id="8263850">,</span>&nbsp;<span class="ident" id="8263852">nil</span><span class="op" id="8263855">,</span>&nbsp;<span class="ident" id="8263857"><a href="/index/suffixarray/suffixarray_test.go.html#8263807">x</a></span><span class="op" id="8263858">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8263866">//&nbsp;verify&nbsp;correctness</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263889">buf</span>&nbsp;<span class="op" id="8263893">:=</span>&nbsp;<span class="ident" id="8263896"><a href="/index/suffixarray/suffixarray_test.go.html#8256936">bytes</a></span><span class="op" id="8263901">.</span><span class="ident" id="8263902">NewBuffer</span><span class="op" id="8263911">(</span><span class="builtinfunc" id="8263912">make</span><span class="op" id="8263916">(</span><span class="op" id="8263917">[</span><span class="op" id="8263918">]</span><span class="builtintype" id="8263919">byte</span><span class="op" id="8263923">,</span>&nbsp;<span class="ident" id="8263925"><a href="/index/suffixarray/suffixarray_test.go.html#8263823">size</a></span><span class="op" id="8263929">)</span><span class="op" id="8263930">)</span>&nbsp;<span class="comment" id="8263932">//&nbsp;avoid&nbsp;growing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263950"><a href="/index/suffixarray/suffixarray_test.go.html#8263579">b</a></span><span class="op" id="8263951">.</span><span class="ident" id="8263952">SetBytes</span><span class="op" id="8263960">(</span><span class="ident" id="8263961">int64</span><span class="op" id="8263966">(</span><span class="ident" id="8263967"><a href="/index/suffixarray/suffixarray_test.go.html#8263823">size</a></span><span class="op" id="8263971">)</span><span class="op" id="8263972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8263975"><a href="/index/suffixarray/suffixarray_test.go.html#8263579">b</a></span><span class="op" id="8263976">.</span><span class="ident" id="8263977">StartTimer</span><span class="op" id="8263987">(</span><span class="op" id="8263988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8263991">for</span>&nbsp;<span class="ident" id="8263995">i</span>&nbsp;<span class="op" id="8263997">:=</span>&nbsp;<span class="num" id="8264000">0</span><span class="op" id="8264001">;</span>&nbsp;<span class="ident" id="8264003"><a href="/index/suffixarray/suffixarray_test.go.html#8263995">i</a></span>&nbsp;<span class="op" id="8264005">&lt;</span>&nbsp;<span class="ident" id="8264007"><a href="/index/suffixarray/suffixarray_test.go.html#8263579">b</a></span><span class="op" id="8264008">.</span><span class="ident" id="8264009">N</span><span class="op" id="8264010">;</span>&nbsp;<span class="ident" id="8264012"><a href="/index/suffixarray/suffixarray_test.go.html#8263995">i</a></span><span class="op" id="8264013">++</span>&nbsp;<span class="op" id="8264016">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264020"><a href="/index/suffixarray/suffixarray_test.go.html#8263807">x</a></span><span class="op" id="8264021">.</span><span class="ident" id="8264022">Write</span><span class="op" id="8264027">(</span><span class="ident" id="8264028"><a href="/index/suffixarray/suffixarray_test.go.html#8263889">buf</a></span><span class="op" id="8264031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8264035">var</span>&nbsp;<span class="ident" id="8264039">y</span>&nbsp;<span class="ident" id="8264041"><a href="/index/suffixarray/suffixarray.go.html#5367623">Index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264049"><a href="/index/suffixarray/suffixarray_test.go.html#8264039">y</a></span><span class="op" id="8264050">.</span><span class="ident" id="8264051">Read</span><span class="op" id="8264055">(</span><span class="ident" id="8264056"><a href="/index/suffixarray/suffixarray_test.go.html#8263889">buf</a></span><span class="op" id="8264059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264062">}</span><br>
<span class="lineno"></span><span class="op" id="8264064">}</span>
</div>
</body>
</html>
