<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6082880">package</span>&nbsp;<span class="ident" id="6082888">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6082895">import</span>&nbsp;<span class="op" id="6082902">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6082905">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6082914">&#34;math&#34;</span><br>
<span class="lineno"></span><span class="op" id="6082921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6082924">//&nbsp;Var&nbsp;reprsents&nbsp;a&nbsp;variable&nbsp;object</span><br>
<span class="lineno"></span><span class="keyword" id="6082959">type</span>&nbsp;<span class="ident" id="6082964">Var</span>&nbsp;<span class="keyword" id="6082968">struct</span>&nbsp;<span class="op" id="6082975">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082978">align</span>&nbsp;<span class="builtintype" id="6082984">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082992">buf</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6082998">*</span><span class="ident" id="6082999"><a href="/lonnie.io/e8vm/link8/var.go.html#6082905">bytes</a></span><span class="op" id="6083004">.</span><span class="ident" id="6083005">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083014">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6083021">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083029">prePad</span>&nbsp;<span class="builtintype" id="6083036">uint32</span><br>
<span class="lineno">15</span><span class="op" id="6083043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083046">//&nbsp;NewVar&nbsp;creates&nbsp;a&nbsp;new&nbsp;relocatable&nbsp;data&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6083096">func</span>&nbsp;<span class="ident" id="6083101">NewVar</span><span class="op" id="6083107">(</span><span class="ident" id="6083108">align</span>&nbsp;<span class="builtintype" id="6083114">uint32</span><span class="op" id="6083120">)</span>&nbsp;<span class="op" id="6083122">*</span><span class="ident" id="6083123"><a href="/lonnie.io/e8vm/link8/var.go.html#6082964">Var</a></span>&nbsp;<span class="op" id="6083127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083130">ret</span>&nbsp;<span class="op" id="6083134">:=</span>&nbsp;<span class="builtinfunc" id="6083137">new</span><span class="op" id="6083140">(</span><span class="ident" id="6083141"><a href="/lonnie.io/e8vm/link8/var.go.html#6082964">Var</a></span><span class="op" id="6083144">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083148">if</span>&nbsp;<span class="ident" id="6083151"><a href="/lonnie.io/e8vm/link8/var.go.html#6083108">align</a></span>&nbsp;<span class="op" id="6083157">==</span>&nbsp;<span class="num" id="6083160">0</span>&nbsp;<span class="op" id="6083162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083166"><a href="/lonnie.io/e8vm/link8/var.go.html#6083108">align</a></span>&nbsp;<span class="op" id="6083172">=</span>&nbsp;<span class="num" id="6083174">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083177">}</span>&nbsp;<span class="keyword" id="6083179">else</span>&nbsp;<span class="keyword" id="6083184">if</span>&nbsp;<span class="ident" id="6083187"><a href="/lonnie.io/e8vm/link8/var.go.html#6083108">align</a></span>&nbsp;<span class="op" id="6083193">!=</span>&nbsp;<span class="num" id="6083196">1</span>&nbsp;<span class="op" id="6083198">&amp;&amp;</span>&nbsp;<span class="ident" id="6083201"><a href="/lonnie.io/e8vm/link8/var.go.html#6083108">align</a></span>&nbsp;<span class="op" id="6083207">!=</span>&nbsp;<span class="num" id="6083210">4</span>&nbsp;<span class="op" id="6083212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6083216">panic</span><span class="op" id="6083221">(</span><span class="string" id="6083222">&#34;invalid&nbsp;align&#34;</span><span class="op" id="6083237">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083244"><a href="/lonnie.io/e8vm/link8/var.go.html#6083130">ret</a></span><span class="op" id="6083247">.</span><span class="ident" id="6083248">align</span>&nbsp;<span class="op" id="6083254">=</span>&nbsp;<span class="ident" id="6083256"><a href="/lonnie.io/e8vm/link8/var.go.html#6083108">align</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083263"><a href="/lonnie.io/e8vm/link8/var.go.html#6083130">ret</a></span><span class="op" id="6083266">.</span><span class="ident" id="6083267">buf</span>&nbsp;<span class="op" id="6083271">=</span>&nbsp;<span class="builtinfunc" id="6083273">new</span><span class="op" id="6083276">(</span><span class="ident" id="6083277"><a href="/lonnie.io/e8vm/link8/var.go.html#6082905">bytes</a></span><span class="op" id="6083282">.</span><span class="ident" id="6083283">Buffer</span><span class="op" id="6083289">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083293">return</span>&nbsp;<span class="ident" id="6083300"><a href="/lonnie.io/e8vm/link8/var.go.html#6083130">ret</a></span><br>
<span class="lineno"></span><span class="op" id="6083304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083307">//&nbsp;Write&nbsp;appends&nbsp;bytes&nbsp;to&nbsp;this&nbsp;data&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6083352">func</span>&nbsp;<span class="op" id="6083357">(</span><span class="ident" id="6083358">v</span>&nbsp;<span class="op" id="6083360">*</span><span class="ident" id="6083361"><a href="/lonnie.io/e8vm/link8/var.go.html#6082964">Var</a></span><span class="op" id="6083364">)</span>&nbsp;<span class="ident" id="6083366">Write</span><span class="op" id="6083371">(</span><span class="ident" id="6083372">buf</span>&nbsp;<span class="op" id="6083376">[</span><span class="op" id="6083377">]</span><span class="builtintype" id="6083378">byte</span><span class="op" id="6083382">)</span>&nbsp;<span class="op" id="6083384">(</span><span class="builtintype" id="6083385">int</span><span class="op" id="6083388">,</span>&nbsp;<span class="builtintype" id="6083390">error</span><span class="op" id="6083395">)</span>&nbsp;<span class="op" id="6083397">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083400">return</span>&nbsp;<span class="ident" id="6083407"><a href="/lonnie.io/e8vm/link8/var.go.html#6083358">v</a></span><span class="op" id="6083408">.</span><span class="ident" id="6083409">buf</span><span class="op" id="6083412">.</span><span class="ident" id="6083413">Write</span><span class="op" id="6083418">(</span><span class="ident" id="6083419"><a href="/lonnie.io/e8vm/link8/var.go.html#6083372">buf</a></span><span class="op" id="6083422">)</span><br>
<span class="lineno"></span><span class="op" id="6083424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083427">//&nbsp;Pad&nbsp;pads&nbsp;n&nbsp;bytes&nbsp;into&nbsp;this&nbsp;data&nbsp;section</span><br>
<span class="lineno"></span><span class="keyword" id="6083470">func</span>&nbsp;<span class="op" id="6083475">(</span><span class="ident" id="6083476">v</span>&nbsp;<span class="op" id="6083478">*</span><span class="ident" id="6083479"><a href="/lonnie.io/e8vm/link8/var.go.html#6082964">Var</a></span><span class="op" id="6083482">)</span>&nbsp;<span class="ident" id="6083484">Pad</span><span class="op" id="6083487">(</span><span class="ident" id="6083488">n</span>&nbsp;<span class="builtintype" id="6083490">uint32</span><span class="op" id="6083496">)</span>&nbsp;<span class="op" id="6083498">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083501"><a href="/lonnie.io/e8vm/link8/var.go.html#6083476">v</a></span><span class="op" id="6083502">.</span><span class="ident" id="6083503">buf</span><span class="op" id="6083506">.</span><span class="ident" id="6083507">Write</span><span class="op" id="6083512">(</span><span class="builtinfunc" id="6083513">make</span><span class="op" id="6083517">(</span><span class="op" id="6083518">[</span><span class="op" id="6083519">]</span><span class="builtintype" id="6083520">byte</span><span class="op" id="6083524">,</span>&nbsp;<span class="ident" id="6083526"><a href="/lonnie.io/e8vm/link8/var.go.html#6083488">n</a></span><span class="op" id="6083527">)</span><span class="op" id="6083528">)</span><br>
<span class="lineno"></span><span class="op" id="6083530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083533">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;current&nbsp;size&nbsp;of&nbsp;the&nbsp;section</span><br>
<span class="lineno"></span><span class="keyword" id="6083581">func</span>&nbsp;<span class="op" id="6083586">(</span><span class="ident" id="6083587">v</span>&nbsp;<span class="op" id="6083589">*</span><span class="ident" id="6083590"><a href="/lonnie.io/e8vm/link8/var.go.html#6082964">Var</a></span><span class="op" id="6083593">)</span>&nbsp;<span class="ident" id="6083595">Size</span><span class="op" id="6083599">(</span><span class="op" id="6083600">)</span>&nbsp;<span class="builtintype" id="6083602">uint32</span>&nbsp;<span class="op" id="6083609">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083612">return</span>&nbsp;<span class="builtintype" id="6083619">uint32</span><span class="op" id="6083625">(</span><span class="ident" id="6083626"><a href="/lonnie.io/e8vm/link8/var.go.html#6083587">v</a></span><span class="op" id="6083627">.</span><span class="ident" id="6083628">buf</span><span class="op" id="6083631">.</span><span class="ident" id="6083632">Len</span><span class="op" id="6083635">(</span><span class="op" id="6083636">)</span><span class="op" id="6083637">)</span><br>
<span class="lineno"></span><span class="op" id="6083639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083642">//&nbsp;TooLarge&nbsp;checks&nbsp;if&nbsp;the&nbsp;size&nbsp;is&nbsp;larger&nbsp;than&nbsp;2GB</span><br>
<span class="lineno"></span><span class="keyword" id="6083692">func</span>&nbsp;<span class="op" id="6083697">(</span><span class="ident" id="6083698">v</span>&nbsp;<span class="op" id="6083700">*</span><span class="ident" id="6083701"><a href="/lonnie.io/e8vm/link8/var.go.html#6082964">Var</a></span><span class="op" id="6083704">)</span>&nbsp;<span class="ident" id="6083706">TooLarge</span><span class="op" id="6083714">(</span><span class="op" id="6083715">)</span>&nbsp;<span class="builtintype" id="6083717">bool</span>&nbsp;<span class="op" id="6083722">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083725">return</span>&nbsp;<span class="ident" id="6083732"><a href="/lonnie.io/e8vm/link8/var.go.html#6083698">v</a></span><span class="op" id="6083733">.</span><span class="ident" id="6083734">buf</span><span class="op" id="6083737">.</span><span class="ident" id="6083738">Len</span><span class="op" id="6083741">(</span><span class="op" id="6083742">)</span>&nbsp;<span class="op" id="6083744">&gt;</span>&nbsp;<span class="ident" id="6083746"><a href="/lonnie.io/e8vm/link8/var.go.html#6082914">math</a></span><span class="op" id="6083750">.</span><span class="ident" id="6083751">MaxInt32</span><br>
<span class="lineno"></span><span class="op" id="6083760">}</span>
</div>
</body>
</html>
