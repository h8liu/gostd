<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8426131">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8426186">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8426240">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8426291">package</span>&nbsp;<span class="ident" id="8426299">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8426304">import</span>&nbsp;<span class="op" id="8426311">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8426314">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8426324">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8426331">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8426338">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8426349">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8426360">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8426370">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8426373">type</span>&nbsp;<span class="ident" id="8426378">shutdownCodec</span>&nbsp;<span class="keyword" id="8426392">struct</span>&nbsp;<span class="op" id="8426399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426402">responded</span>&nbsp;<span class="keyword" id="8426412">chan</span>&nbsp;<span class="builtintype" id="8426417">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426422">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8426432">bool</span><br>
<span class="lineno"></span><span class="op" id="8426437">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8426440">func</span>&nbsp;<span class="op" id="8426445">(</span><span class="ident" id="8426446">c</span>&nbsp;<span class="op" id="8426448">*</span><span class="ident" id="8426449">shutdownCodec</span><span class="op" id="8426462">)</span>&nbsp;<span class="ident" id="8426464">WriteRequest</span><span class="op" id="8426476">(</span><span class="op" id="8426477">*</span><span class="ident" id="8426478">Request</span><span class="op" id="8426485">,</span>&nbsp;<span class="keyword" id="8426487">interface</span><span class="op" id="8426496">{</span><span class="op" id="8426497">}</span><span class="op" id="8426498">)</span>&nbsp;<span class="builtintype" id="8426500">error</span>&nbsp;<span class="op" id="8426506">{</span>&nbsp;<span class="keyword" id="8426508">return</span>&nbsp;<span class="ident" id="8426515">nil</span>&nbsp;<span class="op" id="8426519">}</span><br>
<span class="lineno"></span><span class="keyword" id="8426521">func</span>&nbsp;<span class="op" id="8426526">(</span><span class="ident" id="8426527">c</span>&nbsp;<span class="op" id="8426529">*</span><span class="ident" id="8426530">shutdownCodec</span><span class="op" id="8426543">)</span>&nbsp;<span class="ident" id="8426545">ReadResponseBody</span><span class="op" id="8426561">(</span><span class="keyword" id="8426562">interface</span><span class="op" id="8426571">{</span><span class="op" id="8426572">}</span><span class="op" id="8426573">)</span>&nbsp;<span class="builtintype" id="8426575">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8426587">{</span>&nbsp;<span class="keyword" id="8426589">return</span>&nbsp;<span class="ident" id="8426596">nil</span>&nbsp;<span class="op" id="8426600">}</span><br>
<span class="lineno"></span><span class="keyword" id="8426602">func</span>&nbsp;<span class="op" id="8426607">(</span><span class="ident" id="8426608">c</span>&nbsp;<span class="op" id="8426610">*</span><span class="ident" id="8426611">shutdownCodec</span><span class="op" id="8426624">)</span>&nbsp;<span class="ident" id="8426626">ReadResponseHeader</span><span class="op" id="8426644">(</span><span class="op" id="8426645">*</span><span class="ident" id="8426646">Response</span><span class="op" id="8426654">)</span>&nbsp;<span class="builtintype" id="8426656">error</span>&nbsp;<span class="op" id="8426662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426665">c</span><span class="op" id="8426666">.</span><span class="ident" id="8426667">responded</span>&nbsp;<span class="op" id="8426677">&lt;-</span>&nbsp;<span class="num" id="8426680">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8426683">return</span>&nbsp;<span class="ident" id="8426690">errors</span><span class="op" id="8426696">.</span><span class="ident" id="8426697">New</span><span class="op" id="8426700">(</span><span class="string" id="8426701">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="8426735">)</span><br>
<span class="lineno"></span><span class="op" id="8426737">}</span><br>
<span class="lineno"></span><span class="keyword" id="8426739">func</span>&nbsp;<span class="op" id="8426744">(</span><span class="ident" id="8426745">c</span>&nbsp;<span class="op" id="8426747">*</span><span class="ident" id="8426748">shutdownCodec</span><span class="op" id="8426761">)</span>&nbsp;<span class="ident" id="8426763">Close</span><span class="op" id="8426768">(</span><span class="op" id="8426769">)</span>&nbsp;<span class="builtintype" id="8426771">error</span>&nbsp;<span class="op" id="8426777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426780">c</span><span class="op" id="8426781">.</span><span class="ident" id="8426782">closed</span>&nbsp;<span class="op" id="8426789">=</span>&nbsp;<span class="builtintype" id="8426791">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8426797">return</span>&nbsp;<span class="ident" id="8426804">nil</span><br>
<span class="lineno">30</span><span class="op" id="8426808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8426811">func</span>&nbsp;<span class="ident" id="8426816">TestCloseCodec</span><span class="op" id="8426830">(</span><span class="ident" id="8426831">t</span>&nbsp;<span class="op" id="8426833">*</span><span class="ident" id="8426834">testing</span><span class="op" id="8426841">.</span><span class="ident" id="8426842">T</span><span class="op" id="8426843">)</span>&nbsp;<span class="op" id="8426845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426848">codec</span>&nbsp;<span class="op" id="8426854">:=</span>&nbsp;<span class="op" id="8426857">&amp;</span><span class="ident" id="8426858">shutdownCodec</span><span class="op" id="8426871">{</span><span class="ident" id="8426872">responded</span><span class="op" id="8426881">:</span>&nbsp;<span class="builtinfunc" id="8426883">make</span><span class="op" id="8426887">(</span><span class="keyword" id="8426888">chan</span>&nbsp;<span class="builtintype" id="8426893">int</span><span class="op" id="8426896">)</span><span class="op" id="8426897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426900">client</span>&nbsp;<span class="op" id="8426907">:=</span>&nbsp;<span class="ident" id="8426910">NewClientWithCodec</span><span class="op" id="8426928">(</span><span class="ident" id="8426929">codec</span><span class="op" id="8426934">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8426937">&lt;-</span><span class="ident" id="8426939">codec</span><span class="op" id="8426944">.</span><span class="ident" id="8426945">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426956">client</span><span class="op" id="8426962">.</span><span class="ident" id="8426963">Close</span><span class="op" id="8426968">(</span><span class="op" id="8426969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8426972">if</span>&nbsp;<span class="op" id="8426975">!</span><span class="ident" id="8426976">codec</span><span class="op" id="8426981">.</span><span class="ident" id="8426982">closed</span>&nbsp;<span class="op" id="8426989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8426993">t</span><span class="op" id="8426994">.</span><span class="ident" id="8426995">Error</span><span class="op" id="8427000">(</span><span class="string" id="8427001">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="8427035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427038">}</span><br>
<span class="lineno">40</span><span class="op" id="8427040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8427043">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8427109">type</span>&nbsp;<span class="ident" id="8427114">R</span>&nbsp;<span class="keyword" id="8427116">struct</span>&nbsp;<span class="op" id="8427123">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427126">msg</span>&nbsp;<span class="op" id="8427130">[</span><span class="op" id="8427131">]</span><span class="builtintype" id="8427132">byte</span>&nbsp;<span class="comment" id="8427137">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="8427183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8427186">type</span>&nbsp;<span class="ident" id="8427191">S</span>&nbsp;<span class="keyword" id="8427193">struct</span><span class="op" id="8427199">{</span><span class="op" id="8427200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8427203">func</span>&nbsp;<span class="op" id="8427208">(</span><span class="ident" id="8427209">s</span>&nbsp;<span class="op" id="8427211">*</span><span class="ident" id="8427212">S</span><span class="op" id="8427213">)</span>&nbsp;<span class="ident" id="8427215">Recv</span><span class="op" id="8427219">(</span><span class="ident" id="8427220">nul</span>&nbsp;<span class="op" id="8427224">*</span><span class="keyword" id="8427225">struct</span><span class="op" id="8427231">{</span><span class="op" id="8427232">}</span><span class="op" id="8427233">,</span>&nbsp;<span class="ident" id="8427235">reply</span>&nbsp;<span class="op" id="8427241">*</span><span class="ident" id="8427242">R</span><span class="op" id="8427243">)</span>&nbsp;<span class="builtintype" id="8427245">error</span>&nbsp;<span class="op" id="8427251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427254">*</span><span class="ident" id="8427255">reply</span>&nbsp;<span class="op" id="8427261">=</span>&nbsp;<span class="ident" id="8427263">R</span><span class="op" id="8427264">{</span><span class="op" id="8427265">[</span><span class="op" id="8427266">]</span><span class="builtintype" id="8427267">byte</span><span class="op" id="8427271">(</span><span class="string" id="8427272">&#34;foo&#34;</span><span class="op" id="8427277">)</span><span class="op" id="8427278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427281">return</span>&nbsp;<span class="ident" id="8427288">nil</span><br>
<span class="lineno"></span><span class="op" id="8427292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="8427295">func</span>&nbsp;<span class="ident" id="8427300">TestGobError</span><span class="op" id="8427312">(</span><span class="ident" id="8427313">t</span>&nbsp;<span class="op" id="8427315">*</span><span class="ident" id="8427316">testing</span><span class="op" id="8427323">.</span><span class="ident" id="8427324">T</span><span class="op" id="8427325">)</span>&nbsp;<span class="op" id="8427327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427330">if</span>&nbsp;<span class="ident" id="8427333">runtime</span><span class="op" id="8427340">.</span><span class="ident" id="8427341">GOOS</span>&nbsp;<span class="op" id="8427346">==</span>&nbsp;<span class="string" id="8427349">&#34;plan9&#34;</span>&nbsp;<span class="op" id="8427357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427361">t</span><span class="op" id="8427362">.</span><span class="ident" id="8427363">Skip</span><span class="op" id="8427367">(</span><span class="string" id="8427368">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="8427417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427423">defer</span>&nbsp;<span class="keyword" id="8427429">func</span><span class="op" id="8427433">(</span><span class="op" id="8427434">)</span>&nbsp;<span class="op" id="8427436">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427440">err</span>&nbsp;<span class="op" id="8427444">:=</span>&nbsp;<span class="builtinfunc" id="8427447">recover</span><span class="op" id="8427454">(</span><span class="op" id="8427455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427459">if</span>&nbsp;<span class="ident" id="8427462">err</span>&nbsp;<span class="op" id="8427466">==</span>&nbsp;<span class="ident" id="8427469">nil</span>&nbsp;<span class="op" id="8427473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427478">t</span><span class="op" id="8427479">.</span><span class="ident" id="8427480">Fatal</span><span class="op" id="8427485">(</span><span class="string" id="8427486">&#34;no&nbsp;error&#34;</span><span class="op" id="8427496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427504">if</span>&nbsp;<span class="op" id="8427507">!</span><span class="ident" id="8427508">strings</span><span class="op" id="8427515">.</span><span class="ident" id="8427516">Contains</span><span class="op" id="8427524">(</span><span class="string" id="8427525">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="8427543">,</span>&nbsp;<span class="ident" id="8427545">err</span><span class="op" id="8427548">.</span><span class="op" id="8427549">(</span><span class="builtintype" id="8427550">error</span><span class="op" id="8427555">)</span><span class="op" id="8427556">.</span><span class="ident" id="8427557">Error</span><span class="op" id="8427562">(</span><span class="op" id="8427563">)</span><span class="op" id="8427564">)</span>&nbsp;<span class="op" id="8427566">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427571">t</span><span class="op" id="8427572">.</span><span class="ident" id="8427573">Fatal</span><span class="op" id="8427578">(</span><span class="string" id="8427579">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="8427613">,</span>&nbsp;<span class="ident" id="8427615">err</span><span class="op" id="8427618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427625">}</span><span class="op" id="8427626">(</span><span class="op" id="8427627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427630">Register</span><span class="op" id="8427638">(</span><span class="builtinfunc" id="8427639">new</span><span class="op" id="8427642">(</span><span class="ident" id="8427643">S</span><span class="op" id="8427644">)</span><span class="op" id="8427645">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427649">listen</span><span class="op" id="8427655">,</span>&nbsp;<span class="ident" id="8427657">err</span>&nbsp;<span class="op" id="8427661">:=</span>&nbsp;<span class="ident" id="8427664">net</span><span class="op" id="8427667">.</span><span class="ident" id="8427668">Listen</span><span class="op" id="8427674">(</span><span class="string" id="8427675">&#34;tcp&#34;</span><span class="op" id="8427680">,</span>&nbsp;<span class="string" id="8427682">&#34;127.0.0.1:0&#34;</span><span class="op" id="8427695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427698">if</span>&nbsp;<span class="ident" id="8427701">err</span>&nbsp;<span class="op" id="8427705">!=</span>&nbsp;<span class="ident" id="8427708">nil</span>&nbsp;<span class="op" id="8427712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8427716">panic</span><span class="op" id="8427721">(</span><span class="ident" id="8427722">err</span><span class="op" id="8427725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427731">go</span>&nbsp;<span class="ident" id="8427734">Accept</span><span class="op" id="8427740">(</span><span class="ident" id="8427741">listen</span><span class="op" id="8427747">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427751">client</span><span class="op" id="8427757">,</span>&nbsp;<span class="ident" id="8427759">err</span>&nbsp;<span class="op" id="8427763">:=</span>&nbsp;<span class="ident" id="8427766">Dial</span><span class="op" id="8427770">(</span><span class="string" id="8427771">&#34;tcp&#34;</span><span class="op" id="8427776">,</span>&nbsp;<span class="ident" id="8427778">listen</span><span class="op" id="8427784">.</span><span class="ident" id="8427785">Addr</span><span class="op" id="8427789">(</span><span class="op" id="8427790">)</span><span class="op" id="8427791">.</span><span class="ident" id="8427792">String</span><span class="op" id="8427798">(</span><span class="op" id="8427799">)</span><span class="op" id="8427800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427803">if</span>&nbsp;<span class="ident" id="8427806">err</span>&nbsp;<span class="op" id="8427810">!=</span>&nbsp;<span class="ident" id="8427813">nil</span>&nbsp;<span class="op" id="8427817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8427821">panic</span><span class="op" id="8427826">(</span><span class="ident" id="8427827">err</span><span class="op" id="8427830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427833">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427837">var</span>&nbsp;<span class="ident" id="8427841">reply</span>&nbsp;<span class="ident" id="8427847">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427854">err</span>&nbsp;<span class="op" id="8427858">=</span>&nbsp;<span class="ident" id="8427860">client</span><span class="op" id="8427866">.</span><span class="ident" id="8427867">Call</span><span class="op" id="8427871">(</span><span class="string" id="8427872">&#34;S.Recv&#34;</span><span class="op" id="8427880">,</span>&nbsp;<span class="op" id="8427882">&amp;</span><span class="keyword" id="8427883">struct</span><span class="op" id="8427889">{</span><span class="op" id="8427890">}</span><span class="op" id="8427891">{</span><span class="op" id="8427892">}</span><span class="op" id="8427893">,</span>&nbsp;<span class="op" id="8427895">&amp;</span><span class="ident" id="8427896">reply</span><span class="op" id="8427901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8427904">if</span>&nbsp;<span class="ident" id="8427907">err</span>&nbsp;<span class="op" id="8427911">!=</span>&nbsp;<span class="ident" id="8427914">nil</span>&nbsp;<span class="op" id="8427918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8427922">panic</span><span class="op" id="8427927">(</span><span class="ident" id="8427928">err</span><span class="op" id="8427931">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8427934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427938">fmt</span><span class="op" id="8427941">.</span><span class="ident" id="8427942">Printf</span><span class="op" id="8427948">(</span><span class="string" id="8427949">&#34;%#v\n&#34;</span><span class="op" id="8427956">,</span>&nbsp;<span class="ident" id="8427958">reply</span><span class="op" id="8427963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427966">client</span><span class="op" id="8427972">.</span><span class="ident" id="8427973">Close</span><span class="op" id="8427978">(</span><span class="op" id="8427979">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8427983">listen</span><span class="op" id="8427989">.</span><span class="ident" id="8427990">Close</span><span class="op" id="8427995">(</span><span class="op" id="8427996">)</span><br>
<span class="lineno"></span><span class="op" id="8427998">}</span>
</div>
</body>
</html>
