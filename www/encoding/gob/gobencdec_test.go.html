<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7355048">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7355103">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7355157">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7355208">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355275">package</span>&nbsp;<span class="ident" id="7355283">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355288">import</span>&nbsp;<span class="op" id="7355295">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355298">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355307">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355317">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355324">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355330">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355337">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355348">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7355359">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7355366">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7355369">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355429">type</span>&nbsp;<span class="ident" id="7355434">ByteStruct</span>&nbsp;<span class="keyword" id="7355445">struct</span>&nbsp;<span class="op" id="7355452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355455">a</span>&nbsp;<span class="builtintype" id="7355457">byte</span>&nbsp;<span class="comment" id="7355462">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7355487">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7355490">type</span>&nbsp;<span class="ident" id="7355495">StringStruct</span>&nbsp;<span class="keyword" id="7355508">struct</span>&nbsp;<span class="op" id="7355515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355518">s</span>&nbsp;<span class="builtintype" id="7355520">string</span>&nbsp;<span class="comment" id="7355527">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7355552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7355555">type</span>&nbsp;<span class="ident" id="7355560">ArrayStruct</span>&nbsp;<span class="keyword" id="7355572">struct</span>&nbsp;<span class="op" id="7355579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355582">a</span>&nbsp;<span class="op" id="7355584">[</span><span class="num" id="7355585">8192</span><span class="op" id="7355589">]</span><span class="builtintype" id="7355590">byte</span>&nbsp;<span class="comment" id="7355595">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7355620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355623">type</span>&nbsp;<span class="ident" id="7355628">Gobber</span>&nbsp;<span class="builtintype" id="7355635">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7355640">type</span>&nbsp;<span class="ident" id="7355645">ValueGobber</span>&nbsp;<span class="builtintype" id="7355657">string</span>&nbsp;<span class="comment" id="7355664">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355714">type</span>&nbsp;<span class="ident" id="7355719">BinaryGobber</span>&nbsp;<span class="builtintype" id="7355732">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7355737">type</span>&nbsp;<span class="ident" id="7355742">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="7355760">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355768">type</span>&nbsp;<span class="ident" id="7355773">TextGobber</span>&nbsp;<span class="builtintype" id="7355784">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355789">type</span>&nbsp;<span class="ident" id="7355794">TextValueGobber</span>&nbsp;<span class="builtintype" id="7355810">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="7355818">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355843">func</span>&nbsp;<span class="op" id="7355848">(</span><span class="ident" id="7355849">g</span>&nbsp;<span class="op" id="7355851">*</span><span class="ident" id="7355852">ByteStruct</span><span class="op" id="7355862">)</span>&nbsp;<span class="ident" id="7355864">GobEncode</span><span class="op" id="7355873">(</span><span class="op" id="7355874">)</span>&nbsp;<span class="op" id="7355876">(</span><span class="op" id="7355877">[</span><span class="op" id="7355878">]</span><span class="builtintype" id="7355879">byte</span><span class="op" id="7355883">,</span>&nbsp;<span class="builtintype" id="7355885">error</span><span class="op" id="7355890">)</span>&nbsp;<span class="op" id="7355892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355895">b</span>&nbsp;<span class="op" id="7355897">:=</span>&nbsp;<span class="builtinfunc" id="7355900">make</span><span class="op" id="7355904">(</span><span class="op" id="7355905">[</span><span class="op" id="7355906">]</span><span class="builtintype" id="7355907">byte</span><span class="op" id="7355911">,</span>&nbsp;<span class="num" id="7355913">3</span><span class="op" id="7355914">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355917">b</span><span class="op" id="7355918">[</span><span class="num" id="7355919">0</span><span class="op" id="7355920">]</span>&nbsp;<span class="op" id="7355922">=</span>&nbsp;<span class="ident" id="7355924">g</span><span class="op" id="7355925">.</span><span class="ident" id="7355926">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355929">b</span><span class="op" id="7355930">[</span><span class="num" id="7355931">1</span><span class="op" id="7355932">]</span>&nbsp;<span class="op" id="7355934">=</span>&nbsp;<span class="ident" id="7355936">g</span><span class="op" id="7355937">.</span><span class="ident" id="7355938">a</span>&nbsp;<span class="op" id="7355940">+</span>&nbsp;<span class="num" id="7355942">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355945">b</span><span class="op" id="7355946">[</span><span class="num" id="7355947">2</span><span class="op" id="7355948">]</span>&nbsp;<span class="op" id="7355950">=</span>&nbsp;<span class="ident" id="7355952">g</span><span class="op" id="7355953">.</span><span class="ident" id="7355954">a</span>&nbsp;<span class="op" id="7355956">+</span>&nbsp;<span class="num" id="7355958">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355961">return</span>&nbsp;<span class="ident" id="7355968">b</span><span class="op" id="7355969">,</span>&nbsp;<span class="ident" id="7355971">nil</span><br>
<span class="lineno"></span><span class="op" id="7355975">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7355978">func</span>&nbsp;<span class="op" id="7355983">(</span><span class="ident" id="7355984">g</span>&nbsp;<span class="op" id="7355986">*</span><span class="ident" id="7355987">ByteStruct</span><span class="op" id="7355997">)</span>&nbsp;<span class="ident" id="7355999">GobDecode</span><span class="op" id="7356008">(</span><span class="ident" id="7356009">data</span>&nbsp;<span class="op" id="7356014">[</span><span class="op" id="7356015">]</span><span class="builtintype" id="7356016">byte</span><span class="op" id="7356020">)</span>&nbsp;<span class="builtintype" id="7356022">error</span>&nbsp;<span class="op" id="7356028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356031">if</span>&nbsp;<span class="ident" id="7356034">g</span>&nbsp;<span class="op" id="7356036">==</span>&nbsp;<span class="ident" id="7356039">nil</span>&nbsp;<span class="op" id="7356043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356047">return</span>&nbsp;<span class="ident" id="7356054">errors</span><span class="op" id="7356060">.</span><span class="ident" id="7356061">New</span><span class="op" id="7356064">(</span><span class="string" id="7356065">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="7356079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356082">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7356085">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356123">if</span>&nbsp;<span class="builtinfunc" id="7356126">len</span><span class="op" id="7356129">(</span><span class="ident" id="7356130">data</span><span class="op" id="7356134">)</span>&nbsp;<span class="op" id="7356136">==</span>&nbsp;<span class="num" id="7356139">0</span>&nbsp;<span class="op" id="7356141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356145">return</span>&nbsp;<span class="ident" id="7356152">io</span><span class="op" id="7356154">.</span><span class="ident" id="7356155">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356163">g</span><span class="op" id="7356164">.</span><span class="ident" id="7356165">a</span>&nbsp;<span class="op" id="7356167">=</span>&nbsp;<span class="ident" id="7356169">data</span><span class="op" id="7356173">[</span><span class="num" id="7356174">0</span><span class="op" id="7356175">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356178">for</span>&nbsp;<span class="ident" id="7356182">i</span><span class="op" id="7356183">,</span>&nbsp;<span class="ident" id="7356185">c</span>&nbsp;<span class="op" id="7356187">:=</span>&nbsp;<span class="keyword" id="7356190">range</span>&nbsp;<span class="ident" id="7356196">data</span>&nbsp;<span class="op" id="7356201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356205">if</span>&nbsp;<span class="ident" id="7356208">c</span>&nbsp;<span class="op" id="7356210">!=</span>&nbsp;<span class="ident" id="7356213">g</span><span class="op" id="7356214">.</span><span class="ident" id="7356215">a</span><span class="op" id="7356216">+</span><span class="builtintype" id="7356217">byte</span><span class="op" id="7356221">(</span><span class="ident" id="7356222">i</span><span class="op" id="7356223">)</span>&nbsp;<span class="op" id="7356225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356230">return</span>&nbsp;<span class="ident" id="7356237">errors</span><span class="op" id="7356243">.</span><span class="ident" id="7356244">New</span><span class="op" id="7356247">(</span><span class="string" id="7356248">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7356271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356278">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356281">return</span>&nbsp;<span class="ident" id="7356288">nil</span><br>
<span class="lineno"></span><span class="op" id="7356292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356295">func</span>&nbsp;<span class="op" id="7356300">(</span><span class="ident" id="7356301">g</span>&nbsp;<span class="op" id="7356303">*</span><span class="ident" id="7356304">StringStruct</span><span class="op" id="7356316">)</span>&nbsp;<span class="ident" id="7356318">GobEncode</span><span class="op" id="7356327">(</span><span class="op" id="7356328">)</span>&nbsp;<span class="op" id="7356330">(</span><span class="op" id="7356331">[</span><span class="op" id="7356332">]</span><span class="builtintype" id="7356333">byte</span><span class="op" id="7356337">,</span>&nbsp;<span class="builtintype" id="7356339">error</span><span class="op" id="7356344">)</span>&nbsp;<span class="op" id="7356346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356349">return</span>&nbsp;<span class="op" id="7356356">[</span><span class="op" id="7356357">]</span><span class="builtintype" id="7356358">byte</span><span class="op" id="7356362">(</span><span class="ident" id="7356363">g</span><span class="op" id="7356364">.</span><span class="ident" id="7356365">s</span><span class="op" id="7356366">)</span><span class="op" id="7356367">,</span>&nbsp;<span class="ident" id="7356369">nil</span><br>
<span class="lineno">75</span><span class="op" id="7356373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356376">func</span>&nbsp;<span class="op" id="7356381">(</span><span class="ident" id="7356382">g</span>&nbsp;<span class="op" id="7356384">*</span><span class="ident" id="7356385">StringStruct</span><span class="op" id="7356397">)</span>&nbsp;<span class="ident" id="7356399">GobDecode</span><span class="op" id="7356408">(</span><span class="ident" id="7356409">data</span>&nbsp;<span class="op" id="7356414">[</span><span class="op" id="7356415">]</span><span class="builtintype" id="7356416">byte</span><span class="op" id="7356420">)</span>&nbsp;<span class="builtintype" id="7356422">error</span>&nbsp;<span class="op" id="7356428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7356431">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356469">if</span>&nbsp;<span class="builtinfunc" id="7356472">len</span><span class="op" id="7356475">(</span><span class="ident" id="7356476">data</span><span class="op" id="7356480">)</span>&nbsp;<span class="op" id="7356482">==</span>&nbsp;<span class="num" id="7356485">0</span>&nbsp;<span class="op" id="7356487">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356491">return</span>&nbsp;<span class="ident" id="7356498">io</span><span class="op" id="7356500">.</span><span class="ident" id="7356501">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356509">a</span>&nbsp;<span class="op" id="7356511">:=</span>&nbsp;<span class="ident" id="7356514">data</span><span class="op" id="7356518">[</span><span class="num" id="7356519">0</span><span class="op" id="7356520">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356523">for</span>&nbsp;<span class="ident" id="7356527">i</span><span class="op" id="7356528">,</span>&nbsp;<span class="ident" id="7356530">c</span>&nbsp;<span class="op" id="7356532">:=</span>&nbsp;<span class="keyword" id="7356535">range</span>&nbsp;<span class="ident" id="7356541">data</span>&nbsp;<span class="op" id="7356546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356550">if</span>&nbsp;<span class="ident" id="7356553">c</span>&nbsp;<span class="op" id="7356555">!=</span>&nbsp;<span class="ident" id="7356558">a</span><span class="op" id="7356559">+</span><span class="builtintype" id="7356560">byte</span><span class="op" id="7356564">(</span><span class="ident" id="7356565">i</span><span class="op" id="7356566">)</span>&nbsp;<span class="op" id="7356568">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356573">return</span>&nbsp;<span class="ident" id="7356580">errors</span><span class="op" id="7356586">.</span><span class="ident" id="7356587">New</span><span class="op" id="7356590">(</span><span class="string" id="7356591">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7356614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356624">g</span><span class="op" id="7356625">.</span><span class="ident" id="7356626">s</span>&nbsp;<span class="op" id="7356628">=</span>&nbsp;<span class="builtintype" id="7356630">string</span><span class="op" id="7356636">(</span><span class="ident" id="7356637">data</span><span class="op" id="7356641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356644">return</span>&nbsp;<span class="ident" id="7356651">nil</span><br>
<span class="lineno">90</span><span class="op" id="7356655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356658">func</span>&nbsp;<span class="op" id="7356663">(</span><span class="ident" id="7356664">a</span>&nbsp;<span class="op" id="7356666">*</span><span class="ident" id="7356667">ArrayStruct</span><span class="op" id="7356678">)</span>&nbsp;<span class="ident" id="7356680">GobEncode</span><span class="op" id="7356689">(</span><span class="op" id="7356690">)</span>&nbsp;<span class="op" id="7356692">(</span><span class="op" id="7356693">[</span><span class="op" id="7356694">]</span><span class="builtintype" id="7356695">byte</span><span class="op" id="7356699">,</span>&nbsp;<span class="builtintype" id="7356701">error</span><span class="op" id="7356706">)</span>&nbsp;<span class="op" id="7356708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356711">return</span>&nbsp;<span class="ident" id="7356718">a</span><span class="op" id="7356719">.</span><span class="ident" id="7356720">a</span><span class="op" id="7356721">[</span><span class="op" id="7356722">:</span><span class="op" id="7356723">]</span><span class="op" id="7356724">,</span>&nbsp;<span class="ident" id="7356726">nil</span><br>
<span class="lineno"></span><span class="op" id="7356730">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7356733">func</span>&nbsp;<span class="op" id="7356738">(</span><span class="ident" id="7356739">a</span>&nbsp;<span class="op" id="7356741">*</span><span class="ident" id="7356742">ArrayStruct</span><span class="op" id="7356753">)</span>&nbsp;<span class="ident" id="7356755">GobDecode</span><span class="op" id="7356764">(</span><span class="ident" id="7356765">data</span>&nbsp;<span class="op" id="7356770">[</span><span class="op" id="7356771">]</span><span class="builtintype" id="7356772">byte</span><span class="op" id="7356776">)</span>&nbsp;<span class="builtintype" id="7356778">error</span>&nbsp;<span class="op" id="7356784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356787">if</span>&nbsp;<span class="builtinfunc" id="7356790">len</span><span class="op" id="7356793">(</span><span class="ident" id="7356794">data</span><span class="op" id="7356798">)</span>&nbsp;<span class="op" id="7356800">!=</span>&nbsp;<span class="builtinfunc" id="7356803">len</span><span class="op" id="7356806">(</span><span class="ident" id="7356807">a</span><span class="op" id="7356808">.</span><span class="ident" id="7356809">a</span><span class="op" id="7356810">)</span>&nbsp;<span class="op" id="7356812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356816">return</span>&nbsp;<span class="ident" id="7356823">errors</span><span class="op" id="7356829">.</span><span class="ident" id="7356830">New</span><span class="op" id="7356833">(</span><span class="string" id="7356834">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="7356864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356867">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7356870">copy</span><span class="op" id="7356874">(</span><span class="ident" id="7356875">a</span><span class="op" id="7356876">.</span><span class="ident" id="7356877">a</span><span class="op" id="7356878">[</span><span class="op" id="7356879">:</span><span class="op" id="7356880">]</span><span class="op" id="7356881">,</span>&nbsp;<span class="ident" id="7356883">data</span><span class="op" id="7356887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356890">return</span>&nbsp;<span class="ident" id="7356897">nil</span><br>
<span class="lineno"></span><span class="op" id="7356901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356904">func</span>&nbsp;<span class="op" id="7356909">(</span><span class="ident" id="7356910">g</span>&nbsp;<span class="op" id="7356912">*</span><span class="ident" id="7356913">Gobber</span><span class="op" id="7356919">)</span>&nbsp;<span class="ident" id="7356921">GobEncode</span><span class="op" id="7356930">(</span><span class="op" id="7356931">)</span>&nbsp;<span class="op" id="7356933">(</span><span class="op" id="7356934">[</span><span class="op" id="7356935">]</span><span class="builtintype" id="7356936">byte</span><span class="op" id="7356940">,</span>&nbsp;<span class="builtintype" id="7356942">error</span><span class="op" id="7356947">)</span>&nbsp;<span class="op" id="7356949">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356952">return</span>&nbsp;<span class="op" id="7356959">[</span><span class="op" id="7356960">]</span><span class="builtintype" id="7356961">byte</span><span class="op" id="7356965">(</span><span class="ident" id="7356966">fmt</span><span class="op" id="7356969">.</span><span class="ident" id="7356970">Sprintf</span><span class="op" id="7356977">(</span><span class="string" id="7356978">&#34;VALUE=%d&#34;</span><span class="op" id="7356988">,</span>&nbsp;<span class="op" id="7356990">*</span><span class="ident" id="7356991">g</span><span class="op" id="7356992">)</span><span class="op" id="7356993">)</span><span class="op" id="7356994">,</span>&nbsp;<span class="ident" id="7356996">nil</span><br>
<span class="lineno"></span><span class="op" id="7357000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357003">func</span>&nbsp;<span class="op" id="7357008">(</span><span class="ident" id="7357009">g</span>&nbsp;<span class="op" id="7357011">*</span><span class="ident" id="7357012">Gobber</span><span class="op" id="7357018">)</span>&nbsp;<span class="ident" id="7357020">GobDecode</span><span class="op" id="7357029">(</span><span class="ident" id="7357030">data</span>&nbsp;<span class="op" id="7357035">[</span><span class="op" id="7357036">]</span><span class="builtintype" id="7357037">byte</span><span class="op" id="7357041">)</span>&nbsp;<span class="builtintype" id="7357043">error</span>&nbsp;<span class="op" id="7357049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357052">_</span><span class="op" id="7357053">,</span>&nbsp;<span class="ident" id="7357055">err</span>&nbsp;<span class="op" id="7357059">:=</span>&nbsp;<span class="ident" id="7357062">fmt</span><span class="op" id="7357065">.</span><span class="ident" id="7357066">Sscanf</span><span class="op" id="7357072">(</span><span class="builtintype" id="7357073">string</span><span class="op" id="7357079">(</span><span class="ident" id="7357080">data</span><span class="op" id="7357084">)</span><span class="op" id="7357085">,</span>&nbsp;<span class="string" id="7357087">&#34;VALUE=%d&#34;</span><span class="op" id="7357097">,</span>&nbsp;<span class="op" id="7357099">(</span><span class="op" id="7357100">*</span><span class="builtintype" id="7357101">int</span><span class="op" id="7357104">)</span><span class="op" id="7357105">(</span><span class="ident" id="7357106">g</span><span class="op" id="7357107">)</span><span class="op" id="7357108">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357111">return</span>&nbsp;<span class="ident" id="7357118">err</span><br>
<span class="lineno"></span><span class="op" id="7357122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357125">func</span>&nbsp;<span class="op" id="7357130">(</span><span class="ident" id="7357131">g</span>&nbsp;<span class="op" id="7357133">*</span><span class="ident" id="7357134">BinaryGobber</span><span class="op" id="7357146">)</span>&nbsp;<span class="ident" id="7357148">MarshalBinary</span><span class="op" id="7357161">(</span><span class="op" id="7357162">)</span>&nbsp;<span class="op" id="7357164">(</span><span class="op" id="7357165">[</span><span class="op" id="7357166">]</span><span class="builtintype" id="7357167">byte</span><span class="op" id="7357171">,</span>&nbsp;<span class="builtintype" id="7357173">error</span><span class="op" id="7357178">)</span>&nbsp;<span class="op" id="7357180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357183">return</span>&nbsp;<span class="op" id="7357190">[</span><span class="op" id="7357191">]</span><span class="builtintype" id="7357192">byte</span><span class="op" id="7357196">(</span><span class="ident" id="7357197">fmt</span><span class="op" id="7357200">.</span><span class="ident" id="7357201">Sprintf</span><span class="op" id="7357208">(</span><span class="string" id="7357209">&#34;VALUE=%d&#34;</span><span class="op" id="7357219">,</span>&nbsp;<span class="op" id="7357221">*</span><span class="ident" id="7357222">g</span><span class="op" id="7357223">)</span><span class="op" id="7357224">)</span><span class="op" id="7357225">,</span>&nbsp;<span class="ident" id="7357227">nil</span><br>
<span class="lineno">115</span><span class="op" id="7357231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357234">func</span>&nbsp;<span class="op" id="7357239">(</span><span class="ident" id="7357240">g</span>&nbsp;<span class="op" id="7357242">*</span><span class="ident" id="7357243">BinaryGobber</span><span class="op" id="7357255">)</span>&nbsp;<span class="ident" id="7357257">UnmarshalBinary</span><span class="op" id="7357272">(</span><span class="ident" id="7357273">data</span>&nbsp;<span class="op" id="7357278">[</span><span class="op" id="7357279">]</span><span class="builtintype" id="7357280">byte</span><span class="op" id="7357284">)</span>&nbsp;<span class="builtintype" id="7357286">error</span>&nbsp;<span class="op" id="7357292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357295">_</span><span class="op" id="7357296">,</span>&nbsp;<span class="ident" id="7357298">err</span>&nbsp;<span class="op" id="7357302">:=</span>&nbsp;<span class="ident" id="7357305">fmt</span><span class="op" id="7357308">.</span><span class="ident" id="7357309">Sscanf</span><span class="op" id="7357315">(</span><span class="builtintype" id="7357316">string</span><span class="op" id="7357322">(</span><span class="ident" id="7357323">data</span><span class="op" id="7357327">)</span><span class="op" id="7357328">,</span>&nbsp;<span class="string" id="7357330">&#34;VALUE=%d&#34;</span><span class="op" id="7357340">,</span>&nbsp;<span class="op" id="7357342">(</span><span class="op" id="7357343">*</span><span class="builtintype" id="7357344">int</span><span class="op" id="7357347">)</span><span class="op" id="7357348">(</span><span class="ident" id="7357349">g</span><span class="op" id="7357350">)</span><span class="op" id="7357351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357354">return</span>&nbsp;<span class="ident" id="7357361">err</span><br>
<span class="lineno">120</span><span class="op" id="7357365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357368">func</span>&nbsp;<span class="op" id="7357373">(</span><span class="ident" id="7357374">g</span>&nbsp;<span class="op" id="7357376">*</span><span class="ident" id="7357377">TextGobber</span><span class="op" id="7357387">)</span>&nbsp;<span class="ident" id="7357389">MarshalText</span><span class="op" id="7357400">(</span><span class="op" id="7357401">)</span>&nbsp;<span class="op" id="7357403">(</span><span class="op" id="7357404">[</span><span class="op" id="7357405">]</span><span class="builtintype" id="7357406">byte</span><span class="op" id="7357410">,</span>&nbsp;<span class="builtintype" id="7357412">error</span><span class="op" id="7357417">)</span>&nbsp;<span class="op" id="7357419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357422">return</span>&nbsp;<span class="op" id="7357429">[</span><span class="op" id="7357430">]</span><span class="builtintype" id="7357431">byte</span><span class="op" id="7357435">(</span><span class="ident" id="7357436">fmt</span><span class="op" id="7357439">.</span><span class="ident" id="7357440">Sprintf</span><span class="op" id="7357447">(</span><span class="string" id="7357448">&#34;VALUE=%d&#34;</span><span class="op" id="7357458">,</span>&nbsp;<span class="op" id="7357460">*</span><span class="ident" id="7357461">g</span><span class="op" id="7357462">)</span><span class="op" id="7357463">)</span><span class="op" id="7357464">,</span>&nbsp;<span class="ident" id="7357466">nil</span><br>
<span class="lineno"></span><span class="op" id="7357470">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7357473">func</span>&nbsp;<span class="op" id="7357478">(</span><span class="ident" id="7357479">g</span>&nbsp;<span class="op" id="7357481">*</span><span class="ident" id="7357482">TextGobber</span><span class="op" id="7357492">)</span>&nbsp;<span class="ident" id="7357494">UnmarshalText</span><span class="op" id="7357507">(</span><span class="ident" id="7357508">data</span>&nbsp;<span class="op" id="7357513">[</span><span class="op" id="7357514">]</span><span class="builtintype" id="7357515">byte</span><span class="op" id="7357519">)</span>&nbsp;<span class="builtintype" id="7357521">error</span>&nbsp;<span class="op" id="7357527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357530">_</span><span class="op" id="7357531">,</span>&nbsp;<span class="ident" id="7357533">err</span>&nbsp;<span class="op" id="7357537">:=</span>&nbsp;<span class="ident" id="7357540">fmt</span><span class="op" id="7357543">.</span><span class="ident" id="7357544">Sscanf</span><span class="op" id="7357550">(</span><span class="builtintype" id="7357551">string</span><span class="op" id="7357557">(</span><span class="ident" id="7357558">data</span><span class="op" id="7357562">)</span><span class="op" id="7357563">,</span>&nbsp;<span class="string" id="7357565">&#34;VALUE=%d&#34;</span><span class="op" id="7357575">,</span>&nbsp;<span class="op" id="7357577">(</span><span class="op" id="7357578">*</span><span class="builtintype" id="7357579">int</span><span class="op" id="7357582">)</span><span class="op" id="7357583">(</span><span class="ident" id="7357584">g</span><span class="op" id="7357585">)</span><span class="op" id="7357586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357589">return</span>&nbsp;<span class="ident" id="7357596">err</span><br>
<span class="lineno"></span><span class="op" id="7357600">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="7357603">func</span>&nbsp;<span class="op" id="7357608">(</span><span class="ident" id="7357609">v</span>&nbsp;<span class="ident" id="7357611">ValueGobber</span><span class="op" id="7357622">)</span>&nbsp;<span class="ident" id="7357624">GobEncode</span><span class="op" id="7357633">(</span><span class="op" id="7357634">)</span>&nbsp;<span class="op" id="7357636">(</span><span class="op" id="7357637">[</span><span class="op" id="7357638">]</span><span class="builtintype" id="7357639">byte</span><span class="op" id="7357643">,</span>&nbsp;<span class="builtintype" id="7357645">error</span><span class="op" id="7357650">)</span>&nbsp;<span class="op" id="7357652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357655">return</span>&nbsp;<span class="op" id="7357662">[</span><span class="op" id="7357663">]</span><span class="builtintype" id="7357664">byte</span><span class="op" id="7357668">(</span><span class="ident" id="7357669">fmt</span><span class="op" id="7357672">.</span><span class="ident" id="7357673">Sprintf</span><span class="op" id="7357680">(</span><span class="string" id="7357681">&#34;VALUE=%s&#34;</span><span class="op" id="7357691">,</span>&nbsp;<span class="ident" id="7357693">v</span><span class="op" id="7357694">)</span><span class="op" id="7357695">)</span><span class="op" id="7357696">,</span>&nbsp;<span class="ident" id="7357698">nil</span><br>
<span class="lineno"></span><span class="op" id="7357702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7357705">func</span>&nbsp;<span class="op" id="7357710">(</span><span class="ident" id="7357711">v</span>&nbsp;<span class="op" id="7357713">*</span><span class="ident" id="7357714">ValueGobber</span><span class="op" id="7357725">)</span>&nbsp;<span class="ident" id="7357727">GobDecode</span><span class="op" id="7357736">(</span><span class="ident" id="7357737">data</span>&nbsp;<span class="op" id="7357742">[</span><span class="op" id="7357743">]</span><span class="builtintype" id="7357744">byte</span><span class="op" id="7357748">)</span>&nbsp;<span class="builtintype" id="7357750">error</span>&nbsp;<span class="op" id="7357756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357759">_</span><span class="op" id="7357760">,</span>&nbsp;<span class="ident" id="7357762">err</span>&nbsp;<span class="op" id="7357766">:=</span>&nbsp;<span class="ident" id="7357769">fmt</span><span class="op" id="7357772">.</span><span class="ident" id="7357773">Sscanf</span><span class="op" id="7357779">(</span><span class="builtintype" id="7357780">string</span><span class="op" id="7357786">(</span><span class="ident" id="7357787">data</span><span class="op" id="7357791">)</span><span class="op" id="7357792">,</span>&nbsp;<span class="string" id="7357794">&#34;VALUE=%s&#34;</span><span class="op" id="7357804">,</span>&nbsp;<span class="op" id="7357806">(</span><span class="op" id="7357807">*</span><span class="builtintype" id="7357808">string</span><span class="op" id="7357814">)</span><span class="op" id="7357815">(</span><span class="ident" id="7357816">v</span><span class="op" id="7357817">)</span><span class="op" id="7357818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357821">return</span>&nbsp;<span class="ident" id="7357828">err</span><br>
<span class="lineno"></span><span class="op" id="7357832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7357835">func</span>&nbsp;<span class="op" id="7357840">(</span><span class="ident" id="7357841">v</span>&nbsp;<span class="ident" id="7357843">BinaryValueGobber</span><span class="op" id="7357860">)</span>&nbsp;<span class="ident" id="7357862">MarshalBinary</span><span class="op" id="7357875">(</span><span class="op" id="7357876">)</span>&nbsp;<span class="op" id="7357878">(</span><span class="op" id="7357879">[</span><span class="op" id="7357880">]</span><span class="builtintype" id="7357881">byte</span><span class="op" id="7357885">,</span>&nbsp;<span class="builtintype" id="7357887">error</span><span class="op" id="7357892">)</span>&nbsp;<span class="op" id="7357894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357897">return</span>&nbsp;<span class="op" id="7357904">[</span><span class="op" id="7357905">]</span><span class="builtintype" id="7357906">byte</span><span class="op" id="7357910">(</span><span class="ident" id="7357911">fmt</span><span class="op" id="7357914">.</span><span class="ident" id="7357915">Sprintf</span><span class="op" id="7357922">(</span><span class="string" id="7357923">&#34;VALUE=%s&#34;</span><span class="op" id="7357933">,</span>&nbsp;<span class="ident" id="7357935">v</span><span class="op" id="7357936">)</span><span class="op" id="7357937">)</span><span class="op" id="7357938">,</span>&nbsp;<span class="ident" id="7357940">nil</span><br>
<span class="lineno"></span><span class="op" id="7357944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357947">func</span>&nbsp;<span class="op" id="7357952">(</span><span class="ident" id="7357953">v</span>&nbsp;<span class="op" id="7357955">*</span><span class="ident" id="7357956">BinaryValueGobber</span><span class="op" id="7357973">)</span>&nbsp;<span class="ident" id="7357975">UnmarshalBinary</span><span class="op" id="7357990">(</span><span class="ident" id="7357991">data</span>&nbsp;<span class="op" id="7357996">[</span><span class="op" id="7357997">]</span><span class="builtintype" id="7357998">byte</span><span class="op" id="7358002">)</span>&nbsp;<span class="builtintype" id="7358004">error</span>&nbsp;<span class="op" id="7358010">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358013">_</span><span class="op" id="7358014">,</span>&nbsp;<span class="ident" id="7358016">err</span>&nbsp;<span class="op" id="7358020">:=</span>&nbsp;<span class="ident" id="7358023">fmt</span><span class="op" id="7358026">.</span><span class="ident" id="7358027">Sscanf</span><span class="op" id="7358033">(</span><span class="builtintype" id="7358034">string</span><span class="op" id="7358040">(</span><span class="ident" id="7358041">data</span><span class="op" id="7358045">)</span><span class="op" id="7358046">,</span>&nbsp;<span class="string" id="7358048">&#34;VALUE=%s&#34;</span><span class="op" id="7358058">,</span>&nbsp;<span class="op" id="7358060">(</span><span class="op" id="7358061">*</span><span class="builtintype" id="7358062">string</span><span class="op" id="7358068">)</span><span class="op" id="7358069">(</span><span class="ident" id="7358070">v</span><span class="op" id="7358071">)</span><span class="op" id="7358072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358075">return</span>&nbsp;<span class="ident" id="7358082">err</span><br>
<span class="lineno"></span><span class="op" id="7358086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358089">func</span>&nbsp;<span class="op" id="7358094">(</span><span class="ident" id="7358095">v</span>&nbsp;<span class="ident" id="7358097">TextValueGobber</span><span class="op" id="7358112">)</span>&nbsp;<span class="ident" id="7358114">MarshalText</span><span class="op" id="7358125">(</span><span class="op" id="7358126">)</span>&nbsp;<span class="op" id="7358128">(</span><span class="op" id="7358129">[</span><span class="op" id="7358130">]</span><span class="builtintype" id="7358131">byte</span><span class="op" id="7358135">,</span>&nbsp;<span class="builtintype" id="7358137">error</span><span class="op" id="7358142">)</span>&nbsp;<span class="op" id="7358144">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358147">return</span>&nbsp;<span class="op" id="7358154">[</span><span class="op" id="7358155">]</span><span class="builtintype" id="7358156">byte</span><span class="op" id="7358160">(</span><span class="ident" id="7358161">fmt</span><span class="op" id="7358164">.</span><span class="ident" id="7358165">Sprintf</span><span class="op" id="7358172">(</span><span class="string" id="7358173">&#34;VALUE=%s&#34;</span><span class="op" id="7358183">,</span>&nbsp;<span class="ident" id="7358185">v</span><span class="op" id="7358186">)</span><span class="op" id="7358187">)</span><span class="op" id="7358188">,</span>&nbsp;<span class="ident" id="7358190">nil</span><br>
<span class="lineno"></span><span class="op" id="7358194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358197">func</span>&nbsp;<span class="op" id="7358202">(</span><span class="ident" id="7358203">v</span>&nbsp;<span class="op" id="7358205">*</span><span class="ident" id="7358206">TextValueGobber</span><span class="op" id="7358221">)</span>&nbsp;<span class="ident" id="7358223">UnmarshalText</span><span class="op" id="7358236">(</span><span class="ident" id="7358237">data</span>&nbsp;<span class="op" id="7358242">[</span><span class="op" id="7358243">]</span><span class="builtintype" id="7358244">byte</span><span class="op" id="7358248">)</span>&nbsp;<span class="builtintype" id="7358250">error</span>&nbsp;<span class="op" id="7358256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358259">_</span><span class="op" id="7358260">,</span>&nbsp;<span class="ident" id="7358262">err</span>&nbsp;<span class="op" id="7358266">:=</span>&nbsp;<span class="ident" id="7358269">fmt</span><span class="op" id="7358272">.</span><span class="ident" id="7358273">Sscanf</span><span class="op" id="7358279">(</span><span class="builtintype" id="7358280">string</span><span class="op" id="7358286">(</span><span class="ident" id="7358287">data</span><span class="op" id="7358291">)</span><span class="op" id="7358292">,</span>&nbsp;<span class="string" id="7358294">&#34;VALUE=%s&#34;</span><span class="op" id="7358304">,</span>&nbsp;<span class="op" id="7358306">(</span><span class="op" id="7358307">*</span><span class="builtintype" id="7358308">string</span><span class="op" id="7358314">)</span><span class="op" id="7358315">(</span><span class="ident" id="7358316">v</span><span class="op" id="7358317">)</span><span class="op" id="7358318">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358321">return</span>&nbsp;<span class="ident" id="7358328">err</span><br>
<span class="lineno"></span><span class="op" id="7358332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7358335">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7358381">type</span>&nbsp;<span class="ident" id="7358386">GobTest0</span>&nbsp;<span class="keyword" id="7358395">struct</span>&nbsp;<span class="op" id="7358402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358405">X</span>&nbsp;<span class="builtintype" id="7358407">int</span>&nbsp;<span class="comment" id="7358411">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358468">G</span>&nbsp;<span class="op" id="7358470">*</span><span class="ident" id="7358471">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="7358482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7358485">type</span>&nbsp;<span class="ident" id="7358490">GobTest1</span>&nbsp;<span class="keyword" id="7358499">struct</span>&nbsp;<span class="op" id="7358506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358509">X</span>&nbsp;<span class="builtintype" id="7358511">int</span>&nbsp;<span class="comment" id="7358515">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358572">G</span>&nbsp;<span class="op" id="7358574">*</span><span class="ident" id="7358575">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="7358588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7358591">type</span>&nbsp;<span class="ident" id="7358596">GobTest2</span>&nbsp;<span class="keyword" id="7358605">struct</span>&nbsp;<span class="op" id="7358612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358615">X</span>&nbsp;<span class="builtintype" id="7358617">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7358624">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358681">G</span>&nbsp;<span class="builtintype" id="7358683">string</span>&nbsp;<span class="comment" id="7358690">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="7358734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7358737">type</span>&nbsp;<span class="ident" id="7358742">GobTest3</span>&nbsp;<span class="keyword" id="7358751">struct</span>&nbsp;<span class="op" id="7358758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358761">X</span>&nbsp;<span class="builtintype" id="7358763">int</span>&nbsp;<span class="comment" id="7358767">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358824">G</span>&nbsp;<span class="op" id="7358826">*</span><span class="ident" id="7358827">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358835">B</span>&nbsp;<span class="op" id="7358837">*</span><span class="ident" id="7358838">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358852">T</span>&nbsp;<span class="op" id="7358854">*</span><span class="ident" id="7358855">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="7358866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358869">type</span>&nbsp;<span class="ident" id="7358874">GobTest4</span>&nbsp;<span class="keyword" id="7358883">struct</span>&nbsp;<span class="op" id="7358890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358893">X</span>&nbsp;&nbsp;<span class="builtintype" id="7358896">int</span>&nbsp;<span class="comment" id="7358900">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358957">V</span>&nbsp;&nbsp;<span class="ident" id="7358960">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358973">BV</span>&nbsp;<span class="ident" id="7358976">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358995">TV</span>&nbsp;<span class="ident" id="7358998">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7359014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359017">type</span>&nbsp;<span class="ident" id="7359022">GobTest5</span>&nbsp;<span class="keyword" id="7359031">struct</span>&nbsp;<span class="op" id="7359038">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359041">X</span>&nbsp;&nbsp;<span class="builtintype" id="7359044">int</span>&nbsp;<span class="comment" id="7359048">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359105">V</span>&nbsp;&nbsp;<span class="op" id="7359108">*</span><span class="ident" id="7359109">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359122">BV</span>&nbsp;<span class="op" id="7359125">*</span><span class="ident" id="7359126">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359145">TV</span>&nbsp;<span class="op" id="7359148">*</span><span class="ident" id="7359149">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7359165">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7359168">type</span>&nbsp;<span class="ident" id="7359173">GobTest6</span>&nbsp;<span class="keyword" id="7359182">struct</span>&nbsp;<span class="op" id="7359189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359192">X</span>&nbsp;&nbsp;<span class="builtintype" id="7359195">int</span>&nbsp;<span class="comment" id="7359199">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359256">V</span>&nbsp;&nbsp;<span class="ident" id="7359259">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359272">W</span>&nbsp;&nbsp;<span class="op" id="7359275">*</span><span class="ident" id="7359276">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359289">BV</span>&nbsp;<span class="ident" id="7359292">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359311">BW</span>&nbsp;<span class="op" id="7359314">*</span><span class="ident" id="7359315">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359334">TV</span>&nbsp;<span class="ident" id="7359337">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359354">TW</span>&nbsp;<span class="op" id="7359357">*</span><span class="ident" id="7359358">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7359374">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7359377">type</span>&nbsp;<span class="ident" id="7359382">GobTest7</span>&nbsp;<span class="keyword" id="7359391">struct</span>&nbsp;<span class="op" id="7359398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359401">X</span>&nbsp;&nbsp;<span class="builtintype" id="7359404">int</span>&nbsp;<span class="comment" id="7359408">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359465">V</span>&nbsp;&nbsp;<span class="op" id="7359468">*</span><span class="ident" id="7359469">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359482">W</span>&nbsp;&nbsp;<span class="ident" id="7359485">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359498">BV</span>&nbsp;<span class="op" id="7359501">*</span><span class="ident" id="7359502">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359521">BW</span>&nbsp;<span class="ident" id="7359524">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359543">TV</span>&nbsp;<span class="op" id="7359546">*</span><span class="ident" id="7359547">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359564">TW</span>&nbsp;<span class="ident" id="7359567">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7359583">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7359586">type</span>&nbsp;<span class="ident" id="7359591">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="7359612">struct</span>&nbsp;<span class="op" id="7359619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359622">X</span>&nbsp;<span class="builtintype" id="7359624">int</span>&nbsp;<span class="comment" id="7359628">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="7359684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="7359687">type</span>&nbsp;<span class="ident" id="7359692">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="7359711">struct</span>&nbsp;<span class="op" id="7359718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359721">X</span>&nbsp;<span class="builtintype" id="7359723">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7359736">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359793">G</span>&nbsp;<span class="ident" id="7359795">StringStruct</span>&nbsp;<span class="comment" id="7359808">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7359826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="7359829">type</span>&nbsp;<span class="ident" id="7359834">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="7359856">struct</span>&nbsp;<span class="op" id="7359863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359866">X</span>&nbsp;<span class="builtintype" id="7359868">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7359884">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359941">G</span>&nbsp;<span class="op" id="7359943">*</span><span class="op" id="7359944">*</span><span class="op" id="7359945">*</span><span class="ident" id="7359946">StringStruct</span>&nbsp;<span class="comment" id="7359959">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7359992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="7359995">type</span>&nbsp;<span class="ident" id="7360000">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="7360019">struct</span>&nbsp;<span class="op" id="7360026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360029">X</span>&nbsp;<span class="builtintype" id="7360031">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7360043">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360100">A</span>&nbsp;<span class="ident" id="7360102">ArrayStruct</span>&nbsp;<span class="comment" id="7360114">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7360132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7360135">type</span>&nbsp;<span class="ident" id="7360140">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="7360167">struct</span>&nbsp;<span class="op" id="7360174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360177">X</span>&nbsp;<span class="builtintype" id="7360179">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7360194">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360251">A</span>&nbsp;<span class="op" id="7360253">*</span><span class="op" id="7360254">*</span><span class="op" id="7360255">*</span><span class="ident" id="7360256">ArrayStruct</span>&nbsp;<span class="comment" id="7360268">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7360305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7360308">func</span>&nbsp;<span class="ident" id="7360313">TestGobEncoderField</span><span class="op" id="7360332">(</span><span class="ident" id="7360333">t</span>&nbsp;<span class="op" id="7360335">*</span><span class="ident" id="7360336">testing</span><span class="op" id="7360343">.</span><span class="ident" id="7360344">T</span><span class="op" id="7360345">)</span>&nbsp;<span class="op" id="7360347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360350">b</span>&nbsp;<span class="op" id="7360352">:=</span>&nbsp;<span class="builtinfunc" id="7360355">new</span><span class="op" id="7360358">(</span><span class="ident" id="7360359">bytes</span><span class="op" id="7360364">.</span><span class="ident" id="7360365">Buffer</span><span class="op" id="7360371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360374">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360412">enc</span>&nbsp;<span class="op" id="7360416">:=</span>&nbsp;<span class="ident" id="7360419">NewEncoder</span><span class="op" id="7360429">(</span><span class="ident" id="7360430">b</span><span class="op" id="7360431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360434">err</span>&nbsp;<span class="op" id="7360438">:=</span>&nbsp;<span class="ident" id="7360441">enc</span><span class="op" id="7360444">.</span><span class="ident" id="7360445">Encode</span><span class="op" id="7360451">(</span><span class="ident" id="7360452">GobTest0</span><span class="op" id="7360460">{</span><span class="num" id="7360461">17</span><span class="op" id="7360463">,</span>&nbsp;<span class="op" id="7360465">&amp;</span><span class="ident" id="7360466">ByteStruct</span><span class="op" id="7360476">{</span><span class="string" id="7360477">&#39;A&#39;</span><span class="op" id="7360480">}</span><span class="op" id="7360481">}</span><span class="op" id="7360482">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360485">if</span>&nbsp;<span class="ident" id="7360488">err</span>&nbsp;<span class="op" id="7360492">!=</span>&nbsp;<span class="ident" id="7360495">nil</span>&nbsp;<span class="op" id="7360499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360503">t</span><span class="op" id="7360504">.</span><span class="ident" id="7360505">Fatal</span><span class="op" id="7360510">(</span><span class="string" id="7360511">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7360526">,</span>&nbsp;<span class="ident" id="7360528">err</span><span class="op" id="7360531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360537">dec</span>&nbsp;<span class="op" id="7360541">:=</span>&nbsp;<span class="ident" id="7360544">NewDecoder</span><span class="op" id="7360554">(</span><span class="ident" id="7360555">b</span><span class="op" id="7360556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360559">x</span>&nbsp;<span class="op" id="7360561">:=</span>&nbsp;<span class="builtinfunc" id="7360564">new</span><span class="op" id="7360567">(</span><span class="ident" id="7360568">GobTest0</span><span class="op" id="7360576">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360579">err</span>&nbsp;<span class="op" id="7360583">=</span>&nbsp;<span class="ident" id="7360585">dec</span><span class="op" id="7360588">.</span><span class="ident" id="7360589">Decode</span><span class="op" id="7360595">(</span><span class="ident" id="7360596">x</span><span class="op" id="7360597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360600">if</span>&nbsp;<span class="ident" id="7360603">err</span>&nbsp;<span class="op" id="7360607">!=</span>&nbsp;<span class="ident" id="7360610">nil</span>&nbsp;<span class="op" id="7360614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360618">t</span><span class="op" id="7360619">.</span><span class="ident" id="7360620">Fatal</span><span class="op" id="7360625">(</span><span class="string" id="7360626">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7360641">,</span>&nbsp;<span class="ident" id="7360643">err</span><span class="op" id="7360646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360652">if</span>&nbsp;<span class="ident" id="7360655">x</span><span class="op" id="7360656">.</span><span class="ident" id="7360657">G</span><span class="op" id="7360658">.</span><span class="ident" id="7360659">a</span>&nbsp;<span class="op" id="7360661">!=</span>&nbsp;<span class="string" id="7360664">&#39;A&#39;</span>&nbsp;<span class="op" id="7360668">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360672">t</span><span class="op" id="7360673">.</span><span class="ident" id="7360674">Errorf</span><span class="op" id="7360680">(</span><span class="string" id="7360681">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7360702">,</span>&nbsp;<span class="ident" id="7360704">x</span><span class="op" id="7360705">.</span><span class="ident" id="7360706">G</span><span class="op" id="7360707">.</span><span class="ident" id="7360708">a</span><span class="op" id="7360709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360715">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360755">b</span><span class="op" id="7360756">.</span><span class="ident" id="7360757">Reset</span><span class="op" id="7360762">(</span><span class="op" id="7360763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360766">gobber</span>&nbsp;<span class="op" id="7360773">:=</span>&nbsp;<span class="ident" id="7360776">Gobber</span><span class="op" id="7360782">(</span><span class="num" id="7360783">23</span><span class="op" id="7360785">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360788">bgobber</span>&nbsp;<span class="op" id="7360796">:=</span>&nbsp;<span class="ident" id="7360799">BinaryGobber</span><span class="op" id="7360811">(</span><span class="num" id="7360812">24</span><span class="op" id="7360814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360817">tgobber</span>&nbsp;<span class="op" id="7360825">:=</span>&nbsp;<span class="ident" id="7360828">TextGobber</span><span class="op" id="7360838">(</span><span class="num" id="7360839">25</span><span class="op" id="7360841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360844">err</span>&nbsp;<span class="op" id="7360848">=</span>&nbsp;<span class="ident" id="7360850">enc</span><span class="op" id="7360853">.</span><span class="ident" id="7360854">Encode</span><span class="op" id="7360860">(</span><span class="ident" id="7360861">GobTest3</span><span class="op" id="7360869">{</span><span class="num" id="7360870">17</span><span class="op" id="7360872">,</span>&nbsp;<span class="op" id="7360874">&amp;</span><span class="ident" id="7360875">gobber</span><span class="op" id="7360881">,</span>&nbsp;<span class="op" id="7360883">&amp;</span><span class="ident" id="7360884">bgobber</span><span class="op" id="7360891">,</span>&nbsp;<span class="op" id="7360893">&amp;</span><span class="ident" id="7360894">tgobber</span><span class="op" id="7360901">}</span><span class="op" id="7360902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360905">if</span>&nbsp;<span class="ident" id="7360908">err</span>&nbsp;<span class="op" id="7360912">!=</span>&nbsp;<span class="ident" id="7360915">nil</span>&nbsp;<span class="op" id="7360919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360923">t</span><span class="op" id="7360924">.</span><span class="ident" id="7360925">Fatal</span><span class="op" id="7360930">(</span><span class="string" id="7360931">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7360946">,</span>&nbsp;<span class="ident" id="7360948">err</span><span class="op" id="7360951">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360957">y</span>&nbsp;<span class="op" id="7360959">:=</span>&nbsp;<span class="builtinfunc" id="7360962">new</span><span class="op" id="7360965">(</span><span class="ident" id="7360966">GobTest3</span><span class="op" id="7360974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360977">err</span>&nbsp;<span class="op" id="7360981">=</span>&nbsp;<span class="ident" id="7360983">dec</span><span class="op" id="7360986">.</span><span class="ident" id="7360987">Decode</span><span class="op" id="7360993">(</span><span class="ident" id="7360994">y</span><span class="op" id="7360995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360998">if</span>&nbsp;<span class="ident" id="7361001">err</span>&nbsp;<span class="op" id="7361005">!=</span>&nbsp;<span class="ident" id="7361008">nil</span>&nbsp;<span class="op" id="7361012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361016">t</span><span class="op" id="7361017">.</span><span class="ident" id="7361018">Fatal</span><span class="op" id="7361023">(</span><span class="string" id="7361024">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7361039">,</span>&nbsp;<span class="ident" id="7361041">err</span><span class="op" id="7361044">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361050">if</span>&nbsp;<span class="op" id="7361053">*</span><span class="ident" id="7361054">y</span><span class="op" id="7361055">.</span><span class="ident" id="7361056">G</span>&nbsp;<span class="op" id="7361058">!=</span>&nbsp;<span class="num" id="7361061">23</span>&nbsp;<span class="op" id="7361064">||</span>&nbsp;<span class="op" id="7361067">*</span><span class="ident" id="7361068">y</span><span class="op" id="7361069">.</span><span class="ident" id="7361070">B</span>&nbsp;<span class="op" id="7361072">!=</span>&nbsp;<span class="num" id="7361075">24</span>&nbsp;<span class="op" id="7361078">||</span>&nbsp;<span class="op" id="7361081">*</span><span class="ident" id="7361082">y</span><span class="op" id="7361083">.</span><span class="ident" id="7361084">T</span>&nbsp;<span class="op" id="7361086">!=</span>&nbsp;<span class="num" id="7361089">25</span>&nbsp;<span class="op" id="7361092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361096">t</span><span class="op" id="7361097">.</span><span class="ident" id="7361098">Errorf</span><span class="op" id="7361104">(</span><span class="string" id="7361105">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7361126">,</span>&nbsp;<span class="op" id="7361128">*</span><span class="ident" id="7361129">y</span><span class="op" id="7361130">.</span><span class="ident" id="7361131">G</span><span class="op" id="7361132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361135">}</span><br>
<span class="lineno"></span><span class="op" id="7361137">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="7361140">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="7361207">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7361250">func</span>&nbsp;<span class="ident" id="7361255">TestGobEncoderValueField</span><span class="op" id="7361279">(</span><span class="ident" id="7361280">t</span>&nbsp;<span class="op" id="7361282">*</span><span class="ident" id="7361283">testing</span><span class="op" id="7361290">.</span><span class="ident" id="7361291">T</span><span class="op" id="7361292">)</span>&nbsp;<span class="op" id="7361294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361297">b</span>&nbsp;<span class="op" id="7361299">:=</span>&nbsp;<span class="builtinfunc" id="7361302">new</span><span class="op" id="7361305">(</span><span class="ident" id="7361306">bytes</span><span class="op" id="7361311">.</span><span class="ident" id="7361312">Buffer</span><span class="op" id="7361318">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7361321">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361359">enc</span>&nbsp;<span class="op" id="7361363">:=</span>&nbsp;<span class="ident" id="7361366">NewEncoder</span><span class="op" id="7361376">(</span><span class="ident" id="7361377">b</span><span class="op" id="7361378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361381">err</span>&nbsp;<span class="op" id="7361385">:=</span>&nbsp;<span class="ident" id="7361388">enc</span><span class="op" id="7361391">.</span><span class="ident" id="7361392">Encode</span><span class="op" id="7361398">(</span><span class="op" id="7361399">&amp;</span><span class="ident" id="7361400">GobTestValueEncDec</span><span class="op" id="7361418">{</span><span class="num" id="7361419">17</span><span class="op" id="7361421">,</span>&nbsp;<span class="ident" id="7361423">StringStruct</span><span class="op" id="7361435">{</span><span class="string" id="7361436">&#34;HIJKL&#34;</span><span class="op" id="7361443">}</span><span class="op" id="7361444">}</span><span class="op" id="7361445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361448">if</span>&nbsp;<span class="ident" id="7361451">err</span>&nbsp;<span class="op" id="7361455">!=</span>&nbsp;<span class="ident" id="7361458">nil</span>&nbsp;<span class="op" id="7361462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361466">t</span><span class="op" id="7361467">.</span><span class="ident" id="7361468">Fatal</span><span class="op" id="7361473">(</span><span class="string" id="7361474">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7361489">,</span>&nbsp;<span class="ident" id="7361491">err</span><span class="op" id="7361494">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361500">dec</span>&nbsp;<span class="op" id="7361504">:=</span>&nbsp;<span class="ident" id="7361507">NewDecoder</span><span class="op" id="7361517">(</span><span class="ident" id="7361518">b</span><span class="op" id="7361519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361522">x</span>&nbsp;<span class="op" id="7361524">:=</span>&nbsp;<span class="builtinfunc" id="7361527">new</span><span class="op" id="7361530">(</span><span class="ident" id="7361531">GobTestValueEncDec</span><span class="op" id="7361549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361552">err</span>&nbsp;<span class="op" id="7361556">=</span>&nbsp;<span class="ident" id="7361558">dec</span><span class="op" id="7361561">.</span><span class="ident" id="7361562">Decode</span><span class="op" id="7361568">(</span><span class="ident" id="7361569">x</span><span class="op" id="7361570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361573">if</span>&nbsp;<span class="ident" id="7361576">err</span>&nbsp;<span class="op" id="7361580">!=</span>&nbsp;<span class="ident" id="7361583">nil</span>&nbsp;<span class="op" id="7361587">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361591">t</span><span class="op" id="7361592">.</span><span class="ident" id="7361593">Fatal</span><span class="op" id="7361598">(</span><span class="string" id="7361599">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7361614">,</span>&nbsp;<span class="ident" id="7361616">err</span><span class="op" id="7361619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361625">if</span>&nbsp;<span class="ident" id="7361628">x</span><span class="op" id="7361629">.</span><span class="ident" id="7361630">G</span><span class="op" id="7361631">.</span><span class="ident" id="7361632">s</span>&nbsp;<span class="op" id="7361634">!=</span>&nbsp;<span class="string" id="7361637">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7361645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361649">t</span><span class="op" id="7361650">.</span><span class="ident" id="7361651">Errorf</span><span class="op" id="7361657">(</span><span class="string" id="7361658">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7361683">,</span>&nbsp;<span class="ident" id="7361685">x</span><span class="op" id="7361686">.</span><span class="ident" id="7361687">G</span><span class="op" id="7361688">.</span><span class="ident" id="7361689">s</span><span class="op" id="7361690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361693">}</span><br>
<span class="lineno">295</span><span class="op" id="7361695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7361698">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7361751">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="7361787">func</span>&nbsp;<span class="ident" id="7361792">TestGobEncoderIndirectField</span><span class="op" id="7361819">(</span><span class="ident" id="7361820">t</span>&nbsp;<span class="op" id="7361822">*</span><span class="ident" id="7361823">testing</span><span class="op" id="7361830">.</span><span class="ident" id="7361831">T</span><span class="op" id="7361832">)</span>&nbsp;<span class="op" id="7361834">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361837">b</span>&nbsp;<span class="op" id="7361839">:=</span>&nbsp;<span class="builtinfunc" id="7361842">new</span><span class="op" id="7361845">(</span><span class="ident" id="7361846">bytes</span><span class="op" id="7361851">.</span><span class="ident" id="7361852">Buffer</span><span class="op" id="7361858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7361861">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361899">enc</span>&nbsp;<span class="op" id="7361903">:=</span>&nbsp;<span class="ident" id="7361906">NewEncoder</span><span class="op" id="7361916">(</span><span class="ident" id="7361917">b</span><span class="op" id="7361918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361921">s</span>&nbsp;<span class="op" id="7361923">:=</span>&nbsp;<span class="op" id="7361926">&amp;</span><span class="ident" id="7361927">StringStruct</span><span class="op" id="7361939">{</span><span class="string" id="7361940">&#34;HIJKL&#34;</span><span class="op" id="7361947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361950">sp</span>&nbsp;<span class="op" id="7361953">:=</span>&nbsp;<span class="op" id="7361956">&amp;</span><span class="ident" id="7361957">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361960">err</span>&nbsp;<span class="op" id="7361964">:=</span>&nbsp;<span class="ident" id="7361967">enc</span><span class="op" id="7361970">.</span><span class="ident" id="7361971">Encode</span><span class="op" id="7361977">(</span><span class="ident" id="7361978">GobTestIndirectEncDec</span><span class="op" id="7361999">{</span><span class="num" id="7362000">17</span><span class="op" id="7362002">,</span>&nbsp;<span class="op" id="7362004">&amp;</span><span class="ident" id="7362005">sp</span><span class="op" id="7362007">}</span><span class="op" id="7362008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362011">if</span>&nbsp;<span class="ident" id="7362014">err</span>&nbsp;<span class="op" id="7362018">!=</span>&nbsp;<span class="ident" id="7362021">nil</span>&nbsp;<span class="op" id="7362025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362029">t</span><span class="op" id="7362030">.</span><span class="ident" id="7362031">Fatal</span><span class="op" id="7362036">(</span><span class="string" id="7362037">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7362052">,</span>&nbsp;<span class="ident" id="7362054">err</span><span class="op" id="7362057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362063">dec</span>&nbsp;<span class="op" id="7362067">:=</span>&nbsp;<span class="ident" id="7362070">NewDecoder</span><span class="op" id="7362080">(</span><span class="ident" id="7362081">b</span><span class="op" id="7362082">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362085">x</span>&nbsp;<span class="op" id="7362087">:=</span>&nbsp;<span class="builtinfunc" id="7362090">new</span><span class="op" id="7362093">(</span><span class="ident" id="7362094">GobTestIndirectEncDec</span><span class="op" id="7362115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362118">err</span>&nbsp;<span class="op" id="7362122">=</span>&nbsp;<span class="ident" id="7362124">dec</span><span class="op" id="7362127">.</span><span class="ident" id="7362128">Decode</span><span class="op" id="7362134">(</span><span class="ident" id="7362135">x</span><span class="op" id="7362136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362139">if</span>&nbsp;<span class="ident" id="7362142">err</span>&nbsp;<span class="op" id="7362146">!=</span>&nbsp;<span class="ident" id="7362149">nil</span>&nbsp;<span class="op" id="7362153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362157">t</span><span class="op" id="7362158">.</span><span class="ident" id="7362159">Fatal</span><span class="op" id="7362164">(</span><span class="string" id="7362165">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7362180">,</span>&nbsp;<span class="ident" id="7362182">err</span><span class="op" id="7362185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362188">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362191">if</span>&nbsp;<span class="op" id="7362194">(</span><span class="op" id="7362195">*</span><span class="op" id="7362196">*</span><span class="op" id="7362197">*</span><span class="ident" id="7362198">x</span><span class="op" id="7362199">.</span><span class="ident" id="7362200">G</span><span class="op" id="7362201">)</span><span class="op" id="7362202">.</span><span class="ident" id="7362203">s</span>&nbsp;<span class="op" id="7362205">!=</span>&nbsp;<span class="string" id="7362208">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7362216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362220">t</span><span class="op" id="7362221">.</span><span class="ident" id="7362222">Errorf</span><span class="op" id="7362228">(</span><span class="string" id="7362229">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7362254">,</span>&nbsp;<span class="op" id="7362256">(</span><span class="op" id="7362257">*</span><span class="op" id="7362258">*</span><span class="op" id="7362259">*</span><span class="ident" id="7362260">x</span><span class="op" id="7362261">.</span><span class="ident" id="7362262">G</span><span class="op" id="7362263">)</span><span class="op" id="7362264">.</span><span class="ident" id="7362265">s</span><span class="op" id="7362266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362269">}</span><br>
<span class="lineno"></span><span class="op" id="7362271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="7362274">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7362315">func</span>&nbsp;<span class="ident" id="7362320">TestGobEncoderArrayField</span><span class="op" id="7362344">(</span><span class="ident" id="7362345">t</span>&nbsp;<span class="op" id="7362347">*</span><span class="ident" id="7362348">testing</span><span class="op" id="7362355">.</span><span class="ident" id="7362356">T</span><span class="op" id="7362357">)</span>&nbsp;<span class="op" id="7362359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362362">b</span>&nbsp;<span class="op" id="7362364">:=</span>&nbsp;<span class="builtinfunc" id="7362367">new</span><span class="op" id="7362370">(</span><span class="ident" id="7362371">bytes</span><span class="op" id="7362376">.</span><span class="ident" id="7362377">Buffer</span><span class="op" id="7362383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362386">enc</span>&nbsp;<span class="op" id="7362390">:=</span>&nbsp;<span class="ident" id="7362393">NewEncoder</span><span class="op" id="7362403">(</span><span class="ident" id="7362404">b</span><span class="op" id="7362405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362408">var</span>&nbsp;<span class="ident" id="7362412">a</span>&nbsp;<span class="ident" id="7362414">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362434">a</span><span class="op" id="7362435">.</span><span class="ident" id="7362436">X</span>&nbsp;<span class="op" id="7362438">=</span>&nbsp;<span class="num" id="7362440">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362444">for</span>&nbsp;<span class="ident" id="7362448">i</span>&nbsp;<span class="op" id="7362450">:=</span>&nbsp;<span class="keyword" id="7362453">range</span>&nbsp;<span class="ident" id="7362459">a</span><span class="op" id="7362460">.</span><span class="ident" id="7362461">A</span><span class="op" id="7362462">.</span><span class="ident" id="7362463">a</span>&nbsp;<span class="op" id="7362465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362469">a</span><span class="op" id="7362470">.</span><span class="ident" id="7362471">A</span><span class="op" id="7362472">.</span><span class="ident" id="7362473">a</span><span class="op" id="7362474">[</span><span class="ident" id="7362475">i</span><span class="op" id="7362476">]</span>&nbsp;<span class="op" id="7362478">=</span>&nbsp;<span class="builtintype" id="7362480">byte</span><span class="op" id="7362484">(</span><span class="ident" id="7362485">i</span><span class="op" id="7362486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362492">err</span>&nbsp;<span class="op" id="7362496">:=</span>&nbsp;<span class="ident" id="7362499">enc</span><span class="op" id="7362502">.</span><span class="ident" id="7362503">Encode</span><span class="op" id="7362509">(</span><span class="op" id="7362510">&amp;</span><span class="ident" id="7362511">a</span><span class="op" id="7362512">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362515">if</span>&nbsp;<span class="ident" id="7362518">err</span>&nbsp;<span class="op" id="7362522">!=</span>&nbsp;<span class="ident" id="7362525">nil</span>&nbsp;<span class="op" id="7362529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362533">t</span><span class="op" id="7362534">.</span><span class="ident" id="7362535">Fatal</span><span class="op" id="7362540">(</span><span class="string" id="7362541">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7362556">,</span>&nbsp;<span class="ident" id="7362558">err</span><span class="op" id="7362561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362567">dec</span>&nbsp;<span class="op" id="7362571">:=</span>&nbsp;<span class="ident" id="7362574">NewDecoder</span><span class="op" id="7362584">(</span><span class="ident" id="7362585">b</span><span class="op" id="7362586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362589">x</span>&nbsp;<span class="op" id="7362591">:=</span>&nbsp;<span class="builtinfunc" id="7362594">new</span><span class="op" id="7362597">(</span><span class="ident" id="7362598">GobTestArrayEncDec</span><span class="op" id="7362616">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362619">err</span>&nbsp;<span class="op" id="7362623">=</span>&nbsp;<span class="ident" id="7362625">dec</span><span class="op" id="7362628">.</span><span class="ident" id="7362629">Decode</span><span class="op" id="7362635">(</span><span class="ident" id="7362636">x</span><span class="op" id="7362637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362640">if</span>&nbsp;<span class="ident" id="7362643">err</span>&nbsp;<span class="op" id="7362647">!=</span>&nbsp;<span class="ident" id="7362650">nil</span>&nbsp;<span class="op" id="7362654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362658">t</span><span class="op" id="7362659">.</span><span class="ident" id="7362660">Fatal</span><span class="op" id="7362665">(</span><span class="string" id="7362666">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7362681">,</span>&nbsp;<span class="ident" id="7362683">err</span><span class="op" id="7362686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362692">for</span>&nbsp;<span class="ident" id="7362696">i</span><span class="op" id="7362697">,</span>&nbsp;<span class="ident" id="7362699">v</span>&nbsp;<span class="op" id="7362701">:=</span>&nbsp;<span class="keyword" id="7362704">range</span>&nbsp;<span class="ident" id="7362710">x</span><span class="op" id="7362711">.</span><span class="ident" id="7362712">A</span><span class="op" id="7362713">.</span><span class="ident" id="7362714">a</span>&nbsp;<span class="op" id="7362716">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362720">if</span>&nbsp;<span class="ident" id="7362723">v</span>&nbsp;<span class="op" id="7362725">!=</span>&nbsp;<span class="builtintype" id="7362728">byte</span><span class="op" id="7362732">(</span><span class="ident" id="7362733">i</span><span class="op" id="7362734">)</span>&nbsp;<span class="op" id="7362736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362741">t</span><span class="op" id="7362742">.</span><span class="ident" id="7362743">Errorf</span><span class="op" id="7362749">(</span><span class="string" id="7362750">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7362770">,</span>&nbsp;<span class="builtintype" id="7362772">byte</span><span class="op" id="7362776">(</span><span class="ident" id="7362777">i</span><span class="op" id="7362778">)</span><span class="op" id="7362779">,</span>&nbsp;<span class="ident" id="7362781">v</span><span class="op" id="7362782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362787">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362798">}</span><br>
<span class="lineno">345</span><span class="op" id="7362800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7362803">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7362857">func</span>&nbsp;<span class="ident" id="7362862">TestGobEncoderIndirectArrayField</span><span class="op" id="7362894">(</span><span class="ident" id="7362895">t</span>&nbsp;<span class="op" id="7362897">*</span><span class="ident" id="7362898">testing</span><span class="op" id="7362905">.</span><span class="ident" id="7362906">T</span><span class="op" id="7362907">)</span>&nbsp;<span class="op" id="7362909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362912">b</span>&nbsp;<span class="op" id="7362914">:=</span>&nbsp;<span class="builtinfunc" id="7362917">new</span><span class="op" id="7362920">(</span><span class="ident" id="7362921">bytes</span><span class="op" id="7362926">.</span><span class="ident" id="7362927">Buffer</span><span class="op" id="7362933">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362936">enc</span>&nbsp;<span class="op" id="7362940">:=</span>&nbsp;<span class="ident" id="7362943">NewEncoder</span><span class="op" id="7362953">(</span><span class="ident" id="7362954">b</span><span class="op" id="7362955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362958">var</span>&nbsp;<span class="ident" id="7362962">a</span>&nbsp;<span class="ident" id="7362964">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362992">a</span><span class="op" id="7362993">.</span><span class="ident" id="7362994">X</span>&nbsp;<span class="op" id="7362996">=</span>&nbsp;<span class="num" id="7362998">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363002">var</span>&nbsp;<span class="ident" id="7363006">array</span>&nbsp;<span class="ident" id="7363012">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363025">ap</span>&nbsp;<span class="op" id="7363028">:=</span>&nbsp;<span class="op" id="7363031">&amp;</span><span class="ident" id="7363032">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363039">app</span>&nbsp;<span class="op" id="7363043">:=</span>&nbsp;<span class="op" id="7363046">&amp;</span><span class="ident" id="7363047">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363051">a</span><span class="op" id="7363052">.</span><span class="ident" id="7363053">A</span>&nbsp;<span class="op" id="7363055">=</span>&nbsp;<span class="op" id="7363057">&amp;</span><span class="ident" id="7363058">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363063">for</span>&nbsp;<span class="ident" id="7363067">i</span>&nbsp;<span class="op" id="7363069">:=</span>&nbsp;<span class="keyword" id="7363072">range</span>&nbsp;<span class="ident" id="7363078">array</span><span class="op" id="7363083">.</span><span class="ident" id="7363084">a</span>&nbsp;<span class="op" id="7363086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363090">array</span><span class="op" id="7363095">.</span><span class="ident" id="7363096">a</span><span class="op" id="7363097">[</span><span class="ident" id="7363098">i</span><span class="op" id="7363099">]</span>&nbsp;<span class="op" id="7363101">=</span>&nbsp;<span class="builtintype" id="7363103">byte</span><span class="op" id="7363107">(</span><span class="ident" id="7363108">i</span><span class="op" id="7363109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363112">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363115">err</span>&nbsp;<span class="op" id="7363119">:=</span>&nbsp;<span class="ident" id="7363122">enc</span><span class="op" id="7363125">.</span><span class="ident" id="7363126">Encode</span><span class="op" id="7363132">(</span><span class="ident" id="7363133">a</span><span class="op" id="7363134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363137">if</span>&nbsp;<span class="ident" id="7363140">err</span>&nbsp;<span class="op" id="7363144">!=</span>&nbsp;<span class="ident" id="7363147">nil</span>&nbsp;<span class="op" id="7363151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363155">t</span><span class="op" id="7363156">.</span><span class="ident" id="7363157">Fatal</span><span class="op" id="7363162">(</span><span class="string" id="7363163">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7363178">,</span>&nbsp;<span class="ident" id="7363180">err</span><span class="op" id="7363183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363189">dec</span>&nbsp;<span class="op" id="7363193">:=</span>&nbsp;<span class="ident" id="7363196">NewDecoder</span><span class="op" id="7363206">(</span><span class="ident" id="7363207">b</span><span class="op" id="7363208">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363211">x</span>&nbsp;<span class="op" id="7363213">:=</span>&nbsp;<span class="builtinfunc" id="7363216">new</span><span class="op" id="7363219">(</span><span class="ident" id="7363220">GobTestIndirectArrayEncDec</span><span class="op" id="7363246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363249">err</span>&nbsp;<span class="op" id="7363253">=</span>&nbsp;<span class="ident" id="7363255">dec</span><span class="op" id="7363258">.</span><span class="ident" id="7363259">Decode</span><span class="op" id="7363265">(</span><span class="ident" id="7363266">x</span><span class="op" id="7363267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363270">if</span>&nbsp;<span class="ident" id="7363273">err</span>&nbsp;<span class="op" id="7363277">!=</span>&nbsp;<span class="ident" id="7363280">nil</span>&nbsp;<span class="op" id="7363284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363288">t</span><span class="op" id="7363289">.</span><span class="ident" id="7363290">Fatal</span><span class="op" id="7363295">(</span><span class="string" id="7363296">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7363311">,</span>&nbsp;<span class="ident" id="7363313">err</span><span class="op" id="7363316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363319">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363322">for</span>&nbsp;<span class="ident" id="7363326">i</span><span class="op" id="7363327">,</span>&nbsp;<span class="ident" id="7363329">v</span>&nbsp;<span class="op" id="7363331">:=</span>&nbsp;<span class="keyword" id="7363334">range</span>&nbsp;<span class="op" id="7363340">(</span><span class="op" id="7363341">*</span><span class="op" id="7363342">*</span><span class="op" id="7363343">*</span><span class="ident" id="7363344">x</span><span class="op" id="7363345">.</span><span class="ident" id="7363346">A</span><span class="op" id="7363347">)</span><span class="op" id="7363348">.</span><span class="ident" id="7363349">a</span>&nbsp;<span class="op" id="7363351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363355">if</span>&nbsp;<span class="ident" id="7363358">v</span>&nbsp;<span class="op" id="7363360">!=</span>&nbsp;<span class="builtintype" id="7363363">byte</span><span class="op" id="7363367">(</span><span class="ident" id="7363368">i</span><span class="op" id="7363369">)</span>&nbsp;<span class="op" id="7363371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363376">t</span><span class="op" id="7363377">.</span><span class="ident" id="7363378">Errorf</span><span class="op" id="7363384">(</span><span class="string" id="7363385">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7363405">,</span>&nbsp;<span class="builtintype" id="7363407">byte</span><span class="op" id="7363411">(</span><span class="ident" id="7363412">i</span><span class="op" id="7363413">)</span><span class="op" id="7363414">,</span>&nbsp;<span class="ident" id="7363416">v</span><span class="op" id="7363417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363422">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363430">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363433">}</span><br>
<span class="lineno"></span><span class="op" id="7363435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7363438">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7363500">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="7363563">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="7363624">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="7363684">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="7363707">func</span>&nbsp;<span class="ident" id="7363712">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="7363747">(</span><span class="ident" id="7363748">t</span>&nbsp;<span class="op" id="7363750">*</span><span class="ident" id="7363751">testing</span><span class="op" id="7363758">.</span><span class="ident" id="7363759">T</span><span class="op" id="7363760">)</span>&nbsp;<span class="op" id="7363762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363765">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363809">b</span>&nbsp;<span class="op" id="7363811">:=</span>&nbsp;<span class="builtinfunc" id="7363814">new</span><span class="op" id="7363817">(</span><span class="ident" id="7363818">bytes</span><span class="op" id="7363823">.</span><span class="ident" id="7363824">Buffer</span><span class="op" id="7363830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363833">enc</span>&nbsp;<span class="op" id="7363837">:=</span>&nbsp;<span class="ident" id="7363840">NewEncoder</span><span class="op" id="7363850">(</span><span class="ident" id="7363851">b</span><span class="op" id="7363852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363855">err</span>&nbsp;<span class="op" id="7363859">:=</span>&nbsp;<span class="ident" id="7363862">enc</span><span class="op" id="7363865">.</span><span class="ident" id="7363866">Encode</span><span class="op" id="7363872">(</span><span class="ident" id="7363873">GobTest1</span><span class="op" id="7363881">{</span><span class="num" id="7363882">17</span><span class="op" id="7363884">,</span>&nbsp;<span class="op" id="7363886">&amp;</span><span class="ident" id="7363887">StringStruct</span><span class="op" id="7363899">{</span><span class="string" id="7363900">&#34;ABC&#34;</span><span class="op" id="7363905">}</span><span class="op" id="7363906">}</span><span class="op" id="7363907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363910">if</span>&nbsp;<span class="ident" id="7363913">err</span>&nbsp;<span class="op" id="7363917">!=</span>&nbsp;<span class="ident" id="7363920">nil</span>&nbsp;<span class="op" id="7363924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363928">t</span><span class="op" id="7363929">.</span><span class="ident" id="7363930">Fatal</span><span class="op" id="7363935">(</span><span class="string" id="7363936">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7363951">,</span>&nbsp;<span class="ident" id="7363953">err</span><span class="op" id="7363956">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363962">dec</span>&nbsp;<span class="op" id="7363966">:=</span>&nbsp;<span class="ident" id="7363969">NewDecoder</span><span class="op" id="7363979">(</span><span class="ident" id="7363980">b</span><span class="op" id="7363981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363984">x</span>&nbsp;<span class="op" id="7363986">:=</span>&nbsp;<span class="builtinfunc" id="7363989">new</span><span class="op" id="7363992">(</span><span class="ident" id="7363993">GobTest0</span><span class="op" id="7364001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364004">err</span>&nbsp;<span class="op" id="7364008">=</span>&nbsp;<span class="ident" id="7364010">dec</span><span class="op" id="7364013">.</span><span class="ident" id="7364014">Decode</span><span class="op" id="7364020">(</span><span class="ident" id="7364021">x</span><span class="op" id="7364022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364025">if</span>&nbsp;<span class="ident" id="7364028">err</span>&nbsp;<span class="op" id="7364032">!=</span>&nbsp;<span class="ident" id="7364035">nil</span>&nbsp;<span class="op" id="7364039">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364043">t</span><span class="op" id="7364044">.</span><span class="ident" id="7364045">Fatal</span><span class="op" id="7364050">(</span><span class="string" id="7364051">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7364066">,</span>&nbsp;<span class="ident" id="7364068">err</span><span class="op" id="7364071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364077">if</span>&nbsp;<span class="ident" id="7364080">x</span><span class="op" id="7364081">.</span><span class="ident" id="7364082">G</span><span class="op" id="7364083">.</span><span class="ident" id="7364084">a</span>&nbsp;<span class="op" id="7364086">!=</span>&nbsp;<span class="string" id="7364089">&#39;A&#39;</span>&nbsp;<span class="op" id="7364093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364097">t</span><span class="op" id="7364098">.</span><span class="ident" id="7364099">Errorf</span><span class="op" id="7364105">(</span><span class="string" id="7364106">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7364127">,</span>&nbsp;<span class="ident" id="7364129">x</span><span class="op" id="7364130">.</span><span class="ident" id="7364131">G</span><span class="op" id="7364132">.</span><span class="ident" id="7364133">a</span><span class="op" id="7364134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364137">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364140">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364202">b</span><span class="op" id="7364203">.</span><span class="ident" id="7364204">Reset</span><span class="op" id="7364209">(</span><span class="op" id="7364210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364213">err</span>&nbsp;<span class="op" id="7364217">=</span>&nbsp;<span class="ident" id="7364219">enc</span><span class="op" id="7364222">.</span><span class="ident" id="7364223">Encode</span><span class="op" id="7364229">(</span><span class="ident" id="7364230">GobTest0</span><span class="op" id="7364238">{</span><span class="num" id="7364239">17</span><span class="op" id="7364241">,</span>&nbsp;<span class="op" id="7364243">&amp;</span><span class="ident" id="7364244">ByteStruct</span><span class="op" id="7364254">{</span><span class="string" id="7364255">&#39;X&#39;</span><span class="op" id="7364258">}</span><span class="op" id="7364259">}</span><span class="op" id="7364260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364263">if</span>&nbsp;<span class="ident" id="7364266">err</span>&nbsp;<span class="op" id="7364270">!=</span>&nbsp;<span class="ident" id="7364273">nil</span>&nbsp;<span class="op" id="7364277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364281">t</span><span class="op" id="7364282">.</span><span class="ident" id="7364283">Fatal</span><span class="op" id="7364288">(</span><span class="string" id="7364289">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7364304">,</span>&nbsp;<span class="ident" id="7364306">err</span><span class="op" id="7364309">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364315">y</span>&nbsp;<span class="op" id="7364317">:=</span>&nbsp;<span class="builtinfunc" id="7364320">new</span><span class="op" id="7364323">(</span><span class="ident" id="7364324">GobTest1</span><span class="op" id="7364332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364335">err</span>&nbsp;<span class="op" id="7364339">=</span>&nbsp;<span class="ident" id="7364341">dec</span><span class="op" id="7364344">.</span><span class="ident" id="7364345">Decode</span><span class="op" id="7364351">(</span><span class="ident" id="7364352">y</span><span class="op" id="7364353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364356">if</span>&nbsp;<span class="ident" id="7364359">err</span>&nbsp;<span class="op" id="7364363">!=</span>&nbsp;<span class="ident" id="7364366">nil</span>&nbsp;<span class="op" id="7364370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364374">t</span><span class="op" id="7364375">.</span><span class="ident" id="7364376">Fatal</span><span class="op" id="7364381">(</span><span class="string" id="7364382">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7364397">,</span>&nbsp;<span class="ident" id="7364399">err</span><span class="op" id="7364402">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364408">if</span>&nbsp;<span class="ident" id="7364411">y</span><span class="op" id="7364412">.</span><span class="ident" id="7364413">G</span><span class="op" id="7364414">.</span><span class="ident" id="7364415">s</span>&nbsp;<span class="op" id="7364417">!=</span>&nbsp;<span class="string" id="7364420">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="7364426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364430">t</span><span class="op" id="7364431">.</span><span class="ident" id="7364432">Fatalf</span><span class="op" id="7364438">(</span><span class="string" id="7364439">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7364462">,</span>&nbsp;<span class="ident" id="7364464">y</span><span class="op" id="7364465">.</span><span class="ident" id="7364466">G</span><span class="op" id="7364467">.</span><span class="ident" id="7364468">s</span><span class="op" id="7364469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364472">}</span><br>
<span class="lineno"></span><span class="op" id="7364474">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="7364477">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="7364539">func</span>&nbsp;<span class="ident" id="7364544">TestGobEncoderValueEncoder</span><span class="op" id="7364570">(</span><span class="ident" id="7364571">t</span>&nbsp;<span class="op" id="7364573">*</span><span class="ident" id="7364574">testing</span><span class="op" id="7364581">.</span><span class="ident" id="7364582">T</span><span class="op" id="7364583">)</span>&nbsp;<span class="op" id="7364585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364588">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364632">b</span>&nbsp;<span class="op" id="7364634">:=</span>&nbsp;<span class="builtinfunc" id="7364637">new</span><span class="op" id="7364640">(</span><span class="ident" id="7364641">bytes</span><span class="op" id="7364646">.</span><span class="ident" id="7364647">Buffer</span><span class="op" id="7364653">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364656">enc</span>&nbsp;<span class="op" id="7364660">:=</span>&nbsp;<span class="ident" id="7364663">NewEncoder</span><span class="op" id="7364673">(</span><span class="ident" id="7364674">b</span><span class="op" id="7364675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364678">err</span>&nbsp;<span class="op" id="7364682">:=</span>&nbsp;<span class="ident" id="7364685">enc</span><span class="op" id="7364688">.</span><span class="ident" id="7364689">Encode</span><span class="op" id="7364695">(</span><span class="ident" id="7364696">GobTest4</span><span class="op" id="7364704">{</span><span class="num" id="7364705">17</span><span class="op" id="7364707">,</span>&nbsp;<span class="ident" id="7364709">ValueGobber</span><span class="op" id="7364720">(</span><span class="string" id="7364721">&#34;hello&#34;</span><span class="op" id="7364728">)</span><span class="op" id="7364729">,</span>&nbsp;<span class="ident" id="7364731">BinaryValueGobber</span><span class="op" id="7364748">(</span><span class="string" id="7364749">&#34;Καλημέρα&#34;</span><span class="op" id="7364767">)</span><span class="op" id="7364768">,</span>&nbsp;<span class="ident" id="7364770">TextValueGobber</span><span class="op" id="7364785">(</span><span class="string" id="7364786">&#34;こんにちは&#34;</span><span class="op" id="7364803">)</span><span class="op" id="7364804">}</span><span class="op" id="7364805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364808">if</span>&nbsp;<span class="ident" id="7364811">err</span>&nbsp;<span class="op" id="7364815">!=</span>&nbsp;<span class="ident" id="7364818">nil</span>&nbsp;<span class="op" id="7364822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364826">t</span><span class="op" id="7364827">.</span><span class="ident" id="7364828">Fatal</span><span class="op" id="7364833">(</span><span class="string" id="7364834">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7364849">,</span>&nbsp;<span class="ident" id="7364851">err</span><span class="op" id="7364854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364857">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364860">dec</span>&nbsp;<span class="op" id="7364864">:=</span>&nbsp;<span class="ident" id="7364867">NewDecoder</span><span class="op" id="7364877">(</span><span class="ident" id="7364878">b</span><span class="op" id="7364879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364882">x</span>&nbsp;<span class="op" id="7364884">:=</span>&nbsp;<span class="builtinfunc" id="7364887">new</span><span class="op" id="7364890">(</span><span class="ident" id="7364891">GobTest5</span><span class="op" id="7364899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364902">err</span>&nbsp;<span class="op" id="7364906">=</span>&nbsp;<span class="ident" id="7364908">dec</span><span class="op" id="7364911">.</span><span class="ident" id="7364912">Decode</span><span class="op" id="7364918">(</span><span class="ident" id="7364919">x</span><span class="op" id="7364920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364923">if</span>&nbsp;<span class="ident" id="7364926">err</span>&nbsp;<span class="op" id="7364930">!=</span>&nbsp;<span class="ident" id="7364933">nil</span>&nbsp;<span class="op" id="7364937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364941">t</span><span class="op" id="7364942">.</span><span class="ident" id="7364943">Fatal</span><span class="op" id="7364948">(</span><span class="string" id="7364949">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7364964">,</span>&nbsp;<span class="ident" id="7364966">err</span><span class="op" id="7364969">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364975">if</span>&nbsp;<span class="op" id="7364978">*</span><span class="ident" id="7364979">x</span><span class="op" id="7364980">.</span><span class="ident" id="7364981">V</span>&nbsp;<span class="op" id="7364983">!=</span>&nbsp;<span class="string" id="7364986">&#34;hello&#34;</span>&nbsp;<span class="op" id="7364994">||</span>&nbsp;<span class="op" id="7364997">*</span><span class="ident" id="7364998">x</span><span class="op" id="7364999">.</span><span class="ident" id="7365000">BV</span>&nbsp;<span class="op" id="7365003">!=</span>&nbsp;<span class="string" id="7365006">&#34;Καλημέρα&#34;</span>&nbsp;<span class="op" id="7365025">||</span>&nbsp;<span class="op" id="7365028">*</span><span class="ident" id="7365029">x</span><span class="op" id="7365030">.</span><span class="ident" id="7365031">TV</span>&nbsp;<span class="op" id="7365034">!=</span>&nbsp;<span class="string" id="7365037">&#34;こんにちは&#34;</span>&nbsp;<span class="op" id="7365055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365059">t</span><span class="op" id="7365060">.</span><span class="ident" id="7365061">Errorf</span><span class="op" id="7365067">(</span><span class="string" id="7365068">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7365093">,</span>&nbsp;<span class="op" id="7365095">*</span><span class="ident" id="7365096">x</span><span class="op" id="7365097">.</span><span class="ident" id="7365098">V</span><span class="op" id="7365099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365102">}</span><br>
<span class="lineno"></span><span class="op" id="7365104">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="7365107">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7365175">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="7365216">func</span>&nbsp;<span class="ident" id="7365221">TestGobEncoderValueThenPointer</span><span class="op" id="7365251">(</span><span class="ident" id="7365252">t</span>&nbsp;<span class="op" id="7365254">*</span><span class="ident" id="7365255">testing</span><span class="op" id="7365262">.</span><span class="ident" id="7365263">T</span><span class="op" id="7365264">)</span>&nbsp;<span class="op" id="7365266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365269">v</span>&nbsp;<span class="op" id="7365271">:=</span>&nbsp;<span class="ident" id="7365274">ValueGobber</span><span class="op" id="7365285">(</span><span class="string" id="7365286">&#34;forty-two&#34;</span><span class="op" id="7365297">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365300">w</span>&nbsp;<span class="op" id="7365302">:=</span>&nbsp;<span class="ident" id="7365305">ValueGobber</span><span class="op" id="7365316">(</span><span class="string" id="7365317">&#34;six-by-nine&#34;</span><span class="op" id="7365330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365333">bv</span>&nbsp;<span class="op" id="7365336">:=</span>&nbsp;<span class="ident" id="7365339">BinaryValueGobber</span><span class="op" id="7365356">(</span><span class="string" id="7365357">&#34;1nanocentury&#34;</span><span class="op" id="7365371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365374">bw</span>&nbsp;<span class="op" id="7365377">:=</span>&nbsp;<span class="ident" id="7365380">BinaryValueGobber</span><span class="op" id="7365397">(</span><span class="string" id="7365398">&#34;πseconds&#34;</span><span class="op" id="7365409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365412">tv</span>&nbsp;<span class="op" id="7365415">:=</span>&nbsp;<span class="ident" id="7365418">TextValueGobber</span><span class="op" id="7365433">(</span><span class="string" id="7365434">&#34;gravitationalacceleration&#34;</span><span class="op" id="7365461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365464">tw</span>&nbsp;<span class="op" id="7365467">:=</span>&nbsp;<span class="ident" id="7365470">TextValueGobber</span><span class="op" id="7365485">(</span><span class="string" id="7365486">&#34;π²ft/s²&#34;</span><span class="op" id="7365498">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365502">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365573">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365637">b</span>&nbsp;<span class="op" id="7365639">:=</span>&nbsp;<span class="builtinfunc" id="7365642">new</span><span class="op" id="7365645">(</span><span class="ident" id="7365646">bytes</span><span class="op" id="7365651">.</span><span class="ident" id="7365652">Buffer</span><span class="op" id="7365658">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365661">enc</span>&nbsp;<span class="op" id="7365665">:=</span>&nbsp;<span class="ident" id="7365668">NewEncoder</span><span class="op" id="7365678">(</span><span class="ident" id="7365679">b</span><span class="op" id="7365680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365683">if</span>&nbsp;<span class="ident" id="7365686">err</span>&nbsp;<span class="op" id="7365690">:=</span>&nbsp;<span class="ident" id="7365693">enc</span><span class="op" id="7365696">.</span><span class="ident" id="7365697">Encode</span><span class="op" id="7365703">(</span><span class="ident" id="7365704">GobTest6</span><span class="op" id="7365712">{</span><span class="num" id="7365713">42</span><span class="op" id="7365715">,</span>&nbsp;<span class="ident" id="7365717">v</span><span class="op" id="7365718">,</span>&nbsp;<span class="op" id="7365720">&amp;</span><span class="ident" id="7365721">w</span><span class="op" id="7365722">,</span>&nbsp;<span class="ident" id="7365724">bv</span><span class="op" id="7365726">,</span>&nbsp;<span class="op" id="7365728">&amp;</span><span class="ident" id="7365729">bw</span><span class="op" id="7365731">,</span>&nbsp;<span class="ident" id="7365733">tv</span><span class="op" id="7365735">,</span>&nbsp;<span class="op" id="7365737">&amp;</span><span class="ident" id="7365738">tw</span><span class="op" id="7365740">}</span><span class="op" id="7365741">)</span><span class="op" id="7365742">;</span>&nbsp;<span class="ident" id="7365744">err</span>&nbsp;<span class="op" id="7365748">!=</span>&nbsp;<span class="ident" id="7365751">nil</span>&nbsp;<span class="op" id="7365755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365759">t</span><span class="op" id="7365760">.</span><span class="ident" id="7365761">Fatal</span><span class="op" id="7365766">(</span><span class="string" id="7365767">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7365782">,</span>&nbsp;<span class="ident" id="7365784">err</span><span class="op" id="7365787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365793">dec</span>&nbsp;<span class="op" id="7365797">:=</span>&nbsp;<span class="ident" id="7365800">NewDecoder</span><span class="op" id="7365810">(</span><span class="ident" id="7365811">b</span><span class="op" id="7365812">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365815">x</span>&nbsp;<span class="op" id="7365817">:=</span>&nbsp;<span class="builtinfunc" id="7365820">new</span><span class="op" id="7365823">(</span><span class="ident" id="7365824">GobTest6</span><span class="op" id="7365832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365835">if</span>&nbsp;<span class="ident" id="7365838">err</span>&nbsp;<span class="op" id="7365842">:=</span>&nbsp;<span class="ident" id="7365845">dec</span><span class="op" id="7365848">.</span><span class="ident" id="7365849">Decode</span><span class="op" id="7365855">(</span><span class="ident" id="7365856">x</span><span class="op" id="7365857">)</span><span class="op" id="7365858">;</span>&nbsp;<span class="ident" id="7365860">err</span>&nbsp;<span class="op" id="7365864">!=</span>&nbsp;<span class="ident" id="7365867">nil</span>&nbsp;<span class="op" id="7365871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365875">t</span><span class="op" id="7365876">.</span><span class="ident" id="7365877">Fatal</span><span class="op" id="7365882">(</span><span class="string" id="7365883">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7365898">,</span>&nbsp;<span class="ident" id="7365900">err</span><span class="op" id="7365903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365910">if</span>&nbsp;<span class="ident" id="7365913">got</span><span class="op" id="7365916">,</span>&nbsp;<span class="ident" id="7365918">want</span>&nbsp;<span class="op" id="7365923">:=</span>&nbsp;<span class="ident" id="7365926">x</span><span class="op" id="7365927">.</span><span class="ident" id="7365928">V</span><span class="op" id="7365929">,</span>&nbsp;<span class="ident" id="7365931">v</span><span class="op" id="7365932">;</span>&nbsp;<span class="ident" id="7365934">got</span>&nbsp;<span class="op" id="7365938">!=</span>&nbsp;<span class="ident" id="7365941">want</span>&nbsp;<span class="op" id="7365946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365950">t</span><span class="op" id="7365951">.</span><span class="ident" id="7365952">Errorf</span><span class="op" id="7365958">(</span><span class="string" id="7365959">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7365976">,</span>&nbsp;<span class="ident" id="7365978">got</span><span class="op" id="7365981">,</span>&nbsp;<span class="ident" id="7365983">want</span><span class="op" id="7365987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365993">if</span>&nbsp;<span class="ident" id="7365996">got</span><span class="op" id="7365999">,</span>&nbsp;<span class="ident" id="7366001">want</span>&nbsp;<span class="op" id="7366006">:=</span>&nbsp;<span class="ident" id="7366009">x</span><span class="op" id="7366010">.</span><span class="ident" id="7366011">W</span><span class="op" id="7366012">,</span>&nbsp;<span class="ident" id="7366014">w</span><span class="op" id="7366015">;</span>&nbsp;<span class="ident" id="7366017">got</span>&nbsp;<span class="op" id="7366021">==</span>&nbsp;<span class="ident" id="7366024">nil</span>&nbsp;<span class="op" id="7366028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366032">t</span><span class="op" id="7366033">.</span><span class="ident" id="7366034">Errorf</span><span class="op" id="7366040">(</span><span class="string" id="7366041">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366059">,</span>&nbsp;<span class="ident" id="7366061">want</span><span class="op" id="7366065">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366068">}</span>&nbsp;<span class="keyword" id="7366070">else</span>&nbsp;<span class="keyword" id="7366075">if</span>&nbsp;<span class="op" id="7366078">*</span><span class="ident" id="7366079">got</span>&nbsp;<span class="op" id="7366083">!=</span>&nbsp;<span class="ident" id="7366086">want</span>&nbsp;<span class="op" id="7366091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366095">t</span><span class="op" id="7366096">.</span><span class="ident" id="7366097">Errorf</span><span class="op" id="7366103">(</span><span class="string" id="7366104">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366121">,</span>&nbsp;<span class="op" id="7366123">*</span><span class="ident" id="7366124">got</span><span class="op" id="7366127">,</span>&nbsp;<span class="ident" id="7366129">want</span><span class="op" id="7366133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366140">if</span>&nbsp;<span class="ident" id="7366143">got</span><span class="op" id="7366146">,</span>&nbsp;<span class="ident" id="7366148">want</span>&nbsp;<span class="op" id="7366153">:=</span>&nbsp;<span class="ident" id="7366156">x</span><span class="op" id="7366157">.</span><span class="ident" id="7366158">BV</span><span class="op" id="7366160">,</span>&nbsp;<span class="ident" id="7366162">bv</span><span class="op" id="7366164">;</span>&nbsp;<span class="ident" id="7366166">got</span>&nbsp;<span class="op" id="7366170">!=</span>&nbsp;<span class="ident" id="7366173">want</span>&nbsp;<span class="op" id="7366178">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366182">t</span><span class="op" id="7366183">.</span><span class="ident" id="7366184">Errorf</span><span class="op" id="7366190">(</span><span class="string" id="7366191">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366209">,</span>&nbsp;<span class="ident" id="7366211">got</span><span class="op" id="7366214">,</span>&nbsp;<span class="ident" id="7366216">want</span><span class="op" id="7366220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366226">if</span>&nbsp;<span class="ident" id="7366229">got</span><span class="op" id="7366232">,</span>&nbsp;<span class="ident" id="7366234">want</span>&nbsp;<span class="op" id="7366239">:=</span>&nbsp;<span class="ident" id="7366242">x</span><span class="op" id="7366243">.</span><span class="ident" id="7366244">BW</span><span class="op" id="7366246">,</span>&nbsp;<span class="ident" id="7366248">bw</span><span class="op" id="7366250">;</span>&nbsp;<span class="ident" id="7366252">got</span>&nbsp;<span class="op" id="7366256">==</span>&nbsp;<span class="ident" id="7366259">nil</span>&nbsp;<span class="op" id="7366263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366267">t</span><span class="op" id="7366268">.</span><span class="ident" id="7366269">Errorf</span><span class="op" id="7366275">(</span><span class="string" id="7366276">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366295">,</span>&nbsp;<span class="ident" id="7366297">want</span><span class="op" id="7366301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366304">}</span>&nbsp;<span class="keyword" id="7366306">else</span>&nbsp;<span class="keyword" id="7366311">if</span>&nbsp;<span class="op" id="7366314">*</span><span class="ident" id="7366315">got</span>&nbsp;<span class="op" id="7366319">!=</span>&nbsp;<span class="ident" id="7366322">want</span>&nbsp;<span class="op" id="7366327">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366331">t</span><span class="op" id="7366332">.</span><span class="ident" id="7366333">Errorf</span><span class="op" id="7366339">(</span><span class="string" id="7366340">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366358">,</span>&nbsp;<span class="op" id="7366360">*</span><span class="ident" id="7366361">got</span><span class="op" id="7366364">,</span>&nbsp;<span class="ident" id="7366366">want</span><span class="op" id="7366370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366377">if</span>&nbsp;<span class="ident" id="7366380">got</span><span class="op" id="7366383">,</span>&nbsp;<span class="ident" id="7366385">want</span>&nbsp;<span class="op" id="7366390">:=</span>&nbsp;<span class="ident" id="7366393">x</span><span class="op" id="7366394">.</span><span class="ident" id="7366395">TV</span><span class="op" id="7366397">,</span>&nbsp;<span class="ident" id="7366399">tv</span><span class="op" id="7366401">;</span>&nbsp;<span class="ident" id="7366403">got</span>&nbsp;<span class="op" id="7366407">!=</span>&nbsp;<span class="ident" id="7366410">want</span>&nbsp;<span class="op" id="7366415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366419">t</span><span class="op" id="7366420">.</span><span class="ident" id="7366421">Errorf</span><span class="op" id="7366427">(</span><span class="string" id="7366428">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366446">,</span>&nbsp;<span class="ident" id="7366448">got</span><span class="op" id="7366451">,</span>&nbsp;<span class="ident" id="7366453">want</span><span class="op" id="7366457">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366463">if</span>&nbsp;<span class="ident" id="7366466">got</span><span class="op" id="7366469">,</span>&nbsp;<span class="ident" id="7366471">want</span>&nbsp;<span class="op" id="7366476">:=</span>&nbsp;<span class="ident" id="7366479">x</span><span class="op" id="7366480">.</span><span class="ident" id="7366481">TW</span><span class="op" id="7366483">,</span>&nbsp;<span class="ident" id="7366485">tw</span><span class="op" id="7366487">;</span>&nbsp;<span class="ident" id="7366489">got</span>&nbsp;<span class="op" id="7366493">==</span>&nbsp;<span class="ident" id="7366496">nil</span>&nbsp;<span class="op" id="7366500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366504">t</span><span class="op" id="7366505">.</span><span class="ident" id="7366506">Errorf</span><span class="op" id="7366512">(</span><span class="string" id="7366513">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366532">,</span>&nbsp;<span class="ident" id="7366534">want</span><span class="op" id="7366538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366541">}</span>&nbsp;<span class="keyword" id="7366543">else</span>&nbsp;<span class="keyword" id="7366548">if</span>&nbsp;<span class="op" id="7366551">*</span><span class="ident" id="7366552">got</span>&nbsp;<span class="op" id="7366556">!=</span>&nbsp;<span class="ident" id="7366559">want</span>&nbsp;<span class="op" id="7366564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366568">t</span><span class="op" id="7366569">.</span><span class="ident" id="7366570">Errorf</span><span class="op" id="7366576">(</span><span class="string" id="7366577">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7366595">,</span>&nbsp;<span class="op" id="7366597">*</span><span class="ident" id="7366598">got</span><span class="op" id="7366601">,</span>&nbsp;<span class="ident" id="7366603">want</span><span class="op" id="7366607">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366610">}</span><br>
<span class="lineno"></span><span class="op" id="7366612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7366615">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7366683">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="7366713">func</span>&nbsp;<span class="ident" id="7366718">TestGobEncoderPointerThenValue</span><span class="op" id="7366748">(</span><span class="ident" id="7366749">t</span>&nbsp;<span class="op" id="7366751">*</span><span class="ident" id="7366752">testing</span><span class="op" id="7366759">.</span><span class="ident" id="7366760">T</span><span class="op" id="7366761">)</span>&nbsp;<span class="op" id="7366763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366766">v</span>&nbsp;<span class="op" id="7366768">:=</span>&nbsp;<span class="ident" id="7366771">ValueGobber</span><span class="op" id="7366782">(</span><span class="string" id="7366783">&#34;forty-two&#34;</span><span class="op" id="7366794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366797">w</span>&nbsp;<span class="op" id="7366799">:=</span>&nbsp;<span class="ident" id="7366802">ValueGobber</span><span class="op" id="7366813">(</span><span class="string" id="7366814">&#34;six-by-nine&#34;</span><span class="op" id="7366827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366830">bv</span>&nbsp;<span class="op" id="7366833">:=</span>&nbsp;<span class="ident" id="7366836">BinaryValueGobber</span><span class="op" id="7366853">(</span><span class="string" id="7366854">&#34;1nanocentury&#34;</span><span class="op" id="7366868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366871">bw</span>&nbsp;<span class="op" id="7366874">:=</span>&nbsp;<span class="ident" id="7366877">BinaryValueGobber</span><span class="op" id="7366894">(</span><span class="string" id="7366895">&#34;πseconds&#34;</span><span class="op" id="7366906">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366909">tv</span>&nbsp;<span class="op" id="7366912">:=</span>&nbsp;<span class="ident" id="7366915">TextValueGobber</span><span class="op" id="7366930">(</span><span class="string" id="7366931">&#34;gravitationalacceleration&#34;</span><span class="op" id="7366958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366961">tw</span>&nbsp;<span class="op" id="7366964">:=</span>&nbsp;<span class="ident" id="7366967">TextValueGobber</span><span class="op" id="7366982">(</span><span class="string" id="7366983">&#34;π²ft/s²&#34;</span><span class="op" id="7366995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366999">b</span>&nbsp;<span class="op" id="7367001">:=</span>&nbsp;<span class="builtinfunc" id="7367004">new</span><span class="op" id="7367007">(</span><span class="ident" id="7367008">bytes</span><span class="op" id="7367013">.</span><span class="ident" id="7367014">Buffer</span><span class="op" id="7367020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367023">enc</span>&nbsp;<span class="op" id="7367027">:=</span>&nbsp;<span class="ident" id="7367030">NewEncoder</span><span class="op" id="7367040">(</span><span class="ident" id="7367041">b</span><span class="op" id="7367042">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367045">if</span>&nbsp;<span class="ident" id="7367048">err</span>&nbsp;<span class="op" id="7367052">:=</span>&nbsp;<span class="ident" id="7367055">enc</span><span class="op" id="7367058">.</span><span class="ident" id="7367059">Encode</span><span class="op" id="7367065">(</span><span class="ident" id="7367066">GobTest7</span><span class="op" id="7367074">{</span><span class="num" id="7367075">42</span><span class="op" id="7367077">,</span>&nbsp;<span class="op" id="7367079">&amp;</span><span class="ident" id="7367080">v</span><span class="op" id="7367081">,</span>&nbsp;<span class="ident" id="7367083">w</span><span class="op" id="7367084">,</span>&nbsp;<span class="op" id="7367086">&amp;</span><span class="ident" id="7367087">bv</span><span class="op" id="7367089">,</span>&nbsp;<span class="ident" id="7367091">bw</span><span class="op" id="7367093">,</span>&nbsp;<span class="op" id="7367095">&amp;</span><span class="ident" id="7367096">tv</span><span class="op" id="7367098">,</span>&nbsp;<span class="ident" id="7367100">tw</span><span class="op" id="7367102">}</span><span class="op" id="7367103">)</span><span class="op" id="7367104">;</span>&nbsp;<span class="ident" id="7367106">err</span>&nbsp;<span class="op" id="7367110">!=</span>&nbsp;<span class="ident" id="7367113">nil</span>&nbsp;<span class="op" id="7367117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367121">t</span><span class="op" id="7367122">.</span><span class="ident" id="7367123">Fatal</span><span class="op" id="7367128">(</span><span class="string" id="7367129">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7367144">,</span>&nbsp;<span class="ident" id="7367146">err</span><span class="op" id="7367149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367155">dec</span>&nbsp;<span class="op" id="7367159">:=</span>&nbsp;<span class="ident" id="7367162">NewDecoder</span><span class="op" id="7367172">(</span><span class="ident" id="7367173">b</span><span class="op" id="7367174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367177">x</span>&nbsp;<span class="op" id="7367179">:=</span>&nbsp;<span class="builtinfunc" id="7367182">new</span><span class="op" id="7367185">(</span><span class="ident" id="7367186">GobTest7</span><span class="op" id="7367194">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367197">if</span>&nbsp;<span class="ident" id="7367200">err</span>&nbsp;<span class="op" id="7367204">:=</span>&nbsp;<span class="ident" id="7367207">dec</span><span class="op" id="7367210">.</span><span class="ident" id="7367211">Decode</span><span class="op" id="7367217">(</span><span class="ident" id="7367218">x</span><span class="op" id="7367219">)</span><span class="op" id="7367220">;</span>&nbsp;<span class="ident" id="7367222">err</span>&nbsp;<span class="op" id="7367226">!=</span>&nbsp;<span class="ident" id="7367229">nil</span>&nbsp;<span class="op" id="7367233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367237">t</span><span class="op" id="7367238">.</span><span class="ident" id="7367239">Fatal</span><span class="op" id="7367244">(</span><span class="string" id="7367245">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7367260">,</span>&nbsp;<span class="ident" id="7367262">err</span><span class="op" id="7367265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367272">if</span>&nbsp;<span class="ident" id="7367275">got</span><span class="op" id="7367278">,</span>&nbsp;<span class="ident" id="7367280">want</span>&nbsp;<span class="op" id="7367285">:=</span>&nbsp;<span class="ident" id="7367288">x</span><span class="op" id="7367289">.</span><span class="ident" id="7367290">V</span><span class="op" id="7367291">,</span>&nbsp;<span class="ident" id="7367293">v</span><span class="op" id="7367294">;</span>&nbsp;<span class="ident" id="7367296">got</span>&nbsp;<span class="op" id="7367300">==</span>&nbsp;<span class="ident" id="7367303">nil</span>&nbsp;<span class="op" id="7367307">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367311">t</span><span class="op" id="7367312">.</span><span class="ident" id="7367313">Errorf</span><span class="op" id="7367319">(</span><span class="string" id="7367320">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367338">,</span>&nbsp;<span class="ident" id="7367340">want</span><span class="op" id="7367344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367347">}</span>&nbsp;<span class="keyword" id="7367349">else</span>&nbsp;<span class="keyword" id="7367354">if</span>&nbsp;<span class="op" id="7367357">*</span><span class="ident" id="7367358">got</span>&nbsp;<span class="op" id="7367362">!=</span>&nbsp;<span class="ident" id="7367365">want</span>&nbsp;<span class="op" id="7367370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367374">t</span><span class="op" id="7367375">.</span><span class="ident" id="7367376">Errorf</span><span class="op" id="7367382">(</span><span class="string" id="7367383">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367400">,</span>&nbsp;<span class="op" id="7367402">*</span><span class="ident" id="7367403">got</span><span class="op" id="7367406">,</span>&nbsp;<span class="ident" id="7367408">want</span><span class="op" id="7367412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367418">if</span>&nbsp;<span class="ident" id="7367421">got</span><span class="op" id="7367424">,</span>&nbsp;<span class="ident" id="7367426">want</span>&nbsp;<span class="op" id="7367431">:=</span>&nbsp;<span class="ident" id="7367434">x</span><span class="op" id="7367435">.</span><span class="ident" id="7367436">W</span><span class="op" id="7367437">,</span>&nbsp;<span class="ident" id="7367439">w</span><span class="op" id="7367440">;</span>&nbsp;<span class="ident" id="7367442">got</span>&nbsp;<span class="op" id="7367446">!=</span>&nbsp;<span class="ident" id="7367449">want</span>&nbsp;<span class="op" id="7367454">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367458">t</span><span class="op" id="7367459">.</span><span class="ident" id="7367460">Errorf</span><span class="op" id="7367466">(</span><span class="string" id="7367467">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367484">,</span>&nbsp;<span class="ident" id="7367486">got</span><span class="op" id="7367489">,</span>&nbsp;<span class="ident" id="7367491">want</span><span class="op" id="7367495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367502">if</span>&nbsp;<span class="ident" id="7367505">got</span><span class="op" id="7367508">,</span>&nbsp;<span class="ident" id="7367510">want</span>&nbsp;<span class="op" id="7367515">:=</span>&nbsp;<span class="ident" id="7367518">x</span><span class="op" id="7367519">.</span><span class="ident" id="7367520">BV</span><span class="op" id="7367522">,</span>&nbsp;<span class="ident" id="7367524">bv</span><span class="op" id="7367526">;</span>&nbsp;<span class="ident" id="7367528">got</span>&nbsp;<span class="op" id="7367532">==</span>&nbsp;<span class="ident" id="7367535">nil</span>&nbsp;<span class="op" id="7367539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367543">t</span><span class="op" id="7367544">.</span><span class="ident" id="7367545">Errorf</span><span class="op" id="7367551">(</span><span class="string" id="7367552">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367571">,</span>&nbsp;<span class="ident" id="7367573">want</span><span class="op" id="7367577">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367580">}</span>&nbsp;<span class="keyword" id="7367582">else</span>&nbsp;<span class="keyword" id="7367587">if</span>&nbsp;<span class="op" id="7367590">*</span><span class="ident" id="7367591">got</span>&nbsp;<span class="op" id="7367595">!=</span>&nbsp;<span class="ident" id="7367598">want</span>&nbsp;<span class="op" id="7367603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367607">t</span><span class="op" id="7367608">.</span><span class="ident" id="7367609">Errorf</span><span class="op" id="7367615">(</span><span class="string" id="7367616">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367634">,</span>&nbsp;<span class="op" id="7367636">*</span><span class="ident" id="7367637">got</span><span class="op" id="7367640">,</span>&nbsp;<span class="ident" id="7367642">want</span><span class="op" id="7367646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367652">if</span>&nbsp;<span class="ident" id="7367655">got</span><span class="op" id="7367658">,</span>&nbsp;<span class="ident" id="7367660">want</span>&nbsp;<span class="op" id="7367665">:=</span>&nbsp;<span class="ident" id="7367668">x</span><span class="op" id="7367669">.</span><span class="ident" id="7367670">BW</span><span class="op" id="7367672">,</span>&nbsp;<span class="ident" id="7367674">bw</span><span class="op" id="7367676">;</span>&nbsp;<span class="ident" id="7367678">got</span>&nbsp;<span class="op" id="7367682">!=</span>&nbsp;<span class="ident" id="7367685">want</span>&nbsp;<span class="op" id="7367690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367694">t</span><span class="op" id="7367695">.</span><span class="ident" id="7367696">Errorf</span><span class="op" id="7367702">(</span><span class="string" id="7367703">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367721">,</span>&nbsp;<span class="ident" id="7367723">got</span><span class="op" id="7367726">,</span>&nbsp;<span class="ident" id="7367728">want</span><span class="op" id="7367732">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367739">if</span>&nbsp;<span class="ident" id="7367742">got</span><span class="op" id="7367745">,</span>&nbsp;<span class="ident" id="7367747">want</span>&nbsp;<span class="op" id="7367752">:=</span>&nbsp;<span class="ident" id="7367755">x</span><span class="op" id="7367756">.</span><span class="ident" id="7367757">TV</span><span class="op" id="7367759">,</span>&nbsp;<span class="ident" id="7367761">tv</span><span class="op" id="7367763">;</span>&nbsp;<span class="ident" id="7367765">got</span>&nbsp;<span class="op" id="7367769">==</span>&nbsp;<span class="ident" id="7367772">nil</span>&nbsp;<span class="op" id="7367776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367780">t</span><span class="op" id="7367781">.</span><span class="ident" id="7367782">Errorf</span><span class="op" id="7367788">(</span><span class="string" id="7367789">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367808">,</span>&nbsp;<span class="ident" id="7367810">want</span><span class="op" id="7367814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367817">}</span>&nbsp;<span class="keyword" id="7367819">else</span>&nbsp;<span class="keyword" id="7367824">if</span>&nbsp;<span class="op" id="7367827">*</span><span class="ident" id="7367828">got</span>&nbsp;<span class="op" id="7367832">!=</span>&nbsp;<span class="ident" id="7367835">want</span>&nbsp;<span class="op" id="7367840">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367844">t</span><span class="op" id="7367845">.</span><span class="ident" id="7367846">Errorf</span><span class="op" id="7367852">(</span><span class="string" id="7367853">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367871">,</span>&nbsp;<span class="op" id="7367873">*</span><span class="ident" id="7367874">got</span><span class="op" id="7367877">,</span>&nbsp;<span class="ident" id="7367879">want</span><span class="op" id="7367883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367889">if</span>&nbsp;<span class="ident" id="7367892">got</span><span class="op" id="7367895">,</span>&nbsp;<span class="ident" id="7367897">want</span>&nbsp;<span class="op" id="7367902">:=</span>&nbsp;<span class="ident" id="7367905">x</span><span class="op" id="7367906">.</span><span class="ident" id="7367907">TW</span><span class="op" id="7367909">,</span>&nbsp;<span class="ident" id="7367911">tw</span><span class="op" id="7367913">;</span>&nbsp;<span class="ident" id="7367915">got</span>&nbsp;<span class="op" id="7367919">!=</span>&nbsp;<span class="ident" id="7367922">want</span>&nbsp;<span class="op" id="7367927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367931">t</span><span class="op" id="7367932">.</span><span class="ident" id="7367933">Errorf</span><span class="op" id="7367939">(</span><span class="string" id="7367940">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367958">,</span>&nbsp;<span class="ident" id="7367960">got</span><span class="op" id="7367963">,</span>&nbsp;<span class="ident" id="7367965">want</span><span class="op" id="7367969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367972">}</span><br>
<span class="lineno">535</span><span class="op" id="7367974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7367977">func</span>&nbsp;<span class="ident" id="7367982">TestGobEncoderFieldTypeError</span><span class="op" id="7368010">(</span><span class="ident" id="7368011">t</span>&nbsp;<span class="op" id="7368013">*</span><span class="ident" id="7368014">testing</span><span class="op" id="7368021">.</span><span class="ident" id="7368022">T</span><span class="op" id="7368023">)</span>&nbsp;<span class="op" id="7368025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368028">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368065">b</span>&nbsp;<span class="op" id="7368067">:=</span>&nbsp;<span class="builtinfunc" id="7368070">new</span><span class="op" id="7368073">(</span><span class="ident" id="7368074">bytes</span><span class="op" id="7368079">.</span><span class="ident" id="7368080">Buffer</span><span class="op" id="7368086">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368089">enc</span>&nbsp;<span class="op" id="7368093">:=</span>&nbsp;<span class="ident" id="7368096">NewEncoder</span><span class="op" id="7368106">(</span><span class="ident" id="7368107">b</span><span class="op" id="7368108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368111">err</span>&nbsp;<span class="op" id="7368115">:=</span>&nbsp;<span class="ident" id="7368118">enc</span><span class="op" id="7368121">.</span><span class="ident" id="7368122">Encode</span><span class="op" id="7368128">(</span><span class="ident" id="7368129">GobTest1</span><span class="op" id="7368137">{</span><span class="num" id="7368138">17</span><span class="op" id="7368140">,</span>&nbsp;<span class="op" id="7368142">&amp;</span><span class="ident" id="7368143">StringStruct</span><span class="op" id="7368155">{</span><span class="string" id="7368156">&#34;ABC&#34;</span><span class="op" id="7368161">}</span><span class="op" id="7368162">}</span><span class="op" id="7368163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368166">if</span>&nbsp;<span class="ident" id="7368169">err</span>&nbsp;<span class="op" id="7368173">!=</span>&nbsp;<span class="ident" id="7368176">nil</span>&nbsp;<span class="op" id="7368180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368184">t</span><span class="op" id="7368185">.</span><span class="ident" id="7368186">Fatal</span><span class="op" id="7368191">(</span><span class="string" id="7368192">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7368207">,</span>&nbsp;<span class="ident" id="7368209">err</span><span class="op" id="7368212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368215">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368218">dec</span>&nbsp;<span class="op" id="7368222">:=</span>&nbsp;<span class="ident" id="7368225">NewDecoder</span><span class="op" id="7368235">(</span><span class="ident" id="7368236">b</span><span class="op" id="7368237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368240">x</span>&nbsp;<span class="op" id="7368242">:=</span>&nbsp;<span class="op" id="7368245">&amp;</span><span class="ident" id="7368246">GobTest2</span><span class="op" id="7368254">{</span><span class="op" id="7368255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368258">err</span>&nbsp;<span class="op" id="7368262">=</span>&nbsp;<span class="ident" id="7368264">dec</span><span class="op" id="7368267">.</span><span class="ident" id="7368268">Decode</span><span class="op" id="7368274">(</span><span class="ident" id="7368275">x</span><span class="op" id="7368276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368279">if</span>&nbsp;<span class="ident" id="7368282">err</span>&nbsp;<span class="op" id="7368286">==</span>&nbsp;<span class="ident" id="7368289">nil</span>&nbsp;<span class="op" id="7368293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368297">t</span><span class="op" id="7368298">.</span><span class="ident" id="7368299">Fatal</span><span class="op" id="7368304">(</span><span class="string" id="7368305">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="7368375">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368381">if</span>&nbsp;<span class="ident" id="7368384">strings</span><span class="op" id="7368391">.</span><span class="ident" id="7368392">Index</span><span class="op" id="7368397">(</span><span class="ident" id="7368398">err</span><span class="op" id="7368401">.</span><span class="ident" id="7368402">Error</span><span class="op" id="7368407">(</span><span class="op" id="7368408">)</span><span class="op" id="7368409">,</span>&nbsp;<span class="string" id="7368411">&#34;type&#34;</span><span class="op" id="7368417">)</span>&nbsp;<span class="op" id="7368419">&lt;</span>&nbsp;<span class="num" id="7368421">0</span>&nbsp;<span class="op" id="7368423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368427">t</span><span class="op" id="7368428">.</span><span class="ident" id="7368429">Fatal</span><span class="op" id="7368434">(</span><span class="string" id="7368435">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7368461">,</span>&nbsp;<span class="ident" id="7368463">err</span><span class="op" id="7368466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368472">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368509">b</span><span class="op" id="7368510">.</span><span class="ident" id="7368511">Reset</span><span class="op" id="7368516">(</span><span class="op" id="7368517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368520">err</span>&nbsp;<span class="op" id="7368524">=</span>&nbsp;<span class="ident" id="7368526">enc</span><span class="op" id="7368529">.</span><span class="ident" id="7368530">Encode</span><span class="op" id="7368536">(</span><span class="ident" id="7368537">GobTest2</span><span class="op" id="7368545">{</span><span class="num" id="7368546">17</span><span class="op" id="7368548">,</span>&nbsp;<span class="string" id="7368550">&#34;ABC&#34;</span><span class="op" id="7368555">}</span><span class="op" id="7368556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368559">if</span>&nbsp;<span class="ident" id="7368562">err</span>&nbsp;<span class="op" id="7368566">!=</span>&nbsp;<span class="ident" id="7368569">nil</span>&nbsp;<span class="op" id="7368573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368577">t</span><span class="op" id="7368578">.</span><span class="ident" id="7368579">Fatal</span><span class="op" id="7368584">(</span><span class="string" id="7368585">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7368600">,</span>&nbsp;<span class="ident" id="7368602">err</span><span class="op" id="7368605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368608">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368611">y</span>&nbsp;<span class="op" id="7368613">:=</span>&nbsp;<span class="op" id="7368616">&amp;</span><span class="ident" id="7368617">GobTest1</span><span class="op" id="7368625">{</span><span class="op" id="7368626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368629">err</span>&nbsp;<span class="op" id="7368633">=</span>&nbsp;<span class="ident" id="7368635">dec</span><span class="op" id="7368638">.</span><span class="ident" id="7368639">Decode</span><span class="op" id="7368645">(</span><span class="ident" id="7368646">y</span><span class="op" id="7368647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368650">if</span>&nbsp;<span class="ident" id="7368653">err</span>&nbsp;<span class="op" id="7368657">==</span>&nbsp;<span class="ident" id="7368660">nil</span>&nbsp;<span class="op" id="7368664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368668">t</span><span class="op" id="7368669">.</span><span class="ident" id="7368670">Fatal</span><span class="op" id="7368675">(</span><span class="string" id="7368676">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="7368746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368749">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368752">if</span>&nbsp;<span class="ident" id="7368755">strings</span><span class="op" id="7368762">.</span><span class="ident" id="7368763">Index</span><span class="op" id="7368768">(</span><span class="ident" id="7368769">err</span><span class="op" id="7368772">.</span><span class="ident" id="7368773">Error</span><span class="op" id="7368778">(</span><span class="op" id="7368779">)</span><span class="op" id="7368780">,</span>&nbsp;<span class="string" id="7368782">&#34;type&#34;</span><span class="op" id="7368788">)</span>&nbsp;<span class="op" id="7368790">&lt;</span>&nbsp;<span class="num" id="7368792">0</span>&nbsp;<span class="op" id="7368794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368798">t</span><span class="op" id="7368799">.</span><span class="ident" id="7368800">Fatal</span><span class="op" id="7368805">(</span><span class="string" id="7368806">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7368832">,</span>&nbsp;<span class="ident" id="7368834">err</span><span class="op" id="7368837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368840">}</span><br>
<span class="lineno"></span><span class="op" id="7368842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="7368845">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="7368930">func</span>&nbsp;<span class="ident" id="7368935">TestGobEncoderStructSingleton</span><span class="op" id="7368964">(</span><span class="ident" id="7368965">t</span>&nbsp;<span class="op" id="7368967">*</span><span class="ident" id="7368968">testing</span><span class="op" id="7368975">.</span><span class="ident" id="7368976">T</span><span class="op" id="7368977">)</span>&nbsp;<span class="op" id="7368979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368982">b</span>&nbsp;<span class="op" id="7368984">:=</span>&nbsp;<span class="builtinfunc" id="7368987">new</span><span class="op" id="7368990">(</span><span class="ident" id="7368991">bytes</span><span class="op" id="7368996">.</span><span class="ident" id="7368997">Buffer</span><span class="op" id="7369003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369006">enc</span>&nbsp;<span class="op" id="7369010">:=</span>&nbsp;<span class="ident" id="7369013">NewEncoder</span><span class="op" id="7369023">(</span><span class="ident" id="7369024">b</span><span class="op" id="7369025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369028">err</span>&nbsp;<span class="op" id="7369032">:=</span>&nbsp;<span class="ident" id="7369035">enc</span><span class="op" id="7369038">.</span><span class="ident" id="7369039">Encode</span><span class="op" id="7369045">(</span><span class="op" id="7369046">&amp;</span><span class="ident" id="7369047">ByteStruct</span><span class="op" id="7369057">{</span><span class="string" id="7369058">&#39;A&#39;</span><span class="op" id="7369061">}</span><span class="op" id="7369062">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369065">if</span>&nbsp;<span class="ident" id="7369068">err</span>&nbsp;<span class="op" id="7369072">!=</span>&nbsp;<span class="ident" id="7369075">nil</span>&nbsp;<span class="op" id="7369079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369083">t</span><span class="op" id="7369084">.</span><span class="ident" id="7369085">Fatal</span><span class="op" id="7369090">(</span><span class="string" id="7369091">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7369106">,</span>&nbsp;<span class="ident" id="7369108">err</span><span class="op" id="7369111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369117">dec</span>&nbsp;<span class="op" id="7369121">:=</span>&nbsp;<span class="ident" id="7369124">NewDecoder</span><span class="op" id="7369134">(</span><span class="ident" id="7369135">b</span><span class="op" id="7369136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369139">x</span>&nbsp;<span class="op" id="7369141">:=</span>&nbsp;<span class="builtinfunc" id="7369144">new</span><span class="op" id="7369147">(</span><span class="ident" id="7369148">ByteStruct</span><span class="op" id="7369158">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369161">err</span>&nbsp;<span class="op" id="7369165">=</span>&nbsp;<span class="ident" id="7369167">dec</span><span class="op" id="7369170">.</span><span class="ident" id="7369171">Decode</span><span class="op" id="7369177">(</span><span class="ident" id="7369178">x</span><span class="op" id="7369179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369182">if</span>&nbsp;<span class="ident" id="7369185">err</span>&nbsp;<span class="op" id="7369189">!=</span>&nbsp;<span class="ident" id="7369192">nil</span>&nbsp;<span class="op" id="7369196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369200">t</span><span class="op" id="7369201">.</span><span class="ident" id="7369202">Fatal</span><span class="op" id="7369207">(</span><span class="string" id="7369208">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7369223">,</span>&nbsp;<span class="ident" id="7369225">err</span><span class="op" id="7369228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369234">if</span>&nbsp;<span class="ident" id="7369237">x</span><span class="op" id="7369238">.</span><span class="ident" id="7369239">a</span>&nbsp;<span class="op" id="7369241">!=</span>&nbsp;<span class="string" id="7369244">&#39;A&#39;</span>&nbsp;<span class="op" id="7369248">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369252">t</span><span class="op" id="7369253">.</span><span class="ident" id="7369254">Errorf</span><span class="op" id="7369260">(</span><span class="string" id="7369261">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7369282">,</span>&nbsp;<span class="ident" id="7369284">x</span><span class="op" id="7369285">.</span><span class="ident" id="7369286">a</span><span class="op" id="7369287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369290">}</span><br>
<span class="lineno"></span><span class="op" id="7369292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369295">func</span>&nbsp;<span class="ident" id="7369300">TestGobEncoderNonStructSingleton</span><span class="op" id="7369332">(</span><span class="ident" id="7369333">t</span>&nbsp;<span class="op" id="7369335">*</span><span class="ident" id="7369336">testing</span><span class="op" id="7369343">.</span><span class="ident" id="7369344">T</span><span class="op" id="7369345">)</span>&nbsp;<span class="op" id="7369347">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369350">b</span>&nbsp;<span class="op" id="7369352">:=</span>&nbsp;<span class="builtinfunc" id="7369355">new</span><span class="op" id="7369358">(</span><span class="ident" id="7369359">bytes</span><span class="op" id="7369364">.</span><span class="ident" id="7369365">Buffer</span><span class="op" id="7369371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369374">enc</span>&nbsp;<span class="op" id="7369378">:=</span>&nbsp;<span class="ident" id="7369381">NewEncoder</span><span class="op" id="7369391">(</span><span class="ident" id="7369392">b</span><span class="op" id="7369393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369396">var</span>&nbsp;<span class="ident" id="7369400">g</span>&nbsp;<span class="ident" id="7369402">Gobber</span>&nbsp;<span class="op" id="7369409">=</span>&nbsp;<span class="num" id="7369411">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369417">err</span>&nbsp;<span class="op" id="7369421">:=</span>&nbsp;<span class="ident" id="7369424">enc</span><span class="op" id="7369427">.</span><span class="ident" id="7369428">Encode</span><span class="op" id="7369434">(</span><span class="op" id="7369435">&amp;</span><span class="ident" id="7369436">g</span><span class="op" id="7369437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369440">if</span>&nbsp;<span class="ident" id="7369443">err</span>&nbsp;<span class="op" id="7369447">!=</span>&nbsp;<span class="ident" id="7369450">nil</span>&nbsp;<span class="op" id="7369454">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369458">t</span><span class="op" id="7369459">.</span><span class="ident" id="7369460">Fatal</span><span class="op" id="7369465">(</span><span class="string" id="7369466">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7369481">,</span>&nbsp;<span class="ident" id="7369483">err</span><span class="op" id="7369486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369492">dec</span>&nbsp;<span class="op" id="7369496">:=</span>&nbsp;<span class="ident" id="7369499">NewDecoder</span><span class="op" id="7369509">(</span><span class="ident" id="7369510">b</span><span class="op" id="7369511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369514">var</span>&nbsp;<span class="ident" id="7369518">x</span>&nbsp;<span class="ident" id="7369520">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369528">err</span>&nbsp;<span class="op" id="7369532">=</span>&nbsp;<span class="ident" id="7369534">dec</span><span class="op" id="7369537">.</span><span class="ident" id="7369538">Decode</span><span class="op" id="7369544">(</span><span class="op" id="7369545">&amp;</span><span class="ident" id="7369546">x</span><span class="op" id="7369547">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369550">if</span>&nbsp;<span class="ident" id="7369553">err</span>&nbsp;<span class="op" id="7369557">!=</span>&nbsp;<span class="ident" id="7369560">nil</span>&nbsp;<span class="op" id="7369564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369568">t</span><span class="op" id="7369569">.</span><span class="ident" id="7369570">Fatal</span><span class="op" id="7369575">(</span><span class="string" id="7369576">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7369591">,</span>&nbsp;<span class="ident" id="7369593">err</span><span class="op" id="7369596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369602">if</span>&nbsp;<span class="ident" id="7369605">x</span>&nbsp;<span class="op" id="7369607">!=</span>&nbsp;<span class="num" id="7369610">1234</span>&nbsp;<span class="op" id="7369615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369619">t</span><span class="op" id="7369620">.</span><span class="ident" id="7369621">Errorf</span><span class="op" id="7369627">(</span><span class="string" id="7369628">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7369650">,</span>&nbsp;<span class="ident" id="7369652">x</span><span class="op" id="7369653">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369656">}</span><br>
<span class="lineno"></span><span class="op" id="7369658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369661">func</span>&nbsp;<span class="ident" id="7369666">TestGobEncoderIgnoreStructField</span><span class="op" id="7369697">(</span><span class="ident" id="7369698">t</span>&nbsp;<span class="op" id="7369700">*</span><span class="ident" id="7369701">testing</span><span class="op" id="7369708">.</span><span class="ident" id="7369709">T</span><span class="op" id="7369710">)</span>&nbsp;<span class="op" id="7369712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369715">b</span>&nbsp;<span class="op" id="7369717">:=</span>&nbsp;<span class="builtinfunc" id="7369720">new</span><span class="op" id="7369723">(</span><span class="ident" id="7369724">bytes</span><span class="op" id="7369729">.</span><span class="ident" id="7369730">Buffer</span><span class="op" id="7369736">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369739">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369777">enc</span>&nbsp;<span class="op" id="7369781">:=</span>&nbsp;<span class="ident" id="7369784">NewEncoder</span><span class="op" id="7369794">(</span><span class="ident" id="7369795">b</span><span class="op" id="7369796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369799">err</span>&nbsp;<span class="op" id="7369803">:=</span>&nbsp;<span class="ident" id="7369806">enc</span><span class="op" id="7369809">.</span><span class="ident" id="7369810">Encode</span><span class="op" id="7369816">(</span><span class="ident" id="7369817">GobTest0</span><span class="op" id="7369825">{</span><span class="num" id="7369826">17</span><span class="op" id="7369828">,</span>&nbsp;<span class="op" id="7369830">&amp;</span><span class="ident" id="7369831">ByteStruct</span><span class="op" id="7369841">{</span><span class="string" id="7369842">&#39;A&#39;</span><span class="op" id="7369845">}</span><span class="op" id="7369846">}</span><span class="op" id="7369847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369850">if</span>&nbsp;<span class="ident" id="7369853">err</span>&nbsp;<span class="op" id="7369857">!=</span>&nbsp;<span class="ident" id="7369860">nil</span>&nbsp;<span class="op" id="7369864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369868">t</span><span class="op" id="7369869">.</span><span class="ident" id="7369870">Fatal</span><span class="op" id="7369875">(</span><span class="string" id="7369876">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7369891">,</span>&nbsp;<span class="ident" id="7369893">err</span><span class="op" id="7369896">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369902">dec</span>&nbsp;<span class="op" id="7369906">:=</span>&nbsp;<span class="ident" id="7369909">NewDecoder</span><span class="op" id="7369919">(</span><span class="ident" id="7369920">b</span><span class="op" id="7369921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369924">x</span>&nbsp;<span class="op" id="7369926">:=</span>&nbsp;<span class="builtinfunc" id="7369929">new</span><span class="op" id="7369932">(</span><span class="ident" id="7369933">GobTestIgnoreEncoder</span><span class="op" id="7369953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369956">err</span>&nbsp;<span class="op" id="7369960">=</span>&nbsp;<span class="ident" id="7369962">dec</span><span class="op" id="7369965">.</span><span class="ident" id="7369966">Decode</span><span class="op" id="7369972">(</span><span class="ident" id="7369973">x</span><span class="op" id="7369974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369977">if</span>&nbsp;<span class="ident" id="7369980">err</span>&nbsp;<span class="op" id="7369984">!=</span>&nbsp;<span class="ident" id="7369987">nil</span>&nbsp;<span class="op" id="7369991">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369995">t</span><span class="op" id="7369996">.</span><span class="ident" id="7369997">Fatal</span><span class="op" id="7370002">(</span><span class="string" id="7370003">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7370018">,</span>&nbsp;<span class="ident" id="7370020">err</span><span class="op" id="7370023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370029">if</span>&nbsp;<span class="ident" id="7370032">x</span><span class="op" id="7370033">.</span><span class="ident" id="7370034">X</span>&nbsp;<span class="op" id="7370036">!=</span>&nbsp;<span class="num" id="7370039">17</span>&nbsp;<span class="op" id="7370042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370046">t</span><span class="op" id="7370047">.</span><span class="ident" id="7370048">Errorf</span><span class="op" id="7370054">(</span><span class="string" id="7370055">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7370075">,</span>&nbsp;<span class="ident" id="7370077">x</span><span class="op" id="7370078">.</span><span class="ident" id="7370079">X</span><span class="op" id="7370080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370083">}</span><br>
<span class="lineno">625</span><span class="op" id="7370085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370088">func</span>&nbsp;<span class="ident" id="7370093">TestGobEncoderIgnoreNonStructField</span><span class="op" id="7370127">(</span><span class="ident" id="7370128">t</span>&nbsp;<span class="op" id="7370130">*</span><span class="ident" id="7370131">testing</span><span class="op" id="7370138">.</span><span class="ident" id="7370139">T</span><span class="op" id="7370140">)</span>&nbsp;<span class="op" id="7370142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370145">b</span>&nbsp;<span class="op" id="7370147">:=</span>&nbsp;<span class="builtinfunc" id="7370150">new</span><span class="op" id="7370153">(</span><span class="ident" id="7370154">bytes</span><span class="op" id="7370159">.</span><span class="ident" id="7370160">Buffer</span><span class="op" id="7370166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370169">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370207">enc</span>&nbsp;<span class="op" id="7370211">:=</span>&nbsp;<span class="ident" id="7370214">NewEncoder</span><span class="op" id="7370224">(</span><span class="ident" id="7370225">b</span><span class="op" id="7370226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370229">gobber</span>&nbsp;<span class="op" id="7370236">:=</span>&nbsp;<span class="ident" id="7370239">Gobber</span><span class="op" id="7370245">(</span><span class="num" id="7370246">23</span><span class="op" id="7370248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370251">bgobber</span>&nbsp;<span class="op" id="7370259">:=</span>&nbsp;<span class="ident" id="7370262">BinaryGobber</span><span class="op" id="7370274">(</span><span class="num" id="7370275">24</span><span class="op" id="7370277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370280">tgobber</span>&nbsp;<span class="op" id="7370288">:=</span>&nbsp;<span class="ident" id="7370291">TextGobber</span><span class="op" id="7370301">(</span><span class="num" id="7370302">25</span><span class="op" id="7370304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370307">err</span>&nbsp;<span class="op" id="7370311">:=</span>&nbsp;<span class="ident" id="7370314">enc</span><span class="op" id="7370317">.</span><span class="ident" id="7370318">Encode</span><span class="op" id="7370324">(</span><span class="ident" id="7370325">GobTest3</span><span class="op" id="7370333">{</span><span class="num" id="7370334">17</span><span class="op" id="7370336">,</span>&nbsp;<span class="op" id="7370338">&amp;</span><span class="ident" id="7370339">gobber</span><span class="op" id="7370345">,</span>&nbsp;<span class="op" id="7370347">&amp;</span><span class="ident" id="7370348">bgobber</span><span class="op" id="7370355">,</span>&nbsp;<span class="op" id="7370357">&amp;</span><span class="ident" id="7370358">tgobber</span><span class="op" id="7370365">}</span><span class="op" id="7370366">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370369">if</span>&nbsp;<span class="ident" id="7370372">err</span>&nbsp;<span class="op" id="7370376">!=</span>&nbsp;<span class="ident" id="7370379">nil</span>&nbsp;<span class="op" id="7370383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370387">t</span><span class="op" id="7370388">.</span><span class="ident" id="7370389">Fatal</span><span class="op" id="7370394">(</span><span class="string" id="7370395">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7370410">,</span>&nbsp;<span class="ident" id="7370412">err</span><span class="op" id="7370415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370421">dec</span>&nbsp;<span class="op" id="7370425">:=</span>&nbsp;<span class="ident" id="7370428">NewDecoder</span><span class="op" id="7370438">(</span><span class="ident" id="7370439">b</span><span class="op" id="7370440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370443">x</span>&nbsp;<span class="op" id="7370445">:=</span>&nbsp;<span class="builtinfunc" id="7370448">new</span><span class="op" id="7370451">(</span><span class="ident" id="7370452">GobTestIgnoreEncoder</span><span class="op" id="7370472">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370475">err</span>&nbsp;<span class="op" id="7370479">=</span>&nbsp;<span class="ident" id="7370481">dec</span><span class="op" id="7370484">.</span><span class="ident" id="7370485">Decode</span><span class="op" id="7370491">(</span><span class="ident" id="7370492">x</span><span class="op" id="7370493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370496">if</span>&nbsp;<span class="ident" id="7370499">err</span>&nbsp;<span class="op" id="7370503">!=</span>&nbsp;<span class="ident" id="7370506">nil</span>&nbsp;<span class="op" id="7370510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370514">t</span><span class="op" id="7370515">.</span><span class="ident" id="7370516">Fatal</span><span class="op" id="7370521">(</span><span class="string" id="7370522">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7370537">,</span>&nbsp;<span class="ident" id="7370539">err</span><span class="op" id="7370542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370548">if</span>&nbsp;<span class="ident" id="7370551">x</span><span class="op" id="7370552">.</span><span class="ident" id="7370553">X</span>&nbsp;<span class="op" id="7370555">!=</span>&nbsp;<span class="num" id="7370558">17</span>&nbsp;<span class="op" id="7370561">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370565">t</span><span class="op" id="7370566">.</span><span class="ident" id="7370567">Errorf</span><span class="op" id="7370573">(</span><span class="string" id="7370574">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7370594">,</span>&nbsp;<span class="ident" id="7370596">x</span><span class="op" id="7370597">.</span><span class="ident" id="7370598">X</span><span class="op" id="7370599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370602">}</span><br>
<span class="lineno"></span><span class="op" id="7370604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370607">func</span>&nbsp;<span class="ident" id="7370612">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="7370642">(</span><span class="ident" id="7370643">t</span>&nbsp;<span class="op" id="7370645">*</span><span class="ident" id="7370646">testing</span><span class="op" id="7370653">.</span><span class="ident" id="7370654">T</span><span class="op" id="7370655">)</span>&nbsp;<span class="op" id="7370657">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370660">b</span>&nbsp;<span class="op" id="7370662">:=</span>&nbsp;<span class="builtinfunc" id="7370665">new</span><span class="op" id="7370668">(</span><span class="ident" id="7370669">bytes</span><span class="op" id="7370674">.</span><span class="ident" id="7370675">Buffer</span><span class="op" id="7370681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370684">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370722">enc</span>&nbsp;<span class="op" id="7370726">:=</span>&nbsp;<span class="ident" id="7370729">NewEncoder</span><span class="op" id="7370739">(</span><span class="ident" id="7370740">b</span><span class="op" id="7370741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370744">err</span>&nbsp;<span class="op" id="7370748">:=</span>&nbsp;<span class="ident" id="7370751">enc</span><span class="op" id="7370754">.</span><span class="ident" id="7370755">Encode</span><span class="op" id="7370761">(</span><span class="ident" id="7370762">GobTest0</span><span class="op" id="7370770">{</span><span class="ident" id="7370771">X</span><span class="op" id="7370772">:</span>&nbsp;<span class="num" id="7370774">18</span><span class="op" id="7370776">}</span><span class="op" id="7370777">)</span>&nbsp;<span class="comment" id="7370779">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370792">if</span>&nbsp;<span class="ident" id="7370795">err</span>&nbsp;<span class="op" id="7370799">!=</span>&nbsp;<span class="ident" id="7370802">nil</span>&nbsp;<span class="op" id="7370806">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370810">t</span><span class="op" id="7370811">.</span><span class="ident" id="7370812">Fatal</span><span class="op" id="7370817">(</span><span class="string" id="7370818">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7370833">,</span>&nbsp;<span class="ident" id="7370835">err</span><span class="op" id="7370838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370844">dec</span>&nbsp;<span class="op" id="7370848">:=</span>&nbsp;<span class="ident" id="7370851">NewDecoder</span><span class="op" id="7370861">(</span><span class="ident" id="7370862">b</span><span class="op" id="7370863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370866">x</span>&nbsp;<span class="op" id="7370868">:=</span>&nbsp;<span class="builtinfunc" id="7370871">new</span><span class="op" id="7370874">(</span><span class="ident" id="7370875">GobTest0</span><span class="op" id="7370883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370886">err</span>&nbsp;<span class="op" id="7370890">=</span>&nbsp;<span class="ident" id="7370892">dec</span><span class="op" id="7370895">.</span><span class="ident" id="7370896">Decode</span><span class="op" id="7370902">(</span><span class="ident" id="7370903">x</span><span class="op" id="7370904">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370907">if</span>&nbsp;<span class="ident" id="7370910">err</span>&nbsp;<span class="op" id="7370914">!=</span>&nbsp;<span class="ident" id="7370917">nil</span>&nbsp;<span class="op" id="7370921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370925">t</span><span class="op" id="7370926">.</span><span class="ident" id="7370927">Fatal</span><span class="op" id="7370932">(</span><span class="string" id="7370933">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7370948">,</span>&nbsp;<span class="ident" id="7370950">err</span><span class="op" id="7370953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370959">if</span>&nbsp;<span class="ident" id="7370962">x</span><span class="op" id="7370963">.</span><span class="ident" id="7370964">X</span>&nbsp;<span class="op" id="7370966">!=</span>&nbsp;<span class="num" id="7370969">18</span>&nbsp;<span class="op" id="7370972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370976">t</span><span class="op" id="7370977">.</span><span class="ident" id="7370978">Errorf</span><span class="op" id="7370984">(</span><span class="string" id="7370985">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7371012">,</span>&nbsp;<span class="ident" id="7371014">x</span><span class="op" id="7371015">.</span><span class="ident" id="7371016">X</span><span class="op" id="7371017">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371023">if</span>&nbsp;<span class="ident" id="7371026">x</span><span class="op" id="7371027">.</span><span class="ident" id="7371028">G</span>&nbsp;<span class="op" id="7371030">!=</span>&nbsp;<span class="ident" id="7371033">nil</span>&nbsp;<span class="op" id="7371037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371041">t</span><span class="op" id="7371042">.</span><span class="ident" id="7371043">Errorf</span><span class="op" id="7371049">(</span><span class="string" id="7371050">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7371078">,</span>&nbsp;<span class="ident" id="7371080">x</span><span class="op" id="7371081">.</span><span class="ident" id="7371082">G</span><span class="op" id="7371083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371086">}</span><br>
<span class="lineno"></span><span class="op" id="7371088">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="7371091">type</span>&nbsp;<span class="ident" id="7371096">gobDecoderBug0</span>&nbsp;<span class="keyword" id="7371111">struct</span>&nbsp;<span class="op" id="7371118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371121">foo</span><span class="op" id="7371124">,</span>&nbsp;<span class="ident" id="7371126">bar</span>&nbsp;<span class="builtintype" id="7371130">string</span><br>
<span class="lineno"></span><span class="op" id="7371137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7371140">func</span>&nbsp;<span class="op" id="7371145">(</span><span class="ident" id="7371146">br</span>&nbsp;<span class="op" id="7371149">*</span><span class="ident" id="7371150">gobDecoderBug0</span><span class="op" id="7371164">)</span>&nbsp;<span class="ident" id="7371166">String</span><span class="op" id="7371172">(</span><span class="op" id="7371173">)</span>&nbsp;<span class="builtintype" id="7371175">string</span>&nbsp;<span class="op" id="7371182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371185">return</span>&nbsp;<span class="ident" id="7371192">br</span><span class="op" id="7371194">.</span><span class="ident" id="7371195">foo</span>&nbsp;<span class="op" id="7371199">+</span>&nbsp;<span class="string" id="7371201">&#34;-&#34;</span>&nbsp;<span class="op" id="7371205">+</span>&nbsp;<span class="ident" id="7371207">br</span><span class="op" id="7371209">.</span><span class="ident" id="7371210">bar</span><br>
<span class="lineno"></span><span class="op" id="7371214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7371217">func</span>&nbsp;<span class="op" id="7371222">(</span><span class="ident" id="7371223">br</span>&nbsp;<span class="op" id="7371226">*</span><span class="ident" id="7371227">gobDecoderBug0</span><span class="op" id="7371241">)</span>&nbsp;<span class="ident" id="7371243">GobEncode</span><span class="op" id="7371252">(</span><span class="op" id="7371253">)</span>&nbsp;<span class="op" id="7371255">(</span><span class="op" id="7371256">[</span><span class="op" id="7371257">]</span><span class="builtintype" id="7371258">byte</span><span class="op" id="7371262">,</span>&nbsp;<span class="builtintype" id="7371264">error</span><span class="op" id="7371269">)</span>&nbsp;<span class="op" id="7371271">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371274">return</span>&nbsp;<span class="op" id="7371281">[</span><span class="op" id="7371282">]</span><span class="builtintype" id="7371283">byte</span><span class="op" id="7371287">(</span><span class="ident" id="7371288">br</span><span class="op" id="7371290">.</span><span class="ident" id="7371291">String</span><span class="op" id="7371297">(</span><span class="op" id="7371298">)</span><span class="op" id="7371299">)</span><span class="op" id="7371300">,</span>&nbsp;<span class="ident" id="7371302">nil</span><br>
<span class="lineno"></span><span class="op" id="7371306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7371309">func</span>&nbsp;<span class="op" id="7371314">(</span><span class="ident" id="7371315">br</span>&nbsp;<span class="op" id="7371318">*</span><span class="ident" id="7371319">gobDecoderBug0</span><span class="op" id="7371333">)</span>&nbsp;<span class="ident" id="7371335">GobDecode</span><span class="op" id="7371344">(</span><span class="ident" id="7371345">b</span>&nbsp;<span class="op" id="7371347">[</span><span class="op" id="7371348">]</span><span class="builtintype" id="7371349">byte</span><span class="op" id="7371353">)</span>&nbsp;<span class="builtintype" id="7371355">error</span>&nbsp;<span class="op" id="7371361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371364">br</span><span class="op" id="7371366">.</span><span class="ident" id="7371367">foo</span>&nbsp;<span class="op" id="7371371">=</span>&nbsp;<span class="string" id="7371373">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371380">br</span><span class="op" id="7371382">.</span><span class="ident" id="7371383">bar</span>&nbsp;<span class="op" id="7371387">=</span>&nbsp;<span class="string" id="7371389">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371396">return</span>&nbsp;<span class="ident" id="7371403">nil</span><br>
<span class="lineno"></span><span class="op" id="7371407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7371410">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="7371476">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="7371498">func</span>&nbsp;<span class="ident" id="7371503">TestGobEncoderExtraIndirect</span><span class="op" id="7371530">(</span><span class="ident" id="7371531">t</span>&nbsp;<span class="op" id="7371533">*</span><span class="ident" id="7371534">testing</span><span class="op" id="7371541">.</span><span class="ident" id="7371542">T</span><span class="op" id="7371543">)</span>&nbsp;<span class="op" id="7371545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371548">gdb</span>&nbsp;<span class="op" id="7371552">:=</span>&nbsp;<span class="op" id="7371555">&amp;</span><span class="ident" id="7371556">gobDecoderBug0</span><span class="op" id="7371570">{</span><span class="string" id="7371571">&#34;foo&#34;</span><span class="op" id="7371576">,</span>&nbsp;<span class="string" id="7371578">&#34;bar&#34;</span><span class="op" id="7371583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371586">buf</span>&nbsp;<span class="op" id="7371590">:=</span>&nbsp;<span class="builtinfunc" id="7371593">new</span><span class="op" id="7371596">(</span><span class="ident" id="7371597">bytes</span><span class="op" id="7371602">.</span><span class="ident" id="7371603">Buffer</span><span class="op" id="7371609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371612">e</span>&nbsp;<span class="op" id="7371614">:=</span>&nbsp;<span class="ident" id="7371617">NewEncoder</span><span class="op" id="7371627">(</span><span class="ident" id="7371628">buf</span><span class="op" id="7371631">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371634">if</span>&nbsp;<span class="ident" id="7371637">err</span>&nbsp;<span class="op" id="7371641">:=</span>&nbsp;<span class="ident" id="7371644">e</span><span class="op" id="7371645">.</span><span class="ident" id="7371646">Encode</span><span class="op" id="7371652">(</span><span class="ident" id="7371653">gdb</span><span class="op" id="7371656">)</span><span class="op" id="7371657">;</span>&nbsp;<span class="ident" id="7371659">err</span>&nbsp;<span class="op" id="7371663">!=</span>&nbsp;<span class="ident" id="7371666">nil</span>&nbsp;<span class="op" id="7371670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371674">t</span><span class="op" id="7371675">.</span><span class="ident" id="7371676">Fatalf</span><span class="op" id="7371682">(</span><span class="string" id="7371683">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="7371695">,</span>&nbsp;<span class="ident" id="7371697">err</span><span class="op" id="7371700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371706">d</span>&nbsp;<span class="op" id="7371708">:=</span>&nbsp;<span class="ident" id="7371711">NewDecoder</span><span class="op" id="7371721">(</span><span class="ident" id="7371722">buf</span><span class="op" id="7371725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371728">var</span>&nbsp;<span class="ident" id="7371732">got</span>&nbsp;<span class="op" id="7371736">*</span><span class="ident" id="7371737">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371753">if</span>&nbsp;<span class="ident" id="7371756">err</span>&nbsp;<span class="op" id="7371760">:=</span>&nbsp;<span class="ident" id="7371763">d</span><span class="op" id="7371764">.</span><span class="ident" id="7371765">Decode</span><span class="op" id="7371771">(</span><span class="op" id="7371772">&amp;</span><span class="ident" id="7371773">got</span><span class="op" id="7371776">)</span><span class="op" id="7371777">;</span>&nbsp;<span class="ident" id="7371779">err</span>&nbsp;<span class="op" id="7371783">!=</span>&nbsp;<span class="ident" id="7371786">nil</span>&nbsp;<span class="op" id="7371790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371794">t</span><span class="op" id="7371795">.</span><span class="ident" id="7371796">Fatalf</span><span class="op" id="7371802">(</span><span class="string" id="7371803">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7371815">,</span>&nbsp;<span class="ident" id="7371817">err</span><span class="op" id="7371820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371826">if</span>&nbsp;<span class="ident" id="7371829">got</span><span class="op" id="7371832">.</span><span class="ident" id="7371833">foo</span>&nbsp;<span class="op" id="7371837">!=</span>&nbsp;<span class="ident" id="7371840">gdb</span><span class="op" id="7371843">.</span><span class="ident" id="7371844">foo</span>&nbsp;<span class="op" id="7371848">||</span>&nbsp;<span class="ident" id="7371851">got</span><span class="op" id="7371854">.</span><span class="ident" id="7371855">bar</span>&nbsp;<span class="op" id="7371859">!=</span>&nbsp;<span class="ident" id="7371862">gdb</span><span class="op" id="7371865">.</span><span class="ident" id="7371866">bar</span>&nbsp;<span class="op" id="7371870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371874">t</span><span class="op" id="7371875">.</span><span class="ident" id="7371876">Errorf</span><span class="op" id="7371882">(</span><span class="string" id="7371883">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7371902">,</span>&nbsp;<span class="ident" id="7371904">got</span><span class="op" id="7371907">,</span>&nbsp;<span class="ident" id="7371909">gdb</span><span class="op" id="7371912">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371915">}</span><br>
<span class="lineno"></span><span class="op" id="7371917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7371920">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="7371984">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="7372053">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="7372115">type</span>&nbsp;<span class="ident" id="7372120">isZeroBug</span>&nbsp;<span class="keyword" id="7372130">struct</span>&nbsp;<span class="op" id="7372137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372140">T</span>&nbsp;<span class="ident" id="7372142">time</span><span class="op" id="7372146">.</span><span class="ident" id="7372147">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372153">S</span>&nbsp;<span class="builtintype" id="7372155">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372163">I</span>&nbsp;<span class="builtintype" id="7372165">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372170">A</span>&nbsp;<span class="ident" id="7372172">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372188">F</span>&nbsp;<span class="ident" id="7372190">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="7372209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7372212">type</span>&nbsp;<span class="ident" id="7372217">isZeroBugArray</span>&nbsp;<span class="op" id="7372232">[</span><span class="num" id="7372233">2</span><span class="op" id="7372234">]</span><span class="builtintype" id="7372235">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="7372242">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="7372302">func</span>&nbsp;<span class="op" id="7372307">(</span><span class="ident" id="7372308">a</span>&nbsp;<span class="ident" id="7372310">isZeroBugArray</span><span class="op" id="7372324">)</span>&nbsp;<span class="ident" id="7372326">GobEncode</span><span class="op" id="7372335">(</span><span class="op" id="7372336">)</span>&nbsp;<span class="op" id="7372338">(</span><span class="ident" id="7372339">b</span>&nbsp;<span class="op" id="7372341">[</span><span class="op" id="7372342">]</span><span class="builtintype" id="7372343">byte</span><span class="op" id="7372347">,</span>&nbsp;<span class="ident" id="7372349">e</span>&nbsp;<span class="builtintype" id="7372351">error</span><span class="op" id="7372356">)</span>&nbsp;<span class="op" id="7372358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372361">b</span>&nbsp;<span class="op" id="7372363">=</span>&nbsp;<span class="builtinfunc" id="7372365">append</span><span class="op" id="7372371">(</span><span class="ident" id="7372372">b</span><span class="op" id="7372373">,</span>&nbsp;<span class="ident" id="7372375">a</span><span class="op" id="7372376">[</span><span class="op" id="7372377">:</span><span class="op" id="7372378">]</span><span class="op" id="7372379">...</span><span class="op" id="7372382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372385">return</span>&nbsp;<span class="ident" id="7372392">b</span><span class="op" id="7372393">,</span>&nbsp;<span class="ident" id="7372395">nil</span><br>
<span class="lineno">725</span><span class="op" id="7372399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7372402">func</span>&nbsp;<span class="op" id="7372407">(</span><span class="ident" id="7372408">a</span>&nbsp;<span class="op" id="7372410">*</span><span class="ident" id="7372411">isZeroBugArray</span><span class="op" id="7372425">)</span>&nbsp;<span class="ident" id="7372427">GobDecode</span><span class="op" id="7372436">(</span><span class="ident" id="7372437">data</span>&nbsp;<span class="op" id="7372442">[</span><span class="op" id="7372443">]</span><span class="builtintype" id="7372444">byte</span><span class="op" id="7372448">)</span>&nbsp;<span class="builtintype" id="7372450">error</span>&nbsp;<span class="op" id="7372456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372459">if</span>&nbsp;<span class="builtinfunc" id="7372462">len</span><span class="op" id="7372465">(</span><span class="ident" id="7372466">data</span><span class="op" id="7372470">)</span>&nbsp;<span class="op" id="7372472">!=</span>&nbsp;<span class="builtinfunc" id="7372475">len</span><span class="op" id="7372478">(</span><span class="ident" id="7372479">a</span><span class="op" id="7372480">)</span>&nbsp;<span class="op" id="7372482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372486">return</span>&nbsp;<span class="ident" id="7372493">io</span><span class="op" id="7372495">.</span><span class="ident" id="7372496">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372504">a</span><span class="op" id="7372505">[</span><span class="num" id="7372506">0</span><span class="op" id="7372507">]</span>&nbsp;<span class="op" id="7372509">=</span>&nbsp;<span class="ident" id="7372511">data</span><span class="op" id="7372515">[</span><span class="num" id="7372516">0</span><span class="op" id="7372517">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372520">a</span><span class="op" id="7372521">[</span><span class="num" id="7372522">1</span><span class="op" id="7372523">]</span>&nbsp;<span class="op" id="7372525">=</span>&nbsp;<span class="ident" id="7372527">data</span><span class="op" id="7372531">[</span><span class="num" id="7372532">1</span><span class="op" id="7372533">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372536">return</span>&nbsp;<span class="ident" id="7372543">nil</span><br>
<span class="lineno"></span><span class="op" id="7372547">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="7372550">type</span>&nbsp;<span class="ident" id="7372555">isZeroBugInterface</span>&nbsp;<span class="keyword" id="7372574">struct</span>&nbsp;<span class="op" id="7372581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372584">I</span>&nbsp;<span class="keyword" id="7372586">interface</span><span class="op" id="7372595">{</span><span class="op" id="7372596">}</span><br>
<span class="lineno"></span><span class="op" id="7372598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="7372601">func</span>&nbsp;<span class="op" id="7372606">(</span><span class="ident" id="7372607">i</span>&nbsp;<span class="ident" id="7372609">isZeroBugInterface</span><span class="op" id="7372627">)</span>&nbsp;<span class="ident" id="7372629">GobEncode</span><span class="op" id="7372638">(</span><span class="op" id="7372639">)</span>&nbsp;<span class="op" id="7372641">(</span><span class="ident" id="7372642">b</span>&nbsp;<span class="op" id="7372644">[</span><span class="op" id="7372645">]</span><span class="builtintype" id="7372646">byte</span><span class="op" id="7372650">,</span>&nbsp;<span class="ident" id="7372652">e</span>&nbsp;<span class="builtintype" id="7372654">error</span><span class="op" id="7372659">)</span>&nbsp;<span class="op" id="7372661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372664">return</span>&nbsp;<span class="op" id="7372671">[</span><span class="op" id="7372672">]</span><span class="builtintype" id="7372673">byte</span><span class="op" id="7372677">{</span><span class="op" id="7372678">}</span><span class="op" id="7372679">,</span>&nbsp;<span class="ident" id="7372681">nil</span><br>
<span class="lineno"></span><span class="op" id="7372685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7372688">func</span>&nbsp;<span class="op" id="7372693">(</span><span class="ident" id="7372694">i</span>&nbsp;<span class="op" id="7372696">*</span><span class="ident" id="7372697">isZeroBugInterface</span><span class="op" id="7372715">)</span>&nbsp;<span class="ident" id="7372717">GobDecode</span><span class="op" id="7372726">(</span><span class="ident" id="7372727">data</span>&nbsp;<span class="op" id="7372732">[</span><span class="op" id="7372733">]</span><span class="builtintype" id="7372734">byte</span><span class="op" id="7372738">)</span>&nbsp;<span class="builtintype" id="7372740">error</span>&nbsp;<span class="op" id="7372746">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372749">return</span>&nbsp;<span class="ident" id="7372756">nil</span><br>
<span class="lineno"></span><span class="op" id="7372760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7372763">func</span>&nbsp;<span class="ident" id="7372768">TestGobEncodeIsZero</span><span class="op" id="7372787">(</span><span class="ident" id="7372788">t</span>&nbsp;<span class="op" id="7372790">*</span><span class="ident" id="7372791">testing</span><span class="op" id="7372798">.</span><span class="ident" id="7372799">T</span><span class="op" id="7372800">)</span>&nbsp;<span class="op" id="7372802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372805">x</span>&nbsp;<span class="op" id="7372807">:=</span>&nbsp;<span class="ident" id="7372810">isZeroBug</span><span class="op" id="7372819">{</span><span class="ident" id="7372820">time</span><span class="op" id="7372824">.</span><span class="ident" id="7372825">Now</span><span class="op" id="7372828">(</span><span class="op" id="7372829">)</span><span class="op" id="7372830">,</span>&nbsp;<span class="string" id="7372832">&#34;hello&#34;</span><span class="op" id="7372839">,</span>&nbsp;<span class="op" id="7372841">-</span><span class="num" id="7372842">55</span><span class="op" id="7372844">,</span>&nbsp;<span class="ident" id="7372846">isZeroBugArray</span><span class="op" id="7372860">{</span><span class="num" id="7372861">1</span><span class="op" id="7372862">,</span>&nbsp;<span class="num" id="7372864">2</span><span class="op" id="7372865">}</span><span class="op" id="7372866">,</span>&nbsp;<span class="ident" id="7372868">isZeroBugInterface</span><span class="op" id="7372886">{</span><span class="op" id="7372887">}</span><span class="op" id="7372888">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372891">b</span>&nbsp;<span class="op" id="7372893">:=</span>&nbsp;<span class="builtinfunc" id="7372896">new</span><span class="op" id="7372899">(</span><span class="ident" id="7372900">bytes</span><span class="op" id="7372905">.</span><span class="ident" id="7372906">Buffer</span><span class="op" id="7372912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372915">enc</span>&nbsp;<span class="op" id="7372919">:=</span>&nbsp;<span class="ident" id="7372922">NewEncoder</span><span class="op" id="7372932">(</span><span class="ident" id="7372933">b</span><span class="op" id="7372934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372937">err</span>&nbsp;<span class="op" id="7372941">:=</span>&nbsp;<span class="ident" id="7372944">enc</span><span class="op" id="7372947">.</span><span class="ident" id="7372948">Encode</span><span class="op" id="7372954">(</span><span class="ident" id="7372955">x</span><span class="op" id="7372956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372959">if</span>&nbsp;<span class="ident" id="7372962">err</span>&nbsp;<span class="op" id="7372966">!=</span>&nbsp;<span class="ident" id="7372969">nil</span>&nbsp;<span class="op" id="7372973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372977">t</span><span class="op" id="7372978">.</span><span class="ident" id="7372979">Fatal</span><span class="op" id="7372984">(</span><span class="string" id="7372985">&#34;encode:&#34;</span><span class="op" id="7372994">,</span>&nbsp;<span class="ident" id="7372996">err</span><span class="op" id="7372999">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373005">var</span>&nbsp;<span class="ident" id="7373009">y</span>&nbsp;<span class="ident" id="7373011">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373022">dec</span>&nbsp;<span class="op" id="7373026">:=</span>&nbsp;<span class="ident" id="7373029">NewDecoder</span><span class="op" id="7373039">(</span><span class="ident" id="7373040">b</span><span class="op" id="7373041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373044">err</span>&nbsp;<span class="op" id="7373048">=</span>&nbsp;<span class="ident" id="7373050">dec</span><span class="op" id="7373053">.</span><span class="ident" id="7373054">Decode</span><span class="op" id="7373060">(</span><span class="op" id="7373061">&amp;</span><span class="ident" id="7373062">y</span><span class="op" id="7373063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373066">if</span>&nbsp;<span class="ident" id="7373069">err</span>&nbsp;<span class="op" id="7373073">!=</span>&nbsp;<span class="ident" id="7373076">nil</span>&nbsp;<span class="op" id="7373080">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373084">t</span><span class="op" id="7373085">.</span><span class="ident" id="7373086">Fatal</span><span class="op" id="7373091">(</span><span class="string" id="7373092">&#34;decode:&#34;</span><span class="op" id="7373101">,</span>&nbsp;<span class="ident" id="7373103">err</span><span class="op" id="7373106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373112">if</span>&nbsp;<span class="ident" id="7373115">x</span>&nbsp;<span class="op" id="7373117">!=</span>&nbsp;<span class="ident" id="7373120">y</span>&nbsp;<span class="op" id="7373122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373126">t</span><span class="op" id="7373127">.</span><span class="ident" id="7373128">Fatalf</span><span class="op" id="7373134">(</span><span class="string" id="7373135">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7373145">,</span>&nbsp;<span class="ident" id="7373147">x</span><span class="op" id="7373148">,</span>&nbsp;<span class="ident" id="7373150">y</span><span class="op" id="7373151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373154">}</span><br>
<span class="lineno">765</span><span class="op" id="7373156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7373159">func</span>&nbsp;<span class="ident" id="7373164">TestGobEncodePtrError</span><span class="op" id="7373185">(</span><span class="ident" id="7373186">t</span>&nbsp;<span class="op" id="7373188">*</span><span class="ident" id="7373189">testing</span><span class="op" id="7373196">.</span><span class="ident" id="7373197">T</span><span class="op" id="7373198">)</span>&nbsp;<span class="op" id="7373200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373203">var</span>&nbsp;<span class="ident" id="7373207">err</span>&nbsp;<span class="builtintype" id="7373211">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373218">b</span>&nbsp;<span class="op" id="7373220">:=</span>&nbsp;<span class="builtinfunc" id="7373223">new</span><span class="op" id="7373226">(</span><span class="ident" id="7373227">bytes</span><span class="op" id="7373232">.</span><span class="ident" id="7373233">Buffer</span><span class="op" id="7373239">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373242">enc</span>&nbsp;<span class="op" id="7373246">:=</span>&nbsp;<span class="ident" id="7373249">NewEncoder</span><span class="op" id="7373259">(</span><span class="ident" id="7373260">b</span><span class="op" id="7373261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373264">err</span>&nbsp;<span class="op" id="7373268">=</span>&nbsp;<span class="ident" id="7373270">enc</span><span class="op" id="7373273">.</span><span class="ident" id="7373274">Encode</span><span class="op" id="7373280">(</span><span class="op" id="7373281">&amp;</span><span class="ident" id="7373282">err</span><span class="op" id="7373285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373288">if</span>&nbsp;<span class="ident" id="7373291">err</span>&nbsp;<span class="op" id="7373295">!=</span>&nbsp;<span class="ident" id="7373298">nil</span>&nbsp;<span class="op" id="7373302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373306">t</span><span class="op" id="7373307">.</span><span class="ident" id="7373308">Fatal</span><span class="op" id="7373313">(</span><span class="string" id="7373314">&#34;encode:&#34;</span><span class="op" id="7373323">,</span>&nbsp;<span class="ident" id="7373325">err</span><span class="op" id="7373328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373331">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373334">dec</span>&nbsp;<span class="op" id="7373338">:=</span>&nbsp;<span class="ident" id="7373341">NewDecoder</span><span class="op" id="7373351">(</span><span class="ident" id="7373352">b</span><span class="op" id="7373353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373356">err2</span>&nbsp;<span class="op" id="7373361">:=</span>&nbsp;<span class="ident" id="7373364">fmt</span><span class="op" id="7373367">.</span><span class="ident" id="7373368">Errorf</span><span class="op" id="7373374">(</span><span class="string" id="7373375">&#34;foo&#34;</span><span class="op" id="7373380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373383">err</span>&nbsp;<span class="op" id="7373387">=</span>&nbsp;<span class="ident" id="7373389">dec</span><span class="op" id="7373392">.</span><span class="ident" id="7373393">Decode</span><span class="op" id="7373399">(</span><span class="op" id="7373400">&amp;</span><span class="ident" id="7373401">err2</span><span class="op" id="7373405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373408">if</span>&nbsp;<span class="ident" id="7373411">err</span>&nbsp;<span class="op" id="7373415">!=</span>&nbsp;<span class="ident" id="7373418">nil</span>&nbsp;<span class="op" id="7373422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373426">t</span><span class="op" id="7373427">.</span><span class="ident" id="7373428">Fatal</span><span class="op" id="7373433">(</span><span class="string" id="7373434">&#34;decode:&#34;</span><span class="op" id="7373443">,</span>&nbsp;<span class="ident" id="7373445">err</span><span class="op" id="7373448">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373454">if</span>&nbsp;<span class="ident" id="7373457">err2</span>&nbsp;<span class="op" id="7373462">!=</span>&nbsp;<span class="ident" id="7373465">nil</span>&nbsp;<span class="op" id="7373469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373473">t</span><span class="op" id="7373474">.</span><span class="ident" id="7373475">Fatalf</span><span class="op" id="7373481">(</span><span class="string" id="7373482">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7373504">,</span>&nbsp;<span class="ident" id="7373506">err2</span><span class="op" id="7373510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373513">}</span><br>
<span class="lineno"></span><span class="op" id="7373515">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="7373518">func</span>&nbsp;<span class="ident" id="7373523">TestNetIP</span><span class="op" id="7373532">(</span><span class="ident" id="7373533">t</span>&nbsp;<span class="op" id="7373535">*</span><span class="ident" id="7373536">testing</span><span class="op" id="7373543">.</span><span class="ident" id="7373544">T</span><span class="op" id="7373545">)</span>&nbsp;<span class="op" id="7373547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373550">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373593">enc</span>&nbsp;<span class="op" id="7373597">:=</span>&nbsp;<span class="op" id="7373600">[</span><span class="op" id="7373601">]</span><span class="builtintype" id="7373602">byte</span><span class="op" id="7373606">{</span><span class="num" id="7373607">0x07</span><span class="op" id="7373611">,</span>&nbsp;<span class="num" id="7373613">0x0a</span><span class="op" id="7373617">,</span>&nbsp;<span class="num" id="7373619">0x00</span><span class="op" id="7373623">,</span>&nbsp;<span class="num" id="7373625">0x04</span><span class="op" id="7373629">,</span>&nbsp;<span class="num" id="7373631">0x01</span><span class="op" id="7373635">,</span>&nbsp;<span class="num" id="7373637">0x02</span><span class="op" id="7373641">,</span>&nbsp;<span class="num" id="7373643">0x03</span><span class="op" id="7373647">,</span>&nbsp;<span class="num" id="7373649">0x04</span><span class="op" id="7373653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373657">var</span>&nbsp;<span class="ident" id="7373661">ip</span>&nbsp;<span class="ident" id="7373664">net</span><span class="op" id="7373667">.</span><span class="ident" id="7373668">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373672">err</span>&nbsp;<span class="op" id="7373676">:=</span>&nbsp;<span class="ident" id="7373679">NewDecoder</span><span class="op" id="7373689">(</span><span class="ident" id="7373690">bytes</span><span class="op" id="7373695">.</span><span class="ident" id="7373696">NewReader</span><span class="op" id="7373705">(</span><span class="ident" id="7373706">enc</span><span class="op" id="7373709">)</span><span class="op" id="7373710">)</span><span class="op" id="7373711">.</span><span class="ident" id="7373712">Decode</span><span class="op" id="7373718">(</span><span class="op" id="7373719">&amp;</span><span class="ident" id="7373720">ip</span><span class="op" id="7373722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373725">if</span>&nbsp;<span class="ident" id="7373728">err</span>&nbsp;<span class="op" id="7373732">!=</span>&nbsp;<span class="ident" id="7373735">nil</span>&nbsp;<span class="op" id="7373739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373743">t</span><span class="op" id="7373744">.</span><span class="ident" id="7373745">Fatalf</span><span class="op" id="7373751">(</span><span class="string" id="7373752">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7373764">,</span>&nbsp;<span class="ident" id="7373766">err</span><span class="op" id="7373769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373772">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373775">if</span>&nbsp;<span class="ident" id="7373778">ip</span><span class="op" id="7373780">.</span><span class="ident" id="7373781">String</span><span class="op" id="7373787">(</span><span class="op" id="7373788">)</span>&nbsp;<span class="op" id="7373790">!=</span>&nbsp;<span class="string" id="7373793">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="7373803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373807">t</span><span class="op" id="7373808">.</span><span class="ident" id="7373809">Errorf</span><span class="op" id="7373815">(</span><span class="string" id="7373816">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="7373845">,</span>&nbsp;<span class="ident" id="7373847">ip</span><span class="op" id="7373849">.</span><span class="ident" id="7373850">String</span><span class="op" id="7373856">(</span><span class="op" id="7373857">)</span><span class="op" id="7373858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373861">}</span><br>
<span class="lineno"></span><span class="op" id="7373863">}</span>
</div>
</body>
</html>
