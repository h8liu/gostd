<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html" class="current">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2607007">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2607062">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2607116">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2607167">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2607237">package</span>&nbsp;<span class="ident" id="2607245">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2607251">import</span>&nbsp;<span class="op" id="2607258">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2607261">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2607271">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2607281">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607284">//&nbsp;for&nbsp;testing:&nbsp;whatever&nbsp;interrupts&nbsp;a&nbsp;sleep</span><br>
<span class="lineno">15</span><span class="keyword" id="2607328">func</span>&nbsp;<span class="ident" id="2607333">interrupt</span><span class="op" id="2607342">(</span><span class="op" id="2607343">)</span>&nbsp;<span class="op" id="2607345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607348">syscall</span><span class="op" id="2607355">.</span><span class="ident" id="2607356">Kill</span><span class="op" id="2607360">(</span><span class="ident" id="2607361">syscall</span><span class="op" id="2607368">.</span><span class="ident" id="2607369">Getpid</span><span class="op" id="2607375">(</span><span class="op" id="2607376">)</span><span class="op" id="2607377">,</span>&nbsp;<span class="ident" id="2607379">syscall</span><span class="op" id="2607386">.</span><span class="ident" id="2607387">SIGCHLD</span><span class="op" id="2607394">)</span><br>
<span class="lineno"></span><span class="op" id="2607396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607399">//&nbsp;readFile&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">20</span><span class="comment" id="2607460">//&nbsp;It&nbsp;is&nbsp;a&nbsp;trivial&nbsp;implementation&nbsp;of&nbsp;ioutil.ReadFile,&nbsp;reimplemented</span><br>
<span class="lineno"></span><span class="comment" id="2607528">//&nbsp;here&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;io/ioutil&nbsp;or&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2607575">func</span>&nbsp;<span class="ident" id="2607580">readFile</span><span class="op" id="2607588">(</span><span class="ident" id="2607589">name</span>&nbsp;<span class="builtintype" id="2607594">string</span><span class="op" id="2607600">)</span>&nbsp;<span class="op" id="2607602">(</span><span class="op" id="2607603">[</span><span class="op" id="2607604">]</span><span class="builtintype" id="2607605">byte</span><span class="op" id="2607609">,</span>&nbsp;<span class="builtintype" id="2607611">error</span><span class="op" id="2607616">)</span>&nbsp;<span class="op" id="2607618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607621">f</span><span class="op" id="2607622">,</span>&nbsp;<span class="ident" id="2607624">err</span>&nbsp;<span class="op" id="2607628">:=</span>&nbsp;<span class="ident" id="2607631">syscall</span><span class="op" id="2607638">.</span><span class="ident" id="2607639">Open</span><span class="op" id="2607643">(</span><span class="ident" id="2607644">name</span><span class="op" id="2607648">,</span>&nbsp;<span class="ident" id="2607650">syscall</span><span class="op" id="2607657">.</span><span class="ident" id="2607658">O_RDONLY</span><span class="op" id="2607666">,</span>&nbsp;<span class="num" id="2607668">0</span><span class="op" id="2607669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607672">if</span>&nbsp;<span class="ident" id="2607675">err</span>&nbsp;<span class="op" id="2607679">!=</span>&nbsp;<span class="ident" id="2607682">nil</span>&nbsp;<span class="op" id="2607686">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607690">return</span>&nbsp;<span class="ident" id="2607697">nil</span><span class="op" id="2607700">,</span>&nbsp;<span class="ident" id="2607702">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607710">defer</span>&nbsp;<span class="ident" id="2607716">syscall</span><span class="op" id="2607723">.</span><span class="ident" id="2607724">Close</span><span class="op" id="2607729">(</span><span class="ident" id="2607730">f</span><span class="op" id="2607731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607734">var</span>&nbsp;<span class="op" id="2607738">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607742">buf</span>&nbsp;<span class="op" id="2607746">[</span><span class="num" id="2607747">4096</span><span class="op" id="2607751">]</span><span class="builtintype" id="2607752">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607759">ret</span>&nbsp;<span class="op" id="2607763">[</span><span class="op" id="2607764">]</span><span class="builtintype" id="2607765">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607772">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2607776">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607784">for</span>&nbsp;<span class="op" id="2607788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607792">n</span><span class="op" id="2607793">,</span>&nbsp;<span class="ident" id="2607795">err</span>&nbsp;<span class="op" id="2607799">=</span>&nbsp;<span class="ident" id="2607801">syscall</span><span class="op" id="2607808">.</span><span class="ident" id="2607809">Read</span><span class="op" id="2607813">(</span><span class="ident" id="2607814">f</span><span class="op" id="2607815">,</span>&nbsp;<span class="ident" id="2607817">buf</span><span class="op" id="2607820">[</span><span class="op" id="2607821">:</span><span class="op" id="2607822">]</span><span class="op" id="2607823">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607827">if</span>&nbsp;<span class="ident" id="2607830">n</span>&nbsp;<span class="op" id="2607832">&gt;</span>&nbsp;<span class="num" id="2607834">0</span>&nbsp;<span class="op" id="2607836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607841">ret</span>&nbsp;<span class="op" id="2607845">=</span>&nbsp;<span class="builtinfunc" id="2607847">append</span><span class="op" id="2607853">(</span><span class="ident" id="2607854">ret</span><span class="op" id="2607857">,</span>&nbsp;<span class="ident" id="2607859">buf</span><span class="op" id="2607862">[</span><span class="op" id="2607863">:</span><span class="ident" id="2607864">n</span><span class="op" id="2607865">]</span><span class="op" id="2607866">...</span><span class="op" id="2607869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607877">if</span>&nbsp;<span class="ident" id="2607880">n</span>&nbsp;<span class="op" id="2607882">==</span>&nbsp;<span class="num" id="2607885">0</span>&nbsp;<span class="op" id="2607887">||</span>&nbsp;<span class="ident" id="2607890">err</span>&nbsp;<span class="op" id="2607894">!=</span>&nbsp;<span class="ident" id="2607897">nil</span>&nbsp;<span class="op" id="2607901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607906">break</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607920">return</span>&nbsp;<span class="ident" id="2607927">ret</span><span class="op" id="2607930">,</span>&nbsp;<span class="ident" id="2607932">err</span><br>
<span class="lineno"></span><span class="op" id="2607936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2607939">func</span>&nbsp;<span class="ident" id="2607944">open</span><span class="op" id="2607948">(</span><span class="ident" id="2607949">name</span>&nbsp;<span class="builtintype" id="2607954">string</span><span class="op" id="2607960">)</span>&nbsp;<span class="op" id="2607962">(</span><span class="builtintype" id="2607963">uintptr</span><span class="op" id="2607970">,</span>&nbsp;<span class="builtintype" id="2607972">error</span><span class="op" id="2607977">)</span>&nbsp;<span class="op" id="2607979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607982">fd</span><span class="op" id="2607984">,</span>&nbsp;<span class="ident" id="2607986">err</span>&nbsp;<span class="op" id="2607990">:=</span>&nbsp;<span class="ident" id="2607993">syscall</span><span class="op" id="2608000">.</span><span class="ident" id="2608001">Open</span><span class="op" id="2608005">(</span><span class="ident" id="2608006">name</span><span class="op" id="2608010">,</span>&nbsp;<span class="ident" id="2608012">syscall</span><span class="op" id="2608019">.</span><span class="ident" id="2608020">O_RDONLY</span><span class="op" id="2608028">,</span>&nbsp;<span class="num" id="2608030">0</span><span class="op" id="2608031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608034">if</span>&nbsp;<span class="ident" id="2608037">err</span>&nbsp;<span class="op" id="2608041">!=</span>&nbsp;<span class="ident" id="2608044">nil</span>&nbsp;<span class="op" id="2608048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608052">return</span>&nbsp;<span class="num" id="2608059">0</span><span class="op" id="2608060">,</span>&nbsp;<span class="ident" id="2608062">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608067">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608070">return</span>&nbsp;<span class="builtintype" id="2608077">uintptr</span><span class="op" id="2608084">(</span><span class="ident" id="2608085">fd</span><span class="op" id="2608087">)</span><span class="op" id="2608088">,</span>&nbsp;<span class="ident" id="2608090">nil</span><br>
<span class="lineno"></span><span class="op" id="2608094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2608097">func</span>&nbsp;<span class="ident" id="2608102">closefd</span><span class="op" id="2608109">(</span><span class="ident" id="2608110">fd</span>&nbsp;<span class="builtintype" id="2608113">uintptr</span><span class="op" id="2608120">)</span>&nbsp;<span class="op" id="2608122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608125">syscall</span><span class="op" id="2608132">.</span><span class="ident" id="2608133">Close</span><span class="op" id="2608138">(</span><span class="builtintype" id="2608139">int</span><span class="op" id="2608142">(</span><span class="ident" id="2608143">fd</span><span class="op" id="2608145">)</span><span class="op" id="2608146">)</span><br>
<span class="lineno">55</span><span class="op" id="2608148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2608151">func</span>&nbsp;<span class="ident" id="2608156">preadn</span><span class="op" id="2608162">(</span><span class="ident" id="2608163">fd</span>&nbsp;<span class="builtintype" id="2608166">uintptr</span><span class="op" id="2608173">,</span>&nbsp;<span class="ident" id="2608175">buf</span>&nbsp;<span class="op" id="2608179">[</span><span class="op" id="2608180">]</span><span class="builtintype" id="2608181">byte</span><span class="op" id="2608185">,</span>&nbsp;<span class="ident" id="2608187">off</span>&nbsp;<span class="builtintype" id="2608191">int</span><span class="op" id="2608194">)</span>&nbsp;<span class="builtintype" id="2608196">error</span>&nbsp;<span class="op" id="2608202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608205">whence</span>&nbsp;<span class="op" id="2608212">:=</span>&nbsp;<span class="num" id="2608215">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608218">if</span>&nbsp;<span class="ident" id="2608221">off</span>&nbsp;<span class="op" id="2608225">&lt;</span>&nbsp;<span class="num" id="2608227">0</span>&nbsp;<span class="op" id="2608229">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608233">whence</span>&nbsp;<span class="op" id="2608240">=</span>&nbsp;<span class="num" id="2608242">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608248">if</span>&nbsp;<span class="ident" id="2608251">_</span><span class="op" id="2608252">,</span>&nbsp;<span class="ident" id="2608254">err</span>&nbsp;<span class="op" id="2608258">:=</span>&nbsp;<span class="ident" id="2608261">syscall</span><span class="op" id="2608268">.</span><span class="ident" id="2608269">Seek</span><span class="op" id="2608273">(</span><span class="builtintype" id="2608274">int</span><span class="op" id="2608277">(</span><span class="ident" id="2608278">fd</span><span class="op" id="2608280">)</span><span class="op" id="2608281">,</span>&nbsp;<span class="ident" id="2608283">int64</span><span class="op" id="2608288">(</span><span class="ident" id="2608289">off</span><span class="op" id="2608292">)</span><span class="op" id="2608293">,</span>&nbsp;<span class="ident" id="2608295">whence</span><span class="op" id="2608301">)</span><span class="op" id="2608302">;</span>&nbsp;<span class="ident" id="2608304">err</span>&nbsp;<span class="op" id="2608308">!=</span>&nbsp;<span class="ident" id="2608311">nil</span>&nbsp;<span class="op" id="2608315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608319">return</span>&nbsp;<span class="ident" id="2608326">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608331">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608334">for</span>&nbsp;<span class="builtinfunc" id="2608338">len</span><span class="op" id="2608341">(</span><span class="ident" id="2608342">buf</span><span class="op" id="2608345">)</span>&nbsp;<span class="op" id="2608347">&gt;</span>&nbsp;<span class="num" id="2608349">0</span>&nbsp;<span class="op" id="2608351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608355">m</span><span class="op" id="2608356">,</span>&nbsp;<span class="ident" id="2608358">err</span>&nbsp;<span class="op" id="2608362">:=</span>&nbsp;<span class="ident" id="2608365">syscall</span><span class="op" id="2608372">.</span><span class="ident" id="2608373">Read</span><span class="op" id="2608377">(</span><span class="builtintype" id="2608378">int</span><span class="op" id="2608381">(</span><span class="ident" id="2608382">fd</span><span class="op" id="2608384">)</span><span class="op" id="2608385">,</span>&nbsp;<span class="ident" id="2608387">buf</span><span class="op" id="2608390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608394">if</span>&nbsp;<span class="ident" id="2608397">m</span>&nbsp;<span class="op" id="2608399">&lt;=</span>&nbsp;<span class="num" id="2608402">0</span>&nbsp;<span class="op" id="2608404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608409">if</span>&nbsp;<span class="ident" id="2608412">err</span>&nbsp;<span class="op" id="2608416">==</span>&nbsp;<span class="ident" id="2608419">nil</span>&nbsp;<span class="op" id="2608423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608429">return</span>&nbsp;<span class="ident" id="2608436">errors</span><span class="op" id="2608442">.</span><span class="ident" id="2608443">New</span><span class="op" id="2608446">(</span><span class="string" id="2608447">&#34;short&nbsp;read&#34;</span><span class="op" id="2608459">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608469">return</span>&nbsp;<span class="ident" id="2608476">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608486">buf</span>&nbsp;<span class="op" id="2608490">=</span>&nbsp;<span class="ident" id="2608492">buf</span><span class="op" id="2608495">[</span><span class="ident" id="2608496">m</span><span class="op" id="2608497">:</span><span class="op" id="2608498">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608501">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608504">return</span>&nbsp;<span class="ident" id="2608511">nil</span><br>
<span class="lineno"></span><span class="op" id="2608515">}</span>
</div>
</body>
</html>
