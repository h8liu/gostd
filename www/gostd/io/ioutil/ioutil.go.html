<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3529920">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3529975">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3530029">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3530080">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="3530137">package</span>&nbsp;<span class="ident" id="3530145">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3530153">import</span>&nbsp;<span class="op" id="3530160">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530163">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530172">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530178">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530184">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3530192">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3530199">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3530202">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3530277">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="3530342">func</span>&nbsp;<span class="ident" id="3530347">readAll</span><span class="op" id="3530354">(</span><span class="ident" id="3530355">r</span>&nbsp;<span class="ident" id="3530357">io</span><span class="op" id="3530359">.</span><span class="ident" id="3530360">Reader</span><span class="op" id="3530366">,</span>&nbsp;<span class="ident" id="3530368">capacity</span>&nbsp;<span class="ident" id="3530377">int64</span><span class="op" id="3530382">)</span>&nbsp;<span class="op" id="3530384">(</span><span class="ident" id="3530385">b</span>&nbsp;<span class="op" id="3530387">[</span><span class="op" id="3530388">]</span><span class="builtintype" id="3530389">byte</span><span class="op" id="3530393">,</span>&nbsp;<span class="ident" id="3530395">err</span>&nbsp;<span class="builtintype" id="3530399">error</span><span class="op" id="3530404">)</span>&nbsp;<span class="op" id="3530406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3530409">buf</span>&nbsp;<span class="op" id="3530413">:=</span>&nbsp;<span class="ident" id="3530416">bytes</span><span class="op" id="3530421">.</span><span class="ident" id="3530422">NewBuffer</span><span class="op" id="3530431">(</span><span class="builtinfunc" id="3530432">make</span><span class="op" id="3530436">(</span><span class="op" id="3530437">[</span><span class="op" id="3530438">]</span><span class="builtintype" id="3530439">byte</span><span class="op" id="3530443">,</span>&nbsp;<span class="num" id="3530445">0</span><span class="op" id="3530446">,</span>&nbsp;<span class="ident" id="3530448">capacity</span><span class="op" id="3530456">)</span><span class="op" id="3530457">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3530460">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3530520">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3530574">defer</span>&nbsp;<span class="keyword" id="3530580">func</span><span class="op" id="3530584">(</span><span class="op" id="3530585">)</span>&nbsp;<span class="op" id="3530587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3530591">e</span>&nbsp;<span class="op" id="3530593">:=</span>&nbsp;<span class="builtinfunc" id="3530596">recover</span><span class="op" id="3530603">(</span><span class="op" id="3530604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3530608">if</span>&nbsp;<span class="ident" id="3530611">e</span>&nbsp;<span class="op" id="3530613">==</span>&nbsp;<span class="ident" id="3530616">nil</span>&nbsp;<span class="op" id="3530620">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3530625">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3530634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3530638">if</span>&nbsp;<span class="ident" id="3530641">panicErr</span><span class="op" id="3530649">,</span>&nbsp;<span class="ident" id="3530651">ok</span>&nbsp;<span class="op" id="3530654">:=</span>&nbsp;<span class="ident" id="3530657">e</span><span class="op" id="3530658">.</span><span class="op" id="3530659">(</span><span class="builtintype" id="3530660">error</span><span class="op" id="3530665">)</span><span class="op" id="3530666">;</span>&nbsp;<span class="ident" id="3530668">ok</span>&nbsp;<span class="op" id="3530671">&amp;&amp;</span>&nbsp;<span class="ident" id="3530674">panicErr</span>&nbsp;<span class="op" id="3530683">==</span>&nbsp;<span class="ident" id="3530686">bytes</span><span class="op" id="3530691">.</span><span class="ident" id="3530692">ErrTooLarge</span>&nbsp;<span class="op" id="3530704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3530709">err</span>&nbsp;<span class="op" id="3530713">=</span>&nbsp;<span class="ident" id="3530715">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3530726">}</span>&nbsp;<span class="keyword" id="3530728">else</span>&nbsp;<span class="op" id="3530733">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3530738">panic</span><span class="op" id="3530743">(</span><span class="ident" id="3530744">e</span><span class="op" id="3530745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3530749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3530752">}</span><span class="op" id="3530753">(</span><span class="op" id="3530754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3530757">_</span><span class="op" id="3530758">,</span>&nbsp;<span class="ident" id="3530760">err</span>&nbsp;<span class="op" id="3530764">=</span>&nbsp;<span class="ident" id="3530766">buf</span><span class="op" id="3530769">.</span><span class="ident" id="3530770">ReadFrom</span><span class="op" id="3530778">(</span><span class="ident" id="3530779">r</span><span class="op" id="3530780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3530783">return</span>&nbsp;<span class="ident" id="3530790">buf</span><span class="op" id="3530793">.</span><span class="ident" id="3530794">Bytes</span><span class="op" id="3530799">(</span><span class="op" id="3530800">)</span><span class="op" id="3530801">,</span>&nbsp;<span class="ident" id="3530803">err</span><br>
<span class="lineno">35</span><span class="op" id="3530807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3530810">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3530886">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3530962">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="3531036">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3531067">func</span>&nbsp;<span class="ident" id="3531072">ReadAll</span><span class="op" id="3531079">(</span><span class="ident" id="3531080">r</span>&nbsp;<span class="ident" id="3531082">io</span><span class="op" id="3531084">.</span><span class="ident" id="3531085">Reader</span><span class="op" id="3531091">)</span>&nbsp;<span class="op" id="3531093">(</span><span class="op" id="3531094">[</span><span class="op" id="3531095">]</span><span class="builtintype" id="3531096">byte</span><span class="op" id="3531100">,</span>&nbsp;<span class="builtintype" id="3531102">error</span><span class="op" id="3531107">)</span>&nbsp;<span class="op" id="3531109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531112">return</span>&nbsp;<span class="ident" id="3531119">readAll</span><span class="op" id="3531126">(</span><span class="ident" id="3531127">r</span><span class="op" id="3531128">,</span>&nbsp;<span class="ident" id="3531130">bytes</span><span class="op" id="3531135">.</span><span class="ident" id="3531136">MinRead</span><span class="op" id="3531143">)</span><br>
<span class="lineno"></span><span class="op" id="3531145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3531148">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="3531219">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="3531293">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3531365">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3531384">func</span>&nbsp;<span class="ident" id="3531389">ReadFile</span><span class="op" id="3531397">(</span><span class="ident" id="3531398">filename</span>&nbsp;<span class="builtintype" id="3531407">string</span><span class="op" id="3531413">)</span>&nbsp;<span class="op" id="3531415">(</span><span class="op" id="3531416">[</span><span class="op" id="3531417">]</span><span class="builtintype" id="3531418">byte</span><span class="op" id="3531422">,</span>&nbsp;<span class="builtintype" id="3531424">error</span><span class="op" id="3531429">)</span>&nbsp;<span class="op" id="3531431">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3531434">f</span><span class="op" id="3531435">,</span>&nbsp;<span class="ident" id="3531437">err</span>&nbsp;<span class="op" id="3531441">:=</span>&nbsp;<span class="ident" id="3531444">os</span><span class="op" id="3531446">.</span><span class="ident" id="3531447">Open</span><span class="op" id="3531451">(</span><span class="ident" id="3531452">filename</span><span class="op" id="3531460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531463">if</span>&nbsp;<span class="ident" id="3531466">err</span>&nbsp;<span class="op" id="3531470">!=</span>&nbsp;<span class="ident" id="3531473">nil</span>&nbsp;<span class="op" id="3531477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531481">return</span>&nbsp;<span class="ident" id="3531488">nil</span><span class="op" id="3531491">,</span>&nbsp;<span class="ident" id="3531493">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531501">defer</span>&nbsp;<span class="ident" id="3531507">f</span><span class="op" id="3531508">.</span><span class="ident" id="3531509">Close</span><span class="op" id="3531514">(</span><span class="op" id="3531515">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531518">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531601">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531671">var</span>&nbsp;<span class="ident" id="3531675">n</span>&nbsp;<span class="ident" id="3531677">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531685">if</span>&nbsp;<span class="ident" id="3531688">fi</span><span class="op" id="3531690">,</span>&nbsp;<span class="ident" id="3531692">err</span>&nbsp;<span class="op" id="3531696">:=</span>&nbsp;<span class="ident" id="3531699">f</span><span class="op" id="3531700">.</span><span class="ident" id="3531701">Stat</span><span class="op" id="3531705">(</span><span class="op" id="3531706">)</span><span class="op" id="3531707">;</span>&nbsp;<span class="ident" id="3531709">err</span>&nbsp;<span class="op" id="3531713">==</span>&nbsp;<span class="ident" id="3531716">nil</span>&nbsp;<span class="op" id="3531720">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531724">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3531776">if</span>&nbsp;<span class="ident" id="3531779">size</span>&nbsp;<span class="op" id="3531784">:=</span>&nbsp;<span class="ident" id="3531787">fi</span><span class="op" id="3531789">.</span><span class="ident" id="3531790">Size</span><span class="op" id="3531794">(</span><span class="op" id="3531795">)</span><span class="op" id="3531796">;</span>&nbsp;<span class="ident" id="3531798">size</span>&nbsp;<span class="op" id="3531803">&lt;</span>&nbsp;<span class="num" id="3531805">1e9</span>&nbsp;<span class="op" id="3531809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3531814">n</span>&nbsp;<span class="op" id="3531816">=</span>&nbsp;<span class="ident" id="3531818">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3531828">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531831">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531913">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3531996">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3532076">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3532158">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532221">return</span>&nbsp;<span class="ident" id="3532228">readAll</span><span class="op" id="3532235">(</span><span class="ident" id="3532236">f</span><span class="op" id="3532237">,</span>&nbsp;<span class="ident" id="3532239">n</span><span class="op" id="3532240">+</span><span class="ident" id="3532241">bytes</span><span class="op" id="3532246">.</span><span class="ident" id="3532247">MinRead</span><span class="op" id="3532254">)</span><br>
<span class="lineno"></span><span class="op" id="3532256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3532259">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="3532313">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="3532388">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="3532440">func</span>&nbsp;<span class="ident" id="3532445">WriteFile</span><span class="op" id="3532454">(</span><span class="ident" id="3532455">filename</span>&nbsp;<span class="builtintype" id="3532464">string</span><span class="op" id="3532470">,</span>&nbsp;<span class="ident" id="3532472">data</span>&nbsp;<span class="op" id="3532477">[</span><span class="op" id="3532478">]</span><span class="builtintype" id="3532479">byte</span><span class="op" id="3532483">,</span>&nbsp;<span class="ident" id="3532485">perm</span>&nbsp;<span class="ident" id="3532490">os</span><span class="op" id="3532492">.</span><span class="ident" id="3532493">FileMode</span><span class="op" id="3532501">)</span>&nbsp;<span class="builtintype" id="3532503">error</span>&nbsp;<span class="op" id="3532509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3532512">f</span><span class="op" id="3532513">,</span>&nbsp;<span class="ident" id="3532515">err</span>&nbsp;<span class="op" id="3532519">:=</span>&nbsp;<span class="ident" id="3532522">os</span><span class="op" id="3532524">.</span><span class="ident" id="3532525">OpenFile</span><span class="op" id="3532533">(</span><span class="ident" id="3532534">filename</span><span class="op" id="3532542">,</span>&nbsp;<span class="ident" id="3532544">os</span><span class="op" id="3532546">.</span><span class="ident" id="3532547">O_WRONLY</span><span class="op" id="3532555">|</span><span class="ident" id="3532556">os</span><span class="op" id="3532558">.</span><span class="ident" id="3532559">O_CREATE</span><span class="op" id="3532567">|</span><span class="ident" id="3532568">os</span><span class="op" id="3532570">.</span><span class="ident" id="3532571">O_TRUNC</span><span class="op" id="3532578">,</span>&nbsp;<span class="ident" id="3532580">perm</span><span class="op" id="3532584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532587">if</span>&nbsp;<span class="ident" id="3532590">err</span>&nbsp;<span class="op" id="3532594">!=</span>&nbsp;<span class="ident" id="3532597">nil</span>&nbsp;<span class="op" id="3532601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532605">return</span>&nbsp;<span class="ident" id="3532612">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3532620">n</span><span class="op" id="3532621">,</span>&nbsp;<span class="ident" id="3532623">err</span>&nbsp;<span class="op" id="3532627">:=</span>&nbsp;<span class="ident" id="3532630">f</span><span class="op" id="3532631">.</span><span class="ident" id="3532632">Write</span><span class="op" id="3532637">(</span><span class="ident" id="3532638">data</span><span class="op" id="3532642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532645">if</span>&nbsp;<span class="ident" id="3532648">err</span>&nbsp;<span class="op" id="3532652">==</span>&nbsp;<span class="ident" id="3532655">nil</span>&nbsp;<span class="op" id="3532659">&amp;&amp;</span>&nbsp;<span class="ident" id="3532662">n</span>&nbsp;<span class="op" id="3532664">&lt;</span>&nbsp;<span class="builtinfunc" id="3532666">len</span><span class="op" id="3532669">(</span><span class="ident" id="3532670">data</span><span class="op" id="3532674">)</span>&nbsp;<span class="op" id="3532676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3532680">err</span>&nbsp;<span class="op" id="3532684">=</span>&nbsp;<span class="ident" id="3532686">io</span><span class="op" id="3532688">.</span><span class="ident" id="3532689">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532704">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532707">if</span>&nbsp;<span class="ident" id="3532710">err1</span>&nbsp;<span class="op" id="3532715">:=</span>&nbsp;<span class="ident" id="3532718">f</span><span class="op" id="3532719">.</span><span class="ident" id="3532720">Close</span><span class="op" id="3532725">(</span><span class="op" id="3532726">)</span><span class="op" id="3532727">;</span>&nbsp;<span class="ident" id="3532729">err</span>&nbsp;<span class="op" id="3532733">==</span>&nbsp;<span class="ident" id="3532736">nil</span>&nbsp;<span class="op" id="3532740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3532744">err</span>&nbsp;<span class="op" id="3532748">=</span>&nbsp;<span class="ident" id="3532750">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3532756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3532759">return</span>&nbsp;<span class="ident" id="3532766">err</span><br>
<span class="lineno"></span><span class="op" id="3532770">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3532773">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3532810">type</span>&nbsp;<span class="ident" id="3532815">byName</span>&nbsp;<span class="op" id="3532822">[</span><span class="op" id="3532823">]</span><span class="ident" id="3532824">os</span><span class="op" id="3532826">.</span><span class="ident" id="3532827">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3532837">func</span>&nbsp;<span class="op" id="3532842">(</span><span class="ident" id="3532843">f</span>&nbsp;<span class="ident" id="3532845">byName</span><span class="op" id="3532851">)</span>&nbsp;<span class="ident" id="3532853">Len</span><span class="op" id="3532856">(</span><span class="op" id="3532857">)</span>&nbsp;<span class="builtintype" id="3532859">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3532873">{</span>&nbsp;<span class="keyword" id="3532875">return</span>&nbsp;<span class="builtinfunc" id="3532882">len</span><span class="op" id="3532885">(</span><span class="ident" id="3532886">f</span><span class="op" id="3532887">)</span>&nbsp;<span class="op" id="3532889">}</span><br>
<span class="lineno">95</span><span class="keyword" id="3532891">func</span>&nbsp;<span class="op" id="3532896">(</span><span class="ident" id="3532897">f</span>&nbsp;<span class="ident" id="3532899">byName</span><span class="op" id="3532905">)</span>&nbsp;<span class="ident" id="3532907">Less</span><span class="op" id="3532911">(</span><span class="ident" id="3532912">i</span><span class="op" id="3532913">,</span>&nbsp;<span class="ident" id="3532915">j</span>&nbsp;<span class="builtintype" id="3532917">int</span><span class="op" id="3532920">)</span>&nbsp;<span class="builtintype" id="3532922">bool</span>&nbsp;<span class="op" id="3532927">{</span>&nbsp;<span class="keyword" id="3532929">return</span>&nbsp;<span class="ident" id="3532936">f</span><span class="op" id="3532937">[</span><span class="ident" id="3532938">i</span><span class="op" id="3532939">]</span><span class="op" id="3532940">.</span><span class="ident" id="3532941">Name</span><span class="op" id="3532945">(</span><span class="op" id="3532946">)</span>&nbsp;<span class="op" id="3532948">&lt;</span>&nbsp;<span class="ident" id="3532950">f</span><span class="op" id="3532951">[</span><span class="ident" id="3532952">j</span><span class="op" id="3532953">]</span><span class="op" id="3532954">.</span><span class="ident" id="3532955">Name</span><span class="op" id="3532959">(</span><span class="op" id="3532960">)</span>&nbsp;<span class="op" id="3532962">}</span><br>
<span class="lineno"></span><span class="keyword" id="3532964">func</span>&nbsp;<span class="op" id="3532969">(</span><span class="ident" id="3532970">f</span>&nbsp;<span class="ident" id="3532972">byName</span><span class="op" id="3532978">)</span>&nbsp;<span class="ident" id="3532980">Swap</span><span class="op" id="3532984">(</span><span class="ident" id="3532985">i</span><span class="op" id="3532986">,</span>&nbsp;<span class="ident" id="3532988">j</span>&nbsp;<span class="builtintype" id="3532990">int</span><span class="op" id="3532993">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3533000">{</span>&nbsp;<span class="ident" id="3533002">f</span><span class="op" id="3533003">[</span><span class="ident" id="3533004">i</span><span class="op" id="3533005">]</span><span class="op" id="3533006">,</span>&nbsp;<span class="ident" id="3533008">f</span><span class="op" id="3533009">[</span><span class="ident" id="3533010">j</span><span class="op" id="3533011">]</span>&nbsp;<span class="op" id="3533013">=</span>&nbsp;<span class="ident" id="3533015">f</span><span class="op" id="3533016">[</span><span class="ident" id="3533017">j</span><span class="op" id="3533018">]</span><span class="op" id="3533019">,</span>&nbsp;<span class="ident" id="3533021">f</span><span class="op" id="3533022">[</span><span class="ident" id="3533023">i</span><span class="op" id="3533024">]</span>&nbsp;<span class="op" id="3533026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3533029">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3533089">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="3533128">func</span>&nbsp;<span class="ident" id="3533133">ReadDir</span><span class="op" id="3533140">(</span><span class="ident" id="3533141">dirname</span>&nbsp;<span class="builtintype" id="3533149">string</span><span class="op" id="3533155">)</span>&nbsp;<span class="op" id="3533157">(</span><span class="op" id="3533158">[</span><span class="op" id="3533159">]</span><span class="ident" id="3533160">os</span><span class="op" id="3533162">.</span><span class="ident" id="3533163">FileInfo</span><span class="op" id="3533171">,</span>&nbsp;<span class="builtintype" id="3533173">error</span><span class="op" id="3533178">)</span>&nbsp;<span class="op" id="3533180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533183">f</span><span class="op" id="3533184">,</span>&nbsp;<span class="ident" id="3533186">err</span>&nbsp;<span class="op" id="3533190">:=</span>&nbsp;<span class="ident" id="3533193">os</span><span class="op" id="3533195">.</span><span class="ident" id="3533196">Open</span><span class="op" id="3533200">(</span><span class="ident" id="3533201">dirname</span><span class="op" id="3533208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533211">if</span>&nbsp;<span class="ident" id="3533214">err</span>&nbsp;<span class="op" id="3533218">!=</span>&nbsp;<span class="ident" id="3533221">nil</span>&nbsp;<span class="op" id="3533225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533229">return</span>&nbsp;<span class="ident" id="3533236">nil</span><span class="op" id="3533239">,</span>&nbsp;<span class="ident" id="3533241">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3533246">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533249">list</span><span class="op" id="3533253">,</span>&nbsp;<span class="ident" id="3533255">err</span>&nbsp;<span class="op" id="3533259">:=</span>&nbsp;<span class="ident" id="3533262">f</span><span class="op" id="3533263">.</span><span class="ident" id="3533264">Readdir</span><span class="op" id="3533271">(</span><span class="op" id="3533272">-</span><span class="num" id="3533273">1</span><span class="op" id="3533274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533277">f</span><span class="op" id="3533278">.</span><span class="ident" id="3533279">Close</span><span class="op" id="3533284">(</span><span class="op" id="3533285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533288">if</span>&nbsp;<span class="ident" id="3533291">err</span>&nbsp;<span class="op" id="3533295">!=</span>&nbsp;<span class="ident" id="3533298">nil</span>&nbsp;<span class="op" id="3533302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533306">return</span>&nbsp;<span class="ident" id="3533313">nil</span><span class="op" id="3533316">,</span>&nbsp;<span class="ident" id="3533318">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3533323">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533326">sort</span><span class="op" id="3533330">.</span><span class="ident" id="3533331">Sort</span><span class="op" id="3533335">(</span><span class="ident" id="3533336">byName</span><span class="op" id="3533342">(</span><span class="ident" id="3533343">list</span><span class="op" id="3533347">)</span><span class="op" id="3533348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533351">return</span>&nbsp;<span class="ident" id="3533358">list</span><span class="op" id="3533362">,</span>&nbsp;<span class="ident" id="3533364">nil</span><br>
<span class="lineno"></span><span class="op" id="3533368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3533371">type</span>&nbsp;<span class="ident" id="3533376">nopCloser</span>&nbsp;<span class="keyword" id="3533386">struct</span>&nbsp;<span class="op" id="3533393">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533396">io</span><span class="op" id="3533398">.</span><span class="ident" id="3533399">Reader</span><br>
<span class="lineno"></span><span class="op" id="3533406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3533409">func</span>&nbsp;<span class="op" id="3533414">(</span><span class="ident" id="3533415">nopCloser</span><span class="op" id="3533424">)</span>&nbsp;<span class="ident" id="3533426">Close</span><span class="op" id="3533431">(</span><span class="op" id="3533432">)</span>&nbsp;<span class="builtintype" id="3533434">error</span>&nbsp;<span class="op" id="3533440">{</span>&nbsp;<span class="keyword" id="3533442">return</span>&nbsp;<span class="ident" id="3533449">nil</span>&nbsp;<span class="op" id="3533453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3533456">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="3533525">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3533551">func</span>&nbsp;<span class="ident" id="3533556">NopCloser</span><span class="op" id="3533565">(</span><span class="ident" id="3533566">r</span>&nbsp;<span class="ident" id="3533568">io</span><span class="op" id="3533570">.</span><span class="ident" id="3533571">Reader</span><span class="op" id="3533577">)</span>&nbsp;<span class="ident" id="3533579">io</span><span class="op" id="3533581">.</span><span class="ident" id="3533582">ReadCloser</span>&nbsp;<span class="op" id="3533593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533596">return</span>&nbsp;<span class="ident" id="3533603">nopCloser</span><span class="op" id="3533612">{</span><span class="ident" id="3533613">r</span><span class="op" id="3533614">}</span><br>
<span class="lineno"></span><span class="op" id="3533616">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3533619">type</span>&nbsp;<span class="ident" id="3533624">devNull</span>&nbsp;<span class="builtintype" id="3533632">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3533637">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3533703">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="3533755">var</span>&nbsp;<span class="ident" id="3533759">_</span>&nbsp;<span class="ident" id="3533761">io</span><span class="op" id="3533763">.</span><span class="ident" id="3533764">ReaderFrom</span>&nbsp;<span class="op" id="3533775">=</span>&nbsp;<span class="ident" id="3533777">devNull</span><span class="op" id="3533784">(</span><span class="num" id="3533785">0</span><span class="op" id="3533786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3533789">func</span>&nbsp;<span class="op" id="3533794">(</span><span class="ident" id="3533795">devNull</span><span class="op" id="3533802">)</span>&nbsp;<span class="ident" id="3533804">Write</span><span class="op" id="3533809">(</span><span class="ident" id="3533810">p</span>&nbsp;<span class="op" id="3533812">[</span><span class="op" id="3533813">]</span><span class="builtintype" id="3533814">byte</span><span class="op" id="3533818">)</span>&nbsp;<span class="op" id="3533820">(</span><span class="builtintype" id="3533821">int</span><span class="op" id="3533824">,</span>&nbsp;<span class="builtintype" id="3533826">error</span><span class="op" id="3533831">)</span>&nbsp;<span class="op" id="3533833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533836">return</span>&nbsp;<span class="builtinfunc" id="3533843">len</span><span class="op" id="3533846">(</span><span class="ident" id="3533847">p</span><span class="op" id="3533848">)</span><span class="op" id="3533849">,</span>&nbsp;<span class="ident" id="3533851">nil</span><br>
<span class="lineno"></span><span class="op" id="3533855">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="3533858">func</span>&nbsp;<span class="op" id="3533863">(</span><span class="ident" id="3533864">devNull</span><span class="op" id="3533871">)</span>&nbsp;<span class="ident" id="3533873">WriteString</span><span class="op" id="3533884">(</span><span class="ident" id="3533885">s</span>&nbsp;<span class="builtintype" id="3533887">string</span><span class="op" id="3533893">)</span>&nbsp;<span class="op" id="3533895">(</span><span class="builtintype" id="3533896">int</span><span class="op" id="3533899">,</span>&nbsp;<span class="builtintype" id="3533901">error</span><span class="op" id="3533906">)</span>&nbsp;<span class="op" id="3533908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3533911">return</span>&nbsp;<span class="builtinfunc" id="3533918">len</span><span class="op" id="3533921">(</span><span class="ident" id="3533922">s</span><span class="op" id="3533923">)</span><span class="op" id="3533924">,</span>&nbsp;<span class="ident" id="3533926">nil</span><br>
<span class="lineno"></span><span class="op" id="3533930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3533933">var</span>&nbsp;<span class="ident" id="3533937">blackHolePool</span>&nbsp;<span class="op" id="3533951">=</span>&nbsp;<span class="ident" id="3533953">sync</span><span class="op" id="3533957">.</span><span class="ident" id="3533958">Pool</span><span class="op" id="3533962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533965">New</span><span class="op" id="3533968">:</span>&nbsp;<span class="keyword" id="3533970">func</span><span class="op" id="3533974">(</span><span class="op" id="3533975">)</span>&nbsp;<span class="keyword" id="3533977">interface</span><span class="op" id="3533986">{</span><span class="op" id="3533987">}</span>&nbsp;<span class="op" id="3533989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3533993">b</span>&nbsp;<span class="op" id="3533995">:=</span>&nbsp;<span class="builtinfunc" id="3533998">make</span><span class="op" id="3534002">(</span><span class="op" id="3534003">[</span><span class="op" id="3534004">]</span><span class="builtintype" id="3534005">byte</span><span class="op" id="3534009">,</span>&nbsp;<span class="num" id="3534011">8192</span><span class="op" id="3534015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3534019">return</span>&nbsp;<span class="op" id="3534026">&amp;</span><span class="ident" id="3534027">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3534030">}</span><span class="op" id="3534031">,</span><br>
<span class="lineno">145</span><span class="op" id="3534033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3534036">func</span>&nbsp;<span class="op" id="3534041">(</span><span class="ident" id="3534042">devNull</span><span class="op" id="3534049">)</span>&nbsp;<span class="ident" id="3534051">ReadFrom</span><span class="op" id="3534059">(</span><span class="ident" id="3534060">r</span>&nbsp;<span class="ident" id="3534062">io</span><span class="op" id="3534064">.</span><span class="ident" id="3534065">Reader</span><span class="op" id="3534071">)</span>&nbsp;<span class="op" id="3534073">(</span><span class="ident" id="3534074">n</span>&nbsp;<span class="ident" id="3534076">int64</span><span class="op" id="3534081">,</span>&nbsp;<span class="ident" id="3534083">err</span>&nbsp;<span class="builtintype" id="3534087">error</span><span class="op" id="3534092">)</span>&nbsp;<span class="op" id="3534094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3534097">bufp</span>&nbsp;<span class="op" id="3534102">:=</span>&nbsp;<span class="ident" id="3534105">blackHolePool</span><span class="op" id="3534118">.</span><span class="ident" id="3534119">Get</span><span class="op" id="3534122">(</span><span class="op" id="3534123">)</span><span class="op" id="3534124">.</span><span class="op" id="3534125">(</span><span class="op" id="3534126">*</span><span class="op" id="3534127">[</span><span class="op" id="3534128">]</span><span class="builtintype" id="3534129">byte</span><span class="op" id="3534133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3534136">readSize</span>&nbsp;<span class="op" id="3534145">:=</span>&nbsp;<span class="num" id="3534148">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3534151">for</span>&nbsp;<span class="op" id="3534155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3534159">readSize</span><span class="op" id="3534167">,</span>&nbsp;<span class="ident" id="3534169">err</span>&nbsp;<span class="op" id="3534173">=</span>&nbsp;<span class="ident" id="3534175">r</span><span class="op" id="3534176">.</span><span class="ident" id="3534177">Read</span><span class="op" id="3534181">(</span><span class="op" id="3534182">*</span><span class="ident" id="3534183">bufp</span><span class="op" id="3534187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3534191">n</span>&nbsp;<span class="op" id="3534193">+=</span>&nbsp;<span class="ident" id="3534196">int64</span><span class="op" id="3534201">(</span><span class="ident" id="3534202">readSize</span><span class="op" id="3534210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3534214">if</span>&nbsp;<span class="ident" id="3534217">err</span>&nbsp;<span class="op" id="3534221">!=</span>&nbsp;<span class="ident" id="3534224">nil</span>&nbsp;<span class="op" id="3534228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3534233">blackHolePool</span><span class="op" id="3534246">.</span><span class="ident" id="3534247">Put</span><span class="op" id="3534250">(</span><span class="ident" id="3534251">bufp</span><span class="op" id="3534255">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3534260">if</span>&nbsp;<span class="ident" id="3534263">err</span>&nbsp;<span class="op" id="3534267">==</span>&nbsp;<span class="ident" id="3534270">io</span><span class="op" id="3534272">.</span><span class="ident" id="3534273">EOF</span>&nbsp;<span class="op" id="3534277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3534283">return</span>&nbsp;<span class="ident" id="3534290">n</span><span class="op" id="3534291">,</span>&nbsp;<span class="ident" id="3534293">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3534300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3534305">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3534314">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3534317">}</span><br>
<span class="lineno"></span><span class="op" id="3534319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3534322">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="3534382">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="3534409">var</span>&nbsp;<span class="ident" id="3534413">Discard</span>&nbsp;<span class="ident" id="3534421">io</span><span class="op" id="3534423">.</span><span class="ident" id="3534424">Writer</span>&nbsp;<span class="op" id="3534431">=</span>&nbsp;<span class="ident" id="3534433">devNull</span><span class="op" id="3534440">(</span><span class="num" id="3534441">0</span><span class="op" id="3534442">)</span>
</div>
</body>
</html>
