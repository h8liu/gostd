<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7146058">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7146113">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7146167">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7146218">package</span>&nbsp;<span class="ident" id="7146226">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7146233">import</span>&nbsp;<span class="op" id="7146240">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7146243">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7146249">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7146259">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7146262">type</span>&nbsp;<span class="ident" id="7146267">test</span>&nbsp;<span class="keyword" id="7146272">struct</span>&nbsp;<span class="op" id="7146279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7146282">ieee</span><span class="op" id="7146286">,</span>&nbsp;<span class="ident" id="7146288">castagnoli</span>&nbsp;<span class="builtintype" id="7146299">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7146307">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7146324">string</span><br>
<span class="lineno">15</span><span class="op" id="7146331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7146334">var</span>&nbsp;<span class="ident" id="7146338">golden</span>&nbsp;<span class="op" id="7146345">=</span>&nbsp;<span class="op" id="7146347">[</span><span class="op" id="7146348">]</span><span class="ident" id="7146349">test</span><span class="op" id="7146353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146356">{</span><span class="num" id="7146357">0x0</span><span class="op" id="7146360">,</span>&nbsp;<span class="num" id="7146362">0x0</span><span class="op" id="7146365">,</span>&nbsp;<span class="string" id="7146367">&#34;&#34;</span><span class="op" id="7146369">}</span><span class="op" id="7146370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146373">{</span><span class="num" id="7146374">0xe8b7be43</span><span class="op" id="7146384">,</span>&nbsp;<span class="num" id="7146386">0xc1d04330</span><span class="op" id="7146396">,</span>&nbsp;<span class="string" id="7146398">&#34;a&#34;</span><span class="op" id="7146401">}</span><span class="op" id="7146402">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146405">{</span><span class="num" id="7146406">0x9e83486d</span><span class="op" id="7146416">,</span>&nbsp;<span class="num" id="7146418">0xe2a22936</span><span class="op" id="7146428">,</span>&nbsp;<span class="string" id="7146430">&#34;ab&#34;</span><span class="op" id="7146434">}</span><span class="op" id="7146435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146438">{</span><span class="num" id="7146439">0x352441c2</span><span class="op" id="7146449">,</span>&nbsp;<span class="num" id="7146451">0x364b3fb7</span><span class="op" id="7146461">,</span>&nbsp;<span class="string" id="7146463">&#34;abc&#34;</span><span class="op" id="7146468">}</span><span class="op" id="7146469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146472">{</span><span class="num" id="7146473">0xed82cd11</span><span class="op" id="7146483">,</span>&nbsp;<span class="num" id="7146485">0x92c80a31</span><span class="op" id="7146495">,</span>&nbsp;<span class="string" id="7146497">&#34;abcd&#34;</span><span class="op" id="7146503">}</span><span class="op" id="7146504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146507">{</span><span class="num" id="7146508">0x8587d865</span><span class="op" id="7146518">,</span>&nbsp;<span class="num" id="7146520">0xc450d697</span><span class="op" id="7146530">,</span>&nbsp;<span class="string" id="7146532">&#34;abcde&#34;</span><span class="op" id="7146539">}</span><span class="op" id="7146540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146543">{</span><span class="num" id="7146544">0x4b8e39ef</span><span class="op" id="7146554">,</span>&nbsp;<span class="num" id="7146556">0x53bceff1</span><span class="op" id="7146566">,</span>&nbsp;<span class="string" id="7146568">&#34;abcdef&#34;</span><span class="op" id="7146576">}</span><span class="op" id="7146577">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146580">{</span><span class="num" id="7146581">0x312a6aa6</span><span class="op" id="7146591">,</span>&nbsp;<span class="num" id="7146593">0xe627f441</span><span class="op" id="7146603">,</span>&nbsp;<span class="string" id="7146605">&#34;abcdefg&#34;</span><span class="op" id="7146614">}</span><span class="op" id="7146615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146618">{</span><span class="num" id="7146619">0xaeef2a50</span><span class="op" id="7146629">,</span>&nbsp;<span class="num" id="7146631">0xa9421b7</span><span class="op" id="7146640">,</span>&nbsp;<span class="string" id="7146642">&#34;abcdefgh&#34;</span><span class="op" id="7146652">}</span><span class="op" id="7146653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146656">{</span><span class="num" id="7146657">0x8da988af</span><span class="op" id="7146667">,</span>&nbsp;<span class="num" id="7146669">0x2ddc99fc</span><span class="op" id="7146679">,</span>&nbsp;<span class="string" id="7146681">&#34;abcdefghi&#34;</span><span class="op" id="7146692">}</span><span class="op" id="7146693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146696">{</span><span class="num" id="7146697">0x3981703a</span><span class="op" id="7146707">,</span>&nbsp;<span class="num" id="7146709">0xe6599437</span><span class="op" id="7146719">,</span>&nbsp;<span class="string" id="7146721">&#34;abcdefghij&#34;</span><span class="op" id="7146733">}</span><span class="op" id="7146734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146737">{</span><span class="num" id="7146738">0x6b9cdfe7</span><span class="op" id="7146748">,</span>&nbsp;<span class="num" id="7146750">0xb2cc01fe</span><span class="op" id="7146760">,</span>&nbsp;<span class="string" id="7146762">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7146805">}</span><span class="op" id="7146806">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146809">{</span><span class="num" id="7146810">0xc90ef73f</span><span class="op" id="7146820">,</span>&nbsp;<span class="num" id="7146822">0xe28207f</span><span class="op" id="7146831">,</span>&nbsp;<span class="string" id="7146833">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7146892">}</span><span class="op" id="7146893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146896">{</span><span class="num" id="7146897">0xb902341f</span><span class="op" id="7146907">,</span>&nbsp;<span class="num" id="7146909">0xbe93f964</span><span class="op" id="7146919">,</span>&nbsp;<span class="string" id="7146921">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7146965">}</span><span class="op" id="7146966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146969">{</span><span class="num" id="7146970">0x42080e8</span><span class="op" id="7146979">,</span>&nbsp;<span class="num" id="7146981">0x9e3be0c3</span><span class="op" id="7146991">,</span>&nbsp;<span class="string" id="7146993">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7147052">}</span><span class="op" id="7147053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147056">{</span><span class="num" id="7147057">0x154c6d11</span><span class="op" id="7147067">,</span>&nbsp;<span class="num" id="7147069">0xf505ef04</span><span class="op" id="7147079">,</span>&nbsp;<span class="string" id="7147081">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7147141">}</span><span class="op" id="7147142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147145">{</span><span class="num" id="7147146">0x4c418325</span><span class="op" id="7147156">,</span>&nbsp;<span class="num" id="7147158">0x85d3dc82</span><span class="op" id="7147168">,</span>&nbsp;<span class="string" id="7147170">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7147199">}</span><span class="op" id="7147200">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147203">{</span><span class="num" id="7147204">0x33955150</span><span class="op" id="7147214">,</span>&nbsp;<span class="num" id="7147216">0xc5142380</span><span class="op" id="7147226">,</span>&nbsp;<span class="string" id="7147228">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7147297">}</span><span class="op" id="7147298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147301">{</span><span class="num" id="7147302">0x26216a4b</span><span class="op" id="7147312">,</span>&nbsp;<span class="num" id="7147314">0x75eb77dd</span><span class="op" id="7147324">,</span>&nbsp;<span class="string" id="7147326">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7147385">}</span><span class="op" id="7147386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147389">{</span><span class="num" id="7147390">0x1abbe45e</span><span class="op" id="7147400">,</span>&nbsp;<span class="num" id="7147402">0x91ebe9f7</span><span class="op" id="7147412">,</span>&nbsp;<span class="string" id="7147414">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7147504">}</span><span class="op" id="7147505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147508">{</span><span class="num" id="7147509">0xc89a94f7</span><span class="op" id="7147519">,</span>&nbsp;<span class="num" id="7147521">0xf0b1168e</span><span class="op" id="7147531">,</span>&nbsp;<span class="string" id="7147533">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7147610">}</span><span class="op" id="7147611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147614">{</span><span class="num" id="7147615">0xab3abe14</span><span class="op" id="7147625">,</span>&nbsp;<span class="num" id="7147627">0x572b74e2</span><span class="op" id="7147637">,</span>&nbsp;<span class="string" id="7147639">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7147665">}</span><span class="op" id="7147666">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147669">{</span><span class="num" id="7147670">0xbab102b6</span><span class="op" id="7147680">,</span>&nbsp;<span class="num" id="7147682">0x8a58a6d5</span><span class="op" id="7147692">,</span>&nbsp;<span class="string" id="7147694">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7147745">}</span><span class="op" id="7147746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147749">{</span><span class="num" id="7147750">0x999149d7</span><span class="op" id="7147760">,</span>&nbsp;<span class="num" id="7147762">0x9c426c50</span><span class="op" id="7147772">,</span>&nbsp;<span class="string" id="7147774">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7147848">}</span><span class="op" id="7147849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147852">{</span><span class="num" id="7147853">0x6d52a33c</span><span class="op" id="7147863">,</span>&nbsp;<span class="num" id="7147865">0x735400a4</span><span class="op" id="7147875">,</span>&nbsp;<span class="string" id="7147877">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7147925">}</span><span class="op" id="7147926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147929">{</span><span class="num" id="7147930">0x90631e8d</span><span class="op" id="7147940">,</span>&nbsp;<span class="num" id="7147942">0xbec49c95</span><span class="op" id="7147952">,</span>&nbsp;<span class="string" id="7147954">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7148026">}</span><span class="op" id="7148027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148030">{</span><span class="num" id="7148031">0x78309130</span><span class="op" id="7148041">,</span>&nbsp;<span class="num" id="7148043">0xa95a2079</span><span class="op" id="7148053">,</span>&nbsp;<span class="string" id="7148055">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7148125">}</span><span class="op" id="7148126">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148129">{</span><span class="num" id="7148130">0x7d0a377f</span><span class="op" id="7148140">,</span>&nbsp;<span class="num" id="7148142">0xde2e65c5</span><span class="op" id="7148152">,</span>&nbsp;<span class="string" id="7148154">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7148188">}</span><span class="op" id="7148189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148192">{</span><span class="num" id="7148193">0x8c79fd79</span><span class="op" id="7148203">,</span>&nbsp;<span class="num" id="7148205">0x297a88ed</span><span class="op" id="7148215">,</span>&nbsp;<span class="string" id="7148217">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7148307">}</span><span class="op" id="7148308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148311">{</span><span class="num" id="7148312">0xa20b7167</span><span class="op" id="7148322">,</span>&nbsp;<span class="num" id="7148324">0x66ed1d8b</span><span class="op" id="7148334">,</span>&nbsp;<span class="string" id="7148336">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7148470">}</span><span class="op" id="7148471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148474">{</span><span class="num" id="7148475">0x8e0bb443</span><span class="op" id="7148485">,</span>&nbsp;<span class="num" id="7148487">0xdcded527</span><span class="op" id="7148497">,</span>&nbsp;<span class="string" id="7148499">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7148557">}</span><span class="op" id="7148558">,</span><br>
<span class="lineno"></span><span class="op" id="7148560">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7148563">func</span>&nbsp;<span class="ident" id="7148568">TestGolden</span><span class="op" id="7148578">(</span><span class="ident" id="7148579">t</span>&nbsp;<span class="op" id="7148581">*</span><span class="ident" id="7148582">testing</span><span class="op" id="7148589">.</span><span class="ident" id="7148590">T</span><span class="op" id="7148591">)</span>&nbsp;<span class="op" id="7148593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148596">castagnoliTab</span>&nbsp;<span class="op" id="7148610">:=</span>&nbsp;<span class="ident" id="7148613">MakeTable</span><span class="op" id="7148622">(</span><span class="ident" id="7148623">Castagnoli</span><span class="op" id="7148633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7148637">for</span>&nbsp;<span class="ident" id="7148641">_</span><span class="op" id="7148642">,</span>&nbsp;<span class="ident" id="7148644">g</span>&nbsp;<span class="op" id="7148646">:=</span>&nbsp;<span class="keyword" id="7148649">range</span>&nbsp;<span class="ident" id="7148655">golden</span>&nbsp;<span class="op" id="7148662">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148666">ieee</span>&nbsp;<span class="op" id="7148671">:=</span>&nbsp;<span class="ident" id="7148674">NewIEEE</span><span class="op" id="7148681">(</span><span class="op" id="7148682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148686">io</span><span class="op" id="7148688">.</span><span class="ident" id="7148689">WriteString</span><span class="op" id="7148700">(</span><span class="ident" id="7148701">ieee</span><span class="op" id="7148705">,</span>&nbsp;<span class="ident" id="7148707">g</span><span class="op" id="7148708">.</span><span class="ident" id="7148709">in</span><span class="op" id="7148711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148715">s</span>&nbsp;<span class="op" id="7148717">:=</span>&nbsp;<span class="ident" id="7148720">ieee</span><span class="op" id="7148724">.</span><span class="ident" id="7148725">Sum32</span><span class="op" id="7148730">(</span><span class="op" id="7148731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7148735">if</span>&nbsp;<span class="ident" id="7148738">s</span>&nbsp;<span class="op" id="7148740">!=</span>&nbsp;<span class="ident" id="7148743">g</span><span class="op" id="7148744">.</span><span class="ident" id="7148745">ieee</span>&nbsp;<span class="op" id="7148750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148755">t</span><span class="op" id="7148756">.</span><span class="ident" id="7148757">Errorf</span><span class="op" id="7148763">(</span><span class="string" id="7148764">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7148791">,</span>&nbsp;<span class="ident" id="7148793">g</span><span class="op" id="7148794">.</span><span class="ident" id="7148795">in</span><span class="op" id="7148797">,</span>&nbsp;<span class="ident" id="7148799">s</span><span class="op" id="7148800">,</span>&nbsp;<span class="ident" id="7148802">g</span><span class="op" id="7148803">.</span><span class="ident" id="7148804">ieee</span><span class="op" id="7148808">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148817">castagnoli</span>&nbsp;<span class="op" id="7148828">:=</span>&nbsp;<span class="ident" id="7148831">New</span><span class="op" id="7148834">(</span><span class="ident" id="7148835">castagnoliTab</span><span class="op" id="7148848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148852">io</span><span class="op" id="7148854">.</span><span class="ident" id="7148855">WriteString</span><span class="op" id="7148866">(</span><span class="ident" id="7148867">castagnoli</span><span class="op" id="7148877">,</span>&nbsp;<span class="ident" id="7148879">g</span><span class="op" id="7148880">.</span><span class="ident" id="7148881">in</span><span class="op" id="7148883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148887">s</span>&nbsp;<span class="op" id="7148889">=</span>&nbsp;<span class="ident" id="7148891">castagnoli</span><span class="op" id="7148901">.</span><span class="ident" id="7148902">Sum32</span><span class="op" id="7148907">(</span><span class="op" id="7148908">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7148912">if</span>&nbsp;<span class="ident" id="7148915">s</span>&nbsp;<span class="op" id="7148917">!=</span>&nbsp;<span class="ident" id="7148920">g</span><span class="op" id="7148921">.</span><span class="ident" id="7148922">castagnoli</span>&nbsp;<span class="op" id="7148933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7148938">t</span><span class="op" id="7148939">.</span><span class="ident" id="7148940">Errorf</span><span class="op" id="7148946">(</span><span class="string" id="7148947">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7148980">,</span>&nbsp;<span class="ident" id="7148982">g</span><span class="op" id="7148983">.</span><span class="ident" id="7148984">in</span><span class="op" id="7148986">,</span>&nbsp;<span class="ident" id="7148988">s</span><span class="op" id="7148989">,</span>&nbsp;<span class="ident" id="7148991">g</span><span class="op" id="7148992">.</span><span class="ident" id="7148993">castagnoli</span><span class="op" id="7149003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7149012">if</span>&nbsp;<span class="builtinfunc" id="7149015">len</span><span class="op" id="7149018">(</span><span class="ident" id="7149019">g</span><span class="op" id="7149020">.</span><span class="ident" id="7149021">in</span><span class="op" id="7149023">)</span>&nbsp;<span class="op" id="7149025">&gt;</span>&nbsp;<span class="num" id="7149027">0</span>&nbsp;<span class="op" id="7149029">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7149034">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7149091">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7149149">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149160">castagnoli</span>&nbsp;<span class="op" id="7149171">=</span>&nbsp;<span class="ident" id="7149173">New</span><span class="op" id="7149176">(</span><span class="ident" id="7149177">castagnoliTab</span><span class="op" id="7149190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149195">io</span><span class="op" id="7149197">.</span><span class="ident" id="7149198">WriteString</span><span class="op" id="7149209">(</span><span class="ident" id="7149210">castagnoli</span><span class="op" id="7149220">,</span>&nbsp;<span class="ident" id="7149222">g</span><span class="op" id="7149223">.</span><span class="ident" id="7149224">in</span><span class="op" id="7149226">[</span><span class="op" id="7149227">:</span><span class="num" id="7149228">1</span><span class="op" id="7149229">]</span><span class="op" id="7149230">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149235">io</span><span class="op" id="7149237">.</span><span class="ident" id="7149238">WriteString</span><span class="op" id="7149249">(</span><span class="ident" id="7149250">castagnoli</span><span class="op" id="7149260">,</span>&nbsp;<span class="ident" id="7149262">g</span><span class="op" id="7149263">.</span><span class="ident" id="7149264">in</span><span class="op" id="7149266">[</span><span class="num" id="7149267">1</span><span class="op" id="7149268">:</span><span class="op" id="7149269">]</span><span class="op" id="7149270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149275">s</span>&nbsp;<span class="op" id="7149277">=</span>&nbsp;<span class="ident" id="7149279">castagnoli</span><span class="op" id="7149289">.</span><span class="ident" id="7149290">Sum32</span><span class="op" id="7149295">(</span><span class="op" id="7149296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7149301">if</span>&nbsp;<span class="ident" id="7149304">s</span>&nbsp;<span class="op" id="7149306">!=</span>&nbsp;<span class="ident" id="7149309">g</span><span class="op" id="7149310">.</span><span class="ident" id="7149311">castagnoli</span>&nbsp;<span class="op" id="7149322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149328">t</span><span class="op" id="7149329">.</span><span class="ident" id="7149330">Errorf</span><span class="op" id="7149336">(</span><span class="string" id="7149337">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7149382">,</span>&nbsp;<span class="ident" id="7149384">g</span><span class="op" id="7149385">.</span><span class="ident" id="7149386">in</span><span class="op" id="7149388">,</span>&nbsp;<span class="ident" id="7149390">s</span><span class="op" id="7149391">,</span>&nbsp;<span class="ident" id="7149393">g</span><span class="op" id="7149394">.</span><span class="ident" id="7149395">castagnoli</span><span class="op" id="7149405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149410">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149417">}</span><br>
<span class="lineno"></span><span class="op" id="7149419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7149422">func</span>&nbsp;<span class="ident" id="7149427">BenchmarkCrc32KB</span><span class="op" id="7149443">(</span><span class="ident" id="7149444">b</span>&nbsp;<span class="op" id="7149446">*</span><span class="ident" id="7149447">testing</span><span class="op" id="7149454">.</span><span class="ident" id="7149455">B</span><span class="op" id="7149456">)</span>&nbsp;<span class="op" id="7149458">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149461">b</span><span class="op" id="7149462">.</span><span class="ident" id="7149463">SetBytes</span><span class="op" id="7149471">(</span><span class="num" id="7149472">1024</span><span class="op" id="7149476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149479">data</span>&nbsp;<span class="op" id="7149484">:=</span>&nbsp;<span class="builtinfunc" id="7149487">make</span><span class="op" id="7149491">(</span><span class="op" id="7149492">[</span><span class="op" id="7149493">]</span><span class="builtintype" id="7149494">byte</span><span class="op" id="7149498">,</span>&nbsp;<span class="num" id="7149500">1024</span><span class="op" id="7149504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7149507">for</span>&nbsp;<span class="ident" id="7149511">i</span>&nbsp;<span class="op" id="7149513">:=</span>&nbsp;<span class="keyword" id="7149516">range</span>&nbsp;<span class="ident" id="7149522">data</span>&nbsp;<span class="op" id="7149527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149531">data</span><span class="op" id="7149535">[</span><span class="ident" id="7149536">i</span><span class="op" id="7149537">]</span>&nbsp;<span class="op" id="7149539">=</span>&nbsp;<span class="builtintype" id="7149541">byte</span><span class="op" id="7149545">(</span><span class="ident" id="7149546">i</span><span class="op" id="7149547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149550">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149553">h</span>&nbsp;<span class="op" id="7149555">:=</span>&nbsp;<span class="ident" id="7149558">NewIEEE</span><span class="op" id="7149565">(</span><span class="op" id="7149566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149569">in</span>&nbsp;<span class="op" id="7149572">:=</span>&nbsp;<span class="builtinfunc" id="7149575">make</span><span class="op" id="7149579">(</span><span class="op" id="7149580">[</span><span class="op" id="7149581">]</span><span class="builtintype" id="7149582">byte</span><span class="op" id="7149586">,</span>&nbsp;<span class="num" id="7149588">0</span><span class="op" id="7149589">,</span>&nbsp;<span class="ident" id="7149591">h</span><span class="op" id="7149592">.</span><span class="ident" id="7149593">Size</span><span class="op" id="7149597">(</span><span class="op" id="7149598">)</span><span class="op" id="7149599">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149603">b</span><span class="op" id="7149604">.</span><span class="ident" id="7149605">ResetTimer</span><span class="op" id="7149615">(</span><span class="op" id="7149616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7149619">for</span>&nbsp;<span class="ident" id="7149623">i</span>&nbsp;<span class="op" id="7149625">:=</span>&nbsp;<span class="num" id="7149628">0</span><span class="op" id="7149629">;</span>&nbsp;<span class="ident" id="7149631">i</span>&nbsp;<span class="op" id="7149633">&lt;</span>&nbsp;<span class="ident" id="7149635">b</span><span class="op" id="7149636">.</span><span class="ident" id="7149637">N</span><span class="op" id="7149638">;</span>&nbsp;<span class="ident" id="7149640">i</span><span class="op" id="7149641">++</span>&nbsp;<span class="op" id="7149644">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149648">h</span><span class="op" id="7149649">.</span><span class="ident" id="7149650">Reset</span><span class="op" id="7149655">(</span><span class="op" id="7149656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149660">h</span><span class="op" id="7149661">.</span><span class="ident" id="7149662">Write</span><span class="op" id="7149667">(</span><span class="ident" id="7149668">data</span><span class="op" id="7149672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7149676">h</span><span class="op" id="7149677">.</span><span class="ident" id="7149678">Sum</span><span class="op" id="7149681">(</span><span class="ident" id="7149682">in</span><span class="op" id="7149684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149687">}</span><br>
<span class="lineno"></span><span class="op" id="7149689">}</span>
</div>
</body>
</html>
