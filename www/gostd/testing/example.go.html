<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5789194">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5789249">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5789303">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5789354">package</span>&nbsp;<span class="ident" id="5789362">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5789371">import</span>&nbsp;<span class="op" id="5789378">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5789381">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5789390">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5789397">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5789403">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5789409">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5789420">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5789427">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5789430">type</span>&nbsp;<span class="ident" id="5789435">InternalExample</span>&nbsp;<span class="keyword" id="5789451">struct</span>&nbsp;<span class="op" id="5789458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789461">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5789468">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789476">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5789483">func</span><span class="op" id="5789487">(</span><span class="op" id="5789488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789491">Output</span>&nbsp;<span class="builtintype" id="5789498">string</span><br>
<span class="lineno">20</span><span class="op" id="5789505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5789508">func</span>&nbsp;<span class="ident" id="5789513">RunExamples</span><span class="op" id="5789524">(</span><span class="ident" id="5789525">matchString</span>&nbsp;<span class="keyword" id="5789537">func</span><span class="op" id="5789541">(</span><span class="ident" id="5789542">pat</span><span class="op" id="5789545">,</span>&nbsp;<span class="ident" id="5789547">str</span>&nbsp;<span class="builtintype" id="5789551">string</span><span class="op" id="5789557">)</span>&nbsp;<span class="op" id="5789559">(</span><span class="builtintype" id="5789560">bool</span><span class="op" id="5789564">,</span>&nbsp;<span class="builtintype" id="5789566">error</span><span class="op" id="5789571">)</span><span class="op" id="5789572">,</span>&nbsp;<span class="ident" id="5789574">examples</span>&nbsp;<span class="op" id="5789583">[</span><span class="op" id="5789584">]</span><span class="ident" id="5789585">InternalExample</span><span class="op" id="5789600">)</span>&nbsp;<span class="op" id="5789602">(</span><span class="ident" id="5789603">ok</span>&nbsp;<span class="builtintype" id="5789606">bool</span><span class="op" id="5789610">)</span>&nbsp;<span class="op" id="5789612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789615">ok</span>&nbsp;<span class="op" id="5789618">=</span>&nbsp;<span class="builtintype" id="5789620">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789627">var</span>&nbsp;<span class="ident" id="5789631">eg</span>&nbsp;<span class="ident" id="5789634">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789652">for</span>&nbsp;<span class="ident" id="5789656">_</span><span class="op" id="5789657">,</span>&nbsp;<span class="ident" id="5789659">eg</span>&nbsp;<span class="op" id="5789662">=</span>&nbsp;<span class="keyword" id="5789664">range</span>&nbsp;<span class="ident" id="5789670">examples</span>&nbsp;<span class="op" id="5789679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789683">matched</span><span class="op" id="5789690">,</span>&nbsp;<span class="ident" id="5789692">err</span>&nbsp;<span class="op" id="5789696">:=</span>&nbsp;<span class="ident" id="5789699">matchString</span><span class="op" id="5789710">(</span><span class="op" id="5789711">*</span><span class="ident" id="5789712">match</span><span class="op" id="5789717">,</span>&nbsp;<span class="ident" id="5789719">eg</span><span class="op" id="5789721">.</span><span class="ident" id="5789722">Name</span><span class="op" id="5789726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789730">if</span>&nbsp;<span class="ident" id="5789733">err</span>&nbsp;<span class="op" id="5789737">!=</span>&nbsp;<span class="ident" id="5789740">nil</span>&nbsp;<span class="op" id="5789744">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789749">fmt</span><span class="op" id="5789752">.</span><span class="ident" id="5789753">Fprintf</span><span class="op" id="5789760">(</span><span class="ident" id="5789761">os</span><span class="op" id="5789763">.</span><span class="ident" id="5789764">Stderr</span><span class="op" id="5789770">,</span>&nbsp;<span class="string" id="5789772">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="5789817">,</span>&nbsp;<span class="ident" id="5789819">err</span><span class="op" id="5789822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789827">os</span><span class="op" id="5789829">.</span><span class="ident" id="5789830">Exit</span><span class="op" id="5789834">(</span><span class="num" id="5789835">1</span><span class="op" id="5789836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789844">if</span>&nbsp;<span class="op" id="5789847">!</span><span class="ident" id="5789848">matched</span>&nbsp;<span class="op" id="5789856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789861">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789876">if</span>&nbsp;<span class="op" id="5789879">!</span><span class="ident" id="5789880">runExample</span><span class="op" id="5789890">(</span><span class="ident" id="5789891">eg</span><span class="op" id="5789893">)</span>&nbsp;<span class="op" id="5789895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789900">ok</span>&nbsp;<span class="op" id="5789903">=</span>&nbsp;<span class="builtintype" id="5789905">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789916">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789920">return</span><br>
<span class="lineno"></span><span class="op" id="5789927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5789930">func</span>&nbsp;<span class="ident" id="5789935">runExample</span><span class="op" id="5789945">(</span><span class="ident" id="5789946">eg</span>&nbsp;<span class="ident" id="5789949">InternalExample</span><span class="op" id="5789964">)</span>&nbsp;<span class="op" id="5789966">(</span><span class="ident" id="5789967">ok</span>&nbsp;<span class="builtintype" id="5789970">bool</span><span class="op" id="5789974">)</span>&nbsp;<span class="op" id="5789976">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789979">if</span>&nbsp;<span class="op" id="5789982">*</span><span class="ident" id="5789983">chatty</span>&nbsp;<span class="op" id="5789990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789994">fmt</span><span class="op" id="5789997">.</span><span class="ident" id="5789998">Printf</span><span class="op" id="5790004">(</span><span class="string" id="5790005">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="5790020">,</span>&nbsp;<span class="ident" id="5790022">eg</span><span class="op" id="5790024">.</span><span class="ident" id="5790025">Name</span><span class="op" id="5790029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790036">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790056">stdout</span>&nbsp;<span class="op" id="5790063">:=</span>&nbsp;<span class="ident" id="5790066">os</span><span class="op" id="5790068">.</span><span class="ident" id="5790069">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790077">r</span><span class="op" id="5790078">,</span>&nbsp;<span class="ident" id="5790080">w</span><span class="op" id="5790081">,</span>&nbsp;<span class="ident" id="5790083">err</span>&nbsp;<span class="op" id="5790087">:=</span>&nbsp;<span class="ident" id="5790090">os</span><span class="op" id="5790092">.</span><span class="ident" id="5790093">Pipe</span><span class="op" id="5790097">(</span><span class="op" id="5790098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790101">if</span>&nbsp;<span class="ident" id="5790104">err</span>&nbsp;<span class="op" id="5790108">!=</span>&nbsp;<span class="ident" id="5790111">nil</span>&nbsp;<span class="op" id="5790115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790119">fmt</span><span class="op" id="5790122">.</span><span class="ident" id="5790123">Fprintln</span><span class="op" id="5790131">(</span><span class="ident" id="5790132">os</span><span class="op" id="5790134">.</span><span class="ident" id="5790135">Stderr</span><span class="op" id="5790141">,</span>&nbsp;<span class="ident" id="5790143">err</span><span class="op" id="5790146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790150">os</span><span class="op" id="5790152">.</span><span class="ident" id="5790153">Exit</span><span class="op" id="5790157">(</span><span class="num" id="5790158">1</span><span class="op" id="5790159">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790165">os</span><span class="op" id="5790167">.</span><span class="ident" id="5790168">Stdout</span>&nbsp;<span class="op" id="5790175">=</span>&nbsp;<span class="ident" id="5790177">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790180">outC</span>&nbsp;<span class="op" id="5790185">:=</span>&nbsp;<span class="builtinfunc" id="5790188">make</span><span class="op" id="5790192">(</span><span class="keyword" id="5790193">chan</span>&nbsp;<span class="builtintype" id="5790198">string</span><span class="op" id="5790204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790207">go</span>&nbsp;<span class="keyword" id="5790210">func</span><span class="op" id="5790214">(</span><span class="op" id="5790215">)</span>&nbsp;<span class="op" id="5790217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790221">buf</span>&nbsp;<span class="op" id="5790225">:=</span>&nbsp;<span class="builtinfunc" id="5790228">new</span><span class="op" id="5790231">(</span><span class="ident" id="5790232">bytes</span><span class="op" id="5790237">.</span><span class="ident" id="5790238">Buffer</span><span class="op" id="5790244">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790248">_</span><span class="op" id="5790249">,</span>&nbsp;<span class="ident" id="5790251">err</span>&nbsp;<span class="op" id="5790255">:=</span>&nbsp;<span class="ident" id="5790258">io</span><span class="op" id="5790260">.</span><span class="ident" id="5790261">Copy</span><span class="op" id="5790265">(</span><span class="ident" id="5790266">buf</span><span class="op" id="5790269">,</span>&nbsp;<span class="ident" id="5790271">r</span><span class="op" id="5790272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790276">r</span><span class="op" id="5790277">.</span><span class="ident" id="5790278">Close</span><span class="op" id="5790283">(</span><span class="op" id="5790284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790288">if</span>&nbsp;<span class="ident" id="5790291">err</span>&nbsp;<span class="op" id="5790295">!=</span>&nbsp;<span class="ident" id="5790298">nil</span>&nbsp;<span class="op" id="5790302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790307">fmt</span><span class="op" id="5790310">.</span><span class="ident" id="5790311">Fprintf</span><span class="op" id="5790318">(</span><span class="ident" id="5790319">os</span><span class="op" id="5790321">.</span><span class="ident" id="5790322">Stderr</span><span class="op" id="5790328">,</span>&nbsp;<span class="string" id="5790330">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="5790359">,</span>&nbsp;<span class="ident" id="5790361">err</span><span class="op" id="5790364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790369">os</span><span class="op" id="5790371">.</span><span class="ident" id="5790372">Exit</span><span class="op" id="5790376">(</span><span class="num" id="5790377">1</span><span class="op" id="5790378">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790386">outC</span>&nbsp;<span class="op" id="5790391">&lt;-</span>&nbsp;<span class="ident" id="5790394">buf</span><span class="op" id="5790397">.</span><span class="ident" id="5790398">String</span><span class="op" id="5790404">(</span><span class="op" id="5790405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790408">}</span><span class="op" id="5790409">(</span><span class="op" id="5790410">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790414">start</span>&nbsp;<span class="op" id="5790420">:=</span>&nbsp;<span class="ident" id="5790423">time</span><span class="op" id="5790427">.</span><span class="ident" id="5790428">Now</span><span class="op" id="5790431">(</span><span class="op" id="5790432">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790435">ok</span>&nbsp;<span class="op" id="5790438">=</span>&nbsp;<span class="builtintype" id="5790440">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790447">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790520">defer</span>&nbsp;<span class="keyword" id="5790526">func</span><span class="op" id="5790530">(</span><span class="op" id="5790531">)</span>&nbsp;<span class="op" id="5790533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790537">dstr</span>&nbsp;<span class="op" id="5790542">:=</span>&nbsp;<span class="ident" id="5790545">fmtDuration</span><span class="op" id="5790556">(</span><span class="ident" id="5790557">time</span><span class="op" id="5790561">.</span><span class="ident" id="5790562">Now</span><span class="op" id="5790565">(</span><span class="op" id="5790566">)</span><span class="op" id="5790567">.</span><span class="ident" id="5790568">Sub</span><span class="op" id="5790571">(</span><span class="ident" id="5790572">start</span><span class="op" id="5790577">)</span><span class="op" id="5790578">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790583">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790628">w</span><span class="op" id="5790629">.</span><span class="ident" id="5790630">Close</span><span class="op" id="5790635">(</span><span class="op" id="5790636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790640">os</span><span class="op" id="5790642">.</span><span class="ident" id="5790643">Stdout</span>&nbsp;<span class="op" id="5790650">=</span>&nbsp;<span class="ident" id="5790652">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790661">out</span>&nbsp;<span class="op" id="5790665">:=</span>&nbsp;<span class="op" id="5790668">&lt;-</span><span class="ident" id="5790670">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790678">var</span>&nbsp;<span class="ident" id="5790682">fail</span>&nbsp;<span class="builtintype" id="5790687">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790696">err</span>&nbsp;<span class="op" id="5790700">:=</span>&nbsp;<span class="builtinfunc" id="5790703">recover</span><span class="op" id="5790710">(</span><span class="op" id="5790711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790715">if</span>&nbsp;<span class="ident" id="5790718">g</span><span class="op" id="5790719">,</span>&nbsp;<span class="ident" id="5790721">e</span>&nbsp;<span class="op" id="5790723">:=</span>&nbsp;<span class="ident" id="5790726">strings</span><span class="op" id="5790733">.</span><span class="ident" id="5790734">TrimSpace</span><span class="op" id="5790743">(</span><span class="ident" id="5790744">out</span><span class="op" id="5790747">)</span><span class="op" id="5790748">,</span>&nbsp;<span class="ident" id="5790750">strings</span><span class="op" id="5790757">.</span><span class="ident" id="5790758">TrimSpace</span><span class="op" id="5790767">(</span><span class="ident" id="5790768">eg</span><span class="op" id="5790770">.</span><span class="ident" id="5790771">Output</span><span class="op" id="5790777">)</span><span class="op" id="5790778">;</span>&nbsp;<span class="ident" id="5790780">g</span>&nbsp;<span class="op" id="5790782">!=</span>&nbsp;<span class="ident" id="5790785">e</span>&nbsp;<span class="op" id="5790787">&amp;&amp;</span>&nbsp;<span class="ident" id="5790790">err</span>&nbsp;<span class="op" id="5790794">==</span>&nbsp;<span class="ident" id="5790797">nil</span>&nbsp;<span class="op" id="5790801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790806">fail</span>&nbsp;<span class="op" id="5790811">=</span>&nbsp;<span class="ident" id="5790813">fmt</span><span class="op" id="5790816">.</span><span class="ident" id="5790817">Sprintf</span><span class="op" id="5790824">(</span><span class="string" id="5790825">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="5790848">,</span>&nbsp;<span class="ident" id="5790850">g</span><span class="op" id="5790851">,</span>&nbsp;<span class="ident" id="5790853">e</span><span class="op" id="5790854">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790862">if</span>&nbsp;<span class="ident" id="5790865">fail</span>&nbsp;<span class="op" id="5790870">!=</span>&nbsp;<span class="string" id="5790873">&#34;&#34;</span>&nbsp;<span class="op" id="5790876">||</span>&nbsp;<span class="ident" id="5790879">err</span>&nbsp;<span class="op" id="5790883">!=</span>&nbsp;<span class="ident" id="5790886">nil</span>&nbsp;<span class="op" id="5790890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790895">fmt</span><span class="op" id="5790898">.</span><span class="ident" id="5790899">Printf</span><span class="op" id="5790905">(</span><span class="string" id="5790906">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="5790929">,</span>&nbsp;<span class="ident" id="5790931">eg</span><span class="op" id="5790933">.</span><span class="ident" id="5790934">Name</span><span class="op" id="5790938">,</span>&nbsp;<span class="ident" id="5790940">dstr</span><span class="op" id="5790944">,</span>&nbsp;<span class="ident" id="5790946">fail</span><span class="op" id="5790950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790955">ok</span>&nbsp;<span class="op" id="5790958">=</span>&nbsp;<span class="builtintype" id="5790960">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790968">}</span>&nbsp;<span class="keyword" id="5790970">else</span>&nbsp;<span class="keyword" id="5790975">if</span>&nbsp;<span class="op" id="5790978">*</span><span class="ident" id="5790979">chatty</span>&nbsp;<span class="op" id="5790986">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790991">fmt</span><span class="op" id="5790994">.</span><span class="ident" id="5790995">Printf</span><span class="op" id="5791001">(</span><span class="string" id="5791002">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="5791023">,</span>&nbsp;<span class="ident" id="5791025">eg</span><span class="op" id="5791027">.</span><span class="ident" id="5791028">Name</span><span class="op" id="5791032">,</span>&nbsp;<span class="ident" id="5791034">dstr</span><span class="op" id="5791038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5791042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5791046">if</span>&nbsp;<span class="ident" id="5791049">err</span>&nbsp;<span class="op" id="5791053">!=</span>&nbsp;<span class="ident" id="5791056">nil</span>&nbsp;<span class="op" id="5791060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5791065">panic</span><span class="op" id="5791070">(</span><span class="ident" id="5791071">err</span><span class="op" id="5791074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5791078">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5791081">}</span><span class="op" id="5791082">(</span><span class="op" id="5791083">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5791087">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791104">eg</span><span class="op" id="5791106">.</span><span class="ident" id="5791107">F</span><span class="op" id="5791108">(</span><span class="op" id="5791109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5791112">return</span><br>
<span class="lineno">100</span><span class="op" id="5791119">}</span>
</div>
</body>
</html>
