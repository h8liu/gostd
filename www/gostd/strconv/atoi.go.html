<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1975051">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1975106">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1975160">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1975211">package</span>&nbsp;<span class="ident" id="1975219">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1975228">import</span>&nbsp;<span class="string" id="1975235">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1975245">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="1975317">var</span>&nbsp;<span class="ident" id="1975321">ErrRange</span>&nbsp;<span class="op" id="1975330">=</span>&nbsp;<span class="ident" id="1975332">errors</span><span class="op" id="1975338">.</span><span class="ident" id="1975339">New</span><span class="op" id="1975342">(</span><span class="string" id="1975343">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1975363">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1975366">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="1975454">var</span>&nbsp;<span class="ident" id="1975458">ErrSyntax</span>&nbsp;<span class="op" id="1975468">=</span>&nbsp;<span class="ident" id="1975470">errors</span><span class="op" id="1975476">.</span><span class="ident" id="1975477">New</span><span class="op" id="1975480">(</span><span class="string" id="1975481">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="1975497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1975500">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="1975543">type</span>&nbsp;<span class="ident" id="1975548">NumError</span>&nbsp;<span class="keyword" id="1975557">struct</span>&nbsp;<span class="op" id="1975564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1975567">Func</span>&nbsp;<span class="builtintype" id="1975572">string</span>&nbsp;<span class="comment" id="1975579">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1975649">Num</span>&nbsp;&nbsp;<span class="builtintype" id="1975654">string</span>&nbsp;<span class="comment" id="1975661">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1975675">Err</span>&nbsp;&nbsp;<span class="builtintype" id="1975680">error</span>&nbsp;&nbsp;<span class="comment" id="1975687">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="1975745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1975748">func</span>&nbsp;<span class="op" id="1975753">(</span><span class="ident" id="1975754">e</span>&nbsp;<span class="op" id="1975756">*</span><span class="ident" id="1975757">NumError</span><span class="op" id="1975765">)</span>&nbsp;<span class="ident" id="1975767">Error</span><span class="op" id="1975772">(</span><span class="op" id="1975773">)</span>&nbsp;<span class="builtintype" id="1975775">string</span>&nbsp;<span class="op" id="1975782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1975785">return</span>&nbsp;<span class="string" id="1975792">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="1975803">+</span>&nbsp;<span class="ident" id="1975805">e</span><span class="op" id="1975806">.</span><span class="ident" id="1975807">Func</span>&nbsp;<span class="op" id="1975812">+</span>&nbsp;<span class="string" id="1975814">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1975819">+</span>&nbsp;<span class="string" id="1975821">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="1975832">+</span>&nbsp;<span class="ident" id="1975834">Quote</span><span class="op" id="1975839">(</span><span class="ident" id="1975840">e</span><span class="op" id="1975841">.</span><span class="ident" id="1975842">Num</span><span class="op" id="1975845">)</span>&nbsp;<span class="op" id="1975847">+</span>&nbsp;<span class="string" id="1975849">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1975854">+</span>&nbsp;<span class="ident" id="1975856">e</span><span class="op" id="1975857">.</span><span class="ident" id="1975858">Err</span><span class="op" id="1975861">.</span><span class="ident" id="1975862">Error</span><span class="op" id="1975867">(</span><span class="op" id="1975868">)</span><br>
<span class="lineno"></span><span class="op" id="1975870">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="1975873">func</span>&nbsp;<span class="ident" id="1975878">syntaxError</span><span class="op" id="1975889">(</span><span class="ident" id="1975890">fn</span><span class="op" id="1975892">,</span>&nbsp;<span class="ident" id="1975894">str</span>&nbsp;<span class="builtintype" id="1975898">string</span><span class="op" id="1975904">)</span>&nbsp;<span class="op" id="1975906">*</span><span class="ident" id="1975907">NumError</span>&nbsp;<span class="op" id="1975916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1975919">return</span>&nbsp;<span class="op" id="1975926">&amp;</span><span class="ident" id="1975927">NumError</span><span class="op" id="1975935">{</span><span class="ident" id="1975936">fn</span><span class="op" id="1975938">,</span>&nbsp;<span class="ident" id="1975940">str</span><span class="op" id="1975943">,</span>&nbsp;<span class="ident" id="1975945">ErrSyntax</span><span class="op" id="1975954">}</span><br>
<span class="lineno"></span><span class="op" id="1975956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1975959">func</span>&nbsp;<span class="ident" id="1975964">rangeError</span><span class="op" id="1975974">(</span><span class="ident" id="1975975">fn</span><span class="op" id="1975977">,</span>&nbsp;<span class="ident" id="1975979">str</span>&nbsp;<span class="builtintype" id="1975983">string</span><span class="op" id="1975989">)</span>&nbsp;<span class="op" id="1975991">*</span><span class="ident" id="1975992">NumError</span>&nbsp;<span class="op" id="1976001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976004">return</span>&nbsp;<span class="op" id="1976011">&amp;</span><span class="ident" id="1976012">NumError</span><span class="op" id="1976020">{</span><span class="ident" id="1976021">fn</span><span class="op" id="1976023">,</span>&nbsp;<span class="ident" id="1976025">str</span><span class="op" id="1976028">,</span>&nbsp;<span class="ident" id="1976030">ErrRange</span><span class="op" id="1976038">}</span><br>
<span class="lineno"></span><span class="op" id="1976040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1976043">const</span>&nbsp;<span class="ident" id="1976049">intSize</span>&nbsp;<span class="op" id="1976057">=</span>&nbsp;<span class="num" id="1976059">32</span>&nbsp;<span class="op" id="1976062">&lt;&lt;</span>&nbsp;<span class="op" id="1976065">(</span><span class="op" id="1976066">^</span><span class="builtintype" id="1976067">uint</span><span class="op" id="1976071">(</span><span class="num" id="1976072">0</span><span class="op" id="1976073">)</span>&nbsp;<span class="op" id="1976075">&gt;&gt;</span>&nbsp;<span class="num" id="1976078">63</span><span class="op" id="1976080">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1976083">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="1976139">const</span>&nbsp;<span class="ident" id="1976145">IntSize</span>&nbsp;<span class="op" id="1976153">=</span>&nbsp;<span class="ident" id="1976155">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1976164">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="1976220">func</span>&nbsp;<span class="ident" id="1976225">cutoff64</span><span class="op" id="1976233">(</span><span class="ident" id="1976234">base</span>&nbsp;<span class="builtintype" id="1976239">int</span><span class="op" id="1976242">)</span>&nbsp;<span class="ident" id="1976244">uint64</span>&nbsp;<span class="op" id="1976251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976254">if</span>&nbsp;<span class="ident" id="1976257">base</span>&nbsp;<span class="op" id="1976262">&lt;</span>&nbsp;<span class="num" id="1976264">2</span>&nbsp;<span class="op" id="1976266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976270">return</span>&nbsp;<span class="num" id="1976277">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1976280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976283">return</span>&nbsp;<span class="op" id="1976290">(</span><span class="num" id="1976291">1</span><span class="op" id="1976292">&lt;&lt;</span><span class="num" id="1976294">64</span><span class="op" id="1976296">-</span><span class="num" id="1976297">1</span><span class="op" id="1976298">)</span><span class="op" id="1976299">/</span><span class="ident" id="1976300">uint64</span><span class="op" id="1976306">(</span><span class="ident" id="1976307">base</span><span class="op" id="1976311">)</span>&nbsp;<span class="op" id="1976313">+</span>&nbsp;<span class="num" id="1976315">1</span><br>
<span class="lineno">45</span><span class="op" id="1976317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1976320">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="1976376">func</span>&nbsp;<span class="ident" id="1976381">ParseUint</span><span class="op" id="1976390">(</span><span class="ident" id="1976391">s</span>&nbsp;<span class="builtintype" id="1976393">string</span><span class="op" id="1976399">,</span>&nbsp;<span class="ident" id="1976401">base</span>&nbsp;<span class="builtintype" id="1976406">int</span><span class="op" id="1976409">,</span>&nbsp;<span class="ident" id="1976411">bitSize</span>&nbsp;<span class="builtintype" id="1976419">int</span><span class="op" id="1976422">)</span>&nbsp;<span class="op" id="1976424">(</span><span class="ident" id="1976425">n</span>&nbsp;<span class="ident" id="1976427">uint64</span><span class="op" id="1976433">,</span>&nbsp;<span class="ident" id="1976435">err</span>&nbsp;<span class="builtintype" id="1976439">error</span><span class="op" id="1976444">)</span>&nbsp;<span class="op" id="1976446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976449">var</span>&nbsp;<span class="ident" id="1976453">cutoff</span><span class="op" id="1976459">,</span>&nbsp;<span class="ident" id="1976461">maxVal</span>&nbsp;<span class="ident" id="1976468">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976477">if</span>&nbsp;<span class="ident" id="1976480">bitSize</span>&nbsp;<span class="op" id="1976488">==</span>&nbsp;<span class="num" id="1976491">0</span>&nbsp;<span class="op" id="1976493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976497">bitSize</span>&nbsp;<span class="op" id="1976505">=</span>&nbsp;<span class="builtintype" id="1976507">int</span><span class="op" id="1976510">(</span><span class="ident" id="1976511">IntSize</span><span class="op" id="1976518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1976521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976525">s0</span>&nbsp;<span class="op" id="1976528">:=</span>&nbsp;<span class="ident" id="1976531">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976534">switch</span>&nbsp;<span class="op" id="1976541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976544">case</span>&nbsp;<span class="builtinfunc" id="1976549">len</span><span class="op" id="1976552">(</span><span class="ident" id="1976553">s</span><span class="op" id="1976554">)</span>&nbsp;<span class="op" id="1976556">&lt;</span>&nbsp;<span class="num" id="1976558">1</span><span class="op" id="1976559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976563">err</span>&nbsp;<span class="op" id="1976567">=</span>&nbsp;<span class="ident" id="1976569">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976581">goto</span>&nbsp;<span class="ident" id="1976586">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976594">case</span>&nbsp;<span class="num" id="1976599">2</span>&nbsp;<span class="op" id="1976601">&lt;=</span>&nbsp;<span class="ident" id="1976604">base</span>&nbsp;<span class="op" id="1976609">&amp;&amp;</span>&nbsp;<span class="ident" id="1976612">base</span>&nbsp;<span class="op" id="1976617">&lt;=</span>&nbsp;<span class="num" id="1976620">36</span><span class="op" id="1976622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1976626">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976657">case</span>&nbsp;<span class="ident" id="1976662">base</span>&nbsp;<span class="op" id="1976667">==</span>&nbsp;<span class="num" id="1976670">0</span><span class="op" id="1976671">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1976675">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976708">switch</span>&nbsp;<span class="op" id="1976715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976719">case</span>&nbsp;<span class="ident" id="1976724">s</span><span class="op" id="1976725">[</span><span class="num" id="1976726">0</span><span class="op" id="1976727">]</span>&nbsp;<span class="op" id="1976729">==</span>&nbsp;<span class="string" id="1976732">&#39;0&#39;</span>&nbsp;<span class="op" id="1976736">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1976739">len</span><span class="op" id="1976742">(</span><span class="ident" id="1976743">s</span><span class="op" id="1976744">)</span>&nbsp;<span class="op" id="1976746">&gt;</span>&nbsp;<span class="num" id="1976748">1</span>&nbsp;<span class="op" id="1976750">&amp;&amp;</span>&nbsp;<span class="op" id="1976753">(</span><span class="ident" id="1976754">s</span><span class="op" id="1976755">[</span><span class="num" id="1976756">1</span><span class="op" id="1976757">]</span>&nbsp;<span class="op" id="1976759">==</span>&nbsp;<span class="string" id="1976762">&#39;x&#39;</span>&nbsp;<span class="op" id="1976766">||</span>&nbsp;<span class="ident" id="1976769">s</span><span class="op" id="1976770">[</span><span class="num" id="1976771">1</span><span class="op" id="1976772">]</span>&nbsp;<span class="op" id="1976774">==</span>&nbsp;<span class="string" id="1976777">&#39;X&#39;</span><span class="op" id="1976780">)</span><span class="op" id="1976781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976786">base</span>&nbsp;<span class="op" id="1976791">=</span>&nbsp;<span class="num" id="1976793">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976799">s</span>&nbsp;<span class="op" id="1976801">=</span>&nbsp;<span class="ident" id="1976803">s</span><span class="op" id="1976804">[</span><span class="num" id="1976805">2</span><span class="op" id="1976806">:</span><span class="op" id="1976807">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976812">if</span>&nbsp;<span class="builtinfunc" id="1976815">len</span><span class="op" id="1976818">(</span><span class="ident" id="1976819">s</span><span class="op" id="1976820">)</span>&nbsp;<span class="op" id="1976822">&lt;</span>&nbsp;<span class="num" id="1976824">1</span>&nbsp;<span class="op" id="1976826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976832">err</span>&nbsp;<span class="op" id="1976836">=</span>&nbsp;<span class="ident" id="1976838">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976852">goto</span>&nbsp;<span class="ident" id="1976857">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1976866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976870">case</span>&nbsp;<span class="ident" id="1976875">s</span><span class="op" id="1976876">[</span><span class="num" id="1976877">0</span><span class="op" id="1976878">]</span>&nbsp;<span class="op" id="1976880">==</span>&nbsp;<span class="string" id="1976883">&#39;0&#39;</span><span class="op" id="1976886">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976891">base</span>&nbsp;<span class="op" id="1976896">=</span>&nbsp;<span class="num" id="1976898">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976902">default</span><span class="op" id="1976909">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976914">base</span>&nbsp;<span class="op" id="1976919">=</span>&nbsp;<span class="num" id="1976921">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1976926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976930">default</span><span class="op" id="1976937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1976941">err</span>&nbsp;<span class="op" id="1976945">=</span>&nbsp;<span class="ident" id="1976947">errors</span><span class="op" id="1976953">.</span><span class="ident" id="1976954">New</span><span class="op" id="1976957">(</span><span class="string" id="1976958">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="1976974">+</span>&nbsp;<span class="ident" id="1976976">Itoa</span><span class="op" id="1976980">(</span><span class="ident" id="1976981">base</span><span class="op" id="1976985">)</span><span class="op" id="1976986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1976990">goto</span>&nbsp;<span class="ident" id="1976995">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1977002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977006">n</span>&nbsp;<span class="op" id="1977008">=</span>&nbsp;<span class="num" id="1977010">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977013">cutoff</span>&nbsp;<span class="op" id="1977020">=</span>&nbsp;<span class="ident" id="1977022">cutoff64</span><span class="op" id="1977030">(</span><span class="ident" id="1977031">base</span><span class="op" id="1977035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977038">maxVal</span>&nbsp;<span class="op" id="1977045">=</span>&nbsp;<span class="num" id="1977047">1</span><span class="op" id="1977048">&lt;&lt;</span><span class="builtintype" id="1977050">uint</span><span class="op" id="1977054">(</span><span class="ident" id="1977055">bitSize</span><span class="op" id="1977062">)</span>&nbsp;<span class="op" id="1977064">-</span>&nbsp;<span class="num" id="1977066">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977070">for</span>&nbsp;<span class="ident" id="1977074">i</span>&nbsp;<span class="op" id="1977076">:=</span>&nbsp;<span class="num" id="1977079">0</span><span class="op" id="1977080">;</span>&nbsp;<span class="ident" id="1977082">i</span>&nbsp;<span class="op" id="1977084">&lt;</span>&nbsp;<span class="builtinfunc" id="1977086">len</span><span class="op" id="1977089">(</span><span class="ident" id="1977090">s</span><span class="op" id="1977091">)</span><span class="op" id="1977092">;</span>&nbsp;<span class="ident" id="1977094">i</span><span class="op" id="1977095">++</span>&nbsp;<span class="op" id="1977098">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977102">var</span>&nbsp;<span class="ident" id="1977106">v</span>&nbsp;<span class="builtintype" id="1977108">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977115">d</span>&nbsp;<span class="op" id="1977117">:=</span>&nbsp;<span class="ident" id="1977120">s</span><span class="op" id="1977121">[</span><span class="ident" id="1977122">i</span><span class="op" id="1977123">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977127">switch</span>&nbsp;<span class="op" id="1977134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977138">case</span>&nbsp;<span class="string" id="1977143">&#39;0&#39;</span>&nbsp;<span class="op" id="1977147">&lt;=</span>&nbsp;<span class="ident" id="1977150">d</span>&nbsp;<span class="op" id="1977152">&amp;&amp;</span>&nbsp;<span class="ident" id="1977155">d</span>&nbsp;<span class="op" id="1977157">&lt;=</span>&nbsp;<span class="string" id="1977160">&#39;9&#39;</span><span class="op" id="1977163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977168">v</span>&nbsp;<span class="op" id="1977170">=</span>&nbsp;<span class="ident" id="1977172">d</span>&nbsp;<span class="op" id="1977174">-</span>&nbsp;<span class="string" id="1977176">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977182">case</span>&nbsp;<span class="string" id="1977187">&#39;a&#39;</span>&nbsp;<span class="op" id="1977191">&lt;=</span>&nbsp;<span class="ident" id="1977194">d</span>&nbsp;<span class="op" id="1977196">&amp;&amp;</span>&nbsp;<span class="ident" id="1977199">d</span>&nbsp;<span class="op" id="1977201">&lt;=</span>&nbsp;<span class="string" id="1977204">&#39;z&#39;</span><span class="op" id="1977207">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977212">v</span>&nbsp;<span class="op" id="1977214">=</span>&nbsp;<span class="ident" id="1977216">d</span>&nbsp;<span class="op" id="1977218">-</span>&nbsp;<span class="string" id="1977220">&#39;a&#39;</span>&nbsp;<span class="op" id="1977224">+</span>&nbsp;<span class="num" id="1977226">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977231">case</span>&nbsp;<span class="string" id="1977236">&#39;A&#39;</span>&nbsp;<span class="op" id="1977240">&lt;=</span>&nbsp;<span class="ident" id="1977243">d</span>&nbsp;<span class="op" id="1977245">&amp;&amp;</span>&nbsp;<span class="ident" id="1977248">d</span>&nbsp;<span class="op" id="1977250">&lt;=</span>&nbsp;<span class="string" id="1977253">&#39;Z&#39;</span><span class="op" id="1977256">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977261">v</span>&nbsp;<span class="op" id="1977263">=</span>&nbsp;<span class="ident" id="1977265">d</span>&nbsp;<span class="op" id="1977267">-</span>&nbsp;<span class="string" id="1977269">&#39;A&#39;</span>&nbsp;<span class="op" id="1977273">+</span>&nbsp;<span class="num" id="1977275">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977280">default</span><span class="op" id="1977287">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977292">n</span>&nbsp;<span class="op" id="1977294">=</span>&nbsp;<span class="num" id="1977296">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977301">err</span>&nbsp;<span class="op" id="1977305">=</span>&nbsp;<span class="ident" id="1977307">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977320">goto</span>&nbsp;<span class="ident" id="1977325">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1977333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977337">if</span>&nbsp;<span class="builtintype" id="1977340">int</span><span class="op" id="1977343">(</span><span class="ident" id="1977344">v</span><span class="op" id="1977345">)</span>&nbsp;<span class="op" id="1977347">&gt;=</span>&nbsp;<span class="ident" id="1977350">base</span>&nbsp;<span class="op" id="1977355">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977360">n</span>&nbsp;<span class="op" id="1977362">=</span>&nbsp;<span class="num" id="1977364">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977369">err</span>&nbsp;<span class="op" id="1977373">=</span>&nbsp;<span class="ident" id="1977375">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977388">goto</span>&nbsp;<span class="ident" id="1977393">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1977401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977406">if</span>&nbsp;<span class="ident" id="1977409">n</span>&nbsp;<span class="op" id="1977411">&gt;=</span>&nbsp;<span class="ident" id="1977414">cutoff</span>&nbsp;<span class="op" id="1977421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1977426">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977449">n</span>&nbsp;<span class="op" id="1977451">=</span>&nbsp;<span class="num" id="1977453">1</span><span class="op" id="1977454">&lt;&lt;</span><span class="num" id="1977456">64</span>&nbsp;<span class="op" id="1977459">-</span>&nbsp;<span class="num" id="1977461">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977466">err</span>&nbsp;<span class="op" id="1977470">=</span>&nbsp;<span class="ident" id="1977472">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977484">goto</span>&nbsp;<span class="ident" id="1977489">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1977497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977501">n</span>&nbsp;<span class="op" id="1977503">*=</span>&nbsp;<span class="ident" id="1977506">uint64</span><span class="op" id="1977512">(</span><span class="ident" id="1977513">base</span><span class="op" id="1977517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977522">n1</span>&nbsp;<span class="op" id="1977525">:=</span>&nbsp;<span class="ident" id="1977528">n</span>&nbsp;<span class="op" id="1977530">+</span>&nbsp;<span class="ident" id="1977532">uint64</span><span class="op" id="1977538">(</span><span class="ident" id="1977539">v</span><span class="op" id="1977540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977544">if</span>&nbsp;<span class="ident" id="1977547">n1</span>&nbsp;<span class="op" id="1977550">&lt;</span>&nbsp;<span class="ident" id="1977552">n</span>&nbsp;<span class="op" id="1977554">||</span>&nbsp;<span class="ident" id="1977557">n1</span>&nbsp;<span class="op" id="1977560">&gt;</span>&nbsp;<span class="ident" id="1977562">maxVal</span>&nbsp;<span class="op" id="1977569">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1977574">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977594">n</span>&nbsp;<span class="op" id="1977596">=</span>&nbsp;<span class="num" id="1977598">1</span><span class="op" id="1977599">&lt;&lt;</span><span class="num" id="1977601">64</span>&nbsp;<span class="op" id="1977604">-</span>&nbsp;<span class="num" id="1977606">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977611">err</span>&nbsp;<span class="op" id="1977615">=</span>&nbsp;<span class="ident" id="1977617">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977629">goto</span>&nbsp;<span class="ident" id="1977634">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1977642">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1977646">n</span>&nbsp;<span class="op" id="1977648">=</span>&nbsp;<span class="ident" id="1977650">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1977654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977658">return</span>&nbsp;<span class="ident" id="1977665">n</span><span class="op" id="1977666">,</span>&nbsp;<span class="ident" id="1977668">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="1977673">Error</span><span class="op" id="1977678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1977681">return</span>&nbsp;<span class="ident" id="1977688">n</span><span class="op" id="1977689">,</span>&nbsp;<span class="op" id="1977691">&amp;</span><span class="ident" id="1977692">NumError</span><span class="op" id="1977700">{</span><span class="string" id="1977701">&#34;ParseUint&#34;</span><span class="op" id="1977712">,</span>&nbsp;<span class="ident" id="1977714">s0</span><span class="op" id="1977716">,</span>&nbsp;<span class="ident" id="1977718">err</span><span class="op" id="1977721">}</span><br>
<span class="lineno"></span><span class="op" id="1977723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1977726">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="1977792">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1977857">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="1977921">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="1977952">//</span><br>
<span class="lineno"></span><span class="comment" id="1977955">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="1978006">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="1978072">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="1978125">//</span><br>
<span class="lineno"></span><span class="comment" id="1978128">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="1978193">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="1978256">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="1978316">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1978378">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1978442">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1978500">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="1978533">func</span>&nbsp;<span class="ident" id="1978538">ParseInt</span><span class="op" id="1978546">(</span><span class="ident" id="1978547">s</span>&nbsp;<span class="builtintype" id="1978549">string</span><span class="op" id="1978555">,</span>&nbsp;<span class="ident" id="1978557">base</span>&nbsp;<span class="builtintype" id="1978562">int</span><span class="op" id="1978565">,</span>&nbsp;<span class="ident" id="1978567">bitSize</span>&nbsp;<span class="builtintype" id="1978575">int</span><span class="op" id="1978578">)</span>&nbsp;<span class="op" id="1978580">(</span><span class="ident" id="1978581">i</span>&nbsp;<span class="ident" id="1978583">int64</span><span class="op" id="1978588">,</span>&nbsp;<span class="ident" id="1978590">err</span>&nbsp;<span class="builtintype" id="1978594">error</span><span class="op" id="1978599">)</span>&nbsp;<span class="op" id="1978601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978604">const</span>&nbsp;<span class="ident" id="1978610">fnParseInt</span>&nbsp;<span class="op" id="1978621">=</span>&nbsp;<span class="string" id="1978623">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978636">if</span>&nbsp;<span class="ident" id="1978639">bitSize</span>&nbsp;<span class="op" id="1978647">==</span>&nbsp;<span class="num" id="1978650">0</span>&nbsp;<span class="op" id="1978652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978656">bitSize</span>&nbsp;<span class="op" id="1978664">=</span>&nbsp;<span class="builtintype" id="1978666">int</span><span class="op" id="1978669">(</span><span class="ident" id="1978670">IntSize</span><span class="op" id="1978677">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1978680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1978684">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978706">if</span>&nbsp;<span class="builtinfunc" id="1978709">len</span><span class="op" id="1978712">(</span><span class="ident" id="1978713">s</span><span class="op" id="1978714">)</span>&nbsp;<span class="op" id="1978716">==</span>&nbsp;<span class="num" id="1978719">0</span>&nbsp;<span class="op" id="1978721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978725">return</span>&nbsp;<span class="num" id="1978732">0</span><span class="op" id="1978733">,</span>&nbsp;<span class="ident" id="1978735">syntaxError</span><span class="op" id="1978746">(</span><span class="ident" id="1978747">fnParseInt</span><span class="op" id="1978757">,</span>&nbsp;<span class="ident" id="1978759">s</span><span class="op" id="1978760">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1978763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1978767">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978794">s0</span>&nbsp;<span class="op" id="1978797">:=</span>&nbsp;<span class="ident" id="1978800">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978803">neg</span>&nbsp;<span class="op" id="1978807">:=</span>&nbsp;<span class="builtintype" id="1978810">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978817">if</span>&nbsp;<span class="ident" id="1978820">s</span><span class="op" id="1978821">[</span><span class="num" id="1978822">0</span><span class="op" id="1978823">]</span>&nbsp;<span class="op" id="1978825">==</span>&nbsp;<span class="string" id="1978828">&#39;+&#39;</span>&nbsp;<span class="op" id="1978832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978836">s</span>&nbsp;<span class="op" id="1978838">=</span>&nbsp;<span class="ident" id="1978840">s</span><span class="op" id="1978841">[</span><span class="num" id="1978842">1</span><span class="op" id="1978843">:</span><span class="op" id="1978844">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1978847">}</span>&nbsp;<span class="keyword" id="1978849">else</span>&nbsp;<span class="keyword" id="1978854">if</span>&nbsp;<span class="ident" id="1978857">s</span><span class="op" id="1978858">[</span><span class="num" id="1978859">0</span><span class="op" id="1978860">]</span>&nbsp;<span class="op" id="1978862">==</span>&nbsp;<span class="string" id="1978865">&#39;-&#39;</span>&nbsp;<span class="op" id="1978869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978873">neg</span>&nbsp;<span class="op" id="1978877">=</span>&nbsp;<span class="builtintype" id="1978879">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978886">s</span>&nbsp;<span class="op" id="1978888">=</span>&nbsp;<span class="ident" id="1978890">s</span><span class="op" id="1978891">[</span><span class="num" id="1978892">1</span><span class="op" id="1978893">:</span><span class="op" id="1978894">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1978897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1978901">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978939">var</span>&nbsp;<span class="ident" id="1978943">un</span>&nbsp;<span class="ident" id="1978946">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1978954">un</span><span class="op" id="1978956">,</span>&nbsp;<span class="ident" id="1978958">err</span>&nbsp;<span class="op" id="1978962">=</span>&nbsp;<span class="ident" id="1978964">ParseUint</span><span class="op" id="1978973">(</span><span class="ident" id="1978974">s</span><span class="op" id="1978975">,</span>&nbsp;<span class="ident" id="1978977">base</span><span class="op" id="1978981">,</span>&nbsp;<span class="ident" id="1978983">bitSize</span><span class="op" id="1978990">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1978993">if</span>&nbsp;<span class="ident" id="1978996">err</span>&nbsp;<span class="op" id="1979000">!=</span>&nbsp;<span class="ident" id="1979003">nil</span>&nbsp;<span class="op" id="1979007">&amp;&amp;</span>&nbsp;<span class="ident" id="1979010">err</span><span class="op" id="1979013">.</span><span class="op" id="1979014">(</span><span class="op" id="1979015">*</span><span class="ident" id="1979016">NumError</span><span class="op" id="1979024">)</span><span class="op" id="1979025">.</span><span class="ident" id="1979026">Err</span>&nbsp;<span class="op" id="1979030">!=</span>&nbsp;<span class="ident" id="1979033">ErrRange</span>&nbsp;<span class="op" id="1979042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1979046">err</span><span class="op" id="1979049">.</span><span class="op" id="1979050">(</span><span class="op" id="1979051">*</span><span class="ident" id="1979052">NumError</span><span class="op" id="1979060">)</span><span class="op" id="1979061">.</span><span class="ident" id="1979062">Func</span>&nbsp;<span class="op" id="1979067">=</span>&nbsp;<span class="ident" id="1979069">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1979082">err</span><span class="op" id="1979085">.</span><span class="op" id="1979086">(</span><span class="op" id="1979087">*</span><span class="ident" id="1979088">NumError</span><span class="op" id="1979096">)</span><span class="op" id="1979097">.</span><span class="ident" id="1979098">Num</span>&nbsp;<span class="op" id="1979102">=</span>&nbsp;<span class="ident" id="1979104">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979109">return</span>&nbsp;<span class="num" id="1979116">0</span><span class="op" id="1979117">,</span>&nbsp;<span class="ident" id="1979119">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1979124">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1979127">cutoff</span>&nbsp;<span class="op" id="1979134">:=</span>&nbsp;<span class="ident" id="1979137">uint64</span><span class="op" id="1979143">(</span><span class="num" id="1979144">1</span>&nbsp;<span class="op" id="1979146">&lt;&lt;</span>&nbsp;<span class="builtintype" id="1979149">uint</span><span class="op" id="1979153">(</span><span class="ident" id="1979154">bitSize</span><span class="op" id="1979161">-</span><span class="num" id="1979162">1</span><span class="op" id="1979163">)</span><span class="op" id="1979164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979167">if</span>&nbsp;<span class="op" id="1979170">!</span><span class="ident" id="1979171">neg</span>&nbsp;<span class="op" id="1979175">&amp;&amp;</span>&nbsp;<span class="ident" id="1979178">un</span>&nbsp;<span class="op" id="1979181">&gt;=</span>&nbsp;<span class="ident" id="1979184">cutoff</span>&nbsp;<span class="op" id="1979191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979195">return</span>&nbsp;<span class="ident" id="1979202">int64</span><span class="op" id="1979207">(</span><span class="ident" id="1979208">cutoff</span>&nbsp;<span class="op" id="1979215">-</span>&nbsp;<span class="num" id="1979217">1</span><span class="op" id="1979218">)</span><span class="op" id="1979219">,</span>&nbsp;<span class="ident" id="1979221">rangeError</span><span class="op" id="1979231">(</span><span class="ident" id="1979232">fnParseInt</span><span class="op" id="1979242">,</span>&nbsp;<span class="ident" id="1979244">s0</span><span class="op" id="1979246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1979249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979252">if</span>&nbsp;<span class="ident" id="1979255">neg</span>&nbsp;<span class="op" id="1979259">&amp;&amp;</span>&nbsp;<span class="ident" id="1979262">un</span>&nbsp;<span class="op" id="1979265">&gt;</span>&nbsp;<span class="ident" id="1979267">cutoff</span>&nbsp;<span class="op" id="1979274">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979278">return</span>&nbsp;<span class="op" id="1979285">-</span><span class="ident" id="1979286">int64</span><span class="op" id="1979291">(</span><span class="ident" id="1979292">cutoff</span><span class="op" id="1979298">)</span><span class="op" id="1979299">,</span>&nbsp;<span class="ident" id="1979301">rangeError</span><span class="op" id="1979311">(</span><span class="ident" id="1979312">fnParseInt</span><span class="op" id="1979322">,</span>&nbsp;<span class="ident" id="1979324">s0</span><span class="op" id="1979326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1979329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1979332">n</span>&nbsp;<span class="op" id="1979334">:=</span>&nbsp;<span class="ident" id="1979337">int64</span><span class="op" id="1979342">(</span><span class="ident" id="1979343">un</span><span class="op" id="1979345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979348">if</span>&nbsp;<span class="ident" id="1979351">neg</span>&nbsp;<span class="op" id="1979355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1979359">n</span>&nbsp;<span class="op" id="1979361">=</span>&nbsp;<span class="op" id="1979363">-</span><span class="ident" id="1979364">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1979367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979370">return</span>&nbsp;<span class="ident" id="1979377">n</span><span class="op" id="1979378">,</span>&nbsp;<span class="ident" id="1979380">nil</span><br>
<span class="lineno"></span><span class="op" id="1979384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1979387">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="1979432">func</span>&nbsp;<span class="ident" id="1979437">Atoi</span><span class="op" id="1979441">(</span><span class="ident" id="1979442">s</span>&nbsp;<span class="builtintype" id="1979444">string</span><span class="op" id="1979450">)</span>&nbsp;<span class="op" id="1979452">(</span><span class="ident" id="1979453">i</span>&nbsp;<span class="builtintype" id="1979455">int</span><span class="op" id="1979458">,</span>&nbsp;<span class="ident" id="1979460">err</span>&nbsp;<span class="builtintype" id="1979464">error</span><span class="op" id="1979469">)</span>&nbsp;<span class="op" id="1979471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1979474">i64</span><span class="op" id="1979477">,</span>&nbsp;<span class="ident" id="1979479">err</span>&nbsp;<span class="op" id="1979483">:=</span>&nbsp;<span class="ident" id="1979486">ParseInt</span><span class="op" id="1979494">(</span><span class="ident" id="1979495">s</span><span class="op" id="1979496">,</span>&nbsp;<span class="num" id="1979498">10</span><span class="op" id="1979500">,</span>&nbsp;<span class="num" id="1979502">0</span><span class="op" id="1979503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1979506">return</span>&nbsp;<span class="builtintype" id="1979513">int</span><span class="op" id="1979516">(</span><span class="ident" id="1979517">i64</span><span class="op" id="1979520">)</span><span class="op" id="1979521">,</span>&nbsp;<span class="ident" id="1979523">err</span><br>
<span class="lineno"></span><span class="op" id="1979527">}</span>
</div>
</body>
</html>
