<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5375893">package</span>&nbsp;<span class="ident" id="5375901">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5375908">import</span>&nbsp;<span class="op" id="5375915">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5375918">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5375927">&#34;math&#34;</span><br>
<span class="lineno"></span><span class="op" id="5375934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5375937">//&nbsp;Var&nbsp;reprsents&nbsp;a&nbsp;variable&nbsp;object</span><br>
<span class="lineno"></span><span class="keyword" id="5375972">type</span>&nbsp;<span class="ident" id="5375977">Var</span>&nbsp;<span class="keyword" id="5375981">struct</span>&nbsp;<span class="op" id="5375988">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5375991">align</span>&nbsp;<span class="builtintype" id="5375997">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376005">buf</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5376011">*</span><span class="ident" id="5376012"><a href="/lonnie.io/e8vm/link8/var.go.html#5375918">bytes</a></span><span class="op" id="5376017">.</span><span class="ident" id="5376018">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376027">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5376034">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376042">prePad</span>&nbsp;<span class="builtintype" id="5376049">uint32</span><br>
<span class="lineno">15</span><span class="op" id="5376056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376059">//&nbsp;NewVar&nbsp;creates&nbsp;a&nbsp;new&nbsp;relocatable&nbsp;data&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5376109">func</span>&nbsp;<span class="ident" id="5376114">NewVar</span><span class="op" id="5376120">(</span><span class="ident" id="5376121">align</span>&nbsp;<span class="builtintype" id="5376127">uint32</span><span class="op" id="5376133">)</span>&nbsp;<span class="op" id="5376135">*</span><span class="ident" id="5376136"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span>&nbsp;<span class="op" id="5376140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376143">ret</span>&nbsp;<span class="op" id="5376147">:=</span>&nbsp;<span class="builtinfunc" id="5376150">new</span><span class="op" id="5376153">(</span><span class="ident" id="5376154"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span><span class="op" id="5376157">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376161">if</span>&nbsp;<span class="ident" id="5376164"><a href="/lonnie.io/e8vm/link8/var.go.html#5376121">align</a></span>&nbsp;<span class="op" id="5376170">==</span>&nbsp;<span class="num" id="5376173">0</span>&nbsp;<span class="op" id="5376175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376179"><a href="/lonnie.io/e8vm/link8/var.go.html#5376121">align</a></span>&nbsp;<span class="op" id="5376185">=</span>&nbsp;<span class="num" id="5376187">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5376190">}</span>&nbsp;<span class="keyword" id="5376192">else</span>&nbsp;<span class="keyword" id="5376197">if</span>&nbsp;<span class="ident" id="5376200"><a href="/lonnie.io/e8vm/link8/var.go.html#5376121">align</a></span>&nbsp;<span class="op" id="5376206">!=</span>&nbsp;<span class="num" id="5376209">1</span>&nbsp;<span class="op" id="5376211">&amp;&amp;</span>&nbsp;<span class="ident" id="5376214"><a href="/lonnie.io/e8vm/link8/var.go.html#5376121">align</a></span>&nbsp;<span class="op" id="5376220">!=</span>&nbsp;<span class="num" id="5376223">4</span>&nbsp;<span class="op" id="5376225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5376229">panic</span><span class="op" id="5376234">(</span><span class="string" id="5376235">&#34;invalid&nbsp;align&#34;</span><span class="op" id="5376250">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5376253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376257"><a href="/lonnie.io/e8vm/link8/var.go.html#5376143">ret</a></span><span class="op" id="5376260">.</span><span class="ident" id="5376261">align</span>&nbsp;<span class="op" id="5376267">=</span>&nbsp;<span class="ident" id="5376269"><a href="/lonnie.io/e8vm/link8/var.go.html#5376121">align</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376276"><a href="/lonnie.io/e8vm/link8/var.go.html#5376143">ret</a></span><span class="op" id="5376279">.</span><span class="ident" id="5376280">buf</span>&nbsp;<span class="op" id="5376284">=</span>&nbsp;<span class="builtinfunc" id="5376286">new</span><span class="op" id="5376289">(</span><span class="ident" id="5376290"><a href="/lonnie.io/e8vm/link8/var.go.html#5375918">bytes</a></span><span class="op" id="5376295">.</span><span class="ident" id="5376296">Buffer</span><span class="op" id="5376302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376306">return</span>&nbsp;<span class="ident" id="5376313"><a href="/lonnie.io/e8vm/link8/var.go.html#5376143">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5376317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376320">//&nbsp;Write&nbsp;appends&nbsp;bytes&nbsp;to&nbsp;this&nbsp;data&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5376365">func</span>&nbsp;<span class="op" id="5376370">(</span><span class="ident" id="5376371">v</span>&nbsp;<span class="op" id="5376373">*</span><span class="ident" id="5376374"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span><span class="op" id="5376377">)</span>&nbsp;<span class="ident" id="5376379">Write</span><span class="op" id="5376384">(</span><span class="ident" id="5376385">buf</span>&nbsp;<span class="op" id="5376389">[</span><span class="op" id="5376390">]</span><span class="builtintype" id="5376391">byte</span><span class="op" id="5376395">)</span>&nbsp;<span class="op" id="5376397">(</span><span class="builtintype" id="5376398">int</span><span class="op" id="5376401">,</span>&nbsp;<span class="builtintype" id="5376403">error</span><span class="op" id="5376408">)</span>&nbsp;<span class="op" id="5376410">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376413">return</span>&nbsp;<span class="ident" id="5376420"><a href="/lonnie.io/e8vm/link8/var.go.html#5376371">v</a></span><span class="op" id="5376421">.</span><span class="ident" id="5376422">buf</span><span class="op" id="5376425">.</span><span class="ident" id="5376426">Write</span><span class="op" id="5376431">(</span><span class="ident" id="5376432"><a href="/lonnie.io/e8vm/link8/var.go.html#5376385">buf</a></span><span class="op" id="5376435">)</span><br>
<span class="lineno"></span><span class="op" id="5376437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376440">//&nbsp;Pad&nbsp;pads&nbsp;n&nbsp;bytes&nbsp;into&nbsp;this&nbsp;data&nbsp;section</span><br>
<span class="lineno"></span><span class="keyword" id="5376483">func</span>&nbsp;<span class="op" id="5376488">(</span><span class="ident" id="5376489">v</span>&nbsp;<span class="op" id="5376491">*</span><span class="ident" id="5376492"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span><span class="op" id="5376495">)</span>&nbsp;<span class="ident" id="5376497">Pad</span><span class="op" id="5376500">(</span><span class="ident" id="5376501">n</span>&nbsp;<span class="builtintype" id="5376503">uint32</span><span class="op" id="5376509">)</span>&nbsp;<span class="op" id="5376511">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376514"><a href="/lonnie.io/e8vm/link8/var.go.html#5376489">v</a></span><span class="op" id="5376515">.</span><span class="ident" id="5376516">buf</span><span class="op" id="5376519">.</span><span class="ident" id="5376520">Write</span><span class="op" id="5376525">(</span><span class="builtinfunc" id="5376526">make</span><span class="op" id="5376530">(</span><span class="op" id="5376531">[</span><span class="op" id="5376532">]</span><span class="builtintype" id="5376533">byte</span><span class="op" id="5376537">,</span>&nbsp;<span class="ident" id="5376539"><a href="/lonnie.io/e8vm/link8/var.go.html#5376501">n</a></span><span class="op" id="5376540">)</span><span class="op" id="5376541">)</span><br>
<span class="lineno"></span><span class="op" id="5376543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376546">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;current&nbsp;size&nbsp;of&nbsp;the&nbsp;section</span><br>
<span class="lineno"></span><span class="keyword" id="5376594">func</span>&nbsp;<span class="op" id="5376599">(</span><span class="ident" id="5376600">v</span>&nbsp;<span class="op" id="5376602">*</span><span class="ident" id="5376603"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span><span class="op" id="5376606">)</span>&nbsp;<span class="ident" id="5376608">Size</span><span class="op" id="5376612">(</span><span class="op" id="5376613">)</span>&nbsp;<span class="builtintype" id="5376615">uint32</span>&nbsp;<span class="op" id="5376622">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376625">return</span>&nbsp;<span class="builtintype" id="5376632">uint32</span><span class="op" id="5376638">(</span><span class="ident" id="5376639"><a href="/lonnie.io/e8vm/link8/var.go.html#5376600">v</a></span><span class="op" id="5376640">.</span><span class="ident" id="5376641">buf</span><span class="op" id="5376644">.</span><span class="ident" id="5376645">Len</span><span class="op" id="5376648">(</span><span class="op" id="5376649">)</span><span class="op" id="5376650">)</span><br>
<span class="lineno"></span><span class="op" id="5376652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376655">//&nbsp;TooLarge&nbsp;checks&nbsp;if&nbsp;the&nbsp;size&nbsp;is&nbsp;larger&nbsp;than&nbsp;2GB</span><br>
<span class="lineno"></span><span class="keyword" id="5376705">func</span>&nbsp;<span class="op" id="5376710">(</span><span class="ident" id="5376711">v</span>&nbsp;<span class="op" id="5376713">*</span><span class="ident" id="5376714"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span><span class="op" id="5376717">)</span>&nbsp;<span class="ident" id="5376719">TooLarge</span><span class="op" id="5376727">(</span><span class="op" id="5376728">)</span>&nbsp;<span class="builtintype" id="5376730">bool</span>&nbsp;<span class="op" id="5376735">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376738">return</span>&nbsp;<span class="ident" id="5376745"><a href="/lonnie.io/e8vm/link8/var.go.html#5376711">v</a></span><span class="op" id="5376746">.</span><span class="ident" id="5376747">buf</span><span class="op" id="5376750">.</span><span class="ident" id="5376751">Len</span><span class="op" id="5376754">(</span><span class="op" id="5376755">)</span>&nbsp;<span class="op" id="5376757">&gt;</span>&nbsp;<span class="ident" id="5376759"><a href="/lonnie.io/e8vm/link8/var.go.html#5375927">math</a></span><span class="op" id="5376763">.</span><span class="ident" id="5376764">MaxInt32</span><br>
<span class="lineno"></span><span class="op" id="5376773">}</span>
</div>
</body>
</html>
