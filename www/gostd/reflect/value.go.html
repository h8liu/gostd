<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html" class="current">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2240862">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2240917">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2240971">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2241022">package</span>&nbsp;<span class="ident" id="2241030">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2241039">import</span>&nbsp;<span class="op" id="2241046">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2241049">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2241057">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2241068">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2241077">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2241080">const</span>&nbsp;<span class="ident" id="2241086">ptrSize</span>&nbsp;<span class="op" id="2241094">=</span>&nbsp;<span class="ident" id="2241096">unsafe</span><span class="op" id="2241102">.</span><span class="ident" id="2241103">Sizeof</span><span class="op" id="2241109">(</span><span class="op" id="2241110">(</span><span class="op" id="2241111">*</span><span class="builtintype" id="2241112">byte</span><span class="op" id="2241116">)</span><span class="op" id="2241117">(</span><span class="ident" id="2241118">nil</span><span class="op" id="2241121">)</span><span class="op" id="2241122">)</span><br>
<span class="lineno"></span><span class="keyword" id="2241124">const</span>&nbsp;<span class="ident" id="2241130">cannotSet</span>&nbsp;<span class="op" id="2241140">=</span>&nbsp;<span class="string" id="2241142">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2241200">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2241252">//</span><br>
<span class="lineno"></span><span class="comment" id="2241255">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2241319">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2241378">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2241438">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2241490">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2241552">//</span><br>
<span class="lineno"></span><span class="comment" id="2241555">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2241594">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2241664">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2241741">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2241802">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2241870">//</span><br>
<span class="lineno">30</span><span class="comment" id="2241873">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2241946">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2242017">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2242039">type</span>&nbsp;<span class="ident" id="2242044">Value</span>&nbsp;<span class="keyword" id="2242050">struct</span>&nbsp;<span class="op" id="2242057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242060">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2242120">typ</span>&nbsp;<span class="op" id="2242124">*</span><span class="ident" id="2242125">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242133">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242199">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2242265">ptr</span>&nbsp;<span class="ident" id="2242269">unsafe</span><span class="op" id="2242275">.</span><span class="ident" id="2242276">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242286">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242327">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242362">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242420">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242469">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242523">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242562">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242613">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242667">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242734">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242804">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2242867">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242874">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2242932">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2243001">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2243068">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2243136">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2243167">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2243170">type</span>&nbsp;<span class="ident" id="2243175">flag</span>&nbsp;<span class="builtintype" id="2243180">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2243189">const</span>&nbsp;<span class="op" id="2243195">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243198">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2243219">=</span>&nbsp;<span class="num" id="2243221">5</span>&nbsp;<span class="comment" id="2243223">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243246">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243262">flag</span>&nbsp;<span class="op" id="2243267">=</span>&nbsp;<span class="num" id="2243269">1</span><span class="op" id="2243270">&lt;&lt;</span><span class="ident" id="2243272">flagKindWidth</span>&nbsp;<span class="op" id="2243286">-</span>&nbsp;<span class="num" id="2243288">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243291">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243307">flag</span>&nbsp;<span class="op" id="2243312">=</span>&nbsp;<span class="num" id="2243314">1</span>&nbsp;<span class="op" id="2243316">&lt;&lt;</span>&nbsp;<span class="num" id="2243319">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243322">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243338">flag</span>&nbsp;<span class="op" id="2243343">=</span>&nbsp;<span class="num" id="2243345">1</span>&nbsp;<span class="op" id="2243347">&lt;&lt;</span>&nbsp;<span class="num" id="2243350">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243353">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243369">flag</span>&nbsp;<span class="op" id="2243374">=</span>&nbsp;<span class="num" id="2243376">1</span>&nbsp;<span class="op" id="2243378">&lt;&lt;</span>&nbsp;<span class="num" id="2243381">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243384">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243400">flag</span>&nbsp;<span class="op" id="2243405">=</span>&nbsp;<span class="num" id="2243407">1</span>&nbsp;<span class="op" id="2243409">&lt;&lt;</span>&nbsp;<span class="num" id="2243412">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243415">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2243436">=</span>&nbsp;<span class="num" id="2243438">9</span><br>
<span class="lineno"></span><span class="op" id="2243440">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2243443">func</span>&nbsp;<span class="op" id="2243448">(</span><span class="ident" id="2243449">f</span>&nbsp;<span class="ident" id="2243451">flag</span><span class="op" id="2243455">)</span>&nbsp;<span class="ident" id="2243457">kind</span><span class="op" id="2243461">(</span><span class="op" id="2243462">)</span>&nbsp;<span class="ident" id="2243464">Kind</span>&nbsp;<span class="op" id="2243469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2243472">return</span>&nbsp;<span class="ident" id="2243479">Kind</span><span class="op" id="2243483">(</span><span class="ident" id="2243484">f</span>&nbsp;<span class="op" id="2243486">&amp;</span>&nbsp;<span class="ident" id="2243488">flagKindMask</span><span class="op" id="2243500">)</span><br>
<span class="lineno">75</span><span class="op" id="2243502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243505">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2243565">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2243624">func</span>&nbsp;<span class="op" id="2243629">(</span><span class="ident" id="2243630">v</span>&nbsp;<span class="ident" id="2243632">Value</span><span class="op" id="2243637">)</span>&nbsp;<span class="ident" id="2243639">pointer</span><span class="op" id="2243646">(</span><span class="op" id="2243647">)</span>&nbsp;<span class="ident" id="2243649">unsafe</span><span class="op" id="2243655">.</span><span class="ident" id="2243656">Pointer</span>&nbsp;<span class="op" id="2243664">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2243667">if</span>&nbsp;<span class="ident" id="2243670">v</span><span class="op" id="2243671">.</span><span class="ident" id="2243672">typ</span><span class="op" id="2243675">.</span><span class="ident" id="2243676">size</span>&nbsp;<span class="op" id="2243681">!=</span>&nbsp;<span class="ident" id="2243684">ptrSize</span>&nbsp;<span class="op" id="2243692">||</span>&nbsp;<span class="op" id="2243695">!</span><span class="ident" id="2243696">v</span><span class="op" id="2243697">.</span><span class="ident" id="2243698">typ</span><span class="op" id="2243701">.</span><span class="ident" id="2243702">pointers</span><span class="op" id="2243710">(</span><span class="op" id="2243711">)</span>&nbsp;<span class="op" id="2243713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2243717">panic</span><span class="op" id="2243722">(</span><span class="string" id="2243723">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2243766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2243769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2243772">if</span>&nbsp;<span class="ident" id="2243775">v</span><span class="op" id="2243776">.</span><span class="ident" id="2243777">flag</span><span class="op" id="2243781">&amp;</span><span class="ident" id="2243782">flagIndir</span>&nbsp;<span class="op" id="2243792">!=</span>&nbsp;<span class="num" id="2243795">0</span>&nbsp;<span class="op" id="2243797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2243801">return</span>&nbsp;<span class="op" id="2243808">*</span><span class="op" id="2243809">(</span><span class="op" id="2243810">*</span><span class="ident" id="2243811">unsafe</span><span class="op" id="2243817">.</span><span class="ident" id="2243818">Pointer</span><span class="op" id="2243825">)</span><span class="op" id="2243826">(</span><span class="ident" id="2243827">v</span><span class="op" id="2243828">.</span><span class="ident" id="2243829">ptr</span><span class="op" id="2243832">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2243835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2243838">return</span>&nbsp;<span class="ident" id="2243845">v</span><span class="op" id="2243846">.</span><span class="ident" id="2243847">ptr</span><br>
<span class="lineno"></span><span class="op" id="2243851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243854">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2243902">func</span>&nbsp;<span class="ident" id="2243907">packEface</span><span class="op" id="2243916">(</span><span class="ident" id="2243917">v</span>&nbsp;<span class="ident" id="2243919">Value</span><span class="op" id="2243924">)</span>&nbsp;<span class="keyword" id="2243926">interface</span><span class="op" id="2243935">{</span><span class="op" id="2243936">}</span>&nbsp;<span class="op" id="2243938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243941">t</span>&nbsp;<span class="op" id="2243943">:=</span>&nbsp;<span class="ident" id="2243946">v</span><span class="op" id="2243947">.</span><span class="ident" id="2243948">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2243953">var</span>&nbsp;<span class="ident" id="2243957">i</span>&nbsp;<span class="keyword" id="2243959">interface</span><span class="op" id="2243968">{</span><span class="op" id="2243969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2243972">e</span>&nbsp;<span class="op" id="2243974">:=</span>&nbsp;<span class="op" id="2243977">(</span><span class="op" id="2243978">*</span><span class="ident" id="2243979">emptyInterface</span><span class="op" id="2243993">)</span><span class="op" id="2243994">(</span><span class="ident" id="2243995">unsafe</span><span class="op" id="2244001">.</span><span class="ident" id="2244002">Pointer</span><span class="op" id="2244009">(</span><span class="op" id="2244010">&amp;</span><span class="ident" id="2244011">i</span><span class="op" id="2244012">)</span><span class="op" id="2244013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244016">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244070">switch</span>&nbsp;<span class="op" id="2244077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244080">case</span>&nbsp;<span class="ident" id="2244085">ifaceIndir</span><span class="op" id="2244095">(</span><span class="ident" id="2244096">t</span><span class="op" id="2244097">)</span><span class="op" id="2244098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244102">if</span>&nbsp;<span class="ident" id="2244105">v</span><span class="op" id="2244106">.</span><span class="ident" id="2244107">flag</span><span class="op" id="2244111">&amp;</span><span class="ident" id="2244112">flagIndir</span>&nbsp;<span class="op" id="2244122">==</span>&nbsp;<span class="num" id="2244125">0</span>&nbsp;<span class="op" id="2244127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2244132">panic</span><span class="op" id="2244137">(</span><span class="string" id="2244138">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2244149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2244153">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244157">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244219">ptr</span>&nbsp;<span class="op" id="2244223">:=</span>&nbsp;<span class="ident" id="2244226">v</span><span class="op" id="2244227">.</span><span class="ident" id="2244228">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244234">if</span>&nbsp;<span class="ident" id="2244237">v</span><span class="op" id="2244238">.</span><span class="ident" id="2244239">flag</span><span class="op" id="2244243">&amp;</span><span class="ident" id="2244244">flagAddr</span>&nbsp;<span class="op" id="2244253">!=</span>&nbsp;<span class="num" id="2244256">0</span>&nbsp;<span class="op" id="2244258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244263">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244316">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244359">c</span>&nbsp;<span class="op" id="2244361">:=</span>&nbsp;<span class="ident" id="2244364">unsafe_New</span><span class="op" id="2244374">(</span><span class="ident" id="2244375">t</span><span class="op" id="2244376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244381">memmove</span><span class="op" id="2244388">(</span><span class="ident" id="2244389">c</span><span class="op" id="2244390">,</span>&nbsp;<span class="ident" id="2244392">ptr</span><span class="op" id="2244395">,</span>&nbsp;<span class="ident" id="2244397">t</span><span class="op" id="2244398">.</span><span class="ident" id="2244399">size</span><span class="op" id="2244403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244408">ptr</span>&nbsp;<span class="op" id="2244412">=</span>&nbsp;<span class="ident" id="2244414">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2244418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244422">e</span><span class="op" id="2244423">.</span><span class="ident" id="2244424">word</span>&nbsp;<span class="op" id="2244429">=</span>&nbsp;<span class="ident" id="2244431">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244436">case</span>&nbsp;<span class="ident" id="2244441">v</span><span class="op" id="2244442">.</span><span class="ident" id="2244443">flag</span><span class="op" id="2244447">&amp;</span><span class="ident" id="2244448">flagIndir</span>&nbsp;<span class="op" id="2244458">!=</span>&nbsp;<span class="num" id="2244461">0</span><span class="op" id="2244462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244466">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244524">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244585">e</span><span class="op" id="2244586">.</span><span class="ident" id="2244587">word</span>&nbsp;<span class="op" id="2244592">=</span>&nbsp;<span class="op" id="2244594">*</span><span class="op" id="2244595">(</span><span class="op" id="2244596">*</span><span class="ident" id="2244597">unsafe</span><span class="op" id="2244603">.</span><span class="ident" id="2244604">Pointer</span><span class="op" id="2244611">)</span><span class="op" id="2244612">(</span><span class="ident" id="2244613">v</span><span class="op" id="2244614">.</span><span class="ident" id="2244615">ptr</span><span class="op" id="2244618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244621">default</span><span class="op" id="2244628">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244632">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244679">e</span><span class="op" id="2244680">.</span><span class="ident" id="2244681">word</span>&nbsp;<span class="op" id="2244686">=</span>&nbsp;<span class="ident" id="2244688">v</span><span class="op" id="2244689">.</span><span class="ident" id="2244690">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2244695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244698">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244762">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244829">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2244898">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2244919">e</span><span class="op" id="2244920">.</span><span class="ident" id="2244921">typ</span>&nbsp;<span class="op" id="2244925">=</span>&nbsp;<span class="ident" id="2244927">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2244930">return</span>&nbsp;<span class="ident" id="2244937">i</span><br>
<span class="lineno"></span><span class="op" id="2244939">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2244942">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2245000">func</span>&nbsp;<span class="ident" id="2245005">unpackEface</span><span class="op" id="2245016">(</span><span class="ident" id="2245017">i</span>&nbsp;<span class="keyword" id="2245019">interface</span><span class="op" id="2245028">{</span><span class="op" id="2245029">}</span><span class="op" id="2245030">)</span>&nbsp;<span class="ident" id="2245032">Value</span>&nbsp;<span class="op" id="2245038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245041">e</span>&nbsp;<span class="op" id="2245043">:=</span>&nbsp;<span class="op" id="2245046">(</span><span class="op" id="2245047">*</span><span class="ident" id="2245048">emptyInterface</span><span class="op" id="2245062">)</span><span class="op" id="2245063">(</span><span class="ident" id="2245064">unsafe</span><span class="op" id="2245070">.</span><span class="ident" id="2245071">Pointer</span><span class="op" id="2245078">(</span><span class="op" id="2245079">&amp;</span><span class="ident" id="2245080">i</span><span class="op" id="2245081">)</span><span class="op" id="2245082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2245085">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245166">t</span>&nbsp;<span class="op" id="2245168">:=</span>&nbsp;<span class="ident" id="2245171">e</span><span class="op" id="2245172">.</span><span class="ident" id="2245173">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245178">if</span>&nbsp;<span class="ident" id="2245181">t</span>&nbsp;<span class="op" id="2245183">==</span>&nbsp;<span class="ident" id="2245186">nil</span>&nbsp;<span class="op" id="2245190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245194">return</span>&nbsp;<span class="ident" id="2245201">Value</span><span class="op" id="2245206">{</span><span class="op" id="2245207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2245210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245213">f</span>&nbsp;<span class="op" id="2245215">:=</span>&nbsp;<span class="ident" id="2245218">flag</span><span class="op" id="2245222">(</span><span class="ident" id="2245223">t</span><span class="op" id="2245224">.</span><span class="ident" id="2245225">Kind</span><span class="op" id="2245229">(</span><span class="op" id="2245230">)</span><span class="op" id="2245231">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245234">if</span>&nbsp;<span class="ident" id="2245237">ifaceIndir</span><span class="op" id="2245247">(</span><span class="ident" id="2245248">t</span><span class="op" id="2245249">)</span>&nbsp;<span class="op" id="2245251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245255">f</span>&nbsp;<span class="op" id="2245257">|=</span>&nbsp;<span class="ident" id="2245260">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2245271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245274">return</span>&nbsp;<span class="ident" id="2245281">Value</span><span class="op" id="2245286">{</span><span class="ident" id="2245287">t</span><span class="op" id="2245288">,</span>&nbsp;<span class="ident" id="2245290">unsafe</span><span class="op" id="2245296">.</span><span class="ident" id="2245297">Pointer</span><span class="op" id="2245304">(</span><span class="ident" id="2245305">e</span><span class="op" id="2245306">.</span><span class="ident" id="2245307">word</span><span class="op" id="2245311">)</span><span class="op" id="2245312">,</span>&nbsp;<span class="ident" id="2245314">f</span><span class="op" id="2245315">}</span><br>
<span class="lineno"></span><span class="op" id="2245317">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2245320">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2245377">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2245441">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2245479">type</span>&nbsp;<span class="ident" id="2245484">ValueError</span>&nbsp;<span class="keyword" id="2245495">struct</span>&nbsp;<span class="op" id="2245502">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245505">Method</span>&nbsp;<span class="builtintype" id="2245512">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245520">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2245527">Kind</span><br>
<span class="lineno"></span><span class="op" id="2245532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2245535">func</span>&nbsp;<span class="op" id="2245540">(</span><span class="ident" id="2245541">e</span>&nbsp;<span class="op" id="2245543">*</span><span class="ident" id="2245544">ValueError</span><span class="op" id="2245554">)</span>&nbsp;<span class="ident" id="2245556">Error</span><span class="op" id="2245561">(</span><span class="op" id="2245562">)</span>&nbsp;<span class="builtintype" id="2245564">string</span>&nbsp;<span class="op" id="2245571">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245574">if</span>&nbsp;<span class="ident" id="2245577">e</span><span class="op" id="2245578">.</span><span class="ident" id="2245579">Kind</span>&nbsp;<span class="op" id="2245584">==</span>&nbsp;<span class="num" id="2245587">0</span>&nbsp;<span class="op" id="2245589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245593">return</span>&nbsp;<span class="string" id="2245600">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2245620">+</span>&nbsp;<span class="ident" id="2245622">e</span><span class="op" id="2245623">.</span><span class="ident" id="2245624">Method</span>&nbsp;<span class="op" id="2245631">+</span>&nbsp;<span class="string" id="2245633">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2245651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245654">return</span>&nbsp;<span class="string" id="2245661">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2245681">+</span>&nbsp;<span class="ident" id="2245683">e</span><span class="op" id="2245684">.</span><span class="ident" id="2245685">Method</span>&nbsp;<span class="op" id="2245692">+</span>&nbsp;<span class="string" id="2245694">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2245701">+</span>&nbsp;<span class="ident" id="2245703">e</span><span class="op" id="2245704">.</span><span class="ident" id="2245705">Kind</span><span class="op" id="2245709">.</span><span class="ident" id="2245710">String</span><span class="op" id="2245716">(</span><span class="op" id="2245717">)</span>&nbsp;<span class="op" id="2245719">+</span>&nbsp;<span class="string" id="2245721">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2245730">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2245733">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2245787">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2245828">func</span>&nbsp;<span class="ident" id="2245833">methodName</span><span class="op" id="2245843">(</span><span class="op" id="2245844">)</span>&nbsp;<span class="builtintype" id="2245846">string</span>&nbsp;<span class="op" id="2245853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245856">pc</span><span class="op" id="2245858">,</span>&nbsp;<span class="ident" id="2245860">_</span><span class="op" id="2245861">,</span>&nbsp;<span class="ident" id="2245863">_</span><span class="op" id="2245864">,</span>&nbsp;<span class="ident" id="2245866">_</span>&nbsp;<span class="op" id="2245868">:=</span>&nbsp;<span class="ident" id="2245871">runtime</span><span class="op" id="2245878">.</span><span class="ident" id="2245879">Caller</span><span class="op" id="2245885">(</span><span class="num" id="2245886">2</span><span class="op" id="2245887">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2245890">f</span>&nbsp;<span class="op" id="2245892">:=</span>&nbsp;<span class="ident" id="2245895">runtime</span><span class="op" id="2245902">.</span><span class="ident" id="2245903">FuncForPC</span><span class="op" id="2245912">(</span><span class="ident" id="2245913">pc</span><span class="op" id="2245915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245918">if</span>&nbsp;<span class="ident" id="2245921">f</span>&nbsp;<span class="op" id="2245923">==</span>&nbsp;<span class="ident" id="2245926">nil</span>&nbsp;<span class="op" id="2245930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245934">return</span>&nbsp;<span class="string" id="2245941">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2245959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2245962">return</span>&nbsp;<span class="ident" id="2245969">f</span><span class="op" id="2245970">.</span><span class="ident" id="2245971">Name</span><span class="op" id="2245975">(</span><span class="op" id="2245976">)</span><br>
<span class="lineno">165</span><span class="op" id="2245978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2245981">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2246039">type</span>&nbsp;<span class="ident" id="2246044">emptyInterface</span>&nbsp;<span class="keyword" id="2246059">struct</span>&nbsp;<span class="op" id="2246066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246069">typ</span>&nbsp;&nbsp;<span class="op" id="2246074">*</span><span class="ident" id="2246075">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246082">word</span>&nbsp;<span class="ident" id="2246087">unsafe</span><span class="op" id="2246093">.</span><span class="ident" id="2246094">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2246102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2246105">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2246176">type</span>&nbsp;<span class="ident" id="2246181">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2246199">struct</span>&nbsp;<span class="op" id="2246206">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2246209">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246242">itab</span>&nbsp;<span class="op" id="2246247">*</span><span class="keyword" id="2246248">struct</span>&nbsp;<span class="op" id="2246255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246259">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2246266">*</span><span class="ident" id="2246267">rtype</span>&nbsp;<span class="comment" id="2246273">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246300">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2246307">*</span><span class="ident" id="2246308">rtype</span>&nbsp;<span class="comment" id="2246314">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246341">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2246348">unsafe</span><span class="op" id="2246354">.</span><span class="ident" id="2246355">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246365">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2246372">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246380">unused</span>&nbsp;<span class="builtintype" id="2246387">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246395">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2246402">[</span><span class="num" id="2246403">100000</span><span class="op" id="2246409">]</span><span class="ident" id="2246410">unsafe</span><span class="op" id="2246416">.</span><span class="ident" id="2246417">Pointer</span>&nbsp;<span class="comment" id="2246425">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2246442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2246445">word</span>&nbsp;<span class="ident" id="2246450">unsafe</span><span class="op" id="2246456">.</span><span class="ident" id="2246457">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2246465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2246468">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2246514">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2246566">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2246623">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2246681">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2246740">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2246783">func</span>&nbsp;<span class="op" id="2246788">(</span><span class="ident" id="2246789">f</span>&nbsp;<span class="ident" id="2246791">flag</span><span class="op" id="2246795">)</span>&nbsp;<span class="ident" id="2246797">mustBe</span><span class="op" id="2246803">(</span><span class="ident" id="2246804">expected</span>&nbsp;<span class="ident" id="2246813">Kind</span><span class="op" id="2246817">)</span>&nbsp;<span class="op" id="2246819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2246822">if</span>&nbsp;<span class="ident" id="2246825">f</span><span class="op" id="2246826">.</span><span class="ident" id="2246827">kind</span><span class="op" id="2246831">(</span><span class="op" id="2246832">)</span>&nbsp;<span class="op" id="2246834">!=</span>&nbsp;<span class="ident" id="2246837">expected</span>&nbsp;<span class="op" id="2246846">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2246850">panic</span><span class="op" id="2246855">(</span><span class="op" id="2246856">&amp;</span><span class="ident" id="2246857">ValueError</span><span class="op" id="2246867">{</span><span class="ident" id="2246868">methodName</span><span class="op" id="2246878">(</span><span class="op" id="2246879">)</span><span class="op" id="2246880">,</span>&nbsp;<span class="ident" id="2246882">f</span><span class="op" id="2246883">.</span><span class="ident" id="2246884">kind</span><span class="op" id="2246888">(</span><span class="op" id="2246889">)</span><span class="op" id="2246890">}</span><span class="op" id="2246891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2246894">}</span><br>
<span class="lineno"></span><span class="op" id="2246896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2246899">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2246971">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2246995">func</span>&nbsp;<span class="op" id="2247000">(</span><span class="ident" id="2247001">f</span>&nbsp;<span class="ident" id="2247003">flag</span><span class="op" id="2247007">)</span>&nbsp;<span class="ident" id="2247009">mustBeExported</span><span class="op" id="2247023">(</span><span class="op" id="2247024">)</span>&nbsp;<span class="op" id="2247026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2247029">if</span>&nbsp;<span class="ident" id="2247032">f</span>&nbsp;<span class="op" id="2247034">==</span>&nbsp;<span class="num" id="2247037">0</span>&nbsp;<span class="op" id="2247039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2247043">panic</span><span class="op" id="2247048">(</span><span class="op" id="2247049">&amp;</span><span class="ident" id="2247050">ValueError</span><span class="op" id="2247060">{</span><span class="ident" id="2247061">methodName</span><span class="op" id="2247071">(</span><span class="op" id="2247072">)</span><span class="op" id="2247073">,</span>&nbsp;<span class="num" id="2247075">0</span><span class="op" id="2247076">}</span><span class="op" id="2247077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2247080">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2247083">if</span>&nbsp;<span class="ident" id="2247086">f</span><span class="op" id="2247087">&amp;</span><span class="ident" id="2247088">flagRO</span>&nbsp;<span class="op" id="2247095">!=</span>&nbsp;<span class="num" id="2247098">0</span>&nbsp;<span class="op" id="2247100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2247104">panic</span><span class="op" id="2247109">(</span><span class="string" id="2247110">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2247122">+</span>&nbsp;<span class="ident" id="2247124">methodName</span><span class="op" id="2247134">(</span><span class="op" id="2247135">)</span>&nbsp;<span class="op" id="2247137">+</span>&nbsp;<span class="string" id="2247139">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2247185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2247188">}</span><br>
<span class="lineno"></span><span class="op" id="2247190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2247193">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2247267">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2247340">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2247369">func</span>&nbsp;<span class="op" id="2247374">(</span><span class="ident" id="2247375">f</span>&nbsp;<span class="ident" id="2247377">flag</span><span class="op" id="2247381">)</span>&nbsp;<span class="ident" id="2247383">mustBeAssignable</span><span class="op" id="2247399">(</span><span class="op" id="2247400">)</span>&nbsp;<span class="op" id="2247402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2247405">if</span>&nbsp;<span class="ident" id="2247408">f</span>&nbsp;<span class="op" id="2247410">==</span>&nbsp;<span class="num" id="2247413">0</span>&nbsp;<span class="op" id="2247415">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2247419">panic</span><span class="op" id="2247424">(</span><span class="op" id="2247425">&amp;</span><span class="ident" id="2247426">ValueError</span><span class="op" id="2247436">{</span><span class="ident" id="2247437">methodName</span><span class="op" id="2247447">(</span><span class="op" id="2247448">)</span><span class="op" id="2247449">,</span>&nbsp;<span class="ident" id="2247451">Invalid</span><span class="op" id="2247458">}</span><span class="op" id="2247459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2247462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2247465">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2247514">if</span>&nbsp;<span class="ident" id="2247517">f</span><span class="op" id="2247518">&amp;</span><span class="ident" id="2247519">flagRO</span>&nbsp;<span class="op" id="2247526">!=</span>&nbsp;<span class="num" id="2247529">0</span>&nbsp;<span class="op" id="2247531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2247535">panic</span><span class="op" id="2247540">(</span><span class="string" id="2247541">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2247553">+</span>&nbsp;<span class="ident" id="2247555">methodName</span><span class="op" id="2247565">(</span><span class="op" id="2247566">)</span>&nbsp;<span class="op" id="2247568">+</span>&nbsp;<span class="string" id="2247570">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2247616">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2247619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2247622">if</span>&nbsp;<span class="ident" id="2247625">f</span><span class="op" id="2247626">&amp;</span><span class="ident" id="2247627">flagAddr</span>&nbsp;<span class="op" id="2247636">==</span>&nbsp;<span class="num" id="2247639">0</span>&nbsp;<span class="op" id="2247641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2247645">panic</span><span class="op" id="2247650">(</span><span class="string" id="2247651">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2247663">+</span>&nbsp;<span class="ident" id="2247665">methodName</span><span class="op" id="2247675">(</span><span class="op" id="2247676">)</span>&nbsp;<span class="op" id="2247678">+</span>&nbsp;<span class="string" id="2247680">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2247708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2247711">}</span><br>
<span class="lineno"></span><span class="op" id="2247713">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2247716">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2247779">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2247820">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2247884">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2247946">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2247967">func</span>&nbsp;<span class="op" id="2247972">(</span><span class="ident" id="2247973">v</span>&nbsp;<span class="ident" id="2247975">Value</span><span class="op" id="2247980">)</span>&nbsp;<span class="ident" id="2247982">Addr</span><span class="op" id="2247986">(</span><span class="op" id="2247987">)</span>&nbsp;<span class="ident" id="2247989">Value</span>&nbsp;<span class="op" id="2247995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2247998">if</span>&nbsp;<span class="ident" id="2248001">v</span><span class="op" id="2248002">.</span><span class="ident" id="2248003">flag</span><span class="op" id="2248007">&amp;</span><span class="ident" id="2248008">flagAddr</span>&nbsp;<span class="op" id="2248017">==</span>&nbsp;<span class="num" id="2248020">0</span>&nbsp;<span class="op" id="2248022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2248026">panic</span><span class="op" id="2248031">(</span><span class="string" id="2248032">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2248075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2248078">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2248081">return</span>&nbsp;<span class="ident" id="2248088">Value</span><span class="op" id="2248093">{</span><span class="ident" id="2248094">v</span><span class="op" id="2248095">.</span><span class="ident" id="2248096">typ</span><span class="op" id="2248099">.</span><span class="ident" id="2248100">ptrTo</span><span class="op" id="2248105">(</span><span class="op" id="2248106">)</span><span class="op" id="2248107">,</span>&nbsp;<span class="ident" id="2248109">v</span><span class="op" id="2248110">.</span><span class="ident" id="2248111">ptr</span><span class="op" id="2248114">,</span>&nbsp;<span class="op" id="2248116">(</span><span class="ident" id="2248117">v</span><span class="op" id="2248118">.</span><span class="ident" id="2248119">flag</span>&nbsp;<span class="op" id="2248124">&amp;</span>&nbsp;<span class="ident" id="2248126">flagRO</span><span class="op" id="2248132">)</span>&nbsp;<span class="op" id="2248134">|</span>&nbsp;<span class="ident" id="2248136">flag</span><span class="op" id="2248140">(</span><span class="ident" id="2248141">Ptr</span><span class="op" id="2248144">)</span><span class="op" id="2248145">}</span><br>
<span class="lineno"></span><span class="op" id="2248147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2248150">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2248188">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2248226">func</span>&nbsp;<span class="op" id="2248231">(</span><span class="ident" id="2248232">v</span>&nbsp;<span class="ident" id="2248234">Value</span><span class="op" id="2248239">)</span>&nbsp;<span class="ident" id="2248241">Bool</span><span class="op" id="2248245">(</span><span class="op" id="2248246">)</span>&nbsp;<span class="builtintype" id="2248248">bool</span>&nbsp;<span class="op" id="2248253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2248256">v</span><span class="op" id="2248257">.</span><span class="ident" id="2248258">mustBe</span><span class="op" id="2248264">(</span><span class="ident" id="2248265">Bool</span><span class="op" id="2248269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2248272">return</span>&nbsp;<span class="op" id="2248279">*</span><span class="op" id="2248280">(</span><span class="op" id="2248281">*</span><span class="builtintype" id="2248282">bool</span><span class="op" id="2248286">)</span><span class="op" id="2248287">(</span><span class="ident" id="2248288">v</span><span class="op" id="2248289">.</span><span class="ident" id="2248290">ptr</span><span class="op" id="2248293">)</span><br>
<span class="lineno"></span><span class="op" id="2248295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2248298">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2248337">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2248399">func</span>&nbsp;<span class="op" id="2248404">(</span><span class="ident" id="2248405">v</span>&nbsp;<span class="ident" id="2248407">Value</span><span class="op" id="2248412">)</span>&nbsp;<span class="ident" id="2248414">Bytes</span><span class="op" id="2248419">(</span><span class="op" id="2248420">)</span>&nbsp;<span class="op" id="2248422">[</span><span class="op" id="2248423">]</span><span class="builtintype" id="2248424">byte</span>&nbsp;<span class="op" id="2248429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2248432">v</span><span class="op" id="2248433">.</span><span class="ident" id="2248434">mustBe</span><span class="op" id="2248440">(</span><span class="ident" id="2248441">Slice</span><span class="op" id="2248446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2248449">if</span>&nbsp;<span class="ident" id="2248452">v</span><span class="op" id="2248453">.</span><span class="ident" id="2248454">typ</span><span class="op" id="2248457">.</span><span class="ident" id="2248458">Elem</span><span class="op" id="2248462">(</span><span class="op" id="2248463">)</span><span class="op" id="2248464">.</span><span class="ident" id="2248465">Kind</span><span class="op" id="2248469">(</span><span class="op" id="2248470">)</span>&nbsp;<span class="op" id="2248472">!=</span>&nbsp;<span class="ident" id="2248475">Uint8</span>&nbsp;<span class="op" id="2248481">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2248485">panic</span><span class="op" id="2248490">(</span><span class="string" id="2248491">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2248530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2248533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2248536">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2248594">return</span>&nbsp;<span class="op" id="2248601">*</span><span class="op" id="2248602">(</span><span class="op" id="2248603">*</span><span class="op" id="2248604">[</span><span class="op" id="2248605">]</span><span class="builtintype" id="2248606">byte</span><span class="op" id="2248610">)</span><span class="op" id="2248611">(</span><span class="ident" id="2248612">v</span><span class="op" id="2248613">.</span><span class="ident" id="2248614">ptr</span><span class="op" id="2248617">)</span><br>
<span class="lineno"></span><span class="op" id="2248619">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2248622">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2248661">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2248732">func</span>&nbsp;<span class="op" id="2248737">(</span><span class="ident" id="2248738">v</span>&nbsp;<span class="ident" id="2248740">Value</span><span class="op" id="2248745">)</span>&nbsp;<span class="ident" id="2248747">runes</span><span class="op" id="2248752">(</span><span class="op" id="2248753">)</span>&nbsp;<span class="op" id="2248755">[</span><span class="op" id="2248756">]</span><span class="builtintype" id="2248757">rune</span>&nbsp;<span class="op" id="2248762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2248765">v</span><span class="op" id="2248766">.</span><span class="ident" id="2248767">mustBe</span><span class="op" id="2248773">(</span><span class="ident" id="2248774">Slice</span><span class="op" id="2248779">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2248782">if</span>&nbsp;<span class="ident" id="2248785">v</span><span class="op" id="2248786">.</span><span class="ident" id="2248787">typ</span><span class="op" id="2248790">.</span><span class="ident" id="2248791">Elem</span><span class="op" id="2248795">(</span><span class="op" id="2248796">)</span><span class="op" id="2248797">.</span><span class="ident" id="2248798">Kind</span><span class="op" id="2248802">(</span><span class="op" id="2248803">)</span>&nbsp;<span class="op" id="2248805">!=</span>&nbsp;<span class="ident" id="2248808">Int32</span>&nbsp;<span class="op" id="2248814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2248818">panic</span><span class="op" id="2248823">(</span><span class="string" id="2248824">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2248863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2248866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2248869">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2248927">return</span>&nbsp;<span class="op" id="2248934">*</span><span class="op" id="2248935">(</span><span class="op" id="2248936">*</span><span class="op" id="2248937">[</span><span class="op" id="2248938">]</span><span class="builtintype" id="2248939">rune</span><span class="op" id="2248943">)</span><span class="op" id="2248944">(</span><span class="ident" id="2248945">v</span><span class="op" id="2248946">.</span><span class="ident" id="2248947">ptr</span><span class="op" id="2248950">)</span><br>
<span class="lineno">265</span><span class="op" id="2248952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2248955">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2249029">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2249101">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2249163">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2249242">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2249296">func</span>&nbsp;<span class="op" id="2249301">(</span><span class="ident" id="2249302">v</span>&nbsp;<span class="ident" id="2249304">Value</span><span class="op" id="2249309">)</span>&nbsp;<span class="ident" id="2249311">CanAddr</span><span class="op" id="2249318">(</span><span class="op" id="2249319">)</span>&nbsp;<span class="builtintype" id="2249321">bool</span>&nbsp;<span class="op" id="2249326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2249329">return</span>&nbsp;<span class="ident" id="2249336">v</span><span class="op" id="2249337">.</span><span class="ident" id="2249338">flag</span><span class="op" id="2249342">&amp;</span><span class="ident" id="2249343">flagAddr</span>&nbsp;<span class="op" id="2249352">!=</span>&nbsp;<span class="num" id="2249355">0</span><br>
<span class="lineno"></span><span class="op" id="2249357">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2249360">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2249417">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2249481">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2249533">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2249594">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2249642">func</span>&nbsp;<span class="op" id="2249647">(</span><span class="ident" id="2249648">v</span>&nbsp;<span class="ident" id="2249650">Value</span><span class="op" id="2249655">)</span>&nbsp;<span class="ident" id="2249657">CanSet</span><span class="op" id="2249663">(</span><span class="op" id="2249664">)</span>&nbsp;<span class="builtintype" id="2249666">bool</span>&nbsp;<span class="op" id="2249671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2249674">return</span>&nbsp;<span class="ident" id="2249681">v</span><span class="op" id="2249682">.</span><span class="ident" id="2249683">flag</span><span class="op" id="2249687">&amp;</span><span class="op" id="2249688">(</span><span class="ident" id="2249689">flagAddr</span><span class="op" id="2249697">|</span><span class="ident" id="2249698">flagRO</span><span class="op" id="2249704">)</span>&nbsp;<span class="op" id="2249706">==</span>&nbsp;<span class="ident" id="2249709">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2249718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2249721">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2249779">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2249870">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2249910">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2249954">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2250013">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2250070">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2250144">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2250192">func</span>&nbsp;<span class="op" id="2250197">(</span><span class="ident" id="2250198">v</span>&nbsp;<span class="ident" id="2250200">Value</span><span class="op" id="2250205">)</span>&nbsp;<span class="ident" id="2250207">Call</span><span class="op" id="2250211">(</span><span class="ident" id="2250212">in</span>&nbsp;<span class="op" id="2250215">[</span><span class="op" id="2250216">]</span><span class="ident" id="2250217">Value</span><span class="op" id="2250222">)</span>&nbsp;<span class="op" id="2250224">[</span><span class="op" id="2250225">]</span><span class="ident" id="2250226">Value</span>&nbsp;<span class="op" id="2250232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2250235">v</span><span class="op" id="2250236">.</span><span class="ident" id="2250237">mustBe</span><span class="op" id="2250243">(</span><span class="ident" id="2250244">Func</span><span class="op" id="2250248">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2250251">v</span><span class="op" id="2250252">.</span><span class="ident" id="2250253">mustBeExported</span><span class="op" id="2250267">(</span><span class="op" id="2250268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2250271">return</span>&nbsp;<span class="ident" id="2250278">v</span><span class="op" id="2250279">.</span><span class="ident" id="2250280">call</span><span class="op" id="2250284">(</span><span class="string" id="2250285">&#34;Call&#34;</span><span class="op" id="2250291">,</span>&nbsp;<span class="ident" id="2250293">in</span><span class="op" id="2250295">)</span><br>
<span class="lineno"></span><span class="op" id="2250297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2250300">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2250372">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2250441">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2250535">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2250599">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2250643">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2250702">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2250759">func</span>&nbsp;<span class="op" id="2250764">(</span><span class="ident" id="2250765">v</span>&nbsp;<span class="ident" id="2250767">Value</span><span class="op" id="2250772">)</span>&nbsp;<span class="ident" id="2250774">CallSlice</span><span class="op" id="2250783">(</span><span class="ident" id="2250784">in</span>&nbsp;<span class="op" id="2250787">[</span><span class="op" id="2250788">]</span><span class="ident" id="2250789">Value</span><span class="op" id="2250794">)</span>&nbsp;<span class="op" id="2250796">[</span><span class="op" id="2250797">]</span><span class="ident" id="2250798">Value</span>&nbsp;<span class="op" id="2250804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2250807">v</span><span class="op" id="2250808">.</span><span class="ident" id="2250809">mustBe</span><span class="op" id="2250815">(</span><span class="ident" id="2250816">Func</span><span class="op" id="2250820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2250823">v</span><span class="op" id="2250824">.</span><span class="ident" id="2250825">mustBeExported</span><span class="op" id="2250839">(</span><span class="op" id="2250840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2250843">return</span>&nbsp;<span class="ident" id="2250850">v</span><span class="op" id="2250851">.</span><span class="ident" id="2250852">call</span><span class="op" id="2250856">(</span><span class="string" id="2250857">&#34;CallSlice&#34;</span><span class="op" id="2250868">,</span>&nbsp;<span class="ident" id="2250870">in</span><span class="op" id="2250872">)</span><br>
<span class="lineno">310</span><span class="op" id="2250874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2250877">var</span>&nbsp;<span class="ident" id="2250881">callGC</span>&nbsp;<span class="builtintype" id="2250888">bool</span>&nbsp;<span class="comment" id="2250893">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2250933">func</span>&nbsp;<span class="op" id="2250938">(</span><span class="ident" id="2250939">v</span>&nbsp;<span class="ident" id="2250941">Value</span><span class="op" id="2250946">)</span>&nbsp;<span class="ident" id="2250948">call</span><span class="op" id="2250952">(</span><span class="ident" id="2250953">op</span>&nbsp;<span class="builtintype" id="2250956">string</span><span class="op" id="2250962">,</span>&nbsp;<span class="ident" id="2250964">in</span>&nbsp;<span class="op" id="2250967">[</span><span class="op" id="2250968">]</span><span class="ident" id="2250969">Value</span><span class="op" id="2250974">)</span>&nbsp;<span class="op" id="2250976">[</span><span class="op" id="2250977">]</span><span class="ident" id="2250978">Value</span>&nbsp;<span class="op" id="2250984">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2250987">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251019">t</span>&nbsp;<span class="op" id="2251021">:=</span>&nbsp;<span class="ident" id="2251024">v</span><span class="op" id="2251025">.</span><span class="ident" id="2251026">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251031">var</span>&nbsp;<span class="op" id="2251035">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251039">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251048">unsafe</span><span class="op" id="2251054">.</span><span class="ident" id="2251055">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251065">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251074">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251082">rcvrtype</span>&nbsp;<span class="op" id="2251091">*</span><span class="ident" id="2251092">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251102">if</span>&nbsp;<span class="ident" id="2251105">v</span><span class="op" id="2251106">.</span><span class="ident" id="2251107">flag</span><span class="op" id="2251111">&amp;</span><span class="ident" id="2251112">flagMethod</span>&nbsp;<span class="op" id="2251123">!=</span>&nbsp;<span class="num" id="2251126">0</span>&nbsp;<span class="op" id="2251128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251132">rcvr</span>&nbsp;<span class="op" id="2251137">=</span>&nbsp;<span class="ident" id="2251139">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251143">rcvrtype</span><span class="op" id="2251151">,</span>&nbsp;<span class="ident" id="2251153">t</span><span class="op" id="2251154">,</span>&nbsp;<span class="ident" id="2251156">fn</span>&nbsp;<span class="op" id="2251159">=</span>&nbsp;<span class="ident" id="2251161">methodReceiver</span><span class="op" id="2251175">(</span><span class="ident" id="2251176">op</span><span class="op" id="2251178">,</span>&nbsp;<span class="ident" id="2251180">v</span><span class="op" id="2251181">,</span>&nbsp;<span class="builtintype" id="2251183">int</span><span class="op" id="2251186">(</span><span class="ident" id="2251187">v</span><span class="op" id="2251188">.</span><span class="ident" id="2251189">flag</span><span class="op" id="2251193">)</span><span class="op" id="2251194">&gt;&gt;</span><span class="ident" id="2251196">flagMethodShift</span><span class="op" id="2251211">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251214">}</span>&nbsp;<span class="keyword" id="2251216">else</span>&nbsp;<span class="keyword" id="2251221">if</span>&nbsp;<span class="ident" id="2251224">v</span><span class="op" id="2251225">.</span><span class="ident" id="2251226">flag</span><span class="op" id="2251230">&amp;</span><span class="ident" id="2251231">flagIndir</span>&nbsp;<span class="op" id="2251241">!=</span>&nbsp;<span class="num" id="2251244">0</span>&nbsp;<span class="op" id="2251246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251250">fn</span>&nbsp;<span class="op" id="2251253">=</span>&nbsp;<span class="op" id="2251255">*</span><span class="op" id="2251256">(</span><span class="op" id="2251257">*</span><span class="ident" id="2251258">unsafe</span><span class="op" id="2251264">.</span><span class="ident" id="2251265">Pointer</span><span class="op" id="2251272">)</span><span class="op" id="2251273">(</span><span class="ident" id="2251274">v</span><span class="op" id="2251275">.</span><span class="ident" id="2251276">ptr</span><span class="op" id="2251279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251282">}</span>&nbsp;<span class="keyword" id="2251284">else</span>&nbsp;<span class="op" id="2251289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251293">fn</span>&nbsp;<span class="op" id="2251296">=</span>&nbsp;<span class="ident" id="2251298">v</span><span class="op" id="2251299">.</span><span class="ident" id="2251300">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251305">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251309">if</span>&nbsp;<span class="ident" id="2251312">fn</span>&nbsp;<span class="op" id="2251315">==</span>&nbsp;<span class="ident" id="2251318">nil</span>&nbsp;<span class="op" id="2251322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251326">panic</span><span class="op" id="2251331">(</span><span class="string" id="2251332">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2251374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251381">isSlice</span>&nbsp;<span class="op" id="2251389">:=</span>&nbsp;<span class="ident" id="2251392">op</span>&nbsp;<span class="op" id="2251395">==</span>&nbsp;<span class="string" id="2251398">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251411">n</span>&nbsp;<span class="op" id="2251413">:=</span>&nbsp;<span class="ident" id="2251416">t</span><span class="op" id="2251417">.</span><span class="ident" id="2251418">NumIn</span><span class="op" id="2251423">(</span><span class="op" id="2251424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251427">if</span>&nbsp;<span class="ident" id="2251430">isSlice</span>&nbsp;<span class="op" id="2251438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251442">if</span>&nbsp;<span class="op" id="2251445">!</span><span class="ident" id="2251446">t</span><span class="op" id="2251447">.</span><span class="ident" id="2251448">IsVariadic</span><span class="op" id="2251458">(</span><span class="op" id="2251459">)</span>&nbsp;<span class="op" id="2251461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251466">panic</span><span class="op" id="2251471">(</span><span class="string" id="2251472">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2251517">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251525">if</span>&nbsp;<span class="builtinfunc" id="2251528">len</span><span class="op" id="2251531">(</span><span class="ident" id="2251532">in</span><span class="op" id="2251534">)</span>&nbsp;<span class="op" id="2251536">&lt;</span>&nbsp;<span class="ident" id="2251538">n</span>&nbsp;<span class="op" id="2251540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251545">panic</span><span class="op" id="2251550">(</span><span class="string" id="2251551">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2251600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251608">if</span>&nbsp;<span class="builtinfunc" id="2251611">len</span><span class="op" id="2251614">(</span><span class="ident" id="2251615">in</span><span class="op" id="2251617">)</span>&nbsp;<span class="op" id="2251619">&gt;</span>&nbsp;<span class="ident" id="2251621">n</span>&nbsp;<span class="op" id="2251623">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251628">panic</span><span class="op" id="2251633">(</span><span class="string" id="2251634">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2251684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251691">}</span>&nbsp;<span class="keyword" id="2251693">else</span>&nbsp;<span class="op" id="2251698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251702">if</span>&nbsp;<span class="ident" id="2251705">t</span><span class="op" id="2251706">.</span><span class="ident" id="2251707">IsVariadic</span><span class="op" id="2251717">(</span><span class="op" id="2251718">)</span>&nbsp;<span class="op" id="2251720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251725">n</span><span class="op" id="2251726">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251735">if</span>&nbsp;<span class="builtinfunc" id="2251738">len</span><span class="op" id="2251741">(</span><span class="ident" id="2251742">in</span><span class="op" id="2251744">)</span>&nbsp;<span class="op" id="2251746">&lt;</span>&nbsp;<span class="ident" id="2251748">n</span>&nbsp;<span class="op" id="2251750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251755">panic</span><span class="op" id="2251760">(</span><span class="string" id="2251761">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2251805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251813">if</span>&nbsp;<span class="op" id="2251816">!</span><span class="ident" id="2251817">t</span><span class="op" id="2251818">.</span><span class="ident" id="2251819">IsVariadic</span><span class="op" id="2251829">(</span><span class="op" id="2251830">)</span>&nbsp;<span class="op" id="2251832">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2251835">len</span><span class="op" id="2251838">(</span><span class="ident" id="2251839">in</span><span class="op" id="2251841">)</span>&nbsp;<span class="op" id="2251843">&gt;</span>&nbsp;<span class="ident" id="2251845">n</span>&nbsp;<span class="op" id="2251847">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251852">panic</span><span class="op" id="2251857">(</span><span class="string" id="2251858">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2251903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251913">for</span>&nbsp;<span class="ident" id="2251917">_</span><span class="op" id="2251918">,</span>&nbsp;<span class="ident" id="2251920">x</span>&nbsp;<span class="op" id="2251922">:=</span>&nbsp;<span class="keyword" id="2251925">range</span>&nbsp;<span class="ident" id="2251931">in</span>&nbsp;<span class="op" id="2251934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251938">if</span>&nbsp;<span class="ident" id="2251941">x</span><span class="op" id="2251942">.</span><span class="ident" id="2251943">Kind</span><span class="op" id="2251947">(</span><span class="op" id="2251948">)</span>&nbsp;<span class="op" id="2251950">==</span>&nbsp;<span class="ident" id="2251953">Invalid</span>&nbsp;<span class="op" id="2251961">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2251966">panic</span><span class="op" id="2251971">(</span><span class="string" id="2251972">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2251984">+</span>&nbsp;<span class="ident" id="2251986">op</span>&nbsp;<span class="op" id="2251989">+</span>&nbsp;<span class="string" id="2251991">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2252019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252029">for</span>&nbsp;<span class="ident" id="2252033">i</span>&nbsp;<span class="op" id="2252035">:=</span>&nbsp;<span class="num" id="2252038">0</span><span class="op" id="2252039">;</span>&nbsp;<span class="ident" id="2252041">i</span>&nbsp;<span class="op" id="2252043">&lt;</span>&nbsp;<span class="ident" id="2252045">n</span><span class="op" id="2252046">;</span>&nbsp;<span class="ident" id="2252048">i</span><span class="op" id="2252049">++</span>&nbsp;<span class="op" id="2252052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252056">if</span>&nbsp;<span class="ident" id="2252059">xt</span><span class="op" id="2252061">,</span>&nbsp;<span class="ident" id="2252063">targ</span>&nbsp;<span class="op" id="2252068">:=</span>&nbsp;<span class="ident" id="2252071">in</span><span class="op" id="2252073">[</span><span class="ident" id="2252074">i</span><span class="op" id="2252075">]</span><span class="op" id="2252076">.</span><span class="ident" id="2252077">Type</span><span class="op" id="2252081">(</span><span class="op" id="2252082">)</span><span class="op" id="2252083">,</span>&nbsp;<span class="ident" id="2252085">t</span><span class="op" id="2252086">.</span><span class="ident" id="2252087">In</span><span class="op" id="2252089">(</span><span class="ident" id="2252090">i</span><span class="op" id="2252091">)</span><span class="op" id="2252092">;</span>&nbsp;<span class="op" id="2252094">!</span><span class="ident" id="2252095">xt</span><span class="op" id="2252097">.</span><span class="ident" id="2252098">AssignableTo</span><span class="op" id="2252110">(</span><span class="ident" id="2252111">targ</span><span class="op" id="2252115">)</span>&nbsp;<span class="op" id="2252117">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2252122">panic</span><span class="op" id="2252127">(</span><span class="string" id="2252128">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2252140">+</span>&nbsp;<span class="ident" id="2252142">op</span>&nbsp;<span class="op" id="2252145">+</span>&nbsp;<span class="string" id="2252147">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2252157">+</span>&nbsp;<span class="ident" id="2252159">xt</span><span class="op" id="2252161">.</span><span class="ident" id="2252162">String</span><span class="op" id="2252168">(</span><span class="op" id="2252169">)</span>&nbsp;<span class="op" id="2252171">+</span>&nbsp;<span class="string" id="2252173">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2252185">+</span>&nbsp;<span class="ident" id="2252187">targ</span><span class="op" id="2252191">.</span><span class="ident" id="2252192">String</span><span class="op" id="2252198">(</span><span class="op" id="2252199">)</span><span class="op" id="2252200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252210">if</span>&nbsp;<span class="op" id="2252213">!</span><span class="ident" id="2252214">isSlice</span>&nbsp;<span class="op" id="2252222">&amp;&amp;</span>&nbsp;<span class="ident" id="2252225">t</span><span class="op" id="2252226">.</span><span class="ident" id="2252227">IsVariadic</span><span class="op" id="2252237">(</span><span class="op" id="2252238">)</span>&nbsp;<span class="op" id="2252240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2252244">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252284">m</span>&nbsp;<span class="op" id="2252286">:=</span>&nbsp;<span class="builtinfunc" id="2252289">len</span><span class="op" id="2252292">(</span><span class="ident" id="2252293">in</span><span class="op" id="2252295">)</span>&nbsp;<span class="op" id="2252297">-</span>&nbsp;<span class="ident" id="2252299">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252303">slice</span>&nbsp;<span class="op" id="2252309">:=</span>&nbsp;<span class="ident" id="2252312">MakeSlice</span><span class="op" id="2252321">(</span><span class="ident" id="2252322">t</span><span class="op" id="2252323">.</span><span class="ident" id="2252324">In</span><span class="op" id="2252326">(</span><span class="ident" id="2252327">n</span><span class="op" id="2252328">)</span><span class="op" id="2252329">,</span>&nbsp;<span class="ident" id="2252331">m</span><span class="op" id="2252332">,</span>&nbsp;<span class="ident" id="2252334">m</span><span class="op" id="2252335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252339">elem</span>&nbsp;<span class="op" id="2252344">:=</span>&nbsp;<span class="ident" id="2252347">t</span><span class="op" id="2252348">.</span><span class="ident" id="2252349">In</span><span class="op" id="2252351">(</span><span class="ident" id="2252352">n</span><span class="op" id="2252353">)</span><span class="op" id="2252354">.</span><span class="ident" id="2252355">Elem</span><span class="op" id="2252359">(</span><span class="op" id="2252360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252364">for</span>&nbsp;<span class="ident" id="2252368">i</span>&nbsp;<span class="op" id="2252370">:=</span>&nbsp;<span class="num" id="2252373">0</span><span class="op" id="2252374">;</span>&nbsp;<span class="ident" id="2252376">i</span>&nbsp;<span class="op" id="2252378">&lt;</span>&nbsp;<span class="ident" id="2252380">m</span><span class="op" id="2252381">;</span>&nbsp;<span class="ident" id="2252383">i</span><span class="op" id="2252384">++</span>&nbsp;<span class="op" id="2252387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252392">x</span>&nbsp;<span class="op" id="2252394">:=</span>&nbsp;<span class="ident" id="2252397">in</span><span class="op" id="2252399">[</span><span class="ident" id="2252400">n</span><span class="op" id="2252401">+</span><span class="ident" id="2252402">i</span><span class="op" id="2252403">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252408">if</span>&nbsp;<span class="ident" id="2252411">xt</span>&nbsp;<span class="op" id="2252414">:=</span>&nbsp;<span class="ident" id="2252417">x</span><span class="op" id="2252418">.</span><span class="ident" id="2252419">Type</span><span class="op" id="2252423">(</span><span class="op" id="2252424">)</span><span class="op" id="2252425">;</span>&nbsp;<span class="op" id="2252427">!</span><span class="ident" id="2252428">xt</span><span class="op" id="2252430">.</span><span class="ident" id="2252431">AssignableTo</span><span class="op" id="2252443">(</span><span class="ident" id="2252444">elem</span><span class="op" id="2252448">)</span>&nbsp;<span class="op" id="2252450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2252456">panic</span><span class="op" id="2252461">(</span><span class="string" id="2252462">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2252485">+</span>&nbsp;<span class="ident" id="2252487">xt</span><span class="op" id="2252489">.</span><span class="ident" id="2252490">String</span><span class="op" id="2252496">(</span><span class="op" id="2252497">)</span>&nbsp;<span class="op" id="2252499">+</span>&nbsp;<span class="string" id="2252501">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2252513">+</span>&nbsp;<span class="ident" id="2252515">elem</span><span class="op" id="2252519">.</span><span class="ident" id="2252520">String</span><span class="op" id="2252526">(</span><span class="op" id="2252527">)</span>&nbsp;<span class="op" id="2252529">+</span>&nbsp;<span class="string" id="2252531">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2252538">+</span>&nbsp;<span class="ident" id="2252540">op</span><span class="op" id="2252542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252552">slice</span><span class="op" id="2252557">.</span><span class="ident" id="2252558">Index</span><span class="op" id="2252563">(</span><span class="ident" id="2252564">i</span><span class="op" id="2252565">)</span><span class="op" id="2252566">.</span><span class="ident" id="2252567">Set</span><span class="op" id="2252570">(</span><span class="ident" id="2252571">x</span><span class="op" id="2252572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252576">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252580">origIn</span>&nbsp;<span class="op" id="2252587">:=</span>&nbsp;<span class="ident" id="2252590">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252595">in</span>&nbsp;<span class="op" id="2252598">=</span>&nbsp;<span class="builtinfunc" id="2252600">make</span><span class="op" id="2252604">(</span><span class="op" id="2252605">[</span><span class="op" id="2252606">]</span><span class="ident" id="2252607">Value</span><span class="op" id="2252612">,</span>&nbsp;<span class="ident" id="2252614">n</span><span class="op" id="2252615">+</span><span class="num" id="2252616">1</span><span class="op" id="2252617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2252621">copy</span><span class="op" id="2252625">(</span><span class="ident" id="2252626">in</span><span class="op" id="2252628">[</span><span class="op" id="2252629">:</span><span class="ident" id="2252630">n</span><span class="op" id="2252631">]</span><span class="op" id="2252632">,</span>&nbsp;<span class="ident" id="2252634">origIn</span><span class="op" id="2252640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252644">in</span><span class="op" id="2252646">[</span><span class="ident" id="2252647">n</span><span class="op" id="2252648">]</span>&nbsp;<span class="op" id="2252650">=</span>&nbsp;<span class="ident" id="2252652">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252659">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252663">nin</span>&nbsp;<span class="op" id="2252667">:=</span>&nbsp;<span class="builtinfunc" id="2252670">len</span><span class="op" id="2252673">(</span><span class="ident" id="2252674">in</span><span class="op" id="2252676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252679">if</span>&nbsp;<span class="ident" id="2252682">nin</span>&nbsp;<span class="op" id="2252686">!=</span>&nbsp;<span class="ident" id="2252689">t</span><span class="op" id="2252690">.</span><span class="ident" id="2252691">NumIn</span><span class="op" id="2252696">(</span><span class="op" id="2252697">)</span>&nbsp;<span class="op" id="2252699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2252703">panic</span><span class="op" id="2252708">(</span><span class="string" id="2252709">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2252751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252754">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252757">nout</span>&nbsp;<span class="op" id="2252762">:=</span>&nbsp;<span class="ident" id="2252765">t</span><span class="op" id="2252766">.</span><span class="ident" id="2252767">NumOut</span><span class="op" id="2252773">(</span><span class="op" id="2252774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2252778">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252839">frametype</span><span class="op" id="2252848">,</span>&nbsp;<span class="ident" id="2252850">_</span><span class="op" id="2252851">,</span>&nbsp;<span class="ident" id="2252853">retOffset</span><span class="op" id="2252862">,</span>&nbsp;<span class="ident" id="2252864">_</span>&nbsp;<span class="op" id="2252866">:=</span>&nbsp;<span class="ident" id="2252869">funcLayout</span><span class="op" id="2252879">(</span><span class="ident" id="2252880">t</span><span class="op" id="2252881">,</span>&nbsp;<span class="ident" id="2252883">rcvrtype</span><span class="op" id="2252891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252894">args</span>&nbsp;<span class="op" id="2252899">:=</span>&nbsp;<span class="ident" id="2252902">unsafe_New</span><span class="op" id="2252912">(</span><span class="ident" id="2252913">frametype</span><span class="op" id="2252922">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252925">off</span>&nbsp;<span class="op" id="2252929">:=</span>&nbsp;<span class="builtintype" id="2252932">uintptr</span><span class="op" id="2252939">(</span><span class="num" id="2252940">0</span><span class="op" id="2252941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2252945">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252972">if</span>&nbsp;<span class="ident" id="2252975">rcvrtype</span>&nbsp;<span class="op" id="2252984">!=</span>&nbsp;<span class="ident" id="2252987">nil</span>&nbsp;<span class="op" id="2252991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252995">storeRcvr</span><span class="op" id="2253004">(</span><span class="ident" id="2253005">rcvr</span><span class="op" id="2253009">,</span>&nbsp;<span class="ident" id="2253011">args</span><span class="op" id="2253015">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253019">off</span>&nbsp;<span class="op" id="2253023">=</span>&nbsp;<span class="ident" id="2253025">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253037">for</span>&nbsp;<span class="ident" id="2253041">i</span><span class="op" id="2253042">,</span>&nbsp;<span class="ident" id="2253044">v</span>&nbsp;<span class="op" id="2253046">:=</span>&nbsp;<span class="keyword" id="2253049">range</span>&nbsp;<span class="ident" id="2253055">in</span>&nbsp;<span class="op" id="2253058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253062">v</span><span class="op" id="2253063">.</span><span class="ident" id="2253064">mustBeExported</span><span class="op" id="2253078">(</span><span class="op" id="2253079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253083">targ</span>&nbsp;<span class="op" id="2253088">:=</span>&nbsp;<span class="ident" id="2253091">t</span><span class="op" id="2253092">.</span><span class="ident" id="2253093">In</span><span class="op" id="2253095">(</span><span class="ident" id="2253096">i</span><span class="op" id="2253097">)</span><span class="op" id="2253098">.</span><span class="op" id="2253099">(</span><span class="op" id="2253100">*</span><span class="ident" id="2253101">rtype</span><span class="op" id="2253106">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253110">a</span>&nbsp;<span class="op" id="2253112">:=</span>&nbsp;<span class="builtintype" id="2253115">uintptr</span><span class="op" id="2253122">(</span><span class="ident" id="2253123">targ</span><span class="op" id="2253127">.</span><span class="ident" id="2253128">align</span><span class="op" id="2253133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253137">off</span>&nbsp;<span class="op" id="2253141">=</span>&nbsp;<span class="op" id="2253143">(</span><span class="ident" id="2253144">off</span>&nbsp;<span class="op" id="2253148">+</span>&nbsp;<span class="ident" id="2253150">a</span>&nbsp;<span class="op" id="2253152">-</span>&nbsp;<span class="num" id="2253154">1</span><span class="op" id="2253155">)</span>&nbsp;<span class="op" id="2253157">&amp;^</span>&nbsp;<span class="op" id="2253160">(</span><span class="ident" id="2253161">a</span>&nbsp;<span class="op" id="2253163">-</span>&nbsp;<span class="num" id="2253165">1</span><span class="op" id="2253166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253170">n</span>&nbsp;<span class="op" id="2253172">:=</span>&nbsp;<span class="ident" id="2253175">targ</span><span class="op" id="2253179">.</span><span class="ident" id="2253180">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253187">addr</span>&nbsp;<span class="op" id="2253192">:=</span>&nbsp;<span class="ident" id="2253195">unsafe</span><span class="op" id="2253201">.</span><span class="ident" id="2253202">Pointer</span><span class="op" id="2253209">(</span><span class="builtintype" id="2253210">uintptr</span><span class="op" id="2253217">(</span><span class="ident" id="2253218">args</span><span class="op" id="2253222">)</span>&nbsp;<span class="op" id="2253224">+</span>&nbsp;<span class="ident" id="2253226">off</span><span class="op" id="2253229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253233">v</span>&nbsp;<span class="op" id="2253235">=</span>&nbsp;<span class="ident" id="2253237">v</span><span class="op" id="2253238">.</span><span class="ident" id="2253239">assignTo</span><span class="op" id="2253247">(</span><span class="string" id="2253248">&#34;reflect.Value.Call&#34;</span><span class="op" id="2253268">,</span>&nbsp;<span class="ident" id="2253270">targ</span><span class="op" id="2253274">,</span>&nbsp;<span class="ident" id="2253276">addr</span><span class="op" id="2253280">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253284">if</span>&nbsp;<span class="ident" id="2253287">v</span><span class="op" id="2253288">.</span><span class="ident" id="2253289">flag</span><span class="op" id="2253293">&amp;</span><span class="ident" id="2253294">flagIndir</span>&nbsp;<span class="op" id="2253304">!=</span>&nbsp;<span class="num" id="2253307">0</span>&nbsp;<span class="op" id="2253309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253314">memmove</span><span class="op" id="2253321">(</span><span class="ident" id="2253322">addr</span><span class="op" id="2253326">,</span>&nbsp;<span class="ident" id="2253328">v</span><span class="op" id="2253329">.</span><span class="ident" id="2253330">ptr</span><span class="op" id="2253333">,</span>&nbsp;<span class="ident" id="2253335">n</span><span class="op" id="2253336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253340">}</span>&nbsp;<span class="keyword" id="2253342">else</span>&nbsp;<span class="op" id="2253347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253352">*</span><span class="op" id="2253353">(</span><span class="op" id="2253354">*</span><span class="ident" id="2253355">unsafe</span><span class="op" id="2253361">.</span><span class="ident" id="2253362">Pointer</span><span class="op" id="2253369">)</span><span class="op" id="2253370">(</span><span class="ident" id="2253371">addr</span><span class="op" id="2253375">)</span>&nbsp;<span class="op" id="2253377">=</span>&nbsp;<span class="ident" id="2253379">v</span><span class="op" id="2253380">.</span><span class="ident" id="2253381">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253387">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253391">off</span>&nbsp;<span class="op" id="2253395">+=</span>&nbsp;<span class="ident" id="2253398">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253405">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253415">call</span><span class="op" id="2253419">(</span><span class="ident" id="2253420">fn</span><span class="op" id="2253422">,</span>&nbsp;<span class="ident" id="2253424">args</span><span class="op" id="2253428">,</span>&nbsp;<span class="builtintype" id="2253430">uint32</span><span class="op" id="2253436">(</span><span class="ident" id="2253437">frametype</span><span class="op" id="2253446">.</span><span class="ident" id="2253447">size</span><span class="op" id="2253451">)</span><span class="op" id="2253452">,</span>&nbsp;<span class="builtintype" id="2253454">uint32</span><span class="op" id="2253460">(</span><span class="ident" id="2253461">retOffset</span><span class="op" id="2253470">)</span><span class="op" id="2253471">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253475">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253516">if</span>&nbsp;<span class="ident" id="2253519">callGC</span>&nbsp;<span class="op" id="2253526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253530">runtime</span><span class="op" id="2253537">.</span><span class="ident" id="2253538">GC</span><span class="op" id="2253540">(</span><span class="op" id="2253541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253544">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253548">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253584">ret</span>&nbsp;<span class="op" id="2253588">:=</span>&nbsp;<span class="builtinfunc" id="2253591">make</span><span class="op" id="2253595">(</span><span class="op" id="2253596">[</span><span class="op" id="2253597">]</span><span class="ident" id="2253598">Value</span><span class="op" id="2253603">,</span>&nbsp;<span class="ident" id="2253605">nout</span><span class="op" id="2253609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253612">off</span>&nbsp;<span class="op" id="2253616">=</span>&nbsp;<span class="ident" id="2253618">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253629">for</span>&nbsp;<span class="ident" id="2253633">i</span>&nbsp;<span class="op" id="2253635">:=</span>&nbsp;<span class="num" id="2253638">0</span><span class="op" id="2253639">;</span>&nbsp;<span class="ident" id="2253641">i</span>&nbsp;<span class="op" id="2253643">&lt;</span>&nbsp;<span class="ident" id="2253645">nout</span><span class="op" id="2253649">;</span>&nbsp;<span class="ident" id="2253651">i</span><span class="op" id="2253652">++</span>&nbsp;<span class="op" id="2253655">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253659">tv</span>&nbsp;<span class="op" id="2253662">:=</span>&nbsp;<span class="ident" id="2253665">t</span><span class="op" id="2253666">.</span><span class="ident" id="2253667">Out</span><span class="op" id="2253670">(</span><span class="ident" id="2253671">i</span><span class="op" id="2253672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253676">a</span>&nbsp;<span class="op" id="2253678">:=</span>&nbsp;<span class="builtintype" id="2253681">uintptr</span><span class="op" id="2253688">(</span><span class="ident" id="2253689">tv</span><span class="op" id="2253691">.</span><span class="ident" id="2253692">Align</span><span class="op" id="2253697">(</span><span class="op" id="2253698">)</span><span class="op" id="2253699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253703">off</span>&nbsp;<span class="op" id="2253707">=</span>&nbsp;<span class="op" id="2253709">(</span><span class="ident" id="2253710">off</span>&nbsp;<span class="op" id="2253714">+</span>&nbsp;<span class="ident" id="2253716">a</span>&nbsp;<span class="op" id="2253718">-</span>&nbsp;<span class="num" id="2253720">1</span><span class="op" id="2253721">)</span>&nbsp;<span class="op" id="2253723">&amp;^</span>&nbsp;<span class="op" id="2253726">(</span><span class="ident" id="2253727">a</span>&nbsp;<span class="op" id="2253729">-</span>&nbsp;<span class="num" id="2253731">1</span><span class="op" id="2253732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253736">fl</span>&nbsp;<span class="op" id="2253739">:=</span>&nbsp;<span class="ident" id="2253742">flagIndir</span>&nbsp;<span class="op" id="2253752">|</span>&nbsp;<span class="ident" id="2253754">flag</span><span class="op" id="2253758">(</span><span class="ident" id="2253759">tv</span><span class="op" id="2253761">.</span><span class="ident" id="2253762">Kind</span><span class="op" id="2253766">(</span><span class="op" id="2253767">)</span><span class="op" id="2253768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253772">ret</span><span class="op" id="2253775">[</span><span class="ident" id="2253776">i</span><span class="op" id="2253777">]</span>&nbsp;<span class="op" id="2253779">=</span>&nbsp;<span class="ident" id="2253781">Value</span><span class="op" id="2253786">{</span><span class="ident" id="2253787">tv</span><span class="op" id="2253789">.</span><span class="ident" id="2253790">common</span><span class="op" id="2253796">(</span><span class="op" id="2253797">)</span><span class="op" id="2253798">,</span>&nbsp;<span class="ident" id="2253800">unsafe</span><span class="op" id="2253806">.</span><span class="ident" id="2253807">Pointer</span><span class="op" id="2253814">(</span><span class="builtintype" id="2253815">uintptr</span><span class="op" id="2253822">(</span><span class="ident" id="2253823">args</span><span class="op" id="2253827">)</span>&nbsp;<span class="op" id="2253829">+</span>&nbsp;<span class="ident" id="2253831">off</span><span class="op" id="2253834">)</span><span class="op" id="2253835">,</span>&nbsp;<span class="ident" id="2253837">fl</span><span class="op" id="2253839">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253843">off</span>&nbsp;<span class="op" id="2253847">+=</span>&nbsp;<span class="ident" id="2253850">tv</span><span class="op" id="2253852">.</span><span class="ident" id="2253853">Size</span><span class="op" id="2253857">(</span><span class="op" id="2253858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253865">return</span>&nbsp;<span class="ident" id="2253872">ret</span><br>
<span class="lineno"></span><span class="op" id="2253876">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2253879">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2253940">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2254004">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2254078">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2254145">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2254215">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2254250">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2254321">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2254388">//</span><br>
<span class="lineno">450</span><span class="comment" id="2254391">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2254467">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2254539">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2254611">func</span>&nbsp;<span class="ident" id="2254616">callReflect</span><span class="op" id="2254627">(</span><span class="ident" id="2254628">ctxt</span>&nbsp;<span class="op" id="2254633">*</span><span class="ident" id="2254634">makeFuncImpl</span><span class="op" id="2254646">,</span>&nbsp;<span class="ident" id="2254648">frame</span>&nbsp;<span class="ident" id="2254654">unsafe</span><span class="op" id="2254660">.</span><span class="ident" id="2254661">Pointer</span><span class="op" id="2254668">)</span>&nbsp;<span class="op" id="2254670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254673">ftyp</span>&nbsp;<span class="op" id="2254678">:=</span>&nbsp;<span class="ident" id="2254681">ctxt</span><span class="op" id="2254685">.</span><span class="ident" id="2254686">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254691">f</span>&nbsp;<span class="op" id="2254693">:=</span>&nbsp;<span class="ident" id="2254696">ctxt</span><span class="op" id="2254700">.</span><span class="ident" id="2254701">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254706">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254743">ptr</span>&nbsp;<span class="op" id="2254747">:=</span>&nbsp;<span class="ident" id="2254750">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254757">off</span>&nbsp;<span class="op" id="2254761">:=</span>&nbsp;<span class="builtintype" id="2254764">uintptr</span><span class="op" id="2254771">(</span><span class="num" id="2254772">0</span><span class="op" id="2254773">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254776">in</span>&nbsp;<span class="op" id="2254779">:=</span>&nbsp;<span class="builtinfunc" id="2254782">make</span><span class="op" id="2254786">(</span><span class="op" id="2254787">[</span><span class="op" id="2254788">]</span><span class="ident" id="2254789">Value</span><span class="op" id="2254794">,</span>&nbsp;<span class="num" id="2254796">0</span><span class="op" id="2254797">,</span>&nbsp;<span class="builtinfunc" id="2254799">len</span><span class="op" id="2254802">(</span><span class="ident" id="2254803">ftyp</span><span class="op" id="2254807">.</span><span class="ident" id="2254808">in</span><span class="op" id="2254810">)</span><span class="op" id="2254811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2254814">for</span>&nbsp;<span class="ident" id="2254818">_</span><span class="op" id="2254819">,</span>&nbsp;<span class="ident" id="2254821">arg</span>&nbsp;<span class="op" id="2254825">:=</span>&nbsp;<span class="keyword" id="2254828">range</span>&nbsp;<span class="ident" id="2254834">ftyp</span><span class="op" id="2254838">.</span><span class="ident" id="2254839">in</span>&nbsp;<span class="op" id="2254842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254846">typ</span>&nbsp;<span class="op" id="2254850">:=</span>&nbsp;<span class="ident" id="2254853">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254859">off</span>&nbsp;<span class="op" id="2254863">+=</span>&nbsp;<span class="op" id="2254866">-</span><span class="ident" id="2254867">off</span>&nbsp;<span class="op" id="2254871">&amp;</span>&nbsp;<span class="builtintype" id="2254873">uintptr</span><span class="op" id="2254880">(</span><span class="ident" id="2254881">typ</span><span class="op" id="2254884">.</span><span class="ident" id="2254885">align</span><span class="op" id="2254890">-</span><span class="num" id="2254891">1</span><span class="op" id="2254892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254896">addr</span>&nbsp;<span class="op" id="2254901">:=</span>&nbsp;<span class="ident" id="2254904">unsafe</span><span class="op" id="2254910">.</span><span class="ident" id="2254911">Pointer</span><span class="op" id="2254918">(</span><span class="builtintype" id="2254919">uintptr</span><span class="op" id="2254926">(</span><span class="ident" id="2254927">ptr</span><span class="op" id="2254930">)</span>&nbsp;<span class="op" id="2254932">+</span>&nbsp;<span class="ident" id="2254934">off</span><span class="op" id="2254937">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254941">v</span>&nbsp;<span class="op" id="2254943">:=</span>&nbsp;<span class="ident" id="2254946">Value</span><span class="op" id="2254951">{</span><span class="ident" id="2254952">typ</span><span class="op" id="2254955">,</span>&nbsp;<span class="ident" id="2254957">nil</span><span class="op" id="2254960">,</span>&nbsp;<span class="ident" id="2254962">flag</span><span class="op" id="2254966">(</span><span class="ident" id="2254967">typ</span><span class="op" id="2254970">.</span><span class="ident" id="2254971">Kind</span><span class="op" id="2254975">(</span><span class="op" id="2254976">)</span><span class="op" id="2254977">)</span><span class="op" id="2254978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2254982">if</span>&nbsp;<span class="ident" id="2254985">ifaceIndir</span><span class="op" id="2254995">(</span><span class="ident" id="2254996">typ</span><span class="op" id="2254999">)</span>&nbsp;<span class="op" id="2255001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255006">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255055">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255119">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255181">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255248">v</span><span class="op" id="2255249">.</span><span class="ident" id="2255250">ptr</span>&nbsp;<span class="op" id="2255254">=</span>&nbsp;<span class="ident" id="2255256">unsafe_New</span><span class="op" id="2255266">(</span><span class="ident" id="2255267">typ</span><span class="op" id="2255270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255275">memmove</span><span class="op" id="2255282">(</span><span class="ident" id="2255283">v</span><span class="op" id="2255284">.</span><span class="ident" id="2255285">ptr</span><span class="op" id="2255288">,</span>&nbsp;<span class="ident" id="2255290">addr</span><span class="op" id="2255294">,</span>&nbsp;<span class="ident" id="2255296">typ</span><span class="op" id="2255299">.</span><span class="ident" id="2255300">size</span><span class="op" id="2255304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255309">v</span><span class="op" id="2255310">.</span><span class="ident" id="2255311">flag</span>&nbsp;<span class="op" id="2255316">|=</span>&nbsp;<span class="ident" id="2255319">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255331">}</span>&nbsp;<span class="keyword" id="2255333">else</span>&nbsp;<span class="op" id="2255338">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255343">v</span><span class="op" id="2255344">.</span><span class="ident" id="2255345">ptr</span>&nbsp;<span class="op" id="2255349">=</span>&nbsp;<span class="op" id="2255351">*</span><span class="op" id="2255352">(</span><span class="op" id="2255353">*</span><span class="ident" id="2255354">unsafe</span><span class="op" id="2255360">.</span><span class="ident" id="2255361">Pointer</span><span class="op" id="2255368">)</span><span class="op" id="2255369">(</span><span class="ident" id="2255370">addr</span><span class="op" id="2255374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255382">in</span>&nbsp;<span class="op" id="2255385">=</span>&nbsp;<span class="builtinfunc" id="2255387">append</span><span class="op" id="2255393">(</span><span class="ident" id="2255394">in</span><span class="op" id="2255396">,</span>&nbsp;<span class="ident" id="2255398">v</span><span class="op" id="2255399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255403">off</span>&nbsp;<span class="op" id="2255407">+=</span>&nbsp;<span class="ident" id="2255410">typ</span><span class="op" id="2255413">.</span><span class="ident" id="2255414">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255420">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255424">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255454">out</span>&nbsp;<span class="op" id="2255458">:=</span>&nbsp;<span class="ident" id="2255461">f</span><span class="op" id="2255462">(</span><span class="ident" id="2255463">in</span><span class="op" id="2255465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255468">if</span>&nbsp;<span class="builtinfunc" id="2255471">len</span><span class="op" id="2255474">(</span><span class="ident" id="2255475">out</span><span class="op" id="2255478">)</span>&nbsp;<span class="op" id="2255480">!=</span>&nbsp;<span class="builtinfunc" id="2255483">len</span><span class="op" id="2255486">(</span><span class="ident" id="2255487">ftyp</span><span class="op" id="2255491">.</span><span class="ident" id="2255492">out</span><span class="op" id="2255495">)</span>&nbsp;<span class="op" id="2255497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2255501">panic</span><span class="op" id="2255506">(</span><span class="string" id="2255507">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2255570">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255577">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255620">if</span>&nbsp;<span class="builtinfunc" id="2255623">len</span><span class="op" id="2255626">(</span><span class="ident" id="2255627">ftyp</span><span class="op" id="2255631">.</span><span class="ident" id="2255632">out</span><span class="op" id="2255635">)</span>&nbsp;<span class="op" id="2255637">&gt;</span>&nbsp;<span class="num" id="2255639">0</span>&nbsp;<span class="op" id="2255641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255645">off</span>&nbsp;<span class="op" id="2255649">+=</span>&nbsp;<span class="op" id="2255652">-</span><span class="ident" id="2255653">off</span>&nbsp;<span class="op" id="2255657">&amp;</span>&nbsp;<span class="op" id="2255659">(</span><span class="ident" id="2255660">ptrSize</span>&nbsp;<span class="op" id="2255668">-</span>&nbsp;<span class="num" id="2255670">1</span><span class="op" id="2255671">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255675">if</span>&nbsp;<span class="ident" id="2255678">runtime</span><span class="op" id="2255685">.</span><span class="ident" id="2255686">GOARCH</span>&nbsp;<span class="op" id="2255693">==</span>&nbsp;<span class="string" id="2255696">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2255707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255712">off</span>&nbsp;<span class="op" id="2255716">=</span>&nbsp;<span class="ident" id="2255718">align</span><span class="op" id="2255723">(</span><span class="ident" id="2255724">off</span><span class="op" id="2255727">,</span>&nbsp;<span class="num" id="2255729">8</span><span class="op" id="2255730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255738">for</span>&nbsp;<span class="ident" id="2255742">i</span><span class="op" id="2255743">,</span>&nbsp;<span class="ident" id="2255745">arg</span>&nbsp;<span class="op" id="2255749">:=</span>&nbsp;<span class="keyword" id="2255752">range</span>&nbsp;<span class="ident" id="2255758">ftyp</span><span class="op" id="2255762">.</span><span class="ident" id="2255763">out</span>&nbsp;<span class="op" id="2255767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255772">typ</span>&nbsp;<span class="op" id="2255776">:=</span>&nbsp;<span class="ident" id="2255779">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255786">v</span>&nbsp;<span class="op" id="2255788">:=</span>&nbsp;<span class="ident" id="2255791">out</span><span class="op" id="2255794">[</span><span class="ident" id="2255795">i</span><span class="op" id="2255796">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255801">if</span>&nbsp;<span class="ident" id="2255804">v</span><span class="op" id="2255805">.</span><span class="ident" id="2255806">typ</span>&nbsp;<span class="op" id="2255810">!=</span>&nbsp;<span class="ident" id="2255813">typ</span>&nbsp;<span class="op" id="2255817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2255823">panic</span><span class="op" id="2255828">(</span><span class="string" id="2255829">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2255876">+</span>&nbsp;<span class="ident" id="2255878">funcName</span><span class="op" id="2255886">(</span><span class="ident" id="2255887">f</span><span class="op" id="2255888">)</span>&nbsp;<span class="op" id="2255890">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2255897">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2255927">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2255934">out</span><span class="op" id="2255937">[</span><span class="ident" id="2255938">i</span><span class="op" id="2255939">]</span><span class="op" id="2255940">.</span><span class="ident" id="2255941">typ</span><span class="op" id="2255944">.</span><span class="ident" id="2255945">String</span><span class="op" id="2255951">(</span><span class="op" id="2255952">)</span>&nbsp;<span class="op" id="2255954">+</span>&nbsp;<span class="string" id="2255956">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2255964">+</span>&nbsp;<span class="ident" id="2255966">typ</span><span class="op" id="2255969">.</span><span class="ident" id="2255970">String</span><span class="op" id="2255976">(</span><span class="op" id="2255977">)</span><span class="op" id="2255978">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255988">if</span>&nbsp;<span class="ident" id="2255991">v</span><span class="op" id="2255992">.</span><span class="ident" id="2255993">flag</span><span class="op" id="2255997">&amp;</span><span class="ident" id="2255998">flagRO</span>&nbsp;<span class="op" id="2256005">!=</span>&nbsp;<span class="num" id="2256008">0</span>&nbsp;<span class="op" id="2256010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2256016">panic</span><span class="op" id="2256021">(</span><span class="string" id="2256022">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2256069">+</span>&nbsp;<span class="ident" id="2256071">funcName</span><span class="op" id="2256079">(</span><span class="ident" id="2256080">f</span><span class="op" id="2256081">)</span>&nbsp;<span class="op" id="2256083">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2256090">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2256138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256143">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256148">off</span>&nbsp;<span class="op" id="2256152">+=</span>&nbsp;<span class="op" id="2256155">-</span><span class="ident" id="2256156">off</span>&nbsp;<span class="op" id="2256160">&amp;</span>&nbsp;<span class="builtintype" id="2256162">uintptr</span><span class="op" id="2256169">(</span><span class="ident" id="2256170">typ</span><span class="op" id="2256173">.</span><span class="ident" id="2256174">align</span><span class="op" id="2256179">-</span><span class="num" id="2256180">1</span><span class="op" id="2256181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256186">addr</span>&nbsp;<span class="op" id="2256191">:=</span>&nbsp;<span class="ident" id="2256194">unsafe</span><span class="op" id="2256200">.</span><span class="ident" id="2256201">Pointer</span><span class="op" id="2256208">(</span><span class="builtintype" id="2256209">uintptr</span><span class="op" id="2256216">(</span><span class="ident" id="2256217">ptr</span><span class="op" id="2256220">)</span>&nbsp;<span class="op" id="2256222">+</span>&nbsp;<span class="ident" id="2256224">off</span><span class="op" id="2256227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256232">if</span>&nbsp;<span class="ident" id="2256235">v</span><span class="op" id="2256236">.</span><span class="ident" id="2256237">flag</span><span class="op" id="2256241">&amp;</span><span class="ident" id="2256242">flagIndir</span>&nbsp;<span class="op" id="2256252">!=</span>&nbsp;<span class="num" id="2256255">0</span>&nbsp;<span class="op" id="2256257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256263">memmove</span><span class="op" id="2256270">(</span><span class="ident" id="2256271">addr</span><span class="op" id="2256275">,</span>&nbsp;<span class="ident" id="2256277">v</span><span class="op" id="2256278">.</span><span class="ident" id="2256279">ptr</span><span class="op" id="2256282">,</span>&nbsp;<span class="ident" id="2256284">typ</span><span class="op" id="2256287">.</span><span class="ident" id="2256288">size</span><span class="op" id="2256292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256297">}</span>&nbsp;<span class="keyword" id="2256299">else</span>&nbsp;<span class="op" id="2256304">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256310">*</span><span class="op" id="2256311">(</span><span class="op" id="2256312">*</span><span class="ident" id="2256313">unsafe</span><span class="op" id="2256319">.</span><span class="ident" id="2256320">Pointer</span><span class="op" id="2256327">)</span><span class="op" id="2256328">(</span><span class="ident" id="2256329">addr</span><span class="op" id="2256333">)</span>&nbsp;<span class="op" id="2256335">=</span>&nbsp;<span class="ident" id="2256337">v</span><span class="op" id="2256338">.</span><span class="ident" id="2256339">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256351">off</span>&nbsp;<span class="op" id="2256355">+=</span>&nbsp;<span class="ident" id="2256358">typ</span><span class="op" id="2256361">.</span><span class="ident" id="2256362">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256372">}</span><br>
<span class="lineno">515</span><span class="op" id="2256374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2256377">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2256434">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2256489">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2256548">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2256564">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2256634">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2256712">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2256768">func</span>&nbsp;<span class="ident" id="2256773">methodReceiver</span><span class="op" id="2256787">(</span><span class="ident" id="2256788">op</span>&nbsp;<span class="builtintype" id="2256791">string</span><span class="op" id="2256797">,</span>&nbsp;<span class="ident" id="2256799">v</span>&nbsp;<span class="ident" id="2256801">Value</span><span class="op" id="2256806">,</span>&nbsp;<span class="ident" id="2256808">methodIndex</span>&nbsp;<span class="builtintype" id="2256820">int</span><span class="op" id="2256823">)</span>&nbsp;<span class="op" id="2256825">(</span><span class="ident" id="2256826">rcvrtype</span><span class="op" id="2256834">,</span>&nbsp;<span class="ident" id="2256836">t</span>&nbsp;<span class="op" id="2256838">*</span><span class="ident" id="2256839">rtype</span><span class="op" id="2256844">,</span>&nbsp;<span class="ident" id="2256846">fn</span>&nbsp;<span class="ident" id="2256849">unsafe</span><span class="op" id="2256855">.</span><span class="ident" id="2256856">Pointer</span><span class="op" id="2256863">)</span>&nbsp;<span class="op" id="2256865">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256868">i</span>&nbsp;<span class="op" id="2256870">:=</span>&nbsp;<span class="ident" id="2256873">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256886">if</span>&nbsp;<span class="ident" id="2256889">v</span><span class="op" id="2256890">.</span><span class="ident" id="2256891">typ</span><span class="op" id="2256894">.</span><span class="ident" id="2256895">Kind</span><span class="op" id="2256899">(</span><span class="op" id="2256900">)</span>&nbsp;<span class="op" id="2256902">==</span>&nbsp;<span class="ident" id="2256905">Interface</span>&nbsp;<span class="op" id="2256915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256919">tt</span>&nbsp;<span class="op" id="2256922">:=</span>&nbsp;<span class="op" id="2256925">(</span><span class="op" id="2256926">*</span><span class="ident" id="2256927">interfaceType</span><span class="op" id="2256940">)</span><span class="op" id="2256941">(</span><span class="ident" id="2256942">unsafe</span><span class="op" id="2256948">.</span><span class="ident" id="2256949">Pointer</span><span class="op" id="2256956">(</span><span class="ident" id="2256957">v</span><span class="op" id="2256958">.</span><span class="ident" id="2256959">typ</span><span class="op" id="2256962">)</span><span class="op" id="2256963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256967">if</span>&nbsp;<span class="builtintype" id="2256970">uint</span><span class="op" id="2256974">(</span><span class="ident" id="2256975">i</span><span class="op" id="2256976">)</span>&nbsp;<span class="op" id="2256978">&gt;=</span>&nbsp;<span class="builtintype" id="2256981">uint</span><span class="op" id="2256985">(</span><span class="builtinfunc" id="2256986">len</span><span class="op" id="2256989">(</span><span class="ident" id="2256990">tt</span><span class="op" id="2256992">.</span><span class="ident" id="2256993">methods</span><span class="op" id="2257000">)</span><span class="op" id="2257001">)</span>&nbsp;<span class="op" id="2257003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2257008">panic</span><span class="op" id="2257013">(</span><span class="string" id="2257014">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2257061">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257069">m</span>&nbsp;<span class="op" id="2257071">:=</span>&nbsp;<span class="op" id="2257074">&amp;</span><span class="ident" id="2257075">tt</span><span class="op" id="2257077">.</span><span class="ident" id="2257078">methods</span><span class="op" id="2257085">[</span><span class="ident" id="2257086">i</span><span class="op" id="2257087">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257091">if</span>&nbsp;<span class="ident" id="2257094">m</span><span class="op" id="2257095">.</span><span class="ident" id="2257096">pkgPath</span>&nbsp;<span class="op" id="2257104">!=</span>&nbsp;<span class="ident" id="2257107">nil</span>&nbsp;<span class="op" id="2257111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2257116">panic</span><span class="op" id="2257121">(</span><span class="string" id="2257122">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2257134">+</span>&nbsp;<span class="ident" id="2257136">op</span>&nbsp;<span class="op" id="2257139">+</span>&nbsp;<span class="string" id="2257141">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2257164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257168">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257172">iface</span>&nbsp;<span class="op" id="2257178">:=</span>&nbsp;<span class="op" id="2257181">(</span><span class="op" id="2257182">*</span><span class="ident" id="2257183">nonEmptyInterface</span><span class="op" id="2257200">)</span><span class="op" id="2257201">(</span><span class="ident" id="2257202">v</span><span class="op" id="2257203">.</span><span class="ident" id="2257204">ptr</span><span class="op" id="2257207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257211">if</span>&nbsp;<span class="ident" id="2257214">iface</span><span class="op" id="2257219">.</span><span class="ident" id="2257220">itab</span>&nbsp;<span class="op" id="2257225">==</span>&nbsp;<span class="ident" id="2257228">nil</span>&nbsp;<span class="op" id="2257232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2257237">panic</span><span class="op" id="2257242">(</span><span class="string" id="2257243">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2257255">+</span>&nbsp;<span class="ident" id="2257257">op</span>&nbsp;<span class="op" id="2257260">+</span>&nbsp;<span class="string" id="2257262">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2257297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257305">rcvrtype</span>&nbsp;<span class="op" id="2257314">=</span>&nbsp;<span class="ident" id="2257316">iface</span><span class="op" id="2257321">.</span><span class="ident" id="2257322">itab</span><span class="op" id="2257326">.</span><span class="ident" id="2257327">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257333">fn</span>&nbsp;<span class="op" id="2257336">=</span>&nbsp;<span class="ident" id="2257338">unsafe</span><span class="op" id="2257344">.</span><span class="ident" id="2257345">Pointer</span><span class="op" id="2257352">(</span><span class="op" id="2257353">&amp;</span><span class="ident" id="2257354">iface</span><span class="op" id="2257359">.</span><span class="ident" id="2257360">itab</span><span class="op" id="2257364">.</span><span class="ident" id="2257365">fun</span><span class="op" id="2257368">[</span><span class="ident" id="2257369">i</span><span class="op" id="2257370">]</span><span class="op" id="2257371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257375">t</span>&nbsp;<span class="op" id="2257377">=</span>&nbsp;<span class="ident" id="2257379">m</span><span class="op" id="2257380">.</span><span class="ident" id="2257381">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257386">}</span>&nbsp;<span class="keyword" id="2257388">else</span>&nbsp;<span class="op" id="2257393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257397">rcvrtype</span>&nbsp;<span class="op" id="2257406">=</span>&nbsp;<span class="ident" id="2257408">v</span><span class="op" id="2257409">.</span><span class="ident" id="2257410">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257416">ut</span>&nbsp;<span class="op" id="2257419">:=</span>&nbsp;<span class="ident" id="2257422">v</span><span class="op" id="2257423">.</span><span class="ident" id="2257424">typ</span><span class="op" id="2257427">.</span><span class="ident" id="2257428">uncommon</span><span class="op" id="2257436">(</span><span class="op" id="2257437">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257441">if</span>&nbsp;<span class="ident" id="2257444">ut</span>&nbsp;<span class="op" id="2257447">==</span>&nbsp;<span class="ident" id="2257450">nil</span>&nbsp;<span class="op" id="2257454">||</span>&nbsp;<span class="builtintype" id="2257457">uint</span><span class="op" id="2257461">(</span><span class="ident" id="2257462">i</span><span class="op" id="2257463">)</span>&nbsp;<span class="op" id="2257465">&gt;=</span>&nbsp;<span class="builtintype" id="2257468">uint</span><span class="op" id="2257472">(</span><span class="builtinfunc" id="2257473">len</span><span class="op" id="2257476">(</span><span class="ident" id="2257477">ut</span><span class="op" id="2257479">.</span><span class="ident" id="2257480">methods</span><span class="op" id="2257487">)</span><span class="op" id="2257488">)</span>&nbsp;<span class="op" id="2257490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2257495">panic</span><span class="op" id="2257500">(</span><span class="string" id="2257501">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2257548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257556">m</span>&nbsp;<span class="op" id="2257558">:=</span>&nbsp;<span class="op" id="2257561">&amp;</span><span class="ident" id="2257562">ut</span><span class="op" id="2257564">.</span><span class="ident" id="2257565">methods</span><span class="op" id="2257572">[</span><span class="ident" id="2257573">i</span><span class="op" id="2257574">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257578">if</span>&nbsp;<span class="ident" id="2257581">m</span><span class="op" id="2257582">.</span><span class="ident" id="2257583">pkgPath</span>&nbsp;<span class="op" id="2257591">!=</span>&nbsp;<span class="ident" id="2257594">nil</span>&nbsp;<span class="op" id="2257598">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2257603">panic</span><span class="op" id="2257608">(</span><span class="string" id="2257609">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2257621">+</span>&nbsp;<span class="ident" id="2257623">op</span>&nbsp;<span class="op" id="2257626">+</span>&nbsp;<span class="string" id="2257628">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2257651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257659">fn</span>&nbsp;<span class="op" id="2257662">=</span>&nbsp;<span class="ident" id="2257664">unsafe</span><span class="op" id="2257670">.</span><span class="ident" id="2257671">Pointer</span><span class="op" id="2257678">(</span><span class="op" id="2257679">&amp;</span><span class="ident" id="2257680">m</span><span class="op" id="2257681">.</span><span class="ident" id="2257682">ifn</span><span class="op" id="2257685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257689">t</span>&nbsp;<span class="op" id="2257691">=</span>&nbsp;<span class="ident" id="2257693">m</span><span class="op" id="2257694">.</span><span class="ident" id="2257695">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257701">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257704">return</span><br>
<span class="lineno"></span><span class="op" id="2257711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2257714">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2257779">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2257838">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2257893">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2257956">func</span>&nbsp;<span class="ident" id="2257961">storeRcvr</span><span class="op" id="2257970">(</span><span class="ident" id="2257971">v</span>&nbsp;<span class="ident" id="2257973">Value</span><span class="op" id="2257978">,</span>&nbsp;<span class="ident" id="2257980">p</span>&nbsp;<span class="ident" id="2257982">unsafe</span><span class="op" id="2257988">.</span><span class="ident" id="2257989">Pointer</span><span class="op" id="2257996">)</span>&nbsp;<span class="op" id="2257998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258001">t</span>&nbsp;<span class="op" id="2258003">:=</span>&nbsp;<span class="ident" id="2258006">v</span><span class="op" id="2258007">.</span><span class="ident" id="2258008">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258013">if</span>&nbsp;<span class="ident" id="2258016">t</span><span class="op" id="2258017">.</span><span class="ident" id="2258018">Kind</span><span class="op" id="2258022">(</span><span class="op" id="2258023">)</span>&nbsp;<span class="op" id="2258025">==</span>&nbsp;<span class="ident" id="2258028">Interface</span>&nbsp;<span class="op" id="2258038">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2258042">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258097">iface</span>&nbsp;<span class="op" id="2258103">:=</span>&nbsp;<span class="op" id="2258106">(</span><span class="op" id="2258107">*</span><span class="ident" id="2258108">nonEmptyInterface</span><span class="op" id="2258125">)</span><span class="op" id="2258126">(</span><span class="ident" id="2258127">v</span><span class="op" id="2258128">.</span><span class="ident" id="2258129">ptr</span><span class="op" id="2258132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258136">*</span><span class="op" id="2258137">(</span><span class="op" id="2258138">*</span><span class="ident" id="2258139">unsafe</span><span class="op" id="2258145">.</span><span class="ident" id="2258146">Pointer</span><span class="op" id="2258153">)</span><span class="op" id="2258154">(</span><span class="ident" id="2258155">p</span><span class="op" id="2258156">)</span>&nbsp;<span class="op" id="2258158">=</span>&nbsp;<span class="ident" id="2258160">unsafe</span><span class="op" id="2258166">.</span><span class="ident" id="2258167">Pointer</span><span class="op" id="2258174">(</span><span class="ident" id="2258175">iface</span><span class="op" id="2258180">.</span><span class="ident" id="2258181">word</span><span class="op" id="2258185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258188">}</span>&nbsp;<span class="keyword" id="2258190">else</span>&nbsp;<span class="keyword" id="2258195">if</span>&nbsp;<span class="ident" id="2258198">v</span><span class="op" id="2258199">.</span><span class="ident" id="2258200">flag</span><span class="op" id="2258204">&amp;</span><span class="ident" id="2258205">flagIndir</span>&nbsp;<span class="op" id="2258215">!=</span>&nbsp;<span class="num" id="2258218">0</span>&nbsp;<span class="op" id="2258220">&amp;&amp;</span>&nbsp;<span class="op" id="2258223">!</span><span class="ident" id="2258224">ifaceIndir</span><span class="op" id="2258234">(</span><span class="ident" id="2258235">t</span><span class="op" id="2258236">)</span>&nbsp;<span class="op" id="2258238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258242">*</span><span class="op" id="2258243">(</span><span class="op" id="2258244">*</span><span class="ident" id="2258245">unsafe</span><span class="op" id="2258251">.</span><span class="ident" id="2258252">Pointer</span><span class="op" id="2258259">)</span><span class="op" id="2258260">(</span><span class="ident" id="2258261">p</span><span class="op" id="2258262">)</span>&nbsp;<span class="op" id="2258264">=</span>&nbsp;<span class="op" id="2258266">*</span><span class="op" id="2258267">(</span><span class="op" id="2258268">*</span><span class="ident" id="2258269">unsafe</span><span class="op" id="2258275">.</span><span class="ident" id="2258276">Pointer</span><span class="op" id="2258283">)</span><span class="op" id="2258284">(</span><span class="ident" id="2258285">v</span><span class="op" id="2258286">.</span><span class="ident" id="2258287">ptr</span><span class="op" id="2258290">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258293">}</span>&nbsp;<span class="keyword" id="2258295">else</span>&nbsp;<span class="op" id="2258300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258304">*</span><span class="op" id="2258305">(</span><span class="op" id="2258306">*</span><span class="ident" id="2258307">unsafe</span><span class="op" id="2258313">.</span><span class="ident" id="2258314">Pointer</span><span class="op" id="2258321">)</span><span class="op" id="2258322">(</span><span class="ident" id="2258323">p</span><span class="op" id="2258324">)</span>&nbsp;<span class="op" id="2258326">=</span>&nbsp;<span class="ident" id="2258328">v</span><span class="op" id="2258329">.</span><span class="ident" id="2258330">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258335">}</span><br>
<span class="lineno"></span><span class="op" id="2258337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2258340">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2258405">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2258434">func</span>&nbsp;<span class="ident" id="2258439">align</span><span class="op" id="2258444">(</span><span class="ident" id="2258445">x</span><span class="op" id="2258446">,</span>&nbsp;<span class="ident" id="2258448">n</span>&nbsp;<span class="builtintype" id="2258450">uintptr</span><span class="op" id="2258457">)</span>&nbsp;<span class="builtintype" id="2258459">uintptr</span>&nbsp;<span class="op" id="2258467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258470">return</span>&nbsp;<span class="op" id="2258477">(</span><span class="ident" id="2258478">x</span>&nbsp;<span class="op" id="2258480">+</span>&nbsp;<span class="ident" id="2258482">n</span>&nbsp;<span class="op" id="2258484">-</span>&nbsp;<span class="num" id="2258486">1</span><span class="op" id="2258487">)</span>&nbsp;<span class="op" id="2258489">&amp;^</span>&nbsp;<span class="op" id="2258492">(</span><span class="ident" id="2258493">n</span>&nbsp;<span class="op" id="2258495">-</span>&nbsp;<span class="num" id="2258497">1</span><span class="op" id="2258498">)</span><br>
<span class="lineno"></span><span class="op" id="2258500">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2258503">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2258572">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2258629">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2258702">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2258766">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2258819">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2258900">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2258974">//</span><br>
<span class="lineno"></span><span class="comment" id="2258977">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2259053">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2259125">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2259196">func</span>&nbsp;<span class="ident" id="2259201">callMethod</span><span class="op" id="2259211">(</span><span class="ident" id="2259212">ctxt</span>&nbsp;<span class="op" id="2259217">*</span><span class="ident" id="2259218">methodValue</span><span class="op" id="2259229">,</span>&nbsp;<span class="ident" id="2259231">frame</span>&nbsp;<span class="ident" id="2259237">unsafe</span><span class="op" id="2259243">.</span><span class="ident" id="2259244">Pointer</span><span class="op" id="2259251">)</span>&nbsp;<span class="op" id="2259253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259256">rcvr</span>&nbsp;<span class="op" id="2259261">:=</span>&nbsp;<span class="ident" id="2259264">ctxt</span><span class="op" id="2259268">.</span><span class="ident" id="2259269">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259275">rcvrtype</span><span class="op" id="2259283">,</span>&nbsp;<span class="ident" id="2259285">t</span><span class="op" id="2259286">,</span>&nbsp;<span class="ident" id="2259288">fn</span>&nbsp;<span class="op" id="2259291">:=</span>&nbsp;<span class="ident" id="2259294">methodReceiver</span><span class="op" id="2259308">(</span><span class="string" id="2259309">&#34;call&#34;</span><span class="op" id="2259315">,</span>&nbsp;<span class="ident" id="2259317">rcvr</span><span class="op" id="2259321">,</span>&nbsp;<span class="ident" id="2259323">ctxt</span><span class="op" id="2259327">.</span><span class="ident" id="2259328">method</span><span class="op" id="2259334">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259337">frametype</span><span class="op" id="2259346">,</span>&nbsp;<span class="ident" id="2259348">argSize</span><span class="op" id="2259355">,</span>&nbsp;<span class="ident" id="2259357">retOffset</span><span class="op" id="2259366">,</span>&nbsp;<span class="ident" id="2259368">_</span>&nbsp;<span class="op" id="2259370">:=</span>&nbsp;<span class="ident" id="2259373">funcLayout</span><span class="op" id="2259383">(</span><span class="ident" id="2259384">t</span><span class="op" id="2259385">,</span>&nbsp;<span class="ident" id="2259387">rcvrtype</span><span class="op" id="2259395">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259399">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259474">args</span>&nbsp;<span class="op" id="2259479">:=</span>&nbsp;<span class="ident" id="2259482">unsafe_New</span><span class="op" id="2259492">(</span><span class="ident" id="2259493">frametype</span><span class="op" id="2259502">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259506">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259545">storeRcvr</span><span class="op" id="2259554">(</span><span class="ident" id="2259555">rcvr</span><span class="op" id="2259559">,</span>&nbsp;<span class="ident" id="2259561">args</span><span class="op" id="2259565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259568">memmove</span><span class="op" id="2259575">(</span><span class="ident" id="2259576">unsafe</span><span class="op" id="2259582">.</span><span class="ident" id="2259583">Pointer</span><span class="op" id="2259590">(</span><span class="builtintype" id="2259591">uintptr</span><span class="op" id="2259598">(</span><span class="ident" id="2259599">args</span><span class="op" id="2259603">)</span><span class="op" id="2259604">+</span><span class="ident" id="2259605">ptrSize</span><span class="op" id="2259612">)</span><span class="op" id="2259613">,</span>&nbsp;<span class="ident" id="2259615">frame</span><span class="op" id="2259620">,</span>&nbsp;<span class="ident" id="2259622">argSize</span><span class="op" id="2259629">-</span><span class="ident" id="2259630">ptrSize</span><span class="op" id="2259637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259641">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259651">call</span><span class="op" id="2259655">(</span><span class="ident" id="2259656">fn</span><span class="op" id="2259658">,</span>&nbsp;<span class="ident" id="2259660">args</span><span class="op" id="2259664">,</span>&nbsp;<span class="builtintype" id="2259666">uint32</span><span class="op" id="2259672">(</span><span class="ident" id="2259673">frametype</span><span class="op" id="2259682">.</span><span class="ident" id="2259683">size</span><span class="op" id="2259687">)</span><span class="op" id="2259688">,</span>&nbsp;<span class="builtintype" id="2259690">uint32</span><span class="op" id="2259696">(</span><span class="ident" id="2259697">retOffset</span><span class="op" id="2259706">)</span><span class="op" id="2259707">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259711">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259779">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259851">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259922">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2259938">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2259998">callerRetOffset</span>&nbsp;<span class="op" id="2260014">:=</span>&nbsp;<span class="ident" id="2260017">retOffset</span>&nbsp;<span class="op" id="2260027">-</span>&nbsp;<span class="ident" id="2260029">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260038">if</span>&nbsp;<span class="ident" id="2260041">runtime</span><span class="op" id="2260048">.</span><span class="ident" id="2260049">GOARCH</span>&nbsp;<span class="op" id="2260056">==</span>&nbsp;<span class="string" id="2260059">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2260070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260074">callerRetOffset</span>&nbsp;<span class="op" id="2260090">=</span>&nbsp;<span class="ident" id="2260092">align</span><span class="op" id="2260097">(</span><span class="ident" id="2260098">argSize</span><span class="op" id="2260105">-</span><span class="ident" id="2260106">ptrSize</span><span class="op" id="2260113">,</span>&nbsp;<span class="num" id="2260115">8</span><span class="op" id="2260116">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260122">memmove</span><span class="op" id="2260129">(</span><span class="ident" id="2260130">unsafe</span><span class="op" id="2260136">.</span><span class="ident" id="2260137">Pointer</span><span class="op" id="2260144">(</span><span class="builtintype" id="2260145">uintptr</span><span class="op" id="2260152">(</span><span class="ident" id="2260153">frame</span><span class="op" id="2260158">)</span><span class="op" id="2260159">+</span><span class="ident" id="2260160">callerRetOffset</span><span class="op" id="2260175">)</span><span class="op" id="2260176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260180">unsafe</span><span class="op" id="2260186">.</span><span class="ident" id="2260187">Pointer</span><span class="op" id="2260194">(</span><span class="builtintype" id="2260195">uintptr</span><span class="op" id="2260202">(</span><span class="ident" id="2260203">args</span><span class="op" id="2260207">)</span><span class="op" id="2260208">+</span><span class="ident" id="2260209">retOffset</span><span class="op" id="2260218">)</span><span class="op" id="2260219">,</span>&nbsp;<span class="ident" id="2260221">frametype</span><span class="op" id="2260230">.</span><span class="ident" id="2260231">size</span><span class="op" id="2260235">-</span><span class="ident" id="2260236">retOffset</span><span class="op" id="2260245">)</span><br>
<span class="lineno"></span><span class="op" id="2260247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2260250">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2260312">func</span>&nbsp;<span class="ident" id="2260317">funcName</span><span class="op" id="2260325">(</span><span class="ident" id="2260326">f</span>&nbsp;<span class="keyword" id="2260328">func</span><span class="op" id="2260332">(</span><span class="op" id="2260333">[</span><span class="op" id="2260334">]</span><span class="ident" id="2260335">Value</span><span class="op" id="2260340">)</span>&nbsp;<span class="op" id="2260342">[</span><span class="op" id="2260343">]</span><span class="ident" id="2260344">Value</span><span class="op" id="2260349">)</span>&nbsp;<span class="builtintype" id="2260351">string</span>&nbsp;<span class="op" id="2260358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260361">pc</span>&nbsp;<span class="op" id="2260364">:=</span>&nbsp;<span class="op" id="2260367">*</span><span class="op" id="2260368">(</span><span class="op" id="2260369">*</span><span class="builtintype" id="2260370">uintptr</span><span class="op" id="2260377">)</span><span class="op" id="2260378">(</span><span class="ident" id="2260379">unsafe</span><span class="op" id="2260385">.</span><span class="ident" id="2260386">Pointer</span><span class="op" id="2260393">(</span><span class="op" id="2260394">&amp;</span><span class="ident" id="2260395">f</span><span class="op" id="2260396">)</span><span class="op" id="2260397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260400">rf</span>&nbsp;<span class="op" id="2260403">:=</span>&nbsp;<span class="ident" id="2260406">runtime</span><span class="op" id="2260413">.</span><span class="ident" id="2260414">FuncForPC</span><span class="op" id="2260423">(</span><span class="ident" id="2260424">pc</span><span class="op" id="2260426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260429">if</span>&nbsp;<span class="ident" id="2260432">rf</span>&nbsp;<span class="op" id="2260435">!=</span>&nbsp;<span class="ident" id="2260438">nil</span>&nbsp;<span class="op" id="2260442">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260446">return</span>&nbsp;<span class="ident" id="2260453">rf</span><span class="op" id="2260455">.</span><span class="ident" id="2260456">Name</span><span class="op" id="2260460">(</span><span class="op" id="2260461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260467">return</span>&nbsp;<span class="string" id="2260474">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2260484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2260487">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2260516">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2260571">func</span>&nbsp;<span class="op" id="2260576">(</span><span class="ident" id="2260577">v</span>&nbsp;<span class="ident" id="2260579">Value</span><span class="op" id="2260584">)</span>&nbsp;<span class="ident" id="2260586">Cap</span><span class="op" id="2260589">(</span><span class="op" id="2260590">)</span>&nbsp;<span class="builtintype" id="2260592">int</span>&nbsp;<span class="op" id="2260596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260599">k</span>&nbsp;<span class="op" id="2260601">:=</span>&nbsp;<span class="ident" id="2260604">v</span><span class="op" id="2260605">.</span><span class="ident" id="2260606">kind</span><span class="op" id="2260610">(</span><span class="op" id="2260611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260614">switch</span>&nbsp;<span class="ident" id="2260621">k</span>&nbsp;<span class="op" id="2260623">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260626">case</span>&nbsp;<span class="ident" id="2260631">Array</span><span class="op" id="2260636">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260640">return</span>&nbsp;<span class="ident" id="2260647">v</span><span class="op" id="2260648">.</span><span class="ident" id="2260649">typ</span><span class="op" id="2260652">.</span><span class="ident" id="2260653">Len</span><span class="op" id="2260656">(</span><span class="op" id="2260657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260660">case</span>&nbsp;<span class="ident" id="2260665">Chan</span><span class="op" id="2260669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260673">return</span>&nbsp;<span class="builtintype" id="2260680">int</span><span class="op" id="2260683">(</span><span class="ident" id="2260684">chancap</span><span class="op" id="2260691">(</span><span class="ident" id="2260692">v</span><span class="op" id="2260693">.</span><span class="ident" id="2260694">pointer</span><span class="op" id="2260701">(</span><span class="op" id="2260702">)</span><span class="op" id="2260703">)</span><span class="op" id="2260704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260707">case</span>&nbsp;<span class="ident" id="2260712">Slice</span><span class="op" id="2260717">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2260721">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260780">return</span>&nbsp;<span class="op" id="2260787">(</span><span class="op" id="2260788">*</span><span class="ident" id="2260789">sliceHeader</span><span class="op" id="2260800">)</span><span class="op" id="2260801">(</span><span class="ident" id="2260802">v</span><span class="op" id="2260803">.</span><span class="ident" id="2260804">ptr</span><span class="op" id="2260807">)</span><span class="op" id="2260808">.</span><span class="ident" id="2260809">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2260817">panic</span><span class="op" id="2260822">(</span><span class="op" id="2260823">&amp;</span><span class="ident" id="2260824">ValueError</span><span class="op" id="2260834">{</span><span class="string" id="2260835">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2260854">,</span>&nbsp;<span class="ident" id="2260856">v</span><span class="op" id="2260857">.</span><span class="ident" id="2260858">kind</span><span class="op" id="2260862">(</span><span class="op" id="2260863">)</span><span class="op" id="2260864">}</span><span class="op" id="2260865">)</span><br>
<span class="lineno"></span><span class="op" id="2260867">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2260870">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2260901">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2260939">func</span>&nbsp;<span class="op" id="2260944">(</span><span class="ident" id="2260945">v</span>&nbsp;<span class="ident" id="2260947">Value</span><span class="op" id="2260952">)</span>&nbsp;<span class="ident" id="2260954">Close</span><span class="op" id="2260959">(</span><span class="op" id="2260960">)</span>&nbsp;<span class="op" id="2260962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260965">v</span><span class="op" id="2260966">.</span><span class="ident" id="2260967">mustBe</span><span class="op" id="2260973">(</span><span class="ident" id="2260974">Chan</span><span class="op" id="2260978">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260981">v</span><span class="op" id="2260982">.</span><span class="ident" id="2260983">mustBeExported</span><span class="op" id="2260997">(</span><span class="op" id="2260998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261001">chanclose</span><span class="op" id="2261010">(</span><span class="ident" id="2261011">v</span><span class="op" id="2261012">.</span><span class="ident" id="2261013">pointer</span><span class="op" id="2261020">(</span><span class="op" id="2261021">)</span><span class="op" id="2261022">)</span><br>
<span class="lineno"></span><span class="op" id="2261024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2261027">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2261085">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2261141">func</span>&nbsp;<span class="op" id="2261146">(</span><span class="ident" id="2261147">v</span>&nbsp;<span class="ident" id="2261149">Value</span><span class="op" id="2261154">)</span>&nbsp;<span class="ident" id="2261156">Complex</span><span class="op" id="2261163">(</span><span class="op" id="2261164">)</span>&nbsp;<span class="builtintype" id="2261166">complex128</span>&nbsp;<span class="op" id="2261177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261180">k</span>&nbsp;<span class="op" id="2261182">:=</span>&nbsp;<span class="ident" id="2261185">v</span><span class="op" id="2261186">.</span><span class="ident" id="2261187">kind</span><span class="op" id="2261191">(</span><span class="op" id="2261192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261195">switch</span>&nbsp;<span class="ident" id="2261202">k</span>&nbsp;<span class="op" id="2261204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261207">case</span>&nbsp;<span class="ident" id="2261212">Complex64</span><span class="op" id="2261221">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261225">return</span>&nbsp;<span class="builtintype" id="2261232">complex128</span><span class="op" id="2261242">(</span><span class="op" id="2261243">*</span><span class="op" id="2261244">(</span><span class="op" id="2261245">*</span><span class="builtintype" id="2261246">complex64</span><span class="op" id="2261255">)</span><span class="op" id="2261256">(</span><span class="ident" id="2261257">v</span><span class="op" id="2261258">.</span><span class="ident" id="2261259">ptr</span><span class="op" id="2261262">)</span><span class="op" id="2261263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261266">case</span>&nbsp;<span class="ident" id="2261271">Complex128</span><span class="op" id="2261281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261285">return</span>&nbsp;<span class="op" id="2261292">*</span><span class="op" id="2261293">(</span><span class="op" id="2261294">*</span><span class="builtintype" id="2261295">complex128</span><span class="op" id="2261305">)</span><span class="op" id="2261306">(</span><span class="ident" id="2261307">v</span><span class="op" id="2261308">.</span><span class="ident" id="2261309">ptr</span><span class="op" id="2261312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2261318">panic</span><span class="op" id="2261323">(</span><span class="op" id="2261324">&amp;</span><span class="ident" id="2261325">ValueError</span><span class="op" id="2261335">{</span><span class="string" id="2261336">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2261359">,</span>&nbsp;<span class="ident" id="2261361">v</span><span class="op" id="2261362">.</span><span class="ident" id="2261363">kind</span><span class="op" id="2261367">(</span><span class="op" id="2261368">)</span><span class="op" id="2261369">}</span><span class="op" id="2261370">)</span><br>
<span class="lineno">665</span><span class="op" id="2261372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2261375">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2261431">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2261467">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2261517">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2261559">func</span>&nbsp;<span class="op" id="2261564">(</span><span class="ident" id="2261565">v</span>&nbsp;<span class="ident" id="2261567">Value</span><span class="op" id="2261572">)</span>&nbsp;<span class="ident" id="2261574">Elem</span><span class="op" id="2261578">(</span><span class="op" id="2261579">)</span>&nbsp;<span class="ident" id="2261581">Value</span>&nbsp;<span class="op" id="2261587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261590">k</span>&nbsp;<span class="op" id="2261592">:=</span>&nbsp;<span class="ident" id="2261595">v</span><span class="op" id="2261596">.</span><span class="ident" id="2261597">kind</span><span class="op" id="2261601">(</span><span class="op" id="2261602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261605">switch</span>&nbsp;<span class="ident" id="2261612">k</span>&nbsp;<span class="op" id="2261614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261617">case</span>&nbsp;<span class="ident" id="2261622">Interface</span><span class="op" id="2261631">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261635">var</span>&nbsp;<span class="ident" id="2261639">eface</span>&nbsp;<span class="keyword" id="2261645">interface</span><span class="op" id="2261654">{</span><span class="op" id="2261655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261659">if</span>&nbsp;<span class="ident" id="2261662">v</span><span class="op" id="2261663">.</span><span class="ident" id="2261664">typ</span><span class="op" id="2261667">.</span><span class="ident" id="2261668">NumMethod</span><span class="op" id="2261677">(</span><span class="op" id="2261678">)</span>&nbsp;<span class="op" id="2261680">==</span>&nbsp;<span class="num" id="2261683">0</span>&nbsp;<span class="op" id="2261685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261690">eface</span>&nbsp;<span class="op" id="2261696">=</span>&nbsp;<span class="op" id="2261698">*</span><span class="op" id="2261699">(</span><span class="op" id="2261700">*</span><span class="keyword" id="2261701">interface</span><span class="op" id="2261710">{</span><span class="op" id="2261711">}</span><span class="op" id="2261712">)</span><span class="op" id="2261713">(</span><span class="ident" id="2261714">v</span><span class="op" id="2261715">.</span><span class="ident" id="2261716">ptr</span><span class="op" id="2261719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261723">}</span>&nbsp;<span class="keyword" id="2261725">else</span>&nbsp;<span class="op" id="2261730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261735">eface</span>&nbsp;<span class="op" id="2261741">=</span>&nbsp;<span class="op" id="2261743">(</span><span class="keyword" id="2261744">interface</span><span class="op" id="2261753">{</span><span class="op" id="2261754">}</span><span class="op" id="2261755">)</span><span class="op" id="2261756">(</span><span class="op" id="2261757">*</span><span class="op" id="2261758">(</span><span class="op" id="2261759">*</span><span class="keyword" id="2261760">interface</span>&nbsp;<span class="op" id="2261770">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261776">M</span><span class="op" id="2261777">(</span><span class="op" id="2261778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261783">}</span><span class="op" id="2261784">)</span><span class="op" id="2261785">(</span><span class="ident" id="2261786">v</span><span class="op" id="2261787">.</span><span class="ident" id="2261788">ptr</span><span class="op" id="2261791">)</span><span class="op" id="2261792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261800">x</span>&nbsp;<span class="op" id="2261802">:=</span>&nbsp;<span class="ident" id="2261805">unpackEface</span><span class="op" id="2261816">(</span><span class="ident" id="2261817">eface</span><span class="op" id="2261822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261826">if</span>&nbsp;<span class="ident" id="2261829">x</span><span class="op" id="2261830">.</span><span class="ident" id="2261831">flag</span>&nbsp;<span class="op" id="2261836">!=</span>&nbsp;<span class="num" id="2261839">0</span>&nbsp;<span class="op" id="2261841">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261846">x</span><span class="op" id="2261847">.</span><span class="ident" id="2261848">flag</span>&nbsp;<span class="op" id="2261853">|=</span>&nbsp;<span class="ident" id="2261856">v</span><span class="op" id="2261857">.</span><span class="ident" id="2261858">flag</span>&nbsp;<span class="op" id="2261863">&amp;</span>&nbsp;<span class="ident" id="2261865">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261878">return</span>&nbsp;<span class="ident" id="2261885">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261888">case</span>&nbsp;<span class="ident" id="2261893">Ptr</span><span class="op" id="2261896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261900">ptr</span>&nbsp;<span class="op" id="2261904">:=</span>&nbsp;<span class="ident" id="2261907">v</span><span class="op" id="2261908">.</span><span class="ident" id="2261909">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261915">if</span>&nbsp;<span class="ident" id="2261918">v</span><span class="op" id="2261919">.</span><span class="ident" id="2261920">flag</span><span class="op" id="2261924">&amp;</span><span class="ident" id="2261925">flagIndir</span>&nbsp;<span class="op" id="2261935">!=</span>&nbsp;<span class="num" id="2261938">0</span>&nbsp;<span class="op" id="2261940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261945">ptr</span>&nbsp;<span class="op" id="2261949">=</span>&nbsp;<span class="op" id="2261951">*</span><span class="op" id="2261952">(</span><span class="op" id="2261953">*</span><span class="ident" id="2261954">unsafe</span><span class="op" id="2261960">.</span><span class="ident" id="2261961">Pointer</span><span class="op" id="2261968">)</span><span class="op" id="2261969">(</span><span class="ident" id="2261970">ptr</span><span class="op" id="2261973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2261981">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2262029">if</span>&nbsp;<span class="ident" id="2262032">ptr</span>&nbsp;<span class="op" id="2262036">==</span>&nbsp;<span class="ident" id="2262039">nil</span>&nbsp;<span class="op" id="2262043">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2262048">return</span>&nbsp;<span class="ident" id="2262055">Value</span><span class="op" id="2262060">{</span><span class="op" id="2262061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262069">tt</span>&nbsp;<span class="op" id="2262072">:=</span>&nbsp;<span class="op" id="2262075">(</span><span class="op" id="2262076">*</span><span class="ident" id="2262077">ptrType</span><span class="op" id="2262084">)</span><span class="op" id="2262085">(</span><span class="ident" id="2262086">unsafe</span><span class="op" id="2262092">.</span><span class="ident" id="2262093">Pointer</span><span class="op" id="2262100">(</span><span class="ident" id="2262101">v</span><span class="op" id="2262102">.</span><span class="ident" id="2262103">typ</span><span class="op" id="2262106">)</span><span class="op" id="2262107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262111">typ</span>&nbsp;<span class="op" id="2262115">:=</span>&nbsp;<span class="ident" id="2262118">tt</span><span class="op" id="2262120">.</span><span class="ident" id="2262121">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262128">fl</span>&nbsp;<span class="op" id="2262131">:=</span>&nbsp;<span class="ident" id="2262134">v</span><span class="op" id="2262135">.</span><span class="ident" id="2262136">flag</span><span class="op" id="2262140">&amp;</span><span class="ident" id="2262141">flagRO</span>&nbsp;<span class="op" id="2262148">|</span>&nbsp;<span class="ident" id="2262150">flagIndir</span>&nbsp;<span class="op" id="2262160">|</span>&nbsp;<span class="ident" id="2262162">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262173">fl</span>&nbsp;<span class="op" id="2262176">|=</span>&nbsp;<span class="ident" id="2262179">flag</span><span class="op" id="2262183">(</span><span class="ident" id="2262184">typ</span><span class="op" id="2262187">.</span><span class="ident" id="2262188">Kind</span><span class="op" id="2262192">(</span><span class="op" id="2262193">)</span><span class="op" id="2262194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2262198">return</span>&nbsp;<span class="ident" id="2262205">Value</span><span class="op" id="2262210">{</span><span class="ident" id="2262211">typ</span><span class="op" id="2262214">,</span>&nbsp;<span class="ident" id="2262216">ptr</span><span class="op" id="2262219">,</span>&nbsp;<span class="ident" id="2262221">fl</span><span class="op" id="2262223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2262229">panic</span><span class="op" id="2262234">(</span><span class="op" id="2262235">&amp;</span><span class="ident" id="2262236">ValueError</span><span class="op" id="2262246">{</span><span class="string" id="2262247">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2262267">,</span>&nbsp;<span class="ident" id="2262269">v</span><span class="op" id="2262270">.</span><span class="ident" id="2262271">kind</span><span class="op" id="2262275">(</span><span class="op" id="2262276">)</span><span class="op" id="2262277">}</span><span class="op" id="2262278">)</span><br>
<span class="lineno"></span><span class="op" id="2262280">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2262283">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2262332">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2262393">func</span>&nbsp;<span class="op" id="2262398">(</span><span class="ident" id="2262399">v</span>&nbsp;<span class="ident" id="2262401">Value</span><span class="op" id="2262406">)</span>&nbsp;<span class="ident" id="2262408">Field</span><span class="op" id="2262413">(</span><span class="ident" id="2262414">i</span>&nbsp;<span class="builtintype" id="2262416">int</span><span class="op" id="2262419">)</span>&nbsp;<span class="ident" id="2262421">Value</span>&nbsp;<span class="op" id="2262427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2262430">if</span>&nbsp;<span class="ident" id="2262433">v</span><span class="op" id="2262434">.</span><span class="ident" id="2262435">kind</span><span class="op" id="2262439">(</span><span class="op" id="2262440">)</span>&nbsp;<span class="op" id="2262442">!=</span>&nbsp;<span class="ident" id="2262445">Struct</span>&nbsp;<span class="op" id="2262452">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2262456">panic</span><span class="op" id="2262461">(</span><span class="op" id="2262462">&amp;</span><span class="ident" id="2262463">ValueError</span><span class="op" id="2262473">{</span><span class="string" id="2262474">&#34;reflect.Value.Field&#34;</span><span class="op" id="2262495">,</span>&nbsp;<span class="ident" id="2262497">v</span><span class="op" id="2262498">.</span><span class="ident" id="2262499">kind</span><span class="op" id="2262503">(</span><span class="op" id="2262504">)</span><span class="op" id="2262505">}</span><span class="op" id="2262506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262512">tt</span>&nbsp;<span class="op" id="2262515">:=</span>&nbsp;<span class="op" id="2262518">(</span><span class="op" id="2262519">*</span><span class="ident" id="2262520">structType</span><span class="op" id="2262530">)</span><span class="op" id="2262531">(</span><span class="ident" id="2262532">unsafe</span><span class="op" id="2262538">.</span><span class="ident" id="2262539">Pointer</span><span class="op" id="2262546">(</span><span class="ident" id="2262547">v</span><span class="op" id="2262548">.</span><span class="ident" id="2262549">typ</span><span class="op" id="2262552">)</span><span class="op" id="2262553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2262556">if</span>&nbsp;<span class="builtintype" id="2262559">uint</span><span class="op" id="2262563">(</span><span class="ident" id="2262564">i</span><span class="op" id="2262565">)</span>&nbsp;<span class="op" id="2262567">&gt;=</span>&nbsp;<span class="builtintype" id="2262570">uint</span><span class="op" id="2262574">(</span><span class="builtinfunc" id="2262575">len</span><span class="op" id="2262578">(</span><span class="ident" id="2262579">tt</span><span class="op" id="2262581">.</span><span class="ident" id="2262582">fields</span><span class="op" id="2262588">)</span><span class="op" id="2262589">)</span>&nbsp;<span class="op" id="2262591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2262595">panic</span><span class="op" id="2262600">(</span><span class="string" id="2262601">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2262636">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262642">field</span>&nbsp;<span class="op" id="2262648">:=</span>&nbsp;<span class="op" id="2262651">&amp;</span><span class="ident" id="2262652">tt</span><span class="op" id="2262654">.</span><span class="ident" id="2262655">fields</span><span class="op" id="2262661">[</span><span class="ident" id="2262662">i</span><span class="op" id="2262663">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262666">typ</span>&nbsp;<span class="op" id="2262670">:=</span>&nbsp;<span class="ident" id="2262673">field</span><span class="op" id="2262678">.</span><span class="ident" id="2262679">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262685">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262721">fl</span>&nbsp;<span class="op" id="2262724">:=</span>&nbsp;<span class="ident" id="2262727">v</span><span class="op" id="2262728">.</span><span class="ident" id="2262729">flag</span><span class="op" id="2262733">&amp;</span><span class="op" id="2262734">(</span><span class="ident" id="2262735">flagRO</span><span class="op" id="2262741">|</span><span class="ident" id="2262742">flagIndir</span><span class="op" id="2262751">|</span><span class="ident" id="2262752">flagAddr</span><span class="op" id="2262760">)</span>&nbsp;<span class="op" id="2262762">|</span>&nbsp;<span class="ident" id="2262764">flag</span><span class="op" id="2262768">(</span><span class="ident" id="2262769">typ</span><span class="op" id="2262772">.</span><span class="ident" id="2262773">Kind</span><span class="op" id="2262777">(</span><span class="op" id="2262778">)</span><span class="op" id="2262779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262782">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2262827">if</span>&nbsp;<span class="ident" id="2262830">field</span><span class="op" id="2262835">.</span><span class="ident" id="2262836">pkgPath</span>&nbsp;<span class="op" id="2262844">!=</span>&nbsp;<span class="ident" id="2262847">nil</span>&nbsp;<span class="op" id="2262851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2262855">fl</span>&nbsp;<span class="op" id="2262858">|=</span>&nbsp;<span class="ident" id="2262861">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2262869">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262872">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262928">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2262993">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2263041">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2263099">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2263142">ptr</span>&nbsp;<span class="op" id="2263146">:=</span>&nbsp;<span class="ident" id="2263149">unsafe</span><span class="op" id="2263155">.</span><span class="ident" id="2263156">Pointer</span><span class="op" id="2263163">(</span><span class="builtintype" id="2263164">uintptr</span><span class="op" id="2263171">(</span><span class="ident" id="2263172">v</span><span class="op" id="2263173">.</span><span class="ident" id="2263174">ptr</span><span class="op" id="2263177">)</span>&nbsp;<span class="op" id="2263179">+</span>&nbsp;<span class="ident" id="2263181">field</span><span class="op" id="2263186">.</span><span class="ident" id="2263187">offset</span><span class="op" id="2263193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263196">return</span>&nbsp;<span class="ident" id="2263203">Value</span><span class="op" id="2263208">{</span><span class="ident" id="2263209">typ</span><span class="op" id="2263212">,</span>&nbsp;<span class="ident" id="2263214">ptr</span><span class="op" id="2263217">,</span>&nbsp;<span class="ident" id="2263219">fl</span><span class="op" id="2263221">}</span><br>
<span class="lineno"></span><span class="op" id="2263223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2263226">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2263291">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2263331">func</span>&nbsp;<span class="op" id="2263336">(</span><span class="ident" id="2263337">v</span>&nbsp;<span class="ident" id="2263339">Value</span><span class="op" id="2263344">)</span>&nbsp;<span class="ident" id="2263346">FieldByIndex</span><span class="op" id="2263358">(</span><span class="ident" id="2263359">index</span>&nbsp;<span class="op" id="2263365">[</span><span class="op" id="2263366">]</span><span class="builtintype" id="2263367">int</span><span class="op" id="2263370">)</span>&nbsp;<span class="ident" id="2263372">Value</span>&nbsp;<span class="op" id="2263378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263381">if</span>&nbsp;<span class="builtinfunc" id="2263384">len</span><span class="op" id="2263387">(</span><span class="ident" id="2263388">index</span><span class="op" id="2263393">)</span>&nbsp;<span class="op" id="2263395">==</span>&nbsp;<span class="num" id="2263398">1</span>&nbsp;<span class="op" id="2263400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263404">return</span>&nbsp;<span class="ident" id="2263411">v</span><span class="op" id="2263412">.</span><span class="ident" id="2263413">Field</span><span class="op" id="2263418">(</span><span class="ident" id="2263419">index</span><span class="op" id="2263424">[</span><span class="num" id="2263425">0</span><span class="op" id="2263426">]</span><span class="op" id="2263427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263430">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2263433">v</span><span class="op" id="2263434">.</span><span class="ident" id="2263435">mustBe</span><span class="op" id="2263441">(</span><span class="ident" id="2263442">Struct</span><span class="op" id="2263448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263451">for</span>&nbsp;<span class="ident" id="2263455">i</span><span class="op" id="2263456">,</span>&nbsp;<span class="ident" id="2263458">x</span>&nbsp;<span class="op" id="2263460">:=</span>&nbsp;<span class="keyword" id="2263463">range</span>&nbsp;<span class="ident" id="2263469">index</span>&nbsp;<span class="op" id="2263475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263479">if</span>&nbsp;<span class="ident" id="2263482">i</span>&nbsp;<span class="op" id="2263484">&gt;</span>&nbsp;<span class="num" id="2263486">0</span>&nbsp;<span class="op" id="2263488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263493">if</span>&nbsp;<span class="ident" id="2263496">v</span><span class="op" id="2263497">.</span><span class="ident" id="2263498">Kind</span><span class="op" id="2263502">(</span><span class="op" id="2263503">)</span>&nbsp;<span class="op" id="2263505">==</span>&nbsp;<span class="ident" id="2263508">Ptr</span>&nbsp;<span class="op" id="2263512">&amp;&amp;</span>&nbsp;<span class="ident" id="2263515">v</span><span class="op" id="2263516">.</span><span class="ident" id="2263517">typ</span><span class="op" id="2263520">.</span><span class="ident" id="2263521">Elem</span><span class="op" id="2263525">(</span><span class="op" id="2263526">)</span><span class="op" id="2263527">.</span><span class="ident" id="2263528">Kind</span><span class="op" id="2263532">(</span><span class="op" id="2263533">)</span>&nbsp;<span class="op" id="2263535">==</span>&nbsp;<span class="ident" id="2263538">Struct</span>&nbsp;<span class="op" id="2263545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263551">if</span>&nbsp;<span class="ident" id="2263554">v</span><span class="op" id="2263555">.</span><span class="ident" id="2263556">IsNil</span><span class="op" id="2263561">(</span><span class="op" id="2263562">)</span>&nbsp;<span class="op" id="2263564">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2263571">panic</span><span class="op" id="2263576">(</span><span class="string" id="2263577">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2263638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2263650">v</span>&nbsp;<span class="op" id="2263652">=</span>&nbsp;<span class="ident" id="2263654">v</span><span class="op" id="2263655">.</span><span class="ident" id="2263656">Elem</span><span class="op" id="2263660">(</span><span class="op" id="2263661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263670">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2263674">v</span>&nbsp;<span class="op" id="2263676">=</span>&nbsp;<span class="ident" id="2263678">v</span><span class="op" id="2263679">.</span><span class="ident" id="2263680">Field</span><span class="op" id="2263685">(</span><span class="ident" id="2263686">x</span><span class="op" id="2263687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2263690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263693">return</span>&nbsp;<span class="ident" id="2263700">v</span><br>
<span class="lineno"></span><span class="op" id="2263702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2263705">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2263766">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2263818">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2263858">func</span>&nbsp;<span class="op" id="2263863">(</span><span class="ident" id="2263864">v</span>&nbsp;<span class="ident" id="2263866">Value</span><span class="op" id="2263871">)</span>&nbsp;<span class="ident" id="2263873">FieldByName</span><span class="op" id="2263884">(</span><span class="ident" id="2263885">name</span>&nbsp;<span class="builtintype" id="2263890">string</span><span class="op" id="2263896">)</span>&nbsp;<span class="ident" id="2263898">Value</span>&nbsp;<span class="op" id="2263904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2263907">v</span><span class="op" id="2263908">.</span><span class="ident" id="2263909">mustBe</span><span class="op" id="2263915">(</span><span class="ident" id="2263916">Struct</span><span class="op" id="2263922">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263925">if</span>&nbsp;<span class="ident" id="2263928">f</span><span class="op" id="2263929">,</span>&nbsp;<span class="ident" id="2263931">ok</span>&nbsp;<span class="op" id="2263934">:=</span>&nbsp;<span class="ident" id="2263937">v</span><span class="op" id="2263938">.</span><span class="ident" id="2263939">typ</span><span class="op" id="2263942">.</span><span class="ident" id="2263943">FieldByName</span><span class="op" id="2263954">(</span><span class="ident" id="2263955">name</span><span class="op" id="2263959">)</span><span class="op" id="2263960">;</span>&nbsp;<span class="ident" id="2263962">ok</span>&nbsp;<span class="op" id="2263965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2263969">return</span>&nbsp;<span class="ident" id="2263976">v</span><span class="op" id="2263977">.</span><span class="ident" id="2263978">FieldByIndex</span><span class="op" id="2263990">(</span><span class="ident" id="2263991">f</span><span class="op" id="2263992">.</span><span class="ident" id="2263993">Index</span><span class="op" id="2263998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264004">return</span>&nbsp;<span class="ident" id="2264011">Value</span><span class="op" id="2264016">{</span><span class="op" id="2264017">}</span><br>
<span class="lineno"></span><span class="op" id="2264019">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2264022">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2264078">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2264116">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2264156">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2264208">func</span>&nbsp;<span class="op" id="2264213">(</span><span class="ident" id="2264214">v</span>&nbsp;<span class="ident" id="2264216">Value</span><span class="op" id="2264221">)</span>&nbsp;<span class="ident" id="2264223">FieldByNameFunc</span><span class="op" id="2264238">(</span><span class="ident" id="2264239">match</span>&nbsp;<span class="keyword" id="2264245">func</span><span class="op" id="2264249">(</span><span class="builtintype" id="2264250">string</span><span class="op" id="2264256">)</span>&nbsp;<span class="builtintype" id="2264258">bool</span><span class="op" id="2264262">)</span>&nbsp;<span class="ident" id="2264264">Value</span>&nbsp;<span class="op" id="2264270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264273">if</span>&nbsp;<span class="ident" id="2264276">f</span><span class="op" id="2264277">,</span>&nbsp;<span class="ident" id="2264279">ok</span>&nbsp;<span class="op" id="2264282">:=</span>&nbsp;<span class="ident" id="2264285">v</span><span class="op" id="2264286">.</span><span class="ident" id="2264287">typ</span><span class="op" id="2264290">.</span><span class="ident" id="2264291">FieldByNameFunc</span><span class="op" id="2264306">(</span><span class="ident" id="2264307">match</span><span class="op" id="2264312">)</span><span class="op" id="2264313">;</span>&nbsp;<span class="ident" id="2264315">ok</span>&nbsp;<span class="op" id="2264318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264322">return</span>&nbsp;<span class="ident" id="2264329">v</span><span class="op" id="2264330">.</span><span class="ident" id="2264331">FieldByIndex</span><span class="op" id="2264343">(</span><span class="ident" id="2264344">f</span><span class="op" id="2264345">.</span><span class="ident" id="2264346">Index</span><span class="op" id="2264351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264357">return</span>&nbsp;<span class="ident" id="2264364">Value</span><span class="op" id="2264369">{</span><span class="op" id="2264370">}</span><br>
<span class="lineno">775</span><span class="op" id="2264372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2264375">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2264428">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2264479">func</span>&nbsp;<span class="op" id="2264484">(</span><span class="ident" id="2264485">v</span>&nbsp;<span class="ident" id="2264487">Value</span><span class="op" id="2264492">)</span>&nbsp;<span class="ident" id="2264494">Float</span><span class="op" id="2264499">(</span><span class="op" id="2264500">)</span>&nbsp;<span class="builtintype" id="2264502">float64</span>&nbsp;<span class="op" id="2264510">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264513">k</span>&nbsp;<span class="op" id="2264515">:=</span>&nbsp;<span class="ident" id="2264518">v</span><span class="op" id="2264519">.</span><span class="ident" id="2264520">kind</span><span class="op" id="2264524">(</span><span class="op" id="2264525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264528">switch</span>&nbsp;<span class="ident" id="2264535">k</span>&nbsp;<span class="op" id="2264537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264540">case</span>&nbsp;<span class="ident" id="2264545">Float32</span><span class="op" id="2264552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264556">return</span>&nbsp;<span class="builtintype" id="2264563">float64</span><span class="op" id="2264570">(</span><span class="op" id="2264571">*</span><span class="op" id="2264572">(</span><span class="op" id="2264573">*</span><span class="builtintype" id="2264574">float32</span><span class="op" id="2264581">)</span><span class="op" id="2264582">(</span><span class="ident" id="2264583">v</span><span class="op" id="2264584">.</span><span class="ident" id="2264585">ptr</span><span class="op" id="2264588">)</span><span class="op" id="2264589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264592">case</span>&nbsp;<span class="ident" id="2264597">Float64</span><span class="op" id="2264604">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264608">return</span>&nbsp;<span class="op" id="2264615">*</span><span class="op" id="2264616">(</span><span class="op" id="2264617">*</span><span class="builtintype" id="2264618">float64</span><span class="op" id="2264625">)</span><span class="op" id="2264626">(</span><span class="ident" id="2264627">v</span><span class="op" id="2264628">.</span><span class="ident" id="2264629">ptr</span><span class="op" id="2264632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2264635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2264638">panic</span><span class="op" id="2264643">(</span><span class="op" id="2264644">&amp;</span><span class="ident" id="2264645">ValueError</span><span class="op" id="2264655">{</span><span class="string" id="2264656">&#34;reflect.Value.Float&#34;</span><span class="op" id="2264677">,</span>&nbsp;<span class="ident" id="2264679">v</span><span class="op" id="2264680">.</span><span class="ident" id="2264681">kind</span><span class="op" id="2264685">(</span><span class="op" id="2264686">)</span><span class="op" id="2264687">}</span><span class="op" id="2264688">)</span><br>
<span class="lineno"></span><span class="op" id="2264690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2264693">var</span>&nbsp;<span class="ident" id="2264697">uint8Type</span>&nbsp;<span class="op" id="2264707">=</span>&nbsp;<span class="ident" id="2264709">TypeOf</span><span class="op" id="2264715">(</span><span class="builtintype" id="2264716">uint8</span><span class="op" id="2264721">(</span><span class="num" id="2264722">0</span><span class="op" id="2264723">)</span><span class="op" id="2264724">)</span><span class="op" id="2264725">.</span><span class="op" id="2264726">(</span><span class="op" id="2264727">*</span><span class="ident" id="2264728">rtype</span><span class="op" id="2264733">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2264736">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2264771">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2264849">func</span>&nbsp;<span class="op" id="2264854">(</span><span class="ident" id="2264855">v</span>&nbsp;<span class="ident" id="2264857">Value</span><span class="op" id="2264862">)</span>&nbsp;<span class="ident" id="2264864">Index</span><span class="op" id="2264869">(</span><span class="ident" id="2264870">i</span>&nbsp;<span class="builtintype" id="2264872">int</span><span class="op" id="2264875">)</span>&nbsp;<span class="ident" id="2264877">Value</span>&nbsp;<span class="op" id="2264883">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264886">switch</span>&nbsp;<span class="ident" id="2264893">v</span><span class="op" id="2264894">.</span><span class="ident" id="2264895">kind</span><span class="op" id="2264899">(</span><span class="op" id="2264900">)</span>&nbsp;<span class="op" id="2264902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264905">case</span>&nbsp;<span class="ident" id="2264910">Array</span><span class="op" id="2264915">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2264919">tt</span>&nbsp;<span class="op" id="2264922">:=</span>&nbsp;<span class="op" id="2264925">(</span><span class="op" id="2264926">*</span><span class="ident" id="2264927">arrayType</span><span class="op" id="2264936">)</span><span class="op" id="2264937">(</span><span class="ident" id="2264938">unsafe</span><span class="op" id="2264944">.</span><span class="ident" id="2264945">Pointer</span><span class="op" id="2264952">(</span><span class="ident" id="2264953">v</span><span class="op" id="2264954">.</span><span class="ident" id="2264955">typ</span><span class="op" id="2264958">)</span><span class="op" id="2264959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2264963">if</span>&nbsp;<span class="builtintype" id="2264966">uint</span><span class="op" id="2264970">(</span><span class="ident" id="2264971">i</span><span class="op" id="2264972">)</span>&nbsp;<span class="op" id="2264974">&gt;=</span>&nbsp;<span class="builtintype" id="2264977">uint</span><span class="op" id="2264981">(</span><span class="ident" id="2264982">tt</span><span class="op" id="2264984">.</span><span class="builtinfunc" id="2264985">len</span><span class="op" id="2264988">)</span>&nbsp;<span class="op" id="2264990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2264995">panic</span><span class="op" id="2265000">(</span><span class="string" id="2265001">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2265036">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2265040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265044">typ</span>&nbsp;<span class="op" id="2265048">:=</span>&nbsp;<span class="ident" id="2265051">tt</span><span class="op" id="2265053">.</span><span class="ident" id="2265054">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265061">offset</span>&nbsp;<span class="op" id="2265068">:=</span>&nbsp;<span class="builtintype" id="2265071">uintptr</span><span class="op" id="2265078">(</span><span class="ident" id="2265079">i</span><span class="op" id="2265080">)</span>&nbsp;<span class="op" id="2265082">*</span>&nbsp;<span class="ident" id="2265084">typ</span><span class="op" id="2265087">.</span><span class="ident" id="2265088">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265096">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265152">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265217">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265266">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265333">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265371">val</span>&nbsp;<span class="op" id="2265375">:=</span>&nbsp;<span class="ident" id="2265378">unsafe</span><span class="op" id="2265384">.</span><span class="ident" id="2265385">Pointer</span><span class="op" id="2265392">(</span><span class="builtintype" id="2265393">uintptr</span><span class="op" id="2265400">(</span><span class="ident" id="2265401">v</span><span class="op" id="2265402">.</span><span class="ident" id="2265403">ptr</span><span class="op" id="2265406">)</span>&nbsp;<span class="op" id="2265408">+</span>&nbsp;<span class="ident" id="2265410">offset</span><span class="op" id="2265416">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265420">fl</span>&nbsp;<span class="op" id="2265423">:=</span>&nbsp;<span class="ident" id="2265426">v</span><span class="op" id="2265427">.</span><span class="ident" id="2265428">flag</span><span class="op" id="2265432">&amp;</span><span class="op" id="2265433">(</span><span class="ident" id="2265434">flagRO</span><span class="op" id="2265440">|</span><span class="ident" id="2265441">flagIndir</span><span class="op" id="2265450">|</span><span class="ident" id="2265451">flagAddr</span><span class="op" id="2265459">)</span>&nbsp;<span class="op" id="2265461">|</span>&nbsp;<span class="ident" id="2265463">flag</span><span class="op" id="2265467">(</span><span class="ident" id="2265468">typ</span><span class="op" id="2265471">.</span><span class="ident" id="2265472">Kind</span><span class="op" id="2265476">(</span><span class="op" id="2265477">)</span><span class="op" id="2265478">)</span>&nbsp;<span class="comment" id="2265480">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265512">return</span>&nbsp;<span class="ident" id="2265519">Value</span><span class="op" id="2265524">{</span><span class="ident" id="2265525">typ</span><span class="op" id="2265528">,</span>&nbsp;<span class="ident" id="2265530">val</span><span class="op" id="2265533">,</span>&nbsp;<span class="ident" id="2265535">fl</span><span class="op" id="2265537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265541">case</span>&nbsp;<span class="ident" id="2265546">Slice</span><span class="op" id="2265551">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265555">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2265594">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265642">s</span>&nbsp;<span class="op" id="2265644">:=</span>&nbsp;<span class="op" id="2265647">(</span><span class="op" id="2265648">*</span><span class="ident" id="2265649">sliceHeader</span><span class="op" id="2265660">)</span><span class="op" id="2265661">(</span><span class="ident" id="2265662">v</span><span class="op" id="2265663">.</span><span class="ident" id="2265664">ptr</span><span class="op" id="2265667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265671">if</span>&nbsp;<span class="builtintype" id="2265674">uint</span><span class="op" id="2265678">(</span><span class="ident" id="2265679">i</span><span class="op" id="2265680">)</span>&nbsp;<span class="op" id="2265682">&gt;=</span>&nbsp;<span class="builtintype" id="2265685">uint</span><span class="op" id="2265689">(</span><span class="ident" id="2265690">s</span><span class="op" id="2265691">.</span><span class="ident" id="2265692">Len</span><span class="op" id="2265695">)</span>&nbsp;<span class="op" id="2265697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2265702">panic</span><span class="op" id="2265707">(</span><span class="string" id="2265708">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2265743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2265747">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265751">tt</span>&nbsp;<span class="op" id="2265754">:=</span>&nbsp;<span class="op" id="2265757">(</span><span class="op" id="2265758">*</span><span class="ident" id="2265759">sliceType</span><span class="op" id="2265768">)</span><span class="op" id="2265769">(</span><span class="ident" id="2265770">unsafe</span><span class="op" id="2265776">.</span><span class="ident" id="2265777">Pointer</span><span class="op" id="2265784">(</span><span class="ident" id="2265785">v</span><span class="op" id="2265786">.</span><span class="ident" id="2265787">typ</span><span class="op" id="2265790">)</span><span class="op" id="2265791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265795">typ</span>&nbsp;<span class="op" id="2265799">:=</span>&nbsp;<span class="ident" id="2265802">tt</span><span class="op" id="2265804">.</span><span class="ident" id="2265805">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265812">val</span>&nbsp;<span class="op" id="2265816">:=</span>&nbsp;<span class="ident" id="2265819">unsafe</span><span class="op" id="2265825">.</span><span class="ident" id="2265826">Pointer</span><span class="op" id="2265833">(</span><span class="builtintype" id="2265834">uintptr</span><span class="op" id="2265841">(</span><span class="ident" id="2265842">s</span><span class="op" id="2265843">.</span><span class="ident" id="2265844">Data</span><span class="op" id="2265848">)</span>&nbsp;<span class="op" id="2265850">+</span>&nbsp;<span class="builtintype" id="2265852">uintptr</span><span class="op" id="2265859">(</span><span class="ident" id="2265860">i</span><span class="op" id="2265861">)</span><span class="op" id="2265862">*</span><span class="ident" id="2265863">typ</span><span class="op" id="2265866">.</span><span class="ident" id="2265867">size</span><span class="op" id="2265871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265875">fl</span>&nbsp;<span class="op" id="2265878">:=</span>&nbsp;<span class="ident" id="2265881">flagAddr</span>&nbsp;<span class="op" id="2265890">|</span>&nbsp;<span class="ident" id="2265892">flagIndir</span>&nbsp;<span class="op" id="2265902">|</span>&nbsp;<span class="ident" id="2265904">v</span><span class="op" id="2265905">.</span><span class="ident" id="2265906">flag</span><span class="op" id="2265910">&amp;</span><span class="ident" id="2265911">flagRO</span>&nbsp;<span class="op" id="2265918">|</span>&nbsp;<span class="ident" id="2265920">flag</span><span class="op" id="2265924">(</span><span class="ident" id="2265925">typ</span><span class="op" id="2265928">.</span><span class="ident" id="2265929">Kind</span><span class="op" id="2265933">(</span><span class="op" id="2265934">)</span><span class="op" id="2265935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265939">return</span>&nbsp;<span class="ident" id="2265946">Value</span><span class="op" id="2265951">{</span><span class="ident" id="2265952">typ</span><span class="op" id="2265955">,</span>&nbsp;<span class="ident" id="2265957">val</span><span class="op" id="2265960">,</span>&nbsp;<span class="ident" id="2265962">fl</span><span class="op" id="2265964">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2265968">case</span>&nbsp;<span class="ident" id="2265973">String</span><span class="op" id="2265979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2265983">s</span>&nbsp;<span class="op" id="2265985">:=</span>&nbsp;<span class="op" id="2265988">(</span><span class="op" id="2265989">*</span><span class="ident" id="2265990">stringHeader</span><span class="op" id="2266002">)</span><span class="op" id="2266003">(</span><span class="ident" id="2266004">v</span><span class="op" id="2266005">.</span><span class="ident" id="2266006">ptr</span><span class="op" id="2266009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266013">if</span>&nbsp;<span class="builtintype" id="2266016">uint</span><span class="op" id="2266020">(</span><span class="ident" id="2266021">i</span><span class="op" id="2266022">)</span>&nbsp;<span class="op" id="2266024">&gt;=</span>&nbsp;<span class="builtintype" id="2266027">uint</span><span class="op" id="2266031">(</span><span class="ident" id="2266032">s</span><span class="op" id="2266033">.</span><span class="ident" id="2266034">Len</span><span class="op" id="2266037">)</span>&nbsp;<span class="op" id="2266039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2266044">panic</span><span class="op" id="2266049">(</span><span class="string" id="2266050">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2266086">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266094">p</span>&nbsp;<span class="op" id="2266096">:=</span>&nbsp;<span class="ident" id="2266099">unsafe</span><span class="op" id="2266105">.</span><span class="ident" id="2266106">Pointer</span><span class="op" id="2266113">(</span><span class="builtintype" id="2266114">uintptr</span><span class="op" id="2266121">(</span><span class="ident" id="2266122">s</span><span class="op" id="2266123">.</span><span class="ident" id="2266124">Data</span><span class="op" id="2266128">)</span>&nbsp;<span class="op" id="2266130">+</span>&nbsp;<span class="builtintype" id="2266132">uintptr</span><span class="op" id="2266139">(</span><span class="ident" id="2266140">i</span><span class="op" id="2266141">)</span><span class="op" id="2266142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266146">fl</span>&nbsp;<span class="op" id="2266149">:=</span>&nbsp;<span class="ident" id="2266152">v</span><span class="op" id="2266153">.</span><span class="ident" id="2266154">flag</span><span class="op" id="2266158">&amp;</span><span class="ident" id="2266159">flagRO</span>&nbsp;<span class="op" id="2266166">|</span>&nbsp;<span class="ident" id="2266168">flag</span><span class="op" id="2266172">(</span><span class="ident" id="2266173">Uint8</span><span class="op" id="2266178">)</span>&nbsp;<span class="op" id="2266180">|</span>&nbsp;<span class="ident" id="2266182">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266194">return</span>&nbsp;<span class="ident" id="2266201">Value</span><span class="op" id="2266206">{</span><span class="ident" id="2266207">uint8Type</span><span class="op" id="2266216">,</span>&nbsp;<span class="ident" id="2266218">p</span><span class="op" id="2266219">,</span>&nbsp;<span class="ident" id="2266221">fl</span><span class="op" id="2266223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266226">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2266229">panic</span><span class="op" id="2266234">(</span><span class="op" id="2266235">&amp;</span><span class="ident" id="2266236">ValueError</span><span class="op" id="2266246">{</span><span class="string" id="2266247">&#34;reflect.Value.Index&#34;</span><span class="op" id="2266268">,</span>&nbsp;<span class="ident" id="2266270">v</span><span class="op" id="2266271">.</span><span class="ident" id="2266272">kind</span><span class="op" id="2266276">(</span><span class="op" id="2266277">)</span><span class="op" id="2266278">}</span><span class="op" id="2266279">)</span><br>
<span class="lineno"></span><span class="op" id="2266281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2266284">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2266334">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2266401">func</span>&nbsp;<span class="op" id="2266406">(</span><span class="ident" id="2266407">v</span>&nbsp;<span class="ident" id="2266409">Value</span><span class="op" id="2266414">)</span>&nbsp;<span class="ident" id="2266416">Int</span><span class="op" id="2266419">(</span><span class="op" id="2266420">)</span>&nbsp;<span class="ident" id="2266422">int64</span>&nbsp;<span class="op" id="2266428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266431">k</span>&nbsp;<span class="op" id="2266433">:=</span>&nbsp;<span class="ident" id="2266436">v</span><span class="op" id="2266437">.</span><span class="ident" id="2266438">kind</span><span class="op" id="2266442">(</span><span class="op" id="2266443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2266446">p</span>&nbsp;<span class="op" id="2266448">:=</span>&nbsp;<span class="ident" id="2266451">v</span><span class="op" id="2266452">.</span><span class="ident" id="2266453">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266458">switch</span>&nbsp;<span class="ident" id="2266465">k</span>&nbsp;<span class="op" id="2266467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266470">case</span>&nbsp;<span class="ident" id="2266475">Int</span><span class="op" id="2266478">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266482">return</span>&nbsp;<span class="ident" id="2266489">int64</span><span class="op" id="2266494">(</span><span class="op" id="2266495">*</span><span class="op" id="2266496">(</span><span class="op" id="2266497">*</span><span class="builtintype" id="2266498">int</span><span class="op" id="2266501">)</span><span class="op" id="2266502">(</span><span class="ident" id="2266503">p</span><span class="op" id="2266504">)</span><span class="op" id="2266505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266508">case</span>&nbsp;<span class="ident" id="2266513">Int8</span><span class="op" id="2266517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266521">return</span>&nbsp;<span class="ident" id="2266528">int64</span><span class="op" id="2266533">(</span><span class="op" id="2266534">*</span><span class="op" id="2266535">(</span><span class="op" id="2266536">*</span><span class="builtintype" id="2266537">int8</span><span class="op" id="2266541">)</span><span class="op" id="2266542">(</span><span class="ident" id="2266543">p</span><span class="op" id="2266544">)</span><span class="op" id="2266545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266548">case</span>&nbsp;<span class="ident" id="2266553">Int16</span><span class="op" id="2266558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266562">return</span>&nbsp;<span class="ident" id="2266569">int64</span><span class="op" id="2266574">(</span><span class="op" id="2266575">*</span><span class="op" id="2266576">(</span><span class="op" id="2266577">*</span><span class="builtintype" id="2266578">int16</span><span class="op" id="2266583">)</span><span class="op" id="2266584">(</span><span class="ident" id="2266585">p</span><span class="op" id="2266586">)</span><span class="op" id="2266587">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266590">case</span>&nbsp;<span class="ident" id="2266595">Int32</span><span class="op" id="2266600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266604">return</span>&nbsp;<span class="ident" id="2266611">int64</span><span class="op" id="2266616">(</span><span class="op" id="2266617">*</span><span class="op" id="2266618">(</span><span class="op" id="2266619">*</span><span class="builtintype" id="2266620">int32</span><span class="op" id="2266625">)</span><span class="op" id="2266626">(</span><span class="ident" id="2266627">p</span><span class="op" id="2266628">)</span><span class="op" id="2266629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266632">case</span>&nbsp;<span class="ident" id="2266637">Int64</span><span class="op" id="2266642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266646">return</span>&nbsp;<span class="ident" id="2266653">int64</span><span class="op" id="2266658">(</span><span class="op" id="2266659">*</span><span class="op" id="2266660">(</span><span class="op" id="2266661">*</span><span class="ident" id="2266662">int64</span><span class="op" id="2266667">)</span><span class="op" id="2266668">(</span><span class="ident" id="2266669">p</span><span class="op" id="2266670">)</span><span class="op" id="2266671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266674">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2266677">panic</span><span class="op" id="2266682">(</span><span class="op" id="2266683">&amp;</span><span class="ident" id="2266684">ValueError</span><span class="op" id="2266694">{</span><span class="string" id="2266695">&#34;reflect.Value.Int&#34;</span><span class="op" id="2266714">,</span>&nbsp;<span class="ident" id="2266716">v</span><span class="op" id="2266717">.</span><span class="ident" id="2266718">kind</span><span class="op" id="2266722">(</span><span class="op" id="2266723">)</span><span class="op" id="2266724">}</span><span class="op" id="2266725">)</span><br>
<span class="lineno"></span><span class="op" id="2266727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2266730">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2266803">func</span>&nbsp;<span class="op" id="2266808">(</span><span class="ident" id="2266809">v</span>&nbsp;<span class="ident" id="2266811">Value</span><span class="op" id="2266816">)</span>&nbsp;<span class="ident" id="2266818">CanInterface</span><span class="op" id="2266830">(</span><span class="op" id="2266831">)</span>&nbsp;<span class="builtintype" id="2266833">bool</span>&nbsp;<span class="op" id="2266838">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266841">if</span>&nbsp;<span class="ident" id="2266844">v</span><span class="op" id="2266845">.</span><span class="ident" id="2266846">flag</span>&nbsp;<span class="op" id="2266851">==</span>&nbsp;<span class="num" id="2266854">0</span>&nbsp;<span class="op" id="2266856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2266860">panic</span><span class="op" id="2266865">(</span><span class="op" id="2266866">&amp;</span><span class="ident" id="2266867">ValueError</span><span class="op" id="2266877">{</span><span class="string" id="2266878">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2266906">,</span>&nbsp;<span class="ident" id="2266908">Invalid</span><span class="op" id="2266915">}</span><span class="op" id="2266916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2266919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2266922">return</span>&nbsp;<span class="ident" id="2266929">v</span><span class="op" id="2266930">.</span><span class="ident" id="2266931">flag</span><span class="op" id="2266935">&amp;</span><span class="ident" id="2266936">flagRO</span>&nbsp;<span class="op" id="2266943">==</span>&nbsp;<span class="num" id="2266946">0</span><br>
<span class="lineno"></span><span class="op" id="2266948">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2266951">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2267009">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2267033">//&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2267079">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2267131">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2267160">func</span>&nbsp;<span class="op" id="2267165">(</span><span class="ident" id="2267166">v</span>&nbsp;<span class="ident" id="2267168">Value</span><span class="op" id="2267173">)</span>&nbsp;<span class="ident" id="2267175">Interface</span><span class="op" id="2267184">(</span><span class="op" id="2267185">)</span>&nbsp;<span class="op" id="2267187">(</span><span class="ident" id="2267188">i</span>&nbsp;<span class="keyword" id="2267190">interface</span><span class="op" id="2267199">{</span><span class="op" id="2267200">}</span><span class="op" id="2267201">)</span>&nbsp;<span class="op" id="2267203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267206">return</span>&nbsp;<span class="ident" id="2267213">valueInterface</span><span class="op" id="2267227">(</span><span class="ident" id="2267228">v</span><span class="op" id="2267229">,</span>&nbsp;<span class="builtintype" id="2267231">true</span><span class="op" id="2267235">)</span><br>
<span class="lineno"></span><span class="op" id="2267237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2267240">func</span>&nbsp;<span class="ident" id="2267245">valueInterface</span><span class="op" id="2267259">(</span><span class="ident" id="2267260">v</span>&nbsp;<span class="ident" id="2267262">Value</span><span class="op" id="2267267">,</span>&nbsp;<span class="ident" id="2267269">safe</span>&nbsp;<span class="builtintype" id="2267274">bool</span><span class="op" id="2267278">)</span>&nbsp;<span class="keyword" id="2267280">interface</span><span class="op" id="2267289">{</span><span class="op" id="2267290">}</span>&nbsp;<span class="op" id="2267292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267295">if</span>&nbsp;<span class="ident" id="2267298">v</span><span class="op" id="2267299">.</span><span class="ident" id="2267300">flag</span>&nbsp;<span class="op" id="2267305">==</span>&nbsp;<span class="num" id="2267308">0</span>&nbsp;<span class="op" id="2267310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2267314">panic</span><span class="op" id="2267319">(</span><span class="op" id="2267320">&amp;</span><span class="ident" id="2267321">ValueError</span><span class="op" id="2267331">{</span><span class="string" id="2267332">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2267357">,</span>&nbsp;<span class="num" id="2267359">0</span><span class="op" id="2267360">}</span><span class="op" id="2267361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2267364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267367">if</span>&nbsp;<span class="ident" id="2267370">safe</span>&nbsp;<span class="op" id="2267375">&amp;&amp;</span>&nbsp;<span class="ident" id="2267378">v</span><span class="op" id="2267379">.</span><span class="ident" id="2267380">flag</span><span class="op" id="2267384">&amp;</span><span class="ident" id="2267385">flagRO</span>&nbsp;<span class="op" id="2267392">!=</span>&nbsp;<span class="num" id="2267395">0</span>&nbsp;<span class="op" id="2267397">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267401">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267462">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267517">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2267583">panic</span><span class="op" id="2267588">(</span><span class="string" id="2267589">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2267676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2267679">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267682">if</span>&nbsp;<span class="ident" id="2267685">v</span><span class="op" id="2267686">.</span><span class="ident" id="2267687">flag</span><span class="op" id="2267691">&amp;</span><span class="ident" id="2267692">flagMethod</span>&nbsp;<span class="op" id="2267703">!=</span>&nbsp;<span class="num" id="2267706">0</span>&nbsp;<span class="op" id="2267708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2267712">v</span>&nbsp;<span class="op" id="2267714">=</span>&nbsp;<span class="ident" id="2267716">makeMethodValue</span><span class="op" id="2267731">(</span><span class="string" id="2267732">&#34;Interface&#34;</span><span class="op" id="2267743">,</span>&nbsp;<span class="ident" id="2267745">v</span><span class="op" id="2267746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2267749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267753">if</span>&nbsp;<span class="ident" id="2267756">v</span><span class="op" id="2267757">.</span><span class="ident" id="2267758">kind</span><span class="op" id="2267762">(</span><span class="op" id="2267763">)</span>&nbsp;<span class="op" id="2267765">==</span>&nbsp;<span class="ident" id="2267768">Interface</span>&nbsp;<span class="op" id="2267778">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267782">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267842">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2267899">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267934">if</span>&nbsp;<span class="ident" id="2267937">v</span><span class="op" id="2267938">.</span><span class="ident" id="2267939">NumMethod</span><span class="op" id="2267948">(</span><span class="op" id="2267949">)</span>&nbsp;<span class="op" id="2267951">==</span>&nbsp;<span class="num" id="2267954">0</span>&nbsp;<span class="op" id="2267956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267961">return</span>&nbsp;<span class="op" id="2267968">*</span><span class="op" id="2267969">(</span><span class="op" id="2267970">*</span><span class="keyword" id="2267971">interface</span><span class="op" id="2267980">{</span><span class="op" id="2267981">}</span><span class="op" id="2267982">)</span><span class="op" id="2267983">(</span><span class="ident" id="2267984">v</span><span class="op" id="2267985">.</span><span class="ident" id="2267986">ptr</span><span class="op" id="2267989">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2267993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2267997">return</span>&nbsp;<span class="op" id="2268004">*</span><span class="op" id="2268005">(</span><span class="op" id="2268006">*</span><span class="keyword" id="2268007">interface</span>&nbsp;<span class="op" id="2268017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268022">M</span><span class="op" id="2268023">(</span><span class="op" id="2268024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2268028">}</span><span class="op" id="2268029">)</span><span class="op" id="2268030">(</span><span class="ident" id="2268031">v</span><span class="op" id="2268032">.</span><span class="ident" id="2268033">ptr</span><span class="op" id="2268036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2268039">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268043">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2268116">return</span>&nbsp;<span class="ident" id="2268123">packEface</span><span class="op" id="2268132">(</span><span class="ident" id="2268133">v</span><span class="op" id="2268134">)</span><br>
<span class="lineno"></span><span class="op" id="2268136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2268139">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2268207">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2268250">func</span>&nbsp;<span class="op" id="2268255">(</span><span class="ident" id="2268256">v</span>&nbsp;<span class="ident" id="2268258">Value</span><span class="op" id="2268263">)</span>&nbsp;<span class="ident" id="2268265">InterfaceData</span><span class="op" id="2268278">(</span><span class="op" id="2268279">)</span>&nbsp;<span class="op" id="2268281">[</span><span class="num" id="2268282">2</span><span class="op" id="2268283">]</span><span class="builtintype" id="2268284">uintptr</span>&nbsp;<span class="op" id="2268292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268295">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2268320">v</span><span class="op" id="2268321">.</span><span class="ident" id="2268322">mustBe</span><span class="op" id="2268328">(</span><span class="ident" id="2268329">Interface</span><span class="op" id="2268338">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268341">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268392">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268444">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268497">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2268521">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2268589">return</span>&nbsp;<span class="op" id="2268596">*</span><span class="op" id="2268597">(</span><span class="op" id="2268598">*</span><span class="op" id="2268599">[</span><span class="num" id="2268600">2</span><span class="op" id="2268601">]</span><span class="builtintype" id="2268602">uintptr</span><span class="op" id="2268609">)</span><span class="op" id="2268610">(</span><span class="ident" id="2268611">v</span><span class="op" id="2268612">.</span><span class="ident" id="2268613">ptr</span><span class="op" id="2268616">)</span><br>
<span class="lineno"></span><span class="op" id="2268618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2268621">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2268690">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2268757">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2268825">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2268893">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2268959">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2269027">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2269037">func</span>&nbsp;<span class="op" id="2269042">(</span><span class="ident" id="2269043">v</span>&nbsp;<span class="ident" id="2269045">Value</span><span class="op" id="2269050">)</span>&nbsp;<span class="ident" id="2269052">IsNil</span><span class="op" id="2269057">(</span><span class="op" id="2269058">)</span>&nbsp;<span class="builtintype" id="2269060">bool</span>&nbsp;<span class="op" id="2269065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269068">k</span>&nbsp;<span class="op" id="2269070">:=</span>&nbsp;<span class="ident" id="2269073">v</span><span class="op" id="2269074">.</span><span class="ident" id="2269075">kind</span><span class="op" id="2269079">(</span><span class="op" id="2269080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269083">switch</span>&nbsp;<span class="ident" id="2269090">k</span>&nbsp;<span class="op" id="2269092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269095">case</span>&nbsp;<span class="ident" id="2269100">Chan</span><span class="op" id="2269104">,</span>&nbsp;<span class="ident" id="2269106">Func</span><span class="op" id="2269110">,</span>&nbsp;<span class="ident" id="2269112">Map</span><span class="op" id="2269115">,</span>&nbsp;<span class="ident" id="2269117">Ptr</span><span class="op" id="2269120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269124">if</span>&nbsp;<span class="ident" id="2269127">v</span><span class="op" id="2269128">.</span><span class="ident" id="2269129">flag</span><span class="op" id="2269133">&amp;</span><span class="ident" id="2269134">flagMethod</span>&nbsp;<span class="op" id="2269145">!=</span>&nbsp;<span class="num" id="2269148">0</span>&nbsp;<span class="op" id="2269150">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269155">return</span>&nbsp;<span class="builtintype" id="2269162">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2269170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269174">ptr</span>&nbsp;<span class="op" id="2269178">:=</span>&nbsp;<span class="ident" id="2269181">v</span><span class="op" id="2269182">.</span><span class="ident" id="2269183">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269189">if</span>&nbsp;<span class="ident" id="2269192">v</span><span class="op" id="2269193">.</span><span class="ident" id="2269194">flag</span><span class="op" id="2269198">&amp;</span><span class="ident" id="2269199">flagIndir</span>&nbsp;<span class="op" id="2269209">!=</span>&nbsp;<span class="num" id="2269212">0</span>&nbsp;<span class="op" id="2269214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2269219">ptr</span>&nbsp;<span class="op" id="2269223">=</span>&nbsp;<span class="op" id="2269225">*</span><span class="op" id="2269226">(</span><span class="op" id="2269227">*</span><span class="ident" id="2269228">unsafe</span><span class="op" id="2269234">.</span><span class="ident" id="2269235">Pointer</span><span class="op" id="2269242">)</span><span class="op" id="2269243">(</span><span class="ident" id="2269244">ptr</span><span class="op" id="2269247">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2269251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269255">return</span>&nbsp;<span class="ident" id="2269262">ptr</span>&nbsp;<span class="op" id="2269266">==</span>&nbsp;<span class="ident" id="2269269">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269274">case</span>&nbsp;<span class="ident" id="2269279">Interface</span><span class="op" id="2269288">,</span>&nbsp;<span class="ident" id="2269290">Slice</span><span class="op" id="2269295">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269299">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2269357">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269416">return</span>&nbsp;<span class="op" id="2269423">*</span><span class="op" id="2269424">(</span><span class="op" id="2269425">*</span><span class="ident" id="2269426">unsafe</span><span class="op" id="2269432">.</span><span class="ident" id="2269433">Pointer</span><span class="op" id="2269440">)</span><span class="op" id="2269441">(</span><span class="ident" id="2269442">v</span><span class="op" id="2269443">.</span><span class="ident" id="2269444">ptr</span><span class="op" id="2269447">)</span>&nbsp;<span class="op" id="2269449">==</span>&nbsp;<span class="ident" id="2269452">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2269457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2269460">panic</span><span class="op" id="2269465">(</span><span class="op" id="2269466">&amp;</span><span class="ident" id="2269467">ValueError</span><span class="op" id="2269477">{</span><span class="string" id="2269478">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2269499">,</span>&nbsp;<span class="ident" id="2269501">v</span><span class="op" id="2269502">.</span><span class="ident" id="2269503">kind</span><span class="op" id="2269507">(</span><span class="op" id="2269508">)</span><span class="op" id="2269509">}</span><span class="op" id="2269510">)</span><br>
<span class="lineno"></span><span class="op" id="2269512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2269515">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2269564">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2269608">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2269676">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2269737">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2269805">func</span>&nbsp;<span class="op" id="2269810">(</span><span class="ident" id="2269811">v</span>&nbsp;<span class="ident" id="2269813">Value</span><span class="op" id="2269818">)</span>&nbsp;<span class="ident" id="2269820">IsValid</span><span class="op" id="2269827">(</span><span class="op" id="2269828">)</span>&nbsp;<span class="builtintype" id="2269830">bool</span>&nbsp;<span class="op" id="2269835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269838">return</span>&nbsp;<span class="ident" id="2269845">v</span><span class="op" id="2269846">.</span><span class="ident" id="2269847">flag</span>&nbsp;<span class="op" id="2269852">!=</span>&nbsp;<span class="num" id="2269855">0</span><br>
<span class="lineno"></span><span class="op" id="2269857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2269860">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2269886">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2269959">func</span>&nbsp;<span class="op" id="2269964">(</span><span class="ident" id="2269965">v</span>&nbsp;<span class="ident" id="2269967">Value</span><span class="op" id="2269972">)</span>&nbsp;<span class="ident" id="2269974">Kind</span><span class="op" id="2269978">(</span><span class="op" id="2269979">)</span>&nbsp;<span class="ident" id="2269981">Kind</span>&nbsp;<span class="op" id="2269986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2269989">return</span>&nbsp;<span class="ident" id="2269996">v</span><span class="op" id="2269997">.</span><span class="ident" id="2269998">kind</span><span class="op" id="2270002">(</span><span class="op" id="2270003">)</span><br>
<span class="lineno"></span><span class="op" id="2270005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2270008">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2270035">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2270103">func</span>&nbsp;<span class="op" id="2270108">(</span><span class="ident" id="2270109">v</span>&nbsp;<span class="ident" id="2270111">Value</span><span class="op" id="2270116">)</span>&nbsp;<span class="ident" id="2270118">Len</span><span class="op" id="2270121">(</span><span class="op" id="2270122">)</span>&nbsp;<span class="builtintype" id="2270124">int</span>&nbsp;<span class="op" id="2270128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270131">k</span>&nbsp;<span class="op" id="2270133">:=</span>&nbsp;<span class="ident" id="2270136">v</span><span class="op" id="2270137">.</span><span class="ident" id="2270138">kind</span><span class="op" id="2270142">(</span><span class="op" id="2270143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270146">switch</span>&nbsp;<span class="ident" id="2270153">k</span>&nbsp;<span class="op" id="2270155">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270158">case</span>&nbsp;<span class="ident" id="2270163">Array</span><span class="op" id="2270168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270172">tt</span>&nbsp;<span class="op" id="2270175">:=</span>&nbsp;<span class="op" id="2270178">(</span><span class="op" id="2270179">*</span><span class="ident" id="2270180">arrayType</span><span class="op" id="2270189">)</span><span class="op" id="2270190">(</span><span class="ident" id="2270191">unsafe</span><span class="op" id="2270197">.</span><span class="ident" id="2270198">Pointer</span><span class="op" id="2270205">(</span><span class="ident" id="2270206">v</span><span class="op" id="2270207">.</span><span class="ident" id="2270208">typ</span><span class="op" id="2270211">)</span><span class="op" id="2270212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270216">return</span>&nbsp;<span class="builtintype" id="2270223">int</span><span class="op" id="2270226">(</span><span class="ident" id="2270227">tt</span><span class="op" id="2270229">.</span><span class="builtinfunc" id="2270230">len</span><span class="op" id="2270233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270236">case</span>&nbsp;<span class="ident" id="2270241">Chan</span><span class="op" id="2270245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270249">return</span>&nbsp;<span class="ident" id="2270256">chanlen</span><span class="op" id="2270263">(</span><span class="ident" id="2270264">v</span><span class="op" id="2270265">.</span><span class="ident" id="2270266">pointer</span><span class="op" id="2270273">(</span><span class="op" id="2270274">)</span><span class="op" id="2270275">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270278">case</span>&nbsp;<span class="ident" id="2270283">Map</span><span class="op" id="2270286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270290">return</span>&nbsp;<span class="ident" id="2270297">maplen</span><span class="op" id="2270303">(</span><span class="ident" id="2270304">v</span><span class="op" id="2270305">.</span><span class="ident" id="2270306">pointer</span><span class="op" id="2270313">(</span><span class="op" id="2270314">)</span><span class="op" id="2270315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270318">case</span>&nbsp;<span class="ident" id="2270323">Slice</span><span class="op" id="2270328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270332">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270384">return</span>&nbsp;<span class="op" id="2270391">(</span><span class="op" id="2270392">*</span><span class="ident" id="2270393">sliceHeader</span><span class="op" id="2270404">)</span><span class="op" id="2270405">(</span><span class="ident" id="2270406">v</span><span class="op" id="2270407">.</span><span class="ident" id="2270408">ptr</span><span class="op" id="2270411">)</span><span class="op" id="2270412">.</span><span class="ident" id="2270413">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270418">case</span>&nbsp;<span class="ident" id="2270423">String</span><span class="op" id="2270429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270433">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2270486">return</span>&nbsp;<span class="op" id="2270493">(</span><span class="op" id="2270494">*</span><span class="ident" id="2270495">stringHeader</span><span class="op" id="2270507">)</span><span class="op" id="2270508">(</span><span class="ident" id="2270509">v</span><span class="op" id="2270510">.</span><span class="ident" id="2270511">ptr</span><span class="op" id="2270514">)</span><span class="op" id="2270515">.</span><span class="ident" id="2270516">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2270521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2270524">panic</span><span class="op" id="2270529">(</span><span class="op" id="2270530">&amp;</span><span class="ident" id="2270531">ValueError</span><span class="op" id="2270541">{</span><span class="string" id="2270542">&#34;reflect.Value.Len&#34;</span><span class="op" id="2270561">,</span>&nbsp;<span class="ident" id="2270563">v</span><span class="op" id="2270564">.</span><span class="ident" id="2270565">kind</span><span class="op" id="2270569">(</span><span class="op" id="2270570">)</span><span class="op" id="2270571">}</span><span class="op" id="2270572">)</span><br>
<span class="lineno">980</span><span class="op" id="2270574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2270577">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2270641">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2270678">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2270768">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2270839">func</span>&nbsp;<span class="op" id="2270844">(</span><span class="ident" id="2270845">v</span>&nbsp;<span class="ident" id="2270847">Value</span><span class="op" id="2270852">)</span>&nbsp;<span class="ident" id="2270854">MapIndex</span><span class="op" id="2270862">(</span><span class="ident" id="2270863">key</span>&nbsp;<span class="ident" id="2270867">Value</span><span class="op" id="2270872">)</span>&nbsp;<span class="ident" id="2270874">Value</span>&nbsp;<span class="op" id="2270880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270883">v</span><span class="op" id="2270884">.</span><span class="ident" id="2270885">mustBe</span><span class="op" id="2270891">(</span><span class="ident" id="2270892">Map</span><span class="op" id="2270895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2270898">tt</span>&nbsp;<span class="op" id="2270901">:=</span>&nbsp;<span class="op" id="2270904">(</span><span class="op" id="2270905">*</span><span class="ident" id="2270906">mapType</span><span class="op" id="2270913">)</span><span class="op" id="2270914">(</span><span class="ident" id="2270915">unsafe</span><span class="op" id="2270921">.</span><span class="ident" id="2270922">Pointer</span><span class="op" id="2270929">(</span><span class="ident" id="2270930">v</span><span class="op" id="2270931">.</span><span class="ident" id="2270932">typ</span><span class="op" id="2270935">)</span><span class="op" id="2270936">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270940">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2270997">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271053">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271110">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271167">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271223">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271280">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271306">key</span>&nbsp;<span class="op" id="2271310">=</span>&nbsp;<span class="ident" id="2271312">key</span><span class="op" id="2271315">.</span><span class="ident" id="2271316">assignTo</span><span class="op" id="2271324">(</span><span class="string" id="2271325">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2271349">,</span>&nbsp;<span class="ident" id="2271351">tt</span><span class="op" id="2271353">.</span><span class="ident" id="2271354">key</span><span class="op" id="2271357">,</span>&nbsp;<span class="ident" id="2271359">nil</span><span class="op" id="2271362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271366">var</span>&nbsp;<span class="ident" id="2271370">k</span>&nbsp;<span class="ident" id="2271372">unsafe</span><span class="op" id="2271378">.</span><span class="ident" id="2271379">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271388">if</span>&nbsp;<span class="ident" id="2271391">key</span><span class="op" id="2271394">.</span><span class="ident" id="2271395">flag</span><span class="op" id="2271399">&amp;</span><span class="ident" id="2271400">flagIndir</span>&nbsp;<span class="op" id="2271410">!=</span>&nbsp;<span class="num" id="2271413">0</span>&nbsp;<span class="op" id="2271415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271419">k</span>&nbsp;<span class="op" id="2271421">=</span>&nbsp;<span class="ident" id="2271423">key</span><span class="op" id="2271426">.</span><span class="ident" id="2271427">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271432">}</span>&nbsp;<span class="keyword" id="2271434">else</span>&nbsp;<span class="op" id="2271439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271443">k</span>&nbsp;<span class="op" id="2271445">=</span>&nbsp;<span class="ident" id="2271447">unsafe</span><span class="op" id="2271453">.</span><span class="ident" id="2271454">Pointer</span><span class="op" id="2271461">(</span><span class="op" id="2271462">&amp;</span><span class="ident" id="2271463">key</span><span class="op" id="2271466">.</span><span class="ident" id="2271467">ptr</span><span class="op" id="2271470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271473">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271476">e</span>&nbsp;<span class="op" id="2271478">:=</span>&nbsp;<span class="ident" id="2271481">mapaccess</span><span class="op" id="2271490">(</span><span class="ident" id="2271491">v</span><span class="op" id="2271492">.</span><span class="ident" id="2271493">typ</span><span class="op" id="2271496">,</span>&nbsp;<span class="ident" id="2271498">v</span><span class="op" id="2271499">.</span><span class="ident" id="2271500">pointer</span><span class="op" id="2271507">(</span><span class="op" id="2271508">)</span><span class="op" id="2271509">,</span>&nbsp;<span class="ident" id="2271511">k</span><span class="op" id="2271512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271515">if</span>&nbsp;<span class="ident" id="2271518">e</span>&nbsp;<span class="op" id="2271520">==</span>&nbsp;<span class="ident" id="2271523">nil</span>&nbsp;<span class="op" id="2271527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271531">return</span>&nbsp;<span class="ident" id="2271538">Value</span><span class="op" id="2271543">{</span><span class="op" id="2271544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271550">typ</span>&nbsp;<span class="op" id="2271554">:=</span>&nbsp;<span class="ident" id="2271557">tt</span><span class="op" id="2271559">.</span><span class="ident" id="2271560">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271566">fl</span>&nbsp;<span class="op" id="2271569">:=</span>&nbsp;<span class="op" id="2271572">(</span><span class="ident" id="2271573">v</span><span class="op" id="2271574">.</span><span class="ident" id="2271575">flag</span>&nbsp;<span class="op" id="2271580">|</span>&nbsp;<span class="ident" id="2271582">key</span><span class="op" id="2271585">.</span><span class="ident" id="2271586">flag</span><span class="op" id="2271590">)</span>&nbsp;<span class="op" id="2271592">&amp;</span>&nbsp;<span class="ident" id="2271594">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271602">fl</span>&nbsp;<span class="op" id="2271605">|=</span>&nbsp;<span class="ident" id="2271608">flag</span><span class="op" id="2271612">(</span><span class="ident" id="2271613">typ</span><span class="op" id="2271616">.</span><span class="ident" id="2271617">Kind</span><span class="op" id="2271621">(</span><span class="op" id="2271622">)</span><span class="op" id="2271623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271626">if</span>&nbsp;<span class="ident" id="2271629">ifaceIndir</span><span class="op" id="2271639">(</span><span class="ident" id="2271640">typ</span><span class="op" id="2271643">)</span>&nbsp;<span class="op" id="2271645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271649">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2271695">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271735">c</span>&nbsp;<span class="op" id="2271737">:=</span>&nbsp;<span class="ident" id="2271740">unsafe_New</span><span class="op" id="2271750">(</span><span class="ident" id="2271751">typ</span><span class="op" id="2271754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2271758">memmove</span><span class="op" id="2271765">(</span><span class="ident" id="2271766">c</span><span class="op" id="2271767">,</span>&nbsp;<span class="ident" id="2271769">e</span><span class="op" id="2271770">,</span>&nbsp;<span class="ident" id="2271772">typ</span><span class="op" id="2271775">.</span><span class="ident" id="2271776">size</span><span class="op" id="2271780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271784">return</span>&nbsp;<span class="ident" id="2271791">Value</span><span class="op" id="2271796">{</span><span class="ident" id="2271797">typ</span><span class="op" id="2271800">,</span>&nbsp;<span class="ident" id="2271802">c</span><span class="op" id="2271803">,</span>&nbsp;<span class="ident" id="2271805">fl</span>&nbsp;<span class="op" id="2271808">|</span>&nbsp;<span class="ident" id="2271810">flagIndir</span><span class="op" id="2271819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271822">}</span>&nbsp;<span class="keyword" id="2271824">else</span>&nbsp;<span class="op" id="2271829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2271833">return</span>&nbsp;<span class="ident" id="2271840">Value</span><span class="op" id="2271845">{</span><span class="ident" id="2271846">typ</span><span class="op" id="2271849">,</span>&nbsp;<span class="op" id="2271851">*</span><span class="op" id="2271852">(</span><span class="op" id="2271853">*</span><span class="ident" id="2271854">unsafe</span><span class="op" id="2271860">.</span><span class="ident" id="2271861">Pointer</span><span class="op" id="2271868">)</span><span class="op" id="2271869">(</span><span class="ident" id="2271870">e</span><span class="op" id="2271871">)</span><span class="op" id="2271872">,</span>&nbsp;<span class="ident" id="2271874">fl</span><span class="op" id="2271876">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2271879">}</span><br>
<span class="lineno"></span><span class="op" id="2271881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2271884">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2271955">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2271980">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2272017">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2272073">func</span>&nbsp;<span class="op" id="2272078">(</span><span class="ident" id="2272079">v</span>&nbsp;<span class="ident" id="2272081">Value</span><span class="op" id="2272086">)</span>&nbsp;<span class="ident" id="2272088">MapKeys</span><span class="op" id="2272095">(</span><span class="op" id="2272096">)</span>&nbsp;<span class="op" id="2272098">[</span><span class="op" id="2272099">]</span><span class="ident" id="2272100">Value</span>&nbsp;<span class="op" id="2272106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272109">v</span><span class="op" id="2272110">.</span><span class="ident" id="2272111">mustBe</span><span class="op" id="2272117">(</span><span class="ident" id="2272118">Map</span><span class="op" id="2272121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272124">tt</span>&nbsp;<span class="op" id="2272127">:=</span>&nbsp;<span class="op" id="2272130">(</span><span class="op" id="2272131">*</span><span class="ident" id="2272132">mapType</span><span class="op" id="2272139">)</span><span class="op" id="2272140">(</span><span class="ident" id="2272141">unsafe</span><span class="op" id="2272147">.</span><span class="ident" id="2272148">Pointer</span><span class="op" id="2272155">(</span><span class="ident" id="2272156">v</span><span class="op" id="2272157">.</span><span class="ident" id="2272158">typ</span><span class="op" id="2272161">)</span><span class="op" id="2272162">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272165">keyType</span>&nbsp;<span class="op" id="2272173">:=</span>&nbsp;<span class="ident" id="2272176">tt</span><span class="op" id="2272178">.</span><span class="ident" id="2272179">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272185">fl</span>&nbsp;<span class="op" id="2272188">:=</span>&nbsp;<span class="ident" id="2272191">v</span><span class="op" id="2272192">.</span><span class="ident" id="2272193">flag</span><span class="op" id="2272197">&amp;</span><span class="ident" id="2272198">flagRO</span>&nbsp;<span class="op" id="2272205">|</span>&nbsp;<span class="ident" id="2272207">flag</span><span class="op" id="2272211">(</span><span class="ident" id="2272212">keyType</span><span class="op" id="2272219">.</span><span class="ident" id="2272220">Kind</span><span class="op" id="2272224">(</span><span class="op" id="2272225">)</span><span class="op" id="2272226">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272230">m</span>&nbsp;<span class="op" id="2272232">:=</span>&nbsp;<span class="ident" id="2272235">v</span><span class="op" id="2272236">.</span><span class="ident" id="2272237">pointer</span><span class="op" id="2272244">(</span><span class="op" id="2272245">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272248">mlen</span>&nbsp;<span class="op" id="2272253">:=</span>&nbsp;<span class="builtintype" id="2272256">int</span><span class="op" id="2272259">(</span><span class="num" id="2272260">0</span><span class="op" id="2272261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272264">if</span>&nbsp;<span class="ident" id="2272267">m</span>&nbsp;<span class="op" id="2272269">!=</span>&nbsp;<span class="ident" id="2272272">nil</span>&nbsp;<span class="op" id="2272276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272280">mlen</span>&nbsp;<span class="op" id="2272285">=</span>&nbsp;<span class="ident" id="2272287">maplen</span><span class="op" id="2272293">(</span><span class="ident" id="2272294">m</span><span class="op" id="2272295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272301">it</span>&nbsp;<span class="op" id="2272304">:=</span>&nbsp;<span class="ident" id="2272307">mapiterinit</span><span class="op" id="2272318">(</span><span class="ident" id="2272319">v</span><span class="op" id="2272320">.</span><span class="ident" id="2272321">typ</span><span class="op" id="2272324">,</span>&nbsp;<span class="ident" id="2272326">m</span><span class="op" id="2272327">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272330">a</span>&nbsp;<span class="op" id="2272332">:=</span>&nbsp;<span class="builtinfunc" id="2272335">make</span><span class="op" id="2272339">(</span><span class="op" id="2272340">[</span><span class="op" id="2272341">]</span><span class="ident" id="2272342">Value</span><span class="op" id="2272347">,</span>&nbsp;<span class="ident" id="2272349">mlen</span><span class="op" id="2272353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272356">var</span>&nbsp;<span class="ident" id="2272360">i</span>&nbsp;<span class="builtintype" id="2272362">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272367">for</span>&nbsp;<span class="ident" id="2272371">i</span>&nbsp;<span class="op" id="2272373">=</span>&nbsp;<span class="num" id="2272375">0</span><span class="op" id="2272376">;</span>&nbsp;<span class="ident" id="2272378">i</span>&nbsp;<span class="op" id="2272380">&lt;</span>&nbsp;<span class="builtinfunc" id="2272382">len</span><span class="op" id="2272385">(</span><span class="ident" id="2272386">a</span><span class="op" id="2272387">)</span><span class="op" id="2272388">;</span>&nbsp;<span class="ident" id="2272390">i</span><span class="op" id="2272391">++</span>&nbsp;<span class="op" id="2272394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272398">key</span>&nbsp;<span class="op" id="2272402">:=</span>&nbsp;<span class="ident" id="2272405">mapiterkey</span><span class="op" id="2272415">(</span><span class="ident" id="2272416">it</span><span class="op" id="2272418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272422">if</span>&nbsp;<span class="ident" id="2272425">key</span>&nbsp;<span class="op" id="2272429">==</span>&nbsp;<span class="ident" id="2272432">nil</span>&nbsp;<span class="op" id="2272436">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272441">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272494">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272552">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272578">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272586">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272590">if</span>&nbsp;<span class="ident" id="2272593">ifaceIndir</span><span class="op" id="2272603">(</span><span class="ident" id="2272604">keyType</span><span class="op" id="2272611">)</span>&nbsp;<span class="op" id="2272613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272618">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2272665">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272706">c</span>&nbsp;<span class="op" id="2272708">:=</span>&nbsp;<span class="ident" id="2272711">unsafe_New</span><span class="op" id="2272721">(</span><span class="ident" id="2272722">keyType</span><span class="op" id="2272729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272734">memmove</span><span class="op" id="2272741">(</span><span class="ident" id="2272742">c</span><span class="op" id="2272743">,</span>&nbsp;<span class="ident" id="2272745">key</span><span class="op" id="2272748">,</span>&nbsp;<span class="ident" id="2272750">keyType</span><span class="op" id="2272757">.</span><span class="ident" id="2272758">size</span><span class="op" id="2272762">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272767">a</span><span class="op" id="2272768">[</span><span class="ident" id="2272769">i</span><span class="op" id="2272770">]</span>&nbsp;<span class="op" id="2272772">=</span>&nbsp;<span class="ident" id="2272774">Value</span><span class="op" id="2272779">{</span><span class="ident" id="2272780">keyType</span><span class="op" id="2272787">,</span>&nbsp;<span class="ident" id="2272789">c</span><span class="op" id="2272790">,</span>&nbsp;<span class="ident" id="2272792">fl</span>&nbsp;<span class="op" id="2272795">|</span>&nbsp;<span class="ident" id="2272797">flagIndir</span><span class="op" id="2272806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272810">}</span>&nbsp;<span class="keyword" id="2272812">else</span>&nbsp;<span class="op" id="2272817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272822">a</span><span class="op" id="2272823">[</span><span class="ident" id="2272824">i</span><span class="op" id="2272825">]</span>&nbsp;<span class="op" id="2272827">=</span>&nbsp;<span class="ident" id="2272829">Value</span><span class="op" id="2272834">{</span><span class="ident" id="2272835">keyType</span><span class="op" id="2272842">,</span>&nbsp;<span class="op" id="2272844">*</span><span class="op" id="2272845">(</span><span class="op" id="2272846">*</span><span class="ident" id="2272847">unsafe</span><span class="op" id="2272853">.</span><span class="ident" id="2272854">Pointer</span><span class="op" id="2272861">)</span><span class="op" id="2272862">(</span><span class="ident" id="2272863">key</span><span class="op" id="2272866">)</span><span class="op" id="2272867">,</span>&nbsp;<span class="ident" id="2272869">fl</span><span class="op" id="2272871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2272879">mapiternext</span><span class="op" id="2272890">(</span><span class="ident" id="2272891">it</span><span class="op" id="2272893">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2272896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2272899">return</span>&nbsp;<span class="ident" id="2272906">a</span><span class="op" id="2272907">[</span><span class="op" id="2272908">:</span><span class="ident" id="2272909">i</span><span class="op" id="2272910">]</span><br>
<span class="lineno"></span><span class="op" id="2272912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2272915">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2272984">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2273055">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2273127">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2273199">func</span>&nbsp;<span class="op" id="2273204">(</span><span class="ident" id="2273205">v</span>&nbsp;<span class="ident" id="2273207">Value</span><span class="op" id="2273212">)</span>&nbsp;<span class="ident" id="2273214">Method</span><span class="op" id="2273220">(</span><span class="ident" id="2273221">i</span>&nbsp;<span class="builtintype" id="2273223">int</span><span class="op" id="2273226">)</span>&nbsp;<span class="ident" id="2273228">Value</span>&nbsp;<span class="op" id="2273234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273237">if</span>&nbsp;<span class="ident" id="2273240">v</span><span class="op" id="2273241">.</span><span class="ident" id="2273242">typ</span>&nbsp;<span class="op" id="2273246">==</span>&nbsp;<span class="ident" id="2273249">nil</span>&nbsp;<span class="op" id="2273253">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2273257">panic</span><span class="op" id="2273262">(</span><span class="op" id="2273263">&amp;</span><span class="ident" id="2273264">ValueError</span><span class="op" id="2273274">{</span><span class="string" id="2273275">&#34;reflect.Value.Method&#34;</span><span class="op" id="2273297">,</span>&nbsp;<span class="ident" id="2273299">Invalid</span><span class="op" id="2273306">}</span><span class="op" id="2273307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273313">if</span>&nbsp;<span class="ident" id="2273316">v</span><span class="op" id="2273317">.</span><span class="ident" id="2273318">flag</span><span class="op" id="2273322">&amp;</span><span class="ident" id="2273323">flagMethod</span>&nbsp;<span class="op" id="2273334">!=</span>&nbsp;<span class="num" id="2273337">0</span>&nbsp;<span class="op" id="2273339">||</span>&nbsp;<span class="builtintype" id="2273342">uint</span><span class="op" id="2273346">(</span><span class="ident" id="2273347">i</span><span class="op" id="2273348">)</span>&nbsp;<span class="op" id="2273350">&gt;=</span>&nbsp;<span class="builtintype" id="2273353">uint</span><span class="op" id="2273357">(</span><span class="ident" id="2273358">v</span><span class="op" id="2273359">.</span><span class="ident" id="2273360">typ</span><span class="op" id="2273363">.</span><span class="ident" id="2273364">NumMethod</span><span class="op" id="2273373">(</span><span class="op" id="2273374">)</span><span class="op" id="2273375">)</span>&nbsp;<span class="op" id="2273377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2273381">panic</span><span class="op" id="2273386">(</span><span class="string" id="2273387">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2273423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273426">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273429">if</span>&nbsp;<span class="ident" id="2273432">v</span><span class="op" id="2273433">.</span><span class="ident" id="2273434">typ</span><span class="op" id="2273437">.</span><span class="ident" id="2273438">Kind</span><span class="op" id="2273442">(</span><span class="op" id="2273443">)</span>&nbsp;<span class="op" id="2273445">==</span>&nbsp;<span class="ident" id="2273448">Interface</span>&nbsp;<span class="op" id="2273458">&amp;&amp;</span>&nbsp;<span class="ident" id="2273461">v</span><span class="op" id="2273462">.</span><span class="ident" id="2273463">IsNil</span><span class="op" id="2273468">(</span><span class="op" id="2273469">)</span>&nbsp;<span class="op" id="2273471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2273475">panic</span><span class="op" id="2273480">(</span><span class="string" id="2273481">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2273521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273527">fl</span>&nbsp;<span class="op" id="2273530">:=</span>&nbsp;<span class="ident" id="2273533">v</span><span class="op" id="2273534">.</span><span class="ident" id="2273535">flag</span>&nbsp;<span class="op" id="2273540">&amp;</span>&nbsp;<span class="op" id="2273542">(</span><span class="ident" id="2273543">flagRO</span>&nbsp;<span class="op" id="2273550">|</span>&nbsp;<span class="ident" id="2273552">flagIndir</span><span class="op" id="2273561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273564">fl</span>&nbsp;<span class="op" id="2273567">|=</span>&nbsp;<span class="ident" id="2273570">flag</span><span class="op" id="2273574">(</span><span class="ident" id="2273575">Func</span><span class="op" id="2273579">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2273582">fl</span>&nbsp;<span class="op" id="2273585">|=</span>&nbsp;<span class="ident" id="2273588">flag</span><span class="op" id="2273592">(</span><span class="ident" id="2273593">i</span><span class="op" id="2273594">)</span><span class="op" id="2273595">&lt;&lt;</span><span class="ident" id="2273597">flagMethodShift</span>&nbsp;<span class="op" id="2273613">|</span>&nbsp;<span class="ident" id="2273615">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273627">return</span>&nbsp;<span class="ident" id="2273634">Value</span><span class="op" id="2273639">{</span><span class="ident" id="2273640">v</span><span class="op" id="2273641">.</span><span class="ident" id="2273642">typ</span><span class="op" id="2273645">,</span>&nbsp;<span class="ident" id="2273647">v</span><span class="op" id="2273648">.</span><span class="ident" id="2273649">ptr</span><span class="op" id="2273652">,</span>&nbsp;<span class="ident" id="2273654">fl</span><span class="op" id="2273656">}</span><br>
<span class="lineno"></span><span class="op" id="2273658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2273661">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2273731">func</span>&nbsp;<span class="op" id="2273736">(</span><span class="ident" id="2273737">v</span>&nbsp;<span class="ident" id="2273739">Value</span><span class="op" id="2273744">)</span>&nbsp;<span class="ident" id="2273746">NumMethod</span><span class="op" id="2273755">(</span><span class="op" id="2273756">)</span>&nbsp;<span class="builtintype" id="2273758">int</span>&nbsp;<span class="op" id="2273762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273765">if</span>&nbsp;<span class="ident" id="2273768">v</span><span class="op" id="2273769">.</span><span class="ident" id="2273770">typ</span>&nbsp;<span class="op" id="2273774">==</span>&nbsp;<span class="ident" id="2273777">nil</span>&nbsp;<span class="op" id="2273781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2273785">panic</span><span class="op" id="2273790">(</span><span class="op" id="2273791">&amp;</span><span class="ident" id="2273792">ValueError</span><span class="op" id="2273802">{</span><span class="string" id="2273803">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2273828">,</span>&nbsp;<span class="ident" id="2273830">Invalid</span><span class="op" id="2273837">}</span><span class="op" id="2273838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273844">if</span>&nbsp;<span class="ident" id="2273847">v</span><span class="op" id="2273848">.</span><span class="ident" id="2273849">flag</span><span class="op" id="2273853">&amp;</span><span class="ident" id="2273854">flagMethod</span>&nbsp;<span class="op" id="2273865">!=</span>&nbsp;<span class="num" id="2273868">0</span>&nbsp;<span class="op" id="2273870">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273874">return</span>&nbsp;<span class="num" id="2273881">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2273884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2273887">return</span>&nbsp;<span class="ident" id="2273894">v</span><span class="op" id="2273895">.</span><span class="ident" id="2273896">typ</span><span class="op" id="2273899">.</span><span class="ident" id="2273900">NumMethod</span><span class="op" id="2273909">(</span><span class="op" id="2273910">)</span><br>
<span class="lineno"></span><span class="op" id="2273912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2273915">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2273984">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2274013">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2274084">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2274156">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2274209">func</span>&nbsp;<span class="op" id="2274214">(</span><span class="ident" id="2274215">v</span>&nbsp;<span class="ident" id="2274217">Value</span><span class="op" id="2274222">)</span>&nbsp;<span class="ident" id="2274224">MethodByName</span><span class="op" id="2274236">(</span><span class="ident" id="2274237">name</span>&nbsp;<span class="builtintype" id="2274242">string</span><span class="op" id="2274248">)</span>&nbsp;<span class="ident" id="2274250">Value</span>&nbsp;<span class="op" id="2274256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274259">if</span>&nbsp;<span class="ident" id="2274262">v</span><span class="op" id="2274263">.</span><span class="ident" id="2274264">typ</span>&nbsp;<span class="op" id="2274268">==</span>&nbsp;<span class="ident" id="2274271">nil</span>&nbsp;<span class="op" id="2274275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2274279">panic</span><span class="op" id="2274284">(</span><span class="op" id="2274285">&amp;</span><span class="ident" id="2274286">ValueError</span><span class="op" id="2274296">{</span><span class="string" id="2274297">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2274325">,</span>&nbsp;<span class="ident" id="2274327">Invalid</span><span class="op" id="2274334">}</span><span class="op" id="2274335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274341">if</span>&nbsp;<span class="ident" id="2274344">v</span><span class="op" id="2274345">.</span><span class="ident" id="2274346">flag</span><span class="op" id="2274350">&amp;</span><span class="ident" id="2274351">flagMethod</span>&nbsp;<span class="op" id="2274362">!=</span>&nbsp;<span class="num" id="2274365">0</span>&nbsp;<span class="op" id="2274367">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274371">return</span>&nbsp;<span class="ident" id="2274378">Value</span><span class="op" id="2274383">{</span><span class="op" id="2274384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274390">m</span><span class="op" id="2274391">,</span>&nbsp;<span class="ident" id="2274393">ok</span>&nbsp;<span class="op" id="2274396">:=</span>&nbsp;<span class="ident" id="2274399">v</span><span class="op" id="2274400">.</span><span class="ident" id="2274401">typ</span><span class="op" id="2274404">.</span><span class="ident" id="2274405">MethodByName</span><span class="op" id="2274417">(</span><span class="ident" id="2274418">name</span><span class="op" id="2274422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274425">if</span>&nbsp;<span class="op" id="2274428">!</span><span class="ident" id="2274429">ok</span>&nbsp;<span class="op" id="2274432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274436">return</span>&nbsp;<span class="ident" id="2274443">Value</span><span class="op" id="2274448">{</span><span class="op" id="2274449">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2274452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274455">return</span>&nbsp;<span class="ident" id="2274462">v</span><span class="op" id="2274463">.</span><span class="ident" id="2274464">Method</span><span class="op" id="2274470">(</span><span class="ident" id="2274471">m</span><span class="op" id="2274472">.</span><span class="ident" id="2274473">Index</span><span class="op" id="2274478">)</span><br>
<span class="lineno"></span><span class="op" id="2274480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2274483">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2274541">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2274581">func</span>&nbsp;<span class="op" id="2274586">(</span><span class="ident" id="2274587">v</span>&nbsp;<span class="ident" id="2274589">Value</span><span class="op" id="2274594">)</span>&nbsp;<span class="ident" id="2274596">NumField</span><span class="op" id="2274604">(</span><span class="op" id="2274605">)</span>&nbsp;<span class="builtintype" id="2274607">int</span>&nbsp;<span class="op" id="2274611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274614">v</span><span class="op" id="2274615">.</span><span class="ident" id="2274616">mustBe</span><span class="op" id="2274622">(</span><span class="ident" id="2274623">Struct</span><span class="op" id="2274629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274632">tt</span>&nbsp;<span class="op" id="2274635">:=</span>&nbsp;<span class="op" id="2274638">(</span><span class="op" id="2274639">*</span><span class="ident" id="2274640">structType</span><span class="op" id="2274650">)</span><span class="op" id="2274651">(</span><span class="ident" id="2274652">unsafe</span><span class="op" id="2274658">.</span><span class="ident" id="2274659">Pointer</span><span class="op" id="2274666">(</span><span class="ident" id="2274667">v</span><span class="op" id="2274668">.</span><span class="ident" id="2274669">typ</span><span class="op" id="2274672">)</span><span class="op" id="2274673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274676">return</span>&nbsp;<span class="builtinfunc" id="2274683">len</span><span class="op" id="2274686">(</span><span class="ident" id="2274687">tt</span><span class="op" id="2274689">.</span><span class="ident" id="2274690">fields</span><span class="op" id="2274696">)</span><br>
<span class="lineno">1120</span><span class="op" id="2274698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2274701">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2274788">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2274845">func</span>&nbsp;<span class="op" id="2274850">(</span><span class="ident" id="2274851">v</span>&nbsp;<span class="ident" id="2274853">Value</span><span class="op" id="2274858">)</span>&nbsp;<span class="ident" id="2274860">OverflowComplex</span><span class="op" id="2274875">(</span><span class="ident" id="2274876">x</span>&nbsp;<span class="builtintype" id="2274878">complex128</span><span class="op" id="2274888">)</span>&nbsp;<span class="builtintype" id="2274890">bool</span>&nbsp;<span class="op" id="2274895">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2274898">k</span>&nbsp;<span class="op" id="2274900">:=</span>&nbsp;<span class="ident" id="2274903">v</span><span class="op" id="2274904">.</span><span class="ident" id="2274905">kind</span><span class="op" id="2274909">(</span><span class="op" id="2274910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274913">switch</span>&nbsp;<span class="ident" id="2274920">k</span>&nbsp;<span class="op" id="2274922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274925">case</span>&nbsp;<span class="ident" id="2274930">Complex64</span><span class="op" id="2274939">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2274943">return</span>&nbsp;<span class="ident" id="2274950">overflowFloat32</span><span class="op" id="2274965">(</span><span class="builtinfunc" id="2274966">real</span><span class="op" id="2274970">(</span><span class="ident" id="2274971">x</span><span class="op" id="2274972">)</span><span class="op" id="2274973">)</span>&nbsp;<span class="op" id="2274975">||</span>&nbsp;<span class="ident" id="2274978">overflowFloat32</span><span class="op" id="2274993">(</span><span class="builtinfunc" id="2274994">imag</span><span class="op" id="2274998">(</span><span class="ident" id="2274999">x</span><span class="op" id="2275000">)</span><span class="op" id="2275001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275004">case</span>&nbsp;<span class="ident" id="2275009">Complex128</span><span class="op" id="2275019">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275023">return</span>&nbsp;<span class="builtintype" id="2275030">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2275040">panic</span><span class="op" id="2275045">(</span><span class="op" id="2275046">&amp;</span><span class="ident" id="2275047">ValueError</span><span class="op" id="2275057">{</span><span class="string" id="2275058">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2275089">,</span>&nbsp;<span class="ident" id="2275091">v</span><span class="op" id="2275092">.</span><span class="ident" id="2275093">kind</span><span class="op" id="2275097">(</span><span class="op" id="2275098">)</span><span class="op" id="2275099">}</span><span class="op" id="2275100">)</span><br>
<span class="lineno"></span><span class="op" id="2275102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2275105">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2275187">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2275239">func</span>&nbsp;<span class="op" id="2275244">(</span><span class="ident" id="2275245">v</span>&nbsp;<span class="ident" id="2275247">Value</span><span class="op" id="2275252">)</span>&nbsp;<span class="ident" id="2275254">OverflowFloat</span><span class="op" id="2275267">(</span><span class="ident" id="2275268">x</span>&nbsp;<span class="builtintype" id="2275270">float64</span><span class="op" id="2275277">)</span>&nbsp;<span class="builtintype" id="2275279">bool</span>&nbsp;<span class="op" id="2275284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275287">k</span>&nbsp;<span class="op" id="2275289">:=</span>&nbsp;<span class="ident" id="2275292">v</span><span class="op" id="2275293">.</span><span class="ident" id="2275294">kind</span><span class="op" id="2275298">(</span><span class="op" id="2275299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275302">switch</span>&nbsp;<span class="ident" id="2275309">k</span>&nbsp;<span class="op" id="2275311">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275314">case</span>&nbsp;<span class="ident" id="2275319">Float32</span><span class="op" id="2275326">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275330">return</span>&nbsp;<span class="ident" id="2275337">overflowFloat32</span><span class="op" id="2275352">(</span><span class="ident" id="2275353">x</span><span class="op" id="2275354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275357">case</span>&nbsp;<span class="ident" id="2275362">Float64</span><span class="op" id="2275369">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275373">return</span>&nbsp;<span class="builtintype" id="2275380">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275387">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2275390">panic</span><span class="op" id="2275395">(</span><span class="op" id="2275396">&amp;</span><span class="ident" id="2275397">ValueError</span><span class="op" id="2275407">{</span><span class="string" id="2275408">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2275437">,</span>&nbsp;<span class="ident" id="2275439">v</span><span class="op" id="2275440">.</span><span class="ident" id="2275441">kind</span><span class="op" id="2275445">(</span><span class="op" id="2275446">)</span><span class="op" id="2275447">}</span><span class="op" id="2275448">)</span><br>
<span class="lineno"></span><span class="op" id="2275450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2275453">func</span>&nbsp;<span class="ident" id="2275458">overflowFloat32</span><span class="op" id="2275473">(</span><span class="ident" id="2275474">x</span>&nbsp;<span class="builtintype" id="2275476">float64</span><span class="op" id="2275483">)</span>&nbsp;<span class="builtintype" id="2275485">bool</span>&nbsp;<span class="op" id="2275490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275493">if</span>&nbsp;<span class="ident" id="2275496">x</span>&nbsp;<span class="op" id="2275498">&lt;</span>&nbsp;<span class="num" id="2275500">0</span>&nbsp;<span class="op" id="2275502">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275506">x</span>&nbsp;<span class="op" id="2275508">=</span>&nbsp;<span class="op" id="2275510">-</span><span class="ident" id="2275511">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275517">return</span>&nbsp;<span class="ident" id="2275524">math</span><span class="op" id="2275528">.</span><span class="ident" id="2275529">MaxFloat32</span>&nbsp;<span class="op" id="2275540">&lt;</span>&nbsp;<span class="ident" id="2275542">x</span>&nbsp;<span class="op" id="2275544">&amp;&amp;</span>&nbsp;<span class="ident" id="2275547">x</span>&nbsp;<span class="op" id="2275549">&lt;=</span>&nbsp;<span class="ident" id="2275552">math</span><span class="op" id="2275556">.</span><span class="ident" id="2275557">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2275568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2275571">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2275649">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2275716">func</span>&nbsp;<span class="op" id="2275721">(</span><span class="ident" id="2275722">v</span>&nbsp;<span class="ident" id="2275724">Value</span><span class="op" id="2275729">)</span>&nbsp;<span class="ident" id="2275731">OverflowInt</span><span class="op" id="2275742">(</span><span class="ident" id="2275743">x</span>&nbsp;<span class="ident" id="2275745">int64</span><span class="op" id="2275750">)</span>&nbsp;<span class="builtintype" id="2275752">bool</span>&nbsp;<span class="op" id="2275757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275760">k</span>&nbsp;<span class="op" id="2275762">:=</span>&nbsp;<span class="ident" id="2275765">v</span><span class="op" id="2275766">.</span><span class="ident" id="2275767">kind</span><span class="op" id="2275771">(</span><span class="op" id="2275772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275775">switch</span>&nbsp;<span class="ident" id="2275782">k</span>&nbsp;<span class="op" id="2275784">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275787">case</span>&nbsp;<span class="ident" id="2275792">Int</span><span class="op" id="2275795">,</span>&nbsp;<span class="ident" id="2275797">Int8</span><span class="op" id="2275801">,</span>&nbsp;<span class="ident" id="2275803">Int16</span><span class="op" id="2275808">,</span>&nbsp;<span class="ident" id="2275810">Int32</span><span class="op" id="2275815">,</span>&nbsp;<span class="ident" id="2275817">Int64</span><span class="op" id="2275822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275826">bitSize</span>&nbsp;<span class="op" id="2275834">:=</span>&nbsp;<span class="ident" id="2275837">v</span><span class="op" id="2275838">.</span><span class="ident" id="2275839">typ</span><span class="op" id="2275842">.</span><span class="ident" id="2275843">size</span>&nbsp;<span class="op" id="2275848">*</span>&nbsp;<span class="num" id="2275850">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2275854">trunc</span>&nbsp;<span class="op" id="2275860">:=</span>&nbsp;<span class="op" id="2275863">(</span><span class="ident" id="2275864">x</span>&nbsp;<span class="op" id="2275866">&lt;&lt;</span>&nbsp;<span class="op" id="2275869">(</span><span class="num" id="2275870">64</span>&nbsp;<span class="op" id="2275873">-</span>&nbsp;<span class="ident" id="2275875">bitSize</span><span class="op" id="2275882">)</span><span class="op" id="2275883">)</span>&nbsp;<span class="op" id="2275885">&gt;&gt;</span>&nbsp;<span class="op" id="2275888">(</span><span class="num" id="2275889">64</span>&nbsp;<span class="op" id="2275892">-</span>&nbsp;<span class="ident" id="2275894">bitSize</span><span class="op" id="2275901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2275905">return</span>&nbsp;<span class="ident" id="2275912">x</span>&nbsp;<span class="op" id="2275914">!=</span>&nbsp;<span class="ident" id="2275917">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2275924">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2275927">panic</span><span class="op" id="2275932">(</span><span class="op" id="2275933">&amp;</span><span class="ident" id="2275934">ValueError</span><span class="op" id="2275944">{</span><span class="string" id="2275945">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2275972">,</span>&nbsp;<span class="ident" id="2275974">v</span><span class="op" id="2275975">.</span><span class="ident" id="2275976">kind</span><span class="op" id="2275980">(</span><span class="op" id="2275981">)</span><span class="op" id="2275982">}</span><span class="op" id="2275983">)</span><br>
<span class="lineno"></span><span class="op" id="2275985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2275988">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2276068">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2276149">func</span>&nbsp;<span class="op" id="2276154">(</span><span class="ident" id="2276155">v</span>&nbsp;<span class="ident" id="2276157">Value</span><span class="op" id="2276162">)</span>&nbsp;<span class="ident" id="2276164">OverflowUint</span><span class="op" id="2276176">(</span><span class="ident" id="2276177">x</span>&nbsp;<span class="ident" id="2276179">uint64</span><span class="op" id="2276185">)</span>&nbsp;<span class="builtintype" id="2276187">bool</span>&nbsp;<span class="op" id="2276192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276195">k</span>&nbsp;<span class="op" id="2276197">:=</span>&nbsp;<span class="ident" id="2276200">v</span><span class="op" id="2276201">.</span><span class="ident" id="2276202">kind</span><span class="op" id="2276206">(</span><span class="op" id="2276207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276210">switch</span>&nbsp;<span class="ident" id="2276217">k</span>&nbsp;<span class="op" id="2276219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276222">case</span>&nbsp;<span class="ident" id="2276227">Uint</span><span class="op" id="2276231">,</span>&nbsp;<span class="ident" id="2276233">Uintptr</span><span class="op" id="2276240">,</span>&nbsp;<span class="ident" id="2276242">Uint8</span><span class="op" id="2276247">,</span>&nbsp;<span class="ident" id="2276249">Uint16</span><span class="op" id="2276255">,</span>&nbsp;<span class="ident" id="2276257">Uint32</span><span class="op" id="2276263">,</span>&nbsp;<span class="ident" id="2276265">Uint64</span><span class="op" id="2276271">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276275">bitSize</span>&nbsp;<span class="op" id="2276283">:=</span>&nbsp;<span class="ident" id="2276286">v</span><span class="op" id="2276287">.</span><span class="ident" id="2276288">typ</span><span class="op" id="2276291">.</span><span class="ident" id="2276292">size</span>&nbsp;<span class="op" id="2276297">*</span>&nbsp;<span class="num" id="2276299">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2276303">trunc</span>&nbsp;<span class="op" id="2276309">:=</span>&nbsp;<span class="op" id="2276312">(</span><span class="ident" id="2276313">x</span>&nbsp;<span class="op" id="2276315">&lt;&lt;</span>&nbsp;<span class="op" id="2276318">(</span><span class="num" id="2276319">64</span>&nbsp;<span class="op" id="2276322">-</span>&nbsp;<span class="ident" id="2276324">bitSize</span><span class="op" id="2276331">)</span><span class="op" id="2276332">)</span>&nbsp;<span class="op" id="2276334">&gt;&gt;</span>&nbsp;<span class="op" id="2276337">(</span><span class="num" id="2276338">64</span>&nbsp;<span class="op" id="2276341">-</span>&nbsp;<span class="ident" id="2276343">bitSize</span><span class="op" id="2276350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2276354">return</span>&nbsp;<span class="ident" id="2276361">x</span>&nbsp;<span class="op" id="2276363">!=</span>&nbsp;<span class="ident" id="2276366">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2276373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2276376">panic</span><span class="op" id="2276381">(</span><span class="op" id="2276382">&amp;</span><span class="ident" id="2276383">ValueError</span><span class="op" id="2276393">{</span><span class="string" id="2276394">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2276422">,</span>&nbsp;<span class="ident" id="2276424">v</span><span class="op" id="2276425">.</span><span class="ident" id="2276426">kind</span><span class="op" id="2276430">(</span><span class="op" id="2276431">)</span><span class="op" id="2276432">}</span><span class="op" id="2276433">)</span><br>
<span class="lineno"></span><span class="op" id="2276435">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2276438">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2276481">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2276537">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2276589">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2276641">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2276720">//</span><br>
<span class="lineno"></span><span class="comment" id="2276723">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2276785">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2276843">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2276903">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2276959">//</span><br>
<span class="lineno"></span><span class="comment" id="2276962">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2277024">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2277089">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2277163">func</span>&nbsp;<span class="op" id="2277168">(</span><span class="ident" id="2277169">v</span>&nbsp;<span class="ident" id="2277171">Value</span><span class="op" id="2277176">)</span>&nbsp;<span class="ident" id="2277178">Pointer</span><span class="op" id="2277185">(</span><span class="op" id="2277186">)</span>&nbsp;<span class="builtintype" id="2277188">uintptr</span>&nbsp;<span class="op" id="2277196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277199">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277219">k</span>&nbsp;<span class="op" id="2277221">:=</span>&nbsp;<span class="ident" id="2277224">v</span><span class="op" id="2277225">.</span><span class="ident" id="2277226">kind</span><span class="op" id="2277230">(</span><span class="op" id="2277231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277234">switch</span>&nbsp;<span class="ident" id="2277241">k</span>&nbsp;<span class="op" id="2277243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277246">case</span>&nbsp;<span class="ident" id="2277251">Chan</span><span class="op" id="2277255">,</span>&nbsp;<span class="ident" id="2277257">Map</span><span class="op" id="2277260">,</span>&nbsp;<span class="ident" id="2277262">Ptr</span><span class="op" id="2277265">,</span>&nbsp;<span class="ident" id="2277267">UnsafePointer</span><span class="op" id="2277280">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277284">return</span>&nbsp;<span class="builtintype" id="2277291">uintptr</span><span class="op" id="2277298">(</span><span class="ident" id="2277299">v</span><span class="op" id="2277300">.</span><span class="ident" id="2277301">pointer</span><span class="op" id="2277308">(</span><span class="op" id="2277309">)</span><span class="op" id="2277310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277313">case</span>&nbsp;<span class="ident" id="2277318">Func</span><span class="op" id="2277322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277326">if</span>&nbsp;<span class="ident" id="2277329">v</span><span class="op" id="2277330">.</span><span class="ident" id="2277331">flag</span><span class="op" id="2277335">&amp;</span><span class="ident" id="2277336">flagMethod</span>&nbsp;<span class="op" id="2277347">!=</span>&nbsp;<span class="num" id="2277350">0</span>&nbsp;<span class="op" id="2277352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277357">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277415">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277475">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277541">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277606">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277669">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277714">f</span>&nbsp;<span class="op" id="2277716">:=</span>&nbsp;<span class="ident" id="2277719">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277738">return</span>&nbsp;<span class="op" id="2277745">*</span><span class="op" id="2277746">*</span><span class="op" id="2277747">(</span><span class="op" id="2277748">*</span><span class="op" id="2277749">*</span><span class="builtintype" id="2277750">uintptr</span><span class="op" id="2277757">)</span><span class="op" id="2277758">(</span><span class="ident" id="2277759">unsafe</span><span class="op" id="2277765">.</span><span class="ident" id="2277766">Pointer</span><span class="op" id="2277773">(</span><span class="op" id="2277774">&amp;</span><span class="ident" id="2277775">f</span><span class="op" id="2277776">)</span><span class="op" id="2277777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2277781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277785">p</span>&nbsp;<span class="op" id="2277787">:=</span>&nbsp;<span class="ident" id="2277790">v</span><span class="op" id="2277791">.</span><span class="ident" id="2277792">pointer</span><span class="op" id="2277799">(</span><span class="op" id="2277800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277804">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2277850">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277896">if</span>&nbsp;<span class="ident" id="2277899">p</span>&nbsp;<span class="op" id="2277901">!=</span>&nbsp;<span class="ident" id="2277904">nil</span>&nbsp;<span class="op" id="2277908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2277913">p</span>&nbsp;<span class="op" id="2277915">=</span>&nbsp;<span class="op" id="2277917">*</span><span class="op" id="2277918">(</span><span class="op" id="2277919">*</span><span class="ident" id="2277920">unsafe</span><span class="op" id="2277926">.</span><span class="ident" id="2277927">Pointer</span><span class="op" id="2277934">)</span><span class="op" id="2277935">(</span><span class="ident" id="2277936">p</span><span class="op" id="2277937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2277941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277945">return</span>&nbsp;<span class="builtintype" id="2277952">uintptr</span><span class="op" id="2277959">(</span><span class="ident" id="2277960">p</span><span class="op" id="2277961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277965">case</span>&nbsp;<span class="ident" id="2277970">Slice</span><span class="op" id="2277975">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2277979">return</span>&nbsp;<span class="op" id="2277986">(</span><span class="op" id="2277987">*</span><span class="ident" id="2277988">SliceHeader</span><span class="op" id="2277999">)</span><span class="op" id="2278000">(</span><span class="ident" id="2278001">v</span><span class="op" id="2278002">.</span><span class="ident" id="2278003">ptr</span><span class="op" id="2278006">)</span><span class="op" id="2278007">.</span><span class="ident" id="2278008">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2278017">panic</span><span class="op" id="2278022">(</span><span class="op" id="2278023">&amp;</span><span class="ident" id="2278024">ValueError</span><span class="op" id="2278034">{</span><span class="string" id="2278035">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2278058">,</span>&nbsp;<span class="ident" id="2278060">v</span><span class="op" id="2278061">.</span><span class="ident" id="2278062">kind</span><span class="op" id="2278066">(</span><span class="op" id="2278067">)</span><span class="op" id="2278068">}</span><span class="op" id="2278069">)</span><br>
<span class="lineno"></span><span class="op" id="2278071">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2278074">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2278131">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2278169">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2278215">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2278284">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2278371">func</span>&nbsp;<span class="op" id="2278376">(</span><span class="ident" id="2278377">v</span>&nbsp;<span class="ident" id="2278379">Value</span><span class="op" id="2278384">)</span>&nbsp;<span class="ident" id="2278386">Recv</span><span class="op" id="2278390">(</span><span class="op" id="2278391">)</span>&nbsp;<span class="op" id="2278393">(</span><span class="ident" id="2278394">x</span>&nbsp;<span class="ident" id="2278396">Value</span><span class="op" id="2278401">,</span>&nbsp;<span class="ident" id="2278403">ok</span>&nbsp;<span class="builtintype" id="2278406">bool</span><span class="op" id="2278410">)</span>&nbsp;<span class="op" id="2278412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278415">v</span><span class="op" id="2278416">.</span><span class="ident" id="2278417">mustBe</span><span class="op" id="2278423">(</span><span class="ident" id="2278424">Chan</span><span class="op" id="2278428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278431">v</span><span class="op" id="2278432">.</span><span class="ident" id="2278433">mustBeExported</span><span class="op" id="2278447">(</span><span class="op" id="2278448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278451">return</span>&nbsp;<span class="ident" id="2278458">v</span><span class="op" id="2278459">.</span><span class="ident" id="2278460">recv</span><span class="op" id="2278464">(</span><span class="builtintype" id="2278465">false</span><span class="op" id="2278470">)</span><br>
<span class="lineno">1235</span><span class="op" id="2278472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2278475">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2278521">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2278552">func</span>&nbsp;<span class="op" id="2278557">(</span><span class="ident" id="2278558">v</span>&nbsp;<span class="ident" id="2278560">Value</span><span class="op" id="2278565">)</span>&nbsp;<span class="ident" id="2278567">recv</span><span class="op" id="2278571">(</span><span class="ident" id="2278572">nb</span>&nbsp;<span class="builtintype" id="2278575">bool</span><span class="op" id="2278579">)</span>&nbsp;<span class="op" id="2278581">(</span><span class="ident" id="2278582">val</span>&nbsp;<span class="ident" id="2278586">Value</span><span class="op" id="2278591">,</span>&nbsp;<span class="ident" id="2278593">ok</span>&nbsp;<span class="builtintype" id="2278596">bool</span><span class="op" id="2278600">)</span>&nbsp;<span class="op" id="2278602">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278605">tt</span>&nbsp;<span class="op" id="2278608">:=</span>&nbsp;<span class="op" id="2278611">(</span><span class="op" id="2278612">*</span><span class="ident" id="2278613">chanType</span><span class="op" id="2278621">)</span><span class="op" id="2278622">(</span><span class="ident" id="2278623">unsafe</span><span class="op" id="2278629">.</span><span class="ident" id="2278630">Pointer</span><span class="op" id="2278637">(</span><span class="ident" id="2278638">v</span><span class="op" id="2278639">.</span><span class="ident" id="2278640">typ</span><span class="op" id="2278643">)</span><span class="op" id="2278644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278647">if</span>&nbsp;<span class="ident" id="2278650">ChanDir</span><span class="op" id="2278657">(</span><span class="ident" id="2278658">tt</span><span class="op" id="2278660">.</span><span class="ident" id="2278661">dir</span><span class="op" id="2278664">)</span><span class="op" id="2278665">&amp;</span><span class="ident" id="2278666">RecvDir</span>&nbsp;<span class="op" id="2278674">==</span>&nbsp;<span class="num" id="2278677">0</span>&nbsp;<span class="op" id="2278679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2278683">panic</span><span class="op" id="2278688">(</span><span class="string" id="2278689">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2278725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278731">t</span>&nbsp;<span class="op" id="2278733">:=</span>&nbsp;<span class="ident" id="2278736">tt</span><span class="op" id="2278738">.</span><span class="ident" id="2278739">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278745">val</span>&nbsp;<span class="op" id="2278749">=</span>&nbsp;<span class="ident" id="2278751">Value</span><span class="op" id="2278756">{</span><span class="ident" id="2278757">t</span><span class="op" id="2278758">,</span>&nbsp;<span class="ident" id="2278760">nil</span><span class="op" id="2278763">,</span>&nbsp;<span class="ident" id="2278765">flag</span><span class="op" id="2278769">(</span><span class="ident" id="2278770">t</span><span class="op" id="2278771">.</span><span class="ident" id="2278772">Kind</span><span class="op" id="2278776">(</span><span class="op" id="2278777">)</span><span class="op" id="2278778">)</span><span class="op" id="2278779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278782">var</span>&nbsp;<span class="ident" id="2278786">p</span>&nbsp;<span class="ident" id="2278788">unsafe</span><span class="op" id="2278794">.</span><span class="ident" id="2278795">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278804">if</span>&nbsp;<span class="ident" id="2278807">ifaceIndir</span><span class="op" id="2278817">(</span><span class="ident" id="2278818">t</span><span class="op" id="2278819">)</span>&nbsp;<span class="op" id="2278821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278825">p</span>&nbsp;<span class="op" id="2278827">=</span>&nbsp;<span class="ident" id="2278829">unsafe_New</span><span class="op" id="2278839">(</span><span class="ident" id="2278840">t</span><span class="op" id="2278841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278845">val</span><span class="op" id="2278848">.</span><span class="ident" id="2278849">ptr</span>&nbsp;<span class="op" id="2278853">=</span>&nbsp;<span class="ident" id="2278855">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278859">val</span><span class="op" id="2278862">.</span><span class="ident" id="2278863">flag</span>&nbsp;<span class="op" id="2278868">|=</span>&nbsp;<span class="ident" id="2278871">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278882">}</span>&nbsp;<span class="keyword" id="2278884">else</span>&nbsp;<span class="op" id="2278889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278893">p</span>&nbsp;<span class="op" id="2278895">=</span>&nbsp;<span class="ident" id="2278897">unsafe</span><span class="op" id="2278903">.</span><span class="ident" id="2278904">Pointer</span><span class="op" id="2278911">(</span><span class="op" id="2278912">&amp;</span><span class="ident" id="2278913">val</span><span class="op" id="2278916">.</span><span class="ident" id="2278917">ptr</span><span class="op" id="2278920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2278923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278926">selected</span><span class="op" id="2278934">,</span>&nbsp;<span class="ident" id="2278936">ok</span>&nbsp;<span class="op" id="2278939">:=</span>&nbsp;<span class="ident" id="2278942">chanrecv</span><span class="op" id="2278950">(</span><span class="ident" id="2278951">v</span><span class="op" id="2278952">.</span><span class="ident" id="2278953">typ</span><span class="op" id="2278956">,</span>&nbsp;<span class="ident" id="2278958">v</span><span class="op" id="2278959">.</span><span class="ident" id="2278960">pointer</span><span class="op" id="2278967">(</span><span class="op" id="2278968">)</span><span class="op" id="2278969">,</span>&nbsp;<span class="ident" id="2278971">nb</span><span class="op" id="2278973">,</span>&nbsp;<span class="ident" id="2278975">p</span><span class="op" id="2278976">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2278979">if</span>&nbsp;<span class="op" id="2278982">!</span><span class="ident" id="2278983">selected</span>&nbsp;<span class="op" id="2278992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2278996">val</span>&nbsp;<span class="op" id="2279000">=</span>&nbsp;<span class="ident" id="2279002">Value</span><span class="op" id="2279007">{</span><span class="op" id="2279008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2279011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2279014">return</span><br>
<span class="lineno"></span><span class="op" id="2279021">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2279024">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2279058">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2279152">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2279225">func</span>&nbsp;<span class="op" id="2279230">(</span><span class="ident" id="2279231">v</span>&nbsp;<span class="ident" id="2279233">Value</span><span class="op" id="2279238">)</span>&nbsp;<span class="ident" id="2279240">Send</span><span class="op" id="2279244">(</span><span class="ident" id="2279245">x</span>&nbsp;<span class="ident" id="2279247">Value</span><span class="op" id="2279252">)</span>&nbsp;<span class="op" id="2279254">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279257">v</span><span class="op" id="2279258">.</span><span class="ident" id="2279259">mustBe</span><span class="op" id="2279265">(</span><span class="ident" id="2279266">Chan</span><span class="op" id="2279270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279273">v</span><span class="op" id="2279274">.</span><span class="ident" id="2279275">mustBeExported</span><span class="op" id="2279289">(</span><span class="op" id="2279290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279293">v</span><span class="op" id="2279294">.</span><span class="ident" id="2279295">send</span><span class="op" id="2279299">(</span><span class="ident" id="2279300">x</span><span class="op" id="2279301">,</span>&nbsp;<span class="builtintype" id="2279303">false</span><span class="op" id="2279308">)</span><br>
<span class="lineno"></span><span class="op" id="2279310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2279313">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2279354">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2279385">func</span>&nbsp;<span class="op" id="2279390">(</span><span class="ident" id="2279391">v</span>&nbsp;<span class="ident" id="2279393">Value</span><span class="op" id="2279398">)</span>&nbsp;<span class="ident" id="2279400">send</span><span class="op" id="2279404">(</span><span class="ident" id="2279405">x</span>&nbsp;<span class="ident" id="2279407">Value</span><span class="op" id="2279412">,</span>&nbsp;<span class="ident" id="2279414">nb</span>&nbsp;<span class="builtintype" id="2279417">bool</span><span class="op" id="2279421">)</span>&nbsp;<span class="op" id="2279423">(</span><span class="ident" id="2279424">selected</span>&nbsp;<span class="builtintype" id="2279433">bool</span><span class="op" id="2279437">)</span>&nbsp;<span class="op" id="2279439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279442">tt</span>&nbsp;<span class="op" id="2279445">:=</span>&nbsp;<span class="op" id="2279448">(</span><span class="op" id="2279449">*</span><span class="ident" id="2279450">chanType</span><span class="op" id="2279458">)</span><span class="op" id="2279459">(</span><span class="ident" id="2279460">unsafe</span><span class="op" id="2279466">.</span><span class="ident" id="2279467">Pointer</span><span class="op" id="2279474">(</span><span class="ident" id="2279475">v</span><span class="op" id="2279476">.</span><span class="ident" id="2279477">typ</span><span class="op" id="2279480">)</span><span class="op" id="2279481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2279484">if</span>&nbsp;<span class="ident" id="2279487">ChanDir</span><span class="op" id="2279494">(</span><span class="ident" id="2279495">tt</span><span class="op" id="2279497">.</span><span class="ident" id="2279498">dir</span><span class="op" id="2279501">)</span><span class="op" id="2279502">&amp;</span><span class="ident" id="2279503">SendDir</span>&nbsp;<span class="op" id="2279511">==</span>&nbsp;<span class="num" id="2279514">0</span>&nbsp;<span class="op" id="2279516">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2279520">panic</span><span class="op" id="2279525">(</span><span class="string" id="2279526">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2279562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2279565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279568">x</span><span class="op" id="2279569">.</span><span class="ident" id="2279570">mustBeExported</span><span class="op" id="2279584">(</span><span class="op" id="2279585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279588">x</span>&nbsp;<span class="op" id="2279590">=</span>&nbsp;<span class="ident" id="2279592">x</span><span class="op" id="2279593">.</span><span class="ident" id="2279594">assignTo</span><span class="op" id="2279602">(</span><span class="string" id="2279603">&#34;reflect.Value.Send&#34;</span><span class="op" id="2279623">,</span>&nbsp;<span class="ident" id="2279625">tt</span><span class="op" id="2279627">.</span><span class="ident" id="2279628">elem</span><span class="op" id="2279632">,</span>&nbsp;<span class="ident" id="2279634">nil</span><span class="op" id="2279637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2279640">var</span>&nbsp;<span class="ident" id="2279644">p</span>&nbsp;<span class="ident" id="2279646">unsafe</span><span class="op" id="2279652">.</span><span class="ident" id="2279653">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2279662">if</span>&nbsp;<span class="ident" id="2279665">x</span><span class="op" id="2279666">.</span><span class="ident" id="2279667">flag</span><span class="op" id="2279671">&amp;</span><span class="ident" id="2279672">flagIndir</span>&nbsp;<span class="op" id="2279682">!=</span>&nbsp;<span class="num" id="2279685">0</span>&nbsp;<span class="op" id="2279687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279691">p</span>&nbsp;<span class="op" id="2279693">=</span>&nbsp;<span class="ident" id="2279695">x</span><span class="op" id="2279696">.</span><span class="ident" id="2279697">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2279702">}</span>&nbsp;<span class="keyword" id="2279704">else</span>&nbsp;<span class="op" id="2279709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279713">p</span>&nbsp;<span class="op" id="2279715">=</span>&nbsp;<span class="ident" id="2279717">unsafe</span><span class="op" id="2279723">.</span><span class="ident" id="2279724">Pointer</span><span class="op" id="2279731">(</span><span class="op" id="2279732">&amp;</span><span class="ident" id="2279733">x</span><span class="op" id="2279734">.</span><span class="ident" id="2279735">ptr</span><span class="op" id="2279738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2279741">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2279744">return</span>&nbsp;<span class="ident" id="2279751">chansend</span><span class="op" id="2279759">(</span><span class="ident" id="2279760">v</span><span class="op" id="2279761">.</span><span class="ident" id="2279762">typ</span><span class="op" id="2279765">,</span>&nbsp;<span class="ident" id="2279767">v</span><span class="op" id="2279768">.</span><span class="ident" id="2279769">pointer</span><span class="op" id="2279776">(</span><span class="op" id="2279777">)</span><span class="op" id="2279778">,</span>&nbsp;<span class="ident" id="2279780">p</span><span class="op" id="2279781">,</span>&nbsp;<span class="ident" id="2279783">nb</span><span class="op" id="2279785">)</span><br>
<span class="lineno"></span><span class="op" id="2279787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2279790">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2279823">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2279861">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2279916">func</span>&nbsp;<span class="op" id="2279921">(</span><span class="ident" id="2279922">v</span>&nbsp;<span class="ident" id="2279924">Value</span><span class="op" id="2279929">)</span>&nbsp;<span class="ident" id="2279931">Set</span><span class="op" id="2279934">(</span><span class="ident" id="2279935">x</span>&nbsp;<span class="ident" id="2279937">Value</span><span class="op" id="2279942">)</span>&nbsp;<span class="op" id="2279944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279947">v</span><span class="op" id="2279948">.</span><span class="ident" id="2279949">mustBeAssignable</span><span class="op" id="2279965">(</span><span class="op" id="2279966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2279969">x</span><span class="op" id="2279970">.</span><span class="ident" id="2279971">mustBeExported</span><span class="op" id="2279985">(</span><span class="op" id="2279986">)</span>&nbsp;<span class="comment" id="2279988">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2280021">var</span>&nbsp;<span class="ident" id="2280025">target</span>&nbsp;<span class="ident" id="2280032">unsafe</span><span class="op" id="2280038">.</span><span class="ident" id="2280039">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2280048">if</span>&nbsp;<span class="ident" id="2280051">v</span><span class="op" id="2280052">.</span><span class="ident" id="2280053">kind</span><span class="op" id="2280057">(</span><span class="op" id="2280058">)</span>&nbsp;<span class="op" id="2280060">==</span>&nbsp;<span class="ident" id="2280063">Interface</span>&nbsp;<span class="op" id="2280073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280077">target</span>&nbsp;<span class="op" id="2280084">=</span>&nbsp;<span class="ident" id="2280086">v</span><span class="op" id="2280087">.</span><span class="ident" id="2280088">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280096">x</span>&nbsp;<span class="op" id="2280098">=</span>&nbsp;<span class="ident" id="2280100">x</span><span class="op" id="2280101">.</span><span class="ident" id="2280102">assignTo</span><span class="op" id="2280110">(</span><span class="string" id="2280111">&#34;reflect.Set&#34;</span><span class="op" id="2280124">,</span>&nbsp;<span class="ident" id="2280126">v</span><span class="op" id="2280127">.</span><span class="ident" id="2280128">typ</span><span class="op" id="2280131">,</span>&nbsp;<span class="ident" id="2280133">target</span><span class="op" id="2280139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2280142">if</span>&nbsp;<span class="ident" id="2280145">x</span><span class="op" id="2280146">.</span><span class="ident" id="2280147">flag</span><span class="op" id="2280151">&amp;</span><span class="ident" id="2280152">flagIndir</span>&nbsp;<span class="op" id="2280162">!=</span>&nbsp;<span class="num" id="2280165">0</span>&nbsp;<span class="op" id="2280167">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280171">memmove</span><span class="op" id="2280178">(</span><span class="ident" id="2280179">v</span><span class="op" id="2280180">.</span><span class="ident" id="2280181">ptr</span><span class="op" id="2280184">,</span>&nbsp;<span class="ident" id="2280186">x</span><span class="op" id="2280187">.</span><span class="ident" id="2280188">ptr</span><span class="op" id="2280191">,</span>&nbsp;<span class="ident" id="2280193">v</span><span class="op" id="2280194">.</span><span class="ident" id="2280195">typ</span><span class="op" id="2280198">.</span><span class="ident" id="2280199">size</span><span class="op" id="2280203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280206">}</span>&nbsp;<span class="keyword" id="2280208">else</span>&nbsp;<span class="op" id="2280213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280217">*</span><span class="op" id="2280218">(</span><span class="op" id="2280219">*</span><span class="ident" id="2280220">unsafe</span><span class="op" id="2280226">.</span><span class="ident" id="2280227">Pointer</span><span class="op" id="2280234">)</span><span class="op" id="2280235">(</span><span class="ident" id="2280236">v</span><span class="op" id="2280237">.</span><span class="ident" id="2280238">ptr</span><span class="op" id="2280241">)</span>&nbsp;<span class="op" id="2280243">=</span>&nbsp;<span class="ident" id="2280245">x</span><span class="op" id="2280246">.</span><span class="ident" id="2280247">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280252">}</span><br>
<span class="lineno"></span><span class="op" id="2280254">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2280257">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2280295">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2280357">func</span>&nbsp;<span class="op" id="2280362">(</span><span class="ident" id="2280363">v</span>&nbsp;<span class="ident" id="2280365">Value</span><span class="op" id="2280370">)</span>&nbsp;<span class="ident" id="2280372">SetBool</span><span class="op" id="2280379">(</span><span class="ident" id="2280380">x</span>&nbsp;<span class="builtintype" id="2280382">bool</span><span class="op" id="2280386">)</span>&nbsp;<span class="op" id="2280388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280391">v</span><span class="op" id="2280392">.</span><span class="ident" id="2280393">mustBeAssignable</span><span class="op" id="2280409">(</span><span class="op" id="2280410">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280413">v</span><span class="op" id="2280414">.</span><span class="ident" id="2280415">mustBe</span><span class="op" id="2280421">(</span><span class="ident" id="2280422">Bool</span><span class="op" id="2280426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280429">*</span><span class="op" id="2280430">(</span><span class="op" id="2280431">*</span><span class="builtintype" id="2280432">bool</span><span class="op" id="2280436">)</span><span class="op" id="2280437">(</span><span class="ident" id="2280438">v</span><span class="op" id="2280439">.</span><span class="ident" id="2280440">ptr</span><span class="op" id="2280443">)</span>&nbsp;<span class="op" id="2280445">=</span>&nbsp;<span class="ident" id="2280447">x</span><br>
<span class="lineno"></span><span class="op" id="2280449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2280452">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2280491">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2280553">func</span>&nbsp;<span class="op" id="2280558">(</span><span class="ident" id="2280559">v</span>&nbsp;<span class="ident" id="2280561">Value</span><span class="op" id="2280566">)</span>&nbsp;<span class="ident" id="2280568">SetBytes</span><span class="op" id="2280576">(</span><span class="ident" id="2280577">x</span>&nbsp;<span class="op" id="2280579">[</span><span class="op" id="2280580">]</span><span class="builtintype" id="2280581">byte</span><span class="op" id="2280585">)</span>&nbsp;<span class="op" id="2280587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280590">v</span><span class="op" id="2280591">.</span><span class="ident" id="2280592">mustBeAssignable</span><span class="op" id="2280608">(</span><span class="op" id="2280609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280612">v</span><span class="op" id="2280613">.</span><span class="ident" id="2280614">mustBe</span><span class="op" id="2280620">(</span><span class="ident" id="2280621">Slice</span><span class="op" id="2280626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2280629">if</span>&nbsp;<span class="ident" id="2280632">v</span><span class="op" id="2280633">.</span><span class="ident" id="2280634">typ</span><span class="op" id="2280637">.</span><span class="ident" id="2280638">Elem</span><span class="op" id="2280642">(</span><span class="op" id="2280643">)</span><span class="op" id="2280644">.</span><span class="ident" id="2280645">Kind</span><span class="op" id="2280649">(</span><span class="op" id="2280650">)</span>&nbsp;<span class="op" id="2280652">!=</span>&nbsp;<span class="ident" id="2280655">Uint8</span>&nbsp;<span class="op" id="2280661">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2280665">panic</span><span class="op" id="2280670">(</span><span class="string" id="2280671">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2280713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2280719">*</span><span class="op" id="2280720">(</span><span class="op" id="2280721">*</span><span class="op" id="2280722">[</span><span class="op" id="2280723">]</span><span class="builtintype" id="2280724">byte</span><span class="op" id="2280728">)</span><span class="op" id="2280729">(</span><span class="ident" id="2280730">v</span><span class="op" id="2280731">.</span><span class="ident" id="2280732">ptr</span><span class="op" id="2280735">)</span>&nbsp;<span class="op" id="2280737">=</span>&nbsp;<span class="ident" id="2280739">x</span><br>
<span class="lineno"></span><span class="op" id="2280741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2280744">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2280783">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2280854">func</span>&nbsp;<span class="op" id="2280859">(</span><span class="ident" id="2280860">v</span>&nbsp;<span class="ident" id="2280862">Value</span><span class="op" id="2280867">)</span>&nbsp;<span class="ident" id="2280869">setRunes</span><span class="op" id="2280877">(</span><span class="ident" id="2280878">x</span>&nbsp;<span class="op" id="2280880">[</span><span class="op" id="2280881">]</span><span class="builtintype" id="2280882">rune</span><span class="op" id="2280886">)</span>&nbsp;<span class="op" id="2280888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280891">v</span><span class="op" id="2280892">.</span><span class="ident" id="2280893">mustBeAssignable</span><span class="op" id="2280909">(</span><span class="op" id="2280910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2280913">v</span><span class="op" id="2280914">.</span><span class="ident" id="2280915">mustBe</span><span class="op" id="2280921">(</span><span class="ident" id="2280922">Slice</span><span class="op" id="2280927">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2280930">if</span>&nbsp;<span class="ident" id="2280933">v</span><span class="op" id="2280934">.</span><span class="ident" id="2280935">typ</span><span class="op" id="2280938">.</span><span class="ident" id="2280939">Elem</span><span class="op" id="2280943">(</span><span class="op" id="2280944">)</span><span class="op" id="2280945">.</span><span class="ident" id="2280946">Kind</span><span class="op" id="2280950">(</span><span class="op" id="2280951">)</span>&nbsp;<span class="op" id="2280953">!=</span>&nbsp;<span class="ident" id="2280956">Int32</span>&nbsp;<span class="op" id="2280962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2280966">panic</span><span class="op" id="2280971">(</span><span class="string" id="2280972">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2281014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281020">*</span><span class="op" id="2281021">(</span><span class="op" id="2281022">*</span><span class="op" id="2281023">[</span><span class="op" id="2281024">]</span><span class="builtintype" id="2281025">rune</span><span class="op" id="2281029">)</span><span class="op" id="2281030">(</span><span class="ident" id="2281031">v</span><span class="op" id="2281032">.</span><span class="ident" id="2281033">ptr</span><span class="op" id="2281036">)</span>&nbsp;<span class="op" id="2281038">=</span>&nbsp;<span class="ident" id="2281040">x</span><br>
<span class="lineno"></span><span class="op" id="2281042">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2281045">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2281091">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2281173">func</span>&nbsp;<span class="op" id="2281178">(</span><span class="ident" id="2281179">v</span>&nbsp;<span class="ident" id="2281181">Value</span><span class="op" id="2281186">)</span>&nbsp;<span class="ident" id="2281188">SetComplex</span><span class="op" id="2281198">(</span><span class="ident" id="2281199">x</span>&nbsp;<span class="builtintype" id="2281201">complex128</span><span class="op" id="2281211">)</span>&nbsp;<span class="op" id="2281213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2281216">v</span><span class="op" id="2281217">.</span><span class="ident" id="2281218">mustBeAssignable</span><span class="op" id="2281234">(</span><span class="op" id="2281235">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281238">switch</span>&nbsp;<span class="ident" id="2281245">k</span>&nbsp;<span class="op" id="2281247">:=</span>&nbsp;<span class="ident" id="2281250">v</span><span class="op" id="2281251">.</span><span class="ident" id="2281252">kind</span><span class="op" id="2281256">(</span><span class="op" id="2281257">)</span><span class="op" id="2281258">;</span>&nbsp;<span class="ident" id="2281260">k</span>&nbsp;<span class="op" id="2281262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281265">default</span><span class="op" id="2281272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2281276">panic</span><span class="op" id="2281281">(</span><span class="op" id="2281282">&amp;</span><span class="ident" id="2281283">ValueError</span><span class="op" id="2281293">{</span><span class="string" id="2281294">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2281320">,</span>&nbsp;<span class="ident" id="2281322">v</span><span class="op" id="2281323">.</span><span class="ident" id="2281324">kind</span><span class="op" id="2281328">(</span><span class="op" id="2281329">)</span><span class="op" id="2281330">}</span><span class="op" id="2281331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281334">case</span>&nbsp;<span class="ident" id="2281339">Complex64</span><span class="op" id="2281348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281352">*</span><span class="op" id="2281353">(</span><span class="op" id="2281354">*</span><span class="builtintype" id="2281355">complex64</span><span class="op" id="2281364">)</span><span class="op" id="2281365">(</span><span class="ident" id="2281366">v</span><span class="op" id="2281367">.</span><span class="ident" id="2281368">ptr</span><span class="op" id="2281371">)</span>&nbsp;<span class="op" id="2281373">=</span>&nbsp;<span class="builtintype" id="2281375">complex64</span><span class="op" id="2281384">(</span><span class="ident" id="2281385">x</span><span class="op" id="2281386">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281389">case</span>&nbsp;<span class="ident" id="2281394">Complex128</span><span class="op" id="2281404">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281408">*</span><span class="op" id="2281409">(</span><span class="op" id="2281410">*</span><span class="builtintype" id="2281411">complex128</span><span class="op" id="2281421">)</span><span class="op" id="2281422">(</span><span class="ident" id="2281423">v</span><span class="op" id="2281424">.</span><span class="ident" id="2281425">ptr</span><span class="op" id="2281428">)</span>&nbsp;<span class="op" id="2281430">=</span>&nbsp;<span class="ident" id="2281432">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281435">}</span><br>
<span class="lineno"></span><span class="op" id="2281437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2281440">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2281484">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2281561">func</span>&nbsp;<span class="op" id="2281566">(</span><span class="ident" id="2281567">v</span>&nbsp;<span class="ident" id="2281569">Value</span><span class="op" id="2281574">)</span>&nbsp;<span class="ident" id="2281576">SetFloat</span><span class="op" id="2281584">(</span><span class="ident" id="2281585">x</span>&nbsp;<span class="builtintype" id="2281587">float64</span><span class="op" id="2281594">)</span>&nbsp;<span class="op" id="2281596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2281599">v</span><span class="op" id="2281600">.</span><span class="ident" id="2281601">mustBeAssignable</span><span class="op" id="2281617">(</span><span class="op" id="2281618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281621">switch</span>&nbsp;<span class="ident" id="2281628">k</span>&nbsp;<span class="op" id="2281630">:=</span>&nbsp;<span class="ident" id="2281633">v</span><span class="op" id="2281634">.</span><span class="ident" id="2281635">kind</span><span class="op" id="2281639">(</span><span class="op" id="2281640">)</span><span class="op" id="2281641">;</span>&nbsp;<span class="ident" id="2281643">k</span>&nbsp;<span class="op" id="2281645">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281648">default</span><span class="op" id="2281655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2281659">panic</span><span class="op" id="2281664">(</span><span class="op" id="2281665">&amp;</span><span class="ident" id="2281666">ValueError</span><span class="op" id="2281676">{</span><span class="string" id="2281677">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2281701">,</span>&nbsp;<span class="ident" id="2281703">v</span><span class="op" id="2281704">.</span><span class="ident" id="2281705">kind</span><span class="op" id="2281709">(</span><span class="op" id="2281710">)</span><span class="op" id="2281711">}</span><span class="op" id="2281712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281715">case</span>&nbsp;<span class="ident" id="2281720">Float32</span><span class="op" id="2281727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281731">*</span><span class="op" id="2281732">(</span><span class="op" id="2281733">*</span><span class="builtintype" id="2281734">float32</span><span class="op" id="2281741">)</span><span class="op" id="2281742">(</span><span class="ident" id="2281743">v</span><span class="op" id="2281744">.</span><span class="ident" id="2281745">ptr</span><span class="op" id="2281748">)</span>&nbsp;<span class="op" id="2281750">=</span>&nbsp;<span class="builtintype" id="2281752">float32</span><span class="op" id="2281759">(</span><span class="ident" id="2281760">x</span><span class="op" id="2281761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281764">case</span>&nbsp;<span class="ident" id="2281769">Float64</span><span class="op" id="2281776">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281780">*</span><span class="op" id="2281781">(</span><span class="op" id="2281782">*</span><span class="builtintype" id="2281783">float64</span><span class="op" id="2281790">)</span><span class="op" id="2281791">(</span><span class="ident" id="2281792">v</span><span class="op" id="2281793">.</span><span class="ident" id="2281794">ptr</span><span class="op" id="2281797">)</span>&nbsp;<span class="op" id="2281799">=</span>&nbsp;<span class="ident" id="2281801">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2281804">}</span><br>
<span class="lineno"></span><span class="op" id="2281806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2281809">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2281851">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2281943">func</span>&nbsp;<span class="op" id="2281948">(</span><span class="ident" id="2281949">v</span>&nbsp;<span class="ident" id="2281951">Value</span><span class="op" id="2281956">)</span>&nbsp;<span class="ident" id="2281958">SetInt</span><span class="op" id="2281964">(</span><span class="ident" id="2281965">x</span>&nbsp;<span class="ident" id="2281967">int64</span><span class="op" id="2281972">)</span>&nbsp;<span class="op" id="2281974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2281977">v</span><span class="op" id="2281978">.</span><span class="ident" id="2281979">mustBeAssignable</span><span class="op" id="2281995">(</span><span class="op" id="2281996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2281999">switch</span>&nbsp;<span class="ident" id="2282006">k</span>&nbsp;<span class="op" id="2282008">:=</span>&nbsp;<span class="ident" id="2282011">v</span><span class="op" id="2282012">.</span><span class="ident" id="2282013">kind</span><span class="op" id="2282017">(</span><span class="op" id="2282018">)</span><span class="op" id="2282019">;</span>&nbsp;<span class="ident" id="2282021">k</span>&nbsp;<span class="op" id="2282023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282026">default</span><span class="op" id="2282033">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2282037">panic</span><span class="op" id="2282042">(</span><span class="op" id="2282043">&amp;</span><span class="ident" id="2282044">ValueError</span><span class="op" id="2282054">{</span><span class="string" id="2282055">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2282077">,</span>&nbsp;<span class="ident" id="2282079">v</span><span class="op" id="2282080">.</span><span class="ident" id="2282081">kind</span><span class="op" id="2282085">(</span><span class="op" id="2282086">)</span><span class="op" id="2282087">}</span><span class="op" id="2282088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282091">case</span>&nbsp;<span class="ident" id="2282096">Int</span><span class="op" id="2282099">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282103">*</span><span class="op" id="2282104">(</span><span class="op" id="2282105">*</span><span class="builtintype" id="2282106">int</span><span class="op" id="2282109">)</span><span class="op" id="2282110">(</span><span class="ident" id="2282111">v</span><span class="op" id="2282112">.</span><span class="ident" id="2282113">ptr</span><span class="op" id="2282116">)</span>&nbsp;<span class="op" id="2282118">=</span>&nbsp;<span class="builtintype" id="2282120">int</span><span class="op" id="2282123">(</span><span class="ident" id="2282124">x</span><span class="op" id="2282125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282128">case</span>&nbsp;<span class="ident" id="2282133">Int8</span><span class="op" id="2282137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282141">*</span><span class="op" id="2282142">(</span><span class="op" id="2282143">*</span><span class="builtintype" id="2282144">int8</span><span class="op" id="2282148">)</span><span class="op" id="2282149">(</span><span class="ident" id="2282150">v</span><span class="op" id="2282151">.</span><span class="ident" id="2282152">ptr</span><span class="op" id="2282155">)</span>&nbsp;<span class="op" id="2282157">=</span>&nbsp;<span class="builtintype" id="2282159">int8</span><span class="op" id="2282163">(</span><span class="ident" id="2282164">x</span><span class="op" id="2282165">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282168">case</span>&nbsp;<span class="ident" id="2282173">Int16</span><span class="op" id="2282178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282182">*</span><span class="op" id="2282183">(</span><span class="op" id="2282184">*</span><span class="builtintype" id="2282185">int16</span><span class="op" id="2282190">)</span><span class="op" id="2282191">(</span><span class="ident" id="2282192">v</span><span class="op" id="2282193">.</span><span class="ident" id="2282194">ptr</span><span class="op" id="2282197">)</span>&nbsp;<span class="op" id="2282199">=</span>&nbsp;<span class="builtintype" id="2282201">int16</span><span class="op" id="2282206">(</span><span class="ident" id="2282207">x</span><span class="op" id="2282208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282211">case</span>&nbsp;<span class="ident" id="2282216">Int32</span><span class="op" id="2282221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282225">*</span><span class="op" id="2282226">(</span><span class="op" id="2282227">*</span><span class="builtintype" id="2282228">int32</span><span class="op" id="2282233">)</span><span class="op" id="2282234">(</span><span class="ident" id="2282235">v</span><span class="op" id="2282236">.</span><span class="ident" id="2282237">ptr</span><span class="op" id="2282240">)</span>&nbsp;<span class="op" id="2282242">=</span>&nbsp;<span class="builtintype" id="2282244">int32</span><span class="op" id="2282249">(</span><span class="ident" id="2282250">x</span><span class="op" id="2282251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282254">case</span>&nbsp;<span class="ident" id="2282259">Int64</span><span class="op" id="2282264">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282268">*</span><span class="op" id="2282269">(</span><span class="op" id="2282270">*</span><span class="ident" id="2282271">int64</span><span class="op" id="2282276">)</span><span class="op" id="2282277">(</span><span class="ident" id="2282278">v</span><span class="op" id="2282279">.</span><span class="ident" id="2282280">ptr</span><span class="op" id="2282283">)</span>&nbsp;<span class="op" id="2282285">=</span>&nbsp;<span class="ident" id="2282287">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282290">}</span><br>
<span class="lineno"></span><span class="op" id="2282292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2282295">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2282327">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2282388">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2282431">func</span>&nbsp;<span class="op" id="2282436">(</span><span class="ident" id="2282437">v</span>&nbsp;<span class="ident" id="2282439">Value</span><span class="op" id="2282444">)</span>&nbsp;<span class="ident" id="2282446">SetLen</span><span class="op" id="2282452">(</span><span class="ident" id="2282453">n</span>&nbsp;<span class="builtintype" id="2282455">int</span><span class="op" id="2282458">)</span>&nbsp;<span class="op" id="2282460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282463">v</span><span class="op" id="2282464">.</span><span class="ident" id="2282465">mustBeAssignable</span><span class="op" id="2282481">(</span><span class="op" id="2282482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282485">v</span><span class="op" id="2282486">.</span><span class="ident" id="2282487">mustBe</span><span class="op" id="2282493">(</span><span class="ident" id="2282494">Slice</span><span class="op" id="2282499">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282502">s</span>&nbsp;<span class="op" id="2282504">:=</span>&nbsp;<span class="op" id="2282507">(</span><span class="op" id="2282508">*</span><span class="ident" id="2282509">sliceHeader</span><span class="op" id="2282520">)</span><span class="op" id="2282521">(</span><span class="ident" id="2282522">v</span><span class="op" id="2282523">.</span><span class="ident" id="2282524">ptr</span><span class="op" id="2282527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282530">if</span>&nbsp;<span class="builtintype" id="2282533">uint</span><span class="op" id="2282537">(</span><span class="ident" id="2282538">n</span><span class="op" id="2282539">)</span>&nbsp;<span class="op" id="2282541">&gt;</span>&nbsp;<span class="builtintype" id="2282543">uint</span><span class="op" id="2282547">(</span><span class="ident" id="2282548">s</span><span class="op" id="2282549">.</span><span class="ident" id="2282550">Cap</span><span class="op" id="2282553">)</span>&nbsp;<span class="op" id="2282555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2282559">panic</span><span class="op" id="2282564">(</span><span class="string" id="2282565">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2282611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282617">s</span><span class="op" id="2282618">.</span><span class="ident" id="2282619">Len</span>&nbsp;<span class="op" id="2282623">=</span>&nbsp;<span class="ident" id="2282625">n</span><br>
<span class="lineno">1395</span><span class="op" id="2282627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2282630">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2282664">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2282740">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2282783">func</span>&nbsp;<span class="op" id="2282788">(</span><span class="ident" id="2282789">v</span>&nbsp;<span class="ident" id="2282791">Value</span><span class="op" id="2282796">)</span>&nbsp;<span class="ident" id="2282798">SetCap</span><span class="op" id="2282804">(</span><span class="ident" id="2282805">n</span>&nbsp;<span class="builtintype" id="2282807">int</span><span class="op" id="2282810">)</span>&nbsp;<span class="op" id="2282812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282815">v</span><span class="op" id="2282816">.</span><span class="ident" id="2282817">mustBeAssignable</span><span class="op" id="2282833">(</span><span class="op" id="2282834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282837">v</span><span class="op" id="2282838">.</span><span class="ident" id="2282839">mustBe</span><span class="op" id="2282845">(</span><span class="ident" id="2282846">Slice</span><span class="op" id="2282851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282854">s</span>&nbsp;<span class="op" id="2282856">:=</span>&nbsp;<span class="op" id="2282859">(</span><span class="op" id="2282860">*</span><span class="ident" id="2282861">sliceHeader</span><span class="op" id="2282872">)</span><span class="op" id="2282873">(</span><span class="ident" id="2282874">v</span><span class="op" id="2282875">.</span><span class="ident" id="2282876">ptr</span><span class="op" id="2282879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2282882">if</span>&nbsp;<span class="ident" id="2282885">n</span>&nbsp;<span class="op" id="2282887">&lt;</span>&nbsp;<span class="builtintype" id="2282889">int</span><span class="op" id="2282892">(</span><span class="ident" id="2282893">s</span><span class="op" id="2282894">.</span><span class="ident" id="2282895">Len</span><span class="op" id="2282898">)</span>&nbsp;<span class="op" id="2282900">||</span>&nbsp;<span class="ident" id="2282903">n</span>&nbsp;<span class="op" id="2282905">&gt;</span>&nbsp;<span class="builtintype" id="2282907">int</span><span class="op" id="2282910">(</span><span class="ident" id="2282911">s</span><span class="op" id="2282912">.</span><span class="ident" id="2282913">Cap</span><span class="op" id="2282916">)</span>&nbsp;<span class="op" id="2282918">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2282922">panic</span><span class="op" id="2282927">(</span><span class="string" id="2282928">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2282976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2282979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2282982">s</span><span class="op" id="2282983">.</span><span class="ident" id="2282984">Cap</span>&nbsp;<span class="op" id="2282988">=</span>&nbsp;<span class="ident" id="2282990">n</span><br>
<span class="lineno"></span><span class="op" id="2282992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2282995">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2283066">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2283103">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2283174">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2283233">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2283300">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2283363">func</span>&nbsp;<span class="op" id="2283368">(</span><span class="ident" id="2283369">v</span>&nbsp;<span class="ident" id="2283371">Value</span><span class="op" id="2283376">)</span>&nbsp;<span class="ident" id="2283378">SetMapIndex</span><span class="op" id="2283389">(</span><span class="ident" id="2283390">key</span><span class="op" id="2283393">,</span>&nbsp;<span class="ident" id="2283395">val</span>&nbsp;<span class="ident" id="2283399">Value</span><span class="op" id="2283404">)</span>&nbsp;<span class="op" id="2283406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283409">v</span><span class="op" id="2283410">.</span><span class="ident" id="2283411">mustBe</span><span class="op" id="2283417">(</span><span class="ident" id="2283418">Map</span><span class="op" id="2283421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283424">v</span><span class="op" id="2283425">.</span><span class="ident" id="2283426">mustBeExported</span><span class="op" id="2283440">(</span><span class="op" id="2283441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283444">key</span><span class="op" id="2283447">.</span><span class="ident" id="2283448">mustBeExported</span><span class="op" id="2283462">(</span><span class="op" id="2283463">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283466">tt</span>&nbsp;<span class="op" id="2283469">:=</span>&nbsp;<span class="op" id="2283472">(</span><span class="op" id="2283473">*</span><span class="ident" id="2283474">mapType</span><span class="op" id="2283481">)</span><span class="op" id="2283482">(</span><span class="ident" id="2283483">unsafe</span><span class="op" id="2283489">.</span><span class="ident" id="2283490">Pointer</span><span class="op" id="2283497">(</span><span class="ident" id="2283498">v</span><span class="op" id="2283499">.</span><span class="ident" id="2283500">typ</span><span class="op" id="2283503">)</span><span class="op" id="2283504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283507">key</span>&nbsp;<span class="op" id="2283511">=</span>&nbsp;<span class="ident" id="2283513">key</span><span class="op" id="2283516">.</span><span class="ident" id="2283517">assignTo</span><span class="op" id="2283525">(</span><span class="string" id="2283526">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2283553">,</span>&nbsp;<span class="ident" id="2283555">tt</span><span class="op" id="2283557">.</span><span class="ident" id="2283558">key</span><span class="op" id="2283561">,</span>&nbsp;<span class="ident" id="2283563">nil</span><span class="op" id="2283566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2283569">var</span>&nbsp;<span class="ident" id="2283573">k</span>&nbsp;<span class="ident" id="2283575">unsafe</span><span class="op" id="2283581">.</span><span class="ident" id="2283582">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2283591">if</span>&nbsp;<span class="ident" id="2283594">key</span><span class="op" id="2283597">.</span><span class="ident" id="2283598">flag</span><span class="op" id="2283602">&amp;</span><span class="ident" id="2283603">flagIndir</span>&nbsp;<span class="op" id="2283613">!=</span>&nbsp;<span class="num" id="2283616">0</span>&nbsp;<span class="op" id="2283618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283622">k</span>&nbsp;<span class="op" id="2283624">=</span>&nbsp;<span class="ident" id="2283626">key</span><span class="op" id="2283629">.</span><span class="ident" id="2283630">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2283635">}</span>&nbsp;<span class="keyword" id="2283637">else</span>&nbsp;<span class="op" id="2283642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283646">k</span>&nbsp;<span class="op" id="2283648">=</span>&nbsp;<span class="ident" id="2283650">unsafe</span><span class="op" id="2283656">.</span><span class="ident" id="2283657">Pointer</span><span class="op" id="2283664">(</span><span class="op" id="2283665">&amp;</span><span class="ident" id="2283666">key</span><span class="op" id="2283669">.</span><span class="ident" id="2283670">ptr</span><span class="op" id="2283673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2283676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2283679">if</span>&nbsp;<span class="ident" id="2283682">val</span><span class="op" id="2283685">.</span><span class="ident" id="2283686">typ</span>&nbsp;<span class="op" id="2283690">==</span>&nbsp;<span class="ident" id="2283693">nil</span>&nbsp;<span class="op" id="2283697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283701">mapdelete</span><span class="op" id="2283710">(</span><span class="ident" id="2283711">v</span><span class="op" id="2283712">.</span><span class="ident" id="2283713">typ</span><span class="op" id="2283716">,</span>&nbsp;<span class="ident" id="2283718">v</span><span class="op" id="2283719">.</span><span class="ident" id="2283720">pointer</span><span class="op" id="2283727">(</span><span class="op" id="2283728">)</span><span class="op" id="2283729">,</span>&nbsp;<span class="ident" id="2283731">k</span><span class="op" id="2283732">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2283736">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2283744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283747">val</span><span class="op" id="2283750">.</span><span class="ident" id="2283751">mustBeExported</span><span class="op" id="2283765">(</span><span class="op" id="2283766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283769">val</span>&nbsp;<span class="op" id="2283773">=</span>&nbsp;<span class="ident" id="2283775">val</span><span class="op" id="2283778">.</span><span class="ident" id="2283779">assignTo</span><span class="op" id="2283787">(</span><span class="string" id="2283788">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2283815">,</span>&nbsp;<span class="ident" id="2283817">tt</span><span class="op" id="2283819">.</span><span class="ident" id="2283820">elem</span><span class="op" id="2283824">,</span>&nbsp;<span class="ident" id="2283826">nil</span><span class="op" id="2283829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2283832">var</span>&nbsp;<span class="ident" id="2283836">e</span>&nbsp;<span class="ident" id="2283838">unsafe</span><span class="op" id="2283844">.</span><span class="ident" id="2283845">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2283854">if</span>&nbsp;<span class="ident" id="2283857">val</span><span class="op" id="2283860">.</span><span class="ident" id="2283861">flag</span><span class="op" id="2283865">&amp;</span><span class="ident" id="2283866">flagIndir</span>&nbsp;<span class="op" id="2283876">!=</span>&nbsp;<span class="num" id="2283879">0</span>&nbsp;<span class="op" id="2283881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283885">e</span>&nbsp;<span class="op" id="2283887">=</span>&nbsp;<span class="ident" id="2283889">val</span><span class="op" id="2283892">.</span><span class="ident" id="2283893">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2283898">}</span>&nbsp;<span class="keyword" id="2283900">else</span>&nbsp;<span class="op" id="2283905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283909">e</span>&nbsp;<span class="op" id="2283911">=</span>&nbsp;<span class="ident" id="2283913">unsafe</span><span class="op" id="2283919">.</span><span class="ident" id="2283920">Pointer</span><span class="op" id="2283927">(</span><span class="op" id="2283928">&amp;</span><span class="ident" id="2283929">val</span><span class="op" id="2283932">.</span><span class="ident" id="2283933">ptr</span><span class="op" id="2283936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2283939">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2283942">mapassign</span><span class="op" id="2283951">(</span><span class="ident" id="2283952">v</span><span class="op" id="2283953">.</span><span class="ident" id="2283954">typ</span><span class="op" id="2283957">,</span>&nbsp;<span class="ident" id="2283959">v</span><span class="op" id="2283960">.</span><span class="ident" id="2283961">pointer</span><span class="op" id="2283968">(</span><span class="op" id="2283969">)</span><span class="op" id="2283970">,</span>&nbsp;<span class="ident" id="2283972">k</span><span class="op" id="2283973">,</span>&nbsp;<span class="ident" id="2283975">e</span><span class="op" id="2283976">)</span><br>
<span class="lineno"></span><span class="op" id="2283978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2283981">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2284024">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2284130">func</span>&nbsp;<span class="op" id="2284135">(</span><span class="ident" id="2284136">v</span>&nbsp;<span class="ident" id="2284138">Value</span><span class="op" id="2284143">)</span>&nbsp;<span class="ident" id="2284145">SetUint</span><span class="op" id="2284152">(</span><span class="ident" id="2284153">x</span>&nbsp;<span class="ident" id="2284155">uint64</span><span class="op" id="2284161">)</span>&nbsp;<span class="op" id="2284163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2284166">v</span><span class="op" id="2284167">.</span><span class="ident" id="2284168">mustBeAssignable</span><span class="op" id="2284184">(</span><span class="op" id="2284185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284188">switch</span>&nbsp;<span class="ident" id="2284195">k</span>&nbsp;<span class="op" id="2284197">:=</span>&nbsp;<span class="ident" id="2284200">v</span><span class="op" id="2284201">.</span><span class="ident" id="2284202">kind</span><span class="op" id="2284206">(</span><span class="op" id="2284207">)</span><span class="op" id="2284208">;</span>&nbsp;<span class="ident" id="2284210">k</span>&nbsp;<span class="op" id="2284212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284215">default</span><span class="op" id="2284222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2284226">panic</span><span class="op" id="2284231">(</span><span class="op" id="2284232">&amp;</span><span class="ident" id="2284233">ValueError</span><span class="op" id="2284243">{</span><span class="string" id="2284244">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2284267">,</span>&nbsp;<span class="ident" id="2284269">v</span><span class="op" id="2284270">.</span><span class="ident" id="2284271">kind</span><span class="op" id="2284275">(</span><span class="op" id="2284276">)</span><span class="op" id="2284277">}</span><span class="op" id="2284278">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284281">case</span>&nbsp;<span class="ident" id="2284286">Uint</span><span class="op" id="2284290">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284294">*</span><span class="op" id="2284295">(</span><span class="op" id="2284296">*</span><span class="builtintype" id="2284297">uint</span><span class="op" id="2284301">)</span><span class="op" id="2284302">(</span><span class="ident" id="2284303">v</span><span class="op" id="2284304">.</span><span class="ident" id="2284305">ptr</span><span class="op" id="2284308">)</span>&nbsp;<span class="op" id="2284310">=</span>&nbsp;<span class="builtintype" id="2284312">uint</span><span class="op" id="2284316">(</span><span class="ident" id="2284317">x</span><span class="op" id="2284318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284321">case</span>&nbsp;<span class="ident" id="2284326">Uint8</span><span class="op" id="2284331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284335">*</span><span class="op" id="2284336">(</span><span class="op" id="2284337">*</span><span class="builtintype" id="2284338">uint8</span><span class="op" id="2284343">)</span><span class="op" id="2284344">(</span><span class="ident" id="2284345">v</span><span class="op" id="2284346">.</span><span class="ident" id="2284347">ptr</span><span class="op" id="2284350">)</span>&nbsp;<span class="op" id="2284352">=</span>&nbsp;<span class="builtintype" id="2284354">uint8</span><span class="op" id="2284359">(</span><span class="ident" id="2284360">x</span><span class="op" id="2284361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284364">case</span>&nbsp;<span class="ident" id="2284369">Uint16</span><span class="op" id="2284375">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284379">*</span><span class="op" id="2284380">(</span><span class="op" id="2284381">*</span><span class="builtintype" id="2284382">uint16</span><span class="op" id="2284388">)</span><span class="op" id="2284389">(</span><span class="ident" id="2284390">v</span><span class="op" id="2284391">.</span><span class="ident" id="2284392">ptr</span><span class="op" id="2284395">)</span>&nbsp;<span class="op" id="2284397">=</span>&nbsp;<span class="builtintype" id="2284399">uint16</span><span class="op" id="2284405">(</span><span class="ident" id="2284406">x</span><span class="op" id="2284407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284410">case</span>&nbsp;<span class="ident" id="2284415">Uint32</span><span class="op" id="2284421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284425">*</span><span class="op" id="2284426">(</span><span class="op" id="2284427">*</span><span class="builtintype" id="2284428">uint32</span><span class="op" id="2284434">)</span><span class="op" id="2284435">(</span><span class="ident" id="2284436">v</span><span class="op" id="2284437">.</span><span class="ident" id="2284438">ptr</span><span class="op" id="2284441">)</span>&nbsp;<span class="op" id="2284443">=</span>&nbsp;<span class="builtintype" id="2284445">uint32</span><span class="op" id="2284451">(</span><span class="ident" id="2284452">x</span><span class="op" id="2284453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284456">case</span>&nbsp;<span class="ident" id="2284461">Uint64</span><span class="op" id="2284467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284471">*</span><span class="op" id="2284472">(</span><span class="op" id="2284473">*</span><span class="ident" id="2284474">uint64</span><span class="op" id="2284480">)</span><span class="op" id="2284481">(</span><span class="ident" id="2284482">v</span><span class="op" id="2284483">.</span><span class="ident" id="2284484">ptr</span><span class="op" id="2284487">)</span>&nbsp;<span class="op" id="2284489">=</span>&nbsp;<span class="ident" id="2284491">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2284494">case</span>&nbsp;<span class="ident" id="2284499">Uintptr</span><span class="op" id="2284506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284510">*</span><span class="op" id="2284511">(</span><span class="op" id="2284512">*</span><span class="builtintype" id="2284513">uintptr</span><span class="op" id="2284520">)</span><span class="op" id="2284521">(</span><span class="ident" id="2284522">v</span><span class="op" id="2284523">.</span><span class="ident" id="2284524">ptr</span><span class="op" id="2284527">)</span>&nbsp;<span class="op" id="2284529">=</span>&nbsp;<span class="builtintype" id="2284531">uintptr</span><span class="op" id="2284538">(</span><span class="ident" id="2284539">x</span><span class="op" id="2284540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284543">}</span><br>
<span class="lineno"></span><span class="op" id="2284545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2284548">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2284600">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2284647">func</span>&nbsp;<span class="op" id="2284652">(</span><span class="ident" id="2284653">v</span>&nbsp;<span class="ident" id="2284655">Value</span><span class="op" id="2284660">)</span>&nbsp;<span class="ident" id="2284662">SetPointer</span><span class="op" id="2284672">(</span><span class="ident" id="2284673">x</span>&nbsp;<span class="ident" id="2284675">unsafe</span><span class="op" id="2284681">.</span><span class="ident" id="2284682">Pointer</span><span class="op" id="2284689">)</span>&nbsp;<span class="op" id="2284691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2284694">v</span><span class="op" id="2284695">.</span><span class="ident" id="2284696">mustBeAssignable</span><span class="op" id="2284712">(</span><span class="op" id="2284713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2284716">v</span><span class="op" id="2284717">.</span><span class="ident" id="2284718">mustBe</span><span class="op" id="2284724">(</span><span class="ident" id="2284725">UnsafePointer</span><span class="op" id="2284738">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284741">*</span><span class="op" id="2284742">(</span><span class="op" id="2284743">*</span><span class="ident" id="2284744">unsafe</span><span class="op" id="2284750">.</span><span class="ident" id="2284751">Pointer</span><span class="op" id="2284758">)</span><span class="op" id="2284759">(</span><span class="ident" id="2284760">v</span><span class="op" id="2284761">.</span><span class="ident" id="2284762">ptr</span><span class="op" id="2284765">)</span>&nbsp;<span class="op" id="2284767">=</span>&nbsp;<span class="ident" id="2284769">x</span><br>
<span class="lineno"></span><span class="op" id="2284771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2284774">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2284819">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2284883">func</span>&nbsp;<span class="op" id="2284888">(</span><span class="ident" id="2284889">v</span>&nbsp;<span class="ident" id="2284891">Value</span><span class="op" id="2284896">)</span>&nbsp;<span class="ident" id="2284898">SetString</span><span class="op" id="2284907">(</span><span class="ident" id="2284908">x</span>&nbsp;<span class="builtintype" id="2284910">string</span><span class="op" id="2284916">)</span>&nbsp;<span class="op" id="2284918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2284921">v</span><span class="op" id="2284922">.</span><span class="ident" id="2284923">mustBeAssignable</span><span class="op" id="2284939">(</span><span class="op" id="2284940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2284943">v</span><span class="op" id="2284944">.</span><span class="ident" id="2284945">mustBe</span><span class="op" id="2284951">(</span><span class="ident" id="2284952">String</span><span class="op" id="2284958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2284961">*</span><span class="op" id="2284962">(</span><span class="op" id="2284963">*</span><span class="builtintype" id="2284964">string</span><span class="op" id="2284970">)</span><span class="op" id="2284971">(</span><span class="ident" id="2284972">v</span><span class="op" id="2284973">.</span><span class="ident" id="2284974">ptr</span><span class="op" id="2284977">)</span>&nbsp;<span class="op" id="2284979">=</span>&nbsp;<span class="ident" id="2284981">x</span><br>
<span class="lineno"></span><span class="op" id="2284983">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2284986">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2285011">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2285102">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2285142">func</span>&nbsp;<span class="op" id="2285147">(</span><span class="ident" id="2285148">v</span>&nbsp;<span class="ident" id="2285150">Value</span><span class="op" id="2285155">)</span>&nbsp;<span class="ident" id="2285157">Slice</span><span class="op" id="2285162">(</span><span class="ident" id="2285163">i</span><span class="op" id="2285164">,</span>&nbsp;<span class="ident" id="2285166">j</span>&nbsp;<span class="builtintype" id="2285168">int</span><span class="op" id="2285171">)</span>&nbsp;<span class="ident" id="2285173">Value</span>&nbsp;<span class="op" id="2285179">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285182">var</span>&nbsp;<span class="op" id="2285186">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2285190">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2285195">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285201">typ</span>&nbsp;&nbsp;<span class="op" id="2285206">*</span><span class="ident" id="2285207">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285219">base</span>&nbsp;<span class="ident" id="2285224">unsafe</span><span class="op" id="2285230">.</span><span class="ident" id="2285231">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2285240">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285243">switch</span>&nbsp;<span class="ident" id="2285250">kind</span>&nbsp;<span class="op" id="2285255">:=</span>&nbsp;<span class="ident" id="2285258">v</span><span class="op" id="2285259">.</span><span class="ident" id="2285260">kind</span><span class="op" id="2285264">(</span><span class="op" id="2285265">)</span><span class="op" id="2285266">;</span>&nbsp;<span class="ident" id="2285268">kind</span>&nbsp;<span class="op" id="2285273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285276">default</span><span class="op" id="2285283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2285287">panic</span><span class="op" id="2285292">(</span><span class="op" id="2285293">&amp;</span><span class="ident" id="2285294">ValueError</span><span class="op" id="2285304">{</span><span class="string" id="2285305">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2285326">,</span>&nbsp;<span class="ident" id="2285328">v</span><span class="op" id="2285329">.</span><span class="ident" id="2285330">kind</span><span class="op" id="2285334">(</span><span class="op" id="2285335">)</span><span class="op" id="2285336">}</span><span class="op" id="2285337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285341">case</span>&nbsp;<span class="ident" id="2285346">Array</span><span class="op" id="2285351">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285355">if</span>&nbsp;<span class="ident" id="2285358">v</span><span class="op" id="2285359">.</span><span class="ident" id="2285360">flag</span><span class="op" id="2285364">&amp;</span><span class="ident" id="2285365">flagAddr</span>&nbsp;<span class="op" id="2285374">==</span>&nbsp;<span class="num" id="2285377">0</span>&nbsp;<span class="op" id="2285379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2285384">panic</span><span class="op" id="2285389">(</span><span class="string" id="2285390">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2285441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2285445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285449">tt</span>&nbsp;<span class="op" id="2285452">:=</span>&nbsp;<span class="op" id="2285455">(</span><span class="op" id="2285456">*</span><span class="ident" id="2285457">arrayType</span><span class="op" id="2285466">)</span><span class="op" id="2285467">(</span><span class="ident" id="2285468">unsafe</span><span class="op" id="2285474">.</span><span class="ident" id="2285475">Pointer</span><span class="op" id="2285482">(</span><span class="ident" id="2285483">v</span><span class="op" id="2285484">.</span><span class="ident" id="2285485">typ</span><span class="op" id="2285488">)</span><span class="op" id="2285489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2285493">cap</span>&nbsp;<span class="op" id="2285497">=</span>&nbsp;<span class="builtintype" id="2285499">int</span><span class="op" id="2285502">(</span><span class="ident" id="2285503">tt</span><span class="op" id="2285505">.</span><span class="builtinfunc" id="2285506">len</span><span class="op" id="2285509">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285513">typ</span>&nbsp;<span class="op" id="2285517">=</span>&nbsp;<span class="op" id="2285519">(</span><span class="op" id="2285520">*</span><span class="ident" id="2285521">sliceType</span><span class="op" id="2285530">)</span><span class="op" id="2285531">(</span><span class="ident" id="2285532">unsafe</span><span class="op" id="2285538">.</span><span class="ident" id="2285539">Pointer</span><span class="op" id="2285546">(</span><span class="ident" id="2285547">tt</span><span class="op" id="2285549">.</span><span class="ident" id="2285550">slice</span><span class="op" id="2285555">)</span><span class="op" id="2285556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285560">base</span>&nbsp;<span class="op" id="2285565">=</span>&nbsp;<span class="ident" id="2285567">v</span><span class="op" id="2285568">.</span><span class="ident" id="2285569">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285575">case</span>&nbsp;<span class="ident" id="2285580">Slice</span><span class="op" id="2285585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285589">typ</span>&nbsp;<span class="op" id="2285593">=</span>&nbsp;<span class="op" id="2285595">(</span><span class="op" id="2285596">*</span><span class="ident" id="2285597">sliceType</span><span class="op" id="2285606">)</span><span class="op" id="2285607">(</span><span class="ident" id="2285608">unsafe</span><span class="op" id="2285614">.</span><span class="ident" id="2285615">Pointer</span><span class="op" id="2285622">(</span><span class="ident" id="2285623">v</span><span class="op" id="2285624">.</span><span class="ident" id="2285625">typ</span><span class="op" id="2285628">)</span><span class="op" id="2285629">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285633">s</span>&nbsp;<span class="op" id="2285635">:=</span>&nbsp;<span class="op" id="2285638">(</span><span class="op" id="2285639">*</span><span class="ident" id="2285640">sliceHeader</span><span class="op" id="2285651">)</span><span class="op" id="2285652">(</span><span class="ident" id="2285653">v</span><span class="op" id="2285654">.</span><span class="ident" id="2285655">ptr</span><span class="op" id="2285658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285662">base</span>&nbsp;<span class="op" id="2285667">=</span>&nbsp;<span class="ident" id="2285669">unsafe</span><span class="op" id="2285675">.</span><span class="ident" id="2285676">Pointer</span><span class="op" id="2285683">(</span><span class="ident" id="2285684">s</span><span class="op" id="2285685">.</span><span class="ident" id="2285686">Data</span><span class="op" id="2285690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2285694">cap</span>&nbsp;<span class="op" id="2285698">=</span>&nbsp;<span class="ident" id="2285700">s</span><span class="op" id="2285701">.</span><span class="ident" id="2285702">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285708">case</span>&nbsp;<span class="ident" id="2285713">String</span><span class="op" id="2285719">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285723">s</span>&nbsp;<span class="op" id="2285725">:=</span>&nbsp;<span class="op" id="2285728">(</span><span class="op" id="2285729">*</span><span class="ident" id="2285730">stringHeader</span><span class="op" id="2285742">)</span><span class="op" id="2285743">(</span><span class="ident" id="2285744">v</span><span class="op" id="2285745">.</span><span class="ident" id="2285746">ptr</span><span class="op" id="2285749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285753">if</span>&nbsp;<span class="ident" id="2285756">i</span>&nbsp;<span class="op" id="2285758">&lt;</span>&nbsp;<span class="num" id="2285760">0</span>&nbsp;<span class="op" id="2285762">||</span>&nbsp;<span class="ident" id="2285765">j</span>&nbsp;<span class="op" id="2285767">&lt;</span>&nbsp;<span class="ident" id="2285769">i</span>&nbsp;<span class="op" id="2285771">||</span>&nbsp;<span class="ident" id="2285774">j</span>&nbsp;<span class="op" id="2285776">&gt;</span>&nbsp;<span class="ident" id="2285778">s</span><span class="op" id="2285779">.</span><span class="ident" id="2285780">Len</span>&nbsp;<span class="op" id="2285784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2285789">panic</span><span class="op" id="2285794">(</span><span class="string" id="2285795">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2285850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2285854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2285858">t</span>&nbsp;<span class="op" id="2285860">:=</span>&nbsp;<span class="ident" id="2285863">stringHeader</span><span class="op" id="2285875">{</span><span class="ident" id="2285876">unsafe</span><span class="op" id="2285882">.</span><span class="ident" id="2285883">Pointer</span><span class="op" id="2285890">(</span><span class="builtintype" id="2285891">uintptr</span><span class="op" id="2285898">(</span><span class="ident" id="2285899">s</span><span class="op" id="2285900">.</span><span class="ident" id="2285901">Data</span><span class="op" id="2285905">)</span>&nbsp;<span class="op" id="2285907">+</span>&nbsp;<span class="builtintype" id="2285909">uintptr</span><span class="op" id="2285916">(</span><span class="ident" id="2285917">i</span><span class="op" id="2285918">)</span><span class="op" id="2285919">)</span><span class="op" id="2285920">,</span>&nbsp;<span class="ident" id="2285922">j</span>&nbsp;<span class="op" id="2285924">-</span>&nbsp;<span class="ident" id="2285926">i</span><span class="op" id="2285927">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285931">return</span>&nbsp;<span class="ident" id="2285938">Value</span><span class="op" id="2285943">{</span><span class="ident" id="2285944">v</span><span class="op" id="2285945">.</span><span class="ident" id="2285946">typ</span><span class="op" id="2285949">,</span>&nbsp;<span class="ident" id="2285951">unsafe</span><span class="op" id="2285957">.</span><span class="ident" id="2285958">Pointer</span><span class="op" id="2285965">(</span><span class="op" id="2285966">&amp;</span><span class="ident" id="2285967">t</span><span class="op" id="2285968">)</span><span class="op" id="2285969">,</span>&nbsp;<span class="ident" id="2285971">v</span><span class="op" id="2285972">.</span><span class="ident" id="2285973">flag</span><span class="op" id="2285977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2285980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2285984">if</span>&nbsp;<span class="ident" id="2285987">i</span>&nbsp;<span class="op" id="2285989">&lt;</span>&nbsp;<span class="num" id="2285991">0</span>&nbsp;<span class="op" id="2285993">||</span>&nbsp;<span class="ident" id="2285996">j</span>&nbsp;<span class="op" id="2285998">&lt;</span>&nbsp;<span class="ident" id="2286000">i</span>&nbsp;<span class="op" id="2286002">||</span>&nbsp;<span class="ident" id="2286005">j</span>&nbsp;<span class="op" id="2286007">&gt;</span>&nbsp;<span class="builtinfunc" id="2286009">cap</span>&nbsp;<span class="op" id="2286013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2286017">panic</span><span class="op" id="2286022">(</span><span class="string" id="2286023">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2286071">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2286074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2286078">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286139">var</span>&nbsp;<span class="ident" id="2286143">x</span>&nbsp;<span class="op" id="2286145">[</span><span class="op" id="2286146">]</span><span class="ident" id="2286147">unsafe</span><span class="op" id="2286153">.</span><span class="ident" id="2286154">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2286164">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286205">s</span>&nbsp;<span class="op" id="2286207">:=</span>&nbsp;<span class="op" id="2286210">(</span><span class="op" id="2286211">*</span><span class="ident" id="2286212">sliceHeader</span><span class="op" id="2286223">)</span><span class="op" id="2286224">(</span><span class="ident" id="2286225">unsafe</span><span class="op" id="2286231">.</span><span class="ident" id="2286232">Pointer</span><span class="op" id="2286239">(</span><span class="op" id="2286240">&amp;</span><span class="ident" id="2286241">x</span><span class="op" id="2286242">)</span><span class="op" id="2286243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286246">s</span><span class="op" id="2286247">.</span><span class="ident" id="2286248">Len</span>&nbsp;<span class="op" id="2286252">=</span>&nbsp;<span class="ident" id="2286254">j</span>&nbsp;<span class="op" id="2286256">-</span>&nbsp;<span class="ident" id="2286258">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286261">s</span><span class="op" id="2286262">.</span><span class="ident" id="2286263">Cap</span>&nbsp;<span class="op" id="2286267">=</span>&nbsp;<span class="builtinfunc" id="2286269">cap</span>&nbsp;<span class="op" id="2286273">-</span>&nbsp;<span class="ident" id="2286275">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286278">if</span>&nbsp;<span class="builtinfunc" id="2286281">cap</span><span class="op" id="2286284">-</span><span class="ident" id="2286285">i</span>&nbsp;<span class="op" id="2286287">&gt;</span>&nbsp;<span class="num" id="2286289">0</span>&nbsp;<span class="op" id="2286291">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286295">s</span><span class="op" id="2286296">.</span><span class="ident" id="2286297">Data</span>&nbsp;<span class="op" id="2286302">=</span>&nbsp;<span class="ident" id="2286304">unsafe</span><span class="op" id="2286310">.</span><span class="ident" id="2286311">Pointer</span><span class="op" id="2286318">(</span><span class="builtintype" id="2286319">uintptr</span><span class="op" id="2286326">(</span><span class="ident" id="2286327">base</span><span class="op" id="2286331">)</span>&nbsp;<span class="op" id="2286333">+</span>&nbsp;<span class="builtintype" id="2286335">uintptr</span><span class="op" id="2286342">(</span><span class="ident" id="2286343">i</span><span class="op" id="2286344">)</span><span class="op" id="2286345">*</span><span class="ident" id="2286346">typ</span><span class="op" id="2286349">.</span><span class="ident" id="2286350">elem</span><span class="op" id="2286354">.</span><span class="ident" id="2286355">Size</span><span class="op" id="2286359">(</span><span class="op" id="2286360">)</span><span class="op" id="2286361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2286364">}</span>&nbsp;<span class="keyword" id="2286366">else</span>&nbsp;<span class="op" id="2286371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2286375">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286442">s</span><span class="op" id="2286443">.</span><span class="ident" id="2286444">Data</span>&nbsp;<span class="op" id="2286449">=</span>&nbsp;<span class="ident" id="2286451">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2286457">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286461">fl</span>&nbsp;<span class="op" id="2286464">:=</span>&nbsp;<span class="ident" id="2286467">v</span><span class="op" id="2286468">.</span><span class="ident" id="2286469">flag</span><span class="op" id="2286473">&amp;</span><span class="ident" id="2286474">flagRO</span>&nbsp;<span class="op" id="2286481">|</span>&nbsp;<span class="ident" id="2286483">flagIndir</span>&nbsp;<span class="op" id="2286493">|</span>&nbsp;<span class="ident" id="2286495">flag</span><span class="op" id="2286499">(</span><span class="ident" id="2286500">Slice</span><span class="op" id="2286505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286508">return</span>&nbsp;<span class="ident" id="2286515">Value</span><span class="op" id="2286520">{</span><span class="ident" id="2286521">typ</span><span class="op" id="2286524">.</span><span class="ident" id="2286525">common</span><span class="op" id="2286531">(</span><span class="op" id="2286532">)</span><span class="op" id="2286533">,</span>&nbsp;<span class="ident" id="2286535">unsafe</span><span class="op" id="2286541">.</span><span class="ident" id="2286542">Pointer</span><span class="op" id="2286549">(</span><span class="op" id="2286550">&amp;</span><span class="ident" id="2286551">x</span><span class="op" id="2286552">)</span><span class="op" id="2286553">,</span>&nbsp;<span class="ident" id="2286555">fl</span><span class="op" id="2286557">}</span><br>
<span class="lineno"></span><span class="op" id="2286559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2286562">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2286637">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2286720">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2286760">func</span>&nbsp;<span class="op" id="2286765">(</span><span class="ident" id="2286766">v</span>&nbsp;<span class="ident" id="2286768">Value</span><span class="op" id="2286773">)</span>&nbsp;<span class="ident" id="2286775">Slice3</span><span class="op" id="2286781">(</span><span class="ident" id="2286782">i</span><span class="op" id="2286783">,</span>&nbsp;<span class="ident" id="2286785">j</span><span class="op" id="2286786">,</span>&nbsp;<span class="ident" id="2286788">k</span>&nbsp;<span class="builtintype" id="2286790">int</span><span class="op" id="2286793">)</span>&nbsp;<span class="ident" id="2286795">Value</span>&nbsp;<span class="op" id="2286801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286804">var</span>&nbsp;<span class="op" id="2286808">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2286812">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2286817">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286823">typ</span>&nbsp;&nbsp;<span class="op" id="2286828">*</span><span class="ident" id="2286829">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2286841">base</span>&nbsp;<span class="ident" id="2286846">unsafe</span><span class="op" id="2286852">.</span><span class="ident" id="2286853">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2286862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286865">switch</span>&nbsp;<span class="ident" id="2286872">kind</span>&nbsp;<span class="op" id="2286877">:=</span>&nbsp;<span class="ident" id="2286880">v</span><span class="op" id="2286881">.</span><span class="ident" id="2286882">kind</span><span class="op" id="2286886">(</span><span class="op" id="2286887">)</span><span class="op" id="2286888">;</span>&nbsp;<span class="ident" id="2286890">kind</span>&nbsp;<span class="op" id="2286895">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286898">default</span><span class="op" id="2286905">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2286909">panic</span><span class="op" id="2286914">(</span><span class="op" id="2286915">&amp;</span><span class="ident" id="2286916">ValueError</span><span class="op" id="2286926">{</span><span class="string" id="2286927">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2286949">,</span>&nbsp;<span class="ident" id="2286951">v</span><span class="op" id="2286952">.</span><span class="ident" id="2286953">kind</span><span class="op" id="2286957">(</span><span class="op" id="2286958">)</span><span class="op" id="2286959">}</span><span class="op" id="2286960">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286964">case</span>&nbsp;<span class="ident" id="2286969">Array</span><span class="op" id="2286974">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2286978">if</span>&nbsp;<span class="ident" id="2286981">v</span><span class="op" id="2286982">.</span><span class="ident" id="2286983">flag</span><span class="op" id="2286987">&amp;</span><span class="ident" id="2286988">flagAddr</span>&nbsp;<span class="op" id="2286997">==</span>&nbsp;<span class="num" id="2287000">0</span>&nbsp;<span class="op" id="2287002">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2287007">panic</span><span class="op" id="2287012">(</span><span class="string" id="2287013">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2287065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2287069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287073">tt</span>&nbsp;<span class="op" id="2287076">:=</span>&nbsp;<span class="op" id="2287079">(</span><span class="op" id="2287080">*</span><span class="ident" id="2287081">arrayType</span><span class="op" id="2287090">)</span><span class="op" id="2287091">(</span><span class="ident" id="2287092">unsafe</span><span class="op" id="2287098">.</span><span class="ident" id="2287099">Pointer</span><span class="op" id="2287106">(</span><span class="ident" id="2287107">v</span><span class="op" id="2287108">.</span><span class="ident" id="2287109">typ</span><span class="op" id="2287112">)</span><span class="op" id="2287113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2287117">cap</span>&nbsp;<span class="op" id="2287121">=</span>&nbsp;<span class="builtintype" id="2287123">int</span><span class="op" id="2287126">(</span><span class="ident" id="2287127">tt</span><span class="op" id="2287129">.</span><span class="builtinfunc" id="2287130">len</span><span class="op" id="2287133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287137">typ</span>&nbsp;<span class="op" id="2287141">=</span>&nbsp;<span class="op" id="2287143">(</span><span class="op" id="2287144">*</span><span class="ident" id="2287145">sliceType</span><span class="op" id="2287154">)</span><span class="op" id="2287155">(</span><span class="ident" id="2287156">unsafe</span><span class="op" id="2287162">.</span><span class="ident" id="2287163">Pointer</span><span class="op" id="2287170">(</span><span class="ident" id="2287171">tt</span><span class="op" id="2287173">.</span><span class="ident" id="2287174">slice</span><span class="op" id="2287179">)</span><span class="op" id="2287180">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287184">base</span>&nbsp;<span class="op" id="2287189">=</span>&nbsp;<span class="ident" id="2287191">v</span><span class="op" id="2287192">.</span><span class="ident" id="2287193">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2287199">case</span>&nbsp;<span class="ident" id="2287204">Slice</span><span class="op" id="2287209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287213">typ</span>&nbsp;<span class="op" id="2287217">=</span>&nbsp;<span class="op" id="2287219">(</span><span class="op" id="2287220">*</span><span class="ident" id="2287221">sliceType</span><span class="op" id="2287230">)</span><span class="op" id="2287231">(</span><span class="ident" id="2287232">unsafe</span><span class="op" id="2287238">.</span><span class="ident" id="2287239">Pointer</span><span class="op" id="2287246">(</span><span class="ident" id="2287247">v</span><span class="op" id="2287248">.</span><span class="ident" id="2287249">typ</span><span class="op" id="2287252">)</span><span class="op" id="2287253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287257">s</span>&nbsp;<span class="op" id="2287259">:=</span>&nbsp;<span class="op" id="2287262">(</span><span class="op" id="2287263">*</span><span class="ident" id="2287264">sliceHeader</span><span class="op" id="2287275">)</span><span class="op" id="2287276">(</span><span class="ident" id="2287277">v</span><span class="op" id="2287278">.</span><span class="ident" id="2287279">ptr</span><span class="op" id="2287282">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287286">base</span>&nbsp;<span class="op" id="2287291">=</span>&nbsp;<span class="ident" id="2287293">s</span><span class="op" id="2287294">.</span><span class="ident" id="2287295">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2287302">cap</span>&nbsp;<span class="op" id="2287306">=</span>&nbsp;<span class="ident" id="2287308">s</span><span class="op" id="2287309">.</span><span class="ident" id="2287310">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2287315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2287319">if</span>&nbsp;<span class="ident" id="2287322">i</span>&nbsp;<span class="op" id="2287324">&lt;</span>&nbsp;<span class="num" id="2287326">0</span>&nbsp;<span class="op" id="2287328">||</span>&nbsp;<span class="ident" id="2287331">j</span>&nbsp;<span class="op" id="2287333">&lt;</span>&nbsp;<span class="ident" id="2287335">i</span>&nbsp;<span class="op" id="2287337">||</span>&nbsp;<span class="ident" id="2287340">k</span>&nbsp;<span class="op" id="2287342">&lt;</span>&nbsp;<span class="ident" id="2287344">j</span>&nbsp;<span class="op" id="2287346">||</span>&nbsp;<span class="ident" id="2287349">k</span>&nbsp;<span class="op" id="2287351">&gt;</span>&nbsp;<span class="builtinfunc" id="2287353">cap</span>&nbsp;<span class="op" id="2287357">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2287361">panic</span><span class="op" id="2287366">(</span><span class="string" id="2287367">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2287416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2287419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2287423">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2287471">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2287507">var</span>&nbsp;<span class="ident" id="2287511">x</span>&nbsp;<span class="op" id="2287513">[</span><span class="op" id="2287514">]</span><span class="ident" id="2287515">unsafe</span><span class="op" id="2287521">.</span><span class="ident" id="2287522">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2287532">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287573">s</span>&nbsp;<span class="op" id="2287575">:=</span>&nbsp;<span class="op" id="2287578">(</span><span class="op" id="2287579">*</span><span class="ident" id="2287580">sliceHeader</span><span class="op" id="2287591">)</span><span class="op" id="2287592">(</span><span class="ident" id="2287593">unsafe</span><span class="op" id="2287599">.</span><span class="ident" id="2287600">Pointer</span><span class="op" id="2287607">(</span><span class="op" id="2287608">&amp;</span><span class="ident" id="2287609">x</span><span class="op" id="2287610">)</span><span class="op" id="2287611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287614">s</span><span class="op" id="2287615">.</span><span class="ident" id="2287616">Len</span>&nbsp;<span class="op" id="2287620">=</span>&nbsp;<span class="ident" id="2287622">j</span>&nbsp;<span class="op" id="2287624">-</span>&nbsp;<span class="ident" id="2287626">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287629">s</span><span class="op" id="2287630">.</span><span class="ident" id="2287631">Cap</span>&nbsp;<span class="op" id="2287635">=</span>&nbsp;<span class="ident" id="2287637">k</span>&nbsp;<span class="op" id="2287639">-</span>&nbsp;<span class="ident" id="2287641">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2287644">if</span>&nbsp;<span class="ident" id="2287647">k</span><span class="op" id="2287648">-</span><span class="ident" id="2287649">i</span>&nbsp;<span class="op" id="2287651">&gt;</span>&nbsp;<span class="num" id="2287653">0</span>&nbsp;<span class="op" id="2287655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287659">s</span><span class="op" id="2287660">.</span><span class="ident" id="2287661">Data</span>&nbsp;<span class="op" id="2287666">=</span>&nbsp;<span class="ident" id="2287668">unsafe</span><span class="op" id="2287674">.</span><span class="ident" id="2287675">Pointer</span><span class="op" id="2287682">(</span><span class="builtintype" id="2287683">uintptr</span><span class="op" id="2287690">(</span><span class="ident" id="2287691">base</span><span class="op" id="2287695">)</span>&nbsp;<span class="op" id="2287697">+</span>&nbsp;<span class="builtintype" id="2287699">uintptr</span><span class="op" id="2287706">(</span><span class="ident" id="2287707">i</span><span class="op" id="2287708">)</span><span class="op" id="2287709">*</span><span class="ident" id="2287710">typ</span><span class="op" id="2287713">.</span><span class="ident" id="2287714">elem</span><span class="op" id="2287718">.</span><span class="ident" id="2287719">Size</span><span class="op" id="2287723">(</span><span class="op" id="2287724">)</span><span class="op" id="2287725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2287728">}</span>&nbsp;<span class="keyword" id="2287730">else</span>&nbsp;<span class="op" id="2287735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2287739">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287806">s</span><span class="op" id="2287807">.</span><span class="ident" id="2287808">Data</span>&nbsp;<span class="op" id="2287813">=</span>&nbsp;<span class="ident" id="2287815">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2287821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2287825">fl</span>&nbsp;<span class="op" id="2287828">:=</span>&nbsp;<span class="ident" id="2287831">v</span><span class="op" id="2287832">.</span><span class="ident" id="2287833">flag</span><span class="op" id="2287837">&amp;</span><span class="ident" id="2287838">flagRO</span>&nbsp;<span class="op" id="2287845">|</span>&nbsp;<span class="ident" id="2287847">flagIndir</span>&nbsp;<span class="op" id="2287857">|</span>&nbsp;<span class="ident" id="2287859">flag</span><span class="op" id="2287863">(</span><span class="ident" id="2287864">Slice</span><span class="op" id="2287869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2287872">return</span>&nbsp;<span class="ident" id="2287879">Value</span><span class="op" id="2287884">{</span><span class="ident" id="2287885">typ</span><span class="op" id="2287888">.</span><span class="ident" id="2287889">common</span><span class="op" id="2287895">(</span><span class="op" id="2287896">)</span><span class="op" id="2287897">,</span>&nbsp;<span class="ident" id="2287899">unsafe</span><span class="op" id="2287905">.</span><span class="ident" id="2287906">Pointer</span><span class="op" id="2287913">(</span><span class="op" id="2287914">&amp;</span><span class="ident" id="2287915">x</span><span class="op" id="2287916">)</span><span class="op" id="2287917">,</span>&nbsp;<span class="ident" id="2287919">fl</span><span class="op" id="2287921">}</span><br>
<span class="lineno">1590</span><span class="op" id="2287923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2287926">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2287990">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2288060">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2288134">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2288211">func</span>&nbsp;<span class="op" id="2288216">(</span><span class="ident" id="2288217">v</span>&nbsp;<span class="ident" id="2288219">Value</span><span class="op" id="2288224">)</span>&nbsp;<span class="ident" id="2288226">String</span><span class="op" id="2288232">(</span><span class="op" id="2288233">)</span>&nbsp;<span class="builtintype" id="2288235">string</span>&nbsp;<span class="op" id="2288242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288245">switch</span>&nbsp;<span class="ident" id="2288252">k</span>&nbsp;<span class="op" id="2288254">:=</span>&nbsp;<span class="ident" id="2288257">v</span><span class="op" id="2288258">.</span><span class="ident" id="2288259">kind</span><span class="op" id="2288263">(</span><span class="op" id="2288264">)</span><span class="op" id="2288265">;</span>&nbsp;<span class="ident" id="2288267">k</span>&nbsp;<span class="op" id="2288269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288272">case</span>&nbsp;<span class="ident" id="2288277">Invalid</span><span class="op" id="2288284">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288288">return</span>&nbsp;<span class="string" id="2288295">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288314">case</span>&nbsp;<span class="ident" id="2288319">String</span><span class="op" id="2288325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288329">return</span>&nbsp;<span class="op" id="2288336">*</span><span class="op" id="2288337">(</span><span class="op" id="2288338">*</span><span class="builtintype" id="2288339">string</span><span class="op" id="2288345">)</span><span class="op" id="2288346">(</span><span class="ident" id="2288347">v</span><span class="op" id="2288348">.</span><span class="ident" id="2288349">ptr</span><span class="op" id="2288352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2288355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2288358">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2288430">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288486">return</span>&nbsp;<span class="string" id="2288493">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2288497">+</span>&nbsp;<span class="ident" id="2288499">v</span><span class="op" id="2288500">.</span><span class="ident" id="2288501">Type</span><span class="op" id="2288505">(</span><span class="op" id="2288506">)</span><span class="op" id="2288507">.</span><span class="ident" id="2288508">String</span><span class="op" id="2288514">(</span><span class="op" id="2288515">)</span>&nbsp;<span class="op" id="2288517">+</span>&nbsp;<span class="string" id="2288519">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2288529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2288532">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2288610">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2288648">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2288727">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2288814">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2288911">func</span>&nbsp;<span class="op" id="2288916">(</span><span class="ident" id="2288917">v</span>&nbsp;<span class="ident" id="2288919">Value</span><span class="op" id="2288924">)</span>&nbsp;<span class="ident" id="2288926">TryRecv</span><span class="op" id="2288933">(</span><span class="op" id="2288934">)</span>&nbsp;<span class="op" id="2288936">(</span><span class="ident" id="2288937">x</span>&nbsp;<span class="ident" id="2288939">Value</span><span class="op" id="2288944">,</span>&nbsp;<span class="ident" id="2288946">ok</span>&nbsp;<span class="builtintype" id="2288949">bool</span><span class="op" id="2288953">)</span>&nbsp;<span class="op" id="2288955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2288958">v</span><span class="op" id="2288959">.</span><span class="ident" id="2288960">mustBe</span><span class="op" id="2288966">(</span><span class="ident" id="2288967">Chan</span><span class="op" id="2288971">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2288974">v</span><span class="op" id="2288975">.</span><span class="ident" id="2288976">mustBeExported</span><span class="op" id="2288990">(</span><span class="op" id="2288991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2288994">return</span>&nbsp;<span class="ident" id="2289001">v</span><span class="op" id="2289002">.</span><span class="ident" id="2289003">recv</span><span class="op" id="2289007">(</span><span class="builtintype" id="2289008">true</span><span class="op" id="2289012">)</span><br>
<span class="lineno"></span><span class="op" id="2289014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2289017">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2289084">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2289122">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2289181">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2289254">func</span>&nbsp;<span class="op" id="2289259">(</span><span class="ident" id="2289260">v</span>&nbsp;<span class="ident" id="2289262">Value</span><span class="op" id="2289267">)</span>&nbsp;<span class="ident" id="2289269">TrySend</span><span class="op" id="2289276">(</span><span class="ident" id="2289277">x</span>&nbsp;<span class="ident" id="2289279">Value</span><span class="op" id="2289284">)</span>&nbsp;<span class="builtintype" id="2289286">bool</span>&nbsp;<span class="op" id="2289291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289294">v</span><span class="op" id="2289295">.</span><span class="ident" id="2289296">mustBe</span><span class="op" id="2289302">(</span><span class="ident" id="2289303">Chan</span><span class="op" id="2289307">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289310">v</span><span class="op" id="2289311">.</span><span class="ident" id="2289312">mustBeExported</span><span class="op" id="2289326">(</span><span class="op" id="2289327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289330">return</span>&nbsp;<span class="ident" id="2289337">v</span><span class="op" id="2289338">.</span><span class="ident" id="2289339">send</span><span class="op" id="2289343">(</span><span class="ident" id="2289344">x</span><span class="op" id="2289345">,</span>&nbsp;<span class="builtintype" id="2289347">true</span><span class="op" id="2289351">)</span><br>
<span class="lineno"></span><span class="op" id="2289353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2289356">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2289382">func</span>&nbsp;<span class="op" id="2289387">(</span><span class="ident" id="2289388">v</span>&nbsp;<span class="ident" id="2289390">Value</span><span class="op" id="2289395">)</span>&nbsp;<span class="ident" id="2289397">Type</span><span class="op" id="2289401">(</span><span class="op" id="2289402">)</span>&nbsp;<span class="ident" id="2289404">Type</span>&nbsp;<span class="op" id="2289409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289412">f</span>&nbsp;<span class="op" id="2289414">:=</span>&nbsp;<span class="ident" id="2289417">v</span><span class="op" id="2289418">.</span><span class="ident" id="2289419">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289425">if</span>&nbsp;<span class="ident" id="2289428">f</span>&nbsp;<span class="op" id="2289430">==</span>&nbsp;<span class="num" id="2289433">0</span>&nbsp;<span class="op" id="2289435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2289439">panic</span><span class="op" id="2289444">(</span><span class="op" id="2289445">&amp;</span><span class="ident" id="2289446">ValueError</span><span class="op" id="2289456">{</span><span class="string" id="2289457">&#34;reflect.Value.Type&#34;</span><span class="op" id="2289477">,</span>&nbsp;<span class="ident" id="2289479">Invalid</span><span class="op" id="2289486">}</span><span class="op" id="2289487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2289490">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289493">if</span>&nbsp;<span class="ident" id="2289496">f</span><span class="op" id="2289497">&amp;</span><span class="ident" id="2289498">flagMethod</span>&nbsp;<span class="op" id="2289509">==</span>&nbsp;<span class="num" id="2289512">0</span>&nbsp;<span class="op" id="2289514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2289518">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289533">return</span>&nbsp;<span class="ident" id="2289540">v</span><span class="op" id="2289541">.</span><span class="ident" id="2289542">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2289547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2289551">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2289569">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289624">i</span>&nbsp;<span class="op" id="2289626">:=</span>&nbsp;<span class="builtintype" id="2289629">int</span><span class="op" id="2289632">(</span><span class="ident" id="2289633">v</span><span class="op" id="2289634">.</span><span class="ident" id="2289635">flag</span><span class="op" id="2289639">)</span>&nbsp;<span class="op" id="2289641">&gt;&gt;</span>&nbsp;<span class="ident" id="2289644">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289661">if</span>&nbsp;<span class="ident" id="2289664">v</span><span class="op" id="2289665">.</span><span class="ident" id="2289666">typ</span><span class="op" id="2289669">.</span><span class="ident" id="2289670">Kind</span><span class="op" id="2289674">(</span><span class="op" id="2289675">)</span>&nbsp;<span class="op" id="2289677">==</span>&nbsp;<span class="ident" id="2289680">Interface</span>&nbsp;<span class="op" id="2289690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2289694">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289720">tt</span>&nbsp;<span class="op" id="2289723">:=</span>&nbsp;<span class="op" id="2289726">(</span><span class="op" id="2289727">*</span><span class="ident" id="2289728">interfaceType</span><span class="op" id="2289741">)</span><span class="op" id="2289742">(</span><span class="ident" id="2289743">unsafe</span><span class="op" id="2289749">.</span><span class="ident" id="2289750">Pointer</span><span class="op" id="2289757">(</span><span class="ident" id="2289758">v</span><span class="op" id="2289759">.</span><span class="ident" id="2289760">typ</span><span class="op" id="2289763">)</span><span class="op" id="2289764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289768">if</span>&nbsp;<span class="builtintype" id="2289771">uint</span><span class="op" id="2289775">(</span><span class="ident" id="2289776">i</span><span class="op" id="2289777">)</span>&nbsp;<span class="op" id="2289779">&gt;=</span>&nbsp;<span class="builtintype" id="2289782">uint</span><span class="op" id="2289786">(</span><span class="builtinfunc" id="2289787">len</span><span class="op" id="2289790">(</span><span class="ident" id="2289791">tt</span><span class="op" id="2289793">.</span><span class="ident" id="2289794">methods</span><span class="op" id="2289801">)</span><span class="op" id="2289802">)</span>&nbsp;<span class="op" id="2289804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2289809">panic</span><span class="op" id="2289814">(</span><span class="string" id="2289815">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2289862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2289866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289870">m</span>&nbsp;<span class="op" id="2289872">:=</span>&nbsp;<span class="op" id="2289875">&amp;</span><span class="ident" id="2289876">tt</span><span class="op" id="2289878">.</span><span class="ident" id="2289879">methods</span><span class="op" id="2289886">[</span><span class="ident" id="2289887">i</span><span class="op" id="2289888">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289892">return</span>&nbsp;<span class="ident" id="2289899">m</span><span class="op" id="2289900">.</span><span class="ident" id="2289901">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2289906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2289909">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2289938">ut</span>&nbsp;<span class="op" id="2289941">:=</span>&nbsp;<span class="ident" id="2289944">v</span><span class="op" id="2289945">.</span><span class="ident" id="2289946">typ</span><span class="op" id="2289949">.</span><span class="ident" id="2289950">uncommon</span><span class="op" id="2289958">(</span><span class="op" id="2289959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2289962">if</span>&nbsp;<span class="ident" id="2289965">ut</span>&nbsp;<span class="op" id="2289968">==</span>&nbsp;<span class="ident" id="2289971">nil</span>&nbsp;<span class="op" id="2289975">||</span>&nbsp;<span class="builtintype" id="2289978">uint</span><span class="op" id="2289982">(</span><span class="ident" id="2289983">i</span><span class="op" id="2289984">)</span>&nbsp;<span class="op" id="2289986">&gt;=</span>&nbsp;<span class="builtintype" id="2289989">uint</span><span class="op" id="2289993">(</span><span class="builtinfunc" id="2289994">len</span><span class="op" id="2289997">(</span><span class="ident" id="2289998">ut</span><span class="op" id="2290000">.</span><span class="ident" id="2290001">methods</span><span class="op" id="2290008">)</span><span class="op" id="2290009">)</span>&nbsp;<span class="op" id="2290011">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2290015">panic</span><span class="op" id="2290020">(</span><span class="string" id="2290021">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2290068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2290071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2290074">m</span>&nbsp;<span class="op" id="2290076">:=</span>&nbsp;<span class="op" id="2290079">&amp;</span><span class="ident" id="2290080">ut</span><span class="op" id="2290082">.</span><span class="ident" id="2290083">methods</span><span class="op" id="2290090">[</span><span class="ident" id="2290091">i</span><span class="op" id="2290092">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290095">return</span>&nbsp;<span class="ident" id="2290102">m</span><span class="op" id="2290103">.</span><span class="ident" id="2290104">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2290109">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2290112">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2290163">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2290244">func</span>&nbsp;<span class="op" id="2290249">(</span><span class="ident" id="2290250">v</span>&nbsp;<span class="ident" id="2290252">Value</span><span class="op" id="2290257">)</span>&nbsp;<span class="ident" id="2290259">Uint</span><span class="op" id="2290263">(</span><span class="op" id="2290264">)</span>&nbsp;<span class="ident" id="2290266">uint64</span>&nbsp;<span class="op" id="2290273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2290276">k</span>&nbsp;<span class="op" id="2290278">:=</span>&nbsp;<span class="ident" id="2290281">v</span><span class="op" id="2290282">.</span><span class="ident" id="2290283">kind</span><span class="op" id="2290287">(</span><span class="op" id="2290288">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2290291">p</span>&nbsp;<span class="op" id="2290293">:=</span>&nbsp;<span class="ident" id="2290296">v</span><span class="op" id="2290297">.</span><span class="ident" id="2290298">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290303">switch</span>&nbsp;<span class="ident" id="2290310">k</span>&nbsp;<span class="op" id="2290312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290315">case</span>&nbsp;<span class="ident" id="2290320">Uint</span><span class="op" id="2290324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290328">return</span>&nbsp;<span class="ident" id="2290335">uint64</span><span class="op" id="2290341">(</span><span class="op" id="2290342">*</span><span class="op" id="2290343">(</span><span class="op" id="2290344">*</span><span class="builtintype" id="2290345">uint</span><span class="op" id="2290349">)</span><span class="op" id="2290350">(</span><span class="ident" id="2290351">p</span><span class="op" id="2290352">)</span><span class="op" id="2290353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290356">case</span>&nbsp;<span class="ident" id="2290361">Uint8</span><span class="op" id="2290366">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290370">return</span>&nbsp;<span class="ident" id="2290377">uint64</span><span class="op" id="2290383">(</span><span class="op" id="2290384">*</span><span class="op" id="2290385">(</span><span class="op" id="2290386">*</span><span class="builtintype" id="2290387">uint8</span><span class="op" id="2290392">)</span><span class="op" id="2290393">(</span><span class="ident" id="2290394">p</span><span class="op" id="2290395">)</span><span class="op" id="2290396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290399">case</span>&nbsp;<span class="ident" id="2290404">Uint16</span><span class="op" id="2290410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290414">return</span>&nbsp;<span class="ident" id="2290421">uint64</span><span class="op" id="2290427">(</span><span class="op" id="2290428">*</span><span class="op" id="2290429">(</span><span class="op" id="2290430">*</span><span class="builtintype" id="2290431">uint16</span><span class="op" id="2290437">)</span><span class="op" id="2290438">(</span><span class="ident" id="2290439">p</span><span class="op" id="2290440">)</span><span class="op" id="2290441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290444">case</span>&nbsp;<span class="ident" id="2290449">Uint32</span><span class="op" id="2290455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290459">return</span>&nbsp;<span class="ident" id="2290466">uint64</span><span class="op" id="2290472">(</span><span class="op" id="2290473">*</span><span class="op" id="2290474">(</span><span class="op" id="2290475">*</span><span class="builtintype" id="2290476">uint32</span><span class="op" id="2290482">)</span><span class="op" id="2290483">(</span><span class="ident" id="2290484">p</span><span class="op" id="2290485">)</span><span class="op" id="2290486">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290489">case</span>&nbsp;<span class="ident" id="2290494">Uint64</span><span class="op" id="2290500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290504">return</span>&nbsp;<span class="ident" id="2290511">uint64</span><span class="op" id="2290517">(</span><span class="op" id="2290518">*</span><span class="op" id="2290519">(</span><span class="op" id="2290520">*</span><span class="ident" id="2290521">uint64</span><span class="op" id="2290527">)</span><span class="op" id="2290528">(</span><span class="ident" id="2290529">p</span><span class="op" id="2290530">)</span><span class="op" id="2290531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290534">case</span>&nbsp;<span class="ident" id="2290539">Uintptr</span><span class="op" id="2290546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290550">return</span>&nbsp;<span class="ident" id="2290557">uint64</span><span class="op" id="2290563">(</span><span class="op" id="2290564">*</span><span class="op" id="2290565">(</span><span class="op" id="2290566">*</span><span class="builtintype" id="2290567">uintptr</span><span class="op" id="2290574">)</span><span class="op" id="2290575">(</span><span class="ident" id="2290576">p</span><span class="op" id="2290577">)</span><span class="op" id="2290578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2290581">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2290584">panic</span><span class="op" id="2290589">(</span><span class="op" id="2290590">&amp;</span><span class="ident" id="2290591">ValueError</span><span class="op" id="2290601">{</span><span class="string" id="2290602">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2290622">,</span>&nbsp;<span class="ident" id="2290624">v</span><span class="op" id="2290625">.</span><span class="ident" id="2290626">kind</span><span class="op" id="2290630">(</span><span class="op" id="2290631">)</span><span class="op" id="2290632">}</span><span class="op" id="2290633">)</span><br>
<span class="lineno"></span><span class="op" id="2290635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2290638">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2290683">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2290752">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2290790">func</span>&nbsp;<span class="op" id="2290795">(</span><span class="ident" id="2290796">v</span>&nbsp;<span class="ident" id="2290798">Value</span><span class="op" id="2290803">)</span>&nbsp;<span class="ident" id="2290805">UnsafeAddr</span><span class="op" id="2290815">(</span><span class="op" id="2290816">)</span>&nbsp;<span class="builtintype" id="2290818">uintptr</span>&nbsp;<span class="op" id="2290826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2290829">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290849">if</span>&nbsp;<span class="ident" id="2290852">v</span><span class="op" id="2290853">.</span><span class="ident" id="2290854">typ</span>&nbsp;<span class="op" id="2290858">==</span>&nbsp;<span class="ident" id="2290861">nil</span>&nbsp;<span class="op" id="2290865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2290869">panic</span><span class="op" id="2290874">(</span><span class="op" id="2290875">&amp;</span><span class="ident" id="2290876">ValueError</span><span class="op" id="2290886">{</span><span class="string" id="2290887">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2290913">,</span>&nbsp;<span class="ident" id="2290915">Invalid</span><span class="op" id="2290922">}</span><span class="op" id="2290923">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2290926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2290929">if</span>&nbsp;<span class="ident" id="2290932">v</span><span class="op" id="2290933">.</span><span class="ident" id="2290934">flag</span><span class="op" id="2290938">&amp;</span><span class="ident" id="2290939">flagAddr</span>&nbsp;<span class="op" id="2290948">==</span>&nbsp;<span class="num" id="2290951">0</span>&nbsp;<span class="op" id="2290953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2290957">panic</span><span class="op" id="2290962">(</span><span class="string" id="2290963">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2291012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2291015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2291018">return</span>&nbsp;<span class="builtintype" id="2291025">uintptr</span><span class="op" id="2291032">(</span><span class="ident" id="2291033">v</span><span class="op" id="2291034">.</span><span class="ident" id="2291035">ptr</span><span class="op" id="2291038">)</span><br>
<span class="lineno">1695</span><span class="op" id="2291040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2291043">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2291102">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2291169">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2291199">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2291267">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2291337">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2291400">type</span>&nbsp;<span class="ident" id="2291405">StringHeader</span>&nbsp;<span class="keyword" id="2291418">struct</span>&nbsp;<span class="op" id="2291425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291428">Data</span>&nbsp;<span class="builtintype" id="2291433">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291442">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2291447">int</span><br>
<span class="lineno"></span><span class="op" id="2291451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2291454">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2291530">type</span>&nbsp;<span class="ident" id="2291535">stringHeader</span>&nbsp;<span class="keyword" id="2291548">struct</span>&nbsp;<span class="op" id="2291555">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291558">Data</span>&nbsp;<span class="ident" id="2291563">unsafe</span><span class="op" id="2291569">.</span><span class="ident" id="2291570">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291579">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2291584">int</span><br>
<span class="lineno"></span><span class="op" id="2291588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2291591">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2291648">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2291715">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2291745">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2291813">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2291883">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2291946">type</span>&nbsp;<span class="ident" id="2291951">SliceHeader</span>&nbsp;<span class="keyword" id="2291963">struct</span>&nbsp;<span class="op" id="2291970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291973">Data</span>&nbsp;<span class="builtintype" id="2291978">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291987">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2291992">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2291997">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2292002">int</span><br>
<span class="lineno"></span><span class="op" id="2292006">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2292009">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2292083">type</span>&nbsp;<span class="ident" id="2292088">sliceHeader</span>&nbsp;<span class="keyword" id="2292100">struct</span>&nbsp;<span class="op" id="2292107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292110">Data</span>&nbsp;<span class="ident" id="2292115">unsafe</span><span class="op" id="2292121">.</span><span class="ident" id="2292122">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292131">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2292136">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292141">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2292146">int</span><br>
<span class="lineno"></span><span class="op" id="2292150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2292153">func</span>&nbsp;<span class="ident" id="2292158">typesMustMatch</span><span class="op" id="2292172">(</span><span class="ident" id="2292173">what</span>&nbsp;<span class="builtintype" id="2292178">string</span><span class="op" id="2292184">,</span>&nbsp;<span class="ident" id="2292186">t1</span><span class="op" id="2292188">,</span>&nbsp;<span class="ident" id="2292190">t2</span>&nbsp;<span class="ident" id="2292193">Type</span><span class="op" id="2292197">)</span>&nbsp;<span class="op" id="2292199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292202">if</span>&nbsp;<span class="ident" id="2292205">t1</span>&nbsp;<span class="op" id="2292208">!=</span>&nbsp;<span class="ident" id="2292211">t2</span>&nbsp;<span class="op" id="2292214">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2292218">panic</span><span class="op" id="2292223">(</span><span class="ident" id="2292224">what</span>&nbsp;<span class="op" id="2292229">+</span>&nbsp;<span class="string" id="2292231">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2292236">+</span>&nbsp;<span class="ident" id="2292238">t1</span><span class="op" id="2292240">.</span><span class="ident" id="2292241">String</span><span class="op" id="2292247">(</span><span class="op" id="2292248">)</span>&nbsp;<span class="op" id="2292250">+</span>&nbsp;<span class="string" id="2292252">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2292259">+</span>&nbsp;<span class="ident" id="2292261">t2</span><span class="op" id="2292263">.</span><span class="ident" id="2292264">String</span><span class="op" id="2292270">(</span><span class="op" id="2292271">)</span><span class="op" id="2292272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292275">}</span><br>
<span class="lineno"></span><span class="op" id="2292277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2292280">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2292356">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2292431">func</span>&nbsp;<span class="ident" id="2292436">grow</span><span class="op" id="2292440">(</span><span class="ident" id="2292441">s</span>&nbsp;<span class="ident" id="2292443">Value</span><span class="op" id="2292448">,</span>&nbsp;<span class="ident" id="2292450">extra</span>&nbsp;<span class="builtintype" id="2292456">int</span><span class="op" id="2292459">)</span>&nbsp;<span class="op" id="2292461">(</span><span class="ident" id="2292462">Value</span><span class="op" id="2292467">,</span>&nbsp;<span class="builtintype" id="2292469">int</span><span class="op" id="2292472">,</span>&nbsp;<span class="builtintype" id="2292474">int</span><span class="op" id="2292477">)</span>&nbsp;<span class="op" id="2292479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292482">i0</span>&nbsp;<span class="op" id="2292485">:=</span>&nbsp;<span class="ident" id="2292488">s</span><span class="op" id="2292489">.</span><span class="ident" id="2292490">Len</span><span class="op" id="2292493">(</span><span class="op" id="2292494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292497">i1</span>&nbsp;<span class="op" id="2292500">:=</span>&nbsp;<span class="ident" id="2292503">i0</span>&nbsp;<span class="op" id="2292506">+</span>&nbsp;<span class="ident" id="2292508">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292515">if</span>&nbsp;<span class="ident" id="2292518">i1</span>&nbsp;<span class="op" id="2292521">&lt;</span>&nbsp;<span class="ident" id="2292523">i0</span>&nbsp;<span class="op" id="2292526">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2292530">panic</span><span class="op" id="2292535">(</span><span class="string" id="2292536">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2292568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292574">m</span>&nbsp;<span class="op" id="2292576">:=</span>&nbsp;<span class="ident" id="2292579">s</span><span class="op" id="2292580">.</span><span class="ident" id="2292581">Cap</span><span class="op" id="2292584">(</span><span class="op" id="2292585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292588">if</span>&nbsp;<span class="ident" id="2292591">i1</span>&nbsp;<span class="op" id="2292594">&lt;=</span>&nbsp;<span class="ident" id="2292597">m</span>&nbsp;<span class="op" id="2292599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292603">return</span>&nbsp;<span class="ident" id="2292610">s</span><span class="op" id="2292611">.</span><span class="ident" id="2292612">Slice</span><span class="op" id="2292617">(</span><span class="num" id="2292618">0</span><span class="op" id="2292619">,</span>&nbsp;<span class="ident" id="2292621">i1</span><span class="op" id="2292623">)</span><span class="op" id="2292624">,</span>&nbsp;<span class="ident" id="2292626">i0</span><span class="op" id="2292628">,</span>&nbsp;<span class="ident" id="2292630">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292637">if</span>&nbsp;<span class="ident" id="2292640">m</span>&nbsp;<span class="op" id="2292642">==</span>&nbsp;<span class="num" id="2292645">0</span>&nbsp;<span class="op" id="2292647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292651">m</span>&nbsp;<span class="op" id="2292653">=</span>&nbsp;<span class="ident" id="2292655">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292662">}</span>&nbsp;<span class="keyword" id="2292664">else</span>&nbsp;<span class="op" id="2292669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292673">for</span>&nbsp;<span class="ident" id="2292677">m</span>&nbsp;<span class="op" id="2292679">&lt;</span>&nbsp;<span class="ident" id="2292681">i1</span>&nbsp;<span class="op" id="2292684">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292689">if</span>&nbsp;<span class="ident" id="2292692">i0</span>&nbsp;<span class="op" id="2292695">&lt;</span>&nbsp;<span class="num" id="2292697">1024</span>&nbsp;<span class="op" id="2292702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292708">m</span>&nbsp;<span class="op" id="2292710">+=</span>&nbsp;<span class="ident" id="2292713">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292718">}</span>&nbsp;<span class="keyword" id="2292720">else</span>&nbsp;<span class="op" id="2292725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292731">m</span>&nbsp;<span class="op" id="2292733">+=</span>&nbsp;<span class="ident" id="2292736">m</span>&nbsp;<span class="op" id="2292738">/</span>&nbsp;<span class="num" id="2292740">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292745">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2292752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292755">t</span>&nbsp;<span class="op" id="2292757">:=</span>&nbsp;<span class="ident" id="2292760">MakeSlice</span><span class="op" id="2292769">(</span><span class="ident" id="2292770">s</span><span class="op" id="2292771">.</span><span class="ident" id="2292772">Type</span><span class="op" id="2292776">(</span><span class="op" id="2292777">)</span><span class="op" id="2292778">,</span>&nbsp;<span class="ident" id="2292780">i1</span><span class="op" id="2292782">,</span>&nbsp;<span class="ident" id="2292784">m</span><span class="op" id="2292785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2292788">Copy</span><span class="op" id="2292792">(</span><span class="ident" id="2292793">t</span><span class="op" id="2292794">,</span>&nbsp;<span class="ident" id="2292796">s</span><span class="op" id="2292797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2292800">return</span>&nbsp;<span class="ident" id="2292807">t</span><span class="op" id="2292808">,</span>&nbsp;<span class="ident" id="2292810">i0</span><span class="op" id="2292812">,</span>&nbsp;<span class="ident" id="2292814">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2292817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2292820">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2292897">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2292973">func</span>&nbsp;<span class="ident" id="2292978">Append</span><span class="op" id="2292984">(</span><span class="ident" id="2292985">s</span>&nbsp;<span class="ident" id="2292987">Value</span><span class="op" id="2292992">,</span>&nbsp;<span class="ident" id="2292994">x</span>&nbsp;<span class="op" id="2292996">...</span><span class="ident" id="2292999">Value</span><span class="op" id="2293004">)</span>&nbsp;<span class="ident" id="2293006">Value</span>&nbsp;<span class="op" id="2293012">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293015">s</span><span class="op" id="2293016">.</span><span class="ident" id="2293017">mustBe</span><span class="op" id="2293023">(</span><span class="ident" id="2293024">Slice</span><span class="op" id="2293029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293032">s</span><span class="op" id="2293033">,</span>&nbsp;<span class="ident" id="2293035">i0</span><span class="op" id="2293037">,</span>&nbsp;<span class="ident" id="2293039">i1</span>&nbsp;<span class="op" id="2293042">:=</span>&nbsp;<span class="ident" id="2293045">grow</span><span class="op" id="2293049">(</span><span class="ident" id="2293050">s</span><span class="op" id="2293051">,</span>&nbsp;<span class="builtinfunc" id="2293053">len</span><span class="op" id="2293056">(</span><span class="ident" id="2293057">x</span><span class="op" id="2293058">)</span><span class="op" id="2293059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2293062">for</span>&nbsp;<span class="ident" id="2293066">i</span><span class="op" id="2293067">,</span>&nbsp;<span class="ident" id="2293069">j</span>&nbsp;<span class="op" id="2293071">:=</span>&nbsp;<span class="ident" id="2293074">i0</span><span class="op" id="2293076">,</span>&nbsp;<span class="num" id="2293078">0</span><span class="op" id="2293079">;</span>&nbsp;<span class="ident" id="2293081">i</span>&nbsp;<span class="op" id="2293083">&lt;</span>&nbsp;<span class="ident" id="2293085">i1</span><span class="op" id="2293087">;</span>&nbsp;<span class="ident" id="2293089">i</span><span class="op" id="2293090">,</span>&nbsp;<span class="ident" id="2293092">j</span>&nbsp;<span class="op" id="2293094">=</span>&nbsp;<span class="ident" id="2293096">i</span><span class="op" id="2293097">+</span><span class="num" id="2293098">1</span><span class="op" id="2293099">,</span>&nbsp;<span class="ident" id="2293101">j</span><span class="op" id="2293102">+</span><span class="num" id="2293103">1</span>&nbsp;<span class="op" id="2293105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293109">s</span><span class="op" id="2293110">.</span><span class="ident" id="2293111">Index</span><span class="op" id="2293116">(</span><span class="ident" id="2293117">i</span><span class="op" id="2293118">)</span><span class="op" id="2293119">.</span><span class="ident" id="2293120">Set</span><span class="op" id="2293123">(</span><span class="ident" id="2293124">x</span><span class="op" id="2293125">[</span><span class="ident" id="2293126">j</span><span class="op" id="2293127">]</span><span class="op" id="2293128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2293131">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2293134">return</span>&nbsp;<span class="ident" id="2293141">s</span><br>
<span class="lineno"></span><span class="op" id="2293143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2293146">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2293225">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2293280">func</span>&nbsp;<span class="ident" id="2293285">AppendSlice</span><span class="op" id="2293296">(</span><span class="ident" id="2293297">s</span><span class="op" id="2293298">,</span>&nbsp;<span class="ident" id="2293300">t</span>&nbsp;<span class="ident" id="2293302">Value</span><span class="op" id="2293307">)</span>&nbsp;<span class="ident" id="2293309">Value</span>&nbsp;<span class="op" id="2293315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293318">s</span><span class="op" id="2293319">.</span><span class="ident" id="2293320">mustBe</span><span class="op" id="2293326">(</span><span class="ident" id="2293327">Slice</span><span class="op" id="2293332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293335">t</span><span class="op" id="2293336">.</span><span class="ident" id="2293337">mustBe</span><span class="op" id="2293343">(</span><span class="ident" id="2293344">Slice</span><span class="op" id="2293349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293352">typesMustMatch</span><span class="op" id="2293366">(</span><span class="string" id="2293367">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2293388">,</span>&nbsp;<span class="ident" id="2293390">s</span><span class="op" id="2293391">.</span><span class="ident" id="2293392">Type</span><span class="op" id="2293396">(</span><span class="op" id="2293397">)</span><span class="op" id="2293398">.</span><span class="ident" id="2293399">Elem</span><span class="op" id="2293403">(</span><span class="op" id="2293404">)</span><span class="op" id="2293405">,</span>&nbsp;<span class="ident" id="2293407">t</span><span class="op" id="2293408">.</span><span class="ident" id="2293409">Type</span><span class="op" id="2293413">(</span><span class="op" id="2293414">)</span><span class="op" id="2293415">.</span><span class="ident" id="2293416">Elem</span><span class="op" id="2293420">(</span><span class="op" id="2293421">)</span><span class="op" id="2293422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293425">s</span><span class="op" id="2293426">,</span>&nbsp;<span class="ident" id="2293428">i0</span><span class="op" id="2293430">,</span>&nbsp;<span class="ident" id="2293432">i1</span>&nbsp;<span class="op" id="2293435">:=</span>&nbsp;<span class="ident" id="2293438">grow</span><span class="op" id="2293442">(</span><span class="ident" id="2293443">s</span><span class="op" id="2293444">,</span>&nbsp;<span class="ident" id="2293446">t</span><span class="op" id="2293447">.</span><span class="ident" id="2293448">Len</span><span class="op" id="2293451">(</span><span class="op" id="2293452">)</span><span class="op" id="2293453">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293456">Copy</span><span class="op" id="2293460">(</span><span class="ident" id="2293461">s</span><span class="op" id="2293462">.</span><span class="ident" id="2293463">Slice</span><span class="op" id="2293468">(</span><span class="ident" id="2293469">i0</span><span class="op" id="2293471">,</span>&nbsp;<span class="ident" id="2293473">i1</span><span class="op" id="2293475">)</span><span class="op" id="2293476">,</span>&nbsp;<span class="ident" id="2293478">t</span><span class="op" id="2293479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2293482">return</span>&nbsp;<span class="ident" id="2293489">s</span><br>
<span class="lineno"></span><span class="op" id="2293491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2293494">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2293551">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2293601">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2293646">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2293701">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2293749">func</span>&nbsp;<span class="ident" id="2293754">Copy</span><span class="op" id="2293758">(</span><span class="ident" id="2293759">dst</span><span class="op" id="2293762">,</span>&nbsp;<span class="ident" id="2293764">src</span>&nbsp;<span class="ident" id="2293768">Value</span><span class="op" id="2293773">)</span>&nbsp;<span class="builtintype" id="2293775">int</span>&nbsp;<span class="op" id="2293779">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293782">dk</span>&nbsp;<span class="op" id="2293785">:=</span>&nbsp;<span class="ident" id="2293788">dst</span><span class="op" id="2293791">.</span><span class="ident" id="2293792">kind</span><span class="op" id="2293796">(</span><span class="op" id="2293797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2293800">if</span>&nbsp;<span class="ident" id="2293803">dk</span>&nbsp;<span class="op" id="2293806">!=</span>&nbsp;<span class="ident" id="2293809">Array</span>&nbsp;<span class="op" id="2293815">&amp;&amp;</span>&nbsp;<span class="ident" id="2293818">dk</span>&nbsp;<span class="op" id="2293821">!=</span>&nbsp;<span class="ident" id="2293824">Slice</span>&nbsp;<span class="op" id="2293830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2293834">panic</span><span class="op" id="2293839">(</span><span class="op" id="2293840">&amp;</span><span class="ident" id="2293841">ValueError</span><span class="op" id="2293851">{</span><span class="string" id="2293852">&#34;reflect.Copy&#34;</span><span class="op" id="2293866">,</span>&nbsp;<span class="ident" id="2293868">dk</span><span class="op" id="2293870">}</span><span class="op" id="2293871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2293874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2293877">if</span>&nbsp;<span class="ident" id="2293880">dk</span>&nbsp;<span class="op" id="2293883">==</span>&nbsp;<span class="ident" id="2293886">Array</span>&nbsp;<span class="op" id="2293892">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293896">dst</span><span class="op" id="2293899">.</span><span class="ident" id="2293900">mustBeAssignable</span><span class="op" id="2293916">(</span><span class="op" id="2293917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2293920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293923">dst</span><span class="op" id="2293926">.</span><span class="ident" id="2293927">mustBeExported</span><span class="op" id="2293941">(</span><span class="op" id="2293942">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2293946">sk</span>&nbsp;<span class="op" id="2293949">:=</span>&nbsp;<span class="ident" id="2293952">src</span><span class="op" id="2293955">.</span><span class="ident" id="2293956">kind</span><span class="op" id="2293960">(</span><span class="op" id="2293961">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2293964">if</span>&nbsp;<span class="ident" id="2293967">sk</span>&nbsp;<span class="op" id="2293970">!=</span>&nbsp;<span class="ident" id="2293973">Array</span>&nbsp;<span class="op" id="2293979">&amp;&amp;</span>&nbsp;<span class="ident" id="2293982">sk</span>&nbsp;<span class="op" id="2293985">!=</span>&nbsp;<span class="ident" id="2293988">Slice</span>&nbsp;<span class="op" id="2293994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2293998">panic</span><span class="op" id="2294003">(</span><span class="op" id="2294004">&amp;</span><span class="ident" id="2294005">ValueError</span><span class="op" id="2294015">{</span><span class="string" id="2294016">&#34;reflect.Copy&#34;</span><span class="op" id="2294030">,</span>&nbsp;<span class="ident" id="2294032">sk</span><span class="op" id="2294034">}</span><span class="op" id="2294035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294041">src</span><span class="op" id="2294044">.</span><span class="ident" id="2294045">mustBeExported</span><span class="op" id="2294059">(</span><span class="op" id="2294060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294064">de</span>&nbsp;<span class="op" id="2294067">:=</span>&nbsp;<span class="ident" id="2294070">dst</span><span class="op" id="2294073">.</span><span class="ident" id="2294074">typ</span><span class="op" id="2294077">.</span><span class="ident" id="2294078">Elem</span><span class="op" id="2294082">(</span><span class="op" id="2294083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294086">se</span>&nbsp;<span class="op" id="2294089">:=</span>&nbsp;<span class="ident" id="2294092">src</span><span class="op" id="2294095">.</span><span class="ident" id="2294096">typ</span><span class="op" id="2294099">.</span><span class="ident" id="2294100">Elem</span><span class="op" id="2294104">(</span><span class="op" id="2294105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294108">typesMustMatch</span><span class="op" id="2294122">(</span><span class="string" id="2294123">&#34;reflect.Copy&#34;</span><span class="op" id="2294137">,</span>&nbsp;<span class="ident" id="2294139">de</span><span class="op" id="2294141">,</span>&nbsp;<span class="ident" id="2294143">se</span><span class="op" id="2294145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294149">n</span>&nbsp;<span class="op" id="2294151">:=</span>&nbsp;<span class="ident" id="2294154">dst</span><span class="op" id="2294157">.</span><span class="ident" id="2294158">Len</span><span class="op" id="2294161">(</span><span class="op" id="2294162">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2294165">if</span>&nbsp;<span class="ident" id="2294168">sn</span>&nbsp;<span class="op" id="2294171">:=</span>&nbsp;<span class="ident" id="2294174">src</span><span class="op" id="2294177">.</span><span class="ident" id="2294178">Len</span><span class="op" id="2294181">(</span><span class="op" id="2294182">)</span><span class="op" id="2294183">;</span>&nbsp;<span class="ident" id="2294185">n</span>&nbsp;<span class="op" id="2294187">&gt;</span>&nbsp;<span class="ident" id="2294189">sn</span>&nbsp;<span class="op" id="2294192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294196">n</span>&nbsp;<span class="op" id="2294198">=</span>&nbsp;<span class="ident" id="2294200">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2294208">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2294230">var</span>&nbsp;<span class="ident" id="2294234">da</span><span class="op" id="2294236">,</span>&nbsp;<span class="ident" id="2294238">sa</span>&nbsp;<span class="ident" id="2294241">unsafe</span><span class="op" id="2294247">.</span><span class="ident" id="2294248">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2294257">if</span>&nbsp;<span class="ident" id="2294260">dk</span>&nbsp;<span class="op" id="2294263">==</span>&nbsp;<span class="ident" id="2294266">Array</span>&nbsp;<span class="op" id="2294272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294276">da</span>&nbsp;<span class="op" id="2294279">=</span>&nbsp;<span class="ident" id="2294281">dst</span><span class="op" id="2294284">.</span><span class="ident" id="2294285">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294290">}</span>&nbsp;<span class="keyword" id="2294292">else</span>&nbsp;<span class="op" id="2294297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294301">da</span>&nbsp;<span class="op" id="2294304">=</span>&nbsp;<span class="op" id="2294306">(</span><span class="op" id="2294307">*</span><span class="ident" id="2294308">sliceHeader</span><span class="op" id="2294319">)</span><span class="op" id="2294320">(</span><span class="ident" id="2294321">dst</span><span class="op" id="2294324">.</span><span class="ident" id="2294325">ptr</span><span class="op" id="2294328">)</span><span class="op" id="2294329">.</span><span class="ident" id="2294330">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2294339">if</span>&nbsp;<span class="ident" id="2294342">src</span><span class="op" id="2294345">.</span><span class="ident" id="2294346">flag</span><span class="op" id="2294350">&amp;</span><span class="ident" id="2294351">flagIndir</span>&nbsp;<span class="op" id="2294361">==</span>&nbsp;<span class="num" id="2294364">0</span>&nbsp;<span class="op" id="2294366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294370">sa</span>&nbsp;<span class="op" id="2294373">=</span>&nbsp;<span class="ident" id="2294375">unsafe</span><span class="op" id="2294381">.</span><span class="ident" id="2294382">Pointer</span><span class="op" id="2294389">(</span><span class="op" id="2294390">&amp;</span><span class="ident" id="2294391">src</span><span class="op" id="2294394">.</span><span class="ident" id="2294395">ptr</span><span class="op" id="2294398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294401">}</span>&nbsp;<span class="keyword" id="2294403">else</span>&nbsp;<span class="keyword" id="2294408">if</span>&nbsp;<span class="ident" id="2294411">sk</span>&nbsp;<span class="op" id="2294414">==</span>&nbsp;<span class="ident" id="2294417">Array</span>&nbsp;<span class="op" id="2294423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294427">sa</span>&nbsp;<span class="op" id="2294430">=</span>&nbsp;<span class="ident" id="2294432">src</span><span class="op" id="2294435">.</span><span class="ident" id="2294436">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294441">}</span>&nbsp;<span class="keyword" id="2294443">else</span>&nbsp;<span class="op" id="2294448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294452">sa</span>&nbsp;<span class="op" id="2294455">=</span>&nbsp;<span class="op" id="2294457">(</span><span class="op" id="2294458">*</span><span class="ident" id="2294459">sliceHeader</span><span class="op" id="2294470">)</span><span class="op" id="2294471">(</span><span class="ident" id="2294472">src</span><span class="op" id="2294475">.</span><span class="ident" id="2294476">ptr</span><span class="op" id="2294479">)</span><span class="op" id="2294480">.</span><span class="ident" id="2294481">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2294487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294490">memmove</span><span class="op" id="2294497">(</span><span class="ident" id="2294498">da</span><span class="op" id="2294500">,</span>&nbsp;<span class="ident" id="2294502">sa</span><span class="op" id="2294504">,</span>&nbsp;<span class="builtintype" id="2294506">uintptr</span><span class="op" id="2294513">(</span><span class="ident" id="2294514">n</span><span class="op" id="2294515">)</span><span class="op" id="2294516">*</span><span class="ident" id="2294517">de</span><span class="op" id="2294519">.</span><span class="ident" id="2294520">Size</span><span class="op" id="2294524">(</span><span class="op" id="2294525">)</span><span class="op" id="2294526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2294529">return</span>&nbsp;<span class="ident" id="2294536">n</span><br>
<span class="lineno">1835</span><span class="op" id="2294538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2294541">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2294596">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2294651">type</span>&nbsp;<span class="ident" id="2294656">runtimeSelect</span>&nbsp;<span class="keyword" id="2294670">struct</span>&nbsp;<span class="op" id="2294677">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294680">dir</span>&nbsp;<span class="builtintype" id="2294684">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2294699">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294726">typ</span>&nbsp;<span class="op" id="2294730">*</span><span class="ident" id="2294731">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2294745">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294762">ch</span>&nbsp;&nbsp;<span class="ident" id="2294766">unsafe</span><span class="op" id="2294772">.</span><span class="ident" id="2294773">Pointer</span>&nbsp;<span class="comment" id="2294781">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2294793">val</span>&nbsp;<span class="ident" id="2294797">unsafe</span><span class="op" id="2294803">.</span><span class="ident" id="2294804">Pointer</span>&nbsp;<span class="comment" id="2294812">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2294872">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2294875">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2294943">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2295015">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2295085">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2295105">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2295119">func</span>&nbsp;<span class="ident" id="2295124">rselect</span><span class="op" id="2295131">(</span><span class="op" id="2295132">[</span><span class="op" id="2295133">]</span><span class="ident" id="2295134">runtimeSelect</span><span class="op" id="2295147">)</span>&nbsp;<span class="op" id="2295149">(</span><span class="ident" id="2295150">chosen</span>&nbsp;<span class="builtintype" id="2295157">int</span><span class="op" id="2295160">,</span>&nbsp;<span class="ident" id="2295162">recvOK</span>&nbsp;<span class="builtintype" id="2295169">bool</span><span class="op" id="2295173">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2295176">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2295247">type</span>&nbsp;<span class="ident" id="2295252">SelectDir</span>&nbsp;<span class="builtintype" id="2295262">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2295267">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2295334">const</span>&nbsp;<span class="op" id="2295340">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2295343">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2295357">SelectDir</span>&nbsp;<span class="op" id="2295367">=</span>&nbsp;<span class="ident" id="2295369">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2295375">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2295399">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2295421">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2295445">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2295462">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2295486">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2295497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2295500">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2295563">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2295628">//</span><br>
<span class="lineno"></span><span class="comment" id="2295631">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2295695">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2295733">//</span><br>
<span class="lineno"></span><span class="comment" id="2295736">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2295799">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2295890">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2295979">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2296071">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2296087">//</span><br>
<span class="lineno"></span><span class="comment" id="2296090">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2296156">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2296241">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2296332">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2296415">//</span><br>
<span class="lineno"></span><span class="keyword" id="2296418">type</span>&nbsp;<span class="ident" id="2296423">SelectCase</span>&nbsp;<span class="keyword" id="2296434">struct</span>&nbsp;<span class="op" id="2296441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2296444">Dir</span>&nbsp;&nbsp;<span class="ident" id="2296449">SelectDir</span>&nbsp;<span class="comment" id="2296459">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2296481">Chan</span>&nbsp;<span class="ident" id="2296486">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2296496">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2296537">Send</span>&nbsp;<span class="ident" id="2296542">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2296552">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2296580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2296583">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2296653">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2296728">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2296782">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2296854">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2296925">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2297002">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2297074">func</span>&nbsp;<span class="ident" id="2297079">Select</span><span class="op" id="2297085">(</span><span class="ident" id="2297086">cases</span>&nbsp;<span class="op" id="2297092">[</span><span class="op" id="2297093">]</span><span class="ident" id="2297094">SelectCase</span><span class="op" id="2297104">)</span>&nbsp;<span class="op" id="2297106">(</span><span class="ident" id="2297107">chosen</span>&nbsp;<span class="builtintype" id="2297114">int</span><span class="op" id="2297117">,</span>&nbsp;<span class="ident" id="2297119">recv</span>&nbsp;<span class="ident" id="2297124">Value</span><span class="op" id="2297129">,</span>&nbsp;<span class="ident" id="2297131">recvOK</span>&nbsp;<span class="builtintype" id="2297138">bool</span><span class="op" id="2297142">)</span>&nbsp;<span class="op" id="2297144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2297147">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2297221">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2297296">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297354">runcases</span>&nbsp;<span class="op" id="2297363">:=</span>&nbsp;<span class="builtinfunc" id="2297366">make</span><span class="op" id="2297370">(</span><span class="op" id="2297371">[</span><span class="op" id="2297372">]</span><span class="ident" id="2297373">runtimeSelect</span><span class="op" id="2297386">,</span>&nbsp;<span class="builtinfunc" id="2297388">len</span><span class="op" id="2297391">(</span><span class="ident" id="2297392">cases</span><span class="op" id="2297397">)</span><span class="op" id="2297398">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297401">haveDefault</span>&nbsp;<span class="op" id="2297413">:=</span>&nbsp;<span class="builtintype" id="2297416">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297423">for</span>&nbsp;<span class="ident" id="2297427">i</span><span class="op" id="2297428">,</span>&nbsp;<span class="ident" id="2297430">c</span>&nbsp;<span class="op" id="2297432">:=</span>&nbsp;<span class="keyword" id="2297435">range</span>&nbsp;<span class="ident" id="2297441">cases</span>&nbsp;<span class="op" id="2297447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297451">rc</span>&nbsp;<span class="op" id="2297454">:=</span>&nbsp;<span class="op" id="2297457">&amp;</span><span class="ident" id="2297458">runcases</span><span class="op" id="2297466">[</span><span class="ident" id="2297467">i</span><span class="op" id="2297468">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297472">rc</span><span class="op" id="2297474">.</span><span class="ident" id="2297475">dir</span>&nbsp;<span class="op" id="2297479">=</span>&nbsp;<span class="builtintype" id="2297481">uintptr</span><span class="op" id="2297488">(</span><span class="ident" id="2297489">c</span><span class="op" id="2297490">.</span><span class="ident" id="2297491">Dir</span><span class="op" id="2297494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297498">switch</span>&nbsp;<span class="ident" id="2297505">c</span><span class="op" id="2297506">.</span><span class="ident" id="2297507">Dir</span>&nbsp;<span class="op" id="2297511">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297515">default</span><span class="op" id="2297522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2297527">panic</span><span class="op" id="2297532">(</span><span class="string" id="2297533">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2297562">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297567">case</span>&nbsp;<span class="ident" id="2297572">SelectDefault</span><span class="op" id="2297585">:</span>&nbsp;<span class="comment" id="2297587">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297601">if</span>&nbsp;<span class="ident" id="2297604">haveDefault</span>&nbsp;<span class="op" id="2297616">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2297622">panic</span><span class="op" id="2297627">(</span><span class="string" id="2297628">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2297668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2297673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297678">haveDefault</span>&nbsp;<span class="op" id="2297690">=</span>&nbsp;<span class="builtintype" id="2297692">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297700">if</span>&nbsp;<span class="ident" id="2297703">c</span><span class="op" id="2297704">.</span><span class="ident" id="2297705">Chan</span><span class="op" id="2297709">.</span><span class="ident" id="2297710">IsValid</span><span class="op" id="2297717">(</span><span class="op" id="2297718">)</span>&nbsp;<span class="op" id="2297720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2297726">panic</span><span class="op" id="2297731">(</span><span class="string" id="2297732">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2297777">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2297782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297787">if</span>&nbsp;<span class="ident" id="2297790">c</span><span class="op" id="2297791">.</span><span class="ident" id="2297792">Send</span><span class="op" id="2297796">.</span><span class="ident" id="2297797">IsValid</span><span class="op" id="2297804">(</span><span class="op" id="2297805">)</span>&nbsp;<span class="op" id="2297807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2297813">panic</span><span class="op" id="2297818">(</span><span class="string" id="2297819">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2297864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2297869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297874">case</span>&nbsp;<span class="ident" id="2297879">SelectSend</span><span class="op" id="2297889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297894">ch</span>&nbsp;<span class="op" id="2297897">:=</span>&nbsp;<span class="ident" id="2297900">c</span><span class="op" id="2297901">.</span><span class="ident" id="2297902">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297910">if</span>&nbsp;<span class="op" id="2297913">!</span><span class="ident" id="2297914">ch</span><span class="op" id="2297916">.</span><span class="ident" id="2297917">IsValid</span><span class="op" id="2297924">(</span><span class="op" id="2297925">)</span>&nbsp;<span class="op" id="2297927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2297933">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2297942">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297947">ch</span><span class="op" id="2297949">.</span><span class="ident" id="2297950">mustBe</span><span class="op" id="2297956">(</span><span class="ident" id="2297957">Chan</span><span class="op" id="2297961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297966">ch</span><span class="op" id="2297968">.</span><span class="ident" id="2297969">mustBeExported</span><span class="op" id="2297983">(</span><span class="op" id="2297984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2297989">tt</span>&nbsp;<span class="op" id="2297992">:=</span>&nbsp;<span class="op" id="2297995">(</span><span class="op" id="2297996">*</span><span class="ident" id="2297997">chanType</span><span class="op" id="2298005">)</span><span class="op" id="2298006">(</span><span class="ident" id="2298007">unsafe</span><span class="op" id="2298013">.</span><span class="ident" id="2298014">Pointer</span><span class="op" id="2298021">(</span><span class="ident" id="2298022">ch</span><span class="op" id="2298024">.</span><span class="ident" id="2298025">typ</span><span class="op" id="2298028">)</span><span class="op" id="2298029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298034">if</span>&nbsp;<span class="ident" id="2298037">ChanDir</span><span class="op" id="2298044">(</span><span class="ident" id="2298045">tt</span><span class="op" id="2298047">.</span><span class="ident" id="2298048">dir</span><span class="op" id="2298051">)</span><span class="op" id="2298052">&amp;</span><span class="ident" id="2298053">SendDir</span>&nbsp;<span class="op" id="2298061">==</span>&nbsp;<span class="num" id="2298064">0</span>&nbsp;<span class="op" id="2298066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2298072">panic</span><span class="op" id="2298077">(</span><span class="string" id="2298078">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2298132">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298142">rc</span><span class="op" id="2298144">.</span><span class="ident" id="2298145">ch</span>&nbsp;<span class="op" id="2298148">=</span>&nbsp;<span class="ident" id="2298150">ch</span><span class="op" id="2298152">.</span><span class="ident" id="2298153">pointer</span><span class="op" id="2298160">(</span><span class="op" id="2298161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298166">rc</span><span class="op" id="2298168">.</span><span class="ident" id="2298169">typ</span>&nbsp;<span class="op" id="2298173">=</span>&nbsp;<span class="op" id="2298175">&amp;</span><span class="ident" id="2298176">tt</span><span class="op" id="2298178">.</span><span class="ident" id="2298179">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298188">v</span>&nbsp;<span class="op" id="2298190">:=</span>&nbsp;<span class="ident" id="2298193">c</span><span class="op" id="2298194">.</span><span class="ident" id="2298195">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298203">if</span>&nbsp;<span class="op" id="2298206">!</span><span class="ident" id="2298207">v</span><span class="op" id="2298208">.</span><span class="ident" id="2298209">IsValid</span><span class="op" id="2298216">(</span><span class="op" id="2298217">)</span>&nbsp;<span class="op" id="2298219">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2298225">panic</span><span class="op" id="2298230">(</span><span class="string" id="2298231">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2298280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298290">v</span><span class="op" id="2298291">.</span><span class="ident" id="2298292">mustBeExported</span><span class="op" id="2298306">(</span><span class="op" id="2298307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298312">v</span>&nbsp;<span class="op" id="2298314">=</span>&nbsp;<span class="ident" id="2298316">v</span><span class="op" id="2298317">.</span><span class="ident" id="2298318">assignTo</span><span class="op" id="2298326">(</span><span class="string" id="2298327">&#34;reflect.Select&#34;</span><span class="op" id="2298343">,</span>&nbsp;<span class="ident" id="2298345">tt</span><span class="op" id="2298347">.</span><span class="ident" id="2298348">elem</span><span class="op" id="2298352">,</span>&nbsp;<span class="ident" id="2298354">nil</span><span class="op" id="2298357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298362">if</span>&nbsp;<span class="ident" id="2298365">v</span><span class="op" id="2298366">.</span><span class="ident" id="2298367">flag</span><span class="op" id="2298371">&amp;</span><span class="ident" id="2298372">flagIndir</span>&nbsp;<span class="op" id="2298382">!=</span>&nbsp;<span class="num" id="2298385">0</span>&nbsp;<span class="op" id="2298387">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298393">rc</span><span class="op" id="2298395">.</span><span class="ident" id="2298396">val</span>&nbsp;<span class="op" id="2298400">=</span>&nbsp;<span class="ident" id="2298402">v</span><span class="op" id="2298403">.</span><span class="ident" id="2298404">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298411">}</span>&nbsp;<span class="keyword" id="2298413">else</span>&nbsp;<span class="op" id="2298418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298424">rc</span><span class="op" id="2298426">.</span><span class="ident" id="2298427">val</span>&nbsp;<span class="op" id="2298431">=</span>&nbsp;<span class="ident" id="2298433">unsafe</span><span class="op" id="2298439">.</span><span class="ident" id="2298440">Pointer</span><span class="op" id="2298447">(</span><span class="op" id="2298448">&amp;</span><span class="ident" id="2298449">v</span><span class="op" id="2298450">.</span><span class="ident" id="2298451">ptr</span><span class="op" id="2298454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298464">case</span>&nbsp;<span class="ident" id="2298469">SelectRecv</span><span class="op" id="2298479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298484">if</span>&nbsp;<span class="ident" id="2298487">c</span><span class="op" id="2298488">.</span><span class="ident" id="2298489">Send</span><span class="op" id="2298493">.</span><span class="ident" id="2298494">IsValid</span><span class="op" id="2298501">(</span><span class="op" id="2298502">)</span>&nbsp;<span class="op" id="2298504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2298510">panic</span><span class="op" id="2298515">(</span><span class="string" id="2298516">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2298561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298571">ch</span>&nbsp;<span class="op" id="2298574">:=</span>&nbsp;<span class="ident" id="2298577">c</span><span class="op" id="2298578">.</span><span class="ident" id="2298579">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298587">if</span>&nbsp;<span class="op" id="2298590">!</span><span class="ident" id="2298591">ch</span><span class="op" id="2298593">.</span><span class="ident" id="2298594">IsValid</span><span class="op" id="2298601">(</span><span class="op" id="2298602">)</span>&nbsp;<span class="op" id="2298604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298610">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298624">ch</span><span class="op" id="2298626">.</span><span class="ident" id="2298627">mustBe</span><span class="op" id="2298633">(</span><span class="ident" id="2298634">Chan</span><span class="op" id="2298638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298643">ch</span><span class="op" id="2298645">.</span><span class="ident" id="2298646">mustBeExported</span><span class="op" id="2298660">(</span><span class="op" id="2298661">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298666">tt</span>&nbsp;<span class="op" id="2298669">:=</span>&nbsp;<span class="op" id="2298672">(</span><span class="op" id="2298673">*</span><span class="ident" id="2298674">chanType</span><span class="op" id="2298682">)</span><span class="op" id="2298683">(</span><span class="ident" id="2298684">unsafe</span><span class="op" id="2298690">.</span><span class="ident" id="2298691">Pointer</span><span class="op" id="2298698">(</span><span class="ident" id="2298699">ch</span><span class="op" id="2298701">.</span><span class="ident" id="2298702">typ</span><span class="op" id="2298705">)</span><span class="op" id="2298706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298711">if</span>&nbsp;<span class="ident" id="2298714">ChanDir</span><span class="op" id="2298721">(</span><span class="ident" id="2298722">tt</span><span class="op" id="2298724">.</span><span class="ident" id="2298725">dir</span><span class="op" id="2298728">)</span><span class="op" id="2298729">&amp;</span><span class="ident" id="2298730">RecvDir</span>&nbsp;<span class="op" id="2298738">==</span>&nbsp;<span class="num" id="2298741">0</span>&nbsp;<span class="op" id="2298743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2298749">panic</span><span class="op" id="2298754">(</span><span class="string" id="2298755">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2298809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298819">rc</span><span class="op" id="2298821">.</span><span class="ident" id="2298822">ch</span>&nbsp;<span class="op" id="2298825">=</span>&nbsp;<span class="ident" id="2298827">ch</span><span class="op" id="2298829">.</span><span class="ident" id="2298830">pointer</span><span class="op" id="2298837">(</span><span class="op" id="2298838">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298843">rc</span><span class="op" id="2298845">.</span><span class="ident" id="2298846">typ</span>&nbsp;<span class="op" id="2298850">=</span>&nbsp;<span class="op" id="2298852">&amp;</span><span class="ident" id="2298853">tt</span><span class="op" id="2298855">.</span><span class="ident" id="2298856">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298865">rc</span><span class="op" id="2298867">.</span><span class="ident" id="2298868">val</span>&nbsp;<span class="op" id="2298872">=</span>&nbsp;<span class="ident" id="2298874">unsafe_New</span><span class="op" id="2298884">(</span><span class="ident" id="2298885">tt</span><span class="op" id="2298887">.</span><span class="ident" id="2298888">elem</span><span class="op" id="2298892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2298899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298903">chosen</span><span class="op" id="2298909">,</span>&nbsp;<span class="ident" id="2298911">recvOK</span>&nbsp;<span class="op" id="2298918">=</span>&nbsp;<span class="ident" id="2298920">rselect</span><span class="op" id="2298927">(</span><span class="ident" id="2298928">runcases</span><span class="op" id="2298936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2298939">if</span>&nbsp;<span class="ident" id="2298942">runcases</span><span class="op" id="2298950">[</span><span class="ident" id="2298951">chosen</span><span class="op" id="2298957">]</span><span class="op" id="2298958">.</span><span class="ident" id="2298959">dir</span>&nbsp;<span class="op" id="2298963">==</span>&nbsp;<span class="builtintype" id="2298966">uintptr</span><span class="op" id="2298973">(</span><span class="ident" id="2298974">SelectRecv</span><span class="op" id="2298984">)</span>&nbsp;<span class="op" id="2298986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2298990">tt</span>&nbsp;<span class="op" id="2298993">:=</span>&nbsp;<span class="op" id="2298996">(</span><span class="op" id="2298997">*</span><span class="ident" id="2298998">chanType</span><span class="op" id="2299006">)</span><span class="op" id="2299007">(</span><span class="ident" id="2299008">unsafe</span><span class="op" id="2299014">.</span><span class="ident" id="2299015">Pointer</span><span class="op" id="2299022">(</span><span class="ident" id="2299023">runcases</span><span class="op" id="2299031">[</span><span class="ident" id="2299032">chosen</span><span class="op" id="2299038">]</span><span class="op" id="2299039">.</span><span class="ident" id="2299040">typ</span><span class="op" id="2299043">)</span><span class="op" id="2299044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2299048">t</span>&nbsp;<span class="op" id="2299050">:=</span>&nbsp;<span class="ident" id="2299053">tt</span><span class="op" id="2299055">.</span><span class="ident" id="2299056">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2299063">p</span>&nbsp;<span class="op" id="2299065">:=</span>&nbsp;<span class="ident" id="2299068">runcases</span><span class="op" id="2299076">[</span><span class="ident" id="2299077">chosen</span><span class="op" id="2299083">]</span><span class="op" id="2299084">.</span><span class="ident" id="2299085">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2299091">fl</span>&nbsp;<span class="op" id="2299094">:=</span>&nbsp;<span class="ident" id="2299097">flag</span><span class="op" id="2299101">(</span><span class="ident" id="2299102">t</span><span class="op" id="2299103">.</span><span class="ident" id="2299104">Kind</span><span class="op" id="2299108">(</span><span class="op" id="2299109">)</span><span class="op" id="2299110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299114">if</span>&nbsp;<span class="ident" id="2299117">ifaceIndir</span><span class="op" id="2299127">(</span><span class="ident" id="2299128">t</span><span class="op" id="2299129">)</span>&nbsp;<span class="op" id="2299131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2299136">recv</span>&nbsp;<span class="op" id="2299141">=</span>&nbsp;<span class="ident" id="2299143">Value</span><span class="op" id="2299148">{</span><span class="ident" id="2299149">t</span><span class="op" id="2299150">,</span>&nbsp;<span class="ident" id="2299152">p</span><span class="op" id="2299153">,</span>&nbsp;<span class="ident" id="2299155">fl</span>&nbsp;<span class="op" id="2299158">|</span>&nbsp;<span class="ident" id="2299160">flagIndir</span><span class="op" id="2299169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299173">}</span>&nbsp;<span class="keyword" id="2299175">else</span>&nbsp;<span class="op" id="2299180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2299185">recv</span>&nbsp;<span class="op" id="2299190">=</span>&nbsp;<span class="ident" id="2299192">Value</span><span class="op" id="2299197">{</span><span class="ident" id="2299198">t</span><span class="op" id="2299199">,</span>&nbsp;<span class="op" id="2299201">*</span><span class="op" id="2299202">(</span><span class="op" id="2299203">*</span><span class="ident" id="2299204">unsafe</span><span class="op" id="2299210">.</span><span class="ident" id="2299211">Pointer</span><span class="op" id="2299218">)</span><span class="op" id="2299219">(</span><span class="ident" id="2299220">p</span><span class="op" id="2299221">)</span><span class="op" id="2299222">,</span>&nbsp;<span class="ident" id="2299224">fl</span><span class="op" id="2299226">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299236">return</span>&nbsp;<span class="ident" id="2299243">chosen</span><span class="op" id="2299249">,</span>&nbsp;<span class="ident" id="2299251">recv</span><span class="op" id="2299255">,</span>&nbsp;<span class="ident" id="2299257">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2299264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2299267">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2299291">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2299325">func</span>&nbsp;<span class="ident" id="2299330">unsafe_New</span><span class="op" id="2299340">(</span><span class="op" id="2299341">*</span><span class="ident" id="2299342">rtype</span><span class="op" id="2299347">)</span>&nbsp;<span class="ident" id="2299349">unsafe</span><span class="op" id="2299355">.</span><span class="ident" id="2299356">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2299364">func</span>&nbsp;<span class="ident" id="2299369">unsafe_NewArray</span><span class="op" id="2299384">(</span><span class="op" id="2299385">*</span><span class="ident" id="2299386">rtype</span><span class="op" id="2299391">,</span>&nbsp;<span class="builtintype" id="2299393">int</span><span class="op" id="2299396">)</span>&nbsp;<span class="ident" id="2299398">unsafe</span><span class="op" id="2299404">.</span><span class="ident" id="2299405">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2299414">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2299470">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2299525">func</span>&nbsp;<span class="ident" id="2299530">MakeSlice</span><span class="op" id="2299539">(</span><span class="ident" id="2299540">typ</span>&nbsp;<span class="ident" id="2299544">Type</span><span class="op" id="2299548">,</span>&nbsp;<span class="builtinfunc" id="2299550">len</span><span class="op" id="2299553">,</span>&nbsp;<span class="builtinfunc" id="2299555">cap</span>&nbsp;<span class="builtintype" id="2299559">int</span><span class="op" id="2299562">)</span>&nbsp;<span class="ident" id="2299564">Value</span>&nbsp;<span class="op" id="2299570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299573">if</span>&nbsp;<span class="ident" id="2299576">typ</span><span class="op" id="2299579">.</span><span class="ident" id="2299580">Kind</span><span class="op" id="2299584">(</span><span class="op" id="2299585">)</span>&nbsp;<span class="op" id="2299587">!=</span>&nbsp;<span class="ident" id="2299590">Slice</span>&nbsp;<span class="op" id="2299596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2299600">panic</span><span class="op" id="2299605">(</span><span class="string" id="2299606">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2299643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299649">if</span>&nbsp;<span class="builtinfunc" id="2299652">len</span>&nbsp;<span class="op" id="2299656">&lt;</span>&nbsp;<span class="num" id="2299658">0</span>&nbsp;<span class="op" id="2299660">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2299664">panic</span><span class="op" id="2299669">(</span><span class="string" id="2299670">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2299703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299709">if</span>&nbsp;<span class="builtinfunc" id="2299712">cap</span>&nbsp;<span class="op" id="2299716">&lt;</span>&nbsp;<span class="num" id="2299718">0</span>&nbsp;<span class="op" id="2299720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2299724">panic</span><span class="op" id="2299729">(</span><span class="string" id="2299730">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2299763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299766">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299769">if</span>&nbsp;<span class="builtinfunc" id="2299772">len</span>&nbsp;<span class="op" id="2299776">&gt;</span>&nbsp;<span class="builtinfunc" id="2299778">cap</span>&nbsp;<span class="op" id="2299782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2299786">panic</span><span class="op" id="2299791">(</span><span class="string" id="2299792">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2299822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2299825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2299829">s</span>&nbsp;<span class="op" id="2299831">:=</span>&nbsp;<span class="ident" id="2299834">sliceHeader</span><span class="op" id="2299845">{</span><span class="ident" id="2299846">unsafe_NewArray</span><span class="op" id="2299861">(</span><span class="ident" id="2299862">typ</span><span class="op" id="2299865">.</span><span class="ident" id="2299866">Elem</span><span class="op" id="2299870">(</span><span class="op" id="2299871">)</span><span class="op" id="2299872">.</span><span class="op" id="2299873">(</span><span class="op" id="2299874">*</span><span class="ident" id="2299875">rtype</span><span class="op" id="2299880">)</span><span class="op" id="2299881">,</span>&nbsp;<span class="builtinfunc" id="2299883">cap</span><span class="op" id="2299886">)</span><span class="op" id="2299887">,</span>&nbsp;<span class="builtinfunc" id="2299889">len</span><span class="op" id="2299892">,</span>&nbsp;<span class="builtinfunc" id="2299894">cap</span><span class="op" id="2299897">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2299900">return</span>&nbsp;<span class="ident" id="2299907">Value</span><span class="op" id="2299912">{</span><span class="ident" id="2299913">typ</span><span class="op" id="2299916">.</span><span class="ident" id="2299917">common</span><span class="op" id="2299923">(</span><span class="op" id="2299924">)</span><span class="op" id="2299925">,</span>&nbsp;<span class="ident" id="2299927">unsafe</span><span class="op" id="2299933">.</span><span class="ident" id="2299934">Pointer</span><span class="op" id="2299941">(</span><span class="op" id="2299942">&amp;</span><span class="ident" id="2299943">s</span><span class="op" id="2299944">)</span><span class="op" id="2299945">,</span>&nbsp;<span class="ident" id="2299947">flagIndir</span>&nbsp;<span class="op" id="2299957">|</span>&nbsp;<span class="ident" id="2299959">flag</span><span class="op" id="2299963">(</span><span class="ident" id="2299964">Slice</span><span class="op" id="2299969">)</span><span class="op" id="2299970">}</span><br>
<span class="lineno"></span><span class="op" id="2299972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2299975">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2300050">func</span>&nbsp;<span class="ident" id="2300055">MakeChan</span><span class="op" id="2300063">(</span><span class="ident" id="2300064">typ</span>&nbsp;<span class="ident" id="2300068">Type</span><span class="op" id="2300072">,</span>&nbsp;<span class="ident" id="2300074">buffer</span>&nbsp;<span class="builtintype" id="2300081">int</span><span class="op" id="2300084">)</span>&nbsp;<span class="ident" id="2300086">Value</span>&nbsp;<span class="op" id="2300092">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300095">if</span>&nbsp;<span class="ident" id="2300098">typ</span><span class="op" id="2300101">.</span><span class="ident" id="2300102">Kind</span><span class="op" id="2300106">(</span><span class="op" id="2300107">)</span>&nbsp;<span class="op" id="2300109">!=</span>&nbsp;<span class="ident" id="2300112">Chan</span>&nbsp;<span class="op" id="2300117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2300121">panic</span><span class="op" id="2300126">(</span><span class="string" id="2300127">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2300162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2300165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300168">if</span>&nbsp;<span class="ident" id="2300171">buffer</span>&nbsp;<span class="op" id="2300178">&lt;</span>&nbsp;<span class="num" id="2300180">0</span>&nbsp;<span class="op" id="2300182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2300186">panic</span><span class="op" id="2300191">(</span><span class="string" id="2300192">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2300232">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2300235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300238">if</span>&nbsp;<span class="ident" id="2300241">typ</span><span class="op" id="2300244">.</span><span class="ident" id="2300245">ChanDir</span><span class="op" id="2300252">(</span><span class="op" id="2300253">)</span>&nbsp;<span class="op" id="2300255">!=</span>&nbsp;<span class="ident" id="2300258">BothDir</span>&nbsp;<span class="op" id="2300266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2300270">panic</span><span class="op" id="2300275">(</span><span class="string" id="2300276">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2300323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2300326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2300329">ch</span>&nbsp;<span class="op" id="2300332">:=</span>&nbsp;<span class="ident" id="2300335">makechan</span><span class="op" id="2300343">(</span><span class="ident" id="2300344">typ</span><span class="op" id="2300347">.</span><span class="op" id="2300348">(</span><span class="op" id="2300349">*</span><span class="ident" id="2300350">rtype</span><span class="op" id="2300355">)</span><span class="op" id="2300356">,</span>&nbsp;<span class="ident" id="2300358">uint64</span><span class="op" id="2300364">(</span><span class="ident" id="2300365">buffer</span><span class="op" id="2300371">)</span><span class="op" id="2300372">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300375">return</span>&nbsp;<span class="ident" id="2300382">Value</span><span class="op" id="2300387">{</span><span class="ident" id="2300388">typ</span><span class="op" id="2300391">.</span><span class="ident" id="2300392">common</span><span class="op" id="2300398">(</span><span class="op" id="2300399">)</span><span class="op" id="2300400">,</span>&nbsp;<span class="ident" id="2300402">ch</span><span class="op" id="2300404">,</span>&nbsp;<span class="ident" id="2300406">flag</span><span class="op" id="2300410">(</span><span class="ident" id="2300411">Chan</span><span class="op" id="2300415">)</span><span class="op" id="2300416">}</span><br>
<span class="lineno"></span><span class="op" id="2300418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2300421">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2300473">func</span>&nbsp;<span class="ident" id="2300478">MakeMap</span><span class="op" id="2300485">(</span><span class="ident" id="2300486">typ</span>&nbsp;<span class="ident" id="2300490">Type</span><span class="op" id="2300494">)</span>&nbsp;<span class="ident" id="2300496">Value</span>&nbsp;<span class="op" id="2300502">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300505">if</span>&nbsp;<span class="ident" id="2300508">typ</span><span class="op" id="2300511">.</span><span class="ident" id="2300512">Kind</span><span class="op" id="2300516">(</span><span class="op" id="2300517">)</span>&nbsp;<span class="op" id="2300519">!=</span>&nbsp;<span class="ident" id="2300522">Map</span>&nbsp;<span class="op" id="2300526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2300530">panic</span><span class="op" id="2300535">(</span><span class="string" id="2300536">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2300569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2300572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2300575">m</span>&nbsp;<span class="op" id="2300577">:=</span>&nbsp;<span class="ident" id="2300580">makemap</span><span class="op" id="2300587">(</span><span class="ident" id="2300588">typ</span><span class="op" id="2300591">.</span><span class="op" id="2300592">(</span><span class="op" id="2300593">*</span><span class="ident" id="2300594">rtype</span><span class="op" id="2300599">)</span><span class="op" id="2300600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300603">return</span>&nbsp;<span class="ident" id="2300610">Value</span><span class="op" id="2300615">{</span><span class="ident" id="2300616">typ</span><span class="op" id="2300619">.</span><span class="ident" id="2300620">common</span><span class="op" id="2300626">(</span><span class="op" id="2300627">)</span><span class="op" id="2300628">,</span>&nbsp;<span class="ident" id="2300630">m</span><span class="op" id="2300631">,</span>&nbsp;<span class="ident" id="2300633">flag</span><span class="op" id="2300637">(</span><span class="ident" id="2300638">Map</span><span class="op" id="2300641">)</span><span class="op" id="2300642">}</span><br>
<span class="lineno">2030</span><span class="op" id="2300644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2300647">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2300695">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2300752">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2300798">func</span>&nbsp;<span class="ident" id="2300803">Indirect</span><span class="op" id="2300811">(</span><span class="ident" id="2300812">v</span>&nbsp;<span class="ident" id="2300814">Value</span><span class="op" id="2300819">)</span>&nbsp;<span class="ident" id="2300821">Value</span>&nbsp;<span class="op" id="2300827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300830">if</span>&nbsp;<span class="ident" id="2300833">v</span><span class="op" id="2300834">.</span><span class="ident" id="2300835">Kind</span><span class="op" id="2300839">(</span><span class="op" id="2300840">)</span>&nbsp;<span class="op" id="2300842">!=</span>&nbsp;<span class="ident" id="2300845">Ptr</span>&nbsp;<span class="op" id="2300849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300853">return</span>&nbsp;<span class="ident" id="2300860">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2300863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300866">return</span>&nbsp;<span class="ident" id="2300873">v</span><span class="op" id="2300874">.</span><span class="ident" id="2300875">Elem</span><span class="op" id="2300879">(</span><span class="op" id="2300880">)</span><br>
<span class="lineno">2040</span><span class="op" id="2300882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2300885">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2300950">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2301018">func</span>&nbsp;<span class="ident" id="2301023">ValueOf</span><span class="op" id="2301030">(</span><span class="ident" id="2301031">i</span>&nbsp;<span class="keyword" id="2301033">interface</span><span class="op" id="2301042">{</span><span class="op" id="2301043">}</span><span class="op" id="2301044">)</span>&nbsp;<span class="ident" id="2301046">Value</span>&nbsp;<span class="op" id="2301052">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301055">if</span>&nbsp;<span class="ident" id="2301058">i</span>&nbsp;<span class="op" id="2301060">==</span>&nbsp;<span class="ident" id="2301063">nil</span>&nbsp;<span class="op" id="2301067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301071">return</span>&nbsp;<span class="ident" id="2301078">Value</span><span class="op" id="2301083">{</span><span class="op" id="2301084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2301087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2301091">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2301136">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2301190">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2301238">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2301281">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301323">escapes</span><span class="op" id="2301330">(</span><span class="ident" id="2301331">i</span><span class="op" id="2301332">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301336">return</span>&nbsp;<span class="ident" id="2301343">unpackEface</span><span class="op" id="2301354">(</span><span class="ident" id="2301355">i</span><span class="op" id="2301356">)</span><br>
<span class="lineno"></span><span class="op" id="2301358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2301361">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2301437">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2301505">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2301542">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2301618">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2301677">func</span>&nbsp;<span class="ident" id="2301682">Zero</span><span class="op" id="2301686">(</span><span class="ident" id="2301687">typ</span>&nbsp;<span class="ident" id="2301691">Type</span><span class="op" id="2301695">)</span>&nbsp;<span class="ident" id="2301697">Value</span>&nbsp;<span class="op" id="2301703">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301706">if</span>&nbsp;<span class="ident" id="2301709">typ</span>&nbsp;<span class="op" id="2301713">==</span>&nbsp;<span class="ident" id="2301716">nil</span>&nbsp;<span class="op" id="2301720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2301724">panic</span><span class="op" id="2301729">(</span><span class="string" id="2301730">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2301750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2301753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301756">t</span>&nbsp;<span class="op" id="2301758">:=</span>&nbsp;<span class="ident" id="2301761">typ</span><span class="op" id="2301764">.</span><span class="ident" id="2301765">common</span><span class="op" id="2301771">(</span><span class="op" id="2301772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301775">fl</span>&nbsp;<span class="op" id="2301778">:=</span>&nbsp;<span class="ident" id="2301781">flag</span><span class="op" id="2301785">(</span><span class="ident" id="2301786">t</span><span class="op" id="2301787">.</span><span class="ident" id="2301788">Kind</span><span class="op" id="2301792">(</span><span class="op" id="2301793">)</span><span class="op" id="2301794">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301797">if</span>&nbsp;<span class="ident" id="2301800">ifaceIndir</span><span class="op" id="2301810">(</span><span class="ident" id="2301811">t</span><span class="op" id="2301812">)</span>&nbsp;<span class="op" id="2301814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301818">return</span>&nbsp;<span class="ident" id="2301825">Value</span><span class="op" id="2301830">{</span><span class="ident" id="2301831">t</span><span class="op" id="2301832">,</span>&nbsp;<span class="ident" id="2301834">unsafe_New</span><span class="op" id="2301844">(</span><span class="ident" id="2301845">typ</span><span class="op" id="2301848">.</span><span class="op" id="2301849">(</span><span class="op" id="2301850">*</span><span class="ident" id="2301851">rtype</span><span class="op" id="2301856">)</span><span class="op" id="2301857">)</span><span class="op" id="2301858">,</span>&nbsp;<span class="ident" id="2301860">fl</span>&nbsp;<span class="op" id="2301863">|</span>&nbsp;<span class="ident" id="2301865">flagIndir</span><span class="op" id="2301874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2301877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301880">return</span>&nbsp;<span class="ident" id="2301887">Value</span><span class="op" id="2301892">{</span><span class="ident" id="2301893">t</span><span class="op" id="2301894">,</span>&nbsp;<span class="ident" id="2301896">nil</span><span class="op" id="2301899">,</span>&nbsp;<span class="ident" id="2301901">fl</span><span class="op" id="2301903">}</span><br>
<span class="lineno"></span><span class="op" id="2301905">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2301908">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2301974">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2302052">func</span>&nbsp;<span class="ident" id="2302057">New</span><span class="op" id="2302060">(</span><span class="ident" id="2302061">typ</span>&nbsp;<span class="ident" id="2302065">Type</span><span class="op" id="2302069">)</span>&nbsp;<span class="ident" id="2302071">Value</span>&nbsp;<span class="op" id="2302077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302080">if</span>&nbsp;<span class="ident" id="2302083">typ</span>&nbsp;<span class="op" id="2302087">==</span>&nbsp;<span class="ident" id="2302090">nil</span>&nbsp;<span class="op" id="2302094">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2302098">panic</span><span class="op" id="2302103">(</span><span class="string" id="2302104">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2302123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302129">ptr</span>&nbsp;<span class="op" id="2302133">:=</span>&nbsp;<span class="ident" id="2302136">unsafe_New</span><span class="op" id="2302146">(</span><span class="ident" id="2302147">typ</span><span class="op" id="2302150">.</span><span class="op" id="2302151">(</span><span class="op" id="2302152">*</span><span class="ident" id="2302153">rtype</span><span class="op" id="2302158">)</span><span class="op" id="2302159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302162">fl</span>&nbsp;<span class="op" id="2302165">:=</span>&nbsp;<span class="ident" id="2302168">flag</span><span class="op" id="2302172">(</span><span class="ident" id="2302173">Ptr</span><span class="op" id="2302176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302179">return</span>&nbsp;<span class="ident" id="2302186">Value</span><span class="op" id="2302191">{</span><span class="ident" id="2302192">typ</span><span class="op" id="2302195">.</span><span class="ident" id="2302196">common</span><span class="op" id="2302202">(</span><span class="op" id="2302203">)</span><span class="op" id="2302204">.</span><span class="ident" id="2302205">ptrTo</span><span class="op" id="2302210">(</span><span class="op" id="2302211">)</span><span class="op" id="2302212">,</span>&nbsp;<span class="ident" id="2302214">ptr</span><span class="op" id="2302217">,</span>&nbsp;<span class="ident" id="2302219">fl</span><span class="op" id="2302221">}</span><br>
<span class="lineno">2085</span><span class="op" id="2302223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2302226">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2302292">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2302336">func</span>&nbsp;<span class="ident" id="2302341">NewAt</span><span class="op" id="2302346">(</span><span class="ident" id="2302347">typ</span>&nbsp;<span class="ident" id="2302351">Type</span><span class="op" id="2302355">,</span>&nbsp;<span class="ident" id="2302357">p</span>&nbsp;<span class="ident" id="2302359">unsafe</span><span class="op" id="2302365">.</span><span class="ident" id="2302366">Pointer</span><span class="op" id="2302373">)</span>&nbsp;<span class="ident" id="2302375">Value</span>&nbsp;<span class="op" id="2302381">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302384">fl</span>&nbsp;<span class="op" id="2302387">:=</span>&nbsp;<span class="ident" id="2302390">flag</span><span class="op" id="2302394">(</span><span class="ident" id="2302395">Ptr</span><span class="op" id="2302398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302401">return</span>&nbsp;<span class="ident" id="2302408">Value</span><span class="op" id="2302413">{</span><span class="ident" id="2302414">typ</span><span class="op" id="2302417">.</span><span class="ident" id="2302418">common</span><span class="op" id="2302424">(</span><span class="op" id="2302425">)</span><span class="op" id="2302426">.</span><span class="ident" id="2302427">ptrTo</span><span class="op" id="2302432">(</span><span class="op" id="2302433">)</span><span class="op" id="2302434">,</span>&nbsp;<span class="ident" id="2302436">p</span><span class="op" id="2302437">,</span>&nbsp;<span class="ident" id="2302439">fl</span><span class="op" id="2302441">}</span><br>
<span class="lineno"></span><span class="op" id="2302443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2302446">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2302514">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2302558">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2302644">func</span>&nbsp;<span class="op" id="2302649">(</span><span class="ident" id="2302650">v</span>&nbsp;<span class="ident" id="2302652">Value</span><span class="op" id="2302657">)</span>&nbsp;<span class="ident" id="2302659">assignTo</span><span class="op" id="2302667">(</span><span class="ident" id="2302668">context</span>&nbsp;<span class="builtintype" id="2302676">string</span><span class="op" id="2302682">,</span>&nbsp;<span class="ident" id="2302684">dst</span>&nbsp;<span class="op" id="2302688">*</span><span class="ident" id="2302689">rtype</span><span class="op" id="2302694">,</span>&nbsp;<span class="ident" id="2302696">target</span>&nbsp;<span class="ident" id="2302703">unsafe</span><span class="op" id="2302709">.</span><span class="ident" id="2302710">Pointer</span><span class="op" id="2302717">)</span>&nbsp;<span class="ident" id="2302719">Value</span>&nbsp;<span class="op" id="2302725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302728">if</span>&nbsp;<span class="ident" id="2302731">v</span><span class="op" id="2302732">.</span><span class="ident" id="2302733">flag</span><span class="op" id="2302737">&amp;</span><span class="ident" id="2302738">flagMethod</span>&nbsp;<span class="op" id="2302749">!=</span>&nbsp;<span class="num" id="2302752">0</span>&nbsp;<span class="op" id="2302754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302758">v</span>&nbsp;<span class="op" id="2302760">=</span>&nbsp;<span class="ident" id="2302762">makeMethodValue</span><span class="op" id="2302777">(</span><span class="ident" id="2302778">context</span><span class="op" id="2302785">,</span>&nbsp;<span class="ident" id="2302787">v</span><span class="op" id="2302788">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302795">switch</span>&nbsp;<span class="op" id="2302802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302805">case</span>&nbsp;<span class="ident" id="2302810">directlyAssignable</span><span class="op" id="2302828">(</span><span class="ident" id="2302829">dst</span><span class="op" id="2302832">,</span>&nbsp;<span class="ident" id="2302834">v</span><span class="op" id="2302835">.</span><span class="ident" id="2302836">typ</span><span class="op" id="2302839">)</span><span class="op" id="2302840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302844">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302884">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302926">v</span><span class="op" id="2302927">.</span><span class="ident" id="2302928">typ</span>&nbsp;<span class="op" id="2302932">=</span>&nbsp;<span class="ident" id="2302934">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302940">fl</span>&nbsp;<span class="op" id="2302943">:=</span>&nbsp;<span class="ident" id="2302946">v</span><span class="op" id="2302947">.</span><span class="ident" id="2302948">flag</span>&nbsp;<span class="op" id="2302953">&amp;</span>&nbsp;<span class="op" id="2302955">(</span><span class="ident" id="2302956">flagRO</span>&nbsp;<span class="op" id="2302963">|</span>&nbsp;<span class="ident" id="2302965">flagAddr</span>&nbsp;<span class="op" id="2302974">|</span>&nbsp;<span class="ident" id="2302976">flagIndir</span><span class="op" id="2302985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302989">fl</span>&nbsp;<span class="op" id="2302992">|=</span>&nbsp;<span class="ident" id="2302995">flag</span><span class="op" id="2302999">(</span><span class="ident" id="2303000">dst</span><span class="op" id="2303003">.</span><span class="ident" id="2303004">Kind</span><span class="op" id="2303008">(</span><span class="op" id="2303009">)</span><span class="op" id="2303010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303014">return</span>&nbsp;<span class="ident" id="2303021">Value</span><span class="op" id="2303026">{</span><span class="ident" id="2303027">dst</span><span class="op" id="2303030">,</span>&nbsp;<span class="ident" id="2303032">v</span><span class="op" id="2303033">.</span><span class="ident" id="2303034">ptr</span><span class="op" id="2303037">,</span>&nbsp;<span class="ident" id="2303039">fl</span><span class="op" id="2303041">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303045">case</span>&nbsp;<span class="ident" id="2303050">implements</span><span class="op" id="2303060">(</span><span class="ident" id="2303061">dst</span><span class="op" id="2303064">,</span>&nbsp;<span class="ident" id="2303066">v</span><span class="op" id="2303067">.</span><span class="ident" id="2303068">typ</span><span class="op" id="2303071">)</span><span class="op" id="2303072">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303076">if</span>&nbsp;<span class="ident" id="2303079">target</span>&nbsp;<span class="op" id="2303086">==</span>&nbsp;<span class="ident" id="2303089">nil</span>&nbsp;<span class="op" id="2303093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303098">target</span>&nbsp;<span class="op" id="2303105">=</span>&nbsp;<span class="ident" id="2303107">unsafe_New</span><span class="op" id="2303117">(</span><span class="ident" id="2303118">dst</span><span class="op" id="2303121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303125">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303129">x</span>&nbsp;<span class="op" id="2303131">:=</span>&nbsp;<span class="ident" id="2303134">valueInterface</span><span class="op" id="2303148">(</span><span class="ident" id="2303149">v</span><span class="op" id="2303150">,</span>&nbsp;<span class="builtintype" id="2303152">false</span><span class="op" id="2303157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303161">if</span>&nbsp;<span class="ident" id="2303164">dst</span><span class="op" id="2303167">.</span><span class="ident" id="2303168">NumMethod</span><span class="op" id="2303177">(</span><span class="op" id="2303178">)</span>&nbsp;<span class="op" id="2303180">==</span>&nbsp;<span class="num" id="2303183">0</span>&nbsp;<span class="op" id="2303185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303190">*</span><span class="op" id="2303191">(</span><span class="op" id="2303192">*</span><span class="keyword" id="2303193">interface</span><span class="op" id="2303202">{</span><span class="op" id="2303203">}</span><span class="op" id="2303204">)</span><span class="op" id="2303205">(</span><span class="ident" id="2303206">target</span><span class="op" id="2303212">)</span>&nbsp;<span class="op" id="2303214">=</span>&nbsp;<span class="ident" id="2303216">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303220">}</span>&nbsp;<span class="keyword" id="2303222">else</span>&nbsp;<span class="op" id="2303227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303232">ifaceE2I</span><span class="op" id="2303240">(</span><span class="ident" id="2303241">dst</span><span class="op" id="2303244">,</span>&nbsp;<span class="ident" id="2303246">x</span><span class="op" id="2303247">,</span>&nbsp;<span class="ident" id="2303249">target</span><span class="op" id="2303255">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303263">return</span>&nbsp;<span class="ident" id="2303270">Value</span><span class="op" id="2303275">{</span><span class="ident" id="2303276">dst</span><span class="op" id="2303279">,</span>&nbsp;<span class="ident" id="2303281">target</span><span class="op" id="2303287">,</span>&nbsp;<span class="ident" id="2303289">flagIndir</span>&nbsp;<span class="op" id="2303299">|</span>&nbsp;<span class="ident" id="2303301">flag</span><span class="op" id="2303305">(</span><span class="ident" id="2303306">Interface</span><span class="op" id="2303315">)</span><span class="op" id="2303316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2303323">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2303335">panic</span><span class="op" id="2303340">(</span><span class="ident" id="2303341">context</span>&nbsp;<span class="op" id="2303349">+</span>&nbsp;<span class="string" id="2303351">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2303370">+</span>&nbsp;<span class="ident" id="2303372">v</span><span class="op" id="2303373">.</span><span class="ident" id="2303374">typ</span><span class="op" id="2303377">.</span><span class="ident" id="2303378">String</span><span class="op" id="2303384">(</span><span class="op" id="2303385">)</span>&nbsp;<span class="op" id="2303387">+</span>&nbsp;<span class="string" id="2303389">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2303419">+</span>&nbsp;<span class="ident" id="2303421">dst</span><span class="op" id="2303424">.</span><span class="ident" id="2303425">String</span><span class="op" id="2303431">(</span><span class="op" id="2303432">)</span><span class="op" id="2303433">)</span><br>
<span class="lineno"></span><span class="op" id="2303435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2303438">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2303490">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2303550">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2303595">func</span>&nbsp;<span class="op" id="2303600">(</span><span class="ident" id="2303601">v</span>&nbsp;<span class="ident" id="2303603">Value</span><span class="op" id="2303608">)</span>&nbsp;<span class="ident" id="2303610">Convert</span><span class="op" id="2303617">(</span><span class="ident" id="2303618">t</span>&nbsp;<span class="ident" id="2303620">Type</span><span class="op" id="2303624">)</span>&nbsp;<span class="ident" id="2303626">Value</span>&nbsp;<span class="op" id="2303632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303635">if</span>&nbsp;<span class="ident" id="2303638">v</span><span class="op" id="2303639">.</span><span class="ident" id="2303640">flag</span><span class="op" id="2303644">&amp;</span><span class="ident" id="2303645">flagMethod</span>&nbsp;<span class="op" id="2303656">!=</span>&nbsp;<span class="num" id="2303659">0</span>&nbsp;<span class="op" id="2303661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303665">v</span>&nbsp;<span class="op" id="2303667">=</span>&nbsp;<span class="ident" id="2303669">makeMethodValue</span><span class="op" id="2303684">(</span><span class="string" id="2303685">&#34;Convert&#34;</span><span class="op" id="2303694">,</span>&nbsp;<span class="ident" id="2303696">v</span><span class="op" id="2303697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303700">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303703">op</span>&nbsp;<span class="op" id="2303706">:=</span>&nbsp;<span class="ident" id="2303709">convertOp</span><span class="op" id="2303718">(</span><span class="ident" id="2303719">t</span><span class="op" id="2303720">.</span><span class="ident" id="2303721">common</span><span class="op" id="2303727">(</span><span class="op" id="2303728">)</span><span class="op" id="2303729">,</span>&nbsp;<span class="ident" id="2303731">v</span><span class="op" id="2303732">.</span><span class="ident" id="2303733">typ</span><span class="op" id="2303736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303739">if</span>&nbsp;<span class="ident" id="2303742">op</span>&nbsp;<span class="op" id="2303745">==</span>&nbsp;<span class="ident" id="2303748">nil</span>&nbsp;<span class="op" id="2303752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2303756">panic</span><span class="op" id="2303761">(</span><span class="string" id="2303762">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2303802">+</span>&nbsp;<span class="ident" id="2303804">v</span><span class="op" id="2303805">.</span><span class="ident" id="2303806">typ</span><span class="op" id="2303809">.</span><span class="ident" id="2303810">String</span><span class="op" id="2303816">(</span><span class="op" id="2303817">)</span>&nbsp;<span class="op" id="2303819">+</span>&nbsp;<span class="string" id="2303821">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2303853">+</span>&nbsp;<span class="ident" id="2303855">t</span><span class="op" id="2303856">.</span><span class="ident" id="2303857">String</span><span class="op" id="2303863">(</span><span class="op" id="2303864">)</span><span class="op" id="2303865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303871">return</span>&nbsp;<span class="ident" id="2303878">op</span><span class="op" id="2303880">(</span><span class="ident" id="2303881">v</span><span class="op" id="2303882">,</span>&nbsp;<span class="ident" id="2303884">t</span><span class="op" id="2303885">)</span><br>
<span class="lineno">2140</span><span class="op" id="2303887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2303890">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2303955">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2304035">func</span>&nbsp;<span class="ident" id="2304040">convertOp</span><span class="op" id="2304049">(</span><span class="ident" id="2304050">dst</span><span class="op" id="2304053">,</span>&nbsp;<span class="ident" id="2304055">src</span>&nbsp;<span class="op" id="2304059">*</span><span class="ident" id="2304060">rtype</span><span class="op" id="2304065">)</span>&nbsp;<span class="keyword" id="2304067">func</span><span class="op" id="2304071">(</span><span class="ident" id="2304072">Value</span><span class="op" id="2304077">,</span>&nbsp;<span class="ident" id="2304079">Type</span><span class="op" id="2304083">)</span>&nbsp;<span class="ident" id="2304085">Value</span>&nbsp;<span class="op" id="2304091">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304094">switch</span>&nbsp;<span class="ident" id="2304101">src</span><span class="op" id="2304104">.</span><span class="ident" id="2304105">Kind</span><span class="op" id="2304109">(</span><span class="op" id="2304110">)</span>&nbsp;<span class="op" id="2304112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304115">case</span>&nbsp;<span class="ident" id="2304120">Int</span><span class="op" id="2304123">,</span>&nbsp;<span class="ident" id="2304125">Int8</span><span class="op" id="2304129">,</span>&nbsp;<span class="ident" id="2304131">Int16</span><span class="op" id="2304136">,</span>&nbsp;<span class="ident" id="2304138">Int32</span><span class="op" id="2304143">,</span>&nbsp;<span class="ident" id="2304145">Int64</span><span class="op" id="2304150">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304154">switch</span>&nbsp;<span class="ident" id="2304161">dst</span><span class="op" id="2304164">.</span><span class="ident" id="2304165">Kind</span><span class="op" id="2304169">(</span><span class="op" id="2304170">)</span>&nbsp;<span class="op" id="2304172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304176">case</span>&nbsp;<span class="ident" id="2304181">Int</span><span class="op" id="2304184">,</span>&nbsp;<span class="ident" id="2304186">Int8</span><span class="op" id="2304190">,</span>&nbsp;<span class="ident" id="2304192">Int16</span><span class="op" id="2304197">,</span>&nbsp;<span class="ident" id="2304199">Int32</span><span class="op" id="2304204">,</span>&nbsp;<span class="ident" id="2304206">Int64</span><span class="op" id="2304211">,</span>&nbsp;<span class="ident" id="2304213">Uint</span><span class="op" id="2304217">,</span>&nbsp;<span class="ident" id="2304219">Uint8</span><span class="op" id="2304224">,</span>&nbsp;<span class="ident" id="2304226">Uint16</span><span class="op" id="2304232">,</span>&nbsp;<span class="ident" id="2304234">Uint32</span><span class="op" id="2304240">,</span>&nbsp;<span class="ident" id="2304242">Uint64</span><span class="op" id="2304248">,</span>&nbsp;<span class="ident" id="2304250">Uintptr</span><span class="op" id="2304257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304262">return</span>&nbsp;<span class="ident" id="2304269">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304278">case</span>&nbsp;<span class="ident" id="2304283">Float32</span><span class="op" id="2304290">,</span>&nbsp;<span class="ident" id="2304292">Float64</span><span class="op" id="2304299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304304">return</span>&nbsp;<span class="ident" id="2304311">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304325">case</span>&nbsp;<span class="ident" id="2304330">String</span><span class="op" id="2304336">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304341">return</span>&nbsp;<span class="ident" id="2304348">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2304363">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304367">case</span>&nbsp;<span class="ident" id="2304372">Uint</span><span class="op" id="2304376">,</span>&nbsp;<span class="ident" id="2304378">Uint8</span><span class="op" id="2304383">,</span>&nbsp;<span class="ident" id="2304385">Uint16</span><span class="op" id="2304391">,</span>&nbsp;<span class="ident" id="2304393">Uint32</span><span class="op" id="2304399">,</span>&nbsp;<span class="ident" id="2304401">Uint64</span><span class="op" id="2304407">,</span>&nbsp;<span class="ident" id="2304409">Uintptr</span><span class="op" id="2304416">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304420">switch</span>&nbsp;<span class="ident" id="2304427">dst</span><span class="op" id="2304430">.</span><span class="ident" id="2304431">Kind</span><span class="op" id="2304435">(</span><span class="op" id="2304436">)</span>&nbsp;<span class="op" id="2304438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304442">case</span>&nbsp;<span class="ident" id="2304447">Int</span><span class="op" id="2304450">,</span>&nbsp;<span class="ident" id="2304452">Int8</span><span class="op" id="2304456">,</span>&nbsp;<span class="ident" id="2304458">Int16</span><span class="op" id="2304463">,</span>&nbsp;<span class="ident" id="2304465">Int32</span><span class="op" id="2304470">,</span>&nbsp;<span class="ident" id="2304472">Int64</span><span class="op" id="2304477">,</span>&nbsp;<span class="ident" id="2304479">Uint</span><span class="op" id="2304483">,</span>&nbsp;<span class="ident" id="2304485">Uint8</span><span class="op" id="2304490">,</span>&nbsp;<span class="ident" id="2304492">Uint16</span><span class="op" id="2304498">,</span>&nbsp;<span class="ident" id="2304500">Uint32</span><span class="op" id="2304506">,</span>&nbsp;<span class="ident" id="2304508">Uint64</span><span class="op" id="2304514">,</span>&nbsp;<span class="ident" id="2304516">Uintptr</span><span class="op" id="2304523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304528">return</span>&nbsp;<span class="ident" id="2304535">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304545">case</span>&nbsp;<span class="ident" id="2304550">Float32</span><span class="op" id="2304557">,</span>&nbsp;<span class="ident" id="2304559">Float64</span><span class="op" id="2304566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304571">return</span>&nbsp;<span class="ident" id="2304578">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304593">case</span>&nbsp;<span class="ident" id="2304598">String</span><span class="op" id="2304604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304609">return</span>&nbsp;<span class="ident" id="2304616">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2304632">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304636">case</span>&nbsp;<span class="ident" id="2304641">Float32</span><span class="op" id="2304648">,</span>&nbsp;<span class="ident" id="2304650">Float64</span><span class="op" id="2304657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304661">switch</span>&nbsp;<span class="ident" id="2304668">dst</span><span class="op" id="2304671">.</span><span class="ident" id="2304672">Kind</span><span class="op" id="2304676">(</span><span class="op" id="2304677">)</span>&nbsp;<span class="op" id="2304679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304683">case</span>&nbsp;<span class="ident" id="2304688">Int</span><span class="op" id="2304691">,</span>&nbsp;<span class="ident" id="2304693">Int8</span><span class="op" id="2304697">,</span>&nbsp;<span class="ident" id="2304699">Int16</span><span class="op" id="2304704">,</span>&nbsp;<span class="ident" id="2304706">Int32</span><span class="op" id="2304711">,</span>&nbsp;<span class="ident" id="2304713">Int64</span><span class="op" id="2304718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304723">return</span>&nbsp;<span class="ident" id="2304730">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304744">case</span>&nbsp;<span class="ident" id="2304749">Uint</span><span class="op" id="2304753">,</span>&nbsp;<span class="ident" id="2304755">Uint8</span><span class="op" id="2304760">,</span>&nbsp;<span class="ident" id="2304762">Uint16</span><span class="op" id="2304768">,</span>&nbsp;<span class="ident" id="2304770">Uint32</span><span class="op" id="2304776">,</span>&nbsp;<span class="ident" id="2304778">Uint64</span><span class="op" id="2304784">,</span>&nbsp;<span class="ident" id="2304786">Uintptr</span><span class="op" id="2304793">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304798">return</span>&nbsp;<span class="ident" id="2304805">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304820">case</span>&nbsp;<span class="ident" id="2304825">Float32</span><span class="op" id="2304832">,</span>&nbsp;<span class="ident" id="2304834">Float64</span><span class="op" id="2304841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304846">return</span>&nbsp;<span class="ident" id="2304853">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2304864">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304868">case</span>&nbsp;<span class="ident" id="2304873">Complex64</span><span class="op" id="2304882">,</span>&nbsp;<span class="ident" id="2304884">Complex128</span><span class="op" id="2304894">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304898">switch</span>&nbsp;<span class="ident" id="2304905">dst</span><span class="op" id="2304908">.</span><span class="ident" id="2304909">Kind</span><span class="op" id="2304913">(</span><span class="op" id="2304914">)</span>&nbsp;<span class="op" id="2304916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304920">case</span>&nbsp;<span class="ident" id="2304925">Complex64</span><span class="op" id="2304934">,</span>&nbsp;<span class="ident" id="2304936">Complex128</span><span class="op" id="2304946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304951">return</span>&nbsp;<span class="ident" id="2304958">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2304971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304975">case</span>&nbsp;<span class="ident" id="2304980">String</span><span class="op" id="2304986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2304990">if</span>&nbsp;<span class="ident" id="2304993">dst</span><span class="op" id="2304996">.</span><span class="ident" id="2304997">Kind</span><span class="op" id="2305001">(</span><span class="op" id="2305002">)</span>&nbsp;<span class="op" id="2305004">==</span>&nbsp;<span class="ident" id="2305007">Slice</span>&nbsp;<span class="op" id="2305013">&amp;&amp;</span>&nbsp;<span class="ident" id="2305016">dst</span><span class="op" id="2305019">.</span><span class="ident" id="2305020">Elem</span><span class="op" id="2305024">(</span><span class="op" id="2305025">)</span><span class="op" id="2305026">.</span><span class="ident" id="2305027">PkgPath</span><span class="op" id="2305034">(</span><span class="op" id="2305035">)</span>&nbsp;<span class="op" id="2305037">==</span>&nbsp;<span class="string" id="2305040">&#34;&#34;</span>&nbsp;<span class="op" id="2305043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305048">switch</span>&nbsp;<span class="ident" id="2305055">dst</span><span class="op" id="2305058">.</span><span class="ident" id="2305059">Elem</span><span class="op" id="2305063">(</span><span class="op" id="2305064">)</span><span class="op" id="2305065">.</span><span class="ident" id="2305066">Kind</span><span class="op" id="2305070">(</span><span class="op" id="2305071">)</span>&nbsp;<span class="op" id="2305073">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305078">case</span>&nbsp;<span class="ident" id="2305083">Uint8</span><span class="op" id="2305088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305094">return</span>&nbsp;<span class="ident" id="2305101">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305119">case</span>&nbsp;<span class="ident" id="2305124">Int32</span><span class="op" id="2305129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305135">return</span>&nbsp;<span class="ident" id="2305142">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305160">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305168">case</span>&nbsp;<span class="ident" id="2305173">Slice</span><span class="op" id="2305178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305182">if</span>&nbsp;<span class="ident" id="2305185">dst</span><span class="op" id="2305188">.</span><span class="ident" id="2305189">Kind</span><span class="op" id="2305193">(</span><span class="op" id="2305194">)</span>&nbsp;<span class="op" id="2305196">==</span>&nbsp;<span class="ident" id="2305199">String</span>&nbsp;<span class="op" id="2305206">&amp;&amp;</span>&nbsp;<span class="ident" id="2305209">src</span><span class="op" id="2305212">.</span><span class="ident" id="2305213">Elem</span><span class="op" id="2305217">(</span><span class="op" id="2305218">)</span><span class="op" id="2305219">.</span><span class="ident" id="2305220">PkgPath</span><span class="op" id="2305227">(</span><span class="op" id="2305228">)</span>&nbsp;<span class="op" id="2305230">==</span>&nbsp;<span class="string" id="2305233">&#34;&#34;</span>&nbsp;<span class="op" id="2305236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305241">switch</span>&nbsp;<span class="ident" id="2305248">src</span><span class="op" id="2305251">.</span><span class="ident" id="2305252">Elem</span><span class="op" id="2305256">(</span><span class="op" id="2305257">)</span><span class="op" id="2305258">.</span><span class="ident" id="2305259">Kind</span><span class="op" id="2305263">(</span><span class="op" id="2305264">)</span>&nbsp;<span class="op" id="2305266">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305271">case</span>&nbsp;<span class="ident" id="2305276">Uint8</span><span class="op" id="2305281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305287">return</span>&nbsp;<span class="ident" id="2305294">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305312">case</span>&nbsp;<span class="ident" id="2305317">Int32</span><span class="op" id="2305322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305328">return</span>&nbsp;<span class="ident" id="2305335">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305353">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2305364">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305407">if</span>&nbsp;<span class="ident" id="2305410">haveIdenticalUnderlyingType</span><span class="op" id="2305437">(</span><span class="ident" id="2305438">dst</span><span class="op" id="2305441">,</span>&nbsp;<span class="ident" id="2305443">src</span><span class="op" id="2305446">)</span>&nbsp;<span class="op" id="2305448">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305452">return</span>&nbsp;<span class="ident" id="2305459">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2305474">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305548">if</span>&nbsp;<span class="ident" id="2305551">dst</span><span class="op" id="2305554">.</span><span class="ident" id="2305555">Kind</span><span class="op" id="2305559">(</span><span class="op" id="2305560">)</span>&nbsp;<span class="op" id="2305562">==</span>&nbsp;<span class="ident" id="2305565">Ptr</span>&nbsp;<span class="op" id="2305569">&amp;&amp;</span>&nbsp;<span class="ident" id="2305572">dst</span><span class="op" id="2305575">.</span><span class="ident" id="2305576">Name</span><span class="op" id="2305580">(</span><span class="op" id="2305581">)</span>&nbsp;<span class="op" id="2305583">==</span>&nbsp;<span class="string" id="2305586">&#34;&#34;</span>&nbsp;<span class="op" id="2305589">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2305594">src</span><span class="op" id="2305597">.</span><span class="ident" id="2305598">Kind</span><span class="op" id="2305602">(</span><span class="op" id="2305603">)</span>&nbsp;<span class="op" id="2305605">==</span>&nbsp;<span class="ident" id="2305608">Ptr</span>&nbsp;<span class="op" id="2305612">&amp;&amp;</span>&nbsp;<span class="ident" id="2305615">src</span><span class="op" id="2305618">.</span><span class="ident" id="2305619">Name</span><span class="op" id="2305623">(</span><span class="op" id="2305624">)</span>&nbsp;<span class="op" id="2305626">==</span>&nbsp;<span class="string" id="2305629">&#34;&#34;</span>&nbsp;<span class="op" id="2305632">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2305637">haveIdenticalUnderlyingType</span><span class="op" id="2305664">(</span><span class="ident" id="2305665">dst</span><span class="op" id="2305668">.</span><span class="ident" id="2305669">Elem</span><span class="op" id="2305673">(</span><span class="op" id="2305674">)</span><span class="op" id="2305675">.</span><span class="ident" id="2305676">common</span><span class="op" id="2305682">(</span><span class="op" id="2305683">)</span><span class="op" id="2305684">,</span>&nbsp;<span class="ident" id="2305686">src</span><span class="op" id="2305689">.</span><span class="ident" id="2305690">Elem</span><span class="op" id="2305694">(</span><span class="op" id="2305695">)</span><span class="op" id="2305696">.</span><span class="ident" id="2305697">common</span><span class="op" id="2305703">(</span><span class="op" id="2305704">)</span><span class="op" id="2305705">)</span>&nbsp;<span class="op" id="2305707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305711">return</span>&nbsp;<span class="ident" id="2305718">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305733">if</span>&nbsp;<span class="ident" id="2305736">implements</span><span class="op" id="2305746">(</span><span class="ident" id="2305747">dst</span><span class="op" id="2305750">,</span>&nbsp;<span class="ident" id="2305752">src</span><span class="op" id="2305755">)</span>&nbsp;<span class="op" id="2305757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305761">if</span>&nbsp;<span class="ident" id="2305764">src</span><span class="op" id="2305767">.</span><span class="ident" id="2305768">Kind</span><span class="op" id="2305772">(</span><span class="op" id="2305773">)</span>&nbsp;<span class="op" id="2305775">==</span>&nbsp;<span class="ident" id="2305778">Interface</span>&nbsp;<span class="op" id="2305788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305793">return</span>&nbsp;<span class="ident" id="2305800">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305813">return</span>&nbsp;<span class="ident" id="2305820">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2305828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2305832">return</span>&nbsp;<span class="ident" id="2305839">nil</span><br>
<span class="lineno"></span><span class="op" id="2305843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2305846">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2305919">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2305964">func</span>&nbsp;<span class="ident" id="2305969">makeInt</span><span class="op" id="2305976">(</span><span class="ident" id="2305977">f</span>&nbsp;<span class="ident" id="2305979">flag</span><span class="op" id="2305983">,</span>&nbsp;<span class="ident" id="2305985">bits</span>&nbsp;<span class="ident" id="2305990">uint64</span><span class="op" id="2305996">,</span>&nbsp;<span class="ident" id="2305998">t</span>&nbsp;<span class="ident" id="2306000">Type</span><span class="op" id="2306004">)</span>&nbsp;<span class="ident" id="2306006">Value</span>&nbsp;<span class="op" id="2306012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2306015">typ</span>&nbsp;<span class="op" id="2306019">:=</span>&nbsp;<span class="ident" id="2306022">t</span><span class="op" id="2306023">.</span><span class="ident" id="2306024">common</span><span class="op" id="2306030">(</span><span class="op" id="2306031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2306034">ptr</span>&nbsp;<span class="op" id="2306038">:=</span>&nbsp;<span class="ident" id="2306041">unsafe_New</span><span class="op" id="2306051">(</span><span class="ident" id="2306052">typ</span><span class="op" id="2306055">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306058">switch</span>&nbsp;<span class="ident" id="2306065">typ</span><span class="op" id="2306068">.</span><span class="ident" id="2306069">size</span>&nbsp;<span class="op" id="2306074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306077">case</span>&nbsp;<span class="num" id="2306082">1</span><span class="op" id="2306083">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306087">*</span><span class="op" id="2306088">(</span><span class="op" id="2306089">*</span><span class="builtintype" id="2306090">uint8</span><span class="op" id="2306095">)</span><span class="op" id="2306096">(</span><span class="ident" id="2306097">unsafe</span><span class="op" id="2306103">.</span><span class="ident" id="2306104">Pointer</span><span class="op" id="2306111">(</span><span class="ident" id="2306112">ptr</span><span class="op" id="2306115">)</span><span class="op" id="2306116">)</span>&nbsp;<span class="op" id="2306118">=</span>&nbsp;<span class="builtintype" id="2306120">uint8</span><span class="op" id="2306125">(</span><span class="ident" id="2306126">bits</span><span class="op" id="2306130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306133">case</span>&nbsp;<span class="num" id="2306138">2</span><span class="op" id="2306139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306143">*</span><span class="op" id="2306144">(</span><span class="op" id="2306145">*</span><span class="builtintype" id="2306146">uint16</span><span class="op" id="2306152">)</span><span class="op" id="2306153">(</span><span class="ident" id="2306154">unsafe</span><span class="op" id="2306160">.</span><span class="ident" id="2306161">Pointer</span><span class="op" id="2306168">(</span><span class="ident" id="2306169">ptr</span><span class="op" id="2306172">)</span><span class="op" id="2306173">)</span>&nbsp;<span class="op" id="2306175">=</span>&nbsp;<span class="builtintype" id="2306177">uint16</span><span class="op" id="2306183">(</span><span class="ident" id="2306184">bits</span><span class="op" id="2306188">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306191">case</span>&nbsp;<span class="num" id="2306196">4</span><span class="op" id="2306197">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306201">*</span><span class="op" id="2306202">(</span><span class="op" id="2306203">*</span><span class="builtintype" id="2306204">uint32</span><span class="op" id="2306210">)</span><span class="op" id="2306211">(</span><span class="ident" id="2306212">unsafe</span><span class="op" id="2306218">.</span><span class="ident" id="2306219">Pointer</span><span class="op" id="2306226">(</span><span class="ident" id="2306227">ptr</span><span class="op" id="2306230">)</span><span class="op" id="2306231">)</span>&nbsp;<span class="op" id="2306233">=</span>&nbsp;<span class="builtintype" id="2306235">uint32</span><span class="op" id="2306241">(</span><span class="ident" id="2306242">bits</span><span class="op" id="2306246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306249">case</span>&nbsp;<span class="num" id="2306254">8</span><span class="op" id="2306255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306259">*</span><span class="op" id="2306260">(</span><span class="op" id="2306261">*</span><span class="ident" id="2306262">uint64</span><span class="op" id="2306268">)</span><span class="op" id="2306269">(</span><span class="ident" id="2306270">unsafe</span><span class="op" id="2306276">.</span><span class="ident" id="2306277">Pointer</span><span class="op" id="2306284">(</span><span class="ident" id="2306285">ptr</span><span class="op" id="2306288">)</span><span class="op" id="2306289">)</span>&nbsp;<span class="op" id="2306291">=</span>&nbsp;<span class="ident" id="2306293">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306299">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306302">return</span>&nbsp;<span class="ident" id="2306309">Value</span><span class="op" id="2306314">{</span><span class="ident" id="2306315">typ</span><span class="op" id="2306318">,</span>&nbsp;<span class="ident" id="2306320">ptr</span><span class="op" id="2306323">,</span>&nbsp;<span class="ident" id="2306325">f</span>&nbsp;<span class="op" id="2306327">|</span>&nbsp;<span class="ident" id="2306329">flagIndir</span>&nbsp;<span class="op" id="2306339">|</span>&nbsp;<span class="ident" id="2306341">flag</span><span class="op" id="2306345">(</span><span class="ident" id="2306346">typ</span><span class="op" id="2306349">.</span><span class="ident" id="2306350">Kind</span><span class="op" id="2306354">(</span><span class="op" id="2306355">)</span><span class="op" id="2306356">)</span><span class="op" id="2306357">}</span><br>
<span class="lineno"></span><span class="op" id="2306359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2306362">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2306445">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2306486">func</span>&nbsp;<span class="ident" id="2306491">makeFloat</span><span class="op" id="2306500">(</span><span class="ident" id="2306501">f</span>&nbsp;<span class="ident" id="2306503">flag</span><span class="op" id="2306507">,</span>&nbsp;<span class="ident" id="2306509">v</span>&nbsp;<span class="builtintype" id="2306511">float64</span><span class="op" id="2306518">,</span>&nbsp;<span class="ident" id="2306520">t</span>&nbsp;<span class="ident" id="2306522">Type</span><span class="op" id="2306526">)</span>&nbsp;<span class="ident" id="2306528">Value</span>&nbsp;<span class="op" id="2306534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2306537">typ</span>&nbsp;<span class="op" id="2306541">:=</span>&nbsp;<span class="ident" id="2306544">t</span><span class="op" id="2306545">.</span><span class="ident" id="2306546">common</span><span class="op" id="2306552">(</span><span class="op" id="2306553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2306556">ptr</span>&nbsp;<span class="op" id="2306560">:=</span>&nbsp;<span class="ident" id="2306563">unsafe_New</span><span class="op" id="2306573">(</span><span class="ident" id="2306574">typ</span><span class="op" id="2306577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306580">switch</span>&nbsp;<span class="ident" id="2306587">typ</span><span class="op" id="2306590">.</span><span class="ident" id="2306591">size</span>&nbsp;<span class="op" id="2306596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306599">case</span>&nbsp;<span class="num" id="2306604">4</span><span class="op" id="2306605">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306609">*</span><span class="op" id="2306610">(</span><span class="op" id="2306611">*</span><span class="builtintype" id="2306612">float32</span><span class="op" id="2306619">)</span><span class="op" id="2306620">(</span><span class="ident" id="2306621">unsafe</span><span class="op" id="2306627">.</span><span class="ident" id="2306628">Pointer</span><span class="op" id="2306635">(</span><span class="ident" id="2306636">ptr</span><span class="op" id="2306639">)</span><span class="op" id="2306640">)</span>&nbsp;<span class="op" id="2306642">=</span>&nbsp;<span class="builtintype" id="2306644">float32</span><span class="op" id="2306651">(</span><span class="ident" id="2306652">v</span><span class="op" id="2306653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306656">case</span>&nbsp;<span class="num" id="2306661">8</span><span class="op" id="2306662">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306666">*</span><span class="op" id="2306667">(</span><span class="op" id="2306668">*</span><span class="builtintype" id="2306669">float64</span><span class="op" id="2306676">)</span><span class="op" id="2306677">(</span><span class="ident" id="2306678">unsafe</span><span class="op" id="2306684">.</span><span class="ident" id="2306685">Pointer</span><span class="op" id="2306692">(</span><span class="ident" id="2306693">ptr</span><span class="op" id="2306696">)</span><span class="op" id="2306697">)</span>&nbsp;<span class="op" id="2306699">=</span>&nbsp;<span class="ident" id="2306701">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2306704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306707">return</span>&nbsp;<span class="ident" id="2306714">Value</span><span class="op" id="2306719">{</span><span class="ident" id="2306720">typ</span><span class="op" id="2306723">,</span>&nbsp;<span class="ident" id="2306725">ptr</span><span class="op" id="2306728">,</span>&nbsp;<span class="ident" id="2306730">f</span>&nbsp;<span class="op" id="2306732">|</span>&nbsp;<span class="ident" id="2306734">flagIndir</span>&nbsp;<span class="op" id="2306744">|</span>&nbsp;<span class="ident" id="2306746">flag</span><span class="op" id="2306750">(</span><span class="ident" id="2306751">typ</span><span class="op" id="2306754">.</span><span class="ident" id="2306755">Kind</span><span class="op" id="2306759">(</span><span class="op" id="2306760">)</span><span class="op" id="2306761">)</span><span class="op" id="2306762">}</span><br>
<span class="lineno">2255</span><span class="op" id="2306764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2306767">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2306854">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2306900">func</span>&nbsp;<span class="ident" id="2306905">makeComplex</span><span class="op" id="2306916">(</span><span class="ident" id="2306917">f</span>&nbsp;<span class="ident" id="2306919">flag</span><span class="op" id="2306923">,</span>&nbsp;<span class="ident" id="2306925">v</span>&nbsp;<span class="builtintype" id="2306927">complex128</span><span class="op" id="2306937">,</span>&nbsp;<span class="ident" id="2306939">t</span>&nbsp;<span class="ident" id="2306941">Type</span><span class="op" id="2306945">)</span>&nbsp;<span class="ident" id="2306947">Value</span>&nbsp;<span class="op" id="2306953">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2306956">typ</span>&nbsp;<span class="op" id="2306960">:=</span>&nbsp;<span class="ident" id="2306963">t</span><span class="op" id="2306964">.</span><span class="ident" id="2306965">common</span><span class="op" id="2306971">(</span><span class="op" id="2306972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2306975">ptr</span>&nbsp;<span class="op" id="2306979">:=</span>&nbsp;<span class="ident" id="2306982">unsafe_New</span><span class="op" id="2306992">(</span><span class="ident" id="2306993">typ</span><span class="op" id="2306996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2306999">switch</span>&nbsp;<span class="ident" id="2307006">typ</span><span class="op" id="2307009">.</span><span class="ident" id="2307010">size</span>&nbsp;<span class="op" id="2307015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307018">case</span>&nbsp;<span class="num" id="2307023">8</span><span class="op" id="2307024">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307028">*</span><span class="op" id="2307029">(</span><span class="op" id="2307030">*</span><span class="builtintype" id="2307031">complex64</span><span class="op" id="2307040">)</span><span class="op" id="2307041">(</span><span class="ident" id="2307042">unsafe</span><span class="op" id="2307048">.</span><span class="ident" id="2307049">Pointer</span><span class="op" id="2307056">(</span><span class="ident" id="2307057">ptr</span><span class="op" id="2307060">)</span><span class="op" id="2307061">)</span>&nbsp;<span class="op" id="2307063">=</span>&nbsp;<span class="builtintype" id="2307065">complex64</span><span class="op" id="2307074">(</span><span class="ident" id="2307075">v</span><span class="op" id="2307076">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307079">case</span>&nbsp;<span class="num" id="2307084">16</span><span class="op" id="2307086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307090">*</span><span class="op" id="2307091">(</span><span class="op" id="2307092">*</span><span class="builtintype" id="2307093">complex128</span><span class="op" id="2307103">)</span><span class="op" id="2307104">(</span><span class="ident" id="2307105">unsafe</span><span class="op" id="2307111">.</span><span class="ident" id="2307112">Pointer</span><span class="op" id="2307119">(</span><span class="ident" id="2307120">ptr</span><span class="op" id="2307123">)</span><span class="op" id="2307124">)</span>&nbsp;<span class="op" id="2307126">=</span>&nbsp;<span class="ident" id="2307128">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2307131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307134">return</span>&nbsp;<span class="ident" id="2307141">Value</span><span class="op" id="2307146">{</span><span class="ident" id="2307147">typ</span><span class="op" id="2307150">,</span>&nbsp;<span class="ident" id="2307152">ptr</span><span class="op" id="2307155">,</span>&nbsp;<span class="ident" id="2307157">f</span>&nbsp;<span class="op" id="2307159">|</span>&nbsp;<span class="ident" id="2307161">flagIndir</span>&nbsp;<span class="op" id="2307171">|</span>&nbsp;<span class="ident" id="2307173">flag</span><span class="op" id="2307177">(</span><span class="ident" id="2307178">typ</span><span class="op" id="2307181">.</span><span class="ident" id="2307182">Kind</span><span class="op" id="2307186">(</span><span class="op" id="2307187">)</span><span class="op" id="2307188">)</span><span class="op" id="2307189">}</span><br>
<span class="lineno"></span><span class="op" id="2307191">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2307194">func</span>&nbsp;<span class="ident" id="2307199">makeString</span><span class="op" id="2307209">(</span><span class="ident" id="2307210">f</span>&nbsp;<span class="ident" id="2307212">flag</span><span class="op" id="2307216">,</span>&nbsp;<span class="ident" id="2307218">v</span>&nbsp;<span class="builtintype" id="2307220">string</span><span class="op" id="2307226">,</span>&nbsp;<span class="ident" id="2307228">t</span>&nbsp;<span class="ident" id="2307230">Type</span><span class="op" id="2307234">)</span>&nbsp;<span class="ident" id="2307236">Value</span>&nbsp;<span class="op" id="2307242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307245">ret</span>&nbsp;<span class="op" id="2307249">:=</span>&nbsp;<span class="ident" id="2307252">New</span><span class="op" id="2307255">(</span><span class="ident" id="2307256">t</span><span class="op" id="2307257">)</span><span class="op" id="2307258">.</span><span class="ident" id="2307259">Elem</span><span class="op" id="2307263">(</span><span class="op" id="2307264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307267">ret</span><span class="op" id="2307270">.</span><span class="ident" id="2307271">SetString</span><span class="op" id="2307280">(</span><span class="ident" id="2307281">v</span><span class="op" id="2307282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307285">ret</span><span class="op" id="2307288">.</span><span class="ident" id="2307289">flag</span>&nbsp;<span class="op" id="2307294">=</span>&nbsp;<span class="ident" id="2307296">ret</span><span class="op" id="2307299">.</span><span class="ident" id="2307300">flag</span><span class="op" id="2307304">&amp;^</span><span class="ident" id="2307306">flagAddr</span>&nbsp;<span class="op" id="2307315">|</span>&nbsp;<span class="ident" id="2307317">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307320">return</span>&nbsp;<span class="ident" id="2307327">ret</span><br>
<span class="lineno"></span><span class="op" id="2307331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2307334">func</span>&nbsp;<span class="ident" id="2307339">makeBytes</span><span class="op" id="2307348">(</span><span class="ident" id="2307349">f</span>&nbsp;<span class="ident" id="2307351">flag</span><span class="op" id="2307355">,</span>&nbsp;<span class="ident" id="2307357">v</span>&nbsp;<span class="op" id="2307359">[</span><span class="op" id="2307360">]</span><span class="builtintype" id="2307361">byte</span><span class="op" id="2307365">,</span>&nbsp;<span class="ident" id="2307367">t</span>&nbsp;<span class="ident" id="2307369">Type</span><span class="op" id="2307373">)</span>&nbsp;<span class="ident" id="2307375">Value</span>&nbsp;<span class="op" id="2307381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307384">ret</span>&nbsp;<span class="op" id="2307388">:=</span>&nbsp;<span class="ident" id="2307391">New</span><span class="op" id="2307394">(</span><span class="ident" id="2307395">t</span><span class="op" id="2307396">)</span><span class="op" id="2307397">.</span><span class="ident" id="2307398">Elem</span><span class="op" id="2307402">(</span><span class="op" id="2307403">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307406">ret</span><span class="op" id="2307409">.</span><span class="ident" id="2307410">SetBytes</span><span class="op" id="2307418">(</span><span class="ident" id="2307419">v</span><span class="op" id="2307420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307423">ret</span><span class="op" id="2307426">.</span><span class="ident" id="2307427">flag</span>&nbsp;<span class="op" id="2307432">=</span>&nbsp;<span class="ident" id="2307434">ret</span><span class="op" id="2307437">.</span><span class="ident" id="2307438">flag</span><span class="op" id="2307442">&amp;^</span><span class="ident" id="2307444">flagAddr</span>&nbsp;<span class="op" id="2307453">|</span>&nbsp;<span class="ident" id="2307455">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307458">return</span>&nbsp;<span class="ident" id="2307465">ret</span><br>
<span class="lineno"></span><span class="op" id="2307469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2307472">func</span>&nbsp;<span class="ident" id="2307477">makeRunes</span><span class="op" id="2307486">(</span><span class="ident" id="2307487">f</span>&nbsp;<span class="ident" id="2307489">flag</span><span class="op" id="2307493">,</span>&nbsp;<span class="ident" id="2307495">v</span>&nbsp;<span class="op" id="2307497">[</span><span class="op" id="2307498">]</span><span class="builtintype" id="2307499">rune</span><span class="op" id="2307503">,</span>&nbsp;<span class="ident" id="2307505">t</span>&nbsp;<span class="ident" id="2307507">Type</span><span class="op" id="2307511">)</span>&nbsp;<span class="ident" id="2307513">Value</span>&nbsp;<span class="op" id="2307519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307522">ret</span>&nbsp;<span class="op" id="2307526">:=</span>&nbsp;<span class="ident" id="2307529">New</span><span class="op" id="2307532">(</span><span class="ident" id="2307533">t</span><span class="op" id="2307534">)</span><span class="op" id="2307535">.</span><span class="ident" id="2307536">Elem</span><span class="op" id="2307540">(</span><span class="op" id="2307541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307544">ret</span><span class="op" id="2307547">.</span><span class="ident" id="2307548">setRunes</span><span class="op" id="2307556">(</span><span class="ident" id="2307557">v</span><span class="op" id="2307558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2307561">ret</span><span class="op" id="2307564">.</span><span class="ident" id="2307565">flag</span>&nbsp;<span class="op" id="2307570">=</span>&nbsp;<span class="ident" id="2307572">ret</span><span class="op" id="2307575">.</span><span class="ident" id="2307576">flag</span><span class="op" id="2307580">&amp;^</span><span class="ident" id="2307582">flagAddr</span>&nbsp;<span class="op" id="2307591">|</span>&nbsp;<span class="ident" id="2307593">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307596">return</span>&nbsp;<span class="ident" id="2307603">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2307607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2307610">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2307666">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2307738">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2307810">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2307869">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2307901">func</span>&nbsp;<span class="ident" id="2307906">cvtInt</span><span class="op" id="2307912">(</span><span class="ident" id="2307913">v</span>&nbsp;<span class="ident" id="2307915">Value</span><span class="op" id="2307920">,</span>&nbsp;<span class="ident" id="2307922">t</span>&nbsp;<span class="ident" id="2307924">Type</span><span class="op" id="2307928">)</span>&nbsp;<span class="ident" id="2307930">Value</span>&nbsp;<span class="op" id="2307936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2307939">return</span>&nbsp;<span class="ident" id="2307946">makeInt</span><span class="op" id="2307953">(</span><span class="ident" id="2307954">v</span><span class="op" id="2307955">.</span><span class="ident" id="2307956">flag</span><span class="op" id="2307960">&amp;</span><span class="ident" id="2307961">flagRO</span><span class="op" id="2307967">,</span>&nbsp;<span class="ident" id="2307969">uint64</span><span class="op" id="2307975">(</span><span class="ident" id="2307976">v</span><span class="op" id="2307977">.</span><span class="ident" id="2307978">Int</span><span class="op" id="2307981">(</span><span class="op" id="2307982">)</span><span class="op" id="2307983">)</span><span class="op" id="2307984">,</span>&nbsp;<span class="ident" id="2307986">t</span><span class="op" id="2307987">)</span><br>
<span class="lineno">2300</span><span class="op" id="2307989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2307992">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308025">func</span>&nbsp;<span class="ident" id="2308030">cvtUint</span><span class="op" id="2308037">(</span><span class="ident" id="2308038">v</span>&nbsp;<span class="ident" id="2308040">Value</span><span class="op" id="2308045">,</span>&nbsp;<span class="ident" id="2308047">t</span>&nbsp;<span class="ident" id="2308049">Type</span><span class="op" id="2308053">)</span>&nbsp;<span class="ident" id="2308055">Value</span>&nbsp;<span class="op" id="2308061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308064">return</span>&nbsp;<span class="ident" id="2308071">makeInt</span><span class="op" id="2308078">(</span><span class="ident" id="2308079">v</span><span class="op" id="2308080">.</span><span class="ident" id="2308081">flag</span><span class="op" id="2308085">&amp;</span><span class="ident" id="2308086">flagRO</span><span class="op" id="2308092">,</span>&nbsp;<span class="ident" id="2308094">v</span><span class="op" id="2308095">.</span><span class="ident" id="2308096">Uint</span><span class="op" id="2308100">(</span><span class="op" id="2308101">)</span><span class="op" id="2308102">,</span>&nbsp;<span class="ident" id="2308104">t</span><span class="op" id="2308105">)</span><br>
<span class="lineno">2305</span><span class="op" id="2308107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308110">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308141">func</span>&nbsp;<span class="ident" id="2308146">cvtFloatInt</span><span class="op" id="2308157">(</span><span class="ident" id="2308158">v</span>&nbsp;<span class="ident" id="2308160">Value</span><span class="op" id="2308165">,</span>&nbsp;<span class="ident" id="2308167">t</span>&nbsp;<span class="ident" id="2308169">Type</span><span class="op" id="2308173">)</span>&nbsp;<span class="ident" id="2308175">Value</span>&nbsp;<span class="op" id="2308181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308184">return</span>&nbsp;<span class="ident" id="2308191">makeInt</span><span class="op" id="2308198">(</span><span class="ident" id="2308199">v</span><span class="op" id="2308200">.</span><span class="ident" id="2308201">flag</span><span class="op" id="2308205">&amp;</span><span class="ident" id="2308206">flagRO</span><span class="op" id="2308212">,</span>&nbsp;<span class="ident" id="2308214">uint64</span><span class="op" id="2308220">(</span><span class="ident" id="2308221">int64</span><span class="op" id="2308226">(</span><span class="ident" id="2308227">v</span><span class="op" id="2308228">.</span><span class="ident" id="2308229">Float</span><span class="op" id="2308234">(</span><span class="op" id="2308235">)</span><span class="op" id="2308236">)</span><span class="op" id="2308237">)</span><span class="op" id="2308238">,</span>&nbsp;<span class="ident" id="2308240">t</span><span class="op" id="2308241">)</span><br>
<span class="lineno">2310</span><span class="op" id="2308243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308246">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308278">func</span>&nbsp;<span class="ident" id="2308283">cvtFloatUint</span><span class="op" id="2308295">(</span><span class="ident" id="2308296">v</span>&nbsp;<span class="ident" id="2308298">Value</span><span class="op" id="2308303">,</span>&nbsp;<span class="ident" id="2308305">t</span>&nbsp;<span class="ident" id="2308307">Type</span><span class="op" id="2308311">)</span>&nbsp;<span class="ident" id="2308313">Value</span>&nbsp;<span class="op" id="2308319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308322">return</span>&nbsp;<span class="ident" id="2308329">makeInt</span><span class="op" id="2308336">(</span><span class="ident" id="2308337">v</span><span class="op" id="2308338">.</span><span class="ident" id="2308339">flag</span><span class="op" id="2308343">&amp;</span><span class="ident" id="2308344">flagRO</span><span class="op" id="2308350">,</span>&nbsp;<span class="ident" id="2308352">uint64</span><span class="op" id="2308358">(</span><span class="ident" id="2308359">v</span><span class="op" id="2308360">.</span><span class="ident" id="2308361">Float</span><span class="op" id="2308366">(</span><span class="op" id="2308367">)</span><span class="op" id="2308368">)</span><span class="op" id="2308369">,</span>&nbsp;<span class="ident" id="2308371">t</span><span class="op" id="2308372">)</span><br>
<span class="lineno">2315</span><span class="op" id="2308374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308377">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308408">func</span>&nbsp;<span class="ident" id="2308413">cvtIntFloat</span><span class="op" id="2308424">(</span><span class="ident" id="2308425">v</span>&nbsp;<span class="ident" id="2308427">Value</span><span class="op" id="2308432">,</span>&nbsp;<span class="ident" id="2308434">t</span>&nbsp;<span class="ident" id="2308436">Type</span><span class="op" id="2308440">)</span>&nbsp;<span class="ident" id="2308442">Value</span>&nbsp;<span class="op" id="2308448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308451">return</span>&nbsp;<span class="ident" id="2308458">makeFloat</span><span class="op" id="2308467">(</span><span class="ident" id="2308468">v</span><span class="op" id="2308469">.</span><span class="ident" id="2308470">flag</span><span class="op" id="2308474">&amp;</span><span class="ident" id="2308475">flagRO</span><span class="op" id="2308481">,</span>&nbsp;<span class="builtintype" id="2308483">float64</span><span class="op" id="2308490">(</span><span class="ident" id="2308491">v</span><span class="op" id="2308492">.</span><span class="ident" id="2308493">Int</span><span class="op" id="2308496">(</span><span class="op" id="2308497">)</span><span class="op" id="2308498">)</span><span class="op" id="2308499">,</span>&nbsp;<span class="ident" id="2308501">t</span><span class="op" id="2308502">)</span><br>
<span class="lineno">2320</span><span class="op" id="2308504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308507">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308539">func</span>&nbsp;<span class="ident" id="2308544">cvtUintFloat</span><span class="op" id="2308556">(</span><span class="ident" id="2308557">v</span>&nbsp;<span class="ident" id="2308559">Value</span><span class="op" id="2308564">,</span>&nbsp;<span class="ident" id="2308566">t</span>&nbsp;<span class="ident" id="2308568">Type</span><span class="op" id="2308572">)</span>&nbsp;<span class="ident" id="2308574">Value</span>&nbsp;<span class="op" id="2308580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308583">return</span>&nbsp;<span class="ident" id="2308590">makeFloat</span><span class="op" id="2308599">(</span><span class="ident" id="2308600">v</span><span class="op" id="2308601">.</span><span class="ident" id="2308602">flag</span><span class="op" id="2308606">&amp;</span><span class="ident" id="2308607">flagRO</span><span class="op" id="2308613">,</span>&nbsp;<span class="builtintype" id="2308615">float64</span><span class="op" id="2308622">(</span><span class="ident" id="2308623">v</span><span class="op" id="2308624">.</span><span class="ident" id="2308625">Uint</span><span class="op" id="2308629">(</span><span class="op" id="2308630">)</span><span class="op" id="2308631">)</span><span class="op" id="2308632">,</span>&nbsp;<span class="ident" id="2308634">t</span><span class="op" id="2308635">)</span><br>
<span class="lineno">2325</span><span class="op" id="2308637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308640">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308673">func</span>&nbsp;<span class="ident" id="2308678">cvtFloat</span><span class="op" id="2308686">(</span><span class="ident" id="2308687">v</span>&nbsp;<span class="ident" id="2308689">Value</span><span class="op" id="2308694">,</span>&nbsp;<span class="ident" id="2308696">t</span>&nbsp;<span class="ident" id="2308698">Type</span><span class="op" id="2308702">)</span>&nbsp;<span class="ident" id="2308704">Value</span>&nbsp;<span class="op" id="2308710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308713">return</span>&nbsp;<span class="ident" id="2308720">makeFloat</span><span class="op" id="2308729">(</span><span class="ident" id="2308730">v</span><span class="op" id="2308731">.</span><span class="ident" id="2308732">flag</span><span class="op" id="2308736">&amp;</span><span class="ident" id="2308737">flagRO</span><span class="op" id="2308743">,</span>&nbsp;<span class="ident" id="2308745">v</span><span class="op" id="2308746">.</span><span class="ident" id="2308747">Float</span><span class="op" id="2308752">(</span><span class="op" id="2308753">)</span><span class="op" id="2308754">,</span>&nbsp;<span class="ident" id="2308756">t</span><span class="op" id="2308757">)</span><br>
<span class="lineno">2330</span><span class="op" id="2308759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308762">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2308799">func</span>&nbsp;<span class="ident" id="2308804">cvtComplex</span><span class="op" id="2308814">(</span><span class="ident" id="2308815">v</span>&nbsp;<span class="ident" id="2308817">Value</span><span class="op" id="2308822">,</span>&nbsp;<span class="ident" id="2308824">t</span>&nbsp;<span class="ident" id="2308826">Type</span><span class="op" id="2308830">)</span>&nbsp;<span class="ident" id="2308832">Value</span>&nbsp;<span class="op" id="2308838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308841">return</span>&nbsp;<span class="ident" id="2308848">makeComplex</span><span class="op" id="2308859">(</span><span class="ident" id="2308860">v</span><span class="op" id="2308861">.</span><span class="ident" id="2308862">flag</span><span class="op" id="2308866">&amp;</span><span class="ident" id="2308867">flagRO</span><span class="op" id="2308873">,</span>&nbsp;<span class="ident" id="2308875">v</span><span class="op" id="2308876">.</span><span class="ident" id="2308877">Complex</span><span class="op" id="2308884">(</span><span class="op" id="2308885">)</span><span class="op" id="2308886">,</span>&nbsp;<span class="ident" id="2308888">t</span><span class="op" id="2308889">)</span><br>
<span class="lineno">2335</span><span class="op" id="2308891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308894">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2308924">func</span>&nbsp;<span class="ident" id="2308929">cvtIntString</span><span class="op" id="2308941">(</span><span class="ident" id="2308942">v</span>&nbsp;<span class="ident" id="2308944">Value</span><span class="op" id="2308949">,</span>&nbsp;<span class="ident" id="2308951">t</span>&nbsp;<span class="ident" id="2308953">Type</span><span class="op" id="2308957">)</span>&nbsp;<span class="ident" id="2308959">Value</span>&nbsp;<span class="op" id="2308965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308968">return</span>&nbsp;<span class="ident" id="2308975">makeString</span><span class="op" id="2308985">(</span><span class="ident" id="2308986">v</span><span class="op" id="2308987">.</span><span class="ident" id="2308988">flag</span><span class="op" id="2308992">&amp;</span><span class="ident" id="2308993">flagRO</span><span class="op" id="2308999">,</span>&nbsp;<span class="builtintype" id="2309001">string</span><span class="op" id="2309007">(</span><span class="ident" id="2309008">v</span><span class="op" id="2309009">.</span><span class="ident" id="2309010">Int</span><span class="op" id="2309013">(</span><span class="op" id="2309014">)</span><span class="op" id="2309015">)</span><span class="op" id="2309016">,</span>&nbsp;<span class="ident" id="2309018">t</span><span class="op" id="2309019">)</span><br>
<span class="lineno">2340</span><span class="op" id="2309021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309024">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2309055">func</span>&nbsp;<span class="ident" id="2309060">cvtUintString</span><span class="op" id="2309073">(</span><span class="ident" id="2309074">v</span>&nbsp;<span class="ident" id="2309076">Value</span><span class="op" id="2309081">,</span>&nbsp;<span class="ident" id="2309083">t</span>&nbsp;<span class="ident" id="2309085">Type</span><span class="op" id="2309089">)</span>&nbsp;<span class="ident" id="2309091">Value</span>&nbsp;<span class="op" id="2309097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309100">return</span>&nbsp;<span class="ident" id="2309107">makeString</span><span class="op" id="2309117">(</span><span class="ident" id="2309118">v</span><span class="op" id="2309119">.</span><span class="ident" id="2309120">flag</span><span class="op" id="2309124">&amp;</span><span class="ident" id="2309125">flagRO</span><span class="op" id="2309131">,</span>&nbsp;<span class="builtintype" id="2309133">string</span><span class="op" id="2309139">(</span><span class="ident" id="2309140">v</span><span class="op" id="2309141">.</span><span class="ident" id="2309142">Uint</span><span class="op" id="2309146">(</span><span class="op" id="2309147">)</span><span class="op" id="2309148">)</span><span class="op" id="2309149">,</span>&nbsp;<span class="ident" id="2309151">t</span><span class="op" id="2309152">)</span><br>
<span class="lineno">2345</span><span class="op" id="2309154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309157">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2309188">func</span>&nbsp;<span class="ident" id="2309193">cvtBytesString</span><span class="op" id="2309207">(</span><span class="ident" id="2309208">v</span>&nbsp;<span class="ident" id="2309210">Value</span><span class="op" id="2309215">,</span>&nbsp;<span class="ident" id="2309217">t</span>&nbsp;<span class="ident" id="2309219">Type</span><span class="op" id="2309223">)</span>&nbsp;<span class="ident" id="2309225">Value</span>&nbsp;<span class="op" id="2309231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309234">return</span>&nbsp;<span class="ident" id="2309241">makeString</span><span class="op" id="2309251">(</span><span class="ident" id="2309252">v</span><span class="op" id="2309253">.</span><span class="ident" id="2309254">flag</span><span class="op" id="2309258">&amp;</span><span class="ident" id="2309259">flagRO</span><span class="op" id="2309265">,</span>&nbsp;<span class="builtintype" id="2309267">string</span><span class="op" id="2309273">(</span><span class="ident" id="2309274">v</span><span class="op" id="2309275">.</span><span class="ident" id="2309276">Bytes</span><span class="op" id="2309281">(</span><span class="op" id="2309282">)</span><span class="op" id="2309283">)</span><span class="op" id="2309284">,</span>&nbsp;<span class="ident" id="2309286">t</span><span class="op" id="2309287">)</span><br>
<span class="lineno">2350</span><span class="op" id="2309289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309292">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2309323">func</span>&nbsp;<span class="ident" id="2309328">cvtStringBytes</span><span class="op" id="2309342">(</span><span class="ident" id="2309343">v</span>&nbsp;<span class="ident" id="2309345">Value</span><span class="op" id="2309350">,</span>&nbsp;<span class="ident" id="2309352">t</span>&nbsp;<span class="ident" id="2309354">Type</span><span class="op" id="2309358">)</span>&nbsp;<span class="ident" id="2309360">Value</span>&nbsp;<span class="op" id="2309366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309369">return</span>&nbsp;<span class="ident" id="2309376">makeBytes</span><span class="op" id="2309385">(</span><span class="ident" id="2309386">v</span><span class="op" id="2309387">.</span><span class="ident" id="2309388">flag</span><span class="op" id="2309392">&amp;</span><span class="ident" id="2309393">flagRO</span><span class="op" id="2309399">,</span>&nbsp;<span class="op" id="2309401">[</span><span class="op" id="2309402">]</span><span class="builtintype" id="2309403">byte</span><span class="op" id="2309407">(</span><span class="ident" id="2309408">v</span><span class="op" id="2309409">.</span><span class="ident" id="2309410">String</span><span class="op" id="2309416">(</span><span class="op" id="2309417">)</span><span class="op" id="2309418">)</span><span class="op" id="2309419">,</span>&nbsp;<span class="ident" id="2309421">t</span><span class="op" id="2309422">)</span><br>
<span class="lineno">2355</span><span class="op" id="2309424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309427">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2309458">func</span>&nbsp;<span class="ident" id="2309463">cvtRunesString</span><span class="op" id="2309477">(</span><span class="ident" id="2309478">v</span>&nbsp;<span class="ident" id="2309480">Value</span><span class="op" id="2309485">,</span>&nbsp;<span class="ident" id="2309487">t</span>&nbsp;<span class="ident" id="2309489">Type</span><span class="op" id="2309493">)</span>&nbsp;<span class="ident" id="2309495">Value</span>&nbsp;<span class="op" id="2309501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309504">return</span>&nbsp;<span class="ident" id="2309511">makeString</span><span class="op" id="2309521">(</span><span class="ident" id="2309522">v</span><span class="op" id="2309523">.</span><span class="ident" id="2309524">flag</span><span class="op" id="2309528">&amp;</span><span class="ident" id="2309529">flagRO</span><span class="op" id="2309535">,</span>&nbsp;<span class="builtintype" id="2309537">string</span><span class="op" id="2309543">(</span><span class="ident" id="2309544">v</span><span class="op" id="2309545">.</span><span class="ident" id="2309546">runes</span><span class="op" id="2309551">(</span><span class="op" id="2309552">)</span><span class="op" id="2309553">)</span><span class="op" id="2309554">,</span>&nbsp;<span class="ident" id="2309556">t</span><span class="op" id="2309557">)</span><br>
<span class="lineno">2360</span><span class="op" id="2309559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309562">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2309593">func</span>&nbsp;<span class="ident" id="2309598">cvtStringRunes</span><span class="op" id="2309612">(</span><span class="ident" id="2309613">v</span>&nbsp;<span class="ident" id="2309615">Value</span><span class="op" id="2309620">,</span>&nbsp;<span class="ident" id="2309622">t</span>&nbsp;<span class="ident" id="2309624">Type</span><span class="op" id="2309628">)</span>&nbsp;<span class="ident" id="2309630">Value</span>&nbsp;<span class="op" id="2309636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309639">return</span>&nbsp;<span class="ident" id="2309646">makeRunes</span><span class="op" id="2309655">(</span><span class="ident" id="2309656">v</span><span class="op" id="2309657">.</span><span class="ident" id="2309658">flag</span><span class="op" id="2309662">&amp;</span><span class="ident" id="2309663">flagRO</span><span class="op" id="2309669">,</span>&nbsp;<span class="op" id="2309671">[</span><span class="op" id="2309672">]</span><span class="builtintype" id="2309673">rune</span><span class="op" id="2309677">(</span><span class="ident" id="2309678">v</span><span class="op" id="2309679">.</span><span class="ident" id="2309680">String</span><span class="op" id="2309686">(</span><span class="op" id="2309687">)</span><span class="op" id="2309688">)</span><span class="op" id="2309689">,</span>&nbsp;<span class="ident" id="2309691">t</span><span class="op" id="2309692">)</span><br>
<span class="lineno">2365</span><span class="op" id="2309694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309697">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2309723">func</span>&nbsp;<span class="ident" id="2309728">cvtDirect</span><span class="op" id="2309737">(</span><span class="ident" id="2309738">v</span>&nbsp;<span class="ident" id="2309740">Value</span><span class="op" id="2309745">,</span>&nbsp;<span class="ident" id="2309747">typ</span>&nbsp;<span class="ident" id="2309751">Type</span><span class="op" id="2309755">)</span>&nbsp;<span class="ident" id="2309757">Value</span>&nbsp;<span class="op" id="2309763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309766">f</span>&nbsp;<span class="op" id="2309768">:=</span>&nbsp;<span class="ident" id="2309771">v</span><span class="op" id="2309772">.</span><span class="ident" id="2309773">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309779">t</span>&nbsp;<span class="op" id="2309781">:=</span>&nbsp;<span class="ident" id="2309784">typ</span><span class="op" id="2309787">.</span><span class="ident" id="2309788">common</span><span class="op" id="2309794">(</span><span class="op" id="2309795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309798">ptr</span>&nbsp;<span class="op" id="2309802">:=</span>&nbsp;<span class="ident" id="2309805">v</span><span class="op" id="2309806">.</span><span class="ident" id="2309807">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309812">if</span>&nbsp;<span class="ident" id="2309815">f</span><span class="op" id="2309816">&amp;</span><span class="ident" id="2309817">flagAddr</span>&nbsp;<span class="op" id="2309826">!=</span>&nbsp;<span class="num" id="2309829">0</span>&nbsp;<span class="op" id="2309831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2309835">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309877">c</span>&nbsp;<span class="op" id="2309879">:=</span>&nbsp;<span class="ident" id="2309882">unsafe_New</span><span class="op" id="2309892">(</span><span class="ident" id="2309893">t</span><span class="op" id="2309894">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309898">memmove</span><span class="op" id="2309905">(</span><span class="ident" id="2309906">c</span><span class="op" id="2309907">,</span>&nbsp;<span class="ident" id="2309909">ptr</span><span class="op" id="2309912">,</span>&nbsp;<span class="ident" id="2309914">t</span><span class="op" id="2309915">.</span><span class="ident" id="2309916">size</span><span class="op" id="2309920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309924">ptr</span>&nbsp;<span class="op" id="2309928">=</span>&nbsp;<span class="ident" id="2309930">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309934">f</span>&nbsp;<span class="op" id="2309936">&amp;^=</span>&nbsp;<span class="ident" id="2309940">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2309950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309953">return</span>&nbsp;<span class="ident" id="2309960">Value</span><span class="op" id="2309965">{</span><span class="ident" id="2309966">t</span><span class="op" id="2309967">,</span>&nbsp;<span class="ident" id="2309969">ptr</span><span class="op" id="2309972">,</span>&nbsp;<span class="ident" id="2309974">v</span><span class="op" id="2309975">.</span><span class="ident" id="2309976">flag</span><span class="op" id="2309980">&amp;</span><span class="ident" id="2309981">flagRO</span>&nbsp;<span class="op" id="2309988">|</span>&nbsp;<span class="ident" id="2309990">f</span><span class="op" id="2309991">}</span>&nbsp;<span class="comment" id="2309993">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2310018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310021">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2310057">func</span>&nbsp;<span class="ident" id="2310062">cvtT2I</span><span class="op" id="2310068">(</span><span class="ident" id="2310069">v</span>&nbsp;<span class="ident" id="2310071">Value</span><span class="op" id="2310076">,</span>&nbsp;<span class="ident" id="2310078">typ</span>&nbsp;<span class="ident" id="2310082">Type</span><span class="op" id="2310086">)</span>&nbsp;<span class="ident" id="2310088">Value</span>&nbsp;<span class="op" id="2310094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310097">target</span>&nbsp;<span class="op" id="2310104">:=</span>&nbsp;<span class="ident" id="2310107">unsafe_New</span><span class="op" id="2310117">(</span><span class="ident" id="2310118">typ</span><span class="op" id="2310121">.</span><span class="ident" id="2310122">common</span><span class="op" id="2310128">(</span><span class="op" id="2310129">)</span><span class="op" id="2310130">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310133">x</span>&nbsp;<span class="op" id="2310135">:=</span>&nbsp;<span class="ident" id="2310138">valueInterface</span><span class="op" id="2310152">(</span><span class="ident" id="2310153">v</span><span class="op" id="2310154">,</span>&nbsp;<span class="builtintype" id="2310156">false</span><span class="op" id="2310161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310164">if</span>&nbsp;<span class="ident" id="2310167">typ</span><span class="op" id="2310170">.</span><span class="ident" id="2310171">NumMethod</span><span class="op" id="2310180">(</span><span class="op" id="2310181">)</span>&nbsp;<span class="op" id="2310183">==</span>&nbsp;<span class="num" id="2310186">0</span>&nbsp;<span class="op" id="2310188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310192">*</span><span class="op" id="2310193">(</span><span class="op" id="2310194">*</span><span class="keyword" id="2310195">interface</span><span class="op" id="2310204">{</span><span class="op" id="2310205">}</span><span class="op" id="2310206">)</span><span class="op" id="2310207">(</span><span class="ident" id="2310208">target</span><span class="op" id="2310214">)</span>&nbsp;<span class="op" id="2310216">=</span>&nbsp;<span class="ident" id="2310218">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310221">}</span>&nbsp;<span class="keyword" id="2310223">else</span>&nbsp;<span class="op" id="2310228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310232">ifaceE2I</span><span class="op" id="2310240">(</span><span class="ident" id="2310241">typ</span><span class="op" id="2310244">.</span><span class="op" id="2310245">(</span><span class="op" id="2310246">*</span><span class="ident" id="2310247">rtype</span><span class="op" id="2310252">)</span><span class="op" id="2310253">,</span>&nbsp;<span class="ident" id="2310255">x</span><span class="op" id="2310256">,</span>&nbsp;<span class="ident" id="2310258">target</span><span class="op" id="2310264">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310270">return</span>&nbsp;<span class="ident" id="2310277">Value</span><span class="op" id="2310282">{</span><span class="ident" id="2310283">typ</span><span class="op" id="2310286">.</span><span class="ident" id="2310287">common</span><span class="op" id="2310293">(</span><span class="op" id="2310294">)</span><span class="op" id="2310295">,</span>&nbsp;<span class="ident" id="2310297">target</span><span class="op" id="2310303">,</span>&nbsp;<span class="ident" id="2310305">v</span><span class="op" id="2310306">.</span><span class="ident" id="2310307">flag</span><span class="op" id="2310311">&amp;</span><span class="ident" id="2310312">flagRO</span>&nbsp;<span class="op" id="2310319">|</span>&nbsp;<span class="ident" id="2310321">flagIndir</span>&nbsp;<span class="op" id="2310331">|</span>&nbsp;<span class="ident" id="2310333">flag</span><span class="op" id="2310337">(</span><span class="ident" id="2310338">Interface</span><span class="op" id="2310347">)</span><span class="op" id="2310348">}</span><br>
<span class="lineno"></span><span class="op" id="2310350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310353">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2310390">func</span>&nbsp;<span class="ident" id="2310395">cvtI2I</span><span class="op" id="2310401">(</span><span class="ident" id="2310402">v</span>&nbsp;<span class="ident" id="2310404">Value</span><span class="op" id="2310409">,</span>&nbsp;<span class="ident" id="2310411">typ</span>&nbsp;<span class="ident" id="2310415">Type</span><span class="op" id="2310419">)</span>&nbsp;<span class="ident" id="2310421">Value</span>&nbsp;<span class="op" id="2310427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310430">if</span>&nbsp;<span class="ident" id="2310433">v</span><span class="op" id="2310434">.</span><span class="ident" id="2310435">IsNil</span><span class="op" id="2310440">(</span><span class="op" id="2310441">)</span>&nbsp;<span class="op" id="2310443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310447">ret</span>&nbsp;<span class="op" id="2310451">:=</span>&nbsp;<span class="ident" id="2310454">Zero</span><span class="op" id="2310458">(</span><span class="ident" id="2310459">typ</span><span class="op" id="2310462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310466">ret</span><span class="op" id="2310469">.</span><span class="ident" id="2310470">flag</span>&nbsp;<span class="op" id="2310475">|=</span>&nbsp;<span class="ident" id="2310478">v</span><span class="op" id="2310479">.</span><span class="ident" id="2310480">flag</span>&nbsp;<span class="op" id="2310485">&amp;</span>&nbsp;<span class="ident" id="2310487">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310496">return</span>&nbsp;<span class="ident" id="2310503">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2310508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310511">return</span>&nbsp;<span class="ident" id="2310518">cvtT2I</span><span class="op" id="2310524">(</span><span class="ident" id="2310525">v</span><span class="op" id="2310526">.</span><span class="ident" id="2310527">Elem</span><span class="op" id="2310531">(</span><span class="op" id="2310532">)</span><span class="op" id="2310533">,</span>&nbsp;<span class="ident" id="2310535">typ</span><span class="op" id="2310538">)</span><br>
<span class="lineno"></span><span class="op" id="2310540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310543">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2310572">func</span>&nbsp;<span class="ident" id="2310577">chancap</span><span class="op" id="2310584">(</span><span class="ident" id="2310585">ch</span>&nbsp;<span class="ident" id="2310588">unsafe</span><span class="op" id="2310594">.</span><span class="ident" id="2310595">Pointer</span><span class="op" id="2310602">)</span>&nbsp;<span class="builtintype" id="2310604">int</span><br>
<span class="lineno"></span><span class="keyword" id="2310608">func</span>&nbsp;<span class="ident" id="2310613">chanclose</span><span class="op" id="2310622">(</span><span class="ident" id="2310623">ch</span>&nbsp;<span class="ident" id="2310626">unsafe</span><span class="op" id="2310632">.</span><span class="ident" id="2310633">Pointer</span><span class="op" id="2310640">)</span><br>
<span class="lineno"></span><span class="keyword" id="2310642">func</span>&nbsp;<span class="ident" id="2310647">chanlen</span><span class="op" id="2310654">(</span><span class="ident" id="2310655">ch</span>&nbsp;<span class="ident" id="2310658">unsafe</span><span class="op" id="2310664">.</span><span class="ident" id="2310665">Pointer</span><span class="op" id="2310672">)</span>&nbsp;<span class="builtintype" id="2310674">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310679">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2310693">func</span>&nbsp;<span class="ident" id="2310698">chanrecv</span><span class="op" id="2310706">(</span><span class="ident" id="2310707">t</span>&nbsp;<span class="op" id="2310709">*</span><span class="ident" id="2310710">rtype</span><span class="op" id="2310715">,</span>&nbsp;<span class="ident" id="2310717">ch</span>&nbsp;<span class="ident" id="2310720">unsafe</span><span class="op" id="2310726">.</span><span class="ident" id="2310727">Pointer</span><span class="op" id="2310734">,</span>&nbsp;<span class="ident" id="2310736">nb</span>&nbsp;<span class="builtintype" id="2310739">bool</span><span class="op" id="2310743">,</span>&nbsp;<span class="ident" id="2310745">val</span>&nbsp;<span class="ident" id="2310749">unsafe</span><span class="op" id="2310755">.</span><span class="ident" id="2310756">Pointer</span><span class="op" id="2310763">)</span>&nbsp;<span class="op" id="2310765">(</span><span class="ident" id="2310766">selected</span><span class="op" id="2310774">,</span>&nbsp;<span class="ident" id="2310776">received</span>&nbsp;<span class="builtintype" id="2310785">bool</span><span class="op" id="2310789">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310792">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2310806">func</span>&nbsp;<span class="ident" id="2310811">chansend</span><span class="op" id="2310819">(</span><span class="ident" id="2310820">t</span>&nbsp;<span class="op" id="2310822">*</span><span class="ident" id="2310823">rtype</span><span class="op" id="2310828">,</span>&nbsp;<span class="ident" id="2310830">ch</span>&nbsp;<span class="ident" id="2310833">unsafe</span><span class="op" id="2310839">.</span><span class="ident" id="2310840">Pointer</span><span class="op" id="2310847">,</span>&nbsp;<span class="ident" id="2310849">val</span>&nbsp;<span class="ident" id="2310853">unsafe</span><span class="op" id="2310859">.</span><span class="ident" id="2310860">Pointer</span><span class="op" id="2310867">,</span>&nbsp;<span class="ident" id="2310869">nb</span>&nbsp;<span class="builtintype" id="2310872">bool</span><span class="op" id="2310876">)</span>&nbsp;<span class="builtintype" id="2310878">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2310884">func</span>&nbsp;<span class="ident" id="2310889">makechan</span><span class="op" id="2310897">(</span><span class="ident" id="2310898">typ</span>&nbsp;<span class="op" id="2310902">*</span><span class="ident" id="2310903">rtype</span><span class="op" id="2310908">,</span>&nbsp;<span class="ident" id="2310910">size</span>&nbsp;<span class="ident" id="2310915">uint64</span><span class="op" id="2310921">)</span>&nbsp;<span class="op" id="2310923">(</span><span class="ident" id="2310924">ch</span>&nbsp;<span class="ident" id="2310927">unsafe</span><span class="op" id="2310933">.</span><span class="ident" id="2310934">Pointer</span><span class="op" id="2310941">)</span><br>
<span class="lineno"></span><span class="keyword" id="2310943">func</span>&nbsp;<span class="ident" id="2310948">makemap</span><span class="op" id="2310955">(</span><span class="ident" id="2310956">t</span>&nbsp;<span class="op" id="2310958">*</span><span class="ident" id="2310959">rtype</span><span class="op" id="2310964">)</span>&nbsp;<span class="op" id="2310966">(</span><span class="ident" id="2310967">m</span>&nbsp;<span class="ident" id="2310969">unsafe</span><span class="op" id="2310975">.</span><span class="ident" id="2310976">Pointer</span><span class="op" id="2310983">)</span><br>
<span class="lineno"></span><span class="keyword" id="2310985">func</span>&nbsp;<span class="ident" id="2310990">mapaccess</span><span class="op" id="2310999">(</span><span class="ident" id="2311000">t</span>&nbsp;<span class="op" id="2311002">*</span><span class="ident" id="2311003">rtype</span><span class="op" id="2311008">,</span>&nbsp;<span class="ident" id="2311010">m</span>&nbsp;<span class="ident" id="2311012">unsafe</span><span class="op" id="2311018">.</span><span class="ident" id="2311019">Pointer</span><span class="op" id="2311026">,</span>&nbsp;<span class="ident" id="2311028">key</span>&nbsp;<span class="ident" id="2311032">unsafe</span><span class="op" id="2311038">.</span><span class="ident" id="2311039">Pointer</span><span class="op" id="2311046">)</span>&nbsp;<span class="op" id="2311048">(</span><span class="ident" id="2311049">val</span>&nbsp;<span class="ident" id="2311053">unsafe</span><span class="op" id="2311059">.</span><span class="ident" id="2311060">Pointer</span><span class="op" id="2311067">)</span><br>
<span class="lineno"></span><span class="keyword" id="2311069">func</span>&nbsp;<span class="ident" id="2311074">mapassign</span><span class="op" id="2311083">(</span><span class="ident" id="2311084">t</span>&nbsp;<span class="op" id="2311086">*</span><span class="ident" id="2311087">rtype</span><span class="op" id="2311092">,</span>&nbsp;<span class="ident" id="2311094">m</span>&nbsp;<span class="ident" id="2311096">unsafe</span><span class="op" id="2311102">.</span><span class="ident" id="2311103">Pointer</span><span class="op" id="2311110">,</span>&nbsp;<span class="ident" id="2311112">key</span><span class="op" id="2311115">,</span>&nbsp;<span class="ident" id="2311117">val</span>&nbsp;<span class="ident" id="2311121">unsafe</span><span class="op" id="2311127">.</span><span class="ident" id="2311128">Pointer</span><span class="op" id="2311135">)</span><br>
<span class="lineno"></span><span class="keyword" id="2311137">func</span>&nbsp;<span class="ident" id="2311142">mapdelete</span><span class="op" id="2311151">(</span><span class="ident" id="2311152">t</span>&nbsp;<span class="op" id="2311154">*</span><span class="ident" id="2311155">rtype</span><span class="op" id="2311160">,</span>&nbsp;<span class="ident" id="2311162">m</span>&nbsp;<span class="ident" id="2311164">unsafe</span><span class="op" id="2311170">.</span><span class="ident" id="2311171">Pointer</span><span class="op" id="2311178">,</span>&nbsp;<span class="ident" id="2311180">key</span>&nbsp;<span class="ident" id="2311184">unsafe</span><span class="op" id="2311190">.</span><span class="ident" id="2311191">Pointer</span><span class="op" id="2311198">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2311200">func</span>&nbsp;<span class="ident" id="2311205">mapiterinit</span><span class="op" id="2311216">(</span><span class="ident" id="2311217">t</span>&nbsp;<span class="op" id="2311219">*</span><span class="ident" id="2311220">rtype</span><span class="op" id="2311225">,</span>&nbsp;<span class="ident" id="2311227">m</span>&nbsp;<span class="ident" id="2311229">unsafe</span><span class="op" id="2311235">.</span><span class="ident" id="2311236">Pointer</span><span class="op" id="2311243">)</span>&nbsp;<span class="ident" id="2311245">unsafe</span><span class="op" id="2311251">.</span><span class="ident" id="2311252">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2311260">func</span>&nbsp;<span class="ident" id="2311265">mapiterkey</span><span class="op" id="2311275">(</span><span class="ident" id="2311276">it</span>&nbsp;<span class="ident" id="2311279">unsafe</span><span class="op" id="2311285">.</span><span class="ident" id="2311286">Pointer</span><span class="op" id="2311293">)</span>&nbsp;<span class="op" id="2311295">(</span><span class="ident" id="2311296">key</span>&nbsp;<span class="ident" id="2311300">unsafe</span><span class="op" id="2311306">.</span><span class="ident" id="2311307">Pointer</span><span class="op" id="2311314">)</span><br>
<span class="lineno"></span><span class="keyword" id="2311316">func</span>&nbsp;<span class="ident" id="2311321">mapiternext</span><span class="op" id="2311332">(</span><span class="ident" id="2311333">it</span>&nbsp;<span class="ident" id="2311336">unsafe</span><span class="op" id="2311342">.</span><span class="ident" id="2311343">Pointer</span><span class="op" id="2311350">)</span><br>
<span class="lineno"></span><span class="keyword" id="2311352">func</span>&nbsp;<span class="ident" id="2311357">maplen</span><span class="op" id="2311363">(</span><span class="ident" id="2311364">m</span>&nbsp;<span class="ident" id="2311366">unsafe</span><span class="op" id="2311372">.</span><span class="ident" id="2311373">Pointer</span><span class="op" id="2311380">)</span>&nbsp;<span class="builtintype" id="2311382">int</span><br>
<span class="lineno"></span><span class="keyword" id="2311386">func</span>&nbsp;<span class="ident" id="2311391">call</span><span class="op" id="2311395">(</span><span class="ident" id="2311396">fn</span><span class="op" id="2311398">,</span>&nbsp;<span class="ident" id="2311400">arg</span>&nbsp;<span class="ident" id="2311404">unsafe</span><span class="op" id="2311410">.</span><span class="ident" id="2311411">Pointer</span><span class="op" id="2311418">,</span>&nbsp;<span class="ident" id="2311420">n</span>&nbsp;<span class="builtintype" id="2311422">uint32</span><span class="op" id="2311428">,</span>&nbsp;<span class="ident" id="2311430">retoffset</span>&nbsp;<span class="builtintype" id="2311440">uint32</span><span class="op" id="2311446">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2311449">func</span>&nbsp;<span class="ident" id="2311454">ifaceE2I</span><span class="op" id="2311462">(</span><span class="ident" id="2311463">t</span>&nbsp;<span class="op" id="2311465">*</span><span class="ident" id="2311466">rtype</span><span class="op" id="2311471">,</span>&nbsp;<span class="ident" id="2311473">src</span>&nbsp;<span class="keyword" id="2311477">interface</span><span class="op" id="2311486">{</span><span class="op" id="2311487">}</span><span class="op" id="2311488">,</span>&nbsp;<span class="ident" id="2311490">dst</span>&nbsp;<span class="ident" id="2311494">unsafe</span><span class="op" id="2311500">.</span><span class="ident" id="2311501">Pointer</span><span class="op" id="2311508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2311511">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2311525">func</span>&nbsp;<span class="ident" id="2311530">memmove</span><span class="op" id="2311537">(</span><span class="ident" id="2311538">adst</span><span class="op" id="2311542">,</span>&nbsp;<span class="ident" id="2311544">asrc</span>&nbsp;<span class="ident" id="2311549">unsafe</span><span class="op" id="2311555">.</span><span class="ident" id="2311556">Pointer</span><span class="op" id="2311563">,</span>&nbsp;<span class="ident" id="2311565">n</span>&nbsp;<span class="builtintype" id="2311567">uintptr</span><span class="op" id="2311574">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2311577">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2311631">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2311692">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2311723">func</span>&nbsp;<span class="ident" id="2311728">escapes</span><span class="op" id="2311735">(</span><span class="ident" id="2311736">x</span>&nbsp;<span class="keyword" id="2311738">interface</span><span class="op" id="2311747">{</span><span class="op" id="2311748">}</span><span class="op" id="2311749">)</span>&nbsp;<span class="op" id="2311751">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311754">if</span>&nbsp;<span class="ident" id="2311757">dummy</span><span class="op" id="2311762">.</span><span class="ident" id="2311763">b</span>&nbsp;<span class="op" id="2311765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311769">dummy</span><span class="op" id="2311774">.</span><span class="ident" id="2311775">x</span>&nbsp;<span class="op" id="2311777">=</span>&nbsp;<span class="ident" id="2311779">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311782">}</span><br>
<span class="lineno"></span><span class="op" id="2311784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2311787">var</span>&nbsp;<span class="ident" id="2311791">dummy</span>&nbsp;<span class="keyword" id="2311797">struct</span>&nbsp;<span class="op" id="2311804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311807">b</span>&nbsp;<span class="builtintype" id="2311809">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311815">x</span>&nbsp;<span class="keyword" id="2311817">interface</span><span class="op" id="2311826">{</span><span class="op" id="2311827">}</span><br>
<span class="lineno"></span><span class="op" id="2311829">}</span>
</div>
</body>
</html>
