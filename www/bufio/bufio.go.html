<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3220086">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3220141">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3220195">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3220246">//&nbsp;Package&nbsp;bufio&nbsp;implements&nbsp;buffered&nbsp;I/O.&nbsp;&nbsp;It&nbsp;wraps&nbsp;an&nbsp;io.Reader&nbsp;or&nbsp;io.Writer</span><br>
<span class="lineno"></span><span class="comment" id="3220324">//&nbsp;object,&nbsp;creating&nbsp;another&nbsp;object&nbsp;(Reader&nbsp;or&nbsp;Writer)&nbsp;that&nbsp;also&nbsp;implements</span><br>
<span class="lineno"></span><span class="comment" id="3220399">//&nbsp;the&nbsp;interface&nbsp;but&nbsp;provides&nbsp;buffering&nbsp;and&nbsp;some&nbsp;help&nbsp;for&nbsp;textual&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="keyword" id="3220470">package</span>&nbsp;<span class="ident" id="3220478">bufio</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3220485">import</span>&nbsp;<span class="op" id="3220492">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3220495">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3220504">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3220514">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3220520">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">15</span><span class="op" id="3220535">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3220538">const</span>&nbsp;<span class="op" id="3220544">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220547">defaultBufSize</span>&nbsp;<span class="op" id="3220562">=</span>&nbsp;<span class="num" id="3220564">4096</span><br>
<span class="lineno"></span><span class="op" id="3220569">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3220572">var</span>&nbsp;<span class="op" id="3220576">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220579">ErrInvalidUnreadByte</span>&nbsp;<span class="op" id="3220600">=</span>&nbsp;<span class="ident" id="3220602"><a href="/bufio/bufio.go.html#3220504">errors</a></span><span class="op" id="3220608">.</span><span class="ident" id="3220609">New</span><span class="op" id="3220612">(</span><span class="string" id="3220613">&#34;bufio:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;UnreadByte&#34;</span><span class="op" id="3220647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220650">ErrInvalidUnreadRune</span>&nbsp;<span class="op" id="3220671">=</span>&nbsp;<span class="ident" id="3220673"><a href="/bufio/bufio.go.html#3220504">errors</a></span><span class="op" id="3220679">.</span><span class="ident" id="3220680">New</span><span class="op" id="3220683">(</span><span class="string" id="3220684">&#34;bufio:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;UnreadRune&#34;</span><span class="op" id="3220718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220721">ErrBufferFull</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3220742">=</span>&nbsp;<span class="ident" id="3220744"><a href="/bufio/bufio.go.html#3220504">errors</a></span><span class="op" id="3220750">.</span><span class="ident" id="3220751">New</span><span class="op" id="3220754">(</span><span class="string" id="3220755">&#34;bufio:&nbsp;buffer&nbsp;full&#34;</span><span class="op" id="3220775">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220778">ErrNegativeCount</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3220799">=</span>&nbsp;<span class="ident" id="3220801"><a href="/bufio/bufio.go.html#3220504">errors</a></span><span class="op" id="3220807">.</span><span class="ident" id="3220808">New</span><span class="op" id="3220811">(</span><span class="string" id="3220812">&#34;bufio:&nbsp;negative&nbsp;count&#34;</span><span class="op" id="3220835">)</span><br>
<span class="lineno"></span><span class="op" id="3220837">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3220840">//&nbsp;Buffered&nbsp;input.</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="3220860">//&nbsp;Reader&nbsp;implements&nbsp;buffering&nbsp;for&nbsp;an&nbsp;io.Reader&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="3220916">type</span>&nbsp;<span class="ident" id="3220921">Reader</span>&nbsp;<span class="keyword" id="3220928">struct</span>&nbsp;<span class="op" id="3220935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220938">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3220951">[</span><span class="op" id="3220952">]</span><span class="builtintype" id="3220953">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220959">rd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3220972"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3220974">.</span><span class="ident" id="3220975">Reader</span>&nbsp;<span class="comment" id="3220982">//&nbsp;reader&nbsp;provided&nbsp;by&nbsp;the&nbsp;client</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221016">r</span><span class="op" id="3221017">,</span>&nbsp;<span class="ident" id="3221019">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3221029">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3221039">//&nbsp;buf&nbsp;read&nbsp;and&nbsp;write&nbsp;positions</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221072">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3221085">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221092">lastByte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3221105">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221110">lastRuneSize</span>&nbsp;<span class="builtintype" id="3221123">int</span><br>
<span class="lineno"></span><span class="op" id="3221127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3221130">const</span>&nbsp;<span class="ident" id="3221136">minReadBufferSize</span>&nbsp;<span class="op" id="3221154">=</span>&nbsp;<span class="num" id="3221156">16</span><br>
<span class="lineno"></span><span class="keyword" id="3221159">const</span>&nbsp;<span class="ident" id="3221165">maxConsecutiveEmptyReads</span>&nbsp;<span class="op" id="3221190">=</span>&nbsp;<span class="num" id="3221192">100</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3221197">//&nbsp;NewReaderSize&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;the&nbsp;specified</span><br>
<span class="lineno"></span><span class="comment" id="3221275">//&nbsp;size.&nbsp;If&nbsp;the&nbsp;argument&nbsp;io.Reader&nbsp;is&nbsp;already&nbsp;a&nbsp;Reader&nbsp;with&nbsp;large&nbsp;enough</span><br>
<span class="lineno">45</span><span class="comment" id="3221348">//&nbsp;size,&nbsp;it&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="3221391">func</span>&nbsp;<span class="ident" id="3221396">NewReaderSize</span><span class="op" id="3221409">(</span><span class="ident" id="3221410">rd</span>&nbsp;<span class="ident" id="3221413"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3221415">.</span><span class="ident" id="3221416">Reader</span><span class="op" id="3221422">,</span>&nbsp;<span class="ident" id="3221424">size</span>&nbsp;<span class="builtintype" id="3221429">int</span><span class="op" id="3221432">)</span>&nbsp;<span class="op" id="3221434">*</span><span class="ident" id="3221435"><a href="/bufio/bufio.go.html#3220921">Reader</a></span>&nbsp;<span class="op" id="3221442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3221445">//&nbsp;Is&nbsp;it&nbsp;already&nbsp;a&nbsp;Reader?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221473">b</span><span class="op" id="3221474">,</span>&nbsp;<span class="ident" id="3221476">ok</span>&nbsp;<span class="op" id="3221479">:=</span>&nbsp;<span class="ident" id="3221482"><a href="/bufio/bufio.go.html#3221410">rd</a></span><span class="op" id="3221484">.</span><span class="op" id="3221485">(</span><span class="op" id="3221486">*</span><span class="ident" id="3221487"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3221493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221496">if</span>&nbsp;<span class="ident" id="3221499"><a href="/bufio/bufio.go.html#3221476">ok</a></span>&nbsp;<span class="op" id="3221502">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3221505">len</span><span class="op" id="3221508">(</span><span class="ident" id="3221509"><a href="/bufio/bufio.go.html#3221473">b</a></span><span class="op" id="3221510">.</span><span class="ident" id="3221511">buf</span><span class="op" id="3221514">)</span>&nbsp;<span class="op" id="3221516">&gt;=</span>&nbsp;<span class="ident" id="3221519"><a href="/bufio/bufio.go.html#3221424">size</a></span>&nbsp;<span class="op" id="3221524">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221528">return</span>&nbsp;<span class="ident" id="3221535"><a href="/bufio/bufio.go.html#3221473">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221541">if</span>&nbsp;<span class="ident" id="3221544"><a href="/bufio/bufio.go.html#3221424">size</a></span>&nbsp;<span class="op" id="3221549">&lt;</span>&nbsp;<span class="ident" id="3221551"><a href="/bufio/bufio.go.html#3221136">minReadBufferSize</a></span>&nbsp;<span class="op" id="3221569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221573"><a href="/bufio/bufio.go.html#3221424">size</a></span>&nbsp;<span class="op" id="3221578">=</span>&nbsp;<span class="ident" id="3221580"><a href="/bufio/bufio.go.html#3221136">minReadBufferSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221599">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221602">r</span>&nbsp;<span class="op" id="3221604">:=</span>&nbsp;<span class="builtinfunc" id="3221607">new</span><span class="op" id="3221610">(</span><span class="ident" id="3221611"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3221617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221620"><a href="/bufio/bufio.go.html#3221602">r</a></span><span class="op" id="3221621">.</span><span class="ident" id="3221622">reset</span><span class="op" id="3221627">(</span><span class="builtinfunc" id="3221628">make</span><span class="op" id="3221632">(</span><span class="op" id="3221633">[</span><span class="op" id="3221634">]</span><span class="builtintype" id="3221635">byte</span><span class="op" id="3221639">,</span>&nbsp;<span class="ident" id="3221641"><a href="/bufio/bufio.go.html#3221424">size</a></span><span class="op" id="3221645">)</span><span class="op" id="3221646">,</span>&nbsp;<span class="ident" id="3221648"><a href="/bufio/bufio.go.html#3221410">rd</a></span><span class="op" id="3221650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221653">return</span>&nbsp;<span class="ident" id="3221660"><a href="/bufio/bufio.go.html#3221602">r</a></span><br>
<span class="lineno"></span><span class="op" id="3221662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3221665">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;the&nbsp;default&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="3221734">func</span>&nbsp;<span class="ident" id="3221739">NewReader</span><span class="op" id="3221748">(</span><span class="ident" id="3221749">rd</span>&nbsp;<span class="ident" id="3221752"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3221754">.</span><span class="ident" id="3221755">Reader</span><span class="op" id="3221761">)</span>&nbsp;<span class="op" id="3221763">*</span><span class="ident" id="3221764"><a href="/bufio/bufio.go.html#3220921">Reader</a></span>&nbsp;<span class="op" id="3221771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221774">return</span>&nbsp;<span class="ident" id="3221781"><a href="/bufio/bufio.go.html#3221396">NewReaderSize</a></span><span class="op" id="3221794">(</span><span class="ident" id="3221795"><a href="/bufio/bufio.go.html#3221749">rd</a></span><span class="op" id="3221797">,</span>&nbsp;<span class="ident" id="3221799"><a href="/bufio/bufio.go.html#3220547">defaultBufSize</a></span><span class="op" id="3221813">)</span><br>
<span class="lineno"></span><span class="op" id="3221815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="3221818">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data,&nbsp;resets&nbsp;all&nbsp;state,&nbsp;and&nbsp;switches</span><br>
<span class="lineno"></span><span class="comment" id="3221886">//&nbsp;the&nbsp;buffered&nbsp;reader&nbsp;to&nbsp;read&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3221925">func</span>&nbsp;<span class="op" id="3221930">(</span><span class="ident" id="3221931">b</span>&nbsp;<span class="op" id="3221933">*</span><span class="ident" id="3221934"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3221940">)</span>&nbsp;<span class="ident" id="3221942">Reset</span><span class="op" id="3221947">(</span><span class="ident" id="3221948">r</span>&nbsp;<span class="ident" id="3221950"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3221952">.</span><span class="ident" id="3221953">Reader</span><span class="op" id="3221959">)</span>&nbsp;<span class="op" id="3221961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221964"><a href="/bufio/bufio.go.html#3221931">b</a></span><span class="op" id="3221965">.</span><span class="ident" id="3221966">reset</span><span class="op" id="3221971">(</span><span class="ident" id="3221972"><a href="/bufio/bufio.go.html#3221931">b</a></span><span class="op" id="3221973">.</span><span class="ident" id="3221974">buf</span><span class="op" id="3221977">,</span>&nbsp;<span class="ident" id="3221979"><a href="/bufio/bufio.go.html#3221948">r</a></span><span class="op" id="3221980">)</span><br>
<span class="lineno"></span><span class="op" id="3221982">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="3221985">func</span>&nbsp;<span class="op" id="3221990">(</span><span class="ident" id="3221991">b</span>&nbsp;<span class="op" id="3221993">*</span><span class="ident" id="3221994"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3222000">)</span>&nbsp;<span class="ident" id="3222002">reset</span><span class="op" id="3222007">(</span><span class="ident" id="3222008">buf</span>&nbsp;<span class="op" id="3222012">[</span><span class="op" id="3222013">]</span><span class="builtintype" id="3222014">byte</span><span class="op" id="3222018">,</span>&nbsp;<span class="ident" id="3222020">r</span>&nbsp;<span class="ident" id="3222022"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3222024">.</span><span class="ident" id="3222025">Reader</span><span class="op" id="3222031">)</span>&nbsp;<span class="op" id="3222033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222036">*</span><span class="ident" id="3222037"><a href="/bufio/bufio.go.html#3221991">b</a></span>&nbsp;<span class="op" id="3222039">=</span>&nbsp;<span class="ident" id="3222041"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3222047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222051">buf</span><span class="op" id="3222054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3222065"><a href="/bufio/bufio.go.html#3222008">buf</a></span><span class="op" id="3222068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222072">rd</span><span class="op" id="3222074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3222086"><a href="/bufio/bufio.go.html#3222020">r</a></span><span class="op" id="3222087">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222091">lastByte</span><span class="op" id="3222099">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3222105">-</span><span class="num" id="3222106">1</span><span class="op" id="3222107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222111">lastRuneSize</span><span class="op" id="3222123">:</span>&nbsp;<span class="op" id="3222125">-</span><span class="num" id="3222126">1</span><span class="op" id="3222127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222130">}</span><br>
<span class="lineno"></span><span class="op" id="3222132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="3222135">var</span>&nbsp;<span class="ident" id="3222139">errNegativeRead</span>&nbsp;<span class="op" id="3222155">=</span>&nbsp;<span class="ident" id="3222157"><a href="/bufio/bufio.go.html#3220504">errors</a></span><span class="op" id="3222163">.</span><span class="ident" id="3222164">New</span><span class="op" id="3222167">(</span><span class="string" id="3222168">&#34;bufio:&nbsp;reader&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Read&#34;</span><span class="op" id="3222217">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3222220">//&nbsp;fill&nbsp;reads&nbsp;a&nbsp;new&nbsp;chunk&nbsp;into&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3222263">func</span>&nbsp;<span class="op" id="3222268">(</span><span class="ident" id="3222269">b</span>&nbsp;<span class="op" id="3222271">*</span><span class="ident" id="3222272"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3222278">)</span>&nbsp;<span class="ident" id="3222280">fill</span><span class="op" id="3222284">(</span><span class="op" id="3222285">)</span>&nbsp;<span class="op" id="3222287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3222290">//&nbsp;Slide&nbsp;existing&nbsp;data&nbsp;to&nbsp;beginning.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222328">if</span>&nbsp;<span class="ident" id="3222331"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222332">.</span><span class="ident" id="3222333">r</span>&nbsp;<span class="op" id="3222335">&gt;</span>&nbsp;<span class="num" id="3222337">0</span>&nbsp;<span class="op" id="3222339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3222343">copy</span><span class="op" id="3222347">(</span><span class="ident" id="3222348"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222349">.</span><span class="ident" id="3222350">buf</span><span class="op" id="3222353">,</span>&nbsp;<span class="ident" id="3222355"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222356">.</span><span class="ident" id="3222357">buf</span><span class="op" id="3222360">[</span><span class="ident" id="3222361"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222362">.</span><span class="ident" id="3222363">r</span><span class="op" id="3222364">:</span><span class="ident" id="3222365"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222366">.</span><span class="ident" id="3222367">w</span><span class="op" id="3222368">]</span><span class="op" id="3222369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222373"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222374">.</span><span class="ident" id="3222375">w</span>&nbsp;<span class="op" id="3222377">-=</span>&nbsp;<span class="ident" id="3222380"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222381">.</span><span class="ident" id="3222382">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222386"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222387">.</span><span class="ident" id="3222388">r</span>&nbsp;<span class="op" id="3222390">=</span>&nbsp;<span class="num" id="3222392">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222395">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222399">if</span>&nbsp;<span class="ident" id="3222402"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222403">.</span><span class="ident" id="3222404">w</span>&nbsp;<span class="op" id="3222406">&gt;=</span>&nbsp;<span class="builtinfunc" id="3222409">len</span><span class="op" id="3222412">(</span><span class="ident" id="3222413"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222414">.</span><span class="ident" id="3222415">buf</span><span class="op" id="3222418">)</span>&nbsp;<span class="op" id="3222420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3222424">panic</span><span class="op" id="3222429">(</span><span class="string" id="3222430">&#34;bufio:&nbsp;tried&nbsp;to&nbsp;fill&nbsp;full&nbsp;buffer&#34;</span><span class="op" id="3222464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3222471">//&nbsp;Read&nbsp;new&nbsp;data:&nbsp;try&nbsp;a&nbsp;limited&nbsp;number&nbsp;of&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222521">for</span>&nbsp;<span class="ident" id="3222525">i</span>&nbsp;<span class="op" id="3222527">:=</span>&nbsp;<span class="ident" id="3222530"><a href="/bufio/bufio.go.html#3221165">maxConsecutiveEmptyReads</a></span><span class="op" id="3222554">;</span>&nbsp;<span class="ident" id="3222556"><a href="/bufio/bufio.go.html#3222525">i</a></span>&nbsp;<span class="op" id="3222558">&gt;</span>&nbsp;<span class="num" id="3222560">0</span><span class="op" id="3222561">;</span>&nbsp;<span class="ident" id="3222563"><a href="/bufio/bufio.go.html#3222525">i</a></span><span class="op" id="3222564">--</span>&nbsp;<span class="op" id="3222567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222571">n</span><span class="op" id="3222572">,</span>&nbsp;<span class="ident" id="3222574">err</span>&nbsp;<span class="op" id="3222578">:=</span>&nbsp;<span class="ident" id="3222581"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222582">.</span><span class="ident" id="3222583">rd</span><span class="op" id="3222585">.</span><span class="ident" id="3222586">Read</span><span class="op" id="3222590">(</span><span class="ident" id="3222591"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222592">.</span><span class="ident" id="3222593">buf</span><span class="op" id="3222596">[</span><span class="ident" id="3222597"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222598">.</span><span class="ident" id="3222599">w</span><span class="op" id="3222600">:</span><span class="op" id="3222601">]</span><span class="op" id="3222602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222606">if</span>&nbsp;<span class="ident" id="3222609"><a href="/bufio/bufio.go.html#3222571">n</a></span>&nbsp;<span class="op" id="3222611">&lt;</span>&nbsp;<span class="num" id="3222613">0</span>&nbsp;<span class="op" id="3222615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3222620">panic</span><span class="op" id="3222625">(</span><span class="ident" id="3222626"><a href="/bufio/bufio.go.html#3222139">errNegativeRead</a></span><span class="op" id="3222641">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222649"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222650">.</span><span class="ident" id="3222651">w</span>&nbsp;<span class="op" id="3222653">+=</span>&nbsp;<span class="ident" id="3222656"><a href="/bufio/bufio.go.html#3222571">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222660">if</span>&nbsp;<span class="ident" id="3222663"><a href="/bufio/bufio.go.html#3222574">err</a></span>&nbsp;<span class="op" id="3222667">!=</span>&nbsp;<span class="ident" id="3222670">nil</span>&nbsp;<span class="op" id="3222674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222679"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222680">.</span><span class="ident" id="3222681">err</span>&nbsp;<span class="op" id="3222685">=</span>&nbsp;<span class="ident" id="3222687"><a href="/bufio/bufio.go.html#3222574">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222694">return</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222707">if</span>&nbsp;<span class="ident" id="3222710"><a href="/bufio/bufio.go.html#3222571">n</a></span>&nbsp;<span class="op" id="3222712">&gt;</span>&nbsp;<span class="num" id="3222714">0</span>&nbsp;<span class="op" id="3222716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222721">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222733">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222736"><a href="/bufio/bufio.go.html#3222269">b</a></span><span class="op" id="3222737">.</span><span class="ident" id="3222738">err</span>&nbsp;<span class="op" id="3222742">=</span>&nbsp;<span class="ident" id="3222744"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3222746">.</span><span class="ident" id="3222747">ErrNoProgress</span><br>
<span class="lineno"></span><span class="op" id="3222761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3222764">func</span>&nbsp;<span class="op" id="3222769">(</span><span class="ident" id="3222770">b</span>&nbsp;<span class="op" id="3222772">*</span><span class="ident" id="3222773"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3222779">)</span>&nbsp;<span class="ident" id="3222781">readErr</span><span class="op" id="3222788">(</span><span class="op" id="3222789">)</span>&nbsp;<span class="builtintype" id="3222791">error</span>&nbsp;<span class="op" id="3222797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222800">err</span>&nbsp;<span class="op" id="3222804">:=</span>&nbsp;<span class="ident" id="3222807"><a href="/bufio/bufio.go.html#3222770">b</a></span><span class="op" id="3222808">.</span><span class="ident" id="3222809">err</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222814"><a href="/bufio/bufio.go.html#3222770">b</a></span><span class="op" id="3222815">.</span><span class="ident" id="3222816">err</span>&nbsp;<span class="op" id="3222820">=</span>&nbsp;<span class="ident" id="3222822">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222827">return</span>&nbsp;<span class="ident" id="3222834"><a href="/bufio/bufio.go.html#3222800">err</a></span><br>
<span class="lineno"></span><span class="op" id="3222838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3222841">//&nbsp;Peek&nbsp;returns&nbsp;the&nbsp;next&nbsp;n&nbsp;bytes&nbsp;without&nbsp;advancing&nbsp;the&nbsp;reader.&nbsp;The&nbsp;bytes&nbsp;stop</span><br>
<span class="lineno">120</span><span class="comment" id="3222919">//&nbsp;being&nbsp;valid&nbsp;at&nbsp;the&nbsp;next&nbsp;read&nbsp;call.&nbsp;If&nbsp;Peek&nbsp;returns&nbsp;fewer&nbsp;than&nbsp;n&nbsp;bytes,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3222996">//&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining&nbsp;why&nbsp;the&nbsp;read&nbsp;is&nbsp;short.&nbsp;The&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3223068">//&nbsp;ErrBufferFull&nbsp;if&nbsp;n&nbsp;is&nbsp;larger&nbsp;than&nbsp;b&#39;s&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="3223122">func</span>&nbsp;<span class="op" id="3223127">(</span><span class="ident" id="3223128">b</span>&nbsp;<span class="op" id="3223130">*</span><span class="ident" id="3223131"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3223137">)</span>&nbsp;<span class="ident" id="3223139">Peek</span><span class="op" id="3223143">(</span><span class="ident" id="3223144">n</span>&nbsp;<span class="builtintype" id="3223146">int</span><span class="op" id="3223149">)</span>&nbsp;<span class="op" id="3223151">(</span><span class="op" id="3223152">[</span><span class="op" id="3223153">]</span><span class="builtintype" id="3223154">byte</span><span class="op" id="3223158">,</span>&nbsp;<span class="builtintype" id="3223160">error</span><span class="op" id="3223165">)</span>&nbsp;<span class="op" id="3223167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223170">if</span>&nbsp;<span class="ident" id="3223173"><a href="/bufio/bufio.go.html#3223144">n</a></span>&nbsp;<span class="op" id="3223175">&lt;</span>&nbsp;<span class="num" id="3223177">0</span>&nbsp;<span class="op" id="3223179">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223183">return</span>&nbsp;<span class="ident" id="3223190">nil</span><span class="op" id="3223193">,</span>&nbsp;<span class="ident" id="3223195"><a href="/bufio/bufio.go.html#3220778">ErrNegativeCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223216">if</span>&nbsp;<span class="ident" id="3223219"><a href="/bufio/bufio.go.html#3223144">n</a></span>&nbsp;<span class="op" id="3223221">&gt;</span>&nbsp;<span class="builtinfunc" id="3223223">len</span><span class="op" id="3223226">(</span><span class="ident" id="3223227"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223228">.</span><span class="ident" id="3223229">buf</span><span class="op" id="3223232">)</span>&nbsp;<span class="op" id="3223234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223238">return</span>&nbsp;<span class="ident" id="3223245">nil</span><span class="op" id="3223248">,</span>&nbsp;<span class="ident" id="3223250"><a href="/bufio/bufio.go.html#3220721">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223265">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3223268">//&nbsp;0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(b.buf)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223293">for</span>&nbsp;<span class="ident" id="3223297"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223298">.</span><span class="ident" id="3223299">w</span><span class="op" id="3223300">-</span><span class="ident" id="3223301"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223302">.</span><span class="ident" id="3223303">r</span>&nbsp;<span class="op" id="3223305">&lt;</span>&nbsp;<span class="ident" id="3223307"><a href="/bufio/bufio.go.html#3223144">n</a></span>&nbsp;<span class="op" id="3223309">&amp;&amp;</span>&nbsp;<span class="ident" id="3223312"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223313">.</span><span class="ident" id="3223314">err</span>&nbsp;<span class="op" id="3223318">==</span>&nbsp;<span class="ident" id="3223321">nil</span>&nbsp;<span class="op" id="3223325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223329"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223330">.</span><span class="ident" id="3223331">fill</span><span class="op" id="3223335">(</span><span class="op" id="3223336">)</span>&nbsp;<span class="comment" id="3223338">//&nbsp;b.w-b.r&nbsp;&lt;&nbsp;len(b.buf)&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223389">var</span>&nbsp;<span class="ident" id="3223393">err</span>&nbsp;<span class="builtintype" id="3223397">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223404">if</span>&nbsp;<span class="ident" id="3223407">avail</span>&nbsp;<span class="op" id="3223413">:=</span>&nbsp;<span class="ident" id="3223416"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223417">.</span><span class="ident" id="3223418">w</span>&nbsp;<span class="op" id="3223420">-</span>&nbsp;<span class="ident" id="3223422"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223423">.</span><span class="ident" id="3223424">r</span><span class="op" id="3223425">;</span>&nbsp;<span class="ident" id="3223427"><a href="/bufio/bufio.go.html#3223407">avail</a></span>&nbsp;<span class="op" id="3223433">&lt;</span>&nbsp;<span class="ident" id="3223435"><a href="/bufio/bufio.go.html#3223144">n</a></span>&nbsp;<span class="op" id="3223437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3223441">//&nbsp;not&nbsp;enough&nbsp;data&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223472"><a href="/bufio/bufio.go.html#3223144">n</a></span>&nbsp;<span class="op" id="3223474">=</span>&nbsp;<span class="ident" id="3223476"><a href="/bufio/bufio.go.html#3223407">avail</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223484"><a href="/bufio/bufio.go.html#3223393">err</a></span>&nbsp;<span class="op" id="3223488">=</span>&nbsp;<span class="ident" id="3223490"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223491">.</span><span class="ident" id="3223492">readErr</span><span class="op" id="3223499">(</span><span class="op" id="3223500">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223504">if</span>&nbsp;<span class="ident" id="3223507"><a href="/bufio/bufio.go.html#3223393">err</a></span>&nbsp;<span class="op" id="3223511">==</span>&nbsp;<span class="ident" id="3223514">nil</span>&nbsp;<span class="op" id="3223518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223523"><a href="/bufio/bufio.go.html#3223393">err</a></span>&nbsp;<span class="op" id="3223527">=</span>&nbsp;<span class="ident" id="3223529"><a href="/bufio/bufio.go.html#3220721">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223551">return</span>&nbsp;<span class="ident" id="3223558"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223559">.</span><span class="ident" id="3223560">buf</span><span class="op" id="3223563">[</span><span class="ident" id="3223564"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223565">.</span><span class="ident" id="3223566">r</span>&nbsp;<span class="op" id="3223568">:</span>&nbsp;<span class="ident" id="3223570"><a href="/bufio/bufio.go.html#3223128">b</a></span><span class="op" id="3223571">.</span><span class="ident" id="3223572">r</span><span class="op" id="3223573">+</span><span class="ident" id="3223574"><a href="/bufio/bufio.go.html#3223144">n</a></span><span class="op" id="3223575">]</span><span class="op" id="3223576">,</span>&nbsp;<span class="ident" id="3223578"><a href="/bufio/bufio.go.html#3223393">err</a></span><br>
<span class="lineno">145</span><span class="op" id="3223582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3223585">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;into&nbsp;p.</span><br>
<span class="lineno"></span><span class="comment" id="3223612">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;into&nbsp;p.</span><br>
<span class="lineno"></span><span class="comment" id="3223659">//&nbsp;It&nbsp;calls&nbsp;Read&nbsp;at&nbsp;most&nbsp;once&nbsp;on&nbsp;the&nbsp;underlying&nbsp;Reader,</span><br>
<span class="lineno">150</span><span class="comment" id="3223715">//&nbsp;hence&nbsp;n&nbsp;may&nbsp;be&nbsp;less&nbsp;than&nbsp;len(p).</span><br>
<span class="lineno"></span><span class="comment" id="3223751">//&nbsp;At&nbsp;EOF,&nbsp;the&nbsp;count&nbsp;will&nbsp;be&nbsp;zero&nbsp;and&nbsp;err&nbsp;will&nbsp;be&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3223809">func</span>&nbsp;<span class="op" id="3223814">(</span><span class="ident" id="3223815">b</span>&nbsp;<span class="op" id="3223817">*</span><span class="ident" id="3223818"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3223824">)</span>&nbsp;<span class="ident" id="3223826">Read</span><span class="op" id="3223830">(</span><span class="ident" id="3223831">p</span>&nbsp;<span class="op" id="3223833">[</span><span class="op" id="3223834">]</span><span class="builtintype" id="3223835">byte</span><span class="op" id="3223839">)</span>&nbsp;<span class="op" id="3223841">(</span><span class="ident" id="3223842">n</span>&nbsp;<span class="builtintype" id="3223844">int</span><span class="op" id="3223847">,</span>&nbsp;<span class="ident" id="3223849">err</span>&nbsp;<span class="builtintype" id="3223853">error</span><span class="op" id="3223858">)</span>&nbsp;<span class="op" id="3223860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223863"><a href="/bufio/bufio.go.html#3223842">n</a></span>&nbsp;<span class="op" id="3223865">=</span>&nbsp;<span class="builtinfunc" id="3223867">len</span><span class="op" id="3223870">(</span><span class="ident" id="3223871"><a href="/bufio/bufio.go.html#3223831">p</a></span><span class="op" id="3223872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223875">if</span>&nbsp;<span class="ident" id="3223878"><a href="/bufio/bufio.go.html#3223842">n</a></span>&nbsp;<span class="op" id="3223880">==</span>&nbsp;<span class="num" id="3223883">0</span>&nbsp;<span class="op" id="3223885">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223889">return</span>&nbsp;<span class="num" id="3223896">0</span><span class="op" id="3223897">,</span>&nbsp;<span class="ident" id="3223899"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3223900">.</span><span class="ident" id="3223901">readErr</span><span class="op" id="3223908">(</span><span class="op" id="3223909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223915">if</span>&nbsp;<span class="ident" id="3223918"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3223919">.</span><span class="ident" id="3223920">r</span>&nbsp;<span class="op" id="3223922">==</span>&nbsp;<span class="ident" id="3223925"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3223926">.</span><span class="ident" id="3223927">w</span>&nbsp;<span class="op" id="3223929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223933">if</span>&nbsp;<span class="ident" id="3223936"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3223937">.</span><span class="ident" id="3223938">err</span>&nbsp;<span class="op" id="3223942">!=</span>&nbsp;<span class="ident" id="3223945">nil</span>&nbsp;<span class="op" id="3223949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223954">return</span>&nbsp;<span class="num" id="3223961">0</span><span class="op" id="3223962">,</span>&nbsp;<span class="ident" id="3223964"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3223965">.</span><span class="ident" id="3223966">readErr</span><span class="op" id="3223973">(</span><span class="op" id="3223974">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223982">if</span>&nbsp;<span class="builtinfunc" id="3223985">len</span><span class="op" id="3223988">(</span><span class="ident" id="3223989"><a href="/bufio/bufio.go.html#3223831">p</a></span><span class="op" id="3223990">)</span>&nbsp;<span class="op" id="3223992">&gt;=</span>&nbsp;<span class="builtinfunc" id="3223995">len</span><span class="op" id="3223998">(</span><span class="ident" id="3223999"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224000">.</span><span class="ident" id="3224001">buf</span><span class="op" id="3224004">)</span>&nbsp;<span class="op" id="3224006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224011">//&nbsp;Large&nbsp;read,&nbsp;empty&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224043">//&nbsp;Read&nbsp;directly&nbsp;into&nbsp;p&nbsp;to&nbsp;avoid&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224085"><a href="/bufio/bufio.go.html#3223842">n</a></span><span class="op" id="3224086">,</span>&nbsp;<span class="ident" id="3224088"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224089">.</span><span class="ident" id="3224090">err</span>&nbsp;<span class="op" id="3224094">=</span>&nbsp;<span class="ident" id="3224096"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224097">.</span><span class="ident" id="3224098">rd</span><span class="op" id="3224100">.</span><span class="ident" id="3224101">Read</span><span class="op" id="3224105">(</span><span class="ident" id="3224106"><a href="/bufio/bufio.go.html#3223831">p</a></span><span class="op" id="3224107">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224112">if</span>&nbsp;<span class="ident" id="3224115"><a href="/bufio/bufio.go.html#3223842">n</a></span>&nbsp;<span class="op" id="3224117">&lt;</span>&nbsp;<span class="num" id="3224119">0</span>&nbsp;<span class="op" id="3224121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3224127">panic</span><span class="op" id="3224132">(</span><span class="ident" id="3224133"><a href="/bufio/bufio.go.html#3222139">errNegativeRead</a></span><span class="op" id="3224148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224158">if</span>&nbsp;<span class="ident" id="3224161"><a href="/bufio/bufio.go.html#3223842">n</a></span>&nbsp;<span class="op" id="3224163">&gt;</span>&nbsp;<span class="num" id="3224165">0</span>&nbsp;<span class="op" id="3224167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224173"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224174">.</span><span class="ident" id="3224175">lastByte</span>&nbsp;<span class="op" id="3224184">=</span>&nbsp;<span class="builtintype" id="3224186">int</span><span class="op" id="3224189">(</span><span class="ident" id="3224190"><a href="/bufio/bufio.go.html#3223831">p</a></span><span class="op" id="3224191">[</span><span class="ident" id="3224192"><a href="/bufio/bufio.go.html#3223842">n</a></span><span class="op" id="3224193">-</span><span class="num" id="3224194">1</span><span class="op" id="3224195">]</span><span class="op" id="3224196">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224202"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224203">.</span><span class="ident" id="3224204">lastRuneSize</span>&nbsp;<span class="op" id="3224217">=</span>&nbsp;<span class="op" id="3224219">-</span><span class="num" id="3224220">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224230">return</span>&nbsp;<span class="ident" id="3224237"><a href="/bufio/bufio.go.html#3223842">n</a></span><span class="op" id="3224238">,</span>&nbsp;<span class="ident" id="3224240"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224241">.</span><span class="ident" id="3224242">readErr</span><span class="op" id="3224249">(</span><span class="op" id="3224250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224258"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224259">.</span><span class="ident" id="3224260">fill</span><span class="op" id="3224264">(</span><span class="op" id="3224265">)</span>&nbsp;<span class="comment" id="3224267">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224288">if</span>&nbsp;<span class="ident" id="3224291"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224292">.</span><span class="ident" id="3224293">r</span>&nbsp;<span class="op" id="3224295">==</span>&nbsp;<span class="ident" id="3224298"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224299">.</span><span class="ident" id="3224300">w</span>&nbsp;<span class="op" id="3224302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224307">return</span>&nbsp;<span class="num" id="3224314">0</span><span class="op" id="3224315">,</span>&nbsp;<span class="ident" id="3224317"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224318">.</span><span class="ident" id="3224319">readErr</span><span class="op" id="3224326">(</span><span class="op" id="3224327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224338">//&nbsp;copy&nbsp;as&nbsp;much&nbsp;as&nbsp;we&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224365"><a href="/bufio/bufio.go.html#3223842">n</a></span>&nbsp;<span class="op" id="3224367">=</span>&nbsp;<span class="builtinfunc" id="3224369">copy</span><span class="op" id="3224373">(</span><span class="ident" id="3224374"><a href="/bufio/bufio.go.html#3223831">p</a></span><span class="op" id="3224375">,</span>&nbsp;<span class="ident" id="3224377"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224378">.</span><span class="ident" id="3224379">buf</span><span class="op" id="3224382">[</span><span class="ident" id="3224383"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224384">.</span><span class="ident" id="3224385">r</span><span class="op" id="3224386">:</span><span class="ident" id="3224387"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224388">.</span><span class="ident" id="3224389">w</span><span class="op" id="3224390">]</span><span class="op" id="3224391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224394"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224395">.</span><span class="ident" id="3224396">r</span>&nbsp;<span class="op" id="3224398">+=</span>&nbsp;<span class="ident" id="3224401"><a href="/bufio/bufio.go.html#3223842">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224404"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224405">.</span><span class="ident" id="3224406">lastByte</span>&nbsp;<span class="op" id="3224415">=</span>&nbsp;<span class="builtintype" id="3224417">int</span><span class="op" id="3224420">(</span><span class="ident" id="3224421"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224422">.</span><span class="ident" id="3224423">buf</span><span class="op" id="3224426">[</span><span class="ident" id="3224427"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224428">.</span><span class="ident" id="3224429">r</span><span class="op" id="3224430">-</span><span class="num" id="3224431">1</span><span class="op" id="3224432">]</span><span class="op" id="3224433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224436"><a href="/bufio/bufio.go.html#3223815">b</a></span><span class="op" id="3224437">.</span><span class="ident" id="3224438">lastRuneSize</span>&nbsp;<span class="op" id="3224451">=</span>&nbsp;<span class="op" id="3224453">-</span><span class="num" id="3224454">1</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224457">return</span>&nbsp;<span class="ident" id="3224464"><a href="/bufio/bufio.go.html#3223842">n</a></span><span class="op" id="3224465">,</span>&nbsp;<span class="ident" id="3224467">nil</span><br>
<span class="lineno"></span><span class="op" id="3224471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3224474">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;a&nbsp;single&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3224519">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">190</span><span class="keyword" id="3224565">func</span>&nbsp;<span class="op" id="3224570">(</span><span class="ident" id="3224571">b</span>&nbsp;<span class="op" id="3224573">*</span><span class="ident" id="3224574"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3224580">)</span>&nbsp;<span class="ident" id="3224582">ReadByte</span><span class="op" id="3224590">(</span><span class="op" id="3224591">)</span>&nbsp;<span class="op" id="3224593">(</span><span class="ident" id="3224594">c</span>&nbsp;<span class="builtintype" id="3224596">byte</span><span class="op" id="3224600">,</span>&nbsp;<span class="ident" id="3224602">err</span>&nbsp;<span class="builtintype" id="3224606">error</span><span class="op" id="3224611">)</span>&nbsp;<span class="op" id="3224613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224616"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224617">.</span><span class="ident" id="3224618">lastRuneSize</span>&nbsp;<span class="op" id="3224631">=</span>&nbsp;<span class="op" id="3224633">-</span><span class="num" id="3224634">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224637">for</span>&nbsp;<span class="ident" id="3224641"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224642">.</span><span class="ident" id="3224643">r</span>&nbsp;<span class="op" id="3224645">==</span>&nbsp;<span class="ident" id="3224648"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224649">.</span><span class="ident" id="3224650">w</span>&nbsp;<span class="op" id="3224652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224656">if</span>&nbsp;<span class="ident" id="3224659"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224660">.</span><span class="ident" id="3224661">err</span>&nbsp;<span class="op" id="3224665">!=</span>&nbsp;<span class="ident" id="3224668">nil</span>&nbsp;<span class="op" id="3224672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224677">return</span>&nbsp;<span class="num" id="3224684">0</span><span class="op" id="3224685">,</span>&nbsp;<span class="ident" id="3224687"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224688">.</span><span class="ident" id="3224689">readErr</span><span class="op" id="3224696">(</span><span class="op" id="3224697">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224705"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224706">.</span><span class="ident" id="3224707">fill</span><span class="op" id="3224711">(</span><span class="op" id="3224712">)</span>&nbsp;<span class="comment" id="3224714">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224737"><a href="/bufio/bufio.go.html#3224594">c</a></span>&nbsp;<span class="op" id="3224739">=</span>&nbsp;<span class="ident" id="3224741"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224742">.</span><span class="ident" id="3224743">buf</span><span class="op" id="3224746">[</span><span class="ident" id="3224747"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224748">.</span><span class="ident" id="3224749">r</span><span class="op" id="3224750">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224753"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224754">.</span><span class="ident" id="3224755">r</span><span class="op" id="3224756">++</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224760"><a href="/bufio/bufio.go.html#3224571">b</a></span><span class="op" id="3224761">.</span><span class="ident" id="3224762">lastByte</span>&nbsp;<span class="op" id="3224771">=</span>&nbsp;<span class="builtintype" id="3224773">int</span><span class="op" id="3224776">(</span><span class="ident" id="3224777"><a href="/bufio/bufio.go.html#3224594">c</a></span><span class="op" id="3224778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224781">return</span>&nbsp;<span class="ident" id="3224788"><a href="/bufio/bufio.go.html#3224594">c</a></span><span class="op" id="3224789">,</span>&nbsp;<span class="ident" id="3224791">nil</span><br>
<span class="lineno"></span><span class="op" id="3224795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3224798">//&nbsp;UnreadByte&nbsp;unreads&nbsp;the&nbsp;last&nbsp;byte.&nbsp;&nbsp;Only&nbsp;the&nbsp;most&nbsp;recently&nbsp;read&nbsp;byte&nbsp;can&nbsp;be&nbsp;unread.</span><br>
<span class="lineno">205</span><span class="keyword" id="3224884">func</span>&nbsp;<span class="op" id="3224889">(</span><span class="ident" id="3224890">b</span>&nbsp;<span class="op" id="3224892">*</span><span class="ident" id="3224893"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3224899">)</span>&nbsp;<span class="ident" id="3224901">UnreadByte</span><span class="op" id="3224911">(</span><span class="op" id="3224912">)</span>&nbsp;<span class="builtintype" id="3224914">error</span>&nbsp;<span class="op" id="3224920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224923">if</span>&nbsp;<span class="ident" id="3224926"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3224927">.</span><span class="ident" id="3224928">lastByte</span>&nbsp;<span class="op" id="3224937">&lt;</span>&nbsp;<span class="num" id="3224939">0</span>&nbsp;<span class="op" id="3224941">||</span>&nbsp;<span class="ident" id="3224944"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3224945">.</span><span class="ident" id="3224946">r</span>&nbsp;<span class="op" id="3224948">==</span>&nbsp;<span class="num" id="3224951">0</span>&nbsp;<span class="op" id="3224953">&amp;&amp;</span>&nbsp;<span class="ident" id="3224956"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3224957">.</span><span class="ident" id="3224958">w</span>&nbsp;<span class="op" id="3224960">&gt;</span>&nbsp;<span class="num" id="3224962">0</span>&nbsp;<span class="op" id="3224964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224968">return</span>&nbsp;<span class="ident" id="3224975"><a href="/bufio/bufio.go.html#3220579">ErrInvalidUnreadByte</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3225000">//&nbsp;b.r&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;b.w&nbsp;==&nbsp;0</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225024">if</span>&nbsp;<span class="ident" id="3225027"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225028">.</span><span class="ident" id="3225029">r</span>&nbsp;<span class="op" id="3225031">&gt;</span>&nbsp;<span class="num" id="3225033">0</span>&nbsp;<span class="op" id="3225035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225039"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225040">.</span><span class="ident" id="3225041">r</span><span class="op" id="3225042">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3225046">}</span>&nbsp;<span class="keyword" id="3225048">else</span>&nbsp;<span class="op" id="3225053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3225057">//&nbsp;b.r&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;b.w&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225083"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225084">.</span><span class="ident" id="3225085">w</span>&nbsp;<span class="op" id="3225087">=</span>&nbsp;<span class="num" id="3225089">1</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3225092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225095"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225096">.</span><span class="ident" id="3225097">buf</span><span class="op" id="3225100">[</span><span class="ident" id="3225101"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225102">.</span><span class="ident" id="3225103">r</span><span class="op" id="3225104">]</span>&nbsp;<span class="op" id="3225106">=</span>&nbsp;<span class="builtintype" id="3225108">byte</span><span class="op" id="3225112">(</span><span class="ident" id="3225113"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225114">.</span><span class="ident" id="3225115">lastByte</span><span class="op" id="3225123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225126"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225127">.</span><span class="ident" id="3225128">lastByte</span>&nbsp;<span class="op" id="3225137">=</span>&nbsp;<span class="op" id="3225139">-</span><span class="num" id="3225140">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225143"><a href="/bufio/bufio.go.html#3224890">b</a></span><span class="op" id="3225144">.</span><span class="ident" id="3225145">lastRuneSize</span>&nbsp;<span class="op" id="3225158">=</span>&nbsp;<span class="op" id="3225160">-</span><span class="num" id="3225161">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225164">return</span>&nbsp;<span class="ident" id="3225171">nil</span><br>
<span class="lineno">220</span><span class="op" id="3225175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3225178">//&nbsp;ReadRune&nbsp;reads&nbsp;a&nbsp;single&nbsp;UTF-8&nbsp;encoded&nbsp;Unicode&nbsp;character&nbsp;and&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3225253">//&nbsp;rune&nbsp;and&nbsp;its&nbsp;size&nbsp;in&nbsp;bytes.&nbsp;If&nbsp;the&nbsp;encoded&nbsp;rune&nbsp;is&nbsp;invalid,&nbsp;it&nbsp;consumes&nbsp;one&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="3225337">//&nbsp;and&nbsp;returns&nbsp;unicode.ReplacementChar&nbsp;(U+FFFD)&nbsp;with&nbsp;a&nbsp;size&nbsp;of&nbsp;1.</span><br>
<span class="lineno">225</span><span class="keyword" id="3225403">func</span>&nbsp;<span class="op" id="3225408">(</span><span class="ident" id="3225409">b</span>&nbsp;<span class="op" id="3225411">*</span><span class="ident" id="3225412"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3225418">)</span>&nbsp;<span class="ident" id="3225420">ReadRune</span><span class="op" id="3225428">(</span><span class="op" id="3225429">)</span>&nbsp;<span class="op" id="3225431">(</span><span class="ident" id="3225432">r</span>&nbsp;<span class="builtintype" id="3225434">rune</span><span class="op" id="3225438">,</span>&nbsp;<span class="ident" id="3225440">size</span>&nbsp;<span class="builtintype" id="3225445">int</span><span class="op" id="3225448">,</span>&nbsp;<span class="ident" id="3225450">err</span>&nbsp;<span class="builtintype" id="3225454">error</span><span class="op" id="3225459">)</span>&nbsp;<span class="op" id="3225461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225464">for</span>&nbsp;<span class="ident" id="3225468"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225469">.</span><span class="ident" id="3225470">r</span><span class="op" id="3225471">+</span><span class="ident" id="3225472"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3225476">.</span><span class="ident" id="3225477">UTFMax</span>&nbsp;<span class="op" id="3225484">&gt;</span>&nbsp;<span class="ident" id="3225486"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225487">.</span><span class="ident" id="3225488">w</span>&nbsp;<span class="op" id="3225490">&amp;&amp;</span>&nbsp;<span class="op" id="3225493">!</span><span class="ident" id="3225494"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3225498">.</span><span class="ident" id="3225499">FullRune</span><span class="op" id="3225507">(</span><span class="ident" id="3225508"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225509">.</span><span class="ident" id="3225510">buf</span><span class="op" id="3225513">[</span><span class="ident" id="3225514"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225515">.</span><span class="ident" id="3225516">r</span><span class="op" id="3225517">:</span><span class="ident" id="3225518"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225519">.</span><span class="ident" id="3225520">w</span><span class="op" id="3225521">]</span><span class="op" id="3225522">)</span>&nbsp;<span class="op" id="3225524">&amp;&amp;</span>&nbsp;<span class="ident" id="3225527"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225528">.</span><span class="ident" id="3225529">err</span>&nbsp;<span class="op" id="3225533">==</span>&nbsp;<span class="ident" id="3225536">nil</span>&nbsp;<span class="op" id="3225540">&amp;&amp;</span>&nbsp;<span class="ident" id="3225543"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225544">.</span><span class="ident" id="3225545">w</span><span class="op" id="3225546">-</span><span class="ident" id="3225547"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225548">.</span><span class="ident" id="3225549">r</span>&nbsp;<span class="op" id="3225551">&lt;</span>&nbsp;<span class="builtinfunc" id="3225553">len</span><span class="op" id="3225556">(</span><span class="ident" id="3225557"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225558">.</span><span class="ident" id="3225559">buf</span><span class="op" id="3225562">)</span>&nbsp;<span class="op" id="3225564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225568"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225569">.</span><span class="ident" id="3225570">fill</span><span class="op" id="3225574">(</span><span class="op" id="3225575">)</span>&nbsp;<span class="comment" id="3225577">//&nbsp;b.w-b.r&nbsp;&lt;&nbsp;len(buf)&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3225622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225625"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225626">.</span><span class="ident" id="3225627">lastRuneSize</span>&nbsp;<span class="op" id="3225640">=</span>&nbsp;<span class="op" id="3225642">-</span><span class="num" id="3225643">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225646">if</span>&nbsp;<span class="ident" id="3225649"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225650">.</span><span class="ident" id="3225651">r</span>&nbsp;<span class="op" id="3225653">==</span>&nbsp;<span class="ident" id="3225656"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225657">.</span><span class="ident" id="3225658">w</span>&nbsp;<span class="op" id="3225660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225664">return</span>&nbsp;<span class="num" id="3225671">0</span><span class="op" id="3225672">,</span>&nbsp;<span class="num" id="3225674">0</span><span class="op" id="3225675">,</span>&nbsp;<span class="ident" id="3225677"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225678">.</span><span class="ident" id="3225679">readErr</span><span class="op" id="3225686">(</span><span class="op" id="3225687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3225690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225693"><a href="/bufio/bufio.go.html#3225432">r</a></span><span class="op" id="3225694">,</span>&nbsp;<span class="ident" id="3225696"><a href="/bufio/bufio.go.html#3225440">size</a></span>&nbsp;<span class="op" id="3225701">=</span>&nbsp;<span class="builtintype" id="3225703">rune</span><span class="op" id="3225707">(</span><span class="ident" id="3225708"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225709">.</span><span class="ident" id="3225710">buf</span><span class="op" id="3225713">[</span><span class="ident" id="3225714"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225715">.</span><span class="ident" id="3225716">r</span><span class="op" id="3225717">]</span><span class="op" id="3225718">)</span><span class="op" id="3225719">,</span>&nbsp;<span class="num" id="3225721">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225724">if</span>&nbsp;<span class="ident" id="3225727"><a href="/bufio/bufio.go.html#3225432">r</a></span>&nbsp;<span class="op" id="3225729">&gt;=</span>&nbsp;<span class="num" id="3225732">0x80</span>&nbsp;<span class="op" id="3225737">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225741"><a href="/bufio/bufio.go.html#3225432">r</a></span><span class="op" id="3225742">,</span>&nbsp;<span class="ident" id="3225744"><a href="/bufio/bufio.go.html#3225440">size</a></span>&nbsp;<span class="op" id="3225749">=</span>&nbsp;<span class="ident" id="3225751"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3225755">.</span><span class="ident" id="3225756">DecodeRune</span><span class="op" id="3225766">(</span><span class="ident" id="3225767"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225768">.</span><span class="ident" id="3225769">buf</span><span class="op" id="3225772">[</span><span class="ident" id="3225773"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225774">.</span><span class="ident" id="3225775">r</span><span class="op" id="3225776">:</span><span class="ident" id="3225777"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225778">.</span><span class="ident" id="3225779">w</span><span class="op" id="3225780">]</span><span class="op" id="3225781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3225784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225787"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225788">.</span><span class="ident" id="3225789">r</span>&nbsp;<span class="op" id="3225791">+=</span>&nbsp;<span class="ident" id="3225794"><a href="/bufio/bufio.go.html#3225440">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225800"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225801">.</span><span class="ident" id="3225802">lastByte</span>&nbsp;<span class="op" id="3225811">=</span>&nbsp;<span class="builtintype" id="3225813">int</span><span class="op" id="3225816">(</span><span class="ident" id="3225817"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225818">.</span><span class="ident" id="3225819">buf</span><span class="op" id="3225822">[</span><span class="ident" id="3225823"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225824">.</span><span class="ident" id="3225825">r</span><span class="op" id="3225826">-</span><span class="num" id="3225827">1</span><span class="op" id="3225828">]</span><span class="op" id="3225829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225832"><a href="/bufio/bufio.go.html#3225409">b</a></span><span class="op" id="3225833">.</span><span class="ident" id="3225834">lastRuneSize</span>&nbsp;<span class="op" id="3225847">=</span>&nbsp;<span class="ident" id="3225849"><a href="/bufio/bufio.go.html#3225440">size</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225855">return</span>&nbsp;<span class="ident" id="3225862"><a href="/bufio/bufio.go.html#3225432">r</a></span><span class="op" id="3225863">,</span>&nbsp;<span class="ident" id="3225865"><a href="/bufio/bufio.go.html#3225440">size</a></span><span class="op" id="3225869">,</span>&nbsp;<span class="ident" id="3225871">nil</span><br>
<span class="lineno"></span><span class="op" id="3225875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3225878">//&nbsp;UnreadRune&nbsp;unreads&nbsp;the&nbsp;last&nbsp;rune.&nbsp;&nbsp;If&nbsp;the&nbsp;most&nbsp;recent&nbsp;read&nbsp;operation&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="3225953">//&nbsp;the&nbsp;buffer&nbsp;was&nbsp;not&nbsp;a&nbsp;ReadRune,&nbsp;UnreadRune&nbsp;returns&nbsp;an&nbsp;error.&nbsp;&nbsp;(In&nbsp;this</span><br>
<span class="lineno">245</span><span class="comment" id="3226026">//&nbsp;regard&nbsp;it&nbsp;is&nbsp;stricter&nbsp;than&nbsp;UnreadByte,&nbsp;which&nbsp;will&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="3226100">//&nbsp;from&nbsp;any&nbsp;read&nbsp;operation.)</span><br>
<span class="lineno"></span><span class="keyword" id="3226129">func</span>&nbsp;<span class="op" id="3226134">(</span><span class="ident" id="3226135">b</span>&nbsp;<span class="op" id="3226137">*</span><span class="ident" id="3226138"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3226144">)</span>&nbsp;<span class="ident" id="3226146">UnreadRune</span><span class="op" id="3226156">(</span><span class="op" id="3226157">)</span>&nbsp;<span class="builtintype" id="3226159">error</span>&nbsp;<span class="op" id="3226165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226168">if</span>&nbsp;<span class="ident" id="3226171"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226172">.</span><span class="ident" id="3226173">lastRuneSize</span>&nbsp;<span class="op" id="3226186">&lt;</span>&nbsp;<span class="num" id="3226188">0</span>&nbsp;<span class="op" id="3226190">||</span>&nbsp;<span class="ident" id="3226193"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226194">.</span><span class="ident" id="3226195">r</span>&nbsp;<span class="op" id="3226197">&lt;</span>&nbsp;<span class="ident" id="3226199"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226200">.</span><span class="ident" id="3226201">lastRuneSize</span>&nbsp;<span class="op" id="3226214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226218">return</span>&nbsp;<span class="ident" id="3226225"><a href="/bufio/bufio.go.html#3220650">ErrInvalidUnreadRune</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226250"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226251">.</span><span class="ident" id="3226252">r</span>&nbsp;<span class="op" id="3226254">-=</span>&nbsp;<span class="ident" id="3226257"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226258">.</span><span class="ident" id="3226259">lastRuneSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226273"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226274">.</span><span class="ident" id="3226275">lastByte</span>&nbsp;<span class="op" id="3226284">=</span>&nbsp;<span class="op" id="3226286">-</span><span class="num" id="3226287">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226290"><a href="/bufio/bufio.go.html#3226135">b</a></span><span class="op" id="3226291">.</span><span class="ident" id="3226292">lastRuneSize</span>&nbsp;<span class="op" id="3226305">=</span>&nbsp;<span class="op" id="3226307">-</span><span class="num" id="3226308">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226311">return</span>&nbsp;<span class="ident" id="3226318">nil</span><br>
<span class="lineno">255</span><span class="op" id="3226322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3226325">//&nbsp;Buffered&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;that&nbsp;can&nbsp;be&nbsp;read&nbsp;from&nbsp;the&nbsp;current&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3226407">func</span>&nbsp;<span class="op" id="3226412">(</span><span class="ident" id="3226413">b</span>&nbsp;<span class="op" id="3226415">*</span><span class="ident" id="3226416"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3226422">)</span>&nbsp;<span class="ident" id="3226424">Buffered</span><span class="op" id="3226432">(</span><span class="op" id="3226433">)</span>&nbsp;<span class="builtintype" id="3226435">int</span>&nbsp;<span class="op" id="3226439">{</span>&nbsp;<span class="keyword" id="3226441">return</span>&nbsp;<span class="ident" id="3226448"><a href="/bufio/bufio.go.html#3226413">b</a></span><span class="op" id="3226449">.</span><span class="ident" id="3226450">w</span>&nbsp;<span class="op" id="3226452">-</span>&nbsp;<span class="ident" id="3226454"><a href="/bufio/bufio.go.html#3226413">b</a></span><span class="op" id="3226455">.</span><span class="ident" id="3226456">r</span>&nbsp;<span class="op" id="3226458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3226461">//&nbsp;ReadSlice&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3226530">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;pointing&nbsp;at&nbsp;the&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3226588">//&nbsp;The&nbsp;bytes&nbsp;stop&nbsp;being&nbsp;valid&nbsp;at&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3226636">//&nbsp;If&nbsp;ReadSlice&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3226700">//&nbsp;it&nbsp;returns&nbsp;all&nbsp;the&nbsp;data&nbsp;in&nbsp;the&nbsp;buffer&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">265</span><span class="comment" id="3226778">//&nbsp;ReadSlice&nbsp;fails&nbsp;with&nbsp;error&nbsp;ErrBufferFull&nbsp;if&nbsp;the&nbsp;buffer&nbsp;fills&nbsp;without&nbsp;a&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="3226859">//&nbsp;Because&nbsp;the&nbsp;data&nbsp;returned&nbsp;from&nbsp;ReadSlice&nbsp;will&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span><span class="comment" id="3226923">//&nbsp;by&nbsp;the&nbsp;next&nbsp;I/O&nbsp;operation,&nbsp;most&nbsp;clients&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3226977">//&nbsp;ReadBytes&nbsp;or&nbsp;ReadString&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="3227013">//&nbsp;ReadSlice&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;line&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;delim.</span><br>
<span class="lineno">270</span><span class="keyword" id="3227088">func</span>&nbsp;<span class="op" id="3227093">(</span><span class="ident" id="3227094">b</span>&nbsp;<span class="op" id="3227096">*</span><span class="ident" id="3227097"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3227103">)</span>&nbsp;<span class="ident" id="3227105">ReadSlice</span><span class="op" id="3227114">(</span><span class="ident" id="3227115">delim</span>&nbsp;<span class="builtintype" id="3227121">byte</span><span class="op" id="3227125">)</span>&nbsp;<span class="op" id="3227127">(</span><span class="ident" id="3227128">line</span>&nbsp;<span class="op" id="3227133">[</span><span class="op" id="3227134">]</span><span class="builtintype" id="3227135">byte</span><span class="op" id="3227139">,</span>&nbsp;<span class="ident" id="3227141">err</span>&nbsp;<span class="builtintype" id="3227145">error</span><span class="op" id="3227150">)</span>&nbsp;<span class="op" id="3227152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227155">for</span>&nbsp;<span class="op" id="3227159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227163">//&nbsp;Search&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227183">if</span>&nbsp;<span class="ident" id="3227186">i</span>&nbsp;<span class="op" id="3227188">:=</span>&nbsp;<span class="ident" id="3227191"><a href="/bufio/bufio.go.html#3220495">bytes</a></span><span class="op" id="3227196">.</span><span class="ident" id="3227197">IndexByte</span><span class="op" id="3227206">(</span><span class="ident" id="3227207"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227208">.</span><span class="ident" id="3227209">buf</span><span class="op" id="3227212">[</span><span class="ident" id="3227213"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227214">.</span><span class="ident" id="3227215">r</span><span class="op" id="3227216">:</span><span class="ident" id="3227217"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227218">.</span><span class="ident" id="3227219">w</span><span class="op" id="3227220">]</span><span class="op" id="3227221">,</span>&nbsp;<span class="ident" id="3227223"><a href="/bufio/bufio.go.html#3227115">delim</a></span><span class="op" id="3227228">)</span><span class="op" id="3227229">;</span>&nbsp;<span class="ident" id="3227231"><a href="/bufio/bufio.go.html#3227186">i</a></span>&nbsp;<span class="op" id="3227233">&gt;=</span>&nbsp;<span class="num" id="3227236">0</span>&nbsp;<span class="op" id="3227238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227243"><a href="/bufio/bufio.go.html#3227128">line</a></span>&nbsp;<span class="op" id="3227248">=</span>&nbsp;<span class="ident" id="3227250"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227251">.</span><span class="ident" id="3227252">buf</span><span class="op" id="3227255">[</span><span class="ident" id="3227256"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227257">.</span><span class="ident" id="3227258">r</span>&nbsp;<span class="op" id="3227260">:</span>&nbsp;<span class="ident" id="3227262"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227263">.</span><span class="ident" id="3227264">r</span><span class="op" id="3227265">+</span><span class="ident" id="3227266"><a href="/bufio/bufio.go.html#3227186">i</a></span><span class="op" id="3227267">+</span><span class="num" id="3227268">1</span><span class="op" id="3227269">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227274"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227275">.</span><span class="ident" id="3227276">r</span>&nbsp;<span class="op" id="3227278">+=</span>&nbsp;<span class="ident" id="3227281"><a href="/bufio/bufio.go.html#3227186">i</a></span>&nbsp;<span class="op" id="3227283">+</span>&nbsp;<span class="num" id="3227285">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227290">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227303">//&nbsp;Pending&nbsp;error?</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227323">if</span>&nbsp;<span class="ident" id="3227326"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227327">.</span><span class="ident" id="3227328">err</span>&nbsp;<span class="op" id="3227332">!=</span>&nbsp;<span class="ident" id="3227335">nil</span>&nbsp;<span class="op" id="3227339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227344"><a href="/bufio/bufio.go.html#3227128">line</a></span>&nbsp;<span class="op" id="3227349">=</span>&nbsp;<span class="ident" id="3227351"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227352">.</span><span class="ident" id="3227353">buf</span><span class="op" id="3227356">[</span><span class="ident" id="3227357"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227358">.</span><span class="ident" id="3227359">r</span><span class="op" id="3227360">:</span><span class="ident" id="3227361"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227362">.</span><span class="ident" id="3227363">w</span><span class="op" id="3227364">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227369"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227370">.</span><span class="ident" id="3227371">r</span>&nbsp;<span class="op" id="3227373">=</span>&nbsp;<span class="ident" id="3227375"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227376">.</span><span class="ident" id="3227377">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227382"><a href="/bufio/bufio.go.html#3227141">err</a></span>&nbsp;<span class="op" id="3227386">=</span>&nbsp;<span class="ident" id="3227388"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227389">.</span><span class="ident" id="3227390">readErr</span><span class="op" id="3227397">(</span><span class="op" id="3227398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227403">break</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227416">//&nbsp;Buffer&nbsp;full?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227434">if</span>&nbsp;<span class="ident" id="3227437"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227438">.</span><span class="ident" id="3227439">Buffered</span><span class="op" id="3227447">(</span><span class="op" id="3227448">)</span>&nbsp;<span class="op" id="3227450">&gt;=</span>&nbsp;<span class="builtinfunc" id="3227453">len</span><span class="op" id="3227456">(</span><span class="ident" id="3227457"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227458">.</span><span class="ident" id="3227459">buf</span><span class="op" id="3227462">)</span>&nbsp;<span class="op" id="3227464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227469"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227470">.</span><span class="ident" id="3227471">r</span>&nbsp;<span class="op" id="3227473">=</span>&nbsp;<span class="ident" id="3227475"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227476">.</span><span class="ident" id="3227477">w</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227482"><a href="/bufio/bufio.go.html#3227128">line</a></span>&nbsp;<span class="op" id="3227487">=</span>&nbsp;<span class="ident" id="3227489"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227490">.</span><span class="ident" id="3227491">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227498"><a href="/bufio/bufio.go.html#3227141">err</a></span>&nbsp;<span class="op" id="3227502">=</span>&nbsp;<span class="ident" id="3227504"><a href="/bufio/bufio.go.html#3220721">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227521">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227534"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227535">.</span><span class="ident" id="3227536">fill</span><span class="op" id="3227540">(</span><span class="op" id="3227541">)</span>&nbsp;<span class="comment" id="3227543">//&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227570">//&nbsp;Handle&nbsp;last&nbsp;byte,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227600">if</span>&nbsp;<span class="ident" id="3227603">i</span>&nbsp;<span class="op" id="3227605">:=</span>&nbsp;<span class="builtinfunc" id="3227608">len</span><span class="op" id="3227611">(</span><span class="ident" id="3227612"><a href="/bufio/bufio.go.html#3227128">line</a></span><span class="op" id="3227616">)</span>&nbsp;<span class="op" id="3227618">-</span>&nbsp;<span class="num" id="3227620">1</span><span class="op" id="3227621">;</span>&nbsp;<span class="ident" id="3227623"><a href="/bufio/bufio.go.html#3227603">i</a></span>&nbsp;<span class="op" id="3227625">&gt;=</span>&nbsp;<span class="num" id="3227628">0</span>&nbsp;<span class="op" id="3227630">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227634"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227635">.</span><span class="ident" id="3227636">lastByte</span>&nbsp;<span class="op" id="3227645">=</span>&nbsp;<span class="builtintype" id="3227647">int</span><span class="op" id="3227650">(</span><span class="ident" id="3227651"><a href="/bufio/bufio.go.html#3227128">line</a></span><span class="op" id="3227655">[</span><span class="ident" id="3227656"><a href="/bufio/bufio.go.html#3227603">i</a></span><span class="op" id="3227657">]</span><span class="op" id="3227658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227662"><a href="/bufio/bufio.go.html#3227094">b</a></span><span class="op" id="3227663">.</span><span class="ident" id="3227664">lastRuneSize</span>&nbsp;<span class="op" id="3227677">=</span>&nbsp;<span class="op" id="3227679">-</span><span class="num" id="3227680">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227687">return</span><br>
<span class="lineno">305</span><span class="op" id="3227694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3227697">//&nbsp;ReadLine&nbsp;is&nbsp;a&nbsp;low-level&nbsp;line-reading&nbsp;primitive.&nbsp;Most&nbsp;callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3227772">//&nbsp;ReadBytes(&#39;\n&#39;)&nbsp;or&nbsp;ReadString(&#39;\n&#39;)&nbsp;instead&nbsp;or&nbsp;use&nbsp;a&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="comment" id="3227837">//</span><br>
<span class="lineno">310</span><span class="comment" id="3227840">//&nbsp;ReadLine&nbsp;tries&nbsp;to&nbsp;return&nbsp;a&nbsp;single&nbsp;line,&nbsp;not&nbsp;including&nbsp;the&nbsp;end-of-line&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="3227920">//&nbsp;If&nbsp;the&nbsp;line&nbsp;was&nbsp;too&nbsp;long&nbsp;for&nbsp;the&nbsp;buffer&nbsp;then&nbsp;isPrefix&nbsp;is&nbsp;set&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3227992">//&nbsp;beginning&nbsp;of&nbsp;the&nbsp;line&nbsp;is&nbsp;returned.&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;line&nbsp;will&nbsp;be&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="3228068">//&nbsp;from&nbsp;future&nbsp;calls.&nbsp;isPrefix&nbsp;will&nbsp;be&nbsp;false&nbsp;when&nbsp;returning&nbsp;the&nbsp;last&nbsp;fragment</span><br>
<span class="lineno"></span><span class="comment" id="3228146">//&nbsp;of&nbsp;the&nbsp;line.&nbsp;The&nbsp;returned&nbsp;buffer&nbsp;is&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;call&nbsp;to</span><br>
<span class="lineno">315</span><span class="comment" id="3228219">//&nbsp;ReadLine.&nbsp;ReadLine&nbsp;either&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;line&nbsp;or&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="3228295">//&nbsp;never&nbsp;both.</span><br>
<span class="lineno"></span><span class="comment" id="3228310">//</span><br>
<span class="lineno"></span><span class="comment" id="3228313">//&nbsp;The&nbsp;text&nbsp;returned&nbsp;from&nbsp;ReadLine&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;line&nbsp;end&nbsp;(&#34;\r\n&#34;&nbsp;or&nbsp;&#34;\n&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="3228396">//&nbsp;No&nbsp;indication&nbsp;or&nbsp;error&nbsp;is&nbsp;given&nbsp;if&nbsp;the&nbsp;input&nbsp;ends&nbsp;without&nbsp;a&nbsp;final&nbsp;line&nbsp;end.</span><br>
<span class="lineno">320</span><span class="comment" id="3228475">//&nbsp;Calling&nbsp;UnreadByte&nbsp;after&nbsp;ReadLine&nbsp;will&nbsp;always&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3228550">//&nbsp;(possibly&nbsp;a&nbsp;character&nbsp;belonging&nbsp;to&nbsp;the&nbsp;line&nbsp;end)&nbsp;even&nbsp;if&nbsp;that&nbsp;byte&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3228627">//&nbsp;part&nbsp;of&nbsp;the&nbsp;line&nbsp;returned&nbsp;by&nbsp;ReadLine.</span><br>
<span class="lineno"></span><span class="keyword" id="3228669">func</span>&nbsp;<span class="op" id="3228674">(</span><span class="ident" id="3228675">b</span>&nbsp;<span class="op" id="3228677">*</span><span class="ident" id="3228678"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3228684">)</span>&nbsp;<span class="ident" id="3228686">ReadLine</span><span class="op" id="3228694">(</span><span class="op" id="3228695">)</span>&nbsp;<span class="op" id="3228697">(</span><span class="ident" id="3228698">line</span>&nbsp;<span class="op" id="3228703">[</span><span class="op" id="3228704">]</span><span class="builtintype" id="3228705">byte</span><span class="op" id="3228709">,</span>&nbsp;<span class="ident" id="3228711">isPrefix</span>&nbsp;<span class="builtintype" id="3228720">bool</span><span class="op" id="3228724">,</span>&nbsp;<span class="ident" id="3228726">err</span>&nbsp;<span class="builtintype" id="3228730">error</span><span class="op" id="3228735">)</span>&nbsp;<span class="op" id="3228737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228740"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3228744">,</span>&nbsp;<span class="ident" id="3228746"><a href="/bufio/bufio.go.html#3228726">err</a></span>&nbsp;<span class="op" id="3228750">=</span>&nbsp;<span class="ident" id="3228752"><a href="/bufio/bufio.go.html#3228675">b</a></span><span class="op" id="3228753">.</span><span class="ident" id="3228754">ReadSlice</span><span class="op" id="3228763">(</span><span class="string" id="3228764">&#39;\n&#39;</span><span class="op" id="3228768">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228771">if</span>&nbsp;<span class="ident" id="3228774"><a href="/bufio/bufio.go.html#3228726">err</a></span>&nbsp;<span class="op" id="3228778">==</span>&nbsp;<span class="ident" id="3228781"><a href="/bufio/bufio.go.html#3220721">ErrBufferFull</a></span>&nbsp;<span class="op" id="3228795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3228799">//&nbsp;Handle&nbsp;the&nbsp;case&nbsp;where&nbsp;&#34;\r\n&#34;&nbsp;straddles&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228855">if</span>&nbsp;<span class="builtinfunc" id="3228858">len</span><span class="op" id="3228861">(</span><span class="ident" id="3228862"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3228866">)</span>&nbsp;<span class="op" id="3228868">&gt;</span>&nbsp;<span class="num" id="3228870">0</span>&nbsp;<span class="op" id="3228872">&amp;&amp;</span>&nbsp;<span class="ident" id="3228875"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3228879">[</span><span class="builtinfunc" id="3228880">len</span><span class="op" id="3228883">(</span><span class="ident" id="3228884"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3228888">)</span><span class="op" id="3228889">-</span><span class="num" id="3228890">1</span><span class="op" id="3228891">]</span>&nbsp;<span class="op" id="3228893">==</span>&nbsp;<span class="string" id="3228896">&#39;\r&#39;</span>&nbsp;<span class="op" id="3228901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3228906">//&nbsp;Put&nbsp;the&nbsp;&#39;\r&#39;&nbsp;back&nbsp;on&nbsp;buf&nbsp;and&nbsp;drop&nbsp;it&nbsp;from&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3228960">//&nbsp;Let&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadLine&nbsp;check&nbsp;for&nbsp;&#34;\r\n&#34;.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229014">if</span>&nbsp;<span class="ident" id="3229017"><a href="/bufio/bufio.go.html#3228675">b</a></span><span class="op" id="3229018">.</span><span class="ident" id="3229019">r</span>&nbsp;<span class="op" id="3229021">==</span>&nbsp;<span class="num" id="3229024">0</span>&nbsp;<span class="op" id="3229026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3229032">//&nbsp;should&nbsp;be&nbsp;unreachable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3229061">panic</span><span class="op" id="3229066">(</span><span class="string" id="3229067">&#34;bufio:&nbsp;tried&nbsp;to&nbsp;rewind&nbsp;past&nbsp;start&nbsp;of&nbsp;buffer&#34;</span><span class="op" id="3229112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229122"><a href="/bufio/bufio.go.html#3228675">b</a></span><span class="op" id="3229123">.</span><span class="ident" id="3229124">r</span><span class="op" id="3229125">--</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229131"><a href="/bufio/bufio.go.html#3228698">line</a></span>&nbsp;<span class="op" id="3229136">=</span>&nbsp;<span class="ident" id="3229138"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229142">[</span><span class="op" id="3229143">:</span><span class="builtinfunc" id="3229144">len</span><span class="op" id="3229147">(</span><span class="ident" id="3229148"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229152">)</span><span class="op" id="3229153">-</span><span class="num" id="3229154">1</span><span class="op" id="3229155">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229163">return</span>&nbsp;<span class="ident" id="3229170"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229174">,</span>&nbsp;<span class="builtintype" id="3229176">true</span><span class="op" id="3229180">,</span>&nbsp;<span class="ident" id="3229182">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229191">if</span>&nbsp;<span class="builtinfunc" id="3229194">len</span><span class="op" id="3229197">(</span><span class="ident" id="3229198"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229202">)</span>&nbsp;<span class="op" id="3229204">==</span>&nbsp;<span class="num" id="3229207">0</span>&nbsp;<span class="op" id="3229209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229213">if</span>&nbsp;<span class="ident" id="3229216"><a href="/bufio/bufio.go.html#3228726">err</a></span>&nbsp;<span class="op" id="3229220">!=</span>&nbsp;<span class="ident" id="3229223">nil</span>&nbsp;<span class="op" id="3229227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229232"><a href="/bufio/bufio.go.html#3228698">line</a></span>&nbsp;<span class="op" id="3229237">=</span>&nbsp;<span class="ident" id="3229239">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229249">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229260"><a href="/bufio/bufio.go.html#3228726">err</a></span>&nbsp;<span class="op" id="3229264">=</span>&nbsp;<span class="ident" id="3229266">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229272">if</span>&nbsp;<span class="ident" id="3229275"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229279">[</span><span class="builtinfunc" id="3229280">len</span><span class="op" id="3229283">(</span><span class="ident" id="3229284"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229288">)</span><span class="op" id="3229289">-</span><span class="num" id="3229290">1</span><span class="op" id="3229291">]</span>&nbsp;<span class="op" id="3229293">==</span>&nbsp;<span class="string" id="3229296">&#39;\n&#39;</span>&nbsp;<span class="op" id="3229301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229305">drop</span>&nbsp;<span class="op" id="3229310">:=</span>&nbsp;<span class="num" id="3229313">1</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229317">if</span>&nbsp;<span class="builtinfunc" id="3229320">len</span><span class="op" id="3229323">(</span><span class="ident" id="3229324"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229328">)</span>&nbsp;<span class="op" id="3229330">&gt;</span>&nbsp;<span class="num" id="3229332">1</span>&nbsp;<span class="op" id="3229334">&amp;&amp;</span>&nbsp;<span class="ident" id="3229337"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229341">[</span><span class="builtinfunc" id="3229342">len</span><span class="op" id="3229345">(</span><span class="ident" id="3229346"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229350">)</span><span class="op" id="3229351">-</span><span class="num" id="3229352">2</span><span class="op" id="3229353">]</span>&nbsp;<span class="op" id="3229355">==</span>&nbsp;<span class="string" id="3229358">&#39;\r&#39;</span>&nbsp;<span class="op" id="3229363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229368"><a href="/bufio/bufio.go.html#3229305">drop</a></span>&nbsp;<span class="op" id="3229373">=</span>&nbsp;<span class="num" id="3229375">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229383"><a href="/bufio/bufio.go.html#3228698">line</a></span>&nbsp;<span class="op" id="3229388">=</span>&nbsp;<span class="ident" id="3229390"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229394">[</span><span class="op" id="3229395">:</span><span class="builtinfunc" id="3229396">len</span><span class="op" id="3229399">(</span><span class="ident" id="3229400"><a href="/bufio/bufio.go.html#3228698">line</a></span><span class="op" id="3229404">)</span><span class="op" id="3229405">-</span><span class="ident" id="3229406"><a href="/bufio/bufio.go.html#3229305">drop</a></span><span class="op" id="3229410">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229413">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229416">return</span><br>
<span class="lineno"></span><span class="op" id="3229423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3229426">//&nbsp;ReadBytes&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3229495">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno">360</span><span class="comment" id="3229571">//&nbsp;If&nbsp;ReadBytes&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3229635">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno"></span><span class="comment" id="3229717">//&nbsp;ReadBytes&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3229798">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="3229808">//&nbsp;For&nbsp;simple&nbsp;uses,&nbsp;a&nbsp;Scanner&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient.</span><br>
<span class="lineno">365</span><span class="keyword" id="3229862">func</span>&nbsp;<span class="op" id="3229867">(</span><span class="ident" id="3229868">b</span>&nbsp;<span class="op" id="3229870">*</span><span class="ident" id="3229871"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3229877">)</span>&nbsp;<span class="ident" id="3229879">ReadBytes</span><span class="op" id="3229888">(</span><span class="ident" id="3229889">delim</span>&nbsp;<span class="builtintype" id="3229895">byte</span><span class="op" id="3229899">)</span>&nbsp;<span class="op" id="3229901">(</span><span class="ident" id="3229902">line</span>&nbsp;<span class="op" id="3229907">[</span><span class="op" id="3229908">]</span><span class="builtintype" id="3229909">byte</span><span class="op" id="3229913">,</span>&nbsp;<span class="ident" id="3229915">err</span>&nbsp;<span class="builtintype" id="3229919">error</span><span class="op" id="3229924">)</span>&nbsp;<span class="op" id="3229926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3229929">//&nbsp;Use&nbsp;ReadSlice&nbsp;to&nbsp;look&nbsp;for&nbsp;array,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3229966">//&nbsp;accumulating&nbsp;full&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229997">var</span>&nbsp;<span class="ident" id="3230001">frag</span>&nbsp;<span class="op" id="3230006">[</span><span class="op" id="3230007">]</span><span class="builtintype" id="3230008">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230014">var</span>&nbsp;<span class="ident" id="3230018">full</span>&nbsp;<span class="op" id="3230023">[</span><span class="op" id="3230024">]</span><span class="op" id="3230025">[</span><span class="op" id="3230026">]</span><span class="builtintype" id="3230027">byte</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230033"><a href="/bufio/bufio.go.html#3229915">err</a></span>&nbsp;<span class="op" id="3230037">=</span>&nbsp;<span class="ident" id="3230039">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230045">for</span>&nbsp;<span class="op" id="3230049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230053">var</span>&nbsp;<span class="ident" id="3230057">e</span>&nbsp;<span class="builtintype" id="3230059">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230067"><a href="/bufio/bufio.go.html#3230001">frag</a></span><span class="op" id="3230071">,</span>&nbsp;<span class="ident" id="3230073"><a href="/bufio/bufio.go.html#3230057">e</a></span>&nbsp;<span class="op" id="3230075">=</span>&nbsp;<span class="ident" id="3230077"><a href="/bufio/bufio.go.html#3229868">b</a></span><span class="op" id="3230078">.</span><span class="ident" id="3230079">ReadSlice</span><span class="op" id="3230088">(</span><span class="ident" id="3230089"><a href="/bufio/bufio.go.html#3229889">delim</a></span><span class="op" id="3230094">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230098">if</span>&nbsp;<span class="ident" id="3230101"><a href="/bufio/bufio.go.html#3230057">e</a></span>&nbsp;<span class="op" id="3230103">==</span>&nbsp;<span class="ident" id="3230106">nil</span>&nbsp;<span class="op" id="3230110">{</span>&nbsp;<span class="comment" id="3230112">//&nbsp;got&nbsp;final&nbsp;fragment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230137">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230149">if</span>&nbsp;<span class="ident" id="3230152"><a href="/bufio/bufio.go.html#3230057">e</a></span>&nbsp;<span class="op" id="3230154">!=</span>&nbsp;<span class="ident" id="3230157"><a href="/bufio/bufio.go.html#3220721">ErrBufferFull</a></span>&nbsp;<span class="op" id="3230171">{</span>&nbsp;<span class="comment" id="3230173">//&nbsp;unexpected&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230196"><a href="/bufio/bufio.go.html#3229915">err</a></span>&nbsp;<span class="op" id="3230200">=</span>&nbsp;<span class="ident" id="3230202"><a href="/bufio/bufio.go.html#3230057">e</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230207">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3230220">//&nbsp;Make&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230252">buf</span>&nbsp;<span class="op" id="3230256">:=</span>&nbsp;<span class="builtinfunc" id="3230259">make</span><span class="op" id="3230263">(</span><span class="op" id="3230264">[</span><span class="op" id="3230265">]</span><span class="builtintype" id="3230266">byte</span><span class="op" id="3230270">,</span>&nbsp;<span class="builtinfunc" id="3230272">len</span><span class="op" id="3230275">(</span><span class="ident" id="3230276"><a href="/bufio/bufio.go.html#3230001">frag</a></span><span class="op" id="3230280">)</span><span class="op" id="3230281">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3230285">copy</span><span class="op" id="3230289">(</span><span class="ident" id="3230290"><a href="/bufio/bufio.go.html#3230252">buf</a></span><span class="op" id="3230293">,</span>&nbsp;<span class="ident" id="3230295"><a href="/bufio/bufio.go.html#3230001">frag</a></span><span class="op" id="3230299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230303"><a href="/bufio/bufio.go.html#3230018">full</a></span>&nbsp;<span class="op" id="3230308">=</span>&nbsp;<span class="builtinfunc" id="3230310">append</span><span class="op" id="3230316">(</span><span class="ident" id="3230317"><a href="/bufio/bufio.go.html#3230018">full</a></span><span class="op" id="3230321">,</span>&nbsp;<span class="ident" id="3230323"><a href="/bufio/bufio.go.html#3230252">buf</a></span><span class="op" id="3230326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3230333">//&nbsp;Allocate&nbsp;new&nbsp;buffer&nbsp;to&nbsp;hold&nbsp;the&nbsp;full&nbsp;pieces&nbsp;and&nbsp;the&nbsp;fragment.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230399">n</span>&nbsp;<span class="op" id="3230401">:=</span>&nbsp;<span class="num" id="3230404">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230407">for</span>&nbsp;<span class="ident" id="3230411">i</span>&nbsp;<span class="op" id="3230413">:=</span>&nbsp;<span class="keyword" id="3230416">range</span>&nbsp;<span class="ident" id="3230422"><a href="/bufio/bufio.go.html#3230018">full</a></span>&nbsp;<span class="op" id="3230427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230431"><a href="/bufio/bufio.go.html#3230399">n</a></span>&nbsp;<span class="op" id="3230433">+=</span>&nbsp;<span class="builtinfunc" id="3230436">len</span><span class="op" id="3230439">(</span><span class="ident" id="3230440"><a href="/bufio/bufio.go.html#3230018">full</a></span><span class="op" id="3230444">[</span><span class="ident" id="3230445"><a href="/bufio/bufio.go.html#3230411">i</a></span><span class="op" id="3230446">]</span><span class="op" id="3230447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230453"><a href="/bufio/bufio.go.html#3230399">n</a></span>&nbsp;<span class="op" id="3230455">+=</span>&nbsp;<span class="builtinfunc" id="3230458">len</span><span class="op" id="3230461">(</span><span class="ident" id="3230462"><a href="/bufio/bufio.go.html#3230001">frag</a></span><span class="op" id="3230466">)</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3230470">//&nbsp;Copy&nbsp;full&nbsp;pieces&nbsp;and&nbsp;fragment&nbsp;in.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230508">buf</span>&nbsp;<span class="op" id="3230512">:=</span>&nbsp;<span class="builtinfunc" id="3230515">make</span><span class="op" id="3230519">(</span><span class="op" id="3230520">[</span><span class="op" id="3230521">]</span><span class="builtintype" id="3230522">byte</span><span class="op" id="3230526">,</span>&nbsp;<span class="ident" id="3230528"><a href="/bufio/bufio.go.html#3230399">n</a></span><span class="op" id="3230529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230532"><a href="/bufio/bufio.go.html#3230399">n</a></span>&nbsp;<span class="op" id="3230534">=</span>&nbsp;<span class="num" id="3230536">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230539">for</span>&nbsp;<span class="ident" id="3230543">i</span>&nbsp;<span class="op" id="3230545">:=</span>&nbsp;<span class="keyword" id="3230548">range</span>&nbsp;<span class="ident" id="3230554"><a href="/bufio/bufio.go.html#3230018">full</a></span>&nbsp;<span class="op" id="3230559">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230563"><a href="/bufio/bufio.go.html#3230399">n</a></span>&nbsp;<span class="op" id="3230565">+=</span>&nbsp;<span class="builtinfunc" id="3230568">copy</span><span class="op" id="3230572">(</span><span class="ident" id="3230573"><a href="/bufio/bufio.go.html#3230508">buf</a></span><span class="op" id="3230576">[</span><span class="ident" id="3230577"><a href="/bufio/bufio.go.html#3230399">n</a></span><span class="op" id="3230578">:</span><span class="op" id="3230579">]</span><span class="op" id="3230580">,</span>&nbsp;<span class="ident" id="3230582"><a href="/bufio/bufio.go.html#3230018">full</a></span><span class="op" id="3230586">[</span><span class="ident" id="3230587"><a href="/bufio/bufio.go.html#3230543">i</a></span><span class="op" id="3230588">]</span><span class="op" id="3230589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3230595">copy</span><span class="op" id="3230599">(</span><span class="ident" id="3230600"><a href="/bufio/bufio.go.html#3230508">buf</a></span><span class="op" id="3230603">[</span><span class="ident" id="3230604"><a href="/bufio/bufio.go.html#3230399">n</a></span><span class="op" id="3230605">:</span><span class="op" id="3230606">]</span><span class="op" id="3230607">,</span>&nbsp;<span class="ident" id="3230609"><a href="/bufio/bufio.go.html#3230001">frag</a></span><span class="op" id="3230613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230616">return</span>&nbsp;<span class="ident" id="3230623"><a href="/bufio/bufio.go.html#3230508">buf</a></span><span class="op" id="3230626">,</span>&nbsp;<span class="ident" id="3230628"><a href="/bufio/bufio.go.html#3229915">err</a></span><br>
<span class="lineno"></span><span class="op" id="3230632">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="3230635">//&nbsp;ReadString&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3230705">//&nbsp;returning&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="3230782">//&nbsp;If&nbsp;ReadString&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3230847">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">410</span><span class="comment" id="3230929">//&nbsp;ReadString&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3231011">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="3231021">//&nbsp;For&nbsp;simple&nbsp;uses,&nbsp;a&nbsp;Scanner&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient.</span><br>
<span class="lineno"></span><span class="keyword" id="3231075">func</span>&nbsp;<span class="op" id="3231080">(</span><span class="ident" id="3231081">b</span>&nbsp;<span class="op" id="3231083">*</span><span class="ident" id="3231084"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3231090">)</span>&nbsp;<span class="ident" id="3231092">ReadString</span><span class="op" id="3231102">(</span><span class="ident" id="3231103">delim</span>&nbsp;<span class="builtintype" id="3231109">byte</span><span class="op" id="3231113">)</span>&nbsp;<span class="op" id="3231115">(</span><span class="ident" id="3231116">line</span>&nbsp;<span class="builtintype" id="3231121">string</span><span class="op" id="3231127">,</span>&nbsp;<span class="ident" id="3231129">err</span>&nbsp;<span class="builtintype" id="3231133">error</span><span class="op" id="3231138">)</span>&nbsp;<span class="op" id="3231140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231143">bytes</span><span class="op" id="3231148">,</span>&nbsp;<span class="ident" id="3231150"><a href="/bufio/bufio.go.html#3231129">err</a></span>&nbsp;<span class="op" id="3231154">:=</span>&nbsp;<span class="ident" id="3231157"><a href="/bufio/bufio.go.html#3231081">b</a></span><span class="op" id="3231158">.</span><span class="ident" id="3231159">ReadBytes</span><span class="op" id="3231168">(</span><span class="ident" id="3231169"><a href="/bufio/bufio.go.html#3231103">delim</a></span><span class="op" id="3231174">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231177"><a href="/bufio/bufio.go.html#3231116">line</a></span>&nbsp;<span class="op" id="3231182">=</span>&nbsp;<span class="builtintype" id="3231184">string</span><span class="op" id="3231190">(</span><span class="ident" id="3231191"><a href="/bufio/bufio.go.html#3231143">bytes</a></span><span class="op" id="3231196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231199">return</span>&nbsp;<span class="ident" id="3231206"><a href="/bufio/bufio.go.html#3231116">line</a></span><span class="op" id="3231210">,</span>&nbsp;<span class="ident" id="3231212"><a href="/bufio/bufio.go.html#3231129">err</a></span><br>
<span class="lineno"></span><span class="op" id="3231216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3231219">//&nbsp;WriteTo&nbsp;implements&nbsp;io.WriterTo.</span><br>
<span class="lineno">420</span><span class="keyword" id="3231254">func</span>&nbsp;<span class="op" id="3231259">(</span><span class="ident" id="3231260">b</span>&nbsp;<span class="op" id="3231262">*</span><span class="ident" id="3231263"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3231269">)</span>&nbsp;<span class="ident" id="3231271">WriteTo</span><span class="op" id="3231278">(</span><span class="ident" id="3231279">w</span>&nbsp;<span class="ident" id="3231281"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3231283">.</span><span class="ident" id="3231284">Writer</span><span class="op" id="3231290">)</span>&nbsp;<span class="op" id="3231292">(</span><span class="ident" id="3231293">n</span>&nbsp;<span class="ident" id="3231295">int64</span><span class="op" id="3231300">,</span>&nbsp;<span class="ident" id="3231302">err</span>&nbsp;<span class="builtintype" id="3231306">error</span><span class="op" id="3231311">)</span>&nbsp;<span class="op" id="3231313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231316"><a href="/bufio/bufio.go.html#3231293">n</a></span><span class="op" id="3231317">,</span>&nbsp;<span class="ident" id="3231319"><a href="/bufio/bufio.go.html#3231302">err</a></span>&nbsp;<span class="op" id="3231323">=</span>&nbsp;<span class="ident" id="3231325"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231326">.</span><span class="ident" id="3231327">writeBuf</span><span class="op" id="3231335">(</span><span class="ident" id="3231336"><a href="/bufio/bufio.go.html#3231279">w</a></span><span class="op" id="3231337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231340">if</span>&nbsp;<span class="ident" id="3231343"><a href="/bufio/bufio.go.html#3231302">err</a></span>&nbsp;<span class="op" id="3231347">!=</span>&nbsp;<span class="ident" id="3231350">nil</span>&nbsp;<span class="op" id="3231354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231358">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231366">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231370">if</span>&nbsp;<span class="ident" id="3231373">r</span><span class="op" id="3231374">,</span>&nbsp;<span class="ident" id="3231376">ok</span>&nbsp;<span class="op" id="3231379">:=</span>&nbsp;<span class="ident" id="3231382"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231383">.</span><span class="ident" id="3231384">rd</span><span class="op" id="3231386">.</span><span class="op" id="3231387">(</span><span class="ident" id="3231388"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3231390">.</span><span class="ident" id="3231391">WriterTo</span><span class="op" id="3231399">)</span><span class="op" id="3231400">;</span>&nbsp;<span class="ident" id="3231402"><a href="/bufio/bufio.go.html#3231376">ok</a></span>&nbsp;<span class="op" id="3231405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231409">m</span><span class="op" id="3231410">,</span>&nbsp;<span class="ident" id="3231412">err</span>&nbsp;<span class="op" id="3231416">:=</span>&nbsp;<span class="ident" id="3231419"><a href="/bufio/bufio.go.html#3231373">r</a></span><span class="op" id="3231420">.</span><span class="ident" id="3231421">WriteTo</span><span class="op" id="3231428">(</span><span class="ident" id="3231429"><a href="/bufio/bufio.go.html#3231279">w</a></span><span class="op" id="3231430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231434"><a href="/bufio/bufio.go.html#3231293">n</a></span>&nbsp;<span class="op" id="3231436">+=</span>&nbsp;<span class="ident" id="3231439"><a href="/bufio/bufio.go.html#3231409">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231443">return</span>&nbsp;<span class="ident" id="3231450"><a href="/bufio/bufio.go.html#3231293">n</a></span><span class="op" id="3231451">,</span>&nbsp;<span class="ident" id="3231453"><a href="/bufio/bufio.go.html#3231412">err</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231462">if</span>&nbsp;<span class="ident" id="3231465">w</span><span class="op" id="3231466">,</span>&nbsp;<span class="ident" id="3231468">ok</span>&nbsp;<span class="op" id="3231471">:=</span>&nbsp;<span class="ident" id="3231474"><a href="/bufio/bufio.go.html#3231279">w</a></span><span class="op" id="3231475">.</span><span class="op" id="3231476">(</span><span class="ident" id="3231477"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3231479">.</span><span class="ident" id="3231480">ReaderFrom</span><span class="op" id="3231490">)</span><span class="op" id="3231491">;</span>&nbsp;<span class="ident" id="3231493"><a href="/bufio/bufio.go.html#3231468">ok</a></span>&nbsp;<span class="op" id="3231496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231500">m</span><span class="op" id="3231501">,</span>&nbsp;<span class="ident" id="3231503">err</span>&nbsp;<span class="op" id="3231507">:=</span>&nbsp;<span class="ident" id="3231510"><a href="/bufio/bufio.go.html#3231465">w</a></span><span class="op" id="3231511">.</span><span class="ident" id="3231512">ReadFrom</span><span class="op" id="3231520">(</span><span class="ident" id="3231521"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231522">.</span><span class="ident" id="3231523">rd</span><span class="op" id="3231525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231529"><a href="/bufio/bufio.go.html#3231293">n</a></span>&nbsp;<span class="op" id="3231531">+=</span>&nbsp;<span class="ident" id="3231534"><a href="/bufio/bufio.go.html#3231500">m</a></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231538">return</span>&nbsp;<span class="ident" id="3231545"><a href="/bufio/bufio.go.html#3231293">n</a></span><span class="op" id="3231546">,</span>&nbsp;<span class="ident" id="3231548"><a href="/bufio/bufio.go.html#3231503">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231557">if</span>&nbsp;<span class="ident" id="3231560"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231561">.</span><span class="ident" id="3231562">w</span><span class="op" id="3231563">-</span><span class="ident" id="3231564"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231565">.</span><span class="ident" id="3231566">r</span>&nbsp;<span class="op" id="3231568">&lt;</span>&nbsp;<span class="builtinfunc" id="3231570">len</span><span class="op" id="3231573">(</span><span class="ident" id="3231574"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231575">.</span><span class="ident" id="3231576">buf</span><span class="op" id="3231579">)</span>&nbsp;<span class="op" id="3231581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231585"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231586">.</span><span class="ident" id="3231587">fill</span><span class="op" id="3231591">(</span><span class="op" id="3231592">)</span>&nbsp;<span class="comment" id="3231594">//&nbsp;buffer&nbsp;not&nbsp;full</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231618">for</span>&nbsp;<span class="ident" id="3231622"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231623">.</span><span class="ident" id="3231624">r</span>&nbsp;<span class="op" id="3231626">&lt;</span>&nbsp;<span class="ident" id="3231628"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231629">.</span><span class="ident" id="3231630">w</span>&nbsp;<span class="op" id="3231632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3231636">//&nbsp;b.r&nbsp;&lt;&nbsp;b.w&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231674">m</span><span class="op" id="3231675">,</span>&nbsp;<span class="ident" id="3231677">err</span>&nbsp;<span class="op" id="3231681">:=</span>&nbsp;<span class="ident" id="3231684"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231685">.</span><span class="ident" id="3231686">writeBuf</span><span class="op" id="3231694">(</span><span class="ident" id="3231695"><a href="/bufio/bufio.go.html#3231279">w</a></span><span class="op" id="3231696">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231700"><a href="/bufio/bufio.go.html#3231293">n</a></span>&nbsp;<span class="op" id="3231702">+=</span>&nbsp;<span class="ident" id="3231705"><a href="/bufio/bufio.go.html#3231674">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231709">if</span>&nbsp;<span class="ident" id="3231712"><a href="/bufio/bufio.go.html#3231677">err</a></span>&nbsp;<span class="op" id="3231716">!=</span>&nbsp;<span class="ident" id="3231719">nil</span>&nbsp;<span class="op" id="3231723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231728">return</span>&nbsp;<span class="ident" id="3231735"><a href="/bufio/bufio.go.html#3231293">n</a></span><span class="op" id="3231736">,</span>&nbsp;<span class="ident" id="3231738"><a href="/bufio/bufio.go.html#3231677">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231748"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231749">.</span><span class="ident" id="3231750">fill</span><span class="op" id="3231754">(</span><span class="op" id="3231755">)</span>&nbsp;<span class="comment" id="3231757">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231781">if</span>&nbsp;<span class="ident" id="3231784"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231785">.</span><span class="ident" id="3231786">err</span>&nbsp;<span class="op" id="3231790">==</span>&nbsp;<span class="ident" id="3231793"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3231795">.</span><span class="ident" id="3231796">EOF</span>&nbsp;<span class="op" id="3231800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231804"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231805">.</span><span class="ident" id="3231806">err</span>&nbsp;<span class="op" id="3231810">=</span>&nbsp;<span class="ident" id="3231812">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231817">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231821">return</span>&nbsp;<span class="ident" id="3231828"><a href="/bufio/bufio.go.html#3231293">n</a></span><span class="op" id="3231829">,</span>&nbsp;<span class="ident" id="3231831"><a href="/bufio/bufio.go.html#3231260">b</a></span><span class="op" id="3231832">.</span><span class="ident" id="3231833">readErr</span><span class="op" id="3231840">(</span><span class="op" id="3231841">)</span><br>
<span class="lineno"></span><span class="op" id="3231843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3231846">var</span>&nbsp;<span class="ident" id="3231850">errNegativeWrite</span>&nbsp;<span class="op" id="3231867">=</span>&nbsp;<span class="ident" id="3231869"><a href="/bufio/bufio.go.html#3220504">errors</a></span><span class="op" id="3231875">.</span><span class="ident" id="3231876">New</span><span class="op" id="3231879">(</span><span class="string" id="3231880">&#34;bufio:&nbsp;writer&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Write&#34;</span><span class="op" id="3231930">)</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="3231933">//&nbsp;writeBuf&nbsp;writes&nbsp;the&nbsp;Reader&#39;s&nbsp;buffer&nbsp;to&nbsp;the&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3231987">func</span>&nbsp;<span class="op" id="3231992">(</span><span class="ident" id="3231993">b</span>&nbsp;<span class="op" id="3231995">*</span><span class="ident" id="3231996"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3232002">)</span>&nbsp;<span class="ident" id="3232004">writeBuf</span><span class="op" id="3232012">(</span><span class="ident" id="3232013">w</span>&nbsp;<span class="ident" id="3232015"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3232017">.</span><span class="ident" id="3232018">Writer</span><span class="op" id="3232024">)</span>&nbsp;<span class="op" id="3232026">(</span><span class="ident" id="3232027">int64</span><span class="op" id="3232032">,</span>&nbsp;<span class="builtintype" id="3232034">error</span><span class="op" id="3232039">)</span>&nbsp;<span class="op" id="3232041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232044">n</span><span class="op" id="3232045">,</span>&nbsp;<span class="ident" id="3232047">err</span>&nbsp;<span class="op" id="3232051">:=</span>&nbsp;<span class="ident" id="3232054"><a href="/bufio/bufio.go.html#3232013">w</a></span><span class="op" id="3232055">.</span><span class="ident" id="3232056">Write</span><span class="op" id="3232061">(</span><span class="ident" id="3232062"><a href="/bufio/bufio.go.html#3231993">b</a></span><span class="op" id="3232063">.</span><span class="ident" id="3232064">buf</span><span class="op" id="3232067">[</span><span class="ident" id="3232068"><a href="/bufio/bufio.go.html#3231993">b</a></span><span class="op" id="3232069">.</span><span class="ident" id="3232070">r</span><span class="op" id="3232071">:</span><span class="ident" id="3232072"><a href="/bufio/bufio.go.html#3231993">b</a></span><span class="op" id="3232073">.</span><span class="ident" id="3232074">w</span><span class="op" id="3232075">]</span><span class="op" id="3232076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232079">if</span>&nbsp;<span class="ident" id="3232082"><a href="/bufio/bufio.go.html#3232044">n</a></span>&nbsp;<span class="op" id="3232084">&lt;</span>&nbsp;<span class="num" id="3232086">0</span>&nbsp;<span class="op" id="3232088">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3232092">panic</span><span class="op" id="3232097">(</span><span class="ident" id="3232098"><a href="/bufio/bufio.go.html#3231850">errNegativeWrite</a></span><span class="op" id="3232114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232120"><a href="/bufio/bufio.go.html#3231993">b</a></span><span class="op" id="3232121">.</span><span class="ident" id="3232122">r</span>&nbsp;<span class="op" id="3232124">+=</span>&nbsp;<span class="ident" id="3232127"><a href="/bufio/bufio.go.html#3232044">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232130">return</span>&nbsp;<span class="ident" id="3232137">int64</span><span class="op" id="3232142">(</span><span class="ident" id="3232143"><a href="/bufio/bufio.go.html#3232044">n</a></span><span class="op" id="3232144">)</span><span class="op" id="3232145">,</span>&nbsp;<span class="ident" id="3232147"><a href="/bufio/bufio.go.html#3232047">err</a></span><br>
<span class="lineno"></span><span class="op" id="3232151">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="3232154">//&nbsp;buffered&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3232174">//&nbsp;Writer&nbsp;implements&nbsp;buffering&nbsp;for&nbsp;an&nbsp;io.Writer&nbsp;object.</span><br>
<span class="lineno"></span><span class="comment" id="3232230">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;writing&nbsp;to&nbsp;a&nbsp;Writer,&nbsp;no&nbsp;more&nbsp;data&nbsp;will&nbsp;be</span><br>
<span class="lineno">475</span><span class="comment" id="3232294">//&nbsp;accepted&nbsp;and&nbsp;all&nbsp;subsequent&nbsp;writes&nbsp;will&nbsp;return&nbsp;the&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3232355">//&nbsp;After&nbsp;all&nbsp;data&nbsp;has&nbsp;been&nbsp;written,&nbsp;the&nbsp;client&nbsp;should&nbsp;call&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3232418">//&nbsp;Flush&nbsp;method&nbsp;to&nbsp;guarantee&nbsp;all&nbsp;data&nbsp;has&nbsp;been&nbsp;forwarded&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3232478">//&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3232507">type</span>&nbsp;<span class="ident" id="3232512">Writer</span>&nbsp;<span class="keyword" id="3232519">struct</span>&nbsp;<span class="op" id="3232526">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232529">err</span>&nbsp;<span class="builtintype" id="3232533">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232540">buf</span>&nbsp;<span class="op" id="3232544">[</span><span class="op" id="3232545">]</span><span class="builtintype" id="3232546">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232552">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3232556">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232561">wr</span>&nbsp;&nbsp;<span class="ident" id="3232565"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3232567">.</span><span class="ident" id="3232568">Writer</span><br>
<span class="lineno"></span><span class="op" id="3232575">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="comment" id="3232578">//&nbsp;NewWriterSize&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;the&nbsp;specified</span><br>
<span class="lineno"></span><span class="comment" id="3232656">//&nbsp;size.&nbsp;If&nbsp;the&nbsp;argument&nbsp;io.Writer&nbsp;is&nbsp;already&nbsp;a&nbsp;Writer&nbsp;with&nbsp;large&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3232729">//&nbsp;size,&nbsp;it&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3232772">func</span>&nbsp;<span class="ident" id="3232777">NewWriterSize</span><span class="op" id="3232790">(</span><span class="ident" id="3232791">w</span>&nbsp;<span class="ident" id="3232793"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3232795">.</span><span class="ident" id="3232796">Writer</span><span class="op" id="3232802">,</span>&nbsp;<span class="ident" id="3232804">size</span>&nbsp;<span class="builtintype" id="3232809">int</span><span class="op" id="3232812">)</span>&nbsp;<span class="op" id="3232814">*</span><span class="ident" id="3232815"><a href="/bufio/bufio.go.html#3232512">Writer</a></span>&nbsp;<span class="op" id="3232822">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3232825">//&nbsp;Is&nbsp;it&nbsp;already&nbsp;a&nbsp;Writer?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232853">b</span><span class="op" id="3232854">,</span>&nbsp;<span class="ident" id="3232856">ok</span>&nbsp;<span class="op" id="3232859">:=</span>&nbsp;<span class="ident" id="3232862"><a href="/bufio/bufio.go.html#3232791">w</a></span><span class="op" id="3232863">.</span><span class="op" id="3232864">(</span><span class="op" id="3232865">*</span><span class="ident" id="3232866"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3232872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232875">if</span>&nbsp;<span class="ident" id="3232878"><a href="/bufio/bufio.go.html#3232856">ok</a></span>&nbsp;<span class="op" id="3232881">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3232884">len</span><span class="op" id="3232887">(</span><span class="ident" id="3232888"><a href="/bufio/bufio.go.html#3232853">b</a></span><span class="op" id="3232889">.</span><span class="ident" id="3232890">buf</span><span class="op" id="3232893">)</span>&nbsp;<span class="op" id="3232895">&gt;=</span>&nbsp;<span class="ident" id="3232898"><a href="/bufio/bufio.go.html#3232804">size</a></span>&nbsp;<span class="op" id="3232903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232907">return</span>&nbsp;<span class="ident" id="3232914"><a href="/bufio/bufio.go.html#3232853">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232917">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232920">if</span>&nbsp;<span class="ident" id="3232923"><a href="/bufio/bufio.go.html#3232804">size</a></span>&nbsp;<span class="op" id="3232928">&lt;=</span>&nbsp;<span class="num" id="3232931">0</span>&nbsp;<span class="op" id="3232933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232937"><a href="/bufio/bufio.go.html#3232804">size</a></span>&nbsp;<span class="op" id="3232942">=</span>&nbsp;<span class="ident" id="3232944"><a href="/bufio/bufio.go.html#3220547">defaultBufSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232963">return</span>&nbsp;<span class="op" id="3232970">&amp;</span><span class="ident" id="3232971"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3232977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232981">buf</span><span class="op" id="3232984">:</span>&nbsp;<span class="builtinfunc" id="3232986">make</span><span class="op" id="3232990">(</span><span class="op" id="3232991">[</span><span class="op" id="3232992">]</span><span class="builtintype" id="3232993">byte</span><span class="op" id="3232997">,</span>&nbsp;<span class="ident" id="3232999"><a href="/bufio/bufio.go.html#3232804">size</a></span><span class="op" id="3233003">)</span><span class="op" id="3233004">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233008">wr</span><span class="op" id="3233010">:</span>&nbsp;&nbsp;<span class="ident" id="3233013"><a href="/bufio/bufio.go.html#3232791">w</a></span><span class="op" id="3233014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233017">}</span><br>
<span class="lineno"></span><span class="op" id="3233019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3233022">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;the&nbsp;default&nbsp;size.</span><br>
<span class="lineno">505</span><span class="keyword" id="3233091">func</span>&nbsp;<span class="ident" id="3233096">NewWriter</span><span class="op" id="3233105">(</span><span class="ident" id="3233106">w</span>&nbsp;<span class="ident" id="3233108"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3233110">.</span><span class="ident" id="3233111">Writer</span><span class="op" id="3233117">)</span>&nbsp;<span class="op" id="3233119">*</span><span class="ident" id="3233120"><a href="/bufio/bufio.go.html#3232512">Writer</a></span>&nbsp;<span class="op" id="3233127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233130">return</span>&nbsp;<span class="ident" id="3233137"><a href="/bufio/bufio.go.html#3232777">NewWriterSize</a></span><span class="op" id="3233150">(</span><span class="ident" id="3233151"><a href="/bufio/bufio.go.html#3233106">w</a></span><span class="op" id="3233152">,</span>&nbsp;<span class="ident" id="3233154"><a href="/bufio/bufio.go.html#3220547">defaultBufSize</a></span><span class="op" id="3233168">)</span><br>
<span class="lineno"></span><span class="op" id="3233170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3233173">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;unflushed&nbsp;buffered&nbsp;data,&nbsp;clears&nbsp;any&nbsp;error,&nbsp;and</span><br>
<span class="lineno">510</span><span class="comment" id="3233242">//&nbsp;resets&nbsp;b&nbsp;to&nbsp;write&nbsp;its&nbsp;output&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="3233280">func</span>&nbsp;<span class="op" id="3233285">(</span><span class="ident" id="3233286">b</span>&nbsp;<span class="op" id="3233288">*</span><span class="ident" id="3233289"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3233295">)</span>&nbsp;<span class="ident" id="3233297">Reset</span><span class="op" id="3233302">(</span><span class="ident" id="3233303">w</span>&nbsp;<span class="ident" id="3233305"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3233307">.</span><span class="ident" id="3233308">Writer</span><span class="op" id="3233314">)</span>&nbsp;<span class="op" id="3233316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233319"><a href="/bufio/bufio.go.html#3233286">b</a></span><span class="op" id="3233320">.</span><span class="ident" id="3233321">err</span>&nbsp;<span class="op" id="3233325">=</span>&nbsp;<span class="ident" id="3233327">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233332"><a href="/bufio/bufio.go.html#3233286">b</a></span><span class="op" id="3233333">.</span><span class="ident" id="3233334">n</span>&nbsp;<span class="op" id="3233336">=</span>&nbsp;<span class="num" id="3233338">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233341"><a href="/bufio/bufio.go.html#3233286">b</a></span><span class="op" id="3233342">.</span><span class="ident" id="3233343">wr</span>&nbsp;<span class="op" id="3233346">=</span>&nbsp;<span class="ident" id="3233348"><a href="/bufio/bufio.go.html#3233303">w</a></span><br>
<span class="lineno">515</span><span class="op" id="3233350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3233353">//&nbsp;Flush&nbsp;writes&nbsp;any&nbsp;buffered&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3233416">func</span>&nbsp;<span class="op" id="3233421">(</span><span class="ident" id="3233422">b</span>&nbsp;<span class="op" id="3233424">*</span><span class="ident" id="3233425"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3233431">)</span>&nbsp;<span class="ident" id="3233433">Flush</span><span class="op" id="3233438">(</span><span class="op" id="3233439">)</span>&nbsp;<span class="builtintype" id="3233441">error</span>&nbsp;<span class="op" id="3233447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233450">err</span>&nbsp;<span class="op" id="3233454">:=</span>&nbsp;<span class="ident" id="3233457"><a href="/bufio/bufio.go.html#3233422">b</a></span><span class="op" id="3233458">.</span><span class="ident" id="3233459">flush</span><span class="op" id="3233464">(</span><span class="op" id="3233465">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233468">return</span>&nbsp;<span class="ident" id="3233475"><a href="/bufio/bufio.go.html#3233450">err</a></span><br>
<span class="lineno"></span><span class="op" id="3233479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3233482">func</span>&nbsp;<span class="op" id="3233487">(</span><span class="ident" id="3233488">b</span>&nbsp;<span class="op" id="3233490">*</span><span class="ident" id="3233491"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3233497">)</span>&nbsp;<span class="ident" id="3233499">flush</span><span class="op" id="3233504">(</span><span class="op" id="3233505">)</span>&nbsp;<span class="builtintype" id="3233507">error</span>&nbsp;<span class="op" id="3233513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233516">if</span>&nbsp;<span class="ident" id="3233519"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233520">.</span><span class="ident" id="3233521">err</span>&nbsp;<span class="op" id="3233525">!=</span>&nbsp;<span class="ident" id="3233528">nil</span>&nbsp;<span class="op" id="3233532">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233536">return</span>&nbsp;<span class="ident" id="3233543"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233544">.</span><span class="ident" id="3233545">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233553">if</span>&nbsp;<span class="ident" id="3233556"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233557">.</span><span class="ident" id="3233558">n</span>&nbsp;<span class="op" id="3233560">==</span>&nbsp;<span class="num" id="3233563">0</span>&nbsp;<span class="op" id="3233565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233569">return</span>&nbsp;<span class="ident" id="3233576">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233581">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233584">n</span><span class="op" id="3233585">,</span>&nbsp;<span class="ident" id="3233587">err</span>&nbsp;<span class="op" id="3233591">:=</span>&nbsp;<span class="ident" id="3233594"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233595">.</span><span class="ident" id="3233596">wr</span><span class="op" id="3233598">.</span><span class="ident" id="3233599">Write</span><span class="op" id="3233604">(</span><span class="ident" id="3233605"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233606">.</span><span class="ident" id="3233607">buf</span><span class="op" id="3233610">[</span><span class="num" id="3233611">0</span><span class="op" id="3233612">:</span><span class="ident" id="3233613"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233614">.</span><span class="ident" id="3233615">n</span><span class="op" id="3233616">]</span><span class="op" id="3233617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233620">if</span>&nbsp;<span class="ident" id="3233623"><a href="/bufio/bufio.go.html#3233584">n</a></span>&nbsp;<span class="op" id="3233625">&lt;</span>&nbsp;<span class="ident" id="3233627"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233628">.</span><span class="ident" id="3233629">n</span>&nbsp;<span class="op" id="3233631">&amp;&amp;</span>&nbsp;<span class="ident" id="3233634"><a href="/bufio/bufio.go.html#3233587">err</a></span>&nbsp;<span class="op" id="3233638">==</span>&nbsp;<span class="ident" id="3233641">nil</span>&nbsp;<span class="op" id="3233645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233649"><a href="/bufio/bufio.go.html#3233587">err</a></span>&nbsp;<span class="op" id="3233653">=</span>&nbsp;<span class="ident" id="3233655"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3233657">.</span><span class="ident" id="3233658">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233676">if</span>&nbsp;<span class="ident" id="3233679"><a href="/bufio/bufio.go.html#3233587">err</a></span>&nbsp;<span class="op" id="3233683">!=</span>&nbsp;<span class="ident" id="3233686">nil</span>&nbsp;<span class="op" id="3233690">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233694">if</span>&nbsp;<span class="ident" id="3233697"><a href="/bufio/bufio.go.html#3233584">n</a></span>&nbsp;<span class="op" id="3233699">&gt;</span>&nbsp;<span class="num" id="3233701">0</span>&nbsp;<span class="op" id="3233703">&amp;&amp;</span>&nbsp;<span class="ident" id="3233706"><a href="/bufio/bufio.go.html#3233584">n</a></span>&nbsp;<span class="op" id="3233708">&lt;</span>&nbsp;<span class="ident" id="3233710"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233711">.</span><span class="ident" id="3233712">n</span>&nbsp;<span class="op" id="3233714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3233719">copy</span><span class="op" id="3233723">(</span><span class="ident" id="3233724"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233725">.</span><span class="ident" id="3233726">buf</span><span class="op" id="3233729">[</span><span class="num" id="3233730">0</span><span class="op" id="3233731">:</span><span class="ident" id="3233732"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233733">.</span><span class="ident" id="3233734">n</span><span class="op" id="3233735">-</span><span class="ident" id="3233736"><a href="/bufio/bufio.go.html#3233584">n</a></span><span class="op" id="3233737">]</span><span class="op" id="3233738">,</span>&nbsp;<span class="ident" id="3233740"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233741">.</span><span class="ident" id="3233742">buf</span><span class="op" id="3233745">[</span><span class="ident" id="3233746"><a href="/bufio/bufio.go.html#3233584">n</a></span><span class="op" id="3233747">:</span><span class="ident" id="3233748"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233749">.</span><span class="ident" id="3233750">n</span><span class="op" id="3233751">]</span><span class="op" id="3233752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233760"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233761">.</span><span class="ident" id="3233762">n</span>&nbsp;<span class="op" id="3233764">-=</span>&nbsp;<span class="ident" id="3233767"><a href="/bufio/bufio.go.html#3233584">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233771"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233772">.</span><span class="ident" id="3233773">err</span>&nbsp;<span class="op" id="3233777">=</span>&nbsp;<span class="ident" id="3233779"><a href="/bufio/bufio.go.html#3233587">err</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233785">return</span>&nbsp;<span class="ident" id="3233792"><a href="/bufio/bufio.go.html#3233587">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233800"><a href="/bufio/bufio.go.html#3233488">b</a></span><span class="op" id="3233801">.</span><span class="ident" id="3233802">n</span>&nbsp;<span class="op" id="3233804">=</span>&nbsp;<span class="num" id="3233806">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233809">return</span>&nbsp;<span class="ident" id="3233816">nil</span><br>
<span class="lineno"></span><span class="op" id="3233820">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="comment" id="3233823">//&nbsp;Available&nbsp;returns&nbsp;how&nbsp;many&nbsp;bytes&nbsp;are&nbsp;unused&nbsp;in&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3233885">func</span>&nbsp;<span class="op" id="3233890">(</span><span class="ident" id="3233891">b</span>&nbsp;<span class="op" id="3233893">*</span><span class="ident" id="3233894"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3233900">)</span>&nbsp;<span class="ident" id="3233902">Available</span><span class="op" id="3233911">(</span><span class="op" id="3233912">)</span>&nbsp;<span class="builtintype" id="3233914">int</span>&nbsp;<span class="op" id="3233918">{</span>&nbsp;<span class="keyword" id="3233920">return</span>&nbsp;<span class="builtinfunc" id="3233927">len</span><span class="op" id="3233930">(</span><span class="ident" id="3233931"><a href="/bufio/bufio.go.html#3233891">b</a></span><span class="op" id="3233932">.</span><span class="ident" id="3233933">buf</span><span class="op" id="3233936">)</span>&nbsp;<span class="op" id="3233938">-</span>&nbsp;<span class="ident" id="3233940"><a href="/bufio/bufio.go.html#3233891">b</a></span><span class="op" id="3233941">.</span><span class="ident" id="3233942">n</span>&nbsp;<span class="op" id="3233944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3233947">//&nbsp;Buffered&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;that&nbsp;have&nbsp;been&nbsp;written&nbsp;into&nbsp;the&nbsp;current&nbsp;buffer.</span><br>
<span class="lineno">550</span><span class="keyword" id="3234035">func</span>&nbsp;<span class="op" id="3234040">(</span><span class="ident" id="3234041">b</span>&nbsp;<span class="op" id="3234043">*</span><span class="ident" id="3234044"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3234050">)</span>&nbsp;<span class="ident" id="3234052">Buffered</span><span class="op" id="3234060">(</span><span class="op" id="3234061">)</span>&nbsp;<span class="builtintype" id="3234063">int</span>&nbsp;<span class="op" id="3234067">{</span>&nbsp;<span class="keyword" id="3234069">return</span>&nbsp;<span class="ident" id="3234076"><a href="/bufio/bufio.go.html#3234041">b</a></span><span class="op" id="3234077">.</span><span class="ident" id="3234078">n</span>&nbsp;<span class="op" id="3234080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3234083">//&nbsp;Write&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;p&nbsp;into&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3234134">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="3234177">//&nbsp;If&nbsp;nn&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining</span><br>
<span class="lineno">555</span><span class="comment" id="3234232">//&nbsp;why&nbsp;the&nbsp;write&nbsp;is&nbsp;short.</span><br>
<span class="lineno"></span><span class="keyword" id="3234259">func</span>&nbsp;<span class="op" id="3234264">(</span><span class="ident" id="3234265">b</span>&nbsp;<span class="op" id="3234267">*</span><span class="ident" id="3234268"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3234274">)</span>&nbsp;<span class="ident" id="3234276">Write</span><span class="op" id="3234281">(</span><span class="ident" id="3234282">p</span>&nbsp;<span class="op" id="3234284">[</span><span class="op" id="3234285">]</span><span class="builtintype" id="3234286">byte</span><span class="op" id="3234290">)</span>&nbsp;<span class="op" id="3234292">(</span><span class="ident" id="3234293">nn</span>&nbsp;<span class="builtintype" id="3234296">int</span><span class="op" id="3234299">,</span>&nbsp;<span class="ident" id="3234301">err</span>&nbsp;<span class="builtintype" id="3234305">error</span><span class="op" id="3234310">)</span>&nbsp;<span class="op" id="3234312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234315">for</span>&nbsp;<span class="builtinfunc" id="3234319">len</span><span class="op" id="3234322">(</span><span class="ident" id="3234323"><a href="/bufio/bufio.go.html#3234282">p</a></span><span class="op" id="3234324">)</span>&nbsp;<span class="op" id="3234326">&gt;</span>&nbsp;<span class="ident" id="3234328"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234329">.</span><span class="ident" id="3234330">Available</span><span class="op" id="3234339">(</span><span class="op" id="3234340">)</span>&nbsp;<span class="op" id="3234342">&amp;&amp;</span>&nbsp;<span class="ident" id="3234345"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234346">.</span><span class="ident" id="3234347">err</span>&nbsp;<span class="op" id="3234351">==</span>&nbsp;<span class="ident" id="3234354">nil</span>&nbsp;<span class="op" id="3234358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234362">var</span>&nbsp;<span class="ident" id="3234366">n</span>&nbsp;<span class="builtintype" id="3234368">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234374">if</span>&nbsp;<span class="ident" id="3234377"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234378">.</span><span class="ident" id="3234379">Buffered</span><span class="op" id="3234387">(</span><span class="op" id="3234388">)</span>&nbsp;<span class="op" id="3234390">==</span>&nbsp;<span class="num" id="3234393">0</span>&nbsp;<span class="op" id="3234395">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3234400">//&nbsp;Large&nbsp;write,&nbsp;empty&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3234433">//&nbsp;Write&nbsp;directly&nbsp;from&nbsp;p&nbsp;to&nbsp;avoid&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234476"><a href="/bufio/bufio.go.html#3234366">n</a></span><span class="op" id="3234477">,</span>&nbsp;<span class="ident" id="3234479"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234480">.</span><span class="ident" id="3234481">err</span>&nbsp;<span class="op" id="3234485">=</span>&nbsp;<span class="ident" id="3234487"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234488">.</span><span class="ident" id="3234489">wr</span><span class="op" id="3234491">.</span><span class="ident" id="3234492">Write</span><span class="op" id="3234497">(</span><span class="ident" id="3234498"><a href="/bufio/bufio.go.html#3234282">p</a></span><span class="op" id="3234499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234503">}</span>&nbsp;<span class="keyword" id="3234505">else</span>&nbsp;<span class="op" id="3234510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234515"><a href="/bufio/bufio.go.html#3234366">n</a></span>&nbsp;<span class="op" id="3234517">=</span>&nbsp;<span class="builtinfunc" id="3234519">copy</span><span class="op" id="3234523">(</span><span class="ident" id="3234524"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234525">.</span><span class="ident" id="3234526">buf</span><span class="op" id="3234529">[</span><span class="ident" id="3234530"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234531">.</span><span class="ident" id="3234532">n</span><span class="op" id="3234533">:</span><span class="op" id="3234534">]</span><span class="op" id="3234535">,</span>&nbsp;<span class="ident" id="3234537"><a href="/bufio/bufio.go.html#3234282">p</a></span><span class="op" id="3234538">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234543"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234544">.</span><span class="ident" id="3234545">n</span>&nbsp;<span class="op" id="3234547">+=</span>&nbsp;<span class="ident" id="3234550"><a href="/bufio/bufio.go.html#3234366">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234555"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234556">.</span><span class="ident" id="3234557">flush</span><span class="op" id="3234562">(</span><span class="op" id="3234563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234571"><a href="/bufio/bufio.go.html#3234293">nn</a></span>&nbsp;<span class="op" id="3234574">+=</span>&nbsp;<span class="ident" id="3234577"><a href="/bufio/bufio.go.html#3234366">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234581"><a href="/bufio/bufio.go.html#3234282">p</a></span>&nbsp;<span class="op" id="3234583">=</span>&nbsp;<span class="ident" id="3234585"><a href="/bufio/bufio.go.html#3234282">p</a></span><span class="op" id="3234586">[</span><span class="ident" id="3234587"><a href="/bufio/bufio.go.html#3234366">n</a></span><span class="op" id="3234588">:</span><span class="op" id="3234589">]</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234595">if</span>&nbsp;<span class="ident" id="3234598"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234599">.</span><span class="ident" id="3234600">err</span>&nbsp;<span class="op" id="3234604">!=</span>&nbsp;<span class="ident" id="3234607">nil</span>&nbsp;<span class="op" id="3234611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234615">return</span>&nbsp;<span class="ident" id="3234622"><a href="/bufio/bufio.go.html#3234293">nn</a></span><span class="op" id="3234624">,</span>&nbsp;<span class="ident" id="3234626"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234627">.</span><span class="ident" id="3234628">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234636">n</span>&nbsp;<span class="op" id="3234638">:=</span>&nbsp;<span class="builtinfunc" id="3234641">copy</span><span class="op" id="3234645">(</span><span class="ident" id="3234646"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234647">.</span><span class="ident" id="3234648">buf</span><span class="op" id="3234651">[</span><span class="ident" id="3234652"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234653">.</span><span class="ident" id="3234654">n</span><span class="op" id="3234655">:</span><span class="op" id="3234656">]</span><span class="op" id="3234657">,</span>&nbsp;<span class="ident" id="3234659"><a href="/bufio/bufio.go.html#3234282">p</a></span><span class="op" id="3234660">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234663"><a href="/bufio/bufio.go.html#3234265">b</a></span><span class="op" id="3234664">.</span><span class="ident" id="3234665">n</span>&nbsp;<span class="op" id="3234667">+=</span>&nbsp;<span class="ident" id="3234670"><a href="/bufio/bufio.go.html#3234636">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234673"><a href="/bufio/bufio.go.html#3234293">nn</a></span>&nbsp;<span class="op" id="3234676">+=</span>&nbsp;<span class="ident" id="3234679"><a href="/bufio/bufio.go.html#3234636">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234682">return</span>&nbsp;<span class="ident" id="3234689"><a href="/bufio/bufio.go.html#3234293">nn</a></span><span class="op" id="3234691">,</span>&nbsp;<span class="ident" id="3234693">nil</span><br>
<span class="lineno"></span><span class="op" id="3234697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span><span class="comment" id="3234700">//&nbsp;WriteByte&nbsp;writes&nbsp;a&nbsp;single&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="3234735">func</span>&nbsp;<span class="op" id="3234740">(</span><span class="ident" id="3234741">b</span>&nbsp;<span class="op" id="3234743">*</span><span class="ident" id="3234744"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3234750">)</span>&nbsp;<span class="ident" id="3234752">WriteByte</span><span class="op" id="3234761">(</span><span class="ident" id="3234762">c</span>&nbsp;<span class="builtintype" id="3234764">byte</span><span class="op" id="3234768">)</span>&nbsp;<span class="builtintype" id="3234770">error</span>&nbsp;<span class="op" id="3234776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234779">if</span>&nbsp;<span class="ident" id="3234782"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234783">.</span><span class="ident" id="3234784">err</span>&nbsp;<span class="op" id="3234788">!=</span>&nbsp;<span class="ident" id="3234791">nil</span>&nbsp;<span class="op" id="3234795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234799">return</span>&nbsp;<span class="ident" id="3234806"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234807">.</span><span class="ident" id="3234808">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234813">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234816">if</span>&nbsp;<span class="ident" id="3234819"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234820">.</span><span class="ident" id="3234821">Available</span><span class="op" id="3234830">(</span><span class="op" id="3234831">)</span>&nbsp;<span class="op" id="3234833">&lt;=</span>&nbsp;<span class="num" id="3234836">0</span>&nbsp;<span class="op" id="3234838">&amp;&amp;</span>&nbsp;<span class="ident" id="3234841"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234842">.</span><span class="ident" id="3234843">flush</span><span class="op" id="3234848">(</span><span class="op" id="3234849">)</span>&nbsp;<span class="op" id="3234851">!=</span>&nbsp;<span class="ident" id="3234854">nil</span>&nbsp;<span class="op" id="3234858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234862">return</span>&nbsp;<span class="ident" id="3234869"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234870">.</span><span class="ident" id="3234871">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234879"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234880">.</span><span class="ident" id="3234881">buf</span><span class="op" id="3234884">[</span><span class="ident" id="3234885"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234886">.</span><span class="ident" id="3234887">n</span><span class="op" id="3234888">]</span>&nbsp;<span class="op" id="3234890">=</span>&nbsp;<span class="ident" id="3234892"><a href="/bufio/bufio.go.html#3234762">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3234895"><a href="/bufio/bufio.go.html#3234741">b</a></span><span class="op" id="3234896">.</span><span class="ident" id="3234897">n</span><span class="op" id="3234898">++</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234902">return</span>&nbsp;<span class="ident" id="3234909">nil</span><br>
<span class="lineno"></span><span class="op" id="3234913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3234916">//&nbsp;WriteRune&nbsp;writes&nbsp;a&nbsp;single&nbsp;Unicode&nbsp;code&nbsp;point,&nbsp;returning</span><br>
<span class="lineno"></span><span class="comment" id="3234975">//&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;any&nbsp;error.</span><br>
<span class="lineno">595</span><span class="keyword" id="3235021">func</span>&nbsp;<span class="op" id="3235026">(</span><span class="ident" id="3235027">b</span>&nbsp;<span class="op" id="3235029">*</span><span class="ident" id="3235030"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3235036">)</span>&nbsp;<span class="ident" id="3235038">WriteRune</span><span class="op" id="3235047">(</span><span class="ident" id="3235048">r</span>&nbsp;<span class="builtintype" id="3235050">rune</span><span class="op" id="3235054">)</span>&nbsp;<span class="op" id="3235056">(</span><span class="ident" id="3235057">size</span>&nbsp;<span class="builtintype" id="3235062">int</span><span class="op" id="3235065">,</span>&nbsp;<span class="ident" id="3235067">err</span>&nbsp;<span class="builtintype" id="3235071">error</span><span class="op" id="3235076">)</span>&nbsp;<span class="op" id="3235078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235081">if</span>&nbsp;<span class="ident" id="3235084"><a href="/bufio/bufio.go.html#3235048">r</a></span>&nbsp;<span class="op" id="3235086">&lt;</span>&nbsp;<span class="ident" id="3235088"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3235092">.</span><span class="ident" id="3235093">RuneSelf</span>&nbsp;<span class="op" id="3235102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235106"><a href="/bufio/bufio.go.html#3235067">err</a></span>&nbsp;<span class="op" id="3235110">=</span>&nbsp;<span class="ident" id="3235112"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235113">.</span><span class="ident" id="3235114">WriteByte</span><span class="op" id="3235123">(</span><span class="builtintype" id="3235124">byte</span><span class="op" id="3235128">(</span><span class="ident" id="3235129"><a href="/bufio/bufio.go.html#3235048">r</a></span><span class="op" id="3235130">)</span><span class="op" id="3235131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235135">if</span>&nbsp;<span class="ident" id="3235138"><a href="/bufio/bufio.go.html#3235067">err</a></span>&nbsp;<span class="op" id="3235142">!=</span>&nbsp;<span class="ident" id="3235145">nil</span>&nbsp;<span class="op" id="3235149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235154">return</span>&nbsp;<span class="num" id="3235161">0</span><span class="op" id="3235162">,</span>&nbsp;<span class="ident" id="3235164"><a href="/bufio/bufio.go.html#3235067">err</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235174">return</span>&nbsp;<span class="num" id="3235181">1</span><span class="op" id="3235182">,</span>&nbsp;<span class="ident" id="3235184">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235192">if</span>&nbsp;<span class="ident" id="3235195"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235196">.</span><span class="ident" id="3235197">err</span>&nbsp;<span class="op" id="3235201">!=</span>&nbsp;<span class="ident" id="3235204">nil</span>&nbsp;<span class="op" id="3235208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235212">return</span>&nbsp;<span class="num" id="3235219">0</span><span class="op" id="3235220">,</span>&nbsp;<span class="ident" id="3235222"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235223">.</span><span class="ident" id="3235224">err</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235232">n</span>&nbsp;<span class="op" id="3235234">:=</span>&nbsp;<span class="ident" id="3235237"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235238">.</span><span class="ident" id="3235239">Available</span><span class="op" id="3235248">(</span><span class="op" id="3235249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235252">if</span>&nbsp;<span class="ident" id="3235255"><a href="/bufio/bufio.go.html#3235232">n</a></span>&nbsp;<span class="op" id="3235257">&lt;</span>&nbsp;<span class="ident" id="3235259"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3235263">.</span><span class="ident" id="3235264">UTFMax</span>&nbsp;<span class="op" id="3235271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235275">if</span>&nbsp;<span class="ident" id="3235278"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235279">.</span><span class="ident" id="3235280">flush</span><span class="op" id="3235285">(</span><span class="op" id="3235286">)</span><span class="op" id="3235287">;</span>&nbsp;<span class="ident" id="3235289"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235290">.</span><span class="ident" id="3235291">err</span>&nbsp;<span class="op" id="3235295">!=</span>&nbsp;<span class="ident" id="3235298">nil</span>&nbsp;<span class="op" id="3235302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235307">return</span>&nbsp;<span class="num" id="3235314">0</span><span class="op" id="3235315">,</span>&nbsp;<span class="ident" id="3235317"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235318">.</span><span class="ident" id="3235319">err</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235329"><a href="/bufio/bufio.go.html#3235232">n</a></span>&nbsp;<span class="op" id="3235331">=</span>&nbsp;<span class="ident" id="3235333"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235334">.</span><span class="ident" id="3235335">Available</span><span class="op" id="3235344">(</span><span class="op" id="3235345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235349">if</span>&nbsp;<span class="ident" id="3235352"><a href="/bufio/bufio.go.html#3235232">n</a></span>&nbsp;<span class="op" id="3235354">&lt;</span>&nbsp;<span class="ident" id="3235356"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3235360">.</span><span class="ident" id="3235361">UTFMax</span>&nbsp;<span class="op" id="3235368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3235373">//&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;buffer&nbsp;is&nbsp;silly&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235421">return</span>&nbsp;<span class="ident" id="3235428"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235429">.</span><span class="ident" id="3235430">WriteString</span><span class="op" id="3235441">(</span><span class="builtintype" id="3235442">string</span><span class="op" id="3235448">(</span><span class="ident" id="3235449"><a href="/bufio/bufio.go.html#3235048">r</a></span><span class="op" id="3235450">)</span><span class="op" id="3235451">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235461"><a href="/bufio/bufio.go.html#3235057">size</a></span>&nbsp;<span class="op" id="3235466">=</span>&nbsp;<span class="ident" id="3235468"><a href="/bufio/bufio.go.html#3220520">utf8</a></span><span class="op" id="3235472">.</span><span class="ident" id="3235473">EncodeRune</span><span class="op" id="3235483">(</span><span class="ident" id="3235484"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235485">.</span><span class="ident" id="3235486">buf</span><span class="op" id="3235489">[</span><span class="ident" id="3235490"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235491">.</span><span class="ident" id="3235492">n</span><span class="op" id="3235493">:</span><span class="op" id="3235494">]</span><span class="op" id="3235495">,</span>&nbsp;<span class="ident" id="3235497"><a href="/bufio/bufio.go.html#3235048">r</a></span><span class="op" id="3235498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235501"><a href="/bufio/bufio.go.html#3235027">b</a></span><span class="op" id="3235502">.</span><span class="ident" id="3235503">n</span>&nbsp;<span class="op" id="3235505">+=</span>&nbsp;<span class="ident" id="3235508"><a href="/bufio/bufio.go.html#3235057">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235514">return</span>&nbsp;<span class="ident" id="3235521"><a href="/bufio/bufio.go.html#3235057">size</a></span><span class="op" id="3235525">,</span>&nbsp;<span class="ident" id="3235527">nil</span><br>
<span class="lineno">620</span><span class="op" id="3235531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3235534">//&nbsp;WriteString&nbsp;writes&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3235566">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="3235609">//&nbsp;If&nbsp;the&nbsp;count&nbsp;is&nbsp;less&nbsp;than&nbsp;len(s),&nbsp;it&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining</span><br>
<span class="lineno">625</span><span class="comment" id="3235682">//&nbsp;why&nbsp;the&nbsp;write&nbsp;is&nbsp;short.</span><br>
<span class="lineno"></span><span class="keyword" id="3235709">func</span>&nbsp;<span class="op" id="3235714">(</span><span class="ident" id="3235715">b</span>&nbsp;<span class="op" id="3235717">*</span><span class="ident" id="3235718"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3235724">)</span>&nbsp;<span class="ident" id="3235726">WriteString</span><span class="op" id="3235737">(</span><span class="ident" id="3235738">s</span>&nbsp;<span class="builtintype" id="3235740">string</span><span class="op" id="3235746">)</span>&nbsp;<span class="op" id="3235748">(</span><span class="builtintype" id="3235749">int</span><span class="op" id="3235752">,</span>&nbsp;<span class="builtintype" id="3235754">error</span><span class="op" id="3235759">)</span>&nbsp;<span class="op" id="3235761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235764">nn</span>&nbsp;<span class="op" id="3235767">:=</span>&nbsp;<span class="num" id="3235770">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235773">for</span>&nbsp;<span class="builtinfunc" id="3235777">len</span><span class="op" id="3235780">(</span><span class="ident" id="3235781"><a href="/bufio/bufio.go.html#3235738">s</a></span><span class="op" id="3235782">)</span>&nbsp;<span class="op" id="3235784">&gt;</span>&nbsp;<span class="ident" id="3235786"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235787">.</span><span class="ident" id="3235788">Available</span><span class="op" id="3235797">(</span><span class="op" id="3235798">)</span>&nbsp;<span class="op" id="3235800">&amp;&amp;</span>&nbsp;<span class="ident" id="3235803"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235804">.</span><span class="ident" id="3235805">err</span>&nbsp;<span class="op" id="3235809">==</span>&nbsp;<span class="ident" id="3235812">nil</span>&nbsp;<span class="op" id="3235816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235820">n</span>&nbsp;<span class="op" id="3235822">:=</span>&nbsp;<span class="builtinfunc" id="3235825">copy</span><span class="op" id="3235829">(</span><span class="ident" id="3235830"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235831">.</span><span class="ident" id="3235832">buf</span><span class="op" id="3235835">[</span><span class="ident" id="3235836"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235837">.</span><span class="ident" id="3235838">n</span><span class="op" id="3235839">:</span><span class="op" id="3235840">]</span><span class="op" id="3235841">,</span>&nbsp;<span class="ident" id="3235843"><a href="/bufio/bufio.go.html#3235738">s</a></span><span class="op" id="3235844">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235848"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235849">.</span><span class="ident" id="3235850">n</span>&nbsp;<span class="op" id="3235852">+=</span>&nbsp;<span class="ident" id="3235855"><a href="/bufio/bufio.go.html#3235820">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235859"><a href="/bufio/bufio.go.html#3235764">nn</a></span>&nbsp;<span class="op" id="3235862">+=</span>&nbsp;<span class="ident" id="3235865"><a href="/bufio/bufio.go.html#3235820">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235869"><a href="/bufio/bufio.go.html#3235738">s</a></span>&nbsp;<span class="op" id="3235871">=</span>&nbsp;<span class="ident" id="3235873"><a href="/bufio/bufio.go.html#3235738">s</a></span><span class="op" id="3235874">[</span><span class="ident" id="3235875"><a href="/bufio/bufio.go.html#3235820">n</a></span><span class="op" id="3235876">:</span><span class="op" id="3235877">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235881"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235882">.</span><span class="ident" id="3235883">flush</span><span class="op" id="3235888">(</span><span class="op" id="3235889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235892">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235895">if</span>&nbsp;<span class="ident" id="3235898"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235899">.</span><span class="ident" id="3235900">err</span>&nbsp;<span class="op" id="3235904">!=</span>&nbsp;<span class="ident" id="3235907">nil</span>&nbsp;<span class="op" id="3235911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235915">return</span>&nbsp;<span class="ident" id="3235922"><a href="/bufio/bufio.go.html#3235764">nn</a></span><span class="op" id="3235924">,</span>&nbsp;<span class="ident" id="3235926"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235927">.</span><span class="ident" id="3235928">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235936">n</span>&nbsp;<span class="op" id="3235938">:=</span>&nbsp;<span class="builtinfunc" id="3235941">copy</span><span class="op" id="3235945">(</span><span class="ident" id="3235946"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235947">.</span><span class="ident" id="3235948">buf</span><span class="op" id="3235951">[</span><span class="ident" id="3235952"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235953">.</span><span class="ident" id="3235954">n</span><span class="op" id="3235955">:</span><span class="op" id="3235956">]</span><span class="op" id="3235957">,</span>&nbsp;<span class="ident" id="3235959"><a href="/bufio/bufio.go.html#3235738">s</a></span><span class="op" id="3235960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235963"><a href="/bufio/bufio.go.html#3235715">b</a></span><span class="op" id="3235964">.</span><span class="ident" id="3235965">n</span>&nbsp;<span class="op" id="3235967">+=</span>&nbsp;<span class="ident" id="3235970"><a href="/bufio/bufio.go.html#3235936">n</a></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235973"><a href="/bufio/bufio.go.html#3235764">nn</a></span>&nbsp;<span class="op" id="3235976">+=</span>&nbsp;<span class="ident" id="3235979"><a href="/bufio/bufio.go.html#3235936">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235982">return</span>&nbsp;<span class="ident" id="3235989"><a href="/bufio/bufio.go.html#3235764">nn</a></span><span class="op" id="3235991">,</span>&nbsp;<span class="ident" id="3235993">nil</span><br>
<span class="lineno"></span><span class="op" id="3235997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3236000">//&nbsp;ReadFrom&nbsp;implements&nbsp;io.ReaderFrom.</span><br>
<span class="lineno">645</span><span class="keyword" id="3236038">func</span>&nbsp;<span class="op" id="3236043">(</span><span class="ident" id="3236044">b</span>&nbsp;<span class="op" id="3236046">*</span><span class="ident" id="3236047"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3236053">)</span>&nbsp;<span class="ident" id="3236055">ReadFrom</span><span class="op" id="3236063">(</span><span class="ident" id="3236064">r</span>&nbsp;<span class="ident" id="3236066"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3236068">.</span><span class="ident" id="3236069">Reader</span><span class="op" id="3236075">)</span>&nbsp;<span class="op" id="3236077">(</span><span class="ident" id="3236078">n</span>&nbsp;<span class="ident" id="3236080">int64</span><span class="op" id="3236085">,</span>&nbsp;<span class="ident" id="3236087">err</span>&nbsp;<span class="builtintype" id="3236091">error</span><span class="op" id="3236096">)</span>&nbsp;<span class="op" id="3236098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236101">if</span>&nbsp;<span class="ident" id="3236104"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236105">.</span><span class="ident" id="3236106">Buffered</span><span class="op" id="3236114">(</span><span class="op" id="3236115">)</span>&nbsp;<span class="op" id="3236117">==</span>&nbsp;<span class="num" id="3236120">0</span>&nbsp;<span class="op" id="3236122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236126">if</span>&nbsp;<span class="ident" id="3236129">w</span><span class="op" id="3236130">,</span>&nbsp;<span class="ident" id="3236132">ok</span>&nbsp;<span class="op" id="3236135">:=</span>&nbsp;<span class="ident" id="3236138"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236139">.</span><span class="ident" id="3236140">wr</span><span class="op" id="3236142">.</span><span class="op" id="3236143">(</span><span class="ident" id="3236144"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3236146">.</span><span class="ident" id="3236147">ReaderFrom</span><span class="op" id="3236157">)</span><span class="op" id="3236158">;</span>&nbsp;<span class="ident" id="3236160"><a href="/bufio/bufio.go.html#3236132">ok</a></span>&nbsp;<span class="op" id="3236163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236168">return</span>&nbsp;<span class="ident" id="3236175"><a href="/bufio/bufio.go.html#3236129">w</a></span><span class="op" id="3236176">.</span><span class="ident" id="3236177">ReadFrom</span><span class="op" id="3236185">(</span><span class="ident" id="3236186"><a href="/bufio/bufio.go.html#3236064">r</a></span><span class="op" id="3236187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236191">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236197">var</span>&nbsp;<span class="ident" id="3236201">m</span>&nbsp;<span class="builtintype" id="3236203">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236208">for</span>&nbsp;<span class="op" id="3236212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236216">if</span>&nbsp;<span class="ident" id="3236219"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236220">.</span><span class="ident" id="3236221">Available</span><span class="op" id="3236230">(</span><span class="op" id="3236231">)</span>&nbsp;<span class="op" id="3236233">==</span>&nbsp;<span class="num" id="3236236">0</span>&nbsp;<span class="op" id="3236238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236243">if</span>&nbsp;<span class="ident" id="3236246">err1</span>&nbsp;<span class="op" id="3236251">:=</span>&nbsp;<span class="ident" id="3236254"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236255">.</span><span class="ident" id="3236256">flush</span><span class="op" id="3236261">(</span><span class="op" id="3236262">)</span><span class="op" id="3236263">;</span>&nbsp;<span class="ident" id="3236265"><a href="/bufio/bufio.go.html#3236246">err1</a></span>&nbsp;<span class="op" id="3236270">!=</span>&nbsp;<span class="ident" id="3236273">nil</span>&nbsp;<span class="op" id="3236277">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236283">return</span>&nbsp;<span class="ident" id="3236290"><a href="/bufio/bufio.go.html#3236078">n</a></span><span class="op" id="3236291">,</span>&nbsp;<span class="ident" id="3236293"><a href="/bufio/bufio.go.html#3236246">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236309">nr</span>&nbsp;<span class="op" id="3236312">:=</span>&nbsp;<span class="num" id="3236315">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236319">for</span>&nbsp;<span class="ident" id="3236323"><a href="/bufio/bufio.go.html#3236309">nr</a></span>&nbsp;<span class="op" id="3236326">&lt;</span>&nbsp;<span class="ident" id="3236328"><a href="/bufio/bufio.go.html#3221165">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="3236353">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236358"><a href="/bufio/bufio.go.html#3236201">m</a></span><span class="op" id="3236359">,</span>&nbsp;<span class="ident" id="3236361"><a href="/bufio/bufio.go.html#3236087">err</a></span>&nbsp;<span class="op" id="3236365">=</span>&nbsp;<span class="ident" id="3236367"><a href="/bufio/bufio.go.html#3236064">r</a></span><span class="op" id="3236368">.</span><span class="ident" id="3236369">Read</span><span class="op" id="3236373">(</span><span class="ident" id="3236374"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236375">.</span><span class="ident" id="3236376">buf</span><span class="op" id="3236379">[</span><span class="ident" id="3236380"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236381">.</span><span class="ident" id="3236382">n</span><span class="op" id="3236383">:</span><span class="op" id="3236384">]</span><span class="op" id="3236385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236390">if</span>&nbsp;<span class="ident" id="3236393"><a href="/bufio/bufio.go.html#3236201">m</a></span>&nbsp;<span class="op" id="3236395">!=</span>&nbsp;<span class="num" id="3236398">0</span>&nbsp;<span class="op" id="3236400">||</span>&nbsp;<span class="ident" id="3236403"><a href="/bufio/bufio.go.html#3236087">err</a></span>&nbsp;<span class="op" id="3236407">!=</span>&nbsp;<span class="ident" id="3236410">nil</span>&nbsp;<span class="op" id="3236414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236420">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236434"><a href="/bufio/bufio.go.html#3236309">nr</a></span><span class="op" id="3236436">++</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236445">if</span>&nbsp;<span class="ident" id="3236448"><a href="/bufio/bufio.go.html#3236309">nr</a></span>&nbsp;<span class="op" id="3236451">==</span>&nbsp;<span class="ident" id="3236454"><a href="/bufio/bufio.go.html#3221165">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="3236479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236484">return</span>&nbsp;<span class="ident" id="3236491"><a href="/bufio/bufio.go.html#3236078">n</a></span><span class="op" id="3236492">,</span>&nbsp;<span class="ident" id="3236494"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3236496">.</span><span class="ident" id="3236497">ErrNoProgress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236517"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236518">.</span><span class="ident" id="3236519">n</span>&nbsp;<span class="op" id="3236521">+=</span>&nbsp;<span class="ident" id="3236524"><a href="/bufio/bufio.go.html#3236201">m</a></span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236528"><a href="/bufio/bufio.go.html#3236078">n</a></span>&nbsp;<span class="op" id="3236530">+=</span>&nbsp;<span class="ident" id="3236533">int64</span><span class="op" id="3236538">(</span><span class="ident" id="3236539"><a href="/bufio/bufio.go.html#3236201">m</a></span><span class="op" id="3236540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236544">if</span>&nbsp;<span class="ident" id="3236547"><a href="/bufio/bufio.go.html#3236087">err</a></span>&nbsp;<span class="op" id="3236551">!=</span>&nbsp;<span class="ident" id="3236554">nil</span>&nbsp;<span class="op" id="3236558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236563">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236574">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236577">if</span>&nbsp;<span class="ident" id="3236580"><a href="/bufio/bufio.go.html#3236087">err</a></span>&nbsp;<span class="op" id="3236584">==</span>&nbsp;<span class="ident" id="3236587"><a href="/bufio/bufio.go.html#3220514">io</a></span><span class="op" id="3236589">.</span><span class="ident" id="3236590">EOF</span>&nbsp;<span class="op" id="3236594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3236598">//&nbsp;If&nbsp;we&nbsp;filled&nbsp;the&nbsp;buffer&nbsp;exactly,&nbsp;flush&nbsp;pre-emptively.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236657">if</span>&nbsp;<span class="ident" id="3236660"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236661">.</span><span class="ident" id="3236662">Available</span><span class="op" id="3236671">(</span><span class="op" id="3236672">)</span>&nbsp;<span class="op" id="3236674">==</span>&nbsp;<span class="num" id="3236677">0</span>&nbsp;<span class="op" id="3236679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236684"><a href="/bufio/bufio.go.html#3236087">err</a></span>&nbsp;<span class="op" id="3236688">=</span>&nbsp;<span class="ident" id="3236690"><a href="/bufio/bufio.go.html#3236044">b</a></span><span class="op" id="3236691">.</span><span class="ident" id="3236692">flush</span><span class="op" id="3236697">(</span><span class="op" id="3236698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236702">}</span>&nbsp;<span class="keyword" id="3236704">else</span>&nbsp;<span class="op" id="3236709">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236714"><a href="/bufio/bufio.go.html#3236087">err</a></span>&nbsp;<span class="op" id="3236718">=</span>&nbsp;<span class="ident" id="3236720">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236732">return</span>&nbsp;<span class="ident" id="3236739"><a href="/bufio/bufio.go.html#3236078">n</a></span><span class="op" id="3236740">,</span>&nbsp;<span class="ident" id="3236742"><a href="/bufio/bufio.go.html#3236087">err</a></span><br>
<span class="lineno"></span><span class="op" id="3236746">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="3236749">//&nbsp;buffered&nbsp;input&nbsp;and&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3236779">//&nbsp;ReadWriter&nbsp;stores&nbsp;pointers&nbsp;to&nbsp;a&nbsp;Reader&nbsp;and&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="3236835">//&nbsp;It&nbsp;implements&nbsp;io.ReadWriter.</span><br>
<span class="lineno">690</span><span class="keyword" id="3236867">type</span>&nbsp;<span class="ident" id="3236872">ReadWriter</span>&nbsp;<span class="keyword" id="3236883">struct</span>&nbsp;<span class="op" id="3236890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236893">*</span><span class="ident" id="3236894"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236902">*</span><span class="ident" id="3236903"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="3236910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="3236913">//&nbsp;NewReadWriter&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ReadWriter&nbsp;that&nbsp;dispatches&nbsp;to&nbsp;r&nbsp;and&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="3236985">func</span>&nbsp;<span class="ident" id="3236990">NewReadWriter</span><span class="op" id="3237003">(</span><span class="ident" id="3237004">r</span>&nbsp;<span class="op" id="3237006">*</span><span class="ident" id="3237007"><a href="/bufio/bufio.go.html#3220921">Reader</a></span><span class="op" id="3237013">,</span>&nbsp;<span class="ident" id="3237015">w</span>&nbsp;<span class="op" id="3237017">*</span><span class="ident" id="3237018"><a href="/bufio/bufio.go.html#3232512">Writer</a></span><span class="op" id="3237024">)</span>&nbsp;<span class="op" id="3237026">*</span><span class="ident" id="3237027"><a href="/bufio/bufio.go.html#3236872">ReadWriter</a></span>&nbsp;<span class="op" id="3237038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237041">return</span>&nbsp;<span class="op" id="3237048">&amp;</span><span class="ident" id="3237049"><a href="/bufio/bufio.go.html#3236872">ReadWriter</a></span><span class="op" id="3237059">{</span><span class="ident" id="3237060"><a href="/bufio/bufio.go.html#3237004">r</a></span><span class="op" id="3237061">,</span>&nbsp;<span class="ident" id="3237063"><a href="/bufio/bufio.go.html#3237015">w</a></span><span class="op" id="3237064">}</span><br>
<span class="lineno"></span><span class="op" id="3237066">}</span>
</div>
</body>
</html>
