<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html" class="current">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7710176">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7710232">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7710286">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7710337">package</span>&nbsp;<span class="ident" id="7710345">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710351">import</span>&nbsp;<span class="op" id="7710358">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710361">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710370">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710379">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710386">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710392">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710403">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710414">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710425">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7710435">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710438">type</span>&nbsp;<span class="ident" id="7710443">reqTest</span>&nbsp;<span class="keyword" id="7710451">struct</span>&nbsp;<span class="op" id="7710458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710461">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7710469">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710477">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710485">*</span><span class="ident" id="7710486">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710495">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7710503">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710511">Trailer</span>&nbsp;<span class="ident" id="7710519">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710527">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7710535">string</span><br>
<span class="lineno"></span><span class="op" id="7710542">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7710545">var</span>&nbsp;<span class="ident" id="7710549">noError</span>&nbsp;<span class="op" id="7710557">=</span>&nbsp;<span class="string" id="7710559">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7710562">var</span>&nbsp;<span class="ident" id="7710566">noBody</span>&nbsp;<span class="op" id="7710573">=</span>&nbsp;<span class="string" id="7710575">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7710578">var</span>&nbsp;<span class="ident" id="7710582">noTrailer</span>&nbsp;<span class="ident" id="7710592">Header</span>&nbsp;<span class="op" id="7710599">=</span>&nbsp;<span class="builtintype" id="7710601">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7710606">var</span>&nbsp;<span class="ident" id="7710610">reqTests</span>&nbsp;<span class="op" id="7710619">=</span>&nbsp;<span class="op" id="7710621">[</span><span class="op" id="7710622">]</span><span class="ident" id="7710623">reqTest</span><span class="op" id="7710630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710633">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710701">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7710747">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710752">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7710783">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710788">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7710811">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710816">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7710894">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710899">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7710937">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710942">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7710978">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710983">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7711036">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711041">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7711063">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711068">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="7711092">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711097">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7711136">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711141">&#34;abcdef\n???&#34;</span><span class="op" id="7711154">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711159">&amp;</span><span class="ident" id="7711160">Request</span><span class="op" id="7711167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711172">Method</span><span class="op" id="7711178">:</span>&nbsp;<span class="string" id="7711180">&#34;GET&#34;</span><span class="op" id="7711185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711190">URL</span><span class="op" id="7711193">:</span>&nbsp;<span class="op" id="7711195">&amp;</span><span class="ident" id="7711196">url</span><span class="op" id="7711199">.</span><span class="ident" id="7711200">URL</span><span class="op" id="7711203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711209">Scheme</span><span class="op" id="7711215">:</span>&nbsp;<span class="string" id="7711217">&#34;http&#34;</span><span class="op" id="7711223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711229">Host</span><span class="op" id="7711233">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7711237">&#34;www.techcrunch.com&#34;</span><span class="op" id="7711257">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711263">Path</span><span class="op" id="7711267">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7711271">&#34;/&#34;</span><span class="op" id="7711274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711279">}</span><span class="op" id="7711280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711285">Proto</span><span class="op" id="7711290">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711297">&#34;HTTP/1.1&#34;</span><span class="op" id="7711307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711312">ProtoMajor</span><span class="op" id="7711322">:</span>&nbsp;<span class="num" id="7711324">1</span><span class="op" id="7711325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711330">ProtoMinor</span><span class="op" id="7711340">:</span>&nbsp;<span class="num" id="7711342">1</span><span class="op" id="7711343">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711348">Header</span><span class="op" id="7711354">:</span>&nbsp;<span class="ident" id="7711356">Header</span><span class="op" id="7711362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711368">&#34;Accept&#34;</span><span class="op" id="7711376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711388">{</span><span class="string" id="7711389">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="7711454">}</span><span class="op" id="7711455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711461">&#34;Accept-Language&#34;</span><span class="op" id="7711478">:</span>&nbsp;&nbsp;<span class="op" id="7711481">{</span><span class="string" id="7711482">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="7711498">}</span><span class="op" id="7711499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711505">&#34;Accept-Encoding&#34;</span><span class="op" id="7711522">:</span>&nbsp;&nbsp;<span class="op" id="7711525">{</span><span class="string" id="7711526">&#34;gzip,deflate&#34;</span><span class="op" id="7711540">}</span><span class="op" id="7711541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711547">&#34;Accept-Charset&#34;</span><span class="op" id="7711563">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7711567">{</span><span class="string" id="7711568">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="7711600">}</span><span class="op" id="7711601">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711607">&#34;Keep-Alive&#34;</span><span class="op" id="7711619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711627">{</span><span class="string" id="7711628">&#34;300&#34;</span><span class="op" id="7711633">}</span><span class="op" id="7711634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711640">&#34;Proxy-Connection&#34;</span><span class="op" id="7711658">:</span>&nbsp;<span class="op" id="7711660">{</span><span class="string" id="7711661">&#34;keep-alive&#34;</span><span class="op" id="7711673">}</span><span class="op" id="7711674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711680">&#34;Content-Length&#34;</span><span class="op" id="7711696">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7711700">{</span><span class="string" id="7711701">&#34;7&#34;</span><span class="op" id="7711704">}</span><span class="op" id="7711705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711711">&#34;User-Agent&#34;</span><span class="op" id="7711723">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711731">{</span><span class="string" id="7711732">&#34;Fake&#34;</span><span class="op" id="7711738">}</span><span class="op" id="7711739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711744">}</span><span class="op" id="7711745">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711750">Close</span><span class="op" id="7711755">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7711765">false</span><span class="op" id="7711770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711775">ContentLength</span><span class="op" id="7711788">:</span>&nbsp;<span class="num" id="7711790">7</span><span class="op" id="7711791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711796">Host</span><span class="op" id="7711800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711811">&#34;www.techcrunch.com&#34;</span><span class="op" id="7711831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711836">RequestURI</span><span class="op" id="7711846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711851">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="7711879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711883">}</span><span class="op" id="7711884">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711889">&#34;abcdef\n&#34;</span><span class="op" id="7711899">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711904">noTrailer</span><span class="op" id="7711913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711917">noError</span><span class="op" id="7711924">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711927">}</span><span class="op" id="7711928">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711932">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711983">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7712004">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712009">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="7712032">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712037">&amp;</span><span class="ident" id="7712038">Request</span><span class="op" id="7712045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712050">Method</span><span class="op" id="7712056">:</span>&nbsp;<span class="string" id="7712058">&#34;GET&#34;</span><span class="op" id="7712063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712068">URL</span><span class="op" id="7712071">:</span>&nbsp;<span class="op" id="7712073">&amp;</span><span class="ident" id="7712074">url</span><span class="op" id="7712077">.</span><span class="ident" id="7712078">URL</span><span class="op" id="7712081">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712087">Path</span><span class="op" id="7712091">:</span>&nbsp;<span class="string" id="7712093">&#34;/&#34;</span><span class="op" id="7712096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712101">}</span><span class="op" id="7712102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712107">Proto</span><span class="op" id="7712112">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712122">&#34;HTTP/1.1&#34;</span><span class="op" id="7712132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712137">ProtoMajor</span><span class="op" id="7712147">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7712152">1</span><span class="op" id="7712153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712158">ProtoMinor</span><span class="op" id="7712168">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7712173">1</span><span class="op" id="7712174">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712179">Header</span><span class="op" id="7712185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712194">Header</span><span class="op" id="7712200">{</span><span class="op" id="7712201">}</span><span class="op" id="7712202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712207">Close</span><span class="op" id="7712212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7712222">false</span><span class="op" id="7712227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712232">ContentLength</span><span class="op" id="7712245">:</span>&nbsp;<span class="num" id="7712247">0</span><span class="op" id="7712248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712253">Host</span><span class="op" id="7712257">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712268">&#34;foo.com&#34;</span><span class="op" id="7712277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712282">RequestURI</span><span class="op" id="7712292">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712297">&#34;/&#34;</span><span class="op" id="7712300">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712304">}</span><span class="op" id="7712305">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712310">noBody</span><span class="op" id="7712316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712320">noTrailer</span><span class="op" id="7712329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712333">noError</span><span class="op" id="7712340">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712343">}</span><span class="op" id="7712344">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712348">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712403">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712453">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712457">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7712508">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712513">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7712533">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712538">&amp;</span><span class="ident" id="7712539">Request</span><span class="op" id="7712546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712551">Method</span><span class="op" id="7712557">:</span>&nbsp;<span class="string" id="7712559">&#34;GET&#34;</span><span class="op" id="7712564">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712569">URL</span><span class="op" id="7712572">:</span>&nbsp;<span class="op" id="7712574">&amp;</span><span class="ident" id="7712575">url</span><span class="op" id="7712578">.</span><span class="ident" id="7712579">URL</span><span class="op" id="7712582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712588">Path</span><span class="op" id="7712592">:</span>&nbsp;<span class="string" id="7712594">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7712627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712632">}</span><span class="op" id="7712633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712638">Proto</span><span class="op" id="7712643">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712653">&#34;HTTP/1.1&#34;</span><span class="op" id="7712663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712668">ProtoMajor</span><span class="op" id="7712678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7712683">1</span><span class="op" id="7712684">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712689">ProtoMinor</span><span class="op" id="7712699">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7712704">1</span><span class="op" id="7712705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712710">Header</span><span class="op" id="7712716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712725">Header</span><span class="op" id="7712731">{</span><span class="op" id="7712732">}</span><span class="op" id="7712733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712738">Close</span><span class="op" id="7712743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7712753">false</span><span class="op" id="7712758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712763">ContentLength</span><span class="op" id="7712776">:</span>&nbsp;<span class="num" id="7712778">0</span><span class="op" id="7712779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712784">Host</span><span class="op" id="7712788">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712799">&#34;test&#34;</span><span class="op" id="7712805">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712810">RequestURI</span><span class="op" id="7712820">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712825">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7712858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712862">}</span><span class="op" id="7712863">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712868">noBody</span><span class="op" id="7712874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712878">noTrailer</span><span class="op" id="7712887">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712891">noError</span><span class="op" id="7712898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712901">}</span><span class="op" id="7712902">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712906">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712978">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7712982">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7713024">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713029">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7713049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7713053">nil</span><span class="op" id="7713056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713060">noBody</span><span class="op" id="7713066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713070">noTrailer</span><span class="op" id="7713079">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713083">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="7713138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713141">}</span><span class="op" id="7713142">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713146">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713169">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713173">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7713193">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713198">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7713218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7713222">nil</span><span class="op" id="7713225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713229">noBody</span><span class="op" id="7713235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713239">noTrailer</span><span class="op" id="7713248">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713252">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="7713271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713274">}</span><span class="op" id="7713275">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713279">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713316">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713320">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7713342">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713347">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="7713367">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713372">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7713409">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713414">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="7713429">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713434">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="7713449">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713454">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7713462">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713467">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="7713500">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713505">&#34;\r\n&#34;</span><span class="op" id="7713511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713515">&amp;</span><span class="ident" id="7713516">Request</span><span class="op" id="7713523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713528">Method</span><span class="op" id="7713534">:</span>&nbsp;<span class="string" id="7713536">&#34;POST&#34;</span><span class="op" id="7713542">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713547">URL</span><span class="op" id="7713550">:</span>&nbsp;<span class="op" id="7713552">&amp;</span><span class="ident" id="7713553">url</span><span class="op" id="7713556">.</span><span class="ident" id="7713557">URL</span><span class="op" id="7713560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713566">Path</span><span class="op" id="7713570">:</span>&nbsp;<span class="string" id="7713572">&#34;/&#34;</span><span class="op" id="7713575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713580">}</span><span class="op" id="7713581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713586">TransferEncoding</span><span class="op" id="7713602">:</span>&nbsp;<span class="op" id="7713604">[</span><span class="op" id="7713605">]</span><span class="builtintype" id="7713606">string</span><span class="op" id="7713612">{</span><span class="string" id="7713613">&#34;chunked&#34;</span><span class="op" id="7713622">}</span><span class="op" id="7713623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713628">Proto</span><span class="op" id="7713633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713646">&#34;HTTP/1.1&#34;</span><span class="op" id="7713656">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713661">ProtoMajor</span><span class="op" id="7713671">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7713679">1</span><span class="op" id="7713680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713685">ProtoMinor</span><span class="op" id="7713695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7713703">1</span><span class="op" id="7713704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713709">Header</span><span class="op" id="7713715">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713727">Header</span><span class="op" id="7713733">{</span><span class="op" id="7713734">}</span><span class="op" id="7713735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713740">ContentLength</span><span class="op" id="7713753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713758">-</span><span class="num" id="7713759">1</span><span class="op" id="7713760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713765">Host</span><span class="op" id="7713769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713783">&#34;foo.com&#34;</span><span class="op" id="7713792">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713797">RequestURI</span><span class="op" id="7713807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713815">&#34;/&#34;</span><span class="op" id="7713818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713822">}</span><span class="op" id="7713823">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713828">&#34;foobar&#34;</span><span class="op" id="7713836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713840">Header</span><span class="op" id="7713846">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713851">&#34;Trailer-Key&#34;</span><span class="op" id="7713864">:</span>&nbsp;<span class="op" id="7713866">{</span><span class="string" id="7713867">&#34;Trailer-Value&#34;</span><span class="op" id="7713882">}</span><span class="op" id="7713883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713887">}</span><span class="op" id="7713888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713892">noError</span><span class="op" id="7713899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713902">}</span><span class="op" id="7713903">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713907">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7713949">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7713994">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713999">&amp;</span><span class="ident" id="7714000">Request</span><span class="op" id="7714007">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714012">Method</span><span class="op" id="7714018">:</span>&nbsp;<span class="string" id="7714020">&#34;CONNECT&#34;</span><span class="op" id="7714029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714034">URL</span><span class="op" id="7714037">:</span>&nbsp;<span class="op" id="7714039">&amp;</span><span class="ident" id="7714040">url</span><span class="op" id="7714043">.</span><span class="ident" id="7714044">URL</span><span class="op" id="7714047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714053">Host</span><span class="op" id="7714057">:</span>&nbsp;<span class="string" id="7714059">&#34;www.google.com:443&#34;</span><span class="op" id="7714079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714084">}</span><span class="op" id="7714085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714090">Proto</span><span class="op" id="7714095">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714105">&#34;HTTP/1.1&#34;</span><span class="op" id="7714115">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714120">ProtoMajor</span><span class="op" id="7714130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714135">1</span><span class="op" id="7714136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714141">ProtoMinor</span><span class="op" id="7714151">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714156">1</span><span class="op" id="7714157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714162">Header</span><span class="op" id="7714168">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714177">Header</span><span class="op" id="7714183">{</span><span class="op" id="7714184">}</span><span class="op" id="7714185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714190">Close</span><span class="op" id="7714195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7714205">false</span><span class="op" id="7714210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714215">ContentLength</span><span class="op" id="7714228">:</span>&nbsp;<span class="num" id="7714230">0</span><span class="op" id="7714231">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714236">Host</span><span class="op" id="7714240">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714251">&#34;www.google.com:443&#34;</span><span class="op" id="7714271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714276">RequestURI</span><span class="op" id="7714286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714291">&#34;www.google.com:443&#34;</span><span class="op" id="7714311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714315">}</span><span class="op" id="7714316">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714321">noBody</span><span class="op" id="7714327">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714331">noTrailer</span><span class="op" id="7714340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714344">noError</span><span class="op" id="7714351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714354">}</span><span class="op" id="7714355">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7714359">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714400">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7714441">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714446">&amp;</span><span class="ident" id="7714447">Request</span><span class="op" id="7714454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714459">Method</span><span class="op" id="7714465">:</span>&nbsp;<span class="string" id="7714467">&#34;CONNECT&#34;</span><span class="op" id="7714476">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714481">URL</span><span class="op" id="7714484">:</span>&nbsp;<span class="op" id="7714486">&amp;</span><span class="ident" id="7714487">url</span><span class="op" id="7714490">.</span><span class="ident" id="7714491">URL</span><span class="op" id="7714494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714500">Host</span><span class="op" id="7714504">:</span>&nbsp;<span class="string" id="7714506">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7714522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714527">}</span><span class="op" id="7714528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714533">Proto</span><span class="op" id="7714538">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714548">&#34;HTTP/1.1&#34;</span><span class="op" id="7714558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714563">ProtoMajor</span><span class="op" id="7714573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714578">1</span><span class="op" id="7714579">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714584">ProtoMinor</span><span class="op" id="7714594">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714599">1</span><span class="op" id="7714600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714605">Header</span><span class="op" id="7714611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714620">Header</span><span class="op" id="7714626">{</span><span class="op" id="7714627">}</span><span class="op" id="7714628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714633">Close</span><span class="op" id="7714638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7714648">false</span><span class="op" id="7714653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714658">ContentLength</span><span class="op" id="7714671">:</span>&nbsp;<span class="num" id="7714673">0</span><span class="op" id="7714674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714679">Host</span><span class="op" id="7714683">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714694">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7714710">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714715">RequestURI</span><span class="op" id="7714725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714730">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7714746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714750">}</span><span class="op" id="7714751">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714756">noBody</span><span class="op" id="7714762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714766">noTrailer</span><span class="op" id="7714775">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714779">noError</span><span class="op" id="7714786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714789">}</span><span class="op" id="7714790">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7714794">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714823">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714827">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7714862">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714867">&amp;</span><span class="ident" id="7714868">Request</span><span class="op" id="7714875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714880">Method</span><span class="op" id="7714886">:</span>&nbsp;<span class="string" id="7714888">&#34;CONNECT&#34;</span><span class="op" id="7714897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714902">URL</span><span class="op" id="7714905">:</span>&nbsp;<span class="op" id="7714907">&amp;</span><span class="ident" id="7714908">url</span><span class="op" id="7714911">.</span><span class="ident" id="7714912">URL</span><span class="op" id="7714915">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714921">Path</span><span class="op" id="7714925">:</span>&nbsp;<span class="string" id="7714927">&#34;/_goRPC_&#34;</span><span class="op" id="7714937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714942">}</span><span class="op" id="7714943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714948">Proto</span><span class="op" id="7714953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714963">&#34;HTTP/1.1&#34;</span><span class="op" id="7714973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714978">ProtoMajor</span><span class="op" id="7714988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714993">1</span><span class="op" id="7714994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714999">ProtoMinor</span><span class="op" id="7715009">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715014">1</span><span class="op" id="7715015">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715020">Header</span><span class="op" id="7715026">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715035">Header</span><span class="op" id="7715041">{</span><span class="op" id="7715042">}</span><span class="op" id="7715043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715048">Close</span><span class="op" id="7715053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7715063">false</span><span class="op" id="7715068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715073">ContentLength</span><span class="op" id="7715086">:</span>&nbsp;<span class="num" id="7715088">0</span><span class="op" id="7715089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715094">Host</span><span class="op" id="7715098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715109">&#34;&#34;</span><span class="op" id="7715111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715116">RequestURI</span><span class="op" id="7715126">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715131">&#34;/_goRPC_&#34;</span><span class="op" id="7715141">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715145">}</span><span class="op" id="7715146">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715151">noBody</span><span class="op" id="7715157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715161">noTrailer</span><span class="op" id="7715170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715174">noError</span><span class="op" id="7715181">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715184">}</span><span class="op" id="7715185">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7715189">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715240">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7715282">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715286">&amp;</span><span class="ident" id="7715287">Request</span><span class="op" id="7715294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715299">Method</span><span class="op" id="7715305">:</span>&nbsp;<span class="string" id="7715307">&#34;NOTIFY&#34;</span><span class="op" id="7715315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715320">URL</span><span class="op" id="7715323">:</span>&nbsp;<span class="op" id="7715325">&amp;</span><span class="ident" id="7715326">url</span><span class="op" id="7715329">.</span><span class="ident" id="7715330">URL</span><span class="op" id="7715333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715339">Path</span><span class="op" id="7715343">:</span>&nbsp;<span class="string" id="7715345">&#34;*&#34;</span><span class="op" id="7715348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715353">}</span><span class="op" id="7715354">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715359">Proto</span><span class="op" id="7715364">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715371">&#34;HTTP/1.1&#34;</span><span class="op" id="7715381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715386">ProtoMajor</span><span class="op" id="7715396">:</span>&nbsp;<span class="num" id="7715398">1</span><span class="op" id="7715399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715404">ProtoMinor</span><span class="op" id="7715414">:</span>&nbsp;<span class="num" id="7715416">1</span><span class="op" id="7715417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715422">Header</span><span class="op" id="7715428">:</span>&nbsp;<span class="ident" id="7715430">Header</span><span class="op" id="7715436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715442">&#34;Server&#34;</span><span class="op" id="7715450">:</span>&nbsp;<span class="op" id="7715452">[</span><span class="op" id="7715453">]</span><span class="builtintype" id="7715454">string</span><span class="op" id="7715460">{</span><span class="string" id="7715461">&#34;foo&#34;</span><span class="op" id="7715466">}</span><span class="op" id="7715467">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715472">}</span><span class="op" id="7715473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715478">Close</span><span class="op" id="7715483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7715493">false</span><span class="op" id="7715498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715503">ContentLength</span><span class="op" id="7715516">:</span>&nbsp;<span class="num" id="7715518">0</span><span class="op" id="7715519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715524">RequestURI</span><span class="op" id="7715534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715539">&#34;*&#34;</span><span class="op" id="7715542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715546">}</span><span class="op" id="7715547">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715552">noBody</span><span class="op" id="7715558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715562">noTrailer</span><span class="op" id="7715571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715575">noError</span><span class="op" id="7715582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715585">}</span><span class="op" id="7715586">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7715590">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715648">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7715691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715695">&amp;</span><span class="ident" id="7715696">Request</span><span class="op" id="7715703">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715708">Method</span><span class="op" id="7715714">:</span>&nbsp;<span class="string" id="7715716">&#34;OPTIONS&#34;</span><span class="op" id="7715725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715730">URL</span><span class="op" id="7715733">:</span>&nbsp;<span class="op" id="7715735">&amp;</span><span class="ident" id="7715736">url</span><span class="op" id="7715739">.</span><span class="ident" id="7715740">URL</span><span class="op" id="7715743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715749">Path</span><span class="op" id="7715753">:</span>&nbsp;<span class="string" id="7715755">&#34;*&#34;</span><span class="op" id="7715758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715763">}</span><span class="op" id="7715764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715769">Proto</span><span class="op" id="7715774">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715781">&#34;HTTP/1.1&#34;</span><span class="op" id="7715791">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715796">ProtoMajor</span><span class="op" id="7715806">:</span>&nbsp;<span class="num" id="7715808">1</span><span class="op" id="7715809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715814">ProtoMinor</span><span class="op" id="7715824">:</span>&nbsp;<span class="num" id="7715826">1</span><span class="op" id="7715827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715832">Header</span><span class="op" id="7715838">:</span>&nbsp;<span class="ident" id="7715840">Header</span><span class="op" id="7715846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715852">&#34;Server&#34;</span><span class="op" id="7715860">:</span>&nbsp;<span class="op" id="7715862">[</span><span class="op" id="7715863">]</span><span class="builtintype" id="7715864">string</span><span class="op" id="7715870">{</span><span class="string" id="7715871">&#34;foo&#34;</span><span class="op" id="7715876">}</span><span class="op" id="7715877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715882">}</span><span class="op" id="7715883">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715888">Close</span><span class="op" id="7715893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7715903">false</span><span class="op" id="7715908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715913">ContentLength</span><span class="op" id="7715926">:</span>&nbsp;<span class="num" id="7715928">0</span><span class="op" id="7715929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715934">RequestURI</span><span class="op" id="7715944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715949">&#34;*&#34;</span><span class="op" id="7715952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715956">}</span><span class="op" id="7715957">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715962">noBody</span><span class="op" id="7715968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715972">noTrailer</span><span class="op" id="7715981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715985">noError</span><span class="op" id="7715992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715995">}</span><span class="op" id="7715996">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7716000">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7716049">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="7716117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716121">&amp;</span><span class="ident" id="7716122">Request</span><span class="op" id="7716129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716134">Method</span><span class="op" id="7716140">:</span>&nbsp;<span class="string" id="7716142">&#34;GET&#34;</span><span class="op" id="7716147">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716152">URL</span><span class="op" id="7716155">:</span>&nbsp;<span class="op" id="7716157">&amp;</span><span class="ident" id="7716158">url</span><span class="op" id="7716161">.</span><span class="ident" id="7716162">URL</span><span class="op" id="7716165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716171">Path</span><span class="op" id="7716175">:</span>&nbsp;<span class="string" id="7716177">&#34;/&#34;</span><span class="op" id="7716180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716185">}</span><span class="op" id="7716186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716191">Header</span><span class="op" id="7716197">:</span>&nbsp;<span class="ident" id="7716199">Header</span><span class="op" id="7716205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7716211">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7716253">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7716293">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7716311">&#34;Connection&#34;</span><span class="op" id="7716323">:</span>&nbsp;<span class="op" id="7716325">[</span><span class="op" id="7716326">]</span><span class="builtintype" id="7716327">string</span><span class="op" id="7716333">{</span><span class="string" id="7716334">&#34;close&#34;</span><span class="op" id="7716341">}</span><span class="op" id="7716342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716347">}</span><span class="op" id="7716348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716353">Host</span><span class="op" id="7716357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7716365">&#34;issue8261.com&#34;</span><span class="op" id="7716380">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716385">Proto</span><span class="op" id="7716390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7716397">&#34;HTTP/1.1&#34;</span><span class="op" id="7716407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716412">ProtoMajor</span><span class="op" id="7716422">:</span>&nbsp;<span class="num" id="7716424">1</span><span class="op" id="7716425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716430">ProtoMinor</span><span class="op" id="7716440">:</span>&nbsp;<span class="num" id="7716442">1</span><span class="op" id="7716443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716448">Close</span><span class="op" id="7716453">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7716460">true</span><span class="op" id="7716464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716469">RequestURI</span><span class="op" id="7716479">:</span>&nbsp;<span class="string" id="7716481">&#34;/&#34;</span><span class="op" id="7716484">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716488">}</span><span class="op" id="7716489">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716494">noBody</span><span class="op" id="7716500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716504">noTrailer</span><span class="op" id="7716513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716517">noError</span><span class="op" id="7716524">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716527">}</span><span class="op" id="7716528">,</span><br>
<span class="lineno"></span><span class="op" id="7716530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7716533">func</span>&nbsp;<span class="ident" id="7716538">TestReadRequest</span><span class="op" id="7716553">(</span><span class="ident" id="7716554">t</span>&nbsp;<span class="op" id="7716556">*</span><span class="ident" id="7716557">testing</span><span class="op" id="7716564">.</span><span class="ident" id="7716565">T</span><span class="op" id="7716566">)</span>&nbsp;<span class="op" id="7716568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716571">for</span>&nbsp;<span class="ident" id="7716575">i</span>&nbsp;<span class="op" id="7716577">:=</span>&nbsp;<span class="keyword" id="7716580">range</span>&nbsp;<span class="ident" id="7716586">reqTests</span>&nbsp;<span class="op" id="7716595">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716599">tt</span>&nbsp;<span class="op" id="7716602">:=</span>&nbsp;<span class="op" id="7716605">&amp;</span><span class="ident" id="7716606">reqTests</span><span class="op" id="7716614">[</span><span class="ident" id="7716615">i</span><span class="op" id="7716616">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716620">req</span><span class="op" id="7716623">,</span>&nbsp;<span class="ident" id="7716625">err</span>&nbsp;<span class="op" id="7716629">:=</span>&nbsp;<span class="ident" id="7716632">ReadRequest</span><span class="op" id="7716643">(</span><span class="ident" id="7716644">bufio</span><span class="op" id="7716649">.</span><span class="ident" id="7716650">NewReader</span><span class="op" id="7716659">(</span><span class="ident" id="7716660">strings</span><span class="op" id="7716667">.</span><span class="ident" id="7716668">NewReader</span><span class="op" id="7716677">(</span><span class="ident" id="7716678">tt</span><span class="op" id="7716680">.</span><span class="ident" id="7716681">Raw</span><span class="op" id="7716684">)</span><span class="op" id="7716685">)</span><span class="op" id="7716686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716690">if</span>&nbsp;<span class="ident" id="7716693">err</span>&nbsp;<span class="op" id="7716697">!=</span>&nbsp;<span class="builtintype" id="7716700">nil</span>&nbsp;<span class="op" id="7716704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716709">if</span>&nbsp;<span class="ident" id="7716712">err</span><span class="op" id="7716715">.</span><span class="ident" id="7716716">Error</span><span class="op" id="7716721">(</span><span class="op" id="7716722">)</span>&nbsp;<span class="op" id="7716724">!=</span>&nbsp;<span class="ident" id="7716727">tt</span><span class="op" id="7716729">.</span><span class="ident" id="7716730">Error</span>&nbsp;<span class="op" id="7716736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716742">t</span><span class="op" id="7716743">.</span><span class="ident" id="7716744">Errorf</span><span class="op" id="7716750">(</span><span class="string" id="7716751">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7716781">,</span>&nbsp;<span class="ident" id="7716783">i</span><span class="op" id="7716784">,</span>&nbsp;<span class="ident" id="7716786">err</span><span class="op" id="7716789">.</span><span class="ident" id="7716790">Error</span><span class="op" id="7716795">(</span><span class="op" id="7716796">)</span><span class="op" id="7716797">,</span>&nbsp;<span class="ident" id="7716799">tt</span><span class="op" id="7716801">.</span><span class="ident" id="7716802">Error</span><span class="op" id="7716807">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716817">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716832">rbody</span>&nbsp;<span class="op" id="7716838">:=</span>&nbsp;<span class="ident" id="7716841">req</span><span class="op" id="7716844">.</span><span class="ident" id="7716845">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716852">req</span><span class="op" id="7716855">.</span><span class="ident" id="7716856">Body</span>&nbsp;<span class="op" id="7716861">=</span>&nbsp;<span class="builtintype" id="7716863">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716869">testName</span>&nbsp;<span class="op" id="7716878">:=</span>&nbsp;<span class="ident" id="7716881">fmt</span><span class="op" id="7716884">.</span><span class="ident" id="7716885">Sprintf</span><span class="op" id="7716892">(</span><span class="string" id="7716893">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="7716907">,</span>&nbsp;<span class="ident" id="7716909">i</span><span class="op" id="7716910">,</span>&nbsp;<span class="ident" id="7716912">tt</span><span class="op" id="7716914">.</span><span class="ident" id="7716915">Raw</span><span class="op" id="7716918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716922">diff</span><span class="op" id="7716926">(</span><span class="ident" id="7716927">t</span><span class="op" id="7716928">,</span>&nbsp;<span class="ident" id="7716930">testName</span><span class="op" id="7716938">,</span>&nbsp;<span class="ident" id="7716940">req</span><span class="op" id="7716943">,</span>&nbsp;<span class="ident" id="7716945">tt</span><span class="op" id="7716947">.</span><span class="ident" id="7716948">Req</span><span class="op" id="7716951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716955">var</span>&nbsp;<span class="ident" id="7716959">bout</span>&nbsp;<span class="ident" id="7716964">bytes</span><span class="op" id="7716969">.</span><span class="ident" id="7716970">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716979">if</span>&nbsp;<span class="ident" id="7716982">rbody</span>&nbsp;<span class="op" id="7716988">!=</span>&nbsp;<span class="builtintype" id="7716991">nil</span>&nbsp;<span class="op" id="7716995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717000">_</span><span class="op" id="7717001">,</span>&nbsp;<span class="ident" id="7717003">err</span>&nbsp;<span class="op" id="7717007">:=</span>&nbsp;<span class="ident" id="7717010">io</span><span class="op" id="7717012">.</span><span class="ident" id="7717013">Copy</span><span class="op" id="7717017">(</span><span class="op" id="7717018">&amp;</span><span class="ident" id="7717019">bout</span><span class="op" id="7717023">,</span>&nbsp;<span class="ident" id="7717025">rbody</span><span class="op" id="7717030">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717035">if</span>&nbsp;<span class="ident" id="7717038">err</span>&nbsp;<span class="op" id="7717042">!=</span>&nbsp;<span class="builtintype" id="7717045">nil</span>&nbsp;<span class="op" id="7717049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717055">t</span><span class="op" id="7717056">.</span><span class="ident" id="7717057">Fatalf</span><span class="op" id="7717063">(</span><span class="string" id="7717064">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7717086">,</span>&nbsp;<span class="ident" id="7717088">testName</span><span class="op" id="7717096">,</span>&nbsp;<span class="ident" id="7717098">err</span><span class="op" id="7717101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717111">rbody</span><span class="op" id="7717116">.</span><span class="ident" id="7717117">Close</span><span class="op" id="7717122">(</span><span class="op" id="7717123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717127">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717131">body</span>&nbsp;<span class="op" id="7717136">:=</span>&nbsp;<span class="ident" id="7717139">bout</span><span class="op" id="7717143">.</span><span class="ident" id="7717144">String</span><span class="op" id="7717150">(</span><span class="op" id="7717151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717155">if</span>&nbsp;<span class="ident" id="7717158">body</span>&nbsp;<span class="op" id="7717163">!=</span>&nbsp;<span class="ident" id="7717166">tt</span><span class="op" id="7717168">.</span><span class="ident" id="7717169">Body</span>&nbsp;<span class="op" id="7717174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717179">t</span><span class="op" id="7717180">.</span><span class="ident" id="7717181">Errorf</span><span class="op" id="7717187">(</span><span class="string" id="7717188">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7717211">,</span>&nbsp;<span class="ident" id="7717213">testName</span><span class="op" id="7717221">,</span>&nbsp;<span class="ident" id="7717223">body</span><span class="op" id="7717227">,</span>&nbsp;<span class="ident" id="7717229">tt</span><span class="op" id="7717231">.</span><span class="ident" id="7717232">Body</span><span class="op" id="7717236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717244">if</span>&nbsp;<span class="op" id="7717247">!</span><span class="ident" id="7717248">reflect</span><span class="op" id="7717255">.</span><span class="ident" id="7717256">DeepEqual</span><span class="op" id="7717265">(</span><span class="ident" id="7717266">tt</span><span class="op" id="7717268">.</span><span class="ident" id="7717269">Trailer</span><span class="op" id="7717276">,</span>&nbsp;<span class="ident" id="7717278">req</span><span class="op" id="7717281">.</span><span class="ident" id="7717282">Trailer</span><span class="op" id="7717289">)</span>&nbsp;<span class="op" id="7717291">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717296">t</span><span class="op" id="7717297">.</span><span class="ident" id="7717298">Errorf</span><span class="op" id="7717304">(</span><span class="string" id="7717305">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7717347">,</span>&nbsp;<span class="ident" id="7717349">testName</span><span class="op" id="7717357">,</span>&nbsp;<span class="ident" id="7717359">req</span><span class="op" id="7717362">.</span><span class="ident" id="7717363">Trailer</span><span class="op" id="7717370">,</span>&nbsp;<span class="ident" id="7717372">tt</span><span class="op" id="7717374">.</span><span class="ident" id="7717375">Trailer</span><span class="op" id="7717382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717389">}</span><br>
<span class="lineno"></span><span class="op" id="7717391">}</span>
</div>
</body>
</html>
