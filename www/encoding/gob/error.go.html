<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3234377">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3234432">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3234486">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3234537">package</span>&nbsp;<span class="ident" id="3234545">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3234550">import</span>&nbsp;<span class="string" id="3234557">&#34;fmt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3234564">//&nbsp;Errors&nbsp;in&nbsp;decoding&nbsp;and&nbsp;encoding&nbsp;are&nbsp;handled&nbsp;using&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno">10</span><span class="comment" id="3234636">//&nbsp;Panics&nbsp;caused&nbsp;by&nbsp;user&nbsp;error&nbsp;(that&nbsp;is,&nbsp;everything&nbsp;except&nbsp;run-time&nbsp;panics</span><br>
<span class="lineno"></span><span class="comment" id="3234711">//&nbsp;such&nbsp;as&nbsp;&#34;index&nbsp;out&nbsp;of&nbsp;bounds&#34;&nbsp;errors)&nbsp;do&nbsp;not&nbsp;leave&nbsp;the&nbsp;file&nbsp;that&nbsp;caused</span><br>
<span class="lineno"></span><span class="comment" id="3234786">//&nbsp;them,&nbsp;but&nbsp;are&nbsp;instead&nbsp;turned&nbsp;into&nbsp;plain&nbsp;error&nbsp;returns.&nbsp;&nbsp;Encoding&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3234858">//&nbsp;decoding&nbsp;functions&nbsp;and&nbsp;methods&nbsp;that&nbsp;do&nbsp;not&nbsp;return&nbsp;an&nbsp;error&nbsp;either&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3234931">//&nbsp;panic&nbsp;to&nbsp;report&nbsp;an&nbsp;error&nbsp;or&nbsp;are&nbsp;guaranteed&nbsp;error-free.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3234990">//&nbsp;A&nbsp;gobError&nbsp;is&nbsp;used&nbsp;to&nbsp;distinguish&nbsp;errors&nbsp;(panics)&nbsp;generated&nbsp;in&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="3235070">type</span>&nbsp;<span class="ident" id="3235075">gobError</span>&nbsp;<span class="keyword" id="3235084">struct</span>&nbsp;<span class="op" id="3235091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235094">err</span>&nbsp;<span class="builtintype" id="3235098">error</span><br>
<span class="lineno"></span><span class="op" id="3235104">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="3235107">//&nbsp;errorf&nbsp;is&nbsp;like&nbsp;error_&nbsp;but&nbsp;takes&nbsp;Printf-style&nbsp;arguments&nbsp;to&nbsp;construct&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3235188">//&nbsp;It&nbsp;always&nbsp;prefixes&nbsp;the&nbsp;message&nbsp;with&nbsp;&#34;gob:&nbsp;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3235236">func</span>&nbsp;<span class="ident" id="3235241">errorf</span><span class="op" id="3235247">(</span><span class="ident" id="3235248">format</span>&nbsp;<span class="builtintype" id="3235255">string</span><span class="op" id="3235261">,</span>&nbsp;<span class="ident" id="3235263">args</span>&nbsp;<span class="op" id="3235268">...</span><span class="keyword" id="3235271">interface</span><span class="op" id="3235280">{</span><span class="op" id="3235281">}</span><span class="op" id="3235282">)</span>&nbsp;<span class="op" id="3235284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235287">error_</span><span class="op" id="3235293">(</span><span class="ident" id="3235294">fmt</span><span class="op" id="3235297">.</span><span class="ident" id="3235298">Errorf</span><span class="op" id="3235304">(</span><span class="string" id="3235305">&#34;gob:&nbsp;&#34;</span><span class="op" id="3235312">+</span><span class="ident" id="3235313">format</span><span class="op" id="3235319">,</span>&nbsp;<span class="ident" id="3235321">args</span><span class="op" id="3235325">...</span><span class="op" id="3235328">)</span><span class="op" id="3235329">)</span><br>
<span class="lineno">25</span><span class="op" id="3235331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3235334">//&nbsp;error&nbsp;wraps&nbsp;the&nbsp;argument&nbsp;error&nbsp;and&nbsp;uses&nbsp;it&nbsp;as&nbsp;the&nbsp;argument&nbsp;to&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="3235406">func</span>&nbsp;<span class="ident" id="3235411">error_</span><span class="op" id="3235417">(</span><span class="ident" id="3235418">err</span>&nbsp;<span class="builtintype" id="3235422">error</span><span class="op" id="3235427">)</span>&nbsp;<span class="op" id="3235429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3235432">panic</span><span class="op" id="3235437">(</span><span class="ident" id="3235438">gobError</span><span class="op" id="3235446">{</span><span class="ident" id="3235447">err</span><span class="op" id="3235450">}</span><span class="op" id="3235451">)</span><br>
<span class="lineno">30</span><span class="op" id="3235453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3235456">//&nbsp;catchError&nbsp;is&nbsp;meant&nbsp;to&nbsp;be&nbsp;used&nbsp;as&nbsp;a&nbsp;deferred&nbsp;function&nbsp;to&nbsp;turn&nbsp;a&nbsp;panic(gobError)&nbsp;into&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3235546">//&nbsp;plain&nbsp;error.&nbsp;&nbsp;It&nbsp;overwrites&nbsp;the&nbsp;error&nbsp;return&nbsp;of&nbsp;the&nbsp;function&nbsp;that&nbsp;deferred&nbsp;its&nbsp;call.</span><br>
<span class="lineno"></span><span class="keyword" id="3235634">func</span>&nbsp;<span class="ident" id="3235639">catchError</span><span class="op" id="3235649">(</span><span class="ident" id="3235650">err</span>&nbsp;<span class="op" id="3235654">*</span><span class="builtintype" id="3235655">error</span><span class="op" id="3235660">)</span>&nbsp;<span class="op" id="3235662">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235665">if</span>&nbsp;<span class="ident" id="3235668">e</span>&nbsp;<span class="op" id="3235670">:=</span>&nbsp;<span class="builtinfunc" id="3235673">recover</span><span class="op" id="3235680">(</span><span class="op" id="3235681">)</span><span class="op" id="3235682">;</span>&nbsp;<span class="ident" id="3235684">e</span>&nbsp;<span class="op" id="3235686">!=</span>&nbsp;<span class="ident" id="3235689">nil</span>&nbsp;<span class="op" id="3235693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235697">ge</span><span class="op" id="3235699">,</span>&nbsp;<span class="ident" id="3235701">ok</span>&nbsp;<span class="op" id="3235704">:=</span>&nbsp;<span class="ident" id="3235707">e</span><span class="op" id="3235708">.</span><span class="op" id="3235709">(</span><span class="ident" id="3235710">gobError</span><span class="op" id="3235718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235722">if</span>&nbsp;<span class="op" id="3235725">!</span><span class="ident" id="3235726">ok</span>&nbsp;<span class="op" id="3235729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3235734">panic</span><span class="op" id="3235739">(</span><span class="ident" id="3235740">e</span><span class="op" id="3235741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235745">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235749">*</span><span class="ident" id="3235750">err</span>&nbsp;<span class="op" id="3235754">=</span>&nbsp;<span class="ident" id="3235756">ge</span><span class="op" id="3235758">.</span><span class="ident" id="3235759">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235767">return</span><br>
<span class="lineno"></span><span class="op" id="3235774">}</span>
</div>
</body>
</html>
