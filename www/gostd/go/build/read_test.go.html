<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7503826">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7503882">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7503936">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7503987">package</span>&nbsp;<span class="ident" id="7503995">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7504002">import</span>&nbsp;<span class="op" id="7504009">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504012">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504018">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504029">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7504039">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7504042">const</span>&nbsp;<span class="ident" id="7504048">quote</span>&nbsp;<span class="op" id="7504054">=</span>&nbsp;<span class="string" id="7504056">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7504061">type</span>&nbsp;<span class="ident" id="7504066">readTest</span>&nbsp;<span class="keyword" id="7504075">struct</span>&nbsp;<span class="op" id="7504082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7504085">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7504144">in</span>&nbsp;&nbsp;<span class="builtintype" id="7504148">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7504156">err</span>&nbsp;<span class="builtintype" id="7504160">string</span><br>
<span class="lineno"></span><span class="op" id="7504167">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7504170">var</span>&nbsp;<span class="ident" id="7504174">readImportsTests</span>&nbsp;<span class="op" id="7504191">=</span>&nbsp;<span class="op" id="7504193">[</span><span class="op" id="7504194">]</span><span class="ident" id="7504195">readTest</span><span class="op" id="7504203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504210">`package&nbsp;p`</span><span class="op" id="7504221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504225">&#34;&#34;</span><span class="op" id="7504227">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504230">}</span><span class="op" id="7504231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504238">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7504261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504265">&#34;&#34;</span><span class="op" id="7504267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504270">}</span><span class="op" id="7504271">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504278">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7504303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504307">&#34;&#34;</span><span class="op" id="7504309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504312">}</span><span class="op" id="7504313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504316">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504320">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="7504356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504360">&#34;&#34;</span><span class="op" id="7504362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504365">}</span><span class="op" id="7504366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504373">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="7504534">+</span>&nbsp;<span class="ident" id="7504536">quote</span>&nbsp;<span class="op" id="7504542">+</span>&nbsp;<span class="string" id="7504544">`x`</span>&nbsp;<span class="op" id="7504548">+</span>&nbsp;<span class="ident" id="7504550">quote</span>&nbsp;<span class="op" id="7504556">+</span>&nbsp;<span class="string" id="7504558">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="7504579">+</span>&nbsp;<span class="ident" id="7504581">quote</span>&nbsp;<span class="op" id="7504587">+</span>&nbsp;<span class="string" id="7504589">`x`</span>&nbsp;<span class="op" id="7504593">+</span>&nbsp;<span class="ident" id="7504595">quote</span>&nbsp;<span class="op" id="7504601">+</span>&nbsp;<span class="string" id="7504603">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="7504612">+</span>&nbsp;<span class="ident" id="7504614">quote</span>&nbsp;<span class="op" id="7504620">+</span>&nbsp;<span class="string" id="7504622">`x`</span>&nbsp;<span class="op" id="7504626">+</span>&nbsp;<span class="ident" id="7504628">quote</span>&nbsp;<span class="op" id="7504634">+</span>&nbsp;<span class="string" id="7504636">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="7504746">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504750">&#34;&#34;</span><span class="op" id="7504752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504755">}</span><span class="op" id="7504756">,</span><br>
<span class="lineno"></span><span class="op" id="7504758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7504761">var</span>&nbsp;<span class="ident" id="7504765">readCommentsTests</span>&nbsp;<span class="op" id="7504783">=</span>&nbsp;<span class="op" id="7504785">[</span><span class="op" id="7504786">]</span><span class="ident" id="7504787">readTest</span><span class="op" id="7504795">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504802">`ℙpackage&nbsp;p`</span><span class="op" id="7504816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504820">&#34;&#34;</span><span class="op" id="7504822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504825">}</span><span class="op" id="7504826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504829">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504833">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7504859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504863">&#34;&#34;</span><span class="op" id="7504865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504868">}</span><span class="op" id="7504869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504876">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7504904">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504908">&#34;&#34;</span><span class="op" id="7504910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504913">}</span><span class="op" id="7504914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7504917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7504921">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="7505008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7505012">&#34;&#34;</span><span class="op" id="7505014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505017">}</span><span class="op" id="7505018">,</span><br>
<span class="lineno">95</span><span class="op" id="7505020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7505023">func</span>&nbsp;<span class="ident" id="7505028">testRead</span><span class="op" id="7505036">(</span><span class="ident" id="7505037">t</span>&nbsp;<span class="op" id="7505039">*</span><span class="ident" id="7505040">testing</span><span class="op" id="7505047">.</span><span class="ident" id="7505048">T</span><span class="op" id="7505049">,</span>&nbsp;<span class="ident" id="7505051">tests</span>&nbsp;<span class="op" id="7505057">[</span><span class="op" id="7505058">]</span><span class="ident" id="7505059">readTest</span><span class="op" id="7505067">,</span>&nbsp;<span class="ident" id="7505069">read</span>&nbsp;<span class="keyword" id="7505074">func</span><span class="op" id="7505078">(</span><span class="ident" id="7505079">io</span><span class="op" id="7505081">.</span><span class="ident" id="7505082">Reader</span><span class="op" id="7505088">)</span>&nbsp;<span class="op" id="7505090">(</span><span class="op" id="7505091">[</span><span class="op" id="7505092">]</span><span class="builtintype" id="7505093">byte</span><span class="op" id="7505097">,</span>&nbsp;<span class="builtintype" id="7505099">error</span><span class="op" id="7505104">)</span><span class="op" id="7505105">)</span>&nbsp;<span class="op" id="7505107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505110">for</span>&nbsp;<span class="ident" id="7505114">i</span><span class="op" id="7505115">,</span>&nbsp;<span class="ident" id="7505117">tt</span>&nbsp;<span class="op" id="7505120">:=</span>&nbsp;<span class="keyword" id="7505123">range</span>&nbsp;<span class="ident" id="7505129">tests</span>&nbsp;<span class="op" id="7505135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505139">var</span>&nbsp;<span class="ident" id="7505143">in</span><span class="op" id="7505145">,</span>&nbsp;<span class="ident" id="7505147">testOut</span>&nbsp;<span class="builtintype" id="7505155">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505164">j</span>&nbsp;<span class="op" id="7505166">:=</span>&nbsp;<span class="ident" id="7505169">strings</span><span class="op" id="7505176">.</span><span class="ident" id="7505177">Index</span><span class="op" id="7505182">(</span><span class="ident" id="7505183">tt</span><span class="op" id="7505185">.</span><span class="ident" id="7505186">in</span><span class="op" id="7505188">,</span>&nbsp;<span class="string" id="7505190">&#34;ℙ&#34;</span><span class="op" id="7505195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505199">if</span>&nbsp;<span class="ident" id="7505202">j</span>&nbsp;<span class="op" id="7505204">&lt;</span>&nbsp;<span class="num" id="7505206">0</span>&nbsp;<span class="op" id="7505208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505213">in</span>&nbsp;<span class="op" id="7505216">=</span>&nbsp;<span class="ident" id="7505218">tt</span><span class="op" id="7505220">.</span><span class="ident" id="7505221">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505227">testOut</span>&nbsp;<span class="op" id="7505235">=</span>&nbsp;<span class="ident" id="7505237">tt</span><span class="op" id="7505239">.</span><span class="ident" id="7505240">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505245">}</span>&nbsp;<span class="keyword" id="7505247">else</span>&nbsp;<span class="op" id="7505252">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505257">in</span>&nbsp;<span class="op" id="7505260">=</span>&nbsp;<span class="ident" id="7505262">tt</span><span class="op" id="7505264">.</span><span class="ident" id="7505265">in</span><span class="op" id="7505267">[</span><span class="op" id="7505268">:</span><span class="ident" id="7505269">j</span><span class="op" id="7505270">]</span>&nbsp;<span class="op" id="7505272">+</span>&nbsp;<span class="ident" id="7505274">tt</span><span class="op" id="7505276">.</span><span class="ident" id="7505277">in</span><span class="op" id="7505279">[</span><span class="ident" id="7505280">j</span><span class="op" id="7505281">+</span><span class="builtinfunc" id="7505282">len</span><span class="op" id="7505285">(</span><span class="string" id="7505286">&#34;ℙ&#34;</span><span class="op" id="7505291">)</span><span class="op" id="7505292">:</span><span class="op" id="7505293">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505298">testOut</span>&nbsp;<span class="op" id="7505306">=</span>&nbsp;<span class="ident" id="7505308">tt</span><span class="op" id="7505310">.</span><span class="ident" id="7505311">in</span><span class="op" id="7505313">[</span><span class="op" id="7505314">:</span><span class="ident" id="7505315">j</span><span class="op" id="7505316">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505324">r</span>&nbsp;<span class="op" id="7505326">:=</span>&nbsp;<span class="ident" id="7505329">strings</span><span class="op" id="7505336">.</span><span class="ident" id="7505337">NewReader</span><span class="op" id="7505346">(</span><span class="ident" id="7505347">in</span><span class="op" id="7505349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505353">buf</span><span class="op" id="7505356">,</span>&nbsp;<span class="ident" id="7505358">err</span>&nbsp;<span class="op" id="7505362">:=</span>&nbsp;<span class="ident" id="7505365">read</span><span class="op" id="7505369">(</span><span class="ident" id="7505370">r</span><span class="op" id="7505371">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505375">if</span>&nbsp;<span class="ident" id="7505378">err</span>&nbsp;<span class="op" id="7505382">!=</span>&nbsp;<span class="ident" id="7505385">nil</span>&nbsp;<span class="op" id="7505389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505394">if</span>&nbsp;<span class="ident" id="7505397">tt</span><span class="op" id="7505399">.</span><span class="ident" id="7505400">err</span>&nbsp;<span class="op" id="7505404">==</span>&nbsp;<span class="string" id="7505407">&#34;&#34;</span>&nbsp;<span class="op" id="7505410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505416">t</span><span class="op" id="7505417">.</span><span class="ident" id="7505418">Errorf</span><span class="op" id="7505424">(</span><span class="string" id="7505425">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="7505461">,</span>&nbsp;<span class="ident" id="7505463">i</span><span class="op" id="7505464">,</span>&nbsp;<span class="ident" id="7505466">err</span><span class="op" id="7505469">,</span>&nbsp;<span class="builtintype" id="7505471">string</span><span class="op" id="7505477">(</span><span class="ident" id="7505478">buf</span><span class="op" id="7505481">)</span><span class="op" id="7505482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505488">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505500">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505505">if</span>&nbsp;<span class="op" id="7505508">!</span><span class="ident" id="7505509">strings</span><span class="op" id="7505516">.</span><span class="ident" id="7505517">Contains</span><span class="op" id="7505525">(</span><span class="ident" id="7505526">err</span><span class="op" id="7505529">.</span><span class="ident" id="7505530">Error</span><span class="op" id="7505535">(</span><span class="op" id="7505536">)</span><span class="op" id="7505537">,</span>&nbsp;<span class="ident" id="7505539">tt</span><span class="op" id="7505541">.</span><span class="ident" id="7505542">err</span><span class="op" id="7505545">)</span>&nbsp;<span class="op" id="7505547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505553">t</span><span class="op" id="7505554">.</span><span class="ident" id="7505555">Errorf</span><span class="op" id="7505561">(</span><span class="string" id="7505562">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7505588">,</span>&nbsp;<span class="ident" id="7505590">i</span><span class="op" id="7505591">,</span>&nbsp;<span class="ident" id="7505593">err</span><span class="op" id="7505596">,</span>&nbsp;<span class="ident" id="7505598">tt</span><span class="op" id="7505600">.</span><span class="ident" id="7505601">err</span><span class="op" id="7505604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505610">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505627">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505642">if</span>&nbsp;<span class="ident" id="7505645">err</span>&nbsp;<span class="op" id="7505649">==</span>&nbsp;<span class="ident" id="7505652">nil</span>&nbsp;<span class="op" id="7505656">&amp;&amp;</span>&nbsp;<span class="ident" id="7505659">tt</span><span class="op" id="7505661">.</span><span class="ident" id="7505662">err</span>&nbsp;<span class="op" id="7505666">!=</span>&nbsp;<span class="string" id="7505669">&#34;&#34;</span>&nbsp;<span class="op" id="7505672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505677">t</span><span class="op" id="7505678">.</span><span class="ident" id="7505679">Errorf</span><span class="op" id="7505685">(</span><span class="string" id="7505686">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7505713">,</span>&nbsp;<span class="ident" id="7505715">i</span><span class="op" id="7505716">,</span>&nbsp;<span class="ident" id="7505718">tt</span><span class="op" id="7505720">.</span><span class="ident" id="7505721">err</span><span class="op" id="7505724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505729">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505740">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505745">out</span>&nbsp;<span class="op" id="7505749">:=</span>&nbsp;<span class="builtintype" id="7505752">string</span><span class="op" id="7505758">(</span><span class="ident" id="7505759">buf</span><span class="op" id="7505762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7505766">if</span>&nbsp;<span class="ident" id="7505769">out</span>&nbsp;<span class="op" id="7505773">!=</span>&nbsp;<span class="ident" id="7505776">testOut</span>&nbsp;<span class="op" id="7505784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505789">t</span><span class="op" id="7505790">.</span><span class="ident" id="7505791">Errorf</span><span class="op" id="7505797">(</span><span class="string" id="7505798">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="7505838">,</span>&nbsp;<span class="ident" id="7505840">i</span><span class="op" id="7505841">,</span>&nbsp;<span class="ident" id="7505843">out</span><span class="op" id="7505846">,</span>&nbsp;<span class="ident" id="7505848">testOut</span><span class="op" id="7505855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505859">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7505862">}</span><br>
<span class="lineno"></span><span class="op" id="7505864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7505867">func</span>&nbsp;<span class="ident" id="7505872">TestReadImports</span><span class="op" id="7505887">(</span><span class="ident" id="7505888">t</span>&nbsp;<span class="op" id="7505890">*</span><span class="ident" id="7505891">testing</span><span class="op" id="7505898">.</span><span class="ident" id="7505899">T</span><span class="op" id="7505900">)</span>&nbsp;<span class="op" id="7505902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7505905">testRead</span><span class="op" id="7505913">(</span><span class="ident" id="7505914">t</span><span class="op" id="7505915">,</span>&nbsp;<span class="ident" id="7505917">readImportsTests</span><span class="op" id="7505933">,</span>&nbsp;<span class="keyword" id="7505935">func</span><span class="op" id="7505939">(</span><span class="ident" id="7505940">r</span>&nbsp;<span class="ident" id="7505942">io</span><span class="op" id="7505944">.</span><span class="ident" id="7505945">Reader</span><span class="op" id="7505951">)</span>&nbsp;<span class="op" id="7505953">(</span><span class="op" id="7505954">[</span><span class="op" id="7505955">]</span><span class="builtintype" id="7505956">byte</span><span class="op" id="7505960">,</span>&nbsp;<span class="builtintype" id="7505962">error</span><span class="op" id="7505967">)</span>&nbsp;<span class="op" id="7505969">{</span>&nbsp;<span class="keyword" id="7505971">return</span>&nbsp;<span class="ident" id="7505978">readImports</span><span class="op" id="7505989">(</span><span class="ident" id="7505990">r</span><span class="op" id="7505991">,</span>&nbsp;<span class="builtintype" id="7505993">true</span><span class="op" id="7505997">)</span>&nbsp;<span class="op" id="7505999">}</span><span class="op" id="7506000">)</span><br>
<span class="lineno">135</span><span class="op" id="7506002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506005">func</span>&nbsp;<span class="ident" id="7506010">TestReadComments</span><span class="op" id="7506026">(</span><span class="ident" id="7506027">t</span>&nbsp;<span class="op" id="7506029">*</span><span class="ident" id="7506030">testing</span><span class="op" id="7506037">.</span><span class="ident" id="7506038">T</span><span class="op" id="7506039">)</span>&nbsp;<span class="op" id="7506041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506044">testRead</span><span class="op" id="7506052">(</span><span class="ident" id="7506053">t</span><span class="op" id="7506054">,</span>&nbsp;<span class="ident" id="7506056">readCommentsTests</span><span class="op" id="7506073">,</span>&nbsp;<span class="ident" id="7506075">readComments</span><span class="op" id="7506087">)</span><br>
<span class="lineno"></span><span class="op" id="7506089">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7506092">var</span>&nbsp;<span class="ident" id="7506096">readFailuresTests</span>&nbsp;<span class="op" id="7506114">=</span>&nbsp;<span class="op" id="7506116">[</span><span class="op" id="7506117">]</span><span class="ident" id="7506118">readTest</span><span class="op" id="7506126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506133">`package`</span><span class="op" id="7506142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506146">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506160">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506163">}</span><span class="op" id="7506164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506171">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="7506205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506209">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="7506234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506237">}</span><span class="op" id="7506238">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506245">`package&nbsp;p;&nbsp;import`</span><span class="op" id="7506264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506268">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506285">}</span><span class="op" id="7506286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506289">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506293">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="7506314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506318">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506335">}</span><span class="op" id="7506336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506343">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="7506369">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506373">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506390">}</span><span class="op" id="7506391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506398">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="7506420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506424">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506438">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506441">}</span><span class="op" id="7506442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506449">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="7506470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506474">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506491">}</span><span class="op" id="7506492">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506499">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="7506522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506526">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506543">}</span><span class="op" id="7506544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506547">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506551">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="7506575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506579">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506596">}</span><span class="op" id="7506597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506604">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="7506625">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506629">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506646">}</span><span class="op" id="7506647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506654">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="7506677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506681">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506695">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506698">}</span><span class="op" id="7506699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506706">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="7506730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506734">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506751">}</span><span class="op" id="7506752">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506759">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="7506780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506784">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506801">}</span><span class="op" id="7506802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506805">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506809">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="7506831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506835">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506852">}</span><span class="op" id="7506853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506860">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="7506883">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506887">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506904">}</span><span class="op" id="7506905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506912">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="7506936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506940">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7506954">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506957">}</span><span class="op" id="7506958">,</span><br>
<span class="lineno"></span><span class="op" id="7506960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506963">func</span>&nbsp;<span class="ident" id="7506968">TestReadFailures</span><span class="op" id="7506984">(</span><span class="ident" id="7506985">t</span>&nbsp;<span class="op" id="7506987">*</span><span class="ident" id="7506988">testing</span><span class="op" id="7506995">.</span><span class="ident" id="7506996">T</span><span class="op" id="7506997">)</span>&nbsp;<span class="op" id="7506999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7507002">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507059">testRead</span><span class="op" id="7507067">(</span><span class="ident" id="7507068">t</span><span class="op" id="7507069">,</span>&nbsp;<span class="ident" id="7507071">readFailuresTests</span><span class="op" id="7507088">,</span>&nbsp;<span class="keyword" id="7507090">func</span><span class="op" id="7507094">(</span><span class="ident" id="7507095">r</span>&nbsp;<span class="ident" id="7507097">io</span><span class="op" id="7507099">.</span><span class="ident" id="7507100">Reader</span><span class="op" id="7507106">)</span>&nbsp;<span class="op" id="7507108">(</span><span class="op" id="7507109">[</span><span class="op" id="7507110">]</span><span class="builtintype" id="7507111">byte</span><span class="op" id="7507115">,</span>&nbsp;<span class="builtintype" id="7507117">error</span><span class="op" id="7507122">)</span>&nbsp;<span class="op" id="7507124">{</span>&nbsp;<span class="keyword" id="7507126">return</span>&nbsp;<span class="ident" id="7507133">readImports</span><span class="op" id="7507144">(</span><span class="ident" id="7507145">r</span><span class="op" id="7507146">,</span>&nbsp;<span class="builtintype" id="7507148">true</span><span class="op" id="7507152">)</span>&nbsp;<span class="op" id="7507154">}</span><span class="op" id="7507155">)</span><br>
<span class="lineno"></span><span class="op" id="7507157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7507160">func</span>&nbsp;<span class="ident" id="7507165">TestReadFailuresIgnored</span><span class="op" id="7507188">(</span><span class="ident" id="7507189">t</span>&nbsp;<span class="op" id="7507191">*</span><span class="ident" id="7507192">testing</span><span class="op" id="7507199">.</span><span class="ident" id="7507200">T</span><span class="op" id="7507201">)</span>&nbsp;<span class="op" id="7507203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7507206">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7507275">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7507335">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507382">tests</span>&nbsp;<span class="op" id="7507388">:=</span>&nbsp;<span class="builtinfunc" id="7507391">make</span><span class="op" id="7507395">(</span><span class="op" id="7507396">[</span><span class="op" id="7507397">]</span><span class="ident" id="7507398">readTest</span><span class="op" id="7507406">,</span>&nbsp;<span class="builtinfunc" id="7507408">len</span><span class="op" id="7507411">(</span><span class="ident" id="7507412">readFailuresTests</span><span class="op" id="7507429">)</span><span class="op" id="7507430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7507433">copy</span><span class="op" id="7507437">(</span><span class="ident" id="7507438">tests</span><span class="op" id="7507443">,</span>&nbsp;<span class="ident" id="7507445">readFailuresTests</span><span class="op" id="7507462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7507465">for</span>&nbsp;<span class="ident" id="7507469">i</span>&nbsp;<span class="op" id="7507471">:=</span>&nbsp;<span class="keyword" id="7507474">range</span>&nbsp;<span class="ident" id="7507480">tests</span>&nbsp;<span class="op" id="7507486">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507490">tt</span>&nbsp;<span class="op" id="7507493">:=</span>&nbsp;<span class="op" id="7507496">&amp;</span><span class="ident" id="7507497">tests</span><span class="op" id="7507502">[</span><span class="ident" id="7507503">i</span><span class="op" id="7507504">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7507508">if</span>&nbsp;<span class="op" id="7507511">!</span><span class="ident" id="7507512">strings</span><span class="op" id="7507519">.</span><span class="ident" id="7507520">Contains</span><span class="op" id="7507528">(</span><span class="ident" id="7507529">tt</span><span class="op" id="7507531">.</span><span class="ident" id="7507532">err</span><span class="op" id="7507535">,</span>&nbsp;<span class="string" id="7507537">&#34;NUL&#34;</span><span class="op" id="7507542">)</span>&nbsp;<span class="op" id="7507544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507549">tt</span><span class="op" id="7507551">.</span><span class="ident" id="7507552">err</span>&nbsp;<span class="op" id="7507556">=</span>&nbsp;<span class="string" id="7507558">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507566">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507569">testRead</span><span class="op" id="7507577">(</span><span class="ident" id="7507578">t</span><span class="op" id="7507579">,</span>&nbsp;<span class="ident" id="7507581">tests</span><span class="op" id="7507586">,</span>&nbsp;<span class="keyword" id="7507588">func</span><span class="op" id="7507592">(</span><span class="ident" id="7507593">r</span>&nbsp;<span class="ident" id="7507595">io</span><span class="op" id="7507597">.</span><span class="ident" id="7507598">Reader</span><span class="op" id="7507604">)</span>&nbsp;<span class="op" id="7507606">(</span><span class="op" id="7507607">[</span><span class="op" id="7507608">]</span><span class="builtintype" id="7507609">byte</span><span class="op" id="7507613">,</span>&nbsp;<span class="builtintype" id="7507615">error</span><span class="op" id="7507620">)</span>&nbsp;<span class="op" id="7507622">{</span>&nbsp;<span class="keyword" id="7507624">return</span>&nbsp;<span class="ident" id="7507631">readImports</span><span class="op" id="7507642">(</span><span class="ident" id="7507643">r</span><span class="op" id="7507644">,</span>&nbsp;<span class="builtintype" id="7507646">false</span><span class="op" id="7507651">)</span>&nbsp;<span class="op" id="7507653">}</span><span class="op" id="7507654">)</span><br>
<span class="lineno"></span><span class="op" id="7507656">}</span>
</div>
</body>
</html>
