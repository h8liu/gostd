<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8198032">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8198088">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8198142">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8198193">package</span>&nbsp;<span class="ident" id="8198201">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198207">import</span>&nbsp;<span class="op" id="8198214">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8198217">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8198226">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8198234">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8198247">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8198258">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8198268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8198271">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198301">type</span>&nbsp;<span class="ident" id="8198306">example</span>&nbsp;<span class="keyword" id="8198314">struct</span>&nbsp;<span class="op" id="8198321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198324">compact</span>&nbsp;<span class="builtintype" id="8198332">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198340">indent</span>&nbsp;&nbsp;<span class="builtintype" id="8198348">string</span><br>
<span class="lineno">20</span><span class="op" id="8198355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198358">var</span>&nbsp;<span class="ident" id="8198362">examples</span>&nbsp;<span class="op" id="8198371">=</span>&nbsp;<span class="op" id="8198373">[</span><span class="op" id="8198374">]</span><span class="ident" id="8198375">example</span><span class="op" id="8198382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198385">{</span><span class="string" id="8198386">`1`</span><span class="op" id="8198389">,</span>&nbsp;<span class="string" id="8198391">`1`</span><span class="op" id="8198394">}</span><span class="op" id="8198395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198398">{</span><span class="string" id="8198399">`{}`</span><span class="op" id="8198403">,</span>&nbsp;<span class="string" id="8198405">`{}`</span><span class="op" id="8198409">}</span><span class="op" id="8198410">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198413">{</span><span class="string" id="8198414">`[]`</span><span class="op" id="8198418">,</span>&nbsp;<span class="string" id="8198420">`[]`</span><span class="op" id="8198424">}</span><span class="op" id="8198425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198428">{</span><span class="string" id="8198429">`{&#34;&#34;:2}`</span><span class="op" id="8198437">,</span>&nbsp;<span class="string" id="8198439">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="8198456">}</span><span class="op" id="8198457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198460">{</span><span class="string" id="8198461">`[3]`</span><span class="op" id="8198466">,</span>&nbsp;<span class="string" id="8198468">&#34;[\n\t3\n]&#34;</span><span class="op" id="8198479">}</span><span class="op" id="8198480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198483">{</span><span class="string" id="8198484">`[1,2,3]`</span><span class="op" id="8198493">,</span>&nbsp;<span class="string" id="8198495">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="8198518">}</span><span class="op" id="8198519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198522">{</span><span class="string" id="8198523">`{&#34;x&#34;:1}`</span><span class="op" id="8198532">,</span>&nbsp;<span class="string" id="8198534">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="8198552">}</span><span class="op" id="8198553">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198556">{</span><span class="ident" id="8198557">ex1</span><span class="op" id="8198560">,</span>&nbsp;<span class="ident" id="8198562">ex1i</span><span class="op" id="8198566">}</span><span class="op" id="8198567">,</span><br>
<span class="lineno"></span><span class="op" id="8198569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198572">var</span>&nbsp;<span class="ident" id="8198576">ex1</span>&nbsp;<span class="op" id="8198580">=</span>&nbsp;<span class="string" id="8198582">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8198621">var</span>&nbsp;<span class="ident" id="8198625">ex1i</span>&nbsp;<span class="op" id="8198630">=</span>&nbsp;<span class="string" id="8198632">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8198688">func</span>&nbsp;<span class="ident" id="8198693">TestCompact</span><span class="op" id="8198704">(</span><span class="ident" id="8198705">t</span>&nbsp;<span class="op" id="8198707">*</span><span class="ident" id="8198708">testing</span><span class="op" id="8198715">.</span><span class="ident" id="8198716">T</span><span class="op" id="8198717">)</span>&nbsp;<span class="op" id="8198719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8198722">var</span>&nbsp;<span class="ident" id="8198726">buf</span>&nbsp;<span class="ident" id="8198730">bytes</span><span class="op" id="8198735">.</span><span class="ident" id="8198736">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8198744">for</span>&nbsp;<span class="ident" id="8198748">_</span><span class="op" id="8198749">,</span>&nbsp;<span class="ident" id="8198751">tt</span>&nbsp;<span class="op" id="8198754">:=</span>&nbsp;<span class="keyword" id="8198757">range</span>&nbsp;<span class="ident" id="8198763">examples</span>&nbsp;<span class="op" id="8198772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198776">buf</span><span class="op" id="8198779">.</span><span class="ident" id="8198780">Reset</span><span class="op" id="8198785">(</span><span class="op" id="8198786">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8198790">if</span>&nbsp;<span class="ident" id="8198793">err</span>&nbsp;<span class="op" id="8198797">:=</span>&nbsp;<span class="ident" id="8198800">Compact</span><span class="op" id="8198807">(</span><span class="op" id="8198808">&amp;</span><span class="ident" id="8198809">buf</span><span class="op" id="8198812">,</span>&nbsp;<span class="op" id="8198814">[</span><span class="op" id="8198815">]</span><span class="builtintype" id="8198816">byte</span><span class="op" id="8198820">(</span><span class="ident" id="8198821">tt</span><span class="op" id="8198823">.</span><span class="ident" id="8198824">compact</span><span class="op" id="8198831">)</span><span class="op" id="8198832">)</span><span class="op" id="8198833">;</span>&nbsp;<span class="ident" id="8198835">err</span>&nbsp;<span class="op" id="8198839">!=</span>&nbsp;<span class="ident" id="8198842">nil</span>&nbsp;<span class="op" id="8198846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198851">t</span><span class="op" id="8198852">.</span><span class="ident" id="8198853">Errorf</span><span class="op" id="8198859">(</span><span class="string" id="8198860">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8198878">,</span>&nbsp;<span class="ident" id="8198880">tt</span><span class="op" id="8198882">.</span><span class="ident" id="8198883">compact</span><span class="op" id="8198890">,</span>&nbsp;<span class="ident" id="8198892">err</span><span class="op" id="8198895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198899">}</span>&nbsp;<span class="keyword" id="8198901">else</span>&nbsp;<span class="keyword" id="8198906">if</span>&nbsp;<span class="ident" id="8198909">s</span>&nbsp;<span class="op" id="8198911">:=</span>&nbsp;<span class="ident" id="8198914">buf</span><span class="op" id="8198917">.</span><span class="ident" id="8198918">String</span><span class="op" id="8198924">(</span><span class="op" id="8198925">)</span><span class="op" id="8198926">;</span>&nbsp;<span class="ident" id="8198928">s</span>&nbsp;<span class="op" id="8198930">!=</span>&nbsp;<span class="ident" id="8198933">tt</span><span class="op" id="8198935">.</span><span class="ident" id="8198936">compact</span>&nbsp;<span class="op" id="8198944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198949">t</span><span class="op" id="8198950">.</span><span class="ident" id="8198951">Errorf</span><span class="op" id="8198957">(</span><span class="string" id="8198958">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8198993">,</span>&nbsp;<span class="ident" id="8198995">tt</span><span class="op" id="8198997">.</span><span class="ident" id="8198998">compact</span><span class="op" id="8199005">,</span>&nbsp;<span class="ident" id="8199007">s</span><span class="op" id="8199008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199012">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199017">buf</span><span class="op" id="8199020">.</span><span class="ident" id="8199021">Reset</span><span class="op" id="8199026">(</span><span class="op" id="8199027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199031">if</span>&nbsp;<span class="ident" id="8199034">err</span>&nbsp;<span class="op" id="8199038">:=</span>&nbsp;<span class="ident" id="8199041">Compact</span><span class="op" id="8199048">(</span><span class="op" id="8199049">&amp;</span><span class="ident" id="8199050">buf</span><span class="op" id="8199053">,</span>&nbsp;<span class="op" id="8199055">[</span><span class="op" id="8199056">]</span><span class="builtintype" id="8199057">byte</span><span class="op" id="8199061">(</span><span class="ident" id="8199062">tt</span><span class="op" id="8199064">.</span><span class="ident" id="8199065">indent</span><span class="op" id="8199071">)</span><span class="op" id="8199072">)</span><span class="op" id="8199073">;</span>&nbsp;<span class="ident" id="8199075">err</span>&nbsp;<span class="op" id="8199079">!=</span>&nbsp;<span class="ident" id="8199082">nil</span>&nbsp;<span class="op" id="8199086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199091">t</span><span class="op" id="8199092">.</span><span class="ident" id="8199093">Errorf</span><span class="op" id="8199099">(</span><span class="string" id="8199100">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8199118">,</span>&nbsp;<span class="ident" id="8199120">tt</span><span class="op" id="8199122">.</span><span class="ident" id="8199123">indent</span><span class="op" id="8199129">,</span>&nbsp;<span class="ident" id="8199131">err</span><span class="op" id="8199134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199139">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199150">}</span>&nbsp;<span class="keyword" id="8199152">else</span>&nbsp;<span class="keyword" id="8199157">if</span>&nbsp;<span class="ident" id="8199160">s</span>&nbsp;<span class="op" id="8199162">:=</span>&nbsp;<span class="ident" id="8199165">buf</span><span class="op" id="8199168">.</span><span class="ident" id="8199169">String</span><span class="op" id="8199175">(</span><span class="op" id="8199176">)</span><span class="op" id="8199177">;</span>&nbsp;<span class="ident" id="8199179">s</span>&nbsp;<span class="op" id="8199181">!=</span>&nbsp;<span class="ident" id="8199184">tt</span><span class="op" id="8199186">.</span><span class="ident" id="8199187">compact</span>&nbsp;<span class="op" id="8199195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199200">t</span><span class="op" id="8199201">.</span><span class="ident" id="8199202">Errorf</span><span class="op" id="8199208">(</span><span class="string" id="8199209">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8199239">,</span>&nbsp;<span class="ident" id="8199241">tt</span><span class="op" id="8199243">.</span><span class="ident" id="8199244">indent</span><span class="op" id="8199250">,</span>&nbsp;<span class="ident" id="8199252">s</span><span class="op" id="8199253">,</span>&nbsp;<span class="ident" id="8199255">tt</span><span class="op" id="8199257">.</span><span class="ident" id="8199258">compact</span><span class="op" id="8199265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199272">}</span><br>
<span class="lineno"></span><span class="op" id="8199274">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8199277">func</span>&nbsp;<span class="ident" id="8199282">TestCompactSeparators</span><span class="op" id="8199303">(</span><span class="ident" id="8199304">t</span>&nbsp;<span class="op" id="8199306">*</span><span class="ident" id="8199307">testing</span><span class="op" id="8199314">.</span><span class="ident" id="8199315">T</span><span class="op" id="8199316">)</span>&nbsp;<span class="op" id="8199318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8199321">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8199377">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199421">tests</span>&nbsp;<span class="op" id="8199427">:=</span>&nbsp;<span class="op" id="8199430">[</span><span class="op" id="8199431">]</span><span class="keyword" id="8199432">struct</span>&nbsp;<span class="op" id="8199439">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199443">in</span><span class="op" id="8199445">,</span>&nbsp;<span class="ident" id="8199447">compact</span>&nbsp;<span class="builtintype" id="8199455">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199463">}</span><span class="op" id="8199464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199468">{</span><span class="string" id="8199469">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="8199486">,</span>&nbsp;<span class="string" id="8199488">`{&#34;\u2028&#34;:1}`</span><span class="op" id="8199502">}</span><span class="op" id="8199503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199507">{</span><span class="string" id="8199508">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="8199525">,</span>&nbsp;<span class="string" id="8199527">`{&#34;\u2029&#34;:2}`</span><span class="op" id="8199541">}</span><span class="op" id="8199542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199545">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199548">for</span>&nbsp;<span class="ident" id="8199552">_</span><span class="op" id="8199553">,</span>&nbsp;<span class="ident" id="8199555">tt</span>&nbsp;<span class="op" id="8199558">:=</span>&nbsp;<span class="keyword" id="8199561">range</span>&nbsp;<span class="ident" id="8199567">tests</span>&nbsp;<span class="op" id="8199573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199577">var</span>&nbsp;<span class="ident" id="8199581">buf</span>&nbsp;<span class="ident" id="8199585">bytes</span><span class="op" id="8199590">.</span><span class="ident" id="8199591">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199600">if</span>&nbsp;<span class="ident" id="8199603">err</span>&nbsp;<span class="op" id="8199607">:=</span>&nbsp;<span class="ident" id="8199610">Compact</span><span class="op" id="8199617">(</span><span class="op" id="8199618">&amp;</span><span class="ident" id="8199619">buf</span><span class="op" id="8199622">,</span>&nbsp;<span class="op" id="8199624">[</span><span class="op" id="8199625">]</span><span class="builtintype" id="8199626">byte</span><span class="op" id="8199630">(</span><span class="ident" id="8199631">tt</span><span class="op" id="8199633">.</span><span class="ident" id="8199634">in</span><span class="op" id="8199636">)</span><span class="op" id="8199637">)</span><span class="op" id="8199638">;</span>&nbsp;<span class="ident" id="8199640">err</span>&nbsp;<span class="op" id="8199644">!=</span>&nbsp;<span class="ident" id="8199647">nil</span>&nbsp;<span class="op" id="8199651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199656">t</span><span class="op" id="8199657">.</span><span class="ident" id="8199658">Errorf</span><span class="op" id="8199664">(</span><span class="string" id="8199665">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="8199682">,</span>&nbsp;<span class="ident" id="8199684">tt</span><span class="op" id="8199686">.</span><span class="ident" id="8199687">in</span><span class="op" id="8199689">,</span>&nbsp;<span class="ident" id="8199691">err</span><span class="op" id="8199694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199698">}</span>&nbsp;<span class="keyword" id="8199700">else</span>&nbsp;<span class="keyword" id="8199705">if</span>&nbsp;<span class="ident" id="8199708">s</span>&nbsp;<span class="op" id="8199710">:=</span>&nbsp;<span class="ident" id="8199713">buf</span><span class="op" id="8199716">.</span><span class="ident" id="8199717">String</span><span class="op" id="8199723">(</span><span class="op" id="8199724">)</span><span class="op" id="8199725">;</span>&nbsp;<span class="ident" id="8199727">s</span>&nbsp;<span class="op" id="8199729">!=</span>&nbsp;<span class="ident" id="8199732">tt</span><span class="op" id="8199734">.</span><span class="ident" id="8199735">compact</span>&nbsp;<span class="op" id="8199743">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199748">t</span><span class="op" id="8199749">.</span><span class="ident" id="8199750">Errorf</span><span class="op" id="8199756">(</span><span class="string" id="8199757">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8199784">,</span>&nbsp;<span class="ident" id="8199786">tt</span><span class="op" id="8199788">.</span><span class="ident" id="8199789">in</span><span class="op" id="8199791">,</span>&nbsp;<span class="ident" id="8199793">s</span><span class="op" id="8199794">,</span>&nbsp;<span class="ident" id="8199796">tt</span><span class="op" id="8199798">.</span><span class="ident" id="8199799">compact</span><span class="op" id="8199806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8199813">}</span><br>
<span class="lineno"></span><span class="op" id="8199815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="8199818">func</span>&nbsp;<span class="ident" id="8199823">TestIndent</span><span class="op" id="8199833">(</span><span class="ident" id="8199834">t</span>&nbsp;<span class="op" id="8199836">*</span><span class="ident" id="8199837">testing</span><span class="op" id="8199844">.</span><span class="ident" id="8199845">T</span><span class="op" id="8199846">)</span>&nbsp;<span class="op" id="8199848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199851">var</span>&nbsp;<span class="ident" id="8199855">buf</span>&nbsp;<span class="ident" id="8199859">bytes</span><span class="op" id="8199864">.</span><span class="ident" id="8199865">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199873">for</span>&nbsp;<span class="ident" id="8199877">_</span><span class="op" id="8199878">,</span>&nbsp;<span class="ident" id="8199880">tt</span>&nbsp;<span class="op" id="8199883">:=</span>&nbsp;<span class="keyword" id="8199886">range</span>&nbsp;<span class="ident" id="8199892">examples</span>&nbsp;<span class="op" id="8199901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199905">buf</span><span class="op" id="8199908">.</span><span class="ident" id="8199909">Reset</span><span class="op" id="8199914">(</span><span class="op" id="8199915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8199919">if</span>&nbsp;<span class="ident" id="8199922">err</span>&nbsp;<span class="op" id="8199926">:=</span>&nbsp;<span class="ident" id="8199929">Indent</span><span class="op" id="8199935">(</span><span class="op" id="8199936">&amp;</span><span class="ident" id="8199937">buf</span><span class="op" id="8199940">,</span>&nbsp;<span class="op" id="8199942">[</span><span class="op" id="8199943">]</span><span class="builtintype" id="8199944">byte</span><span class="op" id="8199948">(</span><span class="ident" id="8199949">tt</span><span class="op" id="8199951">.</span><span class="ident" id="8199952">indent</span><span class="op" id="8199958">)</span><span class="op" id="8199959">,</span>&nbsp;<span class="string" id="8199961">&#34;&#34;</span><span class="op" id="8199963">,</span>&nbsp;<span class="string" id="8199965">&#34;\t&#34;</span><span class="op" id="8199969">)</span><span class="op" id="8199970">;</span>&nbsp;<span class="ident" id="8199972">err</span>&nbsp;<span class="op" id="8199976">!=</span>&nbsp;<span class="ident" id="8199979">nil</span>&nbsp;<span class="op" id="8199983">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8199988">t</span><span class="op" id="8199989">.</span><span class="ident" id="8199990">Errorf</span><span class="op" id="8199996">(</span><span class="string" id="8199997">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8200014">,</span>&nbsp;<span class="ident" id="8200016">tt</span><span class="op" id="8200018">.</span><span class="ident" id="8200019">indent</span><span class="op" id="8200025">,</span>&nbsp;<span class="ident" id="8200027">err</span><span class="op" id="8200030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200034">}</span>&nbsp;<span class="keyword" id="8200036">else</span>&nbsp;<span class="keyword" id="8200041">if</span>&nbsp;<span class="ident" id="8200044">s</span>&nbsp;<span class="op" id="8200046">:=</span>&nbsp;<span class="ident" id="8200049">buf</span><span class="op" id="8200052">.</span><span class="ident" id="8200053">String</span><span class="op" id="8200059">(</span><span class="op" id="8200060">)</span><span class="op" id="8200061">;</span>&nbsp;<span class="ident" id="8200063">s</span>&nbsp;<span class="op" id="8200065">!=</span>&nbsp;<span class="ident" id="8200068">tt</span><span class="op" id="8200070">.</span><span class="ident" id="8200071">indent</span>&nbsp;<span class="op" id="8200078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200083">t</span><span class="op" id="8200084">.</span><span class="ident" id="8200085">Errorf</span><span class="op" id="8200091">(</span><span class="string" id="8200092">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8200126">,</span>&nbsp;<span class="ident" id="8200128">tt</span><span class="op" id="8200130">.</span><span class="ident" id="8200131">indent</span><span class="op" id="8200137">,</span>&nbsp;<span class="ident" id="8200139">s</span><span class="op" id="8200140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200149">buf</span><span class="op" id="8200152">.</span><span class="ident" id="8200153">Reset</span><span class="op" id="8200158">(</span><span class="op" id="8200159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200163">if</span>&nbsp;<span class="ident" id="8200166">err</span>&nbsp;<span class="op" id="8200170">:=</span>&nbsp;<span class="ident" id="8200173">Indent</span><span class="op" id="8200179">(</span><span class="op" id="8200180">&amp;</span><span class="ident" id="8200181">buf</span><span class="op" id="8200184">,</span>&nbsp;<span class="op" id="8200186">[</span><span class="op" id="8200187">]</span><span class="builtintype" id="8200188">byte</span><span class="op" id="8200192">(</span><span class="ident" id="8200193">tt</span><span class="op" id="8200195">.</span><span class="ident" id="8200196">compact</span><span class="op" id="8200203">)</span><span class="op" id="8200204">,</span>&nbsp;<span class="string" id="8200206">&#34;&#34;</span><span class="op" id="8200208">,</span>&nbsp;<span class="string" id="8200210">&#34;\t&#34;</span><span class="op" id="8200214">)</span><span class="op" id="8200215">;</span>&nbsp;<span class="ident" id="8200217">err</span>&nbsp;<span class="op" id="8200221">!=</span>&nbsp;<span class="ident" id="8200224">nil</span>&nbsp;<span class="op" id="8200228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200233">t</span><span class="op" id="8200234">.</span><span class="ident" id="8200235">Errorf</span><span class="op" id="8200241">(</span><span class="string" id="8200242">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8200259">,</span>&nbsp;<span class="ident" id="8200261">tt</span><span class="op" id="8200263">.</span><span class="ident" id="8200264">compact</span><span class="op" id="8200271">,</span>&nbsp;<span class="ident" id="8200273">err</span><span class="op" id="8200276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200281">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200292">}</span>&nbsp;<span class="keyword" id="8200294">else</span>&nbsp;<span class="keyword" id="8200299">if</span>&nbsp;<span class="ident" id="8200302">s</span>&nbsp;<span class="op" id="8200304">:=</span>&nbsp;<span class="ident" id="8200307">buf</span><span class="op" id="8200310">.</span><span class="ident" id="8200311">String</span><span class="op" id="8200317">(</span><span class="op" id="8200318">)</span><span class="op" id="8200319">;</span>&nbsp;<span class="ident" id="8200321">s</span>&nbsp;<span class="op" id="8200323">!=</span>&nbsp;<span class="ident" id="8200326">tt</span><span class="op" id="8200328">.</span><span class="ident" id="8200329">indent</span>&nbsp;<span class="op" id="8200336">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200341">t</span><span class="op" id="8200342">.</span><span class="ident" id="8200343">Errorf</span><span class="op" id="8200349">(</span><span class="string" id="8200350">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8200379">,</span>&nbsp;<span class="ident" id="8200381">tt</span><span class="op" id="8200383">.</span><span class="ident" id="8200384">compact</span><span class="op" id="8200391">,</span>&nbsp;<span class="ident" id="8200393">s</span><span class="op" id="8200394">,</span>&nbsp;<span class="ident" id="8200396">tt</span><span class="op" id="8200398">.</span><span class="ident" id="8200399">indent</span><span class="op" id="8200405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200412">}</span><br>
<span class="lineno"></span><span class="op" id="8200414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="8200417">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8200456">func</span>&nbsp;<span class="ident" id="8200461">TestCompactBig</span><span class="op" id="8200475">(</span><span class="ident" id="8200476">t</span>&nbsp;<span class="op" id="8200478">*</span><span class="ident" id="8200479">testing</span><span class="op" id="8200486">.</span><span class="ident" id="8200487">T</span><span class="op" id="8200488">)</span>&nbsp;<span class="op" id="8200490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200493">initBig</span><span class="op" id="8200500">(</span><span class="op" id="8200501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200504">var</span>&nbsp;<span class="ident" id="8200508">buf</span>&nbsp;<span class="ident" id="8200512">bytes</span><span class="op" id="8200517">.</span><span class="ident" id="8200518">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200526">if</span>&nbsp;<span class="ident" id="8200529">err</span>&nbsp;<span class="op" id="8200533">:=</span>&nbsp;<span class="ident" id="8200536">Compact</span><span class="op" id="8200543">(</span><span class="op" id="8200544">&amp;</span><span class="ident" id="8200545">buf</span><span class="op" id="8200548">,</span>&nbsp;<span class="ident" id="8200550">jsonBig</span><span class="op" id="8200557">)</span><span class="op" id="8200558">;</span>&nbsp;<span class="ident" id="8200560">err</span>&nbsp;<span class="op" id="8200564">!=</span>&nbsp;<span class="ident" id="8200567">nil</span>&nbsp;<span class="op" id="8200571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200575">t</span><span class="op" id="8200576">.</span><span class="ident" id="8200577">Fatalf</span><span class="op" id="8200583">(</span><span class="string" id="8200584">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8200597">,</span>&nbsp;<span class="ident" id="8200599">err</span><span class="op" id="8200602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200608">b</span>&nbsp;<span class="op" id="8200610">:=</span>&nbsp;<span class="ident" id="8200613">buf</span><span class="op" id="8200616">.</span><span class="ident" id="8200617">Bytes</span><span class="op" id="8200622">(</span><span class="op" id="8200623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200626">if</span>&nbsp;<span class="op" id="8200629">!</span><span class="ident" id="8200630">bytes</span><span class="op" id="8200635">.</span><span class="ident" id="8200636">Equal</span><span class="op" id="8200641">(</span><span class="ident" id="8200642">b</span><span class="op" id="8200643">,</span>&nbsp;<span class="ident" id="8200645">jsonBig</span><span class="op" id="8200652">)</span>&nbsp;<span class="op" id="8200654">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200658">t</span><span class="op" id="8200659">.</span><span class="ident" id="8200660">Error</span><span class="op" id="8200665">(</span><span class="string" id="8200666">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8200695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200699">diff</span><span class="op" id="8200703">(</span><span class="ident" id="8200704">t</span><span class="op" id="8200705">,</span>&nbsp;<span class="ident" id="8200707">b</span><span class="op" id="8200708">,</span>&nbsp;<span class="ident" id="8200710">jsonBig</span><span class="op" id="8200717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200721">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200729">}</span><br>
<span class="lineno"></span><span class="op" id="8200731">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="8200734">func</span>&nbsp;<span class="ident" id="8200739">TestIndentBig</span><span class="op" id="8200752">(</span><span class="ident" id="8200753">t</span>&nbsp;<span class="op" id="8200755">*</span><span class="ident" id="8200756">testing</span><span class="op" id="8200763">.</span><span class="ident" id="8200764">T</span><span class="op" id="8200765">)</span>&nbsp;<span class="op" id="8200767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200770">initBig</span><span class="op" id="8200777">(</span><span class="op" id="8200778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200781">var</span>&nbsp;<span class="ident" id="8200785">buf</span>&nbsp;<span class="ident" id="8200789">bytes</span><span class="op" id="8200794">.</span><span class="ident" id="8200795">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200803">if</span>&nbsp;<span class="ident" id="8200806">err</span>&nbsp;<span class="op" id="8200810">:=</span>&nbsp;<span class="ident" id="8200813">Indent</span><span class="op" id="8200819">(</span><span class="op" id="8200820">&amp;</span><span class="ident" id="8200821">buf</span><span class="op" id="8200824">,</span>&nbsp;<span class="ident" id="8200826">jsonBig</span><span class="op" id="8200833">,</span>&nbsp;<span class="string" id="8200835">&#34;&#34;</span><span class="op" id="8200837">,</span>&nbsp;<span class="string" id="8200839">&#34;\t&#34;</span><span class="op" id="8200843">)</span><span class="op" id="8200844">;</span>&nbsp;<span class="ident" id="8200846">err</span>&nbsp;<span class="op" id="8200850">!=</span>&nbsp;<span class="ident" id="8200853">nil</span>&nbsp;<span class="op" id="8200857">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200861">t</span><span class="op" id="8200862">.</span><span class="ident" id="8200863">Fatalf</span><span class="op" id="8200869">(</span><span class="string" id="8200870">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="8200883">,</span>&nbsp;<span class="ident" id="8200885">err</span><span class="op" id="8200888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8200891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8200894">b</span>&nbsp;<span class="op" id="8200896">:=</span>&nbsp;<span class="ident" id="8200899">buf</span><span class="op" id="8200902">.</span><span class="ident" id="8200903">Bytes</span><span class="op" id="8200908">(</span><span class="op" id="8200909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8200912">if</span>&nbsp;<span class="builtinfunc" id="8200915">len</span><span class="op" id="8200918">(</span><span class="ident" id="8200919">b</span><span class="op" id="8200920">)</span>&nbsp;<span class="op" id="8200922">==</span>&nbsp;<span class="builtinfunc" id="8200925">len</span><span class="op" id="8200928">(</span><span class="ident" id="8200929">jsonBig</span><span class="op" id="8200936">)</span>&nbsp;<span class="op" id="8200938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8200942">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8200991">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201028">t</span><span class="op" id="8201029">.</span><span class="ident" id="8201030">Fatalf</span><span class="op" id="8201036">(</span><span class="string" id="8201037">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="8201073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8201080">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201105">var</span>&nbsp;<span class="ident" id="8201109">buf1</span>&nbsp;<span class="ident" id="8201114">bytes</span><span class="op" id="8201119">.</span><span class="ident" id="8201120">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201128">if</span>&nbsp;<span class="ident" id="8201131">err</span>&nbsp;<span class="op" id="8201135">:=</span>&nbsp;<span class="ident" id="8201138">Indent</span><span class="op" id="8201144">(</span><span class="op" id="8201145">&amp;</span><span class="ident" id="8201146">buf1</span><span class="op" id="8201150">,</span>&nbsp;<span class="ident" id="8201152">b</span><span class="op" id="8201153">,</span>&nbsp;<span class="string" id="8201155">&#34;&#34;</span><span class="op" id="8201157">,</span>&nbsp;<span class="string" id="8201159">&#34;\t&#34;</span><span class="op" id="8201163">)</span><span class="op" id="8201164">;</span>&nbsp;<span class="ident" id="8201166">err</span>&nbsp;<span class="op" id="8201170">!=</span>&nbsp;<span class="ident" id="8201173">nil</span>&nbsp;<span class="op" id="8201177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201181">t</span><span class="op" id="8201182">.</span><span class="ident" id="8201183">Fatalf</span><span class="op" id="8201189">(</span><span class="string" id="8201190">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="8201203">,</span>&nbsp;<span class="ident" id="8201205">err</span><span class="op" id="8201208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201214">b1</span>&nbsp;<span class="op" id="8201217">:=</span>&nbsp;<span class="ident" id="8201220">buf1</span><span class="op" id="8201224">.</span><span class="ident" id="8201225">Bytes</span><span class="op" id="8201230">(</span><span class="op" id="8201231">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201234">if</span>&nbsp;<span class="op" id="8201237">!</span><span class="ident" id="8201238">bytes</span><span class="op" id="8201243">.</span><span class="ident" id="8201244">Equal</span><span class="op" id="8201249">(</span><span class="ident" id="8201250">b1</span><span class="op" id="8201252">,</span>&nbsp;<span class="ident" id="8201254">b</span><span class="op" id="8201255">)</span>&nbsp;<span class="op" id="8201257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201261">t</span><span class="op" id="8201262">.</span><span class="ident" id="8201263">Error</span><span class="op" id="8201268">(</span><span class="string" id="8201269">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="8201313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201317">diff</span><span class="op" id="8201321">(</span><span class="ident" id="8201322">t</span><span class="op" id="8201323">,</span>&nbsp;<span class="ident" id="8201325">b1</span><span class="op" id="8201327">,</span>&nbsp;<span class="ident" id="8201329">b</span><span class="op" id="8201330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201334">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201342">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8201346">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201378">buf1</span><span class="op" id="8201382">.</span><span class="ident" id="8201383">Reset</span><span class="op" id="8201388">(</span><span class="op" id="8201389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201392">if</span>&nbsp;<span class="ident" id="8201395">err</span>&nbsp;<span class="op" id="8201399">:=</span>&nbsp;<span class="ident" id="8201402">Compact</span><span class="op" id="8201409">(</span><span class="op" id="8201410">&amp;</span><span class="ident" id="8201411">buf1</span><span class="op" id="8201415">,</span>&nbsp;<span class="ident" id="8201417">b</span><span class="op" id="8201418">)</span><span class="op" id="8201419">;</span>&nbsp;<span class="ident" id="8201421">err</span>&nbsp;<span class="op" id="8201425">!=</span>&nbsp;<span class="ident" id="8201428">nil</span>&nbsp;<span class="op" id="8201432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201436">t</span><span class="op" id="8201437">.</span><span class="ident" id="8201438">Fatalf</span><span class="op" id="8201444">(</span><span class="string" id="8201445">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8201458">,</span>&nbsp;<span class="ident" id="8201460">err</span><span class="op" id="8201463">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201469">b1</span>&nbsp;<span class="op" id="8201472">=</span>&nbsp;<span class="ident" id="8201474">buf1</span><span class="op" id="8201478">.</span><span class="ident" id="8201479">Bytes</span><span class="op" id="8201484">(</span><span class="op" id="8201485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201488">if</span>&nbsp;<span class="op" id="8201491">!</span><span class="ident" id="8201492">bytes</span><span class="op" id="8201497">.</span><span class="ident" id="8201498">Equal</span><span class="op" id="8201503">(</span><span class="ident" id="8201504">b1</span><span class="op" id="8201506">,</span>&nbsp;<span class="ident" id="8201508">jsonBig</span><span class="op" id="8201515">)</span>&nbsp;<span class="op" id="8201517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201521">t</span><span class="op" id="8201522">.</span><span class="ident" id="8201523">Error</span><span class="op" id="8201528">(</span><span class="string" id="8201529">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8201566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201570">diff</span><span class="op" id="8201574">(</span><span class="ident" id="8201575">t</span><span class="op" id="8201576">,</span>&nbsp;<span class="ident" id="8201578">b1</span><span class="op" id="8201580">,</span>&nbsp;<span class="ident" id="8201582">jsonBig</span><span class="op" id="8201589">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201593">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201601">}</span><br>
<span class="lineno"></span><span class="op" id="8201603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8201606">type</span>&nbsp;<span class="ident" id="8201611">indentErrorTest</span>&nbsp;<span class="keyword" id="8201627">struct</span>&nbsp;<span class="op" id="8201634">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201637">in</span>&nbsp;&nbsp;<span class="builtintype" id="8201641">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201649">err</span>&nbsp;<span class="builtintype" id="8201653">error</span><br>
<span class="lineno"></span><span class="op" id="8201659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8201662">var</span>&nbsp;<span class="ident" id="8201666">indentErrorTests</span>&nbsp;<span class="op" id="8201683">=</span>&nbsp;<span class="op" id="8201685">[</span><span class="op" id="8201686">]</span><span class="ident" id="8201687">indentErrorTest</span><span class="op" id="8201702">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201705">{</span><span class="string" id="8201706">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="8201725">,</span>&nbsp;<span class="op" id="8201727">&amp;</span><span class="ident" id="8201728">SyntaxError</span><span class="op" id="8201739">{</span><span class="string" id="8201740">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="8201780">,</span>&nbsp;<span class="num" id="8201782">17</span><span class="op" id="8201784">}</span><span class="op" id="8201785">}</span><span class="op" id="8201786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201789">{</span><span class="string" id="8201790">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="8201815">,</span>&nbsp;<span class="op" id="8201817">&amp;</span><span class="ident" id="8201818">SyntaxError</span><span class="op" id="8201829">{</span><span class="string" id="8201830">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="8201882">,</span>&nbsp;<span class="num" id="8201884">13</span><span class="op" id="8201886">}</span><span class="op" id="8201887">}</span><span class="op" id="8201888">,</span><br>
<span class="lineno"></span><span class="op" id="8201890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8201893">func</span>&nbsp;<span class="ident" id="8201898">TestIndentErrors</span><span class="op" id="8201914">(</span><span class="ident" id="8201915">t</span>&nbsp;<span class="op" id="8201917">*</span><span class="ident" id="8201918">testing</span><span class="op" id="8201925">.</span><span class="ident" id="8201926">T</span><span class="op" id="8201927">)</span>&nbsp;<span class="op" id="8201929">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8201932">for</span>&nbsp;<span class="ident" id="8201936">i</span><span class="op" id="8201937">,</span>&nbsp;<span class="ident" id="8201939">tt</span>&nbsp;<span class="op" id="8201942">:=</span>&nbsp;<span class="keyword" id="8201945">range</span>&nbsp;<span class="ident" id="8201951">indentErrorTests</span>&nbsp;<span class="op" id="8201968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201972">slice</span>&nbsp;<span class="op" id="8201978">:=</span>&nbsp;<span class="builtinfunc" id="8201981">make</span><span class="op" id="8201985">(</span><span class="op" id="8201986">[</span><span class="op" id="8201987">]</span><span class="builtintype" id="8201988">uint8</span><span class="op" id="8201993">,</span>&nbsp;<span class="num" id="8201995">0</span><span class="op" id="8201996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202000">buf</span>&nbsp;<span class="op" id="8202004">:=</span>&nbsp;<span class="ident" id="8202007">bytes</span><span class="op" id="8202012">.</span><span class="ident" id="8202013">NewBuffer</span><span class="op" id="8202022">(</span><span class="ident" id="8202023">slice</span><span class="op" id="8202028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202032">if</span>&nbsp;<span class="ident" id="8202035">err</span>&nbsp;<span class="op" id="8202039">:=</span>&nbsp;<span class="ident" id="8202042">Indent</span><span class="op" id="8202048">(</span><span class="ident" id="8202049">buf</span><span class="op" id="8202052">,</span>&nbsp;<span class="op" id="8202054">[</span><span class="op" id="8202055">]</span><span class="builtintype" id="8202056">uint8</span><span class="op" id="8202061">(</span><span class="ident" id="8202062">tt</span><span class="op" id="8202064">.</span><span class="ident" id="8202065">in</span><span class="op" id="8202067">)</span><span class="op" id="8202068">,</span>&nbsp;<span class="string" id="8202070">&#34;&#34;</span><span class="op" id="8202072">,</span>&nbsp;<span class="string" id="8202074">&#34;&#34;</span><span class="op" id="8202076">)</span><span class="op" id="8202077">;</span>&nbsp;<span class="ident" id="8202079">err</span>&nbsp;<span class="op" id="8202083">!=</span>&nbsp;<span class="ident" id="8202086">nil</span>&nbsp;<span class="op" id="8202090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202095">if</span>&nbsp;<span class="op" id="8202098">!</span><span class="ident" id="8202099">reflect</span><span class="op" id="8202106">.</span><span class="ident" id="8202107">DeepEqual</span><span class="op" id="8202116">(</span><span class="ident" id="8202117">err</span><span class="op" id="8202120">,</span>&nbsp;<span class="ident" id="8202122">tt</span><span class="op" id="8202124">.</span><span class="ident" id="8202125">err</span><span class="op" id="8202128">)</span>&nbsp;<span class="op" id="8202130">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202136">t</span><span class="op" id="8202137">.</span><span class="ident" id="8202138">Errorf</span><span class="op" id="8202144">(</span><span class="string" id="8202145">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="8202163">,</span>&nbsp;<span class="ident" id="8202165">i</span><span class="op" id="8202166">,</span>&nbsp;<span class="ident" id="8202168">err</span><span class="op" id="8202171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202177">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202196">}</span><br>
<span class="lineno">180</span><span class="op" id="8202198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8202201">func</span>&nbsp;<span class="ident" id="8202206">TestNextValueBig</span><span class="op" id="8202222">(</span><span class="ident" id="8202223">t</span>&nbsp;<span class="op" id="8202225">*</span><span class="ident" id="8202226">testing</span><span class="op" id="8202233">.</span><span class="ident" id="8202234">T</span><span class="op" id="8202235">)</span>&nbsp;<span class="op" id="8202237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202240">initBig</span><span class="op" id="8202247">(</span><span class="op" id="8202248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202251">var</span>&nbsp;<span class="ident" id="8202255">scan</span>&nbsp;<span class="ident" id="8202260">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202269">item</span><span class="op" id="8202273">,</span>&nbsp;<span class="ident" id="8202275">rest</span><span class="op" id="8202279">,</span>&nbsp;<span class="ident" id="8202281">err</span>&nbsp;<span class="op" id="8202285">:=</span>&nbsp;<span class="ident" id="8202288">nextValue</span><span class="op" id="8202297">(</span><span class="ident" id="8202298">jsonBig</span><span class="op" id="8202305">,</span>&nbsp;<span class="op" id="8202307">&amp;</span><span class="ident" id="8202308">scan</span><span class="op" id="8202312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202315">if</span>&nbsp;<span class="ident" id="8202318">err</span>&nbsp;<span class="op" id="8202322">!=</span>&nbsp;<span class="ident" id="8202325">nil</span>&nbsp;<span class="op" id="8202329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202333">t</span><span class="op" id="8202334">.</span><span class="ident" id="8202335">Fatalf</span><span class="op" id="8202341">(</span><span class="string" id="8202342">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="8202357">,</span>&nbsp;<span class="ident" id="8202359">err</span><span class="op" id="8202362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202368">if</span>&nbsp;<span class="builtinfunc" id="8202371">len</span><span class="op" id="8202374">(</span><span class="ident" id="8202375">item</span><span class="op" id="8202379">)</span>&nbsp;<span class="op" id="8202381">!=</span>&nbsp;<span class="builtinfunc" id="8202384">len</span><span class="op" id="8202387">(</span><span class="ident" id="8202388">jsonBig</span><span class="op" id="8202395">)</span>&nbsp;<span class="op" id="8202397">||</span>&nbsp;<span class="op" id="8202400">&amp;</span><span class="ident" id="8202401">item</span><span class="op" id="8202405">[</span><span class="num" id="8202406">0</span><span class="op" id="8202407">]</span>&nbsp;<span class="op" id="8202409">!=</span>&nbsp;<span class="op" id="8202412">&amp;</span><span class="ident" id="8202413">jsonBig</span><span class="op" id="8202420">[</span><span class="num" id="8202421">0</span><span class="op" id="8202422">]</span>&nbsp;<span class="op" id="8202424">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202428">t</span><span class="op" id="8202429">.</span><span class="ident" id="8202430">Errorf</span><span class="op" id="8202436">(</span><span class="string" id="8202437">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8202458">,</span>&nbsp;<span class="builtinfunc" id="8202460">len</span><span class="op" id="8202463">(</span><span class="ident" id="8202464">item</span><span class="op" id="8202468">)</span><span class="op" id="8202469">,</span>&nbsp;<span class="builtinfunc" id="8202471">len</span><span class="op" id="8202474">(</span><span class="ident" id="8202475">jsonBig</span><span class="op" id="8202482">)</span><span class="op" id="8202483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202489">if</span>&nbsp;<span class="builtinfunc" id="8202492">len</span><span class="op" id="8202495">(</span><span class="ident" id="8202496">rest</span><span class="op" id="8202500">)</span>&nbsp;<span class="op" id="8202502">!=</span>&nbsp;<span class="num" id="8202505">0</span>&nbsp;<span class="op" id="8202507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202511">t</span><span class="op" id="8202512">.</span><span class="ident" id="8202513">Errorf</span><span class="op" id="8202519">(</span><span class="string" id="8202520">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8202538">,</span>&nbsp;<span class="builtinfunc" id="8202540">len</span><span class="op" id="8202543">(</span><span class="ident" id="8202544">rest</span><span class="op" id="8202548">)</span><span class="op" id="8202549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202552">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202556">item</span><span class="op" id="8202560">,</span>&nbsp;<span class="ident" id="8202562">rest</span><span class="op" id="8202566">,</span>&nbsp;<span class="ident" id="8202568">err</span>&nbsp;<span class="op" id="8202572">=</span>&nbsp;<span class="ident" id="8202574">nextValue</span><span class="op" id="8202583">(</span><span class="builtinfunc" id="8202584">append</span><span class="op" id="8202590">(</span><span class="ident" id="8202591">jsonBig</span><span class="op" id="8202598">,</span>&nbsp;<span class="string" id="8202600">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="8202613">...</span><span class="op" id="8202616">)</span><span class="op" id="8202617">,</span>&nbsp;<span class="op" id="8202619">&amp;</span><span class="ident" id="8202620">scan</span><span class="op" id="8202624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202627">if</span>&nbsp;<span class="ident" id="8202630">err</span>&nbsp;<span class="op" id="8202634">!=</span>&nbsp;<span class="ident" id="8202637">nil</span>&nbsp;<span class="op" id="8202641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202645">t</span><span class="op" id="8202646">.</span><span class="ident" id="8202647">Fatalf</span><span class="op" id="8202653">(</span><span class="string" id="8202654">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="8202675">,</span>&nbsp;<span class="ident" id="8202677">err</span><span class="op" id="8202680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202683">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202686">if</span>&nbsp;<span class="builtinfunc" id="8202689">len</span><span class="op" id="8202692">(</span><span class="ident" id="8202693">item</span><span class="op" id="8202697">)</span>&nbsp;<span class="op" id="8202699">!=</span>&nbsp;<span class="builtinfunc" id="8202702">len</span><span class="op" id="8202705">(</span><span class="ident" id="8202706">jsonBig</span><span class="op" id="8202713">)</span>&nbsp;<span class="op" id="8202715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202719">t</span><span class="op" id="8202720">.</span><span class="ident" id="8202721">Errorf</span><span class="op" id="8202727">(</span><span class="string" id="8202728">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8202749">,</span>&nbsp;<span class="builtinfunc" id="8202751">len</span><span class="op" id="8202754">(</span><span class="ident" id="8202755">item</span><span class="op" id="8202759">)</span><span class="op" id="8202760">,</span>&nbsp;<span class="builtinfunc" id="8202762">len</span><span class="op" id="8202765">(</span><span class="ident" id="8202766">jsonBig</span><span class="op" id="8202773">)</span><span class="op" id="8202774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202780">if</span>&nbsp;<span class="builtintype" id="8202783">string</span><span class="op" id="8202789">(</span><span class="ident" id="8202790">rest</span><span class="op" id="8202794">)</span>&nbsp;<span class="op" id="8202796">!=</span>&nbsp;<span class="string" id="8202799">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="8202813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202817">t</span><span class="op" id="8202818">.</span><span class="ident" id="8202819">Errorf</span><span class="op" id="8202825">(</span><span class="string" id="8202826">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8202844">,</span>&nbsp;<span class="builtinfunc" id="8202846">len</span><span class="op" id="8202849">(</span><span class="ident" id="8202850">rest</span><span class="op" id="8202854">)</span><span class="op" id="8202855">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202858">}</span><br>
<span class="lineno"></span><span class="op" id="8202860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8202863">var</span>&nbsp;<span class="ident" id="8202867">benchScan</span>&nbsp;<span class="ident" id="8202877">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="8202886">func</span>&nbsp;<span class="ident" id="8202891">BenchmarkSkipValue</span><span class="op" id="8202909">(</span><span class="ident" id="8202910">b</span>&nbsp;<span class="op" id="8202912">*</span><span class="ident" id="8202913">testing</span><span class="op" id="8202920">.</span><span class="ident" id="8202921">B</span><span class="op" id="8202922">)</span>&nbsp;<span class="op" id="8202924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202927">initBig</span><span class="op" id="8202934">(</span><span class="op" id="8202935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8202938">for</span>&nbsp;<span class="ident" id="8202942">i</span>&nbsp;<span class="op" id="8202944">:=</span>&nbsp;<span class="num" id="8202947">0</span><span class="op" id="8202948">;</span>&nbsp;<span class="ident" id="8202950">i</span>&nbsp;<span class="op" id="8202952">&lt;</span>&nbsp;<span class="ident" id="8202954">b</span><span class="op" id="8202955">.</span><span class="ident" id="8202956">N</span><span class="op" id="8202957">;</span>&nbsp;<span class="ident" id="8202959">i</span><span class="op" id="8202960">++</span>&nbsp;<span class="op" id="8202963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202967">nextValue</span><span class="op" id="8202976">(</span><span class="ident" id="8202977">jsonBig</span><span class="op" id="8202984">,</span>&nbsp;<span class="op" id="8202986">&amp;</span><span class="ident" id="8202987">benchScan</span><span class="op" id="8202996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202999">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203002">b</span><span class="op" id="8203003">.</span><span class="ident" id="8203004">SetBytes</span><span class="op" id="8203012">(</span><span class="ident" id="8203013">int64</span><span class="op" id="8203018">(</span><span class="builtinfunc" id="8203019">len</span><span class="op" id="8203022">(</span><span class="ident" id="8203023">jsonBig</span><span class="op" id="8203030">)</span><span class="op" id="8203031">)</span><span class="op" id="8203032">)</span><br>
<span class="lineno"></span><span class="op" id="8203034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8203037">func</span>&nbsp;<span class="ident" id="8203042">diff</span><span class="op" id="8203046">(</span><span class="ident" id="8203047">t</span>&nbsp;<span class="op" id="8203049">*</span><span class="ident" id="8203050">testing</span><span class="op" id="8203057">.</span><span class="ident" id="8203058">T</span><span class="op" id="8203059">,</span>&nbsp;<span class="ident" id="8203061">a</span><span class="op" id="8203062">,</span>&nbsp;<span class="ident" id="8203064">b</span>&nbsp;<span class="op" id="8203066">[</span><span class="op" id="8203067">]</span><span class="builtintype" id="8203068">byte</span><span class="op" id="8203072">)</span>&nbsp;<span class="op" id="8203074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203077">for</span>&nbsp;<span class="ident" id="8203081">i</span>&nbsp;<span class="op" id="8203083">:=</span>&nbsp;<span class="num" id="8203086">0</span><span class="op" id="8203087">;</span>&nbsp;<span class="op" id="8203089">;</span>&nbsp;<span class="ident" id="8203091">i</span><span class="op" id="8203092">++</span>&nbsp;<span class="op" id="8203095">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203099">if</span>&nbsp;<span class="ident" id="8203102">i</span>&nbsp;<span class="op" id="8203104">&gt;=</span>&nbsp;<span class="builtinfunc" id="8203107">len</span><span class="op" id="8203110">(</span><span class="ident" id="8203111">a</span><span class="op" id="8203112">)</span>&nbsp;<span class="op" id="8203114">||</span>&nbsp;<span class="ident" id="8203117">i</span>&nbsp;<span class="op" id="8203119">&gt;=</span>&nbsp;<span class="builtinfunc" id="8203122">len</span><span class="op" id="8203125">(</span><span class="ident" id="8203126">b</span><span class="op" id="8203127">)</span>&nbsp;<span class="op" id="8203129">||</span>&nbsp;<span class="ident" id="8203132">a</span><span class="op" id="8203133">[</span><span class="ident" id="8203134">i</span><span class="op" id="8203135">]</span>&nbsp;<span class="op" id="8203137">!=</span>&nbsp;<span class="ident" id="8203140">b</span><span class="op" id="8203141">[</span><span class="ident" id="8203142">i</span><span class="op" id="8203143">]</span>&nbsp;<span class="op" id="8203145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203150">j</span>&nbsp;<span class="op" id="8203152">:=</span>&nbsp;<span class="ident" id="8203155">i</span>&nbsp;<span class="op" id="8203157">-</span>&nbsp;<span class="num" id="8203159">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203165">if</span>&nbsp;<span class="ident" id="8203168">j</span>&nbsp;<span class="op" id="8203170">&lt;</span>&nbsp;<span class="num" id="8203172">0</span>&nbsp;<span class="op" id="8203174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203180">j</span>&nbsp;<span class="op" id="8203182">=</span>&nbsp;<span class="num" id="8203184">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203189">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203194">t</span><span class="op" id="8203195">.</span><span class="ident" id="8203196">Errorf</span><span class="op" id="8203202">(</span><span class="string" id="8203203">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;%s&nbsp;vs&nbsp;%s&#34;</span><span class="op" id="8203236">,</span>&nbsp;<span class="ident" id="8203238">i</span><span class="op" id="8203239">,</span>&nbsp;<span class="ident" id="8203241">trim</span><span class="op" id="8203245">(</span><span class="ident" id="8203246">a</span><span class="op" id="8203247">[</span><span class="ident" id="8203248">j</span><span class="op" id="8203249">:</span><span class="op" id="8203250">]</span><span class="op" id="8203251">)</span><span class="op" id="8203252">,</span>&nbsp;<span class="ident" id="8203254">trim</span><span class="op" id="8203258">(</span><span class="ident" id="8203259">b</span><span class="op" id="8203260">[</span><span class="ident" id="8203261">j</span><span class="op" id="8203262">:</span><span class="op" id="8203263">]</span><span class="op" id="8203264">)</span><span class="op" id="8203265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203270">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203282">}</span><br>
<span class="lineno"></span><span class="op" id="8203284">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8203287">func</span>&nbsp;<span class="ident" id="8203292">trim</span><span class="op" id="8203296">(</span><span class="ident" id="8203297">b</span>&nbsp;<span class="op" id="8203299">[</span><span class="op" id="8203300">]</span><span class="builtintype" id="8203301">byte</span><span class="op" id="8203305">)</span>&nbsp;<span class="op" id="8203307">[</span><span class="op" id="8203308">]</span><span class="builtintype" id="8203309">byte</span>&nbsp;<span class="op" id="8203314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203317">if</span>&nbsp;<span class="builtinfunc" id="8203320">len</span><span class="op" id="8203323">(</span><span class="ident" id="8203324">b</span><span class="op" id="8203325">)</span>&nbsp;<span class="op" id="8203327">&gt;</span>&nbsp;<span class="num" id="8203329">20</span>&nbsp;<span class="op" id="8203332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203336">return</span>&nbsp;<span class="ident" id="8203343">b</span><span class="op" id="8203344">[</span><span class="num" id="8203345">0</span><span class="op" id="8203346">:</span><span class="num" id="8203347">20</span><span class="op" id="8203349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203352">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203355">return</span>&nbsp;<span class="ident" id="8203362">b</span><br>
<span class="lineno"></span><span class="op" id="8203364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8203367">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8203402">var</span>&nbsp;<span class="ident" id="8203406">jsonBig</span>&nbsp;<span class="op" id="8203414">[</span><span class="op" id="8203415">]</span><span class="builtintype" id="8203416">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8203422">func</span>&nbsp;<span class="ident" id="8203427">initBig</span><span class="op" id="8203434">(</span><span class="op" id="8203435">)</span>&nbsp;<span class="op" id="8203437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203440">n</span>&nbsp;<span class="op" id="8203442">:=</span>&nbsp;<span class="num" id="8203445">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203452">if</span>&nbsp;<span class="ident" id="8203455">testing</span><span class="op" id="8203462">.</span><span class="ident" id="8203463">Short</span><span class="op" id="8203468">(</span><span class="op" id="8203469">)</span>&nbsp;<span class="op" id="8203471">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203475">n</span>&nbsp;<span class="op" id="8203477">=</span>&nbsp;<span class="num" id="8203479">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203487">b</span><span class="op" id="8203488">,</span>&nbsp;<span class="ident" id="8203490">err</span>&nbsp;<span class="op" id="8203494">:=</span>&nbsp;<span class="ident" id="8203497">Marshal</span><span class="op" id="8203504">(</span><span class="ident" id="8203505">genValue</span><span class="op" id="8203513">(</span><span class="ident" id="8203514">n</span><span class="op" id="8203515">)</span><span class="op" id="8203516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203519">if</span>&nbsp;<span class="ident" id="8203522">err</span>&nbsp;<span class="op" id="8203526">!=</span>&nbsp;<span class="ident" id="8203529">nil</span>&nbsp;<span class="op" id="8203533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8203537">panic</span><span class="op" id="8203542">(</span><span class="ident" id="8203543">err</span><span class="op" id="8203546">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203552">jsonBig</span>&nbsp;<span class="op" id="8203560">=</span>&nbsp;<span class="ident" id="8203562">b</span><br>
<span class="lineno"></span><span class="op" id="8203564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8203567">func</span>&nbsp;<span class="ident" id="8203572">genValue</span><span class="op" id="8203580">(</span><span class="ident" id="8203581">n</span>&nbsp;<span class="builtintype" id="8203583">int</span><span class="op" id="8203586">)</span>&nbsp;<span class="keyword" id="8203588">interface</span><span class="op" id="8203597">{</span><span class="op" id="8203598">}</span>&nbsp;<span class="op" id="8203600">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203603">if</span>&nbsp;<span class="ident" id="8203606">n</span>&nbsp;<span class="op" id="8203608">&gt;</span>&nbsp;<span class="num" id="8203610">1</span>&nbsp;<span class="op" id="8203612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203616">switch</span>&nbsp;<span class="ident" id="8203623">rand</span><span class="op" id="8203627">.</span><span class="ident" id="8203628">Intn</span><span class="op" id="8203632">(</span><span class="num" id="8203633">2</span><span class="op" id="8203634">)</span>&nbsp;<span class="op" id="8203636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203640">case</span>&nbsp;<span class="num" id="8203645">0</span><span class="op" id="8203646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203651">return</span>&nbsp;<span class="ident" id="8203658">genArray</span><span class="op" id="8203666">(</span><span class="ident" id="8203667">n</span><span class="op" id="8203668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203672">case</span>&nbsp;<span class="num" id="8203677">1</span><span class="op" id="8203678">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203683">return</span>&nbsp;<span class="ident" id="8203690">genMap</span><span class="op" id="8203696">(</span><span class="ident" id="8203697">n</span><span class="op" id="8203698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203708">switch</span>&nbsp;<span class="ident" id="8203715">rand</span><span class="op" id="8203719">.</span><span class="ident" id="8203720">Intn</span><span class="op" id="8203724">(</span><span class="num" id="8203725">3</span><span class="op" id="8203726">)</span>&nbsp;<span class="op" id="8203728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203731">case</span>&nbsp;<span class="num" id="8203736">0</span><span class="op" id="8203737">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203741">return</span>&nbsp;<span class="ident" id="8203748">rand</span><span class="op" id="8203752">.</span><span class="ident" id="8203753">Intn</span><span class="op" id="8203757">(</span><span class="num" id="8203758">2</span><span class="op" id="8203759">)</span>&nbsp;<span class="op" id="8203761">==</span>&nbsp;<span class="num" id="8203764">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203767">case</span>&nbsp;<span class="num" id="8203772">1</span><span class="op" id="8203773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203777">return</span>&nbsp;<span class="ident" id="8203784">rand</span><span class="op" id="8203788">.</span><span class="ident" id="8203789">NormFloat64</span><span class="op" id="8203800">(</span><span class="op" id="8203801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203804">case</span>&nbsp;<span class="num" id="8203809">2</span><span class="op" id="8203810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203814">return</span>&nbsp;<span class="ident" id="8203821">genString</span><span class="op" id="8203830">(</span><span class="num" id="8203831">30</span><span class="op" id="8203833">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8203839">panic</span><span class="op" id="8203844">(</span><span class="string" id="8203845">&#34;unreachable&#34;</span><span class="op" id="8203858">)</span><br>
<span class="lineno"></span><span class="op" id="8203860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8203863">func</span>&nbsp;<span class="ident" id="8203868">genString</span><span class="op" id="8203877">(</span><span class="ident" id="8203878">stddev</span>&nbsp;<span class="builtintype" id="8203885">float64</span><span class="op" id="8203892">)</span>&nbsp;<span class="builtintype" id="8203894">string</span>&nbsp;<span class="op" id="8203901">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203904">n</span>&nbsp;<span class="op" id="8203906">:=</span>&nbsp;<span class="builtintype" id="8203909">int</span><span class="op" id="8203912">(</span><span class="ident" id="8203913">math</span><span class="op" id="8203917">.</span><span class="ident" id="8203918">Abs</span><span class="op" id="8203921">(</span><span class="ident" id="8203922">rand</span><span class="op" id="8203926">.</span><span class="ident" id="8203927">NormFloat64</span><span class="op" id="8203938">(</span><span class="op" id="8203939">)</span><span class="op" id="8203940">*</span><span class="ident" id="8203941">stddev</span>&nbsp;<span class="op" id="8203948">+</span>&nbsp;<span class="ident" id="8203950">stddev</span><span class="op" id="8203956">/</span><span class="num" id="8203957">2</span><span class="op" id="8203958">)</span><span class="op" id="8203959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203962">c</span>&nbsp;<span class="op" id="8203964">:=</span>&nbsp;<span class="builtinfunc" id="8203967">make</span><span class="op" id="8203971">(</span><span class="op" id="8203972">[</span><span class="op" id="8203973">]</span><span class="builtintype" id="8203974">rune</span><span class="op" id="8203978">,</span>&nbsp;<span class="ident" id="8203980">n</span><span class="op" id="8203981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203984">for</span>&nbsp;<span class="ident" id="8203988">i</span>&nbsp;<span class="op" id="8203990">:=</span>&nbsp;<span class="keyword" id="8203993">range</span>&nbsp;<span class="ident" id="8203999">c</span>&nbsp;<span class="op" id="8204001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204005">f</span>&nbsp;<span class="op" id="8204007">:=</span>&nbsp;<span class="ident" id="8204010">math</span><span class="op" id="8204014">.</span><span class="ident" id="8204015">Abs</span><span class="op" id="8204018">(</span><span class="ident" id="8204019">rand</span><span class="op" id="8204023">.</span><span class="ident" id="8204024">NormFloat64</span><span class="op" id="8204035">(</span><span class="op" id="8204036">)</span><span class="op" id="8204037">*</span><span class="num" id="8204038">64</span>&nbsp;<span class="op" id="8204041">+</span>&nbsp;<span class="num" id="8204043">32</span><span class="op" id="8204045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204049">if</span>&nbsp;<span class="ident" id="8204052">f</span>&nbsp;<span class="op" id="8204054">&gt;</span>&nbsp;<span class="num" id="8204056">0x10ffff</span>&nbsp;<span class="op" id="8204065">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204070">f</span>&nbsp;<span class="op" id="8204072">=</span>&nbsp;<span class="num" id="8204074">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204089">c</span><span class="op" id="8204090">[</span><span class="ident" id="8204091">i</span><span class="op" id="8204092">]</span>&nbsp;<span class="op" id="8204094">=</span>&nbsp;<span class="builtintype" id="8204096">rune</span><span class="op" id="8204100">(</span><span class="ident" id="8204101">f</span><span class="op" id="8204102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204108">return</span>&nbsp;<span class="builtintype" id="8204115">string</span><span class="op" id="8204121">(</span><span class="ident" id="8204122">c</span><span class="op" id="8204123">)</span><br>
<span class="lineno">285</span><span class="op" id="8204125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8204128">func</span>&nbsp;<span class="ident" id="8204133">genArray</span><span class="op" id="8204141">(</span><span class="ident" id="8204142">n</span>&nbsp;<span class="builtintype" id="8204144">int</span><span class="op" id="8204147">)</span>&nbsp;<span class="op" id="8204149">[</span><span class="op" id="8204150">]</span><span class="keyword" id="8204151">interface</span><span class="op" id="8204160">{</span><span class="op" id="8204161">}</span>&nbsp;<span class="op" id="8204163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204166">f</span>&nbsp;<span class="op" id="8204168">:=</span>&nbsp;<span class="builtintype" id="8204171">int</span><span class="op" id="8204174">(</span><span class="ident" id="8204175">math</span><span class="op" id="8204179">.</span><span class="ident" id="8204180">Abs</span><span class="op" id="8204183">(</span><span class="ident" id="8204184">rand</span><span class="op" id="8204188">.</span><span class="ident" id="8204189">NormFloat64</span><span class="op" id="8204200">(</span><span class="op" id="8204201">)</span><span class="op" id="8204202">)</span>&nbsp;<span class="op" id="8204204">*</span>&nbsp;<span class="ident" id="8204206">math</span><span class="op" id="8204210">.</span><span class="ident" id="8204211">Min</span><span class="op" id="8204214">(</span><span class="num" id="8204215">10</span><span class="op" id="8204217">,</span>&nbsp;<span class="builtintype" id="8204219">float64</span><span class="op" id="8204226">(</span><span class="ident" id="8204227">n</span><span class="op" id="8204228">/</span><span class="num" id="8204229">2</span><span class="op" id="8204230">)</span><span class="op" id="8204231">)</span><span class="op" id="8204232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204235">if</span>&nbsp;<span class="ident" id="8204238">f</span>&nbsp;<span class="op" id="8204240">&gt;</span>&nbsp;<span class="ident" id="8204242">n</span>&nbsp;<span class="op" id="8204244">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204248">f</span>&nbsp;<span class="op" id="8204250">=</span>&nbsp;<span class="ident" id="8204252">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204258">if</span>&nbsp;<span class="ident" id="8204261">f</span>&nbsp;<span class="op" id="8204263">&lt;</span>&nbsp;<span class="num" id="8204265">1</span>&nbsp;<span class="op" id="8204267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204271">f</span>&nbsp;<span class="op" id="8204273">=</span>&nbsp;<span class="num" id="8204275">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204278">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204281">x</span>&nbsp;<span class="op" id="8204283">:=</span>&nbsp;<span class="builtinfunc" id="8204286">make</span><span class="op" id="8204290">(</span><span class="op" id="8204291">[</span><span class="op" id="8204292">]</span><span class="keyword" id="8204293">interface</span><span class="op" id="8204302">{</span><span class="op" id="8204303">}</span><span class="op" id="8204304">,</span>&nbsp;<span class="ident" id="8204306">f</span><span class="op" id="8204307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204310">for</span>&nbsp;<span class="ident" id="8204314">i</span>&nbsp;<span class="op" id="8204316">:=</span>&nbsp;<span class="keyword" id="8204319">range</span>&nbsp;<span class="ident" id="8204325">x</span>&nbsp;<span class="op" id="8204327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204331">x</span><span class="op" id="8204332">[</span><span class="ident" id="8204333">i</span><span class="op" id="8204334">]</span>&nbsp;<span class="op" id="8204336">=</span>&nbsp;<span class="ident" id="8204338">genValue</span><span class="op" id="8204346">(</span><span class="op" id="8204347">(</span><span class="op" id="8204348">(</span><span class="ident" id="8204349">i</span><span class="op" id="8204350">+</span><span class="num" id="8204351">1</span><span class="op" id="8204352">)</span><span class="op" id="8204353">*</span><span class="ident" id="8204354">n</span><span class="op" id="8204355">)</span><span class="op" id="8204356">/</span><span class="ident" id="8204357">f</span>&nbsp;<span class="op" id="8204359">-</span>&nbsp;<span class="op" id="8204361">(</span><span class="ident" id="8204362">i</span><span class="op" id="8204363">*</span><span class="ident" id="8204364">n</span><span class="op" id="8204365">)</span><span class="op" id="8204366">/</span><span class="ident" id="8204367">f</span><span class="op" id="8204368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204374">return</span>&nbsp;<span class="ident" id="8204381">x</span><br>
<span class="lineno">300</span><span class="op" id="8204383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8204386">func</span>&nbsp;<span class="ident" id="8204391">genMap</span><span class="op" id="8204397">(</span><span class="ident" id="8204398">n</span>&nbsp;<span class="builtintype" id="8204400">int</span><span class="op" id="8204403">)</span>&nbsp;<span class="keyword" id="8204405">map</span><span class="op" id="8204408">[</span><span class="builtintype" id="8204409">string</span><span class="op" id="8204415">]</span><span class="keyword" id="8204416">interface</span><span class="op" id="8204425">{</span><span class="op" id="8204426">}</span>&nbsp;<span class="op" id="8204428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204431">f</span>&nbsp;<span class="op" id="8204433">:=</span>&nbsp;<span class="builtintype" id="8204436">int</span><span class="op" id="8204439">(</span><span class="ident" id="8204440">math</span><span class="op" id="8204444">.</span><span class="ident" id="8204445">Abs</span><span class="op" id="8204448">(</span><span class="ident" id="8204449">rand</span><span class="op" id="8204453">.</span><span class="ident" id="8204454">NormFloat64</span><span class="op" id="8204465">(</span><span class="op" id="8204466">)</span><span class="op" id="8204467">)</span>&nbsp;<span class="op" id="8204469">*</span>&nbsp;<span class="ident" id="8204471">math</span><span class="op" id="8204475">.</span><span class="ident" id="8204476">Min</span><span class="op" id="8204479">(</span><span class="num" id="8204480">10</span><span class="op" id="8204482">,</span>&nbsp;<span class="builtintype" id="8204484">float64</span><span class="op" id="8204491">(</span><span class="ident" id="8204492">n</span><span class="op" id="8204493">/</span><span class="num" id="8204494">2</span><span class="op" id="8204495">)</span><span class="op" id="8204496">)</span><span class="op" id="8204497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204500">if</span>&nbsp;<span class="ident" id="8204503">f</span>&nbsp;<span class="op" id="8204505">&gt;</span>&nbsp;<span class="ident" id="8204507">n</span>&nbsp;<span class="op" id="8204509">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204513">f</span>&nbsp;<span class="op" id="8204515">=</span>&nbsp;<span class="ident" id="8204517">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204523">if</span>&nbsp;<span class="ident" id="8204526">n</span>&nbsp;<span class="op" id="8204528">&gt;</span>&nbsp;<span class="num" id="8204530">0</span>&nbsp;<span class="op" id="8204532">&amp;&amp;</span>&nbsp;<span class="ident" id="8204535">f</span>&nbsp;<span class="op" id="8204537">==</span>&nbsp;<span class="num" id="8204540">0</span>&nbsp;<span class="op" id="8204542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204546">f</span>&nbsp;<span class="op" id="8204548">=</span>&nbsp;<span class="num" id="8204550">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204553">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204556">x</span>&nbsp;<span class="op" id="8204558">:=</span>&nbsp;<span class="builtinfunc" id="8204561">make</span><span class="op" id="8204565">(</span><span class="keyword" id="8204566">map</span><span class="op" id="8204569">[</span><span class="builtintype" id="8204570">string</span><span class="op" id="8204576">]</span><span class="keyword" id="8204577">interface</span><span class="op" id="8204586">{</span><span class="op" id="8204587">}</span><span class="op" id="8204588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204591">for</span>&nbsp;<span class="ident" id="8204595">i</span>&nbsp;<span class="op" id="8204597">:=</span>&nbsp;<span class="num" id="8204600">0</span><span class="op" id="8204601">;</span>&nbsp;<span class="ident" id="8204603">i</span>&nbsp;<span class="op" id="8204605">&lt;</span>&nbsp;<span class="ident" id="8204607">f</span><span class="op" id="8204608">;</span>&nbsp;<span class="ident" id="8204610">i</span><span class="op" id="8204611">++</span>&nbsp;<span class="op" id="8204614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204618">x</span><span class="op" id="8204619">[</span><span class="ident" id="8204620">genString</span><span class="op" id="8204629">(</span><span class="num" id="8204630">10</span><span class="op" id="8204632">)</span><span class="op" id="8204633">]</span>&nbsp;<span class="op" id="8204635">=</span>&nbsp;<span class="ident" id="8204637">genValue</span><span class="op" id="8204645">(</span><span class="op" id="8204646">(</span><span class="op" id="8204647">(</span><span class="ident" id="8204648">i</span><span class="op" id="8204649">+</span><span class="num" id="8204650">1</span><span class="op" id="8204651">)</span><span class="op" id="8204652">*</span><span class="ident" id="8204653">n</span><span class="op" id="8204654">)</span><span class="op" id="8204655">/</span><span class="ident" id="8204656">f</span>&nbsp;<span class="op" id="8204658">-</span>&nbsp;<span class="op" id="8204660">(</span><span class="ident" id="8204661">i</span><span class="op" id="8204662">*</span><span class="ident" id="8204663">n</span><span class="op" id="8204664">)</span><span class="op" id="8204665">/</span><span class="ident" id="8204666">f</span><span class="op" id="8204667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8204673">return</span>&nbsp;<span class="ident" id="8204680">x</span><br>
<span class="lineno">315</span><span class="op" id="8204682">}</span>
</div>
</body>
</html>
