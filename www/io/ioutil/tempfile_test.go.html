<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8527657">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8527712">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8527766">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8527817">package</span>&nbsp;<span class="ident" id="8527825">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8527833">import</span>&nbsp;<span class="op" id="8527840">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8527843">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8527849">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8527866">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8527876">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8527886">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8527889">func</span>&nbsp;<span class="ident" id="8527894">TestTempFile</span><span class="op" id="8527906">(</span><span class="ident" id="8527907">t</span>&nbsp;<span class="op" id="8527909">*</span><span class="ident" id="8527910"><a href="/io/ioutil/tempfile_test.go.html#8527876">testing</a></span><span class="op" id="8527917">.</span><span class="ident" id="8527918">T</span><span class="op" id="8527919">)</span>&nbsp;<span class="op" id="8527921">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527924">f</span><span class="op" id="8527925">,</span>&nbsp;<span class="ident" id="8527927">err</span>&nbsp;<span class="op" id="8527931">:=</span>&nbsp;<span class="ident" id="8527934"><a href="/io/ioutil/tempfile.go.html#3539502">TempFile</a></span><span class="op" id="8527942">(</span><span class="string" id="8527943">&#34;/_not_exists_&#34;</span><span class="op" id="8527958">,</span>&nbsp;<span class="string" id="8527960">&#34;foo&#34;</span><span class="op" id="8527965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8527968">if</span>&nbsp;<span class="ident" id="8527971"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span>&nbsp;<span class="op" id="8527973">!=</span>&nbsp;<span class="ident" id="8527976">nil</span>&nbsp;<span class="op" id="8527980">||</span>&nbsp;<span class="ident" id="8527983"><a href="/io/ioutil/tempfile_test.go.html#8527927">err</a></span>&nbsp;<span class="op" id="8527987">==</span>&nbsp;<span class="ident" id="8527990">nil</span>&nbsp;<span class="op" id="8527994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527998"><a href="/io/ioutil/tempfile_test.go.html#8527907">t</a></span><span class="op" id="8527999">.</span><span class="ident" id="8528000">Errorf</span><span class="op" id="8528006">(</span><span class="string" id="8528007">&#34;TempFile(`/_not_exists_`,&nbsp;`foo`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8528050">,</span>&nbsp;<span class="ident" id="8528052"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528053">,</span>&nbsp;<span class="ident" id="8528055"><a href="/io/ioutil/tempfile_test.go.html#8527927">err</a></span><span class="op" id="8528058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528065">dir</span>&nbsp;<span class="op" id="8528069">:=</span>&nbsp;<span class="ident" id="8528072"><a href="/io/ioutil/tempfile_test.go.html#8527843">os</a></span><span class="op" id="8528074">.</span><span class="ident" id="8528075">TempDir</span><span class="op" id="8528082">(</span><span class="op" id="8528083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528086"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528087">,</span>&nbsp;<span class="ident" id="8528089"><a href="/io/ioutil/tempfile_test.go.html#8527927">err</a></span>&nbsp;<span class="op" id="8528093">=</span>&nbsp;<span class="ident" id="8528095"><a href="/io/ioutil/tempfile.go.html#3539502">TempFile</a></span><span class="op" id="8528103">(</span><span class="ident" id="8528104"><a href="/io/ioutil/tempfile_test.go.html#8528065">dir</a></span><span class="op" id="8528107">,</span>&nbsp;<span class="string" id="8528109">&#34;ioutil_test&#34;</span><span class="op" id="8528122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528125">if</span>&nbsp;<span class="ident" id="8528128"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span>&nbsp;<span class="op" id="8528130">==</span>&nbsp;<span class="ident" id="8528133">nil</span>&nbsp;<span class="op" id="8528137">||</span>&nbsp;<span class="ident" id="8528140"><a href="/io/ioutil/tempfile_test.go.html#8527927">err</a></span>&nbsp;<span class="op" id="8528144">!=</span>&nbsp;<span class="ident" id="8528147">nil</span>&nbsp;<span class="op" id="8528151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528155"><a href="/io/ioutil/tempfile_test.go.html#8527907">t</a></span><span class="op" id="8528156">.</span><span class="ident" id="8528157">Errorf</span><span class="op" id="8528163">(</span><span class="string" id="8528164">&#34;TempFile(dir,&nbsp;`ioutil_test`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8528203">,</span>&nbsp;<span class="ident" id="8528205"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528206">,</span>&nbsp;<span class="ident" id="8528208"><a href="/io/ioutil/tempfile_test.go.html#8527927">err</a></span><span class="op" id="8528211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528214">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528217">if</span>&nbsp;<span class="ident" id="8528220"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span>&nbsp;<span class="op" id="8528222">!=</span>&nbsp;<span class="ident" id="8528225">nil</span>&nbsp;<span class="op" id="8528229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528233"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528234">.</span><span class="ident" id="8528235">Close</span><span class="op" id="8528240">(</span><span class="op" id="8528241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528245"><a href="/io/ioutil/tempfile_test.go.html#8527843">os</a></span><span class="op" id="8528247">.</span><span class="ident" id="8528248">Remove</span><span class="op" id="8528254">(</span><span class="ident" id="8528255"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528256">.</span><span class="ident" id="8528257">Name</span><span class="op" id="8528261">(</span><span class="op" id="8528262">)</span><span class="op" id="8528263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528267">re</span>&nbsp;<span class="op" id="8528270">:=</span>&nbsp;<span class="ident" id="8528273"><a href="/io/ioutil/tempfile_test.go.html#8527866">regexp</a></span><span class="op" id="8528279">.</span><span class="ident" id="8528280">MustCompile</span><span class="op" id="8528291">(</span><span class="string" id="8528292">&#34;^&#34;</span>&nbsp;<span class="op" id="8528296">+</span>&nbsp;<span class="ident" id="8528298"><a href="/io/ioutil/tempfile_test.go.html#8527866">regexp</a></span><span class="op" id="8528304">.</span><span class="ident" id="8528305">QuoteMeta</span><span class="op" id="8528314">(</span><span class="ident" id="8528315"><a href="/io/ioutil/tempfile_test.go.html#8527849">filepath</a></span><span class="op" id="8528323">.</span><span class="ident" id="8528324">Join</span><span class="op" id="8528328">(</span><span class="ident" id="8528329"><a href="/io/ioutil/tempfile_test.go.html#8528065">dir</a></span><span class="op" id="8528332">,</span>&nbsp;<span class="string" id="8528334">&#34;ioutil_test&#34;</span><span class="op" id="8528347">)</span><span class="op" id="8528348">)</span>&nbsp;<span class="op" id="8528350">+</span>&nbsp;<span class="string" id="8528352">&#34;[0-9]+$&#34;</span><span class="op" id="8528361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528365">if</span>&nbsp;<span class="op" id="8528368">!</span><span class="ident" id="8528369"><a href="/io/ioutil/tempfile_test.go.html#8528267">re</a></span><span class="op" id="8528371">.</span><span class="ident" id="8528372">MatchString</span><span class="op" id="8528383">(</span><span class="ident" id="8528384"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528385">.</span><span class="ident" id="8528386">Name</span><span class="op" id="8528390">(</span><span class="op" id="8528391">)</span><span class="op" id="8528392">)</span>&nbsp;<span class="op" id="8528394">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528399"><a href="/io/ioutil/tempfile_test.go.html#8527907">t</a></span><span class="op" id="8528400">.</span><span class="ident" id="8528401">Errorf</span><span class="op" id="8528407">(</span><span class="string" id="8528408">&#34;TempFile(`&#34;</span><span class="op" id="8528420">+</span><span class="ident" id="8528421"><a href="/io/ioutil/tempfile_test.go.html#8528065">dir</a></span><span class="op" id="8528424">+</span><span class="string" id="8528425">&#34;`,&nbsp;`ioutil_test`)&nbsp;created&nbsp;bad&nbsp;name&nbsp;%s&#34;</span><span class="op" id="8528464">,</span>&nbsp;<span class="ident" id="8528466"><a href="/io/ioutil/tempfile_test.go.html#8527924">f</a></span><span class="op" id="8528467">.</span><span class="ident" id="8528468">Name</span><span class="op" id="8528472">(</span><span class="op" id="8528473">)</span><span class="op" id="8528474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528481">}</span><br>
<span class="lineno"></span><span class="op" id="8528483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8528486">func</span>&nbsp;<span class="ident" id="8528491">TestTempDir</span><span class="op" id="8528502">(</span><span class="ident" id="8528503">t</span>&nbsp;<span class="op" id="8528505">*</span><span class="ident" id="8528506"><a href="/io/ioutil/tempfile_test.go.html#8527876">testing</a></span><span class="op" id="8528513">.</span><span class="ident" id="8528514">T</span><span class="op" id="8528515">)</span>&nbsp;<span class="op" id="8528517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528520">name</span><span class="op" id="8528524">,</span>&nbsp;<span class="ident" id="8528526">err</span>&nbsp;<span class="op" id="8528530">:=</span>&nbsp;<span class="ident" id="8528533"><a href="/io/ioutil/tempfile.go.html#3540319">TempDir</a></span><span class="op" id="8528540">(</span><span class="string" id="8528541">&#34;/_not_exists_&#34;</span><span class="op" id="8528556">,</span>&nbsp;<span class="string" id="8528558">&#34;foo&#34;</span><span class="op" id="8528563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528566">if</span>&nbsp;<span class="ident" id="8528569"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span>&nbsp;<span class="op" id="8528574">!=</span>&nbsp;<span class="string" id="8528577">&#34;&#34;</span>&nbsp;<span class="op" id="8528580">||</span>&nbsp;<span class="ident" id="8528583"><a href="/io/ioutil/tempfile_test.go.html#8528526">err</a></span>&nbsp;<span class="op" id="8528587">==</span>&nbsp;<span class="ident" id="8528590">nil</span>&nbsp;<span class="op" id="8528594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528598"><a href="/io/ioutil/tempfile_test.go.html#8528503">t</a></span><span class="op" id="8528599">.</span><span class="ident" id="8528600">Errorf</span><span class="op" id="8528606">(</span><span class="string" id="8528607">&#34;TempDir(`/_not_exists_`,&nbsp;`foo`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8528649">,</span>&nbsp;<span class="ident" id="8528651"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span><span class="op" id="8528655">,</span>&nbsp;<span class="ident" id="8528657"><a href="/io/ioutil/tempfile_test.go.html#8528526">err</a></span><span class="op" id="8528660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528663">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528667">dir</span>&nbsp;<span class="op" id="8528671">:=</span>&nbsp;<span class="ident" id="8528674"><a href="/io/ioutil/tempfile_test.go.html#8527843">os</a></span><span class="op" id="8528676">.</span><span class="ident" id="8528677">TempDir</span><span class="op" id="8528684">(</span><span class="op" id="8528685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528688"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span><span class="op" id="8528692">,</span>&nbsp;<span class="ident" id="8528694"><a href="/io/ioutil/tempfile_test.go.html#8528526">err</a></span>&nbsp;<span class="op" id="8528698">=</span>&nbsp;<span class="ident" id="8528700"><a href="/io/ioutil/tempfile.go.html#3540319">TempDir</a></span><span class="op" id="8528707">(</span><span class="ident" id="8528708"><a href="/io/ioutil/tempfile_test.go.html#8528667">dir</a></span><span class="op" id="8528711">,</span>&nbsp;<span class="string" id="8528713">&#34;ioutil_test&#34;</span><span class="op" id="8528726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528729">if</span>&nbsp;<span class="ident" id="8528732"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span>&nbsp;<span class="op" id="8528737">==</span>&nbsp;<span class="string" id="8528740">&#34;&#34;</span>&nbsp;<span class="op" id="8528743">||</span>&nbsp;<span class="ident" id="8528746"><a href="/io/ioutil/tempfile_test.go.html#8528526">err</a></span>&nbsp;<span class="op" id="8528750">!=</span>&nbsp;<span class="ident" id="8528753">nil</span>&nbsp;<span class="op" id="8528757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528761"><a href="/io/ioutil/tempfile_test.go.html#8528503">t</a></span><span class="op" id="8528762">.</span><span class="ident" id="8528763">Errorf</span><span class="op" id="8528769">(</span><span class="string" id="8528770">&#34;TempDir(dir,&nbsp;`ioutil_test`)&nbsp;=&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8528808">,</span>&nbsp;<span class="ident" id="8528810"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span><span class="op" id="8528814">,</span>&nbsp;<span class="ident" id="8528816"><a href="/io/ioutil/tempfile_test.go.html#8528526">err</a></span><span class="op" id="8528819">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528825">if</span>&nbsp;<span class="ident" id="8528828"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span>&nbsp;<span class="op" id="8528833">!=</span>&nbsp;<span class="string" id="8528836">&#34;&#34;</span>&nbsp;<span class="op" id="8528839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528843"><a href="/io/ioutil/tempfile_test.go.html#8527843">os</a></span><span class="op" id="8528845">.</span><span class="ident" id="8528846">Remove</span><span class="op" id="8528852">(</span><span class="ident" id="8528853"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span><span class="op" id="8528857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528861">re</span>&nbsp;<span class="op" id="8528864">:=</span>&nbsp;<span class="ident" id="8528867"><a href="/io/ioutil/tempfile_test.go.html#8527866">regexp</a></span><span class="op" id="8528873">.</span><span class="ident" id="8528874">MustCompile</span><span class="op" id="8528885">(</span><span class="string" id="8528886">&#34;^&#34;</span>&nbsp;<span class="op" id="8528890">+</span>&nbsp;<span class="ident" id="8528892"><a href="/io/ioutil/tempfile_test.go.html#8527866">regexp</a></span><span class="op" id="8528898">.</span><span class="ident" id="8528899">QuoteMeta</span><span class="op" id="8528908">(</span><span class="ident" id="8528909"><a href="/io/ioutil/tempfile_test.go.html#8527849">filepath</a></span><span class="op" id="8528917">.</span><span class="ident" id="8528918">Join</span><span class="op" id="8528922">(</span><span class="ident" id="8528923"><a href="/io/ioutil/tempfile_test.go.html#8528667">dir</a></span><span class="op" id="8528926">,</span>&nbsp;<span class="string" id="8528928">&#34;ioutil_test&#34;</span><span class="op" id="8528941">)</span><span class="op" id="8528942">)</span>&nbsp;<span class="op" id="8528944">+</span>&nbsp;<span class="string" id="8528946">&#34;[0-9]+$&#34;</span><span class="op" id="8528955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528959">if</span>&nbsp;<span class="op" id="8528962">!</span><span class="ident" id="8528963"><a href="/io/ioutil/tempfile_test.go.html#8528861">re</a></span><span class="op" id="8528965">.</span><span class="ident" id="8528966">MatchString</span><span class="op" id="8528977">(</span><span class="ident" id="8528978"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span><span class="op" id="8528982">)</span>&nbsp;<span class="op" id="8528984">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528989"><a href="/io/ioutil/tempfile_test.go.html#8528503">t</a></span><span class="op" id="8528990">.</span><span class="ident" id="8528991">Errorf</span><span class="op" id="8528997">(</span><span class="string" id="8528998">&#34;TempDir(`&#34;</span><span class="op" id="8529009">+</span><span class="ident" id="8529010"><a href="/io/ioutil/tempfile_test.go.html#8528667">dir</a></span><span class="op" id="8529013">+</span><span class="string" id="8529014">&#34;`,&nbsp;`ioutil_test`)&nbsp;created&nbsp;bad&nbsp;name&nbsp;%s&#34;</span><span class="op" id="8529053">,</span>&nbsp;<span class="ident" id="8529055"><a href="/io/ioutil/tempfile_test.go.html#8528520">name</a></span><span class="op" id="8529059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8529063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8529066">}</span><br>
<span class="lineno"></span><span class="op" id="8529068">}</span>
</div>
</body>
</html>
