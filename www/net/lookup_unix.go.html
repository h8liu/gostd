<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2645643">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2645699">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2645753">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2645804">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2645869">package</span>&nbsp;<span class="ident" id="2645877">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2645882">import</span>&nbsp;<span class="op" id="2645889">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2645892">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2645902">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="2645909">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2645912">var</span>&nbsp;<span class="ident" id="2645916">onceReadProtocols</span>&nbsp;<span class="ident" id="2645934"><a href="/net/lookup_unix.go.html#2645902">sync</a></span><span class="op" id="2645938">.</span><span class="ident" id="2645939">Once</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2645945">//&nbsp;readProtocols&nbsp;loads&nbsp;contents&nbsp;of&nbsp;/etc/protocols&nbsp;into&nbsp;protocols&nbsp;map</span><br>
<span class="lineno"></span><span class="comment" id="2646014">//&nbsp;for&nbsp;quick&nbsp;access.</span><br>
<span class="lineno"></span><span class="keyword" id="2646035">func</span>&nbsp;<span class="ident" id="2646040">readProtocols</span><span class="op" id="2646053">(</span><span class="op" id="2646054">)</span>&nbsp;<span class="op" id="2646056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646059">if</span>&nbsp;<span class="ident" id="2646062">file</span><span class="op" id="2646066">,</span>&nbsp;<span class="ident" id="2646068">err</span>&nbsp;<span class="op" id="2646072">:=</span>&nbsp;<span class="ident" id="2646075"><a href="/net/parse.go.html#2663938">open</a></span><span class="op" id="2646079">(</span><span class="string" id="2646080">&#34;/etc/protocols&#34;</span><span class="op" id="2646096">)</span><span class="op" id="2646097">;</span>&nbsp;<span class="ident" id="2646099"><a href="/net/lookup_unix.go.html#2646068">err</a></span>&nbsp;<span class="op" id="2646103">==</span>&nbsp;<span class="ident" id="2646106">nil</span>&nbsp;<span class="op" id="2646110">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646114">for</span>&nbsp;<span class="ident" id="2646118">line</span><span class="op" id="2646122">,</span>&nbsp;<span class="ident" id="2646124">ok</span>&nbsp;<span class="op" id="2646127">:=</span>&nbsp;<span class="ident" id="2646130"><a href="/net/lookup_unix.go.html#2646062">file</a></span><span class="op" id="2646134">.</span><span class="ident" id="2646135">readLine</span><span class="op" id="2646143">(</span><span class="op" id="2646144">)</span><span class="op" id="2646145">;</span>&nbsp;<span class="ident" id="2646147"><a href="/net/lookup_unix.go.html#2646124">ok</a></span><span class="op" id="2646149">;</span>&nbsp;<span class="ident" id="2646151"><a href="/net/lookup_unix.go.html#2646118">line</a></span><span class="op" id="2646155">,</span>&nbsp;<span class="ident" id="2646157"><a href="/net/lookup_unix.go.html#2646124">ok</a></span>&nbsp;<span class="op" id="2646160">=</span>&nbsp;<span class="ident" id="2646162"><a href="/net/lookup_unix.go.html#2646062">file</a></span><span class="op" id="2646166">.</span><span class="ident" id="2646167">readLine</span><span class="op" id="2646175">(</span><span class="op" id="2646176">)</span>&nbsp;<span class="op" id="2646178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2646183">//&nbsp;tcp&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;TCP&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;transmission&nbsp;control&nbsp;protocol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646239">if</span>&nbsp;<span class="ident" id="2646242">i</span>&nbsp;<span class="op" id="2646244">:=</span>&nbsp;<span class="ident" id="2646247"><a href="/net/parse.go.html#2664110">byteIndex</a></span><span class="op" id="2646256">(</span><span class="ident" id="2646257"><a href="/net/lookup_unix.go.html#2646118">line</a></span><span class="op" id="2646261">,</span>&nbsp;<span class="string" id="2646263">&#39;#&#39;</span><span class="op" id="2646266">)</span><span class="op" id="2646267">;</span>&nbsp;<span class="ident" id="2646269"><a href="/net/lookup_unix.go.html#2646242">i</a></span>&nbsp;<span class="op" id="2646271">&gt;=</span>&nbsp;<span class="num" id="2646274">0</span>&nbsp;<span class="op" id="2646276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646282"><a href="/net/lookup_unix.go.html#2646118">line</a></span>&nbsp;<span class="op" id="2646287">=</span>&nbsp;<span class="ident" id="2646289"><a href="/net/lookup_unix.go.html#2646118">line</a></span><span class="op" id="2646293">[</span><span class="num" id="2646294">0</span><span class="op" id="2646295">:</span><span class="ident" id="2646296"><a href="/net/lookup_unix.go.html#2646242">i</a></span><span class="op" id="2646297">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646302">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646307">f</span>&nbsp;<span class="op" id="2646309">:=</span>&nbsp;<span class="ident" id="2646312"><a href="/net/parse.go.html#2664774">getFields</a></span><span class="op" id="2646321">(</span><span class="ident" id="2646322"><a href="/net/lookup_unix.go.html#2646118">line</a></span><span class="op" id="2646326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646331">if</span>&nbsp;<span class="builtinfunc" id="2646334">len</span><span class="op" id="2646337">(</span><span class="ident" id="2646338"><a href="/net/lookup_unix.go.html#2646307">f</a></span><span class="op" id="2646339">)</span>&nbsp;<span class="op" id="2646341">&lt;</span>&nbsp;<span class="num" id="2646343">2</span>&nbsp;<span class="op" id="2646345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646351">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646368">if</span>&nbsp;<span class="ident" id="2646371">proto</span><span class="op" id="2646376">,</span>&nbsp;<span class="ident" id="2646378">_</span><span class="op" id="2646379">,</span>&nbsp;<span class="ident" id="2646381">ok</span>&nbsp;<span class="op" id="2646384">:=</span>&nbsp;<span class="ident" id="2646387"><a href="/net/parse.go.html#2665011">dtoi</a></span><span class="op" id="2646391">(</span><span class="ident" id="2646392"><a href="/net/lookup_unix.go.html#2646307">f</a></span><span class="op" id="2646393">[</span><span class="num" id="2646394">1</span><span class="op" id="2646395">]</span><span class="op" id="2646396">,</span>&nbsp;<span class="num" id="2646398">0</span><span class="op" id="2646399">)</span><span class="op" id="2646400">;</span>&nbsp;<span class="ident" id="2646402"><a href="/net/lookup_unix.go.html#2646381">ok</a></span>&nbsp;<span class="op" id="2646405">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646411">if</span>&nbsp;<span class="ident" id="2646414">_</span><span class="op" id="2646415">,</span>&nbsp;<span class="ident" id="2646417">ok</span>&nbsp;<span class="op" id="2646420">:=</span>&nbsp;<span class="ident" id="2646423"><a href="/net/lookup.go.html#2641607">protocols</a></span><span class="op" id="2646432">[</span><span class="ident" id="2646433"><a href="/net/lookup_unix.go.html#2646307">f</a></span><span class="op" id="2646434">[</span><span class="num" id="2646435">0</span><span class="op" id="2646436">]</span><span class="op" id="2646437">]</span><span class="op" id="2646438">;</span>&nbsp;<span class="op" id="2646440">!</span><span class="ident" id="2646441"><a href="/net/lookup_unix.go.html#2646417">ok</a></span>&nbsp;<span class="op" id="2646444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646451"><a href="/net/lookup.go.html#2641607">protocols</a></span><span class="op" id="2646460">[</span><span class="ident" id="2646461"><a href="/net/lookup_unix.go.html#2646307">f</a></span><span class="op" id="2646462">[</span><span class="num" id="2646463">0</span><span class="op" id="2646464">]</span><span class="op" id="2646465">]</span>&nbsp;<span class="op" id="2646467">=</span>&nbsp;<span class="ident" id="2646469"><a href="/net/lookup_unix.go.html#2646371">proto</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646485">for</span>&nbsp;<span class="ident" id="2646489">_</span><span class="op" id="2646490">,</span>&nbsp;<span class="ident" id="2646492">alias</span>&nbsp;<span class="op" id="2646498">:=</span>&nbsp;<span class="keyword" id="2646501">range</span>&nbsp;<span class="ident" id="2646507"><a href="/net/lookup_unix.go.html#2646307">f</a></span><span class="op" id="2646508">[</span><span class="num" id="2646509">2</span><span class="op" id="2646510">:</span><span class="op" id="2646511">]</span>&nbsp;<span class="op" id="2646513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646520">if</span>&nbsp;<span class="ident" id="2646523">_</span><span class="op" id="2646524">,</span>&nbsp;<span class="ident" id="2646526">ok</span>&nbsp;<span class="op" id="2646529">:=</span>&nbsp;<span class="ident" id="2646532"><a href="/net/lookup.go.html#2641607">protocols</a></span><span class="op" id="2646541">[</span><span class="ident" id="2646542"><a href="/net/lookup_unix.go.html#2646492">alias</a></span><span class="op" id="2646547">]</span><span class="op" id="2646548">;</span>&nbsp;<span class="op" id="2646550">!</span><span class="ident" id="2646551"><a href="/net/lookup_unix.go.html#2646526">ok</a></span>&nbsp;<span class="op" id="2646554">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646562"><a href="/net/lookup.go.html#2641607">protocols</a></span><span class="op" id="2646571">[</span><span class="ident" id="2646572"><a href="/net/lookup_unix.go.html#2646492">alias</a></span><span class="op" id="2646577">]</span>&nbsp;<span class="op" id="2646579">=</span>&nbsp;<span class="ident" id="2646581"><a href="/net/lookup_unix.go.html#2646371">proto</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646607">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646611"><a href="/net/lookup_unix.go.html#2646062">file</a></span><span class="op" id="2646615">.</span><span class="builtinfunc" id="2646616">close</span><span class="op" id="2646621">(</span><span class="op" id="2646622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646625">}</span><br>
<span class="lineno"></span><span class="op" id="2646627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2646630">//&nbsp;lookupProtocol&nbsp;looks&nbsp;up&nbsp;IP&nbsp;protocol&nbsp;name&nbsp;in&nbsp;/etc/protocols&nbsp;and</span><br>
<span class="lineno">45</span><span class="comment" id="2646696">//&nbsp;returns&nbsp;correspondent&nbsp;protocol&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="2646738">func</span>&nbsp;<span class="ident" id="2646743">lookupProtocol</span><span class="op" id="2646757">(</span><span class="ident" id="2646758">name</span>&nbsp;<span class="builtintype" id="2646763">string</span><span class="op" id="2646769">)</span>&nbsp;<span class="op" id="2646771">(</span><span class="ident" id="2646772">proto</span>&nbsp;<span class="builtintype" id="2646778">int</span><span class="op" id="2646781">,</span>&nbsp;<span class="ident" id="2646783">err</span>&nbsp;<span class="builtintype" id="2646787">error</span><span class="op" id="2646792">)</span>&nbsp;<span class="op" id="2646794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646797"><a href="/net/lookup_unix.go.html#2645916">onceReadProtocols</a></span><span class="op" id="2646814">.</span><span class="ident" id="2646815">Do</span><span class="op" id="2646817">(</span><span class="ident" id="2646818"><a href="/net/lookup_unix.go.html#2646040">readProtocols</a></span><span class="op" id="2646831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646834"><a href="/net/lookup_unix.go.html#2646772">proto</a></span><span class="op" id="2646839">,</span>&nbsp;<span class="ident" id="2646841">found</span>&nbsp;<span class="op" id="2646847">:=</span>&nbsp;<span class="ident" id="2646850"><a href="/net/lookup.go.html#2641607">protocols</a></span><span class="op" id="2646859">[</span><span class="ident" id="2646860"><a href="/net/lookup_unix.go.html#2646758">name</a></span><span class="op" id="2646864">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646867">if</span>&nbsp;<span class="op" id="2646870">!</span><span class="ident" id="2646871"><a href="/net/lookup_unix.go.html#2646841">found</a></span>&nbsp;<span class="op" id="2646877">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646881">return</span>&nbsp;<span class="num" id="2646888">0</span><span class="op" id="2646889">,</span>&nbsp;<span class="ident" id="2646891"><a href="/net/lookup_unix.go.html#2645892">errors</a></span><span class="op" id="2646897">.</span><span class="ident" id="2646898">New</span><span class="op" id="2646901">(</span><span class="string" id="2646902">&#34;unknown&nbsp;IP&nbsp;protocol&nbsp;specified:&nbsp;&#34;</span>&nbsp;<span class="op" id="2646936">+</span>&nbsp;<span class="ident" id="2646938"><a href="/net/lookup_unix.go.html#2646758">name</a></span><span class="op" id="2646942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646948">return</span><br>
<span class="lineno"></span><span class="op" id="2646955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="2646958">func</span>&nbsp;<span class="ident" id="2646963">lookupHost</span><span class="op" id="2646973">(</span><span class="ident" id="2646974">host</span>&nbsp;<span class="builtintype" id="2646979">string</span><span class="op" id="2646985">)</span>&nbsp;<span class="op" id="2646987">(</span><span class="ident" id="2646988">addrs</span>&nbsp;<span class="op" id="2646994">[</span><span class="op" id="2646995">]</span><span class="builtintype" id="2646996">string</span><span class="op" id="2647002">,</span>&nbsp;<span class="ident" id="2647004">err</span>&nbsp;<span class="builtintype" id="2647008">error</span><span class="op" id="2647013">)</span>&nbsp;<span class="op" id="2647015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647018"><a href="/net/lookup_unix.go.html#2646988">addrs</a></span><span class="op" id="2647023">,</span>&nbsp;<span class="ident" id="2647025"><a href="/net/lookup_unix.go.html#2647004">err</a></span><span class="op" id="2647028">,</span>&nbsp;<span class="ident" id="2647030">ok</span>&nbsp;<span class="op" id="2647033">:=</span>&nbsp;<span class="ident" id="2647036"><a href="/net/cgo_stub.go.html#2516951">cgoLookupHost</a></span><span class="op" id="2647049">(</span><span class="ident" id="2647050"><a href="/net/lookup_unix.go.html#2646974">host</a></span><span class="op" id="2647054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647057">if</span>&nbsp;<span class="op" id="2647060">!</span><span class="ident" id="2647061"><a href="/net/lookup_unix.go.html#2647030">ok</a></span>&nbsp;<span class="op" id="2647064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647068"><a href="/net/lookup_unix.go.html#2646988">addrs</a></span><span class="op" id="2647073">,</span>&nbsp;<span class="ident" id="2647075"><a href="/net/lookup_unix.go.html#2647004">err</a></span>&nbsp;<span class="op" id="2647079">=</span>&nbsp;<span class="ident" id="2647081"><a href="/net/dnsclient_unix.go.html#2541163">goLookupHost</a></span><span class="op" id="2647093">(</span><span class="ident" id="2647094"><a href="/net/lookup_unix.go.html#2646974">host</a></span><span class="op" id="2647098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647101">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647104">return</span><br>
<span class="lineno"></span><span class="op" id="2647111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2647114">func</span>&nbsp;<span class="ident" id="2647119">lookupIP</span><span class="op" id="2647127">(</span><span class="ident" id="2647128">host</span>&nbsp;<span class="builtintype" id="2647133">string</span><span class="op" id="2647139">)</span>&nbsp;<span class="op" id="2647141">(</span><span class="ident" id="2647142">addrs</span>&nbsp;<span class="op" id="2647148">[</span><span class="op" id="2647149">]</span><span class="ident" id="2647150"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="2647152">,</span>&nbsp;<span class="ident" id="2647154">err</span>&nbsp;<span class="builtintype" id="2647158">error</span><span class="op" id="2647163">)</span>&nbsp;<span class="op" id="2647165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647168"><a href="/net/lookup_unix.go.html#2647142">addrs</a></span><span class="op" id="2647173">,</span>&nbsp;<span class="ident" id="2647175"><a href="/net/lookup_unix.go.html#2647154">err</a></span><span class="op" id="2647178">,</span>&nbsp;<span class="ident" id="2647180">ok</span>&nbsp;<span class="op" id="2647183">:=</span>&nbsp;<span class="ident" id="2647186"><a href="/net/cgo_stub.go.html#2517165">cgoLookupIP</a></span><span class="op" id="2647197">(</span><span class="ident" id="2647198"><a href="/net/lookup_unix.go.html#2647128">host</a></span><span class="op" id="2647202">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647205">if</span>&nbsp;<span class="op" id="2647208">!</span><span class="ident" id="2647209"><a href="/net/lookup_unix.go.html#2647180">ok</a></span>&nbsp;<span class="op" id="2647212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647216"><a href="/net/lookup_unix.go.html#2647142">addrs</a></span><span class="op" id="2647221">,</span>&nbsp;<span class="ident" id="2647223"><a href="/net/lookup_unix.go.html#2647154">err</a></span>&nbsp;<span class="op" id="2647227">=</span>&nbsp;<span class="ident" id="2647229"><a href="/net/dnsclient_unix.go.html#2541824">goLookupIP</a></span><span class="op" id="2647239">(</span><span class="ident" id="2647240"><a href="/net/lookup_unix.go.html#2647128">host</a></span><span class="op" id="2647244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647250">return</span><br>
<span class="lineno"></span><span class="op" id="2647257">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="2647260">func</span>&nbsp;<span class="ident" id="2647265">lookupPort</span><span class="op" id="2647275">(</span><span class="ident" id="2647276">network</span><span class="op" id="2647283">,</span>&nbsp;<span class="ident" id="2647285">service</span>&nbsp;<span class="builtintype" id="2647293">string</span><span class="op" id="2647299">)</span>&nbsp;<span class="op" id="2647301">(</span><span class="ident" id="2647302">port</span>&nbsp;<span class="builtintype" id="2647307">int</span><span class="op" id="2647310">,</span>&nbsp;<span class="ident" id="2647312">err</span>&nbsp;<span class="builtintype" id="2647316">error</span><span class="op" id="2647321">)</span>&nbsp;<span class="op" id="2647323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647326"><a href="/net/lookup_unix.go.html#2647302">port</a></span><span class="op" id="2647330">,</span>&nbsp;<span class="ident" id="2647332"><a href="/net/lookup_unix.go.html#2647312">err</a></span><span class="op" id="2647335">,</span>&nbsp;<span class="ident" id="2647337">ok</span>&nbsp;<span class="op" id="2647340">:=</span>&nbsp;<span class="ident" id="2647343"><a href="/net/cgo_stub.go.html#2517056">cgoLookupPort</a></span><span class="op" id="2647356">(</span><span class="ident" id="2647357"><a href="/net/lookup_unix.go.html#2647276">network</a></span><span class="op" id="2647364">,</span>&nbsp;<span class="ident" id="2647366"><a href="/net/lookup_unix.go.html#2647285">service</a></span><span class="op" id="2647373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647376">if</span>&nbsp;<span class="op" id="2647379">!</span><span class="ident" id="2647380"><a href="/net/lookup_unix.go.html#2647337">ok</a></span>&nbsp;<span class="op" id="2647383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647387"><a href="/net/lookup_unix.go.html#2647302">port</a></span><span class="op" id="2647391">,</span>&nbsp;<span class="ident" id="2647393"><a href="/net/lookup_unix.go.html#2647312">err</a></span>&nbsp;<span class="op" id="2647397">=</span>&nbsp;<span class="ident" id="2647399"><a href="/net/port_unix.go.html#2670647">goLookupPort</a></span><span class="op" id="2647411">(</span><span class="ident" id="2647412"><a href="/net/lookup_unix.go.html#2647276">network</a></span><span class="op" id="2647419">,</span>&nbsp;<span class="ident" id="2647421"><a href="/net/lookup_unix.go.html#2647285">service</a></span><span class="op" id="2647428">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647434">return</span><br>
<span class="lineno"></span><span class="op" id="2647441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2647444">func</span>&nbsp;<span class="ident" id="2647449">lookupCNAME</span><span class="op" id="2647460">(</span><span class="ident" id="2647461">name</span>&nbsp;<span class="builtintype" id="2647466">string</span><span class="op" id="2647472">)</span>&nbsp;<span class="op" id="2647474">(</span><span class="ident" id="2647475">cname</span>&nbsp;<span class="builtintype" id="2647481">string</span><span class="op" id="2647487">,</span>&nbsp;<span class="ident" id="2647489">err</span>&nbsp;<span class="builtintype" id="2647493">error</span><span class="op" id="2647498">)</span>&nbsp;<span class="op" id="2647500">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647503"><a href="/net/lookup_unix.go.html#2647475">cname</a></span><span class="op" id="2647508">,</span>&nbsp;<span class="ident" id="2647510"><a href="/net/lookup_unix.go.html#2647489">err</a></span><span class="op" id="2647513">,</span>&nbsp;<span class="ident" id="2647515">ok</span>&nbsp;<span class="op" id="2647518">:=</span>&nbsp;<span class="ident" id="2647521"><a href="/net/cgo_stub.go.html#2517264">cgoLookupCNAME</a></span><span class="op" id="2647535">(</span><span class="ident" id="2647536"><a href="/net/lookup_unix.go.html#2647461">name</a></span><span class="op" id="2647540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647543">if</span>&nbsp;<span class="op" id="2647546">!</span><span class="ident" id="2647547"><a href="/net/lookup_unix.go.html#2647515">ok</a></span>&nbsp;<span class="op" id="2647550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647554"><a href="/net/lookup_unix.go.html#2647475">cname</a></span><span class="op" id="2647559">,</span>&nbsp;<span class="ident" id="2647561"><a href="/net/lookup_unix.go.html#2647489">err</a></span>&nbsp;<span class="op" id="2647565">=</span>&nbsp;<span class="ident" id="2647567"><a href="/net/dnsclient_unix.go.html#2543125">goLookupCNAME</a></span><span class="op" id="2647580">(</span><span class="ident" id="2647581"><a href="/net/lookup_unix.go.html#2647461">name</a></span><span class="op" id="2647585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647591">return</span><br>
<span class="lineno">85</span><span class="op" id="2647598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2647601">func</span>&nbsp;<span class="ident" id="2647606">lookupSRV</span><span class="op" id="2647615">(</span><span class="ident" id="2647616">service</span><span class="op" id="2647623">,</span>&nbsp;<span class="ident" id="2647625">proto</span><span class="op" id="2647630">,</span>&nbsp;<span class="ident" id="2647632">name</span>&nbsp;<span class="builtintype" id="2647637">string</span><span class="op" id="2647643">)</span>&nbsp;<span class="op" id="2647645">(</span><span class="ident" id="2647646">cname</span>&nbsp;<span class="builtintype" id="2647652">string</span><span class="op" id="2647658">,</span>&nbsp;<span class="ident" id="2647660">addrs</span>&nbsp;<span class="op" id="2647666">[</span><span class="op" id="2647667">]</span><span class="op" id="2647668">*</span><span class="ident" id="2647669"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="2647672">,</span>&nbsp;<span class="ident" id="2647674">err</span>&nbsp;<span class="builtintype" id="2647678">error</span><span class="op" id="2647683">)</span>&nbsp;<span class="op" id="2647685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647688">var</span>&nbsp;<span class="ident" id="2647692">target</span>&nbsp;<span class="builtintype" id="2647699">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647707">if</span>&nbsp;<span class="ident" id="2647710"><a href="/net/lookup_unix.go.html#2647616">service</a></span>&nbsp;<span class="op" id="2647718">==</span>&nbsp;<span class="string" id="2647721">&#34;&#34;</span>&nbsp;<span class="op" id="2647724">&amp;&amp;</span>&nbsp;<span class="ident" id="2647727"><a href="/net/lookup_unix.go.html#2647625">proto</a></span>&nbsp;<span class="op" id="2647733">==</span>&nbsp;<span class="string" id="2647736">&#34;&#34;</span>&nbsp;<span class="op" id="2647739">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647743"><a href="/net/lookup_unix.go.html#2647692">target</a></span>&nbsp;<span class="op" id="2647750">=</span>&nbsp;<span class="ident" id="2647752"><a href="/net/lookup_unix.go.html#2647632">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647758">}</span>&nbsp;<span class="keyword" id="2647760">else</span>&nbsp;<span class="op" id="2647765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647769"><a href="/net/lookup_unix.go.html#2647692">target</a></span>&nbsp;<span class="op" id="2647776">=</span>&nbsp;<span class="string" id="2647778">&#34;_&#34;</span>&nbsp;<span class="op" id="2647782">+</span>&nbsp;<span class="ident" id="2647784"><a href="/net/lookup_unix.go.html#2647616">service</a></span>&nbsp;<span class="op" id="2647792">+</span>&nbsp;<span class="string" id="2647794">&#34;._&#34;</span>&nbsp;<span class="op" id="2647799">+</span>&nbsp;<span class="ident" id="2647801"><a href="/net/lookup_unix.go.html#2647625">proto</a></span>&nbsp;<span class="op" id="2647807">+</span>&nbsp;<span class="string" id="2647809">&#34;.&#34;</span>&nbsp;<span class="op" id="2647813">+</span>&nbsp;<span class="ident" id="2647815"><a href="/net/lookup_unix.go.html#2647632">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647824">var</span>&nbsp;<span class="ident" id="2647828">records</span>&nbsp;<span class="op" id="2647836">[</span><span class="op" id="2647837">]</span><span class="ident" id="2647838"><a href="/net/dnsmsg.go.html#2549843">dnsRR</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647845"><a href="/net/lookup_unix.go.html#2647646">cname</a></span><span class="op" id="2647850">,</span>&nbsp;<span class="ident" id="2647852"><a href="/net/lookup_unix.go.html#2647828">records</a></span><span class="op" id="2647859">,</span>&nbsp;<span class="ident" id="2647861"><a href="/net/lookup_unix.go.html#2647674">err</a></span>&nbsp;<span class="op" id="2647865">=</span>&nbsp;<span class="ident" id="2647867"><a href="/net/dnsclient_unix.go.html#2539266">lookup</a></span><span class="op" id="2647873">(</span><span class="ident" id="2647874"><a href="/net/lookup_unix.go.html#2647692">target</a></span><span class="op" id="2647880">,</span>&nbsp;<span class="ident" id="2647882"><a href="/net/dnsmsg.go.html#2547159">dnsTypeSRV</a></span><span class="op" id="2647892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647895">if</span>&nbsp;<span class="ident" id="2647898"><a href="/net/lookup_unix.go.html#2647674">err</a></span>&nbsp;<span class="op" id="2647902">!=</span>&nbsp;<span class="ident" id="2647905">nil</span>&nbsp;<span class="op" id="2647909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647913">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647924"><a href="/net/lookup_unix.go.html#2647660">addrs</a></span>&nbsp;<span class="op" id="2647930">=</span>&nbsp;<span class="builtinfunc" id="2647932">make</span><span class="op" id="2647936">(</span><span class="op" id="2647937">[</span><span class="op" id="2647938">]</span><span class="op" id="2647939">*</span><span class="ident" id="2647940"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="2647943">,</span>&nbsp;<span class="builtinfunc" id="2647945">len</span><span class="op" id="2647948">(</span><span class="ident" id="2647949"><a href="/net/lookup_unix.go.html#2647828">records</a></span><span class="op" id="2647956">)</span><span class="op" id="2647957">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647960">for</span>&nbsp;<span class="ident" id="2647964">i</span><span class="op" id="2647965">,</span>&nbsp;<span class="ident" id="2647967">rr</span>&nbsp;<span class="op" id="2647970">:=</span>&nbsp;<span class="keyword" id="2647973">range</span>&nbsp;<span class="ident" id="2647979"><a href="/net/lookup_unix.go.html#2647828">records</a></span>&nbsp;<span class="op" id="2647987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647991">r</span>&nbsp;<span class="op" id="2647993">:=</span>&nbsp;<span class="ident" id="2647996"><a href="/net/lookup_unix.go.html#2647967">rr</a></span><span class="op" id="2647998">.</span><span class="op" id="2647999">(</span><span class="op" id="2648000">*</span><span class="ident" id="2648001"><a href="/net/dnsmsg.go.html#2553457">dnsRR_SRV</a></span><span class="op" id="2648010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648014"><a href="/net/lookup_unix.go.html#2647660">addrs</a></span><span class="op" id="2648019">[</span><span class="ident" id="2648020"><a href="/net/lookup_unix.go.html#2647964">i</a></span><span class="op" id="2648021">]</span>&nbsp;<span class="op" id="2648023">=</span>&nbsp;<span class="op" id="2648025">&amp;</span><span class="ident" id="2648026"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="2648029">{</span><span class="ident" id="2648030"><a href="/net/lookup_unix.go.html#2647991">r</a></span><span class="op" id="2648031">.</span><span class="ident" id="2648032">Target</span><span class="op" id="2648038">,</span>&nbsp;<span class="ident" id="2648040"><a href="/net/lookup_unix.go.html#2647991">r</a></span><span class="op" id="2648041">.</span><span class="ident" id="2648042">Port</span><span class="op" id="2648046">,</span>&nbsp;<span class="ident" id="2648048"><a href="/net/lookup_unix.go.html#2647991">r</a></span><span class="op" id="2648049">.</span><span class="ident" id="2648050">Priority</span><span class="op" id="2648058">,</span>&nbsp;<span class="ident" id="2648060"><a href="/net/lookup_unix.go.html#2647991">r</a></span><span class="op" id="2648061">.</span><span class="ident" id="2648062">Weight</span><span class="op" id="2648068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648074"><a href="/net/dnsclient.go.html#2530972">byPriorityWeight</a></span><span class="op" id="2648090">(</span><span class="ident" id="2648091"><a href="/net/lookup_unix.go.html#2647660">addrs</a></span><span class="op" id="2648096">)</span><span class="op" id="2648097">.</span><span class="ident" id="2648098">sort</span><span class="op" id="2648102">(</span><span class="op" id="2648103">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648106">return</span><br>
<span class="lineno"></span><span class="op" id="2648113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2648116">func</span>&nbsp;<span class="ident" id="2648121">lookupMX</span><span class="op" id="2648129">(</span><span class="ident" id="2648130">name</span>&nbsp;<span class="builtintype" id="2648135">string</span><span class="op" id="2648141">)</span>&nbsp;<span class="op" id="2648143">(</span><span class="ident" id="2648144">mx</span>&nbsp;<span class="op" id="2648147">[</span><span class="op" id="2648148">]</span><span class="op" id="2648149">*</span><span class="ident" id="2648150"><a href="/net/dnsclient.go.html#2532096">MX</a></span><span class="op" id="2648152">,</span>&nbsp;<span class="ident" id="2648154">err</span>&nbsp;<span class="builtintype" id="2648158">error</span><span class="op" id="2648163">)</span>&nbsp;<span class="op" id="2648165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648168">_</span><span class="op" id="2648169">,</span>&nbsp;<span class="ident" id="2648171">records</span><span class="op" id="2648178">,</span>&nbsp;<span class="ident" id="2648180"><a href="/net/lookup_unix.go.html#2648154">err</a></span>&nbsp;<span class="op" id="2648184">:=</span>&nbsp;<span class="ident" id="2648187"><a href="/net/dnsclient_unix.go.html#2539266">lookup</a></span><span class="op" id="2648193">(</span><span class="ident" id="2648194"><a href="/net/lookup_unix.go.html#2648130">name</a></span><span class="op" id="2648198">,</span>&nbsp;<span class="ident" id="2648200"><a href="/net/dnsmsg.go.html#2547102">dnsTypeMX</a></span><span class="op" id="2648209">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648212">if</span>&nbsp;<span class="ident" id="2648215"><a href="/net/lookup_unix.go.html#2648154">err</a></span>&nbsp;<span class="op" id="2648219">!=</span>&nbsp;<span class="ident" id="2648222">nil</span>&nbsp;<span class="op" id="2648226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648230">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648241"><a href="/net/lookup_unix.go.html#2648144">mx</a></span>&nbsp;<span class="op" id="2648244">=</span>&nbsp;<span class="builtinfunc" id="2648246">make</span><span class="op" id="2648250">(</span><span class="op" id="2648251">[</span><span class="op" id="2648252">]</span><span class="op" id="2648253">*</span><span class="ident" id="2648254"><a href="/net/dnsclient.go.html#2532096">MX</a></span><span class="op" id="2648256">,</span>&nbsp;<span class="builtinfunc" id="2648258">len</span><span class="op" id="2648261">(</span><span class="ident" id="2648262"><a href="/net/lookup_unix.go.html#2648171">records</a></span><span class="op" id="2648269">)</span><span class="op" id="2648270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648273">for</span>&nbsp;<span class="ident" id="2648277">i</span><span class="op" id="2648278">,</span>&nbsp;<span class="ident" id="2648280">rr</span>&nbsp;<span class="op" id="2648283">:=</span>&nbsp;<span class="keyword" id="2648286">range</span>&nbsp;<span class="ident" id="2648292"><a href="/net/lookup_unix.go.html#2648171">records</a></span>&nbsp;<span class="op" id="2648300">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648304">r</span>&nbsp;<span class="op" id="2648306">:=</span>&nbsp;<span class="ident" id="2648309"><a href="/net/lookup_unix.go.html#2648280">rr</a></span><span class="op" id="2648311">.</span><span class="op" id="2648312">(</span><span class="op" id="2648313">*</span><span class="ident" id="2648314"><a href="/net/dnsmsg.go.html#2551718">dnsRR_MX</a></span><span class="op" id="2648322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648326"><a href="/net/lookup_unix.go.html#2648144">mx</a></span><span class="op" id="2648328">[</span><span class="ident" id="2648329"><a href="/net/lookup_unix.go.html#2648277">i</a></span><span class="op" id="2648330">]</span>&nbsp;<span class="op" id="2648332">=</span>&nbsp;<span class="op" id="2648334">&amp;</span><span class="ident" id="2648335"><a href="/net/dnsclient.go.html#2532096">MX</a></span><span class="op" id="2648337">{</span><span class="ident" id="2648338"><a href="/net/lookup_unix.go.html#2648304">r</a></span><span class="op" id="2648339">.</span><span class="ident" id="2648340">Mx</span><span class="op" id="2648342">,</span>&nbsp;<span class="ident" id="2648344"><a href="/net/lookup_unix.go.html#2648304">r</a></span><span class="op" id="2648345">.</span><span class="ident" id="2648346">Pref</span><span class="op" id="2648350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648356"><a href="/net/dnsclient.go.html#2532211">byPref</a></span><span class="op" id="2648362">(</span><span class="ident" id="2648363"><a href="/net/lookup_unix.go.html#2648144">mx</a></span><span class="op" id="2648365">)</span><span class="op" id="2648366">.</span><span class="ident" id="2648367">sort</span><span class="op" id="2648371">(</span><span class="op" id="2648372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648375">return</span><br>
<span class="lineno">120</span><span class="op" id="2648382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2648385">func</span>&nbsp;<span class="ident" id="2648390">lookupNS</span><span class="op" id="2648398">(</span><span class="ident" id="2648399">name</span>&nbsp;<span class="builtintype" id="2648404">string</span><span class="op" id="2648410">)</span>&nbsp;<span class="op" id="2648412">(</span><span class="ident" id="2648413">ns</span>&nbsp;<span class="op" id="2648416">[</span><span class="op" id="2648417">]</span><span class="op" id="2648418">*</span><span class="ident" id="2648419"><a href="/net/dnsclient.go.html#2532618">NS</a></span><span class="op" id="2648421">,</span>&nbsp;<span class="ident" id="2648423">err</span>&nbsp;<span class="builtintype" id="2648427">error</span><span class="op" id="2648432">)</span>&nbsp;<span class="op" id="2648434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648437">_</span><span class="op" id="2648438">,</span>&nbsp;<span class="ident" id="2648440">records</span><span class="op" id="2648447">,</span>&nbsp;<span class="ident" id="2648449"><a href="/net/lookup_unix.go.html#2648423">err</a></span>&nbsp;<span class="op" id="2648453">:=</span>&nbsp;<span class="ident" id="2648456"><a href="/net/dnsclient_unix.go.html#2539266">lookup</a></span><span class="op" id="2648462">(</span><span class="ident" id="2648463"><a href="/net/lookup_unix.go.html#2648399">name</a></span><span class="op" id="2648467">,</span>&nbsp;<span class="ident" id="2648469"><a href="/net/dnsmsg.go.html#2546863">dnsTypeNS</a></span><span class="op" id="2648478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648481">if</span>&nbsp;<span class="ident" id="2648484"><a href="/net/lookup_unix.go.html#2648423">err</a></span>&nbsp;<span class="op" id="2648488">!=</span>&nbsp;<span class="ident" id="2648491">nil</span>&nbsp;<span class="op" id="2648495">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648499">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648510"><a href="/net/lookup_unix.go.html#2648413">ns</a></span>&nbsp;<span class="op" id="2648513">=</span>&nbsp;<span class="builtinfunc" id="2648515">make</span><span class="op" id="2648519">(</span><span class="op" id="2648520">[</span><span class="op" id="2648521">]</span><span class="op" id="2648522">*</span><span class="ident" id="2648523"><a href="/net/dnsclient.go.html#2532618">NS</a></span><span class="op" id="2648525">,</span>&nbsp;<span class="builtinfunc" id="2648527">len</span><span class="op" id="2648530">(</span><span class="ident" id="2648531"><a href="/net/lookup_unix.go.html#2648440">records</a></span><span class="op" id="2648538">)</span><span class="op" id="2648539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648542">for</span>&nbsp;<span class="ident" id="2648546">i</span><span class="op" id="2648547">,</span>&nbsp;<span class="ident" id="2648549">r</span>&nbsp;<span class="op" id="2648551">:=</span>&nbsp;<span class="keyword" id="2648554">range</span>&nbsp;<span class="ident" id="2648560"><a href="/net/lookup_unix.go.html#2648440">records</a></span>&nbsp;<span class="op" id="2648568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648572">r</span>&nbsp;<span class="op" id="2648574">:=</span>&nbsp;<span class="ident" id="2648577"><a href="/net/lookup_unix.go.html#2648549">r</a></span><span class="op" id="2648578">.</span><span class="op" id="2648579">(</span><span class="op" id="2648580">*</span><span class="ident" id="2648581"><a href="/net/dnsmsg.go.html#2552033">dnsRR_NS</a></span><span class="op" id="2648589">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648593"><a href="/net/lookup_unix.go.html#2648413">ns</a></span><span class="op" id="2648595">[</span><span class="ident" id="2648596"><a href="/net/lookup_unix.go.html#2648546">i</a></span><span class="op" id="2648597">]</span>&nbsp;<span class="op" id="2648599">=</span>&nbsp;<span class="op" id="2648601">&amp;</span><span class="ident" id="2648602"><a href="/net/dnsclient.go.html#2532618">NS</a></span><span class="op" id="2648604">{</span><span class="ident" id="2648605"><a href="/net/lookup_unix.go.html#2648572">r</a></span><span class="op" id="2648606">.</span><span class="ident" id="2648607">Ns</span><span class="op" id="2648609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648615">return</span><br>
<span class="lineno"></span><span class="op" id="2648622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="2648625">func</span>&nbsp;<span class="ident" id="2648630">lookupTXT</span><span class="op" id="2648639">(</span><span class="ident" id="2648640">name</span>&nbsp;<span class="builtintype" id="2648645">string</span><span class="op" id="2648651">)</span>&nbsp;<span class="op" id="2648653">(</span><span class="ident" id="2648654">txt</span>&nbsp;<span class="op" id="2648658">[</span><span class="op" id="2648659">]</span><span class="builtintype" id="2648660">string</span><span class="op" id="2648666">,</span>&nbsp;<span class="ident" id="2648668">err</span>&nbsp;<span class="builtintype" id="2648672">error</span><span class="op" id="2648677">)</span>&nbsp;<span class="op" id="2648679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648682">_</span><span class="op" id="2648683">,</span>&nbsp;<span class="ident" id="2648685">records</span><span class="op" id="2648692">,</span>&nbsp;<span class="ident" id="2648694"><a href="/net/lookup_unix.go.html#2648668">err</a></span>&nbsp;<span class="op" id="2648698">:=</span>&nbsp;<span class="ident" id="2648701"><a href="/net/dnsclient_unix.go.html#2539266">lookup</a></span><span class="op" id="2648707">(</span><span class="ident" id="2648708"><a href="/net/lookup_unix.go.html#2648640">name</a></span><span class="op" id="2648712">,</span>&nbsp;<span class="ident" id="2648714"><a href="/net/dnsmsg.go.html#2547121">dnsTypeTXT</a></span><span class="op" id="2648724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648727">if</span>&nbsp;<span class="ident" id="2648730"><a href="/net/lookup_unix.go.html#2648668">err</a></span>&nbsp;<span class="op" id="2648734">!=</span>&nbsp;<span class="ident" id="2648737">nil</span>&nbsp;<span class="op" id="2648741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648745">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648753">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648756"><a href="/net/lookup_unix.go.html#2648654">txt</a></span>&nbsp;<span class="op" id="2648760">=</span>&nbsp;<span class="builtinfunc" id="2648762">make</span><span class="op" id="2648766">(</span><span class="op" id="2648767">[</span><span class="op" id="2648768">]</span><span class="builtintype" id="2648769">string</span><span class="op" id="2648775">,</span>&nbsp;<span class="builtinfunc" id="2648777">len</span><span class="op" id="2648780">(</span><span class="ident" id="2648781"><a href="/net/lookup_unix.go.html#2648685">records</a></span><span class="op" id="2648788">)</span><span class="op" id="2648789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648792">for</span>&nbsp;<span class="ident" id="2648796">i</span><span class="op" id="2648797">,</span>&nbsp;<span class="ident" id="2648799">r</span>&nbsp;<span class="op" id="2648801">:=</span>&nbsp;<span class="keyword" id="2648804">range</span>&nbsp;<span class="ident" id="2648810"><a href="/net/lookup_unix.go.html#2648685">records</a></span>&nbsp;<span class="op" id="2648818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648822"><a href="/net/lookup_unix.go.html#2648654">txt</a></span><span class="op" id="2648825">[</span><span class="ident" id="2648826"><a href="/net/lookup_unix.go.html#2648796">i</a></span><span class="op" id="2648827">]</span>&nbsp;<span class="op" id="2648829">=</span>&nbsp;<span class="ident" id="2648831"><a href="/net/lookup_unix.go.html#2648799">r</a></span><span class="op" id="2648832">.</span><span class="op" id="2648833">(</span><span class="op" id="2648834">*</span><span class="ident" id="2648835"><a href="/net/dnsmsg.go.html#2553186">dnsRR_TXT</a></span><span class="op" id="2648844">)</span><span class="op" id="2648845">.</span><span class="ident" id="2648846">Txt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648854">return</span><br>
<span class="lineno">145</span><span class="op" id="2648861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2648864">func</span>&nbsp;<span class="ident" id="2648869">lookupAddr</span><span class="op" id="2648879">(</span><span class="ident" id="2648880">addr</span>&nbsp;<span class="builtintype" id="2648885">string</span><span class="op" id="2648891">)</span>&nbsp;<span class="op" id="2648893">(</span><span class="ident" id="2648894">name</span>&nbsp;<span class="op" id="2648899">[</span><span class="op" id="2648900">]</span><span class="builtintype" id="2648901">string</span><span class="op" id="2648907">,</span>&nbsp;<span class="ident" id="2648909">err</span>&nbsp;<span class="builtintype" id="2648913">error</span><span class="op" id="2648918">)</span>&nbsp;<span class="op" id="2648920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648923"><a href="/net/lookup_unix.go.html#2648894">name</a></span>&nbsp;<span class="op" id="2648928">=</span>&nbsp;<span class="ident" id="2648930"><a href="/net/hosts.go.html#2592601">lookupStaticAddr</a></span><span class="op" id="2648946">(</span><span class="ident" id="2648947"><a href="/net/lookup_unix.go.html#2648880">addr</a></span><span class="op" id="2648951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648954">if</span>&nbsp;<span class="builtinfunc" id="2648957">len</span><span class="op" id="2648960">(</span><span class="ident" id="2648961"><a href="/net/lookup_unix.go.html#2648894">name</a></span><span class="op" id="2648965">)</span>&nbsp;<span class="op" id="2648967">&gt;</span>&nbsp;<span class="num" id="2648969">0</span>&nbsp;<span class="op" id="2648971">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648975">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648986">var</span>&nbsp;<span class="ident" id="2648990">arpa</span>&nbsp;<span class="builtintype" id="2648995">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649003"><a href="/net/lookup_unix.go.html#2648990">arpa</a></span><span class="op" id="2649007">,</span>&nbsp;<span class="ident" id="2649009"><a href="/net/lookup_unix.go.html#2648909">err</a></span>&nbsp;<span class="op" id="2649013">=</span>&nbsp;<span class="ident" id="2649015"><a href="/net/dnsclient.go.html#2527522">reverseaddr</a></span><span class="op" id="2649026">(</span><span class="ident" id="2649027"><a href="/net/lookup_unix.go.html#2648880">addr</a></span><span class="op" id="2649031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649034">if</span>&nbsp;<span class="ident" id="2649037"><a href="/net/lookup_unix.go.html#2648909">err</a></span>&nbsp;<span class="op" id="2649041">!=</span>&nbsp;<span class="ident" id="2649044">nil</span>&nbsp;<span class="op" id="2649048">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649052">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649063">var</span>&nbsp;<span class="ident" id="2649067">records</span>&nbsp;<span class="op" id="2649075">[</span><span class="op" id="2649076">]</span><span class="ident" id="2649077"><a href="/net/dnsmsg.go.html#2549843">dnsRR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649084">_</span><span class="op" id="2649085">,</span>&nbsp;<span class="ident" id="2649087"><a href="/net/lookup_unix.go.html#2649067">records</a></span><span class="op" id="2649094">,</span>&nbsp;<span class="ident" id="2649096"><a href="/net/lookup_unix.go.html#2648909">err</a></span>&nbsp;<span class="op" id="2649100">=</span>&nbsp;<span class="ident" id="2649102"><a href="/net/dnsclient_unix.go.html#2539266">lookup</a></span><span class="op" id="2649108">(</span><span class="ident" id="2649109"><a href="/net/lookup_unix.go.html#2648990">arpa</a></span><span class="op" id="2649113">,</span>&nbsp;<span class="ident" id="2649115"><a href="/net/dnsmsg.go.html#2547045">dnsTypePTR</a></span><span class="op" id="2649125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649128">if</span>&nbsp;<span class="ident" id="2649131"><a href="/net/lookup_unix.go.html#2648909">err</a></span>&nbsp;<span class="op" id="2649135">!=</span>&nbsp;<span class="ident" id="2649138">nil</span>&nbsp;<span class="op" id="2649142">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649146">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649157"><a href="/net/lookup_unix.go.html#2648894">name</a></span>&nbsp;<span class="op" id="2649162">=</span>&nbsp;<span class="builtinfunc" id="2649164">make</span><span class="op" id="2649168">(</span><span class="op" id="2649169">[</span><span class="op" id="2649170">]</span><span class="builtintype" id="2649171">string</span><span class="op" id="2649177">,</span>&nbsp;<span class="builtinfunc" id="2649179">len</span><span class="op" id="2649182">(</span><span class="ident" id="2649183"><a href="/net/lookup_unix.go.html#2649067">records</a></span><span class="op" id="2649190">)</span><span class="op" id="2649191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649194">for</span>&nbsp;<span class="ident" id="2649198">i</span>&nbsp;<span class="op" id="2649200">:=</span>&nbsp;<span class="keyword" id="2649203">range</span>&nbsp;<span class="ident" id="2649209"><a href="/net/lookup_unix.go.html#2649067">records</a></span>&nbsp;<span class="op" id="2649217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649221">r</span>&nbsp;<span class="op" id="2649223">:=</span>&nbsp;<span class="ident" id="2649226"><a href="/net/lookup_unix.go.html#2649067">records</a></span><span class="op" id="2649233">[</span><span class="ident" id="2649234"><a href="/net/lookup_unix.go.html#2649198">i</a></span><span class="op" id="2649235">]</span><span class="op" id="2649236">.</span><span class="op" id="2649237">(</span><span class="op" id="2649238">*</span><span class="ident" id="2649239"><a href="/net/dnsmsg.go.html#2552306">dnsRR_PTR</a></span><span class="op" id="2649248">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649252"><a href="/net/lookup_unix.go.html#2648894">name</a></span><span class="op" id="2649256">[</span><span class="ident" id="2649257"><a href="/net/lookup_unix.go.html#2649198">i</a></span><span class="op" id="2649258">]</span>&nbsp;<span class="op" id="2649260">=</span>&nbsp;<span class="ident" id="2649262"><a href="/net/lookup_unix.go.html#2649221">r</a></span><span class="op" id="2649263">.</span><span class="ident" id="2649264">Ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649272">return</span><br>
<span class="lineno"></span><span class="op" id="2649279">}</span>
</div>
</body>
</html>
