<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8654960">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8655015">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8655069">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8655120">package</span>&nbsp;<span class="ident" id="8655128">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8655138">import</span>&nbsp;<span class="op" id="8655145">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655148">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655157">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655165">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8655176">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8655186">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8655189">func</span>&nbsp;<span class="ident" id="8655194">TestNextJsCtx</span><span class="op" id="8655207">(</span><span class="ident" id="8655208">t</span>&nbsp;<span class="op" id="8655210">*</span><span class="ident" id="8655211"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8655218">.</span><span class="ident" id="8655219">T</span><span class="op" id="8655220">)</span>&nbsp;<span class="op" id="8655222">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8655225">tests</span>&nbsp;<span class="op" id="8655231">:=</span>&nbsp;<span class="op" id="8655234">[</span><span class="op" id="8655235">]</span><span class="keyword" id="8655236">struct</span>&nbsp;<span class="op" id="8655243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8655247">jsCtx</span>&nbsp;<span class="ident" id="8655253"><a href="/html/template/context.go.html#3264693">jsCtx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8655261">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8655267">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655275">}</span><span class="op" id="8655276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655280">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655324">{</span><span class="ident" id="8655325"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8655336">,</span>&nbsp;<span class="string" id="8655338">&#34;;&#34;</span><span class="op" id="8655341">}</span><span class="op" id="8655342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655346">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655373">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655426">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655489">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655552">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655575">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655625">{</span><span class="ident" id="8655626"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8655637">,</span>&nbsp;<span class="string" id="8655639">&#34;}&#34;</span><span class="op" id="8655642">}</span><span class="op" id="8655643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655647">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655713">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655735">{</span><span class="ident" id="8655736"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8655746">,</span>&nbsp;<span class="string" id="8655748">&#34;)&#34;</span><span class="op" id="8655751">}</span><span class="op" id="8655752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655756">{</span><span class="ident" id="8655757"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8655767">,</span>&nbsp;<span class="string" id="8655769">&#34;]&#34;</span><span class="op" id="8655772">}</span><span class="op" id="8655773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655777">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655841">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655874">{</span><span class="ident" id="8655875"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8655886">,</span>&nbsp;<span class="string" id="8655888">&#34;(&#34;</span><span class="op" id="8655891">}</span><span class="op" id="8655892">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655896">{</span><span class="ident" id="8655897"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8655908">,</span>&nbsp;<span class="string" id="8655910">&#34;[&#34;</span><span class="op" id="8655913">}</span><span class="op" id="8655914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8655918">{</span><span class="ident" id="8655919"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8655930">,</span>&nbsp;<span class="string" id="8655932">&#34;{&#34;</span><span class="op" id="8655935">}</span><span class="op" id="8655936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8655940">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656004">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656038">{</span><span class="ident" id="8656039"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656050">,</span>&nbsp;<span class="string" id="8656052">&#34;=&#34;</span><span class="op" id="8656055">}</span><span class="op" id="8656056">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656060">{</span><span class="ident" id="8656061"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656072">,</span>&nbsp;<span class="string" id="8656074">&#34;+=&#34;</span><span class="op" id="8656078">}</span><span class="op" id="8656079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656083">{</span><span class="ident" id="8656084"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656095">,</span>&nbsp;<span class="string" id="8656097">&#34;*=&#34;</span><span class="op" id="8656101">}</span><span class="op" id="8656102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656106">{</span><span class="ident" id="8656107"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656118">,</span>&nbsp;<span class="string" id="8656120">&#34;*&#34;</span><span class="op" id="8656123">}</span><span class="op" id="8656124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656128">{</span><span class="ident" id="8656129"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656140">,</span>&nbsp;<span class="string" id="8656142">&#34;!&#34;</span><span class="op" id="8656145">}</span><span class="op" id="8656146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656150">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656214">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656227">{</span><span class="ident" id="8656228"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656239">,</span>&nbsp;<span class="string" id="8656241">&#34;+&#34;</span><span class="op" id="8656244">}</span><span class="op" id="8656245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656249">{</span><span class="ident" id="8656250"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656261">,</span>&nbsp;<span class="string" id="8656263">&#34;-&#34;</span><span class="op" id="8656266">}</span><span class="op" id="8656267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656271">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656317">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656379">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656443">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656492">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656556">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656569">{</span><span class="ident" id="8656570"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8656580">,</span>&nbsp;<span class="string" id="8656582">&#34;--&#34;</span><span class="op" id="8656586">}</span><span class="op" id="8656587">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656591">{</span><span class="ident" id="8656592"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8656602">,</span>&nbsp;<span class="string" id="8656604">&#34;++&#34;</span><span class="op" id="8656608">}</span><span class="op" id="8656609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656613">{</span><span class="ident" id="8656614"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8656624">,</span>&nbsp;<span class="string" id="8656626">&#34;x--&#34;</span><span class="op" id="8656631">}</span><span class="op" id="8656632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656636">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656699">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656719">{</span><span class="ident" id="8656720"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656731">,</span>&nbsp;<span class="string" id="8656733">&#34;x---&#34;</span><span class="op" id="8656739">}</span><span class="op" id="8656740">,</span>&nbsp;<span class="comment" id="8656742">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656770">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656836">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8656903">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656922">{</span><span class="ident" id="8656923"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656934">,</span>&nbsp;<span class="string" id="8656936">&#34;return&#34;</span><span class="op" id="8656944">}</span><span class="op" id="8656945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656949">{</span><span class="ident" id="8656950"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656961">,</span>&nbsp;<span class="string" id="8656963">&#34;return&nbsp;&#34;</span><span class="op" id="8656972">}</span><span class="op" id="8656973">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8656977">{</span><span class="ident" id="8656978"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8656989">,</span>&nbsp;<span class="string" id="8656991">&#34;return\t&#34;</span><span class="op" id="8657001">}</span><span class="op" id="8657002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657006">{</span><span class="ident" id="8657007"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8657018">,</span>&nbsp;<span class="string" id="8657020">&#34;return\n&#34;</span><span class="op" id="8657030">}</span><span class="op" id="8657031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657035">{</span><span class="ident" id="8657036"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8657047">,</span>&nbsp;<span class="string" id="8657049">&#34;return\u2028&#34;</span><span class="op" id="8657063">}</span><span class="op" id="8657064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657068">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657134">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657196">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657262">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657327">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657393">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657404">{</span><span class="ident" id="8657405"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657415">,</span>&nbsp;<span class="string" id="8657417">&#34;x&#34;</span><span class="op" id="8657420">}</span><span class="op" id="8657421">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657425">{</span><span class="ident" id="8657426"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657436">,</span>&nbsp;<span class="string" id="8657438">&#34;x&nbsp;&#34;</span><span class="op" id="8657442">}</span><span class="op" id="8657443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657447">{</span><span class="ident" id="8657448"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657458">,</span>&nbsp;<span class="string" id="8657460">&#34;x\t&#34;</span><span class="op" id="8657465">}</span><span class="op" id="8657466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657470">{</span><span class="ident" id="8657471"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657481">,</span>&nbsp;<span class="string" id="8657483">&#34;x\n&#34;</span><span class="op" id="8657488">}</span><span class="op" id="8657489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657493">{</span><span class="ident" id="8657494"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657504">,</span>&nbsp;<span class="string" id="8657506">&#34;x\u2028&#34;</span><span class="op" id="8657515">}</span><span class="op" id="8657516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657520">{</span><span class="ident" id="8657521"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657531">,</span>&nbsp;<span class="string" id="8657533">&#34;preturn&#34;</span><span class="op" id="8657542">}</span><span class="op" id="8657543">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657547">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657577">{</span><span class="ident" id="8657578"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657588">,</span>&nbsp;<span class="string" id="8657590">&#34;0&#34;</span><span class="op" id="8657593">}</span><span class="op" id="8657594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8657598">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657653">{</span><span class="ident" id="8657654"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657664">,</span>&nbsp;<span class="string" id="8657666">&#34;0.&#34;</span><span class="op" id="8657670">}</span><span class="op" id="8657671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657674">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657678">for</span>&nbsp;<span class="ident" id="8657682">_</span><span class="op" id="8657683">,</span>&nbsp;<span class="ident" id="8657685">test</span>&nbsp;<span class="op" id="8657690">:=</span>&nbsp;<span class="keyword" id="8657693">range</span>&nbsp;<span class="ident" id="8657699"><a href="/html/template/js_test.go.html#8655225">tests</a></span>&nbsp;<span class="op" id="8657705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657709">if</span>&nbsp;<span class="ident" id="8657712"><a href="/html/template/js.go.html#3321301">nextJSCtx</a></span><span class="op" id="8657721">(</span><span class="op" id="8657722">[</span><span class="op" id="8657723">]</span><span class="builtintype" id="8657724">byte</span><span class="op" id="8657728">(</span><span class="ident" id="8657729"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657733">.</span><span class="ident" id="8657734">s</span><span class="op" id="8657735">)</span><span class="op" id="8657736">,</span>&nbsp;<span class="ident" id="8657738"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8657749">)</span>&nbsp;<span class="op" id="8657751">!=</span>&nbsp;<span class="ident" id="8657754"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657758">.</span><span class="ident" id="8657759">jsCtx</span>&nbsp;<span class="op" id="8657765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657770"><a href="/html/template/js_test.go.html#8655208">t</a></span><span class="op" id="8657771">.</span><span class="ident" id="8657772">Errorf</span><span class="op" id="8657778">(</span><span class="string" id="8657779">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8657795">,</span>&nbsp;<span class="ident" id="8657797"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657801">.</span><span class="ident" id="8657802">jsCtx</span><span class="op" id="8657807">,</span>&nbsp;<span class="ident" id="8657809"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657813">.</span><span class="ident" id="8657814">s</span><span class="op" id="8657815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657819">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657823">if</span>&nbsp;<span class="ident" id="8657826"><a href="/html/template/js.go.html#3321301">nextJSCtx</a></span><span class="op" id="8657835">(</span><span class="op" id="8657836">[</span><span class="op" id="8657837">]</span><span class="builtintype" id="8657838">byte</span><span class="op" id="8657842">(</span><span class="ident" id="8657843"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657847">.</span><span class="ident" id="8657848">s</span><span class="op" id="8657849">)</span><span class="op" id="8657850">,</span>&nbsp;<span class="ident" id="8657852"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8657862">)</span>&nbsp;<span class="op" id="8657864">!=</span>&nbsp;<span class="ident" id="8657867"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657871">.</span><span class="ident" id="8657872">jsCtx</span>&nbsp;<span class="op" id="8657878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657883"><a href="/html/template/js_test.go.html#8655208">t</a></span><span class="op" id="8657884">.</span><span class="ident" id="8657885">Errorf</span><span class="op" id="8657891">(</span><span class="string" id="8657892">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8657908">,</span>&nbsp;<span class="ident" id="8657910"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657914">.</span><span class="ident" id="8657915">jsCtx</span><span class="op" id="8657920">,</span>&nbsp;<span class="ident" id="8657922"><a href="/html/template/js_test.go.html#8657685">test</a></span><span class="op" id="8657926">.</span><span class="ident" id="8657927">s</span><span class="op" id="8657928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8657935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8657939">if</span>&nbsp;<span class="ident" id="8657942"><a href="/html/template/js.go.html#3321301">nextJSCtx</a></span><span class="op" id="8657951">(</span><span class="op" id="8657952">[</span><span class="op" id="8657953">]</span><span class="builtintype" id="8657954">byte</span><span class="op" id="8657958">(</span><span class="string" id="8657959">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8657964">)</span><span class="op" id="8657965">,</span>&nbsp;<span class="ident" id="8657967"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="8657978">)</span>&nbsp;<span class="op" id="8657980">!=</span>&nbsp;<span class="ident" id="8657983"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span>&nbsp;<span class="op" id="8657995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8657999"><a href="/html/template/js_test.go.html#8655208">t</a></span><span class="op" id="8658000">.</span><span class="ident" id="8658001">Error</span><span class="op" id="8658006">(</span><span class="string" id="8658007">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8658021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8658028">if</span>&nbsp;<span class="ident" id="8658031"><a href="/html/template/js.go.html#3321301">nextJSCtx</a></span><span class="op" id="8658040">(</span><span class="op" id="8658041">[</span><span class="op" id="8658042">]</span><span class="builtintype" id="8658043">byte</span><span class="op" id="8658047">(</span><span class="string" id="8658048">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8658053">)</span><span class="op" id="8658054">,</span>&nbsp;<span class="ident" id="8658056"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="8658066">)</span>&nbsp;<span class="op" id="8658068">!=</span>&nbsp;<span class="ident" id="8658071"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span>&nbsp;<span class="op" id="8658082">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8658086"><a href="/html/template/js_test.go.html#8655208">t</a></span><span class="op" id="8658087">.</span><span class="ident" id="8658088">Error</span><span class="op" id="8658093">(</span><span class="string" id="8658094">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8658108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658111">}</span><br>
<span class="lineno"></span><span class="op" id="8658113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8658116">func</span>&nbsp;<span class="ident" id="8658121">TestJSValEscaper</span><span class="op" id="8658137">(</span><span class="ident" id="8658138">t</span>&nbsp;<span class="op" id="8658140">*</span><span class="ident" id="8658141"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8658148">.</span><span class="ident" id="8658149">T</span><span class="op" id="8658150">)</span>&nbsp;<span class="op" id="8658152">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8658155">tests</span>&nbsp;<span class="op" id="8658161">:=</span>&nbsp;<span class="op" id="8658164">[</span><span class="op" id="8658165">]</span><span class="keyword" id="8658166">struct</span>&nbsp;<span class="op" id="8658173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8658177">x</span>&nbsp;&nbsp;<span class="keyword" id="8658180">interface</span><span class="op" id="8658189">{</span><span class="op" id="8658190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8658194">js</span>&nbsp;<span class="builtintype" id="8658197">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658205">}</span><span class="op" id="8658206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658210">{</span><span class="builtintype" id="8658211">int</span><span class="op" id="8658214">(</span><span class="num" id="8658215">42</span><span class="op" id="8658217">)</span><span class="op" id="8658218">,</span>&nbsp;<span class="string" id="8658220">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658226">}</span><span class="op" id="8658227">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658231">{</span><span class="builtintype" id="8658232">uint</span><span class="op" id="8658236">(</span><span class="num" id="8658237">42</span><span class="op" id="8658239">)</span><span class="op" id="8658240">,</span>&nbsp;<span class="string" id="8658242">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658248">}</span><span class="op" id="8658249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658253">{</span><span class="builtintype" id="8658254">int16</span><span class="op" id="8658259">(</span><span class="num" id="8658260">42</span><span class="op" id="8658262">)</span><span class="op" id="8658263">,</span>&nbsp;<span class="string" id="8658265">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658271">}</span><span class="op" id="8658272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658276">{</span><span class="builtintype" id="8658277">uint16</span><span class="op" id="8658283">(</span><span class="num" id="8658284">42</span><span class="op" id="8658286">)</span><span class="op" id="8658287">,</span>&nbsp;<span class="string" id="8658289">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658295">}</span><span class="op" id="8658296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658300">{</span><span class="builtintype" id="8658301">int32</span><span class="op" id="8658306">(</span><span class="op" id="8658307">-</span><span class="num" id="8658308">42</span><span class="op" id="8658310">)</span><span class="op" id="8658311">,</span>&nbsp;<span class="string" id="8658313">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8658320">}</span><span class="op" id="8658321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658325">{</span><span class="builtintype" id="8658326">uint32</span><span class="op" id="8658332">(</span><span class="num" id="8658333">42</span><span class="op" id="8658335">)</span><span class="op" id="8658336">,</span>&nbsp;<span class="string" id="8658338">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658344">}</span><span class="op" id="8658345">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658349">{</span><span class="builtintype" id="8658350">int16</span><span class="op" id="8658355">(</span><span class="op" id="8658356">-</span><span class="num" id="8658357">42</span><span class="op" id="8658359">)</span><span class="op" id="8658360">,</span>&nbsp;<span class="string" id="8658362">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8658369">}</span><span class="op" id="8658370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658374">{</span><span class="builtintype" id="8658375">uint16</span><span class="op" id="8658381">(</span><span class="num" id="8658382">42</span><span class="op" id="8658384">)</span><span class="op" id="8658385">,</span>&nbsp;<span class="string" id="8658387">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658393">}</span><span class="op" id="8658394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658398">{</span><span class="ident" id="8658399">int64</span><span class="op" id="8658404">(</span><span class="op" id="8658405">-</span><span class="num" id="8658406">42</span><span class="op" id="8658408">)</span><span class="op" id="8658409">,</span>&nbsp;<span class="string" id="8658411">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8658418">}</span><span class="op" id="8658419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658423">{</span><span class="ident" id="8658424">uint64</span><span class="op" id="8658430">(</span><span class="num" id="8658431">42</span><span class="op" id="8658433">)</span><span class="op" id="8658434">,</span>&nbsp;<span class="string" id="8658436">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8658442">}</span><span class="op" id="8658443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658447">{</span><span class="ident" id="8658448">uint64</span><span class="op" id="8658454">(</span><span class="num" id="8658455">1</span><span class="op" id="8658456">)</span>&nbsp;<span class="op" id="8658458">&lt;&lt;</span>&nbsp;<span class="num" id="8658461">53</span><span class="op" id="8658463">,</span>&nbsp;<span class="string" id="8658465">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="8658485">}</span><span class="op" id="8658486">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8658490">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8658542">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658596">{</span><span class="ident" id="8658597">uint64</span><span class="op" id="8658603">(</span><span class="num" id="8658604">1</span><span class="op" id="8658605">)</span><span class="op" id="8658606">&lt;&lt;</span><span class="num" id="8658608">53</span>&nbsp;<span class="op" id="8658611">+</span>&nbsp;<span class="num" id="8658613">1</span><span class="op" id="8658614">,</span>&nbsp;<span class="string" id="8658616">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="8658636">}</span><span class="op" id="8658637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658641">{</span><span class="builtintype" id="8658642">float32</span><span class="op" id="8658649">(</span><span class="num" id="8658650">1.0</span><span class="op" id="8658653">)</span><span class="op" id="8658654">,</span>&nbsp;<span class="string" id="8658656">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8658661">}</span><span class="op" id="8658662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658666">{</span><span class="builtintype" id="8658667">float32</span><span class="op" id="8658674">(</span><span class="op" id="8658675">-</span><span class="num" id="8658676">1.0</span><span class="op" id="8658679">)</span><span class="op" id="8658680">,</span>&nbsp;<span class="string" id="8658682">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8658688">}</span><span class="op" id="8658689">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658693">{</span><span class="builtintype" id="8658694">float32</span><span class="op" id="8658701">(</span><span class="num" id="8658702">0.5</span><span class="op" id="8658705">)</span><span class="op" id="8658706">,</span>&nbsp;<span class="string" id="8658708">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8658715">}</span><span class="op" id="8658716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658720">{</span><span class="builtintype" id="8658721">float32</span><span class="op" id="8658728">(</span><span class="op" id="8658729">-</span><span class="num" id="8658730">0.5</span><span class="op" id="8658733">)</span><span class="op" id="8658734">,</span>&nbsp;<span class="string" id="8658736">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8658744">}</span><span class="op" id="8658745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658749">{</span><span class="builtintype" id="8658750">float32</span><span class="op" id="8658757">(</span><span class="num" id="8658758">1.0</span><span class="op" id="8658761">)</span>&nbsp;<span class="op" id="8658763">/</span>&nbsp;<span class="builtintype" id="8658765">float32</span><span class="op" id="8658772">(</span><span class="num" id="8658773">256</span><span class="op" id="8658776">)</span><span class="op" id="8658777">,</span>&nbsp;<span class="string" id="8658779">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="8658793">}</span><span class="op" id="8658794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658798">{</span><span class="builtintype" id="8658799">float32</span><span class="op" id="8658806">(</span><span class="num" id="8658807">0</span><span class="op" id="8658808">)</span><span class="op" id="8658809">,</span>&nbsp;<span class="string" id="8658811">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8658816">}</span><span class="op" id="8658817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658821">{</span><span class="ident" id="8658822"><a href="/html/template/js_test.go.html#8655157">math</a></span><span class="op" id="8658826">.</span><span class="ident" id="8658827">Copysign</span><span class="op" id="8658835">(</span><span class="num" id="8658836">0</span><span class="op" id="8658837">,</span>&nbsp;<span class="op" id="8658839">-</span><span class="num" id="8658840">1</span><span class="op" id="8658841">)</span><span class="op" id="8658842">,</span>&nbsp;<span class="string" id="8658844">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8658850">}</span><span class="op" id="8658851">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658855">{</span><span class="builtintype" id="8658856">float64</span><span class="op" id="8658863">(</span><span class="num" id="8658864">1.0</span><span class="op" id="8658867">)</span><span class="op" id="8658868">,</span>&nbsp;<span class="string" id="8658870">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8658875">}</span><span class="op" id="8658876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658880">{</span><span class="builtintype" id="8658881">float64</span><span class="op" id="8658888">(</span><span class="op" id="8658889">-</span><span class="num" id="8658890">1.0</span><span class="op" id="8658893">)</span><span class="op" id="8658894">,</span>&nbsp;<span class="string" id="8658896">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8658902">}</span><span class="op" id="8658903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658907">{</span><span class="builtintype" id="8658908">float64</span><span class="op" id="8658915">(</span><span class="num" id="8658916">0.5</span><span class="op" id="8658919">)</span><span class="op" id="8658920">,</span>&nbsp;<span class="string" id="8658922">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8658929">}</span><span class="op" id="8658930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658934">{</span><span class="builtintype" id="8658935">float64</span><span class="op" id="8658942">(</span><span class="op" id="8658943">-</span><span class="num" id="8658944">0.5</span><span class="op" id="8658947">)</span><span class="op" id="8658948">,</span>&nbsp;<span class="string" id="8658950">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8658958">}</span><span class="op" id="8658959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658963">{</span><span class="builtintype" id="8658964">float64</span><span class="op" id="8658971">(</span><span class="num" id="8658972">0</span><span class="op" id="8658973">)</span><span class="op" id="8658974">,</span>&nbsp;<span class="string" id="8658976">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8658981">}</span><span class="op" id="8658982">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8658986">{</span><span class="ident" id="8658987"><a href="/html/template/js_test.go.html#8655157">math</a></span><span class="op" id="8658991">.</span><span class="ident" id="8658992">Copysign</span><span class="op" id="8659000">(</span><span class="num" id="8659001">0</span><span class="op" id="8659002">,</span>&nbsp;<span class="op" id="8659004">-</span><span class="num" id="8659005">1</span><span class="op" id="8659006">)</span><span class="op" id="8659007">,</span>&nbsp;<span class="string" id="8659009">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8659015">}</span><span class="op" id="8659016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659020">{</span><span class="string" id="8659021">&#34;&#34;</span><span class="op" id="8659023">,</span>&nbsp;<span class="string" id="8659025">`&#34;&#34;`</span><span class="op" id="8659029">}</span><span class="op" id="8659030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659034">{</span><span class="string" id="8659035">&#34;foo&#34;</span><span class="op" id="8659040">,</span>&nbsp;<span class="string" id="8659042">`&#34;foo&#34;`</span><span class="op" id="8659049">}</span><span class="op" id="8659050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659054">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659069">{</span><span class="string" id="8659070">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="8659088">,</span>&nbsp;<span class="string" id="8659090">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="8659110">}</span><span class="op" id="8659111">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659115">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659163">{</span><span class="string" id="8659164">&#34;\t\x0b&#34;</span><span class="op" id="8659172">,</span>&nbsp;<span class="string" id="8659174">`&#34;\t\u000b&#34;`</span><span class="op" id="8659186">}</span><span class="op" id="8659187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659191">{</span><span class="keyword" id="8659192">struct</span><span class="op" id="8659198">{</span>&nbsp;<span class="ident" id="8659200">X</span><span class="op" id="8659201">,</span>&nbsp;<span class="ident" id="8659203">Y</span>&nbsp;<span class="builtintype" id="8659205">int</span>&nbsp;<span class="op" id="8659209">}</span><span class="op" id="8659210">{</span><span class="num" id="8659211">1</span><span class="op" id="8659212">,</span>&nbsp;<span class="num" id="8659214">2</span><span class="op" id="8659215">}</span><span class="op" id="8659216">,</span>&nbsp;<span class="string" id="8659218">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="8659233">}</span><span class="op" id="8659234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659238">{</span><span class="op" id="8659239">[</span><span class="op" id="8659240">]</span><span class="keyword" id="8659241">interface</span><span class="op" id="8659250">{</span><span class="op" id="8659251">}</span><span class="op" id="8659252">{</span><span class="op" id="8659253">}</span><span class="op" id="8659254">,</span>&nbsp;<span class="string" id="8659256">&#34;[]&#34;</span><span class="op" id="8659260">}</span><span class="op" id="8659261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659265">{</span><span class="op" id="8659266">[</span><span class="op" id="8659267">]</span><span class="keyword" id="8659268">interface</span><span class="op" id="8659277">{</span><span class="op" id="8659278">}</span><span class="op" id="8659279">{</span><span class="num" id="8659280">42</span><span class="op" id="8659282">,</span>&nbsp;<span class="string" id="8659284">&#34;foo&#34;</span><span class="op" id="8659289">,</span>&nbsp;<span class="ident" id="8659291">nil</span><span class="op" id="8659294">}</span><span class="op" id="8659295">,</span>&nbsp;<span class="string" id="8659297">`[42,&#34;foo&#34;,null]`</span><span class="op" id="8659314">}</span><span class="op" id="8659315">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659319">{</span><span class="op" id="8659320">[</span><span class="op" id="8659321">]</span><span class="builtintype" id="8659322">string</span><span class="op" id="8659328">{</span><span class="string" id="8659329">&#34;&lt;!--&#34;</span><span class="op" id="8659335">,</span>&nbsp;<span class="string" id="8659337">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8659348">,</span>&nbsp;<span class="string" id="8659350">&#34;--&gt;&#34;</span><span class="op" id="8659355">}</span><span class="op" id="8659356">,</span>&nbsp;<span class="string" id="8659358">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="8659406">}</span><span class="op" id="8659407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659411">{</span><span class="string" id="8659412">&#34;&lt;!--&#34;</span><span class="op" id="8659418">,</span>&nbsp;<span class="string" id="8659420">`&#34;\u003c!--&#34;`</span><span class="op" id="8659433">}</span><span class="op" id="8659434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659438">{</span><span class="string" id="8659439">&#34;--&gt;&#34;</span><span class="op" id="8659444">,</span>&nbsp;<span class="string" id="8659446">`&#34;--\u003e&#34;`</span><span class="op" id="8659458">}</span><span class="op" id="8659459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659463">{</span><span class="string" id="8659464">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8659475">,</span>&nbsp;<span class="string" id="8659477">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="8659495">}</span><span class="op" id="8659496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659500">{</span><span class="string" id="8659501">&#34;]]&gt;&#34;</span><span class="op" id="8659506">,</span>&nbsp;<span class="string" id="8659508">`&#34;]]\u003e&#34;`</span><span class="op" id="8659520">}</span><span class="op" id="8659521">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659525">{</span><span class="string" id="8659526">&#34;&lt;/script&#34;</span><span class="op" id="8659536">,</span>&nbsp;<span class="string" id="8659538">`&#34;\u003c/script&#34;`</span><span class="op" id="8659555">}</span><span class="op" id="8659556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659560">{</span><span class="string" id="8659561">&#34;\U0001D11E&#34;</span><span class="op" id="8659573">,</span>&nbsp;<span class="string" id="8659575">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="8659591">}</span><span class="op" id="8659592">,</span>&nbsp;<span class="comment" id="8659594">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8659620">for</span>&nbsp;<span class="ident" id="8659624">_</span><span class="op" id="8659625">,</span>&nbsp;<span class="ident" id="8659627">test</span>&nbsp;<span class="op" id="8659632">:=</span>&nbsp;<span class="keyword" id="8659635">range</span>&nbsp;<span class="ident" id="8659641"><a href="/html/template/js_test.go.html#8658155">tests</a></span>&nbsp;<span class="op" id="8659647">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8659651">if</span>&nbsp;<span class="ident" id="8659654">js</span>&nbsp;<span class="op" id="8659657">:=</span>&nbsp;<span class="ident" id="8659660"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8659672">(</span><span class="ident" id="8659673"><a href="/html/template/js_test.go.html#8659627">test</a></span><span class="op" id="8659677">.</span><span class="ident" id="8659678">x</span><span class="op" id="8659679">)</span><span class="op" id="8659680">;</span>&nbsp;<span class="ident" id="8659682"><a href="/html/template/js_test.go.html#8659654">js</a></span>&nbsp;<span class="op" id="8659685">!=</span>&nbsp;<span class="ident" id="8659688"><a href="/html/template/js_test.go.html#8659627">test</a></span><span class="op" id="8659692">.</span><span class="ident" id="8659693">js</span>&nbsp;<span class="op" id="8659696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8659701"><a href="/html/template/js_test.go.html#8658138">t</a></span><span class="op" id="8659702">.</span><span class="ident" id="8659703">Errorf</span><span class="op" id="8659709">(</span><span class="string" id="8659710">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8659738">,</span>&nbsp;<span class="ident" id="8659740"><a href="/html/template/js_test.go.html#8659627">test</a></span><span class="op" id="8659744">.</span><span class="ident" id="8659745">x</span><span class="op" id="8659746">,</span>&nbsp;<span class="ident" id="8659748"><a href="/html/template/js_test.go.html#8659627">test</a></span><span class="op" id="8659752">.</span><span class="ident" id="8659753">js</span><span class="op" id="8659755">,</span>&nbsp;<span class="ident" id="8659757"><a href="/html/template/js_test.go.html#8659654">js</a></span><span class="op" id="8659759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8659763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659767">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8659824">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8659841">a</span>&nbsp;<span class="op" id="8659843">:=</span>&nbsp;<span class="op" id="8659846">[</span><span class="op" id="8659847">]</span><span class="keyword" id="8659848">interface</span><span class="op" id="8659857">{</span><span class="op" id="8659858">}</span><span class="op" id="8659859">{</span><span class="ident" id="8659860"><a href="/html/template/js_test.go.html#8659627">test</a></span><span class="op" id="8659864">.</span><span class="ident" id="8659865">x</span><span class="op" id="8659866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8659870">want</span>&nbsp;<span class="op" id="8659875">:=</span>&nbsp;<span class="string" id="8659878">&#34;[&#34;</span>&nbsp;<span class="op" id="8659882">+</span>&nbsp;<span class="ident" id="8659884"><a href="/html/template/js_test.go.html#8655165">strings</a></span><span class="op" id="8659891">.</span><span class="ident" id="8659892">TrimSpace</span><span class="op" id="8659901">(</span><span class="ident" id="8659902"><a href="/html/template/js_test.go.html#8659627">test</a></span><span class="op" id="8659906">.</span><span class="ident" id="8659907">js</span><span class="op" id="8659909">)</span>&nbsp;<span class="op" id="8659911">+</span>&nbsp;<span class="string" id="8659913">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8659919">if</span>&nbsp;<span class="ident" id="8659922">js</span>&nbsp;<span class="op" id="8659925">:=</span>&nbsp;<span class="ident" id="8659928"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8659940">(</span><span class="ident" id="8659941"><a href="/html/template/js_test.go.html#8659841">a</a></span><span class="op" id="8659942">)</span><span class="op" id="8659943">;</span>&nbsp;<span class="ident" id="8659945"><a href="/html/template/js_test.go.html#8659922">js</a></span>&nbsp;<span class="op" id="8659948">!=</span>&nbsp;<span class="ident" id="8659951"><a href="/html/template/js_test.go.html#8659870">want</a></span>&nbsp;<span class="op" id="8659956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8659961"><a href="/html/template/js_test.go.html#8658138">t</a></span><span class="op" id="8659962">.</span><span class="ident" id="8659963">Errorf</span><span class="op" id="8659969">(</span><span class="string" id="8659970">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8659998">,</span>&nbsp;<span class="ident" id="8660000"><a href="/html/template/js_test.go.html#8659841">a</a></span><span class="op" id="8660001">,</span>&nbsp;<span class="ident" id="8660003"><a href="/html/template/js_test.go.html#8659870">want</a></span><span class="op" id="8660007">,</span>&nbsp;<span class="ident" id="8660009"><a href="/html/template/js_test.go.html#8659922">js</a></span><span class="op" id="8660011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660015">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660018">}</span><br>
<span class="lineno"></span><span class="op" id="8660020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8660023">func</span>&nbsp;<span class="ident" id="8660028">TestJSStrEscaper</span><span class="op" id="8660044">(</span><span class="ident" id="8660045">t</span>&nbsp;<span class="op" id="8660047">*</span><span class="ident" id="8660048"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8660055">.</span><span class="ident" id="8660056">T</span><span class="op" id="8660057">)</span>&nbsp;<span class="op" id="8660059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8660062">tests</span>&nbsp;<span class="op" id="8660068">:=</span>&nbsp;<span class="op" id="8660071">[</span><span class="op" id="8660072">]</span><span class="keyword" id="8660073">struct</span>&nbsp;<span class="op" id="8660080">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8660084">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8660088">interface</span><span class="op" id="8660097">{</span><span class="op" id="8660098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8660102">esc</span>&nbsp;<span class="builtintype" id="8660106">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660114">}</span><span class="op" id="8660115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660119">{</span><span class="string" id="8660120">&#34;&#34;</span><span class="op" id="8660122">,</span>&nbsp;<span class="string" id="8660124">``</span><span class="op" id="8660126">}</span><span class="op" id="8660127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660131">{</span><span class="string" id="8660132">&#34;foo&#34;</span><span class="op" id="8660137">,</span>&nbsp;<span class="string" id="8660139">`foo`</span><span class="op" id="8660144">}</span><span class="op" id="8660145">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660149">{</span><span class="string" id="8660150">&#34;\u0000&#34;</span><span class="op" id="8660158">,</span>&nbsp;<span class="string" id="8660160">`\0`</span><span class="op" id="8660164">}</span><span class="op" id="8660165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660169">{</span><span class="string" id="8660170">&#34;\t&#34;</span><span class="op" id="8660174">,</span>&nbsp;<span class="string" id="8660176">`\t`</span><span class="op" id="8660180">}</span><span class="op" id="8660181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660185">{</span><span class="string" id="8660186">&#34;\n&#34;</span><span class="op" id="8660190">,</span>&nbsp;<span class="string" id="8660192">`\n`</span><span class="op" id="8660196">}</span><span class="op" id="8660197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660201">{</span><span class="string" id="8660202">&#34;\r&#34;</span><span class="op" id="8660206">,</span>&nbsp;<span class="string" id="8660208">`\r`</span><span class="op" id="8660212">}</span><span class="op" id="8660213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660217">{</span><span class="string" id="8660218">&#34;\u2028&#34;</span><span class="op" id="8660226">,</span>&nbsp;<span class="string" id="8660228">`\u2028`</span><span class="op" id="8660236">}</span><span class="op" id="8660237">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660241">{</span><span class="string" id="8660242">&#34;\u2029&#34;</span><span class="op" id="8660250">,</span>&nbsp;<span class="string" id="8660252">`\u2029`</span><span class="op" id="8660260">}</span><span class="op" id="8660261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660265">{</span><span class="string" id="8660266">&#34;\\&#34;</span><span class="op" id="8660270">,</span>&nbsp;<span class="string" id="8660272">`\\`</span><span class="op" id="8660276">}</span><span class="op" id="8660277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660281">{</span><span class="string" id="8660282">&#34;\\n&#34;</span><span class="op" id="8660287">,</span>&nbsp;<span class="string" id="8660289">`\\n`</span><span class="op" id="8660294">}</span><span class="op" id="8660295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660299">{</span><span class="string" id="8660300">&#34;foo\r\nbar&#34;</span><span class="op" id="8660312">,</span>&nbsp;<span class="string" id="8660314">`foo\r\nbar`</span><span class="op" id="8660326">}</span><span class="op" id="8660327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660331">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660367">{</span><span class="string" id="8660368">`&#34;`</span><span class="op" id="8660371">,</span>&nbsp;<span class="string" id="8660373">`\x22`</span><span class="op" id="8660379">}</span><span class="op" id="8660380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660384">{</span><span class="string" id="8660385">`&#39;`</span><span class="op" id="8660388">,</span>&nbsp;<span class="string" id="8660390">`\x27`</span><span class="op" id="8660396">}</span><span class="op" id="8660397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660401">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660456">{</span><span class="string" id="8660457">`&amp;amp;`</span><span class="op" id="8660464">,</span>&nbsp;<span class="string" id="8660466">`\x26amp;`</span><span class="op" id="8660476">}</span><span class="op" id="8660477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660481">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660544">{</span><span class="string" id="8660545">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8660556">,</span>&nbsp;<span class="string" id="8660558">`\x3c\/script\x3e`</span><span class="op" id="8660576">}</span><span class="op" id="8660577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660581">{</span><span class="string" id="8660582">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8660593">,</span>&nbsp;<span class="string" id="8660595">`\x3c![CDATA[`</span><span class="op" id="8660609">}</span><span class="op" id="8660610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8660614">{</span><span class="string" id="8660615">&#34;]]&gt;&#34;</span><span class="op" id="8660620">,</span>&nbsp;<span class="string" id="8660622">`]]\x3e`</span><span class="op" id="8660630">}</span><span class="op" id="8660631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660635">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660707">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660771">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660832">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660879">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8660943">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661010">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661076">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661136">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661200">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661251">{</span><span class="string" id="8661252">&#34;&lt;!--&#34;</span><span class="op" id="8661258">,</span>&nbsp;<span class="string" id="8661260">`\x3c!--`</span><span class="op" id="8661269">}</span><span class="op" id="8661270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661274">{</span><span class="string" id="8661275">&#34;--&gt;&#34;</span><span class="op" id="8661280">,</span>&nbsp;<span class="string" id="8661282">`--\x3e`</span><span class="op" id="8661290">}</span><span class="op" id="8661291">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661295">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661355">{</span><span class="string" id="8661356">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="8661399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8661404">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="8661460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661464">}</span><span class="op" id="8661465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661469">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661497">{</span><span class="string" id="8661498">&#34;foo\xA0bar&#34;</span><span class="op" id="8661510">,</span>&nbsp;<span class="string" id="8661512">&#34;foo\xA0bar&#34;</span><span class="op" id="8661524">}</span><span class="op" id="8661525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8661529">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661564">{</span><span class="string" id="8661565">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8661585">,</span>&nbsp;<span class="string" id="8661587">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8661607">}</span><span class="op" id="8661608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661615">for</span>&nbsp;<span class="ident" id="8661619">_</span><span class="op" id="8661620">,</span>&nbsp;<span class="ident" id="8661622">test</span>&nbsp;<span class="op" id="8661627">:=</span>&nbsp;<span class="keyword" id="8661630">range</span>&nbsp;<span class="ident" id="8661636"><a href="/html/template/js_test.go.html#8660062">tests</a></span>&nbsp;<span class="op" id="8661642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661646">esc</span>&nbsp;<span class="op" id="8661650">:=</span>&nbsp;<span class="ident" id="8661653"><a href="/html/template/js.go.html#3327174">jsStrEscaper</a></span><span class="op" id="8661665">(</span><span class="ident" id="8661666"><a href="/html/template/js_test.go.html#8661622">test</a></span><span class="op" id="8661670">.</span><span class="ident" id="8661671">x</span><span class="op" id="8661672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8661676">if</span>&nbsp;<span class="ident" id="8661679"><a href="/html/template/js_test.go.html#8661646">esc</a></span>&nbsp;<span class="op" id="8661683">!=</span>&nbsp;<span class="ident" id="8661686"><a href="/html/template/js_test.go.html#8661622">test</a></span><span class="op" id="8661690">.</span><span class="ident" id="8661691">esc</span>&nbsp;<span class="op" id="8661695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661700"><a href="/html/template/js_test.go.html#8660045">t</a></span><span class="op" id="8661701">.</span><span class="ident" id="8661702">Errorf</span><span class="op" id="8661708">(</span><span class="string" id="8661709">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8661729">,</span>&nbsp;<span class="ident" id="8661731"><a href="/html/template/js_test.go.html#8661622">test</a></span><span class="op" id="8661735">.</span><span class="ident" id="8661736">x</span><span class="op" id="8661737">,</span>&nbsp;<span class="ident" id="8661739"><a href="/html/template/js_test.go.html#8661622">test</a></span><span class="op" id="8661743">.</span><span class="ident" id="8661744">esc</span><span class="op" id="8661747">,</span>&nbsp;<span class="ident" id="8661749"><a href="/html/template/js_test.go.html#8661646">esc</a></span><span class="op" id="8661752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661756">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661759">}</span><br>
<span class="lineno"></span><span class="op" id="8661761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8661764">func</span>&nbsp;<span class="ident" id="8661769">TestJSRegexpEscaper</span><span class="op" id="8661788">(</span><span class="ident" id="8661789">t</span>&nbsp;<span class="op" id="8661791">*</span><span class="ident" id="8661792"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8661799">.</span><span class="ident" id="8661800">T</span><span class="op" id="8661801">)</span>&nbsp;<span class="op" id="8661803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661806">tests</span>&nbsp;<span class="op" id="8661812">:=</span>&nbsp;<span class="op" id="8661815">[</span><span class="op" id="8661816">]</span><span class="keyword" id="8661817">struct</span>&nbsp;<span class="op" id="8661824">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661828">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8661832">interface</span><span class="op" id="8661841">{</span><span class="op" id="8661842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8661846">esc</span>&nbsp;<span class="builtintype" id="8661850">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661858">}</span><span class="op" id="8661859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661863">{</span><span class="string" id="8661864">&#34;&#34;</span><span class="op" id="8661866">,</span>&nbsp;<span class="string" id="8661868">`(?:)`</span><span class="op" id="8661874">}</span><span class="op" id="8661875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661879">{</span><span class="string" id="8661880">&#34;foo&#34;</span><span class="op" id="8661885">,</span>&nbsp;<span class="string" id="8661887">`foo`</span><span class="op" id="8661892">}</span><span class="op" id="8661893">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661897">{</span><span class="string" id="8661898">&#34;\u0000&#34;</span><span class="op" id="8661906">,</span>&nbsp;<span class="string" id="8661908">`\0`</span><span class="op" id="8661912">}</span><span class="op" id="8661913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661917">{</span><span class="string" id="8661918">&#34;\t&#34;</span><span class="op" id="8661922">,</span>&nbsp;<span class="string" id="8661924">`\t`</span><span class="op" id="8661928">}</span><span class="op" id="8661929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661933">{</span><span class="string" id="8661934">&#34;\n&#34;</span><span class="op" id="8661938">,</span>&nbsp;<span class="string" id="8661940">`\n`</span><span class="op" id="8661944">}</span><span class="op" id="8661945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661949">{</span><span class="string" id="8661950">&#34;\r&#34;</span><span class="op" id="8661954">,</span>&nbsp;<span class="string" id="8661956">`\r`</span><span class="op" id="8661960">}</span><span class="op" id="8661961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661965">{</span><span class="string" id="8661966">&#34;\u2028&#34;</span><span class="op" id="8661974">,</span>&nbsp;<span class="string" id="8661976">`\u2028`</span><span class="op" id="8661984">}</span><span class="op" id="8661985">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8661989">{</span><span class="string" id="8661990">&#34;\u2029&#34;</span><span class="op" id="8661998">,</span>&nbsp;<span class="string" id="8662000">`\u2029`</span><span class="op" id="8662008">}</span><span class="op" id="8662009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662013">{</span><span class="string" id="8662014">&#34;\\&#34;</span><span class="op" id="8662018">,</span>&nbsp;<span class="string" id="8662020">`\\`</span><span class="op" id="8662024">}</span><span class="op" id="8662025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662029">{</span><span class="string" id="8662030">&#34;\\n&#34;</span><span class="op" id="8662035">,</span>&nbsp;<span class="string" id="8662037">`\\n`</span><span class="op" id="8662042">}</span><span class="op" id="8662043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662047">{</span><span class="string" id="8662048">&#34;foo\r\nbar&#34;</span><span class="op" id="8662060">,</span>&nbsp;<span class="string" id="8662062">`foo\r\nbar`</span><span class="op" id="8662074">}</span><span class="op" id="8662075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8662079">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662115">{</span><span class="string" id="8662116">`&#34;`</span><span class="op" id="8662119">,</span>&nbsp;<span class="string" id="8662121">`\x22`</span><span class="op" id="8662127">}</span><span class="op" id="8662128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662132">{</span><span class="string" id="8662133">`&#39;`</span><span class="op" id="8662136">,</span>&nbsp;<span class="string" id="8662138">`\x27`</span><span class="op" id="8662144">}</span><span class="op" id="8662145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8662149">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662204">{</span><span class="string" id="8662205">`&amp;amp;`</span><span class="op" id="8662212">,</span>&nbsp;<span class="string" id="8662214">`\x26amp;`</span><span class="op" id="8662224">}</span><span class="op" id="8662225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8662229">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662292">{</span><span class="string" id="8662293">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8662304">,</span>&nbsp;<span class="string" id="8662306">`\x3c\/script\x3e`</span><span class="op" id="8662324">}</span><span class="op" id="8662325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662329">{</span><span class="string" id="8662330">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8662341">,</span>&nbsp;<span class="string" id="8662343">`\x3c!\[CDATA\[`</span><span class="op" id="8662359">}</span><span class="op" id="8662360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662364">{</span><span class="string" id="8662365">&#34;]]&gt;&#34;</span><span class="op" id="8662370">,</span>&nbsp;<span class="string" id="8662372">`\]\]\x3e`</span><span class="op" id="8662382">}</span><span class="op" id="8662383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8662387">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662413">{</span><span class="string" id="8662414">&#34;&lt;!--&#34;</span><span class="op" id="8662420">,</span>&nbsp;<span class="string" id="8662422">`\x3c!\-\-`</span><span class="op" id="8662433">}</span><span class="op" id="8662434">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662438">{</span><span class="string" id="8662439">&#34;--&gt;&#34;</span><span class="op" id="8662444">,</span>&nbsp;<span class="string" id="8662446">`\-\-\x3e`</span><span class="op" id="8662456">}</span><span class="op" id="8662457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662461">{</span><span class="string" id="8662462">&#34;*&#34;</span><span class="op" id="8662465">,</span>&nbsp;<span class="string" id="8662467">`\*`</span><span class="op" id="8662471">}</span><span class="op" id="8662472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662476">{</span><span class="string" id="8662477">&#34;+&#34;</span><span class="op" id="8662480">,</span>&nbsp;<span class="string" id="8662482">`\x2b`</span><span class="op" id="8662488">}</span><span class="op" id="8662489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662493">{</span><span class="string" id="8662494">&#34;?&#34;</span><span class="op" id="8662497">,</span>&nbsp;<span class="string" id="8662499">`\?`</span><span class="op" id="8662503">}</span><span class="op" id="8662504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662508">{</span><span class="string" id="8662509">&#34;[](){}&#34;</span><span class="op" id="8662517">,</span>&nbsp;<span class="string" id="8662519">`\[\]\(\)\{\}`</span><span class="op" id="8662533">}</span><span class="op" id="8662534">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662538">{</span><span class="string" id="8662539">&#34;$foo|x.y&#34;</span><span class="op" id="8662549">,</span>&nbsp;<span class="string" id="8662551">`\$foo\|x\.y`</span><span class="op" id="8662564">}</span><span class="op" id="8662565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662569">{</span><span class="string" id="8662570">&#34;x^y&#34;</span><span class="op" id="8662575">,</span>&nbsp;<span class="string" id="8662577">`x\^y`</span><span class="op" id="8662583">}</span><span class="op" id="8662584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662591">for</span>&nbsp;<span class="ident" id="8662595">_</span><span class="op" id="8662596">,</span>&nbsp;<span class="ident" id="8662598">test</span>&nbsp;<span class="op" id="8662603">:=</span>&nbsp;<span class="keyword" id="8662606">range</span>&nbsp;<span class="ident" id="8662612"><a href="/html/template/js_test.go.html#8661806">tests</a></span>&nbsp;<span class="op" id="8662618">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662622">esc</span>&nbsp;<span class="op" id="8662626">:=</span>&nbsp;<span class="ident" id="8662629"><a href="/html/template/js.go.html#3327658">jsRegexpEscaper</a></span><span class="op" id="8662644">(</span><span class="ident" id="8662645"><a href="/html/template/js_test.go.html#8662598">test</a></span><span class="op" id="8662649">.</span><span class="ident" id="8662650">x</span><span class="op" id="8662651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8662655">if</span>&nbsp;<span class="ident" id="8662658"><a href="/html/template/js_test.go.html#8662622">esc</a></span>&nbsp;<span class="op" id="8662662">!=</span>&nbsp;<span class="ident" id="8662665"><a href="/html/template/js_test.go.html#8662598">test</a></span><span class="op" id="8662669">.</span><span class="ident" id="8662670">esc</span>&nbsp;<span class="op" id="8662674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662679"><a href="/html/template/js_test.go.html#8661789">t</a></span><span class="op" id="8662680">.</span><span class="ident" id="8662681">Errorf</span><span class="op" id="8662687">(</span><span class="string" id="8662688">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8662708">,</span>&nbsp;<span class="ident" id="8662710"><a href="/html/template/js_test.go.html#8662598">test</a></span><span class="op" id="8662714">.</span><span class="ident" id="8662715">x</span><span class="op" id="8662716">,</span>&nbsp;<span class="ident" id="8662718"><a href="/html/template/js_test.go.html#8662598">test</a></span><span class="op" id="8662722">.</span><span class="ident" id="8662723">esc</span><span class="op" id="8662726">,</span>&nbsp;<span class="ident" id="8662728"><a href="/html/template/js_test.go.html#8662622">esc</a></span><span class="op" id="8662731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8662738">}</span><br>
<span class="lineno">265</span><span class="op" id="8662740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8662743">func</span>&nbsp;<span class="ident" id="8662748">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="8662791">(</span><span class="ident" id="8662792">t</span>&nbsp;<span class="op" id="8662794">*</span><span class="ident" id="8662795"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8662802">.</span><span class="ident" id="8662803">T</span><span class="op" id="8662804">)</span>&nbsp;<span class="op" id="8662806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8662809">input</span>&nbsp;<span class="op" id="8662815">:=</span>&nbsp;<span class="op" id="8662818">(</span><span class="string" id="8662819">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8662880">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8662884">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8662951">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8662955">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8662974">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8662978">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8662997">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663001">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8663020">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663024">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8663043">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663047">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8663066">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663070">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8663092">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663096">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8663138">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663142">tests</span>&nbsp;<span class="op" id="8663148">:=</span>&nbsp;<span class="op" id="8663151">[</span><span class="op" id="8663152">]</span><span class="keyword" id="8663153">struct</span>&nbsp;<span class="op" id="8663160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663164">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8663172">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663181">escaper</span>&nbsp;<span class="keyword" id="8663189">func</span><span class="op" id="8663193">(</span><span class="op" id="8663194">...</span><span class="keyword" id="8663197">interface</span><span class="op" id="8663206">{</span><span class="op" id="8663207">}</span><span class="op" id="8663208">)</span>&nbsp;<span class="builtintype" id="8663210">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663219">escaped</span>&nbsp;<span class="builtintype" id="8663227">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663235">}</span><span class="op" id="8663236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663245">&#34;jsStrEscaper&#34;</span><span class="op" id="8663259">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663264"><a href="/html/template/js.go.html#3327174">jsStrEscaper</a></span><span class="op" id="8663276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663281">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8663315">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663321">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8663353">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663359">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8663394">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663400">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8663435">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663441">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="8663473">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663479">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="8663504">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663510">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8663529">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663535">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="8663555">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663561">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8663580">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663586">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8663608">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663614">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8663658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663662">}</span><span class="op" id="8663663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8663667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663672">&#34;jsRegexpEscaper&#34;</span><span class="op" id="8663689">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663694"><a href="/html/template/js.go.html#3327658">jsRegexpEscaper</a></span><span class="op" id="8663709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663714">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8663748">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663754">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8663786">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663792">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8663827">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663833">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8663868">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663874">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="8663912">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663918">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="8663944">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663950">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8663969">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8663975">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="8663998">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8664004">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8664023">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8664029">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="8664050">+</span>&nbsp;<span class="string" id="8664052">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="8664061">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8664067">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8664111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664115">}</span><span class="op" id="8664116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664123">for</span>&nbsp;<span class="ident" id="8664127">_</span><span class="op" id="8664128">,</span>&nbsp;<span class="ident" id="8664130">test</span>&nbsp;<span class="op" id="8664135">:=</span>&nbsp;<span class="keyword" id="8664138">range</span>&nbsp;<span class="ident" id="8664144"><a href="/html/template/js_test.go.html#8663142">tests</a></span>&nbsp;<span class="op" id="8664150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664154">if</span>&nbsp;<span class="ident" id="8664157">s</span>&nbsp;<span class="op" id="8664159">:=</span>&nbsp;<span class="ident" id="8664162"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664166">.</span><span class="ident" id="8664167">escaper</span><span class="op" id="8664174">(</span><span class="ident" id="8664175"><a href="/html/template/js_test.go.html#8662809">input</a></span><span class="op" id="8664180">)</span><span class="op" id="8664181">;</span>&nbsp;<span class="ident" id="8664183"><a href="/html/template/js_test.go.html#8664157">s</a></span>&nbsp;<span class="op" id="8664185">!=</span>&nbsp;<span class="ident" id="8664188"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664192">.</span><span class="ident" id="8664193">escaped</span>&nbsp;<span class="op" id="8664201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664206"><a href="/html/template/js_test.go.html#8662792">t</a></span><span class="op" id="8664207">.</span><span class="ident" id="8664208">Errorf</span><span class="op" id="8664214">(</span><span class="string" id="8664215">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8664247">,</span>&nbsp;<span class="ident" id="8664249"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664253">.</span><span class="ident" id="8664254">name</span><span class="op" id="8664258">,</span>&nbsp;<span class="ident" id="8664260"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664264">.</span><span class="ident" id="8664265">escaped</span><span class="op" id="8664272">,</span>&nbsp;<span class="ident" id="8664274"><a href="/html/template/js_test.go.html#8664157">s</a></span><span class="op" id="8664275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664280">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664291">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8664296">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8664346">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664395">var</span>&nbsp;<span class="ident" id="8664399">buf</span>&nbsp;<span class="ident" id="8664403"><a href="/html/template/js_test.go.html#8655148">bytes</a></span><span class="op" id="8664408">.</span><span class="ident" id="8664409">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664418">for</span>&nbsp;<span class="ident" id="8664422">_</span><span class="op" id="8664423">,</span>&nbsp;<span class="ident" id="8664425">c</span>&nbsp;<span class="op" id="8664427">:=</span>&nbsp;<span class="keyword" id="8664430">range</span>&nbsp;<span class="ident" id="8664436"><a href="/html/template/js_test.go.html#8662809">input</a></span>&nbsp;<span class="op" id="8664442">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664447"><a href="/html/template/js_test.go.html#8664399">buf</a></span><span class="op" id="8664450">.</span><span class="ident" id="8664451">WriteString</span><span class="op" id="8664462">(</span><span class="ident" id="8664463"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664467">.</span><span class="ident" id="8664468">escaper</span><span class="op" id="8664475">(</span><span class="builtintype" id="8664476">string</span><span class="op" id="8664482">(</span><span class="ident" id="8664483"><a href="/html/template/js_test.go.html#8664425">c</a></span><span class="op" id="8664484">)</span><span class="op" id="8664485">)</span><span class="op" id="8664486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664495">if</span>&nbsp;<span class="ident" id="8664498">s</span>&nbsp;<span class="op" id="8664500">:=</span>&nbsp;<span class="ident" id="8664503"><a href="/html/template/js_test.go.html#8664399">buf</a></span><span class="op" id="8664506">.</span><span class="ident" id="8664507">String</span><span class="op" id="8664513">(</span><span class="op" id="8664514">)</span><span class="op" id="8664515">;</span>&nbsp;<span class="ident" id="8664517"><a href="/html/template/js_test.go.html#8664498">s</a></span>&nbsp;<span class="op" id="8664519">!=</span>&nbsp;<span class="ident" id="8664522"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664526">.</span><span class="ident" id="8664527">escaped</span>&nbsp;<span class="op" id="8664535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664540"><a href="/html/template/js_test.go.html#8662792">t</a></span><span class="op" id="8664541">.</span><span class="ident" id="8664542">Errorf</span><span class="op" id="8664548">(</span><span class="string" id="8664549">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8664586">,</span>&nbsp;<span class="ident" id="8664588"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664592">.</span><span class="ident" id="8664593">name</span><span class="op" id="8664597">,</span>&nbsp;<span class="ident" id="8664599"><a href="/html/template/js_test.go.html#8664130">test</a></span><span class="op" id="8664603">.</span><span class="ident" id="8664604">escaped</span><span class="op" id="8664611">,</span>&nbsp;<span class="ident" id="8664613"><a href="/html/template/js_test.go.html#8664498">s</a></span><span class="op" id="8664614">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664619">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664633">}</span><br>
<span class="lineno"></span><span class="op" id="8664635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="8664638">func</span>&nbsp;<span class="ident" id="8664643">BenchmarkJSValEscaperWithNum</span><span class="op" id="8664671">(</span><span class="ident" id="8664672">b</span>&nbsp;<span class="op" id="8664674">*</span><span class="ident" id="8664675"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8664682">.</span><span class="ident" id="8664683">B</span><span class="op" id="8664684">)</span>&nbsp;<span class="op" id="8664686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664689">for</span>&nbsp;<span class="ident" id="8664693">i</span>&nbsp;<span class="op" id="8664695">:=</span>&nbsp;<span class="num" id="8664698">0</span><span class="op" id="8664699">;</span>&nbsp;<span class="ident" id="8664701"><a href="/html/template/js_test.go.html#8664693">i</a></span>&nbsp;<span class="op" id="8664703">&lt;</span>&nbsp;<span class="ident" id="8664705"><a href="/html/template/js_test.go.html#8664672">b</a></span><span class="op" id="8664706">.</span><span class="ident" id="8664707">N</span><span class="op" id="8664708">;</span>&nbsp;<span class="ident" id="8664710"><a href="/html/template/js_test.go.html#8664693">i</a></span><span class="op" id="8664711">++</span>&nbsp;<span class="op" id="8664714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664718"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8664730">(</span><span class="num" id="8664731">3.141592654</span><span class="op" id="8664742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664745">}</span><br>
<span class="lineno"></span><span class="op" id="8664747">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8664750">func</span>&nbsp;<span class="ident" id="8664755">BenchmarkJSValEscaperWithStr</span><span class="op" id="8664783">(</span><span class="ident" id="8664784">b</span>&nbsp;<span class="op" id="8664786">*</span><span class="ident" id="8664787"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8664794">.</span><span class="ident" id="8664795">B</span><span class="op" id="8664796">)</span>&nbsp;<span class="op" id="8664798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8664801">for</span>&nbsp;<span class="ident" id="8664805">i</span>&nbsp;<span class="op" id="8664807">:=</span>&nbsp;<span class="num" id="8664810">0</span><span class="op" id="8664811">;</span>&nbsp;<span class="ident" id="8664813"><a href="/html/template/js_test.go.html#8664805">i</a></span>&nbsp;<span class="op" id="8664815">&lt;</span>&nbsp;<span class="ident" id="8664817"><a href="/html/template/js_test.go.html#8664784">b</a></span><span class="op" id="8664818">.</span><span class="ident" id="8664819">N</span><span class="op" id="8664820">;</span>&nbsp;<span class="ident" id="8664822"><a href="/html/template/js_test.go.html#8664805">i</a></span><span class="op" id="8664823">++</span>&nbsp;<span class="op" id="8664826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8664830"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8664842">(</span><span class="string" id="8664843">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8664964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8664967">}</span><br>
<span class="lineno">345</span><span class="op" id="8664969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8664972">func</span>&nbsp;<span class="ident" id="8664977">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="8665015">(</span><span class="ident" id="8665016">b</span>&nbsp;<span class="op" id="8665018">*</span><span class="ident" id="8665019"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8665026">.</span><span class="ident" id="8665027">B</span><span class="op" id="8665028">)</span>&nbsp;<span class="op" id="8665030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665033">for</span>&nbsp;<span class="ident" id="8665037">i</span>&nbsp;<span class="op" id="8665039">:=</span>&nbsp;<span class="num" id="8665042">0</span><span class="op" id="8665043">;</span>&nbsp;<span class="ident" id="8665045"><a href="/html/template/js_test.go.html#8665037">i</a></span>&nbsp;<span class="op" id="8665047">&lt;</span>&nbsp;<span class="ident" id="8665049"><a href="/html/template/js_test.go.html#8665016">b</a></span><span class="op" id="8665050">.</span><span class="ident" id="8665051">N</span><span class="op" id="8665052">;</span>&nbsp;<span class="ident" id="8665054"><a href="/html/template/js_test.go.html#8665037">i</a></span><span class="op" id="8665055">++</span>&nbsp;<span class="op" id="8665058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665062"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8665074">(</span><span class="string" id="8665075">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8665121">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665124">}</span><br>
<span class="lineno"></span><span class="op" id="8665126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8665129">func</span>&nbsp;<span class="ident" id="8665134">BenchmarkJSValEscaperWithObj</span><span class="op" id="8665162">(</span><span class="ident" id="8665163">b</span>&nbsp;<span class="op" id="8665165">*</span><span class="ident" id="8665166"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8665173">.</span><span class="ident" id="8665174">B</span><span class="op" id="8665175">)</span>&nbsp;<span class="op" id="8665177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665180">o</span>&nbsp;<span class="op" id="8665182">:=</span>&nbsp;<span class="keyword" id="8665185">struct</span>&nbsp;<span class="op" id="8665192">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665196">S</span>&nbsp;<span class="builtintype" id="8665198">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665207">N</span>&nbsp;<span class="builtintype" id="8665209">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665214">}</span><span class="op" id="8665215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8665219">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="8665346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8665350">42</span><span class="op" id="8665352">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665358">for</span>&nbsp;<span class="ident" id="8665362">i</span>&nbsp;<span class="op" id="8665364">:=</span>&nbsp;<span class="num" id="8665367">0</span><span class="op" id="8665368">;</span>&nbsp;<span class="ident" id="8665370"><a href="/html/template/js_test.go.html#8665362">i</a></span>&nbsp;<span class="op" id="8665372">&lt;</span>&nbsp;<span class="ident" id="8665374"><a href="/html/template/js_test.go.html#8665163">b</a></span><span class="op" id="8665375">.</span><span class="ident" id="8665376">N</span><span class="op" id="8665377">;</span>&nbsp;<span class="ident" id="8665379"><a href="/html/template/js_test.go.html#8665362">i</a></span><span class="op" id="8665380">++</span>&nbsp;<span class="op" id="8665383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665387"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8665399">(</span><span class="ident" id="8665400"><a href="/html/template/js_test.go.html#8665180">o</a></span><span class="op" id="8665401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665404">}</span><br>
<span class="lineno"></span><span class="op" id="8665406">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="8665409">func</span>&nbsp;<span class="ident" id="8665414">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="8665452">(</span><span class="ident" id="8665453">b</span>&nbsp;<span class="op" id="8665455">*</span><span class="ident" id="8665456"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8665463">.</span><span class="ident" id="8665464">B</span><span class="op" id="8665465">)</span>&nbsp;<span class="op" id="8665467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665470">o</span>&nbsp;<span class="op" id="8665472">:=</span>&nbsp;<span class="keyword" id="8665475">struct</span>&nbsp;<span class="op" id="8665482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665486">S</span>&nbsp;<span class="builtintype" id="8665488">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665497">N</span>&nbsp;<span class="builtintype" id="8665499">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665504">}</span><span class="op" id="8665505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8665509">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8665555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8665559">42</span><span class="op" id="8665561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665567">for</span>&nbsp;<span class="ident" id="8665571">i</span>&nbsp;<span class="op" id="8665573">:=</span>&nbsp;<span class="num" id="8665576">0</span><span class="op" id="8665577">;</span>&nbsp;<span class="ident" id="8665579"><a href="/html/template/js_test.go.html#8665571">i</a></span>&nbsp;<span class="op" id="8665581">&lt;</span>&nbsp;<span class="ident" id="8665583"><a href="/html/template/js_test.go.html#8665453">b</a></span><span class="op" id="8665584">.</span><span class="ident" id="8665585">N</span><span class="op" id="8665586">;</span>&nbsp;<span class="ident" id="8665588"><a href="/html/template/js_test.go.html#8665571">i</a></span><span class="op" id="8665589">++</span>&nbsp;<span class="op" id="8665592">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665596"><a href="/html/template/js.go.html#3324763">jsValEscaper</a></span><span class="op" id="8665608">(</span><span class="ident" id="8665609"><a href="/html/template/js_test.go.html#8665470">o</a></span><span class="op" id="8665610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665613">}</span><br>
<span class="lineno"></span><span class="op" id="8665615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8665618">func</span>&nbsp;<span class="ident" id="8665623">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="8665654">(</span><span class="ident" id="8665655">b</span>&nbsp;<span class="op" id="8665657">*</span><span class="ident" id="8665658"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8665665">.</span><span class="ident" id="8665666">B</span><span class="op" id="8665667">)</span>&nbsp;<span class="op" id="8665669">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665672">for</span>&nbsp;<span class="ident" id="8665676">i</span>&nbsp;<span class="op" id="8665678">:=</span>&nbsp;<span class="num" id="8665681">0</span><span class="op" id="8665682">;</span>&nbsp;<span class="ident" id="8665684"><a href="/html/template/js_test.go.html#8665676">i</a></span>&nbsp;<span class="op" id="8665686">&lt;</span>&nbsp;<span class="ident" id="8665688"><a href="/html/template/js_test.go.html#8665655">b</a></span><span class="op" id="8665689">.</span><span class="ident" id="8665690">N</span><span class="op" id="8665691">;</span>&nbsp;<span class="ident" id="8665693"><a href="/html/template/js_test.go.html#8665676">i</a></span><span class="op" id="8665694">++</span>&nbsp;<span class="op" id="8665697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665701"><a href="/html/template/js.go.html#3327174">jsStrEscaper</a></span><span class="op" id="8665713">(</span><span class="string" id="8665714">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="8665761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665764">}</span><br>
<span class="lineno"></span><span class="op" id="8665766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="8665769">func</span>&nbsp;<span class="ident" id="8665774">BenchmarkJSStrEscaper</span><span class="op" id="8665795">(</span><span class="ident" id="8665796">b</span>&nbsp;<span class="op" id="8665798">*</span><span class="ident" id="8665799"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8665806">.</span><span class="ident" id="8665807">B</span><span class="op" id="8665808">)</span>&nbsp;<span class="op" id="8665810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8665813">for</span>&nbsp;<span class="ident" id="8665817">i</span>&nbsp;<span class="op" id="8665819">:=</span>&nbsp;<span class="num" id="8665822">0</span><span class="op" id="8665823">;</span>&nbsp;<span class="ident" id="8665825"><a href="/html/template/js_test.go.html#8665817">i</a></span>&nbsp;<span class="op" id="8665827">&lt;</span>&nbsp;<span class="ident" id="8665829"><a href="/html/template/js_test.go.html#8665796">b</a></span><span class="op" id="8665830">.</span><span class="ident" id="8665831">N</span><span class="op" id="8665832">;</span>&nbsp;<span class="ident" id="8665834"><a href="/html/template/js_test.go.html#8665817">i</a></span><span class="op" id="8665835">++</span>&nbsp;<span class="op" id="8665838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8665842"><a href="/html/template/js.go.html#3327174">jsStrEscaper</a></span><span class="op" id="8665854">(</span><span class="string" id="8665855">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8665976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8665979">}</span><br>
<span class="lineno"></span><span class="op" id="8665981">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="8665984">func</span>&nbsp;<span class="ident" id="8665989">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="8666023">(</span><span class="ident" id="8666024">b</span>&nbsp;<span class="op" id="8666026">*</span><span class="ident" id="8666027"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8666034">.</span><span class="ident" id="8666035">B</span><span class="op" id="8666036">)</span>&nbsp;<span class="op" id="8666038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666041">for</span>&nbsp;<span class="ident" id="8666045">i</span>&nbsp;<span class="op" id="8666047">:=</span>&nbsp;<span class="num" id="8666050">0</span><span class="op" id="8666051">;</span>&nbsp;<span class="ident" id="8666053"><a href="/html/template/js_test.go.html#8666045">i</a></span>&nbsp;<span class="op" id="8666055">&lt;</span>&nbsp;<span class="ident" id="8666057"><a href="/html/template/js_test.go.html#8666024">b</a></span><span class="op" id="8666058">.</span><span class="ident" id="8666059">N</span><span class="op" id="8666060">;</span>&nbsp;<span class="ident" id="8666062"><a href="/html/template/js_test.go.html#8666045">i</a></span><span class="op" id="8666063">++</span>&nbsp;<span class="op" id="8666066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666070"><a href="/html/template/js.go.html#3327658">jsRegexpEscaper</a></span><span class="op" id="8666085">(</span><span class="string" id="8666086">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8666132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666135">}</span><br>
<span class="lineno">395</span><span class="op" id="8666137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8666140">func</span>&nbsp;<span class="ident" id="8666145">BenchmarkJSRegexpEscaper</span><span class="op" id="8666169">(</span><span class="ident" id="8666170">b</span>&nbsp;<span class="op" id="8666172">*</span><span class="ident" id="8666173"><a href="/html/template/js_test.go.html#8655176">testing</a></span><span class="op" id="8666180">.</span><span class="ident" id="8666181">B</span><span class="op" id="8666182">)</span>&nbsp;<span class="op" id="8666184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8666187">for</span>&nbsp;<span class="ident" id="8666191">i</span>&nbsp;<span class="op" id="8666193">:=</span>&nbsp;<span class="num" id="8666196">0</span><span class="op" id="8666197">;</span>&nbsp;<span class="ident" id="8666199"><a href="/html/template/js_test.go.html#8666191">i</a></span>&nbsp;<span class="op" id="8666201">&lt;</span>&nbsp;<span class="ident" id="8666203"><a href="/html/template/js_test.go.html#8666170">b</a></span><span class="op" id="8666204">.</span><span class="ident" id="8666205">N</span><span class="op" id="8666206">;</span>&nbsp;<span class="ident" id="8666208"><a href="/html/template/js_test.go.html#8666191">i</a></span><span class="op" id="8666209">++</span>&nbsp;<span class="op" id="8666212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8666216"><a href="/html/template/js.go.html#3327658">jsRegexpEscaper</a></span><span class="op" id="8666231">(</span><span class="string" id="8666232">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8666353">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8666356">}</span><br>
<span class="lineno"></span><span class="op" id="8666358">}</span>
</div>
</body>
</html>
