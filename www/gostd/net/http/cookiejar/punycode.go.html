<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6339378">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6339433">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6339487">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6339538">package</span>&nbsp;<span class="ident" id="6339546">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6339557">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6339620">import</span>&nbsp;<span class="op" id="6339627">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6339630">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6339637">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6339648">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6339663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6339666">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="6339720">//</span><br>
<span class="lineno"></span><span class="comment" id="6339723">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="6339802">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="6339852">const</span>&nbsp;<span class="op" id="6339858">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339861">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6339873">int32</span>&nbsp;<span class="op" id="6339879">=</span>&nbsp;<span class="num" id="6339881">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339885">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6339897">int32</span>&nbsp;<span class="op" id="6339903">=</span>&nbsp;<span class="num" id="6339905">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339910">initialBias</span>&nbsp;<span class="builtintype" id="6339922">int32</span>&nbsp;<span class="op" id="6339928">=</span>&nbsp;<span class="num" id="6339930">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339934">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6339946">int32</span>&nbsp;<span class="op" id="6339952">=</span>&nbsp;<span class="num" id="6339954">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339959">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6339971">int32</span>&nbsp;<span class="op" id="6339977">=</span>&nbsp;<span class="num" id="6339979">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339983">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6339995">int32</span>&nbsp;<span class="op" id="6340001">=</span>&nbsp;<span class="num" id="6340003">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340007">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6340019">int32</span>&nbsp;<span class="op" id="6340025">=</span>&nbsp;<span class="num" id="6340027">1</span><br>
<span class="lineno"></span><span class="op" id="6340029">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6340032">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="6340110">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="6340125">//</span><br>
<span class="lineno"></span><span class="comment" id="6340128">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="6340200">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="6340280">func</span>&nbsp;<span class="ident" id="6340285">encode</span><span class="op" id="6340291">(</span><span class="ident" id="6340292">prefix</span><span class="op" id="6340298">,</span>&nbsp;<span class="ident" id="6340300">s</span>&nbsp;<span class="builtintype" id="6340302">string</span><span class="op" id="6340308">)</span>&nbsp;<span class="op" id="6340310">(</span><span class="builtintype" id="6340311">string</span><span class="op" id="6340317">,</span>&nbsp;<span class="builtintype" id="6340319">error</span><span class="op" id="6340324">)</span>&nbsp;<span class="op" id="6340326">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340329">output</span>&nbsp;<span class="op" id="6340336">:=</span>&nbsp;<span class="builtinfunc" id="6340339">make</span><span class="op" id="6340343">(</span><span class="op" id="6340344">[</span><span class="op" id="6340345">]</span><span class="builtintype" id="6340346">byte</span><span class="op" id="6340350">,</span>&nbsp;<span class="builtinfunc" id="6340352">len</span><span class="op" id="6340355">(</span><span class="ident" id="6340356">prefix</span><span class="op" id="6340362">)</span><span class="op" id="6340363">,</span>&nbsp;<span class="builtinfunc" id="6340365">len</span><span class="op" id="6340368">(</span><span class="ident" id="6340369">prefix</span><span class="op" id="6340375">)</span><span class="op" id="6340376">+</span><span class="num" id="6340377">1</span><span class="op" id="6340378">+</span><span class="num" id="6340379">2</span><span class="op" id="6340380">*</span><span class="builtinfunc" id="6340381">len</span><span class="op" id="6340384">(</span><span class="ident" id="6340385">s</span><span class="op" id="6340386">)</span><span class="op" id="6340387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6340390">copy</span><span class="op" id="6340394">(</span><span class="ident" id="6340395">output</span><span class="op" id="6340401">,</span>&nbsp;<span class="ident" id="6340403">prefix</span><span class="op" id="6340409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340412">delta</span><span class="op" id="6340417">,</span>&nbsp;<span class="ident" id="6340419">n</span><span class="op" id="6340420">,</span>&nbsp;<span class="ident" id="6340422">bias</span>&nbsp;<span class="op" id="6340427">:=</span>&nbsp;<span class="builtintype" id="6340430">int32</span><span class="op" id="6340435">(</span><span class="num" id="6340436">0</span><span class="op" id="6340437">)</span><span class="op" id="6340438">,</span>&nbsp;<span class="ident" id="6340440">initialN</span><span class="op" id="6340448">,</span>&nbsp;<span class="ident" id="6340450">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340463">b</span><span class="op" id="6340464">,</span>&nbsp;<span class="ident" id="6340466">remaining</span>&nbsp;<span class="op" id="6340476">:=</span>&nbsp;<span class="builtintype" id="6340479">int32</span><span class="op" id="6340484">(</span><span class="num" id="6340485">0</span><span class="op" id="6340486">)</span><span class="op" id="6340487">,</span>&nbsp;<span class="builtintype" id="6340489">int32</span><span class="op" id="6340494">(</span><span class="num" id="6340495">0</span><span class="op" id="6340496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340499">for</span>&nbsp;<span class="ident" id="6340503">_</span><span class="op" id="6340504">,</span>&nbsp;<span class="ident" id="6340506">r</span>&nbsp;<span class="op" id="6340508">:=</span>&nbsp;<span class="keyword" id="6340511">range</span>&nbsp;<span class="ident" id="6340517">s</span>&nbsp;<span class="op" id="6340519">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340523">if</span>&nbsp;<span class="ident" id="6340526">r</span>&nbsp;<span class="op" id="6340528">&lt;</span>&nbsp;<span class="num" id="6340530">0x80</span>&nbsp;<span class="op" id="6340535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340540">b</span><span class="op" id="6340541">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340547">output</span>&nbsp;<span class="op" id="6340554">=</span>&nbsp;<span class="builtinfunc" id="6340556">append</span><span class="op" id="6340562">(</span><span class="ident" id="6340563">output</span><span class="op" id="6340569">,</span>&nbsp;<span class="builtintype" id="6340571">byte</span><span class="op" id="6340575">(</span><span class="ident" id="6340576">r</span><span class="op" id="6340577">)</span><span class="op" id="6340578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340582">}</span>&nbsp;<span class="keyword" id="6340584">else</span>&nbsp;<span class="op" id="6340589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340594">remaining</span><span class="op" id="6340603">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340614">h</span>&nbsp;<span class="op" id="6340616">:=</span>&nbsp;<span class="ident" id="6340619">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340622">if</span>&nbsp;<span class="ident" id="6340625">b</span>&nbsp;<span class="op" id="6340627">&gt;</span>&nbsp;<span class="num" id="6340629">0</span>&nbsp;<span class="op" id="6340631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340635">output</span>&nbsp;<span class="op" id="6340642">=</span>&nbsp;<span class="builtinfunc" id="6340644">append</span><span class="op" id="6340650">(</span><span class="ident" id="6340651">output</span><span class="op" id="6340657">,</span>&nbsp;<span class="string" id="6340659">&#39;-&#39;</span><span class="op" id="6340662">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340668">for</span>&nbsp;<span class="ident" id="6340672">remaining</span>&nbsp;<span class="op" id="6340682">!=</span>&nbsp;<span class="num" id="6340685">0</span>&nbsp;<span class="op" id="6340687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340691">m</span>&nbsp;<span class="op" id="6340693">:=</span>&nbsp;<span class="builtintype" id="6340696">int32</span><span class="op" id="6340701">(</span><span class="num" id="6340702">0x7fffffff</span><span class="op" id="6340712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340716">for</span>&nbsp;<span class="ident" id="6340720">_</span><span class="op" id="6340721">,</span>&nbsp;<span class="ident" id="6340723">r</span>&nbsp;<span class="op" id="6340725">:=</span>&nbsp;<span class="keyword" id="6340728">range</span>&nbsp;<span class="ident" id="6340734">s</span>&nbsp;<span class="op" id="6340736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340741">if</span>&nbsp;<span class="ident" id="6340744">m</span>&nbsp;<span class="op" id="6340746">&gt;</span>&nbsp;<span class="ident" id="6340748">r</span>&nbsp;<span class="op" id="6340750">&amp;&amp;</span>&nbsp;<span class="ident" id="6340753">r</span>&nbsp;<span class="op" id="6340755">&gt;=</span>&nbsp;<span class="ident" id="6340758">n</span>&nbsp;<span class="op" id="6340760">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340766">m</span>&nbsp;<span class="op" id="6340768">=</span>&nbsp;<span class="ident" id="6340770">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340783">delta</span>&nbsp;<span class="op" id="6340789">+=</span>&nbsp;<span class="op" id="6340792">(</span><span class="ident" id="6340793">m</span>&nbsp;<span class="op" id="6340795">-</span>&nbsp;<span class="ident" id="6340797">n</span><span class="op" id="6340798">)</span>&nbsp;<span class="op" id="6340800">*</span>&nbsp;<span class="op" id="6340802">(</span><span class="ident" id="6340803">h</span>&nbsp;<span class="op" id="6340805">+</span>&nbsp;<span class="num" id="6340807">1</span><span class="op" id="6340808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340812">if</span>&nbsp;<span class="ident" id="6340815">delta</span>&nbsp;<span class="op" id="6340821">&lt;</span>&nbsp;<span class="num" id="6340823">0</span>&nbsp;<span class="op" id="6340825">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340830">return</span>&nbsp;<span class="string" id="6340837">&#34;&#34;</span><span class="op" id="6340839">,</span>&nbsp;<span class="ident" id="6340841">fmt</span><span class="op" id="6340844">.</span><span class="ident" id="6340845">Errorf</span><span class="op" id="6340851">(</span><span class="string" id="6340852">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6340881">,</span>&nbsp;<span class="ident" id="6340883">s</span><span class="op" id="6340884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340892">n</span>&nbsp;<span class="op" id="6340894">=</span>&nbsp;<span class="ident" id="6340896">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340900">for</span>&nbsp;<span class="ident" id="6340904">_</span><span class="op" id="6340905">,</span>&nbsp;<span class="ident" id="6340907">r</span>&nbsp;<span class="op" id="6340909">:=</span>&nbsp;<span class="keyword" id="6340912">range</span>&nbsp;<span class="ident" id="6340918">s</span>&nbsp;<span class="op" id="6340920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340925">if</span>&nbsp;<span class="ident" id="6340928">r</span>&nbsp;<span class="op" id="6340930">&lt;</span>&nbsp;<span class="ident" id="6340932">n</span>&nbsp;<span class="op" id="6340934">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340940">delta</span><span class="op" id="6340945">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340952">if</span>&nbsp;<span class="ident" id="6340955">delta</span>&nbsp;<span class="op" id="6340961">&lt;</span>&nbsp;<span class="num" id="6340963">0</span>&nbsp;<span class="op" id="6340965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340972">return</span>&nbsp;<span class="string" id="6340979">&#34;&#34;</span><span class="op" id="6340981">,</span>&nbsp;<span class="ident" id="6340983">fmt</span><span class="op" id="6340986">.</span><span class="ident" id="6340987">Errorf</span><span class="op" id="6340993">(</span><span class="string" id="6340994">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6341023">,</span>&nbsp;<span class="ident" id="6341025">s</span><span class="op" id="6341026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341038">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341055">if</span>&nbsp;<span class="ident" id="6341058">r</span>&nbsp;<span class="op" id="6341060">&gt;</span>&nbsp;<span class="ident" id="6341062">n</span>&nbsp;<span class="op" id="6341064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341070">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341087">q</span>&nbsp;<span class="op" id="6341089">:=</span>&nbsp;<span class="ident" id="6341092">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341101">for</span>&nbsp;<span class="ident" id="6341105">k</span>&nbsp;<span class="op" id="6341107">:=</span>&nbsp;<span class="ident" id="6341110">base</span><span class="op" id="6341114">;</span>&nbsp;<span class="op" id="6341116">;</span>&nbsp;<span class="ident" id="6341118">k</span>&nbsp;<span class="op" id="6341120">+=</span>&nbsp;<span class="ident" id="6341123">base</span>&nbsp;<span class="op" id="6341128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341134">t</span>&nbsp;<span class="op" id="6341136">:=</span>&nbsp;<span class="ident" id="6341139">k</span>&nbsp;<span class="op" id="6341141">-</span>&nbsp;<span class="ident" id="6341143">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341152">if</span>&nbsp;<span class="ident" id="6341155">t</span>&nbsp;<span class="op" id="6341157">&lt;</span>&nbsp;<span class="ident" id="6341159">tmin</span>&nbsp;<span class="op" id="6341164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341171">t</span>&nbsp;<span class="op" id="6341173">=</span>&nbsp;<span class="ident" id="6341175">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341184">}</span>&nbsp;<span class="keyword" id="6341186">else</span>&nbsp;<span class="keyword" id="6341191">if</span>&nbsp;<span class="ident" id="6341194">t</span>&nbsp;<span class="op" id="6341196">&gt;</span>&nbsp;<span class="ident" id="6341198">tmax</span>&nbsp;<span class="op" id="6341203">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341210">t</span>&nbsp;<span class="op" id="6341212">=</span>&nbsp;<span class="ident" id="6341214">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341229">if</span>&nbsp;<span class="ident" id="6341232">q</span>&nbsp;<span class="op" id="6341234">&lt;</span>&nbsp;<span class="ident" id="6341236">t</span>&nbsp;<span class="op" id="6341238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341245">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341255">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341261">output</span>&nbsp;<span class="op" id="6341268">=</span>&nbsp;<span class="builtinfunc" id="6341270">append</span><span class="op" id="6341276">(</span><span class="ident" id="6341277">output</span><span class="op" id="6341283">,</span>&nbsp;<span class="ident" id="6341285">encodeDigit</span><span class="op" id="6341296">(</span><span class="ident" id="6341297">t</span><span class="op" id="6341298">+</span><span class="op" id="6341299">(</span><span class="ident" id="6341300">q</span><span class="op" id="6341301">-</span><span class="ident" id="6341302">t</span><span class="op" id="6341303">)</span><span class="op" id="6341304">%</span><span class="op" id="6341305">(</span><span class="ident" id="6341306">base</span><span class="op" id="6341310">-</span><span class="ident" id="6341311">t</span><span class="op" id="6341312">)</span><span class="op" id="6341313">)</span><span class="op" id="6341314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341320">q</span>&nbsp;<span class="op" id="6341322">=</span>&nbsp;<span class="op" id="6341324">(</span><span class="ident" id="6341325">q</span>&nbsp;<span class="op" id="6341327">-</span>&nbsp;<span class="ident" id="6341329">t</span><span class="op" id="6341330">)</span>&nbsp;<span class="op" id="6341332">/</span>&nbsp;<span class="op" id="6341334">(</span><span class="ident" id="6341335">base</span>&nbsp;<span class="op" id="6341340">-</span>&nbsp;<span class="ident" id="6341342">t</span><span class="op" id="6341343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341353">output</span>&nbsp;<span class="op" id="6341360">=</span>&nbsp;<span class="builtinfunc" id="6341362">append</span><span class="op" id="6341368">(</span><span class="ident" id="6341369">output</span><span class="op" id="6341375">,</span>&nbsp;<span class="ident" id="6341377">encodeDigit</span><span class="op" id="6341388">(</span><span class="ident" id="6341389">q</span><span class="op" id="6341390">)</span><span class="op" id="6341391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341396">bias</span>&nbsp;<span class="op" id="6341401">=</span>&nbsp;<span class="ident" id="6341403">adapt</span><span class="op" id="6341408">(</span><span class="ident" id="6341409">delta</span><span class="op" id="6341414">,</span>&nbsp;<span class="ident" id="6341416">h</span><span class="op" id="6341417">+</span><span class="num" id="6341418">1</span><span class="op" id="6341419">,</span>&nbsp;<span class="ident" id="6341421">h</span>&nbsp;<span class="op" id="6341423">==</span>&nbsp;<span class="ident" id="6341426">b</span><span class="op" id="6341427">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341432">delta</span>&nbsp;<span class="op" id="6341438">=</span>&nbsp;<span class="num" id="6341440">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341445">h</span><span class="op" id="6341446">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341452">remaining</span><span class="op" id="6341461">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341470">delta</span><span class="op" id="6341475">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341480">n</span><span class="op" id="6341481">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341488">return</span>&nbsp;<span class="builtintype" id="6341495">string</span><span class="op" id="6341501">(</span><span class="ident" id="6341502">output</span><span class="op" id="6341508">)</span><span class="op" id="6341509">,</span>&nbsp;<span class="ident" id="6341511">nil</span><br>
<span class="lineno"></span><span class="op" id="6341515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6341518">func</span>&nbsp;<span class="ident" id="6341523">encodeDigit</span><span class="op" id="6341534">(</span><span class="ident" id="6341535">digit</span>&nbsp;<span class="builtintype" id="6341541">int32</span><span class="op" id="6341546">)</span>&nbsp;<span class="builtintype" id="6341548">byte</span>&nbsp;<span class="op" id="6341553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341556">switch</span>&nbsp;<span class="op" id="6341563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341566">case</span>&nbsp;<span class="num" id="6341571">0</span>&nbsp;<span class="op" id="6341573">&lt;=</span>&nbsp;<span class="ident" id="6341576">digit</span>&nbsp;<span class="op" id="6341582">&amp;&amp;</span>&nbsp;<span class="ident" id="6341585">digit</span>&nbsp;<span class="op" id="6341591">&lt;</span>&nbsp;<span class="num" id="6341593">26</span><span class="op" id="6341595">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341599">return</span>&nbsp;<span class="builtintype" id="6341606">byte</span><span class="op" id="6341610">(</span><span class="ident" id="6341611">digit</span>&nbsp;<span class="op" id="6341617">+</span>&nbsp;<span class="string" id="6341619">&#39;a&#39;</span><span class="op" id="6341622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341625">case</span>&nbsp;<span class="num" id="6341630">26</span>&nbsp;<span class="op" id="6341633">&lt;=</span>&nbsp;<span class="ident" id="6341636">digit</span>&nbsp;<span class="op" id="6341642">&amp;&amp;</span>&nbsp;<span class="ident" id="6341645">digit</span>&nbsp;<span class="op" id="6341651">&lt;</span>&nbsp;<span class="num" id="6341653">36</span><span class="op" id="6341655">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341659">return</span>&nbsp;<span class="builtintype" id="6341666">byte</span><span class="op" id="6341670">(</span><span class="ident" id="6341671">digit</span>&nbsp;<span class="op" id="6341677">+</span>&nbsp;<span class="op" id="6341679">(</span><span class="string" id="6341680">&#39;0&#39;</span>&nbsp;<span class="op" id="6341684">-</span>&nbsp;<span class="num" id="6341686">26</span><span class="op" id="6341688">)</span><span class="op" id="6341689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6341695">panic</span><span class="op" id="6341700">(</span><span class="string" id="6341701">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="6341749">)</span><br>
<span class="lineno"></span><span class="op" id="6341751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6341754">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="6341821">func</span>&nbsp;<span class="ident" id="6341826">adapt</span><span class="op" id="6341831">(</span><span class="ident" id="6341832">delta</span><span class="op" id="6341837">,</span>&nbsp;<span class="ident" id="6341839">numPoints</span>&nbsp;<span class="builtintype" id="6341849">int32</span><span class="op" id="6341854">,</span>&nbsp;<span class="ident" id="6341856">firstTime</span>&nbsp;<span class="builtintype" id="6341866">bool</span><span class="op" id="6341870">)</span>&nbsp;<span class="builtintype" id="6341872">int32</span>&nbsp;<span class="op" id="6341878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341881">if</span>&nbsp;<span class="ident" id="6341884">firstTime</span>&nbsp;<span class="op" id="6341894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341898">delta</span>&nbsp;<span class="op" id="6341904">/=</span>&nbsp;<span class="ident" id="6341907">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341913">}</span>&nbsp;<span class="keyword" id="6341915">else</span>&nbsp;<span class="op" id="6341920">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341924">delta</span>&nbsp;<span class="op" id="6341930">/=</span>&nbsp;<span class="num" id="6341933">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341939">delta</span>&nbsp;<span class="op" id="6341945">+=</span>&nbsp;<span class="ident" id="6341948">delta</span>&nbsp;<span class="op" id="6341954">/</span>&nbsp;<span class="ident" id="6341956">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341967">k</span>&nbsp;<span class="op" id="6341969">:=</span>&nbsp;<span class="builtintype" id="6341972">int32</span><span class="op" id="6341977">(</span><span class="num" id="6341978">0</span><span class="op" id="6341979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341982">for</span>&nbsp;<span class="ident" id="6341986">delta</span>&nbsp;<span class="op" id="6341992">&gt;</span>&nbsp;<span class="op" id="6341994">(</span><span class="op" id="6341995">(</span><span class="ident" id="6341996">base</span><span class="op" id="6342000">-</span><span class="ident" id="6342001">tmin</span><span class="op" id="6342005">)</span><span class="op" id="6342006">*</span><span class="ident" id="6342007">tmax</span><span class="op" id="6342011">)</span><span class="op" id="6342012">/</span><span class="num" id="6342013">2</span>&nbsp;<span class="op" id="6342015">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342019">delta</span>&nbsp;<span class="op" id="6342025">/=</span>&nbsp;<span class="ident" id="6342028">base</span>&nbsp;<span class="op" id="6342033">-</span>&nbsp;<span class="ident" id="6342035">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342042">k</span>&nbsp;<span class="op" id="6342044">+=</span>&nbsp;<span class="ident" id="6342047">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342056">return</span>&nbsp;<span class="ident" id="6342063">k</span>&nbsp;<span class="op" id="6342065">+</span>&nbsp;<span class="op" id="6342067">(</span><span class="ident" id="6342068">base</span><span class="op" id="6342072">-</span><span class="ident" id="6342073">tmin</span><span class="op" id="6342077">+</span><span class="num" id="6342078">1</span><span class="op" id="6342079">)</span><span class="op" id="6342080">*</span><span class="ident" id="6342081">delta</span><span class="op" id="6342086">/</span><span class="op" id="6342087">(</span><span class="ident" id="6342088">delta</span><span class="op" id="6342093">+</span><span class="ident" id="6342094">skew</span><span class="op" id="6342098">)</span><br>
<span class="lineno"></span><span class="op" id="6342100">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6342103">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6342180">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6342229">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="6342283">const</span>&nbsp;<span class="ident" id="6342289">acePrefix</span>&nbsp;<span class="op" id="6342299">=</span>&nbsp;<span class="string" id="6342301">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6342309">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="6342386">//&nbsp;toASCII(&#34;b√ºcher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6342456">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="6342490">func</span>&nbsp;<span class="ident" id="6342495">toASCII</span><span class="op" id="6342502">(</span><span class="ident" id="6342503">s</span>&nbsp;<span class="builtintype" id="6342505">string</span><span class="op" id="6342511">)</span>&nbsp;<span class="op" id="6342513">(</span><span class="builtintype" id="6342514">string</span><span class="op" id="6342520">,</span>&nbsp;<span class="builtintype" id="6342522">error</span><span class="op" id="6342527">)</span>&nbsp;<span class="op" id="6342529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342532">if</span>&nbsp;<span class="ident" id="6342535">ascii</span><span class="op" id="6342540">(</span><span class="ident" id="6342541">s</span><span class="op" id="6342542">)</span>&nbsp;<span class="op" id="6342544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342548">return</span>&nbsp;<span class="ident" id="6342555">s</span><span class="op" id="6342556">,</span>&nbsp;<span class="ident" id="6342558">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342566">labels</span>&nbsp;<span class="op" id="6342573">:=</span>&nbsp;<span class="ident" id="6342576">strings</span><span class="op" id="6342583">.</span><span class="ident" id="6342584">Split</span><span class="op" id="6342589">(</span><span class="ident" id="6342590">s</span><span class="op" id="6342591">,</span>&nbsp;<span class="string" id="6342593">&#34;.&#34;</span><span class="op" id="6342596">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342599">for</span>&nbsp;<span class="ident" id="6342603">i</span><span class="op" id="6342604">,</span>&nbsp;<span class="ident" id="6342606">label</span>&nbsp;<span class="op" id="6342612">:=</span>&nbsp;<span class="keyword" id="6342615">range</span>&nbsp;<span class="ident" id="6342621">labels</span>&nbsp;<span class="op" id="6342628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342632">if</span>&nbsp;<span class="op" id="6342635">!</span><span class="ident" id="6342636">ascii</span><span class="op" id="6342641">(</span><span class="ident" id="6342642">label</span><span class="op" id="6342647">)</span>&nbsp;<span class="op" id="6342649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342654">a</span><span class="op" id="6342655">,</span>&nbsp;<span class="ident" id="6342657">err</span>&nbsp;<span class="op" id="6342661">:=</span>&nbsp;<span class="ident" id="6342664">encode</span><span class="op" id="6342670">(</span><span class="ident" id="6342671">acePrefix</span><span class="op" id="6342680">,</span>&nbsp;<span class="ident" id="6342682">label</span><span class="op" id="6342687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342692">if</span>&nbsp;<span class="ident" id="6342695">err</span>&nbsp;<span class="op" id="6342699">!=</span>&nbsp;<span class="ident" id="6342702">nil</span>&nbsp;<span class="op" id="6342706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342712">return</span>&nbsp;<span class="string" id="6342719">&#34;&#34;</span><span class="op" id="6342721">,</span>&nbsp;<span class="ident" id="6342723">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342735">labels</span><span class="op" id="6342741">[</span><span class="ident" id="6342742">i</span><span class="op" id="6342743">]</span>&nbsp;<span class="op" id="6342745">=</span>&nbsp;<span class="ident" id="6342747">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342757">return</span>&nbsp;<span class="ident" id="6342764">strings</span><span class="op" id="6342771">.</span><span class="ident" id="6342772">Join</span><span class="op" id="6342776">(</span><span class="ident" id="6342777">labels</span><span class="op" id="6342783">,</span>&nbsp;<span class="string" id="6342785">&#34;.&#34;</span><span class="op" id="6342788">)</span><span class="op" id="6342789">,</span>&nbsp;<span class="ident" id="6342791">nil</span><br>
<span class="lineno">150</span><span class="op" id="6342795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6342798">func</span>&nbsp;<span class="ident" id="6342803">ascii</span><span class="op" id="6342808">(</span><span class="ident" id="6342809">s</span>&nbsp;<span class="builtintype" id="6342811">string</span><span class="op" id="6342817">)</span>&nbsp;<span class="builtintype" id="6342819">bool</span>&nbsp;<span class="op" id="6342824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342827">for</span>&nbsp;<span class="ident" id="6342831">i</span>&nbsp;<span class="op" id="6342833">:=</span>&nbsp;<span class="num" id="6342836">0</span><span class="op" id="6342837">;</span>&nbsp;<span class="ident" id="6342839">i</span>&nbsp;<span class="op" id="6342841">&lt;</span>&nbsp;<span class="builtinfunc" id="6342843">len</span><span class="op" id="6342846">(</span><span class="ident" id="6342847">s</span><span class="op" id="6342848">)</span><span class="op" id="6342849">;</span>&nbsp;<span class="ident" id="6342851">i</span><span class="op" id="6342852">++</span>&nbsp;<span class="op" id="6342855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342859">if</span>&nbsp;<span class="ident" id="6342862">s</span><span class="op" id="6342863">[</span><span class="ident" id="6342864">i</span><span class="op" id="6342865">]</span>&nbsp;<span class="op" id="6342867">&gt;=</span>&nbsp;<span class="ident" id="6342870">utf8</span><span class="op" id="6342874">.</span><span class="ident" id="6342875">RuneSelf</span>&nbsp;<span class="op" id="6342884">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342889">return</span>&nbsp;<span class="builtintype" id="6342896">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342910">return</span>&nbsp;<span class="builtintype" id="6342917">true</span><br>
<span class="lineno"></span><span class="op" id="6342922">}</span>
</div>
</body>
</html>
