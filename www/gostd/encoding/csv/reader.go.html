<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6378143">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6378198">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6378252">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6378303">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6378371">//</span><br>
<span class="lineno"></span><span class="comment" id="6378374">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6378452">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6378527">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6378577">//</span><br>
<span class="lineno"></span><span class="comment" id="6378580">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6378604">//</span><br>
<span class="lineno"></span><span class="comment" id="6378607">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6378653">//</span><br>
<span class="lineno">15</span><span class="comment" id="6378656">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6378724">//</span><br>
<span class="lineno"></span><span class="comment" id="6378727">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6378806">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6378871">//</span><br>
<span class="lineno">20</span><span class="comment" id="6378874">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6378943">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6379013">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6379023">//</span><br>
<span class="lineno"></span><span class="comment" id="6379026">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6379041">//</span><br>
<span class="lineno"></span><span class="comment" id="6379044">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6379076">//</span><br>
<span class="lineno"></span><span class="comment" id="6379079">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6379104">//</span><br>
<span class="lineno">30</span><span class="comment" id="6379107">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6379144">//</span><br>
<span class="lineno"></span><span class="comment" id="6379147">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6379217">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6379260">//</span><br>
<span class="lineno">35</span><span class="comment" id="6379263">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6379310">//</span><br>
<span class="lineno"></span><span class="comment" id="6379313">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6379327">//</span><br>
<span class="lineno"></span><span class="comment" id="6379330">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6379376">//</span><br>
<span class="lineno"></span><span class="comment" id="6379379">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6379436">//</span><br>
<span class="lineno"></span><span class="comment" id="6379439">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6379454">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6379477">//</span><br>
<span class="lineno"></span><span class="comment" id="6379480">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6379494">//</span><br>
<span class="lineno"></span><span class="comment" id="6379497">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6379513">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6379538">package</span>&nbsp;<span class="ident" id="6379546">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6379551">import</span>&nbsp;<span class="op" id="6379558">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6379561">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6379570">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6379579">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6379589">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6379596">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6379602">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6379612">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6379615">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6379663">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6379711">type</span>&nbsp;<span class="ident" id="6379716">ParseError</span>&nbsp;<span class="keyword" id="6379727">struct</span>&nbsp;<span class="op" id="6379734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6379737">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6379744">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6379750">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6379784">Column</span>&nbsp;<span class="builtintype" id="6379791">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6379797">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6379846">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6379853">error</span>&nbsp;<span class="comment" id="6379859">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6379879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6379882">func</span>&nbsp;<span class="op" id="6379887">(</span><span class="ident" id="6379888">e</span>&nbsp;<span class="op" id="6379890">*</span><span class="ident" id="6379891">ParseError</span><span class="op" id="6379901">)</span>&nbsp;<span class="ident" id="6379903">Error</span><span class="op" id="6379908">(</span><span class="op" id="6379909">)</span>&nbsp;<span class="builtintype" id="6379911">string</span>&nbsp;<span class="op" id="6379918">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6379921">return</span>&nbsp;<span class="ident" id="6379928">fmt</span><span class="op" id="6379931">.</span><span class="ident" id="6379932">Sprintf</span><span class="op" id="6379939">(</span><span class="string" id="6379940">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6379964">,</span>&nbsp;<span class="ident" id="6379966">e</span><span class="op" id="6379967">.</span><span class="ident" id="6379968">Line</span><span class="op" id="6379972">,</span>&nbsp;<span class="ident" id="6379974">e</span><span class="op" id="6379975">.</span><span class="ident" id="6379976">Column</span><span class="op" id="6379982">,</span>&nbsp;<span class="ident" id="6379984">e</span><span class="op" id="6379985">.</span><span class="ident" id="6379986">Err</span><span class="op" id="6379989">)</span><br>
<span class="lineno"></span><span class="op" id="6379991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6379994">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6380059">var</span>&nbsp;<span class="op" id="6380063">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6380066">ErrTrailingComma</span>&nbsp;<span class="op" id="6380083">=</span>&nbsp;<span class="ident" id="6380085">errors</span><span class="op" id="6380091">.</span><span class="ident" id="6380092">New</span><span class="op" id="6380095">(</span><span class="string" id="6380096">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6380128">)</span>&nbsp;<span class="comment" id="6380130">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6380149">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6380166">=</span>&nbsp;<span class="ident" id="6380168">errors</span><span class="op" id="6380174">.</span><span class="ident" id="6380175">New</span><span class="op" id="6380178">(</span><span class="string" id="6380179">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6380208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6380211">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6380228">=</span>&nbsp;<span class="ident" id="6380230">errors</span><span class="op" id="6380236">.</span><span class="ident" id="6380237">New</span><span class="op" id="6380240">(</span><span class="string" id="6380241">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6380265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6380268">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6380285">=</span>&nbsp;<span class="ident" id="6380287">errors</span><span class="op" id="6380293">.</span><span class="ident" id="6380294">New</span><span class="op" id="6380297">(</span><span class="string" id="6380298">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6380330">)</span><br>
<span class="lineno"></span><span class="op" id="6380332">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6380335">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6380386">//</span><br>
<span class="lineno"></span><span class="comment" id="6380389">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6380465">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6380539">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6380573">//</span><br>
<span class="lineno"></span><span class="comment" id="6380576">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6380630">//</span><br>
<span class="lineno"></span><span class="comment" id="6380633">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6380706">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6380740">//</span><br>
<span class="lineno"></span><span class="comment" id="6380743">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6380807">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6380885">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6380958">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6381033">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6381091">//</span><br>
<span class="lineno"></span><span class="comment" id="6381094">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6381166">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6381217">//</span><br>
<span class="lineno"></span><span class="comment" id="6381220">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6381295">type</span>&nbsp;<span class="ident" id="6381300">Reader</span>&nbsp;<span class="keyword" id="6381307">struct</span>&nbsp;<span class="op" id="6381314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381317">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6381334">rune</span>&nbsp;<span class="comment" id="6381339">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381385">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6381402">rune</span>&nbsp;<span class="comment" id="6381407">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381447">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6381464">int</span>&nbsp;&nbsp;<span class="comment" id="6381469">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381510">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6381527">bool</span>&nbsp;<span class="comment" id="6381532">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381554">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6381571">bool</span>&nbsp;<span class="comment" id="6381576">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381622">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6381639">bool</span>&nbsp;<span class="comment" id="6381644">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381667">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6381684">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381689">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6381706">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381711">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6381728">*</span><span class="ident" id="6381729">bufio</span><span class="op" id="6381734">.</span><span class="ident" id="6381735">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381743">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6381760">bytes</span><span class="op" id="6381765">.</span><span class="ident" id="6381766">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6381773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6381776">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6381829">func</span>&nbsp;<span class="ident" id="6381834">NewReader</span><span class="op" id="6381843">(</span><span class="ident" id="6381844">r</span>&nbsp;<span class="ident" id="6381846">io</span><span class="op" id="6381848">.</span><span class="ident" id="6381849">Reader</span><span class="op" id="6381855">)</span>&nbsp;<span class="op" id="6381857">*</span><span class="ident" id="6381858">Reader</span>&nbsp;<span class="op" id="6381865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6381868">return</span>&nbsp;<span class="op" id="6381875">&amp;</span><span class="ident" id="6381876">Reader</span><span class="op" id="6381882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381886">Comma</span><span class="op" id="6381891">:</span>&nbsp;<span class="string" id="6381893">&#39;,&#39;</span><span class="op" id="6381896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6381900">r</span><span class="op" id="6381901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6381907">bufio</span><span class="op" id="6381912">.</span><span class="ident" id="6381913">NewReader</span><span class="op" id="6381922">(</span><span class="ident" id="6381923">r</span><span class="op" id="6381924">)</span><span class="op" id="6381925">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6381928">}</span><br>
<span class="lineno"></span><span class="op" id="6381930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6381933">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6381981">func</span>&nbsp;<span class="op" id="6381986">(</span><span class="ident" id="6381987">r</span>&nbsp;<span class="op" id="6381989">*</span><span class="ident" id="6381990">Reader</span><span class="op" id="6381996">)</span>&nbsp;<span class="builtintype" id="6381998">error</span><span class="op" id="6382003">(</span><span class="ident" id="6382004">err</span>&nbsp;<span class="builtintype" id="6382008">error</span><span class="op" id="6382013">)</span>&nbsp;<span class="builtintype" id="6382015">error</span>&nbsp;<span class="op" id="6382021">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382024">return</span>&nbsp;<span class="op" id="6382031">&amp;</span><span class="ident" id="6382032">ParseError</span><span class="op" id="6382042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382046">Line</span><span class="op" id="6382050">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6382054">r</span><span class="op" id="6382055">.</span><span class="ident" id="6382056">line</span><span class="op" id="6382060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382064">Column</span><span class="op" id="6382070">:</span>&nbsp;<span class="ident" id="6382072">r</span><span class="op" id="6382073">.</span><span class="ident" id="6382074">column</span><span class="op" id="6382080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382084">Err</span><span class="op" id="6382087">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6382092">err</span><span class="op" id="6382095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382098">}</span><br>
<span class="lineno">130</span><span class="op" id="6382100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6382103">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6382180">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6382214">func</span>&nbsp;<span class="op" id="6382219">(</span><span class="ident" id="6382220">r</span>&nbsp;<span class="op" id="6382222">*</span><span class="ident" id="6382223">Reader</span><span class="op" id="6382229">)</span>&nbsp;<span class="ident" id="6382231">Read</span><span class="op" id="6382235">(</span><span class="op" id="6382236">)</span>&nbsp;<span class="op" id="6382238">(</span><span class="ident" id="6382239">record</span>&nbsp;<span class="op" id="6382246">[</span><span class="op" id="6382247">]</span><span class="builtintype" id="6382248">string</span><span class="op" id="6382254">,</span>&nbsp;<span class="ident" id="6382256">err</span>&nbsp;<span class="builtintype" id="6382260">error</span><span class="op" id="6382265">)</span>&nbsp;<span class="op" id="6382267">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382270">for</span>&nbsp;<span class="op" id="6382274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382278">record</span><span class="op" id="6382284">,</span>&nbsp;<span class="ident" id="6382286">err</span>&nbsp;<span class="op" id="6382290">=</span>&nbsp;<span class="ident" id="6382292">r</span><span class="op" id="6382293">.</span><span class="ident" id="6382294">parseRecord</span><span class="op" id="6382305">(</span><span class="op" id="6382306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382310">if</span>&nbsp;<span class="ident" id="6382313">record</span>&nbsp;<span class="op" id="6382320">!=</span>&nbsp;<span class="ident" id="6382323">nil</span>&nbsp;<span class="op" id="6382327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382332">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382340">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382344">if</span>&nbsp;<span class="ident" id="6382347">err</span>&nbsp;<span class="op" id="6382351">!=</span>&nbsp;<span class="ident" id="6382354">nil</span>&nbsp;<span class="op" id="6382358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382363">return</span>&nbsp;<span class="ident" id="6382370">nil</span><span class="op" id="6382373">,</span>&nbsp;<span class="ident" id="6382375">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382388">if</span>&nbsp;<span class="ident" id="6382391">r</span><span class="op" id="6382392">.</span><span class="ident" id="6382393">FieldsPerRecord</span>&nbsp;<span class="op" id="6382409">&gt;</span>&nbsp;<span class="num" id="6382411">0</span>&nbsp;<span class="op" id="6382413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382417">if</span>&nbsp;<span class="builtinfunc" id="6382420">len</span><span class="op" id="6382423">(</span><span class="ident" id="6382424">record</span><span class="op" id="6382430">)</span>&nbsp;<span class="op" id="6382432">!=</span>&nbsp;<span class="ident" id="6382435">r</span><span class="op" id="6382436">.</span><span class="ident" id="6382437">FieldsPerRecord</span>&nbsp;<span class="op" id="6382453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382458">r</span><span class="op" id="6382459">.</span><span class="ident" id="6382460">column</span>&nbsp;<span class="op" id="6382467">=</span>&nbsp;<span class="num" id="6382469">0</span>&nbsp;<span class="comment" id="6382471">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382503">return</span>&nbsp;<span class="ident" id="6382510">record</span><span class="op" id="6382516">,</span>&nbsp;<span class="ident" id="6382518">r</span><span class="op" id="6382519">.</span><span class="builtintype" id="6382520">error</span><span class="op" id="6382525">(</span><span class="ident" id="6382526">ErrFieldCount</span><span class="op" id="6382539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382543">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382546">}</span>&nbsp;<span class="keyword" id="6382548">else</span>&nbsp;<span class="keyword" id="6382553">if</span>&nbsp;<span class="ident" id="6382556">r</span><span class="op" id="6382557">.</span><span class="ident" id="6382558">FieldsPerRecord</span>&nbsp;<span class="op" id="6382574">==</span>&nbsp;<span class="num" id="6382577">0</span>&nbsp;<span class="op" id="6382579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382583">r</span><span class="op" id="6382584">.</span><span class="ident" id="6382585">FieldsPerRecord</span>&nbsp;<span class="op" id="6382601">=</span>&nbsp;<span class="builtinfunc" id="6382603">len</span><span class="op" id="6382606">(</span><span class="ident" id="6382607">record</span><span class="op" id="6382613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6382616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382619">return</span>&nbsp;<span class="ident" id="6382626">record</span><span class="op" id="6382632">,</span>&nbsp;<span class="ident" id="6382634">nil</span><br>
<span class="lineno"></span><span class="op" id="6382638">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6382641">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6382692">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6382729">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6382805">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6382883">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6382896">func</span>&nbsp;<span class="op" id="6382901">(</span><span class="ident" id="6382902">r</span>&nbsp;<span class="op" id="6382904">*</span><span class="ident" id="6382905">Reader</span><span class="op" id="6382911">)</span>&nbsp;<span class="ident" id="6382913">ReadAll</span><span class="op" id="6382920">(</span><span class="op" id="6382921">)</span>&nbsp;<span class="op" id="6382923">(</span><span class="ident" id="6382924">records</span>&nbsp;<span class="op" id="6382932">[</span><span class="op" id="6382933">]</span><span class="op" id="6382934">[</span><span class="op" id="6382935">]</span><span class="builtintype" id="6382936">string</span><span class="op" id="6382942">,</span>&nbsp;<span class="ident" id="6382944">err</span>&nbsp;<span class="builtintype" id="6382948">error</span><span class="op" id="6382953">)</span>&nbsp;<span class="op" id="6382955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382958">for</span>&nbsp;<span class="op" id="6382962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6382966">record</span><span class="op" id="6382972">,</span>&nbsp;<span class="ident" id="6382974">err</span>&nbsp;<span class="op" id="6382978">:=</span>&nbsp;<span class="ident" id="6382981">r</span><span class="op" id="6382982">.</span><span class="ident" id="6382983">Read</span><span class="op" id="6382987">(</span><span class="op" id="6382988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6382992">if</span>&nbsp;<span class="ident" id="6382995">err</span>&nbsp;<span class="op" id="6382999">==</span>&nbsp;<span class="ident" id="6383002">io</span><span class="op" id="6383004">.</span><span class="ident" id="6383005">EOF</span>&nbsp;<span class="op" id="6383009">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383014">return</span>&nbsp;<span class="ident" id="6383021">records</span><span class="op" id="6383028">,</span>&nbsp;<span class="ident" id="6383030">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383040">if</span>&nbsp;<span class="ident" id="6383043">err</span>&nbsp;<span class="op" id="6383047">!=</span>&nbsp;<span class="ident" id="6383050">nil</span>&nbsp;<span class="op" id="6383054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383059">return</span>&nbsp;<span class="ident" id="6383066">nil</span><span class="op" id="6383069">,</span>&nbsp;<span class="ident" id="6383071">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383077">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383081">records</span>&nbsp;<span class="op" id="6383089">=</span>&nbsp;<span class="builtinfunc" id="6383091">append</span><span class="op" id="6383097">(</span><span class="ident" id="6383098">records</span><span class="op" id="6383105">,</span>&nbsp;<span class="ident" id="6383107">record</span><span class="op" id="6383113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383116">}</span><br>
<span class="lineno"></span><span class="op" id="6383118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6383121">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6383193">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6383269">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6383312">func</span>&nbsp;<span class="op" id="6383317">(</span><span class="ident" id="6383318">r</span>&nbsp;<span class="op" id="6383320">*</span><span class="ident" id="6383321">Reader</span><span class="op" id="6383327">)</span>&nbsp;<span class="ident" id="6383329">readRune</span><span class="op" id="6383337">(</span><span class="op" id="6383338">)</span>&nbsp;<span class="op" id="6383340">(</span><span class="builtintype" id="6383341">rune</span><span class="op" id="6383345">,</span>&nbsp;<span class="builtintype" id="6383347">error</span><span class="op" id="6383352">)</span>&nbsp;<span class="op" id="6383354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383357">r1</span><span class="op" id="6383359">,</span>&nbsp;<span class="ident" id="6383361">_</span><span class="op" id="6383362">,</span>&nbsp;<span class="ident" id="6383364">err</span>&nbsp;<span class="op" id="6383368">:=</span>&nbsp;<span class="ident" id="6383371">r</span><span class="op" id="6383372">.</span><span class="ident" id="6383373">r</span><span class="op" id="6383374">.</span><span class="ident" id="6383375">ReadRune</span><span class="op" id="6383383">(</span><span class="op" id="6383384">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6383388">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6383451">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6383513">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383579">if</span>&nbsp;<span class="ident" id="6383582">r1</span>&nbsp;<span class="op" id="6383585">==</span>&nbsp;<span class="string" id="6383588">&#39;\r&#39;</span>&nbsp;<span class="op" id="6383593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383597">r1</span><span class="op" id="6383599">,</span>&nbsp;<span class="ident" id="6383601">_</span><span class="op" id="6383602">,</span>&nbsp;<span class="ident" id="6383604">err</span>&nbsp;<span class="op" id="6383608">=</span>&nbsp;<span class="ident" id="6383610">r</span><span class="op" id="6383611">.</span><span class="ident" id="6383612">r</span><span class="op" id="6383613">.</span><span class="ident" id="6383614">ReadRune</span><span class="op" id="6383622">(</span><span class="op" id="6383623">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383627">if</span>&nbsp;<span class="ident" id="6383630">err</span>&nbsp;<span class="op" id="6383634">==</span>&nbsp;<span class="ident" id="6383637">nil</span>&nbsp;<span class="op" id="6383641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383646">if</span>&nbsp;<span class="ident" id="6383649">r1</span>&nbsp;<span class="op" id="6383652">!=</span>&nbsp;<span class="string" id="6383655">&#39;\n&#39;</span>&nbsp;<span class="op" id="6383660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383666">r</span><span class="op" id="6383667">.</span><span class="ident" id="6383668">r</span><span class="op" id="6383669">.</span><span class="ident" id="6383670">UnreadRune</span><span class="op" id="6383680">(</span><span class="op" id="6383681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383687">r1</span>&nbsp;<span class="op" id="6383690">=</span>&nbsp;<span class="string" id="6383692">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383700">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383710">r</span><span class="op" id="6383711">.</span><span class="ident" id="6383712">column</span><span class="op" id="6383718">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383722">return</span>&nbsp;<span class="ident" id="6383729">r1</span><span class="op" id="6383731">,</span>&nbsp;<span class="ident" id="6383733">err</span><br>
<span class="lineno"></span><span class="op" id="6383737">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6383740">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6383811">func</span>&nbsp;<span class="op" id="6383816">(</span><span class="ident" id="6383817">r</span>&nbsp;<span class="op" id="6383819">*</span><span class="ident" id="6383820">Reader</span><span class="op" id="6383826">)</span>&nbsp;<span class="ident" id="6383828">skip</span><span class="op" id="6383832">(</span><span class="ident" id="6383833">delim</span>&nbsp;<span class="builtintype" id="6383839">rune</span><span class="op" id="6383843">)</span>&nbsp;<span class="builtintype" id="6383845">error</span>&nbsp;<span class="op" id="6383851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383854">for</span>&nbsp;<span class="op" id="6383858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6383862">r1</span><span class="op" id="6383864">,</span>&nbsp;<span class="ident" id="6383866">err</span>&nbsp;<span class="op" id="6383870">:=</span>&nbsp;<span class="ident" id="6383873">r</span><span class="op" id="6383874">.</span><span class="ident" id="6383875">readRune</span><span class="op" id="6383883">(</span><span class="op" id="6383884">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383888">if</span>&nbsp;<span class="ident" id="6383891">err</span>&nbsp;<span class="op" id="6383895">!=</span>&nbsp;<span class="ident" id="6383898">nil</span>&nbsp;<span class="op" id="6383902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383907">return</span>&nbsp;<span class="ident" id="6383914">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383924">if</span>&nbsp;<span class="ident" id="6383927">r1</span>&nbsp;<span class="op" id="6383930">==</span>&nbsp;<span class="ident" id="6383933">delim</span>&nbsp;<span class="op" id="6383939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6383944">return</span>&nbsp;<span class="ident" id="6383951">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6383960">}</span><br>
<span class="lineno"></span><span class="op" id="6383962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6383965">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6384025">func</span>&nbsp;<span class="op" id="6384030">(</span><span class="ident" id="6384031">r</span>&nbsp;<span class="op" id="6384033">*</span><span class="ident" id="6384034">Reader</span><span class="op" id="6384040">)</span>&nbsp;<span class="ident" id="6384042">parseRecord</span><span class="op" id="6384053">(</span><span class="op" id="6384054">)</span>&nbsp;<span class="op" id="6384056">(</span><span class="ident" id="6384057">fields</span>&nbsp;<span class="op" id="6384064">[</span><span class="op" id="6384065">]</span><span class="builtintype" id="6384066">string</span><span class="op" id="6384072">,</span>&nbsp;<span class="ident" id="6384074">err</span>&nbsp;<span class="builtintype" id="6384078">error</span><span class="op" id="6384083">)</span>&nbsp;<span class="op" id="6384085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384088">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384149">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384207">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384278">r</span><span class="op" id="6384279">.</span><span class="ident" id="6384280">line</span><span class="op" id="6384284">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384288">r</span><span class="op" id="6384289">.</span><span class="ident" id="6384290">column</span>&nbsp;<span class="op" id="6384297">=</span>&nbsp;<span class="op" id="6384299">-</span><span class="num" id="6384300">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384304">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384364">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384427">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384462">r1</span><span class="op" id="6384464">,</span>&nbsp;<span class="ident" id="6384466">_</span><span class="op" id="6384467">,</span>&nbsp;<span class="ident" id="6384469">err</span>&nbsp;<span class="op" id="6384473">:=</span>&nbsp;<span class="ident" id="6384476">r</span><span class="op" id="6384477">.</span><span class="ident" id="6384478">r</span><span class="op" id="6384479">.</span><span class="ident" id="6384480">ReadRune</span><span class="op" id="6384488">(</span><span class="op" id="6384489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384492">if</span>&nbsp;<span class="ident" id="6384495">err</span>&nbsp;<span class="op" id="6384499">!=</span>&nbsp;<span class="ident" id="6384502">nil</span>&nbsp;<span class="op" id="6384506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384510">return</span>&nbsp;<span class="ident" id="6384517">nil</span><span class="op" id="6384520">,</span>&nbsp;<span class="ident" id="6384522">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6384527">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384531">if</span>&nbsp;<span class="ident" id="6384534">r</span><span class="op" id="6384535">.</span><span class="ident" id="6384536">Comment</span>&nbsp;<span class="op" id="6384544">!=</span>&nbsp;<span class="num" id="6384547">0</span>&nbsp;<span class="op" id="6384549">&amp;&amp;</span>&nbsp;<span class="ident" id="6384552">r1</span>&nbsp;<span class="op" id="6384555">==</span>&nbsp;<span class="ident" id="6384558">r</span><span class="op" id="6384559">.</span><span class="ident" id="6384560">Comment</span>&nbsp;<span class="op" id="6384568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384572">return</span>&nbsp;<span class="ident" id="6384579">nil</span><span class="op" id="6384582">,</span>&nbsp;<span class="ident" id="6384584">r</span><span class="op" id="6384585">.</span><span class="ident" id="6384586">skip</span><span class="op" id="6384590">(</span><span class="string" id="6384591">&#39;\n&#39;</span><span class="op" id="6384595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6384598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384601">r</span><span class="op" id="6384602">.</span><span class="ident" id="6384603">r</span><span class="op" id="6384604">.</span><span class="ident" id="6384605">UnreadRune</span><span class="op" id="6384615">(</span><span class="op" id="6384616">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6384620">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384666">for</span>&nbsp;<span class="op" id="6384670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384674">haveField</span><span class="op" id="6384683">,</span>&nbsp;<span class="ident" id="6384685">delim</span><span class="op" id="6384690">,</span>&nbsp;<span class="ident" id="6384692">err</span>&nbsp;<span class="op" id="6384696">:=</span>&nbsp;<span class="ident" id="6384699">r</span><span class="op" id="6384700">.</span><span class="ident" id="6384701">parseField</span><span class="op" id="6384711">(</span><span class="op" id="6384712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384716">if</span>&nbsp;<span class="ident" id="6384719">haveField</span>&nbsp;<span class="op" id="6384729">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6384734">fields</span>&nbsp;<span class="op" id="6384741">=</span>&nbsp;<span class="builtinfunc" id="6384743">append</span><span class="op" id="6384749">(</span><span class="ident" id="6384750">fields</span><span class="op" id="6384756">,</span>&nbsp;<span class="ident" id="6384758">r</span><span class="op" id="6384759">.</span><span class="ident" id="6384760">field</span><span class="op" id="6384765">.</span><span class="ident" id="6384766">String</span><span class="op" id="6384772">(</span><span class="op" id="6384773">)</span><span class="op" id="6384774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6384778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384782">if</span>&nbsp;<span class="ident" id="6384785">delim</span>&nbsp;<span class="op" id="6384791">==</span>&nbsp;<span class="string" id="6384794">&#39;\n&#39;</span>&nbsp;<span class="op" id="6384799">||</span>&nbsp;<span class="ident" id="6384802">err</span>&nbsp;<span class="op" id="6384806">==</span>&nbsp;<span class="ident" id="6384809">io</span><span class="op" id="6384811">.</span><span class="ident" id="6384812">EOF</span>&nbsp;<span class="op" id="6384816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384821">return</span>&nbsp;<span class="ident" id="6384828">fields</span><span class="op" id="6384834">,</span>&nbsp;<span class="ident" id="6384836">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6384842">}</span>&nbsp;<span class="keyword" id="6384844">else</span>&nbsp;<span class="keyword" id="6384849">if</span>&nbsp;<span class="ident" id="6384852">err</span>&nbsp;<span class="op" id="6384856">!=</span>&nbsp;<span class="ident" id="6384859">nil</span>&nbsp;<span class="op" id="6384863">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6384868">return</span>&nbsp;<span class="ident" id="6384875">nil</span><span class="op" id="6384878">,</span>&nbsp;<span class="ident" id="6384880">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6384886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6384889">}</span><br>
<span class="lineno"></span><span class="op" id="6384891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6384894">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6384964">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6385039">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6385061">func</span>&nbsp;<span class="op" id="6385066">(</span><span class="ident" id="6385067">r</span>&nbsp;<span class="op" id="6385069">*</span><span class="ident" id="6385070">Reader</span><span class="op" id="6385076">)</span>&nbsp;<span class="ident" id="6385078">parseField</span><span class="op" id="6385088">(</span><span class="op" id="6385089">)</span>&nbsp;<span class="op" id="6385091">(</span><span class="ident" id="6385092">haveField</span>&nbsp;<span class="builtintype" id="6385102">bool</span><span class="op" id="6385106">,</span>&nbsp;<span class="ident" id="6385108">delim</span>&nbsp;<span class="builtintype" id="6385114">rune</span><span class="op" id="6385118">,</span>&nbsp;<span class="ident" id="6385120">err</span>&nbsp;<span class="builtintype" id="6385124">error</span><span class="op" id="6385129">)</span>&nbsp;<span class="op" id="6385131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385134">r</span><span class="op" id="6385135">.</span><span class="ident" id="6385136">field</span><span class="op" id="6385141">.</span><span class="ident" id="6385142">Reset</span><span class="op" id="6385147">(</span><span class="op" id="6385148">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385152">r1</span><span class="op" id="6385154">,</span>&nbsp;<span class="ident" id="6385156">err</span>&nbsp;<span class="op" id="6385160">:=</span>&nbsp;<span class="ident" id="6385163">r</span><span class="op" id="6385164">.</span><span class="ident" id="6385165">readRune</span><span class="op" id="6385173">(</span><span class="op" id="6385174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385177">for</span>&nbsp;<span class="ident" id="6385181">err</span>&nbsp;<span class="op" id="6385185">==</span>&nbsp;<span class="ident" id="6385188">nil</span>&nbsp;<span class="op" id="6385192">&amp;&amp;</span>&nbsp;<span class="ident" id="6385195">r</span><span class="op" id="6385196">.</span><span class="ident" id="6385197">TrimLeadingSpace</span>&nbsp;<span class="op" id="6385214">&amp;&amp;</span>&nbsp;<span class="ident" id="6385217">r1</span>&nbsp;<span class="op" id="6385220">!=</span>&nbsp;<span class="string" id="6385223">&#39;\n&#39;</span>&nbsp;<span class="op" id="6385228">&amp;&amp;</span>&nbsp;<span class="ident" id="6385231">unicode</span><span class="op" id="6385238">.</span><span class="ident" id="6385239">IsSpace</span><span class="op" id="6385246">(</span><span class="ident" id="6385247">r1</span><span class="op" id="6385249">)</span>&nbsp;<span class="op" id="6385251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385255">r1</span><span class="op" id="6385257">,</span>&nbsp;<span class="ident" id="6385259">err</span>&nbsp;<span class="op" id="6385263">=</span>&nbsp;<span class="ident" id="6385265">r</span><span class="op" id="6385266">.</span><span class="ident" id="6385267">readRune</span><span class="op" id="6385275">(</span><span class="op" id="6385276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385279">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385283">if</span>&nbsp;<span class="ident" id="6385286">err</span>&nbsp;<span class="op" id="6385290">==</span>&nbsp;<span class="ident" id="6385293">io</span><span class="op" id="6385295">.</span><span class="ident" id="6385296">EOF</span>&nbsp;<span class="op" id="6385300">&amp;&amp;</span>&nbsp;<span class="ident" id="6385303">r</span><span class="op" id="6385304">.</span><span class="ident" id="6385305">column</span>&nbsp;<span class="op" id="6385312">!=</span>&nbsp;<span class="num" id="6385315">0</span>&nbsp;<span class="op" id="6385317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385321">return</span>&nbsp;<span class="builtintype" id="6385328">true</span><span class="op" id="6385332">,</span>&nbsp;<span class="num" id="6385334">0</span><span class="op" id="6385335">,</span>&nbsp;<span class="ident" id="6385337">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385345">if</span>&nbsp;<span class="ident" id="6385348">err</span>&nbsp;<span class="op" id="6385352">!=</span>&nbsp;<span class="ident" id="6385355">nil</span>&nbsp;<span class="op" id="6385359">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385363">return</span>&nbsp;<span class="builtintype" id="6385370">false</span><span class="op" id="6385375">,</span>&nbsp;<span class="num" id="6385377">0</span><span class="op" id="6385378">,</span>&nbsp;<span class="ident" id="6385380">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385389">switch</span>&nbsp;<span class="ident" id="6385396">r1</span>&nbsp;<span class="op" id="6385399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385402">case</span>&nbsp;<span class="ident" id="6385407">r</span><span class="op" id="6385408">.</span><span class="ident" id="6385409">Comma</span><span class="op" id="6385414">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6385418">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385440">case</span>&nbsp;<span class="string" id="6385445">&#39;\n&#39;</span><span class="op" id="6385449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6385453">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385504">if</span>&nbsp;<span class="ident" id="6385507">r</span><span class="op" id="6385508">.</span><span class="ident" id="6385509">column</span>&nbsp;<span class="op" id="6385516">==</span>&nbsp;<span class="num" id="6385519">0</span>&nbsp;<span class="op" id="6385521">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385526">return</span>&nbsp;<span class="builtintype" id="6385533">false</span><span class="op" id="6385538">,</span>&nbsp;<span class="ident" id="6385540">r1</span><span class="op" id="6385542">,</span>&nbsp;<span class="ident" id="6385544">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385554">return</span>&nbsp;<span class="builtintype" id="6385561">true</span><span class="op" id="6385565">,</span>&nbsp;<span class="ident" id="6385567">r1</span><span class="op" id="6385569">,</span>&nbsp;<span class="ident" id="6385571">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385577">case</span>&nbsp;<span class="string" id="6385582">&#39;&#34;&#39;</span><span class="op" id="6385585">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6385589">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385606">Quoted</span><span class="op" id="6385612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385616">for</span>&nbsp;<span class="op" id="6385620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385625">r1</span><span class="op" id="6385627">,</span>&nbsp;<span class="ident" id="6385629">err</span>&nbsp;<span class="op" id="6385633">=</span>&nbsp;<span class="ident" id="6385635">r</span><span class="op" id="6385636">.</span><span class="ident" id="6385637">readRune</span><span class="op" id="6385645">(</span><span class="op" id="6385646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385651">if</span>&nbsp;<span class="ident" id="6385654">err</span>&nbsp;<span class="op" id="6385658">!=</span>&nbsp;<span class="ident" id="6385661">nil</span>&nbsp;<span class="op" id="6385665">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385671">if</span>&nbsp;<span class="ident" id="6385674">err</span>&nbsp;<span class="op" id="6385678">==</span>&nbsp;<span class="ident" id="6385681">io</span><span class="op" id="6385683">.</span><span class="ident" id="6385684">EOF</span>&nbsp;<span class="op" id="6385688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385695">if</span>&nbsp;<span class="ident" id="6385698">r</span><span class="op" id="6385699">.</span><span class="ident" id="6385700">LazyQuotes</span>&nbsp;<span class="op" id="6385711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385719">return</span>&nbsp;<span class="builtintype" id="6385726">true</span><span class="op" id="6385730">,</span>&nbsp;<span class="num" id="6385732">0</span><span class="op" id="6385733">,</span>&nbsp;<span class="ident" id="6385735">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385751">return</span>&nbsp;<span class="builtintype" id="6385758">false</span><span class="op" id="6385763">,</span>&nbsp;<span class="num" id="6385765">0</span><span class="op" id="6385766">,</span>&nbsp;<span class="ident" id="6385768">r</span><span class="op" id="6385769">.</span><span class="builtintype" id="6385770">error</span><span class="op" id="6385775">(</span><span class="ident" id="6385776">ErrQuote</span><span class="op" id="6385784">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385796">return</span>&nbsp;<span class="builtintype" id="6385803">false</span><span class="op" id="6385808">,</span>&nbsp;<span class="num" id="6385810">0</span><span class="op" id="6385811">,</span>&nbsp;<span class="ident" id="6385813">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385825">switch</span>&nbsp;<span class="ident" id="6385832">r1</span>&nbsp;<span class="op" id="6385835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385840">case</span>&nbsp;<span class="string" id="6385845">&#39;&#34;&#39;</span><span class="op" id="6385848">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6385854">r1</span><span class="op" id="6385856">,</span>&nbsp;<span class="ident" id="6385858">err</span>&nbsp;<span class="op" id="6385862">=</span>&nbsp;<span class="ident" id="6385864">r</span><span class="op" id="6385865">.</span><span class="ident" id="6385866">readRune</span><span class="op" id="6385874">(</span><span class="op" id="6385875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385881">if</span>&nbsp;<span class="ident" id="6385884">err</span>&nbsp;<span class="op" id="6385888">!=</span>&nbsp;<span class="ident" id="6385891">nil</span>&nbsp;<span class="op" id="6385895">||</span>&nbsp;<span class="ident" id="6385898">r1</span>&nbsp;<span class="op" id="6385901">==</span>&nbsp;<span class="ident" id="6385904">r</span><span class="op" id="6385905">.</span><span class="ident" id="6385906">Comma</span>&nbsp;<span class="op" id="6385912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385919">break</span>&nbsp;<span class="ident" id="6385925">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385942">if</span>&nbsp;<span class="ident" id="6385945">r1</span>&nbsp;<span class="op" id="6385948">==</span>&nbsp;<span class="string" id="6385951">&#39;\n&#39;</span>&nbsp;<span class="op" id="6385956">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385963">return</span>&nbsp;<span class="builtintype" id="6385970">true</span><span class="op" id="6385974">,</span>&nbsp;<span class="ident" id="6385976">r1</span><span class="op" id="6385978">,</span>&nbsp;<span class="ident" id="6385980">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6385988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6385994">if</span>&nbsp;<span class="ident" id="6385997">r1</span>&nbsp;<span class="op" id="6386000">!=</span>&nbsp;<span class="string" id="6386003">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6386007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386014">if</span>&nbsp;<span class="op" id="6386017">!</span><span class="ident" id="6386018">r</span><span class="op" id="6386019">.</span><span class="ident" id="6386020">LazyQuotes</span>&nbsp;<span class="op" id="6386031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386039">r</span><span class="op" id="6386040">.</span><span class="ident" id="6386041">column</span><span class="op" id="6386047">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386056">return</span>&nbsp;<span class="builtintype" id="6386063">false</span><span class="op" id="6386068">,</span>&nbsp;<span class="num" id="6386070">0</span><span class="op" id="6386071">,</span>&nbsp;<span class="ident" id="6386073">r</span><span class="op" id="6386074">.</span><span class="builtintype" id="6386075">error</span><span class="op" id="6386080">(</span><span class="ident" id="6386081">ErrQuote</span><span class="op" id="6386089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6386103">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386133">r</span><span class="op" id="6386134">.</span><span class="ident" id="6386135">field</span><span class="op" id="6386140">.</span><span class="ident" id="6386141">WriteRune</span><span class="op" id="6386150">(</span><span class="string" id="6386151">&#39;&#34;&#39;</span><span class="op" id="6386154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386160">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386165">case</span>&nbsp;<span class="string" id="6386170">&#39;\n&#39;</span><span class="op" id="6386174">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386180">r</span><span class="op" id="6386181">.</span><span class="ident" id="6386182">line</span><span class="op" id="6386186">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386193">r</span><span class="op" id="6386194">.</span><span class="ident" id="6386195">column</span>&nbsp;<span class="op" id="6386202">=</span>&nbsp;<span class="op" id="6386204">-</span><span class="num" id="6386205">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386215">r</span><span class="op" id="6386216">.</span><span class="ident" id="6386217">field</span><span class="op" id="6386222">.</span><span class="ident" id="6386223">WriteRune</span><span class="op" id="6386232">(</span><span class="ident" id="6386233">r1</span><span class="op" id="6386235">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386243">default</span><span class="op" id="6386250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6386254">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386274">for</span>&nbsp;<span class="op" id="6386278">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386283">r</span><span class="op" id="6386284">.</span><span class="ident" id="6386285">field</span><span class="op" id="6386290">.</span><span class="ident" id="6386291">WriteRune</span><span class="op" id="6386300">(</span><span class="ident" id="6386301">r1</span><span class="op" id="6386303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386308">r1</span><span class="op" id="6386310">,</span>&nbsp;<span class="ident" id="6386312">err</span>&nbsp;<span class="op" id="6386316">=</span>&nbsp;<span class="ident" id="6386318">r</span><span class="op" id="6386319">.</span><span class="ident" id="6386320">readRune</span><span class="op" id="6386328">(</span><span class="op" id="6386329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386334">if</span>&nbsp;<span class="ident" id="6386337">err</span>&nbsp;<span class="op" id="6386341">!=</span>&nbsp;<span class="ident" id="6386344">nil</span>&nbsp;<span class="op" id="6386348">||</span>&nbsp;<span class="ident" id="6386351">r1</span>&nbsp;<span class="op" id="6386354">==</span>&nbsp;<span class="ident" id="6386357">r</span><span class="op" id="6386358">.</span><span class="ident" id="6386359">Comma</span>&nbsp;<span class="op" id="6386365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386371">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386380">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386385">if</span>&nbsp;<span class="ident" id="6386388">r1</span>&nbsp;<span class="op" id="6386391">==</span>&nbsp;<span class="string" id="6386394">&#39;\n&#39;</span>&nbsp;<span class="op" id="6386399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386405">return</span>&nbsp;<span class="builtintype" id="6386412">true</span><span class="op" id="6386416">,</span>&nbsp;<span class="ident" id="6386418">r1</span><span class="op" id="6386420">,</span>&nbsp;<span class="ident" id="6386422">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386434">if</span>&nbsp;<span class="op" id="6386437">!</span><span class="ident" id="6386438">r</span><span class="op" id="6386439">.</span><span class="ident" id="6386440">LazyQuotes</span>&nbsp;<span class="op" id="6386451">&amp;&amp;</span>&nbsp;<span class="ident" id="6386454">r1</span>&nbsp;<span class="op" id="6386457">==</span>&nbsp;<span class="string" id="6386460">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6386464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386470">return</span>&nbsp;<span class="builtintype" id="6386477">false</span><span class="op" id="6386482">,</span>&nbsp;<span class="num" id="6386484">0</span><span class="op" id="6386485">,</span>&nbsp;<span class="ident" id="6386487">r</span><span class="op" id="6386488">.</span><span class="builtintype" id="6386489">error</span><span class="op" id="6386494">(</span><span class="ident" id="6386495">ErrBareQuote</span><span class="op" id="6386507">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386523">if</span>&nbsp;<span class="ident" id="6386526">err</span>&nbsp;<span class="op" id="6386530">!=</span>&nbsp;<span class="ident" id="6386533">nil</span>&nbsp;<span class="op" id="6386537">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386541">if</span>&nbsp;<span class="ident" id="6386544">err</span>&nbsp;<span class="op" id="6386548">==</span>&nbsp;<span class="ident" id="6386551">io</span><span class="op" id="6386553">.</span><span class="ident" id="6386554">EOF</span>&nbsp;<span class="op" id="6386558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386563">return</span>&nbsp;<span class="builtintype" id="6386570">true</span><span class="op" id="6386574">,</span>&nbsp;<span class="num" id="6386576">0</span><span class="op" id="6386577">,</span>&nbsp;<span class="ident" id="6386579">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386589">return</span>&nbsp;<span class="builtintype" id="6386596">false</span><span class="op" id="6386601">,</span>&nbsp;<span class="num" id="6386603">0</span><span class="op" id="6386604">,</span>&nbsp;<span class="ident" id="6386606">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6386611">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6386615">return</span>&nbsp;<span class="builtintype" id="6386622">true</span><span class="op" id="6386626">,</span>&nbsp;<span class="ident" id="6386628">r1</span><span class="op" id="6386630">,</span>&nbsp;<span class="ident" id="6386632">nil</span><br>
<span class="lineno"></span><span class="op" id="6386636">}</span>
</div>
</body>
</html>
