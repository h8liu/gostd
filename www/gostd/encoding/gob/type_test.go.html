<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8103680">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8103735">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8103789">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8103840">package</span>&nbsp;<span class="ident" id="8103848">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103853">import</span>&nbsp;<span class="op" id="8103860">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8103863">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8103872">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8103883">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8103893">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103896">type</span>&nbsp;<span class="ident" id="8103901">typeT</span>&nbsp;<span class="keyword" id="8103907">struct</span>&nbsp;<span class="op" id="8103914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103917">id</span>&nbsp;&nbsp;<span class="ident" id="8103921">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103929">str</span>&nbsp;<span class="builtintype" id="8103933">string</span><br>
<span class="lineno"></span><span class="op" id="8103940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103943">var</span>&nbsp;<span class="ident" id="8103947">basicTypes</span>&nbsp;<span class="op" id="8103958">=</span>&nbsp;<span class="op" id="8103960">[</span><span class="op" id="8103961">]</span><span class="ident" id="8103962">typeT</span><span class="op" id="8103967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103970">{</span><span class="ident" id="8103971">tBool</span><span class="op" id="8103976">,</span>&nbsp;<span class="string" id="8103978">&#34;bool&#34;</span><span class="op" id="8103984">}</span><span class="op" id="8103985">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103988">{</span><span class="ident" id="8103989">tInt</span><span class="op" id="8103993">,</span>&nbsp;<span class="string" id="8103995">&#34;int&#34;</span><span class="op" id="8104000">}</span><span class="op" id="8104001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104004">{</span><span class="ident" id="8104005">tUint</span><span class="op" id="8104010">,</span>&nbsp;<span class="string" id="8104012">&#34;uint&#34;</span><span class="op" id="8104018">}</span><span class="op" id="8104019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104022">{</span><span class="ident" id="8104023">tFloat</span><span class="op" id="8104029">,</span>&nbsp;<span class="string" id="8104031">&#34;float&#34;</span><span class="op" id="8104038">}</span><span class="op" id="8104039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104042">{</span><span class="ident" id="8104043">tBytes</span><span class="op" id="8104049">,</span>&nbsp;<span class="string" id="8104051">&#34;bytes&#34;</span><span class="op" id="8104058">}</span><span class="op" id="8104059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104062">{</span><span class="ident" id="8104063">tString</span><span class="op" id="8104070">,</span>&nbsp;<span class="string" id="8104072">&#34;string&#34;</span><span class="op" id="8104080">}</span><span class="op" id="8104081">,</span><br>
<span class="lineno">25</span><span class="op" id="8104083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8104086">func</span>&nbsp;<span class="ident" id="8104091">getTypeUnlocked</span><span class="op" id="8104106">(</span><span class="ident" id="8104107">name</span>&nbsp;<span class="builtintype" id="8104112">string</span><span class="op" id="8104118">,</span>&nbsp;<span class="ident" id="8104120">rt</span>&nbsp;<span class="ident" id="8104123">reflect</span><span class="op" id="8104130">.</span><span class="ident" id="8104131">Type</span><span class="op" id="8104135">)</span>&nbsp;<span class="ident" id="8104137">gobType</span>&nbsp;<span class="op" id="8104145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104148">typeLock</span><span class="op" id="8104156">.</span><span class="ident" id="8104157">Lock</span><span class="op" id="8104161">(</span><span class="op" id="8104162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104165">defer</span>&nbsp;<span class="ident" id="8104171">typeLock</span><span class="op" id="8104179">.</span><span class="ident" id="8104180">Unlock</span><span class="op" id="8104186">(</span><span class="op" id="8104187">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104190">t</span><span class="op" id="8104191">,</span>&nbsp;<span class="ident" id="8104193">err</span>&nbsp;<span class="op" id="8104197">:=</span>&nbsp;<span class="ident" id="8104200">getBaseType</span><span class="op" id="8104211">(</span><span class="ident" id="8104212">name</span><span class="op" id="8104216">,</span>&nbsp;<span class="ident" id="8104218">rt</span><span class="op" id="8104220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104223">if</span>&nbsp;<span class="ident" id="8104226">err</span>&nbsp;<span class="op" id="8104230">!=</span>&nbsp;<span class="ident" id="8104233">nil</span>&nbsp;<span class="op" id="8104237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8104241">panic</span><span class="op" id="8104246">(</span><span class="string" id="8104247">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8104267">+</span>&nbsp;<span class="ident" id="8104269">err</span><span class="op" id="8104272">.</span><span class="ident" id="8104273">Error</span><span class="op" id="8104278">(</span><span class="op" id="8104279">)</span><span class="op" id="8104280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104286">return</span>&nbsp;<span class="ident" id="8104293">t</span><br>
<span class="lineno">35</span><span class="op" id="8104295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8104298">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8104315">func</span>&nbsp;<span class="ident" id="8104320">TestBasic</span><span class="op" id="8104329">(</span><span class="ident" id="8104330">t</span>&nbsp;<span class="op" id="8104332">*</span><span class="ident" id="8104333">testing</span><span class="op" id="8104340">.</span><span class="ident" id="8104341">T</span><span class="op" id="8104342">)</span>&nbsp;<span class="op" id="8104344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104347">for</span>&nbsp;<span class="ident" id="8104351">_</span><span class="op" id="8104352">,</span>&nbsp;<span class="ident" id="8104354">tt</span>&nbsp;<span class="op" id="8104357">:=</span>&nbsp;<span class="keyword" id="8104360">range</span>&nbsp;<span class="ident" id="8104366">basicTypes</span>&nbsp;<span class="op" id="8104377">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104381">if</span>&nbsp;<span class="ident" id="8104384">tt</span><span class="op" id="8104386">.</span><span class="ident" id="8104387">id</span><span class="op" id="8104389">.</span><span class="builtintype" id="8104390">string</span><span class="op" id="8104396">(</span><span class="op" id="8104397">)</span>&nbsp;<span class="op" id="8104399">!=</span>&nbsp;<span class="ident" id="8104402">tt</span><span class="op" id="8104404">.</span><span class="ident" id="8104405">str</span>&nbsp;<span class="op" id="8104409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104414">t</span><span class="op" id="8104415">.</span><span class="ident" id="8104416">Errorf</span><span class="op" id="8104422">(</span><span class="string" id="8104423">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8104454">,</span>&nbsp;<span class="ident" id="8104456">tt</span><span class="op" id="8104458">.</span><span class="ident" id="8104459">str</span><span class="op" id="8104462">,</span>&nbsp;<span class="ident" id="8104464">tt</span><span class="op" id="8104466">.</span><span class="ident" id="8104467">id</span><span class="op" id="8104469">.</span><span class="builtintype" id="8104470">string</span><span class="op" id="8104476">(</span><span class="op" id="8104477">)</span><span class="op" id="8104478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104486">if</span>&nbsp;<span class="ident" id="8104489">tt</span><span class="op" id="8104491">.</span><span class="ident" id="8104492">id</span>&nbsp;<span class="op" id="8104495">==</span>&nbsp;<span class="num" id="8104498">0</span>&nbsp;<span class="op" id="8104500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104505">t</span><span class="op" id="8104506">.</span><span class="ident" id="8104507">Errorf</span><span class="op" id="8104513">(</span><span class="string" id="8104514">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8104533">,</span>&nbsp;<span class="ident" id="8104535">tt</span><span class="op" id="8104537">.</span><span class="ident" id="8104538">str</span><span class="op" id="8104541">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104548">}</span><br>
<span class="lineno"></span><span class="op" id="8104550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8104553">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8104621">func</span>&nbsp;<span class="ident" id="8104626">TestReregistration</span><span class="op" id="8104644">(</span><span class="ident" id="8104645">t</span>&nbsp;<span class="op" id="8104647">*</span><span class="ident" id="8104648">testing</span><span class="op" id="8104655">.</span><span class="ident" id="8104656">T</span><span class="op" id="8104657">)</span>&nbsp;<span class="op" id="8104659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104662">newtyp</span>&nbsp;<span class="op" id="8104669">:=</span>&nbsp;<span class="ident" id="8104672">getTypeUnlocked</span><span class="op" id="8104687">(</span><span class="string" id="8104688">&#34;int&#34;</span><span class="op" id="8104693">,</span>&nbsp;<span class="ident" id="8104695">reflect</span><span class="op" id="8104702">.</span><span class="ident" id="8104703">TypeOf</span><span class="op" id="8104709">(</span><span class="builtintype" id="8104710">int</span><span class="op" id="8104713">(</span><span class="num" id="8104714">0</span><span class="op" id="8104715">)</span><span class="op" id="8104716">)</span><span class="op" id="8104717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104720">if</span>&nbsp;<span class="ident" id="8104723">newtyp</span>&nbsp;<span class="op" id="8104730">!=</span>&nbsp;<span class="ident" id="8104733">tInt</span><span class="op" id="8104737">.</span><span class="ident" id="8104738">gobType</span><span class="op" id="8104745">(</span><span class="op" id="8104746">)</span>&nbsp;<span class="op" id="8104748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104752">t</span><span class="op" id="8104753">.</span><span class="ident" id="8104754">Errorf</span><span class="op" id="8104760">(</span><span class="string" id="8104761">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8104796">,</span>&nbsp;<span class="ident" id="8104798">newtyp</span><span class="op" id="8104804">.</span><span class="builtintype" id="8104805">string</span><span class="op" id="8104811">(</span><span class="op" id="8104812">)</span><span class="op" id="8104813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104816">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104819">newtyp</span>&nbsp;<span class="op" id="8104826">=</span>&nbsp;<span class="ident" id="8104828">getTypeUnlocked</span><span class="op" id="8104843">(</span><span class="string" id="8104844">&#34;uint&#34;</span><span class="op" id="8104850">,</span>&nbsp;<span class="ident" id="8104852">reflect</span><span class="op" id="8104859">.</span><span class="ident" id="8104860">TypeOf</span><span class="op" id="8104866">(</span><span class="builtintype" id="8104867">uint</span><span class="op" id="8104871">(</span><span class="num" id="8104872">0</span><span class="op" id="8104873">)</span><span class="op" id="8104874">)</span><span class="op" id="8104875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8104878">if</span>&nbsp;<span class="ident" id="8104881">newtyp</span>&nbsp;<span class="op" id="8104888">!=</span>&nbsp;<span class="ident" id="8104891">tUint</span><span class="op" id="8104896">.</span><span class="ident" id="8104897">gobType</span><span class="op" id="8104904">(</span><span class="op" id="8104905">)</span>&nbsp;<span class="op" id="8104907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104911">t</span><span class="op" id="8104912">.</span><span class="ident" id="8104913">Errorf</span><span class="op" id="8104919">(</span><span class="string" id="8104920">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8104955">,</span>&nbsp;<span class="ident" id="8104957">newtyp</span><span class="op" id="8104963">.</span><span class="builtintype" id="8104964">string</span><span class="op" id="8104970">(</span><span class="op" id="8104971">)</span><span class="op" id="8104972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8104975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8104978">newtyp</span>&nbsp;<span class="op" id="8104985">=</span>&nbsp;<span class="ident" id="8104987">getTypeUnlocked</span><span class="op" id="8105002">(</span><span class="string" id="8105003">&#34;string&#34;</span><span class="op" id="8105011">,</span>&nbsp;<span class="ident" id="8105013">reflect</span><span class="op" id="8105020">.</span><span class="ident" id="8105021">TypeOf</span><span class="op" id="8105027">(</span><span class="string" id="8105028">&#34;hello&#34;</span><span class="op" id="8105035">)</span><span class="op" id="8105036">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105039">if</span>&nbsp;<span class="ident" id="8105042">newtyp</span>&nbsp;<span class="op" id="8105049">!=</span>&nbsp;<span class="ident" id="8105052">tString</span><span class="op" id="8105059">.</span><span class="ident" id="8105060">gobType</span><span class="op" id="8105067">(</span><span class="op" id="8105068">)</span>&nbsp;<span class="op" id="8105070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105074">t</span><span class="op" id="8105075">.</span><span class="ident" id="8105076">Errorf</span><span class="op" id="8105082">(</span><span class="string" id="8105083">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8105118">,</span>&nbsp;<span class="ident" id="8105120">newtyp</span><span class="op" id="8105126">.</span><span class="builtintype" id="8105127">string</span><span class="op" id="8105133">(</span><span class="op" id="8105134">)</span><span class="op" id="8105135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105138">}</span><br>
<span class="lineno"></span><span class="op" id="8105140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8105143">func</span>&nbsp;<span class="ident" id="8105148">TestArrayType</span><span class="op" id="8105161">(</span><span class="ident" id="8105162">t</span>&nbsp;<span class="op" id="8105164">*</span><span class="ident" id="8105165">testing</span><span class="op" id="8105172">.</span><span class="ident" id="8105173">T</span><span class="op" id="8105174">)</span>&nbsp;<span class="op" id="8105176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105179">var</span>&nbsp;<span class="ident" id="8105183">a3</span>&nbsp;<span class="op" id="8105186">[</span><span class="num" id="8105187">3</span><span class="op" id="8105188">]</span><span class="builtintype" id="8105189">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105194">a3int</span>&nbsp;<span class="op" id="8105200">:=</span>&nbsp;<span class="ident" id="8105203">getTypeUnlocked</span><span class="op" id="8105218">(</span><span class="string" id="8105219">&#34;foo&#34;</span><span class="op" id="8105224">,</span>&nbsp;<span class="ident" id="8105226">reflect</span><span class="op" id="8105233">.</span><span class="ident" id="8105234">TypeOf</span><span class="op" id="8105240">(</span><span class="ident" id="8105241">a3</span><span class="op" id="8105243">)</span><span class="op" id="8105244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105247">newa3int</span>&nbsp;<span class="op" id="8105256">:=</span>&nbsp;<span class="ident" id="8105259">getTypeUnlocked</span><span class="op" id="8105274">(</span><span class="string" id="8105275">&#34;bar&#34;</span><span class="op" id="8105280">,</span>&nbsp;<span class="ident" id="8105282">reflect</span><span class="op" id="8105289">.</span><span class="ident" id="8105290">TypeOf</span><span class="op" id="8105296">(</span><span class="ident" id="8105297">a3</span><span class="op" id="8105299">)</span><span class="op" id="8105300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105303">if</span>&nbsp;<span class="ident" id="8105306">a3int</span>&nbsp;<span class="op" id="8105312">!=</span>&nbsp;<span class="ident" id="8105315">newa3int</span>&nbsp;<span class="op" id="8105324">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105328">t</span><span class="op" id="8105329">.</span><span class="ident" id="8105330">Errorf</span><span class="op" id="8105336">(</span><span class="string" id="8105337">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8105385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105391">var</span>&nbsp;<span class="ident" id="8105395">a4</span>&nbsp;<span class="op" id="8105398">[</span><span class="num" id="8105399">4</span><span class="op" id="8105400">]</span><span class="builtintype" id="8105401">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105406">a4int</span>&nbsp;<span class="op" id="8105412">:=</span>&nbsp;<span class="ident" id="8105415">getTypeUnlocked</span><span class="op" id="8105430">(</span><span class="string" id="8105431">&#34;goo&#34;</span><span class="op" id="8105436">,</span>&nbsp;<span class="ident" id="8105438">reflect</span><span class="op" id="8105445">.</span><span class="ident" id="8105446">TypeOf</span><span class="op" id="8105452">(</span><span class="ident" id="8105453">a4</span><span class="op" id="8105455">)</span><span class="op" id="8105456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105459">if</span>&nbsp;<span class="ident" id="8105462">a3int</span>&nbsp;<span class="op" id="8105468">==</span>&nbsp;<span class="ident" id="8105471">a4int</span>&nbsp;<span class="op" id="8105477">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105481">t</span><span class="op" id="8105482">.</span><span class="ident" id="8105483">Errorf</span><span class="op" id="8105489">(</span><span class="string" id="8105490">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8105542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105548">var</span>&nbsp;<span class="ident" id="8105552">b3</span>&nbsp;<span class="op" id="8105555">[</span><span class="num" id="8105556">3</span><span class="op" id="8105557">]</span><span class="builtintype" id="8105558">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105564">a3bool</span>&nbsp;<span class="op" id="8105571">:=</span>&nbsp;<span class="ident" id="8105574">getTypeUnlocked</span><span class="op" id="8105589">(</span><span class="string" id="8105590">&#34;&#34;</span><span class="op" id="8105592">,</span>&nbsp;<span class="ident" id="8105594">reflect</span><span class="op" id="8105601">.</span><span class="ident" id="8105602">TypeOf</span><span class="op" id="8105608">(</span><span class="ident" id="8105609">b3</span><span class="op" id="8105611">)</span><span class="op" id="8105612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105615">if</span>&nbsp;<span class="ident" id="8105618">a3int</span>&nbsp;<span class="op" id="8105624">==</span>&nbsp;<span class="ident" id="8105627">a3bool</span>&nbsp;<span class="op" id="8105634">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105638">t</span><span class="op" id="8105639">.</span><span class="ident" id="8105640">Errorf</span><span class="op" id="8105646">(</span><span class="string" id="8105647">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8105700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105706">str</span>&nbsp;<span class="op" id="8105710">:=</span>&nbsp;<span class="ident" id="8105713">a3bool</span><span class="op" id="8105719">.</span><span class="builtintype" id="8105720">string</span><span class="op" id="8105726">(</span><span class="op" id="8105727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105730">expected</span>&nbsp;<span class="op" id="8105739">:=</span>&nbsp;<span class="string" id="8105742">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105753">if</span>&nbsp;<span class="ident" id="8105756">str</span>&nbsp;<span class="op" id="8105760">!=</span>&nbsp;<span class="ident" id="8105763">expected</span>&nbsp;<span class="op" id="8105772">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105776">t</span><span class="op" id="8105777">.</span><span class="ident" id="8105778">Errorf</span><span class="op" id="8105784">(</span><span class="string" id="8105785">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8105819">,</span>&nbsp;<span class="ident" id="8105821">str</span><span class="op" id="8105824">,</span>&nbsp;<span class="ident" id="8105826">expected</span><span class="op" id="8105834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105837">}</span><br>
<span class="lineno"></span><span class="op" id="8105839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8105842">func</span>&nbsp;<span class="ident" id="8105847">TestSliceType</span><span class="op" id="8105860">(</span><span class="ident" id="8105861">t</span>&nbsp;<span class="op" id="8105863">*</span><span class="ident" id="8105864">testing</span><span class="op" id="8105871">.</span><span class="ident" id="8105872">T</span><span class="op" id="8105873">)</span>&nbsp;<span class="op" id="8105875">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105878">var</span>&nbsp;<span class="ident" id="8105882">s</span>&nbsp;<span class="op" id="8105884">[</span><span class="op" id="8105885">]</span><span class="builtintype" id="8105886">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105891">sint</span>&nbsp;<span class="op" id="8105896">:=</span>&nbsp;<span class="ident" id="8105899">getTypeUnlocked</span><span class="op" id="8105914">(</span><span class="string" id="8105915">&#34;slice&#34;</span><span class="op" id="8105922">,</span>&nbsp;<span class="ident" id="8105924">reflect</span><span class="op" id="8105931">.</span><span class="ident" id="8105932">TypeOf</span><span class="op" id="8105938">(</span><span class="ident" id="8105939">s</span><span class="op" id="8105940">)</span><span class="op" id="8105941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8105944">var</span>&nbsp;<span class="ident" id="8105948">news</span>&nbsp;<span class="op" id="8105953">[</span><span class="op" id="8105954">]</span><span class="builtintype" id="8105955">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105960">newsint</span>&nbsp;<span class="op" id="8105968">:=</span>&nbsp;<span class="ident" id="8105971">getTypeUnlocked</span><span class="op" id="8105986">(</span><span class="string" id="8105987">&#34;slice1&#34;</span><span class="op" id="8105995">,</span>&nbsp;<span class="ident" id="8105997">reflect</span><span class="op" id="8106004">.</span><span class="ident" id="8106005">TypeOf</span><span class="op" id="8106011">(</span><span class="ident" id="8106012">news</span><span class="op" id="8106016">)</span><span class="op" id="8106017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106020">if</span>&nbsp;<span class="ident" id="8106023">sint</span>&nbsp;<span class="op" id="8106028">!=</span>&nbsp;<span class="ident" id="8106031">newsint</span>&nbsp;<span class="op" id="8106039">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106043">t</span><span class="op" id="8106044">.</span><span class="ident" id="8106045">Errorf</span><span class="op" id="8106051">(</span><span class="string" id="8106052">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8106099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106105">var</span>&nbsp;<span class="ident" id="8106109">b</span>&nbsp;<span class="op" id="8106111">[</span><span class="op" id="8106112">]</span><span class="builtintype" id="8106113">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106119">sbool</span>&nbsp;<span class="op" id="8106125">:=</span>&nbsp;<span class="ident" id="8106128">getTypeUnlocked</span><span class="op" id="8106143">(</span><span class="string" id="8106144">&#34;&#34;</span><span class="op" id="8106146">,</span>&nbsp;<span class="ident" id="8106148">reflect</span><span class="op" id="8106155">.</span><span class="ident" id="8106156">TypeOf</span><span class="op" id="8106162">(</span><span class="ident" id="8106163">b</span><span class="op" id="8106164">)</span><span class="op" id="8106165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106168">if</span>&nbsp;<span class="ident" id="8106171">sbool</span>&nbsp;<span class="op" id="8106177">==</span>&nbsp;<span class="ident" id="8106180">sint</span>&nbsp;<span class="op" id="8106185">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106189">t</span><span class="op" id="8106190">.</span><span class="ident" id="8106191">Errorf</span><span class="op" id="8106197">(</span><span class="string" id="8106198">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8106249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106255">str</span>&nbsp;<span class="op" id="8106259">:=</span>&nbsp;<span class="ident" id="8106262">sbool</span><span class="op" id="8106267">.</span><span class="builtintype" id="8106268">string</span><span class="op" id="8106274">(</span><span class="op" id="8106275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106278">expected</span>&nbsp;<span class="op" id="8106287">:=</span>&nbsp;<span class="string" id="8106290">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106300">if</span>&nbsp;<span class="ident" id="8106303">str</span>&nbsp;<span class="op" id="8106307">!=</span>&nbsp;<span class="ident" id="8106310">expected</span>&nbsp;<span class="op" id="8106319">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106323">t</span><span class="op" id="8106324">.</span><span class="ident" id="8106325">Errorf</span><span class="op" id="8106331">(</span><span class="string" id="8106332">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8106366">,</span>&nbsp;<span class="ident" id="8106368">str</span><span class="op" id="8106371">,</span>&nbsp;<span class="ident" id="8106373">expected</span><span class="op" id="8106381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106384">}</span><br>
<span class="lineno"></span><span class="op" id="8106386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8106389">func</span>&nbsp;<span class="ident" id="8106394">TestMapType</span><span class="op" id="8106405">(</span><span class="ident" id="8106406">t</span>&nbsp;<span class="op" id="8106408">*</span><span class="ident" id="8106409">testing</span><span class="op" id="8106416">.</span><span class="ident" id="8106417">T</span><span class="op" id="8106418">)</span>&nbsp;<span class="op" id="8106420">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106423">var</span>&nbsp;<span class="ident" id="8106427">m</span>&nbsp;<span class="keyword" id="8106429">map</span><span class="op" id="8106432">[</span><span class="builtintype" id="8106433">string</span><span class="op" id="8106439">]</span><span class="builtintype" id="8106440">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106445">mapStringInt</span>&nbsp;<span class="op" id="8106458">:=</span>&nbsp;<span class="ident" id="8106461">getTypeUnlocked</span><span class="op" id="8106476">(</span><span class="string" id="8106477">&#34;map&#34;</span><span class="op" id="8106482">,</span>&nbsp;<span class="ident" id="8106484">reflect</span><span class="op" id="8106491">.</span><span class="ident" id="8106492">TypeOf</span><span class="op" id="8106498">(</span><span class="ident" id="8106499">m</span><span class="op" id="8106500">)</span><span class="op" id="8106501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106504">var</span>&nbsp;<span class="ident" id="8106508">newm</span>&nbsp;<span class="keyword" id="8106513">map</span><span class="op" id="8106516">[</span><span class="builtintype" id="8106517">string</span><span class="op" id="8106523">]</span><span class="builtintype" id="8106524">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106529">newMapStringInt</span>&nbsp;<span class="op" id="8106545">:=</span>&nbsp;<span class="ident" id="8106548">getTypeUnlocked</span><span class="op" id="8106563">(</span><span class="string" id="8106564">&#34;map1&#34;</span><span class="op" id="8106570">,</span>&nbsp;<span class="ident" id="8106572">reflect</span><span class="op" id="8106579">.</span><span class="ident" id="8106580">TypeOf</span><span class="op" id="8106586">(</span><span class="ident" id="8106587">newm</span><span class="op" id="8106591">)</span><span class="op" id="8106592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106595">if</span>&nbsp;<span class="ident" id="8106598">mapStringInt</span>&nbsp;<span class="op" id="8106611">!=</span>&nbsp;<span class="ident" id="8106614">newMapStringInt</span>&nbsp;<span class="op" id="8106630">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106634">t</span><span class="op" id="8106635">.</span><span class="ident" id="8106636">Errorf</span><span class="op" id="8106642">(</span><span class="string" id="8106643">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8106699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106705">var</span>&nbsp;<span class="ident" id="8106709">b</span>&nbsp;<span class="keyword" id="8106711">map</span><span class="op" id="8106714">[</span><span class="builtintype" id="8106715">string</span><span class="op" id="8106721">]</span><span class="builtintype" id="8106722">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106728">mapStringBool</span>&nbsp;<span class="op" id="8106742">:=</span>&nbsp;<span class="ident" id="8106745">getTypeUnlocked</span><span class="op" id="8106760">(</span><span class="string" id="8106761">&#34;&#34;</span><span class="op" id="8106763">,</span>&nbsp;<span class="ident" id="8106765">reflect</span><span class="op" id="8106772">.</span><span class="ident" id="8106773">TypeOf</span><span class="op" id="8106779">(</span><span class="ident" id="8106780">b</span><span class="op" id="8106781">)</span><span class="op" id="8106782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106785">if</span>&nbsp;<span class="ident" id="8106788">mapStringBool</span>&nbsp;<span class="op" id="8106802">==</span>&nbsp;<span class="ident" id="8106805">mapStringInt</span>&nbsp;<span class="op" id="8106818">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106822">t</span><span class="op" id="8106823">.</span><span class="ident" id="8106824">Errorf</span><span class="op" id="8106830">(</span><span class="string" id="8106831">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8106900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106906">str</span>&nbsp;<span class="op" id="8106910">:=</span>&nbsp;<span class="ident" id="8106913">mapStringBool</span><span class="op" id="8106926">.</span><span class="builtintype" id="8106927">string</span><span class="op" id="8106933">(</span><span class="op" id="8106934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106937">expected</span>&nbsp;<span class="op" id="8106946">:=</span>&nbsp;<span class="string" id="8106949">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8106968">if</span>&nbsp;<span class="ident" id="8106971">str</span>&nbsp;<span class="op" id="8106975">!=</span>&nbsp;<span class="ident" id="8106978">expected</span>&nbsp;<span class="op" id="8106987">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8106991">t</span><span class="op" id="8106992">.</span><span class="ident" id="8106993">Errorf</span><span class="op" id="8106999">(</span><span class="string" id="8107000">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8107032">,</span>&nbsp;<span class="ident" id="8107034">str</span><span class="op" id="8107037">,</span>&nbsp;<span class="ident" id="8107039">expected</span><span class="op" id="8107047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107050">}</span><br>
<span class="lineno"></span><span class="op" id="8107052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107055">type</span>&nbsp;<span class="ident" id="8107060">Bar</span>&nbsp;<span class="keyword" id="8107064">struct</span>&nbsp;<span class="op" id="8107071">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107074">X</span>&nbsp;<span class="builtintype" id="8107076">string</span><br>
<span class="lineno"></span><span class="op" id="8107083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8107086">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8107167">type</span>&nbsp;<span class="ident" id="8107172">Foo</span>&nbsp;<span class="keyword" id="8107176">struct</span>&nbsp;<span class="op" id="8107183">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107186">A</span>&nbsp;<span class="builtintype" id="8107188">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107193">B</span>&nbsp;<span class="builtintype" id="8107195">int32</span>&nbsp;<span class="comment" id="8107201">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107221">C</span>&nbsp;<span class="builtintype" id="8107223">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107231">D</span>&nbsp;<span class="op" id="8107233">[</span><span class="op" id="8107234">]</span><span class="builtintype" id="8107235">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107241">E</span>&nbsp;<span class="op" id="8107243">*</span><span class="builtintype" id="8107244">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8107255">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107279">F</span>&nbsp;<span class="op" id="8107281">*</span><span class="op" id="8107282">*</span><span class="op" id="8107283">*</span><span class="op" id="8107284">*</span><span class="builtintype" id="8107285">float64</span>&nbsp;<span class="comment" id="8107293">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107317">G</span>&nbsp;<span class="op" id="8107319">*</span><span class="ident" id="8107320">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107325">H</span>&nbsp;<span class="op" id="8107327">*</span><span class="ident" id="8107328">Bar</span>&nbsp;<span class="comment" id="8107332">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107387">I</span>&nbsp;<span class="op" id="8107389">*</span><span class="ident" id="8107390">Foo</span>&nbsp;<span class="comment" id="8107394">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8107414">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8107417">func</span>&nbsp;<span class="ident" id="8107422">TestStructType</span><span class="op" id="8107436">(</span><span class="ident" id="8107437">t</span>&nbsp;<span class="op" id="8107439">*</span><span class="ident" id="8107440">testing</span><span class="op" id="8107447">.</span><span class="ident" id="8107448">T</span><span class="op" id="8107449">)</span>&nbsp;<span class="op" id="8107451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107454">sstruct</span>&nbsp;<span class="op" id="8107462">:=</span>&nbsp;<span class="ident" id="8107465">getTypeUnlocked</span><span class="op" id="8107480">(</span><span class="string" id="8107481">&#34;Foo&#34;</span><span class="op" id="8107486">,</span>&nbsp;<span class="ident" id="8107488">reflect</span><span class="op" id="8107495">.</span><span class="ident" id="8107496">TypeOf</span><span class="op" id="8107502">(</span><span class="ident" id="8107503">Foo</span><span class="op" id="8107506">{</span><span class="op" id="8107507">}</span><span class="op" id="8107508">)</span><span class="op" id="8107509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107512">str</span>&nbsp;<span class="op" id="8107516">:=</span>&nbsp;<span class="ident" id="8107519">sstruct</span><span class="op" id="8107526">.</span><span class="builtintype" id="8107527">string</span><span class="op" id="8107533">(</span><span class="op" id="8107534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107537">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107594">expected</span>&nbsp;<span class="op" id="8107603">:=</span>&nbsp;<span class="string" id="8107606">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8107721">if</span>&nbsp;<span class="ident" id="8107724">str</span>&nbsp;<span class="op" id="8107728">!=</span>&nbsp;<span class="ident" id="8107731">expected</span>&nbsp;<span class="op" id="8107740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107744">t</span><span class="op" id="8107745">.</span><span class="ident" id="8107746">Errorf</span><span class="op" id="8107752">(</span><span class="string" id="8107753">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8107788">,</span>&nbsp;<span class="ident" id="8107790">str</span><span class="op" id="8107793">,</span>&nbsp;<span class="ident" id="8107795">expected</span><span class="op" id="8107803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107806">}</span><br>
<span class="lineno"></span><span class="op" id="8107808">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8107811">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8107888">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8107925">func</span>&nbsp;<span class="ident" id="8107930">TestRegistration</span><span class="op" id="8107946">(</span><span class="ident" id="8107947">t</span>&nbsp;<span class="op" id="8107949">*</span><span class="ident" id="8107950">testing</span><span class="op" id="8107957">.</span><span class="ident" id="8107958">T</span><span class="op" id="8107959">)</span>&nbsp;<span class="op" id="8107961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8107964">type</span>&nbsp;<span class="ident" id="8107969">T</span>&nbsp;<span class="keyword" id="8107971">struct</span><span class="op" id="8107977">{</span>&nbsp;<span class="ident" id="8107979">a</span>&nbsp;<span class="builtintype" id="8107981">int</span>&nbsp;<span class="op" id="8107985">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107988">Register</span><span class="op" id="8107996">(</span><span class="builtinfunc" id="8107997">new</span><span class="op" id="8108000">(</span><span class="ident" id="8108001">T</span><span class="op" id="8108002">)</span><span class="op" id="8108003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108006">Register</span><span class="op" id="8108014">(</span><span class="builtinfunc" id="8108015">new</span><span class="op" id="8108018">(</span><span class="ident" id="8108019">T</span><span class="op" id="8108020">)</span><span class="op" id="8108021">)</span><br>
<span class="lineno"></span><span class="op" id="8108023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8108026">type</span>&nbsp;<span class="ident" id="8108031">N1</span>&nbsp;<span class="keyword" id="8108034">struct</span><span class="op" id="8108040">{</span><span class="op" id="8108041">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8108043">type</span>&nbsp;<span class="ident" id="8108048">N2</span>&nbsp;<span class="keyword" id="8108051">struct</span><span class="op" id="8108057">{</span><span class="op" id="8108058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8108061">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8108097">func</span>&nbsp;<span class="ident" id="8108102">TestRegistrationNaming</span><span class="op" id="8108124">(</span><span class="ident" id="8108125">t</span>&nbsp;<span class="op" id="8108127">*</span><span class="ident" id="8108128">testing</span><span class="op" id="8108135">.</span><span class="ident" id="8108136">T</span><span class="op" id="8108137">)</span>&nbsp;<span class="op" id="8108139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108142">testCases</span>&nbsp;<span class="op" id="8108152">:=</span>&nbsp;<span class="op" id="8108155">[</span><span class="op" id="8108156">]</span><span class="keyword" id="8108157">struct</span>&nbsp;<span class="op" id="8108164">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108168">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108173">interface</span><span class="op" id="8108182">{</span><span class="op" id="8108183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108187">name</span>&nbsp;<span class="builtintype" id="8108192">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108200">}</span><span class="op" id="8108201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108205">{</span><span class="op" id="8108206">&amp;</span><span class="ident" id="8108207">N1</span><span class="op" id="8108209">{</span><span class="op" id="8108210">}</span><span class="op" id="8108211">,</span>&nbsp;<span class="string" id="8108213">&#34;*gob.N1&#34;</span><span class="op" id="8108222">}</span><span class="op" id="8108223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108227">{</span><span class="ident" id="8108228">N2</span><span class="op" id="8108230">{</span><span class="op" id="8108231">}</span><span class="op" id="8108232">,</span>&nbsp;<span class="string" id="8108234">&#34;encoding/gob.N2&#34;</span><span class="op" id="8108251">}</span><span class="op" id="8108252">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108259">for</span>&nbsp;<span class="ident" id="8108263">_</span><span class="op" id="8108264">,</span>&nbsp;<span class="ident" id="8108266">tc</span>&nbsp;<span class="op" id="8108269">:=</span>&nbsp;<span class="keyword" id="8108272">range</span>&nbsp;<span class="ident" id="8108278">testCases</span>&nbsp;<span class="op" id="8108288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108292">Register</span><span class="op" id="8108300">(</span><span class="ident" id="8108301">tc</span><span class="op" id="8108303">.</span><span class="ident" id="8108304">t</span><span class="op" id="8108305">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108310">tct</span>&nbsp;<span class="op" id="8108314">:=</span>&nbsp;<span class="ident" id="8108317">reflect</span><span class="op" id="8108324">.</span><span class="ident" id="8108325">TypeOf</span><span class="op" id="8108331">(</span><span class="ident" id="8108332">tc</span><span class="op" id="8108334">.</span><span class="ident" id="8108335">t</span><span class="op" id="8108336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108340">registerLock</span><span class="op" id="8108352">.</span><span class="ident" id="8108353">RLock</span><span class="op" id="8108358">(</span><span class="op" id="8108359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108363">ct</span>&nbsp;<span class="op" id="8108366">:=</span>&nbsp;<span class="ident" id="8108369">nameToConcreteType</span><span class="op" id="8108387">[</span><span class="ident" id="8108388">tc</span><span class="op" id="8108390">.</span><span class="ident" id="8108391">name</span><span class="op" id="8108395">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108399">registerLock</span><span class="op" id="8108411">.</span><span class="ident" id="8108412">RUnlock</span><span class="op" id="8108419">(</span><span class="op" id="8108420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108424">if</span>&nbsp;<span class="ident" id="8108427">ct</span>&nbsp;<span class="op" id="8108430">!=</span>&nbsp;<span class="ident" id="8108433">tct</span>&nbsp;<span class="op" id="8108437">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108442">t</span><span class="op" id="8108443">.</span><span class="ident" id="8108444">Errorf</span><span class="op" id="8108450">(</span><span class="string" id="8108451">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8108489">,</span>&nbsp;<span class="ident" id="8108491">tc</span><span class="op" id="8108493">.</span><span class="ident" id="8108494">name</span><span class="op" id="8108498">,</span>&nbsp;<span class="ident" id="8108500">ct</span><span class="op" id="8108502">,</span>&nbsp;<span class="ident" id="8108504">tct</span><span class="op" id="8108507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8108515">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108567">if</span>&nbsp;<span class="ident" id="8108570">tct</span><span class="op" id="8108573">.</span><span class="ident" id="8108574">Kind</span><span class="op" id="8108578">(</span><span class="op" id="8108579">)</span>&nbsp;<span class="op" id="8108581">==</span>&nbsp;<span class="ident" id="8108584">reflect</span><span class="op" id="8108591">.</span><span class="ident" id="8108592">Ptr</span>&nbsp;<span class="op" id="8108596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108601">tct</span>&nbsp;<span class="op" id="8108605">=</span>&nbsp;<span class="ident" id="8108607">tct</span><span class="op" id="8108610">.</span><span class="ident" id="8108611">Elem</span><span class="op" id="8108615">(</span><span class="op" id="8108616">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108624">if</span>&nbsp;<span class="ident" id="8108627">n</span>&nbsp;<span class="op" id="8108629">:=</span>&nbsp;<span class="ident" id="8108632">concreteTypeToName</span><span class="op" id="8108650">[</span><span class="ident" id="8108651">tct</span><span class="op" id="8108654">]</span><span class="op" id="8108655">;</span>&nbsp;<span class="ident" id="8108657">n</span>&nbsp;<span class="op" id="8108659">!=</span>&nbsp;<span class="ident" id="8108662">tc</span><span class="op" id="8108664">.</span><span class="ident" id="8108665">name</span>&nbsp;<span class="op" id="8108670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108675">t</span><span class="op" id="8108676">.</span><span class="ident" id="8108677">Errorf</span><span class="op" id="8108683">(</span><span class="string" id="8108684">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8108724">,</span>&nbsp;<span class="ident" id="8108726">tct</span><span class="op" id="8108729">,</span>&nbsp;<span class="ident" id="8108731">n</span><span class="op" id="8108732">,</span>&nbsp;<span class="ident" id="8108734">tc</span><span class="op" id="8108736">.</span><span class="ident" id="8108737">name</span><span class="op" id="8108741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108748">}</span><br>
<span class="lineno">195</span><span class="op" id="8108750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8108753">func</span>&nbsp;<span class="ident" id="8108758">TestStressParallel</span><span class="op" id="8108776">(</span><span class="ident" id="8108777">t</span>&nbsp;<span class="op" id="8108779">*</span><span class="ident" id="8108780">testing</span><span class="op" id="8108787">.</span><span class="ident" id="8108788">T</span><span class="op" id="8108789">)</span>&nbsp;<span class="op" id="8108791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108794">type</span>&nbsp;<span class="ident" id="8108799">T2</span>&nbsp;<span class="keyword" id="8108802">struct</span><span class="op" id="8108808">{</span>&nbsp;<span class="ident" id="8108810">A</span>&nbsp;<span class="builtintype" id="8108812">int</span>&nbsp;<span class="op" id="8108816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108819">c</span>&nbsp;<span class="op" id="8108821">:=</span>&nbsp;<span class="builtinfunc" id="8108824">make</span><span class="op" id="8108828">(</span><span class="keyword" id="8108829">chan</span>&nbsp;<span class="builtintype" id="8108834">bool</span><span class="op" id="8108838">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108841">const</span>&nbsp;<span class="ident" id="8108847">N</span>&nbsp;<span class="op" id="8108849">=</span>&nbsp;<span class="num" id="8108851">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108855">for</span>&nbsp;<span class="ident" id="8108859">i</span>&nbsp;<span class="op" id="8108861">:=</span>&nbsp;<span class="num" id="8108864">0</span><span class="op" id="8108865">;</span>&nbsp;<span class="ident" id="8108867">i</span>&nbsp;<span class="op" id="8108869">&lt;</span>&nbsp;<span class="ident" id="8108871">N</span><span class="op" id="8108872">;</span>&nbsp;<span class="ident" id="8108874">i</span><span class="op" id="8108875">++</span>&nbsp;<span class="op" id="8108878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108882">go</span>&nbsp;<span class="keyword" id="8108885">func</span><span class="op" id="8108889">(</span><span class="op" id="8108890">)</span>&nbsp;<span class="op" id="8108892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108897">p</span>&nbsp;<span class="op" id="8108899">:=</span>&nbsp;<span class="builtinfunc" id="8108902">new</span><span class="op" id="8108905">(</span><span class="ident" id="8108906">T2</span><span class="op" id="8108908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108913">Register</span><span class="op" id="8108921">(</span><span class="ident" id="8108922">p</span><span class="op" id="8108923">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108928">b</span>&nbsp;<span class="op" id="8108930">:=</span>&nbsp;<span class="builtinfunc" id="8108933">new</span><span class="op" id="8108936">(</span><span class="ident" id="8108937">bytes</span><span class="op" id="8108942">.</span><span class="ident" id="8108943">Buffer</span><span class="op" id="8108949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108954">enc</span>&nbsp;<span class="op" id="8108958">:=</span>&nbsp;<span class="ident" id="8108961">NewEncoder</span><span class="op" id="8108971">(</span><span class="ident" id="8108972">b</span><span class="op" id="8108973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108978">err</span>&nbsp;<span class="op" id="8108982">:=</span>&nbsp;<span class="ident" id="8108985">enc</span><span class="op" id="8108988">.</span><span class="ident" id="8108989">Encode</span><span class="op" id="8108995">(</span><span class="ident" id="8108996">p</span><span class="op" id="8108997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8109002">if</span>&nbsp;<span class="ident" id="8109005">err</span>&nbsp;<span class="op" id="8109009">!=</span>&nbsp;<span class="ident" id="8109012">nil</span>&nbsp;<span class="op" id="8109016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109022">t</span><span class="op" id="8109023">.</span><span class="ident" id="8109024">Error</span><span class="op" id="8109029">(</span><span class="string" id="8109030">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8109045">,</span>&nbsp;<span class="ident" id="8109047">err</span><span class="op" id="8109050">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109060">dec</span>&nbsp;<span class="op" id="8109064">:=</span>&nbsp;<span class="ident" id="8109067">NewDecoder</span><span class="op" id="8109077">(</span><span class="ident" id="8109078">b</span><span class="op" id="8109079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109084">err</span>&nbsp;<span class="op" id="8109088">=</span>&nbsp;<span class="ident" id="8109090">dec</span><span class="op" id="8109093">.</span><span class="ident" id="8109094">Decode</span><span class="op" id="8109100">(</span><span class="ident" id="8109101">p</span><span class="op" id="8109102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8109107">if</span>&nbsp;<span class="ident" id="8109110">err</span>&nbsp;<span class="op" id="8109114">!=</span>&nbsp;<span class="ident" id="8109117">nil</span>&nbsp;<span class="op" id="8109121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109127">t</span><span class="op" id="8109128">.</span><span class="ident" id="8109129">Error</span><span class="op" id="8109134">(</span><span class="string" id="8109135">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8109150">,</span>&nbsp;<span class="ident" id="8109152">err</span><span class="op" id="8109155">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109165">c</span>&nbsp;<span class="op" id="8109167">&lt;-</span>&nbsp;<span class="builtintype" id="8109170">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109177">}</span><span class="op" id="8109178">(</span><span class="op" id="8109179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8109185">for</span>&nbsp;<span class="ident" id="8109189">i</span>&nbsp;<span class="op" id="8109191">:=</span>&nbsp;<span class="num" id="8109194">0</span><span class="op" id="8109195">;</span>&nbsp;<span class="ident" id="8109197">i</span>&nbsp;<span class="op" id="8109199">&lt;</span>&nbsp;<span class="ident" id="8109201">N</span><span class="op" id="8109202">;</span>&nbsp;<span class="ident" id="8109204">i</span><span class="op" id="8109205">++</span>&nbsp;<span class="op" id="8109208">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109212">&lt;-</span><span class="ident" id="8109214">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109217">}</span><br>
<span class="lineno"></span><span class="op" id="8109219">}</span>
</div>
</body>
</html>
