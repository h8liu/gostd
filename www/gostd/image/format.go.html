<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5386980">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5387035">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5387089">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5387140">package</span>&nbsp;<span class="ident" id="5387148">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5387155">import</span>&nbsp;<span class="op" id="5387162">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5387165">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5387174">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5387184">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5387189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5387192">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5387260">var</span>&nbsp;<span class="ident" id="5387264">ErrFormat</span>&nbsp;<span class="op" id="5387274">=</span>&nbsp;<span class="ident" id="5387276">errors</span><span class="op" id="5387282">.</span><span class="ident" id="5387283">New</span><span class="op" id="5387286">(</span><span class="string" id="5387287">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5387310">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5387313">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5387390">type</span>&nbsp;<span class="ident" id="5387395">format</span>&nbsp;<span class="keyword" id="5387402">struct</span>&nbsp;<span class="op" id="5387409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5387412">name</span><span class="op" id="5387416">,</span>&nbsp;<span class="ident" id="5387418">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5387425">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5387433">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387446">func</span><span class="op" id="5387450">(</span><span class="ident" id="5387451">io</span><span class="op" id="5387453">.</span><span class="ident" id="5387454">Reader</span><span class="op" id="5387460">)</span>&nbsp;<span class="op" id="5387462">(</span><span class="ident" id="5387463">Image</span><span class="op" id="5387468">,</span>&nbsp;<span class="builtintype" id="5387470">error</span><span class="op" id="5387475">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5387478">decodeConfig</span>&nbsp;<span class="keyword" id="5387491">func</span><span class="op" id="5387495">(</span><span class="ident" id="5387496">io</span><span class="op" id="5387498">.</span><span class="ident" id="5387499">Reader</span><span class="op" id="5387505">)</span>&nbsp;<span class="op" id="5387507">(</span><span class="ident" id="5387508">Config</span><span class="op" id="5387514">,</span>&nbsp;<span class="builtintype" id="5387516">error</span><span class="op" id="5387521">)</span><br>
<span class="lineno"></span><span class="op" id="5387523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5387526">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5387572">var</span>&nbsp;<span class="ident" id="5387576">formats</span>&nbsp;<span class="op" id="5387584">[</span><span class="op" id="5387585">]</span><span class="ident" id="5387586">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5387594">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5387657">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5387714">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5387792">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5387858">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5387916">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5387985">func</span>&nbsp;<span class="ident" id="5387990">RegisterFormat</span><span class="op" id="5388004">(</span><span class="ident" id="5388005">name</span><span class="op" id="5388009">,</span>&nbsp;<span class="ident" id="5388011">magic</span>&nbsp;<span class="builtintype" id="5388017">string</span><span class="op" id="5388023">,</span>&nbsp;<span class="ident" id="5388025">decode</span>&nbsp;<span class="keyword" id="5388032">func</span><span class="op" id="5388036">(</span><span class="ident" id="5388037">io</span><span class="op" id="5388039">.</span><span class="ident" id="5388040">Reader</span><span class="op" id="5388046">)</span>&nbsp;<span class="op" id="5388048">(</span><span class="ident" id="5388049">Image</span><span class="op" id="5388054">,</span>&nbsp;<span class="builtintype" id="5388056">error</span><span class="op" id="5388061">)</span><span class="op" id="5388062">,</span>&nbsp;<span class="ident" id="5388064">decodeConfig</span>&nbsp;<span class="keyword" id="5388077">func</span><span class="op" id="5388081">(</span><span class="ident" id="5388082">io</span><span class="op" id="5388084">.</span><span class="ident" id="5388085">Reader</span><span class="op" id="5388091">)</span>&nbsp;<span class="op" id="5388093">(</span><span class="ident" id="5388094">Config</span><span class="op" id="5388100">,</span>&nbsp;<span class="builtintype" id="5388102">error</span><span class="op" id="5388107">)</span><span class="op" id="5388108">)</span>&nbsp;<span class="op" id="5388110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5388113">formats</span>&nbsp;<span class="op" id="5388121">=</span>&nbsp;<span class="builtinfunc" id="5388123">append</span><span class="op" id="5388129">(</span><span class="ident" id="5388130">formats</span><span class="op" id="5388137">,</span>&nbsp;<span class="ident" id="5388139">format</span><span class="op" id="5388145">{</span><span class="ident" id="5388146">name</span><span class="op" id="5388150">,</span>&nbsp;<span class="ident" id="5388152">magic</span><span class="op" id="5388157">,</span>&nbsp;<span class="ident" id="5388159">decode</span><span class="op" id="5388165">,</span>&nbsp;<span class="ident" id="5388167">decodeConfig</span><span class="op" id="5388179">}</span><span class="op" id="5388180">)</span><br>
<span class="lineno"></span><span class="op" id="5388182">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5388185">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5388239">type</span>&nbsp;<span class="ident" id="5388244">reader</span>&nbsp;<span class="keyword" id="5388251">interface</span>&nbsp;<span class="op" id="5388261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5388264">io</span><span class="op" id="5388266">.</span><span class="ident" id="5388267">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5388275">Peek</span><span class="op" id="5388279">(</span><span class="builtintype" id="5388280">int</span><span class="op" id="5388283">)</span>&nbsp;<span class="op" id="5388285">(</span><span class="op" id="5388286">[</span><span class="op" id="5388287">]</span><span class="builtintype" id="5388288">byte</span><span class="op" id="5388292">,</span>&nbsp;<span class="builtintype" id="5388294">error</span><span class="op" id="5388299">)</span><br>
<span class="lineno">40</span><span class="op" id="5388301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5388304">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5388351">func</span>&nbsp;<span class="ident" id="5388356">asReader</span><span class="op" id="5388364">(</span><span class="ident" id="5388365">r</span>&nbsp;<span class="ident" id="5388367">io</span><span class="op" id="5388369">.</span><span class="ident" id="5388370">Reader</span><span class="op" id="5388376">)</span>&nbsp;<span class="ident" id="5388378">reader</span>&nbsp;<span class="op" id="5388385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388388">if</span>&nbsp;<span class="ident" id="5388391">rr</span><span class="op" id="5388393">,</span>&nbsp;<span class="ident" id="5388395">ok</span>&nbsp;<span class="op" id="5388398">:=</span>&nbsp;<span class="ident" id="5388401">r</span><span class="op" id="5388402">.</span><span class="op" id="5388403">(</span><span class="ident" id="5388404">reader</span><span class="op" id="5388410">)</span><span class="op" id="5388411">;</span>&nbsp;<span class="ident" id="5388413">ok</span>&nbsp;<span class="op" id="5388416">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388420">return</span>&nbsp;<span class="ident" id="5388427">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5388431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388434">return</span>&nbsp;<span class="ident" id="5388441">bufio</span><span class="op" id="5388446">.</span><span class="ident" id="5388447">NewReader</span><span class="op" id="5388456">(</span><span class="ident" id="5388457">r</span><span class="op" id="5388458">)</span><br>
<span class="lineno"></span><span class="op" id="5388460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5388463">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5388538">func</span>&nbsp;<span class="ident" id="5388543">match</span><span class="op" id="5388548">(</span><span class="ident" id="5388549">magic</span>&nbsp;<span class="builtintype" id="5388555">string</span><span class="op" id="5388561">,</span>&nbsp;<span class="ident" id="5388563">b</span>&nbsp;<span class="op" id="5388565">[</span><span class="op" id="5388566">]</span><span class="builtintype" id="5388567">byte</span><span class="op" id="5388571">)</span>&nbsp;<span class="builtintype" id="5388573">bool</span>&nbsp;<span class="op" id="5388578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388581">if</span>&nbsp;<span class="builtinfunc" id="5388584">len</span><span class="op" id="5388587">(</span><span class="ident" id="5388588">magic</span><span class="op" id="5388593">)</span>&nbsp;<span class="op" id="5388595">!=</span>&nbsp;<span class="builtinfunc" id="5388598">len</span><span class="op" id="5388601">(</span><span class="ident" id="5388602">b</span><span class="op" id="5388603">)</span>&nbsp;<span class="op" id="5388605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388609">return</span>&nbsp;<span class="builtintype" id="5388616">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5388623">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388626">for</span>&nbsp;<span class="ident" id="5388630">i</span><span class="op" id="5388631">,</span>&nbsp;<span class="ident" id="5388633">c</span>&nbsp;<span class="op" id="5388635">:=</span>&nbsp;<span class="keyword" id="5388638">range</span>&nbsp;<span class="ident" id="5388644">b</span>&nbsp;<span class="op" id="5388646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388650">if</span>&nbsp;<span class="ident" id="5388653">magic</span><span class="op" id="5388658">[</span><span class="ident" id="5388659">i</span><span class="op" id="5388660">]</span>&nbsp;<span class="op" id="5388662">!=</span>&nbsp;<span class="ident" id="5388665">c</span>&nbsp;<span class="op" id="5388667">&amp;&amp;</span>&nbsp;<span class="ident" id="5388670">magic</span><span class="op" id="5388675">[</span><span class="ident" id="5388676">i</span><span class="op" id="5388677">]</span>&nbsp;<span class="op" id="5388679">!=</span>&nbsp;<span class="string" id="5388682">&#39;?&#39;</span>&nbsp;<span class="op" id="5388686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388691">return</span>&nbsp;<span class="builtintype" id="5388698">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5388706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5388709">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388712">return</span>&nbsp;<span class="builtintype" id="5388719">true</span><br>
<span class="lineno"></span><span class="op" id="5388724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5388727">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5388771">func</span>&nbsp;<span class="ident" id="5388776">sniff</span><span class="op" id="5388781">(</span><span class="ident" id="5388782">r</span>&nbsp;<span class="ident" id="5388784">reader</span><span class="op" id="5388790">)</span>&nbsp;<span class="ident" id="5388792">format</span>&nbsp;<span class="op" id="5388799">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388802">for</span>&nbsp;<span class="ident" id="5388806">_</span><span class="op" id="5388807">,</span>&nbsp;<span class="ident" id="5388809">f</span>&nbsp;<span class="op" id="5388811">:=</span>&nbsp;<span class="keyword" id="5388814">range</span>&nbsp;<span class="ident" id="5388820">formats</span>&nbsp;<span class="op" id="5388828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5388832">b</span><span class="op" id="5388833">,</span>&nbsp;<span class="ident" id="5388835">err</span>&nbsp;<span class="op" id="5388839">:=</span>&nbsp;<span class="ident" id="5388842">r</span><span class="op" id="5388843">.</span><span class="ident" id="5388844">Peek</span><span class="op" id="5388848">(</span><span class="builtinfunc" id="5388849">len</span><span class="op" id="5388852">(</span><span class="ident" id="5388853">f</span><span class="op" id="5388854">.</span><span class="ident" id="5388855">magic</span><span class="op" id="5388860">)</span><span class="op" id="5388861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388865">if</span>&nbsp;<span class="ident" id="5388868">err</span>&nbsp;<span class="op" id="5388872">==</span>&nbsp;<span class="ident" id="5388875">nil</span>&nbsp;<span class="op" id="5388879">&amp;&amp;</span>&nbsp;<span class="ident" id="5388882">match</span><span class="op" id="5388887">(</span><span class="ident" id="5388888">f</span><span class="op" id="5388889">.</span><span class="ident" id="5388890">magic</span><span class="op" id="5388895">,</span>&nbsp;<span class="ident" id="5388897">b</span><span class="op" id="5388898">)</span>&nbsp;<span class="op" id="5388900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388905">return</span>&nbsp;<span class="ident" id="5388912">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5388916">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5388919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5388922">return</span>&nbsp;<span class="ident" id="5388929">format</span><span class="op" id="5388935">{</span><span class="op" id="5388936">}</span><br>
<span class="lineno"></span><span class="op" id="5388938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5388941">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5389014">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5389089">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5389164">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5389185">func</span>&nbsp;<span class="ident" id="5389190">Decode</span><span class="op" id="5389196">(</span><span class="ident" id="5389197">r</span>&nbsp;<span class="ident" id="5389199">io</span><span class="op" id="5389201">.</span><span class="ident" id="5389202">Reader</span><span class="op" id="5389208">)</span>&nbsp;<span class="op" id="5389210">(</span><span class="ident" id="5389211">Image</span><span class="op" id="5389216">,</span>&nbsp;<span class="builtintype" id="5389218">string</span><span class="op" id="5389224">,</span>&nbsp;<span class="builtintype" id="5389226">error</span><span class="op" id="5389231">)</span>&nbsp;<span class="op" id="5389233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5389236">rr</span>&nbsp;<span class="op" id="5389239">:=</span>&nbsp;<span class="ident" id="5389242">asReader</span><span class="op" id="5389250">(</span><span class="ident" id="5389251">r</span><span class="op" id="5389252">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5389255">f</span>&nbsp;<span class="op" id="5389257">:=</span>&nbsp;<span class="ident" id="5389260">sniff</span><span class="op" id="5389265">(</span><span class="ident" id="5389266">rr</span><span class="op" id="5389268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5389271">if</span>&nbsp;<span class="ident" id="5389274">f</span><span class="op" id="5389275">.</span><span class="ident" id="5389276">decode</span>&nbsp;<span class="op" id="5389283">==</span>&nbsp;<span class="ident" id="5389286">nil</span>&nbsp;<span class="op" id="5389290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5389294">return</span>&nbsp;<span class="ident" id="5389301">nil</span><span class="op" id="5389304">,</span>&nbsp;<span class="string" id="5389306">&#34;&#34;</span><span class="op" id="5389308">,</span>&nbsp;<span class="ident" id="5389310">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5389321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5389324">m</span><span class="op" id="5389325">,</span>&nbsp;<span class="ident" id="5389327">err</span>&nbsp;<span class="op" id="5389331">:=</span>&nbsp;<span class="ident" id="5389334">f</span><span class="op" id="5389335">.</span><span class="ident" id="5389336">decode</span><span class="op" id="5389342">(</span><span class="ident" id="5389343">rr</span><span class="op" id="5389345">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5389348">return</span>&nbsp;<span class="ident" id="5389355">m</span><span class="op" id="5389356">,</span>&nbsp;<span class="ident" id="5389358">f</span><span class="op" id="5389359">.</span><span class="ident" id="5389360">name</span><span class="op" id="5389364">,</span>&nbsp;<span class="ident" id="5389366">err</span><br>
<span class="lineno"></span><span class="op" id="5389370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5389373">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5389449">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5389528">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5389605">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5389656">func</span>&nbsp;<span class="ident" id="5389661">DecodeConfig</span><span class="op" id="5389673">(</span><span class="ident" id="5389674">r</span>&nbsp;<span class="ident" id="5389676">io</span><span class="op" id="5389678">.</span><span class="ident" id="5389679">Reader</span><span class="op" id="5389685">)</span>&nbsp;<span class="op" id="5389687">(</span><span class="ident" id="5389688">Config</span><span class="op" id="5389694">,</span>&nbsp;<span class="builtintype" id="5389696">string</span><span class="op" id="5389702">,</span>&nbsp;<span class="builtintype" id="5389704">error</span><span class="op" id="5389709">)</span>&nbsp;<span class="op" id="5389711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5389714">rr</span>&nbsp;<span class="op" id="5389717">:=</span>&nbsp;<span class="ident" id="5389720">asReader</span><span class="op" id="5389728">(</span><span class="ident" id="5389729">r</span><span class="op" id="5389730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5389733">f</span>&nbsp;<span class="op" id="5389735">:=</span>&nbsp;<span class="ident" id="5389738">sniff</span><span class="op" id="5389743">(</span><span class="ident" id="5389744">rr</span><span class="op" id="5389746">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5389749">if</span>&nbsp;<span class="ident" id="5389752">f</span><span class="op" id="5389753">.</span><span class="ident" id="5389754">decodeConfig</span>&nbsp;<span class="op" id="5389767">==</span>&nbsp;<span class="ident" id="5389770">nil</span>&nbsp;<span class="op" id="5389774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5389778">return</span>&nbsp;<span class="ident" id="5389785">Config</span><span class="op" id="5389791">{</span><span class="op" id="5389792">}</span><span class="op" id="5389793">,</span>&nbsp;<span class="string" id="5389795">&#34;&#34;</span><span class="op" id="5389797">,</span>&nbsp;<span class="ident" id="5389799">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5389810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5389813">c</span><span class="op" id="5389814">,</span>&nbsp;<span class="ident" id="5389816">err</span>&nbsp;<span class="op" id="5389820">:=</span>&nbsp;<span class="ident" id="5389823">f</span><span class="op" id="5389824">.</span><span class="ident" id="5389825">decodeConfig</span><span class="op" id="5389837">(</span><span class="ident" id="5389838">rr</span><span class="op" id="5389840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5389843">return</span>&nbsp;<span class="ident" id="5389850">c</span><span class="op" id="5389851">,</span>&nbsp;<span class="ident" id="5389853">f</span><span class="op" id="5389854">.</span><span class="ident" id="5389855">name</span><span class="op" id="5389859">,</span>&nbsp;<span class="ident" id="5389861">err</span><br>
<span class="lineno">100</span><span class="op" id="5389865">}</span>
</div>
</body>
</html>
