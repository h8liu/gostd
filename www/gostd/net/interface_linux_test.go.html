<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html" class="current">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6454419">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6454475">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6454529">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6454580">package</span>&nbsp;<span class="ident" id="6454588">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6454593">import</span>&nbsp;<span class="op" id="6454600">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454603">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454610">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454621">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6454631">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6454634">func</span>&nbsp;<span class="op" id="6454639">(</span><span class="ident" id="6454640">ti</span>&nbsp;<span class="op" id="6454643">*</span><span class="ident" id="6454644">testInterface</span><span class="op" id="6454657">)</span>&nbsp;<span class="ident" id="6454659">setBroadcast</span><span class="op" id="6454671">(</span><span class="ident" id="6454672">suffix</span>&nbsp;<span class="builtintype" id="6454679">int</span><span class="op" id="6454682">)</span>&nbsp;<span class="builtintype" id="6454684">error</span>&nbsp;<span class="op" id="6454690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454693">ti</span><span class="op" id="6454695">.</span><span class="ident" id="6454696">name</span>&nbsp;<span class="op" id="6454701">=</span>&nbsp;<span class="ident" id="6454703">fmt</span><span class="op" id="6454706">.</span><span class="ident" id="6454707">Sprintf</span><span class="op" id="6454714">(</span><span class="string" id="6454715">&#34;gotest%d&#34;</span><span class="op" id="6454725">,</span>&nbsp;<span class="ident" id="6454727">suffix</span><span class="op" id="6454733">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454736">xname</span><span class="op" id="6454741">,</span>&nbsp;<span class="ident" id="6454743">err</span>&nbsp;<span class="op" id="6454747">:=</span>&nbsp;<span class="ident" id="6454750">exec</span><span class="op" id="6454754">.</span><span class="ident" id="6454755">LookPath</span><span class="op" id="6454763">(</span><span class="string" id="6454764">&#34;ip&#34;</span><span class="op" id="6454768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454771">if</span>&nbsp;<span class="ident" id="6454774">err</span>&nbsp;<span class="op" id="6454778">!=</span>&nbsp;<span class="builtintype" id="6454781">nil</span>&nbsp;<span class="op" id="6454785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454789">return</span>&nbsp;<span class="ident" id="6454796">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454804">ti</span><span class="op" id="6454806">.</span><span class="ident" id="6454807">setupCmds</span>&nbsp;<span class="op" id="6454817">=</span>&nbsp;<span class="builtinfunc" id="6454819">append</span><span class="op" id="6454825">(</span><span class="ident" id="6454826">ti</span><span class="op" id="6454828">.</span><span class="ident" id="6454829">setupCmds</span><span class="op" id="6454838">,</span>&nbsp;<span class="op" id="6454840">&amp;</span><span class="ident" id="6454841">exec</span><span class="op" id="6454845">.</span><span class="ident" id="6454846">Cmd</span><span class="op" id="6454849">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454853">Path</span><span class="op" id="6454857">:</span>&nbsp;<span class="ident" id="6454859">xname</span><span class="op" id="6454864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454868">Args</span><span class="op" id="6454872">:</span>&nbsp;<span class="op" id="6454874">[</span><span class="op" id="6454875">]</span><span class="builtintype" id="6454876">string</span><span class="op" id="6454882">{</span><span class="string" id="6454883">&#34;ip&#34;</span><span class="op" id="6454887">,</span>&nbsp;<span class="string" id="6454889">&#34;link&#34;</span><span class="op" id="6454895">,</span>&nbsp;<span class="string" id="6454897">&#34;add&#34;</span><span class="op" id="6454902">,</span>&nbsp;<span class="ident" id="6454904">ti</span><span class="op" id="6454906">.</span><span class="ident" id="6454907">name</span><span class="op" id="6454911">,</span>&nbsp;<span class="string" id="6454913">&#34;type&#34;</span><span class="op" id="6454919">,</span>&nbsp;<span class="string" id="6454921">&#34;dummy&#34;</span><span class="op" id="6454928">}</span><span class="op" id="6454929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454932">}</span><span class="op" id="6454933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454936">ti</span><span class="op" id="6454938">.</span><span class="ident" id="6454939">teardownCmds</span>&nbsp;<span class="op" id="6454952">=</span>&nbsp;<span class="builtinfunc" id="6454954">append</span><span class="op" id="6454960">(</span><span class="ident" id="6454961">ti</span><span class="op" id="6454963">.</span><span class="ident" id="6454964">teardownCmds</span><span class="op" id="6454976">,</span>&nbsp;<span class="op" id="6454978">&amp;</span><span class="ident" id="6454979">exec</span><span class="op" id="6454983">.</span><span class="ident" id="6454984">Cmd</span><span class="op" id="6454987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454991">Path</span><span class="op" id="6454995">:</span>&nbsp;<span class="ident" id="6454997">xname</span><span class="op" id="6455002">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455006">Args</span><span class="op" id="6455010">:</span>&nbsp;<span class="op" id="6455012">[</span><span class="op" id="6455013">]</span><span class="builtintype" id="6455014">string</span><span class="op" id="6455020">{</span><span class="string" id="6455021">&#34;ip&#34;</span><span class="op" id="6455025">,</span>&nbsp;<span class="string" id="6455027">&#34;link&#34;</span><span class="op" id="6455033">,</span>&nbsp;<span class="string" id="6455035">&#34;delete&#34;</span><span class="op" id="6455043">,</span>&nbsp;<span class="ident" id="6455045">ti</span><span class="op" id="6455047">.</span><span class="ident" id="6455048">name</span><span class="op" id="6455052">,</span>&nbsp;<span class="string" id="6455054">&#34;type&#34;</span><span class="op" id="6455060">,</span>&nbsp;<span class="string" id="6455062">&#34;dummy&#34;</span><span class="op" id="6455069">}</span><span class="op" id="6455070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455073">}</span><span class="op" id="6455074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455077">return</span>&nbsp;<span class="builtintype" id="6455084">nil</span><br>
<span class="lineno"></span><span class="op" id="6455088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6455091">func</span>&nbsp;<span class="op" id="6455096">(</span><span class="ident" id="6455097">ti</span>&nbsp;<span class="op" id="6455100">*</span><span class="ident" id="6455101">testInterface</span><span class="op" id="6455114">)</span>&nbsp;<span class="ident" id="6455116">setPointToPoint</span><span class="op" id="6455131">(</span><span class="ident" id="6455132">suffix</span>&nbsp;<span class="builtintype" id="6455139">int</span><span class="op" id="6455142">,</span>&nbsp;<span class="ident" id="6455144">local</span><span class="op" id="6455149">,</span>&nbsp;<span class="ident" id="6455151">remote</span>&nbsp;<span class="builtintype" id="6455158">string</span><span class="op" id="6455164">)</span>&nbsp;<span class="builtintype" id="6455166">error</span>&nbsp;<span class="op" id="6455172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455175">ti</span><span class="op" id="6455177">.</span><span class="ident" id="6455178">name</span>&nbsp;<span class="op" id="6455183">=</span>&nbsp;<span class="ident" id="6455185">fmt</span><span class="op" id="6455188">.</span><span class="ident" id="6455189">Sprintf</span><span class="op" id="6455196">(</span><span class="string" id="6455197">&#34;gotest%d&#34;</span><span class="op" id="6455207">,</span>&nbsp;<span class="ident" id="6455209">suffix</span><span class="op" id="6455215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455218">ti</span><span class="op" id="6455220">.</span><span class="ident" id="6455221">local</span>&nbsp;<span class="op" id="6455227">=</span>&nbsp;<span class="ident" id="6455229">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455236">ti</span><span class="op" id="6455238">.</span><span class="ident" id="6455239">remote</span>&nbsp;<span class="op" id="6455246">=</span>&nbsp;<span class="ident" id="6455248">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455256">xname</span><span class="op" id="6455261">,</span>&nbsp;<span class="ident" id="6455263">err</span>&nbsp;<span class="op" id="6455267">:=</span>&nbsp;<span class="ident" id="6455270">exec</span><span class="op" id="6455274">.</span><span class="ident" id="6455275">LookPath</span><span class="op" id="6455283">(</span><span class="string" id="6455284">&#34;ip&#34;</span><span class="op" id="6455288">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455291">if</span>&nbsp;<span class="ident" id="6455294">err</span>&nbsp;<span class="op" id="6455298">!=</span>&nbsp;<span class="builtintype" id="6455301">nil</span>&nbsp;<span class="op" id="6455305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455309">return</span>&nbsp;<span class="ident" id="6455316">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455324">ti</span><span class="op" id="6455326">.</span><span class="ident" id="6455327">setupCmds</span>&nbsp;<span class="op" id="6455337">=</span>&nbsp;<span class="builtinfunc" id="6455339">append</span><span class="op" id="6455345">(</span><span class="ident" id="6455346">ti</span><span class="op" id="6455348">.</span><span class="ident" id="6455349">setupCmds</span><span class="op" id="6455358">,</span>&nbsp;<span class="op" id="6455360">&amp;</span><span class="ident" id="6455361">exec</span><span class="op" id="6455365">.</span><span class="ident" id="6455366">Cmd</span><span class="op" id="6455369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455373">Path</span><span class="op" id="6455377">:</span>&nbsp;<span class="ident" id="6455379">xname</span><span class="op" id="6455384">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455388">Args</span><span class="op" id="6455392">:</span>&nbsp;<span class="op" id="6455394">[</span><span class="op" id="6455395">]</span><span class="builtintype" id="6455396">string</span><span class="op" id="6455402">{</span><span class="string" id="6455403">&#34;ip&#34;</span><span class="op" id="6455407">,</span>&nbsp;<span class="string" id="6455409">&#34;tunnel&#34;</span><span class="op" id="6455417">,</span>&nbsp;<span class="string" id="6455419">&#34;add&#34;</span><span class="op" id="6455424">,</span>&nbsp;<span class="ident" id="6455426">ti</span><span class="op" id="6455428">.</span><span class="ident" id="6455429">name</span><span class="op" id="6455433">,</span>&nbsp;<span class="string" id="6455435">&#34;mode&#34;</span><span class="op" id="6455441">,</span>&nbsp;<span class="string" id="6455443">&#34;gre&#34;</span><span class="op" id="6455448">,</span>&nbsp;<span class="string" id="6455450">&#34;local&#34;</span><span class="op" id="6455457">,</span>&nbsp;<span class="ident" id="6455459">local</span><span class="op" id="6455464">,</span>&nbsp;<span class="string" id="6455466">&#34;remote&#34;</span><span class="op" id="6455474">,</span>&nbsp;<span class="ident" id="6455476">remote</span><span class="op" id="6455482">}</span><span class="op" id="6455483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455486">}</span><span class="op" id="6455487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455490">ti</span><span class="op" id="6455492">.</span><span class="ident" id="6455493">teardownCmds</span>&nbsp;<span class="op" id="6455506">=</span>&nbsp;<span class="builtinfunc" id="6455508">append</span><span class="op" id="6455514">(</span><span class="ident" id="6455515">ti</span><span class="op" id="6455517">.</span><span class="ident" id="6455518">teardownCmds</span><span class="op" id="6455530">,</span>&nbsp;<span class="op" id="6455532">&amp;</span><span class="ident" id="6455533">exec</span><span class="op" id="6455537">.</span><span class="ident" id="6455538">Cmd</span><span class="op" id="6455541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455545">Path</span><span class="op" id="6455549">:</span>&nbsp;<span class="ident" id="6455551">xname</span><span class="op" id="6455556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455560">Args</span><span class="op" id="6455564">:</span>&nbsp;<span class="op" id="6455566">[</span><span class="op" id="6455567">]</span><span class="builtintype" id="6455568">string</span><span class="op" id="6455574">{</span><span class="string" id="6455575">&#34;ip&#34;</span><span class="op" id="6455579">,</span>&nbsp;<span class="string" id="6455581">&#34;tunnel&#34;</span><span class="op" id="6455589">,</span>&nbsp;<span class="string" id="6455591">&#34;del&#34;</span><span class="op" id="6455596">,</span>&nbsp;<span class="ident" id="6455598">ti</span><span class="op" id="6455600">.</span><span class="ident" id="6455601">name</span><span class="op" id="6455605">,</span>&nbsp;<span class="string" id="6455607">&#34;mode&#34;</span><span class="op" id="6455613">,</span>&nbsp;<span class="string" id="6455615">&#34;gre&#34;</span><span class="op" id="6455620">,</span>&nbsp;<span class="string" id="6455622">&#34;local&#34;</span><span class="op" id="6455629">,</span>&nbsp;<span class="ident" id="6455631">local</span><span class="op" id="6455636">,</span>&nbsp;<span class="string" id="6455638">&#34;remote&#34;</span><span class="op" id="6455646">,</span>&nbsp;<span class="ident" id="6455648">remote</span><span class="op" id="6455654">}</span><span class="op" id="6455655">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455658">}</span><span class="op" id="6455659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455662">xname</span><span class="op" id="6455667">,</span>&nbsp;<span class="ident" id="6455669">err</span>&nbsp;<span class="op" id="6455673">=</span>&nbsp;<span class="ident" id="6455675">exec</span><span class="op" id="6455679">.</span><span class="ident" id="6455680">LookPath</span><span class="op" id="6455688">(</span><span class="string" id="6455689">&#34;ifconfig&#34;</span><span class="op" id="6455699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455702">if</span>&nbsp;<span class="ident" id="6455705">err</span>&nbsp;<span class="op" id="6455709">!=</span>&nbsp;<span class="builtintype" id="6455712">nil</span>&nbsp;<span class="op" id="6455716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455720">return</span>&nbsp;<span class="ident" id="6455727">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455732">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455735">ti</span><span class="op" id="6455737">.</span><span class="ident" id="6455738">setupCmds</span>&nbsp;<span class="op" id="6455748">=</span>&nbsp;<span class="builtinfunc" id="6455750">append</span><span class="op" id="6455756">(</span><span class="ident" id="6455757">ti</span><span class="op" id="6455759">.</span><span class="ident" id="6455760">setupCmds</span><span class="op" id="6455769">,</span>&nbsp;<span class="op" id="6455771">&amp;</span><span class="ident" id="6455772">exec</span><span class="op" id="6455776">.</span><span class="ident" id="6455777">Cmd</span><span class="op" id="6455780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455784">Path</span><span class="op" id="6455788">:</span>&nbsp;<span class="ident" id="6455790">xname</span><span class="op" id="6455795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455799">Args</span><span class="op" id="6455803">:</span>&nbsp;<span class="op" id="6455805">[</span><span class="op" id="6455806">]</span><span class="builtintype" id="6455807">string</span><span class="op" id="6455813">{</span><span class="string" id="6455814">&#34;ifconfig&#34;</span><span class="op" id="6455824">,</span>&nbsp;<span class="ident" id="6455826">ti</span><span class="op" id="6455828">.</span><span class="ident" id="6455829">name</span><span class="op" id="6455833">,</span>&nbsp;<span class="string" id="6455835">&#34;inet&#34;</span><span class="op" id="6455841">,</span>&nbsp;<span class="ident" id="6455843">local</span><span class="op" id="6455848">,</span>&nbsp;<span class="string" id="6455850">&#34;dstaddr&#34;</span><span class="op" id="6455859">,</span>&nbsp;<span class="ident" id="6455861">remote</span><span class="op" id="6455867">}</span><span class="op" id="6455868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455871">}</span><span class="op" id="6455872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455875">return</span>&nbsp;<span class="builtintype" id="6455882">nil</span><br>
<span class="lineno">55</span><span class="op" id="6455886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6455889">const</span>&nbsp;<span class="op" id="6455895">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455898">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6455919">=</span>&nbsp;<span class="num" id="6455921">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455925">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6455946">=</span>&nbsp;<span class="num" id="6455948">18</span><br>
<span class="lineno">60</span><span class="op" id="6455951">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6455954">var</span>&nbsp;<span class="op" id="6455958">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455961">igmpInterfaceTable</span>&nbsp;<span class="op" id="6455980">=</span>&nbsp;<span class="op" id="6455982">[</span><span class="op" id="6455983">]</span><span class="ident" id="6455984">Interface</span><span class="op" id="6455993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455997">{</span><span class="ident" id="6455998">Name</span><span class="op" id="6456002">:</span>&nbsp;<span class="string" id="6456004">&#34;lo&#34;</span><span class="op" id="6456008">}</span><span class="op" id="6456009">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456013">{</span><span class="ident" id="6456014">Name</span><span class="op" id="6456018">:</span>&nbsp;<span class="string" id="6456020">&#34;eth0&#34;</span><span class="op" id="6456026">}</span><span class="op" id="6456027">,</span>&nbsp;<span class="op" id="6456029">{</span><span class="ident" id="6456030">Name</span><span class="op" id="6456034">:</span>&nbsp;<span class="string" id="6456036">&#34;eth1&#34;</span><span class="op" id="6456042">}</span><span class="op" id="6456043">,</span>&nbsp;<span class="op" id="6456045">{</span><span class="ident" id="6456046">Name</span><span class="op" id="6456050">:</span>&nbsp;<span class="string" id="6456052">&#34;eth2&#34;</span><span class="op" id="6456058">}</span><span class="op" id="6456059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456063">{</span><span class="ident" id="6456064">Name</span><span class="op" id="6456068">:</span>&nbsp;<span class="string" id="6456070">&#34;eth0.100&#34;</span><span class="op" id="6456080">}</span><span class="op" id="6456081">,</span>&nbsp;<span class="op" id="6456083">{</span><span class="ident" id="6456084">Name</span><span class="op" id="6456088">:</span>&nbsp;<span class="string" id="6456090">&#34;eth0.101&#34;</span><span class="op" id="6456100">}</span><span class="op" id="6456101">,</span>&nbsp;<span class="op" id="6456103">{</span><span class="ident" id="6456104">Name</span><span class="op" id="6456108">:</span>&nbsp;<span class="string" id="6456110">&#34;eth0.102&#34;</span><span class="op" id="6456120">}</span><span class="op" id="6456121">,</span>&nbsp;<span class="op" id="6456123">{</span><span class="ident" id="6456124">Name</span><span class="op" id="6456128">:</span>&nbsp;<span class="string" id="6456130">&#34;eth0.103&#34;</span><span class="op" id="6456140">}</span><span class="op" id="6456141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456145">{</span><span class="ident" id="6456146">Name</span><span class="op" id="6456150">:</span>&nbsp;<span class="string" id="6456152">&#34;device1tap2&#34;</span><span class="op" id="6456165">}</span><span class="op" id="6456166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456172">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6456192">=</span>&nbsp;<span class="op" id="6456194">[</span><span class="op" id="6456195">]</span><span class="ident" id="6456196">Interface</span><span class="op" id="6456205">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456209">{</span><span class="ident" id="6456210">Name</span><span class="op" id="6456214">:</span>&nbsp;<span class="string" id="6456216">&#34;lo&#34;</span><span class="op" id="6456220">}</span><span class="op" id="6456221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456225">{</span><span class="ident" id="6456226">Name</span><span class="op" id="6456230">:</span>&nbsp;<span class="string" id="6456232">&#34;eth0&#34;</span><span class="op" id="6456238">}</span><span class="op" id="6456239">,</span>&nbsp;<span class="op" id="6456241">{</span><span class="ident" id="6456242">Name</span><span class="op" id="6456246">:</span>&nbsp;<span class="string" id="6456248">&#34;eth1&#34;</span><span class="op" id="6456254">}</span><span class="op" id="6456255">,</span>&nbsp;<span class="op" id="6456257">{</span><span class="ident" id="6456258">Name</span><span class="op" id="6456262">:</span>&nbsp;<span class="string" id="6456264">&#34;eth2&#34;</span><span class="op" id="6456270">}</span><span class="op" id="6456271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456275">{</span><span class="ident" id="6456276">Name</span><span class="op" id="6456280">:</span>&nbsp;<span class="string" id="6456282">&#34;eth0.100&#34;</span><span class="op" id="6456292">}</span><span class="op" id="6456293">,</span>&nbsp;<span class="op" id="6456295">{</span><span class="ident" id="6456296">Name</span><span class="op" id="6456300">:</span>&nbsp;<span class="string" id="6456302">&#34;eth0.101&#34;</span><span class="op" id="6456312">}</span><span class="op" id="6456313">,</span>&nbsp;<span class="op" id="6456315">{</span><span class="ident" id="6456316">Name</span><span class="op" id="6456320">:</span>&nbsp;<span class="string" id="6456322">&#34;eth0.102&#34;</span><span class="op" id="6456332">}</span><span class="op" id="6456333">,</span>&nbsp;<span class="op" id="6456335">{</span><span class="ident" id="6456336">Name</span><span class="op" id="6456340">:</span>&nbsp;<span class="string" id="6456342">&#34;eth0.103&#34;</span><span class="op" id="6456352">}</span><span class="op" id="6456353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456357">{</span><span class="ident" id="6456358">Name</span><span class="op" id="6456362">:</span>&nbsp;<span class="string" id="6456364">&#34;device1tap2&#34;</span><span class="op" id="6456377">}</span><span class="op" id="6456378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456382">{</span><span class="ident" id="6456383">Name</span><span class="op" id="6456387">:</span>&nbsp;<span class="string" id="6456389">&#34;pan0&#34;</span><span class="op" id="6456395">}</span><span class="op" id="6456396">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456399">}</span><br>
<span class="lineno"></span><span class="op" id="6456401">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6456404">func</span>&nbsp;<span class="ident" id="6456409">TestParseProcNet</span><span class="op" id="6456425">(</span><span class="ident" id="6456426">t</span>&nbsp;<span class="op" id="6456428">*</span><span class="ident" id="6456429">testing</span><span class="op" id="6456436">.</span><span class="ident" id="6456437">T</span><span class="op" id="6456438">)</span>&nbsp;<span class="op" id="6456440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456443">defer</span>&nbsp;<span class="keyword" id="6456449">func</span><span class="op" id="6456453">(</span><span class="op" id="6456454">)</span>&nbsp;<span class="op" id="6456456">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456460">if</span>&nbsp;<span class="ident" id="6456463">p</span>&nbsp;<span class="op" id="6456465">:=</span>&nbsp;<span class="builtinfunc" id="6456468">recover</span><span class="op" id="6456475">(</span><span class="op" id="6456476">)</span><span class="op" id="6456477">;</span>&nbsp;<span class="ident" id="6456479">p</span>&nbsp;<span class="op" id="6456481">!=</span>&nbsp;<span class="builtintype" id="6456484">nil</span>&nbsp;<span class="op" id="6456488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456493">t</span><span class="op" id="6456494">.</span><span class="ident" id="6456495">Fatalf</span><span class="op" id="6456501">(</span><span class="string" id="6456502">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6456554">,</span>&nbsp;<span class="ident" id="6456556">p</span><span class="op" id="6456557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456564">}</span><span class="op" id="6456565">(</span><span class="op" id="6456566">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456570">var</span>&nbsp;<span class="ident" id="6456574">ifmat4</span>&nbsp;<span class="op" id="6456581">[</span><span class="op" id="6456582">]</span><span class="ident" id="6456583">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456589">for</span>&nbsp;<span class="ident" id="6456593">_</span><span class="op" id="6456594">,</span>&nbsp;<span class="ident" id="6456596">ifi</span>&nbsp;<span class="op" id="6456600">:=</span>&nbsp;<span class="keyword" id="6456603">range</span>&nbsp;<span class="ident" id="6456609">igmpInterfaceTable</span>&nbsp;<span class="op" id="6456628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456632">ifmat</span>&nbsp;<span class="op" id="6456638">:=</span>&nbsp;<span class="ident" id="6456641">parseProcNetIGMP</span><span class="op" id="6456657">(</span><span class="string" id="6456658">&#34;testdata/igmp&#34;</span><span class="op" id="6456673">,</span>&nbsp;<span class="op" id="6456675">&amp;</span><span class="ident" id="6456676">ifi</span><span class="op" id="6456679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456683">ifmat4</span>&nbsp;<span class="op" id="6456690">=</span>&nbsp;<span class="builtinfunc" id="6456692">append</span><span class="op" id="6456698">(</span><span class="ident" id="6456699">ifmat4</span><span class="op" id="6456705">,</span>&nbsp;<span class="ident" id="6456707">ifmat</span><span class="op" id="6456712">...</span><span class="op" id="6456715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456718">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456721">if</span>&nbsp;<span class="builtinfunc" id="6456724">len</span><span class="op" id="6456727">(</span><span class="ident" id="6456728">ifmat4</span><span class="op" id="6456734">)</span>&nbsp;<span class="op" id="6456736">!=</span>&nbsp;<span class="ident" id="6456739">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6456760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456764">t</span><span class="op" id="6456765">.</span><span class="ident" id="6456766">Fatalf</span><span class="op" id="6456772">(</span><span class="string" id="6456773">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6456825">,</span>&nbsp;<span class="builtinfunc" id="6456827">len</span><span class="op" id="6456830">(</span><span class="ident" id="6456831">ifmat4</span><span class="op" id="6456837">)</span><span class="op" id="6456838">,</span>&nbsp;<span class="ident" id="6456840">numOfTestIPv4MCAddrs</span><span class="op" id="6456860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6456863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456867">var</span>&nbsp;<span class="ident" id="6456871">ifmat6</span>&nbsp;<span class="op" id="6456878">[</span><span class="op" id="6456879">]</span><span class="ident" id="6456880">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6456886">for</span>&nbsp;<span class="ident" id="6456890">_</span><span class="op" id="6456891">,</span>&nbsp;<span class="ident" id="6456893">ifi</span>&nbsp;<span class="op" id="6456897">:=</span>&nbsp;<span class="keyword" id="6456900">range</span>&nbsp;<span class="ident" id="6456906">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6456926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456930">ifmat</span>&nbsp;<span class="op" id="6456936">:=</span>&nbsp;<span class="ident" id="6456939">parseProcNetIGMP6</span><span class="op" id="6456956">(</span><span class="string" id="6456957">&#34;testdata/igmp6&#34;</span><span class="op" id="6456973">,</span>&nbsp;<span class="op" id="6456975">&amp;</span><span class="ident" id="6456976">ifi</span><span class="op" id="6456979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6456983">ifmat6</span>&nbsp;<span class="op" id="6456990">=</span>&nbsp;<span class="builtinfunc" id="6456992">append</span><span class="op" id="6456998">(</span><span class="ident" id="6456999">ifmat6</span><span class="op" id="6457005">,</span>&nbsp;<span class="ident" id="6457007">ifmat</span><span class="op" id="6457012">...</span><span class="op" id="6457015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6457018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6457021">if</span>&nbsp;<span class="builtinfunc" id="6457024">len</span><span class="op" id="6457027">(</span><span class="ident" id="6457028">ifmat6</span><span class="op" id="6457034">)</span>&nbsp;<span class="op" id="6457036">!=</span>&nbsp;<span class="ident" id="6457039">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6457060">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6457064">t</span><span class="op" id="6457065">.</span><span class="ident" id="6457066">Fatalf</span><span class="op" id="6457072">(</span><span class="string" id="6457073">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6457126">,</span>&nbsp;<span class="builtinfunc" id="6457128">len</span><span class="op" id="6457131">(</span><span class="ident" id="6457132">ifmat6</span><span class="op" id="6457138">)</span><span class="op" id="6457139">,</span>&nbsp;<span class="ident" id="6457141">numOfTestIPv6MCAddrs</span><span class="op" id="6457161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6457164">}</span><br>
<span class="lineno"></span><span class="op" id="6457166">}</span>
</div>
</body>
</html>
