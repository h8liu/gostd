<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8136960">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8137015">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8137069">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8137120">package</span>&nbsp;<span class="ident" id="8137128">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8137133">import</span>&nbsp;<span class="op" id="8137140">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8137143">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8137152">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8137158">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8137164">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8137175">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8137185">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8137188">type</span>&nbsp;<span class="ident" id="8137193">Bench</span>&nbsp;<span class="keyword" id="8137199">struct</span>&nbsp;<span class="op" id="8137206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137209">A</span>&nbsp;<span class="builtintype" id="8137211">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137216">B</span>&nbsp;<span class="builtintype" id="8137218">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137227">C</span>&nbsp;<span class="builtintype" id="8137229">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137237">D</span>&nbsp;<span class="op" id="8137239">[</span><span class="op" id="8137240">]</span><span class="builtintype" id="8137241">byte</span><br>
<span class="lineno">20</span><span class="op" id="8137246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8137249">func</span>&nbsp;<span class="ident" id="8137254">benchmarkEndToEnd</span><span class="op" id="8137271">(</span><span class="ident" id="8137272">b</span>&nbsp;<span class="op" id="8137274">*</span><span class="ident" id="8137275">testing</span><span class="op" id="8137282">.</span><span class="ident" id="8137283">B</span><span class="op" id="8137284">,</span>&nbsp;<span class="ident" id="8137286">ctor</span>&nbsp;<span class="keyword" id="8137291">func</span><span class="op" id="8137295">(</span><span class="op" id="8137296">)</span>&nbsp;<span class="keyword" id="8137298">interface</span><span class="op" id="8137307">{</span><span class="op" id="8137308">}</span><span class="op" id="8137309">,</span>&nbsp;<span class="ident" id="8137311">pipe</span>&nbsp;<span class="keyword" id="8137316">func</span><span class="op" id="8137320">(</span><span class="op" id="8137321">)</span>&nbsp;<span class="op" id="8137323">(</span><span class="ident" id="8137324">r</span>&nbsp;<span class="ident" id="8137326">io</span><span class="op" id="8137328">.</span><span class="ident" id="8137329">Reader</span><span class="op" id="8137335">,</span>&nbsp;<span class="ident" id="8137337">w</span>&nbsp;<span class="ident" id="8137339">io</span><span class="op" id="8137341">.</span><span class="ident" id="8137342">Writer</span><span class="op" id="8137348">,</span>&nbsp;<span class="ident" id="8137350">err</span>&nbsp;<span class="builtintype" id="8137354">error</span><span class="op" id="8137359">)</span><span class="op" id="8137360">)</span>&nbsp;<span class="op" id="8137362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137365">b</span><span class="op" id="8137366">.</span><span class="ident" id="8137367">RunParallel</span><span class="op" id="8137378">(</span><span class="keyword" id="8137379">func</span><span class="op" id="8137383">(</span><span class="ident" id="8137384">pb</span>&nbsp;<span class="op" id="8137387">*</span><span class="ident" id="8137388">testing</span><span class="op" id="8137395">.</span><span class="ident" id="8137396">PB</span><span class="op" id="8137398">)</span>&nbsp;<span class="op" id="8137400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137404">r</span><span class="op" id="8137405">,</span>&nbsp;<span class="ident" id="8137407">w</span><span class="op" id="8137408">,</span>&nbsp;<span class="ident" id="8137410">err</span>&nbsp;<span class="op" id="8137414">:=</span>&nbsp;<span class="ident" id="8137417">pipe</span><span class="op" id="8137421">(</span><span class="op" id="8137422">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8137426">if</span>&nbsp;<span class="ident" id="8137429">err</span>&nbsp;<span class="op" id="8137433">!=</span>&nbsp;<span class="ident" id="8137436">nil</span>&nbsp;<span class="op" id="8137440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137445">b</span><span class="op" id="8137446">.</span><span class="ident" id="8137447">Fatal</span><span class="op" id="8137452">(</span><span class="string" id="8137453">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="8137470">,</span>&nbsp;<span class="ident" id="8137472">err</span><span class="op" id="8137475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137483">v</span>&nbsp;<span class="op" id="8137485">:=</span>&nbsp;<span class="ident" id="8137488">ctor</span><span class="op" id="8137492">(</span><span class="op" id="8137493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137497">enc</span>&nbsp;<span class="op" id="8137501">:=</span>&nbsp;<span class="ident" id="8137504">NewEncoder</span><span class="op" id="8137514">(</span><span class="ident" id="8137515">w</span><span class="op" id="8137516">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137520">dec</span>&nbsp;<span class="op" id="8137524">:=</span>&nbsp;<span class="ident" id="8137527">NewDecoder</span><span class="op" id="8137537">(</span><span class="ident" id="8137538">r</span><span class="op" id="8137539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8137543">for</span>&nbsp;<span class="ident" id="8137547">pb</span><span class="op" id="8137549">.</span><span class="ident" id="8137550">Next</span><span class="op" id="8137554">(</span><span class="op" id="8137555">)</span>&nbsp;<span class="op" id="8137557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8137562">if</span>&nbsp;<span class="ident" id="8137565">err</span>&nbsp;<span class="op" id="8137569">:=</span>&nbsp;<span class="ident" id="8137572">enc</span><span class="op" id="8137575">.</span><span class="ident" id="8137576">Encode</span><span class="op" id="8137582">(</span><span class="ident" id="8137583">v</span><span class="op" id="8137584">)</span><span class="op" id="8137585">;</span>&nbsp;<span class="ident" id="8137587">err</span>&nbsp;<span class="op" id="8137591">!=</span>&nbsp;<span class="ident" id="8137594">nil</span>&nbsp;<span class="op" id="8137598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137604">b</span><span class="op" id="8137605">.</span><span class="ident" id="8137606">Fatal</span><span class="op" id="8137611">(</span><span class="string" id="8137612">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8137627">,</span>&nbsp;<span class="ident" id="8137629">err</span><span class="op" id="8137632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137637">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8137642">if</span>&nbsp;<span class="ident" id="8137645">err</span>&nbsp;<span class="op" id="8137649">:=</span>&nbsp;<span class="ident" id="8137652">dec</span><span class="op" id="8137655">.</span><span class="ident" id="8137656">Decode</span><span class="op" id="8137662">(</span><span class="ident" id="8137663">v</span><span class="op" id="8137664">)</span><span class="op" id="8137665">;</span>&nbsp;<span class="ident" id="8137667">err</span>&nbsp;<span class="op" id="8137671">!=</span>&nbsp;<span class="ident" id="8137674">nil</span>&nbsp;<span class="op" id="8137678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137684">b</span><span class="op" id="8137685">.</span><span class="ident" id="8137686">Fatal</span><span class="op" id="8137691">(</span><span class="string" id="8137692">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8137707">,</span>&nbsp;<span class="ident" id="8137709">err</span><span class="op" id="8137712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137724">}</span><span class="op" id="8137725">)</span><br>
<span class="lineno">40</span><span class="op" id="8137727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8137730">func</span>&nbsp;<span class="ident" id="8137735">BenchmarkEndToEndPipe</span><span class="op" id="8137756">(</span><span class="ident" id="8137757">b</span>&nbsp;<span class="op" id="8137759">*</span><span class="ident" id="8137760">testing</span><span class="op" id="8137767">.</span><span class="ident" id="8137768">B</span><span class="op" id="8137769">)</span>&nbsp;<span class="op" id="8137771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137774">benchmarkEndToEnd</span><span class="op" id="8137791">(</span><span class="ident" id="8137792">b</span><span class="op" id="8137793">,</span>&nbsp;<span class="keyword" id="8137795">func</span><span class="op" id="8137799">(</span><span class="op" id="8137800">)</span>&nbsp;<span class="keyword" id="8137802">interface</span><span class="op" id="8137811">{</span><span class="op" id="8137812">}</span>&nbsp;<span class="op" id="8137814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8137818">return</span>&nbsp;<span class="op" id="8137825">&amp;</span><span class="ident" id="8137826">Bench</span><span class="op" id="8137831">{</span><span class="num" id="8137832">7</span><span class="op" id="8137833">,</span>&nbsp;<span class="num" id="8137835">3.2</span><span class="op" id="8137838">,</span>&nbsp;<span class="string" id="8137840">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8137857">,</span>&nbsp;<span class="ident" id="8137859">bytes</span><span class="op" id="8137864">.</span><span class="ident" id="8137865">Repeat</span><span class="op" id="8137871">(</span><span class="op" id="8137872">[</span><span class="op" id="8137873">]</span><span class="builtintype" id="8137874">byte</span><span class="op" id="8137878">(</span><span class="string" id="8137879">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8137897">)</span><span class="op" id="8137898">,</span>&nbsp;<span class="num" id="8137900">100</span><span class="op" id="8137903">)</span><span class="op" id="8137904">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137907">}</span><span class="op" id="8137908">,</span>&nbsp;<span class="keyword" id="8137910">func</span><span class="op" id="8137914">(</span><span class="op" id="8137915">)</span>&nbsp;<span class="op" id="8137917">(</span><span class="ident" id="8137918">r</span>&nbsp;<span class="ident" id="8137920">io</span><span class="op" id="8137922">.</span><span class="ident" id="8137923">Reader</span><span class="op" id="8137929">,</span>&nbsp;<span class="ident" id="8137931">w</span>&nbsp;<span class="ident" id="8137933">io</span><span class="op" id="8137935">.</span><span class="ident" id="8137936">Writer</span><span class="op" id="8137942">,</span>&nbsp;<span class="ident" id="8137944">err</span>&nbsp;<span class="builtintype" id="8137948">error</span><span class="op" id="8137953">)</span>&nbsp;<span class="op" id="8137955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8137959">r</span><span class="op" id="8137960">,</span>&nbsp;<span class="ident" id="8137962">w</span><span class="op" id="8137963">,</span>&nbsp;<span class="ident" id="8137965">err</span>&nbsp;<span class="op" id="8137969">=</span>&nbsp;<span class="ident" id="8137971">os</span><span class="op" id="8137973">.</span><span class="ident" id="8137974">Pipe</span><span class="op" id="8137978">(</span><span class="op" id="8137979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8137983">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137991">}</span><span class="op" id="8137992">)</span><br>
<span class="lineno"></span><span class="op" id="8137994">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8137997">func</span>&nbsp;<span class="ident" id="8138002">BenchmarkEndToEndByteBuffer</span><span class="op" id="8138029">(</span><span class="ident" id="8138030">b</span>&nbsp;<span class="op" id="8138032">*</span><span class="ident" id="8138033">testing</span><span class="op" id="8138040">.</span><span class="ident" id="8138041">B</span><span class="op" id="8138042">)</span>&nbsp;<span class="op" id="8138044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138047">benchmarkEndToEnd</span><span class="op" id="8138064">(</span><span class="ident" id="8138065">b</span><span class="op" id="8138066">,</span>&nbsp;<span class="keyword" id="8138068">func</span><span class="op" id="8138072">(</span><span class="op" id="8138073">)</span>&nbsp;<span class="keyword" id="8138075">interface</span><span class="op" id="8138084">{</span><span class="op" id="8138085">}</span>&nbsp;<span class="op" id="8138087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138091">return</span>&nbsp;<span class="op" id="8138098">&amp;</span><span class="ident" id="8138099">Bench</span><span class="op" id="8138104">{</span><span class="num" id="8138105">7</span><span class="op" id="8138106">,</span>&nbsp;<span class="num" id="8138108">3.2</span><span class="op" id="8138111">,</span>&nbsp;<span class="string" id="8138113">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8138130">,</span>&nbsp;<span class="ident" id="8138132">bytes</span><span class="op" id="8138137">.</span><span class="ident" id="8138138">Repeat</span><span class="op" id="8138144">(</span><span class="op" id="8138145">[</span><span class="op" id="8138146">]</span><span class="builtintype" id="8138147">byte</span><span class="op" id="8138151">(</span><span class="string" id="8138152">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8138170">)</span><span class="op" id="8138171">,</span>&nbsp;<span class="num" id="8138173">100</span><span class="op" id="8138176">)</span><span class="op" id="8138177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138180">}</span><span class="op" id="8138181">,</span>&nbsp;<span class="keyword" id="8138183">func</span><span class="op" id="8138187">(</span><span class="op" id="8138188">)</span>&nbsp;<span class="op" id="8138190">(</span><span class="ident" id="8138191">r</span>&nbsp;<span class="ident" id="8138193">io</span><span class="op" id="8138195">.</span><span class="ident" id="8138196">Reader</span><span class="op" id="8138202">,</span>&nbsp;<span class="ident" id="8138204">w</span>&nbsp;<span class="ident" id="8138206">io</span><span class="op" id="8138208">.</span><span class="ident" id="8138209">Writer</span><span class="op" id="8138215">,</span>&nbsp;<span class="ident" id="8138217">err</span>&nbsp;<span class="builtintype" id="8138221">error</span><span class="op" id="8138226">)</span>&nbsp;<span class="op" id="8138228">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138232">var</span>&nbsp;<span class="ident" id="8138236">buf</span>&nbsp;<span class="ident" id="8138240">bytes</span><span class="op" id="8138245">.</span><span class="ident" id="8138246">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138255">return</span>&nbsp;<span class="op" id="8138262">&amp;</span><span class="ident" id="8138263">buf</span><span class="op" id="8138266">,</span>&nbsp;<span class="op" id="8138268">&amp;</span><span class="ident" id="8138269">buf</span><span class="op" id="8138272">,</span>&nbsp;<span class="ident" id="8138274">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138279">}</span><span class="op" id="8138280">)</span><br>
<span class="lineno"></span><span class="op" id="8138282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8138285">func</span>&nbsp;<span class="ident" id="8138290">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="8138322">(</span><span class="ident" id="8138323">b</span>&nbsp;<span class="op" id="8138325">*</span><span class="ident" id="8138326">testing</span><span class="op" id="8138333">.</span><span class="ident" id="8138334">B</span><span class="op" id="8138335">)</span>&nbsp;<span class="op" id="8138337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138340">benchmarkEndToEnd</span><span class="op" id="8138357">(</span><span class="ident" id="8138358">b</span><span class="op" id="8138359">,</span>&nbsp;<span class="keyword" id="8138361">func</span><span class="op" id="8138365">(</span><span class="op" id="8138366">)</span>&nbsp;<span class="keyword" id="8138368">interface</span><span class="op" id="8138377">{</span><span class="op" id="8138378">}</span>&nbsp;<span class="op" id="8138380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138384">v</span>&nbsp;<span class="op" id="8138386">:=</span>&nbsp;<span class="op" id="8138389">&amp;</span><span class="ident" id="8138390">Bench</span><span class="op" id="8138395">{</span><span class="num" id="8138396">7</span><span class="op" id="8138397">,</span>&nbsp;<span class="num" id="8138399">3.2</span><span class="op" id="8138402">,</span>&nbsp;<span class="string" id="8138404">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8138421">,</span>&nbsp;<span class="ident" id="8138423">nil</span><span class="op" id="8138426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138430">Register</span><span class="op" id="8138438">(</span><span class="ident" id="8138439">v</span><span class="op" id="8138440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138444">arr</span>&nbsp;<span class="op" id="8138448">:=</span>&nbsp;<span class="builtinfunc" id="8138451">make</span><span class="op" id="8138455">(</span><span class="op" id="8138456">[</span><span class="op" id="8138457">]</span><span class="keyword" id="8138458">interface</span><span class="op" id="8138467">{</span><span class="op" id="8138468">}</span><span class="op" id="8138469">,</span>&nbsp;<span class="num" id="8138471">100</span><span class="op" id="8138474">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138478">for</span>&nbsp;<span class="ident" id="8138482">i</span>&nbsp;<span class="op" id="8138484">:=</span>&nbsp;<span class="keyword" id="8138487">range</span>&nbsp;<span class="ident" id="8138493">arr</span>&nbsp;<span class="op" id="8138497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138502">arr</span><span class="op" id="8138505">[</span><span class="ident" id="8138506">i</span><span class="op" id="8138507">]</span>&nbsp;<span class="op" id="8138509">=</span>&nbsp;<span class="ident" id="8138511">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138519">return</span>&nbsp;<span class="op" id="8138526">&amp;</span><span class="ident" id="8138527">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138532">}</span><span class="op" id="8138533">,</span>&nbsp;<span class="keyword" id="8138535">func</span><span class="op" id="8138539">(</span><span class="op" id="8138540">)</span>&nbsp;<span class="op" id="8138542">(</span><span class="ident" id="8138543">r</span>&nbsp;<span class="ident" id="8138545">io</span><span class="op" id="8138547">.</span><span class="ident" id="8138548">Reader</span><span class="op" id="8138554">,</span>&nbsp;<span class="ident" id="8138556">w</span>&nbsp;<span class="ident" id="8138558">io</span><span class="op" id="8138560">.</span><span class="ident" id="8138561">Writer</span><span class="op" id="8138567">,</span>&nbsp;<span class="ident" id="8138569">err</span>&nbsp;<span class="builtintype" id="8138573">error</span><span class="op" id="8138578">)</span>&nbsp;<span class="op" id="8138580">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138584">var</span>&nbsp;<span class="ident" id="8138588">buf</span>&nbsp;<span class="ident" id="8138592">bytes</span><span class="op" id="8138597">.</span><span class="ident" id="8138598">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138607">return</span>&nbsp;<span class="op" id="8138614">&amp;</span><span class="ident" id="8138615">buf</span><span class="op" id="8138618">,</span>&nbsp;<span class="op" id="8138620">&amp;</span><span class="ident" id="8138621">buf</span><span class="op" id="8138624">,</span>&nbsp;<span class="ident" id="8138626">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138631">}</span><span class="op" id="8138632">)</span><br>
<span class="lineno"></span><span class="op" id="8138634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8138637">func</span>&nbsp;<span class="ident" id="8138642">TestCountEncodeMallocs</span><span class="op" id="8138664">(</span><span class="ident" id="8138665">t</span>&nbsp;<span class="op" id="8138667">*</span><span class="ident" id="8138668">testing</span><span class="op" id="8138675">.</span><span class="ident" id="8138676">T</span><span class="op" id="8138677">)</span>&nbsp;<span class="op" id="8138679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138682">if</span>&nbsp;<span class="ident" id="8138685">testing</span><span class="op" id="8138692">.</span><span class="ident" id="8138693">Short</span><span class="op" id="8138698">(</span><span class="op" id="8138699">)</span>&nbsp;<span class="op" id="8138701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138705">t</span><span class="op" id="8138706">.</span><span class="ident" id="8138707">Skip</span><span class="op" id="8138711">(</span><span class="string" id="8138712">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8138749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138755">if</span>&nbsp;<span class="ident" id="8138758">runtime</span><span class="op" id="8138765">.</span><span class="ident" id="8138766">GOMAXPROCS</span><span class="op" id="8138776">(</span><span class="num" id="8138777">0</span><span class="op" id="8138778">)</span>&nbsp;<span class="op" id="8138780">&gt;</span>&nbsp;<span class="num" id="8138782">1</span>&nbsp;<span class="op" id="8138784">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138788">t</span><span class="op" id="8138789">.</span><span class="ident" id="8138790">Skip</span><span class="op" id="8138794">(</span><span class="string" id="8138795">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8138819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138826">const</span>&nbsp;<span class="ident" id="8138832">N</span>&nbsp;<span class="op" id="8138834">=</span>&nbsp;<span class="num" id="8138836">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8138843">var</span>&nbsp;<span class="ident" id="8138847">buf</span>&nbsp;<span class="ident" id="8138851">bytes</span><span class="op" id="8138856">.</span><span class="ident" id="8138857">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138865">enc</span>&nbsp;<span class="op" id="8138869">:=</span>&nbsp;<span class="ident" id="8138872">NewEncoder</span><span class="op" id="8138882">(</span><span class="op" id="8138883">&amp;</span><span class="ident" id="8138884">buf</span><span class="op" id="8138887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138890">bench</span>&nbsp;<span class="op" id="8138896">:=</span>&nbsp;<span class="op" id="8138899">&amp;</span><span class="ident" id="8138900">Bench</span><span class="op" id="8138905">{</span><span class="num" id="8138906">7</span><span class="op" id="8138907">,</span>&nbsp;<span class="num" id="8138909">3.2</span><span class="op" id="8138912">,</span>&nbsp;<span class="string" id="8138914">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8138931">,</span>&nbsp;<span class="op" id="8138933">[</span><span class="op" id="8138934">]</span><span class="builtintype" id="8138935">byte</span><span class="op" id="8138939">(</span><span class="string" id="8138940">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8138958">)</span><span class="op" id="8138959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8138963">allocs</span>&nbsp;<span class="op" id="8138970">:=</span>&nbsp;<span class="ident" id="8138973">testing</span><span class="op" id="8138980">.</span><span class="ident" id="8138981">AllocsPerRun</span><span class="op" id="8138993">(</span><span class="ident" id="8138994">N</span><span class="op" id="8138995">,</span>&nbsp;<span class="keyword" id="8138997">func</span><span class="op" id="8139001">(</span><span class="op" id="8139002">)</span>&nbsp;<span class="op" id="8139004">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139008">err</span>&nbsp;<span class="op" id="8139012">:=</span>&nbsp;<span class="ident" id="8139015">enc</span><span class="op" id="8139018">.</span><span class="ident" id="8139019">Encode</span><span class="op" id="8139025">(</span><span class="ident" id="8139026">bench</span><span class="op" id="8139031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139035">if</span>&nbsp;<span class="ident" id="8139038">err</span>&nbsp;<span class="op" id="8139042">!=</span>&nbsp;<span class="ident" id="8139045">nil</span>&nbsp;<span class="op" id="8139049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139054">t</span><span class="op" id="8139055">.</span><span class="ident" id="8139056">Fatal</span><span class="op" id="8139061">(</span><span class="string" id="8139062">&#34;encode:&#34;</span><span class="op" id="8139071">,</span>&nbsp;<span class="ident" id="8139073">err</span><span class="op" id="8139076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139083">}</span><span class="op" id="8139084">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139087">if</span>&nbsp;<span class="ident" id="8139090">allocs</span>&nbsp;<span class="op" id="8139097">!=</span>&nbsp;<span class="num" id="8139100">0</span>&nbsp;<span class="op" id="8139102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139106">t</span><span class="op" id="8139107">.</span><span class="ident" id="8139108">Fatalf</span><span class="op" id="8139114">(</span><span class="string" id="8139115">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="8139165">,</span>&nbsp;<span class="ident" id="8139167">allocs</span><span class="op" id="8139173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139176">}</span><br>
<span class="lineno"></span><span class="op" id="8139178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="8139181">func</span>&nbsp;<span class="ident" id="8139186">TestCountDecodeMallocs</span><span class="op" id="8139208">(</span><span class="ident" id="8139209">t</span>&nbsp;<span class="op" id="8139211">*</span><span class="ident" id="8139212">testing</span><span class="op" id="8139219">.</span><span class="ident" id="8139220">T</span><span class="op" id="8139221">)</span>&nbsp;<span class="op" id="8139223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139226">if</span>&nbsp;<span class="ident" id="8139229">testing</span><span class="op" id="8139236">.</span><span class="ident" id="8139237">Short</span><span class="op" id="8139242">(</span><span class="op" id="8139243">)</span>&nbsp;<span class="op" id="8139245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139249">t</span><span class="op" id="8139250">.</span><span class="ident" id="8139251">Skip</span><span class="op" id="8139255">(</span><span class="string" id="8139256">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8139293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139299">if</span>&nbsp;<span class="ident" id="8139302">runtime</span><span class="op" id="8139309">.</span><span class="ident" id="8139310">GOMAXPROCS</span><span class="op" id="8139320">(</span><span class="num" id="8139321">0</span><span class="op" id="8139322">)</span>&nbsp;<span class="op" id="8139324">&gt;</span>&nbsp;<span class="num" id="8139326">1</span>&nbsp;<span class="op" id="8139328">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139332">t</span><span class="op" id="8139333">.</span><span class="ident" id="8139334">Skip</span><span class="op" id="8139338">(</span><span class="string" id="8139339">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8139363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139370">const</span>&nbsp;<span class="ident" id="8139376">N</span>&nbsp;<span class="op" id="8139378">=</span>&nbsp;<span class="num" id="8139380">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139387">var</span>&nbsp;<span class="ident" id="8139391">buf</span>&nbsp;<span class="ident" id="8139395">bytes</span><span class="op" id="8139400">.</span><span class="ident" id="8139401">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139409">enc</span>&nbsp;<span class="op" id="8139413">:=</span>&nbsp;<span class="ident" id="8139416">NewEncoder</span><span class="op" id="8139426">(</span><span class="op" id="8139427">&amp;</span><span class="ident" id="8139428">buf</span><span class="op" id="8139431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139434">bench</span>&nbsp;<span class="op" id="8139440">:=</span>&nbsp;<span class="op" id="8139443">&amp;</span><span class="ident" id="8139444">Bench</span><span class="op" id="8139449">{</span><span class="num" id="8139450">7</span><span class="op" id="8139451">,</span>&nbsp;<span class="num" id="8139453">3.2</span><span class="op" id="8139456">,</span>&nbsp;<span class="string" id="8139458">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8139475">,</span>&nbsp;<span class="op" id="8139477">[</span><span class="op" id="8139478">]</span><span class="builtintype" id="8139479">byte</span><span class="op" id="8139483">(</span><span class="string" id="8139484">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8139502">)</span><span class="op" id="8139503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8139507">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139549">testing</span><span class="op" id="8139556">.</span><span class="ident" id="8139557">AllocsPerRun</span><span class="op" id="8139569">(</span><span class="ident" id="8139570">N</span><span class="op" id="8139571">,</span>&nbsp;<span class="keyword" id="8139573">func</span><span class="op" id="8139577">(</span><span class="op" id="8139578">)</span>&nbsp;<span class="op" id="8139580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139584">err</span>&nbsp;<span class="op" id="8139588">:=</span>&nbsp;<span class="ident" id="8139591">enc</span><span class="op" id="8139594">.</span><span class="ident" id="8139595">Encode</span><span class="op" id="8139601">(</span><span class="ident" id="8139602">bench</span><span class="op" id="8139607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139611">if</span>&nbsp;<span class="ident" id="8139614">err</span>&nbsp;<span class="op" id="8139618">!=</span>&nbsp;<span class="ident" id="8139621">nil</span>&nbsp;<span class="op" id="8139625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139630">t</span><span class="op" id="8139631">.</span><span class="ident" id="8139632">Fatal</span><span class="op" id="8139637">(</span><span class="string" id="8139638">&#34;encode:&#34;</span><span class="op" id="8139647">,</span>&nbsp;<span class="ident" id="8139649">err</span><span class="op" id="8139652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139656">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139659">}</span><span class="op" id="8139660">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139664">dec</span>&nbsp;<span class="op" id="8139668">:=</span>&nbsp;<span class="ident" id="8139671">NewDecoder</span><span class="op" id="8139681">(</span><span class="op" id="8139682">&amp;</span><span class="ident" id="8139683">buf</span><span class="op" id="8139686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139689">allocs</span>&nbsp;<span class="op" id="8139696">:=</span>&nbsp;<span class="ident" id="8139699">testing</span><span class="op" id="8139706">.</span><span class="ident" id="8139707">AllocsPerRun</span><span class="op" id="8139719">(</span><span class="ident" id="8139720">N</span><span class="op" id="8139721">,</span>&nbsp;<span class="keyword" id="8139723">func</span><span class="op" id="8139727">(</span><span class="op" id="8139728">)</span>&nbsp;<span class="op" id="8139730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139734">*</span><span class="ident" id="8139735">bench</span>&nbsp;<span class="op" id="8139741">=</span>&nbsp;<span class="ident" id="8139743">Bench</span><span class="op" id="8139748">{</span><span class="op" id="8139749">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139753">err</span>&nbsp;<span class="op" id="8139757">:=</span>&nbsp;<span class="ident" id="8139760">dec</span><span class="op" id="8139763">.</span><span class="ident" id="8139764">Decode</span><span class="op" id="8139770">(</span><span class="op" id="8139771">&amp;</span><span class="ident" id="8139772">bench</span><span class="op" id="8139777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139781">if</span>&nbsp;<span class="ident" id="8139784">err</span>&nbsp;<span class="op" id="8139788">!=</span>&nbsp;<span class="ident" id="8139791">nil</span>&nbsp;<span class="op" id="8139795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139800">t</span><span class="op" id="8139801">.</span><span class="ident" id="8139802">Fatal</span><span class="op" id="8139807">(</span><span class="string" id="8139808">&#34;decode:&#34;</span><span class="op" id="8139817">,</span>&nbsp;<span class="ident" id="8139819">err</span><span class="op" id="8139822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139829">}</span><span class="op" id="8139830">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139833">if</span>&nbsp;<span class="ident" id="8139836">allocs</span>&nbsp;<span class="op" id="8139843">!=</span>&nbsp;<span class="num" id="8139846">4</span>&nbsp;<span class="op" id="8139848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139852">t</span><span class="op" id="8139853">.</span><span class="ident" id="8139854">Fatalf</span><span class="op" id="8139860">(</span><span class="string" id="8139861">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="8139911">,</span>&nbsp;<span class="ident" id="8139913">allocs</span><span class="op" id="8139919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139922">}</span><br>
<span class="lineno"></span><span class="op" id="8139924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8139927">func</span>&nbsp;<span class="ident" id="8139932">BenchmarkEncodeComplex128Slice</span><span class="op" id="8139962">(</span><span class="ident" id="8139963">b</span>&nbsp;<span class="op" id="8139965">*</span><span class="ident" id="8139966">testing</span><span class="op" id="8139973">.</span><span class="ident" id="8139974">B</span><span class="op" id="8139975">)</span>&nbsp;<span class="op" id="8139977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8139980">var</span>&nbsp;<span class="ident" id="8139984">buf</span>&nbsp;<span class="ident" id="8139988">bytes</span><span class="op" id="8139993">.</span><span class="ident" id="8139994">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140002">enc</span>&nbsp;<span class="op" id="8140006">:=</span>&nbsp;<span class="ident" id="8140009">NewEncoder</span><span class="op" id="8140019">(</span><span class="op" id="8140020">&amp;</span><span class="ident" id="8140021">buf</span><span class="op" id="8140024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140027">a</span>&nbsp;<span class="op" id="8140029">:=</span>&nbsp;<span class="builtinfunc" id="8140032">make</span><span class="op" id="8140036">(</span><span class="op" id="8140037">[</span><span class="op" id="8140038">]</span><span class="builtintype" id="8140039">complex128</span><span class="op" id="8140049">,</span>&nbsp;<span class="num" id="8140051">1000</span><span class="op" id="8140055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140058">for</span>&nbsp;<span class="ident" id="8140062">i</span>&nbsp;<span class="op" id="8140064">:=</span>&nbsp;<span class="keyword" id="8140067">range</span>&nbsp;<span class="ident" id="8140073">a</span>&nbsp;<span class="op" id="8140075">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140079">a</span><span class="op" id="8140080">[</span><span class="ident" id="8140081">i</span><span class="op" id="8140082">]</span>&nbsp;<span class="op" id="8140084">=</span>&nbsp;<span class="num" id="8140086">1.2</span>&nbsp;<span class="op" id="8140090">+</span>&nbsp;<span class="num" id="8140092">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140101">b</span><span class="op" id="8140102">.</span><span class="ident" id="8140103">ResetTimer</span><span class="op" id="8140113">(</span><span class="op" id="8140114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140117">for</span>&nbsp;<span class="ident" id="8140121">i</span>&nbsp;<span class="op" id="8140123">:=</span>&nbsp;<span class="num" id="8140126">0</span><span class="op" id="8140127">;</span>&nbsp;<span class="ident" id="8140129">i</span>&nbsp;<span class="op" id="8140131">&lt;</span>&nbsp;<span class="ident" id="8140133">b</span><span class="op" id="8140134">.</span><span class="ident" id="8140135">N</span><span class="op" id="8140136">;</span>&nbsp;<span class="ident" id="8140138">i</span><span class="op" id="8140139">++</span>&nbsp;<span class="op" id="8140142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140146">buf</span><span class="op" id="8140149">.</span><span class="ident" id="8140150">Reset</span><span class="op" id="8140155">(</span><span class="op" id="8140156">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140160">err</span>&nbsp;<span class="op" id="8140164">:=</span>&nbsp;<span class="ident" id="8140167">enc</span><span class="op" id="8140170">.</span><span class="ident" id="8140171">Encode</span><span class="op" id="8140177">(</span><span class="ident" id="8140178">a</span><span class="op" id="8140179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140183">if</span>&nbsp;<span class="ident" id="8140186">err</span>&nbsp;<span class="op" id="8140190">!=</span>&nbsp;<span class="ident" id="8140193">nil</span>&nbsp;<span class="op" id="8140197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140202">b</span><span class="op" id="8140203">.</span><span class="ident" id="8140204">Fatal</span><span class="op" id="8140209">(</span><span class="ident" id="8140210">err</span><span class="op" id="8140213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140220">}</span><br>
<span class="lineno">150</span><span class="op" id="8140222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8140225">func</span>&nbsp;<span class="ident" id="8140230">BenchmarkEncodeFloat64Slice</span><span class="op" id="8140257">(</span><span class="ident" id="8140258">b</span>&nbsp;<span class="op" id="8140260">*</span><span class="ident" id="8140261">testing</span><span class="op" id="8140268">.</span><span class="ident" id="8140269">B</span><span class="op" id="8140270">)</span>&nbsp;<span class="op" id="8140272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140275">var</span>&nbsp;<span class="ident" id="8140279">buf</span>&nbsp;<span class="ident" id="8140283">bytes</span><span class="op" id="8140288">.</span><span class="ident" id="8140289">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140297">enc</span>&nbsp;<span class="op" id="8140301">:=</span>&nbsp;<span class="ident" id="8140304">NewEncoder</span><span class="op" id="8140314">(</span><span class="op" id="8140315">&amp;</span><span class="ident" id="8140316">buf</span><span class="op" id="8140319">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140322">a</span>&nbsp;<span class="op" id="8140324">:=</span>&nbsp;<span class="builtinfunc" id="8140327">make</span><span class="op" id="8140331">(</span><span class="op" id="8140332">[</span><span class="op" id="8140333">]</span><span class="builtintype" id="8140334">float64</span><span class="op" id="8140341">,</span>&nbsp;<span class="num" id="8140343">1000</span><span class="op" id="8140347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140350">for</span>&nbsp;<span class="ident" id="8140354">i</span>&nbsp;<span class="op" id="8140356">:=</span>&nbsp;<span class="keyword" id="8140359">range</span>&nbsp;<span class="ident" id="8140365">a</span>&nbsp;<span class="op" id="8140367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140371">a</span><span class="op" id="8140372">[</span><span class="ident" id="8140373">i</span><span class="op" id="8140374">]</span>&nbsp;<span class="op" id="8140376">=</span>&nbsp;<span class="num" id="8140378">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140389">b</span><span class="op" id="8140390">.</span><span class="ident" id="8140391">ResetTimer</span><span class="op" id="8140401">(</span><span class="op" id="8140402">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140405">for</span>&nbsp;<span class="ident" id="8140409">i</span>&nbsp;<span class="op" id="8140411">:=</span>&nbsp;<span class="num" id="8140414">0</span><span class="op" id="8140415">;</span>&nbsp;<span class="ident" id="8140417">i</span>&nbsp;<span class="op" id="8140419">&lt;</span>&nbsp;<span class="ident" id="8140421">b</span><span class="op" id="8140422">.</span><span class="ident" id="8140423">N</span><span class="op" id="8140424">;</span>&nbsp;<span class="ident" id="8140426">i</span><span class="op" id="8140427">++</span>&nbsp;<span class="op" id="8140430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140434">buf</span><span class="op" id="8140437">.</span><span class="ident" id="8140438">Reset</span><span class="op" id="8140443">(</span><span class="op" id="8140444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140448">err</span>&nbsp;<span class="op" id="8140452">:=</span>&nbsp;<span class="ident" id="8140455">enc</span><span class="op" id="8140458">.</span><span class="ident" id="8140459">Encode</span><span class="op" id="8140465">(</span><span class="ident" id="8140466">a</span><span class="op" id="8140467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140471">if</span>&nbsp;<span class="ident" id="8140474">err</span>&nbsp;<span class="op" id="8140478">!=</span>&nbsp;<span class="ident" id="8140481">nil</span>&nbsp;<span class="op" id="8140485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140490">b</span><span class="op" id="8140491">.</span><span class="ident" id="8140492">Fatal</span><span class="op" id="8140497">(</span><span class="ident" id="8140498">err</span><span class="op" id="8140501">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140508">}</span><br>
<span class="lineno"></span><span class="op" id="8140510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8140513">func</span>&nbsp;<span class="ident" id="8140518">BenchmarkEncodeInt32Slice</span><span class="op" id="8140543">(</span><span class="ident" id="8140544">b</span>&nbsp;<span class="op" id="8140546">*</span><span class="ident" id="8140547">testing</span><span class="op" id="8140554">.</span><span class="ident" id="8140555">B</span><span class="op" id="8140556">)</span>&nbsp;<span class="op" id="8140558">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140561">var</span>&nbsp;<span class="ident" id="8140565">buf</span>&nbsp;<span class="ident" id="8140569">bytes</span><span class="op" id="8140574">.</span><span class="ident" id="8140575">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140583">enc</span>&nbsp;<span class="op" id="8140587">:=</span>&nbsp;<span class="ident" id="8140590">NewEncoder</span><span class="op" id="8140600">(</span><span class="op" id="8140601">&amp;</span><span class="ident" id="8140602">buf</span><span class="op" id="8140605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140608">a</span>&nbsp;<span class="op" id="8140610">:=</span>&nbsp;<span class="builtinfunc" id="8140613">make</span><span class="op" id="8140617">(</span><span class="op" id="8140618">[</span><span class="op" id="8140619">]</span><span class="builtintype" id="8140620">int32</span><span class="op" id="8140625">,</span>&nbsp;<span class="num" id="8140627">1000</span><span class="op" id="8140631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140634">for</span>&nbsp;<span class="ident" id="8140638">i</span>&nbsp;<span class="op" id="8140640">:=</span>&nbsp;<span class="keyword" id="8140643">range</span>&nbsp;<span class="ident" id="8140649">a</span>&nbsp;<span class="op" id="8140651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140655">a</span><span class="op" id="8140656">[</span><span class="ident" id="8140657">i</span><span class="op" id="8140658">]</span>&nbsp;<span class="op" id="8140660">=</span>&nbsp;<span class="num" id="8140662">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140671">b</span><span class="op" id="8140672">.</span><span class="ident" id="8140673">ResetTimer</span><span class="op" id="8140683">(</span><span class="op" id="8140684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140687">for</span>&nbsp;<span class="ident" id="8140691">i</span>&nbsp;<span class="op" id="8140693">:=</span>&nbsp;<span class="num" id="8140696">0</span><span class="op" id="8140697">;</span>&nbsp;<span class="ident" id="8140699">i</span>&nbsp;<span class="op" id="8140701">&lt;</span>&nbsp;<span class="ident" id="8140703">b</span><span class="op" id="8140704">.</span><span class="ident" id="8140705">N</span><span class="op" id="8140706">;</span>&nbsp;<span class="ident" id="8140708">i</span><span class="op" id="8140709">++</span>&nbsp;<span class="op" id="8140712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140716">buf</span><span class="op" id="8140719">.</span><span class="ident" id="8140720">Reset</span><span class="op" id="8140725">(</span><span class="op" id="8140726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140730">err</span>&nbsp;<span class="op" id="8140734">:=</span>&nbsp;<span class="ident" id="8140737">enc</span><span class="op" id="8140740">.</span><span class="ident" id="8140741">Encode</span><span class="op" id="8140747">(</span><span class="ident" id="8140748">a</span><span class="op" id="8140749">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140753">if</span>&nbsp;<span class="ident" id="8140756">err</span>&nbsp;<span class="op" id="8140760">!=</span>&nbsp;<span class="ident" id="8140763">nil</span>&nbsp;<span class="op" id="8140767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140772">b</span><span class="op" id="8140773">.</span><span class="ident" id="8140774">Fatal</span><span class="op" id="8140779">(</span><span class="ident" id="8140780">err</span><span class="op" id="8140783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140790">}</span><br>
<span class="lineno"></span><span class="op" id="8140792">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8140795">func</span>&nbsp;<span class="ident" id="8140800">BenchmarkEncodeStringSlice</span><span class="op" id="8140826">(</span><span class="ident" id="8140827">b</span>&nbsp;<span class="op" id="8140829">*</span><span class="ident" id="8140830">testing</span><span class="op" id="8140837">.</span><span class="ident" id="8140838">B</span><span class="op" id="8140839">)</span>&nbsp;<span class="op" id="8140841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140844">var</span>&nbsp;<span class="ident" id="8140848">buf</span>&nbsp;<span class="ident" id="8140852">bytes</span><span class="op" id="8140857">.</span><span class="ident" id="8140858">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140866">enc</span>&nbsp;<span class="op" id="8140870">:=</span>&nbsp;<span class="ident" id="8140873">NewEncoder</span><span class="op" id="8140883">(</span><span class="op" id="8140884">&amp;</span><span class="ident" id="8140885">buf</span><span class="op" id="8140888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140891">a</span>&nbsp;<span class="op" id="8140893">:=</span>&nbsp;<span class="builtinfunc" id="8140896">make</span><span class="op" id="8140900">(</span><span class="op" id="8140901">[</span><span class="op" id="8140902">]</span><span class="builtintype" id="8140903">string</span><span class="op" id="8140909">,</span>&nbsp;<span class="num" id="8140911">1000</span><span class="op" id="8140915">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140918">for</span>&nbsp;<span class="ident" id="8140922">i</span>&nbsp;<span class="op" id="8140924">:=</span>&nbsp;<span class="keyword" id="8140927">range</span>&nbsp;<span class="ident" id="8140933">a</span>&nbsp;<span class="op" id="8140935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140939">a</span><span class="op" id="8140940">[</span><span class="ident" id="8140941">i</span><span class="op" id="8140942">]</span>&nbsp;<span class="op" id="8140944">=</span>&nbsp;<span class="string" id="8140946">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140968">b</span><span class="op" id="8140969">.</span><span class="ident" id="8140970">ResetTimer</span><span class="op" id="8140980">(</span><span class="op" id="8140981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140984">for</span>&nbsp;<span class="ident" id="8140988">i</span>&nbsp;<span class="op" id="8140990">:=</span>&nbsp;<span class="num" id="8140993">0</span><span class="op" id="8140994">;</span>&nbsp;<span class="ident" id="8140996">i</span>&nbsp;<span class="op" id="8140998">&lt;</span>&nbsp;<span class="ident" id="8141000">b</span><span class="op" id="8141001">.</span><span class="ident" id="8141002">N</span><span class="op" id="8141003">;</span>&nbsp;<span class="ident" id="8141005">i</span><span class="op" id="8141006">++</span>&nbsp;<span class="op" id="8141009">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141013">buf</span><span class="op" id="8141016">.</span><span class="ident" id="8141017">Reset</span><span class="op" id="8141022">(</span><span class="op" id="8141023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141027">err</span>&nbsp;<span class="op" id="8141031">:=</span>&nbsp;<span class="ident" id="8141034">enc</span><span class="op" id="8141037">.</span><span class="ident" id="8141038">Encode</span><span class="op" id="8141044">(</span><span class="ident" id="8141045">a</span><span class="op" id="8141046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141050">if</span>&nbsp;<span class="ident" id="8141053">err</span>&nbsp;<span class="op" id="8141057">!=</span>&nbsp;<span class="ident" id="8141060">nil</span>&nbsp;<span class="op" id="8141064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141069">b</span><span class="op" id="8141070">.</span><span class="ident" id="8141071">Fatal</span><span class="op" id="8141076">(</span><span class="ident" id="8141077">err</span><span class="op" id="8141080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141084">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141087">}</span><br>
<span class="lineno"></span><span class="op" id="8141089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8141092">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="8141138">type</span>&nbsp;<span class="ident" id="8141143">benchmarkBuf</span>&nbsp;<span class="keyword" id="8141156">struct</span>&nbsp;<span class="op" id="8141163">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141166">offset</span>&nbsp;<span class="builtintype" id="8141173">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141178">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8141185">[</span><span class="op" id="8141186">]</span><span class="builtintype" id="8141187">byte</span><br>
<span class="lineno"></span><span class="op" id="8141192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8141195">func</span>&nbsp;<span class="op" id="8141200">(</span><span class="ident" id="8141201">b</span>&nbsp;<span class="op" id="8141203">*</span><span class="ident" id="8141204">benchmarkBuf</span><span class="op" id="8141216">)</span>&nbsp;<span class="ident" id="8141218">Read</span><span class="op" id="8141222">(</span><span class="ident" id="8141223">p</span>&nbsp;<span class="op" id="8141225">[</span><span class="op" id="8141226">]</span><span class="builtintype" id="8141227">byte</span><span class="op" id="8141231">)</span>&nbsp;<span class="op" id="8141233">(</span><span class="ident" id="8141234">n</span>&nbsp;<span class="builtintype" id="8141236">int</span><span class="op" id="8141239">,</span>&nbsp;<span class="ident" id="8141241">err</span>&nbsp;<span class="builtintype" id="8141245">error</span><span class="op" id="8141250">)</span>&nbsp;<span class="op" id="8141252">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141255">n</span>&nbsp;<span class="op" id="8141257">=</span>&nbsp;<span class="builtinfunc" id="8141259">copy</span><span class="op" id="8141263">(</span><span class="ident" id="8141264">p</span><span class="op" id="8141265">,</span>&nbsp;<span class="ident" id="8141267">b</span><span class="op" id="8141268">.</span><span class="ident" id="8141269">data</span><span class="op" id="8141273">[</span><span class="ident" id="8141274">b</span><span class="op" id="8141275">.</span><span class="ident" id="8141276">offset</span><span class="op" id="8141282">:</span><span class="op" id="8141283">]</span><span class="op" id="8141284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141287">if</span>&nbsp;<span class="ident" id="8141290">n</span>&nbsp;<span class="op" id="8141292">==</span>&nbsp;<span class="num" id="8141295">0</span>&nbsp;<span class="op" id="8141297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141301">return</span>&nbsp;<span class="num" id="8141308">0</span><span class="op" id="8141309">,</span>&nbsp;<span class="ident" id="8141311">io</span><span class="op" id="8141313">.</span><span class="ident" id="8141314">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141322">b</span><span class="op" id="8141323">.</span><span class="ident" id="8141324">offset</span>&nbsp;<span class="op" id="8141331">+=</span>&nbsp;<span class="ident" id="8141334">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141337">return</span><br>
<span class="lineno"></span><span class="op" id="8141344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8141347">func</span>&nbsp;<span class="op" id="8141352">(</span><span class="ident" id="8141353">b</span>&nbsp;<span class="op" id="8141355">*</span><span class="ident" id="8141356">benchmarkBuf</span><span class="op" id="8141368">)</span>&nbsp;<span class="ident" id="8141370">ReadByte</span><span class="op" id="8141378">(</span><span class="op" id="8141379">)</span>&nbsp;<span class="op" id="8141381">(</span><span class="ident" id="8141382">c</span>&nbsp;<span class="builtintype" id="8141384">byte</span><span class="op" id="8141388">,</span>&nbsp;<span class="ident" id="8141390">err</span>&nbsp;<span class="builtintype" id="8141394">error</span><span class="op" id="8141399">)</span>&nbsp;<span class="op" id="8141401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141404">if</span>&nbsp;<span class="ident" id="8141407">b</span><span class="op" id="8141408">.</span><span class="ident" id="8141409">offset</span>&nbsp;<span class="op" id="8141416">&gt;=</span>&nbsp;<span class="builtinfunc" id="8141419">len</span><span class="op" id="8141422">(</span><span class="ident" id="8141423">b</span><span class="op" id="8141424">.</span><span class="ident" id="8141425">data</span><span class="op" id="8141429">)</span>&nbsp;<span class="op" id="8141431">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141435">return</span>&nbsp;<span class="num" id="8141442">0</span><span class="op" id="8141443">,</span>&nbsp;<span class="ident" id="8141445">io</span><span class="op" id="8141447">.</span><span class="ident" id="8141448">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141456">c</span>&nbsp;<span class="op" id="8141458">=</span>&nbsp;<span class="ident" id="8141460">b</span><span class="op" id="8141461">.</span><span class="ident" id="8141462">data</span><span class="op" id="8141466">[</span><span class="ident" id="8141467">b</span><span class="op" id="8141468">.</span><span class="ident" id="8141469">offset</span><span class="op" id="8141475">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141478">b</span><span class="op" id="8141479">.</span><span class="ident" id="8141480">offset</span><span class="op" id="8141486">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141490">return</span><br>
<span class="lineno">225</span><span class="op" id="8141497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8141500">func</span>&nbsp;<span class="op" id="8141505">(</span><span class="ident" id="8141506">b</span>&nbsp;<span class="op" id="8141508">*</span><span class="ident" id="8141509">benchmarkBuf</span><span class="op" id="8141521">)</span>&nbsp;<span class="ident" id="8141523">reset</span><span class="op" id="8141528">(</span><span class="op" id="8141529">)</span>&nbsp;<span class="op" id="8141531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141534">b</span><span class="op" id="8141535">.</span><span class="ident" id="8141536">offset</span>&nbsp;<span class="op" id="8141543">=</span>&nbsp;<span class="num" id="8141545">0</span><br>
<span class="lineno"></span><span class="op" id="8141547">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8141550">func</span>&nbsp;<span class="ident" id="8141555">BenchmarkDecodeComplex128Slice</span><span class="op" id="8141585">(</span><span class="ident" id="8141586">b</span>&nbsp;<span class="op" id="8141588">*</span><span class="ident" id="8141589">testing</span><span class="op" id="8141596">.</span><span class="ident" id="8141597">B</span><span class="op" id="8141598">)</span>&nbsp;<span class="op" id="8141600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141603">var</span>&nbsp;<span class="ident" id="8141607">buf</span>&nbsp;<span class="ident" id="8141611">bytes</span><span class="op" id="8141616">.</span><span class="ident" id="8141617">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141625">enc</span>&nbsp;<span class="op" id="8141629">:=</span>&nbsp;<span class="ident" id="8141632">NewEncoder</span><span class="op" id="8141642">(</span><span class="op" id="8141643">&amp;</span><span class="ident" id="8141644">buf</span><span class="op" id="8141647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141650">a</span>&nbsp;<span class="op" id="8141652">:=</span>&nbsp;<span class="builtinfunc" id="8141655">make</span><span class="op" id="8141659">(</span><span class="op" id="8141660">[</span><span class="op" id="8141661">]</span><span class="builtintype" id="8141662">complex128</span><span class="op" id="8141672">,</span>&nbsp;<span class="num" id="8141674">1000</span><span class="op" id="8141678">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141681">for</span>&nbsp;<span class="ident" id="8141685">i</span>&nbsp;<span class="op" id="8141687">:=</span>&nbsp;<span class="keyword" id="8141690">range</span>&nbsp;<span class="ident" id="8141696">a</span>&nbsp;<span class="op" id="8141698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141702">a</span><span class="op" id="8141703">[</span><span class="ident" id="8141704">i</span><span class="op" id="8141705">]</span>&nbsp;<span class="op" id="8141707">=</span>&nbsp;<span class="num" id="8141709">1.2</span>&nbsp;<span class="op" id="8141713">+</span>&nbsp;<span class="num" id="8141715">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141724">err</span>&nbsp;<span class="op" id="8141728">:=</span>&nbsp;<span class="ident" id="8141731">enc</span><span class="op" id="8141734">.</span><span class="ident" id="8141735">Encode</span><span class="op" id="8141741">(</span><span class="ident" id="8141742">a</span><span class="op" id="8141743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141746">if</span>&nbsp;<span class="ident" id="8141749">err</span>&nbsp;<span class="op" id="8141753">!=</span>&nbsp;<span class="ident" id="8141756">nil</span>&nbsp;<span class="op" id="8141760">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141764">b</span><span class="op" id="8141765">.</span><span class="ident" id="8141766">Fatal</span><span class="op" id="8141771">(</span><span class="ident" id="8141772">err</span><span class="op" id="8141775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141781">x</span>&nbsp;<span class="op" id="8141783">:=</span>&nbsp;<span class="builtinfunc" id="8141786">make</span><span class="op" id="8141790">(</span><span class="op" id="8141791">[</span><span class="op" id="8141792">]</span><span class="builtintype" id="8141793">complex128</span><span class="op" id="8141803">,</span>&nbsp;<span class="num" id="8141805">1000</span><span class="op" id="8141809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141812">bbuf</span>&nbsp;<span class="op" id="8141817">:=</span>&nbsp;<span class="ident" id="8141820">benchmarkBuf</span><span class="op" id="8141832">{</span><span class="ident" id="8141833">data</span><span class="op" id="8141837">:</span>&nbsp;<span class="ident" id="8141839">buf</span><span class="op" id="8141842">.</span><span class="ident" id="8141843">Bytes</span><span class="op" id="8141848">(</span><span class="op" id="8141849">)</span><span class="op" id="8141850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141853">b</span><span class="op" id="8141854">.</span><span class="ident" id="8141855">ResetTimer</span><span class="op" id="8141865">(</span><span class="op" id="8141866">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141869">for</span>&nbsp;<span class="ident" id="8141873">i</span>&nbsp;<span class="op" id="8141875">:=</span>&nbsp;<span class="num" id="8141878">0</span><span class="op" id="8141879">;</span>&nbsp;<span class="ident" id="8141881">i</span>&nbsp;<span class="op" id="8141883">&lt;</span>&nbsp;<span class="ident" id="8141885">b</span><span class="op" id="8141886">.</span><span class="ident" id="8141887">N</span><span class="op" id="8141888">;</span>&nbsp;<span class="ident" id="8141890">i</span><span class="op" id="8141891">++</span>&nbsp;<span class="op" id="8141894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141898">bbuf</span><span class="op" id="8141902">.</span><span class="ident" id="8141903">reset</span><span class="op" id="8141908">(</span><span class="op" id="8141909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141913">dec</span>&nbsp;<span class="op" id="8141917">:=</span>&nbsp;<span class="ident" id="8141920">NewDecoder</span><span class="op" id="8141930">(</span><span class="op" id="8141931">&amp;</span><span class="ident" id="8141932">bbuf</span><span class="op" id="8141936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141940">err</span>&nbsp;<span class="op" id="8141944">:=</span>&nbsp;<span class="ident" id="8141947">dec</span><span class="op" id="8141950">.</span><span class="ident" id="8141951">Decode</span><span class="op" id="8141957">(</span><span class="op" id="8141958">&amp;</span><span class="ident" id="8141959">x</span><span class="op" id="8141960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141964">if</span>&nbsp;<span class="ident" id="8141967">err</span>&nbsp;<span class="op" id="8141971">!=</span>&nbsp;<span class="ident" id="8141974">nil</span>&nbsp;<span class="op" id="8141978">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141983">b</span><span class="op" id="8141984">.</span><span class="ident" id="8141985">Fatal</span><span class="op" id="8141990">(</span><span class="ident" id="8141991">i</span><span class="op" id="8141992">,</span>&nbsp;<span class="ident" id="8141994">err</span><span class="op" id="8141997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142004">}</span><br>
<span class="lineno"></span><span class="op" id="8142006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8142009">func</span>&nbsp;<span class="ident" id="8142014">BenchmarkDecodeFloat64Slice</span><span class="op" id="8142041">(</span><span class="ident" id="8142042">b</span>&nbsp;<span class="op" id="8142044">*</span><span class="ident" id="8142045">testing</span><span class="op" id="8142052">.</span><span class="ident" id="8142053">B</span><span class="op" id="8142054">)</span>&nbsp;<span class="op" id="8142056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142059">var</span>&nbsp;<span class="ident" id="8142063">buf</span>&nbsp;<span class="ident" id="8142067">bytes</span><span class="op" id="8142072">.</span><span class="ident" id="8142073">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142081">enc</span>&nbsp;<span class="op" id="8142085">:=</span>&nbsp;<span class="ident" id="8142088">NewEncoder</span><span class="op" id="8142098">(</span><span class="op" id="8142099">&amp;</span><span class="ident" id="8142100">buf</span><span class="op" id="8142103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142106">a</span>&nbsp;<span class="op" id="8142108">:=</span>&nbsp;<span class="builtinfunc" id="8142111">make</span><span class="op" id="8142115">(</span><span class="op" id="8142116">[</span><span class="op" id="8142117">]</span><span class="builtintype" id="8142118">float64</span><span class="op" id="8142125">,</span>&nbsp;<span class="num" id="8142127">1000</span><span class="op" id="8142131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142134">for</span>&nbsp;<span class="ident" id="8142138">i</span>&nbsp;<span class="op" id="8142140">:=</span>&nbsp;<span class="keyword" id="8142143">range</span>&nbsp;<span class="ident" id="8142149">a</span>&nbsp;<span class="op" id="8142151">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142155">a</span><span class="op" id="8142156">[</span><span class="ident" id="8142157">i</span><span class="op" id="8142158">]</span>&nbsp;<span class="op" id="8142160">=</span>&nbsp;<span class="num" id="8142162">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142173">err</span>&nbsp;<span class="op" id="8142177">:=</span>&nbsp;<span class="ident" id="8142180">enc</span><span class="op" id="8142183">.</span><span class="ident" id="8142184">Encode</span><span class="op" id="8142190">(</span><span class="ident" id="8142191">a</span><span class="op" id="8142192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142195">if</span>&nbsp;<span class="ident" id="8142198">err</span>&nbsp;<span class="op" id="8142202">!=</span>&nbsp;<span class="ident" id="8142205">nil</span>&nbsp;<span class="op" id="8142209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142213">b</span><span class="op" id="8142214">.</span><span class="ident" id="8142215">Fatal</span><span class="op" id="8142220">(</span><span class="ident" id="8142221">err</span><span class="op" id="8142224">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142230">x</span>&nbsp;<span class="op" id="8142232">:=</span>&nbsp;<span class="builtinfunc" id="8142235">make</span><span class="op" id="8142239">(</span><span class="op" id="8142240">[</span><span class="op" id="8142241">]</span><span class="builtintype" id="8142242">float64</span><span class="op" id="8142249">,</span>&nbsp;<span class="num" id="8142251">1000</span><span class="op" id="8142255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142258">bbuf</span>&nbsp;<span class="op" id="8142263">:=</span>&nbsp;<span class="ident" id="8142266">benchmarkBuf</span><span class="op" id="8142278">{</span><span class="ident" id="8142279">data</span><span class="op" id="8142283">:</span>&nbsp;<span class="ident" id="8142285">buf</span><span class="op" id="8142288">.</span><span class="ident" id="8142289">Bytes</span><span class="op" id="8142294">(</span><span class="op" id="8142295">)</span><span class="op" id="8142296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142299">b</span><span class="op" id="8142300">.</span><span class="ident" id="8142301">ResetTimer</span><span class="op" id="8142311">(</span><span class="op" id="8142312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142315">for</span>&nbsp;<span class="ident" id="8142319">i</span>&nbsp;<span class="op" id="8142321">:=</span>&nbsp;<span class="num" id="8142324">0</span><span class="op" id="8142325">;</span>&nbsp;<span class="ident" id="8142327">i</span>&nbsp;<span class="op" id="8142329">&lt;</span>&nbsp;<span class="ident" id="8142331">b</span><span class="op" id="8142332">.</span><span class="ident" id="8142333">N</span><span class="op" id="8142334">;</span>&nbsp;<span class="ident" id="8142336">i</span><span class="op" id="8142337">++</span>&nbsp;<span class="op" id="8142340">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142344">bbuf</span><span class="op" id="8142348">.</span><span class="ident" id="8142349">reset</span><span class="op" id="8142354">(</span><span class="op" id="8142355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142359">dec</span>&nbsp;<span class="op" id="8142363">:=</span>&nbsp;<span class="ident" id="8142366">NewDecoder</span><span class="op" id="8142376">(</span><span class="op" id="8142377">&amp;</span><span class="ident" id="8142378">bbuf</span><span class="op" id="8142382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142386">err</span>&nbsp;<span class="op" id="8142390">:=</span>&nbsp;<span class="ident" id="8142393">dec</span><span class="op" id="8142396">.</span><span class="ident" id="8142397">Decode</span><span class="op" id="8142403">(</span><span class="op" id="8142404">&amp;</span><span class="ident" id="8142405">x</span><span class="op" id="8142406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142410">if</span>&nbsp;<span class="ident" id="8142413">err</span>&nbsp;<span class="op" id="8142417">!=</span>&nbsp;<span class="ident" id="8142420">nil</span>&nbsp;<span class="op" id="8142424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142429">b</span><span class="op" id="8142430">.</span><span class="ident" id="8142431">Fatal</span><span class="op" id="8142436">(</span><span class="ident" id="8142437">i</span><span class="op" id="8142438">,</span>&nbsp;<span class="ident" id="8142440">err</span><span class="op" id="8142443">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142450">}</span><br>
<span class="lineno"></span><span class="op" id="8142452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8142455">func</span>&nbsp;<span class="ident" id="8142460">BenchmarkDecodeInt32Slice</span><span class="op" id="8142485">(</span><span class="ident" id="8142486">b</span>&nbsp;<span class="op" id="8142488">*</span><span class="ident" id="8142489">testing</span><span class="op" id="8142496">.</span><span class="ident" id="8142497">B</span><span class="op" id="8142498">)</span>&nbsp;<span class="op" id="8142500">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142503">var</span>&nbsp;<span class="ident" id="8142507">buf</span>&nbsp;<span class="ident" id="8142511">bytes</span><span class="op" id="8142516">.</span><span class="ident" id="8142517">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142525">enc</span>&nbsp;<span class="op" id="8142529">:=</span>&nbsp;<span class="ident" id="8142532">NewEncoder</span><span class="op" id="8142542">(</span><span class="op" id="8142543">&amp;</span><span class="ident" id="8142544">buf</span><span class="op" id="8142547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142550">a</span>&nbsp;<span class="op" id="8142552">:=</span>&nbsp;<span class="builtinfunc" id="8142555">make</span><span class="op" id="8142559">(</span><span class="op" id="8142560">[</span><span class="op" id="8142561">]</span><span class="builtintype" id="8142562">int32</span><span class="op" id="8142567">,</span>&nbsp;<span class="num" id="8142569">1000</span><span class="op" id="8142573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142576">for</span>&nbsp;<span class="ident" id="8142580">i</span>&nbsp;<span class="op" id="8142582">:=</span>&nbsp;<span class="keyword" id="8142585">range</span>&nbsp;<span class="ident" id="8142591">a</span>&nbsp;<span class="op" id="8142593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142597">a</span><span class="op" id="8142598">[</span><span class="ident" id="8142599">i</span><span class="op" id="8142600">]</span>&nbsp;<span class="op" id="8142602">=</span>&nbsp;<span class="num" id="8142604">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142613">err</span>&nbsp;<span class="op" id="8142617">:=</span>&nbsp;<span class="ident" id="8142620">enc</span><span class="op" id="8142623">.</span><span class="ident" id="8142624">Encode</span><span class="op" id="8142630">(</span><span class="ident" id="8142631">a</span><span class="op" id="8142632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142635">if</span>&nbsp;<span class="ident" id="8142638">err</span>&nbsp;<span class="op" id="8142642">!=</span>&nbsp;<span class="ident" id="8142645">nil</span>&nbsp;<span class="op" id="8142649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142653">b</span><span class="op" id="8142654">.</span><span class="ident" id="8142655">Fatal</span><span class="op" id="8142660">(</span><span class="ident" id="8142661">err</span><span class="op" id="8142664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142667">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142670">x</span>&nbsp;<span class="op" id="8142672">:=</span>&nbsp;<span class="builtinfunc" id="8142675">make</span><span class="op" id="8142679">(</span><span class="op" id="8142680">[</span><span class="op" id="8142681">]</span><span class="builtintype" id="8142682">int32</span><span class="op" id="8142687">,</span>&nbsp;<span class="num" id="8142689">1000</span><span class="op" id="8142693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142696">bbuf</span>&nbsp;<span class="op" id="8142701">:=</span>&nbsp;<span class="ident" id="8142704">benchmarkBuf</span><span class="op" id="8142716">{</span><span class="ident" id="8142717">data</span><span class="op" id="8142721">:</span>&nbsp;<span class="ident" id="8142723">buf</span><span class="op" id="8142726">.</span><span class="ident" id="8142727">Bytes</span><span class="op" id="8142732">(</span><span class="op" id="8142733">)</span><span class="op" id="8142734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142737">b</span><span class="op" id="8142738">.</span><span class="ident" id="8142739">ResetTimer</span><span class="op" id="8142749">(</span><span class="op" id="8142750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142753">for</span>&nbsp;<span class="ident" id="8142757">i</span>&nbsp;<span class="op" id="8142759">:=</span>&nbsp;<span class="num" id="8142762">0</span><span class="op" id="8142763">;</span>&nbsp;<span class="ident" id="8142765">i</span>&nbsp;<span class="op" id="8142767">&lt;</span>&nbsp;<span class="ident" id="8142769">b</span><span class="op" id="8142770">.</span><span class="ident" id="8142771">N</span><span class="op" id="8142772">;</span>&nbsp;<span class="ident" id="8142774">i</span><span class="op" id="8142775">++</span>&nbsp;<span class="op" id="8142778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142782">bbuf</span><span class="op" id="8142786">.</span><span class="ident" id="8142787">reset</span><span class="op" id="8142792">(</span><span class="op" id="8142793">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142797">dec</span>&nbsp;<span class="op" id="8142801">:=</span>&nbsp;<span class="ident" id="8142804">NewDecoder</span><span class="op" id="8142814">(</span><span class="op" id="8142815">&amp;</span><span class="ident" id="8142816">bbuf</span><span class="op" id="8142820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142824">err</span>&nbsp;<span class="op" id="8142828">:=</span>&nbsp;<span class="ident" id="8142831">dec</span><span class="op" id="8142834">.</span><span class="ident" id="8142835">Decode</span><span class="op" id="8142841">(</span><span class="op" id="8142842">&amp;</span><span class="ident" id="8142843">x</span><span class="op" id="8142844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142848">if</span>&nbsp;<span class="ident" id="8142851">err</span>&nbsp;<span class="op" id="8142855">!=</span>&nbsp;<span class="ident" id="8142858">nil</span>&nbsp;<span class="op" id="8142862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142867">b</span><span class="op" id="8142868">.</span><span class="ident" id="8142869">Fatal</span><span class="op" id="8142874">(</span><span class="ident" id="8142875">i</span><span class="op" id="8142876">,</span>&nbsp;<span class="ident" id="8142878">err</span><span class="op" id="8142881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142885">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142888">}</span><br>
<span class="lineno"></span><span class="op" id="8142890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8142893">func</span>&nbsp;<span class="ident" id="8142898">BenchmarkDecodeStringSlice</span><span class="op" id="8142924">(</span><span class="ident" id="8142925">b</span>&nbsp;<span class="op" id="8142927">*</span><span class="ident" id="8142928">testing</span><span class="op" id="8142935">.</span><span class="ident" id="8142936">B</span><span class="op" id="8142937">)</span>&nbsp;<span class="op" id="8142939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142942">var</span>&nbsp;<span class="ident" id="8142946">buf</span>&nbsp;<span class="ident" id="8142950">bytes</span><span class="op" id="8142955">.</span><span class="ident" id="8142956">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142964">enc</span>&nbsp;<span class="op" id="8142968">:=</span>&nbsp;<span class="ident" id="8142971">NewEncoder</span><span class="op" id="8142981">(</span><span class="op" id="8142982">&amp;</span><span class="ident" id="8142983">buf</span><span class="op" id="8142986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142989">a</span>&nbsp;<span class="op" id="8142991">:=</span>&nbsp;<span class="builtinfunc" id="8142994">make</span><span class="op" id="8142998">(</span><span class="op" id="8142999">[</span><span class="op" id="8143000">]</span><span class="builtintype" id="8143001">string</span><span class="op" id="8143007">,</span>&nbsp;<span class="num" id="8143009">1000</span><span class="op" id="8143013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143016">for</span>&nbsp;<span class="ident" id="8143020">i</span>&nbsp;<span class="op" id="8143022">:=</span>&nbsp;<span class="keyword" id="8143025">range</span>&nbsp;<span class="ident" id="8143031">a</span>&nbsp;<span class="op" id="8143033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143037">a</span><span class="op" id="8143038">[</span><span class="ident" id="8143039">i</span><span class="op" id="8143040">]</span>&nbsp;<span class="op" id="8143042">=</span>&nbsp;<span class="string" id="8143044">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143063">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143066">err</span>&nbsp;<span class="op" id="8143070">:=</span>&nbsp;<span class="ident" id="8143073">enc</span><span class="op" id="8143076">.</span><span class="ident" id="8143077">Encode</span><span class="op" id="8143083">(</span><span class="ident" id="8143084">a</span><span class="op" id="8143085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143088">if</span>&nbsp;<span class="ident" id="8143091">err</span>&nbsp;<span class="op" id="8143095">!=</span>&nbsp;<span class="ident" id="8143098">nil</span>&nbsp;<span class="op" id="8143102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143106">b</span><span class="op" id="8143107">.</span><span class="ident" id="8143108">Fatal</span><span class="op" id="8143113">(</span><span class="ident" id="8143114">err</span><span class="op" id="8143117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143123">x</span>&nbsp;<span class="op" id="8143125">:=</span>&nbsp;<span class="builtinfunc" id="8143128">make</span><span class="op" id="8143132">(</span><span class="op" id="8143133">[</span><span class="op" id="8143134">]</span><span class="builtintype" id="8143135">string</span><span class="op" id="8143141">,</span>&nbsp;<span class="num" id="8143143">1000</span><span class="op" id="8143147">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143150">bbuf</span>&nbsp;<span class="op" id="8143155">:=</span>&nbsp;<span class="ident" id="8143158">benchmarkBuf</span><span class="op" id="8143170">{</span><span class="ident" id="8143171">data</span><span class="op" id="8143175">:</span>&nbsp;<span class="ident" id="8143177">buf</span><span class="op" id="8143180">.</span><span class="ident" id="8143181">Bytes</span><span class="op" id="8143186">(</span><span class="op" id="8143187">)</span><span class="op" id="8143188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143191">b</span><span class="op" id="8143192">.</span><span class="ident" id="8143193">ResetTimer</span><span class="op" id="8143203">(</span><span class="op" id="8143204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143207">for</span>&nbsp;<span class="ident" id="8143211">i</span>&nbsp;<span class="op" id="8143213">:=</span>&nbsp;<span class="num" id="8143216">0</span><span class="op" id="8143217">;</span>&nbsp;<span class="ident" id="8143219">i</span>&nbsp;<span class="op" id="8143221">&lt;</span>&nbsp;<span class="ident" id="8143223">b</span><span class="op" id="8143224">.</span><span class="ident" id="8143225">N</span><span class="op" id="8143226">;</span>&nbsp;<span class="ident" id="8143228">i</span><span class="op" id="8143229">++</span>&nbsp;<span class="op" id="8143232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143236">bbuf</span><span class="op" id="8143240">.</span><span class="ident" id="8143241">reset</span><span class="op" id="8143246">(</span><span class="op" id="8143247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143251">dec</span>&nbsp;<span class="op" id="8143255">:=</span>&nbsp;<span class="ident" id="8143258">NewDecoder</span><span class="op" id="8143268">(</span><span class="op" id="8143269">&amp;</span><span class="ident" id="8143270">bbuf</span><span class="op" id="8143274">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143278">err</span>&nbsp;<span class="op" id="8143282">:=</span>&nbsp;<span class="ident" id="8143285">dec</span><span class="op" id="8143288">.</span><span class="ident" id="8143289">Decode</span><span class="op" id="8143295">(</span><span class="op" id="8143296">&amp;</span><span class="ident" id="8143297">x</span><span class="op" id="8143298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143302">if</span>&nbsp;<span class="ident" id="8143305">err</span>&nbsp;<span class="op" id="8143309">!=</span>&nbsp;<span class="ident" id="8143312">nil</span>&nbsp;<span class="op" id="8143316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143321">b</span><span class="op" id="8143322">.</span><span class="ident" id="8143323">Fatal</span><span class="op" id="8143328">(</span><span class="ident" id="8143329">i</span><span class="op" id="8143330">,</span>&nbsp;<span class="ident" id="8143332">err</span><span class="op" id="8143335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143342">}</span><br>
<span class="lineno">325</span><span class="op" id="8143344">}</span>
</div>
</body>
</html>
