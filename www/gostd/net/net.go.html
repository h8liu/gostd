<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html" class="current">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3967915">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3967970">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3968024">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3968075">/*<br>
<span class="lineno"></span>Package&nbsp;net&nbsp;provides&nbsp;a&nbsp;portable&nbsp;interface&nbsp;for&nbsp;network&nbsp;I/O,&nbsp;including<br>
<span class="lineno"></span>TCP/IP,&nbsp;UDP,&nbsp;domain&nbsp;name&nbsp;resolution,&nbsp;and&nbsp;Unix&nbsp;domain&nbsp;sockets.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Although&nbsp;the&nbsp;package&nbsp;provides&nbsp;access&nbsp;to&nbsp;low-level&nbsp;networking<br>
<span class="lineno">10</span>primitives,&nbsp;most&nbsp;clients&nbsp;will&nbsp;need&nbsp;only&nbsp;the&nbsp;basic&nbsp;interface&nbsp;provided<br>
<span class="lineno"></span>by&nbsp;the&nbsp;Dial,&nbsp;Listen,&nbsp;and&nbsp;Accept&nbsp;functions&nbsp;and&nbsp;the&nbsp;associated<br>
<span class="lineno"></span>Conn&nbsp;and&nbsp;Listener&nbsp;interfaces.&nbsp;The&nbsp;crypto/tls&nbsp;package&nbsp;uses<br>
<span class="lineno"></span>the&nbsp;same&nbsp;interfaces&nbsp;and&nbsp;similar&nbsp;Dial&nbsp;and&nbsp;Listen&nbsp;functions.<br>
<span class="lineno"></span><br>
<span class="lineno">15</span>The&nbsp;Dial&nbsp;function&nbsp;connects&nbsp;to&nbsp;a&nbsp;server:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;conn,&nbsp;err&nbsp;:=&nbsp;net.Dial(&#34;tcp&#34;,&nbsp;&#34;google.com:80&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Fprintf(conn,&nbsp;&#34;GET&nbsp;/&nbsp;HTTP/1.0\r\n\r\n&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;status,&nbsp;err&nbsp;:=&nbsp;bufio.NewReader(conn).ReadString(&#39;\n&#39;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
<span class="lineno"></span><br>
<span class="lineno">25</span>The&nbsp;Listen&nbsp;function&nbsp;creates&nbsp;servers:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ln,&nbsp;err&nbsp;:=&nbsp;net.Listen(&#34;tcp&#34;,&nbsp;&#34;:8080&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn,&nbsp;err&nbsp;:=&nbsp;ln.Accept()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;handleConnection(conn)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3968978">package</span>&nbsp;<span class="ident" id="3968986">net</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="3968991">//&nbsp;TODO(rsc):</span><br>
<span class="lineno"></span><span class="comment" id="3969005">//&nbsp;&nbsp;&nbsp;&nbsp;support&nbsp;for&nbsp;raw&nbsp;ethernet&nbsp;sockets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3969042">import</span>&nbsp;<span class="op" id="3969049">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3969052">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3969062">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3969068">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3969074">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3969085">&#34;time&#34;</span><br>
<span class="lineno">50</span><span class="op" id="3969092">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3969095">//&nbsp;Addr&nbsp;represents&nbsp;a&nbsp;network&nbsp;end&nbsp;point&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3969143">type</span>&nbsp;<span class="ident" id="3969148">Addr</span>&nbsp;<span class="keyword" id="3969153">interface</span>&nbsp;<span class="op" id="3969163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969166">Network</span><span class="op" id="3969173">(</span><span class="op" id="3969174">)</span>&nbsp;<span class="builtintype" id="3969176">string</span>&nbsp;<span class="comment" id="3969183">//&nbsp;name&nbsp;of&nbsp;the&nbsp;network</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969207">String</span><span class="op" id="3969213">(</span><span class="op" id="3969214">)</span>&nbsp;<span class="builtintype" id="3969216">string</span>&nbsp;&nbsp;<span class="comment" id="3969224">//&nbsp;string&nbsp;form&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span><span class="op" id="3969250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3969253">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;generic&nbsp;stream-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3969310">//</span><br>
<span class="lineno">60</span><span class="comment" id="3969313">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Conn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3969381">type</span>&nbsp;<span class="ident" id="3969386">Conn</span>&nbsp;<span class="keyword" id="3969391">interface</span>&nbsp;<span class="op" id="3969401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969404">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;from&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969445">//&nbsp;Read&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969520">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969587">Read</span><span class="op" id="3969591">(</span><span class="ident" id="3969592">b</span>&nbsp;<span class="op" id="3969594">[</span><span class="op" id="3969595">]</span><span class="builtintype" id="3969596">byte</span><span class="op" id="3969600">)</span>&nbsp;<span class="op" id="3969602">(</span><span class="ident" id="3969603">n</span>&nbsp;<span class="builtintype" id="3969605">int</span><span class="op" id="3969608">,</span>&nbsp;<span class="ident" id="3969610">err</span>&nbsp;<span class="builtintype" id="3969614">error</span><span class="op" id="3969619">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969623">//&nbsp;Write&nbsp;writes&nbsp;data&nbsp;to&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969664">//&nbsp;Write&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969740">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969808">Write</span><span class="op" id="3969813">(</span><span class="ident" id="3969814">b</span>&nbsp;<span class="op" id="3969816">[</span><span class="op" id="3969817">]</span><span class="builtintype" id="3969818">byte</span><span class="op" id="3969822">)</span>&nbsp;<span class="op" id="3969824">(</span><span class="ident" id="3969825">n</span>&nbsp;<span class="builtintype" id="3969827">int</span><span class="op" id="3969830">,</span>&nbsp;<span class="ident" id="3969832">err</span>&nbsp;<span class="builtintype" id="3969836">error</span><span class="op" id="3969841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969845">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969878">//&nbsp;Any&nbsp;blocked&nbsp;Read&nbsp;or&nbsp;Write&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3969956">Close</span><span class="op" id="3969961">(</span><span class="op" id="3969962">)</span>&nbsp;<span class="builtintype" id="3969964">error</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3969972">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3970021">LocalAddr</span><span class="op" id="3970030">(</span><span class="op" id="3970031">)</span>&nbsp;<span class="ident" id="3970033">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970040">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3970091">RemoteAddr</span><span class="op" id="3970101">(</span><span class="op" id="3970102">)</span>&nbsp;<span class="ident" id="3970104">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970111">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970172">//&nbsp;with&nbsp;the&nbsp;connection.&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970230">//&nbsp;SetReadDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970272">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970276">//&nbsp;A&nbsp;deadline&nbsp;is&nbsp;an&nbsp;absolute&nbsp;time&nbsp;after&nbsp;which&nbsp;I/O&nbsp;operations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970338">//&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970390">//&nbsp;blocking.&nbsp;The&nbsp;deadline&nbsp;applies&nbsp;to&nbsp;all&nbsp;future&nbsp;I/O,&nbsp;not&nbsp;just</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970453">//&nbsp;the&nbsp;immediately&nbsp;following&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;Write.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970506">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970510">//&nbsp;An&nbsp;idle&nbsp;timeout&nbsp;can&nbsp;be&nbsp;implemented&nbsp;by&nbsp;repeatedly&nbsp;extending</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970573">//&nbsp;the&nbsp;deadline&nbsp;after&nbsp;successful&nbsp;Read&nbsp;or&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970628">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970632">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;I/O&nbsp;operations&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3970695">SetDeadline</span><span class="op" id="3970706">(</span><span class="ident" id="3970707">t</span>&nbsp;<span class="ident" id="3970709">time</span><span class="op" id="3970713">.</span><span class="ident" id="3970714">Time</span><span class="op" id="3970718">)</span>&nbsp;<span class="builtintype" id="3970720">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970728">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970789">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3970842">SetReadDeadline</span><span class="op" id="3970857">(</span><span class="ident" id="3970858">t</span>&nbsp;<span class="ident" id="3970860">time</span><span class="op" id="3970864">.</span><span class="ident" id="3970865">Time</span><span class="op" id="3970869">)</span>&nbsp;<span class="builtintype" id="3970871">error</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970879">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3970942">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3971008">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3971055">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3971109">SetWriteDeadline</span><span class="op" id="3971125">(</span><span class="ident" id="3971126">t</span>&nbsp;<span class="ident" id="3971128">time</span><span class="op" id="3971132">.</span><span class="ident" id="3971133">Time</span><span class="op" id="3971137">)</span>&nbsp;<span class="builtintype" id="3971139">error</span><br>
<span class="lineno"></span><span class="op" id="3971145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3971148">type</span>&nbsp;<span class="ident" id="3971153">conn</span>&nbsp;<span class="keyword" id="3971158">struct</span>&nbsp;<span class="op" id="3971165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3971168">fd</span>&nbsp;<span class="op" id="3971171">*</span><span class="ident" id="3971172">netFD</span><br>
<span class="lineno">110</span><span class="op" id="3971178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3971181">func</span>&nbsp;<span class="op" id="3971186">(</span><span class="ident" id="3971187">c</span>&nbsp;<span class="op" id="3971189">*</span><span class="ident" id="3971190">conn</span><span class="op" id="3971194">)</span>&nbsp;<span class="ident" id="3971196">ok</span><span class="op" id="3971198">(</span><span class="op" id="3971199">)</span>&nbsp;<span class="builtintype" id="3971201">bool</span>&nbsp;<span class="op" id="3971206">{</span>&nbsp;<span class="keyword" id="3971208">return</span>&nbsp;<span class="ident" id="3971215">c</span>&nbsp;<span class="op" id="3971217">!=</span>&nbsp;<span class="builtintype" id="3971220">nil</span>&nbsp;<span class="op" id="3971224">&amp;&amp;</span>&nbsp;<span class="ident" id="3971227">c</span><span class="op" id="3971228">.</span><span class="ident" id="3971229">fd</span>&nbsp;<span class="op" id="3971232">!=</span>&nbsp;<span class="builtintype" id="3971235">nil</span>&nbsp;<span class="op" id="3971239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3971242">//&nbsp;Implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3971284">//&nbsp;Read&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3971325">func</span>&nbsp;<span class="op" id="3971330">(</span><span class="ident" id="3971331">c</span>&nbsp;<span class="op" id="3971333">*</span><span class="ident" id="3971334">conn</span><span class="op" id="3971338">)</span>&nbsp;<span class="ident" id="3971340">Read</span><span class="op" id="3971344">(</span><span class="ident" id="3971345">b</span>&nbsp;<span class="op" id="3971347">[</span><span class="op" id="3971348">]</span><span class="builtintype" id="3971349">byte</span><span class="op" id="3971353">)</span>&nbsp;<span class="op" id="3971355">(</span><span class="builtintype" id="3971356">int</span><span class="op" id="3971359">,</span>&nbsp;<span class="builtintype" id="3971361">error</span><span class="op" id="3971366">)</span>&nbsp;<span class="op" id="3971368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971371">if</span>&nbsp;<span class="op" id="3971374">!</span><span class="ident" id="3971375">c</span><span class="op" id="3971376">.</span><span class="ident" id="3971377">ok</span><span class="op" id="3971379">(</span><span class="op" id="3971380">)</span>&nbsp;<span class="op" id="3971382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971386">return</span>&nbsp;<span class="num" id="3971393">0</span><span class="op" id="3971394">,</span>&nbsp;<span class="ident" id="3971396">syscall</span><span class="op" id="3971403">.</span><span class="ident" id="3971404">EINVAL</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3971412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971415">return</span>&nbsp;<span class="ident" id="3971422">c</span><span class="op" id="3971423">.</span><span class="ident" id="3971424">fd</span><span class="op" id="3971426">.</span><span class="ident" id="3971427">Read</span><span class="op" id="3971431">(</span><span class="ident" id="3971432">b</span><span class="op" id="3971433">)</span><br>
<span class="lineno"></span><span class="op" id="3971435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3971438">//&nbsp;Write&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">125</span><span class="keyword" id="3971481">func</span>&nbsp;<span class="op" id="3971486">(</span><span class="ident" id="3971487">c</span>&nbsp;<span class="op" id="3971489">*</span><span class="ident" id="3971490">conn</span><span class="op" id="3971494">)</span>&nbsp;<span class="ident" id="3971496">Write</span><span class="op" id="3971501">(</span><span class="ident" id="3971502">b</span>&nbsp;<span class="op" id="3971504">[</span><span class="op" id="3971505">]</span><span class="builtintype" id="3971506">byte</span><span class="op" id="3971510">)</span>&nbsp;<span class="op" id="3971512">(</span><span class="builtintype" id="3971513">int</span><span class="op" id="3971516">,</span>&nbsp;<span class="builtintype" id="3971518">error</span><span class="op" id="3971523">)</span>&nbsp;<span class="op" id="3971525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971528">if</span>&nbsp;<span class="op" id="3971531">!</span><span class="ident" id="3971532">c</span><span class="op" id="3971533">.</span><span class="ident" id="3971534">ok</span><span class="op" id="3971536">(</span><span class="op" id="3971537">)</span>&nbsp;<span class="op" id="3971539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971543">return</span>&nbsp;<span class="num" id="3971550">0</span><span class="op" id="3971551">,</span>&nbsp;<span class="ident" id="3971553">syscall</span><span class="op" id="3971560">.</span><span class="ident" id="3971561">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3971569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971572">return</span>&nbsp;<span class="ident" id="3971579">c</span><span class="op" id="3971580">.</span><span class="ident" id="3971581">fd</span><span class="op" id="3971583">.</span><span class="ident" id="3971584">Write</span><span class="op" id="3971589">(</span><span class="ident" id="3971590">b</span><span class="op" id="3971591">)</span><br>
<span class="lineno">130</span><span class="op" id="3971593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3971596">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3971628">func</span>&nbsp;<span class="op" id="3971633">(</span><span class="ident" id="3971634">c</span>&nbsp;<span class="op" id="3971636">*</span><span class="ident" id="3971637">conn</span><span class="op" id="3971641">)</span>&nbsp;<span class="ident" id="3971643">Close</span><span class="op" id="3971648">(</span><span class="op" id="3971649">)</span>&nbsp;<span class="builtintype" id="3971651">error</span>&nbsp;<span class="op" id="3971657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971660">if</span>&nbsp;<span class="op" id="3971663">!</span><span class="ident" id="3971664">c</span><span class="op" id="3971665">.</span><span class="ident" id="3971666">ok</span><span class="op" id="3971668">(</span><span class="op" id="3971669">)</span>&nbsp;<span class="op" id="3971671">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971675">return</span>&nbsp;<span class="ident" id="3971682">syscall</span><span class="op" id="3971689">.</span><span class="ident" id="3971690">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3971698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971701">return</span>&nbsp;<span class="ident" id="3971708">c</span><span class="op" id="3971709">.</span><span class="ident" id="3971710">fd</span><span class="op" id="3971712">.</span><span class="ident" id="3971713">Close</span><span class="op" id="3971718">(</span><span class="op" id="3971719">)</span><br>
<span class="lineno"></span><span class="op" id="3971721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3971724">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3971772">func</span>&nbsp;<span class="op" id="3971777">(</span><span class="ident" id="3971778">c</span>&nbsp;<span class="op" id="3971780">*</span><span class="ident" id="3971781">conn</span><span class="op" id="3971785">)</span>&nbsp;<span class="ident" id="3971787">LocalAddr</span><span class="op" id="3971796">(</span><span class="op" id="3971797">)</span>&nbsp;<span class="ident" id="3971799">Addr</span>&nbsp;<span class="op" id="3971804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971807">if</span>&nbsp;<span class="op" id="3971810">!</span><span class="ident" id="3971811">c</span><span class="op" id="3971812">.</span><span class="ident" id="3971813">ok</span><span class="op" id="3971815">(</span><span class="op" id="3971816">)</span>&nbsp;<span class="op" id="3971818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971822">return</span>&nbsp;<span class="builtintype" id="3971829">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3971834">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971837">return</span>&nbsp;<span class="ident" id="3971844">c</span><span class="op" id="3971845">.</span><span class="ident" id="3971846">fd</span><span class="op" id="3971848">.</span><span class="ident" id="3971849">laddr</span><br>
<span class="lineno"></span><span class="op" id="3971855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3971858">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3971908">func</span>&nbsp;<span class="op" id="3971913">(</span><span class="ident" id="3971914">c</span>&nbsp;<span class="op" id="3971916">*</span><span class="ident" id="3971917">conn</span><span class="op" id="3971921">)</span>&nbsp;<span class="ident" id="3971923">RemoteAddr</span><span class="op" id="3971933">(</span><span class="op" id="3971934">)</span>&nbsp;<span class="ident" id="3971936">Addr</span>&nbsp;<span class="op" id="3971941">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971944">if</span>&nbsp;<span class="op" id="3971947">!</span><span class="ident" id="3971948">c</span><span class="op" id="3971949">.</span><span class="ident" id="3971950">ok</span><span class="op" id="3971952">(</span><span class="op" id="3971953">)</span>&nbsp;<span class="op" id="3971955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971959">return</span>&nbsp;<span class="builtintype" id="3971966">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3971971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3971974">return</span>&nbsp;<span class="ident" id="3971981">c</span><span class="op" id="3971982">.</span><span class="ident" id="3971983">fd</span><span class="op" id="3971985">.</span><span class="ident" id="3971986">raddr</span><br>
<span class="lineno"></span><span class="op" id="3971992">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3971995">//&nbsp;SetDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3972050">func</span>&nbsp;<span class="op" id="3972055">(</span><span class="ident" id="3972056">c</span>&nbsp;<span class="op" id="3972058">*</span><span class="ident" id="3972059">conn</span><span class="op" id="3972063">)</span>&nbsp;<span class="ident" id="3972065">SetDeadline</span><span class="op" id="3972076">(</span><span class="ident" id="3972077">t</span>&nbsp;<span class="ident" id="3972079">time</span><span class="op" id="3972083">.</span><span class="ident" id="3972084">Time</span><span class="op" id="3972088">)</span>&nbsp;<span class="builtintype" id="3972090">error</span>&nbsp;<span class="op" id="3972096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972099">if</span>&nbsp;<span class="op" id="3972102">!</span><span class="ident" id="3972103">c</span><span class="op" id="3972104">.</span><span class="ident" id="3972105">ok</span><span class="op" id="3972107">(</span><span class="op" id="3972108">)</span>&nbsp;<span class="op" id="3972110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972114">return</span>&nbsp;<span class="ident" id="3972121">syscall</span><span class="op" id="3972128">.</span><span class="ident" id="3972129">EINVAL</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972140">return</span>&nbsp;<span class="ident" id="3972147">c</span><span class="op" id="3972148">.</span><span class="ident" id="3972149">fd</span><span class="op" id="3972151">.</span><span class="ident" id="3972152">setDeadline</span><span class="op" id="3972163">(</span><span class="ident" id="3972164">t</span><span class="op" id="3972165">)</span><br>
<span class="lineno"></span><span class="op" id="3972167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3972170">//&nbsp;SetReadDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetReadDeadline&nbsp;method.</span><br>
<span class="lineno">165</span><span class="keyword" id="3972233">func</span>&nbsp;<span class="op" id="3972238">(</span><span class="ident" id="3972239">c</span>&nbsp;<span class="op" id="3972241">*</span><span class="ident" id="3972242">conn</span><span class="op" id="3972246">)</span>&nbsp;<span class="ident" id="3972248">SetReadDeadline</span><span class="op" id="3972263">(</span><span class="ident" id="3972264">t</span>&nbsp;<span class="ident" id="3972266">time</span><span class="op" id="3972270">.</span><span class="ident" id="3972271">Time</span><span class="op" id="3972275">)</span>&nbsp;<span class="builtintype" id="3972277">error</span>&nbsp;<span class="op" id="3972283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972286">if</span>&nbsp;<span class="op" id="3972289">!</span><span class="ident" id="3972290">c</span><span class="op" id="3972291">.</span><span class="ident" id="3972292">ok</span><span class="op" id="3972294">(</span><span class="op" id="3972295">)</span>&nbsp;<span class="op" id="3972297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972301">return</span>&nbsp;<span class="ident" id="3972308">syscall</span><span class="op" id="3972315">.</span><span class="ident" id="3972316">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972327">return</span>&nbsp;<span class="ident" id="3972334">c</span><span class="op" id="3972335">.</span><span class="ident" id="3972336">fd</span><span class="op" id="3972338">.</span><span class="ident" id="3972339">setReadDeadline</span><span class="op" id="3972354">(</span><span class="ident" id="3972355">t</span><span class="op" id="3972356">)</span><br>
<span class="lineno">170</span><span class="op" id="3972358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3972361">//&nbsp;SetWriteDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetWriteDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3972426">func</span>&nbsp;<span class="op" id="3972431">(</span><span class="ident" id="3972432">c</span>&nbsp;<span class="op" id="3972434">*</span><span class="ident" id="3972435">conn</span><span class="op" id="3972439">)</span>&nbsp;<span class="ident" id="3972441">SetWriteDeadline</span><span class="op" id="3972457">(</span><span class="ident" id="3972458">t</span>&nbsp;<span class="ident" id="3972460">time</span><span class="op" id="3972464">.</span><span class="ident" id="3972465">Time</span><span class="op" id="3972469">)</span>&nbsp;<span class="builtintype" id="3972471">error</span>&nbsp;<span class="op" id="3972477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972480">if</span>&nbsp;<span class="op" id="3972483">!</span><span class="ident" id="3972484">c</span><span class="op" id="3972485">.</span><span class="ident" id="3972486">ok</span><span class="op" id="3972488">(</span><span class="op" id="3972489">)</span>&nbsp;<span class="op" id="3972491">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972495">return</span>&nbsp;<span class="ident" id="3972502">syscall</span><span class="op" id="3972509">.</span><span class="ident" id="3972510">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972521">return</span>&nbsp;<span class="ident" id="3972528">c</span><span class="op" id="3972529">.</span><span class="ident" id="3972530">fd</span><span class="op" id="3972532">.</span><span class="ident" id="3972533">setWriteDeadline</span><span class="op" id="3972549">(</span><span class="ident" id="3972550">t</span><span class="op" id="3972551">)</span><br>
<span class="lineno"></span><span class="op" id="3972553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3972556">//&nbsp;SetReadBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3972613">//&nbsp;receive&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3972663">func</span>&nbsp;<span class="op" id="3972668">(</span><span class="ident" id="3972669">c</span>&nbsp;<span class="op" id="3972671">*</span><span class="ident" id="3972672">conn</span><span class="op" id="3972676">)</span>&nbsp;<span class="ident" id="3972678">SetReadBuffer</span><span class="op" id="3972691">(</span><span class="ident" id="3972692">bytes</span>&nbsp;<span class="builtintype" id="3972698">int</span><span class="op" id="3972701">)</span>&nbsp;<span class="builtintype" id="3972703">error</span>&nbsp;<span class="op" id="3972709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972712">if</span>&nbsp;<span class="op" id="3972715">!</span><span class="ident" id="3972716">c</span><span class="op" id="3972717">.</span><span class="ident" id="3972718">ok</span><span class="op" id="3972720">(</span><span class="op" id="3972721">)</span>&nbsp;<span class="op" id="3972723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972727">return</span>&nbsp;<span class="ident" id="3972734">syscall</span><span class="op" id="3972741">.</span><span class="ident" id="3972742">EINVAL</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972753">return</span>&nbsp;<span class="ident" id="3972760">setReadBuffer</span><span class="op" id="3972773">(</span><span class="ident" id="3972774">c</span><span class="op" id="3972775">.</span><span class="ident" id="3972776">fd</span><span class="op" id="3972778">,</span>&nbsp;<span class="ident" id="3972780">bytes</span><span class="op" id="3972785">)</span><br>
<span class="lineno"></span><span class="op" id="3972787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3972790">//&nbsp;SetWriteBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno">190</span><span class="comment" id="3972848">//&nbsp;transmit&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3972899">func</span>&nbsp;<span class="op" id="3972904">(</span><span class="ident" id="3972905">c</span>&nbsp;<span class="op" id="3972907">*</span><span class="ident" id="3972908">conn</span><span class="op" id="3972912">)</span>&nbsp;<span class="ident" id="3972914">SetWriteBuffer</span><span class="op" id="3972928">(</span><span class="ident" id="3972929">bytes</span>&nbsp;<span class="builtintype" id="3972935">int</span><span class="op" id="3972938">)</span>&nbsp;<span class="builtintype" id="3972940">error</span>&nbsp;<span class="op" id="3972946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972949">if</span>&nbsp;<span class="op" id="3972952">!</span><span class="ident" id="3972953">c</span><span class="op" id="3972954">.</span><span class="ident" id="3972955">ok</span><span class="op" id="3972957">(</span><span class="op" id="3972958">)</span>&nbsp;<span class="op" id="3972960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972964">return</span>&nbsp;<span class="ident" id="3972971">syscall</span><span class="op" id="3972978">.</span><span class="ident" id="3972979">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3972987">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3972990">return</span>&nbsp;<span class="ident" id="3972997">setWriteBuffer</span><span class="op" id="3973011">(</span><span class="ident" id="3973012">c</span><span class="op" id="3973013">.</span><span class="ident" id="3973014">fd</span><span class="op" id="3973016">,</span>&nbsp;<span class="ident" id="3973018">bytes</span><span class="op" id="3973023">)</span><br>
<span class="lineno"></span><span class="op" id="3973025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3973028">//&nbsp;File&nbsp;sets&nbsp;the&nbsp;underlying&nbsp;os.File&nbsp;to&nbsp;blocking&nbsp;mode&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span><span class="comment" id="3973101">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno">200</span><span class="comment" id="3973164">//&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="3973229">//</span><br>
<span class="lineno"></span><span class="comment" id="3973232">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;connection&#39;s.</span><br>
<span class="lineno"></span><span class="comment" id="3973310">//&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original&nbsp;using&nbsp;this&nbsp;duplicate</span><br>
<span class="lineno"></span><span class="comment" id="3973382">//&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno">205</span><span class="keyword" id="3973425">func</span>&nbsp;<span class="op" id="3973430">(</span><span class="ident" id="3973431">c</span>&nbsp;<span class="op" id="3973433">*</span><span class="ident" id="3973434">conn</span><span class="op" id="3973438">)</span>&nbsp;<span class="ident" id="3973440">File</span><span class="op" id="3973444">(</span><span class="op" id="3973445">)</span>&nbsp;<span class="op" id="3973447">(</span><span class="ident" id="3973448">f</span>&nbsp;<span class="op" id="3973450">*</span><span class="ident" id="3973451">os</span><span class="op" id="3973453">.</span><span class="ident" id="3973454">File</span><span class="op" id="3973458">,</span>&nbsp;<span class="ident" id="3973460">err</span>&nbsp;<span class="builtintype" id="3973464">error</span><span class="op" id="3973469">)</span>&nbsp;<span class="op" id="3973471">{</span>&nbsp;<span class="keyword" id="3973473">return</span>&nbsp;<span class="ident" id="3973480">c</span><span class="op" id="3973481">.</span><span class="ident" id="3973482">fd</span><span class="op" id="3973484">.</span><span class="ident" id="3973485">dup</span><span class="op" id="3973488">(</span><span class="op" id="3973489">)</span>&nbsp;<span class="op" id="3973491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3973494">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;network&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3973534">type</span>&nbsp;<span class="ident" id="3973539">Error</span>&nbsp;<span class="keyword" id="3973545">interface</span>&nbsp;<span class="op" id="3973555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3973558">error</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3973565">Timeout</span><span class="op" id="3973572">(</span><span class="op" id="3973573">)</span>&nbsp;<span class="builtintype" id="3973575">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3973582">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;a&nbsp;timeout?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3973610">Temporary</span><span class="op" id="3973619">(</span><span class="op" id="3973620">)</span>&nbsp;<span class="builtintype" id="3973622">bool</span>&nbsp;<span class="comment" id="3973627">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;temporary?</span><br>
<span class="lineno"></span><span class="op" id="3973654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3973657">//&nbsp;PacketConn&nbsp;is&nbsp;a&nbsp;generic&nbsp;packet-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">215</span><span class="comment" id="3973720">//</span><br>
<span class="lineno"></span><span class="comment" id="3973723">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;PacketConn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3973797">type</span>&nbsp;<span class="ident" id="3973802">PacketConn</span>&nbsp;<span class="keyword" id="3973813">interface</span>&nbsp;<span class="op" id="3973823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3973826">//&nbsp;ReadFrom&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;the&nbsp;connection,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3973875">//&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3973933">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3973985">//&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974008">//&nbsp;ReadFrom&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974056">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974118">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3974159">ReadFrom</span><span class="op" id="3974167">(</span><span class="ident" id="3974168">b</span>&nbsp;<span class="op" id="3974170">[</span><span class="op" id="3974171">]</span><span class="builtintype" id="3974172">byte</span><span class="op" id="3974176">)</span>&nbsp;<span class="op" id="3974178">(</span><span class="ident" id="3974179">n</span>&nbsp;<span class="builtintype" id="3974181">int</span><span class="op" id="3974184">,</span>&nbsp;<span class="ident" id="3974186">addr</span>&nbsp;<span class="ident" id="3974191">Addr</span><span class="op" id="3974195">,</span>&nbsp;<span class="ident" id="3974197">err</span>&nbsp;<span class="builtintype" id="3974201">error</span><span class="op" id="3974206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974210">//&nbsp;WriteTo&nbsp;writes&nbsp;a&nbsp;packet&nbsp;with&nbsp;payload&nbsp;b&nbsp;to&nbsp;addr.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974262">//&nbsp;WriteTo&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974309">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974371">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974413">//&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3974474">WriteTo</span><span class="op" id="3974481">(</span><span class="ident" id="3974482">b</span>&nbsp;<span class="op" id="3974484">[</span><span class="op" id="3974485">]</span><span class="builtintype" id="3974486">byte</span><span class="op" id="3974490">,</span>&nbsp;<span class="ident" id="3974492">addr</span>&nbsp;<span class="ident" id="3974497">Addr</span><span class="op" id="3974501">)</span>&nbsp;<span class="op" id="3974503">(</span><span class="ident" id="3974504">n</span>&nbsp;<span class="builtintype" id="3974506">int</span><span class="op" id="3974509">,</span>&nbsp;<span class="ident" id="3974511">err</span>&nbsp;<span class="builtintype" id="3974515">error</span><span class="op" id="3974520">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974524">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974557">//&nbsp;Any&nbsp;blocked&nbsp;ReadFrom&nbsp;or&nbsp;WriteTo&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3974641">Close</span><span class="op" id="3974646">(</span><span class="op" id="3974647">)</span>&nbsp;<span class="builtintype" id="3974649">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974657">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3974706">LocalAddr</span><span class="op" id="3974715">(</span><span class="op" id="3974716">)</span>&nbsp;<span class="ident" id="3974718">Addr</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974725">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974786">//&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3974811">SetDeadline</span><span class="op" id="3974822">(</span><span class="ident" id="3974823">t</span>&nbsp;<span class="ident" id="3974825">time</span><span class="op" id="3974829">.</span><span class="ident" id="3974830">Time</span><span class="op" id="3974834">)</span>&nbsp;<span class="builtintype" id="3974836">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974844">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974905">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Read&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3974967">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975009">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3975062">SetReadDeadline</span><span class="op" id="3975077">(</span><span class="ident" id="3975078">t</span>&nbsp;<span class="ident" id="3975080">time</span><span class="op" id="3975084">.</span><span class="ident" id="3975085">Time</span><span class="op" id="3975089">)</span>&nbsp;<span class="builtintype" id="3975091">error</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975099">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975162">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Write&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975225">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975267">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975321">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975387">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3975434">SetWriteDeadline</span><span class="op" id="3975450">(</span><span class="ident" id="3975451">t</span>&nbsp;<span class="ident" id="3975453">time</span><span class="op" id="3975457">.</span><span class="ident" id="3975458">Time</span><span class="op" id="3975462">)</span>&nbsp;<span class="builtintype" id="3975464">error</span><br>
<span class="lineno"></span><span class="op" id="3975470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3975473">var</span>&nbsp;<span class="ident" id="3975477">listenerBacklog</span>&nbsp;<span class="op" id="3975493">=</span>&nbsp;<span class="ident" id="3975495">maxListenerBacklog</span><span class="op" id="3975513">(</span><span class="op" id="3975514">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3975517">//&nbsp;A&nbsp;Listener&nbsp;is&nbsp;a&nbsp;generic&nbsp;network&nbsp;listener&nbsp;for&nbsp;stream-oriented&nbsp;protocols.</span><br>
<span class="lineno"></span><span class="comment" id="3975592">//</span><br>
<span class="lineno"></span><span class="comment" id="3975595">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Listener&nbsp;simultaneously.</span><br>
<span class="lineno">265</span><span class="keyword" id="3975667">type</span>&nbsp;<span class="ident" id="3975672">Listener</span>&nbsp;<span class="keyword" id="3975681">interface</span>&nbsp;<span class="op" id="3975691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975694">//&nbsp;Accept&nbsp;waits&nbsp;for&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;connection&nbsp;to&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3975764">Accept</span><span class="op" id="3975770">(</span><span class="op" id="3975771">)</span>&nbsp;<span class="op" id="3975773">(</span><span class="ident" id="3975774">c</span>&nbsp;<span class="ident" id="3975776">Conn</span><span class="op" id="3975780">,</span>&nbsp;<span class="ident" id="3975782">err</span>&nbsp;<span class="builtintype" id="3975786">error</span><span class="op" id="3975791">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975795">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;listener.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975826">//&nbsp;Any&nbsp;blocked&nbsp;Accept&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3975897">Close</span><span class="op" id="3975902">(</span><span class="op" id="3975903">)</span>&nbsp;<span class="builtintype" id="3975905">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3975913">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3975962">Addr</span><span class="op" id="3975966">(</span><span class="op" id="3975967">)</span>&nbsp;<span class="ident" id="3975969">Addr</span><br>
<span class="lineno">275</span><span class="op" id="3975974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3975977">//&nbsp;Various&nbsp;errors&nbsp;contained&nbsp;in&nbsp;OpError.</span><br>
<span class="lineno"></span><span class="keyword" id="3976017">var</span>&nbsp;<span class="op" id="3976021">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976024">//&nbsp;For&nbsp;connection&nbsp;setup&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976071">errMissingAddress</span>&nbsp;<span class="op" id="3976089">=</span>&nbsp;<span class="ident" id="3976091">errors</span><span class="op" id="3976097">.</span><span class="ident" id="3976098">New</span><span class="op" id="3976101">(</span><span class="string" id="3976102">&#34;missing&nbsp;address&#34;</span><span class="op" id="3976119">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976123">//&nbsp;For&nbsp;both&nbsp;read&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976163">errTimeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3976183">error</span>&nbsp;<span class="op" id="3976189">=</span>&nbsp;<span class="op" id="3976191">&amp;</span><span class="ident" id="3976192">timeoutError</span><span class="op" id="3976204">{</span><span class="op" id="3976205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976208">errClosing</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3976234">=</span>&nbsp;<span class="ident" id="3976236">errors</span><span class="op" id="3976242">.</span><span class="ident" id="3976243">New</span><span class="op" id="3976246">(</span><span class="string" id="3976247">&#34;use&nbsp;of&nbsp;closed&nbsp;network&nbsp;connection&#34;</span><span class="op" id="3976281">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976284">ErrWriteToConnected</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3976310">=</span>&nbsp;<span class="ident" id="3976312">errors</span><span class="op" id="3976318">.</span><span class="ident" id="3976319">New</span><span class="op" id="3976322">(</span><span class="string" id="3976323">&#34;use&nbsp;of&nbsp;WriteTo&nbsp;with&nbsp;pre-connected&nbsp;connection&#34;</span><span class="op" id="3976369">)</span><br>
<span class="lineno"></span><span class="op" id="3976371">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3976374">//&nbsp;OpError&nbsp;is&nbsp;the&nbsp;error&nbsp;type&nbsp;usually&nbsp;returned&nbsp;by&nbsp;functions&nbsp;in&nbsp;the&nbsp;net</span><br>
<span class="lineno"></span><span class="comment" id="3976444">//&nbsp;package.&nbsp;It&nbsp;describes&nbsp;the&nbsp;operation,&nbsp;network&nbsp;type,&nbsp;and&nbsp;address&nbsp;of</span><br>
<span class="lineno">290</span><span class="comment" id="3976513">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3976526">type</span>&nbsp;<span class="ident" id="3976531">OpError</span>&nbsp;<span class="keyword" id="3976539">struct</span>&nbsp;<span class="op" id="3976546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976549">//&nbsp;Op&nbsp;is&nbsp;the&nbsp;operation&nbsp;which&nbsp;caused&nbsp;the&nbsp;error,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976605">//&nbsp;&#34;read&#34;&nbsp;or&nbsp;&#34;write&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976628">Op</span>&nbsp;<span class="builtintype" id="3976631">string</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976640">//&nbsp;Net&nbsp;is&nbsp;the&nbsp;network&nbsp;type&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976698">//&nbsp;such&nbsp;as&nbsp;&#34;tcp&#34;&nbsp;or&nbsp;&#34;udp6&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976727">Net</span>&nbsp;<span class="builtintype" id="3976731">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976740">//&nbsp;Addr&nbsp;is&nbsp;the&nbsp;network&nbsp;address&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976802">Addr</span>&nbsp;<span class="ident" id="3976807">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3976814">//&nbsp;Err&nbsp;is&nbsp;the&nbsp;error&nbsp;that&nbsp;occurred&nbsp;during&nbsp;the&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976871">Err</span>&nbsp;<span class="builtintype" id="3976875">error</span><br>
<span class="lineno">305</span><span class="op" id="3976881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3976884">func</span>&nbsp;<span class="op" id="3976889">(</span><span class="ident" id="3976890">e</span>&nbsp;<span class="op" id="3976892">*</span><span class="ident" id="3976893">OpError</span><span class="op" id="3976900">)</span>&nbsp;<span class="ident" id="3976902">Error</span><span class="op" id="3976907">(</span><span class="op" id="3976908">)</span>&nbsp;<span class="builtintype" id="3976910">string</span>&nbsp;<span class="op" id="3976917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3976920">if</span>&nbsp;<span class="ident" id="3976923">e</span>&nbsp;<span class="op" id="3976925">==</span>&nbsp;<span class="builtintype" id="3976928">nil</span>&nbsp;<span class="op" id="3976932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3976936">return</span>&nbsp;<span class="string" id="3976943">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3976952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976955">s</span>&nbsp;<span class="op" id="3976957">:=</span>&nbsp;<span class="ident" id="3976960">e</span><span class="op" id="3976961">.</span><span class="ident" id="3976962">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3976966">if</span>&nbsp;<span class="ident" id="3976969">e</span><span class="op" id="3976970">.</span><span class="ident" id="3976971">Net</span>&nbsp;<span class="op" id="3976975">!=</span>&nbsp;<span class="string" id="3976978">&#34;&#34;</span>&nbsp;<span class="op" id="3976981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976985">s</span>&nbsp;<span class="op" id="3976987">+=</span>&nbsp;<span class="string" id="3976990">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3976994">+</span>&nbsp;<span class="ident" id="3976996">e</span><span class="op" id="3976997">.</span><span class="ident" id="3976998">Net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3977003">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977006">if</span>&nbsp;<span class="ident" id="3977009">e</span><span class="op" id="3977010">.</span><span class="ident" id="3977011">Addr</span>&nbsp;<span class="op" id="3977016">!=</span>&nbsp;<span class="builtintype" id="3977019">nil</span>&nbsp;<span class="op" id="3977023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977027">s</span>&nbsp;<span class="op" id="3977029">+=</span>&nbsp;<span class="string" id="3977032">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3977036">+</span>&nbsp;<span class="ident" id="3977038">e</span><span class="op" id="3977039">.</span><span class="ident" id="3977040">Addr</span><span class="op" id="3977044">.</span><span class="ident" id="3977045">String</span><span class="op" id="3977051">(</span><span class="op" id="3977052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3977055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977058">s</span>&nbsp;<span class="op" id="3977060">+=</span>&nbsp;<span class="string" id="3977063">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3977068">+</span>&nbsp;<span class="ident" id="3977070">e</span><span class="op" id="3977071">.</span><span class="ident" id="3977072">Err</span><span class="op" id="3977075">.</span><span class="ident" id="3977076">Error</span><span class="op" id="3977081">(</span><span class="op" id="3977082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977085">return</span>&nbsp;<span class="ident" id="3977092">s</span><br>
<span class="lineno">320</span><span class="op" id="3977094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977097">type</span>&nbsp;<span class="ident" id="3977102">temporary</span>&nbsp;<span class="keyword" id="3977112">interface</span>&nbsp;<span class="op" id="3977122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977125">Temporary</span><span class="op" id="3977134">(</span><span class="op" id="3977135">)</span>&nbsp;<span class="builtintype" id="3977137">bool</span><br>
<span class="lineno"></span><span class="op" id="3977142">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="3977145">func</span>&nbsp;<span class="op" id="3977150">(</span><span class="ident" id="3977151">e</span>&nbsp;<span class="op" id="3977153">*</span><span class="ident" id="3977154">OpError</span><span class="op" id="3977161">)</span>&nbsp;<span class="ident" id="3977163">Temporary</span><span class="op" id="3977172">(</span><span class="op" id="3977173">)</span>&nbsp;<span class="builtintype" id="3977175">bool</span>&nbsp;<span class="op" id="3977180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977183">t</span><span class="op" id="3977184">,</span>&nbsp;<span class="ident" id="3977186">ok</span>&nbsp;<span class="op" id="3977189">:=</span>&nbsp;<span class="ident" id="3977192">e</span><span class="op" id="3977193">.</span><span class="ident" id="3977194">Err</span><span class="op" id="3977197">.</span><span class="op" id="3977198">(</span><span class="ident" id="3977199">temporary</span><span class="op" id="3977208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977211">return</span>&nbsp;<span class="ident" id="3977218">ok</span>&nbsp;<span class="op" id="3977221">&amp;&amp;</span>&nbsp;<span class="ident" id="3977224">t</span><span class="op" id="3977225">.</span><span class="ident" id="3977226">Temporary</span><span class="op" id="3977235">(</span><span class="op" id="3977236">)</span><br>
<span class="lineno"></span><span class="op" id="3977238">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="3977241">var</span>&nbsp;<span class="ident" id="3977245">noDeadline</span>&nbsp;<span class="op" id="3977256">=</span>&nbsp;<span class="ident" id="3977258">time</span><span class="op" id="3977262">.</span><span class="ident" id="3977263">Time</span><span class="op" id="3977267">{</span><span class="op" id="3977268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977271">type</span>&nbsp;<span class="ident" id="3977276">timeout</span>&nbsp;<span class="keyword" id="3977284">interface</span>&nbsp;<span class="op" id="3977294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977297">Timeout</span><span class="op" id="3977304">(</span><span class="op" id="3977305">)</span>&nbsp;<span class="builtintype" id="3977307">bool</span><br>
<span class="lineno">335</span><span class="op" id="3977312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977315">func</span>&nbsp;<span class="op" id="3977320">(</span><span class="ident" id="3977321">e</span>&nbsp;<span class="op" id="3977323">*</span><span class="ident" id="3977324">OpError</span><span class="op" id="3977331">)</span>&nbsp;<span class="ident" id="3977333">Timeout</span><span class="op" id="3977340">(</span><span class="op" id="3977341">)</span>&nbsp;<span class="builtintype" id="3977343">bool</span>&nbsp;<span class="op" id="3977348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977351">t</span><span class="op" id="3977352">,</span>&nbsp;<span class="ident" id="3977354">ok</span>&nbsp;<span class="op" id="3977357">:=</span>&nbsp;<span class="ident" id="3977360">e</span><span class="op" id="3977361">.</span><span class="ident" id="3977362">Err</span><span class="op" id="3977365">.</span><span class="op" id="3977366">(</span><span class="ident" id="3977367">timeout</span><span class="op" id="3977374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977377">return</span>&nbsp;<span class="ident" id="3977384">ok</span>&nbsp;<span class="op" id="3977387">&amp;&amp;</span>&nbsp;<span class="ident" id="3977390">t</span><span class="op" id="3977391">.</span><span class="ident" id="3977392">Timeout</span><span class="op" id="3977399">(</span><span class="op" id="3977400">)</span><br>
<span class="lineno">340</span><span class="op" id="3977402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977405">type</span>&nbsp;<span class="ident" id="3977410">timeoutError</span>&nbsp;<span class="keyword" id="3977423">struct</span><span class="op" id="3977429">{</span><span class="op" id="3977430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977433">func</span>&nbsp;<span class="op" id="3977438">(</span><span class="ident" id="3977439">e</span>&nbsp;<span class="op" id="3977441">*</span><span class="ident" id="3977442">timeoutError</span><span class="op" id="3977454">)</span>&nbsp;<span class="ident" id="3977456">Error</span><span class="op" id="3977461">(</span><span class="op" id="3977462">)</span>&nbsp;<span class="builtintype" id="3977464">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3977473">{</span>&nbsp;<span class="keyword" id="3977475">return</span>&nbsp;<span class="string" id="3977482">&#34;i/o&nbsp;timeout&#34;</span>&nbsp;<span class="op" id="3977496">}</span><br>
<span class="lineno">345</span><span class="keyword" id="3977498">func</span>&nbsp;<span class="op" id="3977503">(</span><span class="ident" id="3977504">e</span>&nbsp;<span class="op" id="3977506">*</span><span class="ident" id="3977507">timeoutError</span><span class="op" id="3977519">)</span>&nbsp;<span class="ident" id="3977521">Timeout</span><span class="op" id="3977528">(</span><span class="op" id="3977529">)</span>&nbsp;<span class="builtintype" id="3977531">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3977538">{</span>&nbsp;<span class="keyword" id="3977540">return</span>&nbsp;<span class="builtintype" id="3977547">true</span>&nbsp;<span class="op" id="3977552">}</span><br>
<span class="lineno"></span><span class="keyword" id="3977554">func</span>&nbsp;<span class="op" id="3977559">(</span><span class="ident" id="3977560">e</span>&nbsp;<span class="op" id="3977562">*</span><span class="ident" id="3977563">timeoutError</span><span class="op" id="3977575">)</span>&nbsp;<span class="ident" id="3977577">Temporary</span><span class="op" id="3977586">(</span><span class="op" id="3977587">)</span>&nbsp;<span class="builtintype" id="3977589">bool</span>&nbsp;<span class="op" id="3977594">{</span>&nbsp;<span class="keyword" id="3977596">return</span>&nbsp;<span class="builtintype" id="3977603">true</span>&nbsp;<span class="op" id="3977608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977611">type</span>&nbsp;<span class="ident" id="3977616">AddrError</span>&nbsp;<span class="keyword" id="3977626">struct</span>&nbsp;<span class="op" id="3977633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977636">Err</span>&nbsp;&nbsp;<span class="builtintype" id="3977641">string</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977649">Addr</span>&nbsp;<span class="builtintype" id="3977654">string</span><br>
<span class="lineno"></span><span class="op" id="3977661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977664">func</span>&nbsp;<span class="op" id="3977669">(</span><span class="ident" id="3977670">e</span>&nbsp;<span class="op" id="3977672">*</span><span class="ident" id="3977673">AddrError</span><span class="op" id="3977682">)</span>&nbsp;<span class="ident" id="3977684">Error</span><span class="op" id="3977689">(</span><span class="op" id="3977690">)</span>&nbsp;<span class="builtintype" id="3977692">string</span>&nbsp;<span class="op" id="3977699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977702">if</span>&nbsp;<span class="ident" id="3977705">e</span>&nbsp;<span class="op" id="3977707">==</span>&nbsp;<span class="builtintype" id="3977710">nil</span>&nbsp;<span class="op" id="3977714">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977718">return</span>&nbsp;<span class="string" id="3977725">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3977734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977737">s</span>&nbsp;<span class="op" id="3977739">:=</span>&nbsp;<span class="ident" id="3977742">e</span><span class="op" id="3977743">.</span><span class="ident" id="3977744">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977749">if</span>&nbsp;<span class="ident" id="3977752">e</span><span class="op" id="3977753">.</span><span class="ident" id="3977754">Addr</span>&nbsp;<span class="op" id="3977759">!=</span>&nbsp;<span class="string" id="3977762">&#34;&#34;</span>&nbsp;<span class="op" id="3977765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977769">s</span>&nbsp;<span class="op" id="3977771">+=</span>&nbsp;<span class="string" id="3977774">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3977778">+</span>&nbsp;<span class="ident" id="3977780">e</span><span class="op" id="3977781">.</span><span class="ident" id="3977782">Addr</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3977788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977791">return</span>&nbsp;<span class="ident" id="3977798">s</span><br>
<span class="lineno"></span><span class="op" id="3977800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977803">func</span>&nbsp;<span class="op" id="3977808">(</span><span class="ident" id="3977809">e</span>&nbsp;<span class="op" id="3977811">*</span><span class="ident" id="3977812">AddrError</span><span class="op" id="3977821">)</span>&nbsp;<span class="ident" id="3977823">Temporary</span><span class="op" id="3977832">(</span><span class="op" id="3977833">)</span>&nbsp;<span class="builtintype" id="3977835">bool</span>&nbsp;<span class="op" id="3977840">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977843">return</span>&nbsp;<span class="builtintype" id="3977850">false</span><br>
<span class="lineno"></span><span class="op" id="3977856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977859">func</span>&nbsp;<span class="op" id="3977864">(</span><span class="ident" id="3977865">e</span>&nbsp;<span class="op" id="3977867">*</span><span class="ident" id="3977868">AddrError</span><span class="op" id="3977877">)</span>&nbsp;<span class="ident" id="3977879">Timeout</span><span class="op" id="3977886">(</span><span class="op" id="3977887">)</span>&nbsp;<span class="builtintype" id="3977889">bool</span>&nbsp;<span class="op" id="3977894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3977897">return</span>&nbsp;<span class="builtintype" id="3977904">false</span><br>
<span class="lineno">370</span><span class="op" id="3977910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977913">type</span>&nbsp;<span class="ident" id="3977918">UnknownNetworkError</span>&nbsp;<span class="builtintype" id="3977938">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977946">func</span>&nbsp;<span class="op" id="3977951">(</span><span class="ident" id="3977952">e</span>&nbsp;<span class="ident" id="3977954">UnknownNetworkError</span><span class="op" id="3977973">)</span>&nbsp;<span class="ident" id="3977975">Error</span><span class="op" id="3977980">(</span><span class="op" id="3977981">)</span>&nbsp;<span class="builtintype" id="3977983">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3977992">{</span>&nbsp;<span class="keyword" id="3977994">return</span>&nbsp;<span class="string" id="3978001">&#34;unknown&nbsp;network&nbsp;&#34;</span>&nbsp;<span class="op" id="3978020">+</span>&nbsp;<span class="builtintype" id="3978022">string</span><span class="op" id="3978028">(</span><span class="ident" id="3978029">e</span><span class="op" id="3978030">)</span>&nbsp;<span class="op" id="3978032">}</span><br>
<span class="lineno">375</span><span class="keyword" id="3978034">func</span>&nbsp;<span class="op" id="3978039">(</span><span class="ident" id="3978040">e</span>&nbsp;<span class="ident" id="3978042">UnknownNetworkError</span><span class="op" id="3978061">)</span>&nbsp;<span class="ident" id="3978063">Temporary</span><span class="op" id="3978072">(</span><span class="op" id="3978073">)</span>&nbsp;<span class="builtintype" id="3978075">bool</span>&nbsp;<span class="op" id="3978080">{</span>&nbsp;<span class="keyword" id="3978082">return</span>&nbsp;<span class="builtintype" id="3978089">false</span>&nbsp;<span class="op" id="3978095">}</span><br>
<span class="lineno"></span><span class="keyword" id="3978097">func</span>&nbsp;<span class="op" id="3978102">(</span><span class="ident" id="3978103">e</span>&nbsp;<span class="ident" id="3978105">UnknownNetworkError</span><span class="op" id="3978124">)</span>&nbsp;<span class="ident" id="3978126">Timeout</span><span class="op" id="3978133">(</span><span class="op" id="3978134">)</span>&nbsp;<span class="builtintype" id="3978136">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3978143">{</span>&nbsp;<span class="keyword" id="3978145">return</span>&nbsp;<span class="builtintype" id="3978152">false</span>&nbsp;<span class="op" id="3978158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3978161">type</span>&nbsp;<span class="ident" id="3978166">InvalidAddrError</span>&nbsp;<span class="builtintype" id="3978183">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3978191">func</span>&nbsp;<span class="op" id="3978196">(</span><span class="ident" id="3978197">e</span>&nbsp;<span class="ident" id="3978199">InvalidAddrError</span><span class="op" id="3978215">)</span>&nbsp;<span class="ident" id="3978217">Error</span><span class="op" id="3978222">(</span><span class="op" id="3978223">)</span>&nbsp;<span class="builtintype" id="3978225">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3978234">{</span>&nbsp;<span class="keyword" id="3978236">return</span>&nbsp;<span class="builtintype" id="3978243">string</span><span class="op" id="3978249">(</span><span class="ident" id="3978250">e</span><span class="op" id="3978251">)</span>&nbsp;<span class="op" id="3978253">}</span><br>
<span class="lineno"></span><span class="keyword" id="3978255">func</span>&nbsp;<span class="op" id="3978260">(</span><span class="ident" id="3978261">e</span>&nbsp;<span class="ident" id="3978263">InvalidAddrError</span><span class="op" id="3978279">)</span>&nbsp;<span class="ident" id="3978281">Timeout</span><span class="op" id="3978288">(</span><span class="op" id="3978289">)</span>&nbsp;<span class="builtintype" id="3978291">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3978298">{</span>&nbsp;<span class="keyword" id="3978300">return</span>&nbsp;<span class="builtintype" id="3978307">false</span>&nbsp;<span class="op" id="3978313">}</span><br>
<span class="lineno"></span><span class="keyword" id="3978315">func</span>&nbsp;<span class="op" id="3978320">(</span><span class="ident" id="3978321">e</span>&nbsp;<span class="ident" id="3978323">InvalidAddrError</span><span class="op" id="3978339">)</span>&nbsp;<span class="ident" id="3978341">Temporary</span><span class="op" id="3978350">(</span><span class="op" id="3978351">)</span>&nbsp;<span class="builtintype" id="3978353">bool</span>&nbsp;<span class="op" id="3978358">{</span>&nbsp;<span class="keyword" id="3978360">return</span>&nbsp;<span class="builtintype" id="3978367">false</span>&nbsp;<span class="op" id="3978373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3978376">//&nbsp;DNSConfigError&nbsp;represents&nbsp;an&nbsp;error&nbsp;reading&nbsp;the&nbsp;machine&#39;s&nbsp;DNS&nbsp;configuration.</span><br>
<span class="lineno">385</span><span class="keyword" id="3978455">type</span>&nbsp;<span class="ident" id="3978460">DNSConfigError</span>&nbsp;<span class="keyword" id="3978475">struct</span>&nbsp;<span class="op" id="3978482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3978485">Err</span>&nbsp;<span class="builtintype" id="3978489">error</span><br>
<span class="lineno"></span><span class="op" id="3978495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3978498">func</span>&nbsp;<span class="op" id="3978503">(</span><span class="ident" id="3978504">e</span>&nbsp;<span class="op" id="3978506">*</span><span class="ident" id="3978507">DNSConfigError</span><span class="op" id="3978521">)</span>&nbsp;<span class="ident" id="3978523">Error</span><span class="op" id="3978528">(</span><span class="op" id="3978529">)</span>&nbsp;<span class="builtintype" id="3978531">string</span>&nbsp;<span class="op" id="3978538">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3978541">return</span>&nbsp;<span class="string" id="3978548">&#34;error&nbsp;reading&nbsp;DNS&nbsp;config:&nbsp;&#34;</span>&nbsp;<span class="op" id="3978577">+</span>&nbsp;<span class="ident" id="3978579">e</span><span class="op" id="3978580">.</span><span class="ident" id="3978581">Err</span><span class="op" id="3978584">.</span><span class="ident" id="3978585">Error</span><span class="op" id="3978590">(</span><span class="op" id="3978591">)</span><br>
<span class="lineno"></span><span class="op" id="3978593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3978596">func</span>&nbsp;<span class="op" id="3978601">(</span><span class="ident" id="3978602">e</span>&nbsp;<span class="op" id="3978604">*</span><span class="ident" id="3978605">DNSConfigError</span><span class="op" id="3978619">)</span>&nbsp;<span class="ident" id="3978621">Timeout</span><span class="op" id="3978628">(</span><span class="op" id="3978629">)</span>&nbsp;<span class="builtintype" id="3978631">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3978638">{</span>&nbsp;<span class="keyword" id="3978640">return</span>&nbsp;<span class="builtintype" id="3978647">false</span>&nbsp;<span class="op" id="3978653">}</span><br>
<span class="lineno"></span><span class="keyword" id="3978655">func</span>&nbsp;<span class="op" id="3978660">(</span><span class="ident" id="3978661">e</span>&nbsp;<span class="op" id="3978663">*</span><span class="ident" id="3978664">DNSConfigError</span><span class="op" id="3978678">)</span>&nbsp;<span class="ident" id="3978680">Temporary</span><span class="op" id="3978689">(</span><span class="op" id="3978690">)</span>&nbsp;<span class="builtintype" id="3978692">bool</span>&nbsp;<span class="op" id="3978697">{</span>&nbsp;<span class="keyword" id="3978699">return</span>&nbsp;<span class="builtintype" id="3978706">false</span>&nbsp;<span class="op" id="3978712">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="3978715">type</span>&nbsp;<span class="ident" id="3978720">writerOnly</span>&nbsp;<span class="keyword" id="3978731">struct</span>&nbsp;<span class="op" id="3978738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3978741">io</span><span class="op" id="3978743">.</span><span class="ident" id="3978744">Writer</span><br>
<span class="lineno"></span><span class="op" id="3978751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="3978754">//&nbsp;Fallback&nbsp;implementation&nbsp;of&nbsp;io.ReaderFrom&#39;s&nbsp;ReadFrom,&nbsp;when&nbsp;sendfile&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3978830">//&nbsp;applicable.</span><br>
<span class="lineno"></span><span class="keyword" id="3978845">func</span>&nbsp;<span class="ident" id="3978850">genericReadFrom</span><span class="op" id="3978865">(</span><span class="ident" id="3978866">w</span>&nbsp;<span class="ident" id="3978868">io</span><span class="op" id="3978870">.</span><span class="ident" id="3978871">Writer</span><span class="op" id="3978877">,</span>&nbsp;<span class="ident" id="3978879">r</span>&nbsp;<span class="ident" id="3978881">io</span><span class="op" id="3978883">.</span><span class="ident" id="3978884">Reader</span><span class="op" id="3978890">)</span>&nbsp;<span class="op" id="3978892">(</span><span class="ident" id="3978893">n</span>&nbsp;<span class="ident" id="3978895">int64</span><span class="op" id="3978900">,</span>&nbsp;<span class="ident" id="3978902">err</span>&nbsp;<span class="builtintype" id="3978906">error</span><span class="op" id="3978911">)</span>&nbsp;<span class="op" id="3978913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3978916">//&nbsp;Use&nbsp;wrapper&nbsp;to&nbsp;hide&nbsp;existing&nbsp;r.ReadFrom&nbsp;from&nbsp;io.Copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3978974">return</span>&nbsp;<span class="ident" id="3978981">io</span><span class="op" id="3978983">.</span><span class="ident" id="3978984">Copy</span><span class="op" id="3978988">(</span><span class="ident" id="3978989">writerOnly</span><span class="op" id="3978999">{</span><span class="ident" id="3979000">w</span><span class="op" id="3979001">}</span><span class="op" id="3979002">,</span>&nbsp;<span class="ident" id="3979004">r</span><span class="op" id="3979005">)</span><br>
<span class="lineno">405</span><span class="op" id="3979007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3979010">//&nbsp;Limit&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;cgo-using&nbsp;goroutines,&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="3979074">//&nbsp;each&nbsp;will&nbsp;block&nbsp;an&nbsp;entire&nbsp;operating&nbsp;system&nbsp;thread.&nbsp;The&nbsp;usual&nbsp;culprit</span><br>
<span class="lineno"></span><span class="comment" id="3979146">//&nbsp;is&nbsp;resolving&nbsp;many&nbsp;DNS&nbsp;names&nbsp;in&nbsp;separate&nbsp;goroutines&nbsp;but&nbsp;the&nbsp;DNS</span><br>
<span class="lineno">410</span><span class="comment" id="3979212">//&nbsp;server&nbsp;is&nbsp;not&nbsp;responding.&nbsp;Then&nbsp;the&nbsp;many&nbsp;lookups&nbsp;each&nbsp;use&nbsp;a&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3979284">//&nbsp;thread,&nbsp;and&nbsp;the&nbsp;system&nbsp;or&nbsp;the&nbsp;program&nbsp;runs&nbsp;out&nbsp;of&nbsp;threads.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3979347">var</span>&nbsp;<span class="ident" id="3979351">threadLimit</span>&nbsp;<span class="op" id="3979363">=</span>&nbsp;<span class="builtinfunc" id="3979365">make</span><span class="op" id="3979369">(</span><span class="keyword" id="3979370">chan</span>&nbsp;<span class="keyword" id="3979375">struct</span><span class="op" id="3979381">{</span><span class="op" id="3979382">}</span><span class="op" id="3979383">,</span>&nbsp;<span class="num" id="3979385">500</span><span class="op" id="3979388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="3979391">//&nbsp;Using&nbsp;send&nbsp;for&nbsp;acquire&nbsp;is&nbsp;fine&nbsp;here&nbsp;because&nbsp;we&nbsp;are&nbsp;not&nbsp;using&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="3979460">//&nbsp;to&nbsp;protect&nbsp;any&nbsp;memory.&nbsp;All&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="3979532">//&nbsp;making&nbsp;calls&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3979560">func</span>&nbsp;<span class="ident" id="3979565">acquireThread</span><span class="op" id="3979578">(</span><span class="op" id="3979579">)</span>&nbsp;<span class="op" id="3979581">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3979584">threadLimit</span>&nbsp;<span class="op" id="3979596">&lt;-</span>&nbsp;<span class="keyword" id="3979599">struct</span><span class="op" id="3979605">{</span><span class="op" id="3979606">}</span><span class="op" id="3979607">{</span><span class="op" id="3979608">}</span><br>
<span class="lineno"></span><span class="op" id="3979610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3979613">func</span>&nbsp;<span class="ident" id="3979618">releaseThread</span><span class="op" id="3979631">(</span><span class="op" id="3979632">)</span>&nbsp;<span class="op" id="3979634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3979637">&lt;-</span><span class="ident" id="3979639">threadLimit</span><br>
<span class="lineno">425</span><span class="op" id="3979651">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
