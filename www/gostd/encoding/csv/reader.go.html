<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6303322">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6303377">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6303431">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6303482">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6303550">//</span><br>
<span class="lineno"></span><span class="comment" id="6303553">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6303631">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6303706">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6303756">//</span><br>
<span class="lineno"></span><span class="comment" id="6303759">//&nbsp;&nbsp;&nbsp;&nbsp;field1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6303783">//</span><br>
<span class="lineno"></span><span class="comment" id="6303786">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6303832">//</span><br>
<span class="lineno">15</span><span class="comment" id="6303835">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6303903">//</span><br>
<span class="lineno"></span><span class="comment" id="6303906">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6303985">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6304050">//</span><br>
<span class="lineno">20</span><span class="comment" id="6304053">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6304122">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6304192">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6304202">//</span><br>
<span class="lineno"></span><span class="comment" id="6304205">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6304220">//</span><br>
<span class="lineno"></span><span class="comment" id="6304223">//&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6304255">//</span><br>
<span class="lineno"></span><span class="comment" id="6304258">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6304283">//</span><br>
<span class="lineno">30</span><span class="comment" id="6304286">//&nbsp;&nbsp;&nbsp;&nbsp;{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6304323">//</span><br>
<span class="lineno"></span><span class="comment" id="6304326">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6304396">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6304439">//</span><br>
<span class="lineno">35</span><span class="comment" id="6304442">//&nbsp;&nbsp;&nbsp;&nbsp;&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6304489">//</span><br>
<span class="lineno"></span><span class="comment" id="6304492">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6304506">//</span><br>
<span class="lineno"></span><span class="comment" id="6304509">//&nbsp;&nbsp;&nbsp;&nbsp;{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6304555">//</span><br>
<span class="lineno"></span><span class="comment" id="6304558">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6304615">//</span><br>
<span class="lineno"></span><span class="comment" id="6304618">//&nbsp;&nbsp;&nbsp;&nbsp;&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6304633">//&nbsp;&nbsp;&nbsp;&nbsp;field&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6304656">//</span><br>
<span class="lineno"></span><span class="comment" id="6304659">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6304673">//</span><br>
<span class="lineno"></span><span class="comment" id="6304676">//&nbsp;&nbsp;&nbsp;&nbsp;{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6304692">//&nbsp;&nbsp;&nbsp;&nbsp;field`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6304717">package</span>&nbsp;<span class="ident" id="6304725">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6304730">import</span>&nbsp;<span class="op" id="6304737">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6304740">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6304749">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6304758">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6304768">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6304775">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6304781">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6304791">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6304794">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6304842">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6304890">type</span>&nbsp;<span class="ident" id="6304895">ParseError</span>&nbsp;<span class="keyword" id="6304906">struct</span>&nbsp;<span class="op" id="6304913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6304916">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6304923">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6304929">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6304963">Column</span>&nbsp;<span class="builtintype" id="6304970">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6304976">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6305025">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6305032">error</span>&nbsp;<span class="comment" id="6305038">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6305058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6305061">func</span>&nbsp;<span class="op" id="6305066">(</span><span class="ident" id="6305067">e</span>&nbsp;<span class="op" id="6305069">*</span><span class="ident" id="6305070">ParseError</span><span class="op" id="6305080">)</span>&nbsp;<span class="ident" id="6305082">Error</span><span class="op" id="6305087">(</span><span class="op" id="6305088">)</span>&nbsp;<span class="builtintype" id="6305090">string</span>&nbsp;<span class="op" id="6305097">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6305100">return</span>&nbsp;<span class="ident" id="6305107">fmt</span><span class="op" id="6305110">.</span><span class="ident" id="6305111">Sprintf</span><span class="op" id="6305118">(</span><span class="string" id="6305119">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6305143">,</span>&nbsp;<span class="ident" id="6305145">e</span><span class="op" id="6305146">.</span><span class="ident" id="6305147">Line</span><span class="op" id="6305151">,</span>&nbsp;<span class="ident" id="6305153">e</span><span class="op" id="6305154">.</span><span class="ident" id="6305155">Column</span><span class="op" id="6305161">,</span>&nbsp;<span class="ident" id="6305163">e</span><span class="op" id="6305164">.</span><span class="ident" id="6305165">Err</span><span class="op" id="6305168">)</span><br>
<span class="lineno"></span><span class="op" id="6305170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6305173">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6305238">var</span>&nbsp;<span class="op" id="6305242">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6305245">ErrTrailingComma</span>&nbsp;<span class="op" id="6305262">=</span>&nbsp;<span class="ident" id="6305264">errors</span><span class="op" id="6305270">.</span><span class="ident" id="6305271">New</span><span class="op" id="6305274">(</span><span class="string" id="6305275">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6305307">)</span>&nbsp;<span class="comment" id="6305309">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6305328">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6305345">=</span>&nbsp;<span class="ident" id="6305347">errors</span><span class="op" id="6305353">.</span><span class="ident" id="6305354">New</span><span class="op" id="6305357">(</span><span class="string" id="6305358">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6305387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6305390">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6305407">=</span>&nbsp;<span class="ident" id="6305409">errors</span><span class="op" id="6305415">.</span><span class="ident" id="6305416">New</span><span class="op" id="6305419">(</span><span class="string" id="6305420">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6305444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6305447">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6305464">=</span>&nbsp;<span class="ident" id="6305466">errors</span><span class="op" id="6305472">.</span><span class="ident" id="6305473">New</span><span class="op" id="6305476">(</span><span class="string" id="6305477">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6305509">)</span><br>
<span class="lineno"></span><span class="op" id="6305511">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6305514">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6305565">//</span><br>
<span class="lineno"></span><span class="comment" id="6305568">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6305644">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6305718">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6305752">//</span><br>
<span class="lineno"></span><span class="comment" id="6305755">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6305809">//</span><br>
<span class="lineno"></span><span class="comment" id="6305812">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6305885">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6305919">//</span><br>
<span class="lineno"></span><span class="comment" id="6305922">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6305986">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6306064">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6306137">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6306212">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6306270">//</span><br>
<span class="lineno"></span><span class="comment" id="6306273">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6306345">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6306396">//</span><br>
<span class="lineno"></span><span class="comment" id="6306399">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6306474">type</span>&nbsp;<span class="ident" id="6306479">Reader</span>&nbsp;<span class="keyword" id="6306486">struct</span>&nbsp;<span class="op" id="6306493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306496">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6306513">rune</span>&nbsp;<span class="comment" id="6306518">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306564">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6306581">rune</span>&nbsp;<span class="comment" id="6306586">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306626">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6306643">int</span>&nbsp;&nbsp;<span class="comment" id="6306648">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306689">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6306706">bool</span>&nbsp;<span class="comment" id="6306711">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306733">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6306750">bool</span>&nbsp;<span class="comment" id="6306755">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306801">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6306818">bool</span>&nbsp;<span class="comment" id="6306823">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306846">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6306863">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306868">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6306885">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306890">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6306907">*</span><span class="ident" id="6306908">bufio</span><span class="op" id="6306913">.</span><span class="ident" id="6306914">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306922">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6306939">bytes</span><span class="op" id="6306944">.</span><span class="ident" id="6306945">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6306952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6306955">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6307008">func</span>&nbsp;<span class="ident" id="6307013">NewReader</span><span class="op" id="6307022">(</span><span class="ident" id="6307023">r</span>&nbsp;<span class="ident" id="6307025">io</span><span class="op" id="6307027">.</span><span class="ident" id="6307028">Reader</span><span class="op" id="6307034">)</span>&nbsp;<span class="op" id="6307036">*</span><span class="ident" id="6307037">Reader</span>&nbsp;<span class="op" id="6307044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307047">return</span>&nbsp;<span class="op" id="6307054">&amp;</span><span class="ident" id="6307055">Reader</span><span class="op" id="6307061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307065">Comma</span><span class="op" id="6307070">:</span>&nbsp;<span class="string" id="6307072">&#39;,&#39;</span><span class="op" id="6307075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307079">r</span><span class="op" id="6307080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307086">bufio</span><span class="op" id="6307091">.</span><span class="ident" id="6307092">NewReader</span><span class="op" id="6307101">(</span><span class="ident" id="6307102">r</span><span class="op" id="6307103">)</span><span class="op" id="6307104">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307107">}</span><br>
<span class="lineno"></span><span class="op" id="6307109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6307112">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6307160">func</span>&nbsp;<span class="op" id="6307165">(</span><span class="ident" id="6307166">r</span>&nbsp;<span class="op" id="6307168">*</span><span class="ident" id="6307169">Reader</span><span class="op" id="6307175">)</span>&nbsp;<span class="builtintype" id="6307177">error</span><span class="op" id="6307182">(</span><span class="ident" id="6307183">err</span>&nbsp;<span class="builtintype" id="6307187">error</span><span class="op" id="6307192">)</span>&nbsp;<span class="builtintype" id="6307194">error</span>&nbsp;<span class="op" id="6307200">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307203">return</span>&nbsp;<span class="op" id="6307210">&amp;</span><span class="ident" id="6307211">ParseError</span><span class="op" id="6307221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307225">Line</span><span class="op" id="6307229">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6307233">r</span><span class="op" id="6307234">.</span><span class="ident" id="6307235">line</span><span class="op" id="6307239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307243">Column</span><span class="op" id="6307249">:</span>&nbsp;<span class="ident" id="6307251">r</span><span class="op" id="6307252">.</span><span class="ident" id="6307253">column</span><span class="op" id="6307259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307263">Err</span><span class="op" id="6307266">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307271">err</span><span class="op" id="6307274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307277">}</span><br>
<span class="lineno">130</span><span class="op" id="6307279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6307282">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6307359">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6307393">func</span>&nbsp;<span class="op" id="6307398">(</span><span class="ident" id="6307399">r</span>&nbsp;<span class="op" id="6307401">*</span><span class="ident" id="6307402">Reader</span><span class="op" id="6307408">)</span>&nbsp;<span class="ident" id="6307410">Read</span><span class="op" id="6307414">(</span><span class="op" id="6307415">)</span>&nbsp;<span class="op" id="6307417">(</span><span class="ident" id="6307418">record</span>&nbsp;<span class="op" id="6307425">[</span><span class="op" id="6307426">]</span><span class="builtintype" id="6307427">string</span><span class="op" id="6307433">,</span>&nbsp;<span class="ident" id="6307435">err</span>&nbsp;<span class="builtintype" id="6307439">error</span><span class="op" id="6307444">)</span>&nbsp;<span class="op" id="6307446">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307449">for</span>&nbsp;<span class="op" id="6307453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307457">record</span><span class="op" id="6307463">,</span>&nbsp;<span class="ident" id="6307465">err</span>&nbsp;<span class="op" id="6307469">=</span>&nbsp;<span class="ident" id="6307471">r</span><span class="op" id="6307472">.</span><span class="ident" id="6307473">parseRecord</span><span class="op" id="6307484">(</span><span class="op" id="6307485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307489">if</span>&nbsp;<span class="ident" id="6307492">record</span>&nbsp;<span class="op" id="6307499">!=</span>&nbsp;<span class="builtintype" id="6307502">nil</span>&nbsp;<span class="op" id="6307506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307511">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307519">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307523">if</span>&nbsp;<span class="ident" id="6307526">err</span>&nbsp;<span class="op" id="6307530">!=</span>&nbsp;<span class="builtintype" id="6307533">nil</span>&nbsp;<span class="op" id="6307537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307542">return</span>&nbsp;<span class="builtintype" id="6307549">nil</span><span class="op" id="6307552">,</span>&nbsp;<span class="ident" id="6307554">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307567">if</span>&nbsp;<span class="ident" id="6307570">r</span><span class="op" id="6307571">.</span><span class="ident" id="6307572">FieldsPerRecord</span>&nbsp;<span class="op" id="6307588">&gt;</span>&nbsp;<span class="num" id="6307590">0</span>&nbsp;<span class="op" id="6307592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307596">if</span>&nbsp;<span class="builtinfunc" id="6307599">len</span><span class="op" id="6307602">(</span><span class="ident" id="6307603">record</span><span class="op" id="6307609">)</span>&nbsp;<span class="op" id="6307611">!=</span>&nbsp;<span class="ident" id="6307614">r</span><span class="op" id="6307615">.</span><span class="ident" id="6307616">FieldsPerRecord</span>&nbsp;<span class="op" id="6307632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307637">r</span><span class="op" id="6307638">.</span><span class="ident" id="6307639">column</span>&nbsp;<span class="op" id="6307646">=</span>&nbsp;<span class="num" id="6307648">0</span>&nbsp;<span class="comment" id="6307650">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307682">return</span>&nbsp;<span class="ident" id="6307689">record</span><span class="op" id="6307695">,</span>&nbsp;<span class="ident" id="6307697">r</span><span class="op" id="6307698">.</span><span class="builtintype" id="6307699">error</span><span class="op" id="6307704">(</span><span class="ident" id="6307705">ErrFieldCount</span><span class="op" id="6307718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307722">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307725">}</span>&nbsp;<span class="keyword" id="6307727">else</span>&nbsp;<span class="keyword" id="6307732">if</span>&nbsp;<span class="ident" id="6307735">r</span><span class="op" id="6307736">.</span><span class="ident" id="6307737">FieldsPerRecord</span>&nbsp;<span class="op" id="6307753">==</span>&nbsp;<span class="num" id="6307756">0</span>&nbsp;<span class="op" id="6307758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6307762">r</span><span class="op" id="6307763">.</span><span class="ident" id="6307764">FieldsPerRecord</span>&nbsp;<span class="op" id="6307780">=</span>&nbsp;<span class="builtinfunc" id="6307782">len</span><span class="op" id="6307785">(</span><span class="ident" id="6307786">record</span><span class="op" id="6307792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6307795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6307798">return</span>&nbsp;<span class="ident" id="6307805">record</span><span class="op" id="6307811">,</span>&nbsp;<span class="builtintype" id="6307813">nil</span><br>
<span class="lineno"></span><span class="op" id="6307817">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6307820">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6307871">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6307908">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6307984">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6308062">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6308075">func</span>&nbsp;<span class="op" id="6308080">(</span><span class="ident" id="6308081">r</span>&nbsp;<span class="op" id="6308083">*</span><span class="ident" id="6308084">Reader</span><span class="op" id="6308090">)</span>&nbsp;<span class="ident" id="6308092">ReadAll</span><span class="op" id="6308099">(</span><span class="op" id="6308100">)</span>&nbsp;<span class="op" id="6308102">(</span><span class="ident" id="6308103">records</span>&nbsp;<span class="op" id="6308111">[</span><span class="op" id="6308112">]</span><span class="op" id="6308113">[</span><span class="op" id="6308114">]</span><span class="builtintype" id="6308115">string</span><span class="op" id="6308121">,</span>&nbsp;<span class="ident" id="6308123">err</span>&nbsp;<span class="builtintype" id="6308127">error</span><span class="op" id="6308132">)</span>&nbsp;<span class="op" id="6308134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308137">for</span>&nbsp;<span class="op" id="6308141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308145">record</span><span class="op" id="6308151">,</span>&nbsp;<span class="ident" id="6308153">err</span>&nbsp;<span class="op" id="6308157">:=</span>&nbsp;<span class="ident" id="6308160">r</span><span class="op" id="6308161">.</span><span class="ident" id="6308162">Read</span><span class="op" id="6308166">(</span><span class="op" id="6308167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308171">if</span>&nbsp;<span class="ident" id="6308174">err</span>&nbsp;<span class="op" id="6308178">==</span>&nbsp;<span class="ident" id="6308181">io</span><span class="op" id="6308183">.</span><span class="ident" id="6308184">EOF</span>&nbsp;<span class="op" id="6308188">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308193">return</span>&nbsp;<span class="ident" id="6308200">records</span><span class="op" id="6308207">,</span>&nbsp;<span class="builtintype" id="6308209">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6308215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308219">if</span>&nbsp;<span class="ident" id="6308222">err</span>&nbsp;<span class="op" id="6308226">!=</span>&nbsp;<span class="builtintype" id="6308229">nil</span>&nbsp;<span class="op" id="6308233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308238">return</span>&nbsp;<span class="builtintype" id="6308245">nil</span><span class="op" id="6308248">,</span>&nbsp;<span class="ident" id="6308250">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6308256">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308260">records</span>&nbsp;<span class="op" id="6308268">=</span>&nbsp;<span class="builtinfunc" id="6308270">append</span><span class="op" id="6308276">(</span><span class="ident" id="6308277">records</span><span class="op" id="6308284">,</span>&nbsp;<span class="ident" id="6308286">record</span><span class="op" id="6308292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6308295">}</span><br>
<span class="lineno"></span><span class="op" id="6308297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6308300">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6308372">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6308448">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6308491">func</span>&nbsp;<span class="op" id="6308496">(</span><span class="ident" id="6308497">r</span>&nbsp;<span class="op" id="6308499">*</span><span class="ident" id="6308500">Reader</span><span class="op" id="6308506">)</span>&nbsp;<span class="ident" id="6308508">readRune</span><span class="op" id="6308516">(</span><span class="op" id="6308517">)</span>&nbsp;<span class="op" id="6308519">(</span><span class="builtintype" id="6308520">rune</span><span class="op" id="6308524">,</span>&nbsp;<span class="builtintype" id="6308526">error</span><span class="op" id="6308531">)</span>&nbsp;<span class="op" id="6308533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308536">r1</span><span class="op" id="6308538">,</span>&nbsp;<span class="ident" id="6308540">_</span><span class="op" id="6308541">,</span>&nbsp;<span class="ident" id="6308543">err</span>&nbsp;<span class="op" id="6308547">:=</span>&nbsp;<span class="ident" id="6308550">r</span><span class="op" id="6308551">.</span><span class="ident" id="6308552">r</span><span class="op" id="6308553">.</span><span class="ident" id="6308554">ReadRune</span><span class="op" id="6308562">(</span><span class="op" id="6308563">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6308567">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6308630">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6308692">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308758">if</span>&nbsp;<span class="ident" id="6308761">r1</span>&nbsp;<span class="op" id="6308764">==</span>&nbsp;<span class="string" id="6308767">&#39;\r&#39;</span>&nbsp;<span class="op" id="6308772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308776">r1</span><span class="op" id="6308778">,</span>&nbsp;<span class="ident" id="6308780">_</span><span class="op" id="6308781">,</span>&nbsp;<span class="ident" id="6308783">err</span>&nbsp;<span class="op" id="6308787">=</span>&nbsp;<span class="ident" id="6308789">r</span><span class="op" id="6308790">.</span><span class="ident" id="6308791">r</span><span class="op" id="6308792">.</span><span class="ident" id="6308793">ReadRune</span><span class="op" id="6308801">(</span><span class="op" id="6308802">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308806">if</span>&nbsp;<span class="ident" id="6308809">err</span>&nbsp;<span class="op" id="6308813">==</span>&nbsp;<span class="builtintype" id="6308816">nil</span>&nbsp;<span class="op" id="6308820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308825">if</span>&nbsp;<span class="ident" id="6308828">r1</span>&nbsp;<span class="op" id="6308831">!=</span>&nbsp;<span class="string" id="6308834">&#39;\n&#39;</span>&nbsp;<span class="op" id="6308839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308845">r</span><span class="op" id="6308846">.</span><span class="ident" id="6308847">r</span><span class="op" id="6308848">.</span><span class="ident" id="6308849">UnreadRune</span><span class="op" id="6308859">(</span><span class="op" id="6308860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308866">r1</span>&nbsp;<span class="op" id="6308869">=</span>&nbsp;<span class="string" id="6308871">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6308879">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6308883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6308886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6308889">r</span><span class="op" id="6308890">.</span><span class="ident" id="6308891">column</span><span class="op" id="6308897">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6308901">return</span>&nbsp;<span class="ident" id="6308908">r1</span><span class="op" id="6308910">,</span>&nbsp;<span class="ident" id="6308912">err</span><br>
<span class="lineno"></span><span class="op" id="6308916">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6308919">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6308990">func</span>&nbsp;<span class="op" id="6308995">(</span><span class="ident" id="6308996">r</span>&nbsp;<span class="op" id="6308998">*</span><span class="ident" id="6308999">Reader</span><span class="op" id="6309005">)</span>&nbsp;<span class="ident" id="6309007">skip</span><span class="op" id="6309011">(</span><span class="ident" id="6309012">delim</span>&nbsp;<span class="builtintype" id="6309018">rune</span><span class="op" id="6309022">)</span>&nbsp;<span class="builtintype" id="6309024">error</span>&nbsp;<span class="op" id="6309030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309033">for</span>&nbsp;<span class="op" id="6309037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309041">r1</span><span class="op" id="6309043">,</span>&nbsp;<span class="ident" id="6309045">err</span>&nbsp;<span class="op" id="6309049">:=</span>&nbsp;<span class="ident" id="6309052">r</span><span class="op" id="6309053">.</span><span class="ident" id="6309054">readRune</span><span class="op" id="6309062">(</span><span class="op" id="6309063">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309067">if</span>&nbsp;<span class="ident" id="6309070">err</span>&nbsp;<span class="op" id="6309074">!=</span>&nbsp;<span class="builtintype" id="6309077">nil</span>&nbsp;<span class="op" id="6309081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309086">return</span>&nbsp;<span class="ident" id="6309093">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6309099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309103">if</span>&nbsp;<span class="ident" id="6309106">r1</span>&nbsp;<span class="op" id="6309109">==</span>&nbsp;<span class="ident" id="6309112">delim</span>&nbsp;<span class="op" id="6309118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309123">return</span>&nbsp;<span class="builtintype" id="6309130">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6309136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6309139">}</span><br>
<span class="lineno"></span><span class="op" id="6309141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6309144">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6309204">func</span>&nbsp;<span class="op" id="6309209">(</span><span class="ident" id="6309210">r</span>&nbsp;<span class="op" id="6309212">*</span><span class="ident" id="6309213">Reader</span><span class="op" id="6309219">)</span>&nbsp;<span class="ident" id="6309221">parseRecord</span><span class="op" id="6309232">(</span><span class="op" id="6309233">)</span>&nbsp;<span class="op" id="6309235">(</span><span class="ident" id="6309236">fields</span>&nbsp;<span class="op" id="6309243">[</span><span class="op" id="6309244">]</span><span class="builtintype" id="6309245">string</span><span class="op" id="6309251">,</span>&nbsp;<span class="ident" id="6309253">err</span>&nbsp;<span class="builtintype" id="6309257">error</span><span class="op" id="6309262">)</span>&nbsp;<span class="op" id="6309264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309267">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309328">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309386">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309457">r</span><span class="op" id="6309458">.</span><span class="ident" id="6309459">line</span><span class="op" id="6309463">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309467">r</span><span class="op" id="6309468">.</span><span class="ident" id="6309469">column</span>&nbsp;<span class="op" id="6309476">=</span>&nbsp;<span class="op" id="6309478">-</span><span class="num" id="6309479">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309483">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309543">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309606">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309641">r1</span><span class="op" id="6309643">,</span>&nbsp;<span class="ident" id="6309645">_</span><span class="op" id="6309646">,</span>&nbsp;<span class="ident" id="6309648">err</span>&nbsp;<span class="op" id="6309652">:=</span>&nbsp;<span class="ident" id="6309655">r</span><span class="op" id="6309656">.</span><span class="ident" id="6309657">r</span><span class="op" id="6309658">.</span><span class="ident" id="6309659">ReadRune</span><span class="op" id="6309667">(</span><span class="op" id="6309668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309671">if</span>&nbsp;<span class="ident" id="6309674">err</span>&nbsp;<span class="op" id="6309678">!=</span>&nbsp;<span class="builtintype" id="6309681">nil</span>&nbsp;<span class="op" id="6309685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309689">return</span>&nbsp;<span class="builtintype" id="6309696">nil</span><span class="op" id="6309699">,</span>&nbsp;<span class="ident" id="6309701">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6309706">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309710">if</span>&nbsp;<span class="ident" id="6309713">r</span><span class="op" id="6309714">.</span><span class="ident" id="6309715">Comment</span>&nbsp;<span class="op" id="6309723">!=</span>&nbsp;<span class="num" id="6309726">0</span>&nbsp;<span class="op" id="6309728">&amp;&amp;</span>&nbsp;<span class="ident" id="6309731">r1</span>&nbsp;<span class="op" id="6309734">==</span>&nbsp;<span class="ident" id="6309737">r</span><span class="op" id="6309738">.</span><span class="ident" id="6309739">Comment</span>&nbsp;<span class="op" id="6309747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309751">return</span>&nbsp;<span class="builtintype" id="6309758">nil</span><span class="op" id="6309761">,</span>&nbsp;<span class="ident" id="6309763">r</span><span class="op" id="6309764">.</span><span class="ident" id="6309765">skip</span><span class="op" id="6309769">(</span><span class="string" id="6309770">&#39;\n&#39;</span><span class="op" id="6309774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6309777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309780">r</span><span class="op" id="6309781">.</span><span class="ident" id="6309782">r</span><span class="op" id="6309783">.</span><span class="ident" id="6309784">UnreadRune</span><span class="op" id="6309794">(</span><span class="op" id="6309795">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6309799">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309845">for</span>&nbsp;<span class="op" id="6309849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309853">haveField</span><span class="op" id="6309862">,</span>&nbsp;<span class="ident" id="6309864">delim</span><span class="op" id="6309869">,</span>&nbsp;<span class="ident" id="6309871">err</span>&nbsp;<span class="op" id="6309875">:=</span>&nbsp;<span class="ident" id="6309878">r</span><span class="op" id="6309879">.</span><span class="ident" id="6309880">parseField</span><span class="op" id="6309890">(</span><span class="op" id="6309891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309895">if</span>&nbsp;<span class="ident" id="6309898">haveField</span>&nbsp;<span class="op" id="6309908">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6309913">fields</span>&nbsp;<span class="op" id="6309920">=</span>&nbsp;<span class="builtinfunc" id="6309922">append</span><span class="op" id="6309928">(</span><span class="ident" id="6309929">fields</span><span class="op" id="6309935">,</span>&nbsp;<span class="ident" id="6309937">r</span><span class="op" id="6309938">.</span><span class="ident" id="6309939">field</span><span class="op" id="6309944">.</span><span class="ident" id="6309945">String</span><span class="op" id="6309951">(</span><span class="op" id="6309952">)</span><span class="op" id="6309953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6309957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6309961">if</span>&nbsp;<span class="ident" id="6309964">delim</span>&nbsp;<span class="op" id="6309970">==</span>&nbsp;<span class="string" id="6309973">&#39;\n&#39;</span>&nbsp;<span class="op" id="6309978">||</span>&nbsp;<span class="ident" id="6309981">err</span>&nbsp;<span class="op" id="6309985">==</span>&nbsp;<span class="ident" id="6309988">io</span><span class="op" id="6309990">.</span><span class="ident" id="6309991">EOF</span>&nbsp;<span class="op" id="6309995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310000">return</span>&nbsp;<span class="ident" id="6310007">fields</span><span class="op" id="6310013">,</span>&nbsp;<span class="ident" id="6310015">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310021">}</span>&nbsp;<span class="keyword" id="6310023">else</span>&nbsp;<span class="keyword" id="6310028">if</span>&nbsp;<span class="ident" id="6310031">err</span>&nbsp;<span class="op" id="6310035">!=</span>&nbsp;<span class="builtintype" id="6310038">nil</span>&nbsp;<span class="op" id="6310042">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310047">return</span>&nbsp;<span class="builtintype" id="6310054">nil</span><span class="op" id="6310057">,</span>&nbsp;<span class="ident" id="6310059">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310068">}</span><br>
<span class="lineno"></span><span class="op" id="6310070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6310073">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6310143">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6310218">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6310240">func</span>&nbsp;<span class="op" id="6310245">(</span><span class="ident" id="6310246">r</span>&nbsp;<span class="op" id="6310248">*</span><span class="ident" id="6310249">Reader</span><span class="op" id="6310255">)</span>&nbsp;<span class="ident" id="6310257">parseField</span><span class="op" id="6310267">(</span><span class="op" id="6310268">)</span>&nbsp;<span class="op" id="6310270">(</span><span class="ident" id="6310271">haveField</span>&nbsp;<span class="builtintype" id="6310281">bool</span><span class="op" id="6310285">,</span>&nbsp;<span class="ident" id="6310287">delim</span>&nbsp;<span class="builtintype" id="6310293">rune</span><span class="op" id="6310297">,</span>&nbsp;<span class="ident" id="6310299">err</span>&nbsp;<span class="builtintype" id="6310303">error</span><span class="op" id="6310308">)</span>&nbsp;<span class="op" id="6310310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6310313">r</span><span class="op" id="6310314">.</span><span class="ident" id="6310315">field</span><span class="op" id="6310320">.</span><span class="ident" id="6310321">Reset</span><span class="op" id="6310326">(</span><span class="op" id="6310327">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6310331">r1</span><span class="op" id="6310333">,</span>&nbsp;<span class="ident" id="6310335">err</span>&nbsp;<span class="op" id="6310339">:=</span>&nbsp;<span class="ident" id="6310342">r</span><span class="op" id="6310343">.</span><span class="ident" id="6310344">readRune</span><span class="op" id="6310352">(</span><span class="op" id="6310353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310356">for</span>&nbsp;<span class="ident" id="6310360">err</span>&nbsp;<span class="op" id="6310364">==</span>&nbsp;<span class="builtintype" id="6310367">nil</span>&nbsp;<span class="op" id="6310371">&amp;&amp;</span>&nbsp;<span class="ident" id="6310374">r</span><span class="op" id="6310375">.</span><span class="ident" id="6310376">TrimLeadingSpace</span>&nbsp;<span class="op" id="6310393">&amp;&amp;</span>&nbsp;<span class="ident" id="6310396">r1</span>&nbsp;<span class="op" id="6310399">!=</span>&nbsp;<span class="string" id="6310402">&#39;\n&#39;</span>&nbsp;<span class="op" id="6310407">&amp;&amp;</span>&nbsp;<span class="ident" id="6310410">unicode</span><span class="op" id="6310417">.</span><span class="ident" id="6310418">IsSpace</span><span class="op" id="6310425">(</span><span class="ident" id="6310426">r1</span><span class="op" id="6310428">)</span>&nbsp;<span class="op" id="6310430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6310434">r1</span><span class="op" id="6310436">,</span>&nbsp;<span class="ident" id="6310438">err</span>&nbsp;<span class="op" id="6310442">=</span>&nbsp;<span class="ident" id="6310444">r</span><span class="op" id="6310445">.</span><span class="ident" id="6310446">readRune</span><span class="op" id="6310454">(</span><span class="op" id="6310455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310458">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310462">if</span>&nbsp;<span class="ident" id="6310465">err</span>&nbsp;<span class="op" id="6310469">==</span>&nbsp;<span class="ident" id="6310472">io</span><span class="op" id="6310474">.</span><span class="ident" id="6310475">EOF</span>&nbsp;<span class="op" id="6310479">&amp;&amp;</span>&nbsp;<span class="ident" id="6310482">r</span><span class="op" id="6310483">.</span><span class="ident" id="6310484">column</span>&nbsp;<span class="op" id="6310491">!=</span>&nbsp;<span class="num" id="6310494">0</span>&nbsp;<span class="op" id="6310496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310500">return</span>&nbsp;<span class="builtintype" id="6310507">true</span><span class="op" id="6310511">,</span>&nbsp;<span class="num" id="6310513">0</span><span class="op" id="6310514">,</span>&nbsp;<span class="ident" id="6310516">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310524">if</span>&nbsp;<span class="ident" id="6310527">err</span>&nbsp;<span class="op" id="6310531">!=</span>&nbsp;<span class="builtintype" id="6310534">nil</span>&nbsp;<span class="op" id="6310538">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310542">return</span>&nbsp;<span class="builtintype" id="6310549">false</span><span class="op" id="6310554">,</span>&nbsp;<span class="num" id="6310556">0</span><span class="op" id="6310557">,</span>&nbsp;<span class="ident" id="6310559">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310568">switch</span>&nbsp;<span class="ident" id="6310575">r1</span>&nbsp;<span class="op" id="6310578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310581">case</span>&nbsp;<span class="ident" id="6310586">r</span><span class="op" id="6310587">.</span><span class="ident" id="6310588">Comma</span><span class="op" id="6310593">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6310597">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310619">case</span>&nbsp;<span class="string" id="6310624">&#39;\n&#39;</span><span class="op" id="6310628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6310632">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310683">if</span>&nbsp;<span class="ident" id="6310686">r</span><span class="op" id="6310687">.</span><span class="ident" id="6310688">column</span>&nbsp;<span class="op" id="6310695">==</span>&nbsp;<span class="num" id="6310698">0</span>&nbsp;<span class="op" id="6310700">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310705">return</span>&nbsp;<span class="builtintype" id="6310712">false</span><span class="op" id="6310717">,</span>&nbsp;<span class="ident" id="6310719">r1</span><span class="op" id="6310721">,</span>&nbsp;<span class="builtintype" id="6310723">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310733">return</span>&nbsp;<span class="builtintype" id="6310740">true</span><span class="op" id="6310744">,</span>&nbsp;<span class="ident" id="6310746">r1</span><span class="op" id="6310748">,</span>&nbsp;<span class="builtintype" id="6310750">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310756">case</span>&nbsp;<span class="string" id="6310761">&#39;&#34;&#39;</span><span class="op" id="6310764">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6310768">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6310785">Quoted</span><span class="op" id="6310791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310795">for</span>&nbsp;<span class="op" id="6310799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6310804">r1</span><span class="op" id="6310806">,</span>&nbsp;<span class="ident" id="6310808">err</span>&nbsp;<span class="op" id="6310812">=</span>&nbsp;<span class="ident" id="6310814">r</span><span class="op" id="6310815">.</span><span class="ident" id="6310816">readRune</span><span class="op" id="6310824">(</span><span class="op" id="6310825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310830">if</span>&nbsp;<span class="ident" id="6310833">err</span>&nbsp;<span class="op" id="6310837">!=</span>&nbsp;<span class="builtintype" id="6310840">nil</span>&nbsp;<span class="op" id="6310844">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310850">if</span>&nbsp;<span class="ident" id="6310853">err</span>&nbsp;<span class="op" id="6310857">==</span>&nbsp;<span class="ident" id="6310860">io</span><span class="op" id="6310862">.</span><span class="ident" id="6310863">EOF</span>&nbsp;<span class="op" id="6310867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310874">if</span>&nbsp;<span class="ident" id="6310877">r</span><span class="op" id="6310878">.</span><span class="ident" id="6310879">LazyQuotes</span>&nbsp;<span class="op" id="6310890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310898">return</span>&nbsp;<span class="builtintype" id="6310905">true</span><span class="op" id="6310909">,</span>&nbsp;<span class="num" id="6310911">0</span><span class="op" id="6310912">,</span>&nbsp;<span class="ident" id="6310914">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310930">return</span>&nbsp;<span class="builtintype" id="6310937">false</span><span class="op" id="6310942">,</span>&nbsp;<span class="num" id="6310944">0</span><span class="op" id="6310945">,</span>&nbsp;<span class="ident" id="6310947">r</span><span class="op" id="6310948">.</span><span class="builtintype" id="6310949">error</span><span class="op" id="6310954">(</span><span class="ident" id="6310955">ErrQuote</span><span class="op" id="6310963">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6310975">return</span>&nbsp;<span class="builtintype" id="6310982">false</span><span class="op" id="6310987">,</span>&nbsp;<span class="num" id="6310989">0</span><span class="op" id="6310990">,</span>&nbsp;<span class="ident" id="6310992">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311004">switch</span>&nbsp;<span class="ident" id="6311011">r1</span>&nbsp;<span class="op" id="6311014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311019">case</span>&nbsp;<span class="string" id="6311024">&#39;&#34;&#39;</span><span class="op" id="6311027">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311033">r1</span><span class="op" id="6311035">,</span>&nbsp;<span class="ident" id="6311037">err</span>&nbsp;<span class="op" id="6311041">=</span>&nbsp;<span class="ident" id="6311043">r</span><span class="op" id="6311044">.</span><span class="ident" id="6311045">readRune</span><span class="op" id="6311053">(</span><span class="op" id="6311054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311060">if</span>&nbsp;<span class="ident" id="6311063">err</span>&nbsp;<span class="op" id="6311067">!=</span>&nbsp;<span class="builtintype" id="6311070">nil</span>&nbsp;<span class="op" id="6311074">||</span>&nbsp;<span class="ident" id="6311077">r1</span>&nbsp;<span class="op" id="6311080">==</span>&nbsp;<span class="ident" id="6311083">r</span><span class="op" id="6311084">.</span><span class="ident" id="6311085">Comma</span>&nbsp;<span class="op" id="6311091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311098">break</span>&nbsp;<span class="ident" id="6311104">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311121">if</span>&nbsp;<span class="ident" id="6311124">r1</span>&nbsp;<span class="op" id="6311127">==</span>&nbsp;<span class="string" id="6311130">&#39;\n&#39;</span>&nbsp;<span class="op" id="6311135">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311142">return</span>&nbsp;<span class="builtintype" id="6311149">true</span><span class="op" id="6311153">,</span>&nbsp;<span class="ident" id="6311155">r1</span><span class="op" id="6311157">,</span>&nbsp;<span class="builtintype" id="6311159">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311173">if</span>&nbsp;<span class="ident" id="6311176">r1</span>&nbsp;<span class="op" id="6311179">!=</span>&nbsp;<span class="string" id="6311182">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6311186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311193">if</span>&nbsp;<span class="op" id="6311196">!</span><span class="ident" id="6311197">r</span><span class="op" id="6311198">.</span><span class="ident" id="6311199">LazyQuotes</span>&nbsp;<span class="op" id="6311210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311218">r</span><span class="op" id="6311219">.</span><span class="ident" id="6311220">column</span><span class="op" id="6311226">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311235">return</span>&nbsp;<span class="builtintype" id="6311242">false</span><span class="op" id="6311247">,</span>&nbsp;<span class="num" id="6311249">0</span><span class="op" id="6311250">,</span>&nbsp;<span class="ident" id="6311252">r</span><span class="op" id="6311253">.</span><span class="builtintype" id="6311254">error</span><span class="op" id="6311259">(</span><span class="ident" id="6311260">ErrQuote</span><span class="op" id="6311268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6311282">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311312">r</span><span class="op" id="6311313">.</span><span class="ident" id="6311314">field</span><span class="op" id="6311319">.</span><span class="ident" id="6311320">WriteRune</span><span class="op" id="6311329">(</span><span class="string" id="6311330">&#39;&#34;&#39;</span><span class="op" id="6311333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311339">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311344">case</span>&nbsp;<span class="string" id="6311349">&#39;\n&#39;</span><span class="op" id="6311353">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311359">r</span><span class="op" id="6311360">.</span><span class="ident" id="6311361">line</span><span class="op" id="6311365">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311372">r</span><span class="op" id="6311373">.</span><span class="ident" id="6311374">column</span>&nbsp;<span class="op" id="6311381">=</span>&nbsp;<span class="op" id="6311383">-</span><span class="num" id="6311384">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311394">r</span><span class="op" id="6311395">.</span><span class="ident" id="6311396">field</span><span class="op" id="6311401">.</span><span class="ident" id="6311402">WriteRune</span><span class="op" id="6311411">(</span><span class="ident" id="6311412">r1</span><span class="op" id="6311414">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311422">default</span><span class="op" id="6311429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6311433">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311453">for</span>&nbsp;<span class="op" id="6311457">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311462">r</span><span class="op" id="6311463">.</span><span class="ident" id="6311464">field</span><span class="op" id="6311469">.</span><span class="ident" id="6311470">WriteRune</span><span class="op" id="6311479">(</span><span class="ident" id="6311480">r1</span><span class="op" id="6311482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6311487">r1</span><span class="op" id="6311489">,</span>&nbsp;<span class="ident" id="6311491">err</span>&nbsp;<span class="op" id="6311495">=</span>&nbsp;<span class="ident" id="6311497">r</span><span class="op" id="6311498">.</span><span class="ident" id="6311499">readRune</span><span class="op" id="6311507">(</span><span class="op" id="6311508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311513">if</span>&nbsp;<span class="ident" id="6311516">err</span>&nbsp;<span class="op" id="6311520">!=</span>&nbsp;<span class="builtintype" id="6311523">nil</span>&nbsp;<span class="op" id="6311527">||</span>&nbsp;<span class="ident" id="6311530">r1</span>&nbsp;<span class="op" id="6311533">==</span>&nbsp;<span class="ident" id="6311536">r</span><span class="op" id="6311537">.</span><span class="ident" id="6311538">Comma</span>&nbsp;<span class="op" id="6311544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311550">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311559">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311564">if</span>&nbsp;<span class="ident" id="6311567">r1</span>&nbsp;<span class="op" id="6311570">==</span>&nbsp;<span class="string" id="6311573">&#39;\n&#39;</span>&nbsp;<span class="op" id="6311578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311584">return</span>&nbsp;<span class="builtintype" id="6311591">true</span><span class="op" id="6311595">,</span>&nbsp;<span class="ident" id="6311597">r1</span><span class="op" id="6311599">,</span>&nbsp;<span class="builtintype" id="6311601">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311613">if</span>&nbsp;<span class="op" id="6311616">!</span><span class="ident" id="6311617">r</span><span class="op" id="6311618">.</span><span class="ident" id="6311619">LazyQuotes</span>&nbsp;<span class="op" id="6311630">&amp;&amp;</span>&nbsp;<span class="ident" id="6311633">r1</span>&nbsp;<span class="op" id="6311636">==</span>&nbsp;<span class="string" id="6311639">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6311643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311649">return</span>&nbsp;<span class="builtintype" id="6311656">false</span><span class="op" id="6311661">,</span>&nbsp;<span class="num" id="6311663">0</span><span class="op" id="6311664">,</span>&nbsp;<span class="ident" id="6311666">r</span><span class="op" id="6311667">.</span><span class="builtintype" id="6311668">error</span><span class="op" id="6311673">(</span><span class="ident" id="6311674">ErrBareQuote</span><span class="op" id="6311686">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311702">if</span>&nbsp;<span class="ident" id="6311705">err</span>&nbsp;<span class="op" id="6311709">!=</span>&nbsp;<span class="builtintype" id="6311712">nil</span>&nbsp;<span class="op" id="6311716">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311720">if</span>&nbsp;<span class="ident" id="6311723">err</span>&nbsp;<span class="op" id="6311727">==</span>&nbsp;<span class="ident" id="6311730">io</span><span class="op" id="6311732">.</span><span class="ident" id="6311733">EOF</span>&nbsp;<span class="op" id="6311737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311742">return</span>&nbsp;<span class="builtintype" id="6311749">true</span><span class="op" id="6311753">,</span>&nbsp;<span class="num" id="6311755">0</span><span class="op" id="6311756">,</span>&nbsp;<span class="ident" id="6311758">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311768">return</span>&nbsp;<span class="builtintype" id="6311775">false</span><span class="op" id="6311780">,</span>&nbsp;<span class="num" id="6311782">0</span><span class="op" id="6311783">,</span>&nbsp;<span class="ident" id="6311785">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6311790">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6311794">return</span>&nbsp;<span class="builtintype" id="6311801">true</span><span class="op" id="6311805">,</span>&nbsp;<span class="ident" id="6311807">r1</span><span class="op" id="6311809">,</span>&nbsp;<span class="builtintype" id="6311811">nil</span><br>
<span class="lineno"></span><span class="op" id="6311815">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
