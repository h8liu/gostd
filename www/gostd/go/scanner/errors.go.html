<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html" class="current">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5062992">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5063047">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5063101">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5063152">package</span>&nbsp;<span class="ident" id="5063160">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5063169">import</span>&nbsp;<span class="op" id="5063176">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5063179">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5063186">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5063198">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5063204">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="5063211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5063214">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="5063272">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5063330">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="5063391">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="5063402">//</span><br>
<span class="lineno"></span><span class="keyword" id="5063405">type</span>&nbsp;<span class="ident" id="5063410">Error</span>&nbsp;<span class="keyword" id="5063416">struct</span>&nbsp;<span class="op" id="5063423">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5063426">Pos</span>&nbsp;<span class="ident" id="5063430">token</span><span class="op" id="5063435">.</span><span class="ident" id="5063436">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5063446">Msg</span>&nbsp;<span class="builtintype" id="5063450">string</span><br>
<span class="lineno"></span><span class="op" id="5063457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5063460">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="5063501">func</span>&nbsp;<span class="op" id="5063506">(</span><span class="ident" id="5063507">e</span>&nbsp;<span class="ident" id="5063509">Error</span><span class="op" id="5063514">)</span>&nbsp;<span class="ident" id="5063516">Error</span><span class="op" id="5063521">(</span><span class="op" id="5063522">)</span>&nbsp;<span class="builtintype" id="5063524">string</span>&nbsp;<span class="op" id="5063531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5063534">if</span>&nbsp;<span class="ident" id="5063537">e</span><span class="op" id="5063538">.</span><span class="ident" id="5063539">Pos</span><span class="op" id="5063542">.</span><span class="ident" id="5063543">Filename</span>&nbsp;<span class="op" id="5063552">!=</span>&nbsp;<span class="string" id="5063555">&#34;&#34;</span>&nbsp;<span class="op" id="5063558">||</span>&nbsp;<span class="ident" id="5063561">e</span><span class="op" id="5063562">.</span><span class="ident" id="5063563">Pos</span><span class="op" id="5063566">.</span><span class="ident" id="5063567">IsValid</span><span class="op" id="5063574">(</span><span class="op" id="5063575">)</span>&nbsp;<span class="op" id="5063577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5063581">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5063619">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5063679">return</span>&nbsp;<span class="ident" id="5063686">e</span><span class="op" id="5063687">.</span><span class="ident" id="5063688">Pos</span><span class="op" id="5063691">.</span><span class="ident" id="5063692">String</span><span class="op" id="5063698">(</span><span class="op" id="5063699">)</span>&nbsp;<span class="op" id="5063701">+</span>&nbsp;<span class="string" id="5063703">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="5063708">+</span>&nbsp;<span class="ident" id="5063710">e</span><span class="op" id="5063711">.</span><span class="ident" id="5063712">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5063717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5063720">return</span>&nbsp;<span class="ident" id="5063727">e</span><span class="op" id="5063728">.</span><span class="ident" id="5063729">Msg</span><br>
<span class="lineno"></span><span class="op" id="5063733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5063736">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="5063771">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="5063842">//</span><br>
<span class="lineno"></span><span class="keyword" id="5063845">type</span>&nbsp;<span class="ident" id="5063850">ErrorList</span>&nbsp;<span class="op" id="5063860">[</span><span class="op" id="5063861">]</span><span class="op" id="5063862">*</span><span class="ident" id="5063863">Error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5063870">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="5063946">func</span>&nbsp;<span class="op" id="5063951">(</span><span class="ident" id="5063952">p</span>&nbsp;<span class="op" id="5063954">*</span><span class="ident" id="5063955">ErrorList</span><span class="op" id="5063964">)</span>&nbsp;<span class="ident" id="5063966">Add</span><span class="op" id="5063969">(</span><span class="ident" id="5063970">pos</span>&nbsp;<span class="ident" id="5063974">token</span><span class="op" id="5063979">.</span><span class="ident" id="5063980">Position</span><span class="op" id="5063988">,</span>&nbsp;<span class="ident" id="5063990">msg</span>&nbsp;<span class="builtintype" id="5063994">string</span><span class="op" id="5064000">)</span>&nbsp;<span class="op" id="5064002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5064005">*</span><span class="ident" id="5064006">p</span>&nbsp;<span class="op" id="5064008">=</span>&nbsp;<span class="builtinfunc" id="5064010">append</span><span class="op" id="5064016">(</span><span class="op" id="5064017">*</span><span class="ident" id="5064018">p</span><span class="op" id="5064019">,</span>&nbsp;<span class="op" id="5064021">&amp;</span><span class="ident" id="5064022">Error</span><span class="op" id="5064027">{</span><span class="ident" id="5064028">pos</span><span class="op" id="5064031">,</span>&nbsp;<span class="ident" id="5064033">msg</span><span class="op" id="5064036">}</span><span class="op" id="5064037">)</span><br>
<span class="lineno"></span><span class="op" id="5064039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5064042">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="5064085">func</span>&nbsp;<span class="op" id="5064090">(</span><span class="ident" id="5064091">p</span>&nbsp;<span class="op" id="5064093">*</span><span class="ident" id="5064094">ErrorList</span><span class="op" id="5064103">)</span>&nbsp;<span class="ident" id="5064105">Reset</span><span class="op" id="5064110">(</span><span class="op" id="5064111">)</span>&nbsp;<span class="op" id="5064113">{</span>&nbsp;<span class="op" id="5064115">*</span><span class="ident" id="5064116">p</span>&nbsp;<span class="op" id="5064118">=</span>&nbsp;<span class="op" id="5064120">(</span><span class="op" id="5064121">*</span><span class="ident" id="5064122">p</span><span class="op" id="5064123">)</span><span class="op" id="5064124">[</span><span class="num" id="5064125">0</span><span class="op" id="5064126">:</span><span class="num" id="5064127">0</span><span class="op" id="5064128">]</span>&nbsp;<span class="op" id="5064130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5064133">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="5064177">func</span>&nbsp;<span class="op" id="5064182">(</span><span class="ident" id="5064183">p</span>&nbsp;<span class="ident" id="5064185">ErrorList</span><span class="op" id="5064194">)</span>&nbsp;<span class="ident" id="5064196">Len</span><span class="op" id="5064199">(</span><span class="op" id="5064200">)</span>&nbsp;<span class="builtintype" id="5064202">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5064211">{</span>&nbsp;<span class="keyword" id="5064213">return</span>&nbsp;<span class="builtinfunc" id="5064220">len</span><span class="op" id="5064223">(</span><span class="ident" id="5064224">p</span><span class="op" id="5064225">)</span>&nbsp;<span class="op" id="5064227">}</span><br>
<span class="lineno"></span><span class="keyword" id="5064229">func</span>&nbsp;<span class="op" id="5064234">(</span><span class="ident" id="5064235">p</span>&nbsp;<span class="ident" id="5064237">ErrorList</span><span class="op" id="5064246">)</span>&nbsp;<span class="ident" id="5064248">Swap</span><span class="op" id="5064252">(</span><span class="ident" id="5064253">i</span><span class="op" id="5064254">,</span>&nbsp;<span class="ident" id="5064256">j</span>&nbsp;<span class="builtintype" id="5064258">int</span><span class="op" id="5064261">)</span>&nbsp;<span class="op" id="5064263">{</span>&nbsp;<span class="ident" id="5064265">p</span><span class="op" id="5064266">[</span><span class="ident" id="5064267">i</span><span class="op" id="5064268">]</span><span class="op" id="5064269">,</span>&nbsp;<span class="ident" id="5064271">p</span><span class="op" id="5064272">[</span><span class="ident" id="5064273">j</span><span class="op" id="5064274">]</span>&nbsp;<span class="op" id="5064276">=</span>&nbsp;<span class="ident" id="5064278">p</span><span class="op" id="5064279">[</span><span class="ident" id="5064280">j</span><span class="op" id="5064281">]</span><span class="op" id="5064282">,</span>&nbsp;<span class="ident" id="5064284">p</span><span class="op" id="5064285">[</span><span class="ident" id="5064286">i</span><span class="op" id="5064287">]</span>&nbsp;<span class="op" id="5064289">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5064292">func</span>&nbsp;<span class="op" id="5064297">(</span><span class="ident" id="5064298">p</span>&nbsp;<span class="ident" id="5064300">ErrorList</span><span class="op" id="5064309">)</span>&nbsp;<span class="ident" id="5064311">Less</span><span class="op" id="5064315">(</span><span class="ident" id="5064316">i</span><span class="op" id="5064317">,</span>&nbsp;<span class="ident" id="5064319">j</span>&nbsp;<span class="builtintype" id="5064321">int</span><span class="op" id="5064324">)</span>&nbsp;<span class="builtintype" id="5064326">bool</span>&nbsp;<span class="op" id="5064331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5064334">e</span>&nbsp;<span class="op" id="5064336">:=</span>&nbsp;<span class="op" id="5064339">&amp;</span><span class="ident" id="5064340">p</span><span class="op" id="5064341">[</span><span class="ident" id="5064342">i</span><span class="op" id="5064343">]</span><span class="op" id="5064344">.</span><span class="ident" id="5064345">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5064350">f</span>&nbsp;<span class="op" id="5064352">:=</span>&nbsp;<span class="op" id="5064355">&amp;</span><span class="ident" id="5064356">p</span><span class="op" id="5064357">[</span><span class="ident" id="5064358">j</span><span class="op" id="5064359">]</span><span class="op" id="5064360">.</span><span class="ident" id="5064361">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5064366">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5064440">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5064513">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064528">if</span>&nbsp;<span class="ident" id="5064531">e</span><span class="op" id="5064532">.</span><span class="ident" id="5064533">Filename</span>&nbsp;<span class="op" id="5064542">&lt;</span>&nbsp;<span class="ident" id="5064544">f</span><span class="op" id="5064545">.</span><span class="ident" id="5064546">Filename</span>&nbsp;<span class="op" id="5064555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064559">return</span>&nbsp;<span class="builtintype" id="5064566">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5064572">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064575">if</span>&nbsp;<span class="ident" id="5064578">e</span><span class="op" id="5064579">.</span><span class="ident" id="5064580">Filename</span>&nbsp;<span class="op" id="5064589">==</span>&nbsp;<span class="ident" id="5064592">f</span><span class="op" id="5064593">.</span><span class="ident" id="5064594">Filename</span>&nbsp;<span class="op" id="5064603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064607">if</span>&nbsp;<span class="ident" id="5064610">e</span><span class="op" id="5064611">.</span><span class="ident" id="5064612">Line</span>&nbsp;<span class="op" id="5064617">&lt;</span>&nbsp;<span class="ident" id="5064619">f</span><span class="op" id="5064620">.</span><span class="ident" id="5064621">Line</span>&nbsp;<span class="op" id="5064626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064631">return</span>&nbsp;<span class="builtintype" id="5064638">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5064645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064649">if</span>&nbsp;<span class="ident" id="5064652">e</span><span class="op" id="5064653">.</span><span class="ident" id="5064654">Line</span>&nbsp;<span class="op" id="5064659">==</span>&nbsp;<span class="ident" id="5064662">f</span><span class="op" id="5064663">.</span><span class="ident" id="5064664">Line</span>&nbsp;<span class="op" id="5064669">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064674">return</span>&nbsp;<span class="ident" id="5064681">e</span><span class="op" id="5064682">.</span><span class="ident" id="5064683">Column</span>&nbsp;<span class="op" id="5064690">&lt;</span>&nbsp;<span class="ident" id="5064692">f</span><span class="op" id="5064693">.</span><span class="ident" id="5064694">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5064703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5064706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5064709">return</span>&nbsp;<span class="builtintype" id="5064716">false</span><br>
<span class="lineno"></span><span class="op" id="5064722">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="5064725">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="5064792">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="5064859">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="5064869">//</span><br>
<span class="lineno">75</span><span class="keyword" id="5064872">func</span>&nbsp;<span class="op" id="5064877">(</span><span class="ident" id="5064878">p</span>&nbsp;<span class="ident" id="5064880">ErrorList</span><span class="op" id="5064889">)</span>&nbsp;<span class="ident" id="5064891">Sort</span><span class="op" id="5064895">(</span><span class="op" id="5064896">)</span>&nbsp;<span class="op" id="5064898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5064901">sort</span><span class="op" id="5064905">.</span><span class="ident" id="5064906">Sort</span><span class="op" id="5064910">(</span><span class="ident" id="5064911">p</span><span class="op" id="5064912">)</span><br>
<span class="lineno"></span><span class="op" id="5064914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5064917">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="5065001">func</span>&nbsp;<span class="op" id="5065006">(</span><span class="ident" id="5065007">p</span>&nbsp;<span class="op" id="5065009">*</span><span class="ident" id="5065010">ErrorList</span><span class="op" id="5065019">)</span>&nbsp;<span class="ident" id="5065021">RemoveMultiples</span><span class="op" id="5065036">(</span><span class="op" id="5065037">)</span>&nbsp;<span class="op" id="5065039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5065042">sort</span><span class="op" id="5065046">.</span><span class="ident" id="5065047">Sort</span><span class="op" id="5065051">(</span><span class="ident" id="5065052">p</span><span class="op" id="5065053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065056">var</span>&nbsp;<span class="ident" id="5065060">last</span>&nbsp;<span class="ident" id="5065065">token</span><span class="op" id="5065070">.</span><span class="ident" id="5065071">Position</span>&nbsp;<span class="comment" id="5065080">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5065129">i</span>&nbsp;<span class="op" id="5065131">:=</span>&nbsp;<span class="num" id="5065134">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065137">for</span>&nbsp;<span class="ident" id="5065141">_</span><span class="op" id="5065142">,</span>&nbsp;<span class="ident" id="5065144">e</span>&nbsp;<span class="op" id="5065146">:=</span>&nbsp;<span class="keyword" id="5065149">range</span>&nbsp;<span class="op" id="5065155">*</span><span class="ident" id="5065156">p</span>&nbsp;<span class="op" id="5065158">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065162">if</span>&nbsp;<span class="ident" id="5065165">e</span><span class="op" id="5065166">.</span><span class="ident" id="5065167">Pos</span><span class="op" id="5065170">.</span><span class="ident" id="5065171">Filename</span>&nbsp;<span class="op" id="5065180">!=</span>&nbsp;<span class="ident" id="5065183">last</span><span class="op" id="5065187">.</span><span class="ident" id="5065188">Filename</span>&nbsp;<span class="op" id="5065197">||</span>&nbsp;<span class="ident" id="5065200">e</span><span class="op" id="5065201">.</span><span class="ident" id="5065202">Pos</span><span class="op" id="5065205">.</span><span class="ident" id="5065206">Line</span>&nbsp;<span class="op" id="5065211">!=</span>&nbsp;<span class="ident" id="5065214">last</span><span class="op" id="5065218">.</span><span class="ident" id="5065219">Line</span>&nbsp;<span class="op" id="5065224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5065229">last</span>&nbsp;<span class="op" id="5065234">=</span>&nbsp;<span class="ident" id="5065236">e</span><span class="op" id="5065237">.</span><span class="ident" id="5065238">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5065245">(</span><span class="op" id="5065246">*</span><span class="ident" id="5065247">p</span><span class="op" id="5065248">)</span><span class="op" id="5065249">[</span><span class="ident" id="5065250">i</span><span class="op" id="5065251">]</span>&nbsp;<span class="op" id="5065253">=</span>&nbsp;<span class="ident" id="5065255">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5065260">i</span><span class="op" id="5065261">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5065266">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5065269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5065272">(</span><span class="op" id="5065273">*</span><span class="ident" id="5065274">p</span><span class="op" id="5065275">)</span>&nbsp;<span class="op" id="5065277">=</span>&nbsp;<span class="op" id="5065279">(</span><span class="op" id="5065280">*</span><span class="ident" id="5065281">p</span><span class="op" id="5065282">)</span><span class="op" id="5065283">[</span><span class="num" id="5065284">0</span><span class="op" id="5065285">:</span><span class="ident" id="5065286">i</span><span class="op" id="5065287">]</span><br>
<span class="lineno"></span><span class="op" id="5065289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5065292">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="5065340">func</span>&nbsp;<span class="op" id="5065345">(</span><span class="ident" id="5065346">p</span>&nbsp;<span class="ident" id="5065348">ErrorList</span><span class="op" id="5065357">)</span>&nbsp;<span class="ident" id="5065359">Error</span><span class="op" id="5065364">(</span><span class="op" id="5065365">)</span>&nbsp;<span class="builtintype" id="5065367">string</span>&nbsp;<span class="op" id="5065374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065377">switch</span>&nbsp;<span class="builtinfunc" id="5065384">len</span><span class="op" id="5065387">(</span><span class="ident" id="5065388">p</span><span class="op" id="5065389">)</span>&nbsp;<span class="op" id="5065391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065394">case</span>&nbsp;<span class="num" id="5065399">0</span><span class="op" id="5065400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065404">return</span>&nbsp;<span class="string" id="5065411">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065424">case</span>&nbsp;<span class="num" id="5065429">1</span><span class="op" id="5065430">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065434">return</span>&nbsp;<span class="ident" id="5065441">p</span><span class="op" id="5065442">[</span><span class="num" id="5065443">0</span><span class="op" id="5065444">]</span><span class="op" id="5065445">.</span><span class="ident" id="5065446">Error</span><span class="op" id="5065451">(</span><span class="op" id="5065452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5065455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065458">return</span>&nbsp;<span class="ident" id="5065465">fmt</span><span class="op" id="5065468">.</span><span class="ident" id="5065469">Sprintf</span><span class="op" id="5065476">(</span><span class="string" id="5065477">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="5065502">,</span>&nbsp;<span class="ident" id="5065504">p</span><span class="op" id="5065505">[</span><span class="num" id="5065506">0</span><span class="op" id="5065507">]</span><span class="op" id="5065508">,</span>&nbsp;<span class="builtinfunc" id="5065510">len</span><span class="op" id="5065513">(</span><span class="ident" id="5065514">p</span><span class="op" id="5065515">)</span><span class="op" id="5065516">-</span><span class="num" id="5065517">1</span><span class="op" id="5065518">)</span><br>
<span class="lineno"></span><span class="op" id="5065520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5065523">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="5065578">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5065620">func</span>&nbsp;<span class="op" id="5065625">(</span><span class="ident" id="5065626">p</span>&nbsp;<span class="ident" id="5065628">ErrorList</span><span class="op" id="5065637">)</span>&nbsp;<span class="ident" id="5065639">Err</span><span class="op" id="5065642">(</span><span class="op" id="5065643">)</span>&nbsp;<span class="builtintype" id="5065645">error</span>&nbsp;<span class="op" id="5065651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065654">if</span>&nbsp;<span class="builtinfunc" id="5065657">len</span><span class="op" id="5065660">(</span><span class="ident" id="5065661">p</span><span class="op" id="5065662">)</span>&nbsp;<span class="op" id="5065664">==</span>&nbsp;<span class="num" id="5065667">0</span>&nbsp;<span class="op" id="5065669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065673">return</span>&nbsp;<span class="builtintype" id="5065680">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5065685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065688">return</span>&nbsp;<span class="ident" id="5065695">p</span><br>
<span class="lineno"></span><span class="op" id="5065697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5065700">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="5065771">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="5065842">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5065871">//</span><br>
<span class="lineno"></span><span class="keyword" id="5065874">func</span>&nbsp;<span class="ident" id="5065879">PrintError</span><span class="op" id="5065889">(</span><span class="ident" id="5065890">w</span>&nbsp;<span class="ident" id="5065892">io</span><span class="op" id="5065894">.</span><span class="ident" id="5065895">Writer</span><span class="op" id="5065901">,</span>&nbsp;<span class="ident" id="5065903">err</span>&nbsp;<span class="builtintype" id="5065907">error</span><span class="op" id="5065912">)</span>&nbsp;<span class="op" id="5065914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065917">if</span>&nbsp;<span class="ident" id="5065920">list</span><span class="op" id="5065924">,</span>&nbsp;<span class="ident" id="5065926">ok</span>&nbsp;<span class="op" id="5065929">:=</span>&nbsp;<span class="ident" id="5065932">err</span><span class="op" id="5065935">.</span><span class="op" id="5065936">(</span><span class="ident" id="5065937">ErrorList</span><span class="op" id="5065946">)</span><span class="op" id="5065947">;</span>&nbsp;<span class="ident" id="5065949">ok</span>&nbsp;<span class="op" id="5065952">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5065956">for</span>&nbsp;<span class="ident" id="5065960">_</span><span class="op" id="5065961">,</span>&nbsp;<span class="ident" id="5065963">e</span>&nbsp;<span class="op" id="5065965">:=</span>&nbsp;<span class="keyword" id="5065968">range</span>&nbsp;<span class="ident" id="5065974">list</span>&nbsp;<span class="op" id="5065979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5065984">fmt</span><span class="op" id="5065987">.</span><span class="ident" id="5065988">Fprintf</span><span class="op" id="5065995">(</span><span class="ident" id="5065996">w</span><span class="op" id="5065997">,</span>&nbsp;<span class="string" id="5065999">&#34;%s\n&#34;</span><span class="op" id="5066005">,</span>&nbsp;<span class="ident" id="5066007">e</span><span class="op" id="5066008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5066012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5066015">}</span>&nbsp;<span class="keyword" id="5066017">else</span>&nbsp;<span class="keyword" id="5066022">if</span>&nbsp;<span class="ident" id="5066025">err</span>&nbsp;<span class="op" id="5066029">!=</span>&nbsp;<span class="builtintype" id="5066032">nil</span>&nbsp;<span class="op" id="5066036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5066040">fmt</span><span class="op" id="5066043">.</span><span class="ident" id="5066044">Fprintf</span><span class="op" id="5066051">(</span><span class="ident" id="5066052">w</span><span class="op" id="5066053">,</span>&nbsp;<span class="string" id="5066055">&#34;%s\n&#34;</span><span class="op" id="5066061">,</span>&nbsp;<span class="ident" id="5066063">err</span><span class="op" id="5066066">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5066069">}</span><br>
<span class="lineno"></span><span class="op" id="5066071">}</span>
</div>
</body>
</html>
