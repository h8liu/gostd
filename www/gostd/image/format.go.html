<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html" class="current">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5586537">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5586592">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5586646">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5586697">package</span>&nbsp;<span class="ident" id="5586705">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5586712">import</span>&nbsp;<span class="op" id="5586719">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5586722">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5586731">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5586741">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5586746">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5586749">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5586817">var</span>&nbsp;<span class="ident" id="5586821">ErrFormat</span>&nbsp;<span class="op" id="5586831">=</span>&nbsp;<span class="ident" id="5586833">errors</span><span class="op" id="5586839">.</span><span class="ident" id="5586840">New</span><span class="op" id="5586843">(</span><span class="string" id="5586844">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5586867">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5586870">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5586947">type</span>&nbsp;<span class="ident" id="5586952">format</span>&nbsp;<span class="keyword" id="5586959">struct</span>&nbsp;<span class="op" id="5586966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5586969">name</span><span class="op" id="5586973">,</span>&nbsp;<span class="ident" id="5586975">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5586982">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5586990">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5587003">func</span><span class="op" id="5587007">(</span><span class="ident" id="5587008">io</span><span class="op" id="5587010">.</span><span class="ident" id="5587011">Reader</span><span class="op" id="5587017">)</span>&nbsp;<span class="op" id="5587019">(</span><span class="ident" id="5587020">Image</span><span class="op" id="5587025">,</span>&nbsp;<span class="builtintype" id="5587027">error</span><span class="op" id="5587032">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5587035">decodeConfig</span>&nbsp;<span class="keyword" id="5587048">func</span><span class="op" id="5587052">(</span><span class="ident" id="5587053">io</span><span class="op" id="5587055">.</span><span class="ident" id="5587056">Reader</span><span class="op" id="5587062">)</span>&nbsp;<span class="op" id="5587064">(</span><span class="ident" id="5587065">Config</span><span class="op" id="5587071">,</span>&nbsp;<span class="builtintype" id="5587073">error</span><span class="op" id="5587078">)</span><br>
<span class="lineno"></span><span class="op" id="5587080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5587083">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5587129">var</span>&nbsp;<span class="ident" id="5587133">formats</span>&nbsp;<span class="op" id="5587141">[</span><span class="op" id="5587142">]</span><span class="ident" id="5587143">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5587151">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5587214">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5587271">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5587349">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5587415">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5587473">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5587542">func</span>&nbsp;<span class="ident" id="5587547">RegisterFormat</span><span class="op" id="5587561">(</span><span class="ident" id="5587562">name</span><span class="op" id="5587566">,</span>&nbsp;<span class="ident" id="5587568">magic</span>&nbsp;<span class="builtintype" id="5587574">string</span><span class="op" id="5587580">,</span>&nbsp;<span class="ident" id="5587582">decode</span>&nbsp;<span class="keyword" id="5587589">func</span><span class="op" id="5587593">(</span><span class="ident" id="5587594">io</span><span class="op" id="5587596">.</span><span class="ident" id="5587597">Reader</span><span class="op" id="5587603">)</span>&nbsp;<span class="op" id="5587605">(</span><span class="ident" id="5587606">Image</span><span class="op" id="5587611">,</span>&nbsp;<span class="builtintype" id="5587613">error</span><span class="op" id="5587618">)</span><span class="op" id="5587619">,</span>&nbsp;<span class="ident" id="5587621">decodeConfig</span>&nbsp;<span class="keyword" id="5587634">func</span><span class="op" id="5587638">(</span><span class="ident" id="5587639">io</span><span class="op" id="5587641">.</span><span class="ident" id="5587642">Reader</span><span class="op" id="5587648">)</span>&nbsp;<span class="op" id="5587650">(</span><span class="ident" id="5587651">Config</span><span class="op" id="5587657">,</span>&nbsp;<span class="builtintype" id="5587659">error</span><span class="op" id="5587664">)</span><span class="op" id="5587665">)</span>&nbsp;<span class="op" id="5587667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5587670">formats</span>&nbsp;<span class="op" id="5587678">=</span>&nbsp;<span class="builtinfunc" id="5587680">append</span><span class="op" id="5587686">(</span><span class="ident" id="5587687">formats</span><span class="op" id="5587694">,</span>&nbsp;<span class="ident" id="5587696">format</span><span class="op" id="5587702">{</span><span class="ident" id="5587703">name</span><span class="op" id="5587707">,</span>&nbsp;<span class="ident" id="5587709">magic</span><span class="op" id="5587714">,</span>&nbsp;<span class="ident" id="5587716">decode</span><span class="op" id="5587722">,</span>&nbsp;<span class="ident" id="5587724">decodeConfig</span><span class="op" id="5587736">}</span><span class="op" id="5587737">)</span><br>
<span class="lineno"></span><span class="op" id="5587739">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5587742">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5587796">type</span>&nbsp;<span class="ident" id="5587801">reader</span>&nbsp;<span class="keyword" id="5587808">interface</span>&nbsp;<span class="op" id="5587818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5587821">io</span><span class="op" id="5587823">.</span><span class="ident" id="5587824">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5587832">Peek</span><span class="op" id="5587836">(</span><span class="builtintype" id="5587837">int</span><span class="op" id="5587840">)</span>&nbsp;<span class="op" id="5587842">(</span><span class="op" id="5587843">[</span><span class="op" id="5587844">]</span><span class="builtintype" id="5587845">byte</span><span class="op" id="5587849">,</span>&nbsp;<span class="builtintype" id="5587851">error</span><span class="op" id="5587856">)</span><br>
<span class="lineno">40</span><span class="op" id="5587858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5587861">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5587908">func</span>&nbsp;<span class="ident" id="5587913">asReader</span><span class="op" id="5587921">(</span><span class="ident" id="5587922">r</span>&nbsp;<span class="ident" id="5587924">io</span><span class="op" id="5587926">.</span><span class="ident" id="5587927">Reader</span><span class="op" id="5587933">)</span>&nbsp;<span class="ident" id="5587935">reader</span>&nbsp;<span class="op" id="5587942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5587945">if</span>&nbsp;<span class="ident" id="5587948">rr</span><span class="op" id="5587950">,</span>&nbsp;<span class="ident" id="5587952">ok</span>&nbsp;<span class="op" id="5587955">:=</span>&nbsp;<span class="ident" id="5587958">r</span><span class="op" id="5587959">.</span><span class="op" id="5587960">(</span><span class="ident" id="5587961">reader</span><span class="op" id="5587967">)</span><span class="op" id="5587968">;</span>&nbsp;<span class="ident" id="5587970">ok</span>&nbsp;<span class="op" id="5587973">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5587977">return</span>&nbsp;<span class="ident" id="5587984">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5587988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5587991">return</span>&nbsp;<span class="ident" id="5587998">bufio</span><span class="op" id="5588003">.</span><span class="ident" id="5588004">NewReader</span><span class="op" id="5588013">(</span><span class="ident" id="5588014">r</span><span class="op" id="5588015">)</span><br>
<span class="lineno"></span><span class="op" id="5588017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5588020">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5588095">func</span>&nbsp;<span class="ident" id="5588100">match</span><span class="op" id="5588105">(</span><span class="ident" id="5588106">magic</span>&nbsp;<span class="builtintype" id="5588112">string</span><span class="op" id="5588118">,</span>&nbsp;<span class="ident" id="5588120">b</span>&nbsp;<span class="op" id="5588122">[</span><span class="op" id="5588123">]</span><span class="builtintype" id="5588124">byte</span><span class="op" id="5588128">)</span>&nbsp;<span class="builtintype" id="5588130">bool</span>&nbsp;<span class="op" id="5588135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588138">if</span>&nbsp;<span class="builtinfunc" id="5588141">len</span><span class="op" id="5588144">(</span><span class="ident" id="5588145">magic</span><span class="op" id="5588150">)</span>&nbsp;<span class="op" id="5588152">!=</span>&nbsp;<span class="builtinfunc" id="5588155">len</span><span class="op" id="5588158">(</span><span class="ident" id="5588159">b</span><span class="op" id="5588160">)</span>&nbsp;<span class="op" id="5588162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588166">return</span>&nbsp;<span class="builtintype" id="5588173">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5588180">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588183">for</span>&nbsp;<span class="ident" id="5588187">i</span><span class="op" id="5588188">,</span>&nbsp;<span class="ident" id="5588190">c</span>&nbsp;<span class="op" id="5588192">:=</span>&nbsp;<span class="keyword" id="5588195">range</span>&nbsp;<span class="ident" id="5588201">b</span>&nbsp;<span class="op" id="5588203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588207">if</span>&nbsp;<span class="ident" id="5588210">magic</span><span class="op" id="5588215">[</span><span class="ident" id="5588216">i</span><span class="op" id="5588217">]</span>&nbsp;<span class="op" id="5588219">!=</span>&nbsp;<span class="ident" id="5588222">c</span>&nbsp;<span class="op" id="5588224">&amp;&amp;</span>&nbsp;<span class="ident" id="5588227">magic</span><span class="op" id="5588232">[</span><span class="ident" id="5588233">i</span><span class="op" id="5588234">]</span>&nbsp;<span class="op" id="5588236">!=</span>&nbsp;<span class="string" id="5588239">&#39;?&#39;</span>&nbsp;<span class="op" id="5588243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588248">return</span>&nbsp;<span class="builtintype" id="5588255">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5588263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5588266">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588269">return</span>&nbsp;<span class="builtintype" id="5588276">true</span><br>
<span class="lineno"></span><span class="op" id="5588281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5588284">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5588328">func</span>&nbsp;<span class="ident" id="5588333">sniff</span><span class="op" id="5588338">(</span><span class="ident" id="5588339">r</span>&nbsp;<span class="ident" id="5588341">reader</span><span class="op" id="5588347">)</span>&nbsp;<span class="ident" id="5588349">format</span>&nbsp;<span class="op" id="5588356">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588359">for</span>&nbsp;<span class="ident" id="5588363">_</span><span class="op" id="5588364">,</span>&nbsp;<span class="ident" id="5588366">f</span>&nbsp;<span class="op" id="5588368">:=</span>&nbsp;<span class="keyword" id="5588371">range</span>&nbsp;<span class="ident" id="5588377">formats</span>&nbsp;<span class="op" id="5588385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5588389">b</span><span class="op" id="5588390">,</span>&nbsp;<span class="ident" id="5588392">err</span>&nbsp;<span class="op" id="5588396">:=</span>&nbsp;<span class="ident" id="5588399">r</span><span class="op" id="5588400">.</span><span class="ident" id="5588401">Peek</span><span class="op" id="5588405">(</span><span class="builtinfunc" id="5588406">len</span><span class="op" id="5588409">(</span><span class="ident" id="5588410">f</span><span class="op" id="5588411">.</span><span class="ident" id="5588412">magic</span><span class="op" id="5588417">)</span><span class="op" id="5588418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588422">if</span>&nbsp;<span class="ident" id="5588425">err</span>&nbsp;<span class="op" id="5588429">==</span>&nbsp;<span class="ident" id="5588432">nil</span>&nbsp;<span class="op" id="5588436">&amp;&amp;</span>&nbsp;<span class="ident" id="5588439">match</span><span class="op" id="5588444">(</span><span class="ident" id="5588445">f</span><span class="op" id="5588446">.</span><span class="ident" id="5588447">magic</span><span class="op" id="5588452">,</span>&nbsp;<span class="ident" id="5588454">b</span><span class="op" id="5588455">)</span>&nbsp;<span class="op" id="5588457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588462">return</span>&nbsp;<span class="ident" id="5588469">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5588473">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5588476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588479">return</span>&nbsp;<span class="ident" id="5588486">format</span><span class="op" id="5588492">{</span><span class="op" id="5588493">}</span><br>
<span class="lineno"></span><span class="op" id="5588495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5588498">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5588571">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5588646">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5588721">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5588742">func</span>&nbsp;<span class="ident" id="5588747">Decode</span><span class="op" id="5588753">(</span><span class="ident" id="5588754">r</span>&nbsp;<span class="ident" id="5588756">io</span><span class="op" id="5588758">.</span><span class="ident" id="5588759">Reader</span><span class="op" id="5588765">)</span>&nbsp;<span class="op" id="5588767">(</span><span class="ident" id="5588768">Image</span><span class="op" id="5588773">,</span>&nbsp;<span class="builtintype" id="5588775">string</span><span class="op" id="5588781">,</span>&nbsp;<span class="builtintype" id="5588783">error</span><span class="op" id="5588788">)</span>&nbsp;<span class="op" id="5588790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5588793">rr</span>&nbsp;<span class="op" id="5588796">:=</span>&nbsp;<span class="ident" id="5588799">asReader</span><span class="op" id="5588807">(</span><span class="ident" id="5588808">r</span><span class="op" id="5588809">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5588812">f</span>&nbsp;<span class="op" id="5588814">:=</span>&nbsp;<span class="ident" id="5588817">sniff</span><span class="op" id="5588822">(</span><span class="ident" id="5588823">rr</span><span class="op" id="5588825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588828">if</span>&nbsp;<span class="ident" id="5588831">f</span><span class="op" id="5588832">.</span><span class="ident" id="5588833">decode</span>&nbsp;<span class="op" id="5588840">==</span>&nbsp;<span class="ident" id="5588843">nil</span>&nbsp;<span class="op" id="5588847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588851">return</span>&nbsp;<span class="ident" id="5588858">nil</span><span class="op" id="5588861">,</span>&nbsp;<span class="string" id="5588863">&#34;&#34;</span><span class="op" id="5588865">,</span>&nbsp;<span class="ident" id="5588867">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5588878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5588881">m</span><span class="op" id="5588882">,</span>&nbsp;<span class="ident" id="5588884">err</span>&nbsp;<span class="op" id="5588888">:=</span>&nbsp;<span class="ident" id="5588891">f</span><span class="op" id="5588892">.</span><span class="ident" id="5588893">decode</span><span class="op" id="5588899">(</span><span class="ident" id="5588900">rr</span><span class="op" id="5588902">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5588905">return</span>&nbsp;<span class="ident" id="5588912">m</span><span class="op" id="5588913">,</span>&nbsp;<span class="ident" id="5588915">f</span><span class="op" id="5588916">.</span><span class="ident" id="5588917">name</span><span class="op" id="5588921">,</span>&nbsp;<span class="ident" id="5588923">err</span><br>
<span class="lineno"></span><span class="op" id="5588927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5588930">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5589006">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5589085">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5589162">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5589213">func</span>&nbsp;<span class="ident" id="5589218">DecodeConfig</span><span class="op" id="5589230">(</span><span class="ident" id="5589231">r</span>&nbsp;<span class="ident" id="5589233">io</span><span class="op" id="5589235">.</span><span class="ident" id="5589236">Reader</span><span class="op" id="5589242">)</span>&nbsp;<span class="op" id="5589244">(</span><span class="ident" id="5589245">Config</span><span class="op" id="5589251">,</span>&nbsp;<span class="builtintype" id="5589253">string</span><span class="op" id="5589259">,</span>&nbsp;<span class="builtintype" id="5589261">error</span><span class="op" id="5589266">)</span>&nbsp;<span class="op" id="5589268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5589271">rr</span>&nbsp;<span class="op" id="5589274">:=</span>&nbsp;<span class="ident" id="5589277">asReader</span><span class="op" id="5589285">(</span><span class="ident" id="5589286">r</span><span class="op" id="5589287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5589290">f</span>&nbsp;<span class="op" id="5589292">:=</span>&nbsp;<span class="ident" id="5589295">sniff</span><span class="op" id="5589300">(</span><span class="ident" id="5589301">rr</span><span class="op" id="5589303">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5589306">if</span>&nbsp;<span class="ident" id="5589309">f</span><span class="op" id="5589310">.</span><span class="ident" id="5589311">decodeConfig</span>&nbsp;<span class="op" id="5589324">==</span>&nbsp;<span class="ident" id="5589327">nil</span>&nbsp;<span class="op" id="5589331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5589335">return</span>&nbsp;<span class="ident" id="5589342">Config</span><span class="op" id="5589348">{</span><span class="op" id="5589349">}</span><span class="op" id="5589350">,</span>&nbsp;<span class="string" id="5589352">&#34;&#34;</span><span class="op" id="5589354">,</span>&nbsp;<span class="ident" id="5589356">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5589367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5589370">c</span><span class="op" id="5589371">,</span>&nbsp;<span class="ident" id="5589373">err</span>&nbsp;<span class="op" id="5589377">:=</span>&nbsp;<span class="ident" id="5589380">f</span><span class="op" id="5589381">.</span><span class="ident" id="5589382">decodeConfig</span><span class="op" id="5589394">(</span><span class="ident" id="5589395">rr</span><span class="op" id="5589397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5589400">return</span>&nbsp;<span class="ident" id="5589407">c</span><span class="op" id="5589408">,</span>&nbsp;<span class="ident" id="5589410">f</span><span class="op" id="5589411">.</span><span class="ident" id="5589412">name</span><span class="op" id="5589416">,</span>&nbsp;<span class="ident" id="5589418">err</span><br>
<span class="lineno">100</span><span class="op" id="5589422">}</span>
</div>
</body>
</html>
