<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html" class="current">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7700063">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7700119">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7700173">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7700224">package</span>&nbsp;<span class="ident" id="7700232">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700238">import</span>&nbsp;<span class="op" id="7700245">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700248">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700257">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700268">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700279">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7700286">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700289">var</span>&nbsp;<span class="ident" id="7700293">headerWriteTests</span>&nbsp;<span class="op" id="7700310">=</span>&nbsp;<span class="op" id="7700312">[</span><span class="op" id="7700313">]</span><span class="keyword" id="7700314">struct</span>&nbsp;<span class="op" id="7700321">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700324">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700333">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700341">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7700350">map</span><span class="op" id="7700353">[</span><span class="builtintype" id="7700354">string</span><span class="op" id="7700360">]</span><span class="builtintype" id="7700361">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700367">expected</span>&nbsp;<span class="builtintype" id="7700376">string</span><br>
<span class="lineno"></span><span class="op" id="7700383">}</span><span class="op" id="7700384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700387">{</span><span class="ident" id="7700388">Header</span><span class="op" id="7700394">{</span><span class="op" id="7700395">}</span><span class="op" id="7700396">,</span>&nbsp;<span class="builtintype" id="7700398">nil</span><span class="op" id="7700401">,</span>&nbsp;<span class="string" id="7700403">&#34;&#34;</span><span class="op" id="7700405">}</span><span class="op" id="7700406">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700413">Header</span><span class="op" id="7700419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700424">&#34;Content-Type&#34;</span><span class="op" id="7700438">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7700442">{</span><span class="string" id="7700443">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7700469">}</span><span class="op" id="7700470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700475">&#34;Content-Length&#34;</span><span class="op" id="7700491">:</span>&nbsp;<span class="op" id="7700493">{</span><span class="string" id="7700494">&#34;0&#34;</span><span class="op" id="7700497">}</span><span class="op" id="7700498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700502">}</span><span class="op" id="7700503">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7700507">nil</span><span class="op" id="7700510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700514">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7700579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700582">}</span><span class="op" id="7700583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700590">Header</span><span class="op" id="7700596">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700601">&#34;Content-Length&#34;</span><span class="op" id="7700617">:</span>&nbsp;<span class="op" id="7700619">{</span><span class="string" id="7700620">&#34;0&#34;</span><span class="op" id="7700623">,</span>&nbsp;<span class="string" id="7700625">&#34;1&#34;</span><span class="op" id="7700628">,</span>&nbsp;<span class="string" id="7700630">&#34;2&#34;</span><span class="op" id="7700633">}</span><span class="op" id="7700634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700638">}</span><span class="op" id="7700639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7700643">nil</span><span class="op" id="7700646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700650">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7700715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700718">}</span><span class="op" id="7700719">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700726">Header</span><span class="op" id="7700732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700737">&#34;Expires&#34;</span><span class="op" id="7700746">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700757">{</span><span class="string" id="7700758">&#34;-1&#34;</span><span class="op" id="7700762">}</span><span class="op" id="7700763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700768">&#34;Content-Length&#34;</span><span class="op" id="7700784">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7700788">{</span><span class="string" id="7700789">&#34;0&#34;</span><span class="op" id="7700792">}</span><span class="op" id="7700793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700798">&#34;Content-Encoding&#34;</span><span class="op" id="7700816">:</span>&nbsp;<span class="op" id="7700818">{</span><span class="string" id="7700819">&#34;gzip&#34;</span><span class="op" id="7700825">}</span><span class="op" id="7700826">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700830">}</span><span class="op" id="7700831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700835">map</span><span class="op" id="7700838">[</span><span class="builtintype" id="7700839">string</span><span class="op" id="7700845">]</span><span class="builtintype" id="7700846">bool</span><span class="op" id="7700850">{</span><span class="string" id="7700851">&#34;Content-Length&#34;</span><span class="op" id="7700867">:</span>&nbsp;<span class="builtintype" id="7700869">true</span><span class="op" id="7700873">}</span><span class="op" id="7700874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700878">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7700921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700924">}</span><span class="op" id="7700925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700928">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700932">Header</span><span class="op" id="7700938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700943">&#34;Expires&#34;</span><span class="op" id="7700952">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700963">{</span><span class="string" id="7700964">&#34;-1&#34;</span><span class="op" id="7700968">}</span><span class="op" id="7700969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700974">&#34;Content-Length&#34;</span><span class="op" id="7700990">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7700994">{</span><span class="string" id="7700995">&#34;0&#34;</span><span class="op" id="7700998">,</span>&nbsp;<span class="string" id="7701000">&#34;1&#34;</span><span class="op" id="7701003">,</span>&nbsp;<span class="string" id="7701005">&#34;2&#34;</span><span class="op" id="7701008">}</span><span class="op" id="7701009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701014">&#34;Content-Encoding&#34;</span><span class="op" id="7701032">:</span>&nbsp;<span class="op" id="7701034">{</span><span class="string" id="7701035">&#34;gzip&#34;</span><span class="op" id="7701041">}</span><span class="op" id="7701042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701046">}</span><span class="op" id="7701047">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701051">map</span><span class="op" id="7701054">[</span><span class="builtintype" id="7701055">string</span><span class="op" id="7701061">]</span><span class="builtintype" id="7701062">bool</span><span class="op" id="7701066">{</span><span class="string" id="7701067">&#34;Content-Length&#34;</span><span class="op" id="7701083">:</span>&nbsp;<span class="builtintype" id="7701085">true</span><span class="op" id="7701089">}</span><span class="op" id="7701090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701094">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7701137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701140">}</span><span class="op" id="7701141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701148">Header</span><span class="op" id="7701154">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701159">&#34;Expires&#34;</span><span class="op" id="7701168">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701179">{</span><span class="string" id="7701180">&#34;-1&#34;</span><span class="op" id="7701184">}</span><span class="op" id="7701185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701190">&#34;Content-Length&#34;</span><span class="op" id="7701206">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7701210">{</span><span class="string" id="7701211">&#34;0&#34;</span><span class="op" id="7701214">}</span><span class="op" id="7701215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701220">&#34;Content-Encoding&#34;</span><span class="op" id="7701238">:</span>&nbsp;<span class="op" id="7701240">{</span><span class="string" id="7701241">&#34;gzip&#34;</span><span class="op" id="7701247">}</span><span class="op" id="7701248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701252">}</span><span class="op" id="7701253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701257">map</span><span class="op" id="7701260">[</span><span class="builtintype" id="7701261">string</span><span class="op" id="7701267">]</span><span class="builtintype" id="7701268">bool</span><span class="op" id="7701272">{</span><span class="string" id="7701273">&#34;Content-Length&#34;</span><span class="op" id="7701289">:</span>&nbsp;<span class="builtintype" id="7701291">true</span><span class="op" id="7701295">,</span>&nbsp;<span class="string" id="7701297">&#34;Expires&#34;</span><span class="op" id="7701306">:</span>&nbsp;<span class="builtintype" id="7701308">true</span><span class="op" id="7701312">,</span>&nbsp;<span class="string" id="7701314">&#34;Content-Encoding&#34;</span><span class="op" id="7701332">:</span>&nbsp;<span class="builtintype" id="7701334">true</span><span class="op" id="7701338">}</span><span class="op" id="7701339">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701343">&#34;&#34;</span><span class="op" id="7701345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701348">}</span><span class="op" id="7701349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701356">Header</span><span class="op" id="7701362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701367">&#34;Nil&#34;</span><span class="op" id="7701372">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7701383">nil</span><span class="op" id="7701386">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701391">&#34;Empty&#34;</span><span class="op" id="7701398">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701407">{</span><span class="op" id="7701408">}</span><span class="op" id="7701409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701414">&#34;Blank&#34;</span><span class="op" id="7701421">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701430">{</span><span class="string" id="7701431">&#34;&#34;</span><span class="op" id="7701433">}</span><span class="op" id="7701434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701439">&#34;Double-Blank&#34;</span><span class="op" id="7701453">:</span>&nbsp;<span class="op" id="7701455">{</span><span class="string" id="7701456">&#34;&#34;</span><span class="op" id="7701458">,</span>&nbsp;<span class="string" id="7701460">&#34;&#34;</span><span class="op" id="7701462">}</span><span class="op" id="7701463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701467">}</span><span class="op" id="7701468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7701472">nil</span><span class="op" id="7701475">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701479">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7701528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701531">}</span><span class="op" id="7701532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7701535">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701609">Header</span><span class="op" id="7701615">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701620">&#34;k1&#34;</span><span class="op" id="7701624">:</span>&nbsp;<span class="op" id="7701626">{</span><span class="string" id="7701627">&#34;1a&#34;</span><span class="op" id="7701631">,</span>&nbsp;<span class="string" id="7701633">&#34;1b&#34;</span><span class="op" id="7701637">}</span><span class="op" id="7701638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701643">&#34;k2&#34;</span><span class="op" id="7701647">:</span>&nbsp;<span class="op" id="7701649">{</span><span class="string" id="7701650">&#34;2a&#34;</span><span class="op" id="7701654">,</span>&nbsp;<span class="string" id="7701656">&#34;2b&#34;</span><span class="op" id="7701660">}</span><span class="op" id="7701661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701666">&#34;k3&#34;</span><span class="op" id="7701670">:</span>&nbsp;<span class="op" id="7701672">{</span><span class="string" id="7701673">&#34;3a&#34;</span><span class="op" id="7701677">,</span>&nbsp;<span class="string" id="7701679">&#34;3b&#34;</span><span class="op" id="7701683">}</span><span class="op" id="7701684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701689">&#34;k4&#34;</span><span class="op" id="7701693">:</span>&nbsp;<span class="op" id="7701695">{</span><span class="string" id="7701696">&#34;4a&#34;</span><span class="op" id="7701700">,</span>&nbsp;<span class="string" id="7701702">&#34;4b&#34;</span><span class="op" id="7701706">}</span><span class="op" id="7701707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701712">&#34;k5&#34;</span><span class="op" id="7701716">:</span>&nbsp;<span class="op" id="7701718">{</span><span class="string" id="7701719">&#34;5a&#34;</span><span class="op" id="7701723">,</span>&nbsp;<span class="string" id="7701725">&#34;5b&#34;</span><span class="op" id="7701729">}</span><span class="op" id="7701730">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701735">&#34;k6&#34;</span><span class="op" id="7701739">:</span>&nbsp;<span class="op" id="7701741">{</span><span class="string" id="7701742">&#34;6a&#34;</span><span class="op" id="7701746">,</span>&nbsp;<span class="string" id="7701748">&#34;6b&#34;</span><span class="op" id="7701752">}</span><span class="op" id="7701753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701758">&#34;k7&#34;</span><span class="op" id="7701762">:</span>&nbsp;<span class="op" id="7701764">{</span><span class="string" id="7701765">&#34;7a&#34;</span><span class="op" id="7701769">,</span>&nbsp;<span class="string" id="7701771">&#34;7b&#34;</span><span class="op" id="7701775">}</span><span class="op" id="7701776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701781">&#34;k8&#34;</span><span class="op" id="7701785">:</span>&nbsp;<span class="op" id="7701787">{</span><span class="string" id="7701788">&#34;8a&#34;</span><span class="op" id="7701792">,</span>&nbsp;<span class="string" id="7701794">&#34;8b&#34;</span><span class="op" id="7701798">}</span><span class="op" id="7701799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701804">&#34;k9&#34;</span><span class="op" id="7701808">:</span>&nbsp;<span class="op" id="7701810">{</span><span class="string" id="7701811">&#34;9a&#34;</span><span class="op" id="7701815">,</span>&nbsp;<span class="string" id="7701817">&#34;9b&#34;</span><span class="op" id="7701821">}</span><span class="op" id="7701822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701826">}</span><span class="op" id="7701827">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701831">map</span><span class="op" id="7701834">[</span><span class="builtintype" id="7701835">string</span><span class="op" id="7701841">]</span><span class="builtintype" id="7701842">bool</span><span class="op" id="7701846">{</span><span class="string" id="7701847">&#34;k5&#34;</span><span class="op" id="7701851">:</span>&nbsp;<span class="builtintype" id="7701853">true</span><span class="op" id="7701857">}</span><span class="op" id="7701858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701862">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7701925">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701930">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7701973">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701978">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7702040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702043">}</span><span class="op" id="7702044">,</span><br>
<span class="lineno">90</span><span class="op" id="7702046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702049">func</span>&nbsp;<span class="ident" id="7702054">TestHeaderWrite</span><span class="op" id="7702069">(</span><span class="ident" id="7702070">t</span>&nbsp;<span class="op" id="7702072">*</span><span class="ident" id="7702073">testing</span><span class="op" id="7702080">.</span><span class="ident" id="7702081">T</span><span class="op" id="7702082">)</span>&nbsp;<span class="op" id="7702084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702087">var</span>&nbsp;<span class="ident" id="7702091">buf</span>&nbsp;<span class="ident" id="7702095">bytes</span><span class="op" id="7702100">.</span><span class="ident" id="7702101">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702109">for</span>&nbsp;<span class="ident" id="7702113">i</span><span class="op" id="7702114">,</span>&nbsp;<span class="ident" id="7702116">test</span>&nbsp;<span class="op" id="7702121">:=</span>&nbsp;<span class="keyword" id="7702124">range</span>&nbsp;<span class="ident" id="7702130">headerWriteTests</span>&nbsp;<span class="op" id="7702147">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702151">test</span><span class="op" id="7702155">.</span><span class="ident" id="7702156">h</span><span class="op" id="7702157">.</span><span class="ident" id="7702158">WriteSubset</span><span class="op" id="7702169">(</span><span class="op" id="7702170">&amp;</span><span class="ident" id="7702171">buf</span><span class="op" id="7702174">,</span>&nbsp;<span class="ident" id="7702176">test</span><span class="op" id="7702180">.</span><span class="ident" id="7702181">exclude</span><span class="op" id="7702188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702192">if</span>&nbsp;<span class="ident" id="7702195">buf</span><span class="op" id="7702198">.</span><span class="ident" id="7702199">String</span><span class="op" id="7702205">(</span><span class="op" id="7702206">)</span>&nbsp;<span class="op" id="7702208">!=</span>&nbsp;<span class="ident" id="7702211">test</span><span class="op" id="7702215">.</span><span class="ident" id="7702216">expected</span>&nbsp;<span class="op" id="7702225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702230">t</span><span class="op" id="7702231">.</span><span class="ident" id="7702232">Errorf</span><span class="op" id="7702238">(</span><span class="string" id="7702239">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7702265">,</span>&nbsp;<span class="ident" id="7702267">i</span><span class="op" id="7702268">,</span>&nbsp;<span class="ident" id="7702270">buf</span><span class="op" id="7702273">.</span><span class="ident" id="7702274">String</span><span class="op" id="7702280">(</span><span class="op" id="7702281">)</span><span class="op" id="7702282">,</span>&nbsp;<span class="ident" id="7702284">test</span><span class="op" id="7702288">.</span><span class="ident" id="7702289">expected</span><span class="op" id="7702297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702305">buf</span><span class="op" id="7702308">.</span><span class="ident" id="7702309">Reset</span><span class="op" id="7702314">(</span><span class="op" id="7702315">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702318">}</span><br>
<span class="lineno"></span><span class="op" id="7702320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702323">var</span>&nbsp;<span class="ident" id="7702327">parseTimeTests</span>&nbsp;<span class="op" id="7702342">=</span>&nbsp;<span class="op" id="7702344">[</span><span class="op" id="7702345">]</span><span class="keyword" id="7702346">struct</span>&nbsp;<span class="op" id="7702353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702356">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7702360">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702368">err</span>&nbsp;<span class="builtintype" id="7702372">bool</span><br>
<span class="lineno"></span><span class="op" id="7702377">}</span><span class="op" id="7702378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702381">{</span><span class="ident" id="7702382">Header</span><span class="op" id="7702388">{</span><span class="string" id="7702389">&#34;Date&#34;</span><span class="op" id="7702395">:</span>&nbsp;<span class="op" id="7702397">{</span><span class="string" id="7702398">&#34;&#34;</span><span class="op" id="7702400">}</span><span class="op" id="7702401">}</span><span class="op" id="7702402">,</span>&nbsp;<span class="builtintype" id="7702404">true</span><span class="op" id="7702408">}</span><span class="op" id="7702409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702412">{</span><span class="ident" id="7702413">Header</span><span class="op" id="7702419">{</span><span class="string" id="7702420">&#34;Date&#34;</span><span class="op" id="7702426">:</span>&nbsp;<span class="op" id="7702428">{</span><span class="string" id="7702429">&#34;invalid&#34;</span><span class="op" id="7702438">}</span><span class="op" id="7702439">}</span><span class="op" id="7702440">,</span>&nbsp;<span class="builtintype" id="7702442">true</span><span class="op" id="7702446">}</span><span class="op" id="7702447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702450">{</span><span class="ident" id="7702451">Header</span><span class="op" id="7702457">{</span><span class="string" id="7702458">&#34;Date&#34;</span><span class="op" id="7702464">:</span>&nbsp;<span class="op" id="7702466">{</span><span class="string" id="7702467">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7702494">}</span><span class="op" id="7702495">}</span><span class="op" id="7702496">,</span>&nbsp;<span class="builtintype" id="7702498">true</span><span class="op" id="7702502">}</span><span class="op" id="7702503">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702506">{</span><span class="ident" id="7702507">Header</span><span class="op" id="7702513">{</span><span class="string" id="7702514">&#34;Date&#34;</span><span class="op" id="7702520">:</span>&nbsp;<span class="op" id="7702522">{</span><span class="string" id="7702523">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7702554">}</span><span class="op" id="7702555">}</span><span class="op" id="7702556">,</span>&nbsp;<span class="builtintype" id="7702558">false</span><span class="op" id="7702563">}</span><span class="op" id="7702564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702567">{</span><span class="ident" id="7702568">Header</span><span class="op" id="7702574">{</span><span class="string" id="7702575">&#34;Date&#34;</span><span class="op" id="7702581">:</span>&nbsp;<span class="op" id="7702583">{</span><span class="string" id="7702584">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7702616">}</span><span class="op" id="7702617">}</span><span class="op" id="7702618">,</span>&nbsp;<span class="builtintype" id="7702620">false</span><span class="op" id="7702625">}</span><span class="op" id="7702626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702629">{</span><span class="ident" id="7702630">Header</span><span class="op" id="7702636">{</span><span class="string" id="7702637">&#34;Date&#34;</span><span class="op" id="7702643">:</span>&nbsp;<span class="op" id="7702645">{</span><span class="string" id="7702646">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7702672">}</span><span class="op" id="7702673">}</span><span class="op" id="7702674">,</span>&nbsp;<span class="builtintype" id="7702676">false</span><span class="op" id="7702681">}</span><span class="op" id="7702682">,</span><br>
<span class="lineno"></span><span class="op" id="7702684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7702687">func</span>&nbsp;<span class="ident" id="7702692">TestParseTime</span><span class="op" id="7702705">(</span><span class="ident" id="7702706">t</span>&nbsp;<span class="op" id="7702708">*</span><span class="ident" id="7702709">testing</span><span class="op" id="7702716">.</span><span class="ident" id="7702717">T</span><span class="op" id="7702718">)</span>&nbsp;<span class="op" id="7702720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702723">expect</span>&nbsp;<span class="op" id="7702730">:=</span>&nbsp;<span class="ident" id="7702733">time</span><span class="op" id="7702737">.</span><span class="ident" id="7702738">Date</span><span class="op" id="7702742">(</span><span class="num" id="7702743">1994</span><span class="op" id="7702747">,</span>&nbsp;<span class="num" id="7702749">11</span><span class="op" id="7702751">,</span>&nbsp;<span class="num" id="7702753">6</span><span class="op" id="7702754">,</span>&nbsp;<span class="num" id="7702756">8</span><span class="op" id="7702757">,</span>&nbsp;<span class="num" id="7702759">49</span><span class="op" id="7702761">,</span>&nbsp;<span class="num" id="7702763">37</span><span class="op" id="7702765">,</span>&nbsp;<span class="num" id="7702767">0</span><span class="op" id="7702768">,</span>&nbsp;<span class="ident" id="7702770">time</span><span class="op" id="7702774">.</span><span class="ident" id="7702775">UTC</span><span class="op" id="7702778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702781">for</span>&nbsp;<span class="ident" id="7702785">i</span><span class="op" id="7702786">,</span>&nbsp;<span class="ident" id="7702788">test</span>&nbsp;<span class="op" id="7702793">:=</span>&nbsp;<span class="keyword" id="7702796">range</span>&nbsp;<span class="ident" id="7702802">parseTimeTests</span>&nbsp;<span class="op" id="7702817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702821">d</span><span class="op" id="7702822">,</span>&nbsp;<span class="ident" id="7702824">err</span>&nbsp;<span class="op" id="7702828">:=</span>&nbsp;<span class="ident" id="7702831">ParseTime</span><span class="op" id="7702840">(</span><span class="ident" id="7702841">test</span><span class="op" id="7702845">.</span><span class="ident" id="7702846">h</span><span class="op" id="7702847">.</span><span class="ident" id="7702848">Get</span><span class="op" id="7702851">(</span><span class="string" id="7702852">&#34;Date&#34;</span><span class="op" id="7702858">)</span><span class="op" id="7702859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702863">if</span>&nbsp;<span class="ident" id="7702866">err</span>&nbsp;<span class="op" id="7702870">!=</span>&nbsp;<span class="builtintype" id="7702873">nil</span>&nbsp;<span class="op" id="7702877">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702882">if</span>&nbsp;<span class="op" id="7702885">!</span><span class="ident" id="7702886">test</span><span class="op" id="7702890">.</span><span class="ident" id="7702891">err</span>&nbsp;<span class="op" id="7702895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702901">t</span><span class="op" id="7702902">.</span><span class="ident" id="7702903">Errorf</span><span class="op" id="7702909">(</span><span class="string" id="7702910">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7702930">,</span>&nbsp;<span class="ident" id="7702932">i</span><span class="op" id="7702933">,</span>&nbsp;<span class="ident" id="7702935">err</span><span class="op" id="7702938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702948">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702959">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702963">if</span>&nbsp;<span class="ident" id="7702966">test</span><span class="op" id="7702970">.</span><span class="ident" id="7702971">err</span>&nbsp;<span class="op" id="7702975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702980">t</span><span class="op" id="7702981">.</span><span class="ident" id="7702982">Errorf</span><span class="op" id="7702988">(</span><span class="string" id="7702989">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7703009">,</span>&nbsp;<span class="ident" id="7703011">i</span><span class="op" id="7703012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703017">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703032">if</span>&nbsp;<span class="op" id="7703035">!</span><span class="ident" id="7703036">expect</span><span class="op" id="7703042">.</span><span class="ident" id="7703043">Equal</span><span class="op" id="7703048">(</span><span class="ident" id="7703049">d</span><span class="op" id="7703050">)</span>&nbsp;<span class="op" id="7703052">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703057">t</span><span class="op" id="7703058">.</span><span class="ident" id="7703059">Errorf</span><span class="op" id="7703065">(</span><span class="string" id="7703066">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7703092">,</span>&nbsp;<span class="ident" id="7703094">i</span><span class="op" id="7703095">,</span>&nbsp;<span class="ident" id="7703097">d</span><span class="op" id="7703098">,</span>&nbsp;<span class="ident" id="7703100">expect</span><span class="op" id="7703106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703113">}</span><br>
<span class="lineno"></span><span class="op" id="7703115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7703118">type</span>&nbsp;<span class="ident" id="7703123">hasTokenTest</span>&nbsp;<span class="keyword" id="7703136">struct</span>&nbsp;<span class="op" id="7703143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703146">header</span>&nbsp;<span class="builtintype" id="7703153">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703161">token</span>&nbsp;&nbsp;<span class="builtintype" id="7703168">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703176">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7703183">bool</span><br>
<span class="lineno"></span><span class="op" id="7703188">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7703191">var</span>&nbsp;<span class="ident" id="7703195">hasTokenTests</span>&nbsp;<span class="op" id="7703209">=</span>&nbsp;<span class="op" id="7703211">[</span><span class="op" id="7703212">]</span><span class="ident" id="7703213">hasTokenTest</span><span class="op" id="7703225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703228">{</span><span class="string" id="7703229">&#34;&#34;</span><span class="op" id="7703231">,</span>&nbsp;<span class="string" id="7703233">&#34;&#34;</span><span class="op" id="7703235">,</span>&nbsp;<span class="builtintype" id="7703237">false</span><span class="op" id="7703242">}</span><span class="op" id="7703243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703246">{</span><span class="string" id="7703247">&#34;&#34;</span><span class="op" id="7703249">,</span>&nbsp;<span class="string" id="7703251">&#34;foo&#34;</span><span class="op" id="7703256">,</span>&nbsp;<span class="builtintype" id="7703258">false</span><span class="op" id="7703263">}</span><span class="op" id="7703264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703267">{</span><span class="string" id="7703268">&#34;foo&#34;</span><span class="op" id="7703273">,</span>&nbsp;<span class="string" id="7703275">&#34;foo&#34;</span><span class="op" id="7703280">,</span>&nbsp;<span class="builtintype" id="7703282">true</span><span class="op" id="7703286">}</span><span class="op" id="7703287">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703290">{</span><span class="string" id="7703291">&#34;foo&nbsp;&#34;</span><span class="op" id="7703297">,</span>&nbsp;<span class="string" id="7703299">&#34;foo&#34;</span><span class="op" id="7703304">,</span>&nbsp;<span class="builtintype" id="7703306">true</span><span class="op" id="7703310">}</span><span class="op" id="7703311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703314">{</span><span class="string" id="7703315">&#34;&nbsp;foo&#34;</span><span class="op" id="7703321">,</span>&nbsp;<span class="string" id="7703323">&#34;foo&#34;</span><span class="op" id="7703328">,</span>&nbsp;<span class="builtintype" id="7703330">true</span><span class="op" id="7703334">}</span><span class="op" id="7703335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703338">{</span><span class="string" id="7703339">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7703346">,</span>&nbsp;<span class="string" id="7703348">&#34;foo&#34;</span><span class="op" id="7703353">,</span>&nbsp;<span class="builtintype" id="7703355">true</span><span class="op" id="7703359">}</span><span class="op" id="7703360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703363">{</span><span class="string" id="7703364">&#34;foo,bar&#34;</span><span class="op" id="7703373">,</span>&nbsp;<span class="string" id="7703375">&#34;foo&#34;</span><span class="op" id="7703380">,</span>&nbsp;<span class="builtintype" id="7703382">true</span><span class="op" id="7703386">}</span><span class="op" id="7703387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703390">{</span><span class="string" id="7703391">&#34;bar,foo&#34;</span><span class="op" id="7703400">,</span>&nbsp;<span class="string" id="7703402">&#34;foo&#34;</span><span class="op" id="7703407">,</span>&nbsp;<span class="builtintype" id="7703409">true</span><span class="op" id="7703413">}</span><span class="op" id="7703414">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703417">{</span><span class="string" id="7703418">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7703428">,</span>&nbsp;<span class="string" id="7703430">&#34;foo&#34;</span><span class="op" id="7703435">,</span>&nbsp;<span class="builtintype" id="7703437">true</span><span class="op" id="7703441">}</span><span class="op" id="7703442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703445">{</span><span class="string" id="7703446">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7703460">,</span>&nbsp;<span class="string" id="7703462">&#34;foo&#34;</span><span class="op" id="7703467">,</span>&nbsp;<span class="builtintype" id="7703469">true</span><span class="op" id="7703473">}</span><span class="op" id="7703474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703477">{</span><span class="string" id="7703478">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7703492">,</span>&nbsp;<span class="string" id="7703494">&#34;foo&#34;</span><span class="op" id="7703499">,</span>&nbsp;<span class="builtintype" id="7703501">true</span><span class="op" id="7703505">}</span><span class="op" id="7703506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703509">{</span><span class="string" id="7703510">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7703524">,</span>&nbsp;<span class="string" id="7703526">&#34;foo&#34;</span><span class="op" id="7703531">,</span>&nbsp;<span class="builtintype" id="7703533">true</span><span class="op" id="7703537">}</span><span class="op" id="7703538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703541">{</span><span class="string" id="7703542">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7703557">,</span>&nbsp;<span class="string" id="7703559">&#34;foo&#34;</span><span class="op" id="7703564">,</span>&nbsp;<span class="builtintype" id="7703566">true</span><span class="op" id="7703570">}</span><span class="op" id="7703571">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703574">{</span><span class="string" id="7703575">&#34;FOO&#34;</span><span class="op" id="7703580">,</span>&nbsp;<span class="string" id="7703582">&#34;foo&#34;</span><span class="op" id="7703587">,</span>&nbsp;<span class="builtintype" id="7703589">true</span><span class="op" id="7703593">}</span><span class="op" id="7703594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703597">{</span><span class="string" id="7703598">&#34;FOO&nbsp;&#34;</span><span class="op" id="7703604">,</span>&nbsp;<span class="string" id="7703606">&#34;foo&#34;</span><span class="op" id="7703611">,</span>&nbsp;<span class="builtintype" id="7703613">true</span><span class="op" id="7703617">}</span><span class="op" id="7703618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703621">{</span><span class="string" id="7703622">&#34;&nbsp;FOO&#34;</span><span class="op" id="7703628">,</span>&nbsp;<span class="string" id="7703630">&#34;foo&#34;</span><span class="op" id="7703635">,</span>&nbsp;<span class="builtintype" id="7703637">true</span><span class="op" id="7703641">}</span><span class="op" id="7703642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703645">{</span><span class="string" id="7703646">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7703653">,</span>&nbsp;<span class="string" id="7703655">&#34;foo&#34;</span><span class="op" id="7703660">,</span>&nbsp;<span class="builtintype" id="7703662">true</span><span class="op" id="7703666">}</span><span class="op" id="7703667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703670">{</span><span class="string" id="7703671">&#34;FOO,BAR&#34;</span><span class="op" id="7703680">,</span>&nbsp;<span class="string" id="7703682">&#34;foo&#34;</span><span class="op" id="7703687">,</span>&nbsp;<span class="builtintype" id="7703689">true</span><span class="op" id="7703693">}</span><span class="op" id="7703694">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703697">{</span><span class="string" id="7703698">&#34;BAR,FOO&#34;</span><span class="op" id="7703707">,</span>&nbsp;<span class="string" id="7703709">&#34;foo&#34;</span><span class="op" id="7703714">,</span>&nbsp;<span class="builtintype" id="7703716">true</span><span class="op" id="7703720">}</span><span class="op" id="7703721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703724">{</span><span class="string" id="7703725">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7703735">,</span>&nbsp;<span class="string" id="7703737">&#34;foo&#34;</span><span class="op" id="7703742">,</span>&nbsp;<span class="builtintype" id="7703744">true</span><span class="op" id="7703748">}</span><span class="op" id="7703749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703752">{</span><span class="string" id="7703753">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7703767">,</span>&nbsp;<span class="string" id="7703769">&#34;foo&#34;</span><span class="op" id="7703774">,</span>&nbsp;<span class="builtintype" id="7703776">true</span><span class="op" id="7703780">}</span><span class="op" id="7703781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703784">{</span><span class="string" id="7703785">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7703799">,</span>&nbsp;<span class="string" id="7703801">&#34;foo&#34;</span><span class="op" id="7703806">,</span>&nbsp;<span class="builtintype" id="7703808">true</span><span class="op" id="7703812">}</span><span class="op" id="7703813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703816">{</span><span class="string" id="7703817">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7703831">,</span>&nbsp;<span class="string" id="7703833">&#34;foo&#34;</span><span class="op" id="7703838">,</span>&nbsp;<span class="builtintype" id="7703840">true</span><span class="op" id="7703844">}</span><span class="op" id="7703845">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703848">{</span><span class="string" id="7703849">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7703864">,</span>&nbsp;<span class="string" id="7703866">&#34;foo&#34;</span><span class="op" id="7703871">,</span>&nbsp;<span class="builtintype" id="7703873">true</span><span class="op" id="7703877">}</span><span class="op" id="7703878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703881">{</span><span class="string" id="7703882">&#34;foobar&#34;</span><span class="op" id="7703890">,</span>&nbsp;<span class="string" id="7703892">&#34;foo&#34;</span><span class="op" id="7703897">,</span>&nbsp;<span class="builtintype" id="7703899">false</span><span class="op" id="7703904">}</span><span class="op" id="7703905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703908">{</span><span class="string" id="7703909">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7703918">,</span>&nbsp;<span class="string" id="7703920">&#34;foo&#34;</span><span class="op" id="7703925">,</span>&nbsp;<span class="builtintype" id="7703927">false</span><span class="op" id="7703932">}</span><span class="op" id="7703933">,</span><br>
<span class="lineno"></span><span class="op" id="7703935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7703938">func</span>&nbsp;<span class="ident" id="7703943">TestHasToken</span><span class="op" id="7703955">(</span><span class="ident" id="7703956">t</span>&nbsp;<span class="op" id="7703958">*</span><span class="ident" id="7703959">testing</span><span class="op" id="7703966">.</span><span class="ident" id="7703967">T</span><span class="op" id="7703968">)</span>&nbsp;<span class="op" id="7703970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703973">for</span>&nbsp;<span class="ident" id="7703977">_</span><span class="op" id="7703978">,</span>&nbsp;<span class="ident" id="7703980">tt</span>&nbsp;<span class="op" id="7703983">:=</span>&nbsp;<span class="keyword" id="7703986">range</span>&nbsp;<span class="ident" id="7703992">hasTokenTests</span>&nbsp;<span class="op" id="7704006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704010">if</span>&nbsp;<span class="ident" id="7704013">hasToken</span><span class="op" id="7704021">(</span><span class="ident" id="7704022">tt</span><span class="op" id="7704024">.</span><span class="ident" id="7704025">header</span><span class="op" id="7704031">,</span>&nbsp;<span class="ident" id="7704033">tt</span><span class="op" id="7704035">.</span><span class="ident" id="7704036">token</span><span class="op" id="7704041">)</span>&nbsp;<span class="op" id="7704043">!=</span>&nbsp;<span class="ident" id="7704046">tt</span><span class="op" id="7704048">.</span><span class="ident" id="7704049">want</span>&nbsp;<span class="op" id="7704054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704059">t</span><span class="op" id="7704060">.</span><span class="ident" id="7704061">Errorf</span><span class="op" id="7704067">(</span><span class="string" id="7704068">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7704100">,</span>&nbsp;<span class="ident" id="7704102">tt</span><span class="op" id="7704104">.</span><span class="ident" id="7704105">header</span><span class="op" id="7704111">,</span>&nbsp;<span class="ident" id="7704113">tt</span><span class="op" id="7704115">.</span><span class="ident" id="7704116">token</span><span class="op" id="7704121">,</span>&nbsp;<span class="op" id="7704123">!</span><span class="ident" id="7704124">tt</span><span class="op" id="7704126">.</span><span class="ident" id="7704127">want</span><span class="op" id="7704131">,</span>&nbsp;<span class="ident" id="7704133">tt</span><span class="op" id="7704135">.</span><span class="ident" id="7704136">want</span><span class="op" id="7704140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704144">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704147">}</span><br>
<span class="lineno"></span><span class="op" id="7704149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704152">var</span>&nbsp;<span class="ident" id="7704156">testHeader</span>&nbsp;<span class="op" id="7704167">=</span>&nbsp;<span class="ident" id="7704169">Header</span><span class="op" id="7704175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704178">&#34;Content-Length&#34;</span><span class="op" id="7704194">:</span>&nbsp;<span class="op" id="7704196">{</span><span class="string" id="7704197">&#34;123&#34;</span><span class="op" id="7704202">}</span><span class="op" id="7704203">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704206">&#34;Content-Type&#34;</span><span class="op" id="7704220">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7704224">{</span><span class="string" id="7704225">&#34;text/plain&#34;</span><span class="op" id="7704237">}</span><span class="op" id="7704238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704241">&#34;Date&#34;</span><span class="op" id="7704247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704259">{</span><span class="string" id="7704260">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7704286">}</span><span class="op" id="7704287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704290">&#34;Server&#34;</span><span class="op" id="7704298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704308">{</span><span class="ident" id="7704309">DefaultUserAgent</span><span class="op" id="7704325">}</span><span class="op" id="7704326">,</span><br>
<span class="lineno"></span><span class="op" id="7704328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7704331">var</span>&nbsp;<span class="ident" id="7704335">buf</span>&nbsp;<span class="ident" id="7704339">bytes</span><span class="op" id="7704344">.</span><span class="ident" id="7704345">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704353">func</span>&nbsp;<span class="ident" id="7704358">BenchmarkHeaderWriteSubset</span><span class="op" id="7704384">(</span><span class="ident" id="7704385">b</span>&nbsp;<span class="op" id="7704387">*</span><span class="ident" id="7704388">testing</span><span class="op" id="7704395">.</span><span class="ident" id="7704396">B</span><span class="op" id="7704397">)</span>&nbsp;<span class="op" id="7704399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704402">b</span><span class="op" id="7704403">.</span><span class="ident" id="7704404">ReportAllocs</span><span class="op" id="7704416">(</span><span class="op" id="7704417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704420">for</span>&nbsp;<span class="ident" id="7704424">i</span>&nbsp;<span class="op" id="7704426">:=</span>&nbsp;<span class="num" id="7704429">0</span><span class="op" id="7704430">;</span>&nbsp;<span class="ident" id="7704432">i</span>&nbsp;<span class="op" id="7704434">&lt;</span>&nbsp;<span class="ident" id="7704436">b</span><span class="op" id="7704437">.</span><span class="ident" id="7704438">N</span><span class="op" id="7704439">;</span>&nbsp;<span class="ident" id="7704441">i</span><span class="op" id="7704442">++</span>&nbsp;<span class="op" id="7704445">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704449">buf</span><span class="op" id="7704452">.</span><span class="ident" id="7704453">Reset</span><span class="op" id="7704458">(</span><span class="op" id="7704459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704463">testHeader</span><span class="op" id="7704473">.</span><span class="ident" id="7704474">WriteSubset</span><span class="op" id="7704485">(</span><span class="op" id="7704486">&amp;</span><span class="ident" id="7704487">buf</span><span class="op" id="7704490">,</span>&nbsp;<span class="builtintype" id="7704492">nil</span><span class="op" id="7704495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704498">}</span><br>
<span class="lineno"></span><span class="op" id="7704500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7704503">func</span>&nbsp;<span class="ident" id="7704508">TestHeaderWriteSubsetAllocs</span><span class="op" id="7704535">(</span><span class="ident" id="7704536">t</span>&nbsp;<span class="op" id="7704538">*</span><span class="ident" id="7704539">testing</span><span class="op" id="7704546">.</span><span class="ident" id="7704547">T</span><span class="op" id="7704548">)</span>&nbsp;<span class="op" id="7704550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704553">if</span>&nbsp;<span class="ident" id="7704556">testing</span><span class="op" id="7704563">.</span><span class="ident" id="7704564">Short</span><span class="op" id="7704569">(</span><span class="op" id="7704570">)</span>&nbsp;<span class="op" id="7704572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704576">t</span><span class="op" id="7704577">.</span><span class="ident" id="7704578">Skip</span><span class="op" id="7704582">(</span><span class="string" id="7704583">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7704618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704624">if</span>&nbsp;<span class="ident" id="7704627">raceEnabled</span>&nbsp;<span class="op" id="7704639">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704643">t</span><span class="op" id="7704644">.</span><span class="ident" id="7704645">Skip</span><span class="op" id="7704649">(</span><span class="string" id="7704650">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7704685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704691">if</span>&nbsp;<span class="ident" id="7704694">runtime</span><span class="op" id="7704701">.</span><span class="ident" id="7704702">GOMAXPROCS</span><span class="op" id="7704712">(</span><span class="num" id="7704713">0</span><span class="op" id="7704714">)</span>&nbsp;<span class="op" id="7704716">&gt;</span>&nbsp;<span class="num" id="7704718">1</span>&nbsp;<span class="op" id="7704720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704724">t</span><span class="op" id="7704725">.</span><span class="ident" id="7704726">Skip</span><span class="op" id="7704730">(</span><span class="string" id="7704731">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7704755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704758">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704761">n</span>&nbsp;<span class="op" id="7704763">:=</span>&nbsp;<span class="ident" id="7704766">testing</span><span class="op" id="7704773">.</span><span class="ident" id="7704774">AllocsPerRun</span><span class="op" id="7704786">(</span><span class="num" id="7704787">100</span><span class="op" id="7704790">,</span>&nbsp;<span class="keyword" id="7704792">func</span><span class="op" id="7704796">(</span><span class="op" id="7704797">)</span>&nbsp;<span class="op" id="7704799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704803">buf</span><span class="op" id="7704806">.</span><span class="ident" id="7704807">Reset</span><span class="op" id="7704812">(</span><span class="op" id="7704813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704817">testHeader</span><span class="op" id="7704827">.</span><span class="ident" id="7704828">WriteSubset</span><span class="op" id="7704839">(</span><span class="op" id="7704840">&amp;</span><span class="ident" id="7704841">buf</span><span class="op" id="7704844">,</span>&nbsp;<span class="builtintype" id="7704846">nil</span><span class="op" id="7704849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704852">}</span><span class="op" id="7704853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704856">if</span>&nbsp;<span class="ident" id="7704859">n</span>&nbsp;<span class="op" id="7704861">&gt;</span>&nbsp;<span class="num" id="7704863">0</span>&nbsp;<span class="op" id="7704865">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704869">t</span><span class="op" id="7704870">.</span><span class="ident" id="7704871">Errorf</span><span class="op" id="7704877">(</span><span class="string" id="7704878">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7704899">,</span>&nbsp;<span class="ident" id="7704901">n</span><span class="op" id="7704902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704905">}</span><br>
<span class="lineno"></span><span class="op" id="7704907">}</span>
</div>
</body>
</html>
