<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5051039">package</span>&nbsp;<span class="ident" id="5051047">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5051054">import</span>&nbsp;<span class="op" id="5051061">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5051064">&#34;errors&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5051073">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5051076">//&nbsp;Excep&nbsp;defines&nbsp;an&nbsp;exception&nbsp;error&nbsp;with&nbsp;a&nbsp;code</span><br>
<span class="lineno"></span><span class="keyword" id="5051124">type</span>&nbsp;<span class="ident" id="5051129">Excep</span>&nbsp;<span class="keyword" id="5051135">struct</span>&nbsp;<span class="op" id="5051142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051145">Code</span>&nbsp;<span class="builtintype" id="5051150">byte</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051156">Arg</span>&nbsp;&nbsp;<span class="builtintype" id="5051161">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051169">Err</span>&nbsp;&nbsp;<span class="builtintype" id="5051174">error</span><br>
<span class="lineno"></span><span class="op" id="5051180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5051183">//&nbsp;NewExcep&nbsp;creates&nbsp;a&nbsp;new&nbsp;Exception&nbsp;with&nbsp;a&nbsp;particular&nbsp;code&nbsp;and&nbsp;message.</span><br>
<span class="lineno">15</span><span class="keyword" id="5051255">func</span>&nbsp;<span class="ident" id="5051260">newExcep</span><span class="op" id="5051268">(</span><span class="ident" id="5051269">c</span>&nbsp;<span class="builtintype" id="5051271">byte</span><span class="op" id="5051275">,</span>&nbsp;<span class="ident" id="5051277">s</span>&nbsp;<span class="builtintype" id="5051279">string</span><span class="op" id="5051285">)</span>&nbsp;<span class="op" id="5051287">*</span><span class="ident" id="5051288">Excep</span>&nbsp;<span class="op" id="5051294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051297">ret</span>&nbsp;<span class="op" id="5051301">:=</span>&nbsp;<span class="builtinfunc" id="5051304">new</span><span class="op" id="5051307">(</span><span class="ident" id="5051308">Excep</span><span class="op" id="5051313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051316">ret</span><span class="op" id="5051319">.</span><span class="ident" id="5051320">Code</span>&nbsp;<span class="op" id="5051325">=</span>&nbsp;<span class="ident" id="5051327">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051330">ret</span><span class="op" id="5051333">.</span><span class="ident" id="5051334">Err</span>&nbsp;<span class="op" id="5051338">=</span>&nbsp;<span class="ident" id="5051340">errors</span><span class="op" id="5051346">.</span><span class="ident" id="5051347">New</span><span class="op" id="5051350">(</span><span class="ident" id="5051351">s</span><span class="op" id="5051352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051355">return</span>&nbsp;<span class="ident" id="5051362">ret</span><br>
<span class="lineno">20</span><span class="op" id="5051366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5051369">func</span>&nbsp;<span class="op" id="5051374">(</span><span class="ident" id="5051375">e</span>&nbsp;<span class="op" id="5051377">*</span><span class="ident" id="5051378">Excep</span><span class="op" id="5051383">)</span>&nbsp;<span class="ident" id="5051385">Error</span><span class="op" id="5051390">(</span><span class="op" id="5051391">)</span>&nbsp;<span class="builtintype" id="5051393">string</span>&nbsp;<span class="op" id="5051400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051403">return</span>&nbsp;<span class="ident" id="5051410">e</span><span class="op" id="5051411">.</span><span class="ident" id="5051412">Err</span><span class="op" id="5051415">.</span><span class="ident" id="5051416">Error</span><span class="op" id="5051421">(</span><span class="op" id="5051422">)</span><br>
<span class="lineno"></span><span class="op" id="5051424">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5051427">//&nbsp;Exception&nbsp;codes</span><br>
<span class="lineno"></span><span class="keyword" id="5051446">const</span>&nbsp;<span class="op" id="5051452">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051455">ErrHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5051471">=</span>&nbsp;<span class="num" id="5051473">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051476">ErrTimer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5051492">=</span>&nbsp;<span class="num" id="5051494">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051497">ErrInvalidInst</span>&nbsp;&nbsp;<span class="op" id="5051513">=</span>&nbsp;<span class="num" id="5051515">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051518">ErrOutOfRange</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5051534">=</span>&nbsp;<span class="num" id="5051536">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051539">ErrMisalign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5051555">=</span>&nbsp;<span class="num" id="5051557">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051560">ErrPageFault</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5051576">=</span>&nbsp;<span class="num" id="5051578">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051581">ErrPageReadonly</span>&nbsp;<span class="op" id="5051597">=</span>&nbsp;<span class="num" id="5051599">7</span><br>
<span class="lineno">35</span><span class="op" id="5051601">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5051604">var</span>&nbsp;<span class="op" id="5051608">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051611">errHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5051626">=</span>&nbsp;<span class="ident" id="5051628">newExcep</span><span class="op" id="5051636">(</span><span class="ident" id="5051637">ErrHalt</span><span class="op" id="5051644">,</span>&nbsp;<span class="string" id="5051646">&#34;halt&#34;</span><span class="op" id="5051652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051655">errTimeInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5051670">=</span>&nbsp;<span class="ident" id="5051672">newExcep</span><span class="op" id="5051680">(</span><span class="ident" id="5051681">ErrTimer</span><span class="op" id="5051689">,</span>&nbsp;<span class="string" id="5051691">&#34;time&nbsp;interrupt&#34;</span><span class="op" id="5051707">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051710">errInvalidInst</span>&nbsp;<span class="op" id="5051725">=</span>&nbsp;<span class="ident" id="5051727">newExcep</span><span class="op" id="5051735">(</span><span class="ident" id="5051736">ErrInvalidInst</span><span class="op" id="5051750">,</span>&nbsp;<span class="string" id="5051752">&#34;invalid&nbsp;instruction&#34;</span><span class="op" id="5051773">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051777">errOutOfRange</span>&nbsp;<span class="op" id="5051791">=</span>&nbsp;<span class="ident" id="5051793">newExcep</span><span class="op" id="5051801">(</span><span class="ident" id="5051802">ErrOutOfRange</span><span class="op" id="5051815">,</span>&nbsp;<span class="string" id="5051817">&#34;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="5051831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051834">errMisalign</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5051848">=</span>&nbsp;<span class="ident" id="5051850">newExcep</span><span class="op" id="5051858">(</span><span class="ident" id="5051859">ErrMisalign</span><span class="op" id="5051870">,</span>&nbsp;<span class="string" id="5051872">&#34;address&nbsp;misalign&#34;</span><span class="op" id="5051890">)</span><br>
<span class="lineno"></span><span class="op" id="5051892">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5051895">func</span>&nbsp;<span class="ident" id="5051900">newPageFault</span><span class="op" id="5051912">(</span><span class="ident" id="5051913">va</span>&nbsp;<span class="builtintype" id="5051916">uint32</span><span class="op" id="5051922">)</span>&nbsp;<span class="op" id="5051924">*</span><span class="ident" id="5051925">Excep</span>&nbsp;<span class="op" id="5051931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051934">ret</span>&nbsp;<span class="op" id="5051938">:=</span>&nbsp;<span class="ident" id="5051941">newExcep</span><span class="op" id="5051949">(</span><span class="ident" id="5051950">ErrPageFault</span><span class="op" id="5051962">,</span>&nbsp;<span class="string" id="5051964">&#34;page&nbsp;fault&#34;</span><span class="op" id="5051976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051979">ret</span><span class="op" id="5051982">.</span><span class="ident" id="5051983">Arg</span>&nbsp;<span class="op" id="5051987">=</span>&nbsp;<span class="ident" id="5051989">va</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051993">return</span>&nbsp;<span class="ident" id="5052000">ret</span><br>
<span class="lineno">50</span><span class="op" id="5052004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5052007">func</span>&nbsp;<span class="ident" id="5052012">newPageReadonly</span><span class="op" id="5052027">(</span><span class="ident" id="5052028">va</span>&nbsp;<span class="builtintype" id="5052031">uint32</span><span class="op" id="5052037">)</span>&nbsp;<span class="op" id="5052039">*</span><span class="ident" id="5052040">Excep</span>&nbsp;<span class="op" id="5052046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052049">ret</span>&nbsp;<span class="op" id="5052053">:=</span>&nbsp;<span class="ident" id="5052056">newExcep</span><span class="op" id="5052064">(</span><span class="ident" id="5052065">ErrPageReadonly</span><span class="op" id="5052080">,</span>&nbsp;<span class="string" id="5052082">&#34;page&nbsp;read-only&#34;</span><span class="op" id="5052098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052101">ret</span><span class="op" id="5052104">.</span><span class="ident" id="5052105">Arg</span>&nbsp;<span class="op" id="5052109">=</span>&nbsp;<span class="ident" id="5052111">va</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052115">return</span>&nbsp;<span class="ident" id="5052122">ret</span><br>
<span class="lineno"></span><span class="op" id="5052126">}</span>
</div>
</body>
</html>
