<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1751492">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1751547">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1751601">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1751652">//&nbsp;Package&nbsp;io&nbsp;provides&nbsp;basic&nbsp;interfaces&nbsp;to&nbsp;I/O&nbsp;primitives.</span><br>
<span class="lineno"></span><span class="comment" id="1751711">//&nbsp;Its&nbsp;primary&nbsp;job&nbsp;is&nbsp;to&nbsp;wrap&nbsp;existing&nbsp;implementations&nbsp;of&nbsp;such&nbsp;primitives,</span><br>
<span class="lineno"></span><span class="comment" id="1751786">//&nbsp;such&nbsp;as&nbsp;those&nbsp;in&nbsp;package&nbsp;os,&nbsp;into&nbsp;shared&nbsp;public&nbsp;interfaces&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1751853">//&nbsp;abstract&nbsp;the&nbsp;functionality,&nbsp;plus&nbsp;some&nbsp;other&nbsp;related&nbsp;primitives.</span><br>
<span class="lineno"></span><span class="comment" id="1751920">//</span><br>
<span class="lineno">10</span><span class="comment" id="1751923">//&nbsp;Because&nbsp;these&nbsp;interfaces&nbsp;and&nbsp;primitives&nbsp;wrap&nbsp;lower-level&nbsp;operations&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1751999">//&nbsp;various&nbsp;implementations,&nbsp;unless&nbsp;otherwise&nbsp;informed&nbsp;clients&nbsp;should&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1752072">//&nbsp;assume&nbsp;they&nbsp;are&nbsp;safe&nbsp;for&nbsp;parallel&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="1752120">package</span>&nbsp;<span class="ident" id="1752128">io</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1752132">import</span>&nbsp;<span class="op" id="1752139">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1752142">&#34;errors&#34;</span><br>
<span class="lineno"></span><span class="op" id="1752151">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1752154">//&nbsp;ErrShortWrite&nbsp;means&nbsp;that&nbsp;a&nbsp;write&nbsp;accepted&nbsp;fewer&nbsp;bytes&nbsp;than&nbsp;requested</span><br>
<span class="lineno">20</span><span class="comment" id="1752226">//&nbsp;but&nbsp;failed&nbsp;to&nbsp;return&nbsp;an&nbsp;explicit&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="1752269">var</span>&nbsp;<span class="ident" id="1752273">ErrShortWrite</span>&nbsp;<span class="op" id="1752287">=</span>&nbsp;<span class="ident" id="1752289">errors</span><span class="op" id="1752295">.</span><span class="ident" id="1752296">New</span><span class="op" id="1752299">(</span><span class="string" id="1752300">&#34;short&nbsp;write&#34;</span><span class="op" id="1752313">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1752316">//&nbsp;ErrShortBuffer&nbsp;means&nbsp;that&nbsp;a&nbsp;read&nbsp;required&nbsp;a&nbsp;longer&nbsp;buffer&nbsp;than&nbsp;was&nbsp;provided.</span><br>
<span class="lineno"></span><span class="keyword" id="1752396">var</span>&nbsp;<span class="ident" id="1752400">ErrShortBuffer</span>&nbsp;<span class="op" id="1752415">=</span>&nbsp;<span class="ident" id="1752417">errors</span><span class="op" id="1752423">.</span><span class="ident" id="1752424">New</span><span class="op" id="1752427">(</span><span class="string" id="1752428">&#34;short&nbsp;buffer&#34;</span><span class="op" id="1752442">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1752445">//&nbsp;EOF&nbsp;is&nbsp;the&nbsp;error&nbsp;returned&nbsp;by&nbsp;Read&nbsp;when&nbsp;no&nbsp;more&nbsp;input&nbsp;is&nbsp;available.</span><br>
<span class="lineno"></span><span class="comment" id="1752515">//&nbsp;Functions&nbsp;should&nbsp;return&nbsp;EOF&nbsp;only&nbsp;to&nbsp;signal&nbsp;a&nbsp;graceful&nbsp;end&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1752586">//&nbsp;If&nbsp;the&nbsp;EOF&nbsp;occurs&nbsp;unexpectedly&nbsp;in&nbsp;a&nbsp;structured&nbsp;data&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="1752649">//&nbsp;the&nbsp;appropriate&nbsp;error&nbsp;is&nbsp;either&nbsp;ErrUnexpectedEOF&nbsp;or&nbsp;some&nbsp;other&nbsp;error</span><br>
<span class="lineno">30</span><span class="comment" id="1752721">//&nbsp;giving&nbsp;more&nbsp;detail.</span><br>
<span class="lineno"></span><span class="keyword" id="1752744">var</span>&nbsp;<span class="ident" id="1752748">EOF</span>&nbsp;<span class="op" id="1752752">=</span>&nbsp;<span class="ident" id="1752754">errors</span><span class="op" id="1752760">.</span><span class="ident" id="1752761">New</span><span class="op" id="1752764">(</span><span class="string" id="1752765">&#34;EOF&#34;</span><span class="op" id="1752770">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1752773">//&nbsp;ErrUnexpectedEOF&nbsp;means&nbsp;that&nbsp;EOF&nbsp;was&nbsp;encountered&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1752831">//&nbsp;middle&nbsp;of&nbsp;reading&nbsp;a&nbsp;fixed-size&nbsp;block&nbsp;or&nbsp;data&nbsp;structure.</span><br>
<span class="lineno">35</span><span class="keyword" id="1752890">var</span>&nbsp;<span class="ident" id="1752894">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="1752911">=</span>&nbsp;<span class="ident" id="1752913">errors</span><span class="op" id="1752919">.</span><span class="ident" id="1752920">New</span><span class="op" id="1752923">(</span><span class="string" id="1752924">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="1752940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1752943">//&nbsp;ErrNoProgress&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;clients&nbsp;of&nbsp;an&nbsp;io.Reader&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="1753009">//&nbsp;many&nbsp;calls&nbsp;to&nbsp;Read&nbsp;have&nbsp;failed&nbsp;to&nbsp;return&nbsp;any&nbsp;data&nbsp;or&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="1753072">//&nbsp;usually&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;broken&nbsp;io.Reader&nbsp;implementation.</span><br>
<span class="lineno">40</span><span class="keyword" id="1753130">var</span>&nbsp;<span class="ident" id="1753134">ErrNoProgress</span>&nbsp;<span class="op" id="1753148">=</span>&nbsp;<span class="ident" id="1753150">errors</span><span class="op" id="1753156">.</span><span class="ident" id="1753157">New</span><span class="op" id="1753160">(</span><span class="string" id="1753161">&#34;multiple&nbsp;Read&nbsp;calls&nbsp;return&nbsp;no&nbsp;data&nbsp;or&nbsp;error&#34;</span><span class="op" id="1753206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1753209">//&nbsp;Reader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1753270">//</span><br>
<span class="lineno"></span><span class="comment" id="1753273">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(p)&nbsp;bytes&nbsp;into&nbsp;p.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">45</span><span class="comment" id="1753346">//&nbsp;read&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered.&nbsp;&nbsp;Even&nbsp;if&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="1753414">//&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;may&nbsp;use&nbsp;all&nbsp;of&nbsp;p&nbsp;as&nbsp;scratch&nbsp;space&nbsp;during&nbsp;the&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1753491">//&nbsp;If&nbsp;some&nbsp;data&nbsp;is&nbsp;available&nbsp;but&nbsp;not&nbsp;len(p)&nbsp;bytes,&nbsp;Read&nbsp;conventionally</span><br>
<span class="lineno"></span><span class="comment" id="1753562">//&nbsp;returns&nbsp;what&nbsp;is&nbsp;available&nbsp;instead&nbsp;of&nbsp;waiting&nbsp;for&nbsp;more.</span><br>
<span class="lineno"></span><span class="comment" id="1753620">//</span><br>
<span class="lineno">50</span><span class="comment" id="1753623">//&nbsp;When&nbsp;Read&nbsp;encounters&nbsp;an&nbsp;error&nbsp;or&nbsp;end-of-file&nbsp;condition&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="1753687">//&nbsp;successfully&nbsp;reading&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;bytes,&nbsp;it&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1753749">//&nbsp;bytes&nbsp;read.&nbsp;&nbsp;It&nbsp;may&nbsp;return&nbsp;the&nbsp;(non-nil)&nbsp;error&nbsp;from&nbsp;the&nbsp;same&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="1753818">//&nbsp;or&nbsp;return&nbsp;the&nbsp;error&nbsp;(and&nbsp;n&nbsp;==&nbsp;0)&nbsp;from&nbsp;a&nbsp;subsequent&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1753878">//&nbsp;An&nbsp;instance&nbsp;of&nbsp;this&nbsp;general&nbsp;case&nbsp;is&nbsp;that&nbsp;a&nbsp;Reader&nbsp;returning</span><br>
<span class="lineno">55</span><span class="comment" id="1753941">//&nbsp;a&nbsp;non-zero&nbsp;number&nbsp;of&nbsp;bytes&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input&nbsp;stream&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="1754006">//&nbsp;return&nbsp;either&nbsp;err&nbsp;==&nbsp;EOF&nbsp;or&nbsp;err&nbsp;==&nbsp;nil.&nbsp;&nbsp;The&nbsp;next&nbsp;Read&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="1754071">//&nbsp;return&nbsp;0,&nbsp;EOF&nbsp;regardless.</span><br>
<span class="lineno"></span><span class="comment" id="1754100">//</span><br>
<span class="lineno"></span><span class="comment" id="1754103">//&nbsp;Callers&nbsp;should&nbsp;always&nbsp;process&nbsp;the&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;bytes&nbsp;returned&nbsp;before</span><br>
<span class="lineno">60</span><span class="comment" id="1754168">//&nbsp;considering&nbsp;the&nbsp;error&nbsp;err.&nbsp;&nbsp;Doing&nbsp;so&nbsp;correctly&nbsp;handles&nbsp;I/O&nbsp;errors</span><br>
<span class="lineno"></span><span class="comment" id="1754237">//&nbsp;that&nbsp;happen&nbsp;after&nbsp;reading&nbsp;some&nbsp;bytes&nbsp;and&nbsp;also&nbsp;both&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1754298">//&nbsp;allowed&nbsp;EOF&nbsp;behaviors.</span><br>
<span class="lineno"></span><span class="comment" id="1754324">//</span><br>
<span class="lineno"></span><span class="comment" id="1754327">//&nbsp;Implementations&nbsp;of&nbsp;Read&nbsp;are&nbsp;discouraged&nbsp;from&nbsp;returning&nbsp;a</span><br>
<span class="lineno">65</span><span class="comment" id="1754387">//&nbsp;zero&nbsp;byte&nbsp;count&nbsp;with&nbsp;a&nbsp;nil&nbsp;error,&nbsp;except&nbsp;when&nbsp;len(p)&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="1754449">//&nbsp;Callers&nbsp;should&nbsp;treat&nbsp;a&nbsp;return&nbsp;of&nbsp;0&nbsp;and&nbsp;nil&nbsp;as&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1754514">//&nbsp;nothing&nbsp;happened;&nbsp;in&nbsp;particular&nbsp;it&nbsp;does&nbsp;not&nbsp;indicate&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="1754575">//</span><br>
<span class="lineno"></span><span class="comment" id="1754578">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno">70</span><span class="keyword" id="1754616">type</span>&nbsp;<span class="ident" id="1754621">Reader</span>&nbsp;<span class="keyword" id="1754628">interface</span>&nbsp;<span class="op" id="1754638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1754641">Read</span><span class="op" id="1754645">(</span><span class="ident" id="1754646">p</span>&nbsp;<span class="op" id="1754648">[</span><span class="op" id="1754649">]</span><span class="builtintype" id="1754650">byte</span><span class="op" id="1754654">)</span>&nbsp;<span class="op" id="1754656">(</span><span class="ident" id="1754657">n</span>&nbsp;<span class="builtintype" id="1754659">int</span><span class="op" id="1754662">,</span>&nbsp;<span class="ident" id="1754664">err</span>&nbsp;<span class="builtintype" id="1754668">error</span><span class="op" id="1754673">)</span><br>
<span class="lineno"></span><span class="op" id="1754675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1754678">//&nbsp;Writer&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">75</span><span class="comment" id="1754740">//</span><br>
<span class="lineno"></span><span class="comment" id="1754743">//&nbsp;Write&nbsp;writes&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="1754810">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;from&nbsp;p&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))</span><br>
<span class="lineno"></span><span class="comment" id="1754878">//&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered&nbsp;that&nbsp;caused&nbsp;the&nbsp;write&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span><span class="comment" id="1754944">//&nbsp;Write&nbsp;must&nbsp;return&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;if&nbsp;it&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p).</span><br>
<span class="lineno">80</span><span class="comment" id="1755007">//&nbsp;Write&nbsp;must&nbsp;not&nbsp;modify&nbsp;the&nbsp;slice&nbsp;data,&nbsp;even&nbsp;temporarily.</span><br>
<span class="lineno"></span><span class="comment" id="1755066">//</span><br>
<span class="lineno"></span><span class="comment" id="1755069">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1755107">type</span>&nbsp;<span class="ident" id="1755112">Writer</span>&nbsp;<span class="keyword" id="1755119">interface</span>&nbsp;<span class="op" id="1755129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1755132">Write</span><span class="op" id="1755137">(</span><span class="ident" id="1755138">p</span>&nbsp;<span class="op" id="1755140">[</span><span class="op" id="1755141">]</span><span class="builtintype" id="1755142">byte</span><span class="op" id="1755146">)</span>&nbsp;<span class="op" id="1755148">(</span><span class="ident" id="1755149">n</span>&nbsp;<span class="builtintype" id="1755151">int</span><span class="op" id="1755154">,</span>&nbsp;<span class="ident" id="1755156">err</span>&nbsp;<span class="builtintype" id="1755160">error</span><span class="op" id="1755165">)</span><br>
<span class="lineno">85</span><span class="op" id="1755167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1755170">//&nbsp;Closer&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Close&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1755232">//</span><br>
<span class="lineno"></span><span class="comment" id="1755235">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Close&nbsp;after&nbsp;the&nbsp;first&nbsp;call&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">90</span><span class="comment" id="1755295">//&nbsp;Specific&nbsp;implementations&nbsp;may&nbsp;document&nbsp;their&nbsp;own&nbsp;behavior.</span><br>
<span class="lineno"></span><span class="keyword" id="1755356">type</span>&nbsp;<span class="ident" id="1755361">Closer</span>&nbsp;<span class="keyword" id="1755368">interface</span>&nbsp;<span class="op" id="1755378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1755381">Close</span><span class="op" id="1755386">(</span><span class="op" id="1755387">)</span>&nbsp;<span class="builtintype" id="1755389">error</span><br>
<span class="lineno"></span><span class="op" id="1755395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="1755398">//&nbsp;Seeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Seek&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1755459">//</span><br>
<span class="lineno"></span><span class="comment" id="1755462">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;to&nbsp;offset,</span><br>
<span class="lineno"></span><span class="comment" id="1755524">//&nbsp;interpreted&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1755594">//&nbsp;the&nbsp;file,&nbsp;1&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means</span><br>
<span class="lineno">100</span><span class="comment" id="1755659">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.&nbsp;&nbsp;Seek&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1755729">//&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="1755737">//</span><br>
<span class="lineno"></span><span class="comment" id="1755740">//&nbsp;Seeking&nbsp;to&nbsp;a&nbsp;negative&nbsp;offset&nbsp;is&nbsp;an&nbsp;error.&nbsp;Seeking&nbsp;to&nbsp;any&nbsp;positive</span><br>
<span class="lineno"></span><span class="comment" id="1755809">//&nbsp;offset&nbsp;is&nbsp;legal,&nbsp;but&nbsp;the&nbsp;behavior&nbsp;of&nbsp;subsequent&nbsp;I/O&nbsp;operations&nbsp;on</span><br>
<span class="lineno">105</span><span class="comment" id="1755878">//&nbsp;the&nbsp;underlying&nbsp;object&nbsp;is&nbsp;implementation-dependent.</span><br>
<span class="lineno"></span><span class="keyword" id="1755932">type</span>&nbsp;<span class="ident" id="1755937">Seeker</span>&nbsp;<span class="keyword" id="1755944">interface</span>&nbsp;<span class="op" id="1755954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1755957">Seek</span><span class="op" id="1755961">(</span><span class="ident" id="1755962">offset</span>&nbsp;<span class="ident" id="1755969">int64</span><span class="op" id="1755974">,</span>&nbsp;<span class="ident" id="1755976">whence</span>&nbsp;<span class="builtintype" id="1755983">int</span><span class="op" id="1755986">)</span>&nbsp;<span class="op" id="1755988">(</span><span class="ident" id="1755989">int64</span><span class="op" id="1755994">,</span>&nbsp;<span class="builtintype" id="1755996">error</span><span class="op" id="1756001">)</span><br>
<span class="lineno"></span><span class="op" id="1756003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="1756006">//&nbsp;ReadWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Write&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756083">type</span>&nbsp;<span class="ident" id="1756088">ReadWriter</span>&nbsp;<span class="keyword" id="1756099">interface</span>&nbsp;<span class="op" id="1756109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756112">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756120">Writer</span><br>
<span class="lineno"></span><span class="op" id="1756127">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="1756130">//&nbsp;ReadCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756207">type</span>&nbsp;<span class="ident" id="1756212">ReadCloser</span>&nbsp;<span class="keyword" id="1756223">interface</span>&nbsp;<span class="op" id="1756233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756236">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756244">Closer</span><br>
<span class="lineno">120</span><span class="op" id="1756251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1756254">//&nbsp;WriteCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Write&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756333">type</span>&nbsp;<span class="ident" id="1756338">WriteCloser</span>&nbsp;<span class="keyword" id="1756350">interface</span>&nbsp;<span class="op" id="1756360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756363">Writer</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756371">Closer</span><br>
<span class="lineno"></span><span class="op" id="1756378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1756381">//&nbsp;ReadWriteCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read,&nbsp;Write&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756470">type</span>&nbsp;<span class="ident" id="1756475">ReadWriteCloser</span>&nbsp;<span class="keyword" id="1756491">interface</span>&nbsp;<span class="op" id="1756501">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756504">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756512">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756520">Closer</span><br>
<span class="lineno"></span><span class="op" id="1756527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="1756530">//&nbsp;ReadSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756606">type</span>&nbsp;<span class="ident" id="1756611">ReadSeeker</span>&nbsp;<span class="keyword" id="1756622">interface</span>&nbsp;<span class="op" id="1756632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756635">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756643">Seeker</span><br>
<span class="lineno"></span><span class="op" id="1756650">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1756653">//&nbsp;WriteSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Write&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756731">type</span>&nbsp;<span class="ident" id="1756736">WriteSeeker</span>&nbsp;<span class="keyword" id="1756748">interface</span>&nbsp;<span class="op" id="1756758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756761">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756769">Seeker</span><br>
<span class="lineno">145</span><span class="op" id="1756776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1756779">//&nbsp;ReadWriteSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read,&nbsp;Write&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1756867">type</span>&nbsp;<span class="ident" id="1756872">ReadWriteSeeker</span>&nbsp;<span class="keyword" id="1756888">interface</span>&nbsp;<span class="op" id="1756898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756901">Reader</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756909">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1756917">Seeker</span><br>
<span class="lineno"></span><span class="op" id="1756924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1756927">//&nbsp;ReaderFrom&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno">155</span><span class="comment" id="1756990">//</span><br>
<span class="lineno"></span><span class="comment" id="1756993">//&nbsp;ReadFrom&nbsp;reads&nbsp;data&nbsp;from&nbsp;r&nbsp;until&nbsp;EOF&nbsp;or&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1757043">//&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1757094">//&nbsp;Any&nbsp;error&nbsp;except&nbsp;io.EOF&nbsp;encountered&nbsp;during&nbsp;the&nbsp;read&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="1757167">//</span><br>
<span class="lineno">160</span><span class="comment" id="1757170">//&nbsp;The&nbsp;Copy&nbsp;function&nbsp;uses&nbsp;ReaderFrom&nbsp;if&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="1757221">type</span>&nbsp;<span class="ident" id="1757226">ReaderFrom</span>&nbsp;<span class="keyword" id="1757237">interface</span>&nbsp;<span class="op" id="1757247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1757250">ReadFrom</span><span class="op" id="1757258">(</span><span class="ident" id="1757259">r</span>&nbsp;<span class="ident" id="1757261">Reader</span><span class="op" id="1757267">)</span>&nbsp;<span class="op" id="1757269">(</span><span class="ident" id="1757270">n</span>&nbsp;<span class="ident" id="1757272">int64</span><span class="op" id="1757277">,</span>&nbsp;<span class="ident" id="1757279">err</span>&nbsp;<span class="builtintype" id="1757283">error</span><span class="op" id="1757288">)</span><br>
<span class="lineno"></span><span class="op" id="1757290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="1757293">//&nbsp;WriterTo&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1757353">//</span><br>
<span class="lineno"></span><span class="comment" id="1757356">//&nbsp;WriteTo&nbsp;writes&nbsp;data&nbsp;to&nbsp;w&nbsp;until&nbsp;there&#39;s&nbsp;no&nbsp;more&nbsp;data&nbsp;to&nbsp;write&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1757423">//&nbsp;when&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="1757490">//&nbsp;written.&nbsp;Any&nbsp;error&nbsp;encountered&nbsp;during&nbsp;the&nbsp;write&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno">170</span><span class="comment" id="1757559">//</span><br>
<span class="lineno"></span><span class="comment" id="1757562">//&nbsp;The&nbsp;Copy&nbsp;function&nbsp;uses&nbsp;WriterTo&nbsp;if&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="1757611">type</span>&nbsp;<span class="ident" id="1757616">WriterTo</span>&nbsp;<span class="keyword" id="1757625">interface</span>&nbsp;<span class="op" id="1757635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1757638">WriteTo</span><span class="op" id="1757645">(</span><span class="ident" id="1757646">w</span>&nbsp;<span class="ident" id="1757648">Writer</span><span class="op" id="1757654">)</span>&nbsp;<span class="op" id="1757656">(</span><span class="ident" id="1757657">n</span>&nbsp;<span class="ident" id="1757659">int64</span><span class="op" id="1757664">,</span>&nbsp;<span class="ident" id="1757666">err</span>&nbsp;<span class="builtintype" id="1757670">error</span><span class="op" id="1757675">)</span><br>
<span class="lineno"></span><span class="op" id="1757677">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="1757680">//&nbsp;ReaderAt&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1757745">//</span><br>
<span class="lineno"></span><span class="comment" id="1757748">//&nbsp;ReadAt&nbsp;reads&nbsp;len(p)&nbsp;bytes&nbsp;into&nbsp;p&nbsp;starting&nbsp;at&nbsp;offset&nbsp;off&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1757814">//&nbsp;underlying&nbsp;input&nbsp;source.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">180</span><span class="comment" id="1757874">//&nbsp;read&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span><span class="comment" id="1757928">//</span><br>
<span class="lineno"></span><span class="comment" id="1757931">//&nbsp;When&nbsp;ReadAt&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="1757993">//&nbsp;explaining&nbsp;why&nbsp;more&nbsp;bytes&nbsp;were&nbsp;not&nbsp;returned.&nbsp;&nbsp;In&nbsp;this&nbsp;respect,</span><br>
<span class="lineno"></span><span class="comment" id="1758059">//&nbsp;ReadAt&nbsp;is&nbsp;stricter&nbsp;than&nbsp;Read.</span><br>
<span class="lineno">185</span><span class="comment" id="1758092">//</span><br>
<span class="lineno"></span><span class="comment" id="1758095">//&nbsp;Even&nbsp;if&nbsp;ReadAt&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;may&nbsp;use&nbsp;all&nbsp;of&nbsp;p&nbsp;as&nbsp;scratch</span><br>
<span class="lineno"></span><span class="comment" id="1758164">//&nbsp;space&nbsp;during&nbsp;the&nbsp;call.&nbsp;&nbsp;If&nbsp;some&nbsp;data&nbsp;is&nbsp;available&nbsp;but&nbsp;not&nbsp;len(p)&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1758239">//&nbsp;ReadAt&nbsp;blocks&nbsp;until&nbsp;either&nbsp;all&nbsp;the&nbsp;data&nbsp;is&nbsp;available&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="1758315">//&nbsp;In&nbsp;this&nbsp;respect&nbsp;ReadAt&nbsp;is&nbsp;different&nbsp;from&nbsp;Read.</span><br>
<span class="lineno">190</span><span class="comment" id="1758365">//</span><br>
<span class="lineno"></span><span class="comment" id="1758368">//&nbsp;If&nbsp;the&nbsp;n&nbsp;=&nbsp;len(p)&nbsp;bytes&nbsp;returned&nbsp;by&nbsp;ReadAt&nbsp;are&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1758436">//&nbsp;input&nbsp;source,&nbsp;ReadAt&nbsp;may&nbsp;return&nbsp;either&nbsp;err&nbsp;==&nbsp;EOF&nbsp;or&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1758504">//</span><br>
<span class="lineno"></span><span class="comment" id="1758507">//&nbsp;If&nbsp;ReadAt&nbsp;is&nbsp;reading&nbsp;from&nbsp;an&nbsp;input&nbsp;source&nbsp;with&nbsp;a&nbsp;seek&nbsp;offset,</span><br>
<span class="lineno">195</span><span class="comment" id="1758572">//&nbsp;ReadAt&nbsp;should&nbsp;not&nbsp;affect&nbsp;nor&nbsp;be&nbsp;affected&nbsp;by&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="1758634">//&nbsp;seek&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="1758650">//</span><br>
<span class="lineno"></span><span class="comment" id="1758653">//&nbsp;Clients&nbsp;of&nbsp;ReadAt&nbsp;can&nbsp;execute&nbsp;parallel&nbsp;ReadAt&nbsp;calls&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1758715">//&nbsp;same&nbsp;input&nbsp;source.</span><br>
<span class="lineno">200</span><span class="comment" id="1758737">//</span><br>
<span class="lineno"></span><span class="comment" id="1758740">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1758778">type</span>&nbsp;<span class="ident" id="1758783">ReaderAt</span>&nbsp;<span class="keyword" id="1758792">interface</span>&nbsp;<span class="op" id="1758802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1758805">ReadAt</span><span class="op" id="1758811">(</span><span class="ident" id="1758812">p</span>&nbsp;<span class="op" id="1758814">[</span><span class="op" id="1758815">]</span><span class="builtintype" id="1758816">byte</span><span class="op" id="1758820">,</span>&nbsp;<span class="ident" id="1758822">off</span>&nbsp;<span class="ident" id="1758826">int64</span><span class="op" id="1758831">)</span>&nbsp;<span class="op" id="1758833">(</span><span class="ident" id="1758834">n</span>&nbsp;<span class="builtintype" id="1758836">int</span><span class="op" id="1758839">,</span>&nbsp;<span class="ident" id="1758841">err</span>&nbsp;<span class="builtintype" id="1758845">error</span><span class="op" id="1758850">)</span><br>
<span class="lineno"></span><span class="op" id="1758852">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="1758855">//&nbsp;WriterAt&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;WriteAt&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1758921">//</span><br>
<span class="lineno"></span><span class="comment" id="1758924">//&nbsp;WriteAt&nbsp;writes&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data&nbsp;stream</span><br>
<span class="lineno"></span><span class="comment" id="1758992">//&nbsp;at&nbsp;offset&nbsp;off.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;from&nbsp;p&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))</span><br>
<span class="lineno">210</span><span class="comment" id="1759076">//&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered&nbsp;that&nbsp;caused&nbsp;the&nbsp;write&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span><span class="comment" id="1759142">//&nbsp;WriteAt&nbsp;must&nbsp;return&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;if&nbsp;it&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p).</span><br>
<span class="lineno"></span><span class="comment" id="1759207">//</span><br>
<span class="lineno"></span><span class="comment" id="1759210">//&nbsp;If&nbsp;WriteAt&nbsp;is&nbsp;writing&nbsp;to&nbsp;a&nbsp;destination&nbsp;with&nbsp;a&nbsp;seek&nbsp;offset,</span><br>
<span class="lineno"></span><span class="comment" id="1759272">//&nbsp;WriteAt&nbsp;should&nbsp;not&nbsp;affect&nbsp;nor&nbsp;be&nbsp;affected&nbsp;by&nbsp;the&nbsp;underlying</span><br>
<span class="lineno">215</span><span class="comment" id="1759335">//&nbsp;seek&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="1759351">//</span><br>
<span class="lineno"></span><span class="comment" id="1759354">//&nbsp;Clients&nbsp;of&nbsp;WriteAt&nbsp;can&nbsp;execute&nbsp;parallel&nbsp;WriteAt&nbsp;calls&nbsp;on&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="1759423">//&nbsp;destination&nbsp;if&nbsp;the&nbsp;ranges&nbsp;do&nbsp;not&nbsp;overlap.</span><br>
<span class="lineno"></span><span class="comment" id="1759468">//</span><br>
<span class="lineno">220</span><span class="comment" id="1759471">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1759509">type</span>&nbsp;<span class="ident" id="1759514">WriterAt</span>&nbsp;<span class="keyword" id="1759523">interface</span>&nbsp;<span class="op" id="1759533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1759536">WriteAt</span><span class="op" id="1759543">(</span><span class="ident" id="1759544">p</span>&nbsp;<span class="op" id="1759546">[</span><span class="op" id="1759547">]</span><span class="builtintype" id="1759548">byte</span><span class="op" id="1759552">,</span>&nbsp;<span class="ident" id="1759554">off</span>&nbsp;<span class="ident" id="1759558">int64</span><span class="op" id="1759563">)</span>&nbsp;<span class="op" id="1759565">(</span><span class="ident" id="1759566">n</span>&nbsp;<span class="builtintype" id="1759568">int</span><span class="op" id="1759571">,</span>&nbsp;<span class="ident" id="1759573">err</span>&nbsp;<span class="builtintype" id="1759577">error</span><span class="op" id="1759582">)</span><br>
<span class="lineno"></span><span class="op" id="1759584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="comment" id="1759587">//&nbsp;ByteReader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadByte&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1759650">//</span><br>
<span class="lineno"></span><span class="comment" id="1759653">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1759713">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;err&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="1759758">type</span>&nbsp;<span class="ident" id="1759763">ByteReader</span>&nbsp;<span class="keyword" id="1759774">interface</span>&nbsp;<span class="op" id="1759784">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1759787">ReadByte</span><span class="op" id="1759795">(</span><span class="op" id="1759796">)</span>&nbsp;<span class="op" id="1759798">(</span><span class="ident" id="1759799">c</span>&nbsp;<span class="builtintype" id="1759801">byte</span><span class="op" id="1759805">,</span>&nbsp;<span class="ident" id="1759807">err</span>&nbsp;<span class="builtintype" id="1759811">error</span><span class="op" id="1759816">)</span><br>
<span class="lineno"></span><span class="op" id="1759818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1759821">//&nbsp;ByteScanner&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;adds&nbsp;the&nbsp;UnreadByte&nbsp;method&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1759892">//&nbsp;basic&nbsp;ReadByte&nbsp;method.</span><br>
<span class="lineno">235</span><span class="comment" id="1759918">//</span><br>
<span class="lineno"></span><span class="comment" id="1759921">//&nbsp;UnreadByte&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadByte&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="1759992">//&nbsp;as&nbsp;the&nbsp;previous&nbsp;call&nbsp;to&nbsp;ReadByte.</span><br>
<span class="lineno"></span><span class="comment" id="1760029">//&nbsp;It&nbsp;may&nbsp;be&nbsp;an&nbsp;error&nbsp;to&nbsp;call&nbsp;UnreadByte&nbsp;twice&nbsp;without&nbsp;an&nbsp;intervening</span><br>
<span class="lineno"></span><span class="comment" id="1760099">//&nbsp;call&nbsp;to&nbsp;ReadByte.</span><br>
<span class="lineno">240</span><span class="keyword" id="1760120">type</span>&nbsp;<span class="ident" id="1760125">ByteScanner</span>&nbsp;<span class="keyword" id="1760137">interface</span>&nbsp;<span class="op" id="1760147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1760150">ByteReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1760162">UnreadByte</span><span class="op" id="1760172">(</span><span class="op" id="1760173">)</span>&nbsp;<span class="builtintype" id="1760175">error</span><br>
<span class="lineno"></span><span class="op" id="1760181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="1760184">//&nbsp;ByteWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteByte&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1760248">type</span>&nbsp;<span class="ident" id="1760253">ByteWriter</span>&nbsp;<span class="keyword" id="1760264">interface</span>&nbsp;<span class="op" id="1760274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1760277">WriteByte</span><span class="op" id="1760286">(</span><span class="ident" id="1760287">c</span>&nbsp;<span class="builtintype" id="1760289">byte</span><span class="op" id="1760293">)</span>&nbsp;<span class="builtintype" id="1760295">error</span><br>
<span class="lineno"></span><span class="op" id="1760301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="comment" id="1760304">//&nbsp;RuneReader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadRune&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1760367">//</span><br>
<span class="lineno"></span><span class="comment" id="1760370">//&nbsp;ReadRune&nbsp;reads&nbsp;a&nbsp;single&nbsp;UTF-8&nbsp;encoded&nbsp;Unicode&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="1760429">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;rune&nbsp;and&nbsp;its&nbsp;size&nbsp;in&nbsp;bytes.&nbsp;If&nbsp;no&nbsp;character&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1760495">//&nbsp;available,&nbsp;err&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno">255</span><span class="keyword" id="1760526">type</span>&nbsp;<span class="ident" id="1760531">RuneReader</span>&nbsp;<span class="keyword" id="1760542">interface</span>&nbsp;<span class="op" id="1760552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1760555">ReadRune</span><span class="op" id="1760563">(</span><span class="op" id="1760564">)</span>&nbsp;<span class="op" id="1760566">(</span><span class="ident" id="1760567">r</span>&nbsp;<span class="builtintype" id="1760569">rune</span><span class="op" id="1760573">,</span>&nbsp;<span class="ident" id="1760575">size</span>&nbsp;<span class="builtintype" id="1760580">int</span><span class="op" id="1760583">,</span>&nbsp;<span class="ident" id="1760585">err</span>&nbsp;<span class="builtintype" id="1760589">error</span><span class="op" id="1760594">)</span><br>
<span class="lineno"></span><span class="op" id="1760596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1760599">//&nbsp;RuneScanner&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;adds&nbsp;the&nbsp;UnreadRune&nbsp;method&nbsp;to&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="1760670">//&nbsp;basic&nbsp;ReadRune&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1760696">//</span><br>
<span class="lineno"></span><span class="comment" id="1760699">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune</span><br>
<span class="lineno"></span><span class="comment" id="1760770">//&nbsp;as&nbsp;the&nbsp;previous&nbsp;call&nbsp;to&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="comment" id="1760807">//&nbsp;It&nbsp;may&nbsp;be&nbsp;an&nbsp;error&nbsp;to&nbsp;call&nbsp;UnreadRune&nbsp;twice&nbsp;without&nbsp;an&nbsp;intervening</span><br>
<span class="lineno">265</span><span class="comment" id="1760877">//&nbsp;call&nbsp;to&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="keyword" id="1760898">type</span>&nbsp;<span class="ident" id="1760903">RuneScanner</span>&nbsp;<span class="keyword" id="1760915">interface</span>&nbsp;<span class="op" id="1760925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1760928">RuneReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1760940">UnreadRune</span><span class="op" id="1760950">(</span><span class="op" id="1760951">)</span>&nbsp;<span class="builtintype" id="1760953">error</span><br>
<span class="lineno"></span><span class="op" id="1760959">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="1760962">//&nbsp;stringWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteString&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1761030">type</span>&nbsp;<span class="ident" id="1761035">stringWriter</span>&nbsp;<span class="keyword" id="1761048">interface</span>&nbsp;<span class="op" id="1761058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1761061">WriteString</span><span class="op" id="1761072">(</span><span class="ident" id="1761073">s</span>&nbsp;<span class="builtintype" id="1761075">string</span><span class="op" id="1761081">)</span>&nbsp;<span class="op" id="1761083">(</span><span class="ident" id="1761084">n</span>&nbsp;<span class="builtintype" id="1761086">int</span><span class="op" id="1761089">,</span>&nbsp;<span class="ident" id="1761091">err</span>&nbsp;<span class="builtintype" id="1761095">error</span><span class="op" id="1761100">)</span><br>
<span class="lineno"></span><span class="op" id="1761102">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="1761105">//&nbsp;WriteString&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;w,&nbsp;which&nbsp;accepts&nbsp;an&nbsp;array&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1761195">//&nbsp;If&nbsp;w&nbsp;already&nbsp;implements&nbsp;a&nbsp;WriteString&nbsp;method,&nbsp;it&nbsp;is&nbsp;invoked&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="1761268">func</span>&nbsp;<span class="ident" id="1761273">WriteString</span><span class="op" id="1761284">(</span><span class="ident" id="1761285">w</span>&nbsp;<span class="ident" id="1761287">Writer</span><span class="op" id="1761293">,</span>&nbsp;<span class="ident" id="1761295">s</span>&nbsp;<span class="builtintype" id="1761297">string</span><span class="op" id="1761303">)</span>&nbsp;<span class="op" id="1761305">(</span><span class="ident" id="1761306">n</span>&nbsp;<span class="builtintype" id="1761308">int</span><span class="op" id="1761311">,</span>&nbsp;<span class="ident" id="1761313">err</span>&nbsp;<span class="builtintype" id="1761317">error</span><span class="op" id="1761322">)</span>&nbsp;<span class="op" id="1761324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1761327">if</span>&nbsp;<span class="ident" id="1761330">sw</span><span class="op" id="1761332">,</span>&nbsp;<span class="ident" id="1761334">ok</span>&nbsp;<span class="op" id="1761337">:=</span>&nbsp;<span class="ident" id="1761340">w</span><span class="op" id="1761341">.</span><span class="op" id="1761342">(</span><span class="ident" id="1761343">stringWriter</span><span class="op" id="1761355">)</span><span class="op" id="1761356">;</span>&nbsp;<span class="ident" id="1761358">ok</span>&nbsp;<span class="op" id="1761361">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1761365">return</span>&nbsp;<span class="ident" id="1761372">sw</span><span class="op" id="1761374">.</span><span class="ident" id="1761375">WriteString</span><span class="op" id="1761386">(</span><span class="ident" id="1761387">s</span><span class="op" id="1761388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1761391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1761394">return</span>&nbsp;<span class="ident" id="1761401">w</span><span class="op" id="1761402">.</span><span class="ident" id="1761403">Write</span><span class="op" id="1761408">(</span><span class="op" id="1761409">[</span><span class="op" id="1761410">]</span><span class="builtintype" id="1761411">byte</span><span class="op" id="1761415">(</span><span class="ident" id="1761416">s</span><span class="op" id="1761417">)</span><span class="op" id="1761418">)</span><br>
<span class="lineno"></span><span class="op" id="1761420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="1761423">//&nbsp;ReadAtLeast&nbsp;reads&nbsp;from&nbsp;r&nbsp;into&nbsp;buf&nbsp;until&nbsp;it&nbsp;has&nbsp;read&nbsp;at&nbsp;least&nbsp;min&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1761498">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;an&nbsp;error&nbsp;if&nbsp;fewer&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1761578">//&nbsp;The&nbsp;error&nbsp;is&nbsp;EOF&nbsp;only&nbsp;if&nbsp;no&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1761626">//&nbsp;If&nbsp;an&nbsp;EOF&nbsp;happens&nbsp;after&nbsp;reading&nbsp;fewer&nbsp;than&nbsp;min&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1761683">//&nbsp;ReadAtLeast&nbsp;returns&nbsp;ErrUnexpectedEOF.</span><br>
<span class="lineno">290</span><span class="comment" id="1761724">//&nbsp;If&nbsp;min&nbsp;is&nbsp;greater&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;buf,&nbsp;ReadAtLeast&nbsp;returns&nbsp;ErrShortBuffer.</span><br>
<span class="lineno"></span><span class="comment" id="1761805">//&nbsp;On&nbsp;return,&nbsp;n&nbsp;&gt;=&nbsp;min&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1761855">func</span>&nbsp;<span class="ident" id="1761860">ReadAtLeast</span><span class="op" id="1761871">(</span><span class="ident" id="1761872">r</span>&nbsp;<span class="ident" id="1761874">Reader</span><span class="op" id="1761880">,</span>&nbsp;<span class="ident" id="1761882">buf</span>&nbsp;<span class="op" id="1761886">[</span><span class="op" id="1761887">]</span><span class="builtintype" id="1761888">byte</span><span class="op" id="1761892">,</span>&nbsp;<span class="ident" id="1761894">min</span>&nbsp;<span class="builtintype" id="1761898">int</span><span class="op" id="1761901">)</span>&nbsp;<span class="op" id="1761903">(</span><span class="ident" id="1761904">n</span>&nbsp;<span class="builtintype" id="1761906">int</span><span class="op" id="1761909">,</span>&nbsp;<span class="ident" id="1761911">err</span>&nbsp;<span class="builtintype" id="1761915">error</span><span class="op" id="1761920">)</span>&nbsp;<span class="op" id="1761922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1761925">if</span>&nbsp;<span class="builtinfunc" id="1761928">len</span><span class="op" id="1761931">(</span><span class="ident" id="1761932">buf</span><span class="op" id="1761935">)</span>&nbsp;<span class="op" id="1761937">&lt;</span>&nbsp;<span class="ident" id="1761939">min</span>&nbsp;<span class="op" id="1761943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1761947">return</span>&nbsp;<span class="num" id="1761954">0</span><span class="op" id="1761955">,</span>&nbsp;<span class="ident" id="1761957">ErrShortBuffer</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1761973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1761976">for</span>&nbsp;<span class="ident" id="1761980">n</span>&nbsp;<span class="op" id="1761982">&lt;</span>&nbsp;<span class="ident" id="1761984">min</span>&nbsp;<span class="op" id="1761988">&amp;&amp;</span>&nbsp;<span class="ident" id="1761991">err</span>&nbsp;<span class="op" id="1761995">==</span>&nbsp;<span class="ident" id="1761998">nil</span>&nbsp;<span class="op" id="1762002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1762006">var</span>&nbsp;<span class="ident" id="1762010">nn</span>&nbsp;<span class="builtintype" id="1762013">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1762019">nn</span><span class="op" id="1762021">,</span>&nbsp;<span class="ident" id="1762023">err</span>&nbsp;<span class="op" id="1762027">=</span>&nbsp;<span class="ident" id="1762029">r</span><span class="op" id="1762030">.</span><span class="ident" id="1762031">Read</span><span class="op" id="1762035">(</span><span class="ident" id="1762036">buf</span><span class="op" id="1762039">[</span><span class="ident" id="1762040">n</span><span class="op" id="1762041">:</span><span class="op" id="1762042">]</span><span class="op" id="1762043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1762047">n</span>&nbsp;<span class="op" id="1762049">+=</span>&nbsp;<span class="ident" id="1762052">nn</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1762056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1762059">if</span>&nbsp;<span class="ident" id="1762062">n</span>&nbsp;<span class="op" id="1762064">&gt;=</span>&nbsp;<span class="ident" id="1762067">min</span>&nbsp;<span class="op" id="1762071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1762075">err</span>&nbsp;<span class="op" id="1762079">=</span>&nbsp;<span class="ident" id="1762081">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1762086">}</span>&nbsp;<span class="keyword" id="1762088">else</span>&nbsp;<span class="keyword" id="1762093">if</span>&nbsp;<span class="ident" id="1762096">n</span>&nbsp;<span class="op" id="1762098">&gt;</span>&nbsp;<span class="num" id="1762100">0</span>&nbsp;<span class="op" id="1762102">&amp;&amp;</span>&nbsp;<span class="ident" id="1762105">err</span>&nbsp;<span class="op" id="1762109">==</span>&nbsp;<span class="ident" id="1762112">EOF</span>&nbsp;<span class="op" id="1762116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1762120">err</span>&nbsp;<span class="op" id="1762124">=</span>&nbsp;<span class="ident" id="1762126">ErrUnexpectedEOF</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1762144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1762147">return</span><br>
<span class="lineno"></span><span class="op" id="1762154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1762157">//&nbsp;ReadFull&nbsp;reads&nbsp;exactly&nbsp;len(buf)&nbsp;bytes&nbsp;from&nbsp;r&nbsp;into&nbsp;buf.</span><br>
<span class="lineno">310</span><span class="comment" id="1762215">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;an&nbsp;error&nbsp;if&nbsp;fewer&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1762295">//&nbsp;The&nbsp;error&nbsp;is&nbsp;EOF&nbsp;only&nbsp;if&nbsp;no&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1762343">//&nbsp;If&nbsp;an&nbsp;EOF&nbsp;happens&nbsp;after&nbsp;reading&nbsp;some&nbsp;but&nbsp;not&nbsp;all&nbsp;the&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1762406">//&nbsp;ReadFull&nbsp;returns&nbsp;ErrUnexpectedEOF.</span><br>
<span class="lineno"></span><span class="comment" id="1762444">//&nbsp;On&nbsp;return,&nbsp;n&nbsp;==&nbsp;len(buf)&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno">315</span><span class="keyword" id="1762499">func</span>&nbsp;<span class="ident" id="1762504">ReadFull</span><span class="op" id="1762512">(</span><span class="ident" id="1762513">r</span>&nbsp;<span class="ident" id="1762515">Reader</span><span class="op" id="1762521">,</span>&nbsp;<span class="ident" id="1762523">buf</span>&nbsp;<span class="op" id="1762527">[</span><span class="op" id="1762528">]</span><span class="builtintype" id="1762529">byte</span><span class="op" id="1762533">)</span>&nbsp;<span class="op" id="1762535">(</span><span class="ident" id="1762536">n</span>&nbsp;<span class="builtintype" id="1762538">int</span><span class="op" id="1762541">,</span>&nbsp;<span class="ident" id="1762543">err</span>&nbsp;<span class="builtintype" id="1762547">error</span><span class="op" id="1762552">)</span>&nbsp;<span class="op" id="1762554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1762557">return</span>&nbsp;<span class="ident" id="1762564">ReadAtLeast</span><span class="op" id="1762575">(</span><span class="ident" id="1762576">r</span><span class="op" id="1762577">,</span>&nbsp;<span class="ident" id="1762579">buf</span><span class="op" id="1762582">,</span>&nbsp;<span class="builtinfunc" id="1762584">len</span><span class="op" id="1762587">(</span><span class="ident" id="1762588">buf</span><span class="op" id="1762591">)</span><span class="op" id="1762592">)</span><br>
<span class="lineno"></span><span class="op" id="1762594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1762597">//&nbsp;CopyN&nbsp;copies&nbsp;n&nbsp;bytes&nbsp;(or&nbsp;until&nbsp;an&nbsp;error)&nbsp;from&nbsp;src&nbsp;to&nbsp;dst.</span><br>
<span class="lineno">320</span><span class="comment" id="1762658">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;the&nbsp;earliest</span><br>
<span class="lineno"></span><span class="comment" id="1762716">//&nbsp;error&nbsp;encountered&nbsp;while&nbsp;copying.</span><br>
<span class="lineno"></span><span class="comment" id="1762752">//&nbsp;On&nbsp;return,&nbsp;written&nbsp;==&nbsp;n&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1762806">//</span><br>
<span class="lineno"></span><span class="comment" id="1762809">//&nbsp;If&nbsp;dst&nbsp;implements&nbsp;the&nbsp;ReaderFrom&nbsp;interface,</span><br>
<span class="lineno">325</span><span class="comment" id="1762856">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;using&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="1762893">func</span>&nbsp;<span class="ident" id="1762898">CopyN</span><span class="op" id="1762903">(</span><span class="ident" id="1762904">dst</span>&nbsp;<span class="ident" id="1762908">Writer</span><span class="op" id="1762914">,</span>&nbsp;<span class="ident" id="1762916">src</span>&nbsp;<span class="ident" id="1762920">Reader</span><span class="op" id="1762926">,</span>&nbsp;<span class="ident" id="1762928">n</span>&nbsp;<span class="ident" id="1762930">int64</span><span class="op" id="1762935">)</span>&nbsp;<span class="op" id="1762937">(</span><span class="ident" id="1762938">written</span>&nbsp;<span class="ident" id="1762946">int64</span><span class="op" id="1762951">,</span>&nbsp;<span class="ident" id="1762953">err</span>&nbsp;<span class="builtintype" id="1762957">error</span><span class="op" id="1762962">)</span>&nbsp;<span class="op" id="1762964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1762967">written</span><span class="op" id="1762974">,</span>&nbsp;<span class="ident" id="1762976">err</span>&nbsp;<span class="op" id="1762980">=</span>&nbsp;<span class="ident" id="1762982">Copy</span><span class="op" id="1762986">(</span><span class="ident" id="1762987">dst</span><span class="op" id="1762990">,</span>&nbsp;<span class="ident" id="1762992">LimitReader</span><span class="op" id="1763003">(</span><span class="ident" id="1763004">src</span><span class="op" id="1763007">,</span>&nbsp;<span class="ident" id="1763009">n</span><span class="op" id="1763010">)</span><span class="op" id="1763011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1763014">if</span>&nbsp;<span class="ident" id="1763017">written</span>&nbsp;<span class="op" id="1763025">==</span>&nbsp;<span class="ident" id="1763028">n</span>&nbsp;<span class="op" id="1763030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1763034">return</span>&nbsp;<span class="ident" id="1763041">n</span><span class="op" id="1763042">,</span>&nbsp;<span class="ident" id="1763044">nil</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1763049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1763052">if</span>&nbsp;<span class="ident" id="1763055">written</span>&nbsp;<span class="op" id="1763063">&lt;</span>&nbsp;<span class="ident" id="1763065">n</span>&nbsp;<span class="op" id="1763067">&amp;&amp;</span>&nbsp;<span class="ident" id="1763070">err</span>&nbsp;<span class="op" id="1763074">==</span>&nbsp;<span class="ident" id="1763077">nil</span>&nbsp;<span class="op" id="1763081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1763085">//&nbsp;src&nbsp;stopped&nbsp;early;&nbsp;must&nbsp;have&nbsp;been&nbsp;EOF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1763129">err</span>&nbsp;<span class="op" id="1763133">=</span>&nbsp;<span class="ident" id="1763135">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1763140">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1763143">return</span><br>
<span class="lineno"></span><span class="op" id="1763150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1763153">//&nbsp;Copy&nbsp;copies&nbsp;from&nbsp;src&nbsp;to&nbsp;dst&nbsp;until&nbsp;either&nbsp;EOF&nbsp;is&nbsp;reached</span><br>
<span class="lineno"></span><span class="comment" id="1763212">//&nbsp;on&nbsp;src&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">340</span><span class="comment" id="1763274">//&nbsp;copied&nbsp;and&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered&nbsp;while&nbsp;copying,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="1763339">//</span><br>
<span class="lineno"></span><span class="comment" id="1763342">//&nbsp;A&nbsp;successful&nbsp;Copy&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="1763399">//&nbsp;Because&nbsp;Copy&nbsp;is&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="1763462">//&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno">345</span><span class="comment" id="1763520">//</span><br>
<span class="lineno"></span><span class="comment" id="1763523">//&nbsp;If&nbsp;src&nbsp;implements&nbsp;the&nbsp;WriterTo&nbsp;interface,</span><br>
<span class="lineno"></span><span class="comment" id="1763568">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;by&nbsp;calling&nbsp;src.WriteTo(dst).</span><br>
<span class="lineno"></span><span class="comment" id="1763624">//&nbsp;Otherwise,&nbsp;if&nbsp;dst&nbsp;implements&nbsp;the&nbsp;ReaderFrom&nbsp;interface,</span><br>
<span class="lineno"></span><span class="comment" id="1763682">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;by&nbsp;calling&nbsp;dst.ReadFrom(src).</span><br>
<span class="lineno">350</span><span class="keyword" id="1763739">func</span>&nbsp;<span class="ident" id="1763744">Copy</span><span class="op" id="1763748">(</span><span class="ident" id="1763749">dst</span>&nbsp;<span class="ident" id="1763753">Writer</span><span class="op" id="1763759">,</span>&nbsp;<span class="ident" id="1763761">src</span>&nbsp;<span class="ident" id="1763765">Reader</span><span class="op" id="1763771">)</span>&nbsp;<span class="op" id="1763773">(</span><span class="ident" id="1763774">written</span>&nbsp;<span class="ident" id="1763782">int64</span><span class="op" id="1763787">,</span>&nbsp;<span class="ident" id="1763789">err</span>&nbsp;<span class="builtintype" id="1763793">error</span><span class="op" id="1763798">)</span>&nbsp;<span class="op" id="1763800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1763803">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;has&nbsp;a&nbsp;WriteTo&nbsp;method,&nbsp;use&nbsp;it&nbsp;to&nbsp;do&nbsp;the&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1763866">//&nbsp;Avoids&nbsp;an&nbsp;allocation&nbsp;and&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1763903">if</span>&nbsp;<span class="ident" id="1763906">wt</span><span class="op" id="1763908">,</span>&nbsp;<span class="ident" id="1763910">ok</span>&nbsp;<span class="op" id="1763913">:=</span>&nbsp;<span class="ident" id="1763916">src</span><span class="op" id="1763919">.</span><span class="op" id="1763920">(</span><span class="ident" id="1763921">WriterTo</span><span class="op" id="1763929">)</span><span class="op" id="1763930">;</span>&nbsp;<span class="ident" id="1763932">ok</span>&nbsp;<span class="op" id="1763935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1763939">return</span>&nbsp;<span class="ident" id="1763946">wt</span><span class="op" id="1763948">.</span><span class="ident" id="1763949">WriteTo</span><span class="op" id="1763956">(</span><span class="ident" id="1763957">dst</span><span class="op" id="1763960">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1763963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1763966">//&nbsp;Similarly,&nbsp;if&nbsp;the&nbsp;writer&nbsp;has&nbsp;a&nbsp;ReadFrom&nbsp;method,&nbsp;use&nbsp;it&nbsp;to&nbsp;do&nbsp;the&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764041">if</span>&nbsp;<span class="ident" id="1764044">rt</span><span class="op" id="1764046">,</span>&nbsp;<span class="ident" id="1764048">ok</span>&nbsp;<span class="op" id="1764051">:=</span>&nbsp;<span class="ident" id="1764054">dst</span><span class="op" id="1764057">.</span><span class="op" id="1764058">(</span><span class="ident" id="1764059">ReaderFrom</span><span class="op" id="1764069">)</span><span class="op" id="1764070">;</span>&nbsp;<span class="ident" id="1764072">ok</span>&nbsp;<span class="op" id="1764075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764079">return</span>&nbsp;<span class="ident" id="1764086">rt</span><span class="op" id="1764088">.</span><span class="ident" id="1764089">ReadFrom</span><span class="op" id="1764097">(</span><span class="ident" id="1764098">src</span><span class="op" id="1764101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764104">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764107">buf</span>&nbsp;<span class="op" id="1764111">:=</span>&nbsp;<span class="builtinfunc" id="1764114">make</span><span class="op" id="1764118">(</span><span class="op" id="1764119">[</span><span class="op" id="1764120">]</span><span class="builtintype" id="1764121">byte</span><span class="op" id="1764125">,</span>&nbsp;<span class="num" id="1764127">32</span><span class="op" id="1764129">*</span><span class="num" id="1764130">1024</span><span class="op" id="1764134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764137">for</span>&nbsp;<span class="op" id="1764141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764145">nr</span><span class="op" id="1764147">,</span>&nbsp;<span class="ident" id="1764149">er</span>&nbsp;<span class="op" id="1764152">:=</span>&nbsp;<span class="ident" id="1764155">src</span><span class="op" id="1764158">.</span><span class="ident" id="1764159">Read</span><span class="op" id="1764163">(</span><span class="ident" id="1764164">buf</span><span class="op" id="1764167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764171">if</span>&nbsp;<span class="ident" id="1764174">nr</span>&nbsp;<span class="op" id="1764177">&gt;</span>&nbsp;<span class="num" id="1764179">0</span>&nbsp;<span class="op" id="1764181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764186">nw</span><span class="op" id="1764188">,</span>&nbsp;<span class="ident" id="1764190">ew</span>&nbsp;<span class="op" id="1764193">:=</span>&nbsp;<span class="ident" id="1764196">dst</span><span class="op" id="1764199">.</span><span class="ident" id="1764200">Write</span><span class="op" id="1764205">(</span><span class="ident" id="1764206">buf</span><span class="op" id="1764209">[</span><span class="num" id="1764210">0</span><span class="op" id="1764211">:</span><span class="ident" id="1764212">nr</span><span class="op" id="1764214">]</span><span class="op" id="1764215">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764220">if</span>&nbsp;<span class="ident" id="1764223">nw</span>&nbsp;<span class="op" id="1764226">&gt;</span>&nbsp;<span class="num" id="1764228">0</span>&nbsp;<span class="op" id="1764230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764236">written</span>&nbsp;<span class="op" id="1764244">+=</span>&nbsp;<span class="ident" id="1764247">int64</span><span class="op" id="1764252">(</span><span class="ident" id="1764253">nw</span><span class="op" id="1764255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764265">if</span>&nbsp;<span class="ident" id="1764268">ew</span>&nbsp;<span class="op" id="1764271">!=</span>&nbsp;<span class="ident" id="1764274">nil</span>&nbsp;<span class="op" id="1764278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764284">err</span>&nbsp;<span class="op" id="1764288">=</span>&nbsp;<span class="ident" id="1764290">ew</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764297">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764311">if</span>&nbsp;<span class="ident" id="1764314">nr</span>&nbsp;<span class="op" id="1764317">!=</span>&nbsp;<span class="ident" id="1764320">nw</span>&nbsp;<span class="op" id="1764323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764329">err</span>&nbsp;<span class="op" id="1764333">=</span>&nbsp;<span class="ident" id="1764335">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764353">break</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764370">if</span>&nbsp;<span class="ident" id="1764373">er</span>&nbsp;<span class="op" id="1764376">==</span>&nbsp;<span class="ident" id="1764379">EOF</span>&nbsp;<span class="op" id="1764383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764388">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764396">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764400">if</span>&nbsp;<span class="ident" id="1764403">er</span>&nbsp;<span class="op" id="1764406">!=</span>&nbsp;<span class="ident" id="1764409">nil</span>&nbsp;<span class="op" id="1764413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764418">err</span>&nbsp;<span class="op" id="1764422">=</span>&nbsp;<span class="ident" id="1764424">er</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764430">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1764441">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764444">return</span>&nbsp;<span class="ident" id="1764451">written</span><span class="op" id="1764458">,</span>&nbsp;<span class="ident" id="1764460">err</span><br>
<span class="lineno"></span><span class="op" id="1764464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1764467">//&nbsp;LimitReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="1764517">//&nbsp;but&nbsp;stops&nbsp;with&nbsp;EOF&nbsp;after&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno">390</span><span class="comment" id="1764554">//&nbsp;The&nbsp;underlying&nbsp;implementation&nbsp;is&nbsp;a&nbsp;*LimitedReader.</span><br>
<span class="lineno"></span><span class="keyword" id="1764608">func</span>&nbsp;<span class="ident" id="1764613">LimitReader</span><span class="op" id="1764624">(</span><span class="ident" id="1764625">r</span>&nbsp;<span class="ident" id="1764627">Reader</span><span class="op" id="1764633">,</span>&nbsp;<span class="ident" id="1764635">n</span>&nbsp;<span class="ident" id="1764637">int64</span><span class="op" id="1764642">)</span>&nbsp;<span class="ident" id="1764644">Reader</span>&nbsp;<span class="op" id="1764651">{</span>&nbsp;<span class="keyword" id="1764653">return</span>&nbsp;<span class="op" id="1764660">&amp;</span><span class="ident" id="1764661">LimitedReader</span><span class="op" id="1764674">{</span><span class="ident" id="1764675">r</span><span class="op" id="1764676">,</span>&nbsp;<span class="ident" id="1764678">n</span><span class="op" id="1764679">}</span>&nbsp;<span class="op" id="1764681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1764684">//&nbsp;A&nbsp;LimitedReader&nbsp;reads&nbsp;from&nbsp;R&nbsp;but&nbsp;limits&nbsp;the&nbsp;amount&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1764741">//&nbsp;data&nbsp;returned&nbsp;to&nbsp;just&nbsp;N&nbsp;bytes.&nbsp;Each&nbsp;call&nbsp;to&nbsp;Read</span><br>
<span class="lineno">395</span><span class="comment" id="1764793">//&nbsp;updates&nbsp;N&nbsp;to&nbsp;reflect&nbsp;the&nbsp;new&nbsp;amount&nbsp;remaining.</span><br>
<span class="lineno"></span><span class="keyword" id="1764843">type</span>&nbsp;<span class="ident" id="1764848">LimitedReader</span>&nbsp;<span class="keyword" id="1764862">struct</span>&nbsp;<span class="op" id="1764869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764872">R</span>&nbsp;<span class="ident" id="1764874">Reader</span>&nbsp;<span class="comment" id="1764881">//&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1764903">N</span>&nbsp;<span class="ident" id="1764905">int64</span>&nbsp;&nbsp;<span class="comment" id="1764912">//&nbsp;max&nbsp;bytes&nbsp;remaining</span><br>
<span class="lineno"></span><span class="op" id="1764935">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="1764938">func</span>&nbsp;<span class="op" id="1764943">(</span><span class="ident" id="1764944">l</span>&nbsp;<span class="op" id="1764946">*</span><span class="ident" id="1764947">LimitedReader</span><span class="op" id="1764960">)</span>&nbsp;<span class="ident" id="1764962">Read</span><span class="op" id="1764966">(</span><span class="ident" id="1764967">p</span>&nbsp;<span class="op" id="1764969">[</span><span class="op" id="1764970">]</span><span class="builtintype" id="1764971">byte</span><span class="op" id="1764975">)</span>&nbsp;<span class="op" id="1764977">(</span><span class="ident" id="1764978">n</span>&nbsp;<span class="builtintype" id="1764980">int</span><span class="op" id="1764983">,</span>&nbsp;<span class="ident" id="1764985">err</span>&nbsp;<span class="builtintype" id="1764989">error</span><span class="op" id="1764994">)</span>&nbsp;<span class="op" id="1764996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1764999">if</span>&nbsp;<span class="ident" id="1765002">l</span><span class="op" id="1765003">.</span><span class="ident" id="1765004">N</span>&nbsp;<span class="op" id="1765006">&lt;=</span>&nbsp;<span class="num" id="1765009">0</span>&nbsp;<span class="op" id="1765011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765015">return</span>&nbsp;<span class="num" id="1765022">0</span><span class="op" id="1765023">,</span>&nbsp;<span class="ident" id="1765025">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1765030">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765033">if</span>&nbsp;<span class="ident" id="1765036">int64</span><span class="op" id="1765041">(</span><span class="builtinfunc" id="1765042">len</span><span class="op" id="1765045">(</span><span class="ident" id="1765046">p</span><span class="op" id="1765047">)</span><span class="op" id="1765048">)</span>&nbsp;<span class="op" id="1765050">&gt;</span>&nbsp;<span class="ident" id="1765052">l</span><span class="op" id="1765053">.</span><span class="ident" id="1765054">N</span>&nbsp;<span class="op" id="1765056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765060">p</span>&nbsp;<span class="op" id="1765062">=</span>&nbsp;<span class="ident" id="1765064">p</span><span class="op" id="1765065">[</span><span class="num" id="1765066">0</span><span class="op" id="1765067">:</span><span class="ident" id="1765068">l</span><span class="op" id="1765069">.</span><span class="ident" id="1765070">N</span><span class="op" id="1765071">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1765074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765077">n</span><span class="op" id="1765078">,</span>&nbsp;<span class="ident" id="1765080">err</span>&nbsp;<span class="op" id="1765084">=</span>&nbsp;<span class="ident" id="1765086">l</span><span class="op" id="1765087">.</span><span class="ident" id="1765088">R</span><span class="op" id="1765089">.</span><span class="ident" id="1765090">Read</span><span class="op" id="1765094">(</span><span class="ident" id="1765095">p</span><span class="op" id="1765096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765099">l</span><span class="op" id="1765100">.</span><span class="ident" id="1765101">N</span>&nbsp;<span class="op" id="1765103">-=</span>&nbsp;<span class="ident" id="1765106">int64</span><span class="op" id="1765111">(</span><span class="ident" id="1765112">n</span><span class="op" id="1765113">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765116">return</span><br>
<span class="lineno"></span><span class="op" id="1765123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1765126">//&nbsp;NewSectionReader&nbsp;returns&nbsp;a&nbsp;SectionReader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="1765188">//&nbsp;starting&nbsp;at&nbsp;offset&nbsp;off&nbsp;and&nbsp;stops&nbsp;with&nbsp;EOF&nbsp;after&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno">415</span><span class="keyword" id="1765248">func</span>&nbsp;<span class="ident" id="1765253">NewSectionReader</span><span class="op" id="1765269">(</span><span class="ident" id="1765270">r</span>&nbsp;<span class="ident" id="1765272">ReaderAt</span><span class="op" id="1765280">,</span>&nbsp;<span class="ident" id="1765282">off</span>&nbsp;<span class="ident" id="1765286">int64</span><span class="op" id="1765291">,</span>&nbsp;<span class="ident" id="1765293">n</span>&nbsp;<span class="ident" id="1765295">int64</span><span class="op" id="1765300">)</span>&nbsp;<span class="op" id="1765302">*</span><span class="ident" id="1765303">SectionReader</span>&nbsp;<span class="op" id="1765317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765320">return</span>&nbsp;<span class="op" id="1765327">&amp;</span><span class="ident" id="1765328">SectionReader</span><span class="op" id="1765341">{</span><span class="ident" id="1765342">r</span><span class="op" id="1765343">,</span>&nbsp;<span class="ident" id="1765345">off</span><span class="op" id="1765348">,</span>&nbsp;<span class="ident" id="1765350">off</span><span class="op" id="1765353">,</span>&nbsp;<span class="ident" id="1765355">off</span>&nbsp;<span class="op" id="1765359">+</span>&nbsp;<span class="ident" id="1765361">n</span><span class="op" id="1765362">}</span><br>
<span class="lineno"></span><span class="op" id="1765364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1765367">//&nbsp;SectionReader&nbsp;implements&nbsp;Read,&nbsp;Seek,&nbsp;and&nbsp;ReadAt&nbsp;on&nbsp;a&nbsp;section</span><br>
<span class="lineno">420</span><span class="comment" id="1765431">//&nbsp;of&nbsp;an&nbsp;underlying&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="1765461">type</span>&nbsp;<span class="ident" id="1765466">SectionReader</span>&nbsp;<span class="keyword" id="1765480">struct</span>&nbsp;<span class="op" id="1765487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765490">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765496">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765506">base</span>&nbsp;&nbsp;<span class="ident" id="1765512">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765519">off</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1765525">int64</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765532">limit</span>&nbsp;<span class="ident" id="1765538">int64</span><br>
<span class="lineno"></span><span class="op" id="1765544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1765547">func</span>&nbsp;<span class="op" id="1765552">(</span><span class="ident" id="1765553">s</span>&nbsp;<span class="op" id="1765555">*</span><span class="ident" id="1765556">SectionReader</span><span class="op" id="1765569">)</span>&nbsp;<span class="ident" id="1765571">Read</span><span class="op" id="1765575">(</span><span class="ident" id="1765576">p</span>&nbsp;<span class="op" id="1765578">[</span><span class="op" id="1765579">]</span><span class="builtintype" id="1765580">byte</span><span class="op" id="1765584">)</span>&nbsp;<span class="op" id="1765586">(</span><span class="ident" id="1765587">n</span>&nbsp;<span class="builtintype" id="1765589">int</span><span class="op" id="1765592">,</span>&nbsp;<span class="ident" id="1765594">err</span>&nbsp;<span class="builtintype" id="1765598">error</span><span class="op" id="1765603">)</span>&nbsp;<span class="op" id="1765605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765608">if</span>&nbsp;<span class="ident" id="1765611">s</span><span class="op" id="1765612">.</span><span class="ident" id="1765613">off</span>&nbsp;<span class="op" id="1765617">&gt;=</span>&nbsp;<span class="ident" id="1765620">s</span><span class="op" id="1765621">.</span><span class="ident" id="1765622">limit</span>&nbsp;<span class="op" id="1765628">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765632">return</span>&nbsp;<span class="num" id="1765639">0</span><span class="op" id="1765640">,</span>&nbsp;<span class="ident" id="1765642">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1765647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765650">if</span>&nbsp;<span class="ident" id="1765653">max</span>&nbsp;<span class="op" id="1765657">:=</span>&nbsp;<span class="ident" id="1765660">s</span><span class="op" id="1765661">.</span><span class="ident" id="1765662">limit</span>&nbsp;<span class="op" id="1765668">-</span>&nbsp;<span class="ident" id="1765670">s</span><span class="op" id="1765671">.</span><span class="ident" id="1765672">off</span><span class="op" id="1765675">;</span>&nbsp;<span class="ident" id="1765677">int64</span><span class="op" id="1765682">(</span><span class="builtinfunc" id="1765683">len</span><span class="op" id="1765686">(</span><span class="ident" id="1765687">p</span><span class="op" id="1765688">)</span><span class="op" id="1765689">)</span>&nbsp;<span class="op" id="1765691">&gt;</span>&nbsp;<span class="ident" id="1765693">max</span>&nbsp;<span class="op" id="1765697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765701">p</span>&nbsp;<span class="op" id="1765703">=</span>&nbsp;<span class="ident" id="1765705">p</span><span class="op" id="1765706">[</span><span class="num" id="1765707">0</span><span class="op" id="1765708">:</span><span class="ident" id="1765709">max</span><span class="op" id="1765712">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1765715">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765718">n</span><span class="op" id="1765719">,</span>&nbsp;<span class="ident" id="1765721">err</span>&nbsp;<span class="op" id="1765725">=</span>&nbsp;<span class="ident" id="1765727">s</span><span class="op" id="1765728">.</span><span class="ident" id="1765729">r</span><span class="op" id="1765730">.</span><span class="ident" id="1765731">ReadAt</span><span class="op" id="1765737">(</span><span class="ident" id="1765738">p</span><span class="op" id="1765739">,</span>&nbsp;<span class="ident" id="1765741">s</span><span class="op" id="1765742">.</span><span class="ident" id="1765743">off</span><span class="op" id="1765746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1765749">s</span><span class="op" id="1765750">.</span><span class="ident" id="1765751">off</span>&nbsp;<span class="op" id="1765755">+=</span>&nbsp;<span class="ident" id="1765758">int64</span><span class="op" id="1765763">(</span><span class="ident" id="1765764">n</span><span class="op" id="1765765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765768">return</span><br>
<span class="lineno"></span><span class="op" id="1765775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword" id="1765778">var</span>&nbsp;<span class="ident" id="1765782">errWhence</span>&nbsp;<span class="op" id="1765792">=</span>&nbsp;<span class="ident" id="1765794">errors</span><span class="op" id="1765800">.</span><span class="ident" id="1765801">New</span><span class="op" id="1765804">(</span><span class="string" id="1765805">&#34;Seek:&nbsp;invalid&nbsp;whence&#34;</span><span class="op" id="1765827">)</span><br>
<span class="lineno"></span><span class="keyword" id="1765829">var</span>&nbsp;<span class="ident" id="1765833">errOffset</span>&nbsp;<span class="op" id="1765843">=</span>&nbsp;<span class="ident" id="1765845">errors</span><span class="op" id="1765851">.</span><span class="ident" id="1765852">New</span><span class="op" id="1765855">(</span><span class="string" id="1765856">&#34;Seek:&nbsp;invalid&nbsp;offset&#34;</span><span class="op" id="1765878">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1765881">func</span>&nbsp;<span class="op" id="1765886">(</span><span class="ident" id="1765887">s</span>&nbsp;<span class="op" id="1765889">*</span><span class="ident" id="1765890">SectionReader</span><span class="op" id="1765903">)</span>&nbsp;<span class="ident" id="1765905">Seek</span><span class="op" id="1765909">(</span><span class="ident" id="1765910">offset</span>&nbsp;<span class="ident" id="1765917">int64</span><span class="op" id="1765922">,</span>&nbsp;<span class="ident" id="1765924">whence</span>&nbsp;<span class="builtintype" id="1765931">int</span><span class="op" id="1765934">)</span>&nbsp;<span class="op" id="1765936">(</span><span class="ident" id="1765937">int64</span><span class="op" id="1765942">,</span>&nbsp;<span class="builtintype" id="1765944">error</span><span class="op" id="1765949">)</span>&nbsp;<span class="op" id="1765951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765954">switch</span>&nbsp;<span class="ident" id="1765961">whence</span>&nbsp;<span class="op" id="1765968">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765971">default</span><span class="op" id="1765978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1765982">return</span>&nbsp;<span class="num" id="1765989">0</span><span class="op" id="1765990">,</span>&nbsp;<span class="ident" id="1765992">errWhence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766003">case</span>&nbsp;<span class="num" id="1766008">0</span><span class="op" id="1766009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766013">offset</span>&nbsp;<span class="op" id="1766020">+=</span>&nbsp;<span class="ident" id="1766023">s</span><span class="op" id="1766024">.</span><span class="ident" id="1766025">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766031">case</span>&nbsp;<span class="num" id="1766036">1</span><span class="op" id="1766037">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766041">offset</span>&nbsp;<span class="op" id="1766048">+=</span>&nbsp;<span class="ident" id="1766051">s</span><span class="op" id="1766052">.</span><span class="ident" id="1766053">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766058">case</span>&nbsp;<span class="num" id="1766063">2</span><span class="op" id="1766064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766068">offset</span>&nbsp;<span class="op" id="1766075">+=</span>&nbsp;<span class="ident" id="1766078">s</span><span class="op" id="1766079">.</span><span class="ident" id="1766080">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1766087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766090">if</span>&nbsp;<span class="ident" id="1766093">offset</span>&nbsp;<span class="op" id="1766100">&lt;</span>&nbsp;<span class="ident" id="1766102">s</span><span class="op" id="1766103">.</span><span class="ident" id="1766104">base</span>&nbsp;<span class="op" id="1766109">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766113">return</span>&nbsp;<span class="num" id="1766120">0</span><span class="op" id="1766121">,</span>&nbsp;<span class="ident" id="1766123">errOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1766134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766137">s</span><span class="op" id="1766138">.</span><span class="ident" id="1766139">off</span>&nbsp;<span class="op" id="1766143">=</span>&nbsp;<span class="ident" id="1766145">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766153">return</span>&nbsp;<span class="ident" id="1766160">offset</span>&nbsp;<span class="op" id="1766167">-</span>&nbsp;<span class="ident" id="1766169">s</span><span class="op" id="1766170">.</span><span class="ident" id="1766171">base</span><span class="op" id="1766175">,</span>&nbsp;<span class="ident" id="1766177">nil</span><br>
<span class="lineno"></span><span class="op" id="1766181">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="keyword" id="1766184">func</span>&nbsp;<span class="op" id="1766189">(</span><span class="ident" id="1766190">s</span>&nbsp;<span class="op" id="1766192">*</span><span class="ident" id="1766193">SectionReader</span><span class="op" id="1766206">)</span>&nbsp;<span class="ident" id="1766208">ReadAt</span><span class="op" id="1766214">(</span><span class="ident" id="1766215">p</span>&nbsp;<span class="op" id="1766217">[</span><span class="op" id="1766218">]</span><span class="builtintype" id="1766219">byte</span><span class="op" id="1766223">,</span>&nbsp;<span class="ident" id="1766225">off</span>&nbsp;<span class="ident" id="1766229">int64</span><span class="op" id="1766234">)</span>&nbsp;<span class="op" id="1766236">(</span><span class="ident" id="1766237">n</span>&nbsp;<span class="builtintype" id="1766239">int</span><span class="op" id="1766242">,</span>&nbsp;<span class="ident" id="1766244">err</span>&nbsp;<span class="builtintype" id="1766248">error</span><span class="op" id="1766253">)</span>&nbsp;<span class="op" id="1766255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766258">if</span>&nbsp;<span class="ident" id="1766261">off</span>&nbsp;<span class="op" id="1766265">&lt;</span>&nbsp;<span class="num" id="1766267">0</span>&nbsp;<span class="op" id="1766269">||</span>&nbsp;<span class="ident" id="1766272">off</span>&nbsp;<span class="op" id="1766276">&gt;=</span>&nbsp;<span class="ident" id="1766279">s</span><span class="op" id="1766280">.</span><span class="ident" id="1766281">limit</span><span class="op" id="1766286">-</span><span class="ident" id="1766287">s</span><span class="op" id="1766288">.</span><span class="ident" id="1766289">base</span>&nbsp;<span class="op" id="1766294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766298">return</span>&nbsp;<span class="num" id="1766305">0</span><span class="op" id="1766306">,</span>&nbsp;<span class="ident" id="1766308">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1766313">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766316">off</span>&nbsp;<span class="op" id="1766320">+=</span>&nbsp;<span class="ident" id="1766323">s</span><span class="op" id="1766324">.</span><span class="ident" id="1766325">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766331">if</span>&nbsp;<span class="ident" id="1766334">max</span>&nbsp;<span class="op" id="1766338">:=</span>&nbsp;<span class="ident" id="1766341">s</span><span class="op" id="1766342">.</span><span class="ident" id="1766343">limit</span>&nbsp;<span class="op" id="1766349">-</span>&nbsp;<span class="ident" id="1766351">off</span><span class="op" id="1766354">;</span>&nbsp;<span class="ident" id="1766356">int64</span><span class="op" id="1766361">(</span><span class="builtinfunc" id="1766362">len</span><span class="op" id="1766365">(</span><span class="ident" id="1766366">p</span><span class="op" id="1766367">)</span><span class="op" id="1766368">)</span>&nbsp;<span class="op" id="1766370">&gt;</span>&nbsp;<span class="ident" id="1766372">max</span>&nbsp;<span class="op" id="1766376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766380">p</span>&nbsp;<span class="op" id="1766382">=</span>&nbsp;<span class="ident" id="1766384">p</span><span class="op" id="1766385">[</span><span class="num" id="1766386">0</span><span class="op" id="1766387">:</span><span class="ident" id="1766388">max</span><span class="op" id="1766391">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766395">n</span><span class="op" id="1766396">,</span>&nbsp;<span class="ident" id="1766398">err</span>&nbsp;<span class="op" id="1766402">=</span>&nbsp;<span class="ident" id="1766404">s</span><span class="op" id="1766405">.</span><span class="ident" id="1766406">r</span><span class="op" id="1766407">.</span><span class="ident" id="1766408">ReadAt</span><span class="op" id="1766414">(</span><span class="ident" id="1766415">p</span><span class="op" id="1766416">,</span>&nbsp;<span class="ident" id="1766418">off</span><span class="op" id="1766421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766425">if</span>&nbsp;<span class="ident" id="1766428">err</span>&nbsp;<span class="op" id="1766432">==</span>&nbsp;<span class="ident" id="1766435">nil</span>&nbsp;<span class="op" id="1766439">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1766444">err</span>&nbsp;<span class="op" id="1766448">=</span>&nbsp;<span class="ident" id="1766450">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1766456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766460">return</span>&nbsp;<span class="ident" id="1766467">n</span><span class="op" id="1766468">,</span>&nbsp;<span class="ident" id="1766470">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1766475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766478">return</span>&nbsp;<span class="ident" id="1766485">s</span><span class="op" id="1766486">.</span><span class="ident" id="1766487">r</span><span class="op" id="1766488">.</span><span class="ident" id="1766489">ReadAt</span><span class="op" id="1766495">(</span><span class="ident" id="1766496">p</span><span class="op" id="1766497">,</span>&nbsp;<span class="ident" id="1766499">off</span><span class="op" id="1766502">)</span><br>
<span class="lineno">475</span><span class="op" id="1766504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1766507">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;section&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="1766557">func</span>&nbsp;<span class="op" id="1766562">(</span><span class="ident" id="1766563">s</span>&nbsp;<span class="op" id="1766565">*</span><span class="ident" id="1766566">SectionReader</span><span class="op" id="1766579">)</span>&nbsp;<span class="ident" id="1766581">Size</span><span class="op" id="1766585">(</span><span class="op" id="1766586">)</span>&nbsp;<span class="ident" id="1766588">int64</span>&nbsp;<span class="op" id="1766594">{</span>&nbsp;<span class="keyword" id="1766596">return</span>&nbsp;<span class="ident" id="1766603">s</span><span class="op" id="1766604">.</span><span class="ident" id="1766605">limit</span>&nbsp;<span class="op" id="1766611">-</span>&nbsp;<span class="ident" id="1766613">s</span><span class="op" id="1766614">.</span><span class="ident" id="1766615">base</span>&nbsp;<span class="op" id="1766620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="comment" id="1766623">//&nbsp;TeeReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;writes&nbsp;to&nbsp;w&nbsp;what&nbsp;it&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="1766692">//&nbsp;All&nbsp;reads&nbsp;from&nbsp;r&nbsp;performed&nbsp;through&nbsp;it&nbsp;are&nbsp;matched&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1766750">//&nbsp;corresponding&nbsp;writes&nbsp;to&nbsp;w.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;internal&nbsp;buffering&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="1766814">//&nbsp;the&nbsp;write&nbsp;must&nbsp;complete&nbsp;before&nbsp;the&nbsp;read&nbsp;completes.</span><br>
<span class="lineno"></span><span class="comment" id="1766868">//&nbsp;Any&nbsp;error&nbsp;encountered&nbsp;while&nbsp;writing&nbsp;is&nbsp;reported&nbsp;as&nbsp;a&nbsp;read&nbsp;error.</span><br>
<span class="lineno">485</span><span class="keyword" id="1766936">func</span>&nbsp;<span class="ident" id="1766941">TeeReader</span><span class="op" id="1766950">(</span><span class="ident" id="1766951">r</span>&nbsp;<span class="ident" id="1766953">Reader</span><span class="op" id="1766959">,</span>&nbsp;<span class="ident" id="1766961">w</span>&nbsp;<span class="ident" id="1766963">Writer</span><span class="op" id="1766969">)</span>&nbsp;<span class="ident" id="1766971">Reader</span>&nbsp;<span class="op" id="1766978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1766981">return</span>&nbsp;<span class="op" id="1766988">&amp;</span><span class="ident" id="1766989">teeReader</span><span class="op" id="1766998">{</span><span class="ident" id="1766999">r</span><span class="op" id="1767000">,</span>&nbsp;<span class="ident" id="1767002">w</span><span class="op" id="1767003">}</span><br>
<span class="lineno"></span><span class="op" id="1767005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1767008">type</span>&nbsp;<span class="ident" id="1767013">teeReader</span>&nbsp;<span class="keyword" id="1767023">struct</span>&nbsp;<span class="op" id="1767030">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1767033">r</span>&nbsp;<span class="ident" id="1767035">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1767043">w</span>&nbsp;<span class="ident" id="1767045">Writer</span><br>
<span class="lineno"></span><span class="op" id="1767052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1767055">func</span>&nbsp;<span class="op" id="1767060">(</span><span class="ident" id="1767061">t</span>&nbsp;<span class="op" id="1767063">*</span><span class="ident" id="1767064">teeReader</span><span class="op" id="1767073">)</span>&nbsp;<span class="ident" id="1767075">Read</span><span class="op" id="1767079">(</span><span class="ident" id="1767080">p</span>&nbsp;<span class="op" id="1767082">[</span><span class="op" id="1767083">]</span><span class="builtintype" id="1767084">byte</span><span class="op" id="1767088">)</span>&nbsp;<span class="op" id="1767090">(</span><span class="ident" id="1767091">n</span>&nbsp;<span class="builtintype" id="1767093">int</span><span class="op" id="1767096">,</span>&nbsp;<span class="ident" id="1767098">err</span>&nbsp;<span class="builtintype" id="1767102">error</span><span class="op" id="1767107">)</span>&nbsp;<span class="op" id="1767109">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1767112">n</span><span class="op" id="1767113">,</span>&nbsp;<span class="ident" id="1767115">err</span>&nbsp;<span class="op" id="1767119">=</span>&nbsp;<span class="ident" id="1767121">t</span><span class="op" id="1767122">.</span><span class="ident" id="1767123">r</span><span class="op" id="1767124">.</span><span class="ident" id="1767125">Read</span><span class="op" id="1767129">(</span><span class="ident" id="1767130">p</span><span class="op" id="1767131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1767134">if</span>&nbsp;<span class="ident" id="1767137">n</span>&nbsp;<span class="op" id="1767139">&gt;</span>&nbsp;<span class="num" id="1767141">0</span>&nbsp;<span class="op" id="1767143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1767147">if</span>&nbsp;<span class="ident" id="1767150">n</span><span class="op" id="1767151">,</span>&nbsp;<span class="ident" id="1767153">err</span>&nbsp;<span class="op" id="1767157">:=</span>&nbsp;<span class="ident" id="1767160">t</span><span class="op" id="1767161">.</span><span class="ident" id="1767162">w</span><span class="op" id="1767163">.</span><span class="ident" id="1767164">Write</span><span class="op" id="1767169">(</span><span class="ident" id="1767170">p</span><span class="op" id="1767171">[</span><span class="op" id="1767172">:</span><span class="ident" id="1767173">n</span><span class="op" id="1767174">]</span><span class="op" id="1767175">)</span><span class="op" id="1767176">;</span>&nbsp;<span class="ident" id="1767178">err</span>&nbsp;<span class="op" id="1767182">!=</span>&nbsp;<span class="ident" id="1767185">nil</span>&nbsp;<span class="op" id="1767189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1767194">return</span>&nbsp;<span class="ident" id="1767201">n</span><span class="op" id="1767202">,</span>&nbsp;<span class="ident" id="1767204">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1767210">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1767213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1767216">return</span><br>
<span class="lineno"></span><span class="op" id="1767223">}</span>
</div>
</body>
</html>
