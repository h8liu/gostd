<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5426562">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5426617">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5426671">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5426722">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="5426773">package</span>&nbsp;<span class="ident" id="5426781">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5426788">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="5426865">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="5426897">type</span>&nbsp;<span class="ident" id="5426902">Color</span>&nbsp;<span class="keyword" id="5426908">interface</span>&nbsp;<span class="op" id="5426918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5426921">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5426996">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5427072">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5427148">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427162">RGBA</span><span class="op" id="5427166">(</span><span class="op" id="5427167">)</span>&nbsp;<span class="op" id="5427169">(</span><span class="ident" id="5427170">r</span><span class="op" id="5427171">,</span>&nbsp;<span class="ident" id="5427173">g</span><span class="op" id="5427174">,</span>&nbsp;<span class="ident" id="5427176">b</span><span class="op" id="5427177">,</span>&nbsp;<span class="ident" id="5427179">a</span>&nbsp;<span class="builtintype" id="5427181">uint32</span><span class="op" id="5427187">)</span><br>
<span class="lineno"></span><span class="op" id="5427189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5427192">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5427259">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="5427316">type</span>&nbsp;<span class="ident" id="5427321">RGBA</span>&nbsp;<span class="keyword" id="5427326">struct</span>&nbsp;<span class="op" id="5427333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427336">R</span><span class="op" id="5427337">,</span>&nbsp;<span class="ident" id="5427339">G</span><span class="op" id="5427340">,</span>&nbsp;<span class="ident" id="5427342">B</span><span class="op" id="5427343">,</span>&nbsp;<span class="ident" id="5427345">A</span>&nbsp;<span class="builtintype" id="5427347">uint8</span><br>
<span class="lineno"></span><span class="op" id="5427353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5427356">func</span>&nbsp;<span class="op" id="5427361">(</span><span class="ident" id="5427362">c</span>&nbsp;<span class="ident" id="5427364">RGBA</span><span class="op" id="5427368">)</span>&nbsp;<span class="ident" id="5427370">RGBA</span><span class="op" id="5427374">(</span><span class="op" id="5427375">)</span>&nbsp;<span class="op" id="5427377">(</span><span class="ident" id="5427378">r</span><span class="op" id="5427379">,</span>&nbsp;<span class="ident" id="5427381">g</span><span class="op" id="5427382">,</span>&nbsp;<span class="ident" id="5427384">b</span><span class="op" id="5427385">,</span>&nbsp;<span class="ident" id="5427387">a</span>&nbsp;<span class="builtintype" id="5427389">uint32</span><span class="op" id="5427395">)</span>&nbsp;<span class="op" id="5427397">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427400">r</span>&nbsp;<span class="op" id="5427402">=</span>&nbsp;<span class="builtintype" id="5427404">uint32</span><span class="op" id="5427410">(</span><span class="ident" id="5427411">c</span><span class="op" id="5427412">.</span><span class="ident" id="5427413">R</span><span class="op" id="5427414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427417">r</span>&nbsp;<span class="op" id="5427419">|=</span>&nbsp;<span class="ident" id="5427422">r</span>&nbsp;<span class="op" id="5427424">&lt;&lt;</span>&nbsp;<span class="num" id="5427427">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427430">g</span>&nbsp;<span class="op" id="5427432">=</span>&nbsp;<span class="builtintype" id="5427434">uint32</span><span class="op" id="5427440">(</span><span class="ident" id="5427441">c</span><span class="op" id="5427442">.</span><span class="ident" id="5427443">G</span><span class="op" id="5427444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427447">g</span>&nbsp;<span class="op" id="5427449">|=</span>&nbsp;<span class="ident" id="5427452">g</span>&nbsp;<span class="op" id="5427454">&lt;&lt;</span>&nbsp;<span class="num" id="5427457">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427460">b</span>&nbsp;<span class="op" id="5427462">=</span>&nbsp;<span class="builtintype" id="5427464">uint32</span><span class="op" id="5427470">(</span><span class="ident" id="5427471">c</span><span class="op" id="5427472">.</span><span class="ident" id="5427473">B</span><span class="op" id="5427474">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427477">b</span>&nbsp;<span class="op" id="5427479">|=</span>&nbsp;<span class="ident" id="5427482">b</span>&nbsp;<span class="op" id="5427484">&lt;&lt;</span>&nbsp;<span class="num" id="5427487">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427490">a</span>&nbsp;<span class="op" id="5427492">=</span>&nbsp;<span class="builtintype" id="5427494">uint32</span><span class="op" id="5427500">(</span><span class="ident" id="5427501">c</span><span class="op" id="5427502">.</span><span class="ident" id="5427503">A</span><span class="op" id="5427504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427507">a</span>&nbsp;<span class="op" id="5427509">|=</span>&nbsp;<span class="ident" id="5427512">a</span>&nbsp;<span class="op" id="5427514">&lt;&lt;</span>&nbsp;<span class="num" id="5427517">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427520">return</span><br>
<span class="lineno"></span><span class="op" id="5427527">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5427530">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5427587">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5427645">type</span>&nbsp;<span class="ident" id="5427650">RGBA64</span>&nbsp;<span class="keyword" id="5427657">struct</span>&nbsp;<span class="op" id="5427664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427667">R</span><span class="op" id="5427668">,</span>&nbsp;<span class="ident" id="5427670">G</span><span class="op" id="5427671">,</span>&nbsp;<span class="ident" id="5427673">B</span><span class="op" id="5427674">,</span>&nbsp;<span class="ident" id="5427676">A</span>&nbsp;<span class="builtintype" id="5427678">uint16</span><br>
<span class="lineno">40</span><span class="op" id="5427685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5427688">func</span>&nbsp;<span class="op" id="5427693">(</span><span class="ident" id="5427694">c</span>&nbsp;<span class="ident" id="5427696">RGBA64</span><span class="op" id="5427702">)</span>&nbsp;<span class="ident" id="5427704">RGBA</span><span class="op" id="5427708">(</span><span class="op" id="5427709">)</span>&nbsp;<span class="op" id="5427711">(</span><span class="ident" id="5427712">r</span><span class="op" id="5427713">,</span>&nbsp;<span class="ident" id="5427715">g</span><span class="op" id="5427716">,</span>&nbsp;<span class="ident" id="5427718">b</span><span class="op" id="5427719">,</span>&nbsp;<span class="ident" id="5427721">a</span>&nbsp;<span class="builtintype" id="5427723">uint32</span><span class="op" id="5427729">)</span>&nbsp;<span class="op" id="5427731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427734">return</span>&nbsp;<span class="builtintype" id="5427741">uint32</span><span class="op" id="5427747">(</span><span class="ident" id="5427748">c</span><span class="op" id="5427749">.</span><span class="ident" id="5427750">R</span><span class="op" id="5427751">)</span><span class="op" id="5427752">,</span>&nbsp;<span class="builtintype" id="5427754">uint32</span><span class="op" id="5427760">(</span><span class="ident" id="5427761">c</span><span class="op" id="5427762">.</span><span class="ident" id="5427763">G</span><span class="op" id="5427764">)</span><span class="op" id="5427765">,</span>&nbsp;<span class="builtintype" id="5427767">uint32</span><span class="op" id="5427773">(</span><span class="ident" id="5427774">c</span><span class="op" id="5427775">.</span><span class="ident" id="5427776">B</span><span class="op" id="5427777">)</span><span class="op" id="5427778">,</span>&nbsp;<span class="builtintype" id="5427780">uint32</span><span class="op" id="5427786">(</span><span class="ident" id="5427787">c</span><span class="op" id="5427788">.</span><span class="ident" id="5427789">A</span><span class="op" id="5427790">)</span><br>
<span class="lineno"></span><span class="op" id="5427792">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5427795">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5427855">type</span>&nbsp;<span class="ident" id="5427860">NRGBA</span>&nbsp;<span class="keyword" id="5427866">struct</span>&nbsp;<span class="op" id="5427873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427876">R</span><span class="op" id="5427877">,</span>&nbsp;<span class="ident" id="5427879">G</span><span class="op" id="5427880">,</span>&nbsp;<span class="ident" id="5427882">B</span><span class="op" id="5427883">,</span>&nbsp;<span class="ident" id="5427885">A</span>&nbsp;<span class="builtintype" id="5427887">uint8</span><br>
<span class="lineno"></span><span class="op" id="5427893">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5427896">func</span>&nbsp;<span class="op" id="5427901">(</span><span class="ident" id="5427902">c</span>&nbsp;<span class="ident" id="5427904">NRGBA</span><span class="op" id="5427909">)</span>&nbsp;<span class="ident" id="5427911">RGBA</span><span class="op" id="5427915">(</span><span class="op" id="5427916">)</span>&nbsp;<span class="op" id="5427918">(</span><span class="ident" id="5427919">r</span><span class="op" id="5427920">,</span>&nbsp;<span class="ident" id="5427922">g</span><span class="op" id="5427923">,</span>&nbsp;<span class="ident" id="5427925">b</span><span class="op" id="5427926">,</span>&nbsp;<span class="ident" id="5427928">a</span>&nbsp;<span class="builtintype" id="5427930">uint32</span><span class="op" id="5427936">)</span>&nbsp;<span class="op" id="5427938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427941">r</span>&nbsp;<span class="op" id="5427943">=</span>&nbsp;<span class="builtintype" id="5427945">uint32</span><span class="op" id="5427951">(</span><span class="ident" id="5427952">c</span><span class="op" id="5427953">.</span><span class="ident" id="5427954">R</span><span class="op" id="5427955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427958">r</span>&nbsp;<span class="op" id="5427960">|=</span>&nbsp;<span class="ident" id="5427963">r</span>&nbsp;<span class="op" id="5427965">&lt;&lt;</span>&nbsp;<span class="num" id="5427968">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427971">r</span>&nbsp;<span class="op" id="5427973">*=</span>&nbsp;<span class="builtintype" id="5427976">uint32</span><span class="op" id="5427982">(</span><span class="ident" id="5427983">c</span><span class="op" id="5427984">.</span><span class="ident" id="5427985">A</span><span class="op" id="5427986">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427989">r</span>&nbsp;<span class="op" id="5427991">/=</span>&nbsp;<span class="num" id="5427994">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428000">g</span>&nbsp;<span class="op" id="5428002">=</span>&nbsp;<span class="builtintype" id="5428004">uint32</span><span class="op" id="5428010">(</span><span class="ident" id="5428011">c</span><span class="op" id="5428012">.</span><span class="ident" id="5428013">G</span><span class="op" id="5428014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428017">g</span>&nbsp;<span class="op" id="5428019">|=</span>&nbsp;<span class="ident" id="5428022">g</span>&nbsp;<span class="op" id="5428024">&lt;&lt;</span>&nbsp;<span class="num" id="5428027">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428030">g</span>&nbsp;<span class="op" id="5428032">*=</span>&nbsp;<span class="builtintype" id="5428035">uint32</span><span class="op" id="5428041">(</span><span class="ident" id="5428042">c</span><span class="op" id="5428043">.</span><span class="ident" id="5428044">A</span><span class="op" id="5428045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428048">g</span>&nbsp;<span class="op" id="5428050">/=</span>&nbsp;<span class="num" id="5428053">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428059">b</span>&nbsp;<span class="op" id="5428061">=</span>&nbsp;<span class="builtintype" id="5428063">uint32</span><span class="op" id="5428069">(</span><span class="ident" id="5428070">c</span><span class="op" id="5428071">.</span><span class="ident" id="5428072">B</span><span class="op" id="5428073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428076">b</span>&nbsp;<span class="op" id="5428078">|=</span>&nbsp;<span class="ident" id="5428081">b</span>&nbsp;<span class="op" id="5428083">&lt;&lt;</span>&nbsp;<span class="num" id="5428086">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428089">b</span>&nbsp;<span class="op" id="5428091">*=</span>&nbsp;<span class="builtintype" id="5428094">uint32</span><span class="op" id="5428100">(</span><span class="ident" id="5428101">c</span><span class="op" id="5428102">.</span><span class="ident" id="5428103">A</span><span class="op" id="5428104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428107">b</span>&nbsp;<span class="op" id="5428109">/=</span>&nbsp;<span class="num" id="5428112">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428118">a</span>&nbsp;<span class="op" id="5428120">=</span>&nbsp;<span class="builtintype" id="5428122">uint32</span><span class="op" id="5428128">(</span><span class="ident" id="5428129">c</span><span class="op" id="5428130">.</span><span class="ident" id="5428131">A</span><span class="op" id="5428132">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428135">a</span>&nbsp;<span class="op" id="5428137">|=</span>&nbsp;<span class="ident" id="5428140">a</span>&nbsp;<span class="op" id="5428142">&lt;&lt;</span>&nbsp;<span class="num" id="5428145">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428148">return</span><br>
<span class="lineno"></span><span class="op" id="5428155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5428158">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="5428220">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5428278">type</span>&nbsp;<span class="ident" id="5428283">NRGBA64</span>&nbsp;<span class="keyword" id="5428291">struct</span>&nbsp;<span class="op" id="5428298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428301">R</span><span class="op" id="5428302">,</span>&nbsp;<span class="ident" id="5428304">G</span><span class="op" id="5428305">,</span>&nbsp;<span class="ident" id="5428307">B</span><span class="op" id="5428308">,</span>&nbsp;<span class="ident" id="5428310">A</span>&nbsp;<span class="builtintype" id="5428312">uint16</span><br>
<span class="lineno"></span><span class="op" id="5428319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="5428322">func</span>&nbsp;<span class="op" id="5428327">(</span><span class="ident" id="5428328">c</span>&nbsp;<span class="ident" id="5428330">NRGBA64</span><span class="op" id="5428337">)</span>&nbsp;<span class="ident" id="5428339">RGBA</span><span class="op" id="5428343">(</span><span class="op" id="5428344">)</span>&nbsp;<span class="op" id="5428346">(</span><span class="ident" id="5428347">r</span><span class="op" id="5428348">,</span>&nbsp;<span class="ident" id="5428350">g</span><span class="op" id="5428351">,</span>&nbsp;<span class="ident" id="5428353">b</span><span class="op" id="5428354">,</span>&nbsp;<span class="ident" id="5428356">a</span>&nbsp;<span class="builtintype" id="5428358">uint32</span><span class="op" id="5428364">)</span>&nbsp;<span class="op" id="5428366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428369">r</span>&nbsp;<span class="op" id="5428371">=</span>&nbsp;<span class="builtintype" id="5428373">uint32</span><span class="op" id="5428379">(</span><span class="ident" id="5428380">c</span><span class="op" id="5428381">.</span><span class="ident" id="5428382">R</span><span class="op" id="5428383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428386">r</span>&nbsp;<span class="op" id="5428388">*=</span>&nbsp;<span class="builtintype" id="5428391">uint32</span><span class="op" id="5428397">(</span><span class="ident" id="5428398">c</span><span class="op" id="5428399">.</span><span class="ident" id="5428400">A</span><span class="op" id="5428401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428404">r</span>&nbsp;<span class="op" id="5428406">/=</span>&nbsp;<span class="num" id="5428409">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428417">g</span>&nbsp;<span class="op" id="5428419">=</span>&nbsp;<span class="builtintype" id="5428421">uint32</span><span class="op" id="5428427">(</span><span class="ident" id="5428428">c</span><span class="op" id="5428429">.</span><span class="ident" id="5428430">G</span><span class="op" id="5428431">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428434">g</span>&nbsp;<span class="op" id="5428436">*=</span>&nbsp;<span class="builtintype" id="5428439">uint32</span><span class="op" id="5428445">(</span><span class="ident" id="5428446">c</span><span class="op" id="5428447">.</span><span class="ident" id="5428448">A</span><span class="op" id="5428449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428452">g</span>&nbsp;<span class="op" id="5428454">/=</span>&nbsp;<span class="num" id="5428457">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428465">b</span>&nbsp;<span class="op" id="5428467">=</span>&nbsp;<span class="builtintype" id="5428469">uint32</span><span class="op" id="5428475">(</span><span class="ident" id="5428476">c</span><span class="op" id="5428477">.</span><span class="ident" id="5428478">B</span><span class="op" id="5428479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428482">b</span>&nbsp;<span class="op" id="5428484">*=</span>&nbsp;<span class="builtintype" id="5428487">uint32</span><span class="op" id="5428493">(</span><span class="ident" id="5428494">c</span><span class="op" id="5428495">.</span><span class="ident" id="5428496">A</span><span class="op" id="5428497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428500">b</span>&nbsp;<span class="op" id="5428502">/=</span>&nbsp;<span class="num" id="5428505">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428513">a</span>&nbsp;<span class="op" id="5428515">=</span>&nbsp;<span class="builtintype" id="5428517">uint32</span><span class="op" id="5428523">(</span><span class="ident" id="5428524">c</span><span class="op" id="5428525">.</span><span class="ident" id="5428526">A</span><span class="op" id="5428527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428530">return</span><br>
<span class="lineno"></span><span class="op" id="5428537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5428540">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="5428582">type</span>&nbsp;<span class="ident" id="5428587">Alpha</span>&nbsp;<span class="keyword" id="5428593">struct</span>&nbsp;<span class="op" id="5428600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428603">A</span>&nbsp;<span class="builtintype" id="5428605">uint8</span><br>
<span class="lineno"></span><span class="op" id="5428611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5428614">func</span>&nbsp;<span class="op" id="5428619">(</span><span class="ident" id="5428620">c</span>&nbsp;<span class="ident" id="5428622">Alpha</span><span class="op" id="5428627">)</span>&nbsp;<span class="ident" id="5428629">RGBA</span><span class="op" id="5428633">(</span><span class="op" id="5428634">)</span>&nbsp;<span class="op" id="5428636">(</span><span class="ident" id="5428637">r</span><span class="op" id="5428638">,</span>&nbsp;<span class="ident" id="5428640">g</span><span class="op" id="5428641">,</span>&nbsp;<span class="ident" id="5428643">b</span><span class="op" id="5428644">,</span>&nbsp;<span class="ident" id="5428646">a</span>&nbsp;<span class="builtintype" id="5428648">uint32</span><span class="op" id="5428654">)</span>&nbsp;<span class="op" id="5428656">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428659">a</span>&nbsp;<span class="op" id="5428661">=</span>&nbsp;<span class="builtintype" id="5428663">uint32</span><span class="op" id="5428669">(</span><span class="ident" id="5428670">c</span><span class="op" id="5428671">.</span><span class="ident" id="5428672">A</span><span class="op" id="5428673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428676">a</span>&nbsp;<span class="op" id="5428678">|=</span>&nbsp;<span class="ident" id="5428681">a</span>&nbsp;<span class="op" id="5428683">&lt;&lt;</span>&nbsp;<span class="num" id="5428686">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428689">return</span>&nbsp;<span class="ident" id="5428696">a</span><span class="op" id="5428697">,</span>&nbsp;<span class="ident" id="5428699">a</span><span class="op" id="5428700">,</span>&nbsp;<span class="ident" id="5428702">a</span><span class="op" id="5428703">,</span>&nbsp;<span class="ident" id="5428705">a</span><br>
<span class="lineno"></span><span class="op" id="5428707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5428710">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5428754">type</span>&nbsp;<span class="ident" id="5428759">Alpha16</span>&nbsp;<span class="keyword" id="5428767">struct</span>&nbsp;<span class="op" id="5428774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428777">A</span>&nbsp;<span class="builtintype" id="5428779">uint16</span><br>
<span class="lineno"></span><span class="op" id="5428786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5428789">func</span>&nbsp;<span class="op" id="5428794">(</span><span class="ident" id="5428795">c</span>&nbsp;<span class="ident" id="5428797">Alpha16</span><span class="op" id="5428804">)</span>&nbsp;<span class="ident" id="5428806">RGBA</span><span class="op" id="5428810">(</span><span class="op" id="5428811">)</span>&nbsp;<span class="op" id="5428813">(</span><span class="ident" id="5428814">r</span><span class="op" id="5428815">,</span>&nbsp;<span class="ident" id="5428817">g</span><span class="op" id="5428818">,</span>&nbsp;<span class="ident" id="5428820">b</span><span class="op" id="5428821">,</span>&nbsp;<span class="ident" id="5428823">a</span>&nbsp;<span class="builtintype" id="5428825">uint32</span><span class="op" id="5428831">)</span>&nbsp;<span class="op" id="5428833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428836">a</span>&nbsp;<span class="op" id="5428838">=</span>&nbsp;<span class="builtintype" id="5428840">uint32</span><span class="op" id="5428846">(</span><span class="ident" id="5428847">c</span><span class="op" id="5428848">.</span><span class="ident" id="5428849">A</span><span class="op" id="5428850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428853">return</span>&nbsp;<span class="ident" id="5428860">a</span><span class="op" id="5428861">,</span>&nbsp;<span class="ident" id="5428863">a</span><span class="op" id="5428864">,</span>&nbsp;<span class="ident" id="5428866">a</span><span class="op" id="5428867">,</span>&nbsp;<span class="ident" id="5428869">a</span><br>
<span class="lineno"></span><span class="op" id="5428871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5428874">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5428919">type</span>&nbsp;<span class="ident" id="5428924">Gray</span>&nbsp;<span class="keyword" id="5428929">struct</span>&nbsp;<span class="op" id="5428936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428939">Y</span>&nbsp;<span class="builtintype" id="5428941">uint8</span><br>
<span class="lineno"></span><span class="op" id="5428947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5428950">func</span>&nbsp;<span class="op" id="5428955">(</span><span class="ident" id="5428956">c</span>&nbsp;<span class="ident" id="5428958">Gray</span><span class="op" id="5428962">)</span>&nbsp;<span class="ident" id="5428964">RGBA</span><span class="op" id="5428968">(</span><span class="op" id="5428969">)</span>&nbsp;<span class="op" id="5428971">(</span><span class="ident" id="5428972">r</span><span class="op" id="5428973">,</span>&nbsp;<span class="ident" id="5428975">g</span><span class="op" id="5428976">,</span>&nbsp;<span class="ident" id="5428978">b</span><span class="op" id="5428979">,</span>&nbsp;<span class="ident" id="5428981">a</span>&nbsp;<span class="builtintype" id="5428983">uint32</span><span class="op" id="5428989">)</span>&nbsp;<span class="op" id="5428991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428994">y</span>&nbsp;<span class="op" id="5428996">:=</span>&nbsp;<span class="builtintype" id="5428999">uint32</span><span class="op" id="5429005">(</span><span class="ident" id="5429006">c</span><span class="op" id="5429007">.</span><span class="ident" id="5429008">Y</span><span class="op" id="5429009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429012">y</span>&nbsp;<span class="op" id="5429014">|=</span>&nbsp;<span class="ident" id="5429017">y</span>&nbsp;<span class="op" id="5429019">&lt;&lt;</span>&nbsp;<span class="num" id="5429022">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429025">return</span>&nbsp;<span class="ident" id="5429032">y</span><span class="op" id="5429033">,</span>&nbsp;<span class="ident" id="5429035">y</span><span class="op" id="5429036">,</span>&nbsp;<span class="ident" id="5429038">y</span><span class="op" id="5429039">,</span>&nbsp;<span class="num" id="5429041">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5429048">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5429051">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5429098">type</span>&nbsp;<span class="ident" id="5429103">Gray16</span>&nbsp;<span class="keyword" id="5429110">struct</span>&nbsp;<span class="op" id="5429117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429120">Y</span>&nbsp;<span class="builtintype" id="5429122">uint16</span><br>
<span class="lineno"></span><span class="op" id="5429129">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5429132">func</span>&nbsp;<span class="op" id="5429137">(</span><span class="ident" id="5429138">c</span>&nbsp;<span class="ident" id="5429140">Gray16</span><span class="op" id="5429146">)</span>&nbsp;<span class="ident" id="5429148">RGBA</span><span class="op" id="5429152">(</span><span class="op" id="5429153">)</span>&nbsp;<span class="op" id="5429155">(</span><span class="ident" id="5429156">r</span><span class="op" id="5429157">,</span>&nbsp;<span class="ident" id="5429159">g</span><span class="op" id="5429160">,</span>&nbsp;<span class="ident" id="5429162">b</span><span class="op" id="5429163">,</span>&nbsp;<span class="ident" id="5429165">a</span>&nbsp;<span class="builtintype" id="5429167">uint32</span><span class="op" id="5429173">)</span>&nbsp;<span class="op" id="5429175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429178">y</span>&nbsp;<span class="op" id="5429180">:=</span>&nbsp;<span class="builtintype" id="5429183">uint32</span><span class="op" id="5429189">(</span><span class="ident" id="5429190">c</span><span class="op" id="5429191">.</span><span class="ident" id="5429192">Y</span><span class="op" id="5429193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429196">return</span>&nbsp;<span class="ident" id="5429203">y</span><span class="op" id="5429204">,</span>&nbsp;<span class="ident" id="5429206">y</span><span class="op" id="5429207">,</span>&nbsp;<span class="ident" id="5429209">y</span><span class="op" id="5429210">,</span>&nbsp;<span class="num" id="5429212">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5429219">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5429222">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5429301">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="5429318">type</span>&nbsp;<span class="ident" id="5429323">Model</span>&nbsp;<span class="keyword" id="5429329">interface</span>&nbsp;<span class="op" id="5429339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429342">Convert</span><span class="op" id="5429349">(</span><span class="ident" id="5429350">c</span>&nbsp;<span class="ident" id="5429352">Color</span><span class="op" id="5429357">)</span>&nbsp;<span class="ident" id="5429359">Color</span><br>
<span class="lineno">135</span><span class="op" id="5429365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5429368">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="5429441">func</span>&nbsp;<span class="ident" id="5429446">ModelFunc</span><span class="op" id="5429455">(</span><span class="ident" id="5429456">f</span>&nbsp;<span class="keyword" id="5429458">func</span><span class="op" id="5429462">(</span><span class="ident" id="5429463">Color</span><span class="op" id="5429468">)</span>&nbsp;<span class="ident" id="5429470">Color</span><span class="op" id="5429475">)</span>&nbsp;<span class="ident" id="5429477">Model</span>&nbsp;<span class="op" id="5429483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5429486">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5429535">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5429584">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5429634">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5429684">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429714">return</span>&nbsp;<span class="op" id="5429721">&amp;</span><span class="ident" id="5429722">modelFunc</span><span class="op" id="5429731">{</span><span class="ident" id="5429732">f</span><span class="op" id="5429733">}</span><br>
<span class="lineno">145</span><span class="op" id="5429735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5429738">type</span>&nbsp;<span class="ident" id="5429743">modelFunc</span>&nbsp;<span class="keyword" id="5429753">struct</span>&nbsp;<span class="op" id="5429760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429763">f</span>&nbsp;<span class="keyword" id="5429765">func</span><span class="op" id="5429769">(</span><span class="ident" id="5429770">Color</span><span class="op" id="5429775">)</span>&nbsp;<span class="ident" id="5429777">Color</span><br>
<span class="lineno"></span><span class="op" id="5429783">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5429786">func</span>&nbsp;<span class="op" id="5429791">(</span><span class="ident" id="5429792">m</span>&nbsp;<span class="op" id="5429794">*</span><span class="ident" id="5429795">modelFunc</span><span class="op" id="5429804">)</span>&nbsp;<span class="ident" id="5429806">Convert</span><span class="op" id="5429813">(</span><span class="ident" id="5429814">c</span>&nbsp;<span class="ident" id="5429816">Color</span><span class="op" id="5429821">)</span>&nbsp;<span class="ident" id="5429823">Color</span>&nbsp;<span class="op" id="5429829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429832">return</span>&nbsp;<span class="ident" id="5429839">m</span><span class="op" id="5429840">.</span><span class="ident" id="5429841">f</span><span class="op" id="5429842">(</span><span class="ident" id="5429843">c</span><span class="op" id="5429844">)</span><br>
<span class="lineno"></span><span class="op" id="5429846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5429849">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5429889">var</span>&nbsp;<span class="op" id="5429893">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429896">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429909">Model</span>&nbsp;<span class="op" id="5429915">=</span>&nbsp;<span class="ident" id="5429917">ModelFunc</span><span class="op" id="5429926">(</span><span class="ident" id="5429927">rgbaModel</span><span class="op" id="5429936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429939">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="5429952">Model</span>&nbsp;<span class="op" id="5429958">=</span>&nbsp;<span class="ident" id="5429960">ModelFunc</span><span class="op" id="5429969">(</span><span class="ident" id="5429970">rgba64Model</span><span class="op" id="5429981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429984">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5429997">Model</span>&nbsp;<span class="op" id="5430003">=</span>&nbsp;<span class="ident" id="5430005">ModelFunc</span><span class="op" id="5430014">(</span><span class="ident" id="5430015">nrgbaModel</span><span class="op" id="5430025">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430028">NRGBA64Model</span>&nbsp;<span class="ident" id="5430041">Model</span>&nbsp;<span class="op" id="5430047">=</span>&nbsp;<span class="ident" id="5430049">ModelFunc</span><span class="op" id="5430058">(</span><span class="ident" id="5430059">nrgba64Model</span><span class="op" id="5430071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430074">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5430087">Model</span>&nbsp;<span class="op" id="5430093">=</span>&nbsp;<span class="ident" id="5430095">ModelFunc</span><span class="op" id="5430104">(</span><span class="ident" id="5430105">alphaModel</span><span class="op" id="5430115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430118">Alpha16Model</span>&nbsp;<span class="ident" id="5430131">Model</span>&nbsp;<span class="op" id="5430137">=</span>&nbsp;<span class="ident" id="5430139">ModelFunc</span><span class="op" id="5430148">(</span><span class="ident" id="5430149">alpha16Model</span><span class="op" id="5430161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430164">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430177">Model</span>&nbsp;<span class="op" id="5430183">=</span>&nbsp;<span class="ident" id="5430185">ModelFunc</span><span class="op" id="5430194">(</span><span class="ident" id="5430195">grayModel</span><span class="op" id="5430204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430207">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="5430220">Model</span>&nbsp;<span class="op" id="5430226">=</span>&nbsp;<span class="ident" id="5430228">ModelFunc</span><span class="op" id="5430237">(</span><span class="ident" id="5430238">gray16Model</span><span class="op" id="5430249">)</span><br>
<span class="lineno">165</span><span class="op" id="5430251">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5430254">func</span>&nbsp;<span class="ident" id="5430259">rgbaModel</span><span class="op" id="5430268">(</span><span class="ident" id="5430269">c</span>&nbsp;<span class="ident" id="5430271">Color</span><span class="op" id="5430276">)</span>&nbsp;<span class="ident" id="5430278">Color</span>&nbsp;<span class="op" id="5430284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430287">if</span>&nbsp;<span class="ident" id="5430290">_</span><span class="op" id="5430291">,</span>&nbsp;<span class="ident" id="5430293">ok</span>&nbsp;<span class="op" id="5430296">:=</span>&nbsp;<span class="ident" id="5430299">c</span><span class="op" id="5430300">.</span><span class="op" id="5430301">(</span><span class="ident" id="5430302">RGBA</span><span class="op" id="5430306">)</span><span class="op" id="5430307">;</span>&nbsp;<span class="ident" id="5430309">ok</span>&nbsp;<span class="op" id="5430312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430316">return</span>&nbsp;<span class="ident" id="5430323">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430329">r</span><span class="op" id="5430330">,</span>&nbsp;<span class="ident" id="5430332">g</span><span class="op" id="5430333">,</span>&nbsp;<span class="ident" id="5430335">b</span><span class="op" id="5430336">,</span>&nbsp;<span class="ident" id="5430338">a</span>&nbsp;<span class="op" id="5430340">:=</span>&nbsp;<span class="ident" id="5430343">c</span><span class="op" id="5430344">.</span><span class="ident" id="5430345">RGBA</span><span class="op" id="5430349">(</span><span class="op" id="5430350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430353">return</span>&nbsp;<span class="ident" id="5430360">RGBA</span><span class="op" id="5430364">{</span><span class="builtintype" id="5430365">uint8</span><span class="op" id="5430370">(</span><span class="ident" id="5430371">r</span>&nbsp;<span class="op" id="5430373">&gt;&gt;</span>&nbsp;<span class="num" id="5430376">8</span><span class="op" id="5430377">)</span><span class="op" id="5430378">,</span>&nbsp;<span class="builtintype" id="5430380">uint8</span><span class="op" id="5430385">(</span><span class="ident" id="5430386">g</span>&nbsp;<span class="op" id="5430388">&gt;&gt;</span>&nbsp;<span class="num" id="5430391">8</span><span class="op" id="5430392">)</span><span class="op" id="5430393">,</span>&nbsp;<span class="builtintype" id="5430395">uint8</span><span class="op" id="5430400">(</span><span class="ident" id="5430401">b</span>&nbsp;<span class="op" id="5430403">&gt;&gt;</span>&nbsp;<span class="num" id="5430406">8</span><span class="op" id="5430407">)</span><span class="op" id="5430408">,</span>&nbsp;<span class="builtintype" id="5430410">uint8</span><span class="op" id="5430415">(</span><span class="ident" id="5430416">a</span>&nbsp;<span class="op" id="5430418">&gt;&gt;</span>&nbsp;<span class="num" id="5430421">8</span><span class="op" id="5430422">)</span><span class="op" id="5430423">}</span><br>
<span class="lineno"></span><span class="op" id="5430425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5430428">func</span>&nbsp;<span class="ident" id="5430433">rgba64Model</span><span class="op" id="5430444">(</span><span class="ident" id="5430445">c</span>&nbsp;<span class="ident" id="5430447">Color</span><span class="op" id="5430452">)</span>&nbsp;<span class="ident" id="5430454">Color</span>&nbsp;<span class="op" id="5430460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430463">if</span>&nbsp;<span class="ident" id="5430466">_</span><span class="op" id="5430467">,</span>&nbsp;<span class="ident" id="5430469">ok</span>&nbsp;<span class="op" id="5430472">:=</span>&nbsp;<span class="ident" id="5430475">c</span><span class="op" id="5430476">.</span><span class="op" id="5430477">(</span><span class="ident" id="5430478">RGBA64</span><span class="op" id="5430484">)</span><span class="op" id="5430485">;</span>&nbsp;<span class="ident" id="5430487">ok</span>&nbsp;<span class="op" id="5430490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430494">return</span>&nbsp;<span class="ident" id="5430501">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430507">r</span><span class="op" id="5430508">,</span>&nbsp;<span class="ident" id="5430510">g</span><span class="op" id="5430511">,</span>&nbsp;<span class="ident" id="5430513">b</span><span class="op" id="5430514">,</span>&nbsp;<span class="ident" id="5430516">a</span>&nbsp;<span class="op" id="5430518">:=</span>&nbsp;<span class="ident" id="5430521">c</span><span class="op" id="5430522">.</span><span class="ident" id="5430523">RGBA</span><span class="op" id="5430527">(</span><span class="op" id="5430528">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430531">return</span>&nbsp;<span class="ident" id="5430538">RGBA64</span><span class="op" id="5430544">{</span><span class="builtintype" id="5430545">uint16</span><span class="op" id="5430551">(</span><span class="ident" id="5430552">r</span><span class="op" id="5430553">)</span><span class="op" id="5430554">,</span>&nbsp;<span class="builtintype" id="5430556">uint16</span><span class="op" id="5430562">(</span><span class="ident" id="5430563">g</span><span class="op" id="5430564">)</span><span class="op" id="5430565">,</span>&nbsp;<span class="builtintype" id="5430567">uint16</span><span class="op" id="5430573">(</span><span class="ident" id="5430574">b</span><span class="op" id="5430575">)</span><span class="op" id="5430576">,</span>&nbsp;<span class="builtintype" id="5430578">uint16</span><span class="op" id="5430584">(</span><span class="ident" id="5430585">a</span><span class="op" id="5430586">)</span><span class="op" id="5430587">}</span><br>
<span class="lineno"></span><span class="op" id="5430589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5430592">func</span>&nbsp;<span class="ident" id="5430597">nrgbaModel</span><span class="op" id="5430607">(</span><span class="ident" id="5430608">c</span>&nbsp;<span class="ident" id="5430610">Color</span><span class="op" id="5430615">)</span>&nbsp;<span class="ident" id="5430617">Color</span>&nbsp;<span class="op" id="5430623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430626">if</span>&nbsp;<span class="ident" id="5430629">_</span><span class="op" id="5430630">,</span>&nbsp;<span class="ident" id="5430632">ok</span>&nbsp;<span class="op" id="5430635">:=</span>&nbsp;<span class="ident" id="5430638">c</span><span class="op" id="5430639">.</span><span class="op" id="5430640">(</span><span class="ident" id="5430641">NRGBA</span><span class="op" id="5430646">)</span><span class="op" id="5430647">;</span>&nbsp;<span class="ident" id="5430649">ok</span>&nbsp;<span class="op" id="5430652">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430656">return</span>&nbsp;<span class="ident" id="5430663">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430669">r</span><span class="op" id="5430670">,</span>&nbsp;<span class="ident" id="5430672">g</span><span class="op" id="5430673">,</span>&nbsp;<span class="ident" id="5430675">b</span><span class="op" id="5430676">,</span>&nbsp;<span class="ident" id="5430678">a</span>&nbsp;<span class="op" id="5430680">:=</span>&nbsp;<span class="ident" id="5430683">c</span><span class="op" id="5430684">.</span><span class="ident" id="5430685">RGBA</span><span class="op" id="5430689">(</span><span class="op" id="5430690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430693">if</span>&nbsp;<span class="ident" id="5430696">a</span>&nbsp;<span class="op" id="5430698">==</span>&nbsp;<span class="num" id="5430701">0xffff</span>&nbsp;<span class="op" id="5430708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430712">return</span>&nbsp;<span class="ident" id="5430719">NRGBA</span><span class="op" id="5430724">{</span><span class="builtintype" id="5430725">uint8</span><span class="op" id="5430730">(</span><span class="ident" id="5430731">r</span>&nbsp;<span class="op" id="5430733">&gt;&gt;</span>&nbsp;<span class="num" id="5430736">8</span><span class="op" id="5430737">)</span><span class="op" id="5430738">,</span>&nbsp;<span class="builtintype" id="5430740">uint8</span><span class="op" id="5430745">(</span><span class="ident" id="5430746">g</span>&nbsp;<span class="op" id="5430748">&gt;&gt;</span>&nbsp;<span class="num" id="5430751">8</span><span class="op" id="5430752">)</span><span class="op" id="5430753">,</span>&nbsp;<span class="builtintype" id="5430755">uint8</span><span class="op" id="5430760">(</span><span class="ident" id="5430761">b</span>&nbsp;<span class="op" id="5430763">&gt;&gt;</span>&nbsp;<span class="num" id="5430766">8</span><span class="op" id="5430767">)</span><span class="op" id="5430768">,</span>&nbsp;<span class="num" id="5430770">0xff</span><span class="op" id="5430774">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430780">if</span>&nbsp;<span class="ident" id="5430783">a</span>&nbsp;<span class="op" id="5430785">==</span>&nbsp;<span class="num" id="5430788">0</span>&nbsp;<span class="op" id="5430790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430794">return</span>&nbsp;<span class="ident" id="5430801">NRGBA</span><span class="op" id="5430806">{</span><span class="num" id="5430807">0</span><span class="op" id="5430808">,</span>&nbsp;<span class="num" id="5430810">0</span><span class="op" id="5430811">,</span>&nbsp;<span class="num" id="5430813">0</span><span class="op" id="5430814">,</span>&nbsp;<span class="num" id="5430816">0</span><span class="op" id="5430817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5430823">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430924">r</span>&nbsp;<span class="op" id="5430926">=</span>&nbsp;<span class="op" id="5430928">(</span><span class="ident" id="5430929">r</span>&nbsp;<span class="op" id="5430931">*</span>&nbsp;<span class="num" id="5430933">0xffff</span><span class="op" id="5430939">)</span>&nbsp;<span class="op" id="5430941">/</span>&nbsp;<span class="ident" id="5430943">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430946">g</span>&nbsp;<span class="op" id="5430948">=</span>&nbsp;<span class="op" id="5430950">(</span><span class="ident" id="5430951">g</span>&nbsp;<span class="op" id="5430953">*</span>&nbsp;<span class="num" id="5430955">0xffff</span><span class="op" id="5430961">)</span>&nbsp;<span class="op" id="5430963">/</span>&nbsp;<span class="ident" id="5430965">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430968">b</span>&nbsp;<span class="op" id="5430970">=</span>&nbsp;<span class="op" id="5430972">(</span><span class="ident" id="5430973">b</span>&nbsp;<span class="op" id="5430975">*</span>&nbsp;<span class="num" id="5430977">0xffff</span><span class="op" id="5430983">)</span>&nbsp;<span class="op" id="5430985">/</span>&nbsp;<span class="ident" id="5430987">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430990">return</span>&nbsp;<span class="ident" id="5430997">NRGBA</span><span class="op" id="5431002">{</span><span class="builtintype" id="5431003">uint8</span><span class="op" id="5431008">(</span><span class="ident" id="5431009">r</span>&nbsp;<span class="op" id="5431011">&gt;&gt;</span>&nbsp;<span class="num" id="5431014">8</span><span class="op" id="5431015">)</span><span class="op" id="5431016">,</span>&nbsp;<span class="builtintype" id="5431018">uint8</span><span class="op" id="5431023">(</span><span class="ident" id="5431024">g</span>&nbsp;<span class="op" id="5431026">&gt;&gt;</span>&nbsp;<span class="num" id="5431029">8</span><span class="op" id="5431030">)</span><span class="op" id="5431031">,</span>&nbsp;<span class="builtintype" id="5431033">uint8</span><span class="op" id="5431038">(</span><span class="ident" id="5431039">b</span>&nbsp;<span class="op" id="5431041">&gt;&gt;</span>&nbsp;<span class="num" id="5431044">8</span><span class="op" id="5431045">)</span><span class="op" id="5431046">,</span>&nbsp;<span class="builtintype" id="5431048">uint8</span><span class="op" id="5431053">(</span><span class="ident" id="5431054">a</span>&nbsp;<span class="op" id="5431056">&gt;&gt;</span>&nbsp;<span class="num" id="5431059">8</span><span class="op" id="5431060">)</span><span class="op" id="5431061">}</span><br>
<span class="lineno"></span><span class="op" id="5431063">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5431066">func</span>&nbsp;<span class="ident" id="5431071">nrgba64Model</span><span class="op" id="5431083">(</span><span class="ident" id="5431084">c</span>&nbsp;<span class="ident" id="5431086">Color</span><span class="op" id="5431091">)</span>&nbsp;<span class="ident" id="5431093">Color</span>&nbsp;<span class="op" id="5431099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431102">if</span>&nbsp;<span class="ident" id="5431105">_</span><span class="op" id="5431106">,</span>&nbsp;<span class="ident" id="5431108">ok</span>&nbsp;<span class="op" id="5431111">:=</span>&nbsp;<span class="ident" id="5431114">c</span><span class="op" id="5431115">.</span><span class="op" id="5431116">(</span><span class="ident" id="5431117">NRGBA64</span><span class="op" id="5431124">)</span><span class="op" id="5431125">;</span>&nbsp;<span class="ident" id="5431127">ok</span>&nbsp;<span class="op" id="5431130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431134">return</span>&nbsp;<span class="ident" id="5431141">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431144">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431147">r</span><span class="op" id="5431148">,</span>&nbsp;<span class="ident" id="5431150">g</span><span class="op" id="5431151">,</span>&nbsp;<span class="ident" id="5431153">b</span><span class="op" id="5431154">,</span>&nbsp;<span class="ident" id="5431156">a</span>&nbsp;<span class="op" id="5431158">:=</span>&nbsp;<span class="ident" id="5431161">c</span><span class="op" id="5431162">.</span><span class="ident" id="5431163">RGBA</span><span class="op" id="5431167">(</span><span class="op" id="5431168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431171">if</span>&nbsp;<span class="ident" id="5431174">a</span>&nbsp;<span class="op" id="5431176">==</span>&nbsp;<span class="num" id="5431179">0xffff</span>&nbsp;<span class="op" id="5431186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431190">return</span>&nbsp;<span class="ident" id="5431197">NRGBA64</span><span class="op" id="5431204">{</span><span class="builtintype" id="5431205">uint16</span><span class="op" id="5431211">(</span><span class="ident" id="5431212">r</span><span class="op" id="5431213">)</span><span class="op" id="5431214">,</span>&nbsp;<span class="builtintype" id="5431216">uint16</span><span class="op" id="5431222">(</span><span class="ident" id="5431223">g</span><span class="op" id="5431224">)</span><span class="op" id="5431225">,</span>&nbsp;<span class="builtintype" id="5431227">uint16</span><span class="op" id="5431233">(</span><span class="ident" id="5431234">b</span><span class="op" id="5431235">)</span><span class="op" id="5431236">,</span>&nbsp;<span class="num" id="5431238">0xffff</span><span class="op" id="5431244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431250">if</span>&nbsp;<span class="ident" id="5431253">a</span>&nbsp;<span class="op" id="5431255">==</span>&nbsp;<span class="num" id="5431258">0</span>&nbsp;<span class="op" id="5431260">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431264">return</span>&nbsp;<span class="ident" id="5431271">NRGBA64</span><span class="op" id="5431278">{</span><span class="num" id="5431279">0</span><span class="op" id="5431280">,</span>&nbsp;<span class="num" id="5431282">0</span><span class="op" id="5431283">,</span>&nbsp;<span class="num" id="5431285">0</span><span class="op" id="5431286">,</span>&nbsp;<span class="num" id="5431288">0</span><span class="op" id="5431289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5431295">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431396">r</span>&nbsp;<span class="op" id="5431398">=</span>&nbsp;<span class="op" id="5431400">(</span><span class="ident" id="5431401">r</span>&nbsp;<span class="op" id="5431403">*</span>&nbsp;<span class="num" id="5431405">0xffff</span><span class="op" id="5431411">)</span>&nbsp;<span class="op" id="5431413">/</span>&nbsp;<span class="ident" id="5431415">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431418">g</span>&nbsp;<span class="op" id="5431420">=</span>&nbsp;<span class="op" id="5431422">(</span><span class="ident" id="5431423">g</span>&nbsp;<span class="op" id="5431425">*</span>&nbsp;<span class="num" id="5431427">0xffff</span><span class="op" id="5431433">)</span>&nbsp;<span class="op" id="5431435">/</span>&nbsp;<span class="ident" id="5431437">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431440">b</span>&nbsp;<span class="op" id="5431442">=</span>&nbsp;<span class="op" id="5431444">(</span><span class="ident" id="5431445">b</span>&nbsp;<span class="op" id="5431447">*</span>&nbsp;<span class="num" id="5431449">0xffff</span><span class="op" id="5431455">)</span>&nbsp;<span class="op" id="5431457">/</span>&nbsp;<span class="ident" id="5431459">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431462">return</span>&nbsp;<span class="ident" id="5431469">NRGBA64</span><span class="op" id="5431476">{</span><span class="builtintype" id="5431477">uint16</span><span class="op" id="5431483">(</span><span class="ident" id="5431484">r</span><span class="op" id="5431485">)</span><span class="op" id="5431486">,</span>&nbsp;<span class="builtintype" id="5431488">uint16</span><span class="op" id="5431494">(</span><span class="ident" id="5431495">g</span><span class="op" id="5431496">)</span><span class="op" id="5431497">,</span>&nbsp;<span class="builtintype" id="5431499">uint16</span><span class="op" id="5431505">(</span><span class="ident" id="5431506">b</span><span class="op" id="5431507">)</span><span class="op" id="5431508">,</span>&nbsp;<span class="builtintype" id="5431510">uint16</span><span class="op" id="5431516">(</span><span class="ident" id="5431517">a</span><span class="op" id="5431518">)</span><span class="op" id="5431519">}</span><br>
<span class="lineno"></span><span class="op" id="5431521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5431524">func</span>&nbsp;<span class="ident" id="5431529">alphaModel</span><span class="op" id="5431539">(</span><span class="ident" id="5431540">c</span>&nbsp;<span class="ident" id="5431542">Color</span><span class="op" id="5431547">)</span>&nbsp;<span class="ident" id="5431549">Color</span>&nbsp;<span class="op" id="5431555">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431558">if</span>&nbsp;<span class="ident" id="5431561">_</span><span class="op" id="5431562">,</span>&nbsp;<span class="ident" id="5431564">ok</span>&nbsp;<span class="op" id="5431567">:=</span>&nbsp;<span class="ident" id="5431570">c</span><span class="op" id="5431571">.</span><span class="op" id="5431572">(</span><span class="ident" id="5431573">Alpha</span><span class="op" id="5431578">)</span><span class="op" id="5431579">;</span>&nbsp;<span class="ident" id="5431581">ok</span>&nbsp;<span class="op" id="5431584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431588">return</span>&nbsp;<span class="ident" id="5431595">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431601">_</span><span class="op" id="5431602">,</span>&nbsp;<span class="ident" id="5431604">_</span><span class="op" id="5431605">,</span>&nbsp;<span class="ident" id="5431607">_</span><span class="op" id="5431608">,</span>&nbsp;<span class="ident" id="5431610">a</span>&nbsp;<span class="op" id="5431612">:=</span>&nbsp;<span class="ident" id="5431615">c</span><span class="op" id="5431616">.</span><span class="ident" id="5431617">RGBA</span><span class="op" id="5431621">(</span><span class="op" id="5431622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431625">return</span>&nbsp;<span class="ident" id="5431632">Alpha</span><span class="op" id="5431637">{</span><span class="builtintype" id="5431638">uint8</span><span class="op" id="5431643">(</span><span class="ident" id="5431644">a</span>&nbsp;<span class="op" id="5431646">&gt;&gt;</span>&nbsp;<span class="num" id="5431649">8</span><span class="op" id="5431650">)</span><span class="op" id="5431651">}</span><br>
<span class="lineno">225</span><span class="op" id="5431653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5431656">func</span>&nbsp;<span class="ident" id="5431661">alpha16Model</span><span class="op" id="5431673">(</span><span class="ident" id="5431674">c</span>&nbsp;<span class="ident" id="5431676">Color</span><span class="op" id="5431681">)</span>&nbsp;<span class="ident" id="5431683">Color</span>&nbsp;<span class="op" id="5431689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431692">if</span>&nbsp;<span class="ident" id="5431695">_</span><span class="op" id="5431696">,</span>&nbsp;<span class="ident" id="5431698">ok</span>&nbsp;<span class="op" id="5431701">:=</span>&nbsp;<span class="ident" id="5431704">c</span><span class="op" id="5431705">.</span><span class="op" id="5431706">(</span><span class="ident" id="5431707">Alpha16</span><span class="op" id="5431714">)</span><span class="op" id="5431715">;</span>&nbsp;<span class="ident" id="5431717">ok</span>&nbsp;<span class="op" id="5431720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431724">return</span>&nbsp;<span class="ident" id="5431731">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431737">_</span><span class="op" id="5431738">,</span>&nbsp;<span class="ident" id="5431740">_</span><span class="op" id="5431741">,</span>&nbsp;<span class="ident" id="5431743">_</span><span class="op" id="5431744">,</span>&nbsp;<span class="ident" id="5431746">a</span>&nbsp;<span class="op" id="5431748">:=</span>&nbsp;<span class="ident" id="5431751">c</span><span class="op" id="5431752">.</span><span class="ident" id="5431753">RGBA</span><span class="op" id="5431757">(</span><span class="op" id="5431758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431761">return</span>&nbsp;<span class="ident" id="5431768">Alpha16</span><span class="op" id="5431775">{</span><span class="builtintype" id="5431776">uint16</span><span class="op" id="5431782">(</span><span class="ident" id="5431783">a</span><span class="op" id="5431784">)</span><span class="op" id="5431785">}</span><br>
<span class="lineno"></span><span class="op" id="5431787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5431790">func</span>&nbsp;<span class="ident" id="5431795">grayModel</span><span class="op" id="5431804">(</span><span class="ident" id="5431805">c</span>&nbsp;<span class="ident" id="5431807">Color</span><span class="op" id="5431812">)</span>&nbsp;<span class="ident" id="5431814">Color</span>&nbsp;<span class="op" id="5431820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431823">if</span>&nbsp;<span class="ident" id="5431826">_</span><span class="op" id="5431827">,</span>&nbsp;<span class="ident" id="5431829">ok</span>&nbsp;<span class="op" id="5431832">:=</span>&nbsp;<span class="ident" id="5431835">c</span><span class="op" id="5431836">.</span><span class="op" id="5431837">(</span><span class="ident" id="5431838">Gray</span><span class="op" id="5431842">)</span><span class="op" id="5431843">;</span>&nbsp;<span class="ident" id="5431845">ok</span>&nbsp;<span class="op" id="5431848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431852">return</span>&nbsp;<span class="ident" id="5431859">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431865">r</span><span class="op" id="5431866">,</span>&nbsp;<span class="ident" id="5431868">g</span><span class="op" id="5431869">,</span>&nbsp;<span class="ident" id="5431871">b</span><span class="op" id="5431872">,</span>&nbsp;<span class="ident" id="5431874">_</span>&nbsp;<span class="op" id="5431876">:=</span>&nbsp;<span class="ident" id="5431879">c</span><span class="op" id="5431880">.</span><span class="ident" id="5431881">RGBA</span><span class="op" id="5431885">(</span><span class="op" id="5431886">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431889">y</span>&nbsp;<span class="op" id="5431891">:=</span>&nbsp;<span class="op" id="5431894">(</span><span class="num" id="5431895">299</span><span class="op" id="5431898">*</span><span class="ident" id="5431899">r</span>&nbsp;<span class="op" id="5431901">+</span>&nbsp;<span class="num" id="5431903">587</span><span class="op" id="5431906">*</span><span class="ident" id="5431907">g</span>&nbsp;<span class="op" id="5431909">+</span>&nbsp;<span class="num" id="5431911">114</span><span class="op" id="5431914">*</span><span class="ident" id="5431915">b</span>&nbsp;<span class="op" id="5431917">+</span>&nbsp;<span class="num" id="5431919">500</span><span class="op" id="5431922">)</span>&nbsp;<span class="op" id="5431924">/</span>&nbsp;<span class="num" id="5431926">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431932">return</span>&nbsp;<span class="ident" id="5431939">Gray</span><span class="op" id="5431943">{</span><span class="builtintype" id="5431944">uint8</span><span class="op" id="5431949">(</span><span class="ident" id="5431950">y</span>&nbsp;<span class="op" id="5431952">&gt;&gt;</span>&nbsp;<span class="num" id="5431955">8</span><span class="op" id="5431956">)</span><span class="op" id="5431957">}</span><br>
<span class="lineno"></span><span class="op" id="5431959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5431962">func</span>&nbsp;<span class="ident" id="5431967">gray16Model</span><span class="op" id="5431978">(</span><span class="ident" id="5431979">c</span>&nbsp;<span class="ident" id="5431981">Color</span><span class="op" id="5431986">)</span>&nbsp;<span class="ident" id="5431988">Color</span>&nbsp;<span class="op" id="5431994">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431997">if</span>&nbsp;<span class="ident" id="5432000">_</span><span class="op" id="5432001">,</span>&nbsp;<span class="ident" id="5432003">ok</span>&nbsp;<span class="op" id="5432006">:=</span>&nbsp;<span class="ident" id="5432009">c</span><span class="op" id="5432010">.</span><span class="op" id="5432011">(</span><span class="ident" id="5432012">Gray16</span><span class="op" id="5432018">)</span><span class="op" id="5432019">;</span>&nbsp;<span class="ident" id="5432021">ok</span>&nbsp;<span class="op" id="5432024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432028">return</span>&nbsp;<span class="ident" id="5432035">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432041">r</span><span class="op" id="5432042">,</span>&nbsp;<span class="ident" id="5432044">g</span><span class="op" id="5432045">,</span>&nbsp;<span class="ident" id="5432047">b</span><span class="op" id="5432048">,</span>&nbsp;<span class="ident" id="5432050">_</span>&nbsp;<span class="op" id="5432052">:=</span>&nbsp;<span class="ident" id="5432055">c</span><span class="op" id="5432056">.</span><span class="ident" id="5432057">RGBA</span><span class="op" id="5432061">(</span><span class="op" id="5432062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432065">y</span>&nbsp;<span class="op" id="5432067">:=</span>&nbsp;<span class="op" id="5432070">(</span><span class="num" id="5432071">299</span><span class="op" id="5432074">*</span><span class="ident" id="5432075">r</span>&nbsp;<span class="op" id="5432077">+</span>&nbsp;<span class="num" id="5432079">587</span><span class="op" id="5432082">*</span><span class="ident" id="5432083">g</span>&nbsp;<span class="op" id="5432085">+</span>&nbsp;<span class="num" id="5432087">114</span><span class="op" id="5432090">*</span><span class="ident" id="5432091">b</span>&nbsp;<span class="op" id="5432093">+</span>&nbsp;<span class="num" id="5432095">500</span><span class="op" id="5432098">)</span>&nbsp;<span class="op" id="5432100">/</span>&nbsp;<span class="num" id="5432102">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432108">return</span>&nbsp;<span class="ident" id="5432115">Gray16</span><span class="op" id="5432121">{</span><span class="builtintype" id="5432122">uint16</span><span class="op" id="5432128">(</span><span class="ident" id="5432129">y</span><span class="op" id="5432130">)</span><span class="op" id="5432131">}</span><br>
<span class="lineno"></span><span class="op" id="5432133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5432136">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5432171">type</span>&nbsp;<span class="ident" id="5432176">Palette</span>&nbsp;<span class="op" id="5432184">[</span><span class="op" id="5432185">]</span><span class="ident" id="5432186">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="5432193">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5432269">func</span>&nbsp;<span class="op" id="5432274">(</span><span class="ident" id="5432275">p</span>&nbsp;<span class="ident" id="5432277">Palette</span><span class="op" id="5432284">)</span>&nbsp;<span class="ident" id="5432286">Convert</span><span class="op" id="5432293">(</span><span class="ident" id="5432294">c</span>&nbsp;<span class="ident" id="5432296">Color</span><span class="op" id="5432301">)</span>&nbsp;<span class="ident" id="5432303">Color</span>&nbsp;<span class="op" id="5432309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432312">if</span>&nbsp;<span class="builtinfunc" id="5432315">len</span><span class="op" id="5432318">(</span><span class="ident" id="5432319">p</span><span class="op" id="5432320">)</span>&nbsp;<span class="op" id="5432322">==</span>&nbsp;<span class="num" id="5432325">0</span>&nbsp;<span class="op" id="5432327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432331">return</span>&nbsp;<span class="ident" id="5432338">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432346">return</span>&nbsp;<span class="ident" id="5432353">p</span><span class="op" id="5432354">[</span><span class="ident" id="5432355">p</span><span class="op" id="5432356">.</span><span class="ident" id="5432357">Index</span><span class="op" id="5432362">(</span><span class="ident" id="5432363">c</span><span class="op" id="5432364">)</span><span class="op" id="5432365">]</span><br>
<span class="lineno"></span><span class="op" id="5432367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5432370">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="5432444">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5432460">func</span>&nbsp;<span class="op" id="5432465">(</span><span class="ident" id="5432466">p</span>&nbsp;<span class="ident" id="5432468">Palette</span><span class="op" id="5432475">)</span>&nbsp;<span class="ident" id="5432477">Index</span><span class="op" id="5432482">(</span><span class="ident" id="5432483">c</span>&nbsp;<span class="ident" id="5432485">Color</span><span class="op" id="5432490">)</span>&nbsp;<span class="builtintype" id="5432492">int</span>&nbsp;<span class="op" id="5432496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5432499">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432566">cr</span><span class="op" id="5432568">,</span>&nbsp;<span class="ident" id="5432570">cg</span><span class="op" id="5432572">,</span>&nbsp;<span class="ident" id="5432574">cb</span><span class="op" id="5432576">,</span>&nbsp;<span class="ident" id="5432578">_</span>&nbsp;<span class="op" id="5432580">:=</span>&nbsp;<span class="ident" id="5432583">c</span><span class="op" id="5432584">.</span><span class="ident" id="5432585">RGBA</span><span class="op" id="5432589">(</span><span class="op" id="5432590">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432593">ret</span><span class="op" id="5432596">,</span>&nbsp;<span class="ident" id="5432598">bestSSD</span>&nbsp;<span class="op" id="5432606">:=</span>&nbsp;<span class="num" id="5432609">0</span><span class="op" id="5432610">,</span>&nbsp;<span class="builtintype" id="5432612">uint32</span><span class="op" id="5432618">(</span><span class="num" id="5432619">1</span><span class="op" id="5432620">&lt;&lt;</span><span class="num" id="5432622">32</span><span class="op" id="5432624">-</span><span class="num" id="5432625">1</span><span class="op" id="5432626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432629">for</span>&nbsp;<span class="ident" id="5432633">i</span><span class="op" id="5432634">,</span>&nbsp;<span class="ident" id="5432636">v</span>&nbsp;<span class="op" id="5432638">:=</span>&nbsp;<span class="keyword" id="5432641">range</span>&nbsp;<span class="ident" id="5432647">p</span>&nbsp;<span class="op" id="5432649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432653">vr</span><span class="op" id="5432655">,</span>&nbsp;<span class="ident" id="5432657">vg</span><span class="op" id="5432659">,</span>&nbsp;<span class="ident" id="5432661">vb</span><span class="op" id="5432663">,</span>&nbsp;<span class="ident" id="5432665">_</span>&nbsp;<span class="op" id="5432667">:=</span>&nbsp;<span class="ident" id="5432670">v</span><span class="op" id="5432671">.</span><span class="ident" id="5432672">RGBA</span><span class="op" id="5432676">(</span><span class="op" id="5432677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5432681">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5432742">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432771">delta</span>&nbsp;<span class="op" id="5432777">:=</span>&nbsp;<span class="op" id="5432780">(</span><span class="builtintype" id="5432781">int32</span><span class="op" id="5432786">(</span><span class="ident" id="5432787">cr</span><span class="op" id="5432789">)</span>&nbsp;<span class="op" id="5432791">-</span>&nbsp;<span class="builtintype" id="5432793">int32</span><span class="op" id="5432798">(</span><span class="ident" id="5432799">vr</span><span class="op" id="5432801">)</span><span class="op" id="5432802">)</span>&nbsp;<span class="op" id="5432804">&gt;&gt;</span>&nbsp;<span class="num" id="5432807">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432811">ssd</span>&nbsp;<span class="op" id="5432815">:=</span>&nbsp;<span class="builtintype" id="5432818">uint32</span><span class="op" id="5432824">(</span><span class="ident" id="5432825">delta</span>&nbsp;<span class="op" id="5432831">*</span>&nbsp;<span class="ident" id="5432833">delta</span><span class="op" id="5432838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432842">delta</span>&nbsp;<span class="op" id="5432848">=</span>&nbsp;<span class="op" id="5432850">(</span><span class="builtintype" id="5432851">int32</span><span class="op" id="5432856">(</span><span class="ident" id="5432857">cg</span><span class="op" id="5432859">)</span>&nbsp;<span class="op" id="5432861">-</span>&nbsp;<span class="builtintype" id="5432863">int32</span><span class="op" id="5432868">(</span><span class="ident" id="5432869">vg</span><span class="op" id="5432871">)</span><span class="op" id="5432872">)</span>&nbsp;<span class="op" id="5432874">&gt;&gt;</span>&nbsp;<span class="num" id="5432877">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432881">ssd</span>&nbsp;<span class="op" id="5432885">+=</span>&nbsp;<span class="builtintype" id="5432888">uint32</span><span class="op" id="5432894">(</span><span class="ident" id="5432895">delta</span>&nbsp;<span class="op" id="5432901">*</span>&nbsp;<span class="ident" id="5432903">delta</span><span class="op" id="5432908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432912">delta</span>&nbsp;<span class="op" id="5432918">=</span>&nbsp;<span class="op" id="5432920">(</span><span class="builtintype" id="5432921">int32</span><span class="op" id="5432926">(</span><span class="ident" id="5432927">cb</span><span class="op" id="5432929">)</span>&nbsp;<span class="op" id="5432931">-</span>&nbsp;<span class="builtintype" id="5432933">int32</span><span class="op" id="5432938">(</span><span class="ident" id="5432939">vb</span><span class="op" id="5432941">)</span><span class="op" id="5432942">)</span>&nbsp;<span class="op" id="5432944">&gt;&gt;</span>&nbsp;<span class="num" id="5432947">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432951">ssd</span>&nbsp;<span class="op" id="5432955">+=</span>&nbsp;<span class="builtintype" id="5432958">uint32</span><span class="op" id="5432964">(</span><span class="ident" id="5432965">delta</span>&nbsp;<span class="op" id="5432971">*</span>&nbsp;<span class="ident" id="5432973">delta</span><span class="op" id="5432978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432982">if</span>&nbsp;<span class="ident" id="5432985">ssd</span>&nbsp;<span class="op" id="5432989">&lt;</span>&nbsp;<span class="ident" id="5432991">bestSSD</span>&nbsp;<span class="op" id="5432999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433004">if</span>&nbsp;<span class="ident" id="5433007">ssd</span>&nbsp;<span class="op" id="5433011">==</span>&nbsp;<span class="num" id="5433014">0</span>&nbsp;<span class="op" id="5433016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433022">return</span>&nbsp;<span class="ident" id="5433029">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433034">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433039">ret</span><span class="op" id="5433042">,</span>&nbsp;<span class="ident" id="5433044">bestSSD</span>&nbsp;<span class="op" id="5433052">=</span>&nbsp;<span class="ident" id="5433054">i</span><span class="op" id="5433055">,</span>&nbsp;<span class="ident" id="5433057">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433069">return</span>&nbsp;<span class="ident" id="5433076">ret</span><br>
<span class="lineno"></span><span class="op" id="5433080">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5433083">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5433103">var</span>&nbsp;<span class="op" id="5433107">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433110">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5433122">=</span>&nbsp;<span class="ident" id="5433124">Gray16</span><span class="op" id="5433130">{</span><span class="num" id="5433131">0</span><span class="op" id="5433132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433135">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5433147">=</span>&nbsp;<span class="ident" id="5433149">Gray16</span><span class="op" id="5433155">{</span><span class="num" id="5433156">0xffff</span><span class="op" id="5433162">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433165">Transparent</span>&nbsp;<span class="op" id="5433177">=</span>&nbsp;<span class="ident" id="5433179">Alpha16</span><span class="op" id="5433186">{</span><span class="num" id="5433187">0</span><span class="op" id="5433188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433191">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5433203">=</span>&nbsp;<span class="ident" id="5433205">Alpha16</span><span class="op" id="5433212">{</span><span class="num" id="5433213">0xffff</span><span class="op" id="5433219">}</span><br>
<span class="lineno"></span><span class="op" id="5433221">)</span>
</div>
</body>
</html>
