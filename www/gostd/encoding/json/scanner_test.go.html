<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8149923">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8149979">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8150033">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8150084">package</span>&nbsp;<span class="ident" id="8150092">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8150098">import</span>&nbsp;<span class="op" id="8150105">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8150108">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8150117">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8150125">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8150138">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8150149">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8150159">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8150162">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8150192">type</span>&nbsp;<span class="ident" id="8150197">example</span>&nbsp;<span class="keyword" id="8150205">struct</span>&nbsp;<span class="op" id="8150212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150215">compact</span>&nbsp;<span class="builtintype" id="8150223">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150231">indent</span>&nbsp;&nbsp;<span class="builtintype" id="8150239">string</span><br>
<span class="lineno">20</span><span class="op" id="8150246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8150249">var</span>&nbsp;<span class="ident" id="8150253">examples</span>&nbsp;<span class="op" id="8150262">=</span>&nbsp;<span class="op" id="8150264">[</span><span class="op" id="8150265">]</span><span class="ident" id="8150266">example</span><span class="op" id="8150273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150276">{</span><span class="string" id="8150277">`1`</span><span class="op" id="8150280">,</span>&nbsp;<span class="string" id="8150282">`1`</span><span class="op" id="8150285">}</span><span class="op" id="8150286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150289">{</span><span class="string" id="8150290">`{}`</span><span class="op" id="8150294">,</span>&nbsp;<span class="string" id="8150296">`{}`</span><span class="op" id="8150300">}</span><span class="op" id="8150301">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150304">{</span><span class="string" id="8150305">`[]`</span><span class="op" id="8150309">,</span>&nbsp;<span class="string" id="8150311">`[]`</span><span class="op" id="8150315">}</span><span class="op" id="8150316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150319">{</span><span class="string" id="8150320">`{&#34;&#34;:2}`</span><span class="op" id="8150328">,</span>&nbsp;<span class="string" id="8150330">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="8150347">}</span><span class="op" id="8150348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150351">{</span><span class="string" id="8150352">`[3]`</span><span class="op" id="8150357">,</span>&nbsp;<span class="string" id="8150359">&#34;[\n\t3\n]&#34;</span><span class="op" id="8150370">}</span><span class="op" id="8150371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150374">{</span><span class="string" id="8150375">`[1,2,3]`</span><span class="op" id="8150384">,</span>&nbsp;<span class="string" id="8150386">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="8150409">}</span><span class="op" id="8150410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150413">{</span><span class="string" id="8150414">`{&#34;x&#34;:1}`</span><span class="op" id="8150423">,</span>&nbsp;<span class="string" id="8150425">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="8150443">}</span><span class="op" id="8150444">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150447">{</span><span class="ident" id="8150448">ex1</span><span class="op" id="8150451">,</span>&nbsp;<span class="ident" id="8150453">ex1i</span><span class="op" id="8150457">}</span><span class="op" id="8150458">,</span><br>
<span class="lineno"></span><span class="op" id="8150460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8150463">var</span>&nbsp;<span class="ident" id="8150467">ex1</span>&nbsp;<span class="op" id="8150471">=</span>&nbsp;<span class="string" id="8150473">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8150512">var</span>&nbsp;<span class="ident" id="8150516">ex1i</span>&nbsp;<span class="op" id="8150521">=</span>&nbsp;<span class="string" id="8150523">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8150579">func</span>&nbsp;<span class="ident" id="8150584">TestCompact</span><span class="op" id="8150595">(</span><span class="ident" id="8150596">t</span>&nbsp;<span class="op" id="8150598">*</span><span class="ident" id="8150599">testing</span><span class="op" id="8150606">.</span><span class="ident" id="8150607">T</span><span class="op" id="8150608">)</span>&nbsp;<span class="op" id="8150610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150613">var</span>&nbsp;<span class="ident" id="8150617">buf</span>&nbsp;<span class="ident" id="8150621">bytes</span><span class="op" id="8150626">.</span><span class="ident" id="8150627">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150635">for</span>&nbsp;<span class="ident" id="8150639">_</span><span class="op" id="8150640">,</span>&nbsp;<span class="ident" id="8150642">tt</span>&nbsp;<span class="op" id="8150645">:=</span>&nbsp;<span class="keyword" id="8150648">range</span>&nbsp;<span class="ident" id="8150654">examples</span>&nbsp;<span class="op" id="8150663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150667">buf</span><span class="op" id="8150670">.</span><span class="ident" id="8150671">Reset</span><span class="op" id="8150676">(</span><span class="op" id="8150677">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150681">if</span>&nbsp;<span class="ident" id="8150684">err</span>&nbsp;<span class="op" id="8150688">:=</span>&nbsp;<span class="ident" id="8150691">Compact</span><span class="op" id="8150698">(</span><span class="op" id="8150699">&amp;</span><span class="ident" id="8150700">buf</span><span class="op" id="8150703">,</span>&nbsp;<span class="op" id="8150705">[</span><span class="op" id="8150706">]</span><span class="builtintype" id="8150707">byte</span><span class="op" id="8150711">(</span><span class="ident" id="8150712">tt</span><span class="op" id="8150714">.</span><span class="ident" id="8150715">compact</span><span class="op" id="8150722">)</span><span class="op" id="8150723">)</span><span class="op" id="8150724">;</span>&nbsp;<span class="ident" id="8150726">err</span>&nbsp;<span class="op" id="8150730">!=</span>&nbsp;<span class="ident" id="8150733">nil</span>&nbsp;<span class="op" id="8150737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150742">t</span><span class="op" id="8150743">.</span><span class="ident" id="8150744">Errorf</span><span class="op" id="8150750">(</span><span class="string" id="8150751">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8150769">,</span>&nbsp;<span class="ident" id="8150771">tt</span><span class="op" id="8150773">.</span><span class="ident" id="8150774">compact</span><span class="op" id="8150781">,</span>&nbsp;<span class="ident" id="8150783">err</span><span class="op" id="8150786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150790">}</span>&nbsp;<span class="keyword" id="8150792">else</span>&nbsp;<span class="keyword" id="8150797">if</span>&nbsp;<span class="ident" id="8150800">s</span>&nbsp;<span class="op" id="8150802">:=</span>&nbsp;<span class="ident" id="8150805">buf</span><span class="op" id="8150808">.</span><span class="ident" id="8150809">String</span><span class="op" id="8150815">(</span><span class="op" id="8150816">)</span><span class="op" id="8150817">;</span>&nbsp;<span class="ident" id="8150819">s</span>&nbsp;<span class="op" id="8150821">!=</span>&nbsp;<span class="ident" id="8150824">tt</span><span class="op" id="8150826">.</span><span class="ident" id="8150827">compact</span>&nbsp;<span class="op" id="8150835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150840">t</span><span class="op" id="8150841">.</span><span class="ident" id="8150842">Errorf</span><span class="op" id="8150848">(</span><span class="string" id="8150849">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8150884">,</span>&nbsp;<span class="ident" id="8150886">tt</span><span class="op" id="8150888">.</span><span class="ident" id="8150889">compact</span><span class="op" id="8150896">,</span>&nbsp;<span class="ident" id="8150898">s</span><span class="op" id="8150899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150903">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150908">buf</span><span class="op" id="8150911">.</span><span class="ident" id="8150912">Reset</span><span class="op" id="8150917">(</span><span class="op" id="8150918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150922">if</span>&nbsp;<span class="ident" id="8150925">err</span>&nbsp;<span class="op" id="8150929">:=</span>&nbsp;<span class="ident" id="8150932">Compact</span><span class="op" id="8150939">(</span><span class="op" id="8150940">&amp;</span><span class="ident" id="8150941">buf</span><span class="op" id="8150944">,</span>&nbsp;<span class="op" id="8150946">[</span><span class="op" id="8150947">]</span><span class="builtintype" id="8150948">byte</span><span class="op" id="8150952">(</span><span class="ident" id="8150953">tt</span><span class="op" id="8150955">.</span><span class="ident" id="8150956">indent</span><span class="op" id="8150962">)</span><span class="op" id="8150963">)</span><span class="op" id="8150964">;</span>&nbsp;<span class="ident" id="8150966">err</span>&nbsp;<span class="op" id="8150970">!=</span>&nbsp;<span class="ident" id="8150973">nil</span>&nbsp;<span class="op" id="8150977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150982">t</span><span class="op" id="8150983">.</span><span class="ident" id="8150984">Errorf</span><span class="op" id="8150990">(</span><span class="string" id="8150991">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8151009">,</span>&nbsp;<span class="ident" id="8151011">tt</span><span class="op" id="8151013">.</span><span class="ident" id="8151014">indent</span><span class="op" id="8151020">,</span>&nbsp;<span class="ident" id="8151022">err</span><span class="op" id="8151025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151030">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151041">}</span>&nbsp;<span class="keyword" id="8151043">else</span>&nbsp;<span class="keyword" id="8151048">if</span>&nbsp;<span class="ident" id="8151051">s</span>&nbsp;<span class="op" id="8151053">:=</span>&nbsp;<span class="ident" id="8151056">buf</span><span class="op" id="8151059">.</span><span class="ident" id="8151060">String</span><span class="op" id="8151066">(</span><span class="op" id="8151067">)</span><span class="op" id="8151068">;</span>&nbsp;<span class="ident" id="8151070">s</span>&nbsp;<span class="op" id="8151072">!=</span>&nbsp;<span class="ident" id="8151075">tt</span><span class="op" id="8151077">.</span><span class="ident" id="8151078">compact</span>&nbsp;<span class="op" id="8151086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151091">t</span><span class="op" id="8151092">.</span><span class="ident" id="8151093">Errorf</span><span class="op" id="8151099">(</span><span class="string" id="8151100">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8151130">,</span>&nbsp;<span class="ident" id="8151132">tt</span><span class="op" id="8151134">.</span><span class="ident" id="8151135">indent</span><span class="op" id="8151141">,</span>&nbsp;<span class="ident" id="8151143">s</span><span class="op" id="8151144">,</span>&nbsp;<span class="ident" id="8151146">tt</span><span class="op" id="8151148">.</span><span class="ident" id="8151149">compact</span><span class="op" id="8151156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151163">}</span><br>
<span class="lineno"></span><span class="op" id="8151165">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8151168">func</span>&nbsp;<span class="ident" id="8151173">TestCompactSeparators</span><span class="op" id="8151194">(</span><span class="ident" id="8151195">t</span>&nbsp;<span class="op" id="8151197">*</span><span class="ident" id="8151198">testing</span><span class="op" id="8151205">.</span><span class="ident" id="8151206">T</span><span class="op" id="8151207">)</span>&nbsp;<span class="op" id="8151209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8151212">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8151268">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151312">tests</span>&nbsp;<span class="op" id="8151318">:=</span>&nbsp;<span class="op" id="8151321">[</span><span class="op" id="8151322">]</span><span class="keyword" id="8151323">struct</span>&nbsp;<span class="op" id="8151330">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151334">in</span><span class="op" id="8151336">,</span>&nbsp;<span class="ident" id="8151338">compact</span>&nbsp;<span class="builtintype" id="8151346">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151354">}</span><span class="op" id="8151355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151359">{</span><span class="string" id="8151360">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="8151377">,</span>&nbsp;<span class="string" id="8151379">`{&#34;\u2028&#34;:1}`</span><span class="op" id="8151393">}</span><span class="op" id="8151394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151398">{</span><span class="string" id="8151399">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="8151416">,</span>&nbsp;<span class="string" id="8151418">`{&#34;\u2029&#34;:2}`</span><span class="op" id="8151432">}</span><span class="op" id="8151433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151436">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151439">for</span>&nbsp;<span class="ident" id="8151443">_</span><span class="op" id="8151444">,</span>&nbsp;<span class="ident" id="8151446">tt</span>&nbsp;<span class="op" id="8151449">:=</span>&nbsp;<span class="keyword" id="8151452">range</span>&nbsp;<span class="ident" id="8151458">tests</span>&nbsp;<span class="op" id="8151464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151468">var</span>&nbsp;<span class="ident" id="8151472">buf</span>&nbsp;<span class="ident" id="8151476">bytes</span><span class="op" id="8151481">.</span><span class="ident" id="8151482">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151491">if</span>&nbsp;<span class="ident" id="8151494">err</span>&nbsp;<span class="op" id="8151498">:=</span>&nbsp;<span class="ident" id="8151501">Compact</span><span class="op" id="8151508">(</span><span class="op" id="8151509">&amp;</span><span class="ident" id="8151510">buf</span><span class="op" id="8151513">,</span>&nbsp;<span class="op" id="8151515">[</span><span class="op" id="8151516">]</span><span class="builtintype" id="8151517">byte</span><span class="op" id="8151521">(</span><span class="ident" id="8151522">tt</span><span class="op" id="8151524">.</span><span class="ident" id="8151525">in</span><span class="op" id="8151527">)</span><span class="op" id="8151528">)</span><span class="op" id="8151529">;</span>&nbsp;<span class="ident" id="8151531">err</span>&nbsp;<span class="op" id="8151535">!=</span>&nbsp;<span class="ident" id="8151538">nil</span>&nbsp;<span class="op" id="8151542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151547">t</span><span class="op" id="8151548">.</span><span class="ident" id="8151549">Errorf</span><span class="op" id="8151555">(</span><span class="string" id="8151556">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="8151573">,</span>&nbsp;<span class="ident" id="8151575">tt</span><span class="op" id="8151577">.</span><span class="ident" id="8151578">in</span><span class="op" id="8151580">,</span>&nbsp;<span class="ident" id="8151582">err</span><span class="op" id="8151585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151589">}</span>&nbsp;<span class="keyword" id="8151591">else</span>&nbsp;<span class="keyword" id="8151596">if</span>&nbsp;<span class="ident" id="8151599">s</span>&nbsp;<span class="op" id="8151601">:=</span>&nbsp;<span class="ident" id="8151604">buf</span><span class="op" id="8151607">.</span><span class="ident" id="8151608">String</span><span class="op" id="8151614">(</span><span class="op" id="8151615">)</span><span class="op" id="8151616">;</span>&nbsp;<span class="ident" id="8151618">s</span>&nbsp;<span class="op" id="8151620">!=</span>&nbsp;<span class="ident" id="8151623">tt</span><span class="op" id="8151625">.</span><span class="ident" id="8151626">compact</span>&nbsp;<span class="op" id="8151634">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151639">t</span><span class="op" id="8151640">.</span><span class="ident" id="8151641">Errorf</span><span class="op" id="8151647">(</span><span class="string" id="8151648">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8151675">,</span>&nbsp;<span class="ident" id="8151677">tt</span><span class="op" id="8151679">.</span><span class="ident" id="8151680">in</span><span class="op" id="8151682">,</span>&nbsp;<span class="ident" id="8151684">s</span><span class="op" id="8151685">,</span>&nbsp;<span class="ident" id="8151687">tt</span><span class="op" id="8151689">.</span><span class="ident" id="8151690">compact</span><span class="op" id="8151697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151704">}</span><br>
<span class="lineno"></span><span class="op" id="8151706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="8151709">func</span>&nbsp;<span class="ident" id="8151714">TestIndent</span><span class="op" id="8151724">(</span><span class="ident" id="8151725">t</span>&nbsp;<span class="op" id="8151727">*</span><span class="ident" id="8151728">testing</span><span class="op" id="8151735">.</span><span class="ident" id="8151736">T</span><span class="op" id="8151737">)</span>&nbsp;<span class="op" id="8151739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151742">var</span>&nbsp;<span class="ident" id="8151746">buf</span>&nbsp;<span class="ident" id="8151750">bytes</span><span class="op" id="8151755">.</span><span class="ident" id="8151756">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151764">for</span>&nbsp;<span class="ident" id="8151768">_</span><span class="op" id="8151769">,</span>&nbsp;<span class="ident" id="8151771">tt</span>&nbsp;<span class="op" id="8151774">:=</span>&nbsp;<span class="keyword" id="8151777">range</span>&nbsp;<span class="ident" id="8151783">examples</span>&nbsp;<span class="op" id="8151792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151796">buf</span><span class="op" id="8151799">.</span><span class="ident" id="8151800">Reset</span><span class="op" id="8151805">(</span><span class="op" id="8151806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151810">if</span>&nbsp;<span class="ident" id="8151813">err</span>&nbsp;<span class="op" id="8151817">:=</span>&nbsp;<span class="ident" id="8151820">Indent</span><span class="op" id="8151826">(</span><span class="op" id="8151827">&amp;</span><span class="ident" id="8151828">buf</span><span class="op" id="8151831">,</span>&nbsp;<span class="op" id="8151833">[</span><span class="op" id="8151834">]</span><span class="builtintype" id="8151835">byte</span><span class="op" id="8151839">(</span><span class="ident" id="8151840">tt</span><span class="op" id="8151842">.</span><span class="ident" id="8151843">indent</span><span class="op" id="8151849">)</span><span class="op" id="8151850">,</span>&nbsp;<span class="string" id="8151852">&#34;&#34;</span><span class="op" id="8151854">,</span>&nbsp;<span class="string" id="8151856">&#34;\t&#34;</span><span class="op" id="8151860">)</span><span class="op" id="8151861">;</span>&nbsp;<span class="ident" id="8151863">err</span>&nbsp;<span class="op" id="8151867">!=</span>&nbsp;<span class="ident" id="8151870">nil</span>&nbsp;<span class="op" id="8151874">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151879">t</span><span class="op" id="8151880">.</span><span class="ident" id="8151881">Errorf</span><span class="op" id="8151887">(</span><span class="string" id="8151888">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8151905">,</span>&nbsp;<span class="ident" id="8151907">tt</span><span class="op" id="8151909">.</span><span class="ident" id="8151910">indent</span><span class="op" id="8151916">,</span>&nbsp;<span class="ident" id="8151918">err</span><span class="op" id="8151921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151925">}</span>&nbsp;<span class="keyword" id="8151927">else</span>&nbsp;<span class="keyword" id="8151932">if</span>&nbsp;<span class="ident" id="8151935">s</span>&nbsp;<span class="op" id="8151937">:=</span>&nbsp;<span class="ident" id="8151940">buf</span><span class="op" id="8151943">.</span><span class="ident" id="8151944">String</span><span class="op" id="8151950">(</span><span class="op" id="8151951">)</span><span class="op" id="8151952">;</span>&nbsp;<span class="ident" id="8151954">s</span>&nbsp;<span class="op" id="8151956">!=</span>&nbsp;<span class="ident" id="8151959">tt</span><span class="op" id="8151961">.</span><span class="ident" id="8151962">indent</span>&nbsp;<span class="op" id="8151969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151974">t</span><span class="op" id="8151975">.</span><span class="ident" id="8151976">Errorf</span><span class="op" id="8151982">(</span><span class="string" id="8151983">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8152017">,</span>&nbsp;<span class="ident" id="8152019">tt</span><span class="op" id="8152021">.</span><span class="ident" id="8152022">indent</span><span class="op" id="8152028">,</span>&nbsp;<span class="ident" id="8152030">s</span><span class="op" id="8152031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152040">buf</span><span class="op" id="8152043">.</span><span class="ident" id="8152044">Reset</span><span class="op" id="8152049">(</span><span class="op" id="8152050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152054">if</span>&nbsp;<span class="ident" id="8152057">err</span>&nbsp;<span class="op" id="8152061">:=</span>&nbsp;<span class="ident" id="8152064">Indent</span><span class="op" id="8152070">(</span><span class="op" id="8152071">&amp;</span><span class="ident" id="8152072">buf</span><span class="op" id="8152075">,</span>&nbsp;<span class="op" id="8152077">[</span><span class="op" id="8152078">]</span><span class="builtintype" id="8152079">byte</span><span class="op" id="8152083">(</span><span class="ident" id="8152084">tt</span><span class="op" id="8152086">.</span><span class="ident" id="8152087">compact</span><span class="op" id="8152094">)</span><span class="op" id="8152095">,</span>&nbsp;<span class="string" id="8152097">&#34;&#34;</span><span class="op" id="8152099">,</span>&nbsp;<span class="string" id="8152101">&#34;\t&#34;</span><span class="op" id="8152105">)</span><span class="op" id="8152106">;</span>&nbsp;<span class="ident" id="8152108">err</span>&nbsp;<span class="op" id="8152112">!=</span>&nbsp;<span class="ident" id="8152115">nil</span>&nbsp;<span class="op" id="8152119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152124">t</span><span class="op" id="8152125">.</span><span class="ident" id="8152126">Errorf</span><span class="op" id="8152132">(</span><span class="string" id="8152133">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8152150">,</span>&nbsp;<span class="ident" id="8152152">tt</span><span class="op" id="8152154">.</span><span class="ident" id="8152155">compact</span><span class="op" id="8152162">,</span>&nbsp;<span class="ident" id="8152164">err</span><span class="op" id="8152167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152172">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152183">}</span>&nbsp;<span class="keyword" id="8152185">else</span>&nbsp;<span class="keyword" id="8152190">if</span>&nbsp;<span class="ident" id="8152193">s</span>&nbsp;<span class="op" id="8152195">:=</span>&nbsp;<span class="ident" id="8152198">buf</span><span class="op" id="8152201">.</span><span class="ident" id="8152202">String</span><span class="op" id="8152208">(</span><span class="op" id="8152209">)</span><span class="op" id="8152210">;</span>&nbsp;<span class="ident" id="8152212">s</span>&nbsp;<span class="op" id="8152214">!=</span>&nbsp;<span class="ident" id="8152217">tt</span><span class="op" id="8152219">.</span><span class="ident" id="8152220">indent</span>&nbsp;<span class="op" id="8152227">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152232">t</span><span class="op" id="8152233">.</span><span class="ident" id="8152234">Errorf</span><span class="op" id="8152240">(</span><span class="string" id="8152241">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8152270">,</span>&nbsp;<span class="ident" id="8152272">tt</span><span class="op" id="8152274">.</span><span class="ident" id="8152275">compact</span><span class="op" id="8152282">,</span>&nbsp;<span class="ident" id="8152284">s</span><span class="op" id="8152285">,</span>&nbsp;<span class="ident" id="8152287">tt</span><span class="op" id="8152289">.</span><span class="ident" id="8152290">indent</span><span class="op" id="8152296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152303">}</span><br>
<span class="lineno"></span><span class="op" id="8152305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="8152308">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8152347">func</span>&nbsp;<span class="ident" id="8152352">TestCompactBig</span><span class="op" id="8152366">(</span><span class="ident" id="8152367">t</span>&nbsp;<span class="op" id="8152369">*</span><span class="ident" id="8152370">testing</span><span class="op" id="8152377">.</span><span class="ident" id="8152378">T</span><span class="op" id="8152379">)</span>&nbsp;<span class="op" id="8152381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152384">initBig</span><span class="op" id="8152391">(</span><span class="op" id="8152392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152395">var</span>&nbsp;<span class="ident" id="8152399">buf</span>&nbsp;<span class="ident" id="8152403">bytes</span><span class="op" id="8152408">.</span><span class="ident" id="8152409">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152417">if</span>&nbsp;<span class="ident" id="8152420">err</span>&nbsp;<span class="op" id="8152424">:=</span>&nbsp;<span class="ident" id="8152427">Compact</span><span class="op" id="8152434">(</span><span class="op" id="8152435">&amp;</span><span class="ident" id="8152436">buf</span><span class="op" id="8152439">,</span>&nbsp;<span class="ident" id="8152441">jsonBig</span><span class="op" id="8152448">)</span><span class="op" id="8152449">;</span>&nbsp;<span class="ident" id="8152451">err</span>&nbsp;<span class="op" id="8152455">!=</span>&nbsp;<span class="ident" id="8152458">nil</span>&nbsp;<span class="op" id="8152462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152466">t</span><span class="op" id="8152467">.</span><span class="ident" id="8152468">Fatalf</span><span class="op" id="8152474">(</span><span class="string" id="8152475">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8152488">,</span>&nbsp;<span class="ident" id="8152490">err</span><span class="op" id="8152493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152499">b</span>&nbsp;<span class="op" id="8152501">:=</span>&nbsp;<span class="ident" id="8152504">buf</span><span class="op" id="8152507">.</span><span class="ident" id="8152508">Bytes</span><span class="op" id="8152513">(</span><span class="op" id="8152514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152517">if</span>&nbsp;<span class="op" id="8152520">!</span><span class="ident" id="8152521">bytes</span><span class="op" id="8152526">.</span><span class="ident" id="8152527">Equal</span><span class="op" id="8152532">(</span><span class="ident" id="8152533">b</span><span class="op" id="8152534">,</span>&nbsp;<span class="ident" id="8152536">jsonBig</span><span class="op" id="8152543">)</span>&nbsp;<span class="op" id="8152545">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152549">t</span><span class="op" id="8152550">.</span><span class="ident" id="8152551">Error</span><span class="op" id="8152556">(</span><span class="string" id="8152557">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8152586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152590">diff</span><span class="op" id="8152594">(</span><span class="ident" id="8152595">t</span><span class="op" id="8152596">,</span>&nbsp;<span class="ident" id="8152598">b</span><span class="op" id="8152599">,</span>&nbsp;<span class="ident" id="8152601">jsonBig</span><span class="op" id="8152608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152612">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152620">}</span><br>
<span class="lineno"></span><span class="op" id="8152622">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="8152625">func</span>&nbsp;<span class="ident" id="8152630">TestIndentBig</span><span class="op" id="8152643">(</span><span class="ident" id="8152644">t</span>&nbsp;<span class="op" id="8152646">*</span><span class="ident" id="8152647">testing</span><span class="op" id="8152654">.</span><span class="ident" id="8152655">T</span><span class="op" id="8152656">)</span>&nbsp;<span class="op" id="8152658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152661">initBig</span><span class="op" id="8152668">(</span><span class="op" id="8152669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152672">var</span>&nbsp;<span class="ident" id="8152676">buf</span>&nbsp;<span class="ident" id="8152680">bytes</span><span class="op" id="8152685">.</span><span class="ident" id="8152686">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152694">if</span>&nbsp;<span class="ident" id="8152697">err</span>&nbsp;<span class="op" id="8152701">:=</span>&nbsp;<span class="ident" id="8152704">Indent</span><span class="op" id="8152710">(</span><span class="op" id="8152711">&amp;</span><span class="ident" id="8152712">buf</span><span class="op" id="8152715">,</span>&nbsp;<span class="ident" id="8152717">jsonBig</span><span class="op" id="8152724">,</span>&nbsp;<span class="string" id="8152726">&#34;&#34;</span><span class="op" id="8152728">,</span>&nbsp;<span class="string" id="8152730">&#34;\t&#34;</span><span class="op" id="8152734">)</span><span class="op" id="8152735">;</span>&nbsp;<span class="ident" id="8152737">err</span>&nbsp;<span class="op" id="8152741">!=</span>&nbsp;<span class="ident" id="8152744">nil</span>&nbsp;<span class="op" id="8152748">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152752">t</span><span class="op" id="8152753">.</span><span class="ident" id="8152754">Fatalf</span><span class="op" id="8152760">(</span><span class="string" id="8152761">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="8152774">,</span>&nbsp;<span class="ident" id="8152776">err</span><span class="op" id="8152779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152785">b</span>&nbsp;<span class="op" id="8152787">:=</span>&nbsp;<span class="ident" id="8152790">buf</span><span class="op" id="8152793">.</span><span class="ident" id="8152794">Bytes</span><span class="op" id="8152799">(</span><span class="op" id="8152800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152803">if</span>&nbsp;<span class="builtinfunc" id="8152806">len</span><span class="op" id="8152809">(</span><span class="ident" id="8152810">b</span><span class="op" id="8152811">)</span>&nbsp;<span class="op" id="8152813">==</span>&nbsp;<span class="builtinfunc" id="8152816">len</span><span class="op" id="8152819">(</span><span class="ident" id="8152820">jsonBig</span><span class="op" id="8152827">)</span>&nbsp;<span class="op" id="8152829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8152833">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8152882">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152919">t</span><span class="op" id="8152920">.</span><span class="ident" id="8152921">Fatalf</span><span class="op" id="8152927">(</span><span class="string" id="8152928">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="8152964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8152971">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152996">var</span>&nbsp;<span class="ident" id="8153000">buf1</span>&nbsp;<span class="ident" id="8153005">bytes</span><span class="op" id="8153010">.</span><span class="ident" id="8153011">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153019">if</span>&nbsp;<span class="ident" id="8153022">err</span>&nbsp;<span class="op" id="8153026">:=</span>&nbsp;<span class="ident" id="8153029">Indent</span><span class="op" id="8153035">(</span><span class="op" id="8153036">&amp;</span><span class="ident" id="8153037">buf1</span><span class="op" id="8153041">,</span>&nbsp;<span class="ident" id="8153043">b</span><span class="op" id="8153044">,</span>&nbsp;<span class="string" id="8153046">&#34;&#34;</span><span class="op" id="8153048">,</span>&nbsp;<span class="string" id="8153050">&#34;\t&#34;</span><span class="op" id="8153054">)</span><span class="op" id="8153055">;</span>&nbsp;<span class="ident" id="8153057">err</span>&nbsp;<span class="op" id="8153061">!=</span>&nbsp;<span class="ident" id="8153064">nil</span>&nbsp;<span class="op" id="8153068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153072">t</span><span class="op" id="8153073">.</span><span class="ident" id="8153074">Fatalf</span><span class="op" id="8153080">(</span><span class="string" id="8153081">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="8153094">,</span>&nbsp;<span class="ident" id="8153096">err</span><span class="op" id="8153099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153105">b1</span>&nbsp;<span class="op" id="8153108">:=</span>&nbsp;<span class="ident" id="8153111">buf1</span><span class="op" id="8153115">.</span><span class="ident" id="8153116">Bytes</span><span class="op" id="8153121">(</span><span class="op" id="8153122">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153125">if</span>&nbsp;<span class="op" id="8153128">!</span><span class="ident" id="8153129">bytes</span><span class="op" id="8153134">.</span><span class="ident" id="8153135">Equal</span><span class="op" id="8153140">(</span><span class="ident" id="8153141">b1</span><span class="op" id="8153143">,</span>&nbsp;<span class="ident" id="8153145">b</span><span class="op" id="8153146">)</span>&nbsp;<span class="op" id="8153148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153152">t</span><span class="op" id="8153153">.</span><span class="ident" id="8153154">Error</span><span class="op" id="8153159">(</span><span class="string" id="8153160">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="8153204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153208">diff</span><span class="op" id="8153212">(</span><span class="ident" id="8153213">t</span><span class="op" id="8153214">,</span>&nbsp;<span class="ident" id="8153216">b1</span><span class="op" id="8153218">,</span>&nbsp;<span class="ident" id="8153220">b</span><span class="op" id="8153221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153225">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153233">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8153237">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153269">buf1</span><span class="op" id="8153273">.</span><span class="ident" id="8153274">Reset</span><span class="op" id="8153279">(</span><span class="op" id="8153280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153283">if</span>&nbsp;<span class="ident" id="8153286">err</span>&nbsp;<span class="op" id="8153290">:=</span>&nbsp;<span class="ident" id="8153293">Compact</span><span class="op" id="8153300">(</span><span class="op" id="8153301">&amp;</span><span class="ident" id="8153302">buf1</span><span class="op" id="8153306">,</span>&nbsp;<span class="ident" id="8153308">b</span><span class="op" id="8153309">)</span><span class="op" id="8153310">;</span>&nbsp;<span class="ident" id="8153312">err</span>&nbsp;<span class="op" id="8153316">!=</span>&nbsp;<span class="ident" id="8153319">nil</span>&nbsp;<span class="op" id="8153323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153327">t</span><span class="op" id="8153328">.</span><span class="ident" id="8153329">Fatalf</span><span class="op" id="8153335">(</span><span class="string" id="8153336">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8153349">,</span>&nbsp;<span class="ident" id="8153351">err</span><span class="op" id="8153354">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153360">b1</span>&nbsp;<span class="op" id="8153363">=</span>&nbsp;<span class="ident" id="8153365">buf1</span><span class="op" id="8153369">.</span><span class="ident" id="8153370">Bytes</span><span class="op" id="8153375">(</span><span class="op" id="8153376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153379">if</span>&nbsp;<span class="op" id="8153382">!</span><span class="ident" id="8153383">bytes</span><span class="op" id="8153388">.</span><span class="ident" id="8153389">Equal</span><span class="op" id="8153394">(</span><span class="ident" id="8153395">b1</span><span class="op" id="8153397">,</span>&nbsp;<span class="ident" id="8153399">jsonBig</span><span class="op" id="8153406">)</span>&nbsp;<span class="op" id="8153408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153412">t</span><span class="op" id="8153413">.</span><span class="ident" id="8153414">Error</span><span class="op" id="8153419">(</span><span class="string" id="8153420">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8153457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153461">diff</span><span class="op" id="8153465">(</span><span class="ident" id="8153466">t</span><span class="op" id="8153467">,</span>&nbsp;<span class="ident" id="8153469">b1</span><span class="op" id="8153471">,</span>&nbsp;<span class="ident" id="8153473">jsonBig</span><span class="op" id="8153480">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153484">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153492">}</span><br>
<span class="lineno"></span><span class="op" id="8153494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8153497">type</span>&nbsp;<span class="ident" id="8153502">indentErrorTest</span>&nbsp;<span class="keyword" id="8153518">struct</span>&nbsp;<span class="op" id="8153525">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153528">in</span>&nbsp;&nbsp;<span class="builtintype" id="8153532">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153540">err</span>&nbsp;<span class="builtintype" id="8153544">error</span><br>
<span class="lineno"></span><span class="op" id="8153550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8153553">var</span>&nbsp;<span class="ident" id="8153557">indentErrorTests</span>&nbsp;<span class="op" id="8153574">=</span>&nbsp;<span class="op" id="8153576">[</span><span class="op" id="8153577">]</span><span class="ident" id="8153578">indentErrorTest</span><span class="op" id="8153593">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153596">{</span><span class="string" id="8153597">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="8153616">,</span>&nbsp;<span class="op" id="8153618">&amp;</span><span class="ident" id="8153619">SyntaxError</span><span class="op" id="8153630">{</span><span class="string" id="8153631">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="8153671">,</span>&nbsp;<span class="num" id="8153673">17</span><span class="op" id="8153675">}</span><span class="op" id="8153676">}</span><span class="op" id="8153677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153680">{</span><span class="string" id="8153681">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="8153706">,</span>&nbsp;<span class="op" id="8153708">&amp;</span><span class="ident" id="8153709">SyntaxError</span><span class="op" id="8153720">{</span><span class="string" id="8153721">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="8153773">,</span>&nbsp;<span class="num" id="8153775">13</span><span class="op" id="8153777">}</span><span class="op" id="8153778">}</span><span class="op" id="8153779">,</span><br>
<span class="lineno"></span><span class="op" id="8153781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8153784">func</span>&nbsp;<span class="ident" id="8153789">TestIndentErrors</span><span class="op" id="8153805">(</span><span class="ident" id="8153806">t</span>&nbsp;<span class="op" id="8153808">*</span><span class="ident" id="8153809">testing</span><span class="op" id="8153816">.</span><span class="ident" id="8153817">T</span><span class="op" id="8153818">)</span>&nbsp;<span class="op" id="8153820">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153823">for</span>&nbsp;<span class="ident" id="8153827">i</span><span class="op" id="8153828">,</span>&nbsp;<span class="ident" id="8153830">tt</span>&nbsp;<span class="op" id="8153833">:=</span>&nbsp;<span class="keyword" id="8153836">range</span>&nbsp;<span class="ident" id="8153842">indentErrorTests</span>&nbsp;<span class="op" id="8153859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153863">slice</span>&nbsp;<span class="op" id="8153869">:=</span>&nbsp;<span class="builtinfunc" id="8153872">make</span><span class="op" id="8153876">(</span><span class="op" id="8153877">[</span><span class="op" id="8153878">]</span><span class="builtintype" id="8153879">uint8</span><span class="op" id="8153884">,</span>&nbsp;<span class="num" id="8153886">0</span><span class="op" id="8153887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153891">buf</span>&nbsp;<span class="op" id="8153895">:=</span>&nbsp;<span class="ident" id="8153898">bytes</span><span class="op" id="8153903">.</span><span class="ident" id="8153904">NewBuffer</span><span class="op" id="8153913">(</span><span class="ident" id="8153914">slice</span><span class="op" id="8153919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153923">if</span>&nbsp;<span class="ident" id="8153926">err</span>&nbsp;<span class="op" id="8153930">:=</span>&nbsp;<span class="ident" id="8153933">Indent</span><span class="op" id="8153939">(</span><span class="ident" id="8153940">buf</span><span class="op" id="8153943">,</span>&nbsp;<span class="op" id="8153945">[</span><span class="op" id="8153946">]</span><span class="builtintype" id="8153947">uint8</span><span class="op" id="8153952">(</span><span class="ident" id="8153953">tt</span><span class="op" id="8153955">.</span><span class="ident" id="8153956">in</span><span class="op" id="8153958">)</span><span class="op" id="8153959">,</span>&nbsp;<span class="string" id="8153961">&#34;&#34;</span><span class="op" id="8153963">,</span>&nbsp;<span class="string" id="8153965">&#34;&#34;</span><span class="op" id="8153967">)</span><span class="op" id="8153968">;</span>&nbsp;<span class="ident" id="8153970">err</span>&nbsp;<span class="op" id="8153974">!=</span>&nbsp;<span class="ident" id="8153977">nil</span>&nbsp;<span class="op" id="8153981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153986">if</span>&nbsp;<span class="op" id="8153989">!</span><span class="ident" id="8153990">reflect</span><span class="op" id="8153997">.</span><span class="ident" id="8153998">DeepEqual</span><span class="op" id="8154007">(</span><span class="ident" id="8154008">err</span><span class="op" id="8154011">,</span>&nbsp;<span class="ident" id="8154013">tt</span><span class="op" id="8154015">.</span><span class="ident" id="8154016">err</span><span class="op" id="8154019">)</span>&nbsp;<span class="op" id="8154021">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154027">t</span><span class="op" id="8154028">.</span><span class="ident" id="8154029">Errorf</span><span class="op" id="8154035">(</span><span class="string" id="8154036">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="8154054">,</span>&nbsp;<span class="ident" id="8154056">i</span><span class="op" id="8154057">,</span>&nbsp;<span class="ident" id="8154059">err</span><span class="op" id="8154062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154068">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154087">}</span><br>
<span class="lineno">180</span><span class="op" id="8154089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8154092">func</span>&nbsp;<span class="ident" id="8154097">TestNextValueBig</span><span class="op" id="8154113">(</span><span class="ident" id="8154114">t</span>&nbsp;<span class="op" id="8154116">*</span><span class="ident" id="8154117">testing</span><span class="op" id="8154124">.</span><span class="ident" id="8154125">T</span><span class="op" id="8154126">)</span>&nbsp;<span class="op" id="8154128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154131">initBig</span><span class="op" id="8154138">(</span><span class="op" id="8154139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154142">var</span>&nbsp;<span class="ident" id="8154146">scan</span>&nbsp;<span class="ident" id="8154151">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154160">item</span><span class="op" id="8154164">,</span>&nbsp;<span class="ident" id="8154166">rest</span><span class="op" id="8154170">,</span>&nbsp;<span class="ident" id="8154172">err</span>&nbsp;<span class="op" id="8154176">:=</span>&nbsp;<span class="ident" id="8154179">nextValue</span><span class="op" id="8154188">(</span><span class="ident" id="8154189">jsonBig</span><span class="op" id="8154196">,</span>&nbsp;<span class="op" id="8154198">&amp;</span><span class="ident" id="8154199">scan</span><span class="op" id="8154203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154206">if</span>&nbsp;<span class="ident" id="8154209">err</span>&nbsp;<span class="op" id="8154213">!=</span>&nbsp;<span class="ident" id="8154216">nil</span>&nbsp;<span class="op" id="8154220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154224">t</span><span class="op" id="8154225">.</span><span class="ident" id="8154226">Fatalf</span><span class="op" id="8154232">(</span><span class="string" id="8154233">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="8154248">,</span>&nbsp;<span class="ident" id="8154250">err</span><span class="op" id="8154253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154259">if</span>&nbsp;<span class="builtinfunc" id="8154262">len</span><span class="op" id="8154265">(</span><span class="ident" id="8154266">item</span><span class="op" id="8154270">)</span>&nbsp;<span class="op" id="8154272">!=</span>&nbsp;<span class="builtinfunc" id="8154275">len</span><span class="op" id="8154278">(</span><span class="ident" id="8154279">jsonBig</span><span class="op" id="8154286">)</span>&nbsp;<span class="op" id="8154288">||</span>&nbsp;<span class="op" id="8154291">&amp;</span><span class="ident" id="8154292">item</span><span class="op" id="8154296">[</span><span class="num" id="8154297">0</span><span class="op" id="8154298">]</span>&nbsp;<span class="op" id="8154300">!=</span>&nbsp;<span class="op" id="8154303">&amp;</span><span class="ident" id="8154304">jsonBig</span><span class="op" id="8154311">[</span><span class="num" id="8154312">0</span><span class="op" id="8154313">]</span>&nbsp;<span class="op" id="8154315">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154319">t</span><span class="op" id="8154320">.</span><span class="ident" id="8154321">Errorf</span><span class="op" id="8154327">(</span><span class="string" id="8154328">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8154349">,</span>&nbsp;<span class="builtinfunc" id="8154351">len</span><span class="op" id="8154354">(</span><span class="ident" id="8154355">item</span><span class="op" id="8154359">)</span><span class="op" id="8154360">,</span>&nbsp;<span class="builtinfunc" id="8154362">len</span><span class="op" id="8154365">(</span><span class="ident" id="8154366">jsonBig</span><span class="op" id="8154373">)</span><span class="op" id="8154374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154380">if</span>&nbsp;<span class="builtinfunc" id="8154383">len</span><span class="op" id="8154386">(</span><span class="ident" id="8154387">rest</span><span class="op" id="8154391">)</span>&nbsp;<span class="op" id="8154393">!=</span>&nbsp;<span class="num" id="8154396">0</span>&nbsp;<span class="op" id="8154398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154402">t</span><span class="op" id="8154403">.</span><span class="ident" id="8154404">Errorf</span><span class="op" id="8154410">(</span><span class="string" id="8154411">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8154429">,</span>&nbsp;<span class="builtinfunc" id="8154431">len</span><span class="op" id="8154434">(</span><span class="ident" id="8154435">rest</span><span class="op" id="8154439">)</span><span class="op" id="8154440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154443">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154447">item</span><span class="op" id="8154451">,</span>&nbsp;<span class="ident" id="8154453">rest</span><span class="op" id="8154457">,</span>&nbsp;<span class="ident" id="8154459">err</span>&nbsp;<span class="op" id="8154463">=</span>&nbsp;<span class="ident" id="8154465">nextValue</span><span class="op" id="8154474">(</span><span class="builtinfunc" id="8154475">append</span><span class="op" id="8154481">(</span><span class="ident" id="8154482">jsonBig</span><span class="op" id="8154489">,</span>&nbsp;<span class="string" id="8154491">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="8154504">...</span><span class="op" id="8154507">)</span><span class="op" id="8154508">,</span>&nbsp;<span class="op" id="8154510">&amp;</span><span class="ident" id="8154511">scan</span><span class="op" id="8154515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154518">if</span>&nbsp;<span class="ident" id="8154521">err</span>&nbsp;<span class="op" id="8154525">!=</span>&nbsp;<span class="ident" id="8154528">nil</span>&nbsp;<span class="op" id="8154532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154536">t</span><span class="op" id="8154537">.</span><span class="ident" id="8154538">Fatalf</span><span class="op" id="8154544">(</span><span class="string" id="8154545">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="8154566">,</span>&nbsp;<span class="ident" id="8154568">err</span><span class="op" id="8154571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154574">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154577">if</span>&nbsp;<span class="builtinfunc" id="8154580">len</span><span class="op" id="8154583">(</span><span class="ident" id="8154584">item</span><span class="op" id="8154588">)</span>&nbsp;<span class="op" id="8154590">!=</span>&nbsp;<span class="builtinfunc" id="8154593">len</span><span class="op" id="8154596">(</span><span class="ident" id="8154597">jsonBig</span><span class="op" id="8154604">)</span>&nbsp;<span class="op" id="8154606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154610">t</span><span class="op" id="8154611">.</span><span class="ident" id="8154612">Errorf</span><span class="op" id="8154618">(</span><span class="string" id="8154619">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8154640">,</span>&nbsp;<span class="builtinfunc" id="8154642">len</span><span class="op" id="8154645">(</span><span class="ident" id="8154646">item</span><span class="op" id="8154650">)</span><span class="op" id="8154651">,</span>&nbsp;<span class="builtinfunc" id="8154653">len</span><span class="op" id="8154656">(</span><span class="ident" id="8154657">jsonBig</span><span class="op" id="8154664">)</span><span class="op" id="8154665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154671">if</span>&nbsp;<span class="builtintype" id="8154674">string</span><span class="op" id="8154680">(</span><span class="ident" id="8154681">rest</span><span class="op" id="8154685">)</span>&nbsp;<span class="op" id="8154687">!=</span>&nbsp;<span class="string" id="8154690">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="8154704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154708">t</span><span class="op" id="8154709">.</span><span class="ident" id="8154710">Errorf</span><span class="op" id="8154716">(</span><span class="string" id="8154717">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8154735">,</span>&nbsp;<span class="builtinfunc" id="8154737">len</span><span class="op" id="8154740">(</span><span class="ident" id="8154741">rest</span><span class="op" id="8154745">)</span><span class="op" id="8154746">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154749">}</span><br>
<span class="lineno"></span><span class="op" id="8154751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8154754">var</span>&nbsp;<span class="ident" id="8154758">benchScan</span>&nbsp;<span class="ident" id="8154768">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="8154777">func</span>&nbsp;<span class="ident" id="8154782">BenchmarkSkipValue</span><span class="op" id="8154800">(</span><span class="ident" id="8154801">b</span>&nbsp;<span class="op" id="8154803">*</span><span class="ident" id="8154804">testing</span><span class="op" id="8154811">.</span><span class="ident" id="8154812">B</span><span class="op" id="8154813">)</span>&nbsp;<span class="op" id="8154815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154818">initBig</span><span class="op" id="8154825">(</span><span class="op" id="8154826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154829">for</span>&nbsp;<span class="ident" id="8154833">i</span>&nbsp;<span class="op" id="8154835">:=</span>&nbsp;<span class="num" id="8154838">0</span><span class="op" id="8154839">;</span>&nbsp;<span class="ident" id="8154841">i</span>&nbsp;<span class="op" id="8154843">&lt;</span>&nbsp;<span class="ident" id="8154845">b</span><span class="op" id="8154846">.</span><span class="ident" id="8154847">N</span><span class="op" id="8154848">;</span>&nbsp;<span class="ident" id="8154850">i</span><span class="op" id="8154851">++</span>&nbsp;<span class="op" id="8154854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154858">nextValue</span><span class="op" id="8154867">(</span><span class="ident" id="8154868">jsonBig</span><span class="op" id="8154875">,</span>&nbsp;<span class="op" id="8154877">&amp;</span><span class="ident" id="8154878">benchScan</span><span class="op" id="8154887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154890">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154893">b</span><span class="op" id="8154894">.</span><span class="ident" id="8154895">SetBytes</span><span class="op" id="8154903">(</span><span class="ident" id="8154904">int64</span><span class="op" id="8154909">(</span><span class="builtinfunc" id="8154910">len</span><span class="op" id="8154913">(</span><span class="ident" id="8154914">jsonBig</span><span class="op" id="8154921">)</span><span class="op" id="8154922">)</span><span class="op" id="8154923">)</span><br>
<span class="lineno"></span><span class="op" id="8154925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8154928">func</span>&nbsp;<span class="ident" id="8154933">diff</span><span class="op" id="8154937">(</span><span class="ident" id="8154938">t</span>&nbsp;<span class="op" id="8154940">*</span><span class="ident" id="8154941">testing</span><span class="op" id="8154948">.</span><span class="ident" id="8154949">T</span><span class="op" id="8154950">,</span>&nbsp;<span class="ident" id="8154952">a</span><span class="op" id="8154953">,</span>&nbsp;<span class="ident" id="8154955">b</span>&nbsp;<span class="op" id="8154957">[</span><span class="op" id="8154958">]</span><span class="builtintype" id="8154959">byte</span><span class="op" id="8154963">)</span>&nbsp;<span class="op" id="8154965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154968">for</span>&nbsp;<span class="ident" id="8154972">i</span>&nbsp;<span class="op" id="8154974">:=</span>&nbsp;<span class="num" id="8154977">0</span><span class="op" id="8154978">;</span>&nbsp;<span class="op" id="8154980">;</span>&nbsp;<span class="ident" id="8154982">i</span><span class="op" id="8154983">++</span>&nbsp;<span class="op" id="8154986">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154990">if</span>&nbsp;<span class="ident" id="8154993">i</span>&nbsp;<span class="op" id="8154995">&gt;=</span>&nbsp;<span class="builtinfunc" id="8154998">len</span><span class="op" id="8155001">(</span><span class="ident" id="8155002">a</span><span class="op" id="8155003">)</span>&nbsp;<span class="op" id="8155005">||</span>&nbsp;<span class="ident" id="8155008">i</span>&nbsp;<span class="op" id="8155010">&gt;=</span>&nbsp;<span class="builtinfunc" id="8155013">len</span><span class="op" id="8155016">(</span><span class="ident" id="8155017">b</span><span class="op" id="8155018">)</span>&nbsp;<span class="op" id="8155020">||</span>&nbsp;<span class="ident" id="8155023">a</span><span class="op" id="8155024">[</span><span class="ident" id="8155025">i</span><span class="op" id="8155026">]</span>&nbsp;<span class="op" id="8155028">!=</span>&nbsp;<span class="ident" id="8155031">b</span><span class="op" id="8155032">[</span><span class="ident" id="8155033">i</span><span class="op" id="8155034">]</span>&nbsp;<span class="op" id="8155036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155041">j</span>&nbsp;<span class="op" id="8155043">:=</span>&nbsp;<span class="ident" id="8155046">i</span>&nbsp;<span class="op" id="8155048">-</span>&nbsp;<span class="num" id="8155050">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155056">if</span>&nbsp;<span class="ident" id="8155059">j</span>&nbsp;<span class="op" id="8155061">&lt;</span>&nbsp;<span class="num" id="8155063">0</span>&nbsp;<span class="op" id="8155065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155071">j</span>&nbsp;<span class="op" id="8155073">=</span>&nbsp;<span class="num" id="8155075">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155080">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155085">t</span><span class="op" id="8155086">.</span><span class="ident" id="8155087">Errorf</span><span class="op" id="8155093">(</span><span class="string" id="8155094">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;%s&nbsp;vs&nbsp;%s&#34;</span><span class="op" id="8155127">,</span>&nbsp;<span class="ident" id="8155129">i</span><span class="op" id="8155130">,</span>&nbsp;<span class="ident" id="8155132">trim</span><span class="op" id="8155136">(</span><span class="ident" id="8155137">a</span><span class="op" id="8155138">[</span><span class="ident" id="8155139">j</span><span class="op" id="8155140">:</span><span class="op" id="8155141">]</span><span class="op" id="8155142">)</span><span class="op" id="8155143">,</span>&nbsp;<span class="ident" id="8155145">trim</span><span class="op" id="8155149">(</span><span class="ident" id="8155150">b</span><span class="op" id="8155151">[</span><span class="ident" id="8155152">j</span><span class="op" id="8155153">:</span><span class="op" id="8155154">]</span><span class="op" id="8155155">)</span><span class="op" id="8155156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155161">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155173">}</span><br>
<span class="lineno"></span><span class="op" id="8155175">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8155178">func</span>&nbsp;<span class="ident" id="8155183">trim</span><span class="op" id="8155187">(</span><span class="ident" id="8155188">b</span>&nbsp;<span class="op" id="8155190">[</span><span class="op" id="8155191">]</span><span class="builtintype" id="8155192">byte</span><span class="op" id="8155196">)</span>&nbsp;<span class="op" id="8155198">[</span><span class="op" id="8155199">]</span><span class="builtintype" id="8155200">byte</span>&nbsp;<span class="op" id="8155205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155208">if</span>&nbsp;<span class="builtinfunc" id="8155211">len</span><span class="op" id="8155214">(</span><span class="ident" id="8155215">b</span><span class="op" id="8155216">)</span>&nbsp;<span class="op" id="8155218">&gt;</span>&nbsp;<span class="num" id="8155220">20</span>&nbsp;<span class="op" id="8155223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155227">return</span>&nbsp;<span class="ident" id="8155234">b</span><span class="op" id="8155235">[</span><span class="num" id="8155236">0</span><span class="op" id="8155237">:</span><span class="num" id="8155238">20</span><span class="op" id="8155240">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155243">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155246">return</span>&nbsp;<span class="ident" id="8155253">b</span><br>
<span class="lineno"></span><span class="op" id="8155255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8155258">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8155293">var</span>&nbsp;<span class="ident" id="8155297">jsonBig</span>&nbsp;<span class="op" id="8155305">[</span><span class="op" id="8155306">]</span><span class="builtintype" id="8155307">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8155313">func</span>&nbsp;<span class="ident" id="8155318">initBig</span><span class="op" id="8155325">(</span><span class="op" id="8155326">)</span>&nbsp;<span class="op" id="8155328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155331">n</span>&nbsp;<span class="op" id="8155333">:=</span>&nbsp;<span class="num" id="8155336">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155343">if</span>&nbsp;<span class="ident" id="8155346">testing</span><span class="op" id="8155353">.</span><span class="ident" id="8155354">Short</span><span class="op" id="8155359">(</span><span class="op" id="8155360">)</span>&nbsp;<span class="op" id="8155362">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155366">n</span>&nbsp;<span class="op" id="8155368">=</span>&nbsp;<span class="num" id="8155370">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155378">b</span><span class="op" id="8155379">,</span>&nbsp;<span class="ident" id="8155381">err</span>&nbsp;<span class="op" id="8155385">:=</span>&nbsp;<span class="ident" id="8155388">Marshal</span><span class="op" id="8155395">(</span><span class="ident" id="8155396">genValue</span><span class="op" id="8155404">(</span><span class="ident" id="8155405">n</span><span class="op" id="8155406">)</span><span class="op" id="8155407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155410">if</span>&nbsp;<span class="ident" id="8155413">err</span>&nbsp;<span class="op" id="8155417">!=</span>&nbsp;<span class="ident" id="8155420">nil</span>&nbsp;<span class="op" id="8155424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8155428">panic</span><span class="op" id="8155433">(</span><span class="ident" id="8155434">err</span><span class="op" id="8155437">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155443">jsonBig</span>&nbsp;<span class="op" id="8155451">=</span>&nbsp;<span class="ident" id="8155453">b</span><br>
<span class="lineno"></span><span class="op" id="8155455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8155458">func</span>&nbsp;<span class="ident" id="8155463">genValue</span><span class="op" id="8155471">(</span><span class="ident" id="8155472">n</span>&nbsp;<span class="builtintype" id="8155474">int</span><span class="op" id="8155477">)</span>&nbsp;<span class="keyword" id="8155479">interface</span><span class="op" id="8155488">{</span><span class="op" id="8155489">}</span>&nbsp;<span class="op" id="8155491">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155494">if</span>&nbsp;<span class="ident" id="8155497">n</span>&nbsp;<span class="op" id="8155499">&gt;</span>&nbsp;<span class="num" id="8155501">1</span>&nbsp;<span class="op" id="8155503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155507">switch</span>&nbsp;<span class="ident" id="8155514">rand</span><span class="op" id="8155518">.</span><span class="ident" id="8155519">Intn</span><span class="op" id="8155523">(</span><span class="num" id="8155524">2</span><span class="op" id="8155525">)</span>&nbsp;<span class="op" id="8155527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155531">case</span>&nbsp;<span class="num" id="8155536">0</span><span class="op" id="8155537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155542">return</span>&nbsp;<span class="ident" id="8155549">genArray</span><span class="op" id="8155557">(</span><span class="ident" id="8155558">n</span><span class="op" id="8155559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155563">case</span>&nbsp;<span class="num" id="8155568">1</span><span class="op" id="8155569">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155574">return</span>&nbsp;<span class="ident" id="8155581">genMap</span><span class="op" id="8155587">(</span><span class="ident" id="8155588">n</span><span class="op" id="8155589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155599">switch</span>&nbsp;<span class="ident" id="8155606">rand</span><span class="op" id="8155610">.</span><span class="ident" id="8155611">Intn</span><span class="op" id="8155615">(</span><span class="num" id="8155616">3</span><span class="op" id="8155617">)</span>&nbsp;<span class="op" id="8155619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155622">case</span>&nbsp;<span class="num" id="8155627">0</span><span class="op" id="8155628">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155632">return</span>&nbsp;<span class="ident" id="8155639">rand</span><span class="op" id="8155643">.</span><span class="ident" id="8155644">Intn</span><span class="op" id="8155648">(</span><span class="num" id="8155649">2</span><span class="op" id="8155650">)</span>&nbsp;<span class="op" id="8155652">==</span>&nbsp;<span class="num" id="8155655">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155658">case</span>&nbsp;<span class="num" id="8155663">1</span><span class="op" id="8155664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155668">return</span>&nbsp;<span class="ident" id="8155675">rand</span><span class="op" id="8155679">.</span><span class="ident" id="8155680">NormFloat64</span><span class="op" id="8155691">(</span><span class="op" id="8155692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155695">case</span>&nbsp;<span class="num" id="8155700">2</span><span class="op" id="8155701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155705">return</span>&nbsp;<span class="ident" id="8155712">genString</span><span class="op" id="8155721">(</span><span class="num" id="8155722">30</span><span class="op" id="8155724">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8155730">panic</span><span class="op" id="8155735">(</span><span class="string" id="8155736">&#34;unreachable&#34;</span><span class="op" id="8155749">)</span><br>
<span class="lineno"></span><span class="op" id="8155751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8155754">func</span>&nbsp;<span class="ident" id="8155759">genString</span><span class="op" id="8155768">(</span><span class="ident" id="8155769">stddev</span>&nbsp;<span class="builtintype" id="8155776">float64</span><span class="op" id="8155783">)</span>&nbsp;<span class="builtintype" id="8155785">string</span>&nbsp;<span class="op" id="8155792">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155795">n</span>&nbsp;<span class="op" id="8155797">:=</span>&nbsp;<span class="builtintype" id="8155800">int</span><span class="op" id="8155803">(</span><span class="ident" id="8155804">math</span><span class="op" id="8155808">.</span><span class="ident" id="8155809">Abs</span><span class="op" id="8155812">(</span><span class="ident" id="8155813">rand</span><span class="op" id="8155817">.</span><span class="ident" id="8155818">NormFloat64</span><span class="op" id="8155829">(</span><span class="op" id="8155830">)</span><span class="op" id="8155831">*</span><span class="ident" id="8155832">stddev</span>&nbsp;<span class="op" id="8155839">+</span>&nbsp;<span class="ident" id="8155841">stddev</span><span class="op" id="8155847">/</span><span class="num" id="8155848">2</span><span class="op" id="8155849">)</span><span class="op" id="8155850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155853">c</span>&nbsp;<span class="op" id="8155855">:=</span>&nbsp;<span class="builtinfunc" id="8155858">make</span><span class="op" id="8155862">(</span><span class="op" id="8155863">[</span><span class="op" id="8155864">]</span><span class="builtintype" id="8155865">rune</span><span class="op" id="8155869">,</span>&nbsp;<span class="ident" id="8155871">n</span><span class="op" id="8155872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155875">for</span>&nbsp;<span class="ident" id="8155879">i</span>&nbsp;<span class="op" id="8155881">:=</span>&nbsp;<span class="keyword" id="8155884">range</span>&nbsp;<span class="ident" id="8155890">c</span>&nbsp;<span class="op" id="8155892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155896">f</span>&nbsp;<span class="op" id="8155898">:=</span>&nbsp;<span class="ident" id="8155901">math</span><span class="op" id="8155905">.</span><span class="ident" id="8155906">Abs</span><span class="op" id="8155909">(</span><span class="ident" id="8155910">rand</span><span class="op" id="8155914">.</span><span class="ident" id="8155915">NormFloat64</span><span class="op" id="8155926">(</span><span class="op" id="8155927">)</span><span class="op" id="8155928">*</span><span class="num" id="8155929">64</span>&nbsp;<span class="op" id="8155932">+</span>&nbsp;<span class="num" id="8155934">32</span><span class="op" id="8155936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155940">if</span>&nbsp;<span class="ident" id="8155943">f</span>&nbsp;<span class="op" id="8155945">&gt;</span>&nbsp;<span class="num" id="8155947">0x10ffff</span>&nbsp;<span class="op" id="8155956">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155961">f</span>&nbsp;<span class="op" id="8155963">=</span>&nbsp;<span class="num" id="8155965">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155980">c</span><span class="op" id="8155981">[</span><span class="ident" id="8155982">i</span><span class="op" id="8155983">]</span>&nbsp;<span class="op" id="8155985">=</span>&nbsp;<span class="builtintype" id="8155987">rune</span><span class="op" id="8155991">(</span><span class="ident" id="8155992">f</span><span class="op" id="8155993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155999">return</span>&nbsp;<span class="builtintype" id="8156006">string</span><span class="op" id="8156012">(</span><span class="ident" id="8156013">c</span><span class="op" id="8156014">)</span><br>
<span class="lineno">285</span><span class="op" id="8156016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8156019">func</span>&nbsp;<span class="ident" id="8156024">genArray</span><span class="op" id="8156032">(</span><span class="ident" id="8156033">n</span>&nbsp;<span class="builtintype" id="8156035">int</span><span class="op" id="8156038">)</span>&nbsp;<span class="op" id="8156040">[</span><span class="op" id="8156041">]</span><span class="keyword" id="8156042">interface</span><span class="op" id="8156051">{</span><span class="op" id="8156052">}</span>&nbsp;<span class="op" id="8156054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156057">f</span>&nbsp;<span class="op" id="8156059">:=</span>&nbsp;<span class="builtintype" id="8156062">int</span><span class="op" id="8156065">(</span><span class="ident" id="8156066">math</span><span class="op" id="8156070">.</span><span class="ident" id="8156071">Abs</span><span class="op" id="8156074">(</span><span class="ident" id="8156075">rand</span><span class="op" id="8156079">.</span><span class="ident" id="8156080">NormFloat64</span><span class="op" id="8156091">(</span><span class="op" id="8156092">)</span><span class="op" id="8156093">)</span>&nbsp;<span class="op" id="8156095">*</span>&nbsp;<span class="ident" id="8156097">math</span><span class="op" id="8156101">.</span><span class="ident" id="8156102">Min</span><span class="op" id="8156105">(</span><span class="num" id="8156106">10</span><span class="op" id="8156108">,</span>&nbsp;<span class="builtintype" id="8156110">float64</span><span class="op" id="8156117">(</span><span class="ident" id="8156118">n</span><span class="op" id="8156119">/</span><span class="num" id="8156120">2</span><span class="op" id="8156121">)</span><span class="op" id="8156122">)</span><span class="op" id="8156123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156126">if</span>&nbsp;<span class="ident" id="8156129">f</span>&nbsp;<span class="op" id="8156131">&gt;</span>&nbsp;<span class="ident" id="8156133">n</span>&nbsp;<span class="op" id="8156135">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156139">f</span>&nbsp;<span class="op" id="8156141">=</span>&nbsp;<span class="ident" id="8156143">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156149">if</span>&nbsp;<span class="ident" id="8156152">f</span>&nbsp;<span class="op" id="8156154">&lt;</span>&nbsp;<span class="num" id="8156156">1</span>&nbsp;<span class="op" id="8156158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156162">f</span>&nbsp;<span class="op" id="8156164">=</span>&nbsp;<span class="num" id="8156166">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156169">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156172">x</span>&nbsp;<span class="op" id="8156174">:=</span>&nbsp;<span class="builtinfunc" id="8156177">make</span><span class="op" id="8156181">(</span><span class="op" id="8156182">[</span><span class="op" id="8156183">]</span><span class="keyword" id="8156184">interface</span><span class="op" id="8156193">{</span><span class="op" id="8156194">}</span><span class="op" id="8156195">,</span>&nbsp;<span class="ident" id="8156197">f</span><span class="op" id="8156198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156201">for</span>&nbsp;<span class="ident" id="8156205">i</span>&nbsp;<span class="op" id="8156207">:=</span>&nbsp;<span class="keyword" id="8156210">range</span>&nbsp;<span class="ident" id="8156216">x</span>&nbsp;<span class="op" id="8156218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156222">x</span><span class="op" id="8156223">[</span><span class="ident" id="8156224">i</span><span class="op" id="8156225">]</span>&nbsp;<span class="op" id="8156227">=</span>&nbsp;<span class="ident" id="8156229">genValue</span><span class="op" id="8156237">(</span><span class="op" id="8156238">(</span><span class="op" id="8156239">(</span><span class="ident" id="8156240">i</span><span class="op" id="8156241">+</span><span class="num" id="8156242">1</span><span class="op" id="8156243">)</span><span class="op" id="8156244">*</span><span class="ident" id="8156245">n</span><span class="op" id="8156246">)</span><span class="op" id="8156247">/</span><span class="ident" id="8156248">f</span>&nbsp;<span class="op" id="8156250">-</span>&nbsp;<span class="op" id="8156252">(</span><span class="ident" id="8156253">i</span><span class="op" id="8156254">*</span><span class="ident" id="8156255">n</span><span class="op" id="8156256">)</span><span class="op" id="8156257">/</span><span class="ident" id="8156258">f</span><span class="op" id="8156259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156265">return</span>&nbsp;<span class="ident" id="8156272">x</span><br>
<span class="lineno">300</span><span class="op" id="8156274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8156277">func</span>&nbsp;<span class="ident" id="8156282">genMap</span><span class="op" id="8156288">(</span><span class="ident" id="8156289">n</span>&nbsp;<span class="builtintype" id="8156291">int</span><span class="op" id="8156294">)</span>&nbsp;<span class="keyword" id="8156296">map</span><span class="op" id="8156299">[</span><span class="builtintype" id="8156300">string</span><span class="op" id="8156306">]</span><span class="keyword" id="8156307">interface</span><span class="op" id="8156316">{</span><span class="op" id="8156317">}</span>&nbsp;<span class="op" id="8156319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156322">f</span>&nbsp;<span class="op" id="8156324">:=</span>&nbsp;<span class="builtintype" id="8156327">int</span><span class="op" id="8156330">(</span><span class="ident" id="8156331">math</span><span class="op" id="8156335">.</span><span class="ident" id="8156336">Abs</span><span class="op" id="8156339">(</span><span class="ident" id="8156340">rand</span><span class="op" id="8156344">.</span><span class="ident" id="8156345">NormFloat64</span><span class="op" id="8156356">(</span><span class="op" id="8156357">)</span><span class="op" id="8156358">)</span>&nbsp;<span class="op" id="8156360">*</span>&nbsp;<span class="ident" id="8156362">math</span><span class="op" id="8156366">.</span><span class="ident" id="8156367">Min</span><span class="op" id="8156370">(</span><span class="num" id="8156371">10</span><span class="op" id="8156373">,</span>&nbsp;<span class="builtintype" id="8156375">float64</span><span class="op" id="8156382">(</span><span class="ident" id="8156383">n</span><span class="op" id="8156384">/</span><span class="num" id="8156385">2</span><span class="op" id="8156386">)</span><span class="op" id="8156387">)</span><span class="op" id="8156388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156391">if</span>&nbsp;<span class="ident" id="8156394">f</span>&nbsp;<span class="op" id="8156396">&gt;</span>&nbsp;<span class="ident" id="8156398">n</span>&nbsp;<span class="op" id="8156400">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156404">f</span>&nbsp;<span class="op" id="8156406">=</span>&nbsp;<span class="ident" id="8156408">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156414">if</span>&nbsp;<span class="ident" id="8156417">n</span>&nbsp;<span class="op" id="8156419">&gt;</span>&nbsp;<span class="num" id="8156421">0</span>&nbsp;<span class="op" id="8156423">&amp;&amp;</span>&nbsp;<span class="ident" id="8156426">f</span>&nbsp;<span class="op" id="8156428">==</span>&nbsp;<span class="num" id="8156431">0</span>&nbsp;<span class="op" id="8156433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156437">f</span>&nbsp;<span class="op" id="8156439">=</span>&nbsp;<span class="num" id="8156441">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156444">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156447">x</span>&nbsp;<span class="op" id="8156449">:=</span>&nbsp;<span class="builtinfunc" id="8156452">make</span><span class="op" id="8156456">(</span><span class="keyword" id="8156457">map</span><span class="op" id="8156460">[</span><span class="builtintype" id="8156461">string</span><span class="op" id="8156467">]</span><span class="keyword" id="8156468">interface</span><span class="op" id="8156477">{</span><span class="op" id="8156478">}</span><span class="op" id="8156479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156482">for</span>&nbsp;<span class="ident" id="8156486">i</span>&nbsp;<span class="op" id="8156488">:=</span>&nbsp;<span class="num" id="8156491">0</span><span class="op" id="8156492">;</span>&nbsp;<span class="ident" id="8156494">i</span>&nbsp;<span class="op" id="8156496">&lt;</span>&nbsp;<span class="ident" id="8156498">f</span><span class="op" id="8156499">;</span>&nbsp;<span class="ident" id="8156501">i</span><span class="op" id="8156502">++</span>&nbsp;<span class="op" id="8156505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156509">x</span><span class="op" id="8156510">[</span><span class="ident" id="8156511">genString</span><span class="op" id="8156520">(</span><span class="num" id="8156521">10</span><span class="op" id="8156523">)</span><span class="op" id="8156524">]</span>&nbsp;<span class="op" id="8156526">=</span>&nbsp;<span class="ident" id="8156528">genValue</span><span class="op" id="8156536">(</span><span class="op" id="8156537">(</span><span class="op" id="8156538">(</span><span class="ident" id="8156539">i</span><span class="op" id="8156540">+</span><span class="num" id="8156541">1</span><span class="op" id="8156542">)</span><span class="op" id="8156543">*</span><span class="ident" id="8156544">n</span><span class="op" id="8156545">)</span><span class="op" id="8156546">/</span><span class="ident" id="8156547">f</span>&nbsp;<span class="op" id="8156549">-</span>&nbsp;<span class="op" id="8156551">(</span><span class="ident" id="8156552">i</span><span class="op" id="8156553">*</span><span class="ident" id="8156554">n</span><span class="op" id="8156555">)</span><span class="op" id="8156556">/</span><span class="ident" id="8156557">f</span><span class="op" id="8156558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156564">return</span>&nbsp;<span class="ident" id="8156571">x</span><br>
<span class="lineno">315</span><span class="op" id="8156573">}</span>
</div>
</body>
</html>
