<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8460971">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8461026">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8461080">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8461131">package</span>&nbsp;<span class="ident" id="8461139">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8461145">import</span>&nbsp;<span class="op" id="8461152">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8461155">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8461165">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8461172">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8461180">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8461190">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8461193">const</span>&nbsp;<span class="op" id="8461199">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8461202">numTestSamples</span>&nbsp;<span class="op" id="8461217">=</span>&nbsp;<span class="num" id="8461219">10000</span><br>
<span class="lineno"></span><span class="op" id="8461225">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8461228">type</span>&nbsp;<span class="ident" id="8461233">statsResults</span>&nbsp;<span class="keyword" id="8461246">struct</span>&nbsp;<span class="op" id="8461253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8461256">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8461268">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8461277">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8461289">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8461298">closeEnough</span>&nbsp;<span class="builtintype" id="8461310">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8461319">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8461331">float64</span><br>
<span class="lineno"></span><span class="op" id="8461339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8461342">func</span>&nbsp;<span class="ident" id="8461347">max</span><span class="op" id="8461350">(</span><span class="ident" id="8461351">a</span><span class="op" id="8461352">,</span>&nbsp;<span class="ident" id="8461354">b</span>&nbsp;<span class="builtintype" id="8461356">float64</span><span class="op" id="8461363">)</span>&nbsp;<span class="builtintype" id="8461365">float64</span>&nbsp;<span class="op" id="8461373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461376">if</span>&nbsp;<span class="ident" id="8461379">a</span>&nbsp;<span class="op" id="8461381">&gt;</span>&nbsp;<span class="ident" id="8461383">b</span>&nbsp;<span class="op" id="8461385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461389">return</span>&nbsp;<span class="ident" id="8461396">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8461399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461402">return</span>&nbsp;<span class="ident" id="8461409">b</span><br>
<span class="lineno">30</span><span class="op" id="8461411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8461414">func</span>&nbsp;<span class="ident" id="8461419">nearEqual</span><span class="op" id="8461428">(</span><span class="ident" id="8461429">a</span><span class="op" id="8461430">,</span>&nbsp;<span class="ident" id="8461432">b</span><span class="op" id="8461433">,</span>&nbsp;<span class="ident" id="8461435">closeEnough</span><span class="op" id="8461446">,</span>&nbsp;<span class="ident" id="8461448">maxError</span>&nbsp;<span class="builtintype" id="8461457">float64</span><span class="op" id="8461464">)</span>&nbsp;<span class="builtintype" id="8461466">bool</span>&nbsp;<span class="op" id="8461471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8461474">absDiff</span>&nbsp;<span class="op" id="8461482">:=</span>&nbsp;<span class="ident" id="8461485">math</span><span class="op" id="8461489">.</span><span class="ident" id="8461490">Abs</span><span class="op" id="8461493">(</span><span class="ident" id="8461494">a</span>&nbsp;<span class="op" id="8461496">-</span>&nbsp;<span class="ident" id="8461498">b</span><span class="op" id="8461499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461502">if</span>&nbsp;<span class="ident" id="8461505">absDiff</span>&nbsp;<span class="op" id="8461513">&lt;</span>&nbsp;<span class="ident" id="8461515">closeEnough</span>&nbsp;<span class="op" id="8461527">{</span>&nbsp;<span class="comment" id="8461529">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461599">return</span>&nbsp;<span class="builtintype" id="8461606">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8461612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461615">return</span>&nbsp;<span class="ident" id="8461622">absDiff</span><span class="op" id="8461629">/</span><span class="ident" id="8461630">max</span><span class="op" id="8461633">(</span><span class="ident" id="8461634">math</span><span class="op" id="8461638">.</span><span class="ident" id="8461639">Abs</span><span class="op" id="8461642">(</span><span class="ident" id="8461643">a</span><span class="op" id="8461644">)</span><span class="op" id="8461645">,</span>&nbsp;<span class="ident" id="8461647">math</span><span class="op" id="8461651">.</span><span class="ident" id="8461652">Abs</span><span class="op" id="8461655">(</span><span class="ident" id="8461656">b</span><span class="op" id="8461657">)</span><span class="op" id="8461658">)</span>&nbsp;<span class="op" id="8461660">&lt;</span>&nbsp;<span class="ident" id="8461662">maxError</span><br>
<span class="lineno"></span><span class="op" id="8461671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8461674">var</span>&nbsp;<span class="ident" id="8461678">testSeeds</span>&nbsp;<span class="op" id="8461688">=</span>&nbsp;<span class="op" id="8461690">[</span><span class="op" id="8461691">]</span><span class="ident" id="8461692">int64</span><span class="op" id="8461697">{</span><span class="num" id="8461698">1</span><span class="op" id="8461699">,</span>&nbsp;<span class="num" id="8461701">1754801282</span><span class="op" id="8461711">,</span>&nbsp;<span class="num" id="8461713">1698661970</span><span class="op" id="8461723">,</span>&nbsp;<span class="num" id="8461725">1550503961</span><span class="op" id="8461735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8461738">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8461812">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="8461845">func</span>&nbsp;<span class="op" id="8461850">(</span><span class="ident" id="8461851">this</span>&nbsp;<span class="op" id="8461856">*</span><span class="ident" id="8461857">statsResults</span><span class="op" id="8461869">)</span>&nbsp;<span class="ident" id="8461871">checkSimilarDistribution</span><span class="op" id="8461895">(</span><span class="ident" id="8461896">expected</span>&nbsp;<span class="op" id="8461905">*</span><span class="ident" id="8461906">statsResults</span><span class="op" id="8461918">)</span>&nbsp;<span class="builtintype" id="8461920">error</span>&nbsp;<span class="op" id="8461926">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8461929">if</span>&nbsp;<span class="op" id="8461932">!</span><span class="ident" id="8461933">nearEqual</span><span class="op" id="8461942">(</span><span class="ident" id="8461943">this</span><span class="op" id="8461947">.</span><span class="ident" id="8461948">mean</span><span class="op" id="8461952">,</span>&nbsp;<span class="ident" id="8461954">expected</span><span class="op" id="8461962">.</span><span class="ident" id="8461963">mean</span><span class="op" id="8461967">,</span>&nbsp;<span class="ident" id="8461969">expected</span><span class="op" id="8461977">.</span><span class="ident" id="8461978">closeEnough</span><span class="op" id="8461989">,</span>&nbsp;<span class="ident" id="8461991">expected</span><span class="op" id="8461999">.</span><span class="ident" id="8462000">maxError</span><span class="op" id="8462008">)</span>&nbsp;<span class="op" id="8462010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462014">s</span>&nbsp;<span class="op" id="8462016">:=</span>&nbsp;<span class="ident" id="8462019">fmt</span><span class="op" id="8462022">.</span><span class="ident" id="8462023">Sprintf</span><span class="op" id="8462030">(</span><span class="string" id="8462031">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="8462069">,</span>&nbsp;<span class="ident" id="8462071">this</span><span class="op" id="8462075">.</span><span class="ident" id="8462076">mean</span><span class="op" id="8462080">,</span>&nbsp;<span class="ident" id="8462082">expected</span><span class="op" id="8462090">.</span><span class="ident" id="8462091">mean</span><span class="op" id="8462095">,</span>&nbsp;<span class="ident" id="8462097">expected</span><span class="op" id="8462105">.</span><span class="ident" id="8462106">closeEnough</span><span class="op" id="8462117">,</span>&nbsp;<span class="ident" id="8462119">expected</span><span class="op" id="8462127">.</span><span class="ident" id="8462128">maxError</span><span class="op" id="8462136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462140">fmt</span><span class="op" id="8462143">.</span><span class="ident" id="8462144">Println</span><span class="op" id="8462151">(</span><span class="ident" id="8462152">s</span><span class="op" id="8462153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462157">return</span>&nbsp;<span class="ident" id="8462164">errors</span><span class="op" id="8462170">.</span><span class="ident" id="8462171">New</span><span class="op" id="8462174">(</span><span class="ident" id="8462175">s</span><span class="op" id="8462176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8462179">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462182">if</span>&nbsp;<span class="op" id="8462185">!</span><span class="ident" id="8462186">nearEqual</span><span class="op" id="8462195">(</span><span class="ident" id="8462196">this</span><span class="op" id="8462200">.</span><span class="ident" id="8462201">stddev</span><span class="op" id="8462207">,</span>&nbsp;<span class="ident" id="8462209">expected</span><span class="op" id="8462217">.</span><span class="ident" id="8462218">stddev</span><span class="op" id="8462224">,</span>&nbsp;<span class="num" id="8462226">0</span><span class="op" id="8462227">,</span>&nbsp;<span class="ident" id="8462229">expected</span><span class="op" id="8462237">.</span><span class="ident" id="8462238">maxError</span><span class="op" id="8462246">)</span>&nbsp;<span class="op" id="8462248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462252">s</span>&nbsp;<span class="op" id="8462254">:=</span>&nbsp;<span class="ident" id="8462257">fmt</span><span class="op" id="8462260">.</span><span class="ident" id="8462261">Sprintf</span><span class="op" id="8462268">(</span><span class="string" id="8462269">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="8462309">,</span>&nbsp;<span class="ident" id="8462311">this</span><span class="op" id="8462315">.</span><span class="ident" id="8462316">stddev</span><span class="op" id="8462322">,</span>&nbsp;<span class="ident" id="8462324">expected</span><span class="op" id="8462332">.</span><span class="ident" id="8462333">stddev</span><span class="op" id="8462339">,</span>&nbsp;<span class="ident" id="8462341">expected</span><span class="op" id="8462349">.</span><span class="ident" id="8462350">closeEnough</span><span class="op" id="8462361">,</span>&nbsp;<span class="ident" id="8462363">expected</span><span class="op" id="8462371">.</span><span class="ident" id="8462372">maxError</span><span class="op" id="8462380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462384">fmt</span><span class="op" id="8462387">.</span><span class="ident" id="8462388">Println</span><span class="op" id="8462395">(</span><span class="ident" id="8462396">s</span><span class="op" id="8462397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462401">return</span>&nbsp;<span class="ident" id="8462408">errors</span><span class="op" id="8462414">.</span><span class="ident" id="8462415">New</span><span class="op" id="8462418">(</span><span class="ident" id="8462419">s</span><span class="op" id="8462420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8462423">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462426">return</span>&nbsp;<span class="builtintype" id="8462433">nil</span><br>
<span class="lineno"></span><span class="op" id="8462437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8462440">func</span>&nbsp;<span class="ident" id="8462445">getStatsResults</span><span class="op" id="8462460">(</span><span class="ident" id="8462461">samples</span>&nbsp;<span class="op" id="8462469">[</span><span class="op" id="8462470">]</span><span class="builtintype" id="8462471">float64</span><span class="op" id="8462478">)</span>&nbsp;<span class="op" id="8462480">*</span><span class="ident" id="8462481">statsResults</span>&nbsp;<span class="op" id="8462494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462497">res</span>&nbsp;<span class="op" id="8462501">:=</span>&nbsp;<span class="builtinfunc" id="8462504">new</span><span class="op" id="8462507">(</span><span class="ident" id="8462508">statsResults</span><span class="op" id="8462520">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462523">var</span>&nbsp;<span class="ident" id="8462527">sum</span><span class="op" id="8462530">,</span>&nbsp;<span class="ident" id="8462532">squaresum</span>&nbsp;<span class="builtintype" id="8462542">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462551">for</span>&nbsp;<span class="ident" id="8462555">_</span><span class="op" id="8462556">,</span>&nbsp;<span class="ident" id="8462558">s</span>&nbsp;<span class="op" id="8462560">:=</span>&nbsp;<span class="keyword" id="8462563">range</span>&nbsp;<span class="ident" id="8462569">samples</span>&nbsp;<span class="op" id="8462577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462581">sum</span>&nbsp;<span class="op" id="8462585">+=</span>&nbsp;<span class="ident" id="8462588">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462592">squaresum</span>&nbsp;<span class="op" id="8462602">+=</span>&nbsp;<span class="ident" id="8462605">s</span>&nbsp;<span class="op" id="8462607">*</span>&nbsp;<span class="ident" id="8462609">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8462612">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462615">res</span><span class="op" id="8462618">.</span><span class="ident" id="8462619">mean</span>&nbsp;<span class="op" id="8462624">=</span>&nbsp;<span class="ident" id="8462626">sum</span>&nbsp;<span class="op" id="8462630">/</span>&nbsp;<span class="builtintype" id="8462632">float64</span><span class="op" id="8462639">(</span><span class="builtinfunc" id="8462640">len</span><span class="op" id="8462643">(</span><span class="ident" id="8462644">samples</span><span class="op" id="8462651">)</span><span class="op" id="8462652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462655">res</span><span class="op" id="8462658">.</span><span class="ident" id="8462659">stddev</span>&nbsp;<span class="op" id="8462666">=</span>&nbsp;<span class="ident" id="8462668">math</span><span class="op" id="8462672">.</span><span class="ident" id="8462673">Sqrt</span><span class="op" id="8462677">(</span><span class="ident" id="8462678">squaresum</span><span class="op" id="8462687">/</span><span class="builtintype" id="8462688">float64</span><span class="op" id="8462695">(</span><span class="builtinfunc" id="8462696">len</span><span class="op" id="8462699">(</span><span class="ident" id="8462700">samples</span><span class="op" id="8462707">)</span><span class="op" id="8462708">)</span>&nbsp;<span class="op" id="8462710">-</span>&nbsp;<span class="ident" id="8462712">res</span><span class="op" id="8462715">.</span><span class="ident" id="8462716">mean</span><span class="op" id="8462720">*</span><span class="ident" id="8462721">res</span><span class="op" id="8462724">.</span><span class="ident" id="8462725">mean</span><span class="op" id="8462729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462732">return</span>&nbsp;<span class="ident" id="8462739">res</span><br>
<span class="lineno"></span><span class="op" id="8462743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="8462746">func</span>&nbsp;<span class="ident" id="8462751">checkSampleDistribution</span><span class="op" id="8462774">(</span><span class="ident" id="8462775">t</span>&nbsp;<span class="op" id="8462777">*</span><span class="ident" id="8462778">testing</span><span class="op" id="8462785">.</span><span class="ident" id="8462786">T</span><span class="op" id="8462787">,</span>&nbsp;<span class="ident" id="8462789">samples</span>&nbsp;<span class="op" id="8462797">[</span><span class="op" id="8462798">]</span><span class="builtintype" id="8462799">float64</span><span class="op" id="8462806">,</span>&nbsp;<span class="ident" id="8462808">expected</span>&nbsp;<span class="op" id="8462817">*</span><span class="ident" id="8462818">statsResults</span><span class="op" id="8462830">)</span>&nbsp;<span class="op" id="8462832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462835">actual</span>&nbsp;<span class="op" id="8462842">:=</span>&nbsp;<span class="ident" id="8462845">getStatsResults</span><span class="op" id="8462860">(</span><span class="ident" id="8462861">samples</span><span class="op" id="8462868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462871">err</span>&nbsp;<span class="op" id="8462875">:=</span>&nbsp;<span class="ident" id="8462878">actual</span><span class="op" id="8462884">.</span><span class="ident" id="8462885">checkSimilarDistribution</span><span class="op" id="8462909">(</span><span class="ident" id="8462910">expected</span><span class="op" id="8462918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8462921">if</span>&nbsp;<span class="ident" id="8462924">err</span>&nbsp;<span class="op" id="8462928">!=</span>&nbsp;<span class="builtintype" id="8462931">nil</span>&nbsp;<span class="op" id="8462935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8462939">t</span><span class="op" id="8462940">.</span><span class="ident" id="8462941">Errorf</span><span class="op" id="8462947">(</span><span class="ident" id="8462948">err</span><span class="op" id="8462951">.</span><span class="ident" id="8462952">Error</span><span class="op" id="8462957">(</span><span class="op" id="8462958">)</span><span class="op" id="8462959">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8462962">}</span><br>
<span class="lineno"></span><span class="op" id="8462964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8462967">func</span>&nbsp;<span class="ident" id="8462972">checkSampleSliceDistributions</span><span class="op" id="8463001">(</span><span class="ident" id="8463002">t</span>&nbsp;<span class="op" id="8463004">*</span><span class="ident" id="8463005">testing</span><span class="op" id="8463012">.</span><span class="ident" id="8463013">T</span><span class="op" id="8463014">,</span>&nbsp;<span class="ident" id="8463016">samples</span>&nbsp;<span class="op" id="8463024">[</span><span class="op" id="8463025">]</span><span class="builtintype" id="8463026">float64</span><span class="op" id="8463033">,</span>&nbsp;<span class="ident" id="8463035">nslices</span>&nbsp;<span class="builtintype" id="8463043">int</span><span class="op" id="8463046">,</span>&nbsp;<span class="ident" id="8463048">expected</span>&nbsp;<span class="op" id="8463057">*</span><span class="ident" id="8463058">statsResults</span><span class="op" id="8463070">)</span>&nbsp;<span class="op" id="8463072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463075">chunk</span>&nbsp;<span class="op" id="8463081">:=</span>&nbsp;<span class="builtinfunc" id="8463084">len</span><span class="op" id="8463087">(</span><span class="ident" id="8463088">samples</span><span class="op" id="8463095">)</span>&nbsp;<span class="op" id="8463097">/</span>&nbsp;<span class="ident" id="8463099">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8463108">for</span>&nbsp;<span class="ident" id="8463112">i</span>&nbsp;<span class="op" id="8463114">:=</span>&nbsp;<span class="num" id="8463117">0</span><span class="op" id="8463118">;</span>&nbsp;<span class="ident" id="8463120">i</span>&nbsp;<span class="op" id="8463122">&lt;</span>&nbsp;<span class="ident" id="8463124">nslices</span><span class="op" id="8463131">;</span>&nbsp;<span class="ident" id="8463133">i</span><span class="op" id="8463134">++</span>&nbsp;<span class="op" id="8463137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463141">low</span>&nbsp;<span class="op" id="8463145">:=</span>&nbsp;<span class="ident" id="8463148">i</span>&nbsp;<span class="op" id="8463150">*</span>&nbsp;<span class="ident" id="8463152">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8463160">var</span>&nbsp;<span class="ident" id="8463164">high</span>&nbsp;<span class="builtintype" id="8463169">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8463175">if</span>&nbsp;<span class="ident" id="8463178">i</span>&nbsp;<span class="op" id="8463180">==</span>&nbsp;<span class="ident" id="8463183">nslices</span><span class="op" id="8463190">-</span><span class="num" id="8463191">1</span>&nbsp;<span class="op" id="8463193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463198">high</span>&nbsp;<span class="op" id="8463203">=</span>&nbsp;<span class="builtinfunc" id="8463205">len</span><span class="op" id="8463208">(</span><span class="ident" id="8463209">samples</span><span class="op" id="8463216">)</span>&nbsp;<span class="op" id="8463218">-</span>&nbsp;<span class="num" id="8463220">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8463224">}</span>&nbsp;<span class="keyword" id="8463226">else</span>&nbsp;<span class="op" id="8463231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463236">high</span>&nbsp;<span class="op" id="8463241">=</span>&nbsp;<span class="op" id="8463243">(</span><span class="ident" id="8463244">i</span>&nbsp;<span class="op" id="8463246">+</span>&nbsp;<span class="num" id="8463248">1</span><span class="op" id="8463249">)</span>&nbsp;<span class="op" id="8463251">*</span>&nbsp;<span class="ident" id="8463253">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8463261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463265">checkSampleDistribution</span><span class="op" id="8463288">(</span><span class="ident" id="8463289">t</span><span class="op" id="8463290">,</span>&nbsp;<span class="ident" id="8463292">samples</span><span class="op" id="8463299">[</span><span class="ident" id="8463300">low</span><span class="op" id="8463303">:</span><span class="ident" id="8463304">high</span><span class="op" id="8463308">]</span><span class="op" id="8463309">,</span>&nbsp;<span class="ident" id="8463311">expected</span><span class="op" id="8463319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8463322">}</span><br>
<span class="lineno">90</span><span class="op" id="8463324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8463327">//</span><br>
<span class="lineno"></span><span class="comment" id="8463330">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="8463359">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8463363">func</span>&nbsp;<span class="ident" id="8463368">generateNormalSamples</span><span class="op" id="8463389">(</span><span class="ident" id="8463390">nsamples</span>&nbsp;<span class="builtintype" id="8463399">int</span><span class="op" id="8463402">,</span>&nbsp;<span class="ident" id="8463404">mean</span><span class="op" id="8463408">,</span>&nbsp;<span class="ident" id="8463410">stddev</span>&nbsp;<span class="builtintype" id="8463417">float64</span><span class="op" id="8463424">,</span>&nbsp;<span class="ident" id="8463426">seed</span>&nbsp;<span class="ident" id="8463431">int64</span><span class="op" id="8463436">)</span>&nbsp;<span class="op" id="8463438">[</span><span class="op" id="8463439">]</span><span class="builtintype" id="8463440">float64</span>&nbsp;<span class="op" id="8463448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463451">r</span>&nbsp;<span class="op" id="8463453">:=</span>&nbsp;<span class="ident" id="8463456">New</span><span class="op" id="8463459">(</span><span class="ident" id="8463460">NewSource</span><span class="op" id="8463469">(</span><span class="ident" id="8463470">seed</span><span class="op" id="8463474">)</span><span class="op" id="8463475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463478">samples</span>&nbsp;<span class="op" id="8463486">:=</span>&nbsp;<span class="builtinfunc" id="8463489">make</span><span class="op" id="8463493">(</span><span class="op" id="8463494">[</span><span class="op" id="8463495">]</span><span class="builtintype" id="8463496">float64</span><span class="op" id="8463503">,</span>&nbsp;<span class="ident" id="8463505">nsamples</span><span class="op" id="8463513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8463516">for</span>&nbsp;<span class="ident" id="8463520">i</span>&nbsp;<span class="op" id="8463522">:=</span>&nbsp;<span class="keyword" id="8463525">range</span>&nbsp;<span class="ident" id="8463531">samples</span>&nbsp;<span class="op" id="8463539">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463543">samples</span><span class="op" id="8463550">[</span><span class="ident" id="8463551">i</span><span class="op" id="8463552">]</span>&nbsp;<span class="op" id="8463554">=</span>&nbsp;<span class="ident" id="8463556">r</span><span class="op" id="8463557">.</span><span class="ident" id="8463558">NormFloat64</span><span class="op" id="8463569">(</span><span class="op" id="8463570">)</span><span class="op" id="8463571">*</span><span class="ident" id="8463572">stddev</span>&nbsp;<span class="op" id="8463579">+</span>&nbsp;<span class="ident" id="8463581">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8463587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8463590">return</span>&nbsp;<span class="ident" id="8463597">samples</span><br>
<span class="lineno"></span><span class="op" id="8463605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="8463608">func</span>&nbsp;<span class="ident" id="8463613">testNormalDistribution</span><span class="op" id="8463635">(</span><span class="ident" id="8463636">t</span>&nbsp;<span class="op" id="8463638">*</span><span class="ident" id="8463639">testing</span><span class="op" id="8463646">.</span><span class="ident" id="8463647">T</span><span class="op" id="8463648">,</span>&nbsp;<span class="ident" id="8463650">nsamples</span>&nbsp;<span class="builtintype" id="8463659">int</span><span class="op" id="8463662">,</span>&nbsp;<span class="ident" id="8463664">mean</span><span class="op" id="8463668">,</span>&nbsp;<span class="ident" id="8463670">stddev</span>&nbsp;<span class="builtintype" id="8463677">float64</span><span class="op" id="8463684">,</span>&nbsp;<span class="ident" id="8463686">seed</span>&nbsp;<span class="ident" id="8463691">int64</span><span class="op" id="8463696">)</span>&nbsp;<span class="op" id="8463698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8463701">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463798">samples</span>&nbsp;<span class="op" id="8463806">:=</span>&nbsp;<span class="ident" id="8463809">generateNormalSamples</span><span class="op" id="8463830">(</span><span class="ident" id="8463831">nsamples</span><span class="op" id="8463839">,</span>&nbsp;<span class="ident" id="8463841">mean</span><span class="op" id="8463845">,</span>&nbsp;<span class="ident" id="8463847">stddev</span><span class="op" id="8463853">,</span>&nbsp;<span class="ident" id="8463855">seed</span><span class="op" id="8463859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463862">errorScale</span>&nbsp;<span class="op" id="8463873">:=</span>&nbsp;<span class="ident" id="8463876">max</span><span class="op" id="8463879">(</span><span class="num" id="8463880">1.0</span><span class="op" id="8463883">,</span>&nbsp;<span class="ident" id="8463885">stddev</span><span class="op" id="8463891">)</span>&nbsp;<span class="comment" id="8463893">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8463922">expected</span>&nbsp;<span class="op" id="8463931">:=</span>&nbsp;<span class="op" id="8463934">&amp;</span><span class="ident" id="8463935">statsResults</span><span class="op" id="8463947">{</span><span class="ident" id="8463948">mean</span><span class="op" id="8463952">,</span>&nbsp;<span class="ident" id="8463954">stddev</span><span class="op" id="8463960">,</span>&nbsp;<span class="num" id="8463962">0.10</span>&nbsp;<span class="op" id="8463967">*</span>&nbsp;<span class="ident" id="8463969">errorScale</span><span class="op" id="8463979">,</span>&nbsp;<span class="num" id="8463981">0.08</span>&nbsp;<span class="op" id="8463986">*</span>&nbsp;<span class="ident" id="8463988">errorScale</span><span class="op" id="8463998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8464002">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464071">checkSampleDistribution</span><span class="op" id="8464094">(</span><span class="ident" id="8464095">t</span><span class="op" id="8464096">,</span>&nbsp;<span class="ident" id="8464098">samples</span><span class="op" id="8464105">,</span>&nbsp;<span class="ident" id="8464107">expected</span><span class="op" id="8464115">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8464119">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464194">checkSampleSliceDistributions</span><span class="op" id="8464223">(</span><span class="ident" id="8464224">t</span><span class="op" id="8464225">,</span>&nbsp;<span class="ident" id="8464227">samples</span><span class="op" id="8464234">,</span>&nbsp;<span class="num" id="8464236">2</span><span class="op" id="8464237">,</span>&nbsp;<span class="ident" id="8464239">expected</span><span class="op" id="8464247">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8464251">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464325">checkSampleSliceDistributions</span><span class="op" id="8464354">(</span><span class="ident" id="8464355">t</span><span class="op" id="8464356">,</span>&nbsp;<span class="ident" id="8464358">samples</span><span class="op" id="8464365">,</span>&nbsp;<span class="num" id="8464367">7</span><span class="op" id="8464368">,</span>&nbsp;<span class="ident" id="8464370">expected</span><span class="op" id="8464378">)</span><br>
<span class="lineno">120</span><span class="op" id="8464380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8464383">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8464400">func</span>&nbsp;<span class="ident" id="8464405">TestStandardNormalValues</span><span class="op" id="8464429">(</span><span class="ident" id="8464430">t</span>&nbsp;<span class="op" id="8464432">*</span><span class="ident" id="8464433">testing</span><span class="op" id="8464440">.</span><span class="ident" id="8464441">T</span><span class="op" id="8464442">)</span>&nbsp;<span class="op" id="8464444">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464447">for</span>&nbsp;<span class="ident" id="8464451">_</span><span class="op" id="8464452">,</span>&nbsp;<span class="ident" id="8464454">seed</span>&nbsp;<span class="op" id="8464459">:=</span>&nbsp;<span class="keyword" id="8464462">range</span>&nbsp;<span class="ident" id="8464468">testSeeds</span>&nbsp;<span class="op" id="8464478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464482">testNormalDistribution</span><span class="op" id="8464504">(</span><span class="ident" id="8464505">t</span><span class="op" id="8464506">,</span>&nbsp;<span class="ident" id="8464508">numTestSamples</span><span class="op" id="8464522">,</span>&nbsp;<span class="num" id="8464524">0</span><span class="op" id="8464525">,</span>&nbsp;<span class="num" id="8464527">1</span><span class="op" id="8464528">,</span>&nbsp;<span class="ident" id="8464530">seed</span><span class="op" id="8464534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8464537">}</span><br>
<span class="lineno"></span><span class="op" id="8464539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="8464542">func</span>&nbsp;<span class="ident" id="8464547">TestNonStandardNormalValues</span><span class="op" id="8464574">(</span><span class="ident" id="8464575">t</span>&nbsp;<span class="op" id="8464577">*</span><span class="ident" id="8464578">testing</span><span class="op" id="8464585">.</span><span class="ident" id="8464586">T</span><span class="op" id="8464587">)</span>&nbsp;<span class="op" id="8464589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464592">sdmax</span>&nbsp;<span class="op" id="8464598">:=</span>&nbsp;<span class="num" id="8464601">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464609">mmax</span>&nbsp;<span class="op" id="8464614">:=</span>&nbsp;<span class="num" id="8464617">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464625">if</span>&nbsp;<span class="ident" id="8464628">testing</span><span class="op" id="8464635">.</span><span class="ident" id="8464636">Short</span><span class="op" id="8464641">(</span><span class="op" id="8464642">)</span>&nbsp;<span class="op" id="8464644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464648">sdmax</span>&nbsp;<span class="op" id="8464654">=</span>&nbsp;<span class="num" id="8464656">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464660">mmax</span>&nbsp;<span class="op" id="8464665">=</span>&nbsp;<span class="num" id="8464667">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8464670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464673">for</span>&nbsp;<span class="ident" id="8464677">sd</span>&nbsp;<span class="op" id="8464680">:=</span>&nbsp;<span class="num" id="8464683">0.5</span><span class="op" id="8464686">;</span>&nbsp;<span class="ident" id="8464688">sd</span>&nbsp;<span class="op" id="8464691">&lt;</span>&nbsp;<span class="ident" id="8464693">sdmax</span><span class="op" id="8464698">;</span>&nbsp;<span class="ident" id="8464700">sd</span>&nbsp;<span class="op" id="8464703">*=</span>&nbsp;<span class="num" id="8464706">2</span>&nbsp;<span class="op" id="8464708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464712">for</span>&nbsp;<span class="ident" id="8464716">m</span>&nbsp;<span class="op" id="8464718">:=</span>&nbsp;<span class="num" id="8464721">0.5</span><span class="op" id="8464724">;</span>&nbsp;<span class="ident" id="8464726">m</span>&nbsp;<span class="op" id="8464728">&lt;</span>&nbsp;<span class="ident" id="8464730">mmax</span><span class="op" id="8464734">;</span>&nbsp;<span class="ident" id="8464736">m</span>&nbsp;<span class="op" id="8464738">*=</span>&nbsp;<span class="num" id="8464741">2</span>&nbsp;<span class="op" id="8464743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464748">for</span>&nbsp;<span class="ident" id="8464752">_</span><span class="op" id="8464753">,</span>&nbsp;<span class="ident" id="8464755">seed</span>&nbsp;<span class="op" id="8464760">:=</span>&nbsp;<span class="keyword" id="8464763">range</span>&nbsp;<span class="ident" id="8464769">testSeeds</span>&nbsp;<span class="op" id="8464779">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8464785">testNormalDistribution</span><span class="op" id="8464807">(</span><span class="ident" id="8464808">t</span><span class="op" id="8464809">,</span>&nbsp;<span class="ident" id="8464811">numTestSamples</span><span class="op" id="8464825">,</span>&nbsp;<span class="ident" id="8464827">m</span><span class="op" id="8464828">,</span>&nbsp;<span class="ident" id="8464830">sd</span><span class="op" id="8464832">,</span>&nbsp;<span class="ident" id="8464834">seed</span><span class="op" id="8464838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464844">if</span>&nbsp;<span class="ident" id="8464847">testing</span><span class="op" id="8464854">.</span><span class="ident" id="8464855">Short</span><span class="op" id="8464860">(</span><span class="op" id="8464861">)</span>&nbsp;<span class="op" id="8464863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8464870">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8464880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8464885">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8464889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8464892">}</span><br>
<span class="lineno"></span><span class="op" id="8464894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8464897">//</span><br>
<span class="lineno">150</span><span class="comment" id="8464900">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="8464934">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8464938">func</span>&nbsp;<span class="ident" id="8464943">generateExponentialSamples</span><span class="op" id="8464969">(</span><span class="ident" id="8464970">nsamples</span>&nbsp;<span class="builtintype" id="8464979">int</span><span class="op" id="8464982">,</span>&nbsp;<span class="ident" id="8464984">rate</span>&nbsp;<span class="builtintype" id="8464989">float64</span><span class="op" id="8464996">,</span>&nbsp;<span class="ident" id="8464998">seed</span>&nbsp;<span class="ident" id="8465003">int64</span><span class="op" id="8465008">)</span>&nbsp;<span class="op" id="8465010">[</span><span class="op" id="8465011">]</span><span class="builtintype" id="8465012">float64</span>&nbsp;<span class="op" id="8465020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465023">r</span>&nbsp;<span class="op" id="8465025">:=</span>&nbsp;<span class="ident" id="8465028">New</span><span class="op" id="8465031">(</span><span class="ident" id="8465032">NewSource</span><span class="op" id="8465041">(</span><span class="ident" id="8465042">seed</span><span class="op" id="8465046">)</span><span class="op" id="8465047">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465050">samples</span>&nbsp;<span class="op" id="8465058">:=</span>&nbsp;<span class="builtinfunc" id="8465061">make</span><span class="op" id="8465065">(</span><span class="op" id="8465066">[</span><span class="op" id="8465067">]</span><span class="builtintype" id="8465068">float64</span><span class="op" id="8465075">,</span>&nbsp;<span class="ident" id="8465077">nsamples</span><span class="op" id="8465085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8465088">for</span>&nbsp;<span class="ident" id="8465092">i</span>&nbsp;<span class="op" id="8465094">:=</span>&nbsp;<span class="keyword" id="8465097">range</span>&nbsp;<span class="ident" id="8465103">samples</span>&nbsp;<span class="op" id="8465111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465115">samples</span><span class="op" id="8465122">[</span><span class="ident" id="8465123">i</span><span class="op" id="8465124">]</span>&nbsp;<span class="op" id="8465126">=</span>&nbsp;<span class="ident" id="8465128">r</span><span class="op" id="8465129">.</span><span class="ident" id="8465130">ExpFloat64</span><span class="op" id="8465140">(</span><span class="op" id="8465141">)</span>&nbsp;<span class="op" id="8465143">/</span>&nbsp;<span class="ident" id="8465145">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8465154">return</span>&nbsp;<span class="ident" id="8465161">samples</span><br>
<span class="lineno">160</span><span class="op" id="8465169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8465172">func</span>&nbsp;<span class="ident" id="8465177">testExponentialDistribution</span><span class="op" id="8465204">(</span><span class="ident" id="8465205">t</span>&nbsp;<span class="op" id="8465207">*</span><span class="ident" id="8465208">testing</span><span class="op" id="8465215">.</span><span class="ident" id="8465216">T</span><span class="op" id="8465217">,</span>&nbsp;<span class="ident" id="8465219">nsamples</span>&nbsp;<span class="builtintype" id="8465228">int</span><span class="op" id="8465231">,</span>&nbsp;<span class="ident" id="8465233">rate</span>&nbsp;<span class="builtintype" id="8465238">float64</span><span class="op" id="8465245">,</span>&nbsp;<span class="ident" id="8465247">seed</span>&nbsp;<span class="ident" id="8465252">int64</span><span class="op" id="8465257">)</span>&nbsp;<span class="op" id="8465259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8465262">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465341">mean</span>&nbsp;<span class="op" id="8465346">:=</span>&nbsp;<span class="num" id="8465349">1</span>&nbsp;<span class="op" id="8465351">/</span>&nbsp;<span class="ident" id="8465353">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465359">stddev</span>&nbsp;<span class="op" id="8465366">:=</span>&nbsp;<span class="ident" id="8465369">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465376">samples</span>&nbsp;<span class="op" id="8465384">:=</span>&nbsp;<span class="ident" id="8465387">generateExponentialSamples</span><span class="op" id="8465413">(</span><span class="ident" id="8465414">nsamples</span><span class="op" id="8465422">,</span>&nbsp;<span class="ident" id="8465424">rate</span><span class="op" id="8465428">,</span>&nbsp;<span class="ident" id="8465430">seed</span><span class="op" id="8465434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465437">errorScale</span>&nbsp;<span class="op" id="8465448">:=</span>&nbsp;<span class="ident" id="8465451">max</span><span class="op" id="8465454">(</span><span class="num" id="8465455">1.0</span><span class="op" id="8465458">,</span>&nbsp;<span class="num" id="8465460">1</span><span class="op" id="8465461">/</span><span class="ident" id="8465462">rate</span><span class="op" id="8465466">)</span>&nbsp;<span class="comment" id="8465468">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465514">expected</span>&nbsp;<span class="op" id="8465523">:=</span>&nbsp;<span class="op" id="8465526">&amp;</span><span class="ident" id="8465527">statsResults</span><span class="op" id="8465539">{</span><span class="ident" id="8465540">mean</span><span class="op" id="8465544">,</span>&nbsp;<span class="ident" id="8465546">stddev</span><span class="op" id="8465552">,</span>&nbsp;<span class="num" id="8465554">0.10</span>&nbsp;<span class="op" id="8465559">*</span>&nbsp;<span class="ident" id="8465561">errorScale</span><span class="op" id="8465571">,</span>&nbsp;<span class="num" id="8465573">0.20</span>&nbsp;<span class="op" id="8465578">*</span>&nbsp;<span class="ident" id="8465580">errorScale</span><span class="op" id="8465590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8465594">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465663">checkSampleDistribution</span><span class="op" id="8465686">(</span><span class="ident" id="8465687">t</span><span class="op" id="8465688">,</span>&nbsp;<span class="ident" id="8465690">samples</span><span class="op" id="8465697">,</span>&nbsp;<span class="ident" id="8465699">expected</span><span class="op" id="8465707">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8465711">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465786">checkSampleSliceDistributions</span><span class="op" id="8465815">(</span><span class="ident" id="8465816">t</span><span class="op" id="8465817">,</span>&nbsp;<span class="ident" id="8465819">samples</span><span class="op" id="8465826">,</span>&nbsp;<span class="num" id="8465828">2</span><span class="op" id="8465829">,</span>&nbsp;<span class="ident" id="8465831">expected</span><span class="op" id="8465839">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8465843">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8465917">checkSampleSliceDistributions</span><span class="op" id="8465946">(</span><span class="ident" id="8465947">t</span><span class="op" id="8465948">,</span>&nbsp;<span class="ident" id="8465950">samples</span><span class="op" id="8465957">,</span>&nbsp;<span class="num" id="8465959">7</span><span class="op" id="8465960">,</span>&nbsp;<span class="ident" id="8465962">expected</span><span class="op" id="8465970">)</span><br>
<span class="lineno">180</span><span class="op" id="8465972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8465975">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8465992">func</span>&nbsp;<span class="ident" id="8465997">TestStandardExponentialValues</span><span class="op" id="8466026">(</span><span class="ident" id="8466027">t</span>&nbsp;<span class="op" id="8466029">*</span><span class="ident" id="8466030">testing</span><span class="op" id="8466037">.</span><span class="ident" id="8466038">T</span><span class="op" id="8466039">)</span>&nbsp;<span class="op" id="8466041">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466044">for</span>&nbsp;<span class="ident" id="8466048">_</span><span class="op" id="8466049">,</span>&nbsp;<span class="ident" id="8466051">seed</span>&nbsp;<span class="op" id="8466056">:=</span>&nbsp;<span class="keyword" id="8466059">range</span>&nbsp;<span class="ident" id="8466065">testSeeds</span>&nbsp;<span class="op" id="8466075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466079">testExponentialDistribution</span><span class="op" id="8466106">(</span><span class="ident" id="8466107">t</span><span class="op" id="8466108">,</span>&nbsp;<span class="ident" id="8466110">numTestSamples</span><span class="op" id="8466124">,</span>&nbsp;<span class="num" id="8466126">1</span><span class="op" id="8466127">,</span>&nbsp;<span class="ident" id="8466129">seed</span><span class="op" id="8466133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466136">}</span><br>
<span class="lineno"></span><span class="op" id="8466138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="8466141">func</span>&nbsp;<span class="ident" id="8466146">TestNonStandardExponentialValues</span><span class="op" id="8466178">(</span><span class="ident" id="8466179">t</span>&nbsp;<span class="op" id="8466181">*</span><span class="ident" id="8466182">testing</span><span class="op" id="8466189">.</span><span class="ident" id="8466190">T</span><span class="op" id="8466191">)</span>&nbsp;<span class="op" id="8466193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466196">for</span>&nbsp;<span class="ident" id="8466200">rate</span>&nbsp;<span class="op" id="8466205">:=</span>&nbsp;<span class="num" id="8466208">0.05</span><span class="op" id="8466212">;</span>&nbsp;<span class="ident" id="8466214">rate</span>&nbsp;<span class="op" id="8466219">&lt;</span>&nbsp;<span class="num" id="8466221">10</span><span class="op" id="8466223">;</span>&nbsp;<span class="ident" id="8466225">rate</span>&nbsp;<span class="op" id="8466230">*=</span>&nbsp;<span class="num" id="8466233">2</span>&nbsp;<span class="op" id="8466235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466239">for</span>&nbsp;<span class="ident" id="8466243">_</span><span class="op" id="8466244">,</span>&nbsp;<span class="ident" id="8466246">seed</span>&nbsp;<span class="op" id="8466251">:=</span>&nbsp;<span class="keyword" id="8466254">range</span>&nbsp;<span class="ident" id="8466260">testSeeds</span>&nbsp;<span class="op" id="8466270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466275">testExponentialDistribution</span><span class="op" id="8466302">(</span><span class="ident" id="8466303">t</span><span class="op" id="8466304">,</span>&nbsp;<span class="ident" id="8466306">numTestSamples</span><span class="op" id="8466320">,</span>&nbsp;<span class="ident" id="8466322">rate</span><span class="op" id="8466326">,</span>&nbsp;<span class="ident" id="8466328">seed</span><span class="op" id="8466332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466337">if</span>&nbsp;<span class="ident" id="8466340">testing</span><span class="op" id="8466347">.</span><span class="ident" id="8466348">Short</span><span class="op" id="8466353">(</span><span class="op" id="8466354">)</span>&nbsp;<span class="op" id="8466356">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466362">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466378">}</span><br>
<span class="lineno"></span><span class="op" id="8466380">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="8466383">//</span><br>
<span class="lineno"></span><span class="comment" id="8466386">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="8466412">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="8466416">func</span>&nbsp;<span class="ident" id="8466421">initNorm</span><span class="op" id="8466429">(</span><span class="op" id="8466430">)</span>&nbsp;<span class="op" id="8466432">(</span><span class="ident" id="8466433">testKn</span>&nbsp;<span class="op" id="8466440">[</span><span class="op" id="8466441">]</span><span class="builtintype" id="8466442">uint32</span><span class="op" id="8466448">,</span>&nbsp;<span class="ident" id="8466450">testWn</span><span class="op" id="8466456">,</span>&nbsp;<span class="ident" id="8466458">testFn</span>&nbsp;<span class="op" id="8466465">[</span><span class="op" id="8466466">]</span><span class="builtintype" id="8466467">float32</span><span class="op" id="8466474">)</span>&nbsp;<span class="op" id="8466476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466479">const</span>&nbsp;<span class="ident" id="8466485">m1</span>&nbsp;<span class="op" id="8466488">=</span>&nbsp;<span class="num" id="8466490">1</span>&nbsp;<span class="op" id="8466492">&lt;&lt;</span>&nbsp;<span class="num" id="8466495">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466499">var</span>&nbsp;<span class="op" id="8466503">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466507">dn</span>&nbsp;<span class="builtintype" id="8466510">float64</span>&nbsp;<span class="op" id="8466518">=</span>&nbsp;<span class="ident" id="8466520">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466525">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466536">=</span>&nbsp;<span class="ident" id="8466538">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466543">vn</span>&nbsp;<span class="builtintype" id="8466546">float64</span>&nbsp;<span class="op" id="8466554">=</span>&nbsp;<span class="num" id="8466556">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466577">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466581">testKn</span>&nbsp;<span class="op" id="8466588">=</span>&nbsp;<span class="builtinfunc" id="8466590">make</span><span class="op" id="8466594">(</span><span class="op" id="8466595">[</span><span class="op" id="8466596">]</span><span class="builtintype" id="8466597">uint32</span><span class="op" id="8466603">,</span>&nbsp;<span class="num" id="8466605">128</span><span class="op" id="8466608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466611">testWn</span>&nbsp;<span class="op" id="8466618">=</span>&nbsp;<span class="builtinfunc" id="8466620">make</span><span class="op" id="8466624">(</span><span class="op" id="8466625">[</span><span class="op" id="8466626">]</span><span class="builtintype" id="8466627">float32</span><span class="op" id="8466634">,</span>&nbsp;<span class="num" id="8466636">128</span><span class="op" id="8466639">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466642">testFn</span>&nbsp;<span class="op" id="8466649">=</span>&nbsp;<span class="builtinfunc" id="8466651">make</span><span class="op" id="8466655">(</span><span class="op" id="8466656">[</span><span class="op" id="8466657">]</span><span class="builtintype" id="8466658">float32</span><span class="op" id="8466665">,</span>&nbsp;<span class="num" id="8466667">128</span><span class="op" id="8466670">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466674">q</span>&nbsp;<span class="op" id="8466676">:=</span>&nbsp;<span class="ident" id="8466679">vn</span>&nbsp;<span class="op" id="8466682">/</span>&nbsp;<span class="ident" id="8466684">math</span><span class="op" id="8466688">.</span><span class="ident" id="8466689">Exp</span><span class="op" id="8466692">(</span><span class="op" id="8466693">-</span><span class="num" id="8466694">0.5</span><span class="op" id="8466697">*</span><span class="ident" id="8466698">dn</span><span class="op" id="8466700">*</span><span class="ident" id="8466701">dn</span><span class="op" id="8466703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466706">testKn</span><span class="op" id="8466712">[</span><span class="num" id="8466713">0</span><span class="op" id="8466714">]</span>&nbsp;<span class="op" id="8466716">=</span>&nbsp;<span class="builtintype" id="8466718">uint32</span><span class="op" id="8466724">(</span><span class="op" id="8466725">(</span><span class="ident" id="8466726">dn</span>&nbsp;<span class="op" id="8466729">/</span>&nbsp;<span class="ident" id="8466731">q</span><span class="op" id="8466732">)</span>&nbsp;<span class="op" id="8466734">*</span>&nbsp;<span class="ident" id="8466736">m1</span><span class="op" id="8466738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466741">testKn</span><span class="op" id="8466747">[</span><span class="num" id="8466748">1</span><span class="op" id="8466749">]</span>&nbsp;<span class="op" id="8466751">=</span>&nbsp;<span class="num" id="8466753">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466756">testWn</span><span class="op" id="8466762">[</span><span class="num" id="8466763">0</span><span class="op" id="8466764">]</span>&nbsp;<span class="op" id="8466766">=</span>&nbsp;<span class="builtintype" id="8466768">float32</span><span class="op" id="8466775">(</span><span class="ident" id="8466776">q</span>&nbsp;<span class="op" id="8466778">/</span>&nbsp;<span class="ident" id="8466780">m1</span><span class="op" id="8466782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466785">testWn</span><span class="op" id="8466791">[</span><span class="num" id="8466792">127</span><span class="op" id="8466795">]</span>&nbsp;<span class="op" id="8466797">=</span>&nbsp;<span class="builtintype" id="8466799">float32</span><span class="op" id="8466806">(</span><span class="ident" id="8466807">dn</span>&nbsp;<span class="op" id="8466810">/</span>&nbsp;<span class="ident" id="8466812">m1</span><span class="op" id="8466814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466817">testFn</span><span class="op" id="8466823">[</span><span class="num" id="8466824">0</span><span class="op" id="8466825">]</span>&nbsp;<span class="op" id="8466827">=</span>&nbsp;<span class="num" id="8466829">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466834">testFn</span><span class="op" id="8466840">[</span><span class="num" id="8466841">127</span><span class="op" id="8466844">]</span>&nbsp;<span class="op" id="8466846">=</span>&nbsp;<span class="builtintype" id="8466848">float32</span><span class="op" id="8466855">(</span><span class="ident" id="8466856">math</span><span class="op" id="8466860">.</span><span class="ident" id="8466861">Exp</span><span class="op" id="8466864">(</span><span class="op" id="8466865">-</span><span class="num" id="8466866">0.5</span>&nbsp;<span class="op" id="8466870">*</span>&nbsp;<span class="ident" id="8466872">dn</span>&nbsp;<span class="op" id="8466875">*</span>&nbsp;<span class="ident" id="8466877">dn</span><span class="op" id="8466879">)</span><span class="op" id="8466880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8466883">for</span>&nbsp;<span class="ident" id="8466887">i</span>&nbsp;<span class="op" id="8466889">:=</span>&nbsp;<span class="num" id="8466892">126</span><span class="op" id="8466895">;</span>&nbsp;<span class="ident" id="8466897">i</span>&nbsp;<span class="op" id="8466899">&gt;=</span>&nbsp;<span class="num" id="8466902">1</span><span class="op" id="8466903">;</span>&nbsp;<span class="ident" id="8466905">i</span><span class="op" id="8466906">--</span>&nbsp;<span class="op" id="8466909">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466913">dn</span>&nbsp;<span class="op" id="8466916">=</span>&nbsp;<span class="ident" id="8466918">math</span><span class="op" id="8466922">.</span><span class="ident" id="8466923">Sqrt</span><span class="op" id="8466927">(</span><span class="op" id="8466928">-</span><span class="num" id="8466929">2.0</span>&nbsp;<span class="op" id="8466933">*</span>&nbsp;<span class="ident" id="8466935">math</span><span class="op" id="8466939">.</span><span class="ident" id="8466940">Log</span><span class="op" id="8466943">(</span><span class="ident" id="8466944">vn</span><span class="op" id="8466946">/</span><span class="ident" id="8466947">dn</span><span class="op" id="8466949">+</span><span class="ident" id="8466950">math</span><span class="op" id="8466954">.</span><span class="ident" id="8466955">Exp</span><span class="op" id="8466958">(</span><span class="op" id="8466959">-</span><span class="num" id="8466960">0.5</span><span class="op" id="8466963">*</span><span class="ident" id="8466964">dn</span><span class="op" id="8466966">*</span><span class="ident" id="8466967">dn</span><span class="op" id="8466969">)</span><span class="op" id="8466970">)</span><span class="op" id="8466971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8466975">testKn</span><span class="op" id="8466981">[</span><span class="ident" id="8466982">i</span><span class="op" id="8466983">+</span><span class="num" id="8466984">1</span><span class="op" id="8466985">]</span>&nbsp;<span class="op" id="8466987">=</span>&nbsp;<span class="builtintype" id="8466989">uint32</span><span class="op" id="8466995">(</span><span class="op" id="8466996">(</span><span class="ident" id="8466997">dn</span>&nbsp;<span class="op" id="8467000">/</span>&nbsp;<span class="ident" id="8467002">tn</span><span class="op" id="8467004">)</span>&nbsp;<span class="op" id="8467006">*</span>&nbsp;<span class="ident" id="8467008">m1</span><span class="op" id="8467010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467014">tn</span>&nbsp;<span class="op" id="8467017">=</span>&nbsp;<span class="ident" id="8467019">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467024">testFn</span><span class="op" id="8467030">[</span><span class="ident" id="8467031">i</span><span class="op" id="8467032">]</span>&nbsp;<span class="op" id="8467034">=</span>&nbsp;<span class="builtintype" id="8467036">float32</span><span class="op" id="8467043">(</span><span class="ident" id="8467044">math</span><span class="op" id="8467048">.</span><span class="ident" id="8467049">Exp</span><span class="op" id="8467052">(</span><span class="op" id="8467053">-</span><span class="num" id="8467054">0.5</span>&nbsp;<span class="op" id="8467058">*</span>&nbsp;<span class="ident" id="8467060">dn</span>&nbsp;<span class="op" id="8467063">*</span>&nbsp;<span class="ident" id="8467065">dn</span><span class="op" id="8467067">)</span><span class="op" id="8467068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467072">testWn</span><span class="op" id="8467078">[</span><span class="ident" id="8467079">i</span><span class="op" id="8467080">]</span>&nbsp;<span class="op" id="8467082">=</span>&nbsp;<span class="builtintype" id="8467084">float32</span><span class="op" id="8467091">(</span><span class="ident" id="8467092">dn</span>&nbsp;<span class="op" id="8467095">/</span>&nbsp;<span class="ident" id="8467097">m1</span><span class="op" id="8467099">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8467102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467105">return</span><br>
<span class="lineno"></span><span class="op" id="8467112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8467115">func</span>&nbsp;<span class="ident" id="8467120">initExp</span><span class="op" id="8467127">(</span><span class="op" id="8467128">)</span>&nbsp;<span class="op" id="8467130">(</span><span class="ident" id="8467131">testKe</span>&nbsp;<span class="op" id="8467138">[</span><span class="op" id="8467139">]</span><span class="builtintype" id="8467140">uint32</span><span class="op" id="8467146">,</span>&nbsp;<span class="ident" id="8467148">testWe</span><span class="op" id="8467154">,</span>&nbsp;<span class="ident" id="8467156">testFe</span>&nbsp;<span class="op" id="8467163">[</span><span class="op" id="8467164">]</span><span class="builtintype" id="8467165">float32</span><span class="op" id="8467172">)</span>&nbsp;<span class="op" id="8467174">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467177">const</span>&nbsp;<span class="ident" id="8467183">m2</span>&nbsp;<span class="op" id="8467186">=</span>&nbsp;<span class="num" id="8467188">1</span>&nbsp;<span class="op" id="8467190">&lt;&lt;</span>&nbsp;<span class="num" id="8467193">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467197">var</span>&nbsp;<span class="op" id="8467201">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467205">de</span>&nbsp;<span class="builtintype" id="8467208">float64</span>&nbsp;<span class="op" id="8467216">=</span>&nbsp;<span class="ident" id="8467218">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467223">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8467234">=</span>&nbsp;<span class="ident" id="8467236">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467241">ve</span>&nbsp;<span class="builtintype" id="8467244">float64</span>&nbsp;<span class="op" id="8467252">=</span>&nbsp;<span class="num" id="8467254">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8467280">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467284">testKe</span>&nbsp;<span class="op" id="8467291">=</span>&nbsp;<span class="builtinfunc" id="8467293">make</span><span class="op" id="8467297">(</span><span class="op" id="8467298">[</span><span class="op" id="8467299">]</span><span class="builtintype" id="8467300">uint32</span><span class="op" id="8467306">,</span>&nbsp;<span class="num" id="8467308">256</span><span class="op" id="8467311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467314">testWe</span>&nbsp;<span class="op" id="8467321">=</span>&nbsp;<span class="builtinfunc" id="8467323">make</span><span class="op" id="8467327">(</span><span class="op" id="8467328">[</span><span class="op" id="8467329">]</span><span class="builtintype" id="8467330">float32</span><span class="op" id="8467337">,</span>&nbsp;<span class="num" id="8467339">256</span><span class="op" id="8467342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467345">testFe</span>&nbsp;<span class="op" id="8467352">=</span>&nbsp;<span class="builtinfunc" id="8467354">make</span><span class="op" id="8467358">(</span><span class="op" id="8467359">[</span><span class="op" id="8467360">]</span><span class="builtintype" id="8467361">float32</span><span class="op" id="8467368">,</span>&nbsp;<span class="num" id="8467370">256</span><span class="op" id="8467373">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467377">q</span>&nbsp;<span class="op" id="8467379">:=</span>&nbsp;<span class="ident" id="8467382">ve</span>&nbsp;<span class="op" id="8467385">/</span>&nbsp;<span class="ident" id="8467387">math</span><span class="op" id="8467391">.</span><span class="ident" id="8467392">Exp</span><span class="op" id="8467395">(</span><span class="op" id="8467396">-</span><span class="ident" id="8467397">de</span><span class="op" id="8467399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467402">testKe</span><span class="op" id="8467408">[</span><span class="num" id="8467409">0</span><span class="op" id="8467410">]</span>&nbsp;<span class="op" id="8467412">=</span>&nbsp;<span class="builtintype" id="8467414">uint32</span><span class="op" id="8467420">(</span><span class="op" id="8467421">(</span><span class="ident" id="8467422">de</span>&nbsp;<span class="op" id="8467425">/</span>&nbsp;<span class="ident" id="8467427">q</span><span class="op" id="8467428">)</span>&nbsp;<span class="op" id="8467430">*</span>&nbsp;<span class="ident" id="8467432">m2</span><span class="op" id="8467434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467437">testKe</span><span class="op" id="8467443">[</span><span class="num" id="8467444">1</span><span class="op" id="8467445">]</span>&nbsp;<span class="op" id="8467447">=</span>&nbsp;<span class="num" id="8467449">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467452">testWe</span><span class="op" id="8467458">[</span><span class="num" id="8467459">0</span><span class="op" id="8467460">]</span>&nbsp;<span class="op" id="8467462">=</span>&nbsp;<span class="builtintype" id="8467464">float32</span><span class="op" id="8467471">(</span><span class="ident" id="8467472">q</span>&nbsp;<span class="op" id="8467474">/</span>&nbsp;<span class="ident" id="8467476">m2</span><span class="op" id="8467478">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467481">testWe</span><span class="op" id="8467487">[</span><span class="num" id="8467488">255</span><span class="op" id="8467491">]</span>&nbsp;<span class="op" id="8467493">=</span>&nbsp;<span class="builtintype" id="8467495">float32</span><span class="op" id="8467502">(</span><span class="ident" id="8467503">de</span>&nbsp;<span class="op" id="8467506">/</span>&nbsp;<span class="ident" id="8467508">m2</span><span class="op" id="8467510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467513">testFe</span><span class="op" id="8467519">[</span><span class="num" id="8467520">0</span><span class="op" id="8467521">]</span>&nbsp;<span class="op" id="8467523">=</span>&nbsp;<span class="num" id="8467525">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467530">testFe</span><span class="op" id="8467536">[</span><span class="num" id="8467537">255</span><span class="op" id="8467540">]</span>&nbsp;<span class="op" id="8467542">=</span>&nbsp;<span class="builtintype" id="8467544">float32</span><span class="op" id="8467551">(</span><span class="ident" id="8467552">math</span><span class="op" id="8467556">.</span><span class="ident" id="8467557">Exp</span><span class="op" id="8467560">(</span><span class="op" id="8467561">-</span><span class="ident" id="8467562">de</span><span class="op" id="8467564">)</span><span class="op" id="8467565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467568">for</span>&nbsp;<span class="ident" id="8467572">i</span>&nbsp;<span class="op" id="8467574">:=</span>&nbsp;<span class="num" id="8467577">254</span><span class="op" id="8467580">;</span>&nbsp;<span class="ident" id="8467582">i</span>&nbsp;<span class="op" id="8467584">&gt;=</span>&nbsp;<span class="num" id="8467587">1</span><span class="op" id="8467588">;</span>&nbsp;<span class="ident" id="8467590">i</span><span class="op" id="8467591">--</span>&nbsp;<span class="op" id="8467594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467598">de</span>&nbsp;<span class="op" id="8467601">=</span>&nbsp;<span class="op" id="8467603">-</span><span class="ident" id="8467604">math</span><span class="op" id="8467608">.</span><span class="ident" id="8467609">Log</span><span class="op" id="8467612">(</span><span class="ident" id="8467613">ve</span><span class="op" id="8467615">/</span><span class="ident" id="8467616">de</span>&nbsp;<span class="op" id="8467619">+</span>&nbsp;<span class="ident" id="8467621">math</span><span class="op" id="8467625">.</span><span class="ident" id="8467626">Exp</span><span class="op" id="8467629">(</span><span class="op" id="8467630">-</span><span class="ident" id="8467631">de</span><span class="op" id="8467633">)</span><span class="op" id="8467634">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467638">testKe</span><span class="op" id="8467644">[</span><span class="ident" id="8467645">i</span><span class="op" id="8467646">+</span><span class="num" id="8467647">1</span><span class="op" id="8467648">]</span>&nbsp;<span class="op" id="8467650">=</span>&nbsp;<span class="builtintype" id="8467652">uint32</span><span class="op" id="8467658">(</span><span class="op" id="8467659">(</span><span class="ident" id="8467660">de</span>&nbsp;<span class="op" id="8467663">/</span>&nbsp;<span class="ident" id="8467665">te</span><span class="op" id="8467667">)</span>&nbsp;<span class="op" id="8467669">*</span>&nbsp;<span class="ident" id="8467671">m2</span><span class="op" id="8467673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467677">te</span>&nbsp;<span class="op" id="8467680">=</span>&nbsp;<span class="ident" id="8467682">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467687">testFe</span><span class="op" id="8467693">[</span><span class="ident" id="8467694">i</span><span class="op" id="8467695">]</span>&nbsp;<span class="op" id="8467697">=</span>&nbsp;<span class="builtintype" id="8467699">float32</span><span class="op" id="8467706">(</span><span class="ident" id="8467707">math</span><span class="op" id="8467711">.</span><span class="ident" id="8467712">Exp</span><span class="op" id="8467715">(</span><span class="op" id="8467716">-</span><span class="ident" id="8467717">de</span><span class="op" id="8467719">)</span><span class="op" id="8467720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8467724">testWe</span><span class="op" id="8467730">[</span><span class="ident" id="8467731">i</span><span class="op" id="8467732">]</span>&nbsp;<span class="op" id="8467734">=</span>&nbsp;<span class="builtintype" id="8467736">float32</span><span class="op" id="8467743">(</span><span class="ident" id="8467744">de</span>&nbsp;<span class="op" id="8467747">/</span>&nbsp;<span class="ident" id="8467749">m2</span><span class="op" id="8467751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8467754">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467757">return</span><br>
<span class="lineno"></span><span class="op" id="8467764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8467767">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="8467835">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="8467899">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="8467917">func</span>&nbsp;<span class="ident" id="8467922">compareUint32Slices</span><span class="op" id="8467941">(</span><span class="ident" id="8467942">s1</span><span class="op" id="8467944">,</span>&nbsp;<span class="ident" id="8467946">s2</span>&nbsp;<span class="op" id="8467949">[</span><span class="op" id="8467950">]</span><span class="builtintype" id="8467951">uint32</span><span class="op" id="8467957">)</span>&nbsp;<span class="builtintype" id="8467959">int</span>&nbsp;<span class="op" id="8467963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467966">if</span>&nbsp;<span class="builtinfunc" id="8467969">len</span><span class="op" id="8467972">(</span><span class="ident" id="8467973">s1</span><span class="op" id="8467975">)</span>&nbsp;<span class="op" id="8467977">!=</span>&nbsp;<span class="builtinfunc" id="8467980">len</span><span class="op" id="8467983">(</span><span class="ident" id="8467984">s2</span><span class="op" id="8467986">)</span>&nbsp;<span class="op" id="8467988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8467992">if</span>&nbsp;<span class="builtinfunc" id="8467995">len</span><span class="op" id="8467998">(</span><span class="ident" id="8467999">s1</span><span class="op" id="8468001">)</span>&nbsp;<span class="op" id="8468003">&gt;</span>&nbsp;<span class="builtinfunc" id="8468005">len</span><span class="op" id="8468008">(</span><span class="ident" id="8468009">s2</span><span class="op" id="8468011">)</span>&nbsp;<span class="op" id="8468013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468018">return</span>&nbsp;<span class="builtinfunc" id="8468025">len</span><span class="op" id="8468028">(</span><span class="ident" id="8468029">s2</span><span class="op" id="8468031">)</span>&nbsp;<span class="op" id="8468033">+</span>&nbsp;<span class="num" id="8468035">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468043">return</span>&nbsp;<span class="builtinfunc" id="8468050">len</span><span class="op" id="8468053">(</span><span class="ident" id="8468054">s1</span><span class="op" id="8468056">)</span>&nbsp;<span class="op" id="8468058">+</span>&nbsp;<span class="num" id="8468060">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468066">for</span>&nbsp;<span class="ident" id="8468070">i</span>&nbsp;<span class="op" id="8468072">:=</span>&nbsp;<span class="keyword" id="8468075">range</span>&nbsp;<span class="ident" id="8468081">s1</span>&nbsp;<span class="op" id="8468084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468088">if</span>&nbsp;<span class="ident" id="8468091">s1</span><span class="op" id="8468093">[</span><span class="ident" id="8468094">i</span><span class="op" id="8468095">]</span>&nbsp;<span class="op" id="8468097">!=</span>&nbsp;<span class="ident" id="8468100">s2</span><span class="op" id="8468102">[</span><span class="ident" id="8468103">i</span><span class="op" id="8468104">]</span>&nbsp;<span class="op" id="8468106">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468111">return</span>&nbsp;<span class="ident" id="8468118">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468128">return</span>&nbsp;<span class="op" id="8468135">-</span><span class="num" id="8468136">1</span><br>
<span class="lineno"></span><span class="op" id="8468138">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="8468141">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="8468210">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="8468274">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="8468292">func</span>&nbsp;<span class="ident" id="8468297">compareFloat32Slices</span><span class="op" id="8468317">(</span><span class="ident" id="8468318">s1</span><span class="op" id="8468320">,</span>&nbsp;<span class="ident" id="8468322">s2</span>&nbsp;<span class="op" id="8468325">[</span><span class="op" id="8468326">]</span><span class="builtintype" id="8468327">float32</span><span class="op" id="8468334">)</span>&nbsp;<span class="builtintype" id="8468336">int</span>&nbsp;<span class="op" id="8468340">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468343">if</span>&nbsp;<span class="builtinfunc" id="8468346">len</span><span class="op" id="8468349">(</span><span class="ident" id="8468350">s1</span><span class="op" id="8468352">)</span>&nbsp;<span class="op" id="8468354">!=</span>&nbsp;<span class="builtinfunc" id="8468357">len</span><span class="op" id="8468360">(</span><span class="ident" id="8468361">s2</span><span class="op" id="8468363">)</span>&nbsp;<span class="op" id="8468365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468369">if</span>&nbsp;<span class="builtinfunc" id="8468372">len</span><span class="op" id="8468375">(</span><span class="ident" id="8468376">s1</span><span class="op" id="8468378">)</span>&nbsp;<span class="op" id="8468380">&gt;</span>&nbsp;<span class="builtinfunc" id="8468382">len</span><span class="op" id="8468385">(</span><span class="ident" id="8468386">s2</span><span class="op" id="8468388">)</span>&nbsp;<span class="op" id="8468390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468395">return</span>&nbsp;<span class="builtinfunc" id="8468402">len</span><span class="op" id="8468405">(</span><span class="ident" id="8468406">s2</span><span class="op" id="8468408">)</span>&nbsp;<span class="op" id="8468410">+</span>&nbsp;<span class="num" id="8468412">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468420">return</span>&nbsp;<span class="builtinfunc" id="8468427">len</span><span class="op" id="8468430">(</span><span class="ident" id="8468431">s1</span><span class="op" id="8468433">)</span>&nbsp;<span class="op" id="8468435">+</span>&nbsp;<span class="num" id="8468437">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468443">for</span>&nbsp;<span class="ident" id="8468447">i</span>&nbsp;<span class="op" id="8468449">:=</span>&nbsp;<span class="keyword" id="8468452">range</span>&nbsp;<span class="ident" id="8468458">s1</span>&nbsp;<span class="op" id="8468461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468465">if</span>&nbsp;<span class="op" id="8468468">!</span><span class="ident" id="8468469">nearEqual</span><span class="op" id="8468478">(</span><span class="builtintype" id="8468479">float64</span><span class="op" id="8468486">(</span><span class="ident" id="8468487">s1</span><span class="op" id="8468489">[</span><span class="ident" id="8468490">i</span><span class="op" id="8468491">]</span><span class="op" id="8468492">)</span><span class="op" id="8468493">,</span>&nbsp;<span class="builtintype" id="8468495">float64</span><span class="op" id="8468502">(</span><span class="ident" id="8468503">s2</span><span class="op" id="8468505">[</span><span class="ident" id="8468506">i</span><span class="op" id="8468507">]</span><span class="op" id="8468508">)</span><span class="op" id="8468509">,</span>&nbsp;<span class="num" id="8468511">0</span><span class="op" id="8468512">,</span>&nbsp;<span class="num" id="8468514">1e-7</span><span class="op" id="8468518">)</span>&nbsp;<span class="op" id="8468520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468525">return</span>&nbsp;<span class="ident" id="8468532">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468536">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468542">return</span>&nbsp;<span class="op" id="8468549">-</span><span class="num" id="8468550">1</span><br>
<span class="lineno"></span><span class="op" id="8468552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8468555">func</span>&nbsp;<span class="ident" id="8468560">TestNormTables</span><span class="op" id="8468574">(</span><span class="ident" id="8468575">t</span>&nbsp;<span class="op" id="8468577">*</span><span class="ident" id="8468578">testing</span><span class="op" id="8468585">.</span><span class="ident" id="8468586">T</span><span class="op" id="8468587">)</span>&nbsp;<span class="op" id="8468589">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8468592">testKn</span><span class="op" id="8468598">,</span>&nbsp;<span class="ident" id="8468600">testWn</span><span class="op" id="8468606">,</span>&nbsp;<span class="ident" id="8468608">testFn</span>&nbsp;<span class="op" id="8468615">:=</span>&nbsp;<span class="ident" id="8468618">initNorm</span><span class="op" id="8468626">(</span><span class="op" id="8468627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468630">if</span>&nbsp;<span class="ident" id="8468633">i</span>&nbsp;<span class="op" id="8468635">:=</span>&nbsp;<span class="ident" id="8468638">compareUint32Slices</span><span class="op" id="8468657">(</span><span class="ident" id="8468658">kn</span><span class="op" id="8468660">[</span><span class="num" id="8468661">0</span><span class="op" id="8468662">:</span><span class="op" id="8468663">]</span><span class="op" id="8468664">,</span>&nbsp;<span class="ident" id="8468666">testKn</span><span class="op" id="8468672">)</span><span class="op" id="8468673">;</span>&nbsp;<span class="ident" id="8468675">i</span>&nbsp;<span class="op" id="8468677">&gt;=</span>&nbsp;<span class="num" id="8468680">0</span>&nbsp;<span class="op" id="8468682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8468686">t</span><span class="op" id="8468687">.</span><span class="ident" id="8468688">Errorf</span><span class="op" id="8468694">(</span><span class="string" id="8468695">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8468731">,</span>&nbsp;<span class="ident" id="8468733">i</span><span class="op" id="8468734">,</span>&nbsp;<span class="ident" id="8468736">kn</span><span class="op" id="8468738">[</span><span class="ident" id="8468739">i</span><span class="op" id="8468740">]</span><span class="op" id="8468741">,</span>&nbsp;<span class="ident" id="8468743">testKn</span><span class="op" id="8468749">[</span><span class="ident" id="8468750">i</span><span class="op" id="8468751">]</span><span class="op" id="8468752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468758">if</span>&nbsp;<span class="ident" id="8468761">i</span>&nbsp;<span class="op" id="8468763">:=</span>&nbsp;<span class="ident" id="8468766">compareFloat32Slices</span><span class="op" id="8468786">(</span><span class="ident" id="8468787">wn</span><span class="op" id="8468789">[</span><span class="num" id="8468790">0</span><span class="op" id="8468791">:</span><span class="op" id="8468792">]</span><span class="op" id="8468793">,</span>&nbsp;<span class="ident" id="8468795">testWn</span><span class="op" id="8468801">)</span><span class="op" id="8468802">;</span>&nbsp;<span class="ident" id="8468804">i</span>&nbsp;<span class="op" id="8468806">&gt;=</span>&nbsp;<span class="num" id="8468809">0</span>&nbsp;<span class="op" id="8468811">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8468815">t</span><span class="op" id="8468816">.</span><span class="ident" id="8468817">Errorf</span><span class="op" id="8468823">(</span><span class="string" id="8468824">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8468860">,</span>&nbsp;<span class="ident" id="8468862">i</span><span class="op" id="8468863">,</span>&nbsp;<span class="ident" id="8468865">wn</span><span class="op" id="8468867">[</span><span class="ident" id="8468868">i</span><span class="op" id="8468869">]</span><span class="op" id="8468870">,</span>&nbsp;<span class="ident" id="8468872">testWn</span><span class="op" id="8468878">[</span><span class="ident" id="8468879">i</span><span class="op" id="8468880">]</span><span class="op" id="8468881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8468884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8468887">if</span>&nbsp;<span class="ident" id="8468890">i</span>&nbsp;<span class="op" id="8468892">:=</span>&nbsp;<span class="ident" id="8468895">compareFloat32Slices</span><span class="op" id="8468915">(</span><span class="ident" id="8468916">fn</span><span class="op" id="8468918">[</span><span class="num" id="8468919">0</span><span class="op" id="8468920">:</span><span class="op" id="8468921">]</span><span class="op" id="8468922">,</span>&nbsp;<span class="ident" id="8468924">testFn</span><span class="op" id="8468930">)</span><span class="op" id="8468931">;</span>&nbsp;<span class="ident" id="8468933">i</span>&nbsp;<span class="op" id="8468935">&gt;=</span>&nbsp;<span class="num" id="8468938">0</span>&nbsp;<span class="op" id="8468940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8468944">t</span><span class="op" id="8468945">.</span><span class="ident" id="8468946">Errorf</span><span class="op" id="8468952">(</span><span class="string" id="8468953">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8468989">,</span>&nbsp;<span class="ident" id="8468991">i</span><span class="op" id="8468992">,</span>&nbsp;<span class="ident" id="8468994">fn</span><span class="op" id="8468996">[</span><span class="ident" id="8468997">i</span><span class="op" id="8468998">]</span><span class="op" id="8468999">,</span>&nbsp;<span class="ident" id="8469001">testFn</span><span class="op" id="8469007">[</span><span class="ident" id="8469008">i</span><span class="op" id="8469009">]</span><span class="op" id="8469010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469013">}</span><br>
<span class="lineno">310</span><span class="op" id="8469015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8469018">func</span>&nbsp;<span class="ident" id="8469023">TestExpTables</span><span class="op" id="8469036">(</span><span class="ident" id="8469037">t</span>&nbsp;<span class="op" id="8469039">*</span><span class="ident" id="8469040">testing</span><span class="op" id="8469047">.</span><span class="ident" id="8469048">T</span><span class="op" id="8469049">)</span>&nbsp;<span class="op" id="8469051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469054">testKe</span><span class="op" id="8469060">,</span>&nbsp;<span class="ident" id="8469062">testWe</span><span class="op" id="8469068">,</span>&nbsp;<span class="ident" id="8469070">testFe</span>&nbsp;<span class="op" id="8469077">:=</span>&nbsp;<span class="ident" id="8469080">initExp</span><span class="op" id="8469087">(</span><span class="op" id="8469088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469091">if</span>&nbsp;<span class="ident" id="8469094">i</span>&nbsp;<span class="op" id="8469096">:=</span>&nbsp;<span class="ident" id="8469099">compareUint32Slices</span><span class="op" id="8469118">(</span><span class="ident" id="8469119">ke</span><span class="op" id="8469121">[</span><span class="num" id="8469122">0</span><span class="op" id="8469123">:</span><span class="op" id="8469124">]</span><span class="op" id="8469125">,</span>&nbsp;<span class="ident" id="8469127">testKe</span><span class="op" id="8469133">)</span><span class="op" id="8469134">;</span>&nbsp;<span class="ident" id="8469136">i</span>&nbsp;<span class="op" id="8469138">&gt;=</span>&nbsp;<span class="num" id="8469141">0</span>&nbsp;<span class="op" id="8469143">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469147">t</span><span class="op" id="8469148">.</span><span class="ident" id="8469149">Errorf</span><span class="op" id="8469155">(</span><span class="string" id="8469156">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8469192">,</span>&nbsp;<span class="ident" id="8469194">i</span><span class="op" id="8469195">,</span>&nbsp;<span class="ident" id="8469197">ke</span><span class="op" id="8469199">[</span><span class="ident" id="8469200">i</span><span class="op" id="8469201">]</span><span class="op" id="8469202">,</span>&nbsp;<span class="ident" id="8469204">testKe</span><span class="op" id="8469210">[</span><span class="ident" id="8469211">i</span><span class="op" id="8469212">]</span><span class="op" id="8469213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469219">if</span>&nbsp;<span class="ident" id="8469222">i</span>&nbsp;<span class="op" id="8469224">:=</span>&nbsp;<span class="ident" id="8469227">compareFloat32Slices</span><span class="op" id="8469247">(</span><span class="ident" id="8469248">we</span><span class="op" id="8469250">[</span><span class="num" id="8469251">0</span><span class="op" id="8469252">:</span><span class="op" id="8469253">]</span><span class="op" id="8469254">,</span>&nbsp;<span class="ident" id="8469256">testWe</span><span class="op" id="8469262">)</span><span class="op" id="8469263">;</span>&nbsp;<span class="ident" id="8469265">i</span>&nbsp;<span class="op" id="8469267">&gt;=</span>&nbsp;<span class="num" id="8469270">0</span>&nbsp;<span class="op" id="8469272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469276">t</span><span class="op" id="8469277">.</span><span class="ident" id="8469278">Errorf</span><span class="op" id="8469284">(</span><span class="string" id="8469285">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8469321">,</span>&nbsp;<span class="ident" id="8469323">i</span><span class="op" id="8469324">,</span>&nbsp;<span class="ident" id="8469326">we</span><span class="op" id="8469328">[</span><span class="ident" id="8469329">i</span><span class="op" id="8469330">]</span><span class="op" id="8469331">,</span>&nbsp;<span class="ident" id="8469333">testWe</span><span class="op" id="8469339">[</span><span class="ident" id="8469340">i</span><span class="op" id="8469341">]</span><span class="op" id="8469342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469345">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469348">if</span>&nbsp;<span class="ident" id="8469351">i</span>&nbsp;<span class="op" id="8469353">:=</span>&nbsp;<span class="ident" id="8469356">compareFloat32Slices</span><span class="op" id="8469376">(</span><span class="ident" id="8469377">fe</span><span class="op" id="8469379">[</span><span class="num" id="8469380">0</span><span class="op" id="8469381">:</span><span class="op" id="8469382">]</span><span class="op" id="8469383">,</span>&nbsp;<span class="ident" id="8469385">testFe</span><span class="op" id="8469391">)</span><span class="op" id="8469392">;</span>&nbsp;<span class="ident" id="8469394">i</span>&nbsp;<span class="op" id="8469396">&gt;=</span>&nbsp;<span class="num" id="8469399">0</span>&nbsp;<span class="op" id="8469401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469405">t</span><span class="op" id="8469406">.</span><span class="ident" id="8469407">Errorf</span><span class="op" id="8469413">(</span><span class="string" id="8469414">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8469450">,</span>&nbsp;<span class="ident" id="8469452">i</span><span class="op" id="8469453">,</span>&nbsp;<span class="ident" id="8469455">fe</span><span class="op" id="8469457">[</span><span class="ident" id="8469458">i</span><span class="op" id="8469459">]</span><span class="op" id="8469460">,</span>&nbsp;<span class="ident" id="8469462">testFe</span><span class="op" id="8469468">[</span><span class="ident" id="8469469">i</span><span class="op" id="8469470">]</span><span class="op" id="8469471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469474">}</span><br>
<span class="lineno"></span><span class="op" id="8469476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="8469479">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="8469551">func</span>&nbsp;<span class="ident" id="8469556">TestFloat32</span><span class="op" id="8469567">(</span><span class="ident" id="8469568">t</span>&nbsp;<span class="op" id="8469570">*</span><span class="ident" id="8469571">testing</span><span class="op" id="8469578">.</span><span class="ident" id="8469579">T</span><span class="op" id="8469580">)</span>&nbsp;<span class="op" id="8469582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469585">r</span>&nbsp;<span class="op" id="8469587">:=</span>&nbsp;<span class="ident" id="8469590">New</span><span class="op" id="8469593">(</span><span class="ident" id="8469594">NewSource</span><span class="op" id="8469603">(</span><span class="num" id="8469604">1</span><span class="op" id="8469605">)</span><span class="op" id="8469606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469609">for</span>&nbsp;<span class="ident" id="8469613">ct</span>&nbsp;<span class="op" id="8469616">:=</span>&nbsp;<span class="num" id="8469619">0</span><span class="op" id="8469620">;</span>&nbsp;<span class="ident" id="8469622">ct</span>&nbsp;<span class="op" id="8469625">&lt;</span>&nbsp;<span class="num" id="8469627">10e6</span><span class="op" id="8469631">;</span>&nbsp;<span class="ident" id="8469633">ct</span><span class="op" id="8469635">++</span>&nbsp;<span class="op" id="8469638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469642">f</span>&nbsp;<span class="op" id="8469644">:=</span>&nbsp;<span class="ident" id="8469647">r</span><span class="op" id="8469648">.</span><span class="ident" id="8469649">Float32</span><span class="op" id="8469656">(</span><span class="op" id="8469657">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469661">if</span>&nbsp;<span class="ident" id="8469664">f</span>&nbsp;<span class="op" id="8469666">&gt;=</span>&nbsp;<span class="num" id="8469669">1</span>&nbsp;<span class="op" id="8469671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469676">t</span><span class="op" id="8469677">.</span><span class="ident" id="8469678">Fatal</span><span class="op" id="8469683">(</span><span class="string" id="8469684">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="8469725">,</span>&nbsp;<span class="ident" id="8469727">ct</span><span class="op" id="8469729">,</span>&nbsp;<span class="string" id="8469731">&#34;f:&#34;</span><span class="op" id="8469735">,</span>&nbsp;<span class="ident" id="8469737">f</span><span class="op" id="8469738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469745">}</span><br>
<span class="lineno"></span><span class="op" id="8469747">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="8469750">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8469765">func</span>&nbsp;<span class="ident" id="8469770">BenchmarkInt63Threadsafe</span><span class="op" id="8469794">(</span><span class="ident" id="8469795">b</span>&nbsp;<span class="op" id="8469797">*</span><span class="ident" id="8469798">testing</span><span class="op" id="8469805">.</span><span class="ident" id="8469806">B</span><span class="op" id="8469807">)</span>&nbsp;<span class="op" id="8469809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469812">for</span>&nbsp;<span class="ident" id="8469816">n</span>&nbsp;<span class="op" id="8469818">:=</span>&nbsp;<span class="ident" id="8469821">b</span><span class="op" id="8469822">.</span><span class="ident" id="8469823">N</span><span class="op" id="8469824">;</span>&nbsp;<span class="ident" id="8469826">n</span>&nbsp;<span class="op" id="8469828">&gt;</span>&nbsp;<span class="num" id="8469830">0</span><span class="op" id="8469831">;</span>&nbsp;<span class="ident" id="8469833">n</span><span class="op" id="8469834">--</span>&nbsp;<span class="op" id="8469837">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469841">Int63</span><span class="op" id="8469846">(</span><span class="op" id="8469847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469850">}</span><br>
<span class="lineno"></span><span class="op" id="8469852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8469855">func</span>&nbsp;<span class="ident" id="8469860">BenchmarkInt63Unthreadsafe</span><span class="op" id="8469886">(</span><span class="ident" id="8469887">b</span>&nbsp;<span class="op" id="8469889">*</span><span class="ident" id="8469890">testing</span><span class="op" id="8469897">.</span><span class="ident" id="8469898">B</span><span class="op" id="8469899">)</span>&nbsp;<span class="op" id="8469901">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469904">r</span>&nbsp;<span class="op" id="8469906">:=</span>&nbsp;<span class="ident" id="8469909">New</span><span class="op" id="8469912">(</span><span class="ident" id="8469913">NewSource</span><span class="op" id="8469922">(</span><span class="num" id="8469923">1</span><span class="op" id="8469924">)</span><span class="op" id="8469925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8469928">for</span>&nbsp;<span class="ident" id="8469932">n</span>&nbsp;<span class="op" id="8469934">:=</span>&nbsp;<span class="ident" id="8469937">b</span><span class="op" id="8469938">.</span><span class="ident" id="8469939">N</span><span class="op" id="8469940">;</span>&nbsp;<span class="ident" id="8469942">n</span>&nbsp;<span class="op" id="8469944">&gt;</span>&nbsp;<span class="num" id="8469946">0</span><span class="op" id="8469947">;</span>&nbsp;<span class="ident" id="8469949">n</span><span class="op" id="8469950">--</span>&nbsp;<span class="op" id="8469953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8469957">r</span><span class="op" id="8469958">.</span><span class="ident" id="8469959">Int63</span><span class="op" id="8469964">(</span><span class="op" id="8469965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8469968">}</span><br>
<span class="lineno"></span><span class="op" id="8469970">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="8469973">func</span>&nbsp;<span class="ident" id="8469978">BenchmarkIntn1000</span><span class="op" id="8469995">(</span><span class="ident" id="8469996">b</span>&nbsp;<span class="op" id="8469998">*</span><span class="ident" id="8469999">testing</span><span class="op" id="8470006">.</span><span class="ident" id="8470007">B</span><span class="op" id="8470008">)</span>&nbsp;<span class="op" id="8470010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470013">r</span>&nbsp;<span class="op" id="8470015">:=</span>&nbsp;<span class="ident" id="8470018">New</span><span class="op" id="8470021">(</span><span class="ident" id="8470022">NewSource</span><span class="op" id="8470031">(</span><span class="num" id="8470032">1</span><span class="op" id="8470033">)</span><span class="op" id="8470034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470037">for</span>&nbsp;<span class="ident" id="8470041">n</span>&nbsp;<span class="op" id="8470043">:=</span>&nbsp;<span class="ident" id="8470046">b</span><span class="op" id="8470047">.</span><span class="ident" id="8470048">N</span><span class="op" id="8470049">;</span>&nbsp;<span class="ident" id="8470051">n</span>&nbsp;<span class="op" id="8470053">&gt;</span>&nbsp;<span class="num" id="8470055">0</span><span class="op" id="8470056">;</span>&nbsp;<span class="ident" id="8470058">n</span><span class="op" id="8470059">--</span>&nbsp;<span class="op" id="8470062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470066">r</span><span class="op" id="8470067">.</span><span class="ident" id="8470068">Intn</span><span class="op" id="8470072">(</span><span class="num" id="8470073">1000</span><span class="op" id="8470077">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470080">}</span><br>
<span class="lineno"></span><span class="op" id="8470082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8470085">func</span>&nbsp;<span class="ident" id="8470090">BenchmarkInt63n1000</span><span class="op" id="8470109">(</span><span class="ident" id="8470110">b</span>&nbsp;<span class="op" id="8470112">*</span><span class="ident" id="8470113">testing</span><span class="op" id="8470120">.</span><span class="ident" id="8470121">B</span><span class="op" id="8470122">)</span>&nbsp;<span class="op" id="8470124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470127">r</span>&nbsp;<span class="op" id="8470129">:=</span>&nbsp;<span class="ident" id="8470132">New</span><span class="op" id="8470135">(</span><span class="ident" id="8470136">NewSource</span><span class="op" id="8470145">(</span><span class="num" id="8470146">1</span><span class="op" id="8470147">)</span><span class="op" id="8470148">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470151">for</span>&nbsp;<span class="ident" id="8470155">n</span>&nbsp;<span class="op" id="8470157">:=</span>&nbsp;<span class="ident" id="8470160">b</span><span class="op" id="8470161">.</span><span class="ident" id="8470162">N</span><span class="op" id="8470163">;</span>&nbsp;<span class="ident" id="8470165">n</span>&nbsp;<span class="op" id="8470167">&gt;</span>&nbsp;<span class="num" id="8470169">0</span><span class="op" id="8470170">;</span>&nbsp;<span class="ident" id="8470172">n</span><span class="op" id="8470173">--</span>&nbsp;<span class="op" id="8470176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470180">r</span><span class="op" id="8470181">.</span><span class="ident" id="8470182">Int63n</span><span class="op" id="8470188">(</span><span class="num" id="8470189">1000</span><span class="op" id="8470193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470196">}</span><br>
<span class="lineno"></span><span class="op" id="8470198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="8470201">func</span>&nbsp;<span class="ident" id="8470206">BenchmarkInt31n1000</span><span class="op" id="8470225">(</span><span class="ident" id="8470226">b</span>&nbsp;<span class="op" id="8470228">*</span><span class="ident" id="8470229">testing</span><span class="op" id="8470236">.</span><span class="ident" id="8470237">B</span><span class="op" id="8470238">)</span>&nbsp;<span class="op" id="8470240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470243">r</span>&nbsp;<span class="op" id="8470245">:=</span>&nbsp;<span class="ident" id="8470248">New</span><span class="op" id="8470251">(</span><span class="ident" id="8470252">NewSource</span><span class="op" id="8470261">(</span><span class="num" id="8470262">1</span><span class="op" id="8470263">)</span><span class="op" id="8470264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470267">for</span>&nbsp;<span class="ident" id="8470271">n</span>&nbsp;<span class="op" id="8470273">:=</span>&nbsp;<span class="ident" id="8470276">b</span><span class="op" id="8470277">.</span><span class="ident" id="8470278">N</span><span class="op" id="8470279">;</span>&nbsp;<span class="ident" id="8470281">n</span>&nbsp;<span class="op" id="8470283">&gt;</span>&nbsp;<span class="num" id="8470285">0</span><span class="op" id="8470286">;</span>&nbsp;<span class="ident" id="8470288">n</span><span class="op" id="8470289">--</span>&nbsp;<span class="op" id="8470292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470296">r</span><span class="op" id="8470297">.</span><span class="ident" id="8470298">Int31n</span><span class="op" id="8470304">(</span><span class="num" id="8470305">1000</span><span class="op" id="8470309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470312">}</span><br>
<span class="lineno">370</span><span class="op" id="8470314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8470317">func</span>&nbsp;<span class="ident" id="8470322">BenchmarkFloat32</span><span class="op" id="8470338">(</span><span class="ident" id="8470339">b</span>&nbsp;<span class="op" id="8470341">*</span><span class="ident" id="8470342">testing</span><span class="op" id="8470349">.</span><span class="ident" id="8470350">B</span><span class="op" id="8470351">)</span>&nbsp;<span class="op" id="8470353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470356">r</span>&nbsp;<span class="op" id="8470358">:=</span>&nbsp;<span class="ident" id="8470361">New</span><span class="op" id="8470364">(</span><span class="ident" id="8470365">NewSource</span><span class="op" id="8470374">(</span><span class="num" id="8470375">1</span><span class="op" id="8470376">)</span><span class="op" id="8470377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470380">for</span>&nbsp;<span class="ident" id="8470384">n</span>&nbsp;<span class="op" id="8470386">:=</span>&nbsp;<span class="ident" id="8470389">b</span><span class="op" id="8470390">.</span><span class="ident" id="8470391">N</span><span class="op" id="8470392">;</span>&nbsp;<span class="ident" id="8470394">n</span>&nbsp;<span class="op" id="8470396">&gt;</span>&nbsp;<span class="num" id="8470398">0</span><span class="op" id="8470399">;</span>&nbsp;<span class="ident" id="8470401">n</span><span class="op" id="8470402">--</span>&nbsp;<span class="op" id="8470405">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470409">r</span><span class="op" id="8470410">.</span><span class="ident" id="8470411">Float32</span><span class="op" id="8470418">(</span><span class="op" id="8470419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470422">}</span><br>
<span class="lineno"></span><span class="op" id="8470424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8470427">func</span>&nbsp;<span class="ident" id="8470432">BenchmarkFloat64</span><span class="op" id="8470448">(</span><span class="ident" id="8470449">b</span>&nbsp;<span class="op" id="8470451">*</span><span class="ident" id="8470452">testing</span><span class="op" id="8470459">.</span><span class="ident" id="8470460">B</span><span class="op" id="8470461">)</span>&nbsp;<span class="op" id="8470463">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470466">r</span>&nbsp;<span class="op" id="8470468">:=</span>&nbsp;<span class="ident" id="8470471">New</span><span class="op" id="8470474">(</span><span class="ident" id="8470475">NewSource</span><span class="op" id="8470484">(</span><span class="num" id="8470485">1</span><span class="op" id="8470486">)</span><span class="op" id="8470487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470490">for</span>&nbsp;<span class="ident" id="8470494">n</span>&nbsp;<span class="op" id="8470496">:=</span>&nbsp;<span class="ident" id="8470499">b</span><span class="op" id="8470500">.</span><span class="ident" id="8470501">N</span><span class="op" id="8470502">;</span>&nbsp;<span class="ident" id="8470504">n</span>&nbsp;<span class="op" id="8470506">&gt;</span>&nbsp;<span class="num" id="8470508">0</span><span class="op" id="8470509">;</span>&nbsp;<span class="ident" id="8470511">n</span><span class="op" id="8470512">--</span>&nbsp;<span class="op" id="8470515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470519">r</span><span class="op" id="8470520">.</span><span class="ident" id="8470521">Float64</span><span class="op" id="8470528">(</span><span class="op" id="8470529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470532">}</span><br>
<span class="lineno"></span><span class="op" id="8470534">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="8470537">func</span>&nbsp;<span class="ident" id="8470542">BenchmarkPerm3</span><span class="op" id="8470556">(</span><span class="ident" id="8470557">b</span>&nbsp;<span class="op" id="8470559">*</span><span class="ident" id="8470560">testing</span><span class="op" id="8470567">.</span><span class="ident" id="8470568">B</span><span class="op" id="8470569">)</span>&nbsp;<span class="op" id="8470571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470574">r</span>&nbsp;<span class="op" id="8470576">:=</span>&nbsp;<span class="ident" id="8470579">New</span><span class="op" id="8470582">(</span><span class="ident" id="8470583">NewSource</span><span class="op" id="8470592">(</span><span class="num" id="8470593">1</span><span class="op" id="8470594">)</span><span class="op" id="8470595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470598">for</span>&nbsp;<span class="ident" id="8470602">n</span>&nbsp;<span class="op" id="8470604">:=</span>&nbsp;<span class="ident" id="8470607">b</span><span class="op" id="8470608">.</span><span class="ident" id="8470609">N</span><span class="op" id="8470610">;</span>&nbsp;<span class="ident" id="8470612">n</span>&nbsp;<span class="op" id="8470614">&gt;</span>&nbsp;<span class="num" id="8470616">0</span><span class="op" id="8470617">;</span>&nbsp;<span class="ident" id="8470619">n</span><span class="op" id="8470620">--</span>&nbsp;<span class="op" id="8470623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470627">r</span><span class="op" id="8470628">.</span><span class="ident" id="8470629">Perm</span><span class="op" id="8470633">(</span><span class="num" id="8470634">3</span><span class="op" id="8470635">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470638">}</span><br>
<span class="lineno"></span><span class="op" id="8470640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8470643">func</span>&nbsp;<span class="ident" id="8470648">BenchmarkPerm30</span><span class="op" id="8470663">(</span><span class="ident" id="8470664">b</span>&nbsp;<span class="op" id="8470666">*</span><span class="ident" id="8470667">testing</span><span class="op" id="8470674">.</span><span class="ident" id="8470675">B</span><span class="op" id="8470676">)</span>&nbsp;<span class="op" id="8470678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470681">r</span>&nbsp;<span class="op" id="8470683">:=</span>&nbsp;<span class="ident" id="8470686">New</span><span class="op" id="8470689">(</span><span class="ident" id="8470690">NewSource</span><span class="op" id="8470699">(</span><span class="num" id="8470700">1</span><span class="op" id="8470701">)</span><span class="op" id="8470702">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8470705">for</span>&nbsp;<span class="ident" id="8470709">n</span>&nbsp;<span class="op" id="8470711">:=</span>&nbsp;<span class="ident" id="8470714">b</span><span class="op" id="8470715">.</span><span class="ident" id="8470716">N</span><span class="op" id="8470717">;</span>&nbsp;<span class="ident" id="8470719">n</span>&nbsp;<span class="op" id="8470721">&gt;</span>&nbsp;<span class="num" id="8470723">0</span><span class="op" id="8470724">;</span>&nbsp;<span class="ident" id="8470726">n</span><span class="op" id="8470727">--</span>&nbsp;<span class="op" id="8470730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8470734">r</span><span class="op" id="8470735">.</span><span class="ident" id="8470736">Perm</span><span class="op" id="8470740">(</span><span class="num" id="8470741">30</span><span class="op" id="8470743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8470746">}</span><br>
<span class="lineno"></span><span class="op" id="8470748">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
