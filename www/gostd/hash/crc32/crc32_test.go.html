<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7014025">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7014080">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7014134">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7014185">package</span>&nbsp;<span class="ident" id="7014193">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7014200">import</span>&nbsp;<span class="op" id="7014207">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7014210">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7014216">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7014226">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7014229">type</span>&nbsp;<span class="ident" id="7014234">test</span>&nbsp;<span class="keyword" id="7014239">struct</span>&nbsp;<span class="op" id="7014246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7014249">ieee</span><span class="op" id="7014253">,</span>&nbsp;<span class="ident" id="7014255">castagnoli</span>&nbsp;<span class="builtintype" id="7014266">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7014274">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7014291">string</span><br>
<span class="lineno">15</span><span class="op" id="7014298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7014301">var</span>&nbsp;<span class="ident" id="7014305">golden</span>&nbsp;<span class="op" id="7014312">=</span>&nbsp;<span class="op" id="7014314">[</span><span class="op" id="7014315">]</span><span class="ident" id="7014316">test</span><span class="op" id="7014320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014323">{</span><span class="num" id="7014324">0x0</span><span class="op" id="7014327">,</span>&nbsp;<span class="num" id="7014329">0x0</span><span class="op" id="7014332">,</span>&nbsp;<span class="string" id="7014334">&#34;&#34;</span><span class="op" id="7014336">}</span><span class="op" id="7014337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014340">{</span><span class="num" id="7014341">0xe8b7be43</span><span class="op" id="7014351">,</span>&nbsp;<span class="num" id="7014353">0xc1d04330</span><span class="op" id="7014363">,</span>&nbsp;<span class="string" id="7014365">&#34;a&#34;</span><span class="op" id="7014368">}</span><span class="op" id="7014369">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014372">{</span><span class="num" id="7014373">0x9e83486d</span><span class="op" id="7014383">,</span>&nbsp;<span class="num" id="7014385">0xe2a22936</span><span class="op" id="7014395">,</span>&nbsp;<span class="string" id="7014397">&#34;ab&#34;</span><span class="op" id="7014401">}</span><span class="op" id="7014402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014405">{</span><span class="num" id="7014406">0x352441c2</span><span class="op" id="7014416">,</span>&nbsp;<span class="num" id="7014418">0x364b3fb7</span><span class="op" id="7014428">,</span>&nbsp;<span class="string" id="7014430">&#34;abc&#34;</span><span class="op" id="7014435">}</span><span class="op" id="7014436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014439">{</span><span class="num" id="7014440">0xed82cd11</span><span class="op" id="7014450">,</span>&nbsp;<span class="num" id="7014452">0x92c80a31</span><span class="op" id="7014462">,</span>&nbsp;<span class="string" id="7014464">&#34;abcd&#34;</span><span class="op" id="7014470">}</span><span class="op" id="7014471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014474">{</span><span class="num" id="7014475">0x8587d865</span><span class="op" id="7014485">,</span>&nbsp;<span class="num" id="7014487">0xc450d697</span><span class="op" id="7014497">,</span>&nbsp;<span class="string" id="7014499">&#34;abcde&#34;</span><span class="op" id="7014506">}</span><span class="op" id="7014507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014510">{</span><span class="num" id="7014511">0x4b8e39ef</span><span class="op" id="7014521">,</span>&nbsp;<span class="num" id="7014523">0x53bceff1</span><span class="op" id="7014533">,</span>&nbsp;<span class="string" id="7014535">&#34;abcdef&#34;</span><span class="op" id="7014543">}</span><span class="op" id="7014544">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014547">{</span><span class="num" id="7014548">0x312a6aa6</span><span class="op" id="7014558">,</span>&nbsp;<span class="num" id="7014560">0xe627f441</span><span class="op" id="7014570">,</span>&nbsp;<span class="string" id="7014572">&#34;abcdefg&#34;</span><span class="op" id="7014581">}</span><span class="op" id="7014582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014585">{</span><span class="num" id="7014586">0xaeef2a50</span><span class="op" id="7014596">,</span>&nbsp;<span class="num" id="7014598">0xa9421b7</span><span class="op" id="7014607">,</span>&nbsp;<span class="string" id="7014609">&#34;abcdefgh&#34;</span><span class="op" id="7014619">}</span><span class="op" id="7014620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014623">{</span><span class="num" id="7014624">0x8da988af</span><span class="op" id="7014634">,</span>&nbsp;<span class="num" id="7014636">0x2ddc99fc</span><span class="op" id="7014646">,</span>&nbsp;<span class="string" id="7014648">&#34;abcdefghi&#34;</span><span class="op" id="7014659">}</span><span class="op" id="7014660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014663">{</span><span class="num" id="7014664">0x3981703a</span><span class="op" id="7014674">,</span>&nbsp;<span class="num" id="7014676">0xe6599437</span><span class="op" id="7014686">,</span>&nbsp;<span class="string" id="7014688">&#34;abcdefghij&#34;</span><span class="op" id="7014700">}</span><span class="op" id="7014701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014704">{</span><span class="num" id="7014705">0x6b9cdfe7</span><span class="op" id="7014715">,</span>&nbsp;<span class="num" id="7014717">0xb2cc01fe</span><span class="op" id="7014727">,</span>&nbsp;<span class="string" id="7014729">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7014772">}</span><span class="op" id="7014773">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014776">{</span><span class="num" id="7014777">0xc90ef73f</span><span class="op" id="7014787">,</span>&nbsp;<span class="num" id="7014789">0xe28207f</span><span class="op" id="7014798">,</span>&nbsp;<span class="string" id="7014800">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7014859">}</span><span class="op" id="7014860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014863">{</span><span class="num" id="7014864">0xb902341f</span><span class="op" id="7014874">,</span>&nbsp;<span class="num" id="7014876">0xbe93f964</span><span class="op" id="7014886">,</span>&nbsp;<span class="string" id="7014888">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7014932">}</span><span class="op" id="7014933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014936">{</span><span class="num" id="7014937">0x42080e8</span><span class="op" id="7014946">,</span>&nbsp;<span class="num" id="7014948">0x9e3be0c3</span><span class="op" id="7014958">,</span>&nbsp;<span class="string" id="7014960">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7015019">}</span><span class="op" id="7015020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015023">{</span><span class="num" id="7015024">0x154c6d11</span><span class="op" id="7015034">,</span>&nbsp;<span class="num" id="7015036">0xf505ef04</span><span class="op" id="7015046">,</span>&nbsp;<span class="string" id="7015048">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7015108">}</span><span class="op" id="7015109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015112">{</span><span class="num" id="7015113">0x4c418325</span><span class="op" id="7015123">,</span>&nbsp;<span class="num" id="7015125">0x85d3dc82</span><span class="op" id="7015135">,</span>&nbsp;<span class="string" id="7015137">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7015166">}</span><span class="op" id="7015167">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015170">{</span><span class="num" id="7015171">0x33955150</span><span class="op" id="7015181">,</span>&nbsp;<span class="num" id="7015183">0xc5142380</span><span class="op" id="7015193">,</span>&nbsp;<span class="string" id="7015195">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7015264">}</span><span class="op" id="7015265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015268">{</span><span class="num" id="7015269">0x26216a4b</span><span class="op" id="7015279">,</span>&nbsp;<span class="num" id="7015281">0x75eb77dd</span><span class="op" id="7015291">,</span>&nbsp;<span class="string" id="7015293">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7015352">}</span><span class="op" id="7015353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015356">{</span><span class="num" id="7015357">0x1abbe45e</span><span class="op" id="7015367">,</span>&nbsp;<span class="num" id="7015369">0x91ebe9f7</span><span class="op" id="7015379">,</span>&nbsp;<span class="string" id="7015381">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7015471">}</span><span class="op" id="7015472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015475">{</span><span class="num" id="7015476">0xc89a94f7</span><span class="op" id="7015486">,</span>&nbsp;<span class="num" id="7015488">0xf0b1168e</span><span class="op" id="7015498">,</span>&nbsp;<span class="string" id="7015500">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7015577">}</span><span class="op" id="7015578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015581">{</span><span class="num" id="7015582">0xab3abe14</span><span class="op" id="7015592">,</span>&nbsp;<span class="num" id="7015594">0x572b74e2</span><span class="op" id="7015604">,</span>&nbsp;<span class="string" id="7015606">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7015632">}</span><span class="op" id="7015633">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015636">{</span><span class="num" id="7015637">0xbab102b6</span><span class="op" id="7015647">,</span>&nbsp;<span class="num" id="7015649">0x8a58a6d5</span><span class="op" id="7015659">,</span>&nbsp;<span class="string" id="7015661">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7015712">}</span><span class="op" id="7015713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015716">{</span><span class="num" id="7015717">0x999149d7</span><span class="op" id="7015727">,</span>&nbsp;<span class="num" id="7015729">0x9c426c50</span><span class="op" id="7015739">,</span>&nbsp;<span class="string" id="7015741">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7015815">}</span><span class="op" id="7015816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015819">{</span><span class="num" id="7015820">0x6d52a33c</span><span class="op" id="7015830">,</span>&nbsp;<span class="num" id="7015832">0x735400a4</span><span class="op" id="7015842">,</span>&nbsp;<span class="string" id="7015844">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7015892">}</span><span class="op" id="7015893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015896">{</span><span class="num" id="7015897">0x90631e8d</span><span class="op" id="7015907">,</span>&nbsp;<span class="num" id="7015909">0xbec49c95</span><span class="op" id="7015919">,</span>&nbsp;<span class="string" id="7015921">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7015993">}</span><span class="op" id="7015994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015997">{</span><span class="num" id="7015998">0x78309130</span><span class="op" id="7016008">,</span>&nbsp;<span class="num" id="7016010">0xa95a2079</span><span class="op" id="7016020">,</span>&nbsp;<span class="string" id="7016022">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7016092">}</span><span class="op" id="7016093">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016096">{</span><span class="num" id="7016097">0x7d0a377f</span><span class="op" id="7016107">,</span>&nbsp;<span class="num" id="7016109">0xde2e65c5</span><span class="op" id="7016119">,</span>&nbsp;<span class="string" id="7016121">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7016155">}</span><span class="op" id="7016156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016159">{</span><span class="num" id="7016160">0x8c79fd79</span><span class="op" id="7016170">,</span>&nbsp;<span class="num" id="7016172">0x297a88ed</span><span class="op" id="7016182">,</span>&nbsp;<span class="string" id="7016184">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7016274">}</span><span class="op" id="7016275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016278">{</span><span class="num" id="7016279">0xa20b7167</span><span class="op" id="7016289">,</span>&nbsp;<span class="num" id="7016291">0x66ed1d8b</span><span class="op" id="7016301">,</span>&nbsp;<span class="string" id="7016303">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7016437">}</span><span class="op" id="7016438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016441">{</span><span class="num" id="7016442">0x8e0bb443</span><span class="op" id="7016452">,</span>&nbsp;<span class="num" id="7016454">0xdcded527</span><span class="op" id="7016464">,</span>&nbsp;<span class="string" id="7016466">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7016524">}</span><span class="op" id="7016525">,</span><br>
<span class="lineno"></span><span class="op" id="7016527">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7016530">func</span>&nbsp;<span class="ident" id="7016535">TestGolden</span><span class="op" id="7016545">(</span><span class="ident" id="7016546">t</span>&nbsp;<span class="op" id="7016548">*</span><span class="ident" id="7016549">testing</span><span class="op" id="7016556">.</span><span class="ident" id="7016557">T</span><span class="op" id="7016558">)</span>&nbsp;<span class="op" id="7016560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016563">castagnoliTab</span>&nbsp;<span class="op" id="7016577">:=</span>&nbsp;<span class="ident" id="7016580">MakeTable</span><span class="op" id="7016589">(</span><span class="ident" id="7016590">Castagnoli</span><span class="op" id="7016600">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016604">for</span>&nbsp;<span class="ident" id="7016608">_</span><span class="op" id="7016609">,</span>&nbsp;<span class="ident" id="7016611">g</span>&nbsp;<span class="op" id="7016613">:=</span>&nbsp;<span class="keyword" id="7016616">range</span>&nbsp;<span class="ident" id="7016622">golden</span>&nbsp;<span class="op" id="7016629">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016633">ieee</span>&nbsp;<span class="op" id="7016638">:=</span>&nbsp;<span class="ident" id="7016641">NewIEEE</span><span class="op" id="7016648">(</span><span class="op" id="7016649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016653">io</span><span class="op" id="7016655">.</span><span class="ident" id="7016656">WriteString</span><span class="op" id="7016667">(</span><span class="ident" id="7016668">ieee</span><span class="op" id="7016672">,</span>&nbsp;<span class="ident" id="7016674">g</span><span class="op" id="7016675">.</span><span class="ident" id="7016676">in</span><span class="op" id="7016678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016682">s</span>&nbsp;<span class="op" id="7016684">:=</span>&nbsp;<span class="ident" id="7016687">ieee</span><span class="op" id="7016691">.</span><span class="ident" id="7016692">Sum32</span><span class="op" id="7016697">(</span><span class="op" id="7016698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016702">if</span>&nbsp;<span class="ident" id="7016705">s</span>&nbsp;<span class="op" id="7016707">!=</span>&nbsp;<span class="ident" id="7016710">g</span><span class="op" id="7016711">.</span><span class="ident" id="7016712">ieee</span>&nbsp;<span class="op" id="7016717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016722">t</span><span class="op" id="7016723">.</span><span class="ident" id="7016724">Errorf</span><span class="op" id="7016730">(</span><span class="string" id="7016731">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7016758">,</span>&nbsp;<span class="ident" id="7016760">g</span><span class="op" id="7016761">.</span><span class="ident" id="7016762">in</span><span class="op" id="7016764">,</span>&nbsp;<span class="ident" id="7016766">s</span><span class="op" id="7016767">,</span>&nbsp;<span class="ident" id="7016769">g</span><span class="op" id="7016770">.</span><span class="ident" id="7016771">ieee</span><span class="op" id="7016775">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016784">castagnoli</span>&nbsp;<span class="op" id="7016795">:=</span>&nbsp;<span class="ident" id="7016798">New</span><span class="op" id="7016801">(</span><span class="ident" id="7016802">castagnoliTab</span><span class="op" id="7016815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016819">io</span><span class="op" id="7016821">.</span><span class="ident" id="7016822">WriteString</span><span class="op" id="7016833">(</span><span class="ident" id="7016834">castagnoli</span><span class="op" id="7016844">,</span>&nbsp;<span class="ident" id="7016846">g</span><span class="op" id="7016847">.</span><span class="ident" id="7016848">in</span><span class="op" id="7016850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016854">s</span>&nbsp;<span class="op" id="7016856">=</span>&nbsp;<span class="ident" id="7016858">castagnoli</span><span class="op" id="7016868">.</span><span class="ident" id="7016869">Sum32</span><span class="op" id="7016874">(</span><span class="op" id="7016875">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016879">if</span>&nbsp;<span class="ident" id="7016882">s</span>&nbsp;<span class="op" id="7016884">!=</span>&nbsp;<span class="ident" id="7016887">g</span><span class="op" id="7016888">.</span><span class="ident" id="7016889">castagnoli</span>&nbsp;<span class="op" id="7016900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016905">t</span><span class="op" id="7016906">.</span><span class="ident" id="7016907">Errorf</span><span class="op" id="7016913">(</span><span class="string" id="7016914">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7016947">,</span>&nbsp;<span class="ident" id="7016949">g</span><span class="op" id="7016950">.</span><span class="ident" id="7016951">in</span><span class="op" id="7016953">,</span>&nbsp;<span class="ident" id="7016955">s</span><span class="op" id="7016956">,</span>&nbsp;<span class="ident" id="7016958">g</span><span class="op" id="7016959">.</span><span class="ident" id="7016960">castagnoli</span><span class="op" id="7016970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016979">if</span>&nbsp;<span class="builtinfunc" id="7016982">len</span><span class="op" id="7016985">(</span><span class="ident" id="7016986">g</span><span class="op" id="7016987">.</span><span class="ident" id="7016988">in</span><span class="op" id="7016990">)</span>&nbsp;<span class="op" id="7016992">&gt;</span>&nbsp;<span class="num" id="7016994">0</span>&nbsp;<span class="op" id="7016996">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7017001">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7017058">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7017116">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017127">castagnoli</span>&nbsp;<span class="op" id="7017138">=</span>&nbsp;<span class="ident" id="7017140">New</span><span class="op" id="7017143">(</span><span class="ident" id="7017144">castagnoliTab</span><span class="op" id="7017157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017162">io</span><span class="op" id="7017164">.</span><span class="ident" id="7017165">WriteString</span><span class="op" id="7017176">(</span><span class="ident" id="7017177">castagnoli</span><span class="op" id="7017187">,</span>&nbsp;<span class="ident" id="7017189">g</span><span class="op" id="7017190">.</span><span class="ident" id="7017191">in</span><span class="op" id="7017193">[</span><span class="op" id="7017194">:</span><span class="num" id="7017195">1</span><span class="op" id="7017196">]</span><span class="op" id="7017197">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017202">io</span><span class="op" id="7017204">.</span><span class="ident" id="7017205">WriteString</span><span class="op" id="7017216">(</span><span class="ident" id="7017217">castagnoli</span><span class="op" id="7017227">,</span>&nbsp;<span class="ident" id="7017229">g</span><span class="op" id="7017230">.</span><span class="ident" id="7017231">in</span><span class="op" id="7017233">[</span><span class="num" id="7017234">1</span><span class="op" id="7017235">:</span><span class="op" id="7017236">]</span><span class="op" id="7017237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017242">s</span>&nbsp;<span class="op" id="7017244">=</span>&nbsp;<span class="ident" id="7017246">castagnoli</span><span class="op" id="7017256">.</span><span class="ident" id="7017257">Sum32</span><span class="op" id="7017262">(</span><span class="op" id="7017263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017268">if</span>&nbsp;<span class="ident" id="7017271">s</span>&nbsp;<span class="op" id="7017273">!=</span>&nbsp;<span class="ident" id="7017276">g</span><span class="op" id="7017277">.</span><span class="ident" id="7017278">castagnoli</span>&nbsp;<span class="op" id="7017289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017295">t</span><span class="op" id="7017296">.</span><span class="ident" id="7017297">Errorf</span><span class="op" id="7017303">(</span><span class="string" id="7017304">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="7017349">,</span>&nbsp;<span class="ident" id="7017351">g</span><span class="op" id="7017352">.</span><span class="ident" id="7017353">in</span><span class="op" id="7017355">,</span>&nbsp;<span class="ident" id="7017357">s</span><span class="op" id="7017358">,</span>&nbsp;<span class="ident" id="7017360">g</span><span class="op" id="7017361">.</span><span class="ident" id="7017362">castagnoli</span><span class="op" id="7017372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017377">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017384">}</span><br>
<span class="lineno"></span><span class="op" id="7017386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7017389">func</span>&nbsp;<span class="ident" id="7017394">BenchmarkCrc32KB</span><span class="op" id="7017410">(</span><span class="ident" id="7017411">b</span>&nbsp;<span class="op" id="7017413">*</span><span class="ident" id="7017414">testing</span><span class="op" id="7017421">.</span><span class="ident" id="7017422">B</span><span class="op" id="7017423">)</span>&nbsp;<span class="op" id="7017425">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017428">b</span><span class="op" id="7017429">.</span><span class="ident" id="7017430">SetBytes</span><span class="op" id="7017438">(</span><span class="num" id="7017439">1024</span><span class="op" id="7017443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017446">data</span>&nbsp;<span class="op" id="7017451">:=</span>&nbsp;<span class="builtinfunc" id="7017454">make</span><span class="op" id="7017458">(</span><span class="op" id="7017459">[</span><span class="op" id="7017460">]</span><span class="builtintype" id="7017461">byte</span><span class="op" id="7017465">,</span>&nbsp;<span class="num" id="7017467">1024</span><span class="op" id="7017471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017474">for</span>&nbsp;<span class="ident" id="7017478">i</span>&nbsp;<span class="op" id="7017480">:=</span>&nbsp;<span class="keyword" id="7017483">range</span>&nbsp;<span class="ident" id="7017489">data</span>&nbsp;<span class="op" id="7017494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017498">data</span><span class="op" id="7017502">[</span><span class="ident" id="7017503">i</span><span class="op" id="7017504">]</span>&nbsp;<span class="op" id="7017506">=</span>&nbsp;<span class="builtintype" id="7017508">byte</span><span class="op" id="7017512">(</span><span class="ident" id="7017513">i</span><span class="op" id="7017514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017517">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017520">h</span>&nbsp;<span class="op" id="7017522">:=</span>&nbsp;<span class="ident" id="7017525">NewIEEE</span><span class="op" id="7017532">(</span><span class="op" id="7017533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017536">in</span>&nbsp;<span class="op" id="7017539">:=</span>&nbsp;<span class="builtinfunc" id="7017542">make</span><span class="op" id="7017546">(</span><span class="op" id="7017547">[</span><span class="op" id="7017548">]</span><span class="builtintype" id="7017549">byte</span><span class="op" id="7017553">,</span>&nbsp;<span class="num" id="7017555">0</span><span class="op" id="7017556">,</span>&nbsp;<span class="ident" id="7017558">h</span><span class="op" id="7017559">.</span><span class="ident" id="7017560">Size</span><span class="op" id="7017564">(</span><span class="op" id="7017565">)</span><span class="op" id="7017566">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017570">b</span><span class="op" id="7017571">.</span><span class="ident" id="7017572">ResetTimer</span><span class="op" id="7017582">(</span><span class="op" id="7017583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017586">for</span>&nbsp;<span class="ident" id="7017590">i</span>&nbsp;<span class="op" id="7017592">:=</span>&nbsp;<span class="num" id="7017595">0</span><span class="op" id="7017596">;</span>&nbsp;<span class="ident" id="7017598">i</span>&nbsp;<span class="op" id="7017600">&lt;</span>&nbsp;<span class="ident" id="7017602">b</span><span class="op" id="7017603">.</span><span class="ident" id="7017604">N</span><span class="op" id="7017605">;</span>&nbsp;<span class="ident" id="7017607">i</span><span class="op" id="7017608">++</span>&nbsp;<span class="op" id="7017611">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017615">h</span><span class="op" id="7017616">.</span><span class="ident" id="7017617">Reset</span><span class="op" id="7017622">(</span><span class="op" id="7017623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017627">h</span><span class="op" id="7017628">.</span><span class="ident" id="7017629">Write</span><span class="op" id="7017634">(</span><span class="ident" id="7017635">data</span><span class="op" id="7017639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017643">h</span><span class="op" id="7017644">.</span><span class="ident" id="7017645">Sum</span><span class="op" id="7017648">(</span><span class="ident" id="7017649">in</span><span class="op" id="7017651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017654">}</span><br>
<span class="lineno"></span><span class="op" id="7017656">}</span>
</div>
</body>
</html>
