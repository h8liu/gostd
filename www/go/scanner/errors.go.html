<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5065309">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5065364">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5065418">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5065469">package</span>&nbsp;<span class="ident" id="5065477">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5065486">import</span>&nbsp;<span class="op" id="5065493">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5065496">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5065503">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5065515">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5065521">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="5065528">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5065531">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="5065589">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5065647">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="5065708">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="5065719">//</span><br>
<span class="lineno"></span><span class="keyword" id="5065722">type</span>&nbsp;<span class="ident" id="5065727">Error</span>&nbsp;<span class="keyword" id="5065733">struct</span>&nbsp;<span class="op" id="5065740">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5065743">Pos</span>&nbsp;<span class="ident" id="5065747">token</span><span class="op" id="5065752">.</span><span class="ident" id="5065753">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5065763">Msg</span>&nbsp;<span class="builtintype" id="5065767">string</span><br>
<span class="lineno"></span><span class="op" id="5065774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5065777">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="5065818">func</span>&nbsp;<span class="op" id="5065823">(</span><span class="ident" id="5065824">e</span>&nbsp;<span class="ident" id="5065826">Error</span><span class="op" id="5065831">)</span>&nbsp;<span class="ident" id="5065833">Error</span><span class="op" id="5065838">(</span><span class="op" id="5065839">)</span>&nbsp;<span class="builtintype" id="5065841">string</span>&nbsp;<span class="op" id="5065848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065851">if</span>&nbsp;<span class="ident" id="5065854">e</span><span class="op" id="5065855">.</span><span class="ident" id="5065856">Pos</span><span class="op" id="5065859">.</span><span class="ident" id="5065860">Filename</span>&nbsp;<span class="op" id="5065869">!=</span>&nbsp;<span class="string" id="5065872">&#34;&#34;</span>&nbsp;<span class="op" id="5065875">||</span>&nbsp;<span class="ident" id="5065878">e</span><span class="op" id="5065879">.</span><span class="ident" id="5065880">Pos</span><span class="op" id="5065883">.</span><span class="ident" id="5065884">IsValid</span><span class="op" id="5065891">(</span><span class="op" id="5065892">)</span>&nbsp;<span class="op" id="5065894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5065898">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5065936">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5065996">return</span>&nbsp;<span class="ident" id="5066003">e</span><span class="op" id="5066004">.</span><span class="ident" id="5066005">Pos</span><span class="op" id="5066008">.</span><span class="ident" id="5066009">String</span><span class="op" id="5066015">(</span><span class="op" id="5066016">)</span>&nbsp;<span class="op" id="5066018">+</span>&nbsp;<span class="string" id="5066020">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="5066025">+</span>&nbsp;<span class="ident" id="5066027">e</span><span class="op" id="5066028">.</span><span class="ident" id="5066029">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066037">return</span>&nbsp;<span class="ident" id="5066044">e</span><span class="op" id="5066045">.</span><span class="ident" id="5066046">Msg</span><br>
<span class="lineno"></span><span class="op" id="5066050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5066053">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="5066088">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="5066159">//</span><br>
<span class="lineno"></span><span class="keyword" id="5066162">type</span>&nbsp;<span class="ident" id="5066167">ErrorList</span>&nbsp;<span class="op" id="5066177">[</span><span class="op" id="5066178">]</span><span class="op" id="5066179">*</span><span class="ident" id="5066180">Error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5066187">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="5066263">func</span>&nbsp;<span class="op" id="5066268">(</span><span class="ident" id="5066269">p</span>&nbsp;<span class="op" id="5066271">*</span><span class="ident" id="5066272">ErrorList</span><span class="op" id="5066281">)</span>&nbsp;<span class="ident" id="5066283">Add</span><span class="op" id="5066286">(</span><span class="ident" id="5066287">pos</span>&nbsp;<span class="ident" id="5066291">token</span><span class="op" id="5066296">.</span><span class="ident" id="5066297">Position</span><span class="op" id="5066305">,</span>&nbsp;<span class="ident" id="5066307">msg</span>&nbsp;<span class="builtintype" id="5066311">string</span><span class="op" id="5066317">)</span>&nbsp;<span class="op" id="5066319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066322">*</span><span class="ident" id="5066323">p</span>&nbsp;<span class="op" id="5066325">=</span>&nbsp;<span class="builtinfunc" id="5066327">append</span><span class="op" id="5066333">(</span><span class="op" id="5066334">*</span><span class="ident" id="5066335">p</span><span class="op" id="5066336">,</span>&nbsp;<span class="op" id="5066338">&amp;</span><span class="ident" id="5066339">Error</span><span class="op" id="5066344">{</span><span class="ident" id="5066345">pos</span><span class="op" id="5066348">,</span>&nbsp;<span class="ident" id="5066350">msg</span><span class="op" id="5066353">}</span><span class="op" id="5066354">)</span><br>
<span class="lineno"></span><span class="op" id="5066356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5066359">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="5066402">func</span>&nbsp;<span class="op" id="5066407">(</span><span class="ident" id="5066408">p</span>&nbsp;<span class="op" id="5066410">*</span><span class="ident" id="5066411">ErrorList</span><span class="op" id="5066420">)</span>&nbsp;<span class="ident" id="5066422">Reset</span><span class="op" id="5066427">(</span><span class="op" id="5066428">)</span>&nbsp;<span class="op" id="5066430">{</span>&nbsp;<span class="op" id="5066432">*</span><span class="ident" id="5066433">p</span>&nbsp;<span class="op" id="5066435">=</span>&nbsp;<span class="op" id="5066437">(</span><span class="op" id="5066438">*</span><span class="ident" id="5066439">p</span><span class="op" id="5066440">)</span><span class="op" id="5066441">[</span><span class="num" id="5066442">0</span><span class="op" id="5066443">:</span><span class="num" id="5066444">0</span><span class="op" id="5066445">]</span>&nbsp;<span class="op" id="5066447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5066450">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="5066494">func</span>&nbsp;<span class="op" id="5066499">(</span><span class="ident" id="5066500">p</span>&nbsp;<span class="ident" id="5066502">ErrorList</span><span class="op" id="5066511">)</span>&nbsp;<span class="ident" id="5066513">Len</span><span class="op" id="5066516">(</span><span class="op" id="5066517">)</span>&nbsp;<span class="builtintype" id="5066519">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5066528">{</span>&nbsp;<span class="keyword" id="5066530">return</span>&nbsp;<span class="builtinfunc" id="5066537">len</span><span class="op" id="5066540">(</span><span class="ident" id="5066541">p</span><span class="op" id="5066542">)</span>&nbsp;<span class="op" id="5066544">}</span><br>
<span class="lineno"></span><span class="keyword" id="5066546">func</span>&nbsp;<span class="op" id="5066551">(</span><span class="ident" id="5066552">p</span>&nbsp;<span class="ident" id="5066554">ErrorList</span><span class="op" id="5066563">)</span>&nbsp;<span class="ident" id="5066565">Swap</span><span class="op" id="5066569">(</span><span class="ident" id="5066570">i</span><span class="op" id="5066571">,</span>&nbsp;<span class="ident" id="5066573">j</span>&nbsp;<span class="builtintype" id="5066575">int</span><span class="op" id="5066578">)</span>&nbsp;<span class="op" id="5066580">{</span>&nbsp;<span class="ident" id="5066582">p</span><span class="op" id="5066583">[</span><span class="ident" id="5066584">i</span><span class="op" id="5066585">]</span><span class="op" id="5066586">,</span>&nbsp;<span class="ident" id="5066588">p</span><span class="op" id="5066589">[</span><span class="ident" id="5066590">j</span><span class="op" id="5066591">]</span>&nbsp;<span class="op" id="5066593">=</span>&nbsp;<span class="ident" id="5066595">p</span><span class="op" id="5066596">[</span><span class="ident" id="5066597">j</span><span class="op" id="5066598">]</span><span class="op" id="5066599">,</span>&nbsp;<span class="ident" id="5066601">p</span><span class="op" id="5066602">[</span><span class="ident" id="5066603">i</span><span class="op" id="5066604">]</span>&nbsp;<span class="op" id="5066606">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5066609">func</span>&nbsp;<span class="op" id="5066614">(</span><span class="ident" id="5066615">p</span>&nbsp;<span class="ident" id="5066617">ErrorList</span><span class="op" id="5066626">)</span>&nbsp;<span class="ident" id="5066628">Less</span><span class="op" id="5066632">(</span><span class="ident" id="5066633">i</span><span class="op" id="5066634">,</span>&nbsp;<span class="ident" id="5066636">j</span>&nbsp;<span class="builtintype" id="5066638">int</span><span class="op" id="5066641">)</span>&nbsp;<span class="builtintype" id="5066643">bool</span>&nbsp;<span class="op" id="5066648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066651">e</span>&nbsp;<span class="op" id="5066653">:=</span>&nbsp;<span class="op" id="5066656">&amp;</span><span class="ident" id="5066657">p</span><span class="op" id="5066658">[</span><span class="ident" id="5066659">i</span><span class="op" id="5066660">]</span><span class="op" id="5066661">.</span><span class="ident" id="5066662">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5066667">f</span>&nbsp;<span class="op" id="5066669">:=</span>&nbsp;<span class="op" id="5066672">&amp;</span><span class="ident" id="5066673">p</span><span class="op" id="5066674">[</span><span class="ident" id="5066675">j</span><span class="op" id="5066676">]</span><span class="op" id="5066677">.</span><span class="ident" id="5066678">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5066683">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5066757">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5066830">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066845">if</span>&nbsp;<span class="ident" id="5066848">e</span><span class="op" id="5066849">.</span><span class="ident" id="5066850">Filename</span>&nbsp;<span class="op" id="5066859">&lt;</span>&nbsp;<span class="ident" id="5066861">f</span><span class="op" id="5066862">.</span><span class="ident" id="5066863">Filename</span>&nbsp;<span class="op" id="5066872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066876">return</span>&nbsp;<span class="ident" id="5066883">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066889">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066892">if</span>&nbsp;<span class="ident" id="5066895">e</span><span class="op" id="5066896">.</span><span class="ident" id="5066897">Filename</span>&nbsp;<span class="op" id="5066906">==</span>&nbsp;<span class="ident" id="5066909">f</span><span class="op" id="5066910">.</span><span class="ident" id="5066911">Filename</span>&nbsp;<span class="op" id="5066920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066924">if</span>&nbsp;<span class="ident" id="5066927">e</span><span class="op" id="5066928">.</span><span class="ident" id="5066929">Line</span>&nbsp;<span class="op" id="5066934">&lt;</span>&nbsp;<span class="ident" id="5066936">f</span><span class="op" id="5066937">.</span><span class="ident" id="5066938">Line</span>&nbsp;<span class="op" id="5066943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066948">return</span>&nbsp;<span class="ident" id="5066955">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5066962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066966">if</span>&nbsp;<span class="ident" id="5066969">e</span><span class="op" id="5066970">.</span><span class="ident" id="5066971">Line</span>&nbsp;<span class="op" id="5066976">==</span>&nbsp;<span class="ident" id="5066979">f</span><span class="op" id="5066980">.</span><span class="ident" id="5066981">Line</span>&nbsp;<span class="op" id="5066986">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5066991">return</span>&nbsp;<span class="ident" id="5066998">e</span><span class="op" id="5066999">.</span><span class="ident" id="5067000">Column</span>&nbsp;<span class="op" id="5067007">&lt;</span>&nbsp;<span class="ident" id="5067009">f</span><span class="op" id="5067010">.</span><span class="ident" id="5067011">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067026">return</span>&nbsp;<span class="ident" id="5067033">false</span><br>
<span class="lineno"></span><span class="op" id="5067039">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="5067042">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="5067109">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="5067176">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="5067186">//</span><br>
<span class="lineno">75</span><span class="keyword" id="5067189">func</span>&nbsp;<span class="op" id="5067194">(</span><span class="ident" id="5067195">p</span>&nbsp;<span class="ident" id="5067197">ErrorList</span><span class="op" id="5067206">)</span>&nbsp;<span class="ident" id="5067208">Sort</span><span class="op" id="5067212">(</span><span class="op" id="5067213">)</span>&nbsp;<span class="op" id="5067215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067218">sort</span><span class="op" id="5067222">.</span><span class="ident" id="5067223">Sort</span><span class="op" id="5067227">(</span><span class="ident" id="5067228">p</span><span class="op" id="5067229">)</span><br>
<span class="lineno"></span><span class="op" id="5067231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5067234">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="5067318">func</span>&nbsp;<span class="op" id="5067323">(</span><span class="ident" id="5067324">p</span>&nbsp;<span class="op" id="5067326">*</span><span class="ident" id="5067327">ErrorList</span><span class="op" id="5067336">)</span>&nbsp;<span class="ident" id="5067338">RemoveMultiples</span><span class="op" id="5067353">(</span><span class="op" id="5067354">)</span>&nbsp;<span class="op" id="5067356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067359">sort</span><span class="op" id="5067363">.</span><span class="ident" id="5067364">Sort</span><span class="op" id="5067368">(</span><span class="ident" id="5067369">p</span><span class="op" id="5067370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067373">var</span>&nbsp;<span class="ident" id="5067377">last</span>&nbsp;<span class="ident" id="5067382">token</span><span class="op" id="5067387">.</span><span class="ident" id="5067388">Position</span>&nbsp;<span class="comment" id="5067397">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067446">i</span>&nbsp;<span class="op" id="5067448">:=</span>&nbsp;<span class="num" id="5067451">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067454">for</span>&nbsp;<span class="ident" id="5067458">_</span><span class="op" id="5067459">,</span>&nbsp;<span class="ident" id="5067461">e</span>&nbsp;<span class="op" id="5067463">:=</span>&nbsp;<span class="keyword" id="5067466">range</span>&nbsp;<span class="op" id="5067472">*</span><span class="ident" id="5067473">p</span>&nbsp;<span class="op" id="5067475">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067479">if</span>&nbsp;<span class="ident" id="5067482">e</span><span class="op" id="5067483">.</span><span class="ident" id="5067484">Pos</span><span class="op" id="5067487">.</span><span class="ident" id="5067488">Filename</span>&nbsp;<span class="op" id="5067497">!=</span>&nbsp;<span class="ident" id="5067500">last</span><span class="op" id="5067504">.</span><span class="ident" id="5067505">Filename</span>&nbsp;<span class="op" id="5067514">||</span>&nbsp;<span class="ident" id="5067517">e</span><span class="op" id="5067518">.</span><span class="ident" id="5067519">Pos</span><span class="op" id="5067522">.</span><span class="ident" id="5067523">Line</span>&nbsp;<span class="op" id="5067528">!=</span>&nbsp;<span class="ident" id="5067531">last</span><span class="op" id="5067535">.</span><span class="ident" id="5067536">Line</span>&nbsp;<span class="op" id="5067541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067546">last</span>&nbsp;<span class="op" id="5067551">=</span>&nbsp;<span class="ident" id="5067553">e</span><span class="op" id="5067554">.</span><span class="ident" id="5067555">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067562">(</span><span class="op" id="5067563">*</span><span class="ident" id="5067564">p</span><span class="op" id="5067565">)</span><span class="op" id="5067566">[</span><span class="ident" id="5067567">i</span><span class="op" id="5067568">]</span>&nbsp;<span class="op" id="5067570">=</span>&nbsp;<span class="ident" id="5067572">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5067577">i</span><span class="op" id="5067578">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067583">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067589">(</span><span class="op" id="5067590">*</span><span class="ident" id="5067591">p</span><span class="op" id="5067592">)</span>&nbsp;<span class="op" id="5067594">=</span>&nbsp;<span class="op" id="5067596">(</span><span class="op" id="5067597">*</span><span class="ident" id="5067598">p</span><span class="op" id="5067599">)</span><span class="op" id="5067600">[</span><span class="num" id="5067601">0</span><span class="op" id="5067602">:</span><span class="ident" id="5067603">i</span><span class="op" id="5067604">]</span><br>
<span class="lineno"></span><span class="op" id="5067606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5067609">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="5067657">func</span>&nbsp;<span class="op" id="5067662">(</span><span class="ident" id="5067663">p</span>&nbsp;<span class="ident" id="5067665">ErrorList</span><span class="op" id="5067674">)</span>&nbsp;<span class="ident" id="5067676">Error</span><span class="op" id="5067681">(</span><span class="op" id="5067682">)</span>&nbsp;<span class="builtintype" id="5067684">string</span>&nbsp;<span class="op" id="5067691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067694">switch</span>&nbsp;<span class="builtinfunc" id="5067701">len</span><span class="op" id="5067704">(</span><span class="ident" id="5067705">p</span><span class="op" id="5067706">)</span>&nbsp;<span class="op" id="5067708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067711">case</span>&nbsp;<span class="num" id="5067716">0</span><span class="op" id="5067717">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067721">return</span>&nbsp;<span class="string" id="5067728">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067741">case</span>&nbsp;<span class="num" id="5067746">1</span><span class="op" id="5067747">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067751">return</span>&nbsp;<span class="ident" id="5067758">p</span><span class="op" id="5067759">[</span><span class="num" id="5067760">0</span><span class="op" id="5067761">]</span><span class="op" id="5067762">.</span><span class="ident" id="5067763">Error</span><span class="op" id="5067768">(</span><span class="op" id="5067769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5067772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067775">return</span>&nbsp;<span class="ident" id="5067782">fmt</span><span class="op" id="5067785">.</span><span class="ident" id="5067786">Sprintf</span><span class="op" id="5067793">(</span><span class="string" id="5067794">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="5067819">,</span>&nbsp;<span class="ident" id="5067821">p</span><span class="op" id="5067822">[</span><span class="num" id="5067823">0</span><span class="op" id="5067824">]</span><span class="op" id="5067825">,</span>&nbsp;<span class="builtinfunc" id="5067827">len</span><span class="op" id="5067830">(</span><span class="ident" id="5067831">p</span><span class="op" id="5067832">)</span><span class="op" id="5067833">-</span><span class="num" id="5067834">1</span><span class="op" id="5067835">)</span><br>
<span class="lineno"></span><span class="op" id="5067837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5067840">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="5067895">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5067937">func</span>&nbsp;<span class="op" id="5067942">(</span><span class="ident" id="5067943">p</span>&nbsp;<span class="ident" id="5067945">ErrorList</span><span class="op" id="5067954">)</span>&nbsp;<span class="ident" id="5067956">Err</span><span class="op" id="5067959">(</span><span class="op" id="5067960">)</span>&nbsp;<span class="builtintype" id="5067962">error</span>&nbsp;<span class="op" id="5067968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067971">if</span>&nbsp;<span class="builtinfunc" id="5067974">len</span><span class="op" id="5067977">(</span><span class="ident" id="5067978">p</span><span class="op" id="5067979">)</span>&nbsp;<span class="op" id="5067981">==</span>&nbsp;<span class="num" id="5067984">0</span>&nbsp;<span class="op" id="5067986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5067990">return</span>&nbsp;<span class="ident" id="5067997">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068005">return</span>&nbsp;<span class="ident" id="5068012">p</span><br>
<span class="lineno"></span><span class="op" id="5068014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5068017">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="5068088">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="5068159">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5068188">//</span><br>
<span class="lineno"></span><span class="keyword" id="5068191">func</span>&nbsp;<span class="ident" id="5068196">PrintError</span><span class="op" id="5068206">(</span><span class="ident" id="5068207">w</span>&nbsp;<span class="ident" id="5068209">io</span><span class="op" id="5068211">.</span><span class="ident" id="5068212">Writer</span><span class="op" id="5068218">,</span>&nbsp;<span class="ident" id="5068220">err</span>&nbsp;<span class="builtintype" id="5068224">error</span><span class="op" id="5068229">)</span>&nbsp;<span class="op" id="5068231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068234">if</span>&nbsp;<span class="ident" id="5068237">list</span><span class="op" id="5068241">,</span>&nbsp;<span class="ident" id="5068243">ok</span>&nbsp;<span class="op" id="5068246">:=</span>&nbsp;<span class="ident" id="5068249">err</span><span class="op" id="5068252">.</span><span class="op" id="5068253">(</span><span class="ident" id="5068254">ErrorList</span><span class="op" id="5068263">)</span><span class="op" id="5068264">;</span>&nbsp;<span class="ident" id="5068266">ok</span>&nbsp;<span class="op" id="5068269">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5068273">for</span>&nbsp;<span class="ident" id="5068277">_</span><span class="op" id="5068278">,</span>&nbsp;<span class="ident" id="5068280">e</span>&nbsp;<span class="op" id="5068282">:=</span>&nbsp;<span class="keyword" id="5068285">range</span>&nbsp;<span class="ident" id="5068291">list</span>&nbsp;<span class="op" id="5068296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5068301">fmt</span><span class="op" id="5068304">.</span><span class="ident" id="5068305">Fprintf</span><span class="op" id="5068312">(</span><span class="ident" id="5068313">w</span><span class="op" id="5068314">,</span>&nbsp;<span class="string" id="5068316">&#34;%s\n&#34;</span><span class="op" id="5068322">,</span>&nbsp;<span class="ident" id="5068324">e</span><span class="op" id="5068325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068332">}</span>&nbsp;<span class="keyword" id="5068334">else</span>&nbsp;<span class="keyword" id="5068339">if</span>&nbsp;<span class="ident" id="5068342">err</span>&nbsp;<span class="op" id="5068346">!=</span>&nbsp;<span class="ident" id="5068349">nil</span>&nbsp;<span class="op" id="5068353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5068357">fmt</span><span class="op" id="5068360">.</span><span class="ident" id="5068361">Fprintf</span><span class="op" id="5068368">(</span><span class="ident" id="5068369">w</span><span class="op" id="5068370">,</span>&nbsp;<span class="string" id="5068372">&#34;%s\n&#34;</span><span class="op" id="5068378">,</span>&nbsp;<span class="ident" id="5068380">err</span><span class="op" id="5068383">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5068386">}</span><br>
<span class="lineno"></span><span class="op" id="5068388">}</span>
</div>
</body>
</html>
