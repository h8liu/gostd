<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6075076">package</span>&nbsp;<span class="ident" id="6075084">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6075091">import</span>&nbsp;<span class="op" id="6075098">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6075101">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6075109">&#34;lonnie.io/e8vm/arch8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6075132">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6075135">func</span>&nbsp;<span class="ident" id="6075140">layout</span><span class="op" id="6075146">(</span><span class="ident" id="6075147">used</span>&nbsp;<span class="op" id="6075152">[</span><span class="op" id="6075153">]</span><span class="ident" id="6075154"><a href="/lonnie.io/e8vm/link8/pkg_sym.go.html#6081348">pkgSym</a></span><span class="op" id="6075160">)</span>&nbsp;<span class="op" id="6075162">(</span><span class="ident" id="6075163">funcs</span><span class="op" id="6075168">,</span>&nbsp;<span class="ident" id="6075170">vars</span>&nbsp;<span class="op" id="6075175">[</span><span class="op" id="6075176">]</span><span class="ident" id="6075177"><a href="/lonnie.io/e8vm/link8/pkg_sym.go.html#6081348">pkgSym</a></span><span class="op" id="6075183">,</span>&nbsp;<span class="ident" id="6075185">e</span>&nbsp;<span class="builtintype" id="6075187">error</span><span class="op" id="6075192">)</span>&nbsp;<span class="op" id="6075194">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6075197">//&nbsp;code</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075206">pt</span>&nbsp;<span class="op" id="6075209">:=</span>&nbsp;<span class="builtintype" id="6075212">uint32</span><span class="op" id="6075218">(</span><span class="ident" id="6075219"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075109">arch8</a></span><span class="op" id="6075224">.</span><span class="ident" id="6075225">InitPC</span><span class="op" id="6075231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075234">codeMax</span>&nbsp;<span class="op" id="6075242">:=</span>&nbsp;<span class="builtintype" id="6075245">uint32</span><span class="op" id="6075251">(</span><span class="num" id="6075252">0xffffffff</span><span class="op" id="6075262">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075266">for</span>&nbsp;<span class="ident" id="6075270">_</span><span class="op" id="6075271">,</span>&nbsp;<span class="ident" id="6075273">ps</span>&nbsp;<span class="op" id="6075276">:=</span>&nbsp;<span class="keyword" id="6075279">range</span>&nbsp;<span class="ident" id="6075285"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075147">used</a></span>&nbsp;<span class="op" id="6075290">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075294">typ</span>&nbsp;<span class="op" id="6075298">:=</span>&nbsp;<span class="ident" id="6075301"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075273">ps</a></span><span class="op" id="6075303">.</span><span class="ident" id="6075304">Type</span><span class="op" id="6075308">(</span><span class="op" id="6075309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075313">switch</span>&nbsp;<span class="ident" id="6075320"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075294">typ</a></span>&nbsp;<span class="op" id="6075324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075328">case</span>&nbsp;<span class="ident" id="6075333"><a href="/lonnie.io/e8vm/link8/symbol.go.html#6081812">SymFunc</a></span><span class="op" id="6075340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075345"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075163">funcs</a></span>&nbsp;<span class="op" id="6075351">=</span>&nbsp;<span class="builtinfunc" id="6075353">append</span><span class="op" id="6075359">(</span><span class="ident" id="6075360"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075163">funcs</a></span><span class="op" id="6075365">,</span>&nbsp;<span class="ident" id="6075367"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075273">ps</a></span><span class="op" id="6075369">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075375">f</span>&nbsp;<span class="op" id="6075377">:=</span>&nbsp;<span class="ident" id="6075380"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075273">ps</a></span><span class="op" id="6075382">.</span><span class="ident" id="6075383">Func</span><span class="op" id="6075387">(</span><span class="op" id="6075388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075393"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075375">f</a></span><span class="op" id="6075394">.</span><span class="ident" id="6075395">addr</span>&nbsp;<span class="op" id="6075400">=</span>&nbsp;<span class="ident" id="6075402"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075408">size</span>&nbsp;<span class="op" id="6075413">:=</span>&nbsp;<span class="ident" id="6075416"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075375">f</a></span><span class="op" id="6075417">.</span><span class="ident" id="6075418">Size</span><span class="op" id="6075422">(</span><span class="op" id="6075423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075428">if</span>&nbsp;<span class="ident" id="6075431"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075408">size</a></span>&nbsp;<span class="op" id="6075436">&gt;</span>&nbsp;<span class="ident" id="6075438"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075234">codeMax</a></span><span class="op" id="6075445">-</span><span class="ident" id="6075446"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span>&nbsp;<span class="op" id="6075449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075455">return</span>&nbsp;<span class="ident" id="6075462">nil</span><span class="op" id="6075465">,</span>&nbsp;<span class="ident" id="6075467">nil</span><span class="op" id="6075470">,</span>&nbsp;<span class="ident" id="6075472"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075101">fmt</a></span><span class="op" id="6075475">.</span><span class="ident" id="6075476">Errorf</span><span class="op" id="6075482">(</span><span class="string" id="6075483">&#34;code&nbsp;section&nbsp;too&nbsp;large&#34;</span><span class="op" id="6075507">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075517"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span>&nbsp;<span class="op" id="6075520">+=</span>&nbsp;<span class="ident" id="6075523"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075408">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075530">case</span>&nbsp;<span class="ident" id="6075535"><a href="/lonnie.io/e8vm/link8/symbol.go.html#6081828">SymVar</a></span><span class="op" id="6075541">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075546"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075170">vars</a></span>&nbsp;<span class="op" id="6075551">=</span>&nbsp;<span class="builtinfunc" id="6075553">append</span><span class="op" id="6075559">(</span><span class="ident" id="6075560"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075170">vars</a></span><span class="op" id="6075564">,</span>&nbsp;<span class="ident" id="6075566"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075273">ps</a></span><span class="op" id="6075568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075572">default</span><span class="op" id="6075579">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6075584">panic</span><span class="op" id="6075589">(</span><span class="string" id="6075590">&#34;bug&#34;</span><span class="op" id="6075595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075606">dataMax</span>&nbsp;<span class="op" id="6075614">:=</span>&nbsp;<span class="builtintype" id="6075617">uint32</span><span class="op" id="6075623">(</span><span class="num" id="6075624">0xffffffff</span><span class="op" id="6075634">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075638">for</span>&nbsp;<span class="ident" id="6075642">_</span><span class="op" id="6075643">,</span>&nbsp;<span class="ident" id="6075645">ps</span>&nbsp;<span class="op" id="6075648">:=</span>&nbsp;<span class="keyword" id="6075651">range</span>&nbsp;<span class="ident" id="6075657"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075170">vars</a></span>&nbsp;<span class="op" id="6075662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075666">if</span>&nbsp;<span class="ident" id="6075669"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075645">ps</a></span><span class="op" id="6075671">.</span><span class="ident" id="6075672">Type</span><span class="op" id="6075676">(</span><span class="op" id="6075677">)</span>&nbsp;<span class="op" id="6075679">!=</span>&nbsp;<span class="ident" id="6075682"><a href="/lonnie.io/e8vm/link8/symbol.go.html#6081828">SymVar</a></span>&nbsp;<span class="op" id="6075689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6075694">panic</span><span class="op" id="6075699">(</span><span class="string" id="6075700">&#34;bug&#34;</span><span class="op" id="6075705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075709">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075714">v</span>&nbsp;<span class="op" id="6075716">:=</span>&nbsp;<span class="ident" id="6075719"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075645">ps</a></span><span class="op" id="6075721">.</span><span class="ident" id="6075722">Var</span><span class="op" id="6075725">(</span><span class="op" id="6075726">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075731">if</span>&nbsp;<span class="ident" id="6075734"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075735">.</span><span class="ident" id="6075736">align</span>&nbsp;<span class="op" id="6075742">&gt;</span>&nbsp;<span class="num" id="6075744">1</span>&nbsp;<span class="op" id="6075746">&amp;&amp;</span>&nbsp;<span class="ident" id="6075749"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span><span class="op" id="6075751">%</span><span class="ident" id="6075752"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075753">.</span><span class="ident" id="6075754">align</span>&nbsp;<span class="op" id="6075760">!=</span>&nbsp;<span class="num" id="6075763">0</span>&nbsp;<span class="op" id="6075765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075770"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075771">.</span><span class="ident" id="6075772">prePad</span>&nbsp;<span class="op" id="6075779">=</span>&nbsp;<span class="ident" id="6075781"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075782">.</span><span class="ident" id="6075783">align</span>&nbsp;<span class="op" id="6075789">-</span>&nbsp;<span class="ident" id="6075791"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span><span class="op" id="6075793">%</span><span class="ident" id="6075794"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075795">.</span><span class="ident" id="6075796">align</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075805"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span>&nbsp;<span class="op" id="6075808">+=</span>&nbsp;<span class="ident" id="6075811"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075812">.</span><span class="ident" id="6075813">prePad</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075826">if</span>&nbsp;<span class="ident" id="6075829"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075830">.</span><span class="ident" id="6075831">align</span>&nbsp;<span class="op" id="6075837">&gt;</span>&nbsp;<span class="num" id="6075839">1</span>&nbsp;<span class="op" id="6075841">&amp;&amp;</span>&nbsp;<span class="ident" id="6075844"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span><span class="op" id="6075846">%</span><span class="ident" id="6075847"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075848">.</span><span class="ident" id="6075849">align</span>&nbsp;<span class="op" id="6075855">!=</span>&nbsp;<span class="num" id="6075858">0</span>&nbsp;<span class="op" id="6075860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6075865">panic</span><span class="op" id="6075870">(</span><span class="string" id="6075871">&#34;bug&#34;</span><span class="op" id="6075876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075880">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075885"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075886">.</span><span class="ident" id="6075887">addr</span>&nbsp;<span class="op" id="6075892">=</span>&nbsp;<span class="ident" id="6075894"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075899">size</span>&nbsp;<span class="op" id="6075904">:=</span>&nbsp;<span class="ident" id="6075907"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075714">v</a></span><span class="op" id="6075908">.</span><span class="ident" id="6075909">Size</span><span class="op" id="6075913">(</span><span class="op" id="6075914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075918">if</span>&nbsp;<span class="ident" id="6075921"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075899">size</a></span>&nbsp;<span class="op" id="6075926">&gt;</span>&nbsp;<span class="ident" id="6075928"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075606">dataMax</a></span><span class="op" id="6075935">-</span><span class="ident" id="6075936"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span>&nbsp;<span class="op" id="6075939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075944">return</span>&nbsp;<span class="ident" id="6075951">nil</span><span class="op" id="6075954">,</span>&nbsp;<span class="ident" id="6075956">nil</span><span class="op" id="6075959">,</span>&nbsp;<span class="ident" id="6075961"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075101">fmt</a></span><span class="op" id="6075964">.</span><span class="ident" id="6075965">Errorf</span><span class="op" id="6075971">(</span><span class="string" id="6075972">&#34;binary&nbsp;too&nbsp;large&#34;</span><span class="op" id="6075990">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075999"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075206">pt</a></span>&nbsp;<span class="op" id="6076002">+=</span>&nbsp;<span class="ident" id="6076005"><a href="/lonnie.io/e8vm/link8/layout.go.html#6075899">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076015">return</span><br>
<span class="lineno"></span><span class="op" id="6076022">}</span>
</div>
</body>
</html>
