<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5107300">package</span>&nbsp;<span class="ident" id="5107308">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5107314">import</span>&nbsp;<span class="op" id="5107321">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5107324">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5107346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5107349">func</span>&nbsp;<span class="ident" id="5107354">parseFuncStmts</span><span class="op" id="5107368">(</span><span class="ident" id="5107369">p</span>&nbsp;<span class="op" id="5107371">*</span><span class="ident" id="5107372">parser</span><span class="op" id="5107378">,</span>&nbsp;<span class="ident" id="5107380">f</span>&nbsp;<span class="op" id="5107382">*</span><span class="ident" id="5107383">funcDecl</span><span class="op" id="5107391">)</span>&nbsp;<span class="op" id="5107393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107396">for</span>&nbsp;<span class="op" id="5107400">!</span><span class="op" id="5107401">(</span><span class="ident" id="5107402">p</span><span class="op" id="5107403">.</span><span class="ident" id="5107404">see</span><span class="op" id="5107407">(</span><span class="ident" id="5107408">Rbrace</span><span class="op" id="5107414">)</span>&nbsp;<span class="op" id="5107416">||</span>&nbsp;<span class="ident" id="5107419">p</span><span class="op" id="5107420">.</span><span class="ident" id="5107421">see</span><span class="op" id="5107424">(</span><span class="ident" id="5107425">lex8</span><span class="op" id="5107429">.</span><span class="ident" id="5107430">EOF</span><span class="op" id="5107433">)</span><span class="op" id="5107434">)</span>&nbsp;<span class="op" id="5107436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107440">stmt</span>&nbsp;<span class="op" id="5107445">:=</span>&nbsp;<span class="ident" id="5107448">parseFuncStmt</span><span class="op" id="5107461">(</span><span class="ident" id="5107462">p</span><span class="op" id="5107463">)</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107467">if</span>&nbsp;<span class="ident" id="5107470">stmt</span>&nbsp;<span class="op" id="5107475">!=</span>&nbsp;<span class="ident" id="5107478">nil</span>&nbsp;<span class="op" id="5107482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107487">f</span><span class="op" id="5107488">.</span><span class="ident" id="5107489">stmts</span>&nbsp;<span class="op" id="5107495">=</span>&nbsp;<span class="builtinfunc" id="5107497">append</span><span class="op" id="5107503">(</span><span class="ident" id="5107504">f</span><span class="op" id="5107505">.</span><span class="ident" id="5107506">stmts</span><span class="op" id="5107511">,</span>&nbsp;<span class="ident" id="5107513">stmt</span><span class="op" id="5107517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107525">p</span><span class="op" id="5107526">.</span><span class="ident" id="5107527">clearErr</span><span class="op" id="5107535">(</span><span class="op" id="5107536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107539">}</span><br>
<span class="lineno">15</span><span class="op" id="5107541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5107544">func</span>&nbsp;<span class="ident" id="5107549">parseBareFunc</span><span class="op" id="5107562">(</span><span class="ident" id="5107563">p</span>&nbsp;<span class="op" id="5107565">*</span><span class="ident" id="5107566">parser</span><span class="op" id="5107572">)</span>&nbsp;<span class="op" id="5107574">*</span><span class="ident" id="5107575">funcDecl</span>&nbsp;<span class="op" id="5107584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107587">ret</span>&nbsp;<span class="op" id="5107591">:=</span>&nbsp;<span class="builtinfunc" id="5107594">new</span><span class="op" id="5107597">(</span><span class="ident" id="5107598">funcDecl</span><span class="op" id="5107606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107609">ret</span><span class="op" id="5107612">.</span><span class="ident" id="5107613">name</span>&nbsp;<span class="op" id="5107618">=</span>&nbsp;<span class="op" id="5107620">&amp;</span><span class="ident" id="5107621">lex8</span><span class="op" id="5107625">.</span><span class="ident" id="5107626">Token</span><span class="op" id="5107631">{</span><span class="ident" id="5107632">Operand</span><span class="op" id="5107639">,</span>&nbsp;<span class="string" id="5107641">&#34;_&#34;</span><span class="op" id="5107644">,</span>&nbsp;<span class="ident" id="5107646">nil</span><span class="op" id="5107649">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107652">parseFuncStmts</span><span class="op" id="5107666">(</span><span class="ident" id="5107667">p</span><span class="op" id="5107668">,</span>&nbsp;<span class="ident" id="5107670">ret</span><span class="op" id="5107673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107676">return</span>&nbsp;<span class="ident" id="5107683">ret</span><br>
<span class="lineno"></span><span class="op" id="5107687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5107690">func</span>&nbsp;<span class="ident" id="5107695">parseFunc</span><span class="op" id="5107704">(</span><span class="ident" id="5107705">p</span>&nbsp;<span class="op" id="5107707">*</span><span class="ident" id="5107708">parser</span><span class="op" id="5107714">)</span>&nbsp;<span class="op" id="5107716">*</span><span class="ident" id="5107717">funcDecl</span>&nbsp;<span class="op" id="5107726">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107729">ret</span>&nbsp;<span class="op" id="5107733">:=</span>&nbsp;<span class="builtinfunc" id="5107736">new</span><span class="op" id="5107739">(</span><span class="ident" id="5107740">funcDecl</span><span class="op" id="5107748">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107752">ret</span><span class="op" id="5107755">.</span><span class="ident" id="5107756">kw</span>&nbsp;<span class="op" id="5107759">=</span>&nbsp;<span class="ident" id="5107761">p</span><span class="op" id="5107762">.</span><span class="ident" id="5107763">expectKeyword</span><span class="op" id="5107776">(</span><span class="string" id="5107777">&#34;func&#34;</span><span class="op" id="5107783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107786">ret</span><span class="op" id="5107789">.</span><span class="ident" id="5107790">name</span>&nbsp;<span class="op" id="5107795">=</span>&nbsp;<span class="ident" id="5107797">p</span><span class="op" id="5107798">.</span><span class="ident" id="5107799">expect</span><span class="op" id="5107805">(</span><span class="ident" id="5107806">Operand</span><span class="op" id="5107813">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107817">if</span>&nbsp;<span class="ident" id="5107820">ret</span><span class="op" id="5107823">.</span><span class="ident" id="5107824">name</span>&nbsp;<span class="op" id="5107829">!=</span>&nbsp;<span class="ident" id="5107832">nil</span>&nbsp;<span class="op" id="5107836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107840">name</span>&nbsp;<span class="op" id="5107845">:=</span>&nbsp;<span class="ident" id="5107848">ret</span><span class="op" id="5107851">.</span><span class="ident" id="5107852">name</span><span class="op" id="5107856">.</span><span class="ident" id="5107857">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107863">if</span>&nbsp;<span class="op" id="5107866">!</span><span class="ident" id="5107867">isIdent</span><span class="op" id="5107874">(</span><span class="ident" id="5107875">name</span><span class="op" id="5107879">)</span>&nbsp;<span class="op" id="5107881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107886">p</span><span class="op" id="5107887">.</span><span class="ident" id="5107888">err</span><span class="op" id="5107891">(</span><span class="ident" id="5107892">ret</span><span class="op" id="5107895">.</span><span class="ident" id="5107896">name</span><span class="op" id="5107900">.</span><span class="ident" id="5107901">Pos</span><span class="op" id="5107904">,</span>&nbsp;<span class="string" id="5107906">&#34;invalid&nbsp;func&nbsp;name&nbsp;%q&#34;</span><span class="op" id="5107928">,</span>&nbsp;<span class="ident" id="5107930">name</span><span class="op" id="5107934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107938">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107945">ret</span><span class="op" id="5107948">.</span><span class="ident" id="5107949">lbrace</span>&nbsp;<span class="op" id="5107956">=</span>&nbsp;<span class="ident" id="5107958">p</span><span class="op" id="5107959">.</span><span class="ident" id="5107960">expect</span><span class="op" id="5107966">(</span><span class="ident" id="5107967">Lbrace</span><span class="op" id="5107973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107976">if</span>&nbsp;<span class="ident" id="5107979">p</span><span class="op" id="5107980">.</span><span class="ident" id="5107981">skipErrStmt</span><span class="op" id="5107992">(</span><span class="op" id="5107993">)</span>&nbsp;<span class="op" id="5107995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107999">return</span>&nbsp;<span class="ident" id="5108006">ret</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5108011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108015">parseFuncStmts</span><span class="op" id="5108029">(</span><span class="ident" id="5108030">p</span><span class="op" id="5108031">,</span>&nbsp;<span class="ident" id="5108033">ret</span><span class="op" id="5108036">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108040">ret</span><span class="op" id="5108043">.</span><span class="ident" id="5108044">rbrace</span>&nbsp;<span class="op" id="5108051">=</span>&nbsp;<span class="ident" id="5108053">p</span><span class="op" id="5108054">.</span><span class="ident" id="5108055">expect</span><span class="op" id="5108061">(</span><span class="ident" id="5108062">Rbrace</span><span class="op" id="5108068">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108071">ret</span><span class="op" id="5108074">.</span><span class="ident" id="5108075">semi</span>&nbsp;<span class="op" id="5108080">=</span>&nbsp;<span class="ident" id="5108082">p</span><span class="op" id="5108083">.</span><span class="ident" id="5108084">expect</span><span class="op" id="5108090">(</span><span class="ident" id="5108091">Semi</span><span class="op" id="5108095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5108098">p</span><span class="op" id="5108099">.</span><span class="ident" id="5108100">skipErrStmt</span><span class="op" id="5108111">(</span><span class="op" id="5108112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5108116">return</span>&nbsp;<span class="ident" id="5108123">ret</span><br>
<span class="lineno"></span><span class="op" id="5108127">}</span>
</div>
</body>
</html>
