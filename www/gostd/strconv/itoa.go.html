<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html" class="current">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2242825">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2242880">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2242934">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2242985">package</span>&nbsp;<span class="ident" id="2242993">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243002">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2243074">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2243148">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2243175">func</span>&nbsp;<span class="ident" id="2243180">FormatUint</span><span class="op" id="2243190">(</span><span class="ident" id="2243191">i</span>&nbsp;<span class="ident" id="2243193">uint64</span><span class="op" id="2243199">,</span>&nbsp;<span class="ident" id="2243201">base</span>&nbsp;<span class="builtintype" id="2243206">int</span><span class="op" id="2243209">)</span>&nbsp;<span class="builtintype" id="2243211">string</span>&nbsp;<span class="op" id="2243218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243221">_</span><span class="op" id="2243222">,</span>&nbsp;<span class="ident" id="2243224">s</span>&nbsp;<span class="op" id="2243226">:=</span>&nbsp;<span class="ident" id="2243229">formatBits</span><span class="op" id="2243239">(</span><span class="ident" id="2243240">nil</span><span class="op" id="2243243">,</span>&nbsp;<span class="ident" id="2243245">i</span><span class="op" id="2243246">,</span>&nbsp;<span class="ident" id="2243248">base</span><span class="op" id="2243252">,</span>&nbsp;<span class="builtintype" id="2243254">false</span><span class="op" id="2243259">,</span>&nbsp;<span class="builtintype" id="2243261">false</span><span class="op" id="2243266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243269">return</span>&nbsp;<span class="ident" id="2243276">s</span><br>
<span class="lineno"></span><span class="op" id="2243278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2243281">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2243352">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2243426">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2243453">func</span>&nbsp;<span class="ident" id="2243458">FormatInt</span><span class="op" id="2243467">(</span><span class="ident" id="2243468">i</span>&nbsp;<span class="ident" id="2243470">int64</span><span class="op" id="2243475">,</span>&nbsp;<span class="ident" id="2243477">base</span>&nbsp;<span class="builtintype" id="2243482">int</span><span class="op" id="2243485">)</span>&nbsp;<span class="builtintype" id="2243487">string</span>&nbsp;<span class="op" id="2243494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243497">_</span><span class="op" id="2243498">,</span>&nbsp;<span class="ident" id="2243500">s</span>&nbsp;<span class="op" id="2243502">:=</span>&nbsp;<span class="ident" id="2243505">formatBits</span><span class="op" id="2243515">(</span><span class="ident" id="2243516">nil</span><span class="op" id="2243519">,</span>&nbsp;<span class="ident" id="2243521">uint64</span><span class="op" id="2243527">(</span><span class="ident" id="2243528">i</span><span class="op" id="2243529">)</span><span class="op" id="2243530">,</span>&nbsp;<span class="ident" id="2243532">base</span><span class="op" id="2243536">,</span>&nbsp;<span class="ident" id="2243538">i</span>&nbsp;<span class="op" id="2243540">&lt;</span>&nbsp;<span class="num" id="2243542">0</span><span class="op" id="2243543">,</span>&nbsp;<span class="builtintype" id="2243545">false</span><span class="op" id="2243550">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243553">return</span>&nbsp;<span class="ident" id="2243560">s</span><br>
<span class="lineno"></span><span class="op" id="2243562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243565">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2243608">func</span>&nbsp;<span class="ident" id="2243613">Itoa</span><span class="op" id="2243617">(</span><span class="ident" id="2243618">i</span>&nbsp;<span class="builtintype" id="2243620">int</span><span class="op" id="2243623">)</span>&nbsp;<span class="builtintype" id="2243625">string</span>&nbsp;<span class="op" id="2243632">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243635">return</span>&nbsp;<span class="ident" id="2243642">FormatInt</span><span class="op" id="2243651">(</span><span class="ident" id="2243652">int64</span><span class="op" id="2243657">(</span><span class="ident" id="2243658">i</span><span class="op" id="2243659">)</span><span class="op" id="2243660">,</span>&nbsp;<span class="num" id="2243662">10</span><span class="op" id="2243664">)</span><br>
<span class="lineno"></span><span class="op" id="2243666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243669">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2243724">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2243794">func</span>&nbsp;<span class="ident" id="2243799">AppendInt</span><span class="op" id="2243808">(</span><span class="ident" id="2243809">dst</span>&nbsp;<span class="op" id="2243813">[</span><span class="op" id="2243814">]</span><span class="builtintype" id="2243815">byte</span><span class="op" id="2243819">,</span>&nbsp;<span class="ident" id="2243821">i</span>&nbsp;<span class="ident" id="2243823">int64</span><span class="op" id="2243828">,</span>&nbsp;<span class="ident" id="2243830">base</span>&nbsp;<span class="builtintype" id="2243835">int</span><span class="op" id="2243838">)</span>&nbsp;<span class="op" id="2243840">[</span><span class="op" id="2243841">]</span><span class="builtintype" id="2243842">byte</span>&nbsp;<span class="op" id="2243847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243850">dst</span><span class="op" id="2243853">,</span>&nbsp;<span class="ident" id="2243855">_</span>&nbsp;<span class="op" id="2243857">=</span>&nbsp;<span class="ident" id="2243859">formatBits</span><span class="op" id="2243869">(</span><span class="ident" id="2243870">dst</span><span class="op" id="2243873">,</span>&nbsp;<span class="ident" id="2243875">uint64</span><span class="op" id="2243881">(</span><span class="ident" id="2243882">i</span><span class="op" id="2243883">)</span><span class="op" id="2243884">,</span>&nbsp;<span class="ident" id="2243886">base</span><span class="op" id="2243890">,</span>&nbsp;<span class="ident" id="2243892">i</span>&nbsp;<span class="op" id="2243894">&lt;</span>&nbsp;<span class="num" id="2243896">0</span><span class="op" id="2243897">,</span>&nbsp;<span class="builtintype" id="2243899">true</span><span class="op" id="2243903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243906">return</span>&nbsp;<span class="ident" id="2243913">dst</span><br>
<span class="lineno"></span><span class="op" id="2243917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2243920">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2243985">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2244056">func</span>&nbsp;<span class="ident" id="2244061">AppendUint</span><span class="op" id="2244071">(</span><span class="ident" id="2244072">dst</span>&nbsp;<span class="op" id="2244076">[</span><span class="op" id="2244077">]</span><span class="builtintype" id="2244078">byte</span><span class="op" id="2244082">,</span>&nbsp;<span class="ident" id="2244084">i</span>&nbsp;<span class="ident" id="2244086">uint64</span><span class="op" id="2244092">,</span>&nbsp;<span class="ident" id="2244094">base</span>&nbsp;<span class="builtintype" id="2244099">int</span><span class="op" id="2244102">)</span>&nbsp;<span class="op" id="2244104">[</span><span class="op" id="2244105">]</span><span class="builtintype" id="2244106">byte</span>&nbsp;<span class="op" id="2244111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244114">dst</span><span class="op" id="2244117">,</span>&nbsp;<span class="ident" id="2244119">_</span>&nbsp;<span class="op" id="2244121">=</span>&nbsp;<span class="ident" id="2244123">formatBits</span><span class="op" id="2244133">(</span><span class="ident" id="2244134">dst</span><span class="op" id="2244137">,</span>&nbsp;<span class="ident" id="2244139">i</span><span class="op" id="2244140">,</span>&nbsp;<span class="ident" id="2244142">base</span><span class="op" id="2244146">,</span>&nbsp;<span class="builtintype" id="2244148">false</span><span class="op" id="2244153">,</span>&nbsp;<span class="builtintype" id="2244155">true</span><span class="op" id="2244159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244162">return</span>&nbsp;<span class="ident" id="2244169">dst</span><br>
<span class="lineno">40</span><span class="op" id="2244173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2244176">const</span>&nbsp;<span class="op" id="2244182">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244185">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2244194">=</span>&nbsp;<span class="string" id="2244196">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244236">digits01</span>&nbsp;<span class="op" id="2244245">=</span>&nbsp;<span class="string" id="2244247">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244351">digits10</span>&nbsp;<span class="op" id="2244360">=</span>&nbsp;<span class="string" id="2244362">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2244465">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2244468">var</span>&nbsp;<span class="ident" id="2244472">shifts</span>&nbsp;<span class="op" id="2244479">=</span>&nbsp;<span class="op" id="2244481">[</span><span class="builtinfunc" id="2244482">len</span><span class="op" id="2244485">(</span><span class="ident" id="2244486">digits</span><span class="op" id="2244492">)</span>&nbsp;<span class="op" id="2244494">+</span>&nbsp;<span class="num" id="2244496">1</span><span class="op" id="2244497">]</span><span class="builtintype" id="2244498">uint</span><span class="op" id="2244502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2244505">1</span>&nbsp;<span class="op" id="2244507">&lt;&lt;</span>&nbsp;<span class="num" id="2244510">1</span><span class="op" id="2244511">:</span>&nbsp;<span class="num" id="2244513">1</span><span class="op" id="2244514">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2244517">1</span>&nbsp;<span class="op" id="2244519">&lt;&lt;</span>&nbsp;<span class="num" id="2244522">2</span><span class="op" id="2244523">:</span>&nbsp;<span class="num" id="2244525">2</span><span class="op" id="2244526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2244529">1</span>&nbsp;<span class="op" id="2244531">&lt;&lt;</span>&nbsp;<span class="num" id="2244534">3</span><span class="op" id="2244535">:</span>&nbsp;<span class="num" id="2244537">3</span><span class="op" id="2244538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2244541">1</span>&nbsp;<span class="op" id="2244543">&lt;&lt;</span>&nbsp;<span class="num" id="2244546">4</span><span class="op" id="2244547">:</span>&nbsp;<span class="num" id="2244549">4</span><span class="op" id="2244550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2244553">1</span>&nbsp;<span class="op" id="2244555">&lt;&lt;</span>&nbsp;<span class="num" id="2244558">5</span><span class="op" id="2244559">:</span>&nbsp;<span class="num" id="2244561">5</span><span class="op" id="2244562">,</span><br>
<span class="lineno"></span><span class="op" id="2244564">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2244567">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2244640">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2244710">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2244780">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2244852">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2244883">//</span><br>
<span class="lineno"></span><span class="keyword" id="2244886">func</span>&nbsp;<span class="ident" id="2244891">formatBits</span><span class="op" id="2244901">(</span><span class="ident" id="2244902">dst</span>&nbsp;<span class="op" id="2244906">[</span><span class="op" id="2244907">]</span><span class="builtintype" id="2244908">byte</span><span class="op" id="2244912">,</span>&nbsp;<span class="ident" id="2244914">u</span>&nbsp;<span class="ident" id="2244916">uint64</span><span class="op" id="2244922">,</span>&nbsp;<span class="ident" id="2244924">base</span>&nbsp;<span class="builtintype" id="2244929">int</span><span class="op" id="2244932">,</span>&nbsp;<span class="ident" id="2244934">neg</span><span class="op" id="2244937">,</span>&nbsp;<span class="ident" id="2244939">append_</span>&nbsp;<span class="builtintype" id="2244947">bool</span><span class="op" id="2244951">)</span>&nbsp;<span class="op" id="2244953">(</span><span class="ident" id="2244954">d</span>&nbsp;<span class="op" id="2244956">[</span><span class="op" id="2244957">]</span><span class="builtintype" id="2244958">byte</span><span class="op" id="2244962">,</span>&nbsp;<span class="ident" id="2244964">s</span>&nbsp;<span class="builtintype" id="2244966">string</span><span class="op" id="2244972">)</span>&nbsp;<span class="op" id="2244974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244977">if</span>&nbsp;<span class="ident" id="2244980">base</span>&nbsp;<span class="op" id="2244985">&lt;</span>&nbsp;<span class="num" id="2244987">2</span>&nbsp;<span class="op" id="2244989">||</span>&nbsp;<span class="ident" id="2244992">base</span>&nbsp;<span class="op" id="2244997">&gt;</span>&nbsp;<span class="builtinfunc" id="2244999">len</span><span class="op" id="2245002">(</span><span class="ident" id="2245003">digits</span><span class="op" id="2245009">)</span>&nbsp;<span class="op" id="2245011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2245015">panic</span><span class="op" id="2245020">(</span><span class="string" id="2245021">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2245064">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245070">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245108">var</span>&nbsp;<span class="ident" id="2245112">a</span>&nbsp;<span class="op" id="2245114">[</span><span class="num" id="2245115">64</span>&nbsp;<span class="op" id="2245118">+</span>&nbsp;<span class="num" id="2245120">1</span><span class="op" id="2245121">]</span><span class="builtintype" id="2245122">byte</span>&nbsp;<span class="comment" id="2245127">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245168">i</span>&nbsp;<span class="op" id="2245170">:=</span>&nbsp;<span class="builtinfunc" id="2245173">len</span><span class="op" id="2245176">(</span><span class="ident" id="2245177">a</span><span class="op" id="2245178">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245182">if</span>&nbsp;<span class="ident" id="2245185">neg</span>&nbsp;<span class="op" id="2245189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245193">u</span>&nbsp;<span class="op" id="2245195">=</span>&nbsp;<span class="op" id="2245197">-</span><span class="ident" id="2245198">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245205">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245222">if</span>&nbsp;<span class="ident" id="2245225">base</span>&nbsp;<span class="op" id="2245230">==</span>&nbsp;<span class="num" id="2245233">10</span>&nbsp;<span class="op" id="2245236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245240">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245292">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245349">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245370">for</span>&nbsp;<span class="ident" id="2245374">u</span>&nbsp;<span class="op" id="2245376">&gt;=</span>&nbsp;<span class="num" id="2245379">100</span>&nbsp;<span class="op" id="2245383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245388">i</span>&nbsp;<span class="op" id="2245390">-=</span>&nbsp;<span class="num" id="2245393">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245398">q</span>&nbsp;<span class="op" id="2245400">:=</span>&nbsp;<span class="ident" id="2245403">u</span>&nbsp;<span class="op" id="2245405">/</span>&nbsp;<span class="num" id="2245407">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245414">j</span>&nbsp;<span class="op" id="2245416">:=</span>&nbsp;<span class="builtintype" id="2245419">uintptr</span><span class="op" id="2245426">(</span><span class="ident" id="2245427">u</span>&nbsp;<span class="op" id="2245429">-</span>&nbsp;<span class="ident" id="2245431">q</span><span class="op" id="2245432">*</span><span class="num" id="2245433">100</span><span class="op" id="2245436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245441">a</span><span class="op" id="2245442">[</span><span class="ident" id="2245443">i</span><span class="op" id="2245444">+</span><span class="num" id="2245445">1</span><span class="op" id="2245446">]</span>&nbsp;<span class="op" id="2245448">=</span>&nbsp;<span class="ident" id="2245450">digits01</span><span class="op" id="2245458">[</span><span class="ident" id="2245459">j</span><span class="op" id="2245460">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245465">a</span><span class="op" id="2245466">[</span><span class="ident" id="2245467">i</span><span class="op" id="2245468">+</span><span class="num" id="2245469">0</span><span class="op" id="2245470">]</span>&nbsp;<span class="op" id="2245472">=</span>&nbsp;<span class="ident" id="2245474">digits10</span><span class="op" id="2245482">[</span><span class="ident" id="2245483">j</span><span class="op" id="2245484">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245489">u</span>&nbsp;<span class="op" id="2245491">=</span>&nbsp;<span class="ident" id="2245493">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245501">if</span>&nbsp;<span class="ident" id="2245504">u</span>&nbsp;<span class="op" id="2245506">&gt;=</span>&nbsp;<span class="num" id="2245509">10</span>&nbsp;<span class="op" id="2245512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245517">i</span><span class="op" id="2245518">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245524">q</span>&nbsp;<span class="op" id="2245526">:=</span>&nbsp;<span class="ident" id="2245529">u</span>&nbsp;<span class="op" id="2245531">/</span>&nbsp;<span class="num" id="2245533">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245539">a</span><span class="op" id="2245540">[</span><span class="ident" id="2245541">i</span><span class="op" id="2245542">]</span>&nbsp;<span class="op" id="2245544">=</span>&nbsp;<span class="ident" id="2245546">digits</span><span class="op" id="2245552">[</span><span class="builtintype" id="2245553">uintptr</span><span class="op" id="2245560">(</span><span class="ident" id="2245561">u</span><span class="op" id="2245562">-</span><span class="ident" id="2245563">q</span><span class="op" id="2245564">*</span><span class="num" id="2245565">10</span><span class="op" id="2245567">)</span><span class="op" id="2245568">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245573">u</span>&nbsp;<span class="op" id="2245575">=</span>&nbsp;<span class="ident" id="2245577">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245585">}</span>&nbsp;<span class="keyword" id="2245587">else</span>&nbsp;<span class="keyword" id="2245592">if</span>&nbsp;<span class="ident" id="2245595">s</span>&nbsp;<span class="op" id="2245597">:=</span>&nbsp;<span class="ident" id="2245600">shifts</span><span class="op" id="2245606">[</span><span class="ident" id="2245607">base</span><span class="op" id="2245611">]</span><span class="op" id="2245612">;</span>&nbsp;<span class="ident" id="2245614">s</span>&nbsp;<span class="op" id="2245616">&gt;</span>&nbsp;<span class="num" id="2245618">0</span>&nbsp;<span class="op" id="2245620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245624">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245689">b</span>&nbsp;<span class="op" id="2245691">:=</span>&nbsp;<span class="ident" id="2245694">uint64</span><span class="op" id="2245700">(</span><span class="ident" id="2245701">base</span><span class="op" id="2245705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245709">m</span>&nbsp;<span class="op" id="2245711">:=</span>&nbsp;<span class="builtintype" id="2245714">uintptr</span><span class="op" id="2245721">(</span><span class="ident" id="2245722">b</span><span class="op" id="2245723">)</span>&nbsp;<span class="op" id="2245725">-</span>&nbsp;<span class="num" id="2245727">1</span>&nbsp;<span class="comment" id="2245729">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245746">for</span>&nbsp;<span class="ident" id="2245750">u</span>&nbsp;<span class="op" id="2245752">&gt;=</span>&nbsp;<span class="ident" id="2245755">b</span>&nbsp;<span class="op" id="2245757">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245762">i</span><span class="op" id="2245763">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245769">a</span><span class="op" id="2245770">[</span><span class="ident" id="2245771">i</span><span class="op" id="2245772">]</span>&nbsp;<span class="op" id="2245774">=</span>&nbsp;<span class="ident" id="2245776">digits</span><span class="op" id="2245782">[</span><span class="builtintype" id="2245783">uintptr</span><span class="op" id="2245790">(</span><span class="ident" id="2245791">u</span><span class="op" id="2245792">)</span><span class="op" id="2245793">&amp;</span><span class="ident" id="2245794">m</span><span class="op" id="2245795">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245800">u</span>&nbsp;<span class="op" id="2245802">&gt;&gt;=</span>&nbsp;<span class="ident" id="2245806">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245814">}</span>&nbsp;<span class="keyword" id="2245816">else</span>&nbsp;<span class="op" id="2245821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245825">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245843">b</span>&nbsp;<span class="op" id="2245845">:=</span>&nbsp;<span class="ident" id="2245848">uint64</span><span class="op" id="2245854">(</span><span class="ident" id="2245855">base</span><span class="op" id="2245859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245863">for</span>&nbsp;<span class="ident" id="2245867">u</span>&nbsp;<span class="op" id="2245869">&gt;=</span>&nbsp;<span class="ident" id="2245872">b</span>&nbsp;<span class="op" id="2245874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245879">i</span><span class="op" id="2245880">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245886">a</span><span class="op" id="2245887">[</span><span class="ident" id="2245888">i</span><span class="op" id="2245889">]</span>&nbsp;<span class="op" id="2245891">=</span>&nbsp;<span class="ident" id="2245893">digits</span><span class="op" id="2245899">[</span><span class="builtintype" id="2245900">uintptr</span><span class="op" id="2245907">(</span><span class="ident" id="2245908">u</span><span class="op" id="2245909">%</span><span class="ident" id="2245910">b</span><span class="op" id="2245911">)</span><span class="op" id="2245912">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245917">u</span>&nbsp;<span class="op" id="2245919">/=</span>&nbsp;<span class="ident" id="2245922">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245933">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245946">i</span><span class="op" id="2245947">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245951">a</span><span class="op" id="2245952">[</span><span class="ident" id="2245953">i</span><span class="op" id="2245954">]</span>&nbsp;<span class="op" id="2245956">=</span>&nbsp;<span class="ident" id="2245958">digits</span><span class="op" id="2245964">[</span><span class="builtintype" id="2245965">uintptr</span><span class="op" id="2245972">(</span><span class="ident" id="2245973">u</span><span class="op" id="2245974">)</span><span class="op" id="2245975">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245979">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246000">if</span>&nbsp;<span class="ident" id="2246003">neg</span>&nbsp;<span class="op" id="2246007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246011">i</span><span class="op" id="2246012">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246017">a</span><span class="op" id="2246018">[</span><span class="ident" id="2246019">i</span><span class="op" id="2246020">]</span>&nbsp;<span class="op" id="2246022">=</span>&nbsp;<span class="string" id="2246024">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246033">if</span>&nbsp;<span class="ident" id="2246036">append_</span>&nbsp;<span class="op" id="2246044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246048">d</span>&nbsp;<span class="op" id="2246050">=</span>&nbsp;<span class="builtinfunc" id="2246052">append</span><span class="op" id="2246058">(</span><span class="ident" id="2246059">dst</span><span class="op" id="2246062">,</span>&nbsp;<span class="ident" id="2246064">a</span><span class="op" id="2246065">[</span><span class="ident" id="2246066">i</span><span class="op" id="2246067">:</span><span class="op" id="2246068">]</span><span class="op" id="2246069">...</span><span class="op" id="2246072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246076">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246087">s</span>&nbsp;<span class="op" id="2246089">=</span>&nbsp;<span class="builtintype" id="2246091">string</span><span class="op" id="2246097">(</span><span class="ident" id="2246098">a</span><span class="op" id="2246099">[</span><span class="ident" id="2246100">i</span><span class="op" id="2246101">:</span><span class="op" id="2246102">]</span><span class="op" id="2246103">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246106">return</span><br>
<span class="lineno"></span><span class="op" id="2246113">}</span>
</div>
</body>
</html>
