<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1495372">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1495427">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1495481">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1495532">package</span>&nbsp;<span class="ident" id="1495540">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1495549">import</span>&nbsp;<span class="op" id="1495556">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1495559">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1495568">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1495571">const</span>&nbsp;<span class="op" id="1495577">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1495580">hashSize</span>&nbsp;<span class="op" id="1495589">=</span>&nbsp;<span class="num" id="1495591">1009</span><br>
<span class="lineno"></span><span class="op" id="1495596">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1495599">var</span>&nbsp;<span class="op" id="1495603">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1495606">ifaceLock</span>&nbsp;<span class="ident" id="1495616">mutex</span>&nbsp;<span class="comment" id="1495622">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1495650">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1495660">[</span><span class="ident" id="1495661">hashSize</span><span class="op" id="1495669">]</span><span class="op" id="1495670">*</span><span class="ident" id="1495671">itab</span><br>
<span class="lineno"></span><span class="op" id="1495676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1495679">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1495749">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1495818">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1495887">type</span>&nbsp;<span class="ident" id="1495892">fInterface</span>&nbsp;<span class="keyword" id="1495903">interface</span>&nbsp;<span class="op" id="1495913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1495916">f</span><span class="op" id="1495917">(</span><span class="op" id="1495918">)</span><br>
<span class="lineno">25</span><span class="op" id="1495920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1495923">func</span>&nbsp;<span class="ident" id="1495928">getitab</span><span class="op" id="1495935">(</span><span class="ident" id="1495936">inter</span>&nbsp;<span class="op" id="1495942">*</span><span class="ident" id="1495943">interfacetype</span><span class="op" id="1495956">,</span>&nbsp;<span class="ident" id="1495958">typ</span>&nbsp;<span class="op" id="1495962">*</span><span class="ident" id="1495963">_type</span><span class="op" id="1495968">,</span>&nbsp;<span class="ident" id="1495970">canfail</span>&nbsp;<span class="builtintype" id="1495978">bool</span><span class="op" id="1495982">)</span>&nbsp;<span class="op" id="1495984">*</span><span class="ident" id="1495985">itab</span>&nbsp;<span class="op" id="1495990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1495993">if</span>&nbsp;<span class="builtinfunc" id="1495996">len</span><span class="op" id="1495999">(</span><span class="ident" id="1496000">inter</span><span class="op" id="1496005">.</span><span class="ident" id="1496006">mhdr</span><span class="op" id="1496010">)</span>&nbsp;<span class="op" id="1496012">==</span>&nbsp;<span class="num" id="1496015">0</span>&nbsp;<span class="op" id="1496017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496021">gothrow</span><span class="op" id="1496028">(</span><span class="string" id="1496029">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1496062">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1496065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496069">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496083">x</span>&nbsp;<span class="op" id="1496085">:=</span>&nbsp;<span class="ident" id="1496088">typ</span><span class="op" id="1496091">.</span><span class="ident" id="1496092">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496095">if</span>&nbsp;<span class="ident" id="1496098">x</span>&nbsp;<span class="op" id="1496100">==</span>&nbsp;<span class="ident" id="1496103">nil</span>&nbsp;<span class="op" id="1496107">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496111">if</span>&nbsp;<span class="ident" id="1496114">canfail</span>&nbsp;<span class="op" id="1496122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496127">return</span>&nbsp;<span class="ident" id="1496134">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1496140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496144">i</span>&nbsp;<span class="op" id="1496146">:=</span>&nbsp;<span class="op" id="1496149">(</span><span class="op" id="1496150">*</span><span class="ident" id="1496151">imethod</span><span class="op" id="1496158">)</span><span class="op" id="1496159">(</span><span class="ident" id="1496160">add</span><span class="op" id="1496163">(</span><span class="ident" id="1496164">unsafe</span><span class="op" id="1496170">.</span><span class="ident" id="1496171">Pointer</span><span class="op" id="1496178">(</span><span class="ident" id="1496179">inter</span><span class="op" id="1496184">)</span><span class="op" id="1496185">,</span>&nbsp;<span class="ident" id="1496187">unsafe</span><span class="op" id="1496193">.</span><span class="ident" id="1496194">Sizeof</span><span class="op" id="1496200">(</span><span class="ident" id="1496201">interfacetype</span><span class="op" id="1496214">{</span><span class="op" id="1496215">}</span><span class="op" id="1496216">)</span><span class="op" id="1496217">)</span><span class="op" id="1496218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1496222">panic</span><span class="op" id="1496227">(</span><span class="op" id="1496228">&amp;</span><span class="ident" id="1496229">TypeAssertionError</span><span class="op" id="1496247">{</span><span class="string" id="1496248">&#34;&#34;</span><span class="op" id="1496250">,</span>&nbsp;<span class="op" id="1496252">*</span><span class="ident" id="1496253">typ</span><span class="op" id="1496256">.</span><span class="ident" id="1496257">_string</span><span class="op" id="1496264">,</span>&nbsp;<span class="op" id="1496266">*</span><span class="ident" id="1496267">inter</span><span class="op" id="1496272">.</span><span class="ident" id="1496273">typ</span><span class="op" id="1496276">.</span><span class="ident" id="1496277">_string</span><span class="op" id="1496284">,</span>&nbsp;<span class="op" id="1496286">*</span><span class="ident" id="1496287">i</span><span class="op" id="1496288">.</span><span class="ident" id="1496289">name</span><span class="op" id="1496293">}</span><span class="op" id="1496294">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1496297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496301">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496356">h</span>&nbsp;<span class="op" id="1496358">:=</span>&nbsp;<span class="ident" id="1496361">inter</span><span class="op" id="1496366">.</span><span class="ident" id="1496367">typ</span><span class="op" id="1496370">.</span><span class="ident" id="1496371">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496377">h</span>&nbsp;<span class="op" id="1496379">+=</span>&nbsp;<span class="num" id="1496382">17</span>&nbsp;<span class="op" id="1496385">*</span>&nbsp;<span class="ident" id="1496387">typ</span><span class="op" id="1496390">.</span><span class="ident" id="1496391">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496397">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496432">h</span>&nbsp;<span class="op" id="1496434">%=</span>&nbsp;<span class="ident" id="1496437">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496448">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496495">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496539">var</span>&nbsp;<span class="ident" id="1496543">m</span>&nbsp;<span class="op" id="1496545">*</span><span class="ident" id="1496546">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496552">var</span>&nbsp;<span class="ident" id="1496556">locked</span>&nbsp;<span class="builtintype" id="1496563">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496568">for</span>&nbsp;<span class="ident" id="1496572">locked</span>&nbsp;<span class="op" id="1496579">=</span>&nbsp;<span class="num" id="1496581">0</span><span class="op" id="1496582">;</span>&nbsp;<span class="ident" id="1496584">locked</span>&nbsp;<span class="op" id="1496591">&lt;</span>&nbsp;<span class="num" id="1496593">2</span><span class="op" id="1496594">;</span>&nbsp;<span class="ident" id="1496596">locked</span><span class="op" id="1496602">++</span>&nbsp;<span class="op" id="1496605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496609">if</span>&nbsp;<span class="ident" id="1496612">locked</span>&nbsp;<span class="op" id="1496619">!=</span>&nbsp;<span class="num" id="1496622">0</span>&nbsp;<span class="op" id="1496624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496629">lock</span><span class="op" id="1496633">(</span><span class="op" id="1496634">&amp;</span><span class="ident" id="1496635">ifaceLock</span><span class="op" id="1496644">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1496648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496652">for</span>&nbsp;<span class="ident" id="1496656">m</span>&nbsp;<span class="op" id="1496658">=</span>&nbsp;<span class="op" id="1496660">(</span><span class="op" id="1496661">*</span><span class="ident" id="1496662">itab</span><span class="op" id="1496666">)</span><span class="op" id="1496667">(</span><span class="ident" id="1496668">atomicloadp</span><span class="op" id="1496679">(</span><span class="ident" id="1496680">unsafe</span><span class="op" id="1496686">.</span><span class="ident" id="1496687">Pointer</span><span class="op" id="1496694">(</span><span class="op" id="1496695">&amp;</span><span class="ident" id="1496696">hash</span><span class="op" id="1496700">[</span><span class="ident" id="1496701">h</span><span class="op" id="1496702">]</span><span class="op" id="1496703">)</span><span class="op" id="1496704">)</span><span class="op" id="1496705">)</span><span class="op" id="1496706">;</span>&nbsp;<span class="ident" id="1496708">m</span>&nbsp;<span class="op" id="1496710">!=</span>&nbsp;<span class="ident" id="1496713">nil</span><span class="op" id="1496716">;</span>&nbsp;<span class="ident" id="1496718">m</span>&nbsp;<span class="op" id="1496720">=</span>&nbsp;<span class="ident" id="1496722">m</span><span class="op" id="1496723">.</span><span class="ident" id="1496724">link</span>&nbsp;<span class="op" id="1496729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496734">if</span>&nbsp;<span class="ident" id="1496737">m</span><span class="op" id="1496738">.</span><span class="ident" id="1496739">inter</span>&nbsp;<span class="op" id="1496745">==</span>&nbsp;<span class="ident" id="1496748">inter</span>&nbsp;<span class="op" id="1496754">&amp;&amp;</span>&nbsp;<span class="ident" id="1496757">m</span><span class="op" id="1496758">.</span><span class="ident" id="1496759">_type</span>&nbsp;<span class="op" id="1496765">==</span>&nbsp;<span class="ident" id="1496768">typ</span>&nbsp;<span class="op" id="1496772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496778">if</span>&nbsp;<span class="ident" id="1496781">m</span><span class="op" id="1496782">.</span><span class="ident" id="1496783">bad</span>&nbsp;<span class="op" id="1496787">!=</span>&nbsp;<span class="num" id="1496790">0</span>&nbsp;<span class="op" id="1496792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1496799">m</span>&nbsp;<span class="op" id="1496801">=</span>&nbsp;<span class="ident" id="1496803">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1496812">if</span>&nbsp;<span class="op" id="1496815">!</span><span class="ident" id="1496816">canfail</span>&nbsp;<span class="op" id="1496824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496832">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496880">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496931">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1496978">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497026">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497075">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497124">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1497171">goto</span>&nbsp;<span class="ident" id="1497176">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1497188">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1497194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1497200">if</span>&nbsp;<span class="ident" id="1497203">locked</span>&nbsp;<span class="op" id="1497210">!=</span>&nbsp;<span class="num" id="1497213">0</span>&nbsp;<span class="op" id="1497215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497222">unlock</span><span class="op" id="1497228">(</span><span class="op" id="1497229">&amp;</span><span class="ident" id="1497230">ifaceLock</span><span class="op" id="1497239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1497245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1497251">return</span>&nbsp;<span class="ident" id="1497258">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1497263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1497267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1497270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497274">m</span>&nbsp;<span class="op" id="1497276">=</span>&nbsp;<span class="op" id="1497278">(</span><span class="op" id="1497279">*</span><span class="ident" id="1497280">itab</span><span class="op" id="1497284">)</span><span class="op" id="1497285">(</span><span class="ident" id="1497286">persistentalloc</span><span class="op" id="1497301">(</span><span class="ident" id="1497302">unsafe</span><span class="op" id="1497308">.</span><span class="ident" id="1497309">Sizeof</span><span class="op" id="1497315">(</span><span class="ident" id="1497316">itab</span><span class="op" id="1497320">{</span><span class="op" id="1497321">}</span><span class="op" id="1497322">)</span><span class="op" id="1497323">+</span><span class="builtintype" id="1497324">uintptr</span><span class="op" id="1497331">(</span><span class="builtinfunc" id="1497332">len</span><span class="op" id="1497335">(</span><span class="ident" id="1497336">inter</span><span class="op" id="1497341">.</span><span class="ident" id="1497342">mhdr</span><span class="op" id="1497346">)</span><span class="op" id="1497347">)</span><span class="op" id="1497348">*</span><span class="ident" id="1497349">ptrSize</span><span class="op" id="1497356">,</span>&nbsp;<span class="num" id="1497358">0</span><span class="op" id="1497359">,</span>&nbsp;<span class="op" id="1497361">&amp;</span><span class="ident" id="1497362">memstats</span><span class="op" id="1497370">.</span><span class="ident" id="1497371">other_sys</span><span class="op" id="1497380">)</span><span class="op" id="1497381">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497384">m</span><span class="op" id="1497385">.</span><span class="ident" id="1497386">inter</span>&nbsp;<span class="op" id="1497392">=</span>&nbsp;<span class="ident" id="1497394">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497401">m</span><span class="op" id="1497402">.</span><span class="ident" id="1497403">_type</span>&nbsp;<span class="op" id="1497409">=</span>&nbsp;<span class="ident" id="1497411">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1497416">search</span><span class="op" id="1497422">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497425">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497476">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497512">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1497555">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497594">ni</span>&nbsp;<span class="op" id="1497597">:=</span>&nbsp;<span class="builtinfunc" id="1497600">len</span><span class="op" id="1497603">(</span><span class="ident" id="1497604">inter</span><span class="op" id="1497609">.</span><span class="ident" id="1497610">mhdr</span><span class="op" id="1497614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497617">nt</span>&nbsp;<span class="op" id="1497620">:=</span>&nbsp;<span class="builtinfunc" id="1497623">len</span><span class="op" id="1497626">(</span><span class="ident" id="1497627">x</span><span class="op" id="1497628">.</span><span class="ident" id="1497629">mhdr</span><span class="op" id="1497633">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497636">j</span>&nbsp;<span class="op" id="1497638">:=</span>&nbsp;<span class="num" id="1497641">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1497644">for</span>&nbsp;<span class="ident" id="1497648">k</span>&nbsp;<span class="op" id="1497650">:=</span>&nbsp;<span class="num" id="1497653">0</span><span class="op" id="1497654">;</span>&nbsp;<span class="ident" id="1497656">k</span>&nbsp;<span class="op" id="1497658">&lt;</span>&nbsp;<span class="ident" id="1497660">ni</span><span class="op" id="1497662">;</span>&nbsp;<span class="ident" id="1497664">k</span><span class="op" id="1497665">++</span>&nbsp;<span class="op" id="1497668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497672">i</span>&nbsp;<span class="op" id="1497674">:=</span>&nbsp;<span class="op" id="1497677">(</span><span class="op" id="1497678">*</span><span class="ident" id="1497679">imethod</span><span class="op" id="1497686">)</span><span class="op" id="1497687">(</span><span class="ident" id="1497688">add</span><span class="op" id="1497691">(</span><span class="ident" id="1497692">unsafe</span><span class="op" id="1497698">.</span><span class="ident" id="1497699">Pointer</span><span class="op" id="1497706">(</span><span class="ident" id="1497707">inter</span><span class="op" id="1497712">)</span><span class="op" id="1497713">,</span>&nbsp;<span class="ident" id="1497715">unsafe</span><span class="op" id="1497721">.</span><span class="ident" id="1497722">Sizeof</span><span class="op" id="1497728">(</span><span class="ident" id="1497729">interfacetype</span><span class="op" id="1497742">{</span><span class="op" id="1497743">}</span><span class="op" id="1497744">)</span><span class="op" id="1497745">+</span><span class="builtintype" id="1497746">uintptr</span><span class="op" id="1497753">(</span><span class="ident" id="1497754">k</span><span class="op" id="1497755">)</span><span class="op" id="1497756">*</span><span class="ident" id="1497757">unsafe</span><span class="op" id="1497763">.</span><span class="ident" id="1497764">Sizeof</span><span class="op" id="1497770">(</span><span class="ident" id="1497771">imethod</span><span class="op" id="1497778">{</span><span class="op" id="1497779">}</span><span class="op" id="1497780">)</span><span class="op" id="1497781">)</span><span class="op" id="1497782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497786">iname</span>&nbsp;<span class="op" id="1497792">:=</span>&nbsp;<span class="ident" id="1497795">i</span><span class="op" id="1497796">.</span><span class="ident" id="1497797">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497804">ipkgpath</span>&nbsp;<span class="op" id="1497813">:=</span>&nbsp;<span class="ident" id="1497816">i</span><span class="op" id="1497817">.</span><span class="ident" id="1497818">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497828">itype</span>&nbsp;<span class="op" id="1497834">:=</span>&nbsp;<span class="ident" id="1497837">i</span><span class="op" id="1497838">.</span><span class="ident" id="1497839">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1497847">for</span>&nbsp;<span class="op" id="1497851">;</span>&nbsp;<span class="ident" id="1497853">j</span>&nbsp;<span class="op" id="1497855">&lt;</span>&nbsp;<span class="ident" id="1497857">nt</span><span class="op" id="1497859">;</span>&nbsp;<span class="ident" id="1497861">j</span><span class="op" id="1497862">++</span>&nbsp;<span class="op" id="1497865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1497870">t</span>&nbsp;<span class="op" id="1497872">:=</span>&nbsp;<span class="op" id="1497875">(</span><span class="op" id="1497876">*</span><span class="ident" id="1497877">method</span><span class="op" id="1497883">)</span><span class="op" id="1497884">(</span><span class="ident" id="1497885">add</span><span class="op" id="1497888">(</span><span class="ident" id="1497889">unsafe</span><span class="op" id="1497895">.</span><span class="ident" id="1497896">Pointer</span><span class="op" id="1497903">(</span><span class="ident" id="1497904">x</span><span class="op" id="1497905">)</span><span class="op" id="1497906">,</span>&nbsp;<span class="ident" id="1497908">unsafe</span><span class="op" id="1497914">.</span><span class="ident" id="1497915">Sizeof</span><span class="op" id="1497921">(</span><span class="ident" id="1497922">uncommontype</span><span class="op" id="1497934">{</span><span class="op" id="1497935">}</span><span class="op" id="1497936">)</span><span class="op" id="1497937">+</span><span class="builtintype" id="1497938">uintptr</span><span class="op" id="1497945">(</span><span class="ident" id="1497946">j</span><span class="op" id="1497947">)</span><span class="op" id="1497948">*</span><span class="ident" id="1497949">unsafe</span><span class="op" id="1497955">.</span><span class="ident" id="1497956">Sizeof</span><span class="op" id="1497962">(</span><span class="ident" id="1497963">method</span><span class="op" id="1497969">{</span><span class="op" id="1497970">}</span><span class="op" id="1497971">)</span><span class="op" id="1497972">)</span><span class="op" id="1497973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1497978">if</span>&nbsp;<span class="ident" id="1497981">t</span><span class="op" id="1497982">.</span><span class="ident" id="1497983">mtyp</span>&nbsp;<span class="op" id="1497988">==</span>&nbsp;<span class="ident" id="1497991">itype</span>&nbsp;<span class="op" id="1497997">&amp;&amp;</span>&nbsp;<span class="ident" id="1498000">t</span><span class="op" id="1498001">.</span><span class="ident" id="1498002">name</span>&nbsp;<span class="op" id="1498007">==</span>&nbsp;<span class="ident" id="1498010">iname</span>&nbsp;<span class="op" id="1498016">&amp;&amp;</span>&nbsp;<span class="ident" id="1498019">t</span><span class="op" id="1498020">.</span><span class="ident" id="1498021">pkgpath</span>&nbsp;<span class="op" id="1498029">==</span>&nbsp;<span class="ident" id="1498032">ipkgpath</span>&nbsp;<span class="op" id="1498041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498047">if</span>&nbsp;<span class="ident" id="1498050">m</span>&nbsp;<span class="op" id="1498052">!=</span>&nbsp;<span class="ident" id="1498055">nil</span>&nbsp;<span class="op" id="1498059">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498066">*</span><span class="op" id="1498067">(</span><span class="op" id="1498068">*</span><span class="ident" id="1498069">unsafe</span><span class="op" id="1498075">.</span><span class="ident" id="1498076">Pointer</span><span class="op" id="1498083">)</span><span class="op" id="1498084">(</span><span class="ident" id="1498085">add</span><span class="op" id="1498088">(</span><span class="ident" id="1498089">unsafe</span><span class="op" id="1498095">.</span><span class="ident" id="1498096">Pointer</span><span class="op" id="1498103">(</span><span class="ident" id="1498104">m</span><span class="op" id="1498105">)</span><span class="op" id="1498106">,</span>&nbsp;<span class="ident" id="1498108">unsafe</span><span class="op" id="1498114">.</span><span class="ident" id="1498115">Sizeof</span><span class="op" id="1498121">(</span><span class="ident" id="1498122">itab</span><span class="op" id="1498126">{</span><span class="op" id="1498127">}</span><span class="op" id="1498128">)</span><span class="op" id="1498129">+</span><span class="builtintype" id="1498130">uintptr</span><span class="op" id="1498137">(</span><span class="ident" id="1498138">k</span><span class="op" id="1498139">)</span><span class="op" id="1498140">*</span><span class="ident" id="1498141">ptrSize</span><span class="op" id="1498148">)</span><span class="op" id="1498149">)</span>&nbsp;<span class="op" id="1498151">=</span>&nbsp;<span class="ident" id="1498153">t</span><span class="op" id="1498154">.</span><span class="ident" id="1498155">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498169">goto</span>&nbsp;<span class="ident" id="1498174">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498193">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1498197">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498221">if</span>&nbsp;<span class="op" id="1498224">!</span><span class="ident" id="1498225">canfail</span>&nbsp;<span class="op" id="1498233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498238">if</span>&nbsp;<span class="ident" id="1498241">locked</span>&nbsp;<span class="op" id="1498248">!=</span>&nbsp;<span class="num" id="1498251">0</span>&nbsp;<span class="op" id="1498253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498259">unlock</span><span class="op" id="1498265">(</span><span class="op" id="1498266">&amp;</span><span class="ident" id="1498267">ifaceLock</span><span class="op" id="1498276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498281">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1498286">panic</span><span class="op" id="1498291">(</span><span class="op" id="1498292">&amp;</span><span class="ident" id="1498293">TypeAssertionError</span><span class="op" id="1498311">{</span><span class="string" id="1498312">&#34;&#34;</span><span class="op" id="1498314">,</span>&nbsp;<span class="op" id="1498316">*</span><span class="ident" id="1498317">typ</span><span class="op" id="1498320">.</span><span class="ident" id="1498321">_string</span><span class="op" id="1498328">,</span>&nbsp;<span class="op" id="1498330">*</span><span class="ident" id="1498331">inter</span><span class="op" id="1498336">.</span><span class="ident" id="1498337">typ</span><span class="op" id="1498340">.</span><span class="ident" id="1498341">_string</span><span class="op" id="1498348">,</span>&nbsp;<span class="op" id="1498350">*</span><span class="ident" id="1498351">iname</span><span class="op" id="1498356">}</span><span class="op" id="1498357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498365">m</span><span class="op" id="1498366">.</span><span class="ident" id="1498367">bad</span>&nbsp;<span class="op" id="1498371">=</span>&nbsp;<span class="num" id="1498373">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498377">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498384">nextimethod</span><span class="op" id="1498395">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498401">if</span>&nbsp;<span class="ident" id="1498404">locked</span>&nbsp;<span class="op" id="1498411">==</span>&nbsp;<span class="num" id="1498414">0</span>&nbsp;<span class="op" id="1498416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498420">gothrow</span><span class="op" id="1498427">(</span><span class="string" id="1498428">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1498450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498456">m</span><span class="op" id="1498457">.</span><span class="ident" id="1498458">link</span>&nbsp;<span class="op" id="1498463">=</span>&nbsp;<span class="ident" id="1498465">hash</span><span class="op" id="1498469">[</span><span class="ident" id="1498470">h</span><span class="op" id="1498471">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498474">atomicstorep</span><span class="op" id="1498486">(</span><span class="ident" id="1498487">unsafe</span><span class="op" id="1498493">.</span><span class="ident" id="1498494">Pointer</span><span class="op" id="1498501">(</span><span class="op" id="1498502">&amp;</span><span class="ident" id="1498503">hash</span><span class="op" id="1498507">[</span><span class="ident" id="1498508">h</span><span class="op" id="1498509">]</span><span class="op" id="1498510">)</span><span class="op" id="1498511">,</span>&nbsp;<span class="ident" id="1498513">unsafe</span><span class="op" id="1498519">.</span><span class="ident" id="1498520">Pointer</span><span class="op" id="1498527">(</span><span class="ident" id="1498528">m</span><span class="op" id="1498529">)</span><span class="op" id="1498530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498533">unlock</span><span class="op" id="1498539">(</span><span class="op" id="1498540">&amp;</span><span class="ident" id="1498541">ifaceLock</span><span class="op" id="1498550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498553">if</span>&nbsp;<span class="ident" id="1498556">m</span><span class="op" id="1498557">.</span><span class="ident" id="1498558">bad</span>&nbsp;<span class="op" id="1498562">!=</span>&nbsp;<span class="num" id="1498565">0</span>&nbsp;<span class="op" id="1498567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498571">return</span>&nbsp;<span class="ident" id="1498578">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498583">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498586">return</span>&nbsp;<span class="ident" id="1498593">m</span><br>
<span class="lineno"></span><span class="op" id="1498595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1498598">func</span>&nbsp;<span class="ident" id="1498603">typ2Itab</span><span class="op" id="1498611">(</span><span class="ident" id="1498612">t</span>&nbsp;<span class="op" id="1498614">*</span><span class="ident" id="1498615">_type</span><span class="op" id="1498620">,</span>&nbsp;<span class="ident" id="1498622">inter</span>&nbsp;<span class="op" id="1498628">*</span><span class="ident" id="1498629">interfacetype</span><span class="op" id="1498642">,</span>&nbsp;<span class="ident" id="1498644">cache</span>&nbsp;<span class="op" id="1498650">*</span><span class="op" id="1498651">*</span><span class="ident" id="1498652">itab</span><span class="op" id="1498656">)</span>&nbsp;<span class="op" id="1498658">*</span><span class="ident" id="1498659">itab</span>&nbsp;<span class="op" id="1498664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498667">tab</span>&nbsp;<span class="op" id="1498671">:=</span>&nbsp;<span class="ident" id="1498674">getitab</span><span class="op" id="1498681">(</span><span class="ident" id="1498682">inter</span><span class="op" id="1498687">,</span>&nbsp;<span class="ident" id="1498689">t</span><span class="op" id="1498690">,</span>&nbsp;<span class="builtintype" id="1498692">false</span><span class="op" id="1498697">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498700">atomicstorep</span><span class="op" id="1498712">(</span><span class="ident" id="1498713">unsafe</span><span class="op" id="1498719">.</span><span class="ident" id="1498720">Pointer</span><span class="op" id="1498727">(</span><span class="ident" id="1498728">cache</span><span class="op" id="1498733">)</span><span class="op" id="1498734">,</span>&nbsp;<span class="ident" id="1498736">unsafe</span><span class="op" id="1498742">.</span><span class="ident" id="1498743">Pointer</span><span class="op" id="1498750">(</span><span class="ident" id="1498751">tab</span><span class="op" id="1498754">)</span><span class="op" id="1498755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498758">return</span>&nbsp;<span class="ident" id="1498765">tab</span><br>
<span class="lineno"></span><span class="op" id="1498769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1498772">func</span>&nbsp;<span class="ident" id="1498777">convT2E</span><span class="op" id="1498784">(</span><span class="ident" id="1498785">t</span>&nbsp;<span class="op" id="1498787">*</span><span class="ident" id="1498788">_type</span><span class="op" id="1498793">,</span>&nbsp;<span class="ident" id="1498795">elem</span>&nbsp;<span class="ident" id="1498800">unsafe</span><span class="op" id="1498806">.</span><span class="ident" id="1498807">Pointer</span><span class="op" id="1498814">)</span>&nbsp;<span class="op" id="1498816">(</span><span class="ident" id="1498817">e</span>&nbsp;<span class="keyword" id="1498819">interface</span><span class="op" id="1498828">{</span><span class="op" id="1498829">}</span><span class="op" id="1498830">)</span>&nbsp;<span class="op" id="1498832">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498835">size</span>&nbsp;<span class="op" id="1498840">:=</span>&nbsp;<span class="builtintype" id="1498843">uintptr</span><span class="op" id="1498850">(</span><span class="ident" id="1498851">t</span><span class="op" id="1498852">.</span><span class="ident" id="1498853">size</span><span class="op" id="1498857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498860">ep</span>&nbsp;<span class="op" id="1498863">:=</span>&nbsp;<span class="op" id="1498866">(</span><span class="op" id="1498867">*</span><span class="ident" id="1498868">eface</span><span class="op" id="1498873">)</span><span class="op" id="1498874">(</span><span class="ident" id="1498875">unsafe</span><span class="op" id="1498881">.</span><span class="ident" id="1498882">Pointer</span><span class="op" id="1498889">(</span><span class="op" id="1498890">&amp;</span><span class="ident" id="1498891">e</span><span class="op" id="1498892">)</span><span class="op" id="1498893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1498896">if</span>&nbsp;<span class="ident" id="1498899">isDirectIface</span><span class="op" id="1498912">(</span><span class="ident" id="1498913">t</span><span class="op" id="1498914">)</span>&nbsp;<span class="op" id="1498916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498920">ep</span><span class="op" id="1498922">.</span><span class="ident" id="1498923">_type</span>&nbsp;<span class="op" id="1498929">=</span>&nbsp;<span class="ident" id="1498931">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498935">memmove</span><span class="op" id="1498942">(</span><span class="ident" id="1498943">unsafe</span><span class="op" id="1498949">.</span><span class="ident" id="1498950">Pointer</span><span class="op" id="1498957">(</span><span class="op" id="1498958">&amp;</span><span class="ident" id="1498959">ep</span><span class="op" id="1498961">.</span><span class="ident" id="1498962">data</span><span class="op" id="1498966">)</span><span class="op" id="1498967">,</span>&nbsp;<span class="ident" id="1498969">elem</span><span class="op" id="1498973">,</span>&nbsp;<span class="ident" id="1498975">size</span><span class="op" id="1498979">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1498982">}</span>&nbsp;<span class="keyword" id="1498984">else</span>&nbsp;<span class="op" id="1498989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1498993">x</span>&nbsp;<span class="op" id="1498995">:=</span>&nbsp;<span class="ident" id="1498998">newobject</span><span class="op" id="1499007">(</span><span class="ident" id="1499008">t</span><span class="op" id="1499009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1499013">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1499078">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499154">memmove</span><span class="op" id="1499161">(</span><span class="ident" id="1499162">x</span><span class="op" id="1499163">,</span>&nbsp;<span class="ident" id="1499165">elem</span><span class="op" id="1499169">,</span>&nbsp;<span class="ident" id="1499171">size</span><span class="op" id="1499175">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499179">ep</span><span class="op" id="1499181">.</span><span class="ident" id="1499182">_type</span>&nbsp;<span class="op" id="1499188">=</span>&nbsp;<span class="ident" id="1499190">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499194">ep</span><span class="op" id="1499196">.</span><span class="ident" id="1499197">data</span>&nbsp;<span class="op" id="1499202">=</span>&nbsp;<span class="ident" id="1499204">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499210">return</span><br>
<span class="lineno"></span><span class="op" id="1499217">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1499220">func</span>&nbsp;<span class="ident" id="1499225">convT2I</span><span class="op" id="1499232">(</span><span class="ident" id="1499233">t</span>&nbsp;<span class="op" id="1499235">*</span><span class="ident" id="1499236">_type</span><span class="op" id="1499241">,</span>&nbsp;<span class="ident" id="1499243">inter</span>&nbsp;<span class="op" id="1499249">*</span><span class="ident" id="1499250">interfacetype</span><span class="op" id="1499263">,</span>&nbsp;<span class="ident" id="1499265">cache</span>&nbsp;<span class="op" id="1499271">*</span><span class="op" id="1499272">*</span><span class="ident" id="1499273">itab</span><span class="op" id="1499277">,</span>&nbsp;<span class="ident" id="1499279">elem</span>&nbsp;<span class="ident" id="1499284">unsafe</span><span class="op" id="1499290">.</span><span class="ident" id="1499291">Pointer</span><span class="op" id="1499298">)</span>&nbsp;<span class="op" id="1499300">(</span><span class="ident" id="1499301">i</span>&nbsp;<span class="ident" id="1499303">fInterface</span><span class="op" id="1499313">)</span>&nbsp;<span class="op" id="1499315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499318">tab</span>&nbsp;<span class="op" id="1499322">:=</span>&nbsp;<span class="op" id="1499325">(</span><span class="op" id="1499326">*</span><span class="ident" id="1499327">itab</span><span class="op" id="1499331">)</span><span class="op" id="1499332">(</span><span class="ident" id="1499333">atomicloadp</span><span class="op" id="1499344">(</span><span class="ident" id="1499345">unsafe</span><span class="op" id="1499351">.</span><span class="ident" id="1499352">Pointer</span><span class="op" id="1499359">(</span><span class="ident" id="1499360">cache</span><span class="op" id="1499365">)</span><span class="op" id="1499366">)</span><span class="op" id="1499367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499370">if</span>&nbsp;<span class="ident" id="1499373">tab</span>&nbsp;<span class="op" id="1499377">==</span>&nbsp;<span class="ident" id="1499380">nil</span>&nbsp;<span class="op" id="1499384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499388">tab</span>&nbsp;<span class="op" id="1499392">=</span>&nbsp;<span class="ident" id="1499394">getitab</span><span class="op" id="1499401">(</span><span class="ident" id="1499402">inter</span><span class="op" id="1499407">,</span>&nbsp;<span class="ident" id="1499409">t</span><span class="op" id="1499410">,</span>&nbsp;<span class="builtintype" id="1499412">false</span><span class="op" id="1499417">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499421">atomicstorep</span><span class="op" id="1499433">(</span><span class="ident" id="1499434">unsafe</span><span class="op" id="1499440">.</span><span class="ident" id="1499441">Pointer</span><span class="op" id="1499448">(</span><span class="ident" id="1499449">cache</span><span class="op" id="1499454">)</span><span class="op" id="1499455">,</span>&nbsp;<span class="ident" id="1499457">unsafe</span><span class="op" id="1499463">.</span><span class="ident" id="1499464">Pointer</span><span class="op" id="1499471">(</span><span class="ident" id="1499472">tab</span><span class="op" id="1499475">)</span><span class="op" id="1499476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499482">size</span>&nbsp;<span class="op" id="1499487">:=</span>&nbsp;<span class="builtintype" id="1499490">uintptr</span><span class="op" id="1499497">(</span><span class="ident" id="1499498">t</span><span class="op" id="1499499">.</span><span class="ident" id="1499500">size</span><span class="op" id="1499504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499507">pi</span>&nbsp;<span class="op" id="1499510">:=</span>&nbsp;<span class="op" id="1499513">(</span><span class="op" id="1499514">*</span><span class="ident" id="1499515">iface</span><span class="op" id="1499520">)</span><span class="op" id="1499521">(</span><span class="ident" id="1499522">unsafe</span><span class="op" id="1499528">.</span><span class="ident" id="1499529">Pointer</span><span class="op" id="1499536">(</span><span class="op" id="1499537">&amp;</span><span class="ident" id="1499538">i</span><span class="op" id="1499539">)</span><span class="op" id="1499540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499543">if</span>&nbsp;<span class="ident" id="1499546">isDirectIface</span><span class="op" id="1499559">(</span><span class="ident" id="1499560">t</span><span class="op" id="1499561">)</span>&nbsp;<span class="op" id="1499563">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499567">pi</span><span class="op" id="1499569">.</span><span class="ident" id="1499570">tab</span>&nbsp;<span class="op" id="1499574">=</span>&nbsp;<span class="ident" id="1499576">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499582">memmove</span><span class="op" id="1499589">(</span><span class="ident" id="1499590">unsafe</span><span class="op" id="1499596">.</span><span class="ident" id="1499597">Pointer</span><span class="op" id="1499604">(</span><span class="op" id="1499605">&amp;</span><span class="ident" id="1499606">pi</span><span class="op" id="1499608">.</span><span class="ident" id="1499609">data</span><span class="op" id="1499613">)</span><span class="op" id="1499614">,</span>&nbsp;<span class="ident" id="1499616">elem</span><span class="op" id="1499620">,</span>&nbsp;<span class="ident" id="1499622">size</span><span class="op" id="1499626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499629">}</span>&nbsp;<span class="keyword" id="1499631">else</span>&nbsp;<span class="op" id="1499636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499640">x</span>&nbsp;<span class="op" id="1499642">:=</span>&nbsp;<span class="ident" id="1499645">newobject</span><span class="op" id="1499654">(</span><span class="ident" id="1499655">t</span><span class="op" id="1499656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499660">memmove</span><span class="op" id="1499667">(</span><span class="ident" id="1499668">x</span><span class="op" id="1499669">,</span>&nbsp;<span class="ident" id="1499671">elem</span><span class="op" id="1499675">,</span>&nbsp;<span class="ident" id="1499677">size</span><span class="op" id="1499681">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499685">pi</span><span class="op" id="1499687">.</span><span class="ident" id="1499688">tab</span>&nbsp;<span class="op" id="1499692">=</span>&nbsp;<span class="ident" id="1499694">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499700">pi</span><span class="op" id="1499702">.</span><span class="ident" id="1499703">data</span>&nbsp;<span class="op" id="1499708">=</span>&nbsp;<span class="ident" id="1499710">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1499713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499716">return</span><br>
<span class="lineno"></span><span class="op" id="1499723">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1499726">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1499803">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1499877">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1499890">func</span>&nbsp;<span class="ident" id="1499895">assertI2T</span><span class="op" id="1499904">(</span><span class="ident" id="1499905">t</span>&nbsp;<span class="op" id="1499907">*</span><span class="ident" id="1499908">_type</span><span class="op" id="1499913">,</span>&nbsp;<span class="ident" id="1499915">i</span>&nbsp;<span class="ident" id="1499917">fInterface</span><span class="op" id="1499927">)</span>&nbsp;<span class="op" id="1499929">(</span><span class="ident" id="1499930">r</span>&nbsp;<span class="keyword" id="1499932">struct</span><span class="op" id="1499938">{</span><span class="op" id="1499939">}</span><span class="op" id="1499940">)</span>&nbsp;<span class="op" id="1499942">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499945">ip</span>&nbsp;<span class="op" id="1499948">:=</span>&nbsp;<span class="op" id="1499951">(</span><span class="op" id="1499952">*</span><span class="ident" id="1499953">iface</span><span class="op" id="1499958">)</span><span class="op" id="1499959">(</span><span class="ident" id="1499960">unsafe</span><span class="op" id="1499966">.</span><span class="ident" id="1499967">Pointer</span><span class="op" id="1499974">(</span><span class="op" id="1499975">&amp;</span><span class="ident" id="1499976">i</span><span class="op" id="1499977">)</span><span class="op" id="1499978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1499981">tab</span>&nbsp;<span class="op" id="1499985">:=</span>&nbsp;<span class="ident" id="1499988">ip</span><span class="op" id="1499990">.</span><span class="ident" id="1499991">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1499996">if</span>&nbsp;<span class="ident" id="1499999">tab</span>&nbsp;<span class="op" id="1500003">==</span>&nbsp;<span class="ident" id="1500006">nil</span>&nbsp;<span class="op" id="1500010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1500014">panic</span><span class="op" id="1500019">(</span><span class="op" id="1500020">&amp;</span><span class="ident" id="1500021">TypeAssertionError</span><span class="op" id="1500039">{</span><span class="string" id="1500040">&#34;&#34;</span><span class="op" id="1500042">,</span>&nbsp;<span class="string" id="1500044">&#34;&#34;</span><span class="op" id="1500046">,</span>&nbsp;<span class="op" id="1500048">*</span><span class="ident" id="1500049">t</span><span class="op" id="1500050">.</span><span class="ident" id="1500051">_string</span><span class="op" id="1500058">,</span>&nbsp;<span class="string" id="1500060">&#34;&#34;</span><span class="op" id="1500062">}</span><span class="op" id="1500063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500066">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500069">if</span>&nbsp;<span class="ident" id="1500072">tab</span><span class="op" id="1500075">.</span><span class="ident" id="1500076">_type</span>&nbsp;<span class="op" id="1500082">!=</span>&nbsp;<span class="ident" id="1500085">t</span>&nbsp;<span class="op" id="1500087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1500091">panic</span><span class="op" id="1500096">(</span><span class="op" id="1500097">&amp;</span><span class="ident" id="1500098">TypeAssertionError</span><span class="op" id="1500116">{</span><span class="op" id="1500117">*</span><span class="ident" id="1500118">tab</span><span class="op" id="1500121">.</span><span class="ident" id="1500122">inter</span><span class="op" id="1500127">.</span><span class="ident" id="1500128">typ</span><span class="op" id="1500131">.</span><span class="ident" id="1500132">_string</span><span class="op" id="1500139">,</span>&nbsp;<span class="op" id="1500141">*</span><span class="ident" id="1500142">tab</span><span class="op" id="1500145">.</span><span class="ident" id="1500146">_type</span><span class="op" id="1500151">.</span><span class="ident" id="1500152">_string</span><span class="op" id="1500159">,</span>&nbsp;<span class="op" id="1500161">*</span><span class="ident" id="1500162">t</span><span class="op" id="1500163">.</span><span class="ident" id="1500164">_string</span><span class="op" id="1500171">,</span>&nbsp;<span class="string" id="1500173">&#34;&#34;</span><span class="op" id="1500175">}</span><span class="op" id="1500176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500182">size</span>&nbsp;<span class="op" id="1500187">:=</span>&nbsp;<span class="builtintype" id="1500190">uintptr</span><span class="op" id="1500197">(</span><span class="ident" id="1500198">t</span><span class="op" id="1500199">.</span><span class="ident" id="1500200">size</span><span class="op" id="1500204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500207">if</span>&nbsp;<span class="ident" id="1500210">isDirectIface</span><span class="op" id="1500223">(</span><span class="ident" id="1500224">t</span><span class="op" id="1500225">)</span>&nbsp;<span class="op" id="1500227">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500231">memmove</span><span class="op" id="1500238">(</span><span class="ident" id="1500239">unsafe</span><span class="op" id="1500245">.</span><span class="ident" id="1500246">Pointer</span><span class="op" id="1500253">(</span><span class="op" id="1500254">&amp;</span><span class="ident" id="1500255">r</span><span class="op" id="1500256">)</span><span class="op" id="1500257">,</span>&nbsp;<span class="ident" id="1500259">unsafe</span><span class="op" id="1500265">.</span><span class="ident" id="1500266">Pointer</span><span class="op" id="1500273">(</span><span class="op" id="1500274">&amp;</span><span class="ident" id="1500275">ip</span><span class="op" id="1500277">.</span><span class="ident" id="1500278">data</span><span class="op" id="1500282">)</span><span class="op" id="1500283">,</span>&nbsp;<span class="ident" id="1500285">size</span><span class="op" id="1500289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500292">}</span>&nbsp;<span class="keyword" id="1500294">else</span>&nbsp;<span class="op" id="1500299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500303">memmove</span><span class="op" id="1500310">(</span><span class="ident" id="1500311">unsafe</span><span class="op" id="1500317">.</span><span class="ident" id="1500318">Pointer</span><span class="op" id="1500325">(</span><span class="op" id="1500326">&amp;</span><span class="ident" id="1500327">r</span><span class="op" id="1500328">)</span><span class="op" id="1500329">,</span>&nbsp;<span class="ident" id="1500331">ip</span><span class="op" id="1500333">.</span><span class="ident" id="1500334">data</span><span class="op" id="1500338">,</span>&nbsp;<span class="ident" id="1500340">size</span><span class="op" id="1500344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500350">return</span><br>
<span class="lineno">190</span><span class="op" id="1500357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1500360">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1500373">func</span>&nbsp;<span class="ident" id="1500378">assertI2T2</span><span class="op" id="1500388">(</span><span class="ident" id="1500389">t</span>&nbsp;<span class="op" id="1500391">*</span><span class="ident" id="1500392">_type</span><span class="op" id="1500397">,</span>&nbsp;<span class="ident" id="1500399">i</span>&nbsp;<span class="ident" id="1500401">fInterface</span><span class="op" id="1500411">)</span>&nbsp;<span class="op" id="1500413">(</span><span class="ident" id="1500414">r</span>&nbsp;<span class="builtintype" id="1500416">byte</span><span class="op" id="1500420">)</span>&nbsp;<span class="op" id="1500422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500425">ip</span>&nbsp;<span class="op" id="1500428">:=</span>&nbsp;<span class="op" id="1500431">(</span><span class="op" id="1500432">*</span><span class="ident" id="1500433">iface</span><span class="op" id="1500438">)</span><span class="op" id="1500439">(</span><span class="ident" id="1500440">unsafe</span><span class="op" id="1500446">.</span><span class="ident" id="1500447">Pointer</span><span class="op" id="1500454">(</span><span class="op" id="1500455">&amp;</span><span class="ident" id="1500456">i</span><span class="op" id="1500457">)</span><span class="op" id="1500458">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500461">size</span>&nbsp;<span class="op" id="1500466">:=</span>&nbsp;<span class="builtintype" id="1500469">uintptr</span><span class="op" id="1500476">(</span><span class="ident" id="1500477">t</span><span class="op" id="1500478">.</span><span class="ident" id="1500479">size</span><span class="op" id="1500483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500486">ok</span>&nbsp;<span class="op" id="1500489">:=</span>&nbsp;<span class="op" id="1500492">(</span><span class="op" id="1500493">*</span><span class="builtintype" id="1500494">bool</span><span class="op" id="1500498">)</span><span class="op" id="1500499">(</span><span class="ident" id="1500500">add</span><span class="op" id="1500503">(</span><span class="ident" id="1500504">unsafe</span><span class="op" id="1500510">.</span><span class="ident" id="1500511">Pointer</span><span class="op" id="1500518">(</span><span class="op" id="1500519">&amp;</span><span class="ident" id="1500520">r</span><span class="op" id="1500521">)</span><span class="op" id="1500522">,</span>&nbsp;<span class="ident" id="1500524">size</span><span class="op" id="1500528">)</span><span class="op" id="1500529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500532">tab</span>&nbsp;<span class="op" id="1500536">:=</span>&nbsp;<span class="ident" id="1500539">ip</span><span class="op" id="1500541">.</span><span class="ident" id="1500542">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500547">if</span>&nbsp;<span class="ident" id="1500550">tab</span>&nbsp;<span class="op" id="1500554">==</span>&nbsp;<span class="ident" id="1500557">nil</span>&nbsp;<span class="op" id="1500561">||</span>&nbsp;<span class="ident" id="1500564">tab</span><span class="op" id="1500567">.</span><span class="ident" id="1500568">_type</span>&nbsp;<span class="op" id="1500574">!=</span>&nbsp;<span class="ident" id="1500577">t</span>&nbsp;<span class="op" id="1500579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500583">*</span><span class="ident" id="1500584">ok</span>&nbsp;<span class="op" id="1500587">=</span>&nbsp;<span class="builtintype" id="1500589">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500597">memclr</span><span class="op" id="1500603">(</span><span class="ident" id="1500604">unsafe</span><span class="op" id="1500610">.</span><span class="ident" id="1500611">Pointer</span><span class="op" id="1500618">(</span><span class="op" id="1500619">&amp;</span><span class="ident" id="1500620">r</span><span class="op" id="1500621">)</span><span class="op" id="1500622">,</span>&nbsp;<span class="ident" id="1500624">size</span><span class="op" id="1500628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500632">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500643">*</span><span class="ident" id="1500644">ok</span>&nbsp;<span class="op" id="1500647">=</span>&nbsp;<span class="builtintype" id="1500649">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500655">if</span>&nbsp;<span class="ident" id="1500658">isDirectIface</span><span class="op" id="1500671">(</span><span class="ident" id="1500672">t</span><span class="op" id="1500673">)</span>&nbsp;<span class="op" id="1500675">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500679">memmove</span><span class="op" id="1500686">(</span><span class="ident" id="1500687">unsafe</span><span class="op" id="1500693">.</span><span class="ident" id="1500694">Pointer</span><span class="op" id="1500701">(</span><span class="op" id="1500702">&amp;</span><span class="ident" id="1500703">r</span><span class="op" id="1500704">)</span><span class="op" id="1500705">,</span>&nbsp;<span class="ident" id="1500707">unsafe</span><span class="op" id="1500713">.</span><span class="ident" id="1500714">Pointer</span><span class="op" id="1500721">(</span><span class="op" id="1500722">&amp;</span><span class="ident" id="1500723">ip</span><span class="op" id="1500725">.</span><span class="ident" id="1500726">data</span><span class="op" id="1500730">)</span><span class="op" id="1500731">,</span>&nbsp;<span class="ident" id="1500733">size</span><span class="op" id="1500737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500740">}</span>&nbsp;<span class="keyword" id="1500742">else</span>&nbsp;<span class="op" id="1500747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500751">memmove</span><span class="op" id="1500758">(</span><span class="ident" id="1500759">unsafe</span><span class="op" id="1500765">.</span><span class="ident" id="1500766">Pointer</span><span class="op" id="1500773">(</span><span class="op" id="1500774">&amp;</span><span class="ident" id="1500775">r</span><span class="op" id="1500776">)</span><span class="op" id="1500777">,</span>&nbsp;<span class="ident" id="1500779">ip</span><span class="op" id="1500781">.</span><span class="ident" id="1500782">data</span><span class="op" id="1500786">,</span>&nbsp;<span class="ident" id="1500788">size</span><span class="op" id="1500792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1500795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500798">return</span><br>
<span class="lineno">210</span><span class="op" id="1500805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1500808">func</span>&nbsp;<span class="ident" id="1500813">assertI2TOK</span><span class="op" id="1500824">(</span><span class="ident" id="1500825">t</span>&nbsp;<span class="op" id="1500827">*</span><span class="ident" id="1500828">_type</span><span class="op" id="1500833">,</span>&nbsp;<span class="ident" id="1500835">i</span>&nbsp;<span class="ident" id="1500837">fInterface</span><span class="op" id="1500847">)</span>&nbsp;<span class="builtintype" id="1500849">bool</span>&nbsp;<span class="op" id="1500854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500857">ip</span>&nbsp;<span class="op" id="1500860">:=</span>&nbsp;<span class="op" id="1500863">(</span><span class="op" id="1500864">*</span><span class="ident" id="1500865">iface</span><span class="op" id="1500870">)</span><span class="op" id="1500871">(</span><span class="ident" id="1500872">unsafe</span><span class="op" id="1500878">.</span><span class="ident" id="1500879">Pointer</span><span class="op" id="1500886">(</span><span class="op" id="1500887">&amp;</span><span class="ident" id="1500888">i</span><span class="op" id="1500889">)</span><span class="op" id="1500890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1500893">tab</span>&nbsp;<span class="op" id="1500897">:=</span>&nbsp;<span class="ident" id="1500900">ip</span><span class="op" id="1500902">.</span><span class="ident" id="1500903">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1500908">return</span>&nbsp;<span class="ident" id="1500915">tab</span>&nbsp;<span class="op" id="1500919">!=</span>&nbsp;<span class="ident" id="1500922">nil</span>&nbsp;<span class="op" id="1500926">&amp;&amp;</span>&nbsp;<span class="ident" id="1500929">tab</span><span class="op" id="1500932">.</span><span class="ident" id="1500933">_type</span>&nbsp;<span class="op" id="1500939">==</span>&nbsp;<span class="ident" id="1500942">t</span><br>
<span class="lineno"></span><span class="op" id="1500944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1500947">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1500960">func</span>&nbsp;<span class="ident" id="1500965">assertE2T</span><span class="op" id="1500974">(</span><span class="ident" id="1500975">t</span>&nbsp;<span class="op" id="1500977">*</span><span class="ident" id="1500978">_type</span><span class="op" id="1500983">,</span>&nbsp;<span class="ident" id="1500985">e</span>&nbsp;<span class="keyword" id="1500987">interface</span><span class="op" id="1500996">{</span><span class="op" id="1500997">}</span><span class="op" id="1500998">)</span>&nbsp;<span class="op" id="1501000">(</span><span class="ident" id="1501001">r</span>&nbsp;<span class="keyword" id="1501003">struct</span><span class="op" id="1501009">{</span><span class="op" id="1501010">}</span><span class="op" id="1501011">)</span>&nbsp;<span class="op" id="1501013">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501016">ep</span>&nbsp;<span class="op" id="1501019">:=</span>&nbsp;<span class="op" id="1501022">(</span><span class="op" id="1501023">*</span><span class="ident" id="1501024">eface</span><span class="op" id="1501029">)</span><span class="op" id="1501030">(</span><span class="ident" id="1501031">unsafe</span><span class="op" id="1501037">.</span><span class="ident" id="1501038">Pointer</span><span class="op" id="1501045">(</span><span class="op" id="1501046">&amp;</span><span class="ident" id="1501047">e</span><span class="op" id="1501048">)</span><span class="op" id="1501049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501052">if</span>&nbsp;<span class="ident" id="1501055">ep</span><span class="op" id="1501057">.</span><span class="ident" id="1501058">_type</span>&nbsp;<span class="op" id="1501064">==</span>&nbsp;<span class="ident" id="1501067">nil</span>&nbsp;<span class="op" id="1501071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1501075">panic</span><span class="op" id="1501080">(</span><span class="op" id="1501081">&amp;</span><span class="ident" id="1501082">TypeAssertionError</span><span class="op" id="1501100">{</span><span class="string" id="1501101">&#34;&#34;</span><span class="op" id="1501103">,</span>&nbsp;<span class="string" id="1501105">&#34;&#34;</span><span class="op" id="1501107">,</span>&nbsp;<span class="op" id="1501109">*</span><span class="ident" id="1501110">t</span><span class="op" id="1501111">.</span><span class="ident" id="1501112">_string</span><span class="op" id="1501119">,</span>&nbsp;<span class="string" id="1501121">&#34;&#34;</span><span class="op" id="1501123">}</span><span class="op" id="1501124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501130">if</span>&nbsp;<span class="ident" id="1501133">ep</span><span class="op" id="1501135">.</span><span class="ident" id="1501136">_type</span>&nbsp;<span class="op" id="1501142">!=</span>&nbsp;<span class="ident" id="1501145">t</span>&nbsp;<span class="op" id="1501147">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1501151">panic</span><span class="op" id="1501156">(</span><span class="op" id="1501157">&amp;</span><span class="ident" id="1501158">TypeAssertionError</span><span class="op" id="1501176">{</span><span class="string" id="1501177">&#34;&#34;</span><span class="op" id="1501179">,</span>&nbsp;<span class="op" id="1501181">*</span><span class="ident" id="1501182">ep</span><span class="op" id="1501184">.</span><span class="ident" id="1501185">_type</span><span class="op" id="1501190">.</span><span class="ident" id="1501191">_string</span><span class="op" id="1501198">,</span>&nbsp;<span class="op" id="1501200">*</span><span class="ident" id="1501201">t</span><span class="op" id="1501202">.</span><span class="ident" id="1501203">_string</span><span class="op" id="1501210">,</span>&nbsp;<span class="string" id="1501212">&#34;&#34;</span><span class="op" id="1501214">}</span><span class="op" id="1501215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501221">size</span>&nbsp;<span class="op" id="1501226">:=</span>&nbsp;<span class="builtintype" id="1501229">uintptr</span><span class="op" id="1501236">(</span><span class="ident" id="1501237">t</span><span class="op" id="1501238">.</span><span class="ident" id="1501239">size</span><span class="op" id="1501243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501246">if</span>&nbsp;<span class="ident" id="1501249">isDirectIface</span><span class="op" id="1501262">(</span><span class="ident" id="1501263">t</span><span class="op" id="1501264">)</span>&nbsp;<span class="op" id="1501266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501270">memmove</span><span class="op" id="1501277">(</span><span class="ident" id="1501278">unsafe</span><span class="op" id="1501284">.</span><span class="ident" id="1501285">Pointer</span><span class="op" id="1501292">(</span><span class="op" id="1501293">&amp;</span><span class="ident" id="1501294">r</span><span class="op" id="1501295">)</span><span class="op" id="1501296">,</span>&nbsp;<span class="ident" id="1501298">unsafe</span><span class="op" id="1501304">.</span><span class="ident" id="1501305">Pointer</span><span class="op" id="1501312">(</span><span class="op" id="1501313">&amp;</span><span class="ident" id="1501314">ep</span><span class="op" id="1501316">.</span><span class="ident" id="1501317">data</span><span class="op" id="1501321">)</span><span class="op" id="1501322">,</span>&nbsp;<span class="ident" id="1501324">size</span><span class="op" id="1501328">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501331">}</span>&nbsp;<span class="keyword" id="1501333">else</span>&nbsp;<span class="op" id="1501338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501342">memmove</span><span class="op" id="1501349">(</span><span class="ident" id="1501350">unsafe</span><span class="op" id="1501356">.</span><span class="ident" id="1501357">Pointer</span><span class="op" id="1501364">(</span><span class="op" id="1501365">&amp;</span><span class="ident" id="1501366">r</span><span class="op" id="1501367">)</span><span class="op" id="1501368">,</span>&nbsp;<span class="ident" id="1501370">ep</span><span class="op" id="1501372">.</span><span class="ident" id="1501373">data</span><span class="op" id="1501377">,</span>&nbsp;<span class="ident" id="1501379">size</span><span class="op" id="1501383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501389">return</span><br>
<span class="lineno"></span><span class="op" id="1501396">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1501399">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1501412">func</span>&nbsp;<span class="ident" id="1501417">assertE2T2</span><span class="op" id="1501427">(</span><span class="ident" id="1501428">t</span>&nbsp;<span class="op" id="1501430">*</span><span class="ident" id="1501431">_type</span><span class="op" id="1501436">,</span>&nbsp;<span class="ident" id="1501438">e</span>&nbsp;<span class="keyword" id="1501440">interface</span><span class="op" id="1501449">{</span><span class="op" id="1501450">}</span><span class="op" id="1501451">)</span>&nbsp;<span class="op" id="1501453">(</span><span class="ident" id="1501454">r</span>&nbsp;<span class="builtintype" id="1501456">byte</span><span class="op" id="1501460">)</span>&nbsp;<span class="op" id="1501462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501465">ep</span>&nbsp;<span class="op" id="1501468">:=</span>&nbsp;<span class="op" id="1501471">(</span><span class="op" id="1501472">*</span><span class="ident" id="1501473">eface</span><span class="op" id="1501478">)</span><span class="op" id="1501479">(</span><span class="ident" id="1501480">unsafe</span><span class="op" id="1501486">.</span><span class="ident" id="1501487">Pointer</span><span class="op" id="1501494">(</span><span class="op" id="1501495">&amp;</span><span class="ident" id="1501496">e</span><span class="op" id="1501497">)</span><span class="op" id="1501498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501501">size</span>&nbsp;<span class="op" id="1501506">:=</span>&nbsp;<span class="builtintype" id="1501509">uintptr</span><span class="op" id="1501516">(</span><span class="ident" id="1501517">t</span><span class="op" id="1501518">.</span><span class="ident" id="1501519">size</span><span class="op" id="1501523">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501526">ok</span>&nbsp;<span class="op" id="1501529">:=</span>&nbsp;<span class="op" id="1501532">(</span><span class="op" id="1501533">*</span><span class="builtintype" id="1501534">bool</span><span class="op" id="1501538">)</span><span class="op" id="1501539">(</span><span class="ident" id="1501540">add</span><span class="op" id="1501543">(</span><span class="ident" id="1501544">unsafe</span><span class="op" id="1501550">.</span><span class="ident" id="1501551">Pointer</span><span class="op" id="1501558">(</span><span class="op" id="1501559">&amp;</span><span class="ident" id="1501560">r</span><span class="op" id="1501561">)</span><span class="op" id="1501562">,</span>&nbsp;<span class="ident" id="1501564">size</span><span class="op" id="1501568">)</span><span class="op" id="1501569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501572">if</span>&nbsp;<span class="ident" id="1501575">ep</span><span class="op" id="1501577">.</span><span class="ident" id="1501578">_type</span>&nbsp;<span class="op" id="1501584">!=</span>&nbsp;<span class="ident" id="1501587">t</span>&nbsp;<span class="op" id="1501589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501593">*</span><span class="ident" id="1501594">ok</span>&nbsp;<span class="op" id="1501597">=</span>&nbsp;<span class="builtintype" id="1501599">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501607">memclr</span><span class="op" id="1501613">(</span><span class="ident" id="1501614">unsafe</span><span class="op" id="1501620">.</span><span class="ident" id="1501621">Pointer</span><span class="op" id="1501628">(</span><span class="op" id="1501629">&amp;</span><span class="ident" id="1501630">r</span><span class="op" id="1501631">)</span><span class="op" id="1501632">,</span>&nbsp;<span class="ident" id="1501634">size</span><span class="op" id="1501638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501642">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501653">*</span><span class="ident" id="1501654">ok</span>&nbsp;<span class="op" id="1501657">=</span>&nbsp;<span class="builtintype" id="1501659">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501665">if</span>&nbsp;<span class="ident" id="1501668">isDirectIface</span><span class="op" id="1501681">(</span><span class="ident" id="1501682">t</span><span class="op" id="1501683">)</span>&nbsp;<span class="op" id="1501685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501689">memmove</span><span class="op" id="1501696">(</span><span class="ident" id="1501697">unsafe</span><span class="op" id="1501703">.</span><span class="ident" id="1501704">Pointer</span><span class="op" id="1501711">(</span><span class="op" id="1501712">&amp;</span><span class="ident" id="1501713">r</span><span class="op" id="1501714">)</span><span class="op" id="1501715">,</span>&nbsp;<span class="ident" id="1501717">unsafe</span><span class="op" id="1501723">.</span><span class="ident" id="1501724">Pointer</span><span class="op" id="1501731">(</span><span class="op" id="1501732">&amp;</span><span class="ident" id="1501733">ep</span><span class="op" id="1501735">.</span><span class="ident" id="1501736">data</span><span class="op" id="1501740">)</span><span class="op" id="1501741">,</span>&nbsp;<span class="ident" id="1501743">size</span><span class="op" id="1501747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501750">}</span>&nbsp;<span class="keyword" id="1501752">else</span>&nbsp;<span class="op" id="1501757">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501761">memmove</span><span class="op" id="1501768">(</span><span class="ident" id="1501769">unsafe</span><span class="op" id="1501775">.</span><span class="ident" id="1501776">Pointer</span><span class="op" id="1501783">(</span><span class="op" id="1501784">&amp;</span><span class="ident" id="1501785">r</span><span class="op" id="1501786">)</span><span class="op" id="1501787">,</span>&nbsp;<span class="ident" id="1501789">ep</span><span class="op" id="1501791">.</span><span class="ident" id="1501792">data</span><span class="op" id="1501796">,</span>&nbsp;<span class="ident" id="1501798">size</span><span class="op" id="1501802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501808">return</span><br>
<span class="lineno"></span><span class="op" id="1501815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1501818">func</span>&nbsp;<span class="ident" id="1501823">assertE2TOK</span><span class="op" id="1501834">(</span><span class="ident" id="1501835">t</span>&nbsp;<span class="op" id="1501837">*</span><span class="ident" id="1501838">_type</span><span class="op" id="1501843">,</span>&nbsp;<span class="ident" id="1501845">e</span>&nbsp;<span class="keyword" id="1501847">interface</span><span class="op" id="1501856">{</span><span class="op" id="1501857">}</span><span class="op" id="1501858">)</span>&nbsp;<span class="builtintype" id="1501860">bool</span>&nbsp;<span class="op" id="1501865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501868">ep</span>&nbsp;<span class="op" id="1501871">:=</span>&nbsp;<span class="op" id="1501874">(</span><span class="op" id="1501875">*</span><span class="ident" id="1501876">eface</span><span class="op" id="1501881">)</span><span class="op" id="1501882">(</span><span class="ident" id="1501883">unsafe</span><span class="op" id="1501889">.</span><span class="ident" id="1501890">Pointer</span><span class="op" id="1501897">(</span><span class="op" id="1501898">&amp;</span><span class="ident" id="1501899">e</span><span class="op" id="1501900">)</span><span class="op" id="1501901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501904">return</span>&nbsp;<span class="ident" id="1501911">t</span>&nbsp;<span class="op" id="1501913">==</span>&nbsp;<span class="ident" id="1501916">ep</span><span class="op" id="1501918">.</span><span class="ident" id="1501919">_type</span><br>
<span class="lineno"></span><span class="op" id="1501925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1501928">func</span>&nbsp;<span class="ident" id="1501933">convI2E</span><span class="op" id="1501940">(</span><span class="ident" id="1501941">i</span>&nbsp;<span class="ident" id="1501943">fInterface</span><span class="op" id="1501953">)</span>&nbsp;<span class="op" id="1501955">(</span><span class="ident" id="1501956">r</span>&nbsp;<span class="keyword" id="1501958">interface</span><span class="op" id="1501967">{</span><span class="op" id="1501968">}</span><span class="op" id="1501969">)</span>&nbsp;<span class="op" id="1501971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501974">ip</span>&nbsp;<span class="op" id="1501977">:=</span>&nbsp;<span class="op" id="1501980">(</span><span class="op" id="1501981">*</span><span class="ident" id="1501982">iface</span><span class="op" id="1501987">)</span><span class="op" id="1501988">(</span><span class="ident" id="1501989">unsafe</span><span class="op" id="1501995">.</span><span class="ident" id="1501996">Pointer</span><span class="op" id="1502003">(</span><span class="op" id="1502004">&amp;</span><span class="ident" id="1502005">i</span><span class="op" id="1502006">)</span><span class="op" id="1502007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502010">tab</span>&nbsp;<span class="op" id="1502014">:=</span>&nbsp;<span class="ident" id="1502017">ip</span><span class="op" id="1502019">.</span><span class="ident" id="1502020">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502025">if</span>&nbsp;<span class="ident" id="1502028">tab</span>&nbsp;<span class="op" id="1502032">==</span>&nbsp;<span class="ident" id="1502035">nil</span>&nbsp;<span class="op" id="1502039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502043">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502054">rp</span>&nbsp;<span class="op" id="1502057">:=</span>&nbsp;<span class="op" id="1502060">(</span><span class="op" id="1502061">*</span><span class="ident" id="1502062">eface</span><span class="op" id="1502067">)</span><span class="op" id="1502068">(</span><span class="ident" id="1502069">unsafe</span><span class="op" id="1502075">.</span><span class="ident" id="1502076">Pointer</span><span class="op" id="1502083">(</span><span class="op" id="1502084">&amp;</span><span class="ident" id="1502085">r</span><span class="op" id="1502086">)</span><span class="op" id="1502087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502090">rp</span><span class="op" id="1502092">.</span><span class="ident" id="1502093">_type</span>&nbsp;<span class="op" id="1502099">=</span>&nbsp;<span class="ident" id="1502101">tab</span><span class="op" id="1502104">.</span><span class="ident" id="1502105">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502112">rp</span><span class="op" id="1502114">.</span><span class="ident" id="1502115">data</span>&nbsp;<span class="op" id="1502120">=</span>&nbsp;<span class="ident" id="1502122">ip</span><span class="op" id="1502124">.</span><span class="ident" id="1502125">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502131">return</span><br>
<span class="lineno">270</span><span class="op" id="1502138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1502141">func</span>&nbsp;<span class="ident" id="1502146">assertI2E</span><span class="op" id="1502155">(</span><span class="ident" id="1502156">inter</span>&nbsp;<span class="op" id="1502162">*</span><span class="ident" id="1502163">interfacetype</span><span class="op" id="1502176">,</span>&nbsp;<span class="ident" id="1502178">i</span>&nbsp;<span class="ident" id="1502180">fInterface</span><span class="op" id="1502190">)</span>&nbsp;<span class="op" id="1502192">(</span><span class="ident" id="1502193">r</span>&nbsp;<span class="keyword" id="1502195">interface</span><span class="op" id="1502204">{</span><span class="op" id="1502205">}</span><span class="op" id="1502206">)</span>&nbsp;<span class="op" id="1502208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502211">ip</span>&nbsp;<span class="op" id="1502214">:=</span>&nbsp;<span class="op" id="1502217">(</span><span class="op" id="1502218">*</span><span class="ident" id="1502219">iface</span><span class="op" id="1502224">)</span><span class="op" id="1502225">(</span><span class="ident" id="1502226">unsafe</span><span class="op" id="1502232">.</span><span class="ident" id="1502233">Pointer</span><span class="op" id="1502240">(</span><span class="op" id="1502241">&amp;</span><span class="ident" id="1502242">i</span><span class="op" id="1502243">)</span><span class="op" id="1502244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502247">tab</span>&nbsp;<span class="op" id="1502251">:=</span>&nbsp;<span class="ident" id="1502254">ip</span><span class="op" id="1502256">.</span><span class="ident" id="1502257">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502262">if</span>&nbsp;<span class="ident" id="1502265">tab</span>&nbsp;<span class="op" id="1502269">==</span>&nbsp;<span class="ident" id="1502272">nil</span>&nbsp;<span class="op" id="1502276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1502280">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1502339">panic</span><span class="op" id="1502344">(</span><span class="op" id="1502345">&amp;</span><span class="ident" id="1502346">TypeAssertionError</span><span class="op" id="1502364">{</span><span class="string" id="1502365">&#34;&#34;</span><span class="op" id="1502367">,</span>&nbsp;<span class="string" id="1502369">&#34;&#34;</span><span class="op" id="1502371">,</span>&nbsp;<span class="op" id="1502373">*</span><span class="ident" id="1502374">inter</span><span class="op" id="1502379">.</span><span class="ident" id="1502380">typ</span><span class="op" id="1502383">.</span><span class="ident" id="1502384">_string</span><span class="op" id="1502391">,</span>&nbsp;<span class="string" id="1502393">&#34;&#34;</span><span class="op" id="1502395">}</span><span class="op" id="1502396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502402">rp</span>&nbsp;<span class="op" id="1502405">:=</span>&nbsp;<span class="op" id="1502408">(</span><span class="op" id="1502409">*</span><span class="ident" id="1502410">eface</span><span class="op" id="1502415">)</span><span class="op" id="1502416">(</span><span class="ident" id="1502417">unsafe</span><span class="op" id="1502423">.</span><span class="ident" id="1502424">Pointer</span><span class="op" id="1502431">(</span><span class="op" id="1502432">&amp;</span><span class="ident" id="1502433">r</span><span class="op" id="1502434">)</span><span class="op" id="1502435">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502438">rp</span><span class="op" id="1502440">.</span><span class="ident" id="1502441">_type</span>&nbsp;<span class="op" id="1502447">=</span>&nbsp;<span class="ident" id="1502449">tab</span><span class="op" id="1502452">.</span><span class="ident" id="1502453">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502460">rp</span><span class="op" id="1502462">.</span><span class="ident" id="1502463">data</span>&nbsp;<span class="op" id="1502468">=</span>&nbsp;<span class="ident" id="1502470">ip</span><span class="op" id="1502472">.</span><span class="ident" id="1502473">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502479">return</span><br>
<span class="lineno"></span><span class="op" id="1502486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1502489">func</span>&nbsp;<span class="ident" id="1502494">assertI2E2</span><span class="op" id="1502504">(</span><span class="ident" id="1502505">inter</span>&nbsp;<span class="op" id="1502511">*</span><span class="ident" id="1502512">interfacetype</span><span class="op" id="1502525">,</span>&nbsp;<span class="ident" id="1502527">i</span>&nbsp;<span class="ident" id="1502529">fInterface</span><span class="op" id="1502539">)</span>&nbsp;<span class="op" id="1502541">(</span><span class="ident" id="1502542">r</span>&nbsp;<span class="keyword" id="1502544">interface</span><span class="op" id="1502553">{</span><span class="op" id="1502554">}</span><span class="op" id="1502555">,</span>&nbsp;<span class="ident" id="1502557">ok</span>&nbsp;<span class="builtintype" id="1502560">bool</span><span class="op" id="1502564">)</span>&nbsp;<span class="op" id="1502566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502569">ip</span>&nbsp;<span class="op" id="1502572">:=</span>&nbsp;<span class="op" id="1502575">(</span><span class="op" id="1502576">*</span><span class="ident" id="1502577">iface</span><span class="op" id="1502582">)</span><span class="op" id="1502583">(</span><span class="ident" id="1502584">unsafe</span><span class="op" id="1502590">.</span><span class="ident" id="1502591">Pointer</span><span class="op" id="1502598">(</span><span class="op" id="1502599">&amp;</span><span class="ident" id="1502600">i</span><span class="op" id="1502601">)</span><span class="op" id="1502602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502605">tab</span>&nbsp;<span class="op" id="1502609">:=</span>&nbsp;<span class="ident" id="1502612">ip</span><span class="op" id="1502614">.</span><span class="ident" id="1502615">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502620">if</span>&nbsp;<span class="ident" id="1502623">tab</span>&nbsp;<span class="op" id="1502627">==</span>&nbsp;<span class="ident" id="1502630">nil</span>&nbsp;<span class="op" id="1502634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502638">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502649">rp</span>&nbsp;<span class="op" id="1502652">:=</span>&nbsp;<span class="op" id="1502655">(</span><span class="op" id="1502656">*</span><span class="ident" id="1502657">eface</span><span class="op" id="1502662">)</span><span class="op" id="1502663">(</span><span class="ident" id="1502664">unsafe</span><span class="op" id="1502670">.</span><span class="ident" id="1502671">Pointer</span><span class="op" id="1502678">(</span><span class="op" id="1502679">&amp;</span><span class="ident" id="1502680">r</span><span class="op" id="1502681">)</span><span class="op" id="1502682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502685">rp</span><span class="op" id="1502687">.</span><span class="ident" id="1502688">_type</span>&nbsp;<span class="op" id="1502694">=</span>&nbsp;<span class="ident" id="1502696">tab</span><span class="op" id="1502699">.</span><span class="ident" id="1502700">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502707">rp</span><span class="op" id="1502709">.</span><span class="ident" id="1502710">data</span>&nbsp;<span class="op" id="1502715">=</span>&nbsp;<span class="ident" id="1502717">ip</span><span class="op" id="1502719">.</span><span class="ident" id="1502720">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502726">ok</span>&nbsp;<span class="op" id="1502729">=</span>&nbsp;<span class="builtintype" id="1502731">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502737">return</span><br>
<span class="lineno"></span><span class="op" id="1502744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1502747">func</span>&nbsp;<span class="ident" id="1502752">convI2I</span><span class="op" id="1502759">(</span><span class="ident" id="1502760">inter</span>&nbsp;<span class="op" id="1502766">*</span><span class="ident" id="1502767">interfacetype</span><span class="op" id="1502780">,</span>&nbsp;<span class="ident" id="1502782">i</span>&nbsp;<span class="ident" id="1502784">fInterface</span><span class="op" id="1502794">)</span>&nbsp;<span class="op" id="1502796">(</span><span class="ident" id="1502797">r</span>&nbsp;<span class="ident" id="1502799">fInterface</span><span class="op" id="1502809">)</span>&nbsp;<span class="op" id="1502811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502814">ip</span>&nbsp;<span class="op" id="1502817">:=</span>&nbsp;<span class="op" id="1502820">(</span><span class="op" id="1502821">*</span><span class="ident" id="1502822">iface</span><span class="op" id="1502827">)</span><span class="op" id="1502828">(</span><span class="ident" id="1502829">unsafe</span><span class="op" id="1502835">.</span><span class="ident" id="1502836">Pointer</span><span class="op" id="1502843">(</span><span class="op" id="1502844">&amp;</span><span class="ident" id="1502845">i</span><span class="op" id="1502846">)</span><span class="op" id="1502847">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502850">tab</span>&nbsp;<span class="op" id="1502854">:=</span>&nbsp;<span class="ident" id="1502857">ip</span><span class="op" id="1502859">.</span><span class="ident" id="1502860">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502865">if</span>&nbsp;<span class="ident" id="1502868">tab</span>&nbsp;<span class="op" id="1502872">==</span>&nbsp;<span class="ident" id="1502875">nil</span>&nbsp;<span class="op" id="1502879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502883">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502894">rp</span>&nbsp;<span class="op" id="1502897">:=</span>&nbsp;<span class="op" id="1502900">(</span><span class="op" id="1502901">*</span><span class="ident" id="1502902">iface</span><span class="op" id="1502907">)</span><span class="op" id="1502908">(</span><span class="ident" id="1502909">unsafe</span><span class="op" id="1502915">.</span><span class="ident" id="1502916">Pointer</span><span class="op" id="1502923">(</span><span class="op" id="1502924">&amp;</span><span class="ident" id="1502925">r</span><span class="op" id="1502926">)</span><span class="op" id="1502927">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502930">if</span>&nbsp;<span class="ident" id="1502933">tab</span><span class="op" id="1502936">.</span><span class="ident" id="1502937">inter</span>&nbsp;<span class="op" id="1502943">==</span>&nbsp;<span class="ident" id="1502946">inter</span>&nbsp;<span class="op" id="1502952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502956">rp</span><span class="op" id="1502958">.</span><span class="ident" id="1502959">tab</span>&nbsp;<span class="op" id="1502963">=</span>&nbsp;<span class="ident" id="1502965">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502971">rp</span><span class="op" id="1502973">.</span><span class="ident" id="1502974">data</span>&nbsp;<span class="op" id="1502979">=</span>&nbsp;<span class="ident" id="1502981">ip</span><span class="op" id="1502983">.</span><span class="ident" id="1502984">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502991">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502999">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503002">rp</span><span class="op" id="1503004">.</span><span class="ident" id="1503005">tab</span>&nbsp;<span class="op" id="1503009">=</span>&nbsp;<span class="ident" id="1503011">getitab</span><span class="op" id="1503018">(</span><span class="ident" id="1503019">inter</span><span class="op" id="1503024">,</span>&nbsp;<span class="ident" id="1503026">tab</span><span class="op" id="1503029">.</span><span class="ident" id="1503030">_type</span><span class="op" id="1503035">,</span>&nbsp;<span class="builtintype" id="1503037">false</span><span class="op" id="1503042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503045">rp</span><span class="op" id="1503047">.</span><span class="ident" id="1503048">data</span>&nbsp;<span class="op" id="1503053">=</span>&nbsp;<span class="ident" id="1503055">ip</span><span class="op" id="1503057">.</span><span class="ident" id="1503058">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503064">return</span><br>
<span class="lineno"></span><span class="op" id="1503071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1503074">func</span>&nbsp;<span class="ident" id="1503079">assertI2I</span><span class="op" id="1503088">(</span><span class="ident" id="1503089">inter</span>&nbsp;<span class="op" id="1503095">*</span><span class="ident" id="1503096">interfacetype</span><span class="op" id="1503109">,</span>&nbsp;<span class="ident" id="1503111">i</span>&nbsp;<span class="ident" id="1503113">fInterface</span><span class="op" id="1503123">)</span>&nbsp;<span class="op" id="1503125">(</span><span class="ident" id="1503126">r</span>&nbsp;<span class="ident" id="1503128">fInterface</span><span class="op" id="1503138">)</span>&nbsp;<span class="op" id="1503140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503143">ip</span>&nbsp;<span class="op" id="1503146">:=</span>&nbsp;<span class="op" id="1503149">(</span><span class="op" id="1503150">*</span><span class="ident" id="1503151">iface</span><span class="op" id="1503156">)</span><span class="op" id="1503157">(</span><span class="ident" id="1503158">unsafe</span><span class="op" id="1503164">.</span><span class="ident" id="1503165">Pointer</span><span class="op" id="1503172">(</span><span class="op" id="1503173">&amp;</span><span class="ident" id="1503174">i</span><span class="op" id="1503175">)</span><span class="op" id="1503176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503179">tab</span>&nbsp;<span class="op" id="1503183">:=</span>&nbsp;<span class="ident" id="1503186">ip</span><span class="op" id="1503188">.</span><span class="ident" id="1503189">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503194">if</span>&nbsp;<span class="ident" id="1503197">tab</span>&nbsp;<span class="op" id="1503201">==</span>&nbsp;<span class="ident" id="1503204">nil</span>&nbsp;<span class="op" id="1503208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1503212">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1503271">panic</span><span class="op" id="1503276">(</span><span class="op" id="1503277">&amp;</span><span class="ident" id="1503278">TypeAssertionError</span><span class="op" id="1503296">{</span><span class="string" id="1503297">&#34;&#34;</span><span class="op" id="1503299">,</span>&nbsp;<span class="string" id="1503301">&#34;&#34;</span><span class="op" id="1503303">,</span>&nbsp;<span class="op" id="1503305">*</span><span class="ident" id="1503306">inter</span><span class="op" id="1503311">.</span><span class="ident" id="1503312">typ</span><span class="op" id="1503315">.</span><span class="ident" id="1503316">_string</span><span class="op" id="1503323">,</span>&nbsp;<span class="string" id="1503325">&#34;&#34;</span><span class="op" id="1503327">}</span><span class="op" id="1503328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1503331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503334">rp</span>&nbsp;<span class="op" id="1503337">:=</span>&nbsp;<span class="op" id="1503340">(</span><span class="op" id="1503341">*</span><span class="ident" id="1503342">iface</span><span class="op" id="1503347">)</span><span class="op" id="1503348">(</span><span class="ident" id="1503349">unsafe</span><span class="op" id="1503355">.</span><span class="ident" id="1503356">Pointer</span><span class="op" id="1503363">(</span><span class="op" id="1503364">&amp;</span><span class="ident" id="1503365">r</span><span class="op" id="1503366">)</span><span class="op" id="1503367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503370">if</span>&nbsp;<span class="ident" id="1503373">tab</span><span class="op" id="1503376">.</span><span class="ident" id="1503377">inter</span>&nbsp;<span class="op" id="1503383">==</span>&nbsp;<span class="ident" id="1503386">inter</span>&nbsp;<span class="op" id="1503392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503396">rp</span><span class="op" id="1503398">.</span><span class="ident" id="1503399">tab</span>&nbsp;<span class="op" id="1503403">=</span>&nbsp;<span class="ident" id="1503405">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503411">rp</span><span class="op" id="1503413">.</span><span class="ident" id="1503414">data</span>&nbsp;<span class="op" id="1503419">=</span>&nbsp;<span class="ident" id="1503421">ip</span><span class="op" id="1503423">.</span><span class="ident" id="1503424">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503431">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1503439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503442">rp</span><span class="op" id="1503444">.</span><span class="ident" id="1503445">tab</span>&nbsp;<span class="op" id="1503449">=</span>&nbsp;<span class="ident" id="1503451">getitab</span><span class="op" id="1503458">(</span><span class="ident" id="1503459">inter</span><span class="op" id="1503464">,</span>&nbsp;<span class="ident" id="1503466">tab</span><span class="op" id="1503469">.</span><span class="ident" id="1503470">_type</span><span class="op" id="1503475">,</span>&nbsp;<span class="builtintype" id="1503477">false</span><span class="op" id="1503482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503485">rp</span><span class="op" id="1503487">.</span><span class="ident" id="1503488">data</span>&nbsp;<span class="op" id="1503493">=</span>&nbsp;<span class="ident" id="1503495">ip</span><span class="op" id="1503497">.</span><span class="ident" id="1503498">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503504">return</span><br>
<span class="lineno"></span><span class="op" id="1503511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1503514">func</span>&nbsp;<span class="ident" id="1503519">assertI2I2</span><span class="op" id="1503529">(</span><span class="ident" id="1503530">inter</span>&nbsp;<span class="op" id="1503536">*</span><span class="ident" id="1503537">interfacetype</span><span class="op" id="1503550">,</span>&nbsp;<span class="ident" id="1503552">i</span>&nbsp;<span class="ident" id="1503554">fInterface</span><span class="op" id="1503564">)</span>&nbsp;<span class="op" id="1503566">(</span><span class="ident" id="1503567">r</span>&nbsp;<span class="ident" id="1503569">fInterface</span><span class="op" id="1503579">,</span>&nbsp;<span class="ident" id="1503581">ok</span>&nbsp;<span class="builtintype" id="1503584">bool</span><span class="op" id="1503588">)</span>&nbsp;<span class="op" id="1503590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503593">ip</span>&nbsp;<span class="op" id="1503596">:=</span>&nbsp;<span class="op" id="1503599">(</span><span class="op" id="1503600">*</span><span class="ident" id="1503601">iface</span><span class="op" id="1503606">)</span><span class="op" id="1503607">(</span><span class="ident" id="1503608">unsafe</span><span class="op" id="1503614">.</span><span class="ident" id="1503615">Pointer</span><span class="op" id="1503622">(</span><span class="op" id="1503623">&amp;</span><span class="ident" id="1503624">i</span><span class="op" id="1503625">)</span><span class="op" id="1503626">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503629">tab</span>&nbsp;<span class="op" id="1503633">:=</span>&nbsp;<span class="ident" id="1503636">ip</span><span class="op" id="1503638">.</span><span class="ident" id="1503639">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503644">if</span>&nbsp;<span class="ident" id="1503647">tab</span>&nbsp;<span class="op" id="1503651">==</span>&nbsp;<span class="ident" id="1503654">nil</span>&nbsp;<span class="op" id="1503658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503662">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1503670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503673">rp</span>&nbsp;<span class="op" id="1503676">:=</span>&nbsp;<span class="op" id="1503679">(</span><span class="op" id="1503680">*</span><span class="ident" id="1503681">iface</span><span class="op" id="1503686">)</span><span class="op" id="1503687">(</span><span class="ident" id="1503688">unsafe</span><span class="op" id="1503694">.</span><span class="ident" id="1503695">Pointer</span><span class="op" id="1503702">(</span><span class="op" id="1503703">&amp;</span><span class="ident" id="1503704">r</span><span class="op" id="1503705">)</span><span class="op" id="1503706">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503709">if</span>&nbsp;<span class="ident" id="1503712">tab</span><span class="op" id="1503715">.</span><span class="ident" id="1503716">inter</span>&nbsp;<span class="op" id="1503722">==</span>&nbsp;<span class="ident" id="1503725">inter</span>&nbsp;<span class="op" id="1503731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503735">rp</span><span class="op" id="1503737">.</span><span class="ident" id="1503738">tab</span>&nbsp;<span class="op" id="1503742">=</span>&nbsp;<span class="ident" id="1503744">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503750">rp</span><span class="op" id="1503752">.</span><span class="ident" id="1503753">data</span>&nbsp;<span class="op" id="1503758">=</span>&nbsp;<span class="ident" id="1503760">ip</span><span class="op" id="1503762">.</span><span class="ident" id="1503763">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503770">ok</span>&nbsp;<span class="op" id="1503773">=</span>&nbsp;<span class="builtintype" id="1503775">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503782">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1503790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503793">tab</span>&nbsp;<span class="op" id="1503797">=</span>&nbsp;<span class="ident" id="1503799">getitab</span><span class="op" id="1503806">(</span><span class="ident" id="1503807">inter</span><span class="op" id="1503812">,</span>&nbsp;<span class="ident" id="1503814">tab</span><span class="op" id="1503817">.</span><span class="ident" id="1503818">_type</span><span class="op" id="1503823">,</span>&nbsp;<span class="builtintype" id="1503825">true</span><span class="op" id="1503829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503832">if</span>&nbsp;<span class="ident" id="1503835">tab</span>&nbsp;<span class="op" id="1503839">==</span>&nbsp;<span class="ident" id="1503842">nil</span>&nbsp;<span class="op" id="1503846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503850">rp</span><span class="op" id="1503852">.</span><span class="ident" id="1503853">data</span>&nbsp;<span class="op" id="1503858">=</span>&nbsp;<span class="ident" id="1503860">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503866">rp</span><span class="op" id="1503868">.</span><span class="ident" id="1503869">tab</span>&nbsp;<span class="op" id="1503873">=</span>&nbsp;<span class="ident" id="1503875">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503881">ok</span>&nbsp;<span class="op" id="1503884">=</span>&nbsp;<span class="builtintype" id="1503886">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503894">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1503902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503905">rp</span><span class="op" id="1503907">.</span><span class="ident" id="1503908">tab</span>&nbsp;<span class="op" id="1503912">=</span>&nbsp;<span class="ident" id="1503914">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503919">rp</span><span class="op" id="1503921">.</span><span class="ident" id="1503922">data</span>&nbsp;<span class="op" id="1503927">=</span>&nbsp;<span class="ident" id="1503929">ip</span><span class="op" id="1503931">.</span><span class="ident" id="1503932">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1503938">ok</span>&nbsp;<span class="op" id="1503941">=</span>&nbsp;<span class="builtintype" id="1503943">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1503949">return</span><br>
<span class="lineno"></span><span class="op" id="1503956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1503959">func</span>&nbsp;<span class="ident" id="1503964">assertE2I</span><span class="op" id="1503973">(</span><span class="ident" id="1503974">inter</span>&nbsp;<span class="op" id="1503980">*</span><span class="ident" id="1503981">interfacetype</span><span class="op" id="1503994">,</span>&nbsp;<span class="ident" id="1503996">e</span>&nbsp;<span class="keyword" id="1503998">interface</span><span class="op" id="1504007">{</span><span class="op" id="1504008">}</span><span class="op" id="1504009">)</span>&nbsp;<span class="op" id="1504011">(</span><span class="ident" id="1504012">r</span>&nbsp;<span class="ident" id="1504014">fInterface</span><span class="op" id="1504024">)</span>&nbsp;<span class="op" id="1504026">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504029">ep</span>&nbsp;<span class="op" id="1504032">:=</span>&nbsp;<span class="op" id="1504035">(</span><span class="op" id="1504036">*</span><span class="ident" id="1504037">eface</span><span class="op" id="1504042">)</span><span class="op" id="1504043">(</span><span class="ident" id="1504044">unsafe</span><span class="op" id="1504050">.</span><span class="ident" id="1504051">Pointer</span><span class="op" id="1504058">(</span><span class="op" id="1504059">&amp;</span><span class="ident" id="1504060">e</span><span class="op" id="1504061">)</span><span class="op" id="1504062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504065">t</span>&nbsp;<span class="op" id="1504067">:=</span>&nbsp;<span class="ident" id="1504070">ep</span><span class="op" id="1504072">.</span><span class="ident" id="1504073">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504080">if</span>&nbsp;<span class="ident" id="1504083">t</span>&nbsp;<span class="op" id="1504085">==</span>&nbsp;<span class="ident" id="1504088">nil</span>&nbsp;<span class="op" id="1504092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1504096">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1504155">panic</span><span class="op" id="1504160">(</span><span class="op" id="1504161">&amp;</span><span class="ident" id="1504162">TypeAssertionError</span><span class="op" id="1504180">{</span><span class="string" id="1504181">&#34;&#34;</span><span class="op" id="1504183">,</span>&nbsp;<span class="string" id="1504185">&#34;&#34;</span><span class="op" id="1504187">,</span>&nbsp;<span class="op" id="1504189">*</span><span class="ident" id="1504190">inter</span><span class="op" id="1504195">.</span><span class="ident" id="1504196">typ</span><span class="op" id="1504199">.</span><span class="ident" id="1504200">_string</span><span class="op" id="1504207">,</span>&nbsp;<span class="string" id="1504209">&#34;&#34;</span><span class="op" id="1504211">}</span><span class="op" id="1504212">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504218">rp</span>&nbsp;<span class="op" id="1504221">:=</span>&nbsp;<span class="op" id="1504224">(</span><span class="op" id="1504225">*</span><span class="ident" id="1504226">iface</span><span class="op" id="1504231">)</span><span class="op" id="1504232">(</span><span class="ident" id="1504233">unsafe</span><span class="op" id="1504239">.</span><span class="ident" id="1504240">Pointer</span><span class="op" id="1504247">(</span><span class="op" id="1504248">&amp;</span><span class="ident" id="1504249">r</span><span class="op" id="1504250">)</span><span class="op" id="1504251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504254">rp</span><span class="op" id="1504256">.</span><span class="ident" id="1504257">tab</span>&nbsp;<span class="op" id="1504261">=</span>&nbsp;<span class="ident" id="1504263">getitab</span><span class="op" id="1504270">(</span><span class="ident" id="1504271">inter</span><span class="op" id="1504276">,</span>&nbsp;<span class="ident" id="1504278">t</span><span class="op" id="1504279">,</span>&nbsp;<span class="builtintype" id="1504281">false</span><span class="op" id="1504286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504289">rp</span><span class="op" id="1504291">.</span><span class="ident" id="1504292">data</span>&nbsp;<span class="op" id="1504297">=</span>&nbsp;<span class="ident" id="1504299">ep</span><span class="op" id="1504301">.</span><span class="ident" id="1504302">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504308">return</span><br>
<span class="lineno">370</span><span class="op" id="1504315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1504318">func</span>&nbsp;<span class="ident" id="1504323">assertE2I2</span><span class="op" id="1504333">(</span><span class="ident" id="1504334">inter</span>&nbsp;<span class="op" id="1504340">*</span><span class="ident" id="1504341">interfacetype</span><span class="op" id="1504354">,</span>&nbsp;<span class="ident" id="1504356">e</span>&nbsp;<span class="keyword" id="1504358">interface</span><span class="op" id="1504367">{</span><span class="op" id="1504368">}</span><span class="op" id="1504369">)</span>&nbsp;<span class="op" id="1504371">(</span><span class="ident" id="1504372">r</span>&nbsp;<span class="ident" id="1504374">fInterface</span><span class="op" id="1504384">,</span>&nbsp;<span class="ident" id="1504386">ok</span>&nbsp;<span class="builtintype" id="1504389">bool</span><span class="op" id="1504393">)</span>&nbsp;<span class="op" id="1504395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504398">ep</span>&nbsp;<span class="op" id="1504401">:=</span>&nbsp;<span class="op" id="1504404">(</span><span class="op" id="1504405">*</span><span class="ident" id="1504406">eface</span><span class="op" id="1504411">)</span><span class="op" id="1504412">(</span><span class="ident" id="1504413">unsafe</span><span class="op" id="1504419">.</span><span class="ident" id="1504420">Pointer</span><span class="op" id="1504427">(</span><span class="op" id="1504428">&amp;</span><span class="ident" id="1504429">e</span><span class="op" id="1504430">)</span><span class="op" id="1504431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504434">t</span>&nbsp;<span class="op" id="1504436">:=</span>&nbsp;<span class="ident" id="1504439">ep</span><span class="op" id="1504441">.</span><span class="ident" id="1504442">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504449">if</span>&nbsp;<span class="ident" id="1504452">t</span>&nbsp;<span class="op" id="1504454">==</span>&nbsp;<span class="ident" id="1504457">nil</span>&nbsp;<span class="op" id="1504461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504465">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504476">tab</span>&nbsp;<span class="op" id="1504480">:=</span>&nbsp;<span class="ident" id="1504483">getitab</span><span class="op" id="1504490">(</span><span class="ident" id="1504491">inter</span><span class="op" id="1504496">,</span>&nbsp;<span class="ident" id="1504498">t</span><span class="op" id="1504499">,</span>&nbsp;<span class="builtintype" id="1504501">true</span><span class="op" id="1504505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504508">if</span>&nbsp;<span class="ident" id="1504511">tab</span>&nbsp;<span class="op" id="1504515">==</span>&nbsp;<span class="ident" id="1504518">nil</span>&nbsp;<span class="op" id="1504522">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504526">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504537">rp</span>&nbsp;<span class="op" id="1504540">:=</span>&nbsp;<span class="op" id="1504543">(</span><span class="op" id="1504544">*</span><span class="ident" id="1504545">iface</span><span class="op" id="1504550">)</span><span class="op" id="1504551">(</span><span class="ident" id="1504552">unsafe</span><span class="op" id="1504558">.</span><span class="ident" id="1504559">Pointer</span><span class="op" id="1504566">(</span><span class="op" id="1504567">&amp;</span><span class="ident" id="1504568">r</span><span class="op" id="1504569">)</span><span class="op" id="1504570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504573">rp</span><span class="op" id="1504575">.</span><span class="ident" id="1504576">tab</span>&nbsp;<span class="op" id="1504580">=</span>&nbsp;<span class="ident" id="1504582">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504587">rp</span><span class="op" id="1504589">.</span><span class="ident" id="1504590">data</span>&nbsp;<span class="op" id="1504595">=</span>&nbsp;<span class="ident" id="1504597">ep</span><span class="op" id="1504599">.</span><span class="ident" id="1504600">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504606">ok</span>&nbsp;<span class="op" id="1504609">=</span>&nbsp;<span class="builtintype" id="1504611">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504617">return</span><br>
<span class="lineno"></span><span class="op" id="1504624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1504627">func</span>&nbsp;<span class="ident" id="1504632">reflect_ifaceE2I</span><span class="op" id="1504648">(</span><span class="ident" id="1504649">inter</span>&nbsp;<span class="op" id="1504655">*</span><span class="ident" id="1504656">interfacetype</span><span class="op" id="1504669">,</span>&nbsp;<span class="ident" id="1504671">e</span>&nbsp;<span class="keyword" id="1504673">interface</span><span class="op" id="1504682">{</span><span class="op" id="1504683">}</span><span class="op" id="1504684">,</span>&nbsp;<span class="ident" id="1504686">dst</span>&nbsp;<span class="op" id="1504690">*</span><span class="ident" id="1504691">fInterface</span><span class="op" id="1504701">)</span>&nbsp;<span class="op" id="1504703">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504706">*</span><span class="ident" id="1504707">dst</span>&nbsp;<span class="op" id="1504711">=</span>&nbsp;<span class="ident" id="1504713">assertE2I</span><span class="op" id="1504722">(</span><span class="ident" id="1504723">inter</span><span class="op" id="1504728">,</span>&nbsp;<span class="ident" id="1504730">e</span><span class="op" id="1504731">)</span><br>
<span class="lineno"></span><span class="op" id="1504733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1504736">func</span>&nbsp;<span class="ident" id="1504741">assertE2E</span><span class="op" id="1504750">(</span><span class="ident" id="1504751">inter</span>&nbsp;<span class="op" id="1504757">*</span><span class="ident" id="1504758">interfacetype</span><span class="op" id="1504771">,</span>&nbsp;<span class="ident" id="1504773">e</span>&nbsp;<span class="keyword" id="1504775">interface</span><span class="op" id="1504784">{</span><span class="op" id="1504785">}</span><span class="op" id="1504786">)</span>&nbsp;<span class="keyword" id="1504788">interface</span><span class="op" id="1504797">{</span><span class="op" id="1504798">}</span>&nbsp;<span class="op" id="1504800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504803">ep</span>&nbsp;<span class="op" id="1504806">:=</span>&nbsp;<span class="op" id="1504809">(</span><span class="op" id="1504810">*</span><span class="ident" id="1504811">eface</span><span class="op" id="1504816">)</span><span class="op" id="1504817">(</span><span class="ident" id="1504818">unsafe</span><span class="op" id="1504824">.</span><span class="ident" id="1504825">Pointer</span><span class="op" id="1504832">(</span><span class="op" id="1504833">&amp;</span><span class="ident" id="1504834">e</span><span class="op" id="1504835">)</span><span class="op" id="1504836">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504839">if</span>&nbsp;<span class="ident" id="1504842">ep</span><span class="op" id="1504844">.</span><span class="ident" id="1504845">_type</span>&nbsp;<span class="op" id="1504851">==</span>&nbsp;<span class="ident" id="1504854">nil</span>&nbsp;<span class="op" id="1504858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1504862">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1504921">panic</span><span class="op" id="1504926">(</span><span class="op" id="1504927">&amp;</span><span class="ident" id="1504928">TypeAssertionError</span><span class="op" id="1504946">{</span><span class="string" id="1504947">&#34;&#34;</span><span class="op" id="1504949">,</span>&nbsp;<span class="string" id="1504951">&#34;&#34;</span><span class="op" id="1504953">,</span>&nbsp;<span class="op" id="1504955">*</span><span class="ident" id="1504956">inter</span><span class="op" id="1504961">.</span><span class="ident" id="1504962">typ</span><span class="op" id="1504965">.</span><span class="ident" id="1504966">_string</span><span class="op" id="1504973">,</span>&nbsp;<span class="string" id="1504975">&#34;&#34;</span><span class="op" id="1504977">}</span><span class="op" id="1504978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504984">return</span>&nbsp;<span class="ident" id="1504991">e</span><br>
<span class="lineno">400</span><span class="op" id="1504993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1504996">func</span>&nbsp;<span class="ident" id="1505001">assertE2E2</span><span class="op" id="1505011">(</span><span class="ident" id="1505012">inter</span>&nbsp;<span class="op" id="1505018">*</span><span class="ident" id="1505019">interfacetype</span><span class="op" id="1505032">,</span>&nbsp;<span class="ident" id="1505034">e</span>&nbsp;<span class="keyword" id="1505036">interface</span><span class="op" id="1505045">{</span><span class="op" id="1505046">}</span><span class="op" id="1505047">)</span>&nbsp;<span class="op" id="1505049">(</span><span class="keyword" id="1505050">interface</span><span class="op" id="1505059">{</span><span class="op" id="1505060">}</span><span class="op" id="1505061">,</span>&nbsp;<span class="builtintype" id="1505063">bool</span><span class="op" id="1505067">)</span>&nbsp;<span class="op" id="1505069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505072">ep</span>&nbsp;<span class="op" id="1505075">:=</span>&nbsp;<span class="op" id="1505078">(</span><span class="op" id="1505079">*</span><span class="ident" id="1505080">eface</span><span class="op" id="1505085">)</span><span class="op" id="1505086">(</span><span class="ident" id="1505087">unsafe</span><span class="op" id="1505093">.</span><span class="ident" id="1505094">Pointer</span><span class="op" id="1505101">(</span><span class="op" id="1505102">&amp;</span><span class="ident" id="1505103">e</span><span class="op" id="1505104">)</span><span class="op" id="1505105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505108">if</span>&nbsp;<span class="ident" id="1505111">ep</span><span class="op" id="1505113">.</span><span class="ident" id="1505114">_type</span>&nbsp;<span class="op" id="1505120">==</span>&nbsp;<span class="ident" id="1505123">nil</span>&nbsp;<span class="op" id="1505127">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505131">return</span>&nbsp;<span class="ident" id="1505138">nil</span><span class="op" id="1505141">,</span>&nbsp;<span class="builtintype" id="1505143">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505153">return</span>&nbsp;<span class="ident" id="1505160">e</span><span class="op" id="1505161">,</span>&nbsp;<span class="builtintype" id="1505163">true</span><br>
<span class="lineno"></span><span class="op" id="1505168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1505171">func</span>&nbsp;<span class="ident" id="1505176">ifacethash</span><span class="op" id="1505186">(</span><span class="ident" id="1505187">i</span>&nbsp;<span class="ident" id="1505189">fInterface</span><span class="op" id="1505199">)</span>&nbsp;<span class="builtintype" id="1505201">uint32</span>&nbsp;<span class="op" id="1505208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505211">ip</span>&nbsp;<span class="op" id="1505214">:=</span>&nbsp;<span class="op" id="1505217">(</span><span class="op" id="1505218">*</span><span class="ident" id="1505219">iface</span><span class="op" id="1505224">)</span><span class="op" id="1505225">(</span><span class="ident" id="1505226">unsafe</span><span class="op" id="1505232">.</span><span class="ident" id="1505233">Pointer</span><span class="op" id="1505240">(</span><span class="op" id="1505241">&amp;</span><span class="ident" id="1505242">i</span><span class="op" id="1505243">)</span><span class="op" id="1505244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505247">tab</span>&nbsp;<span class="op" id="1505251">:=</span>&nbsp;<span class="ident" id="1505254">ip</span><span class="op" id="1505256">.</span><span class="ident" id="1505257">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505262">if</span>&nbsp;<span class="ident" id="1505265">tab</span>&nbsp;<span class="op" id="1505269">==</span>&nbsp;<span class="ident" id="1505272">nil</span>&nbsp;<span class="op" id="1505276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505280">return</span>&nbsp;<span class="num" id="1505287">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505293">return</span>&nbsp;<span class="ident" id="1505300">tab</span><span class="op" id="1505303">.</span><span class="ident" id="1505304">_type</span><span class="op" id="1505309">.</span><span class="ident" id="1505310">hash</span><br>
<span class="lineno"></span><span class="op" id="1505315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1505318">func</span>&nbsp;<span class="ident" id="1505323">efacethash</span><span class="op" id="1505333">(</span><span class="ident" id="1505334">e</span>&nbsp;<span class="keyword" id="1505336">interface</span><span class="op" id="1505345">{</span><span class="op" id="1505346">}</span><span class="op" id="1505347">)</span>&nbsp;<span class="builtintype" id="1505349">uint32</span>&nbsp;<span class="op" id="1505356">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505359">ep</span>&nbsp;<span class="op" id="1505362">:=</span>&nbsp;<span class="op" id="1505365">(</span><span class="op" id="1505366">*</span><span class="ident" id="1505367">eface</span><span class="op" id="1505372">)</span><span class="op" id="1505373">(</span><span class="ident" id="1505374">unsafe</span><span class="op" id="1505380">.</span><span class="ident" id="1505381">Pointer</span><span class="op" id="1505388">(</span><span class="op" id="1505389">&amp;</span><span class="ident" id="1505390">e</span><span class="op" id="1505391">)</span><span class="op" id="1505392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505395">t</span>&nbsp;<span class="op" id="1505397">:=</span>&nbsp;<span class="ident" id="1505400">ep</span><span class="op" id="1505402">.</span><span class="ident" id="1505403">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505410">if</span>&nbsp;<span class="ident" id="1505413">t</span>&nbsp;<span class="op" id="1505415">==</span>&nbsp;<span class="ident" id="1505418">nil</span>&nbsp;<span class="op" id="1505422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505426">return</span>&nbsp;<span class="num" id="1505433">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505436">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505439">return</span>&nbsp;<span class="ident" id="1505446">t</span><span class="op" id="1505447">.</span><span class="ident" id="1505448">hash</span><br>
<span class="lineno"></span><span class="op" id="1505453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1505456">func</span>&nbsp;<span class="ident" id="1505461">iterate_itabs</span><span class="op" id="1505474">(</span><span class="ident" id="1505475">fn</span>&nbsp;<span class="keyword" id="1505478">func</span><span class="op" id="1505482">(</span><span class="op" id="1505483">*</span><span class="ident" id="1505484">itab</span><span class="op" id="1505488">)</span><span class="op" id="1505489">)</span>&nbsp;<span class="op" id="1505491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505494">for</span>&nbsp;<span class="ident" id="1505498">_</span><span class="op" id="1505499">,</span>&nbsp;<span class="ident" id="1505501">h</span>&nbsp;<span class="op" id="1505503">:=</span>&nbsp;<span class="keyword" id="1505506">range</span>&nbsp;<span class="op" id="1505512">&amp;</span><span class="ident" id="1505513">hash</span>&nbsp;<span class="op" id="1505518">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505522">for</span>&nbsp;<span class="op" id="1505526">;</span>&nbsp;<span class="ident" id="1505528">h</span>&nbsp;<span class="op" id="1505530">!=</span>&nbsp;<span class="ident" id="1505533">nil</span><span class="op" id="1505536">;</span>&nbsp;<span class="ident" id="1505538">h</span>&nbsp;<span class="op" id="1505540">=</span>&nbsp;<span class="ident" id="1505542">h</span><span class="op" id="1505543">.</span><span class="ident" id="1505544">link</span>&nbsp;<span class="op" id="1505549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505554">fn</span><span class="op" id="1505556">(</span><span class="ident" id="1505557">h</span><span class="op" id="1505558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505565">}</span><br>
<span class="lineno"></span><span class="op" id="1505567">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1505570">func</span>&nbsp;<span class="ident" id="1505575">ifaceE2I2</span><span class="op" id="1505584">(</span><span class="ident" id="1505585">inter</span>&nbsp;<span class="op" id="1505591">*</span><span class="ident" id="1505592">interfacetype</span><span class="op" id="1505605">,</span>&nbsp;<span class="ident" id="1505607">e</span>&nbsp;<span class="keyword" id="1505609">interface</span><span class="op" id="1505618">{</span><span class="op" id="1505619">}</span><span class="op" id="1505620">,</span>&nbsp;<span class="ident" id="1505622">r</span>&nbsp;<span class="op" id="1505624">*</span><span class="ident" id="1505625">fInterface</span><span class="op" id="1505635">)</span>&nbsp;<span class="op" id="1505637">(</span><span class="ident" id="1505638">ok</span>&nbsp;<span class="builtintype" id="1505641">bool</span><span class="op" id="1505645">)</span>&nbsp;<span class="op" id="1505647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505650">*</span><span class="ident" id="1505651">r</span><span class="op" id="1505652">,</span>&nbsp;<span class="ident" id="1505654">ok</span>&nbsp;<span class="op" id="1505657">=</span>&nbsp;<span class="ident" id="1505659">assertE2I2</span><span class="op" id="1505669">(</span><span class="ident" id="1505670">inter</span><span class="op" id="1505675">,</span>&nbsp;<span class="ident" id="1505677">e</span><span class="op" id="1505678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505681">return</span><br>
<span class="lineno"></span><span class="op" id="1505688">}</span>
</div>
</body>
</html>
