<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6857296">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6857351">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6857405">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6857456">package</span>&nbsp;<span class="ident" id="6857464">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6857470">import</span>&nbsp;<span class="op" id="6857477">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857480">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857489">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6857499">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6857502">type</span>&nbsp;<span class="ident" id="6857507">clipTest</span>&nbsp;<span class="keyword" id="6857516">struct</span>&nbsp;<span class="op" id="6857523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857526">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6857540">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857548">r</span><span class="op" id="6857549">,</span>&nbsp;<span class="ident" id="6857551">dr</span><span class="op" id="6857553">,</span>&nbsp;<span class="ident" id="6857555">sr</span><span class="op" id="6857557">,</span>&nbsp;<span class="ident" id="6857559">mr</span>&nbsp;<span class="ident" id="6857562">image</span><span class="op" id="6857567">.</span><span class="ident" id="6857568">Rectangle</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857579">sp</span><span class="op" id="6857581">,</span>&nbsp;<span class="ident" id="6857583">mp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6857593">image</span><span class="op" id="6857598">.</span><span class="ident" id="6857599">Point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857606">nilMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6857620">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857626">r0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6857640">image</span><span class="op" id="6857645">.</span><span class="ident" id="6857646">Rectangle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857657">sp0</span><span class="op" id="6857660">,</span>&nbsp;<span class="ident" id="6857662">mp0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6857671">image</span><span class="op" id="6857676">.</span><span class="ident" id="6857677">Point</span><br>
<span class="lineno"></span><span class="op" id="6857683">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6857686">var</span>&nbsp;<span class="ident" id="6857690">clipTests</span>&nbsp;<span class="op" id="6857700">=</span>&nbsp;<span class="op" id="6857702">[</span><span class="op" id="6857703">]</span><span class="ident" id="6857704">clipTest</span><span class="op" id="6857712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857715">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857764">&#34;basic&#34;</span><span class="op" id="6857771">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857775">image</span><span class="op" id="6857780">.</span><span class="ident" id="6857781">Rect</span><span class="op" id="6857785">(</span><span class="num" id="6857786">0</span><span class="op" id="6857787">,</span>&nbsp;<span class="num" id="6857789">0</span><span class="op" id="6857790">,</span>&nbsp;<span class="num" id="6857792">100</span><span class="op" id="6857795">,</span>&nbsp;<span class="num" id="6857797">100</span><span class="op" id="6857800">)</span><span class="op" id="6857801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857805">image</span><span class="op" id="6857810">.</span><span class="ident" id="6857811">Rect</span><span class="op" id="6857815">(</span><span class="num" id="6857816">0</span><span class="op" id="6857817">,</span>&nbsp;<span class="num" id="6857819">0</span><span class="op" id="6857820">,</span>&nbsp;<span class="num" id="6857822">100</span><span class="op" id="6857825">,</span>&nbsp;<span class="num" id="6857827">100</span><span class="op" id="6857830">)</span><span class="op" id="6857831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857835">image</span><span class="op" id="6857840">.</span><span class="ident" id="6857841">Rect</span><span class="op" id="6857845">(</span><span class="num" id="6857846">0</span><span class="op" id="6857847">,</span>&nbsp;<span class="num" id="6857849">0</span><span class="op" id="6857850">,</span>&nbsp;<span class="num" id="6857852">100</span><span class="op" id="6857855">,</span>&nbsp;<span class="num" id="6857857">100</span><span class="op" id="6857860">)</span><span class="op" id="6857861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857865">image</span><span class="op" id="6857870">.</span><span class="ident" id="6857871">ZR</span><span class="op" id="6857873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857877">image</span><span class="op" id="6857882">.</span><span class="ident" id="6857883">ZP</span><span class="op" id="6857885">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857889">image</span><span class="op" id="6857894">.</span><span class="ident" id="6857895">ZP</span><span class="op" id="6857897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6857901">true</span><span class="op" id="6857905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857909">image</span><span class="op" id="6857914">.</span><span class="ident" id="6857915">Rect</span><span class="op" id="6857919">(</span><span class="num" id="6857920">0</span><span class="op" id="6857921">,</span>&nbsp;<span class="num" id="6857923">0</span><span class="op" id="6857924">,</span>&nbsp;<span class="num" id="6857926">100</span><span class="op" id="6857929">,</span>&nbsp;<span class="num" id="6857931">100</span><span class="op" id="6857934">)</span><span class="op" id="6857935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857939">image</span><span class="op" id="6857944">.</span><span class="ident" id="6857945">ZP</span><span class="op" id="6857947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857951">image</span><span class="op" id="6857956">.</span><span class="ident" id="6857957">ZP</span><span class="op" id="6857959">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857962">}</span><span class="op" id="6857963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857970">&#34;clip&nbsp;dr&#34;</span><span class="op" id="6857979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857983">image</span><span class="op" id="6857988">.</span><span class="ident" id="6857989">Rect</span><span class="op" id="6857993">(</span><span class="num" id="6857994">0</span><span class="op" id="6857995">,</span>&nbsp;<span class="num" id="6857997">0</span><span class="op" id="6857998">,</span>&nbsp;<span class="num" id="6858000">100</span><span class="op" id="6858003">,</span>&nbsp;<span class="num" id="6858005">100</span><span class="op" id="6858008">)</span><span class="op" id="6858009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858013">image</span><span class="op" id="6858018">.</span><span class="ident" id="6858019">Rect</span><span class="op" id="6858023">(</span><span class="num" id="6858024">40</span><span class="op" id="6858026">,</span>&nbsp;<span class="num" id="6858028">40</span><span class="op" id="6858030">,</span>&nbsp;<span class="num" id="6858032">60</span><span class="op" id="6858034">,</span>&nbsp;<span class="num" id="6858036">60</span><span class="op" id="6858038">)</span><span class="op" id="6858039">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858043">image</span><span class="op" id="6858048">.</span><span class="ident" id="6858049">Rect</span><span class="op" id="6858053">(</span><span class="num" id="6858054">0</span><span class="op" id="6858055">,</span>&nbsp;<span class="num" id="6858057">0</span><span class="op" id="6858058">,</span>&nbsp;<span class="num" id="6858060">100</span><span class="op" id="6858063">,</span>&nbsp;<span class="num" id="6858065">100</span><span class="op" id="6858068">)</span><span class="op" id="6858069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858073">image</span><span class="op" id="6858078">.</span><span class="ident" id="6858079">ZR</span><span class="op" id="6858081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858085">image</span><span class="op" id="6858090">.</span><span class="ident" id="6858091">ZP</span><span class="op" id="6858093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858097">image</span><span class="op" id="6858102">.</span><span class="ident" id="6858103">ZP</span><span class="op" id="6858105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6858109">true</span><span class="op" id="6858113">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858117">image</span><span class="op" id="6858122">.</span><span class="ident" id="6858123">Rect</span><span class="op" id="6858127">(</span><span class="num" id="6858128">40</span><span class="op" id="6858130">,</span>&nbsp;<span class="num" id="6858132">40</span><span class="op" id="6858134">,</span>&nbsp;<span class="num" id="6858136">60</span><span class="op" id="6858138">,</span>&nbsp;<span class="num" id="6858140">60</span><span class="op" id="6858142">)</span><span class="op" id="6858143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858147">image</span><span class="op" id="6858152">.</span><span class="ident" id="6858153">Pt</span><span class="op" id="6858155">(</span><span class="num" id="6858156">40</span><span class="op" id="6858158">,</span>&nbsp;<span class="num" id="6858160">40</span><span class="op" id="6858162">)</span><span class="op" id="6858163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858167">image</span><span class="op" id="6858172">.</span><span class="ident" id="6858173">ZP</span><span class="op" id="6858175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858178">}</span><span class="op" id="6858179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858182">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6858186">&#34;clip&nbsp;sr&#34;</span><span class="op" id="6858195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858199">image</span><span class="op" id="6858204">.</span><span class="ident" id="6858205">Rect</span><span class="op" id="6858209">(</span><span class="num" id="6858210">0</span><span class="op" id="6858211">,</span>&nbsp;<span class="num" id="6858213">0</span><span class="op" id="6858214">,</span>&nbsp;<span class="num" id="6858216">100</span><span class="op" id="6858219">,</span>&nbsp;<span class="num" id="6858221">100</span><span class="op" id="6858224">)</span><span class="op" id="6858225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858229">image</span><span class="op" id="6858234">.</span><span class="ident" id="6858235">Rect</span><span class="op" id="6858239">(</span><span class="num" id="6858240">0</span><span class="op" id="6858241">,</span>&nbsp;<span class="num" id="6858243">0</span><span class="op" id="6858244">,</span>&nbsp;<span class="num" id="6858246">100</span><span class="op" id="6858249">,</span>&nbsp;<span class="num" id="6858251">100</span><span class="op" id="6858254">)</span><span class="op" id="6858255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858259">image</span><span class="op" id="6858264">.</span><span class="ident" id="6858265">Rect</span><span class="op" id="6858269">(</span><span class="num" id="6858270">20</span><span class="op" id="6858272">,</span>&nbsp;<span class="num" id="6858274">20</span><span class="op" id="6858276">,</span>&nbsp;<span class="num" id="6858278">80</span><span class="op" id="6858280">,</span>&nbsp;<span class="num" id="6858282">80</span><span class="op" id="6858284">)</span><span class="op" id="6858285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858289">image</span><span class="op" id="6858294">.</span><span class="ident" id="6858295">ZR</span><span class="op" id="6858297">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858301">image</span><span class="op" id="6858306">.</span><span class="ident" id="6858307">ZP</span><span class="op" id="6858309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858313">image</span><span class="op" id="6858318">.</span><span class="ident" id="6858319">ZP</span><span class="op" id="6858321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6858325">true</span><span class="op" id="6858329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858333">image</span><span class="op" id="6858338">.</span><span class="ident" id="6858339">Rect</span><span class="op" id="6858343">(</span><span class="num" id="6858344">20</span><span class="op" id="6858346">,</span>&nbsp;<span class="num" id="6858348">20</span><span class="op" id="6858350">,</span>&nbsp;<span class="num" id="6858352">80</span><span class="op" id="6858354">,</span>&nbsp;<span class="num" id="6858356">80</span><span class="op" id="6858358">)</span><span class="op" id="6858359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858363">image</span><span class="op" id="6858368">.</span><span class="ident" id="6858369">Pt</span><span class="op" id="6858371">(</span><span class="num" id="6858372">20</span><span class="op" id="6858374">,</span>&nbsp;<span class="num" id="6858376">20</span><span class="op" id="6858378">)</span><span class="op" id="6858379">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858383">image</span><span class="op" id="6858388">.</span><span class="ident" id="6858389">ZP</span><span class="op" id="6858391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858394">}</span><span class="op" id="6858395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6858402">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr&#34;</span><span class="op" id="6858418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858422">image</span><span class="op" id="6858427">.</span><span class="ident" id="6858428">Rect</span><span class="op" id="6858432">(</span><span class="num" id="6858433">0</span><span class="op" id="6858434">,</span>&nbsp;<span class="num" id="6858436">0</span><span class="op" id="6858437">,</span>&nbsp;<span class="num" id="6858439">100</span><span class="op" id="6858442">,</span>&nbsp;<span class="num" id="6858444">100</span><span class="op" id="6858447">)</span><span class="op" id="6858448">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858452">image</span><span class="op" id="6858457">.</span><span class="ident" id="6858458">Rect</span><span class="op" id="6858462">(</span><span class="num" id="6858463">0</span><span class="op" id="6858464">,</span>&nbsp;<span class="num" id="6858466">0</span><span class="op" id="6858467">,</span>&nbsp;<span class="num" id="6858469">50</span><span class="op" id="6858471">,</span>&nbsp;<span class="num" id="6858473">100</span><span class="op" id="6858476">)</span><span class="op" id="6858477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858481">image</span><span class="op" id="6858486">.</span><span class="ident" id="6858487">Rect</span><span class="op" id="6858491">(</span><span class="num" id="6858492">20</span><span class="op" id="6858494">,</span>&nbsp;<span class="num" id="6858496">20</span><span class="op" id="6858498">,</span>&nbsp;<span class="num" id="6858500">80</span><span class="op" id="6858502">,</span>&nbsp;<span class="num" id="6858504">80</span><span class="op" id="6858506">)</span><span class="op" id="6858507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858511">image</span><span class="op" id="6858516">.</span><span class="ident" id="6858517">ZR</span><span class="op" id="6858519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858523">image</span><span class="op" id="6858528">.</span><span class="ident" id="6858529">ZP</span><span class="op" id="6858531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858535">image</span><span class="op" id="6858540">.</span><span class="ident" id="6858541">ZP</span><span class="op" id="6858543">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6858547">true</span><span class="op" id="6858551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858555">image</span><span class="op" id="6858560">.</span><span class="ident" id="6858561">Rect</span><span class="op" id="6858565">(</span><span class="num" id="6858566">20</span><span class="op" id="6858568">,</span>&nbsp;<span class="num" id="6858570">20</span><span class="op" id="6858572">,</span>&nbsp;<span class="num" id="6858574">50</span><span class="op" id="6858576">,</span>&nbsp;<span class="num" id="6858578">80</span><span class="op" id="6858580">)</span><span class="op" id="6858581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858585">image</span><span class="op" id="6858590">.</span><span class="ident" id="6858591">Pt</span><span class="op" id="6858593">(</span><span class="num" id="6858594">20</span><span class="op" id="6858596">,</span>&nbsp;<span class="num" id="6858598">20</span><span class="op" id="6858600">)</span><span class="op" id="6858601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858605">image</span><span class="op" id="6858610">.</span><span class="ident" id="6858611">ZP</span><span class="op" id="6858613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858616">}</span><span class="op" id="6858617">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6858624">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(top-left)&#34;</span><span class="op" id="6858666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858670">image</span><span class="op" id="6858675">.</span><span class="ident" id="6858676">Rect</span><span class="op" id="6858680">(</span><span class="num" id="6858681">0</span><span class="op" id="6858682">,</span>&nbsp;<span class="num" id="6858684">0</span><span class="op" id="6858685">,</span>&nbsp;<span class="num" id="6858687">100</span><span class="op" id="6858690">,</span>&nbsp;<span class="num" id="6858692">100</span><span class="op" id="6858695">)</span><span class="op" id="6858696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858700">image</span><span class="op" id="6858705">.</span><span class="ident" id="6858706">Rect</span><span class="op" id="6858710">(</span><span class="num" id="6858711">0</span><span class="op" id="6858712">,</span>&nbsp;<span class="num" id="6858714">0</span><span class="op" id="6858715">,</span>&nbsp;<span class="num" id="6858717">50</span><span class="op" id="6858719">,</span>&nbsp;<span class="num" id="6858721">100</span><span class="op" id="6858724">)</span><span class="op" id="6858725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858729">image</span><span class="op" id="6858734">.</span><span class="ident" id="6858735">Rect</span><span class="op" id="6858739">(</span><span class="num" id="6858740">20</span><span class="op" id="6858742">,</span>&nbsp;<span class="num" id="6858744">20</span><span class="op" id="6858746">,</span>&nbsp;<span class="num" id="6858748">80</span><span class="op" id="6858750">,</span>&nbsp;<span class="num" id="6858752">80</span><span class="op" id="6858754">)</span><span class="op" id="6858755">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858759">image</span><span class="op" id="6858764">.</span><span class="ident" id="6858765">ZR</span><span class="op" id="6858767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858771">image</span><span class="op" id="6858776">.</span><span class="ident" id="6858777">Pt</span><span class="op" id="6858779">(</span><span class="num" id="6858780">15</span><span class="op" id="6858782">,</span>&nbsp;<span class="num" id="6858784">8</span><span class="op" id="6858785">)</span><span class="op" id="6858786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858790">image</span><span class="op" id="6858795">.</span><span class="ident" id="6858796">ZP</span><span class="op" id="6858798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6858802">true</span><span class="op" id="6858806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858810">image</span><span class="op" id="6858815">.</span><span class="ident" id="6858816">Rect</span><span class="op" id="6858820">(</span><span class="num" id="6858821">5</span><span class="op" id="6858822">,</span>&nbsp;<span class="num" id="6858824">12</span><span class="op" id="6858826">,</span>&nbsp;<span class="num" id="6858828">50</span><span class="op" id="6858830">,</span>&nbsp;<span class="num" id="6858832">72</span><span class="op" id="6858834">)</span><span class="op" id="6858835">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858839">image</span><span class="op" id="6858844">.</span><span class="ident" id="6858845">Pt</span><span class="op" id="6858847">(</span><span class="num" id="6858848">20</span><span class="op" id="6858850">,</span>&nbsp;<span class="num" id="6858852">20</span><span class="op" id="6858854">)</span><span class="op" id="6858855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858859">image</span><span class="op" id="6858864">.</span><span class="ident" id="6858865">ZP</span><span class="op" id="6858867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858870">}</span><span class="op" id="6858871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6858878">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(middle-left)&#34;</span><span class="op" id="6858923">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858927">image</span><span class="op" id="6858932">.</span><span class="ident" id="6858933">Rect</span><span class="op" id="6858937">(</span><span class="num" id="6858938">0</span><span class="op" id="6858939">,</span>&nbsp;<span class="num" id="6858941">0</span><span class="op" id="6858942">,</span>&nbsp;<span class="num" id="6858944">100</span><span class="op" id="6858947">,</span>&nbsp;<span class="num" id="6858949">100</span><span class="op" id="6858952">)</span><span class="op" id="6858953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858957">image</span><span class="op" id="6858962">.</span><span class="ident" id="6858963">Rect</span><span class="op" id="6858967">(</span><span class="num" id="6858968">0</span><span class="op" id="6858969">,</span>&nbsp;<span class="num" id="6858971">0</span><span class="op" id="6858972">,</span>&nbsp;<span class="num" id="6858974">50</span><span class="op" id="6858976">,</span>&nbsp;<span class="num" id="6858978">100</span><span class="op" id="6858981">)</span><span class="op" id="6858982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858986">image</span><span class="op" id="6858991">.</span><span class="ident" id="6858992">Rect</span><span class="op" id="6858996">(</span><span class="num" id="6858997">20</span><span class="op" id="6858999">,</span>&nbsp;<span class="num" id="6859001">20</span><span class="op" id="6859003">,</span>&nbsp;<span class="num" id="6859005">80</span><span class="op" id="6859007">,</span>&nbsp;<span class="num" id="6859009">80</span><span class="op" id="6859011">)</span><span class="op" id="6859012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859016">image</span><span class="op" id="6859021">.</span><span class="ident" id="6859022">ZR</span><span class="op" id="6859024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859028">image</span><span class="op" id="6859033">.</span><span class="ident" id="6859034">Pt</span><span class="op" id="6859036">(</span><span class="num" id="6859037">15</span><span class="op" id="6859039">,</span>&nbsp;<span class="num" id="6859041">66</span><span class="op" id="6859043">)</span><span class="op" id="6859044">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859048">image</span><span class="op" id="6859053">.</span><span class="ident" id="6859054">ZP</span><span class="op" id="6859056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6859060">true</span><span class="op" id="6859064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859068">image</span><span class="op" id="6859073">.</span><span class="ident" id="6859074">Rect</span><span class="op" id="6859078">(</span><span class="num" id="6859079">5</span><span class="op" id="6859080">,</span>&nbsp;<span class="num" id="6859082">0</span><span class="op" id="6859083">,</span>&nbsp;<span class="num" id="6859085">50</span><span class="op" id="6859087">,</span>&nbsp;<span class="num" id="6859089">14</span><span class="op" id="6859091">)</span><span class="op" id="6859092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859096">image</span><span class="op" id="6859101">.</span><span class="ident" id="6859102">Pt</span><span class="op" id="6859104">(</span><span class="num" id="6859105">20</span><span class="op" id="6859107">,</span>&nbsp;<span class="num" id="6859109">66</span><span class="op" id="6859111">)</span><span class="op" id="6859112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859116">image</span><span class="op" id="6859121">.</span><span class="ident" id="6859122">ZP</span><span class="op" id="6859124">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859127">}</span><span class="op" id="6859128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6859135">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;outside&nbsp;sr&nbsp;(bottom-left)&#34;</span><span class="op" id="6859180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859184">image</span><span class="op" id="6859189">.</span><span class="ident" id="6859190">Rect</span><span class="op" id="6859194">(</span><span class="num" id="6859195">0</span><span class="op" id="6859196">,</span>&nbsp;<span class="num" id="6859198">0</span><span class="op" id="6859199">,</span>&nbsp;<span class="num" id="6859201">100</span><span class="op" id="6859204">,</span>&nbsp;<span class="num" id="6859206">100</span><span class="op" id="6859209">)</span><span class="op" id="6859210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859214">image</span><span class="op" id="6859219">.</span><span class="ident" id="6859220">Rect</span><span class="op" id="6859224">(</span><span class="num" id="6859225">0</span><span class="op" id="6859226">,</span>&nbsp;<span class="num" id="6859228">0</span><span class="op" id="6859229">,</span>&nbsp;<span class="num" id="6859231">50</span><span class="op" id="6859233">,</span>&nbsp;<span class="num" id="6859235">100</span><span class="op" id="6859238">)</span><span class="op" id="6859239">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859243">image</span><span class="op" id="6859248">.</span><span class="ident" id="6859249">Rect</span><span class="op" id="6859253">(</span><span class="num" id="6859254">20</span><span class="op" id="6859256">,</span>&nbsp;<span class="num" id="6859258">20</span><span class="op" id="6859260">,</span>&nbsp;<span class="num" id="6859262">80</span><span class="op" id="6859264">,</span>&nbsp;<span class="num" id="6859266">80</span><span class="op" id="6859268">)</span><span class="op" id="6859269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859273">image</span><span class="op" id="6859278">.</span><span class="ident" id="6859279">ZR</span><span class="op" id="6859281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859285">image</span><span class="op" id="6859290">.</span><span class="ident" id="6859291">Pt</span><span class="op" id="6859293">(</span><span class="num" id="6859294">15</span><span class="op" id="6859296">,</span>&nbsp;<span class="num" id="6859298">91</span><span class="op" id="6859300">)</span><span class="op" id="6859301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859305">image</span><span class="op" id="6859310">.</span><span class="ident" id="6859311">ZP</span><span class="op" id="6859313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6859317">true</span><span class="op" id="6859321">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859325">image</span><span class="op" id="6859330">.</span><span class="ident" id="6859331">ZR</span><span class="op" id="6859333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859337">image</span><span class="op" id="6859342">.</span><span class="ident" id="6859343">Pt</span><span class="op" id="6859345">(</span><span class="num" id="6859346">15</span><span class="op" id="6859348">,</span>&nbsp;<span class="num" id="6859350">91</span><span class="op" id="6859352">)</span><span class="op" id="6859353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859357">image</span><span class="op" id="6859362">.</span><span class="ident" id="6859363">ZP</span><span class="op" id="6859365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859368">}</span><span class="op" id="6859369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859372">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6859376">&#34;clip&nbsp;dr&nbsp;and&nbsp;sr,&nbsp;sp&nbsp;inside&nbsp;sr&#34;</span><span class="op" id="6859406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859410">image</span><span class="op" id="6859415">.</span><span class="ident" id="6859416">Rect</span><span class="op" id="6859420">(</span><span class="num" id="6859421">0</span><span class="op" id="6859422">,</span>&nbsp;<span class="num" id="6859424">0</span><span class="op" id="6859425">,</span>&nbsp;<span class="num" id="6859427">100</span><span class="op" id="6859430">,</span>&nbsp;<span class="num" id="6859432">100</span><span class="op" id="6859435">)</span><span class="op" id="6859436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859440">image</span><span class="op" id="6859445">.</span><span class="ident" id="6859446">Rect</span><span class="op" id="6859450">(</span><span class="num" id="6859451">0</span><span class="op" id="6859452">,</span>&nbsp;<span class="num" id="6859454">0</span><span class="op" id="6859455">,</span>&nbsp;<span class="num" id="6859457">50</span><span class="op" id="6859459">,</span>&nbsp;<span class="num" id="6859461">100</span><span class="op" id="6859464">)</span><span class="op" id="6859465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859469">image</span><span class="op" id="6859474">.</span><span class="ident" id="6859475">Rect</span><span class="op" id="6859479">(</span><span class="num" id="6859480">20</span><span class="op" id="6859482">,</span>&nbsp;<span class="num" id="6859484">20</span><span class="op" id="6859486">,</span>&nbsp;<span class="num" id="6859488">80</span><span class="op" id="6859490">,</span>&nbsp;<span class="num" id="6859492">80</span><span class="op" id="6859494">)</span><span class="op" id="6859495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859499">image</span><span class="op" id="6859504">.</span><span class="ident" id="6859505">ZR</span><span class="op" id="6859507">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859511">image</span><span class="op" id="6859516">.</span><span class="ident" id="6859517">Pt</span><span class="op" id="6859519">(</span><span class="num" id="6859520">44</span><span class="op" id="6859522">,</span>&nbsp;<span class="num" id="6859524">33</span><span class="op" id="6859526">)</span><span class="op" id="6859527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859531">image</span><span class="op" id="6859536">.</span><span class="ident" id="6859537">ZP</span><span class="op" id="6859539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6859543">true</span><span class="op" id="6859547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859551">image</span><span class="op" id="6859556">.</span><span class="ident" id="6859557">Rect</span><span class="op" id="6859561">(</span><span class="num" id="6859562">0</span><span class="op" id="6859563">,</span>&nbsp;<span class="num" id="6859565">0</span><span class="op" id="6859566">,</span>&nbsp;<span class="num" id="6859568">36</span><span class="op" id="6859570">,</span>&nbsp;<span class="num" id="6859572">47</span><span class="op" id="6859574">)</span><span class="op" id="6859575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859579">image</span><span class="op" id="6859584">.</span><span class="ident" id="6859585">Pt</span><span class="op" id="6859587">(</span><span class="num" id="6859588">44</span><span class="op" id="6859590">,</span>&nbsp;<span class="num" id="6859592">33</span><span class="op" id="6859594">)</span><span class="op" id="6859595">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859599">image</span><span class="op" id="6859604">.</span><span class="ident" id="6859605">ZP</span><span class="op" id="6859607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859610">}</span><span class="op" id="6859611">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6859615">//&nbsp;The&nbsp;following&nbsp;tests&nbsp;all&nbsp;have&nbsp;a&nbsp;non-nil&nbsp;mask.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859664">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6859668">&#34;basic&nbsp;mask&#34;</span><span class="op" id="6859680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859684">image</span><span class="op" id="6859689">.</span><span class="ident" id="6859690">Rect</span><span class="op" id="6859694">(</span><span class="num" id="6859695">0</span><span class="op" id="6859696">,</span>&nbsp;<span class="num" id="6859698">0</span><span class="op" id="6859699">,</span>&nbsp;<span class="num" id="6859701">80</span><span class="op" id="6859703">,</span>&nbsp;<span class="num" id="6859705">80</span><span class="op" id="6859707">)</span><span class="op" id="6859708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859712">image</span><span class="op" id="6859717">.</span><span class="ident" id="6859718">Rect</span><span class="op" id="6859722">(</span><span class="num" id="6859723">20</span><span class="op" id="6859725">,</span>&nbsp;<span class="num" id="6859727">0</span><span class="op" id="6859728">,</span>&nbsp;<span class="num" id="6859730">100</span><span class="op" id="6859733">,</span>&nbsp;<span class="num" id="6859735">80</span><span class="op" id="6859737">)</span><span class="op" id="6859738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859742">image</span><span class="op" id="6859747">.</span><span class="ident" id="6859748">Rect</span><span class="op" id="6859752">(</span><span class="num" id="6859753">0</span><span class="op" id="6859754">,</span>&nbsp;<span class="num" id="6859756">0</span><span class="op" id="6859757">,</span>&nbsp;<span class="num" id="6859759">50</span><span class="op" id="6859761">,</span>&nbsp;<span class="num" id="6859763">49</span><span class="op" id="6859765">)</span><span class="op" id="6859766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859770">image</span><span class="op" id="6859775">.</span><span class="ident" id="6859776">Rect</span><span class="op" id="6859780">(</span><span class="num" id="6859781">0</span><span class="op" id="6859782">,</span>&nbsp;<span class="num" id="6859784">0</span><span class="op" id="6859785">,</span>&nbsp;<span class="num" id="6859787">46</span><span class="op" id="6859789">,</span>&nbsp;<span class="num" id="6859791">47</span><span class="op" id="6859793">)</span><span class="op" id="6859794">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859798">image</span><span class="op" id="6859803">.</span><span class="ident" id="6859804">ZP</span><span class="op" id="6859806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859810">image</span><span class="op" id="6859815">.</span><span class="ident" id="6859816">ZP</span><span class="op" id="6859818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6859822">false</span><span class="op" id="6859827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859831">image</span><span class="op" id="6859836">.</span><span class="ident" id="6859837">Rect</span><span class="op" id="6859841">(</span><span class="num" id="6859842">20</span><span class="op" id="6859844">,</span>&nbsp;<span class="num" id="6859846">0</span><span class="op" id="6859847">,</span>&nbsp;<span class="num" id="6859849">46</span><span class="op" id="6859851">,</span>&nbsp;<span class="num" id="6859853">47</span><span class="op" id="6859855">)</span><span class="op" id="6859856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859860">image</span><span class="op" id="6859865">.</span><span class="ident" id="6859866">Pt</span><span class="op" id="6859868">(</span><span class="num" id="6859869">20</span><span class="op" id="6859871">,</span>&nbsp;<span class="num" id="6859873">0</span><span class="op" id="6859874">)</span><span class="op" id="6859875">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859879">image</span><span class="op" id="6859884">.</span><span class="ident" id="6859885">Pt</span><span class="op" id="6859887">(</span><span class="num" id="6859888">20</span><span class="op" id="6859890">,</span>&nbsp;<span class="num" id="6859892">0</span><span class="op" id="6859893">)</span><span class="op" id="6859894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859897">}</span><span class="op" id="6859898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6859901">//&nbsp;TODO(nigeltao):&nbsp;write&nbsp;more&nbsp;tests.</span><br>
<span class="lineno"></span><span class="op" id="6859938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="6859941">func</span>&nbsp;<span class="ident" id="6859946">TestClip</span><span class="op" id="6859954">(</span><span class="ident" id="6859955">t</span>&nbsp;<span class="op" id="6859957">*</span><span class="ident" id="6859958">testing</span><span class="op" id="6859965">.</span><span class="ident" id="6859966">T</span><span class="op" id="6859967">)</span>&nbsp;<span class="op" id="6859969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859972">dst0</span>&nbsp;<span class="op" id="6859977">:=</span>&nbsp;<span class="ident" id="6859980">image</span><span class="op" id="6859985">.</span><span class="ident" id="6859986">NewRGBA</span><span class="op" id="6859993">(</span><span class="ident" id="6859994">image</span><span class="op" id="6859999">.</span><span class="ident" id="6860000">Rect</span><span class="op" id="6860004">(</span><span class="num" id="6860005">0</span><span class="op" id="6860006">,</span>&nbsp;<span class="num" id="6860008">0</span><span class="op" id="6860009">,</span>&nbsp;<span class="num" id="6860011">100</span><span class="op" id="6860014">,</span>&nbsp;<span class="num" id="6860016">100</span><span class="op" id="6860019">)</span><span class="op" id="6860020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860023">src0</span>&nbsp;<span class="op" id="6860028">:=</span>&nbsp;<span class="ident" id="6860031">image</span><span class="op" id="6860036">.</span><span class="ident" id="6860037">NewRGBA</span><span class="op" id="6860044">(</span><span class="ident" id="6860045">image</span><span class="op" id="6860050">.</span><span class="ident" id="6860051">Rect</span><span class="op" id="6860055">(</span><span class="num" id="6860056">0</span><span class="op" id="6860057">,</span>&nbsp;<span class="num" id="6860059">0</span><span class="op" id="6860060">,</span>&nbsp;<span class="num" id="6860062">100</span><span class="op" id="6860065">,</span>&nbsp;<span class="num" id="6860067">100</span><span class="op" id="6860070">)</span><span class="op" id="6860071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860074">mask0</span>&nbsp;<span class="op" id="6860080">:=</span>&nbsp;<span class="ident" id="6860083">image</span><span class="op" id="6860088">.</span><span class="ident" id="6860089">NewRGBA</span><span class="op" id="6860096">(</span><span class="ident" id="6860097">image</span><span class="op" id="6860102">.</span><span class="ident" id="6860103">Rect</span><span class="op" id="6860107">(</span><span class="num" id="6860108">0</span><span class="op" id="6860109">,</span>&nbsp;<span class="num" id="6860111">0</span><span class="op" id="6860112">,</span>&nbsp;<span class="num" id="6860114">100</span><span class="op" id="6860117">,</span>&nbsp;<span class="num" id="6860119">100</span><span class="op" id="6860122">)</span><span class="op" id="6860123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860126">for</span>&nbsp;<span class="ident" id="6860130">_</span><span class="op" id="6860131">,</span>&nbsp;<span class="ident" id="6860133">c</span>&nbsp;<span class="op" id="6860135">:=</span>&nbsp;<span class="keyword" id="6860138">range</span>&nbsp;<span class="ident" id="6860144">clipTests</span>&nbsp;<span class="op" id="6860154">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860158">dst</span>&nbsp;<span class="op" id="6860162">:=</span>&nbsp;<span class="ident" id="6860165">dst0</span><span class="op" id="6860169">.</span><span class="ident" id="6860170">SubImage</span><span class="op" id="6860178">(</span><span class="ident" id="6860179">c</span><span class="op" id="6860180">.</span><span class="ident" id="6860181">dr</span><span class="op" id="6860183">)</span><span class="op" id="6860184">.</span><span class="op" id="6860185">(</span><span class="op" id="6860186">*</span><span class="ident" id="6860187">image</span><span class="op" id="6860192">.</span><span class="ident" id="6860193">RGBA</span><span class="op" id="6860197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860201">src</span>&nbsp;<span class="op" id="6860205">:=</span>&nbsp;<span class="ident" id="6860208">src0</span><span class="op" id="6860212">.</span><span class="ident" id="6860213">SubImage</span><span class="op" id="6860221">(</span><span class="ident" id="6860222">c</span><span class="op" id="6860223">.</span><span class="ident" id="6860224">sr</span><span class="op" id="6860226">)</span><span class="op" id="6860227">.</span><span class="op" id="6860228">(</span><span class="op" id="6860229">*</span><span class="ident" id="6860230">image</span><span class="op" id="6860235">.</span><span class="ident" id="6860236">RGBA</span><span class="op" id="6860240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860244">var</span>&nbsp;<span class="ident" id="6860248">mask</span>&nbsp;<span class="ident" id="6860253">image</span><span class="op" id="6860258">.</span><span class="ident" id="6860259">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860267">if</span>&nbsp;<span class="op" id="6860270">!</span><span class="ident" id="6860271">c</span><span class="op" id="6860272">.</span><span class="ident" id="6860273">nilMask</span>&nbsp;<span class="op" id="6860281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860286">mask</span>&nbsp;<span class="op" id="6860291">=</span>&nbsp;<span class="ident" id="6860293">mask0</span><span class="op" id="6860298">.</span><span class="ident" id="6860299">SubImage</span><span class="op" id="6860307">(</span><span class="ident" id="6860308">c</span><span class="op" id="6860309">.</span><span class="ident" id="6860310">mr</span><span class="op" id="6860312">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860320">r</span><span class="op" id="6860321">,</span>&nbsp;<span class="ident" id="6860323">sp</span><span class="op" id="6860325">,</span>&nbsp;<span class="ident" id="6860327">mp</span>&nbsp;<span class="op" id="6860330">:=</span>&nbsp;<span class="ident" id="6860333">c</span><span class="op" id="6860334">.</span><span class="ident" id="6860335">r</span><span class="op" id="6860336">,</span>&nbsp;<span class="ident" id="6860338">c</span><span class="op" id="6860339">.</span><span class="ident" id="6860340">sp</span><span class="op" id="6860342">,</span>&nbsp;<span class="ident" id="6860344">c</span><span class="op" id="6860345">.</span><span class="ident" id="6860346">mp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860351">clip</span><span class="op" id="6860355">(</span><span class="ident" id="6860356">dst</span><span class="op" id="6860359">,</span>&nbsp;<span class="op" id="6860361">&amp;</span><span class="ident" id="6860362">r</span><span class="op" id="6860363">,</span>&nbsp;<span class="ident" id="6860365">src</span><span class="op" id="6860368">,</span>&nbsp;<span class="op" id="6860370">&amp;</span><span class="ident" id="6860371">sp</span><span class="op" id="6860373">,</span>&nbsp;<span class="ident" id="6860375">mask</span><span class="op" id="6860379">,</span>&nbsp;<span class="op" id="6860381">&amp;</span><span class="ident" id="6860382">mp</span><span class="op" id="6860384">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860389">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;actual&nbsp;results&nbsp;equal&nbsp;the&nbsp;expected&nbsp;results.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860452">if</span>&nbsp;<span class="op" id="6860455">!</span><span class="ident" id="6860456">c</span><span class="op" id="6860457">.</span><span class="ident" id="6860458">r0</span><span class="op" id="6860460">.</span><span class="ident" id="6860461">Eq</span><span class="op" id="6860463">(</span><span class="ident" id="6860464">r</span><span class="op" id="6860465">)</span>&nbsp;<span class="op" id="6860467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860472">t</span><span class="op" id="6860473">.</span><span class="ident" id="6860474">Errorf</span><span class="op" id="6860480">(</span><span class="string" id="6860481">&#34;%s:&nbsp;clip&nbsp;rectangle&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6860516">,</span>&nbsp;<span class="ident" id="6860518">c</span><span class="op" id="6860519">.</span><span class="ident" id="6860520">desc</span><span class="op" id="6860524">,</span>&nbsp;<span class="ident" id="6860526">c</span><span class="op" id="6860527">.</span><span class="ident" id="6860528">r0</span><span class="op" id="6860530">,</span>&nbsp;<span class="ident" id="6860532">r</span><span class="op" id="6860533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860538">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860553">if</span>&nbsp;<span class="op" id="6860556">!</span><span class="ident" id="6860557">c</span><span class="op" id="6860558">.</span><span class="ident" id="6860559">sp0</span><span class="op" id="6860562">.</span><span class="ident" id="6860563">Eq</span><span class="op" id="6860565">(</span><span class="ident" id="6860566">sp</span><span class="op" id="6860568">)</span>&nbsp;<span class="op" id="6860570">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860575">t</span><span class="op" id="6860576">.</span><span class="ident" id="6860577">Errorf</span><span class="op" id="6860583">(</span><span class="string" id="6860584">&#34;%s:&nbsp;sp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6860607">,</span>&nbsp;<span class="ident" id="6860609">c</span><span class="op" id="6860610">.</span><span class="ident" id="6860611">desc</span><span class="op" id="6860615">,</span>&nbsp;<span class="ident" id="6860617">c</span><span class="op" id="6860618">.</span><span class="ident" id="6860619">sp0</span><span class="op" id="6860622">,</span>&nbsp;<span class="ident" id="6860624">sp</span><span class="op" id="6860626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860631">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860646">if</span>&nbsp;<span class="op" id="6860649">!</span><span class="ident" id="6860650">c</span><span class="op" id="6860651">.</span><span class="ident" id="6860652">nilMask</span>&nbsp;<span class="op" id="6860660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860665">if</span>&nbsp;<span class="op" id="6860668">!</span><span class="ident" id="6860669">c</span><span class="op" id="6860670">.</span><span class="ident" id="6860671">mp0</span><span class="op" id="6860674">.</span><span class="ident" id="6860675">Eq</span><span class="op" id="6860677">(</span><span class="ident" id="6860678">mp</span><span class="op" id="6860680">)</span>&nbsp;<span class="op" id="6860682">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860688">t</span><span class="op" id="6860689">.</span><span class="ident" id="6860690">Errorf</span><span class="op" id="6860696">(</span><span class="string" id="6860697">&#34;%s:&nbsp;mp&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6860720">,</span>&nbsp;<span class="ident" id="6860722">c</span><span class="op" id="6860723">.</span><span class="ident" id="6860724">desc</span><span class="op" id="6860728">,</span>&nbsp;<span class="ident" id="6860730">c</span><span class="op" id="6860731">.</span><span class="ident" id="6860732">mp0</span><span class="op" id="6860735">,</span>&nbsp;<span class="ident" id="6860737">mp</span><span class="op" id="6860739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860745">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860766">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;clipped&nbsp;rectangle&nbsp;is&nbsp;contained&nbsp;by&nbsp;the&nbsp;dst&nbsp;/&nbsp;src&nbsp;/&nbsp;mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860841">//&nbsp;rectangles,&nbsp;in&nbsp;their&nbsp;respective&nbsp;co-ordinate&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860898">if</span>&nbsp;<span class="op" id="6860901">!</span><span class="ident" id="6860902">r</span><span class="op" id="6860903">.</span><span class="ident" id="6860904">In</span><span class="op" id="6860906">(</span><span class="ident" id="6860907">c</span><span class="op" id="6860908">.</span><span class="ident" id="6860909">dr</span><span class="op" id="6860911">)</span>&nbsp;<span class="op" id="6860913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860918">t</span><span class="op" id="6860919">.</span><span class="ident" id="6860920">Errorf</span><span class="op" id="6860926">(</span><span class="string" id="6860927">&#34;%s:&nbsp;c.dr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;r&nbsp;%v&#34;</span><span class="op" id="6860962">,</span>&nbsp;<span class="ident" id="6860964">c</span><span class="op" id="6860965">.</span><span class="ident" id="6860966">desc</span><span class="op" id="6860970">,</span>&nbsp;<span class="ident" id="6860972">c</span><span class="op" id="6860973">.</span><span class="ident" id="6860974">dr</span><span class="op" id="6860976">,</span>&nbsp;<span class="ident" id="6860978">r</span><span class="op" id="6860979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860983">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860987">//&nbsp;sr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;src&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861041">sr</span>&nbsp;<span class="op" id="6861044">:=</span>&nbsp;<span class="ident" id="6861047">r</span><span class="op" id="6861048">.</span><span class="ident" id="6861049">Add</span><span class="op" id="6861052">(</span><span class="ident" id="6861053">c</span><span class="op" id="6861054">.</span><span class="ident" id="6861055">sp</span><span class="op" id="6861057">.</span><span class="ident" id="6861058">Sub</span><span class="op" id="6861061">(</span><span class="ident" id="6861062">c</span><span class="op" id="6861063">.</span><span class="ident" id="6861064">dr</span><span class="op" id="6861066">.</span><span class="ident" id="6861067">Min</span><span class="op" id="6861070">)</span><span class="op" id="6861071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861075">if</span>&nbsp;<span class="op" id="6861078">!</span><span class="ident" id="6861079">sr</span><span class="op" id="6861081">.</span><span class="ident" id="6861082">In</span><span class="op" id="6861084">(</span><span class="ident" id="6861085">c</span><span class="op" id="6861086">.</span><span class="ident" id="6861087">sr</span><span class="op" id="6861089">)</span>&nbsp;<span class="op" id="6861091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861096">t</span><span class="op" id="6861097">.</span><span class="ident" id="6861098">Errorf</span><span class="op" id="6861104">(</span><span class="string" id="6861105">&#34;%s:&nbsp;c.sr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;sr&nbsp;%v&#34;</span><span class="op" id="6861141">,</span>&nbsp;<span class="ident" id="6861143">c</span><span class="op" id="6861144">.</span><span class="ident" id="6861145">desc</span><span class="op" id="6861149">,</span>&nbsp;<span class="ident" id="6861151">c</span><span class="op" id="6861152">.</span><span class="ident" id="6861153">sr</span><span class="op" id="6861155">,</span>&nbsp;<span class="ident" id="6861157">sr</span><span class="op" id="6861159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861163">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861167">if</span>&nbsp;<span class="op" id="6861170">!</span><span class="ident" id="6861171">c</span><span class="op" id="6861172">.</span><span class="ident" id="6861173">nilMask</span>&nbsp;<span class="op" id="6861181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6861186">//&nbsp;mr&nbsp;is&nbsp;r&nbsp;translated&nbsp;into&nbsp;mask&#39;s&nbsp;co-ordinate&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861242">mr</span>&nbsp;<span class="op" id="6861245">:=</span>&nbsp;<span class="ident" id="6861248">r</span><span class="op" id="6861249">.</span><span class="ident" id="6861250">Add</span><span class="op" id="6861253">(</span><span class="ident" id="6861254">c</span><span class="op" id="6861255">.</span><span class="ident" id="6861256">mp</span><span class="op" id="6861258">.</span><span class="ident" id="6861259">Sub</span><span class="op" id="6861262">(</span><span class="ident" id="6861263">c</span><span class="op" id="6861264">.</span><span class="ident" id="6861265">dr</span><span class="op" id="6861267">.</span><span class="ident" id="6861268">Min</span><span class="op" id="6861271">)</span><span class="op" id="6861272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861277">if</span>&nbsp;<span class="op" id="6861280">!</span><span class="ident" id="6861281">mr</span><span class="op" id="6861283">.</span><span class="ident" id="6861284">In</span><span class="op" id="6861286">(</span><span class="ident" id="6861287">c</span><span class="op" id="6861288">.</span><span class="ident" id="6861289">mr</span><span class="op" id="6861291">)</span>&nbsp;<span class="op" id="6861293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861299">t</span><span class="op" id="6861300">.</span><span class="ident" id="6861301">Errorf</span><span class="op" id="6861307">(</span><span class="string" id="6861308">&#34;%s:&nbsp;c.mr&nbsp;%v&nbsp;does&nbsp;not&nbsp;contain&nbsp;mr&nbsp;%v&#34;</span><span class="op" id="6861344">,</span>&nbsp;<span class="ident" id="6861346">c</span><span class="op" id="6861347">.</span><span class="ident" id="6861348">desc</span><span class="op" id="6861352">,</span>&nbsp;<span class="ident" id="6861354">c</span><span class="op" id="6861355">.</span><span class="ident" id="6861356">mr</span><span class="op" id="6861358">,</span>&nbsp;<span class="ident" id="6861360">mr</span><span class="op" id="6861362">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861374">}</span><br>
<span class="lineno"></span><span class="op" id="6861376">}</span>
</div>
</body>
</html>
