<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7050246">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7050301">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7050355">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7050406">package</span>&nbsp;<span class="ident" id="7050414">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7050422">import</span>&nbsp;<span class="op" id="7050429">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050432">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050441">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050458">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050479">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050490">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7050500">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7050503">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7050548">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7050575">func</span>&nbsp;<span class="ident" id="7050580">RemoveAll</span><span class="op" id="7050589">(</span><span class="op" id="7050590">)</span>&nbsp;<span class="op" id="7050592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050595">mutex</span><span class="op" id="7050600">.</span><span class="ident" id="7050601">Lock</span><span class="op" id="7050605">(</span><span class="op" id="7050606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7050609">defer</span>&nbsp;<span class="ident" id="7050615">mutex</span><span class="op" id="7050620">.</span><span class="ident" id="7050621">Unlock</span><span class="op" id="7050627">(</span><span class="op" id="7050628">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050631">vars</span>&nbsp;<span class="op" id="7050636">=</span>&nbsp;<span class="builtinfunc" id="7050638">make</span><span class="op" id="7050642">(</span><span class="keyword" id="7050643">map</span><span class="op" id="7050646">[</span><span class="builtintype" id="7050647">string</span><span class="op" id="7050653">]</span><span class="ident" id="7050654">Var</span><span class="op" id="7050657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050660">varKeys</span>&nbsp;<span class="op" id="7050668">=</span>&nbsp;<span class="builtintype" id="7050670">nil</span><br>
<span class="lineno"></span><span class="op" id="7050674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7050677">func</span>&nbsp;<span class="ident" id="7050682">TestInt</span><span class="op" id="7050689">(</span><span class="ident" id="7050690">t</span>&nbsp;<span class="op" id="7050692">*</span><span class="ident" id="7050693">testing</span><span class="op" id="7050700">.</span><span class="ident" id="7050701">T</span><span class="op" id="7050702">)</span>&nbsp;<span class="op" id="7050704">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050707">RemoveAll</span><span class="op" id="7050716">(</span><span class="op" id="7050717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050720">reqs</span>&nbsp;<span class="op" id="7050725">:=</span>&nbsp;<span class="ident" id="7050728">NewInt</span><span class="op" id="7050734">(</span><span class="string" id="7050735">&#34;requests&#34;</span><span class="op" id="7050745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7050748">if</span>&nbsp;<span class="ident" id="7050751">reqs</span><span class="op" id="7050755">.</span><span class="ident" id="7050756">i</span>&nbsp;<span class="op" id="7050758">!=</span>&nbsp;<span class="num" id="7050761">0</span>&nbsp;<span class="op" id="7050763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050767">t</span><span class="op" id="7050768">.</span><span class="ident" id="7050769">Errorf</span><span class="op" id="7050775">(</span><span class="string" id="7050776">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7050797">,</span>&nbsp;<span class="ident" id="7050799">reqs</span><span class="op" id="7050803">.</span><span class="ident" id="7050804">i</span><span class="op" id="7050805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7050808">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7050811">if</span>&nbsp;<span class="ident" id="7050814">reqs</span>&nbsp;<span class="op" id="7050819">!=</span>&nbsp;<span class="ident" id="7050822">Get</span><span class="op" id="7050825">(</span><span class="string" id="7050826">&#34;requests&#34;</span><span class="op" id="7050836">)</span><span class="op" id="7050837">.</span><span class="op" id="7050838">(</span><span class="op" id="7050839">*</span><span class="ident" id="7050840">Int</span><span class="op" id="7050843">)</span>&nbsp;<span class="op" id="7050845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050849">t</span><span class="op" id="7050850">.</span><span class="ident" id="7050851">Errorf</span><span class="op" id="7050857">(</span><span class="string" id="7050858">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7050873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7050876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050880">reqs</span><span class="op" id="7050884">.</span><span class="ident" id="7050885">Add</span><span class="op" id="7050888">(</span><span class="num" id="7050889">1</span><span class="op" id="7050890">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050893">reqs</span><span class="op" id="7050897">.</span><span class="ident" id="7050898">Add</span><span class="op" id="7050901">(</span><span class="num" id="7050902">3</span><span class="op" id="7050903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7050906">if</span>&nbsp;<span class="ident" id="7050909">reqs</span><span class="op" id="7050913">.</span><span class="ident" id="7050914">i</span>&nbsp;<span class="op" id="7050916">!=</span>&nbsp;<span class="num" id="7050919">4</span>&nbsp;<span class="op" id="7050921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050925">t</span><span class="op" id="7050926">.</span><span class="ident" id="7050927">Errorf</span><span class="op" id="7050933">(</span><span class="string" id="7050934">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7050955">,</span>&nbsp;<span class="ident" id="7050957">reqs</span><span class="op" id="7050961">.</span><span class="ident" id="7050962">i</span><span class="op" id="7050963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7050966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7050970">if</span>&nbsp;<span class="ident" id="7050973">s</span>&nbsp;<span class="op" id="7050975">:=</span>&nbsp;<span class="ident" id="7050978">reqs</span><span class="op" id="7050982">.</span><span class="ident" id="7050983">String</span><span class="op" id="7050989">(</span><span class="op" id="7050990">)</span><span class="op" id="7050991">;</span>&nbsp;<span class="ident" id="7050993">s</span>&nbsp;<span class="op" id="7050995">!=</span>&nbsp;<span class="string" id="7050998">&#34;4&#34;</span>&nbsp;<span class="op" id="7051002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051006">t</span><span class="op" id="7051007">.</span><span class="ident" id="7051008">Errorf</span><span class="op" id="7051014">(</span><span class="string" id="7051015">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7051047">,</span>&nbsp;<span class="ident" id="7051049">s</span><span class="op" id="7051050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051057">reqs</span><span class="op" id="7051061">.</span><span class="ident" id="7051062">Set</span><span class="op" id="7051065">(</span><span class="op" id="7051066">-</span><span class="num" id="7051067">2</span><span class="op" id="7051068">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051071">if</span>&nbsp;<span class="ident" id="7051074">reqs</span><span class="op" id="7051078">.</span><span class="ident" id="7051079">i</span>&nbsp;<span class="op" id="7051081">!=</span>&nbsp;<span class="op" id="7051084">-</span><span class="num" id="7051085">2</span>&nbsp;<span class="op" id="7051087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051091">t</span><span class="op" id="7051092">.</span><span class="ident" id="7051093">Errorf</span><span class="op" id="7051099">(</span><span class="string" id="7051100">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7051122">,</span>&nbsp;<span class="ident" id="7051124">reqs</span><span class="op" id="7051128">.</span><span class="ident" id="7051129">i</span><span class="op" id="7051130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051133">}</span><br>
<span class="lineno"></span><span class="op" id="7051135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7051138">func</span>&nbsp;<span class="ident" id="7051143">TestFloat</span><span class="op" id="7051152">(</span><span class="ident" id="7051153">t</span>&nbsp;<span class="op" id="7051155">*</span><span class="ident" id="7051156">testing</span><span class="op" id="7051163">.</span><span class="ident" id="7051164">T</span><span class="op" id="7051165">)</span>&nbsp;<span class="op" id="7051167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051170">RemoveAll</span><span class="op" id="7051179">(</span><span class="op" id="7051180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051183">reqs</span>&nbsp;<span class="op" id="7051188">:=</span>&nbsp;<span class="ident" id="7051191">NewFloat</span><span class="op" id="7051199">(</span><span class="string" id="7051200">&#34;requests-float&#34;</span><span class="op" id="7051216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051219">if</span>&nbsp;<span class="ident" id="7051222">reqs</span><span class="op" id="7051226">.</span><span class="ident" id="7051227">f</span>&nbsp;<span class="op" id="7051229">!=</span>&nbsp;<span class="num" id="7051232">0.0</span>&nbsp;<span class="op" id="7051236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051240">t</span><span class="op" id="7051241">.</span><span class="ident" id="7051242">Errorf</span><span class="op" id="7051248">(</span><span class="string" id="7051249">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7051270">,</span>&nbsp;<span class="ident" id="7051272">reqs</span><span class="op" id="7051276">.</span><span class="ident" id="7051277">f</span><span class="op" id="7051278">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051284">if</span>&nbsp;<span class="ident" id="7051287">reqs</span>&nbsp;<span class="op" id="7051292">!=</span>&nbsp;<span class="ident" id="7051295">Get</span><span class="op" id="7051298">(</span><span class="string" id="7051299">&#34;requests-float&#34;</span><span class="op" id="7051315">)</span><span class="op" id="7051316">.</span><span class="op" id="7051317">(</span><span class="op" id="7051318">*</span><span class="ident" id="7051319">Float</span><span class="op" id="7051324">)</span>&nbsp;<span class="op" id="7051326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051330">t</span><span class="op" id="7051331">.</span><span class="ident" id="7051332">Errorf</span><span class="op" id="7051338">(</span><span class="string" id="7051339">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7051354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051361">reqs</span><span class="op" id="7051365">.</span><span class="ident" id="7051366">Add</span><span class="op" id="7051369">(</span><span class="num" id="7051370">1.5</span><span class="op" id="7051373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051376">reqs</span><span class="op" id="7051380">.</span><span class="ident" id="7051381">Add</span><span class="op" id="7051384">(</span><span class="num" id="7051385">1.25</span><span class="op" id="7051389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051392">if</span>&nbsp;<span class="ident" id="7051395">reqs</span><span class="op" id="7051399">.</span><span class="ident" id="7051400">f</span>&nbsp;<span class="op" id="7051402">!=</span>&nbsp;<span class="num" id="7051405">2.75</span>&nbsp;<span class="op" id="7051410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051414">t</span><span class="op" id="7051415">.</span><span class="ident" id="7051416">Errorf</span><span class="op" id="7051422">(</span><span class="string" id="7051423">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7051447">,</span>&nbsp;<span class="ident" id="7051449">reqs</span><span class="op" id="7051453">.</span><span class="ident" id="7051454">f</span><span class="op" id="7051455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051458">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051462">if</span>&nbsp;<span class="ident" id="7051465">s</span>&nbsp;<span class="op" id="7051467">:=</span>&nbsp;<span class="ident" id="7051470">reqs</span><span class="op" id="7051474">.</span><span class="ident" id="7051475">String</span><span class="op" id="7051481">(</span><span class="op" id="7051482">)</span><span class="op" id="7051483">;</span>&nbsp;<span class="ident" id="7051485">s</span>&nbsp;<span class="op" id="7051487">!=</span>&nbsp;<span class="string" id="7051490">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7051497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051501">t</span><span class="op" id="7051502">.</span><span class="ident" id="7051503">Errorf</span><span class="op" id="7051509">(</span><span class="string" id="7051510">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7051545">,</span>&nbsp;<span class="ident" id="7051547">s</span><span class="op" id="7051548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051555">reqs</span><span class="op" id="7051559">.</span><span class="ident" id="7051560">Add</span><span class="op" id="7051563">(</span><span class="op" id="7051564">-</span><span class="num" id="7051565">2</span><span class="op" id="7051566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051569">if</span>&nbsp;<span class="ident" id="7051572">reqs</span><span class="op" id="7051576">.</span><span class="ident" id="7051577">f</span>&nbsp;<span class="op" id="7051579">!=</span>&nbsp;<span class="num" id="7051582">0.75</span>&nbsp;<span class="op" id="7051587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051591">t</span><span class="op" id="7051592">.</span><span class="ident" id="7051593">Errorf</span><span class="op" id="7051599">(</span><span class="string" id="7051600">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7051624">,</span>&nbsp;<span class="ident" id="7051626">reqs</span><span class="op" id="7051630">.</span><span class="ident" id="7051631">f</span><span class="op" id="7051632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051635">}</span><br>
<span class="lineno"></span><span class="op" id="7051637">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7051640">func</span>&nbsp;<span class="ident" id="7051645">TestString</span><span class="op" id="7051655">(</span><span class="ident" id="7051656">t</span>&nbsp;<span class="op" id="7051658">*</span><span class="ident" id="7051659">testing</span><span class="op" id="7051666">.</span><span class="ident" id="7051667">T</span><span class="op" id="7051668">)</span>&nbsp;<span class="op" id="7051670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051673">RemoveAll</span><span class="op" id="7051682">(</span><span class="op" id="7051683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051686">name</span>&nbsp;<span class="op" id="7051691">:=</span>&nbsp;<span class="ident" id="7051694">NewString</span><span class="op" id="7051703">(</span><span class="string" id="7051704">&#34;my-name&#34;</span><span class="op" id="7051713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051716">if</span>&nbsp;<span class="ident" id="7051719">name</span><span class="op" id="7051723">.</span><span class="ident" id="7051724">s</span>&nbsp;<span class="op" id="7051726">!=</span>&nbsp;<span class="string" id="7051729">&#34;&#34;</span>&nbsp;<span class="op" id="7051732">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051736">t</span><span class="op" id="7051737">.</span><span class="ident" id="7051738">Errorf</span><span class="op" id="7051744">(</span><span class="string" id="7051745">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7051769">,</span>&nbsp;<span class="ident" id="7051771">name</span><span class="op" id="7051775">.</span><span class="ident" id="7051776">s</span><span class="op" id="7051777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051784">name</span><span class="op" id="7051788">.</span><span class="ident" id="7051789">Set</span><span class="op" id="7051792">(</span><span class="string" id="7051793">&#34;Mike&#34;</span><span class="op" id="7051799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051802">if</span>&nbsp;<span class="ident" id="7051805">name</span><span class="op" id="7051809">.</span><span class="ident" id="7051810">s</span>&nbsp;<span class="op" id="7051812">!=</span>&nbsp;<span class="string" id="7051815">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7051822">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051826">t</span><span class="op" id="7051827">.</span><span class="ident" id="7051828">Errorf</span><span class="op" id="7051834">(</span><span class="string" id="7051835">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7051863">,</span>&nbsp;<span class="ident" id="7051865">name</span><span class="op" id="7051869">.</span><span class="ident" id="7051870">s</span><span class="op" id="7051871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7051878">if</span>&nbsp;<span class="ident" id="7051881">s</span>&nbsp;<span class="op" id="7051883">:=</span>&nbsp;<span class="ident" id="7051886">name</span><span class="op" id="7051890">.</span><span class="ident" id="7051891">String</span><span class="op" id="7051897">(</span><span class="op" id="7051898">)</span><span class="op" id="7051899">;</span>&nbsp;<span class="ident" id="7051901">s</span>&nbsp;<span class="op" id="7051903">!=</span>&nbsp;<span class="string" id="7051906">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7051917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051921">t</span><span class="op" id="7051922">.</span><span class="ident" id="7051923">Errorf</span><span class="op" id="7051929">(</span><span class="string" id="7051930">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7051969">,</span>&nbsp;<span class="ident" id="7051971">s</span><span class="op" id="7051972">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7051975">}</span><br>
<span class="lineno"></span><span class="op" id="7051977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7051980">func</span>&nbsp;<span class="ident" id="7051985">TestMapCounter</span><span class="op" id="7051999">(</span><span class="ident" id="7052000">t</span>&nbsp;<span class="op" id="7052002">*</span><span class="ident" id="7052003">testing</span><span class="op" id="7052010">.</span><span class="ident" id="7052011">T</span><span class="op" id="7052012">)</span>&nbsp;<span class="op" id="7052014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052017">RemoveAll</span><span class="op" id="7052026">(</span><span class="op" id="7052027">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052030">colors</span>&nbsp;<span class="op" id="7052037">:=</span>&nbsp;<span class="ident" id="7052040">NewMap</span><span class="op" id="7052046">(</span><span class="string" id="7052047">&#34;bike-shed-colors&#34;</span><span class="op" id="7052065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052069">colors</span><span class="op" id="7052075">.</span><span class="ident" id="7052076">Add</span><span class="op" id="7052079">(</span><span class="string" id="7052080">&#34;red&#34;</span><span class="op" id="7052085">,</span>&nbsp;<span class="num" id="7052087">1</span><span class="op" id="7052088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052091">colors</span><span class="op" id="7052097">.</span><span class="ident" id="7052098">Add</span><span class="op" id="7052101">(</span><span class="string" id="7052102">&#34;red&#34;</span><span class="op" id="7052107">,</span>&nbsp;<span class="num" id="7052109">2</span><span class="op" id="7052110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052113">colors</span><span class="op" id="7052119">.</span><span class="ident" id="7052120">Add</span><span class="op" id="7052123">(</span><span class="string" id="7052124">&#34;blue&#34;</span><span class="op" id="7052130">,</span>&nbsp;<span class="num" id="7052132">4</span><span class="op" id="7052133">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052136">colors</span><span class="op" id="7052142">.</span><span class="ident" id="7052143">AddFloat</span><span class="op" id="7052151">(</span><span class="string" id="7052152">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7052168">,</span>&nbsp;<span class="num" id="7052170">4.125</span><span class="op" id="7052175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052178">if</span>&nbsp;<span class="ident" id="7052181">x</span>&nbsp;<span class="op" id="7052183">:=</span>&nbsp;<span class="ident" id="7052186">colors</span><span class="op" id="7052192">.</span><span class="ident" id="7052193">m</span><span class="op" id="7052194">[</span><span class="string" id="7052195">&#34;red&#34;</span><span class="op" id="7052200">]</span><span class="op" id="7052201">.</span><span class="op" id="7052202">(</span><span class="op" id="7052203">*</span><span class="ident" id="7052204">Int</span><span class="op" id="7052207">)</span><span class="op" id="7052208">.</span><span class="ident" id="7052209">i</span><span class="op" id="7052210">;</span>&nbsp;<span class="ident" id="7052212">x</span>&nbsp;<span class="op" id="7052214">!=</span>&nbsp;<span class="num" id="7052217">3</span>&nbsp;<span class="op" id="7052219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052223">t</span><span class="op" id="7052224">.</span><span class="ident" id="7052225">Errorf</span><span class="op" id="7052231">(</span><span class="string" id="7052232">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7052264">,</span>&nbsp;<span class="ident" id="7052266">x</span><span class="op" id="7052267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052273">if</span>&nbsp;<span class="ident" id="7052276">x</span>&nbsp;<span class="op" id="7052278">:=</span>&nbsp;<span class="ident" id="7052281">colors</span><span class="op" id="7052287">.</span><span class="ident" id="7052288">m</span><span class="op" id="7052289">[</span><span class="string" id="7052290">&#34;blue&#34;</span><span class="op" id="7052296">]</span><span class="op" id="7052297">.</span><span class="op" id="7052298">(</span><span class="op" id="7052299">*</span><span class="ident" id="7052300">Int</span><span class="op" id="7052303">)</span><span class="op" id="7052304">.</span><span class="ident" id="7052305">i</span><span class="op" id="7052306">;</span>&nbsp;<span class="ident" id="7052308">x</span>&nbsp;<span class="op" id="7052310">!=</span>&nbsp;<span class="num" id="7052313">4</span>&nbsp;<span class="op" id="7052315">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052319">t</span><span class="op" id="7052320">.</span><span class="ident" id="7052321">Errorf</span><span class="op" id="7052327">(</span><span class="string" id="7052328">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7052361">,</span>&nbsp;<span class="ident" id="7052363">x</span><span class="op" id="7052364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052370">if</span>&nbsp;<span class="ident" id="7052373">x</span>&nbsp;<span class="op" id="7052375">:=</span>&nbsp;<span class="ident" id="7052378">colors</span><span class="op" id="7052384">.</span><span class="ident" id="7052385">m</span><span class="op" id="7052386">[</span><span class="string" id="7052387">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7052403">]</span><span class="op" id="7052404">.</span><span class="op" id="7052405">(</span><span class="op" id="7052406">*</span><span class="ident" id="7052407">Float</span><span class="op" id="7052412">)</span><span class="op" id="7052413">.</span><span class="ident" id="7052414">f</span><span class="op" id="7052415">;</span>&nbsp;<span class="ident" id="7052417">x</span>&nbsp;<span class="op" id="7052419">!=</span>&nbsp;<span class="num" id="7052422">4.125</span>&nbsp;<span class="op" id="7052428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052432">t</span><span class="op" id="7052433">.</span><span class="ident" id="7052434">Errorf</span><span class="op" id="7052440">(</span><span class="string" id="7052441">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7052486">,</span>&nbsp;<span class="ident" id="7052488">x</span><span class="op" id="7052489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052492">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7052496">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7052549">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052598">s</span>&nbsp;<span class="op" id="7052600">:=</span>&nbsp;<span class="ident" id="7052603">colors</span><span class="op" id="7052609">.</span><span class="ident" id="7052610">String</span><span class="op" id="7052616">(</span><span class="op" id="7052617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052620">var</span>&nbsp;<span class="ident" id="7052624">j</span>&nbsp;<span class="keyword" id="7052626">interface</span><span class="op" id="7052635">{</span><span class="op" id="7052636">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052639">err</span>&nbsp;<span class="op" id="7052643">:=</span>&nbsp;<span class="ident" id="7052646">json</span><span class="op" id="7052650">.</span><span class="ident" id="7052651">Unmarshal</span><span class="op" id="7052660">(</span><span class="op" id="7052661">[</span><span class="op" id="7052662">]</span><span class="builtintype" id="7052663">byte</span><span class="op" id="7052667">(</span><span class="ident" id="7052668">s</span><span class="op" id="7052669">)</span><span class="op" id="7052670">,</span>&nbsp;<span class="op" id="7052672">&amp;</span><span class="ident" id="7052673">j</span><span class="op" id="7052674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052677">if</span>&nbsp;<span class="ident" id="7052680">err</span>&nbsp;<span class="op" id="7052684">!=</span>&nbsp;<span class="builtintype" id="7052687">nil</span>&nbsp;<span class="op" id="7052691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052695">t</span><span class="op" id="7052696">.</span><span class="ident" id="7052697">Errorf</span><span class="op" id="7052703">(</span><span class="string" id="7052704">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7052742">,</span>&nbsp;<span class="ident" id="7052744">err</span><span class="op" id="7052747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052753">m</span><span class="op" id="7052754">,</span>&nbsp;<span class="ident" id="7052756">ok</span>&nbsp;<span class="op" id="7052759">:=</span>&nbsp;<span class="ident" id="7052762">j</span><span class="op" id="7052763">.</span><span class="op" id="7052764">(</span><span class="keyword" id="7052765">map</span><span class="op" id="7052768">[</span><span class="builtintype" id="7052769">string</span><span class="op" id="7052775">]</span><span class="keyword" id="7052776">interface</span><span class="op" id="7052785">{</span><span class="op" id="7052786">}</span><span class="op" id="7052787">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052790">if</span>&nbsp;<span class="op" id="7052793">!</span><span class="ident" id="7052794">ok</span>&nbsp;<span class="op" id="7052797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052801">t</span><span class="op" id="7052802">.</span><span class="ident" id="7052803">Error</span><span class="op" id="7052808">(</span><span class="string" id="7052809">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7052848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052854">red</span>&nbsp;<span class="op" id="7052858">:=</span>&nbsp;<span class="ident" id="7052861">m</span><span class="op" id="7052862">[</span><span class="string" id="7052863">&#34;red&#34;</span><span class="op" id="7052868">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052871">x</span><span class="op" id="7052872">,</span>&nbsp;<span class="ident" id="7052874">ok</span>&nbsp;<span class="op" id="7052877">:=</span>&nbsp;<span class="ident" id="7052880">red</span><span class="op" id="7052883">.</span><span class="op" id="7052884">(</span><span class="builtintype" id="7052885">float64</span><span class="op" id="7052892">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052895">if</span>&nbsp;<span class="op" id="7052898">!</span><span class="ident" id="7052899">ok</span>&nbsp;<span class="op" id="7052902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052906">t</span><span class="op" id="7052907">.</span><span class="ident" id="7052908">Error</span><span class="op" id="7052913">(</span><span class="string" id="7052914">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7052943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7052949">if</span>&nbsp;<span class="ident" id="7052952">x</span>&nbsp;<span class="op" id="7052954">!=</span>&nbsp;<span class="num" id="7052957">3</span>&nbsp;<span class="op" id="7052959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052963">t</span><span class="op" id="7052964">.</span><span class="ident" id="7052965">Errorf</span><span class="op" id="7052971">(</span><span class="string" id="7052972">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7052990">,</span>&nbsp;<span class="ident" id="7052992">x</span><span class="op" id="7052993">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7052996">}</span><br>
<span class="lineno"></span><span class="op" id="7052998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7053001">func</span>&nbsp;<span class="ident" id="7053006">TestFunc</span><span class="op" id="7053014">(</span><span class="ident" id="7053015">t</span>&nbsp;<span class="op" id="7053017">*</span><span class="ident" id="7053018">testing</span><span class="op" id="7053025">.</span><span class="ident" id="7053026">T</span><span class="op" id="7053027">)</span>&nbsp;<span class="op" id="7053029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053032">RemoveAll</span><span class="op" id="7053041">(</span><span class="op" id="7053042">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7053045">var</span>&nbsp;<span class="ident" id="7053049">x</span>&nbsp;<span class="keyword" id="7053051">interface</span><span class="op" id="7053060">{</span><span class="op" id="7053061">}</span>&nbsp;<span class="op" id="7053063">=</span>&nbsp;<span class="op" id="7053065">[</span><span class="op" id="7053066">]</span><span class="builtintype" id="7053067">string</span><span class="op" id="7053073">{</span><span class="string" id="7053074">&#34;a&#34;</span><span class="op" id="7053077">,</span>&nbsp;<span class="string" id="7053079">&#34;b&#34;</span><span class="op" id="7053082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053085">f</span>&nbsp;<span class="op" id="7053087">:=</span>&nbsp;<span class="ident" id="7053090">Func</span><span class="op" id="7053094">(</span><span class="keyword" id="7053095">func</span><span class="op" id="7053099">(</span><span class="op" id="7053100">)</span>&nbsp;<span class="keyword" id="7053102">interface</span><span class="op" id="7053111">{</span><span class="op" id="7053112">}</span>&nbsp;<span class="op" id="7053114">{</span>&nbsp;<span class="keyword" id="7053116">return</span>&nbsp;<span class="ident" id="7053123">x</span>&nbsp;<span class="op" id="7053125">}</span><span class="op" id="7053126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7053129">if</span>&nbsp;<span class="ident" id="7053132">s</span><span class="op" id="7053133">,</span>&nbsp;<span class="ident" id="7053135">exp</span>&nbsp;<span class="op" id="7053139">:=</span>&nbsp;<span class="ident" id="7053142">f</span><span class="op" id="7053143">.</span><span class="ident" id="7053144">String</span><span class="op" id="7053150">(</span><span class="op" id="7053151">)</span><span class="op" id="7053152">,</span>&nbsp;<span class="string" id="7053154">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7053165">;</span>&nbsp;<span class="ident" id="7053167">s</span>&nbsp;<span class="op" id="7053169">!=</span>&nbsp;<span class="ident" id="7053172">exp</span>&nbsp;<span class="op" id="7053176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053180">t</span><span class="op" id="7053181">.</span><span class="ident" id="7053182">Errorf</span><span class="op" id="7053188">(</span><span class="string" id="7053189">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7053215">,</span>&nbsp;<span class="ident" id="7053217">s</span><span class="op" id="7053218">,</span>&nbsp;<span class="ident" id="7053220">exp</span><span class="op" id="7053223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7053226">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053230">x</span>&nbsp;<span class="op" id="7053232">=</span>&nbsp;<span class="num" id="7053234">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7053238">if</span>&nbsp;<span class="ident" id="7053241">s</span><span class="op" id="7053242">,</span>&nbsp;<span class="ident" id="7053244">exp</span>&nbsp;<span class="op" id="7053248">:=</span>&nbsp;<span class="ident" id="7053251">f</span><span class="op" id="7053252">.</span><span class="ident" id="7053253">String</span><span class="op" id="7053259">(</span><span class="op" id="7053260">)</span><span class="op" id="7053261">,</span>&nbsp;<span class="string" id="7053263">`17`</span><span class="op" id="7053267">;</span>&nbsp;<span class="ident" id="7053269">s</span>&nbsp;<span class="op" id="7053271">!=</span>&nbsp;<span class="ident" id="7053274">exp</span>&nbsp;<span class="op" id="7053278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053282">t</span><span class="op" id="7053283">.</span><span class="ident" id="7053284">Errorf</span><span class="op" id="7053290">(</span><span class="string" id="7053291">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7053317">,</span>&nbsp;<span class="ident" id="7053319">s</span><span class="op" id="7053320">,</span>&nbsp;<span class="ident" id="7053322">exp</span><span class="op" id="7053325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7053328">}</span><br>
<span class="lineno">145</span><span class="op" id="7053330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7053333">func</span>&nbsp;<span class="ident" id="7053338">TestHandler</span><span class="op" id="7053349">(</span><span class="ident" id="7053350">t</span>&nbsp;<span class="op" id="7053352">*</span><span class="ident" id="7053353">testing</span><span class="op" id="7053360">.</span><span class="ident" id="7053361">T</span><span class="op" id="7053362">)</span>&nbsp;<span class="op" id="7053364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053367">RemoveAll</span><span class="op" id="7053376">(</span><span class="op" id="7053377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053380">m</span>&nbsp;<span class="op" id="7053382">:=</span>&nbsp;<span class="ident" id="7053385">NewMap</span><span class="op" id="7053391">(</span><span class="string" id="7053392">&#34;map1&#34;</span><span class="op" id="7053398">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053401">m</span><span class="op" id="7053402">.</span><span class="ident" id="7053403">Add</span><span class="op" id="7053406">(</span><span class="string" id="7053407">&#34;a&#34;</span><span class="op" id="7053410">,</span>&nbsp;<span class="num" id="7053412">1</span><span class="op" id="7053413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053416">m</span><span class="op" id="7053417">.</span><span class="ident" id="7053418">Add</span><span class="op" id="7053421">(</span><span class="string" id="7053422">&#34;z&#34;</span><span class="op" id="7053425">,</span>&nbsp;<span class="num" id="7053427">2</span><span class="op" id="7053428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053431">m2</span>&nbsp;<span class="op" id="7053434">:=</span>&nbsp;<span class="ident" id="7053437">NewMap</span><span class="op" id="7053443">(</span><span class="string" id="7053444">&#34;map2&#34;</span><span class="op" id="7053450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7053453">for</span>&nbsp;<span class="ident" id="7053457">i</span>&nbsp;<span class="op" id="7053459">:=</span>&nbsp;<span class="num" id="7053462">0</span><span class="op" id="7053463">;</span>&nbsp;<span class="ident" id="7053465">i</span>&nbsp;<span class="op" id="7053467">&lt;</span>&nbsp;<span class="num" id="7053469">9</span><span class="op" id="7053470">;</span>&nbsp;<span class="ident" id="7053472">i</span><span class="op" id="7053473">++</span>&nbsp;<span class="op" id="7053476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053480">m2</span><span class="op" id="7053482">.</span><span class="ident" id="7053483">Add</span><span class="op" id="7053486">(</span><span class="ident" id="7053487">strconv</span><span class="op" id="7053494">.</span><span class="ident" id="7053495">Itoa</span><span class="op" id="7053499">(</span><span class="ident" id="7053500">i</span><span class="op" id="7053501">)</span><span class="op" id="7053502">,</span>&nbsp;<span class="ident" id="7053504">int64</span><span class="op" id="7053509">(</span><span class="ident" id="7053510">i</span><span class="op" id="7053511">)</span><span class="op" id="7053512">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7053515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053518">rr</span>&nbsp;<span class="op" id="7053521">:=</span>&nbsp;<span class="ident" id="7053524">httptest</span><span class="op" id="7053532">.</span><span class="ident" id="7053533">NewRecorder</span><span class="op" id="7053544">(</span><span class="op" id="7053545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053548">rr</span><span class="op" id="7053550">.</span><span class="ident" id="7053551">Body</span>&nbsp;<span class="op" id="7053556">=</span>&nbsp;<span class="builtinfunc" id="7053558">new</span><span class="op" id="7053561">(</span><span class="ident" id="7053562">bytes</span><span class="op" id="7053567">.</span><span class="ident" id="7053568">Buffer</span><span class="op" id="7053574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053577">expvarHandler</span><span class="op" id="7053590">(</span><span class="ident" id="7053591">rr</span><span class="op" id="7053593">,</span>&nbsp;<span class="builtintype" id="7053595">nil</span><span class="op" id="7053598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053601">want</span>&nbsp;<span class="op" id="7053606">:=</span>&nbsp;<span class="string" id="7053609">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7053724">if</span>&nbsp;<span class="ident" id="7053727">got</span>&nbsp;<span class="op" id="7053731">:=</span>&nbsp;<span class="ident" id="7053734">rr</span><span class="op" id="7053736">.</span><span class="ident" id="7053737">Body</span><span class="op" id="7053741">.</span><span class="ident" id="7053742">String</span><span class="op" id="7053748">(</span><span class="op" id="7053749">)</span><span class="op" id="7053750">;</span>&nbsp;<span class="ident" id="7053752">got</span>&nbsp;<span class="op" id="7053756">!=</span>&nbsp;<span class="ident" id="7053759">want</span>&nbsp;<span class="op" id="7053764">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7053768">t</span><span class="op" id="7053769">.</span><span class="ident" id="7053770">Errorf</span><span class="op" id="7053776">(</span><span class="string" id="7053777">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7053813">,</span>&nbsp;<span class="ident" id="7053815">got</span><span class="op" id="7053818">,</span>&nbsp;<span class="ident" id="7053820">want</span><span class="op" id="7053824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7053827">}</span><br>
<span class="lineno"></span><span class="op" id="7053829">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
