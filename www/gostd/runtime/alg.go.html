<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html" class="current">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1468245">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1468300">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1468354">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1468405">package</span>&nbsp;<span class="ident" id="1468413">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1468422">import</span>&nbsp;<span class="string" id="1468429">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1468439">const</span>&nbsp;<span class="op" id="1468445">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468448">c0</span>&nbsp;<span class="op" id="1468451">=</span>&nbsp;<span class="builtintype" id="1468453">uintptr</span><span class="op" id="1468460">(</span><span class="op" id="1468461">(</span><span class="num" id="1468462">8</span><span class="op" id="1468463">-</span><span class="ident" id="1468464">ptrSize</span><span class="op" id="1468471">)</span><span class="op" id="1468472">/</span><span class="num" id="1468473">4</span><span class="op" id="1468474">*</span><span class="num" id="1468475">2860486313</span>&nbsp;<span class="op" id="1468486">+</span>&nbsp;<span class="op" id="1468488">(</span><span class="ident" id="1468489">ptrSize</span><span class="op" id="1468496">-</span><span class="num" id="1468497">4</span><span class="op" id="1468498">)</span><span class="op" id="1468499">/</span><span class="num" id="1468500">4</span><span class="op" id="1468501">*</span><span class="num" id="1468502">33054211828000289</span><span class="op" id="1468519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468522">c1</span>&nbsp;<span class="op" id="1468525">=</span>&nbsp;<span class="builtintype" id="1468527">uintptr</span><span class="op" id="1468534">(</span><span class="op" id="1468535">(</span><span class="num" id="1468536">8</span><span class="op" id="1468537">-</span><span class="ident" id="1468538">ptrSize</span><span class="op" id="1468545">)</span><span class="op" id="1468546">/</span><span class="num" id="1468547">4</span><span class="op" id="1468548">*</span><span class="num" id="1468549">3267000013</span>&nbsp;<span class="op" id="1468560">+</span>&nbsp;<span class="op" id="1468562">(</span><span class="ident" id="1468563">ptrSize</span><span class="op" id="1468570">-</span><span class="num" id="1468571">4</span><span class="op" id="1468572">)</span><span class="op" id="1468573">/</span><span class="num" id="1468574">4</span><span class="op" id="1468575">*</span><span class="num" id="1468576">23344194077549503</span><span class="op" id="1468593">)</span><br>
<span class="lineno"></span><span class="op" id="1468595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1468598">//&nbsp;type&nbsp;algorithms&nbsp;-&nbsp;known&nbsp;to&nbsp;compiler</span><br>
<span class="lineno">15</span><span class="keyword" id="1468637">const</span>&nbsp;<span class="op" id="1468643">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468646">alg_MEM</span>&nbsp;<span class="op" id="1468654">=</span>&nbsp;<span class="ident" id="1468656">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468662">alg_MEM0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468672">alg_MEM8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468682">alg_MEM16</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468693">alg_MEM32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468704">alg_MEM64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468715">alg_MEM128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468727">alg_NOEQ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468737">alg_NOEQ0</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468748">alg_NOEQ8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468759">alg_NOEQ16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468771">alg_NOEQ32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468783">alg_NOEQ64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468795">alg_NOEQ128</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468808">alg_STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468820">alg_INTER</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468831">alg_NILINTER</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468845">alg_SLICE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468856">alg_FLOAT32</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468869">alg_FLOAT64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468882">alg_CPLX64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468894">alg_CPLX128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1468907">alg_max</span><br>
<span class="lineno"></span><span class="op" id="1468915">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1468918">type</span>&nbsp;<span class="ident" id="1468923">typeAlg</span>&nbsp;<span class="keyword" id="1468931">struct</span>&nbsp;<span class="op" id="1468938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1468941">//&nbsp;function&nbsp;for&nbsp;hashing&nbsp;objects&nbsp;of&nbsp;this&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1468987">//&nbsp;(ptr&nbsp;to&nbsp;object,&nbsp;size,&nbsp;seed)&nbsp;-&gt;&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469027">hash</span>&nbsp;<span class="keyword" id="1469032">func</span><span class="op" id="1469036">(</span><span class="ident" id="1469037">unsafe</span><span class="op" id="1469043">.</span><span class="ident" id="1469044">Pointer</span><span class="op" id="1469051">,</span>&nbsp;<span class="builtintype" id="1469053">uintptr</span><span class="op" id="1469060">,</span>&nbsp;<span class="builtintype" id="1469062">uintptr</span><span class="op" id="1469069">)</span>&nbsp;<span class="builtintype" id="1469071">uintptr</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1469080">//&nbsp;function&nbsp;for&nbsp;comparing&nbsp;objects&nbsp;of&nbsp;this&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1469128">//&nbsp;(ptr&nbsp;to&nbsp;object&nbsp;A,&nbsp;ptr&nbsp;to&nbsp;object&nbsp;B,&nbsp;size)&nbsp;-&gt;&nbsp;==?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469180">equal</span>&nbsp;<span class="keyword" id="1469186">func</span><span class="op" id="1469190">(</span><span class="ident" id="1469191">unsafe</span><span class="op" id="1469197">.</span><span class="ident" id="1469198">Pointer</span><span class="op" id="1469205">,</span>&nbsp;<span class="ident" id="1469207">unsafe</span><span class="op" id="1469213">.</span><span class="ident" id="1469214">Pointer</span><span class="op" id="1469221">,</span>&nbsp;<span class="builtintype" id="1469223">uintptr</span><span class="op" id="1469230">)</span>&nbsp;<span class="builtintype" id="1469232">bool</span><br>
<span class="lineno"></span><span class="op" id="1469237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="1469240">var</span>&nbsp;<span class="ident" id="1469244">algarray</span>&nbsp;<span class="op" id="1469253">=</span>&nbsp;<span class="op" id="1469255">[</span><span class="ident" id="1469256">alg_max</span><span class="op" id="1469263">]</span><span class="ident" id="1469264">typeAlg</span><span class="op" id="1469271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469274">alg_MEM</span><span class="op" id="1469281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469288">{</span><span class="ident" id="1469289">memhash</span><span class="op" id="1469296">,</span>&nbsp;<span class="ident" id="1469298">memequal</span><span class="op" id="1469306">}</span><span class="op" id="1469307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469310">alg_MEM0</span><span class="op" id="1469318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469324">{</span><span class="ident" id="1469325">memhash</span><span class="op" id="1469332">,</span>&nbsp;<span class="ident" id="1469334">memequal0</span><span class="op" id="1469343">}</span><span class="op" id="1469344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469347">alg_MEM8</span><span class="op" id="1469355">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469361">{</span><span class="ident" id="1469362">memhash</span><span class="op" id="1469369">,</span>&nbsp;<span class="ident" id="1469371">memequal8</span><span class="op" id="1469380">}</span><span class="op" id="1469381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469384">alg_MEM16</span><span class="op" id="1469393">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469398">{</span><span class="ident" id="1469399">memhash</span><span class="op" id="1469406">,</span>&nbsp;<span class="ident" id="1469408">memequal16</span><span class="op" id="1469418">}</span><span class="op" id="1469419">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469422">alg_MEM32</span><span class="op" id="1469431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469436">{</span><span class="ident" id="1469437">memhash</span><span class="op" id="1469444">,</span>&nbsp;<span class="ident" id="1469446">memequal32</span><span class="op" id="1469456">}</span><span class="op" id="1469457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469460">alg_MEM64</span><span class="op" id="1469469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469474">{</span><span class="ident" id="1469475">memhash</span><span class="op" id="1469482">,</span>&nbsp;<span class="ident" id="1469484">memequal64</span><span class="op" id="1469494">}</span><span class="op" id="1469495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469498">alg_MEM128</span><span class="op" id="1469508">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1469512">{</span><span class="ident" id="1469513">memhash</span><span class="op" id="1469520">,</span>&nbsp;<span class="ident" id="1469522">memequal128</span><span class="op" id="1469533">}</span><span class="op" id="1469534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469537">alg_NOEQ</span><span class="op" id="1469545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469551">{</span><span class="ident" id="1469552">nil</span><span class="op" id="1469555">,</span>&nbsp;<span class="ident" id="1469557">nil</span><span class="op" id="1469560">}</span><span class="op" id="1469561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469564">alg_NOEQ0</span><span class="op" id="1469573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469578">{</span><span class="ident" id="1469579">nil</span><span class="op" id="1469582">,</span>&nbsp;<span class="ident" id="1469584">nil</span><span class="op" id="1469587">}</span><span class="op" id="1469588">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469591">alg_NOEQ8</span><span class="op" id="1469600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469605">{</span><span class="ident" id="1469606">nil</span><span class="op" id="1469609">,</span>&nbsp;<span class="ident" id="1469611">nil</span><span class="op" id="1469614">}</span><span class="op" id="1469615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469618">alg_NOEQ16</span><span class="op" id="1469628">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1469632">{</span><span class="ident" id="1469633">nil</span><span class="op" id="1469636">,</span>&nbsp;<span class="ident" id="1469638">nil</span><span class="op" id="1469641">}</span><span class="op" id="1469642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469645">alg_NOEQ32</span><span class="op" id="1469655">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1469659">{</span><span class="ident" id="1469660">nil</span><span class="op" id="1469663">,</span>&nbsp;<span class="ident" id="1469665">nil</span><span class="op" id="1469668">}</span><span class="op" id="1469669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469672">alg_NOEQ64</span><span class="op" id="1469682">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1469686">{</span><span class="ident" id="1469687">nil</span><span class="op" id="1469690">,</span>&nbsp;<span class="ident" id="1469692">nil</span><span class="op" id="1469695">}</span><span class="op" id="1469696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469699">alg_NOEQ128</span><span class="op" id="1469710">:</span>&nbsp;&nbsp;<span class="op" id="1469713">{</span><span class="ident" id="1469714">nil</span><span class="op" id="1469717">,</span>&nbsp;<span class="ident" id="1469719">nil</span><span class="op" id="1469722">}</span><span class="op" id="1469723">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469726">alg_STRING</span><span class="op" id="1469736">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1469740">{</span><span class="ident" id="1469741">strhash</span><span class="op" id="1469748">,</span>&nbsp;<span class="ident" id="1469750">strequal</span><span class="op" id="1469758">}</span><span class="op" id="1469759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469762">alg_INTER</span><span class="op" id="1469771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469776">{</span><span class="ident" id="1469777">interhash</span><span class="op" id="1469786">,</span>&nbsp;<span class="ident" id="1469788">interequal</span><span class="op" id="1469798">}</span><span class="op" id="1469799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469802">alg_NILINTER</span><span class="op" id="1469814">:</span>&nbsp;<span class="op" id="1469816">{</span><span class="ident" id="1469817">nilinterhash</span><span class="op" id="1469829">,</span>&nbsp;<span class="ident" id="1469831">nilinterequal</span><span class="op" id="1469844">}</span><span class="op" id="1469845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469848">alg_SLICE</span><span class="op" id="1469857">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1469862">{</span><span class="ident" id="1469863">nil</span><span class="op" id="1469866">,</span>&nbsp;<span class="ident" id="1469868">nil</span><span class="op" id="1469871">}</span><span class="op" id="1469872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469875">alg_FLOAT32</span><span class="op" id="1469886">:</span>&nbsp;&nbsp;<span class="op" id="1469889">{</span><span class="ident" id="1469890">f32hash</span><span class="op" id="1469897">,</span>&nbsp;<span class="ident" id="1469899">f32equal</span><span class="op" id="1469907">}</span><span class="op" id="1469908">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469911">alg_FLOAT64</span><span class="op" id="1469922">:</span>&nbsp;&nbsp;<span class="op" id="1469925">{</span><span class="ident" id="1469926">f64hash</span><span class="op" id="1469933">,</span>&nbsp;<span class="ident" id="1469935">f64equal</span><span class="op" id="1469943">}</span><span class="op" id="1469944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469947">alg_CPLX64</span><span class="op" id="1469957">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1469961">{</span><span class="ident" id="1469962">c64hash</span><span class="op" id="1469969">,</span>&nbsp;<span class="ident" id="1469971">c64equal</span><span class="op" id="1469979">}</span><span class="op" id="1469980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1469983">alg_CPLX128</span><span class="op" id="1469994">:</span>&nbsp;&nbsp;<span class="op" id="1469997">{</span><span class="ident" id="1469998">c128hash</span><span class="op" id="1470006">,</span>&nbsp;<span class="ident" id="1470008">c128equal</span><span class="op" id="1470017">}</span><span class="op" id="1470018">,</span><br>
<span class="lineno"></span><span class="op" id="1470020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="1470023">const</span>&nbsp;<span class="ident" id="1470029">nacl</span>&nbsp;<span class="op" id="1470034">=</span>&nbsp;<span class="ident" id="1470036">GOOS</span>&nbsp;<span class="op" id="1470041">==</span>&nbsp;<span class="string" id="1470044">&#34;nacl&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1470052">var</span>&nbsp;<span class="ident" id="1470056">useAeshash</span>&nbsp;<span class="builtintype" id="1470067">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1470073">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno">80</span><span class="keyword" id="1470087">func</span>&nbsp;<span class="ident" id="1470092">aeshash</span><span class="op" id="1470099">(</span><span class="ident" id="1470100">p</span>&nbsp;<span class="ident" id="1470102">unsafe</span><span class="op" id="1470108">.</span><span class="ident" id="1470109">Pointer</span><span class="op" id="1470116">,</span>&nbsp;<span class="ident" id="1470118">s</span><span class="op" id="1470119">,</span>&nbsp;<span class="ident" id="1470121">h</span>&nbsp;<span class="builtintype" id="1470123">uintptr</span><span class="op" id="1470130">)</span>&nbsp;<span class="builtintype" id="1470132">uintptr</span><br>
<span class="lineno"></span><span class="keyword" id="1470140">func</span>&nbsp;<span class="ident" id="1470145">aeshash32</span><span class="op" id="1470154">(</span><span class="ident" id="1470155">p</span>&nbsp;<span class="ident" id="1470157">unsafe</span><span class="op" id="1470163">.</span><span class="ident" id="1470164">Pointer</span><span class="op" id="1470171">,</span>&nbsp;<span class="ident" id="1470173">s</span><span class="op" id="1470174">,</span>&nbsp;<span class="ident" id="1470176">h</span>&nbsp;<span class="builtintype" id="1470178">uintptr</span><span class="op" id="1470185">)</span>&nbsp;<span class="builtintype" id="1470187">uintptr</span><br>
<span class="lineno"></span><span class="keyword" id="1470195">func</span>&nbsp;<span class="ident" id="1470200">aeshash64</span><span class="op" id="1470209">(</span><span class="ident" id="1470210">p</span>&nbsp;<span class="ident" id="1470212">unsafe</span><span class="op" id="1470218">.</span><span class="ident" id="1470219">Pointer</span><span class="op" id="1470226">,</span>&nbsp;<span class="ident" id="1470228">s</span><span class="op" id="1470229">,</span>&nbsp;<span class="ident" id="1470231">h</span>&nbsp;<span class="builtintype" id="1470233">uintptr</span><span class="op" id="1470240">)</span>&nbsp;<span class="builtintype" id="1470242">uintptr</span><br>
<span class="lineno"></span><span class="keyword" id="1470250">func</span>&nbsp;<span class="ident" id="1470255">aeshashstr</span><span class="op" id="1470265">(</span><span class="ident" id="1470266">p</span>&nbsp;<span class="ident" id="1470268">unsafe</span><span class="op" id="1470274">.</span><span class="ident" id="1470275">Pointer</span><span class="op" id="1470282">,</span>&nbsp;<span class="ident" id="1470284">s</span><span class="op" id="1470285">,</span>&nbsp;<span class="ident" id="1470287">h</span>&nbsp;<span class="builtintype" id="1470289">uintptr</span><span class="op" id="1470296">)</span>&nbsp;<span class="builtintype" id="1470298">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="1470307">func</span>&nbsp;<span class="ident" id="1470312">memhash</span><span class="op" id="1470319">(</span><span class="ident" id="1470320">p</span>&nbsp;<span class="ident" id="1470322">unsafe</span><span class="op" id="1470328">.</span><span class="ident" id="1470329">Pointer</span><span class="op" id="1470336">,</span>&nbsp;<span class="ident" id="1470338">s</span><span class="op" id="1470339">,</span>&nbsp;<span class="ident" id="1470341">h</span>&nbsp;<span class="builtintype" id="1470343">uintptr</span><span class="op" id="1470350">)</span>&nbsp;<span class="builtintype" id="1470352">uintptr</span>&nbsp;<span class="op" id="1470360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470363">if</span>&nbsp;<span class="op" id="1470366">!</span><span class="ident" id="1470367">nacl</span>&nbsp;<span class="op" id="1470372">&amp;&amp;</span>&nbsp;<span class="ident" id="1470375">useAeshash</span>&nbsp;<span class="op" id="1470386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470390">return</span>&nbsp;<span class="ident" id="1470397">aeshash</span><span class="op" id="1470404">(</span><span class="ident" id="1470405">p</span><span class="op" id="1470406">,</span>&nbsp;<span class="ident" id="1470408">s</span><span class="op" id="1470409">,</span>&nbsp;<span class="ident" id="1470411">h</span><span class="op" id="1470412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1470415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1470419">h</span>&nbsp;<span class="op" id="1470421">^=</span>&nbsp;<span class="ident" id="1470424">c0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470428">for</span>&nbsp;<span class="ident" id="1470432">s</span>&nbsp;<span class="op" id="1470434">&gt;</span>&nbsp;<span class="num" id="1470436">0</span>&nbsp;<span class="op" id="1470438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1470442">h</span>&nbsp;<span class="op" id="1470444">=</span>&nbsp;<span class="op" id="1470446">(</span><span class="ident" id="1470447">h</span>&nbsp;<span class="op" id="1470449">^</span>&nbsp;<span class="builtintype" id="1470451">uintptr</span><span class="op" id="1470458">(</span><span class="op" id="1470459">*</span><span class="op" id="1470460">(</span><span class="op" id="1470461">*</span><span class="builtintype" id="1470462">byte</span><span class="op" id="1470466">)</span><span class="op" id="1470467">(</span><span class="ident" id="1470468">p</span><span class="op" id="1470469">)</span><span class="op" id="1470470">)</span><span class="op" id="1470471">)</span>&nbsp;<span class="op" id="1470473">*</span>&nbsp;<span class="ident" id="1470475">c1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1470480">p</span>&nbsp;<span class="op" id="1470482">=</span>&nbsp;<span class="ident" id="1470484">add</span><span class="op" id="1470487">(</span><span class="ident" id="1470488">p</span><span class="op" id="1470489">,</span>&nbsp;<span class="num" id="1470491">1</span><span class="op" id="1470492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1470496">s</span><span class="op" id="1470497">--</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1470501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470504">return</span>&nbsp;<span class="ident" id="1470511">h</span><br>
<span class="lineno"></span><span class="op" id="1470513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1470516">func</span>&nbsp;<span class="ident" id="1470521">strhash</span><span class="op" id="1470528">(</span><span class="ident" id="1470529">a</span>&nbsp;<span class="ident" id="1470531">unsafe</span><span class="op" id="1470537">.</span><span class="ident" id="1470538">Pointer</span><span class="op" id="1470545">,</span>&nbsp;<span class="ident" id="1470547">s</span><span class="op" id="1470548">,</span>&nbsp;<span class="ident" id="1470550">h</span>&nbsp;<span class="builtintype" id="1470552">uintptr</span><span class="op" id="1470559">)</span>&nbsp;<span class="builtintype" id="1470561">uintptr</span>&nbsp;<span class="op" id="1470569">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470572">return</span>&nbsp;<span class="ident" id="1470579">memhash</span><span class="op" id="1470586">(</span><span class="op" id="1470587">(</span><span class="op" id="1470588">*</span><span class="ident" id="1470589">stringStruct</span><span class="op" id="1470601">)</span><span class="op" id="1470602">(</span><span class="ident" id="1470603">a</span><span class="op" id="1470604">)</span><span class="op" id="1470605">.</span><span class="ident" id="1470606">str</span><span class="op" id="1470609">,</span>&nbsp;<span class="builtintype" id="1470611">uintptr</span><span class="op" id="1470618">(</span><span class="builtinfunc" id="1470619">len</span><span class="op" id="1470622">(</span><span class="op" id="1470623">*</span><span class="op" id="1470624">(</span><span class="op" id="1470625">*</span><span class="builtintype" id="1470626">string</span><span class="op" id="1470632">)</span><span class="op" id="1470633">(</span><span class="ident" id="1470634">a</span><span class="op" id="1470635">)</span><span class="op" id="1470636">)</span><span class="op" id="1470637">)</span><span class="op" id="1470638">,</span>&nbsp;<span class="ident" id="1470640">h</span><span class="op" id="1470641">)</span><br>
<span class="lineno"></span><span class="op" id="1470643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1470646">//&nbsp;NOTE:&nbsp;Because&nbsp;NaN&nbsp;!=&nbsp;NaN,&nbsp;a&nbsp;map&nbsp;can&nbsp;contain&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="1470697">//&nbsp;number&nbsp;of&nbsp;(mostly&nbsp;useless)&nbsp;entries&nbsp;keyed&nbsp;with&nbsp;NaNs.</span><br>
<span class="lineno">105</span><span class="comment" id="1470752">//&nbsp;To&nbsp;avoid&nbsp;long&nbsp;hash&nbsp;chains,&nbsp;we&nbsp;assign&nbsp;a&nbsp;random&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="1470808">//&nbsp;as&nbsp;the&nbsp;hash&nbsp;value&nbsp;for&nbsp;a&nbsp;NaN.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1470841">func</span>&nbsp;<span class="ident" id="1470846">f32hash</span><span class="op" id="1470853">(</span><span class="ident" id="1470854">p</span>&nbsp;<span class="ident" id="1470856">unsafe</span><span class="op" id="1470862">.</span><span class="ident" id="1470863">Pointer</span><span class="op" id="1470870">,</span>&nbsp;<span class="ident" id="1470872">s</span><span class="op" id="1470873">,</span>&nbsp;<span class="ident" id="1470875">h</span>&nbsp;<span class="builtintype" id="1470877">uintptr</span><span class="op" id="1470884">)</span>&nbsp;<span class="builtintype" id="1470886">uintptr</span>&nbsp;<span class="op" id="1470894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1470897">f</span>&nbsp;<span class="op" id="1470899">:=</span>&nbsp;<span class="op" id="1470902">*</span><span class="op" id="1470903">(</span><span class="op" id="1470904">*</span><span class="builtintype" id="1470905">float32</span><span class="op" id="1470912">)</span><span class="op" id="1470913">(</span><span class="ident" id="1470914">p</span><span class="op" id="1470915">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470918">switch</span>&nbsp;<span class="op" id="1470925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470928">case</span>&nbsp;<span class="ident" id="1470933">f</span>&nbsp;<span class="op" id="1470935">==</span>&nbsp;<span class="num" id="1470938">0</span><span class="op" id="1470939">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470943">return</span>&nbsp;<span class="ident" id="1470950">c1</span>&nbsp;<span class="op" id="1470953">*</span>&nbsp;<span class="op" id="1470955">(</span><span class="ident" id="1470956">c0</span>&nbsp;<span class="op" id="1470959">^</span>&nbsp;<span class="ident" id="1470961">h</span><span class="op" id="1470962">)</span>&nbsp;<span class="comment" id="1470964">//&nbsp;+0,&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470975">case</span>&nbsp;<span class="ident" id="1470980">f</span>&nbsp;<span class="op" id="1470982">!=</span>&nbsp;<span class="ident" id="1470985">f</span><span class="op" id="1470986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1470990">return</span>&nbsp;<span class="ident" id="1470997">c1</span>&nbsp;<span class="op" id="1471000">*</span>&nbsp;<span class="op" id="1471002">(</span><span class="ident" id="1471003">c0</span>&nbsp;<span class="op" id="1471006">^</span>&nbsp;<span class="ident" id="1471008">h</span>&nbsp;<span class="op" id="1471010">^</span>&nbsp;<span class="builtintype" id="1471012">uintptr</span><span class="op" id="1471019">(</span><span class="ident" id="1471020">fastrand1</span><span class="op" id="1471029">(</span><span class="op" id="1471030">)</span><span class="op" id="1471031">)</span><span class="op" id="1471032">)</span>&nbsp;<span class="comment" id="1471034">//&nbsp;any&nbsp;kind&nbsp;of&nbsp;NaN</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471054">default</span><span class="op" id="1471061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471065">return</span>&nbsp;<span class="ident" id="1471072">memhash</span><span class="op" id="1471079">(</span><span class="ident" id="1471080">p</span><span class="op" id="1471081">,</span>&nbsp;<span class="num" id="1471083">4</span><span class="op" id="1471084">,</span>&nbsp;<span class="ident" id="1471086">h</span><span class="op" id="1471087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1471090">}</span><br>
<span class="lineno"></span><span class="op" id="1471092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="1471095">func</span>&nbsp;<span class="ident" id="1471100">f64hash</span><span class="op" id="1471107">(</span><span class="ident" id="1471108">p</span>&nbsp;<span class="ident" id="1471110">unsafe</span><span class="op" id="1471116">.</span><span class="ident" id="1471117">Pointer</span><span class="op" id="1471124">,</span>&nbsp;<span class="ident" id="1471126">s</span><span class="op" id="1471127">,</span>&nbsp;<span class="ident" id="1471129">h</span>&nbsp;<span class="builtintype" id="1471131">uintptr</span><span class="op" id="1471138">)</span>&nbsp;<span class="builtintype" id="1471140">uintptr</span>&nbsp;<span class="op" id="1471148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471151">f</span>&nbsp;<span class="op" id="1471153">:=</span>&nbsp;<span class="op" id="1471156">*</span><span class="op" id="1471157">(</span><span class="op" id="1471158">*</span><span class="builtintype" id="1471159">float64</span><span class="op" id="1471166">)</span><span class="op" id="1471167">(</span><span class="ident" id="1471168">p</span><span class="op" id="1471169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471172">switch</span>&nbsp;<span class="op" id="1471179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471182">case</span>&nbsp;<span class="ident" id="1471187">f</span>&nbsp;<span class="op" id="1471189">==</span>&nbsp;<span class="num" id="1471192">0</span><span class="op" id="1471193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471197">return</span>&nbsp;<span class="ident" id="1471204">c1</span>&nbsp;<span class="op" id="1471207">*</span>&nbsp;<span class="op" id="1471209">(</span><span class="ident" id="1471210">c0</span>&nbsp;<span class="op" id="1471213">^</span>&nbsp;<span class="ident" id="1471215">h</span><span class="op" id="1471216">)</span>&nbsp;<span class="comment" id="1471218">//&nbsp;+0,&nbsp;-0</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471229">case</span>&nbsp;<span class="ident" id="1471234">f</span>&nbsp;<span class="op" id="1471236">!=</span>&nbsp;<span class="ident" id="1471239">f</span><span class="op" id="1471240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471244">return</span>&nbsp;<span class="ident" id="1471251">c1</span>&nbsp;<span class="op" id="1471254">*</span>&nbsp;<span class="op" id="1471256">(</span><span class="ident" id="1471257">c0</span>&nbsp;<span class="op" id="1471260">^</span>&nbsp;<span class="ident" id="1471262">h</span>&nbsp;<span class="op" id="1471264">^</span>&nbsp;<span class="builtintype" id="1471266">uintptr</span><span class="op" id="1471273">(</span><span class="ident" id="1471274">fastrand1</span><span class="op" id="1471283">(</span><span class="op" id="1471284">)</span><span class="op" id="1471285">)</span><span class="op" id="1471286">)</span>&nbsp;<span class="comment" id="1471288">//&nbsp;any&nbsp;kind&nbsp;of&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471308">default</span><span class="op" id="1471315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471319">return</span>&nbsp;<span class="ident" id="1471326">memhash</span><span class="op" id="1471333">(</span><span class="ident" id="1471334">p</span><span class="op" id="1471335">,</span>&nbsp;<span class="num" id="1471337">8</span><span class="op" id="1471338">,</span>&nbsp;<span class="ident" id="1471340">h</span><span class="op" id="1471341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1471344">}</span><br>
<span class="lineno">130</span><span class="op" id="1471346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1471349">func</span>&nbsp;<span class="ident" id="1471354">c64hash</span><span class="op" id="1471361">(</span><span class="ident" id="1471362">p</span>&nbsp;<span class="ident" id="1471364">unsafe</span><span class="op" id="1471370">.</span><span class="ident" id="1471371">Pointer</span><span class="op" id="1471378">,</span>&nbsp;<span class="ident" id="1471380">s</span><span class="op" id="1471381">,</span>&nbsp;<span class="ident" id="1471383">h</span>&nbsp;<span class="builtintype" id="1471385">uintptr</span><span class="op" id="1471392">)</span>&nbsp;<span class="builtintype" id="1471394">uintptr</span>&nbsp;<span class="op" id="1471402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471405">x</span>&nbsp;<span class="op" id="1471407">:=</span>&nbsp;<span class="op" id="1471410">(</span><span class="op" id="1471411">*</span><span class="op" id="1471412">[</span><span class="num" id="1471413">2</span><span class="op" id="1471414">]</span><span class="builtintype" id="1471415">float32</span><span class="op" id="1471422">)</span><span class="op" id="1471423">(</span><span class="ident" id="1471424">p</span><span class="op" id="1471425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471428">return</span>&nbsp;<span class="ident" id="1471435">f32hash</span><span class="op" id="1471442">(</span><span class="ident" id="1471443">unsafe</span><span class="op" id="1471449">.</span><span class="ident" id="1471450">Pointer</span><span class="op" id="1471457">(</span><span class="op" id="1471458">&amp;</span><span class="ident" id="1471459">x</span><span class="op" id="1471460">[</span><span class="num" id="1471461">1</span><span class="op" id="1471462">]</span><span class="op" id="1471463">)</span><span class="op" id="1471464">,</span>&nbsp;<span class="num" id="1471466">4</span><span class="op" id="1471467">,</span>&nbsp;<span class="ident" id="1471469">f32hash</span><span class="op" id="1471476">(</span><span class="ident" id="1471477">unsafe</span><span class="op" id="1471483">.</span><span class="ident" id="1471484">Pointer</span><span class="op" id="1471491">(</span><span class="op" id="1471492">&amp;</span><span class="ident" id="1471493">x</span><span class="op" id="1471494">[</span><span class="num" id="1471495">0</span><span class="op" id="1471496">]</span><span class="op" id="1471497">)</span><span class="op" id="1471498">,</span>&nbsp;<span class="num" id="1471500">4</span><span class="op" id="1471501">,</span>&nbsp;<span class="ident" id="1471503">h</span><span class="op" id="1471504">)</span><span class="op" id="1471505">)</span><br>
<span class="lineno">135</span><span class="op" id="1471507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1471510">func</span>&nbsp;<span class="ident" id="1471515">c128hash</span><span class="op" id="1471523">(</span><span class="ident" id="1471524">p</span>&nbsp;<span class="ident" id="1471526">unsafe</span><span class="op" id="1471532">.</span><span class="ident" id="1471533">Pointer</span><span class="op" id="1471540">,</span>&nbsp;<span class="ident" id="1471542">s</span><span class="op" id="1471543">,</span>&nbsp;<span class="ident" id="1471545">h</span>&nbsp;<span class="builtintype" id="1471547">uintptr</span><span class="op" id="1471554">)</span>&nbsp;<span class="builtintype" id="1471556">uintptr</span>&nbsp;<span class="op" id="1471564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471567">x</span>&nbsp;<span class="op" id="1471569">:=</span>&nbsp;<span class="op" id="1471572">(</span><span class="op" id="1471573">*</span><span class="op" id="1471574">[</span><span class="num" id="1471575">2</span><span class="op" id="1471576">]</span><span class="builtintype" id="1471577">float64</span><span class="op" id="1471584">)</span><span class="op" id="1471585">(</span><span class="ident" id="1471586">p</span><span class="op" id="1471587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471590">return</span>&nbsp;<span class="ident" id="1471597">f64hash</span><span class="op" id="1471604">(</span><span class="ident" id="1471605">unsafe</span><span class="op" id="1471611">.</span><span class="ident" id="1471612">Pointer</span><span class="op" id="1471619">(</span><span class="op" id="1471620">&amp;</span><span class="ident" id="1471621">x</span><span class="op" id="1471622">[</span><span class="num" id="1471623">1</span><span class="op" id="1471624">]</span><span class="op" id="1471625">)</span><span class="op" id="1471626">,</span>&nbsp;<span class="num" id="1471628">8</span><span class="op" id="1471629">,</span>&nbsp;<span class="ident" id="1471631">f64hash</span><span class="op" id="1471638">(</span><span class="ident" id="1471639">unsafe</span><span class="op" id="1471645">.</span><span class="ident" id="1471646">Pointer</span><span class="op" id="1471653">(</span><span class="op" id="1471654">&amp;</span><span class="ident" id="1471655">x</span><span class="op" id="1471656">[</span><span class="num" id="1471657">0</span><span class="op" id="1471658">]</span><span class="op" id="1471659">)</span><span class="op" id="1471660">,</span>&nbsp;<span class="num" id="1471662">8</span><span class="op" id="1471663">,</span>&nbsp;<span class="ident" id="1471665">h</span><span class="op" id="1471666">)</span><span class="op" id="1471667">)</span><br>
<span class="lineno">140</span><span class="op" id="1471669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1471672">func</span>&nbsp;<span class="ident" id="1471677">interhash</span><span class="op" id="1471686">(</span><span class="ident" id="1471687">p</span>&nbsp;<span class="ident" id="1471689">unsafe</span><span class="op" id="1471695">.</span><span class="ident" id="1471696">Pointer</span><span class="op" id="1471703">,</span>&nbsp;<span class="ident" id="1471705">s</span><span class="op" id="1471706">,</span>&nbsp;<span class="ident" id="1471708">h</span>&nbsp;<span class="builtintype" id="1471710">uintptr</span><span class="op" id="1471717">)</span>&nbsp;<span class="builtintype" id="1471719">uintptr</span>&nbsp;<span class="op" id="1471727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471730">a</span>&nbsp;<span class="op" id="1471732">:=</span>&nbsp;<span class="op" id="1471735">(</span><span class="op" id="1471736">*</span><span class="ident" id="1471737">iface</span><span class="op" id="1471742">)</span><span class="op" id="1471743">(</span><span class="ident" id="1471744">p</span><span class="op" id="1471745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471748">tab</span>&nbsp;<span class="op" id="1471752">:=</span>&nbsp;<span class="ident" id="1471755">a</span><span class="op" id="1471756">.</span><span class="ident" id="1471757">tab</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471762">if</span>&nbsp;<span class="ident" id="1471765">tab</span>&nbsp;<span class="op" id="1471769">==</span>&nbsp;<span class="ident" id="1471772">nil</span>&nbsp;<span class="op" id="1471776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471780">return</span>&nbsp;<span class="ident" id="1471787">h</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1471790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471793">t</span>&nbsp;<span class="op" id="1471795">:=</span>&nbsp;<span class="ident" id="1471798">tab</span><span class="op" id="1471801">.</span><span class="ident" id="1471802">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1471809">fn</span>&nbsp;<span class="op" id="1471812">:=</span>&nbsp;<span class="ident" id="1471815">goalg</span><span class="op" id="1471820">(</span><span class="ident" id="1471821">t</span><span class="op" id="1471822">.</span><span class="ident" id="1471823">alg</span><span class="op" id="1471826">)</span><span class="op" id="1471827">.</span><span class="ident" id="1471828">hash</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471834">if</span>&nbsp;<span class="ident" id="1471837">fn</span>&nbsp;<span class="op" id="1471840">==</span>&nbsp;<span class="ident" id="1471843">nil</span>&nbsp;<span class="op" id="1471847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1471851">panic</span><span class="op" id="1471856">(</span><span class="ident" id="1471857">errorString</span><span class="op" id="1471868">(</span><span class="string" id="1471869">&#34;hash&nbsp;of&nbsp;unhashable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1471896">+</span>&nbsp;<span class="op" id="1471898">*</span><span class="ident" id="1471899">t</span><span class="op" id="1471900">.</span><span class="ident" id="1471901">_string</span><span class="op" id="1471908">)</span><span class="op" id="1471909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1471912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471915">if</span>&nbsp;<span class="ident" id="1471918">isDirectIface</span><span class="op" id="1471931">(</span><span class="ident" id="1471932">t</span><span class="op" id="1471933">)</span>&nbsp;<span class="op" id="1471935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1471939">return</span>&nbsp;<span class="ident" id="1471946">c1</span>&nbsp;<span class="op" id="1471949">*</span>&nbsp;<span class="ident" id="1471951">fn</span><span class="op" id="1471953">(</span><span class="ident" id="1471954">unsafe</span><span class="op" id="1471960">.</span><span class="ident" id="1471961">Pointer</span><span class="op" id="1471968">(</span><span class="op" id="1471969">&amp;</span><span class="ident" id="1471970">a</span><span class="op" id="1471971">.</span><span class="ident" id="1471972">data</span><span class="op" id="1471976">)</span><span class="op" id="1471977">,</span>&nbsp;<span class="builtintype" id="1471979">uintptr</span><span class="op" id="1471986">(</span><span class="ident" id="1471987">t</span><span class="op" id="1471988">.</span><span class="ident" id="1471989">size</span><span class="op" id="1471993">)</span><span class="op" id="1471994">,</span>&nbsp;<span class="ident" id="1471996">h</span><span class="op" id="1471997">^</span><span class="ident" id="1471998">c0</span><span class="op" id="1472000">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472003">}</span>&nbsp;<span class="keyword" id="1472005">else</span>&nbsp;<span class="op" id="1472010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472014">return</span>&nbsp;<span class="ident" id="1472021">c1</span>&nbsp;<span class="op" id="1472024">*</span>&nbsp;<span class="ident" id="1472026">fn</span><span class="op" id="1472028">(</span><span class="ident" id="1472029">a</span><span class="op" id="1472030">.</span><span class="ident" id="1472031">data</span><span class="op" id="1472035">,</span>&nbsp;<span class="builtintype" id="1472037">uintptr</span><span class="op" id="1472044">(</span><span class="ident" id="1472045">t</span><span class="op" id="1472046">.</span><span class="ident" id="1472047">size</span><span class="op" id="1472051">)</span><span class="op" id="1472052">,</span>&nbsp;<span class="ident" id="1472054">h</span><span class="op" id="1472055">^</span><span class="ident" id="1472056">c0</span><span class="op" id="1472058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472061">}</span><br>
<span class="lineno"></span><span class="op" id="1472063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="1472066">func</span>&nbsp;<span class="ident" id="1472071">nilinterhash</span><span class="op" id="1472083">(</span><span class="ident" id="1472084">p</span>&nbsp;<span class="ident" id="1472086">unsafe</span><span class="op" id="1472092">.</span><span class="ident" id="1472093">Pointer</span><span class="op" id="1472100">,</span>&nbsp;<span class="ident" id="1472102">s</span><span class="op" id="1472103">,</span>&nbsp;<span class="ident" id="1472105">h</span>&nbsp;<span class="builtintype" id="1472107">uintptr</span><span class="op" id="1472114">)</span>&nbsp;<span class="builtintype" id="1472116">uintptr</span>&nbsp;<span class="op" id="1472124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1472127">a</span>&nbsp;<span class="op" id="1472129">:=</span>&nbsp;<span class="op" id="1472132">(</span><span class="op" id="1472133">*</span><span class="ident" id="1472134">eface</span><span class="op" id="1472139">)</span><span class="op" id="1472140">(</span><span class="ident" id="1472141">p</span><span class="op" id="1472142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1472145">t</span>&nbsp;<span class="op" id="1472147">:=</span>&nbsp;<span class="ident" id="1472150">a</span><span class="op" id="1472151">.</span><span class="ident" id="1472152">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472159">if</span>&nbsp;<span class="ident" id="1472162">t</span>&nbsp;<span class="op" id="1472164">==</span>&nbsp;<span class="ident" id="1472167">nil</span>&nbsp;<span class="op" id="1472171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472175">return</span>&nbsp;<span class="ident" id="1472182">h</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1472188">fn</span>&nbsp;<span class="op" id="1472191">:=</span>&nbsp;<span class="ident" id="1472194">goalg</span><span class="op" id="1472199">(</span><span class="ident" id="1472200">t</span><span class="op" id="1472201">.</span><span class="ident" id="1472202">alg</span><span class="op" id="1472205">)</span><span class="op" id="1472206">.</span><span class="ident" id="1472207">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472213">if</span>&nbsp;<span class="ident" id="1472216">fn</span>&nbsp;<span class="op" id="1472219">==</span>&nbsp;<span class="ident" id="1472222">nil</span>&nbsp;<span class="op" id="1472226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1472230">panic</span><span class="op" id="1472235">(</span><span class="ident" id="1472236">errorString</span><span class="op" id="1472247">(</span><span class="string" id="1472248">&#34;hash&nbsp;of&nbsp;unhashable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1472275">+</span>&nbsp;<span class="op" id="1472277">*</span><span class="ident" id="1472278">t</span><span class="op" id="1472279">.</span><span class="ident" id="1472280">_string</span><span class="op" id="1472287">)</span><span class="op" id="1472288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472291">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472294">if</span>&nbsp;<span class="ident" id="1472297">isDirectIface</span><span class="op" id="1472310">(</span><span class="ident" id="1472311">t</span><span class="op" id="1472312">)</span>&nbsp;<span class="op" id="1472314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472318">return</span>&nbsp;<span class="ident" id="1472325">c1</span>&nbsp;<span class="op" id="1472328">*</span>&nbsp;<span class="ident" id="1472330">fn</span><span class="op" id="1472332">(</span><span class="ident" id="1472333">unsafe</span><span class="op" id="1472339">.</span><span class="ident" id="1472340">Pointer</span><span class="op" id="1472347">(</span><span class="op" id="1472348">&amp;</span><span class="ident" id="1472349">a</span><span class="op" id="1472350">.</span><span class="ident" id="1472351">data</span><span class="op" id="1472355">)</span><span class="op" id="1472356">,</span>&nbsp;<span class="builtintype" id="1472358">uintptr</span><span class="op" id="1472365">(</span><span class="ident" id="1472366">t</span><span class="op" id="1472367">.</span><span class="ident" id="1472368">size</span><span class="op" id="1472372">)</span><span class="op" id="1472373">,</span>&nbsp;<span class="ident" id="1472375">h</span><span class="op" id="1472376">^</span><span class="ident" id="1472377">c0</span><span class="op" id="1472379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472382">}</span>&nbsp;<span class="keyword" id="1472384">else</span>&nbsp;<span class="op" id="1472389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472393">return</span>&nbsp;<span class="ident" id="1472400">c1</span>&nbsp;<span class="op" id="1472403">*</span>&nbsp;<span class="ident" id="1472405">fn</span><span class="op" id="1472407">(</span><span class="ident" id="1472408">a</span><span class="op" id="1472409">.</span><span class="ident" id="1472410">data</span><span class="op" id="1472414">,</span>&nbsp;<span class="builtintype" id="1472416">uintptr</span><span class="op" id="1472423">(</span><span class="ident" id="1472424">t</span><span class="op" id="1472425">.</span><span class="ident" id="1472426">size</span><span class="op" id="1472430">)</span><span class="op" id="1472431">,</span>&nbsp;<span class="ident" id="1472433">h</span><span class="op" id="1472434">^</span><span class="ident" id="1472435">c0</span><span class="op" id="1472437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472440">}</span><br>
<span class="lineno">175</span><span class="op" id="1472442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1472445">func</span>&nbsp;<span class="ident" id="1472450">memequal</span><span class="op" id="1472458">(</span><span class="ident" id="1472459">p</span><span class="op" id="1472460">,</span>&nbsp;<span class="ident" id="1472462">q</span>&nbsp;<span class="ident" id="1472464">unsafe</span><span class="op" id="1472470">.</span><span class="ident" id="1472471">Pointer</span><span class="op" id="1472478">,</span>&nbsp;<span class="ident" id="1472480">size</span>&nbsp;<span class="builtintype" id="1472485">uintptr</span><span class="op" id="1472492">)</span>&nbsp;<span class="builtintype" id="1472494">bool</span>&nbsp;<span class="op" id="1472499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472502">if</span>&nbsp;<span class="ident" id="1472505">p</span>&nbsp;<span class="op" id="1472507">==</span>&nbsp;<span class="ident" id="1472510">q</span>&nbsp;<span class="op" id="1472512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472516">return</span>&nbsp;<span class="builtintype" id="1472523">true</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1472529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472532">return</span>&nbsp;<span class="ident" id="1472539">memeq</span><span class="op" id="1472544">(</span><span class="ident" id="1472545">p</span><span class="op" id="1472546">,</span>&nbsp;<span class="ident" id="1472548">q</span><span class="op" id="1472549">,</span>&nbsp;<span class="ident" id="1472551">size</span><span class="op" id="1472555">)</span><br>
<span class="lineno"></span><span class="op" id="1472557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1472560">func</span>&nbsp;<span class="ident" id="1472565">memequal0</span><span class="op" id="1472574">(</span><span class="ident" id="1472575">p</span><span class="op" id="1472576">,</span>&nbsp;<span class="ident" id="1472578">q</span>&nbsp;<span class="ident" id="1472580">unsafe</span><span class="op" id="1472586">.</span><span class="ident" id="1472587">Pointer</span><span class="op" id="1472594">,</span>&nbsp;<span class="ident" id="1472596">size</span>&nbsp;<span class="builtintype" id="1472601">uintptr</span><span class="op" id="1472608">)</span>&nbsp;<span class="builtintype" id="1472610">bool</span>&nbsp;<span class="op" id="1472615">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472618">return</span>&nbsp;<span class="builtintype" id="1472625">true</span><br>
<span class="lineno"></span><span class="op" id="1472630">}</span><br>
<span class="lineno"></span><span class="keyword" id="1472632">func</span>&nbsp;<span class="ident" id="1472637">memequal8</span><span class="op" id="1472646">(</span><span class="ident" id="1472647">p</span><span class="op" id="1472648">,</span>&nbsp;<span class="ident" id="1472650">q</span>&nbsp;<span class="ident" id="1472652">unsafe</span><span class="op" id="1472658">.</span><span class="ident" id="1472659">Pointer</span><span class="op" id="1472666">,</span>&nbsp;<span class="ident" id="1472668">size</span>&nbsp;<span class="builtintype" id="1472673">uintptr</span><span class="op" id="1472680">)</span>&nbsp;<span class="builtintype" id="1472682">bool</span>&nbsp;<span class="op" id="1472687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472690">return</span>&nbsp;<span class="op" id="1472697">*</span><span class="op" id="1472698">(</span><span class="op" id="1472699">*</span><span class="builtintype" id="1472700">int8</span><span class="op" id="1472704">)</span><span class="op" id="1472705">(</span><span class="ident" id="1472706">p</span><span class="op" id="1472707">)</span>&nbsp;<span class="op" id="1472709">==</span>&nbsp;<span class="op" id="1472712">*</span><span class="op" id="1472713">(</span><span class="op" id="1472714">*</span><span class="builtintype" id="1472715">int8</span><span class="op" id="1472719">)</span><span class="op" id="1472720">(</span><span class="ident" id="1472721">q</span><span class="op" id="1472722">)</span><br>
<span class="lineno"></span><span class="op" id="1472724">}</span><br>
<span class="lineno">190</span><span class="keyword" id="1472726">func</span>&nbsp;<span class="ident" id="1472731">memequal16</span><span class="op" id="1472741">(</span><span class="ident" id="1472742">p</span><span class="op" id="1472743">,</span>&nbsp;<span class="ident" id="1472745">q</span>&nbsp;<span class="ident" id="1472747">unsafe</span><span class="op" id="1472753">.</span><span class="ident" id="1472754">Pointer</span><span class="op" id="1472761">,</span>&nbsp;<span class="ident" id="1472763">size</span>&nbsp;<span class="builtintype" id="1472768">uintptr</span><span class="op" id="1472775">)</span>&nbsp;<span class="builtintype" id="1472777">bool</span>&nbsp;<span class="op" id="1472782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472785">return</span>&nbsp;<span class="op" id="1472792">*</span><span class="op" id="1472793">(</span><span class="op" id="1472794">*</span><span class="builtintype" id="1472795">int16</span><span class="op" id="1472800">)</span><span class="op" id="1472801">(</span><span class="ident" id="1472802">p</span><span class="op" id="1472803">)</span>&nbsp;<span class="op" id="1472805">==</span>&nbsp;<span class="op" id="1472808">*</span><span class="op" id="1472809">(</span><span class="op" id="1472810">*</span><span class="builtintype" id="1472811">int16</span><span class="op" id="1472816">)</span><span class="op" id="1472817">(</span><span class="ident" id="1472818">q</span><span class="op" id="1472819">)</span><br>
<span class="lineno"></span><span class="op" id="1472821">}</span><br>
<span class="lineno"></span><span class="keyword" id="1472823">func</span>&nbsp;<span class="ident" id="1472828">memequal32</span><span class="op" id="1472838">(</span><span class="ident" id="1472839">p</span><span class="op" id="1472840">,</span>&nbsp;<span class="ident" id="1472842">q</span>&nbsp;<span class="ident" id="1472844">unsafe</span><span class="op" id="1472850">.</span><span class="ident" id="1472851">Pointer</span><span class="op" id="1472858">,</span>&nbsp;<span class="ident" id="1472860">size</span>&nbsp;<span class="builtintype" id="1472865">uintptr</span><span class="op" id="1472872">)</span>&nbsp;<span class="builtintype" id="1472874">bool</span>&nbsp;<span class="op" id="1472879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472882">return</span>&nbsp;<span class="op" id="1472889">*</span><span class="op" id="1472890">(</span><span class="op" id="1472891">*</span><span class="builtintype" id="1472892">int32</span><span class="op" id="1472897">)</span><span class="op" id="1472898">(</span><span class="ident" id="1472899">p</span><span class="op" id="1472900">)</span>&nbsp;<span class="op" id="1472902">==</span>&nbsp;<span class="op" id="1472905">*</span><span class="op" id="1472906">(</span><span class="op" id="1472907">*</span><span class="builtintype" id="1472908">int32</span><span class="op" id="1472913">)</span><span class="op" id="1472914">(</span><span class="ident" id="1472915">q</span><span class="op" id="1472916">)</span><br>
<span class="lineno">195</span><span class="op" id="1472918">}</span><br>
<span class="lineno"></span><span class="keyword" id="1472920">func</span>&nbsp;<span class="ident" id="1472925">memequal64</span><span class="op" id="1472935">(</span><span class="ident" id="1472936">p</span><span class="op" id="1472937">,</span>&nbsp;<span class="ident" id="1472939">q</span>&nbsp;<span class="ident" id="1472941">unsafe</span><span class="op" id="1472947">.</span><span class="ident" id="1472948">Pointer</span><span class="op" id="1472955">,</span>&nbsp;<span class="ident" id="1472957">size</span>&nbsp;<span class="builtintype" id="1472962">uintptr</span><span class="op" id="1472969">)</span>&nbsp;<span class="builtintype" id="1472971">bool</span>&nbsp;<span class="op" id="1472976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1472979">return</span>&nbsp;<span class="op" id="1472986">*</span><span class="op" id="1472987">(</span><span class="op" id="1472988">*</span><span class="ident" id="1472989">int64</span><span class="op" id="1472994">)</span><span class="op" id="1472995">(</span><span class="ident" id="1472996">p</span><span class="op" id="1472997">)</span>&nbsp;<span class="op" id="1472999">==</span>&nbsp;<span class="op" id="1473002">*</span><span class="op" id="1473003">(</span><span class="op" id="1473004">*</span><span class="ident" id="1473005">int64</span><span class="op" id="1473010">)</span><span class="op" id="1473011">(</span><span class="ident" id="1473012">q</span><span class="op" id="1473013">)</span><br>
<span class="lineno"></span><span class="op" id="1473015">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473017">func</span>&nbsp;<span class="ident" id="1473022">memequal128</span><span class="op" id="1473033">(</span><span class="ident" id="1473034">p</span><span class="op" id="1473035">,</span>&nbsp;<span class="ident" id="1473037">q</span>&nbsp;<span class="ident" id="1473039">unsafe</span><span class="op" id="1473045">.</span><span class="ident" id="1473046">Pointer</span><span class="op" id="1473053">,</span>&nbsp;<span class="ident" id="1473055">size</span>&nbsp;<span class="builtintype" id="1473060">uintptr</span><span class="op" id="1473067">)</span>&nbsp;<span class="builtintype" id="1473069">bool</span>&nbsp;<span class="op" id="1473074">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473077">return</span>&nbsp;<span class="op" id="1473084">*</span><span class="op" id="1473085">(</span><span class="op" id="1473086">*</span><span class="op" id="1473087">[</span><span class="num" id="1473088">2</span><span class="op" id="1473089">]</span><span class="ident" id="1473090">int64</span><span class="op" id="1473095">)</span><span class="op" id="1473096">(</span><span class="ident" id="1473097">p</span><span class="op" id="1473098">)</span>&nbsp;<span class="op" id="1473100">==</span>&nbsp;<span class="op" id="1473103">*</span><span class="op" id="1473104">(</span><span class="op" id="1473105">*</span><span class="op" id="1473106">[</span><span class="num" id="1473107">2</span><span class="op" id="1473108">]</span><span class="ident" id="1473109">int64</span><span class="op" id="1473114">)</span><span class="op" id="1473115">(</span><span class="ident" id="1473116">q</span><span class="op" id="1473117">)</span><br>
<span class="lineno"></span><span class="op" id="1473119">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473121">func</span>&nbsp;<span class="ident" id="1473126">f32equal</span><span class="op" id="1473134">(</span><span class="ident" id="1473135">p</span><span class="op" id="1473136">,</span>&nbsp;<span class="ident" id="1473138">q</span>&nbsp;<span class="ident" id="1473140">unsafe</span><span class="op" id="1473146">.</span><span class="ident" id="1473147">Pointer</span><span class="op" id="1473154">,</span>&nbsp;<span class="ident" id="1473156">size</span>&nbsp;<span class="builtintype" id="1473161">uintptr</span><span class="op" id="1473168">)</span>&nbsp;<span class="builtintype" id="1473170">bool</span>&nbsp;<span class="op" id="1473175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473178">return</span>&nbsp;<span class="op" id="1473185">*</span><span class="op" id="1473186">(</span><span class="op" id="1473187">*</span><span class="builtintype" id="1473188">float32</span><span class="op" id="1473195">)</span><span class="op" id="1473196">(</span><span class="ident" id="1473197">p</span><span class="op" id="1473198">)</span>&nbsp;<span class="op" id="1473200">==</span>&nbsp;<span class="op" id="1473203">*</span><span class="op" id="1473204">(</span><span class="op" id="1473205">*</span><span class="builtintype" id="1473206">float32</span><span class="op" id="1473213">)</span><span class="op" id="1473214">(</span><span class="ident" id="1473215">q</span><span class="op" id="1473216">)</span><br>
<span class="lineno"></span><span class="op" id="1473218">}</span><br>
<span class="lineno">205</span><span class="keyword" id="1473220">func</span>&nbsp;<span class="ident" id="1473225">f64equal</span><span class="op" id="1473233">(</span><span class="ident" id="1473234">p</span><span class="op" id="1473235">,</span>&nbsp;<span class="ident" id="1473237">q</span>&nbsp;<span class="ident" id="1473239">unsafe</span><span class="op" id="1473245">.</span><span class="ident" id="1473246">Pointer</span><span class="op" id="1473253">,</span>&nbsp;<span class="ident" id="1473255">size</span>&nbsp;<span class="builtintype" id="1473260">uintptr</span><span class="op" id="1473267">)</span>&nbsp;<span class="builtintype" id="1473269">bool</span>&nbsp;<span class="op" id="1473274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473277">return</span>&nbsp;<span class="op" id="1473284">*</span><span class="op" id="1473285">(</span><span class="op" id="1473286">*</span><span class="builtintype" id="1473287">float64</span><span class="op" id="1473294">)</span><span class="op" id="1473295">(</span><span class="ident" id="1473296">p</span><span class="op" id="1473297">)</span>&nbsp;<span class="op" id="1473299">==</span>&nbsp;<span class="op" id="1473302">*</span><span class="op" id="1473303">(</span><span class="op" id="1473304">*</span><span class="builtintype" id="1473305">float64</span><span class="op" id="1473312">)</span><span class="op" id="1473313">(</span><span class="ident" id="1473314">q</span><span class="op" id="1473315">)</span><br>
<span class="lineno"></span><span class="op" id="1473317">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473319">func</span>&nbsp;<span class="ident" id="1473324">c64equal</span><span class="op" id="1473332">(</span><span class="ident" id="1473333">p</span><span class="op" id="1473334">,</span>&nbsp;<span class="ident" id="1473336">q</span>&nbsp;<span class="ident" id="1473338">unsafe</span><span class="op" id="1473344">.</span><span class="ident" id="1473345">Pointer</span><span class="op" id="1473352">,</span>&nbsp;<span class="ident" id="1473354">size</span>&nbsp;<span class="builtintype" id="1473359">uintptr</span><span class="op" id="1473366">)</span>&nbsp;<span class="builtintype" id="1473368">bool</span>&nbsp;<span class="op" id="1473373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473376">return</span>&nbsp;<span class="op" id="1473383">*</span><span class="op" id="1473384">(</span><span class="op" id="1473385">*</span><span class="builtintype" id="1473386">complex64</span><span class="op" id="1473395">)</span><span class="op" id="1473396">(</span><span class="ident" id="1473397">p</span><span class="op" id="1473398">)</span>&nbsp;<span class="op" id="1473400">==</span>&nbsp;<span class="op" id="1473403">*</span><span class="op" id="1473404">(</span><span class="op" id="1473405">*</span><span class="builtintype" id="1473406">complex64</span><span class="op" id="1473415">)</span><span class="op" id="1473416">(</span><span class="ident" id="1473417">q</span><span class="op" id="1473418">)</span><br>
<span class="lineno">210</span><span class="op" id="1473420">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473422">func</span>&nbsp;<span class="ident" id="1473427">c128equal</span><span class="op" id="1473436">(</span><span class="ident" id="1473437">p</span><span class="op" id="1473438">,</span>&nbsp;<span class="ident" id="1473440">q</span>&nbsp;<span class="ident" id="1473442">unsafe</span><span class="op" id="1473448">.</span><span class="ident" id="1473449">Pointer</span><span class="op" id="1473456">,</span>&nbsp;<span class="ident" id="1473458">size</span>&nbsp;<span class="builtintype" id="1473463">uintptr</span><span class="op" id="1473470">)</span>&nbsp;<span class="builtintype" id="1473472">bool</span>&nbsp;<span class="op" id="1473477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473480">return</span>&nbsp;<span class="op" id="1473487">*</span><span class="op" id="1473488">(</span><span class="op" id="1473489">*</span><span class="builtintype" id="1473490">complex128</span><span class="op" id="1473500">)</span><span class="op" id="1473501">(</span><span class="ident" id="1473502">p</span><span class="op" id="1473503">)</span>&nbsp;<span class="op" id="1473505">==</span>&nbsp;<span class="op" id="1473508">*</span><span class="op" id="1473509">(</span><span class="op" id="1473510">*</span><span class="builtintype" id="1473511">complex128</span><span class="op" id="1473521">)</span><span class="op" id="1473522">(</span><span class="ident" id="1473523">q</span><span class="op" id="1473524">)</span><br>
<span class="lineno"></span><span class="op" id="1473526">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473528">func</span>&nbsp;<span class="ident" id="1473533">strequal</span><span class="op" id="1473541">(</span><span class="ident" id="1473542">p</span><span class="op" id="1473543">,</span>&nbsp;<span class="ident" id="1473545">q</span>&nbsp;<span class="ident" id="1473547">unsafe</span><span class="op" id="1473553">.</span><span class="ident" id="1473554">Pointer</span><span class="op" id="1473561">,</span>&nbsp;<span class="ident" id="1473563">size</span>&nbsp;<span class="builtintype" id="1473568">uintptr</span><span class="op" id="1473575">)</span>&nbsp;<span class="builtintype" id="1473577">bool</span>&nbsp;<span class="op" id="1473582">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473585">return</span>&nbsp;<span class="op" id="1473592">*</span><span class="op" id="1473593">(</span><span class="op" id="1473594">*</span><span class="builtintype" id="1473595">string</span><span class="op" id="1473601">)</span><span class="op" id="1473602">(</span><span class="ident" id="1473603">p</span><span class="op" id="1473604">)</span>&nbsp;<span class="op" id="1473606">==</span>&nbsp;<span class="op" id="1473609">*</span><span class="op" id="1473610">(</span><span class="op" id="1473611">*</span><span class="builtintype" id="1473612">string</span><span class="op" id="1473618">)</span><span class="op" id="1473619">(</span><span class="ident" id="1473620">q</span><span class="op" id="1473621">)</span><br>
<span class="lineno"></span><span class="op" id="1473623">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473625">func</span>&nbsp;<span class="ident" id="1473630">interequal</span><span class="op" id="1473640">(</span><span class="ident" id="1473641">p</span><span class="op" id="1473642">,</span>&nbsp;<span class="ident" id="1473644">q</span>&nbsp;<span class="ident" id="1473646">unsafe</span><span class="op" id="1473652">.</span><span class="ident" id="1473653">Pointer</span><span class="op" id="1473660">,</span>&nbsp;<span class="ident" id="1473662">size</span>&nbsp;<span class="builtintype" id="1473667">uintptr</span><span class="op" id="1473674">)</span>&nbsp;<span class="builtintype" id="1473676">bool</span>&nbsp;<span class="op" id="1473681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473684">return</span>&nbsp;<span class="ident" id="1473691">ifaceeq</span><span class="op" id="1473698">(</span><span class="op" id="1473699">*</span><span class="op" id="1473700">(</span><span class="op" id="1473701">*</span><span class="keyword" id="1473702">interface</span>&nbsp;<span class="op" id="1473712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1473716">f</span><span class="op" id="1473717">(</span><span class="op" id="1473718">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1473721">}</span><span class="op" id="1473722">)</span><span class="op" id="1473723">(</span><span class="ident" id="1473724">p</span><span class="op" id="1473725">)</span><span class="op" id="1473726">,</span>&nbsp;<span class="op" id="1473728">*</span><span class="op" id="1473729">(</span><span class="op" id="1473730">*</span><span class="keyword" id="1473731">interface</span>&nbsp;<span class="op" id="1473741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1473745">f</span><span class="op" id="1473746">(</span><span class="op" id="1473747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1473750">}</span><span class="op" id="1473751">)</span><span class="op" id="1473752">(</span><span class="ident" id="1473753">q</span><span class="op" id="1473754">)</span><span class="op" id="1473755">)</span><br>
<span class="lineno"></span><span class="op" id="1473757">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473759">func</span>&nbsp;<span class="ident" id="1473764">nilinterequal</span><span class="op" id="1473777">(</span><span class="ident" id="1473778">p</span><span class="op" id="1473779">,</span>&nbsp;<span class="ident" id="1473781">q</span>&nbsp;<span class="ident" id="1473783">unsafe</span><span class="op" id="1473789">.</span><span class="ident" id="1473790">Pointer</span><span class="op" id="1473797">,</span>&nbsp;<span class="ident" id="1473799">size</span>&nbsp;<span class="builtintype" id="1473804">uintptr</span><span class="op" id="1473811">)</span>&nbsp;<span class="builtintype" id="1473813">bool</span>&nbsp;<span class="op" id="1473818">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1473821">return</span>&nbsp;<span class="ident" id="1473828">efaceeq</span><span class="op" id="1473835">(</span><span class="op" id="1473836">*</span><span class="op" id="1473837">(</span><span class="op" id="1473838">*</span><span class="keyword" id="1473839">interface</span><span class="op" id="1473848">{</span><span class="op" id="1473849">}</span><span class="op" id="1473850">)</span><span class="op" id="1473851">(</span><span class="ident" id="1473852">p</span><span class="op" id="1473853">)</span><span class="op" id="1473854">,</span>&nbsp;<span class="op" id="1473856">*</span><span class="op" id="1473857">(</span><span class="op" id="1473858">*</span><span class="keyword" id="1473859">interface</span><span class="op" id="1473868">{</span><span class="op" id="1473869">}</span><span class="op" id="1473870">)</span><span class="op" id="1473871">(</span><span class="ident" id="1473872">q</span><span class="op" id="1473873">)</span><span class="op" id="1473874">)</span><br>
<span class="lineno"></span><span class="op" id="1473876">}</span><br>
<span class="lineno"></span><span class="keyword" id="1473878">func</span>&nbsp;<span class="ident" id="1473883">efaceeq</span><span class="op" id="1473890">(</span><span class="ident" id="1473891">p</span><span class="op" id="1473892">,</span>&nbsp;<span class="ident" id="1473894">q</span>&nbsp;<span class="keyword" id="1473896">interface</span><span class="op" id="1473905">{</span><span class="op" id="1473906">}</span><span class="op" id="1473907">)</span>&nbsp;<span class="builtintype" id="1473909">bool</span>&nbsp;<span class="op" id="1473914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1473917">x</span>&nbsp;<span class="op" id="1473919">:=</span>&nbsp;<span class="op" id="1473922">(</span><span class="op" id="1473923">*</span><span class="ident" id="1473924">eface</span><span class="op" id="1473929">)</span><span class="op" id="1473930">(</span><span class="ident" id="1473931">unsafe</span><span class="op" id="1473937">.</span><span class="ident" id="1473938">Pointer</span><span class="op" id="1473945">(</span><span class="op" id="1473946">&amp;</span><span class="ident" id="1473947">p</span><span class="op" id="1473948">)</span><span class="op" id="1473949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1473952">y</span>&nbsp;<span class="op" id="1473954">:=</span>&nbsp;<span class="op" id="1473957">(</span><span class="op" id="1473958">*</span><span class="ident" id="1473959">eface</span><span class="op" id="1473964">)</span><span class="op" id="1473965">(</span><span class="ident" id="1473966">unsafe</span><span class="op" id="1473972">.</span><span class="ident" id="1473973">Pointer</span><span class="op" id="1473980">(</span><span class="op" id="1473981">&amp;</span><span class="ident" id="1473982">q</span><span class="op" id="1473983">)</span><span class="op" id="1473984">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1473987">t</span>&nbsp;<span class="op" id="1473989">:=</span>&nbsp;<span class="ident" id="1473992">x</span><span class="op" id="1473993">.</span><span class="ident" id="1473994">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474001">if</span>&nbsp;<span class="ident" id="1474004">t</span>&nbsp;<span class="op" id="1474006">!=</span>&nbsp;<span class="ident" id="1474009">y</span><span class="op" id="1474010">.</span><span class="ident" id="1474011">_type</span>&nbsp;<span class="op" id="1474017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474021">return</span>&nbsp;<span class="builtintype" id="1474028">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474038">if</span>&nbsp;<span class="ident" id="1474041">t</span>&nbsp;<span class="op" id="1474043">==</span>&nbsp;<span class="ident" id="1474046">nil</span>&nbsp;<span class="op" id="1474050">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474054">return</span>&nbsp;<span class="builtintype" id="1474061">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474070">eq</span>&nbsp;<span class="op" id="1474073">:=</span>&nbsp;<span class="ident" id="1474076">goalg</span><span class="op" id="1474081">(</span><span class="ident" id="1474082">t</span><span class="op" id="1474083">.</span><span class="ident" id="1474084">alg</span><span class="op" id="1474087">)</span><span class="op" id="1474088">.</span><span class="ident" id="1474089">equal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474096">if</span>&nbsp;<span class="ident" id="1474099">eq</span>&nbsp;<span class="op" id="1474102">==</span>&nbsp;<span class="ident" id="1474105">nil</span>&nbsp;<span class="op" id="1474109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1474113">panic</span><span class="op" id="1474118">(</span><span class="ident" id="1474119">errorString</span><span class="op" id="1474130">(</span><span class="string" id="1474131">&#34;comparing&nbsp;uncomparable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1474162">+</span>&nbsp;<span class="op" id="1474164">*</span><span class="ident" id="1474165">t</span><span class="op" id="1474166">.</span><span class="ident" id="1474167">_string</span><span class="op" id="1474174">)</span><span class="op" id="1474175">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474181">if</span>&nbsp;<span class="ident" id="1474184">isDirectIface</span><span class="op" id="1474197">(</span><span class="ident" id="1474198">t</span><span class="op" id="1474199">)</span>&nbsp;<span class="op" id="1474201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474205">return</span>&nbsp;<span class="ident" id="1474212">eq</span><span class="op" id="1474214">(</span><span class="ident" id="1474215">noescape</span><span class="op" id="1474223">(</span><span class="ident" id="1474224">unsafe</span><span class="op" id="1474230">.</span><span class="ident" id="1474231">Pointer</span><span class="op" id="1474238">(</span><span class="op" id="1474239">&amp;</span><span class="ident" id="1474240">x</span><span class="op" id="1474241">.</span><span class="ident" id="1474242">data</span><span class="op" id="1474246">)</span><span class="op" id="1474247">)</span><span class="op" id="1474248">,</span>&nbsp;<span class="ident" id="1474250">noescape</span><span class="op" id="1474258">(</span><span class="ident" id="1474259">unsafe</span><span class="op" id="1474265">.</span><span class="ident" id="1474266">Pointer</span><span class="op" id="1474273">(</span><span class="op" id="1474274">&amp;</span><span class="ident" id="1474275">y</span><span class="op" id="1474276">.</span><span class="ident" id="1474277">data</span><span class="op" id="1474281">)</span><span class="op" id="1474282">)</span><span class="op" id="1474283">,</span>&nbsp;<span class="builtintype" id="1474285">uintptr</span><span class="op" id="1474292">(</span><span class="ident" id="1474293">t</span><span class="op" id="1474294">.</span><span class="ident" id="1474295">size</span><span class="op" id="1474299">)</span><span class="op" id="1474300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474306">return</span>&nbsp;<span class="ident" id="1474313">eq</span><span class="op" id="1474315">(</span><span class="ident" id="1474316">x</span><span class="op" id="1474317">.</span><span class="ident" id="1474318">data</span><span class="op" id="1474322">,</span>&nbsp;<span class="ident" id="1474324">y</span><span class="op" id="1474325">.</span><span class="ident" id="1474326">data</span><span class="op" id="1474330">,</span>&nbsp;<span class="builtintype" id="1474332">uintptr</span><span class="op" id="1474339">(</span><span class="ident" id="1474340">t</span><span class="op" id="1474341">.</span><span class="ident" id="1474342">size</span><span class="op" id="1474346">)</span><span class="op" id="1474347">)</span><br>
<span class="lineno">245</span><span class="op" id="1474349">}</span><br>
<span class="lineno"></span><span class="keyword" id="1474351">func</span>&nbsp;<span class="ident" id="1474356">ifaceeq</span><span class="op" id="1474363">(</span><span class="ident" id="1474364">p</span><span class="op" id="1474365">,</span>&nbsp;<span class="ident" id="1474367">q</span>&nbsp;<span class="keyword" id="1474369">interface</span>&nbsp;<span class="op" id="1474379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474382">f</span><span class="op" id="1474383">(</span><span class="op" id="1474384">)</span><br>
<span class="lineno"></span><span class="op" id="1474386">}</span><span class="op" id="1474387">)</span>&nbsp;<span class="builtintype" id="1474389">bool</span>&nbsp;<span class="op" id="1474394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474397">x</span>&nbsp;<span class="op" id="1474399">:=</span>&nbsp;<span class="op" id="1474402">(</span><span class="op" id="1474403">*</span><span class="ident" id="1474404">iface</span><span class="op" id="1474409">)</span><span class="op" id="1474410">(</span><span class="ident" id="1474411">unsafe</span><span class="op" id="1474417">.</span><span class="ident" id="1474418">Pointer</span><span class="op" id="1474425">(</span><span class="op" id="1474426">&amp;</span><span class="ident" id="1474427">p</span><span class="op" id="1474428">)</span><span class="op" id="1474429">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474432">y</span>&nbsp;<span class="op" id="1474434">:=</span>&nbsp;<span class="op" id="1474437">(</span><span class="op" id="1474438">*</span><span class="ident" id="1474439">iface</span><span class="op" id="1474444">)</span><span class="op" id="1474445">(</span><span class="ident" id="1474446">unsafe</span><span class="op" id="1474452">.</span><span class="ident" id="1474453">Pointer</span><span class="op" id="1474460">(</span><span class="op" id="1474461">&amp;</span><span class="ident" id="1474462">q</span><span class="op" id="1474463">)</span><span class="op" id="1474464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474467">xtab</span>&nbsp;<span class="op" id="1474472">:=</span>&nbsp;<span class="ident" id="1474475">x</span><span class="op" id="1474476">.</span><span class="ident" id="1474477">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474482">if</span>&nbsp;<span class="ident" id="1474485">xtab</span>&nbsp;<span class="op" id="1474490">!=</span>&nbsp;<span class="ident" id="1474493">y</span><span class="op" id="1474494">.</span><span class="ident" id="1474495">tab</span>&nbsp;<span class="op" id="1474499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474503">return</span>&nbsp;<span class="builtintype" id="1474510">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474517">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474520">if</span>&nbsp;<span class="ident" id="1474523">xtab</span>&nbsp;<span class="op" id="1474528">==</span>&nbsp;<span class="ident" id="1474531">nil</span>&nbsp;<span class="op" id="1474535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474539">return</span>&nbsp;<span class="builtintype" id="1474546">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474555">t</span>&nbsp;<span class="op" id="1474557">:=</span>&nbsp;<span class="ident" id="1474560">xtab</span><span class="op" id="1474564">.</span><span class="ident" id="1474565">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1474572">eq</span>&nbsp;<span class="op" id="1474575">:=</span>&nbsp;<span class="ident" id="1474578">goalg</span><span class="op" id="1474583">(</span><span class="ident" id="1474584">t</span><span class="op" id="1474585">.</span><span class="ident" id="1474586">alg</span><span class="op" id="1474589">)</span><span class="op" id="1474590">.</span><span class="ident" id="1474591">equal</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474598">if</span>&nbsp;<span class="ident" id="1474601">eq</span>&nbsp;<span class="op" id="1474604">==</span>&nbsp;<span class="ident" id="1474607">nil</span>&nbsp;<span class="op" id="1474611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1474615">panic</span><span class="op" id="1474620">(</span><span class="ident" id="1474621">errorString</span><span class="op" id="1474632">(</span><span class="string" id="1474633">&#34;comparing&nbsp;uncomparable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1474664">+</span>&nbsp;<span class="op" id="1474666">*</span><span class="ident" id="1474667">t</span><span class="op" id="1474668">.</span><span class="ident" id="1474669">_string</span><span class="op" id="1474676">)</span><span class="op" id="1474677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474683">if</span>&nbsp;<span class="ident" id="1474686">isDirectIface</span><span class="op" id="1474699">(</span><span class="ident" id="1474700">t</span><span class="op" id="1474701">)</span>&nbsp;<span class="op" id="1474703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474707">return</span>&nbsp;<span class="ident" id="1474714">eq</span><span class="op" id="1474716">(</span><span class="ident" id="1474717">noescape</span><span class="op" id="1474725">(</span><span class="ident" id="1474726">unsafe</span><span class="op" id="1474732">.</span><span class="ident" id="1474733">Pointer</span><span class="op" id="1474740">(</span><span class="op" id="1474741">&amp;</span><span class="ident" id="1474742">x</span><span class="op" id="1474743">.</span><span class="ident" id="1474744">data</span><span class="op" id="1474748">)</span><span class="op" id="1474749">)</span><span class="op" id="1474750">,</span>&nbsp;<span class="ident" id="1474752">noescape</span><span class="op" id="1474760">(</span><span class="ident" id="1474761">unsafe</span><span class="op" id="1474767">.</span><span class="ident" id="1474768">Pointer</span><span class="op" id="1474775">(</span><span class="op" id="1474776">&amp;</span><span class="ident" id="1474777">y</span><span class="op" id="1474778">.</span><span class="ident" id="1474779">data</span><span class="op" id="1474783">)</span><span class="op" id="1474784">)</span><span class="op" id="1474785">,</span>&nbsp;<span class="builtintype" id="1474787">uintptr</span><span class="op" id="1474794">(</span><span class="ident" id="1474795">t</span><span class="op" id="1474796">.</span><span class="ident" id="1474797">size</span><span class="op" id="1474801">)</span><span class="op" id="1474802">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1474805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474808">return</span>&nbsp;<span class="ident" id="1474815">eq</span><span class="op" id="1474817">(</span><span class="ident" id="1474818">x</span><span class="op" id="1474819">.</span><span class="ident" id="1474820">data</span><span class="op" id="1474824">,</span>&nbsp;<span class="ident" id="1474826">y</span><span class="op" id="1474827">.</span><span class="ident" id="1474828">data</span><span class="op" id="1474832">,</span>&nbsp;<span class="builtintype" id="1474834">uintptr</span><span class="op" id="1474841">(</span><span class="ident" id="1474842">t</span><span class="op" id="1474843">.</span><span class="ident" id="1474844">size</span><span class="op" id="1474848">)</span><span class="op" id="1474849">)</span><br>
<span class="lineno"></span><span class="op" id="1474851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1474854">//&nbsp;Testing&nbsp;adapters&nbsp;for&nbsp;hash&nbsp;quality&nbsp;tests&nbsp;(see&nbsp;hash_test.go)</span><br>
<span class="lineno">270</span><span class="keyword" id="1474916">func</span>&nbsp;<span class="ident" id="1474921">haveGoodHash</span><span class="op" id="1474933">(</span><span class="op" id="1474934">)</span>&nbsp;<span class="builtintype" id="1474936">bool</span>&nbsp;<span class="op" id="1474941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1474944">return</span>&nbsp;<span class="ident" id="1474951">useAeshash</span><br>
<span class="lineno"></span><span class="op" id="1474962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1474965">func</span>&nbsp;<span class="ident" id="1474970">stringHash</span><span class="op" id="1474980">(</span><span class="ident" id="1474981">s</span>&nbsp;<span class="builtintype" id="1474983">string</span><span class="op" id="1474989">,</span>&nbsp;<span class="ident" id="1474991">seed</span>&nbsp;<span class="builtintype" id="1474996">uintptr</span><span class="op" id="1475003">)</span>&nbsp;<span class="builtintype" id="1475005">uintptr</span>&nbsp;<span class="op" id="1475013">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1475016">return</span>&nbsp;<span class="ident" id="1475023">algarray</span><span class="op" id="1475031">[</span><span class="ident" id="1475032">alg_STRING</span><span class="op" id="1475042">]</span><span class="op" id="1475043">.</span><span class="ident" id="1475044">hash</span><span class="op" id="1475048">(</span><span class="ident" id="1475049">noescape</span><span class="op" id="1475057">(</span><span class="ident" id="1475058">unsafe</span><span class="op" id="1475064">.</span><span class="ident" id="1475065">Pointer</span><span class="op" id="1475072">(</span><span class="op" id="1475073">&amp;</span><span class="ident" id="1475074">s</span><span class="op" id="1475075">)</span><span class="op" id="1475076">)</span><span class="op" id="1475077">,</span>&nbsp;<span class="ident" id="1475079">unsafe</span><span class="op" id="1475085">.</span><span class="ident" id="1475086">Sizeof</span><span class="op" id="1475092">(</span><span class="ident" id="1475093">s</span><span class="op" id="1475094">)</span><span class="op" id="1475095">,</span>&nbsp;<span class="ident" id="1475097">seed</span><span class="op" id="1475101">)</span><br>
<span class="lineno"></span><span class="op" id="1475103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1475106">func</span>&nbsp;<span class="ident" id="1475111">bytesHash</span><span class="op" id="1475120">(</span><span class="ident" id="1475121">b</span>&nbsp;<span class="op" id="1475123">[</span><span class="op" id="1475124">]</span><span class="builtintype" id="1475125">byte</span><span class="op" id="1475129">,</span>&nbsp;<span class="ident" id="1475131">seed</span>&nbsp;<span class="builtintype" id="1475136">uintptr</span><span class="op" id="1475143">)</span>&nbsp;<span class="builtintype" id="1475145">uintptr</span>&nbsp;<span class="op" id="1475153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1475156">s</span>&nbsp;<span class="op" id="1475158">:=</span>&nbsp;<span class="op" id="1475161">(</span><span class="op" id="1475162">*</span><span class="ident" id="1475163">sliceStruct</span><span class="op" id="1475174">)</span><span class="op" id="1475175">(</span><span class="ident" id="1475176">unsafe</span><span class="op" id="1475182">.</span><span class="ident" id="1475183">Pointer</span><span class="op" id="1475190">(</span><span class="op" id="1475191">&amp;</span><span class="ident" id="1475192">b</span><span class="op" id="1475193">)</span><span class="op" id="1475194">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1475197">return</span>&nbsp;<span class="ident" id="1475204">algarray</span><span class="op" id="1475212">[</span><span class="ident" id="1475213">alg_MEM</span><span class="op" id="1475220">]</span><span class="op" id="1475221">.</span><span class="ident" id="1475222">hash</span><span class="op" id="1475226">(</span><span class="ident" id="1475227">s</span><span class="op" id="1475228">.</span><span class="ident" id="1475229">array</span><span class="op" id="1475234">,</span>&nbsp;<span class="builtintype" id="1475236">uintptr</span><span class="op" id="1475243">(</span><span class="ident" id="1475244">s</span><span class="op" id="1475245">.</span><span class="builtinfunc" id="1475246">len</span><span class="op" id="1475249">)</span><span class="op" id="1475250">,</span>&nbsp;<span class="ident" id="1475252">seed</span><span class="op" id="1475256">)</span><br>
<span class="lineno"></span><span class="op" id="1475258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1475261">func</span>&nbsp;<span class="ident" id="1475266">int32Hash</span><span class="op" id="1475275">(</span><span class="ident" id="1475276">i</span>&nbsp;<span class="builtintype" id="1475278">uint32</span><span class="op" id="1475284">,</span>&nbsp;<span class="ident" id="1475286">seed</span>&nbsp;<span class="builtintype" id="1475291">uintptr</span><span class="op" id="1475298">)</span>&nbsp;<span class="builtintype" id="1475300">uintptr</span>&nbsp;<span class="op" id="1475308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1475311">return</span>&nbsp;<span class="ident" id="1475318">algarray</span><span class="op" id="1475326">[</span><span class="ident" id="1475327">alg_MEM32</span><span class="op" id="1475336">]</span><span class="op" id="1475337">.</span><span class="ident" id="1475338">hash</span><span class="op" id="1475342">(</span><span class="ident" id="1475343">noescape</span><span class="op" id="1475351">(</span><span class="ident" id="1475352">unsafe</span><span class="op" id="1475358">.</span><span class="ident" id="1475359">Pointer</span><span class="op" id="1475366">(</span><span class="op" id="1475367">&amp;</span><span class="ident" id="1475368">i</span><span class="op" id="1475369">)</span><span class="op" id="1475370">)</span><span class="op" id="1475371">,</span>&nbsp;<span class="num" id="1475373">4</span><span class="op" id="1475374">,</span>&nbsp;<span class="ident" id="1475376">seed</span><span class="op" id="1475380">)</span><br>
<span class="lineno">285</span><span class="op" id="1475382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1475385">func</span>&nbsp;<span class="ident" id="1475390">int64Hash</span><span class="op" id="1475399">(</span><span class="ident" id="1475400">i</span>&nbsp;<span class="ident" id="1475402">uint64</span><span class="op" id="1475408">,</span>&nbsp;<span class="ident" id="1475410">seed</span>&nbsp;<span class="builtintype" id="1475415">uintptr</span><span class="op" id="1475422">)</span>&nbsp;<span class="builtintype" id="1475424">uintptr</span>&nbsp;<span class="op" id="1475432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1475435">return</span>&nbsp;<span class="ident" id="1475442">algarray</span><span class="op" id="1475450">[</span><span class="ident" id="1475451">alg_MEM64</span><span class="op" id="1475460">]</span><span class="op" id="1475461">.</span><span class="ident" id="1475462">hash</span><span class="op" id="1475466">(</span><span class="ident" id="1475467">noescape</span><span class="op" id="1475475">(</span><span class="ident" id="1475476">unsafe</span><span class="op" id="1475482">.</span><span class="ident" id="1475483">Pointer</span><span class="op" id="1475490">(</span><span class="op" id="1475491">&amp;</span><span class="ident" id="1475492">i</span><span class="op" id="1475493">)</span><span class="op" id="1475494">)</span><span class="op" id="1475495">,</span>&nbsp;<span class="num" id="1475497">8</span><span class="op" id="1475498">,</span>&nbsp;<span class="ident" id="1475500">seed</span><span class="op" id="1475504">)</span><br>
<span class="lineno"></span><span class="op" id="1475506">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="1475509">func</span>&nbsp;<span class="ident" id="1475514">efaceHash</span><span class="op" id="1475523">(</span><span class="ident" id="1475524">i</span>&nbsp;<span class="keyword" id="1475526">interface</span><span class="op" id="1475535">{</span><span class="op" id="1475536">}</span><span class="op" id="1475537">,</span>&nbsp;<span class="ident" id="1475539">seed</span>&nbsp;<span class="builtintype" id="1475544">uintptr</span><span class="op" id="1475551">)</span>&nbsp;<span class="builtintype" id="1475553">uintptr</span>&nbsp;<span class="op" id="1475561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1475564">return</span>&nbsp;<span class="ident" id="1475571">algarray</span><span class="op" id="1475579">[</span><span class="ident" id="1475580">alg_NILINTER</span><span class="op" id="1475592">]</span><span class="op" id="1475593">.</span><span class="ident" id="1475594">hash</span><span class="op" id="1475598">(</span><span class="ident" id="1475599">noescape</span><span class="op" id="1475607">(</span><span class="ident" id="1475608">unsafe</span><span class="op" id="1475614">.</span><span class="ident" id="1475615">Pointer</span><span class="op" id="1475622">(</span><span class="op" id="1475623">&amp;</span><span class="ident" id="1475624">i</span><span class="op" id="1475625">)</span><span class="op" id="1475626">)</span><span class="op" id="1475627">,</span>&nbsp;<span class="ident" id="1475629">unsafe</span><span class="op" id="1475635">.</span><span class="ident" id="1475636">Sizeof</span><span class="op" id="1475642">(</span><span class="ident" id="1475643">i</span><span class="op" id="1475644">)</span><span class="op" id="1475645">,</span>&nbsp;<span class="ident" id="1475647">seed</span><span class="op" id="1475651">)</span><br>
<span class="lineno"></span><span class="op" id="1475653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="1475656">func</span>&nbsp;<span class="ident" id="1475661">ifaceHash</span><span class="op" id="1475670">(</span><span class="ident" id="1475671">i</span>&nbsp;<span class="keyword" id="1475673">interface</span>&nbsp;<span class="op" id="1475683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1475686">F</span><span class="op" id="1475687">(</span><span class="op" id="1475688">)</span><br>
<span class="lineno"></span><span class="op" id="1475690">}</span><span class="op" id="1475691">,</span>&nbsp;<span class="ident" id="1475693">seed</span>&nbsp;<span class="builtintype" id="1475698">uintptr</span><span class="op" id="1475705">)</span>&nbsp;<span class="builtintype" id="1475707">uintptr</span>&nbsp;<span class="op" id="1475715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1475718">return</span>&nbsp;<span class="ident" id="1475725">algarray</span><span class="op" id="1475733">[</span><span class="ident" id="1475734">alg_INTER</span><span class="op" id="1475743">]</span><span class="op" id="1475744">.</span><span class="ident" id="1475745">hash</span><span class="op" id="1475749">(</span><span class="ident" id="1475750">noescape</span><span class="op" id="1475758">(</span><span class="ident" id="1475759">unsafe</span><span class="op" id="1475765">.</span><span class="ident" id="1475766">Pointer</span><span class="op" id="1475773">(</span><span class="op" id="1475774">&amp;</span><span class="ident" id="1475775">i</span><span class="op" id="1475776">)</span><span class="op" id="1475777">)</span><span class="op" id="1475778">,</span>&nbsp;<span class="ident" id="1475780">unsafe</span><span class="op" id="1475786">.</span><span class="ident" id="1475787">Sizeof</span><span class="op" id="1475793">(</span><span class="ident" id="1475794">i</span><span class="op" id="1475795">)</span><span class="op" id="1475796">,</span>&nbsp;<span class="ident" id="1475798">seed</span><span class="op" id="1475802">)</span><br>
<span class="lineno"></span><span class="op" id="1475804">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="1475807">//&nbsp;Testing&nbsp;adapter&nbsp;for&nbsp;memclr</span><br>
<span class="lineno"></span><span class="keyword" id="1475837">func</span>&nbsp;<span class="ident" id="1475842">memclrBytes</span><span class="op" id="1475853">(</span><span class="ident" id="1475854">b</span>&nbsp;<span class="op" id="1475856">[</span><span class="op" id="1475857">]</span><span class="builtintype" id="1475858">byte</span><span class="op" id="1475862">)</span>&nbsp;<span class="op" id="1475864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1475867">s</span>&nbsp;<span class="op" id="1475869">:=</span>&nbsp;<span class="op" id="1475872">(</span><span class="op" id="1475873">*</span><span class="ident" id="1475874">sliceStruct</span><span class="op" id="1475885">)</span><span class="op" id="1475886">(</span><span class="ident" id="1475887">unsafe</span><span class="op" id="1475893">.</span><span class="ident" id="1475894">Pointer</span><span class="op" id="1475901">(</span><span class="op" id="1475902">&amp;</span><span class="ident" id="1475903">b</span><span class="op" id="1475904">)</span><span class="op" id="1475905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1475908">memclr</span><span class="op" id="1475914">(</span><span class="ident" id="1475915">s</span><span class="op" id="1475916">.</span><span class="ident" id="1475917">array</span><span class="op" id="1475922">,</span>&nbsp;<span class="builtintype" id="1475924">uintptr</span><span class="op" id="1475931">(</span><span class="ident" id="1475932">s</span><span class="op" id="1475933">.</span><span class="builtinfunc" id="1475934">len</span><span class="op" id="1475937">)</span><span class="op" id="1475938">)</span><br>
<span class="lineno">305</span><span class="op" id="1475940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1475943">//&nbsp;TODO(dvyukov):&nbsp;remove&nbsp;when&nbsp;Type&nbsp;is&nbsp;converted&nbsp;to&nbsp;Go&nbsp;and&nbsp;contains&nbsp;*typeAlg.</span><br>
<span class="lineno"></span><span class="keyword" id="1476020">func</span>&nbsp;<span class="ident" id="1476025">goalg</span><span class="op" id="1476030">(</span><span class="ident" id="1476031">a</span>&nbsp;<span class="ident" id="1476033">unsafe</span><span class="op" id="1476039">.</span><span class="ident" id="1476040">Pointer</span><span class="op" id="1476047">)</span>&nbsp;<span class="op" id="1476049">*</span><span class="ident" id="1476050">typeAlg</span>&nbsp;<span class="op" id="1476058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476061">return</span>&nbsp;<span class="op" id="1476068">(</span><span class="op" id="1476069">*</span><span class="ident" id="1476070">typeAlg</span><span class="op" id="1476077">)</span><span class="op" id="1476078">(</span><span class="ident" id="1476079">a</span><span class="op" id="1476080">)</span><br>
<span class="lineno">310</span><span class="op" id="1476082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1476085">//&nbsp;used&nbsp;in&nbsp;asm_{386,amd64}.s</span><br>
<span class="lineno"></span><span class="keyword" id="1476114">const</span>&nbsp;<span class="ident" id="1476120">hashRandomBytes</span>&nbsp;<span class="op" id="1476136">=</span>&nbsp;<span class="num" id="1476138">32</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1476142">var</span>&nbsp;<span class="ident" id="1476146">aeskeysched</span>&nbsp;<span class="op" id="1476158">[</span><span class="ident" id="1476159">hashRandomBytes</span><span class="op" id="1476174">]</span><span class="builtintype" id="1476175">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1476181">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1476195">func</span>&nbsp;<span class="ident" id="1476200">get_random_data</span><span class="op" id="1476215">(</span><span class="ident" id="1476216">rnd</span>&nbsp;<span class="op" id="1476220">*</span><span class="ident" id="1476221">unsafe</span><span class="op" id="1476227">.</span><span class="ident" id="1476228">Pointer</span><span class="op" id="1476235">,</span>&nbsp;<span class="ident" id="1476237">n</span>&nbsp;<span class="op" id="1476239">*</span><span class="builtintype" id="1476240">int32</span><span class="op" id="1476245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="keyword" id="1476248">func</span>&nbsp;<span class="ident" id="1476253">init</span><span class="op" id="1476257">(</span><span class="op" id="1476258">)</span>&nbsp;<span class="op" id="1476260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476263">if</span>&nbsp;<span class="ident" id="1476266">theGoos</span>&nbsp;<span class="op" id="1476274">==</span>&nbsp;<span class="string" id="1476277">&#34;nacl&#34;</span>&nbsp;<span class="op" id="1476284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476288">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1476296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1476300">//&nbsp;Install&nbsp;aes&nbsp;hash&nbsp;algorithm&nbsp;if&nbsp;we&nbsp;have&nbsp;the&nbsp;instructions&nbsp;we&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476367">if</span>&nbsp;<span class="op" id="1476370">(</span><span class="ident" id="1476371">cpuid_ecx</span><span class="op" id="1476380">&amp;</span><span class="op" id="1476381">(</span><span class="num" id="1476382">1</span><span class="op" id="1476383">&lt;&lt;</span><span class="num" id="1476385">25</span><span class="op" id="1476387">)</span><span class="op" id="1476388">)</span>&nbsp;<span class="op" id="1476390">!=</span>&nbsp;<span class="num" id="1476393">0</span>&nbsp;<span class="op" id="1476395">&amp;&amp;</span>&nbsp;<span class="comment" id="1476398">//&nbsp;aes&nbsp;(aesenc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1476416">(</span><span class="ident" id="1476417">cpuid_ecx</span><span class="op" id="1476426">&amp;</span><span class="op" id="1476427">(</span><span class="num" id="1476428">1</span><span class="op" id="1476429">&lt;&lt;</span><span class="num" id="1476431">9</span><span class="op" id="1476432">)</span><span class="op" id="1476433">)</span>&nbsp;<span class="op" id="1476435">!=</span>&nbsp;<span class="num" id="1476438">0</span>&nbsp;<span class="op" id="1476440">&amp;&amp;</span>&nbsp;<span class="comment" id="1476443">//&nbsp;sse3&nbsp;(pshufb)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1476462">(</span><span class="ident" id="1476463">cpuid_ecx</span><span class="op" id="1476472">&amp;</span><span class="op" id="1476473">(</span><span class="num" id="1476474">1</span><span class="op" id="1476475">&lt;&lt;</span><span class="num" id="1476477">19</span><span class="op" id="1476479">)</span><span class="op" id="1476480">)</span>&nbsp;<span class="op" id="1476482">!=</span>&nbsp;<span class="num" id="1476485">0</span>&nbsp;<span class="op" id="1476487">{</span>&nbsp;<span class="comment" id="1476489">//&nbsp;sse4.1&nbsp;(pinsr{d,q})</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476514">useAeshash</span>&nbsp;<span class="op" id="1476525">=</span>&nbsp;<span class="builtintype" id="1476527">true</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476534">algarray</span><span class="op" id="1476542">[</span><span class="ident" id="1476543">alg_MEM</span><span class="op" id="1476550">]</span><span class="op" id="1476551">.</span><span class="ident" id="1476552">hash</span>&nbsp;<span class="op" id="1476557">=</span>&nbsp;<span class="ident" id="1476559">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476569">algarray</span><span class="op" id="1476577">[</span><span class="ident" id="1476578">alg_MEM8</span><span class="op" id="1476586">]</span><span class="op" id="1476587">.</span><span class="ident" id="1476588">hash</span>&nbsp;<span class="op" id="1476593">=</span>&nbsp;<span class="ident" id="1476595">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476605">algarray</span><span class="op" id="1476613">[</span><span class="ident" id="1476614">alg_MEM16</span><span class="op" id="1476623">]</span><span class="op" id="1476624">.</span><span class="ident" id="1476625">hash</span>&nbsp;<span class="op" id="1476630">=</span>&nbsp;<span class="ident" id="1476632">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476642">algarray</span><span class="op" id="1476650">[</span><span class="ident" id="1476651">alg_MEM32</span><span class="op" id="1476660">]</span><span class="op" id="1476661">.</span><span class="ident" id="1476662">hash</span>&nbsp;<span class="op" id="1476667">=</span>&nbsp;<span class="ident" id="1476669">aeshash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476681">algarray</span><span class="op" id="1476689">[</span><span class="ident" id="1476690">alg_MEM64</span><span class="op" id="1476699">]</span><span class="op" id="1476700">.</span><span class="ident" id="1476701">hash</span>&nbsp;<span class="op" id="1476706">=</span>&nbsp;<span class="ident" id="1476708">aeshash64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476720">algarray</span><span class="op" id="1476728">[</span><span class="ident" id="1476729">alg_MEM128</span><span class="op" id="1476739">]</span><span class="op" id="1476740">.</span><span class="ident" id="1476741">hash</span>&nbsp;<span class="op" id="1476746">=</span>&nbsp;<span class="ident" id="1476748">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476758">algarray</span><span class="op" id="1476766">[</span><span class="ident" id="1476767">alg_STRING</span><span class="op" id="1476777">]</span><span class="op" id="1476778">.</span><span class="ident" id="1476779">hash</span>&nbsp;<span class="op" id="1476784">=</span>&nbsp;<span class="ident" id="1476786">aeshashstr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1476799">//&nbsp;Initialize&nbsp;with&nbsp;random&nbsp;data&nbsp;so&nbsp;hash&nbsp;collisions&nbsp;will&nbsp;be&nbsp;hard&nbsp;to&nbsp;engineer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476877">var</span>&nbsp;<span class="ident" id="1476881">rnd</span>&nbsp;<span class="ident" id="1476885">unsafe</span><span class="op" id="1476891">.</span><span class="ident" id="1476892">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476902">var</span>&nbsp;<span class="ident" id="1476906">n</span>&nbsp;<span class="builtintype" id="1476908">int32</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476916">get_random_data</span><span class="op" id="1476931">(</span><span class="op" id="1476932">&amp;</span><span class="ident" id="1476933">rnd</span><span class="op" id="1476936">,</span>&nbsp;<span class="op" id="1476938">&amp;</span><span class="ident" id="1476939">n</span><span class="op" id="1476940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1476944">if</span>&nbsp;<span class="ident" id="1476947">n</span>&nbsp;<span class="op" id="1476949">&gt;</span>&nbsp;<span class="ident" id="1476951">hashRandomBytes</span>&nbsp;<span class="op" id="1476967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476972">n</span>&nbsp;<span class="op" id="1476974">=</span>&nbsp;<span class="ident" id="1476976">hashRandomBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1476994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1476998">memmove</span><span class="op" id="1477005">(</span><span class="ident" id="1477006">unsafe</span><span class="op" id="1477012">.</span><span class="ident" id="1477013">Pointer</span><span class="op" id="1477020">(</span><span class="op" id="1477021">&amp;</span><span class="ident" id="1477022">aeskeysched</span><span class="op" id="1477033">[</span><span class="num" id="1477034">0</span><span class="op" id="1477035">]</span><span class="op" id="1477036">)</span><span class="op" id="1477037">,</span>&nbsp;<span class="ident" id="1477039">rnd</span><span class="op" id="1477042">,</span>&nbsp;<span class="builtintype" id="1477044">uintptr</span><span class="op" id="1477051">(</span><span class="ident" id="1477052">n</span><span class="op" id="1477053">)</span><span class="op" id="1477054">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1477058">if</span>&nbsp;<span class="ident" id="1477061">n</span>&nbsp;<span class="op" id="1477063">&lt;</span>&nbsp;<span class="ident" id="1477065">hashRandomBytes</span>&nbsp;<span class="op" id="1477081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1477086">//&nbsp;Not&nbsp;very&nbsp;random,&nbsp;but&nbsp;better&nbsp;than&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1477134">for</span>&nbsp;<span class="ident" id="1477138">t</span>&nbsp;<span class="op" id="1477140">:=</span>&nbsp;<span class="ident" id="1477143">nanotime</span><span class="op" id="1477151">(</span><span class="op" id="1477152">)</span><span class="op" id="1477153">;</span>&nbsp;<span class="ident" id="1477155">n</span>&nbsp;<span class="op" id="1477157">&lt;</span>&nbsp;<span class="ident" id="1477159">hashRandomBytes</span><span class="op" id="1477174">;</span>&nbsp;<span class="ident" id="1477176">n</span><span class="op" id="1477177">++</span>&nbsp;<span class="op" id="1477180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1477186">aeskeysched</span><span class="op" id="1477197">[</span><span class="ident" id="1477198">n</span><span class="op" id="1477199">]</span>&nbsp;<span class="op" id="1477201">=</span>&nbsp;<span class="builtintype" id="1477203">byte</span><span class="op" id="1477207">(</span><span class="ident" id="1477208">t</span>&nbsp;<span class="op" id="1477210">&gt;&gt;</span>&nbsp;<span class="builtintype" id="1477213">uint</span><span class="op" id="1477217">(</span><span class="num" id="1477218">8</span><span class="op" id="1477219">*</span><span class="op" id="1477220">(</span><span class="ident" id="1477221">n</span><span class="op" id="1477222">%</span><span class="num" id="1477223">8</span><span class="op" id="1477224">)</span><span class="op" id="1477225">)</span><span class="op" id="1477226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1477231">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1477235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1477238">}</span><br>
<span class="lineno"></span><span class="op" id="1477240">}</span>
</div>
</body>
</html>
