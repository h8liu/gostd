<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1572295">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1572350">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1572404">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1572455">package</span>&nbsp;<span class="ident" id="1572463">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572472">import</span>&nbsp;<span class="string" id="1572479">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1572489">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*m.</span><br>
<span class="lineno">10</span><span class="keyword" id="1572531">func</span>&nbsp;<span class="ident" id="1572536">gc_m_ptr</span><span class="op" id="1572544">(</span><span class="ident" id="1572545">ret</span>&nbsp;<span class="op" id="1572549">*</span><span class="keyword" id="1572550">interface</span><span class="op" id="1572559">{</span><span class="op" id="1572560">}</span><span class="op" id="1572561">)</span>&nbsp;<span class="op" id="1572563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572566">*</span><span class="ident" id="1572567">ret</span>&nbsp;<span class="op" id="1572571">=</span>&nbsp;<span class="op" id="1572573">(</span><span class="op" id="1572574">*</span><span class="ident" id="1572575">m</span><span class="op" id="1572576">)</span><span class="op" id="1572577">(</span><span class="ident" id="1572578">nil</span><span class="op" id="1572581">)</span><br>
<span class="lineno"></span><span class="op" id="1572583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1572586">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*g.</span><br>
<span class="lineno">15</span><span class="keyword" id="1572628">func</span>&nbsp;<span class="ident" id="1572633">gc_g_ptr</span><span class="op" id="1572641">(</span><span class="ident" id="1572642">ret</span>&nbsp;<span class="op" id="1572646">*</span><span class="keyword" id="1572647">interface</span><span class="op" id="1572656">{</span><span class="op" id="1572657">}</span><span class="op" id="1572658">)</span>&nbsp;<span class="op" id="1572660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572663">*</span><span class="ident" id="1572664">ret</span>&nbsp;<span class="op" id="1572668">=</span>&nbsp;<span class="op" id="1572670">(</span><span class="op" id="1572671">*</span><span class="ident" id="1572672">g</span><span class="op" id="1572673">)</span><span class="op" id="1572674">(</span><span class="ident" id="1572675">nil</span><span class="op" id="1572678">)</span><br>
<span class="lineno"></span><span class="op" id="1572680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1572683">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*itab.</span><br>
<span class="lineno">20</span><span class="keyword" id="1572728">func</span>&nbsp;<span class="ident" id="1572733">gc_itab_ptr</span><span class="op" id="1572744">(</span><span class="ident" id="1572745">ret</span>&nbsp;<span class="op" id="1572749">*</span><span class="keyword" id="1572750">interface</span><span class="op" id="1572759">{</span><span class="op" id="1572760">}</span><span class="op" id="1572761">)</span>&nbsp;<span class="op" id="1572763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572766">*</span><span class="ident" id="1572767">ret</span>&nbsp;<span class="op" id="1572771">=</span>&nbsp;<span class="op" id="1572773">(</span><span class="op" id="1572774">*</span><span class="ident" id="1572775">itab</span><span class="op" id="1572779">)</span><span class="op" id="1572780">(</span><span class="ident" id="1572781">nil</span><span class="op" id="1572784">)</span><br>
<span class="lineno"></span><span class="op" id="1572786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572789">func</span>&nbsp;<span class="ident" id="1572794">gc_unixnanotime</span><span class="op" id="1572809">(</span><span class="ident" id="1572810">now</span>&nbsp;<span class="op" id="1572814">*</span><span class="ident" id="1572815">int64</span><span class="op" id="1572820">)</span>&nbsp;<span class="op" id="1572822">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572825">sec</span><span class="op" id="1572828">,</span>&nbsp;<span class="ident" id="1572830">nsec</span>&nbsp;<span class="op" id="1572835">:=</span>&nbsp;<span class="ident" id="1572838">timenow</span><span class="op" id="1572845">(</span><span class="op" id="1572846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572849">*</span><span class="ident" id="1572850">now</span>&nbsp;<span class="op" id="1572854">=</span>&nbsp;<span class="ident" id="1572856">sec</span><span class="op" id="1572859">*</span><span class="num" id="1572860">1e9</span>&nbsp;<span class="op" id="1572864">+</span>&nbsp;<span class="ident" id="1572866">int64</span><span class="op" id="1572871">(</span><span class="ident" id="1572872">nsec</span><span class="op" id="1572876">)</span><br>
<span class="lineno"></span><span class="op" id="1572878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572881">func</span>&nbsp;<span class="ident" id="1572886">freeOSMemory</span><span class="op" id="1572898">(</span><span class="op" id="1572899">)</span>&nbsp;<span class="op" id="1572901">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572904">gogc</span><span class="op" id="1572908">(</span><span class="num" id="1572909">2</span><span class="op" id="1572910">)</span>&nbsp;<span class="comment" id="1572912">//&nbsp;force&nbsp;GC&nbsp;and&nbsp;do&nbsp;eager&nbsp;sweep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572944">onM</span><span class="op" id="1572947">(</span><span class="ident" id="1572948">scavenge_m</span><span class="op" id="1572958">)</span><br>
<span class="lineno"></span><span class="op" id="1572960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572963">var</span>&nbsp;<span class="ident" id="1572967">poolcleanup</span>&nbsp;<span class="keyword" id="1572979">func</span><span class="op" id="1572983">(</span><span class="op" id="1572984">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="1572987">func</span>&nbsp;<span class="ident" id="1572992">registerPoolCleanup</span><span class="op" id="1573011">(</span><span class="ident" id="1573012">f</span>&nbsp;<span class="keyword" id="1573014">func</span><span class="op" id="1573018">(</span><span class="op" id="1573019">)</span><span class="op" id="1573020">)</span>&nbsp;<span class="op" id="1573022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573025">poolcleanup</span>&nbsp;<span class="op" id="1573037">=</span>&nbsp;<span class="ident" id="1573039">f</span><br>
<span class="lineno"></span><span class="op" id="1573041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1573044">func</span>&nbsp;<span class="ident" id="1573049">clearpools</span><span class="op" id="1573059">(</span><span class="op" id="1573060">)</span>&nbsp;<span class="op" id="1573062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573065">//&nbsp;clear&nbsp;sync.Pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573086">if</span>&nbsp;<span class="ident" id="1573089">poolcleanup</span>&nbsp;<span class="op" id="1573101">!=</span>&nbsp;<span class="ident" id="1573104">nil</span>&nbsp;<span class="op" id="1573108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573112">poolcleanup</span><span class="op" id="1573123">(</span><span class="op" id="1573124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573127">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573131">for</span>&nbsp;<span class="ident" id="1573135">_</span><span class="op" id="1573136">,</span>&nbsp;<span class="ident" id="1573138">p</span>&nbsp;<span class="op" id="1573140">:=</span>&nbsp;<span class="keyword" id="1573143">range</span>&nbsp;<span class="op" id="1573149">&amp;</span><span class="ident" id="1573150">allp</span>&nbsp;<span class="op" id="1573155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573159">if</span>&nbsp;<span class="ident" id="1573162">p</span>&nbsp;<span class="op" id="1573164">==</span>&nbsp;<span class="ident" id="1573167">nil</span>&nbsp;<span class="op" id="1573171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573176">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573184">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573188">//&nbsp;clear&nbsp;tinyalloc&nbsp;pool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573214">if</span>&nbsp;<span class="ident" id="1573217">c</span>&nbsp;<span class="op" id="1573219">:=</span>&nbsp;<span class="ident" id="1573222">p</span><span class="op" id="1573223">.</span><span class="ident" id="1573224">mcache</span><span class="op" id="1573230">;</span>&nbsp;<span class="ident" id="1573232">c</span>&nbsp;<span class="op" id="1573234">!=</span>&nbsp;<span class="ident" id="1573237">nil</span>&nbsp;<span class="op" id="1573241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573246">c</span><span class="op" id="1573247">.</span><span class="ident" id="1573248">tiny</span>&nbsp;<span class="op" id="1573253">=</span>&nbsp;<span class="ident" id="1573255">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573262">c</span><span class="op" id="1573263">.</span><span class="ident" id="1573264">tinysize</span>&nbsp;<span class="op" id="1573273">=</span>&nbsp;<span class="num" id="1573275">0</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573281">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573343">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573411">var</span>&nbsp;<span class="ident" id="1573415">sg</span><span class="op" id="1573417">,</span>&nbsp;<span class="ident" id="1573419">sgnext</span>&nbsp;<span class="op" id="1573426">*</span><span class="ident" id="1573427">sudog</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573436">for</span>&nbsp;<span class="ident" id="1573440">sg</span>&nbsp;<span class="op" id="1573443">=</span>&nbsp;<span class="ident" id="1573445">c</span><span class="op" id="1573446">.</span><span class="ident" id="1573447">sudogcache</span><span class="op" id="1573457">;</span>&nbsp;<span class="ident" id="1573459">sg</span>&nbsp;<span class="op" id="1573462">!=</span>&nbsp;<span class="ident" id="1573465">nil</span><span class="op" id="1573468">;</span>&nbsp;<span class="ident" id="1573470">sg</span>&nbsp;<span class="op" id="1573473">=</span>&nbsp;<span class="ident" id="1573475">sgnext</span>&nbsp;<span class="op" id="1573482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573488">sgnext</span>&nbsp;<span class="op" id="1573495">=</span>&nbsp;<span class="ident" id="1573497">sg</span><span class="op" id="1573499">.</span><span class="ident" id="1573500">next</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573509">sg</span><span class="op" id="1573511">.</span><span class="ident" id="1573512">next</span>&nbsp;<span class="op" id="1573517">=</span>&nbsp;<span class="ident" id="1573519">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573531">c</span><span class="op" id="1573532">.</span><span class="ident" id="1573533">sudogcache</span>&nbsp;<span class="op" id="1573544">=</span>&nbsp;<span class="ident" id="1573546">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573557">//&nbsp;clear&nbsp;defer&nbsp;pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573580">for</span>&nbsp;<span class="ident" id="1573584">i</span>&nbsp;<span class="op" id="1573586">:=</span>&nbsp;<span class="keyword" id="1573589">range</span>&nbsp;<span class="ident" id="1573595">p</span><span class="op" id="1573596">.</span><span class="ident" id="1573597">deferpool</span>&nbsp;<span class="op" id="1573607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573612">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573674">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573742">var</span>&nbsp;<span class="ident" id="1573746">d</span><span class="op" id="1573747">,</span>&nbsp;<span class="ident" id="1573749">dlink</span>&nbsp;<span class="op" id="1573755">*</span><span class="ident" id="1573756">_defer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573766">for</span>&nbsp;<span class="ident" id="1573770">d</span>&nbsp;<span class="op" id="1573772">=</span>&nbsp;<span class="ident" id="1573774">p</span><span class="op" id="1573775">.</span><span class="ident" id="1573776">deferpool</span><span class="op" id="1573785">[</span><span class="ident" id="1573786">i</span><span class="op" id="1573787">]</span><span class="op" id="1573788">;</span>&nbsp;<span class="ident" id="1573790">d</span>&nbsp;<span class="op" id="1573792">!=</span>&nbsp;<span class="ident" id="1573795">nil</span><span class="op" id="1573798">;</span>&nbsp;<span class="ident" id="1573800">d</span>&nbsp;<span class="op" id="1573802">=</span>&nbsp;<span class="ident" id="1573804">dlink</span>&nbsp;<span class="op" id="1573810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573816">dlink</span>&nbsp;<span class="op" id="1573822">=</span>&nbsp;<span class="ident" id="1573824">d</span><span class="op" id="1573825">.</span><span class="ident" id="1573826">link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573835">d</span><span class="op" id="1573836">.</span><span class="ident" id="1573837">link</span>&nbsp;<span class="op" id="1573842">=</span>&nbsp;<span class="ident" id="1573844">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573856">p</span><span class="op" id="1573857">.</span><span class="ident" id="1573858">deferpool</span><span class="op" id="1573867">[</span><span class="ident" id="1573868">i</span><span class="op" id="1573869">]</span>&nbsp;<span class="op" id="1573871">=</span>&nbsp;<span class="ident" id="1573873">nil</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573882">}</span><br>
<span class="lineno"></span><span class="op" id="1573884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573887">func</span>&nbsp;<span class="ident" id="1573892">gosweepone</span><span class="op" id="1573902">(</span><span class="op" id="1573903">)</span>&nbsp;<span class="builtintype" id="1573905">uintptr</span><br>
<span class="lineno">80</span><span class="keyword" id="1573913">func</span>&nbsp;<span class="ident" id="1573918">gosweepdone</span><span class="op" id="1573929">(</span><span class="op" id="1573930">)</span>&nbsp;<span class="builtintype" id="1573932">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573938">func</span>&nbsp;<span class="ident" id="1573943">bgsweep</span><span class="op" id="1573950">(</span><span class="op" id="1573951">)</span>&nbsp;<span class="op" id="1573953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573956">getg</span><span class="op" id="1573960">(</span><span class="op" id="1573961">)</span><span class="op" id="1573962">.</span><span class="ident" id="1573963">issystem</span>&nbsp;<span class="op" id="1573972">=</span>&nbsp;<span class="builtintype" id="1573974">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573980">for</span>&nbsp;<span class="op" id="1573984">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573988">for</span>&nbsp;<span class="ident" id="1573992">gosweepone</span><span class="op" id="1574002">(</span><span class="op" id="1574003">)</span>&nbsp;<span class="op" id="1574005">!=</span>&nbsp;<span class="op" id="1574008">^</span><span class="builtintype" id="1574009">uintptr</span><span class="op" id="1574016">(</span><span class="num" id="1574017">0</span><span class="op" id="1574018">)</span>&nbsp;<span class="op" id="1574020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574025">sweep</span><span class="op" id="1574030">.</span><span class="ident" id="1574031">nbgsweep</span><span class="op" id="1574039">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574045">Gosched</span><span class="op" id="1574052">(</span><span class="op" id="1574053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574061">lock</span><span class="op" id="1574065">(</span><span class="op" id="1574066">&amp;</span><span class="ident" id="1574067">gclock</span><span class="op" id="1574073">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574077">if</span>&nbsp;<span class="op" id="1574080">!</span><span class="ident" id="1574081">gosweepdone</span><span class="op" id="1574092">(</span><span class="op" id="1574093">)</span>&nbsp;<span class="op" id="1574095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574100">//&nbsp;This&nbsp;can&nbsp;happen&nbsp;if&nbsp;a&nbsp;GC&nbsp;runs&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574143">//&nbsp;gosweepone&nbsp;returning&nbsp;^0&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1574179">//&nbsp;and&nbsp;the&nbsp;lock&nbsp;being&nbsp;acquired.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574214">unlock</span><span class="op" id="1574220">(</span><span class="op" id="1574221">&amp;</span><span class="ident" id="1574222">gclock</span><span class="op" id="1574228">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1574233">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574248">sweep</span><span class="op" id="1574253">.</span><span class="ident" id="1574254">parked</span>&nbsp;<span class="op" id="1574261">=</span>&nbsp;<span class="builtintype" id="1574263">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574270">goparkunlock</span><span class="op" id="1574282">(</span><span class="op" id="1574283">&amp;</span><span class="ident" id="1574284">gclock</span><span class="op" id="1574290">,</span>&nbsp;<span class="string" id="1574292">&#34;GC&nbsp;sweep&nbsp;wait&#34;</span><span class="op" id="1574307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574310">}</span><br>
<span class="lineno">100</span><span class="op" id="1574312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1574315">//&nbsp;NOTE:&nbsp;Really&nbsp;dst&nbsp;*unsafe.Pointer,&nbsp;src&nbsp;unsafe.Pointer,</span><br>
<span class="lineno"></span><span class="comment" id="1574372">//&nbsp;but&nbsp;if&nbsp;we&nbsp;do&nbsp;that,&nbsp;Go&nbsp;inserts&nbsp;a&nbsp;write&nbsp;barrier&nbsp;on&nbsp;*dst&nbsp;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="1574436">//go:nosplit</span><br>
<span class="lineno">105</span><span class="keyword" id="1574449">func</span>&nbsp;<span class="ident" id="1574454">writebarrierptr</span><span class="op" id="1574469">(</span><span class="ident" id="1574470">dst</span>&nbsp;<span class="op" id="1574474">*</span><span class="builtintype" id="1574475">uintptr</span><span class="op" id="1574482">,</span>&nbsp;<span class="ident" id="1574484">src</span>&nbsp;<span class="builtintype" id="1574488">uintptr</span><span class="op" id="1574495">)</span>&nbsp;<span class="op" id="1574497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1574500">*</span><span class="ident" id="1574501">dst</span>&nbsp;<span class="op" id="1574505">=</span>&nbsp;<span class="ident" id="1574507">src</span><br>
<span class="lineno"></span><span class="op" id="1574511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1574514">//go:nosplit</span><br>
<span class="lineno">110</span><span class="keyword" id="1574527">func</span>&nbsp;<span class="ident" id="1574532">writebarrierstring</span><span class="op" id="1574550">(</span><span class="ident" id="1574551">dst</span>&nbsp;<span class="op" id="1574555">*</span><span class="op" id="1574556">[</span><span class="num" id="1574557">2</span><span class="op" id="1574558">]</span><span class="builtintype" id="1574559">uintptr</span><span class="op" id="1574566">,</span>&nbsp;<span class="ident" id="1574568">src</span>&nbsp;<span class="op" id="1574572">[</span><span class="num" id="1574573">2</span><span class="op" id="1574574">]</span><span class="builtintype" id="1574575">uintptr</span><span class="op" id="1574582">)</span>&nbsp;<span class="op" id="1574584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574587">dst</span><span class="op" id="1574590">[</span><span class="num" id="1574591">0</span><span class="op" id="1574592">]</span>&nbsp;<span class="op" id="1574594">=</span>&nbsp;<span class="ident" id="1574596">src</span><span class="op" id="1574599">[</span><span class="num" id="1574600">0</span><span class="op" id="1574601">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574604">dst</span><span class="op" id="1574607">[</span><span class="num" id="1574608">1</span><span class="op" id="1574609">]</span>&nbsp;<span class="op" id="1574611">=</span>&nbsp;<span class="ident" id="1574613">src</span><span class="op" id="1574616">[</span><span class="num" id="1574617">1</span><span class="op" id="1574618">]</span><br>
<span class="lineno"></span><span class="op" id="1574620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="1574623">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1574636">func</span>&nbsp;<span class="ident" id="1574641">writebarrierslice</span><span class="op" id="1574658">(</span><span class="ident" id="1574659">dst</span>&nbsp;<span class="op" id="1574663">*</span><span class="op" id="1574664">[</span><span class="num" id="1574665">3</span><span class="op" id="1574666">]</span><span class="builtintype" id="1574667">uintptr</span><span class="op" id="1574674">,</span>&nbsp;<span class="ident" id="1574676">src</span>&nbsp;<span class="op" id="1574680">[</span><span class="num" id="1574681">3</span><span class="op" id="1574682">]</span><span class="builtintype" id="1574683">uintptr</span><span class="op" id="1574690">)</span>&nbsp;<span class="op" id="1574692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574695">dst</span><span class="op" id="1574698">[</span><span class="num" id="1574699">0</span><span class="op" id="1574700">]</span>&nbsp;<span class="op" id="1574702">=</span>&nbsp;<span class="ident" id="1574704">src</span><span class="op" id="1574707">[</span><span class="num" id="1574708">0</span><span class="op" id="1574709">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574712">dst</span><span class="op" id="1574715">[</span><span class="num" id="1574716">1</span><span class="op" id="1574717">]</span>&nbsp;<span class="op" id="1574719">=</span>&nbsp;<span class="ident" id="1574721">src</span><span class="op" id="1574724">[</span><span class="num" id="1574725">1</span><span class="op" id="1574726">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574729">dst</span><span class="op" id="1574732">[</span><span class="num" id="1574733">2</span><span class="op" id="1574734">]</span>&nbsp;<span class="op" id="1574736">=</span>&nbsp;<span class="ident" id="1574738">src</span><span class="op" id="1574741">[</span><span class="num" id="1574742">2</span><span class="op" id="1574743">]</span><br>
<span class="lineno">120</span><span class="op" id="1574745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1574748">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1574761">func</span>&nbsp;<span class="ident" id="1574766">writebarrieriface</span><span class="op" id="1574783">(</span><span class="ident" id="1574784">dst</span>&nbsp;<span class="op" id="1574788">*</span><span class="op" id="1574789">[</span><span class="num" id="1574790">2</span><span class="op" id="1574791">]</span><span class="builtintype" id="1574792">uintptr</span><span class="op" id="1574799">,</span>&nbsp;<span class="ident" id="1574801">src</span>&nbsp;<span class="op" id="1574805">[</span><span class="num" id="1574806">2</span><span class="op" id="1574807">]</span><span class="builtintype" id="1574808">uintptr</span><span class="op" id="1574815">)</span>&nbsp;<span class="op" id="1574817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574820">dst</span><span class="op" id="1574823">[</span><span class="num" id="1574824">0</span><span class="op" id="1574825">]</span>&nbsp;<span class="op" id="1574827">=</span>&nbsp;<span class="ident" id="1574829">src</span><span class="op" id="1574832">[</span><span class="num" id="1574833">0</span><span class="op" id="1574834">]</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574837">dst</span><span class="op" id="1574840">[</span><span class="num" id="1574841">1</span><span class="op" id="1574842">]</span>&nbsp;<span class="op" id="1574844">=</span>&nbsp;<span class="ident" id="1574846">src</span><span class="op" id="1574849">[</span><span class="num" id="1574850">1</span><span class="op" id="1574851">]</span><br>
<span class="lineno"></span><span class="op" id="1574853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1574856">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1574869">func</span>&nbsp;<span class="ident" id="1574874">writebarrierfat2</span><span class="op" id="1574890">(</span><span class="ident" id="1574891">dst</span>&nbsp;<span class="op" id="1574895">*</span><span class="op" id="1574896">[</span><span class="num" id="1574897">2</span><span class="op" id="1574898">]</span><span class="builtintype" id="1574899">uintptr</span><span class="op" id="1574906">,</span>&nbsp;<span class="ident" id="1574908">_</span>&nbsp;<span class="op" id="1574910">*</span><span class="builtintype" id="1574911">byte</span><span class="op" id="1574915">,</span>&nbsp;<span class="ident" id="1574917">src</span>&nbsp;<span class="op" id="1574921">[</span><span class="num" id="1574922">2</span><span class="op" id="1574923">]</span><span class="builtintype" id="1574924">uintptr</span><span class="op" id="1574931">)</span>&nbsp;<span class="op" id="1574933">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574936">dst</span><span class="op" id="1574939">[</span><span class="num" id="1574940">0</span><span class="op" id="1574941">]</span>&nbsp;<span class="op" id="1574943">=</span>&nbsp;<span class="ident" id="1574945">src</span><span class="op" id="1574948">[</span><span class="num" id="1574949">0</span><span class="op" id="1574950">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1574953">dst</span><span class="op" id="1574956">[</span><span class="num" id="1574957">1</span><span class="op" id="1574958">]</span>&nbsp;<span class="op" id="1574960">=</span>&nbsp;<span class="ident" id="1574962">src</span><span class="op" id="1574965">[</span><span class="num" id="1574966">1</span><span class="op" id="1574967">]</span><br>
<span class="lineno"></span><span class="op" id="1574969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1574972">//go:nosplit</span><br>
<span class="lineno">135</span><span class="keyword" id="1574985">func</span>&nbsp;<span class="ident" id="1574990">writebarrierfat3</span><span class="op" id="1575006">(</span><span class="ident" id="1575007">dst</span>&nbsp;<span class="op" id="1575011">*</span><span class="op" id="1575012">[</span><span class="num" id="1575013">3</span><span class="op" id="1575014">]</span><span class="builtintype" id="1575015">uintptr</span><span class="op" id="1575022">,</span>&nbsp;<span class="ident" id="1575024">_</span>&nbsp;<span class="op" id="1575026">*</span><span class="builtintype" id="1575027">byte</span><span class="op" id="1575031">,</span>&nbsp;<span class="ident" id="1575033">src</span>&nbsp;<span class="op" id="1575037">[</span><span class="num" id="1575038">3</span><span class="op" id="1575039">]</span><span class="builtintype" id="1575040">uintptr</span><span class="op" id="1575047">)</span>&nbsp;<span class="op" id="1575049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575052">dst</span><span class="op" id="1575055">[</span><span class="num" id="1575056">0</span><span class="op" id="1575057">]</span>&nbsp;<span class="op" id="1575059">=</span>&nbsp;<span class="ident" id="1575061">src</span><span class="op" id="1575064">[</span><span class="num" id="1575065">0</span><span class="op" id="1575066">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575069">dst</span><span class="op" id="1575072">[</span><span class="num" id="1575073">1</span><span class="op" id="1575074">]</span>&nbsp;<span class="op" id="1575076">=</span>&nbsp;<span class="ident" id="1575078">src</span><span class="op" id="1575081">[</span><span class="num" id="1575082">1</span><span class="op" id="1575083">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575086">dst</span><span class="op" id="1575089">[</span><span class="num" id="1575090">2</span><span class="op" id="1575091">]</span>&nbsp;<span class="op" id="1575093">=</span>&nbsp;<span class="ident" id="1575095">src</span><span class="op" id="1575098">[</span><span class="num" id="1575099">2</span><span class="op" id="1575100">]</span><br>
<span class="lineno"></span><span class="op" id="1575102">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1575105">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1575118">func</span>&nbsp;<span class="ident" id="1575123">writebarrierfat4</span><span class="op" id="1575139">(</span><span class="ident" id="1575140">dst</span>&nbsp;<span class="op" id="1575144">*</span><span class="op" id="1575145">[</span><span class="num" id="1575146">4</span><span class="op" id="1575147">]</span><span class="builtintype" id="1575148">uintptr</span><span class="op" id="1575155">,</span>&nbsp;<span class="ident" id="1575157">_</span>&nbsp;<span class="op" id="1575159">*</span><span class="builtintype" id="1575160">byte</span><span class="op" id="1575164">,</span>&nbsp;<span class="ident" id="1575166">src</span>&nbsp;<span class="op" id="1575170">[</span><span class="num" id="1575171">4</span><span class="op" id="1575172">]</span><span class="builtintype" id="1575173">uintptr</span><span class="op" id="1575180">)</span>&nbsp;<span class="op" id="1575182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575185">dst</span><span class="op" id="1575188">[</span><span class="num" id="1575189">0</span><span class="op" id="1575190">]</span>&nbsp;<span class="op" id="1575192">=</span>&nbsp;<span class="ident" id="1575194">src</span><span class="op" id="1575197">[</span><span class="num" id="1575198">0</span><span class="op" id="1575199">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575202">dst</span><span class="op" id="1575205">[</span><span class="num" id="1575206">1</span><span class="op" id="1575207">]</span>&nbsp;<span class="op" id="1575209">=</span>&nbsp;<span class="ident" id="1575211">src</span><span class="op" id="1575214">[</span><span class="num" id="1575215">1</span><span class="op" id="1575216">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575219">dst</span><span class="op" id="1575222">[</span><span class="num" id="1575223">2</span><span class="op" id="1575224">]</span>&nbsp;<span class="op" id="1575226">=</span>&nbsp;<span class="ident" id="1575228">src</span><span class="op" id="1575231">[</span><span class="num" id="1575232">2</span><span class="op" id="1575233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575236">dst</span><span class="op" id="1575239">[</span><span class="num" id="1575240">3</span><span class="op" id="1575241">]</span>&nbsp;<span class="op" id="1575243">=</span>&nbsp;<span class="ident" id="1575245">src</span><span class="op" id="1575248">[</span><span class="num" id="1575249">3</span><span class="op" id="1575250">]</span><br>
<span class="lineno"></span><span class="op" id="1575252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1575255">//go:nosplit</span><br>
<span class="lineno">150</span><span class="keyword" id="1575268">func</span>&nbsp;<span class="ident" id="1575273">writebarrierfat</span><span class="op" id="1575288">(</span><span class="ident" id="1575289">typ</span>&nbsp;<span class="op" id="1575293">*</span><span class="ident" id="1575294">_type</span><span class="op" id="1575299">,</span>&nbsp;<span class="ident" id="1575301">dst</span><span class="op" id="1575304">,</span>&nbsp;<span class="ident" id="1575306">src</span>&nbsp;<span class="ident" id="1575310">unsafe</span><span class="op" id="1575316">.</span><span class="ident" id="1575317">Pointer</span><span class="op" id="1575324">)</span>&nbsp;<span class="op" id="1575326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1575329">memmove</span><span class="op" id="1575336">(</span><span class="ident" id="1575337">dst</span><span class="op" id="1575340">,</span>&nbsp;<span class="ident" id="1575342">src</span><span class="op" id="1575345">,</span>&nbsp;<span class="ident" id="1575347">typ</span><span class="op" id="1575350">.</span><span class="ident" id="1575351">size</span><span class="op" id="1575355">)</span><br>
<span class="lineno"></span><span class="op" id="1575357">}</span>
</div>
</body>
</html>
