<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html" class="current">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4613709">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4613764">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4613818">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4613869">//&nbsp;Helper&nbsp;functions&nbsp;to&nbsp;make&nbsp;constructing&nbsp;templates&nbsp;easier.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4613929">package</span>&nbsp;<span class="ident" id="4613937">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4613947">import</span>&nbsp;<span class="op" id="4613954">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4613957">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4613964">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4613977">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span><span class="op" id="4613993">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4613996">//&nbsp;Functions&nbsp;and&nbsp;methods&nbsp;to&nbsp;parse&nbsp;templates.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4614042">//&nbsp;Must&nbsp;is&nbsp;a&nbsp;helper&nbsp;that&nbsp;wraps&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;function&nbsp;returning&nbsp;(*Template,&nbsp;error)</span><br>
<span class="lineno"></span><span class="comment" id="4614123">//&nbsp;and&nbsp;panics&nbsp;if&nbsp;the&nbsp;error&nbsp;is&nbsp;non-nil.&nbsp;It&nbsp;is&nbsp;intended&nbsp;for&nbsp;use&nbsp;in&nbsp;variable</span><br>
<span class="lineno"></span><span class="comment" id="4614197">//&nbsp;initializations&nbsp;such&nbsp;as</span><br>
<span class="lineno">20</span><span class="comment" id="4614224">//&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;t&nbsp;=&nbsp;template.Must(template.New(&#34;name&#34;).Parse(&#34;text&#34;))</span><br>
<span class="lineno"></span><span class="keyword" id="4614285">func</span>&nbsp;<span class="ident" id="4614290">Must</span><span class="op" id="4614294">(</span><span class="ident" id="4614295">t</span>&nbsp;<span class="op" id="4614297">*</span><span class="ident" id="4614298">Template</span><span class="op" id="4614306">,</span>&nbsp;<span class="ident" id="4614308">err</span>&nbsp;<span class="builtintype" id="4614312">error</span><span class="op" id="4614317">)</span>&nbsp;<span class="op" id="4614319">*</span><span class="ident" id="4614320">Template</span>&nbsp;<span class="op" id="4614329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4614332">if</span>&nbsp;<span class="ident" id="4614335">err</span>&nbsp;<span class="op" id="4614339">!=</span>&nbsp;<span class="builtintype" id="4614342">nil</span>&nbsp;<span class="op" id="4614346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4614350">panic</span><span class="op" id="4614355">(</span><span class="ident" id="4614356">err</span><span class="op" id="4614359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4614362">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4614365">return</span>&nbsp;<span class="ident" id="4614372">t</span><br>
<span class="lineno"></span><span class="op" id="4614374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4614377">//&nbsp;ParseFiles&nbsp;creates&nbsp;a&nbsp;new&nbsp;Template&nbsp;and&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="4614455">//&nbsp;the&nbsp;named&nbsp;files.&nbsp;The&nbsp;returned&nbsp;template&#39;s&nbsp;name&nbsp;will&nbsp;have&nbsp;the&nbsp;(base)&nbsp;name&nbsp;and</span><br>
<span class="lineno">30</span><span class="comment" id="4614534">//&nbsp;(parsed)&nbsp;contents&nbsp;of&nbsp;the&nbsp;first&nbsp;file.&nbsp;There&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4614607">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;parsing&nbsp;stops&nbsp;and&nbsp;the&nbsp;returned&nbsp;*Template&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4614679">func</span>&nbsp;<span class="ident" id="4614684">ParseFiles</span><span class="op" id="4614694">(</span><span class="ident" id="4614695">filenames</span>&nbsp;<span class="op" id="4614705">...</span><span class="builtintype" id="4614708">string</span><span class="op" id="4614714">)</span>&nbsp;<span class="op" id="4614716">(</span><span class="op" id="4614717">*</span><span class="ident" id="4614718">Template</span><span class="op" id="4614726">,</span>&nbsp;<span class="builtintype" id="4614728">error</span><span class="op" id="4614733">)</span>&nbsp;<span class="op" id="4614735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4614738">return</span>&nbsp;<span class="ident" id="4614745">parseFiles</span><span class="op" id="4614755">(</span><span class="builtintype" id="4614756">nil</span><span class="op" id="4614759">,</span>&nbsp;<span class="ident" id="4614761">filenames</span><span class="op" id="4614770">...</span><span class="op" id="4614773">)</span><br>
<span class="lineno"></span><span class="op" id="4614775">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4614778">//&nbsp;ParseFiles&nbsp;parses&nbsp;the&nbsp;named&nbsp;files&nbsp;and&nbsp;associates&nbsp;the&nbsp;resulting&nbsp;templates&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="4614859">//&nbsp;t.&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;parsing&nbsp;stops&nbsp;and&nbsp;the&nbsp;returned&nbsp;template&nbsp;is&nbsp;nil;</span><br>
<span class="lineno"></span><span class="comment" id="4614933">//&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;t.&nbsp;There&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4614988">func</span>&nbsp;<span class="op" id="4614993">(</span><span class="ident" id="4614994">t</span>&nbsp;<span class="op" id="4614996">*</span><span class="ident" id="4614997">Template</span><span class="op" id="4615005">)</span>&nbsp;<span class="ident" id="4615007">ParseFiles</span><span class="op" id="4615017">(</span><span class="ident" id="4615018">filenames</span>&nbsp;<span class="op" id="4615028">...</span><span class="builtintype" id="4615031">string</span><span class="op" id="4615037">)</span>&nbsp;<span class="op" id="4615039">(</span><span class="op" id="4615040">*</span><span class="ident" id="4615041">Template</span><span class="op" id="4615049">,</span>&nbsp;<span class="builtintype" id="4615051">error</span><span class="op" id="4615056">)</span>&nbsp;<span class="op" id="4615058">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615061">return</span>&nbsp;<span class="ident" id="4615068">parseFiles</span><span class="op" id="4615078">(</span><span class="ident" id="4615079">t</span><span class="op" id="4615080">,</span>&nbsp;<span class="ident" id="4615082">filenames</span><span class="op" id="4615091">...</span><span class="op" id="4615094">)</span><br>
<span class="lineno"></span><span class="op" id="4615096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4615099">//&nbsp;parseFiles&nbsp;is&nbsp;the&nbsp;helper&nbsp;for&nbsp;the&nbsp;method&nbsp;and&nbsp;function.&nbsp;If&nbsp;the&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="4615172">//&nbsp;template&nbsp;is&nbsp;nil,&nbsp;it&nbsp;is&nbsp;created&nbsp;from&nbsp;the&nbsp;first&nbsp;file.</span><br>
<span class="lineno">45</span><span class="keyword" id="4615227">func</span>&nbsp;<span class="ident" id="4615232">parseFiles</span><span class="op" id="4615242">(</span><span class="ident" id="4615243">t</span>&nbsp;<span class="op" id="4615245">*</span><span class="ident" id="4615246">Template</span><span class="op" id="4615254">,</span>&nbsp;<span class="ident" id="4615256">filenames</span>&nbsp;<span class="op" id="4615266">...</span><span class="builtintype" id="4615269">string</span><span class="op" id="4615275">)</span>&nbsp;<span class="op" id="4615277">(</span><span class="op" id="4615278">*</span><span class="ident" id="4615279">Template</span><span class="op" id="4615287">,</span>&nbsp;<span class="builtintype" id="4615289">error</span><span class="op" id="4615294">)</span>&nbsp;<span class="op" id="4615296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615299">if</span>&nbsp;<span class="builtinfunc" id="4615302">len</span><span class="op" id="4615305">(</span><span class="ident" id="4615306">filenames</span><span class="op" id="4615315">)</span>&nbsp;<span class="op" id="4615317">==</span>&nbsp;<span class="num" id="4615320">0</span>&nbsp;<span class="op" id="4615322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615326">//&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem,&nbsp;but&nbsp;be&nbsp;consistent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615372">return</span>&nbsp;<span class="builtintype" id="4615379">nil</span><span class="op" id="4615382">,</span>&nbsp;<span class="ident" id="4615384">fmt</span><span class="op" id="4615387">.</span><span class="ident" id="4615388">Errorf</span><span class="op" id="4615394">(</span><span class="string" id="4615395">&#34;template:&nbsp;no&nbsp;files&nbsp;named&nbsp;in&nbsp;call&nbsp;to&nbsp;ParseFiles&#34;</span><span class="op" id="4615443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4615446">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615449">for</span>&nbsp;<span class="ident" id="4615453">_</span><span class="op" id="4615454">,</span>&nbsp;<span class="ident" id="4615456">filename</span>&nbsp;<span class="op" id="4615465">:=</span>&nbsp;<span class="keyword" id="4615468">range</span>&nbsp;<span class="ident" id="4615474">filenames</span>&nbsp;<span class="op" id="4615484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4615488">b</span><span class="op" id="4615489">,</span>&nbsp;<span class="ident" id="4615491">err</span>&nbsp;<span class="op" id="4615495">:=</span>&nbsp;<span class="ident" id="4615498">ioutil</span><span class="op" id="4615504">.</span><span class="ident" id="4615505">ReadFile</span><span class="op" id="4615513">(</span><span class="ident" id="4615514">filename</span><span class="op" id="4615522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615526">if</span>&nbsp;<span class="ident" id="4615529">err</span>&nbsp;<span class="op" id="4615533">!=</span>&nbsp;<span class="builtintype" id="4615536">nil</span>&nbsp;<span class="op" id="4615540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615545">return</span>&nbsp;<span class="builtintype" id="4615552">nil</span><span class="op" id="4615555">,</span>&nbsp;<span class="ident" id="4615557">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4615563">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4615567">s</span>&nbsp;<span class="op" id="4615569">:=</span>&nbsp;<span class="builtintype" id="4615572">string</span><span class="op" id="4615578">(</span><span class="ident" id="4615579">b</span><span class="op" id="4615580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4615584">name</span>&nbsp;<span class="op" id="4615589">:=</span>&nbsp;<span class="ident" id="4615592">filepath</span><span class="op" id="4615600">.</span><span class="ident" id="4615601">Base</span><span class="op" id="4615605">(</span><span class="ident" id="4615606">filename</span><span class="op" id="4615614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615618">//&nbsp;First&nbsp;template&nbsp;becomes&nbsp;return&nbsp;value&nbsp;if&nbsp;not&nbsp;already&nbsp;defined,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615683">//&nbsp;and&nbsp;we&nbsp;use&nbsp;that&nbsp;one&nbsp;for&nbsp;subsequent&nbsp;New&nbsp;calls&nbsp;to&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615746">//&nbsp;all&nbsp;the&nbsp;templates&nbsp;together.&nbsp;Also,&nbsp;if&nbsp;this&nbsp;file&nbsp;has&nbsp;the&nbsp;same&nbsp;name</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615816">//&nbsp;as&nbsp;t,&nbsp;this&nbsp;file&nbsp;becomes&nbsp;the&nbsp;contents&nbsp;of&nbsp;t,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615867">//&nbsp;&nbsp;t,&nbsp;err&nbsp;:=&nbsp;New(name).Funcs(xxx).ParseFiles(name)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4615921">//&nbsp;works.&nbsp;Otherwise&nbsp;we&nbsp;create&nbsp;a&nbsp;new&nbsp;template&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4615987">var</span>&nbsp;<span class="ident" id="4615991">tmpl</span>&nbsp;<span class="op" id="4615996">*</span><span class="ident" id="4615997">Template</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4616008">if</span>&nbsp;<span class="ident" id="4616011">t</span>&nbsp;<span class="op" id="4616013">==</span>&nbsp;<span class="builtintype" id="4616016">nil</span>&nbsp;<span class="op" id="4616020">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4616025">t</span>&nbsp;<span class="op" id="4616027">=</span>&nbsp;<span class="ident" id="4616029">New</span><span class="op" id="4616032">(</span><span class="ident" id="4616033">name</span><span class="op" id="4616037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4616041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4616045">if</span>&nbsp;<span class="ident" id="4616048">name</span>&nbsp;<span class="op" id="4616053">==</span>&nbsp;<span class="ident" id="4616056">t</span><span class="op" id="4616057">.</span><span class="ident" id="4616058">Name</span><span class="op" id="4616062">(</span><span class="op" id="4616063">)</span>&nbsp;<span class="op" id="4616065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4616070">tmpl</span>&nbsp;<span class="op" id="4616075">=</span>&nbsp;<span class="ident" id="4616077">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4616081">}</span>&nbsp;<span class="keyword" id="4616083">else</span>&nbsp;<span class="op" id="4616088">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4616093">tmpl</span>&nbsp;<span class="op" id="4616098">=</span>&nbsp;<span class="ident" id="4616100">t</span><span class="op" id="4616101">.</span><span class="ident" id="4616102">New</span><span class="op" id="4616105">(</span><span class="ident" id="4616106">name</span><span class="op" id="4616110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4616114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4616118">_</span><span class="op" id="4616119">,</span>&nbsp;<span class="ident" id="4616121">err</span>&nbsp;<span class="op" id="4616125">=</span>&nbsp;<span class="ident" id="4616127">tmpl</span><span class="op" id="4616131">.</span><span class="ident" id="4616132">Parse</span><span class="op" id="4616137">(</span><span class="ident" id="4616138">s</span><span class="op" id="4616139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4616143">if</span>&nbsp;<span class="ident" id="4616146">err</span>&nbsp;<span class="op" id="4616150">!=</span>&nbsp;<span class="builtintype" id="4616153">nil</span>&nbsp;<span class="op" id="4616157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4616162">return</span>&nbsp;<span class="builtintype" id="4616169">nil</span><span class="op" id="4616172">,</span>&nbsp;<span class="ident" id="4616174">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4616180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4616183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4616186">return</span>&nbsp;<span class="ident" id="4616193">t</span><span class="op" id="4616194">,</span>&nbsp;<span class="builtintype" id="4616196">nil</span><br>
<span class="lineno"></span><span class="op" id="4616200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4616203">//&nbsp;ParseGlob&nbsp;creates&nbsp;a&nbsp;new&nbsp;Template&nbsp;and&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4616284">//&nbsp;files&nbsp;identified&nbsp;by&nbsp;the&nbsp;pattern,&nbsp;which&nbsp;must&nbsp;match&nbsp;at&nbsp;least&nbsp;one&nbsp;file.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="4616360">//&nbsp;returned&nbsp;template&nbsp;will&nbsp;have&nbsp;the&nbsp;(base)&nbsp;name&nbsp;and&nbsp;(parsed)&nbsp;contents&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4616436">//&nbsp;first&nbsp;file&nbsp;matched&nbsp;by&nbsp;the&nbsp;pattern.&nbsp;ParseGlob&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling</span><br>
<span class="lineno"></span><span class="comment" id="4616509">//&nbsp;ParseFiles&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;matched&nbsp;by&nbsp;the&nbsp;pattern.</span><br>
<span class="lineno">85</span><span class="keyword" id="4616570">func</span>&nbsp;<span class="ident" id="4616575">ParseGlob</span><span class="op" id="4616584">(</span><span class="ident" id="4616585">pattern</span>&nbsp;<span class="builtintype" id="4616593">string</span><span class="op" id="4616599">)</span>&nbsp;<span class="op" id="4616601">(</span><span class="op" id="4616602">*</span><span class="ident" id="4616603">Template</span><span class="op" id="4616611">,</span>&nbsp;<span class="builtintype" id="4616613">error</span><span class="op" id="4616618">)</span>&nbsp;<span class="op" id="4616620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4616623">return</span>&nbsp;<span class="ident" id="4616630">parseGlob</span><span class="op" id="4616639">(</span><span class="builtintype" id="4616640">nil</span><span class="op" id="4616643">,</span>&nbsp;<span class="ident" id="4616645">pattern</span><span class="op" id="4616652">)</span><br>
<span class="lineno"></span><span class="op" id="4616654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4616657">//&nbsp;ParseGlob&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;in&nbsp;the&nbsp;files&nbsp;identified&nbsp;by&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="4616733">//&nbsp;pattern&nbsp;and&nbsp;associates&nbsp;the&nbsp;resulting&nbsp;templates&nbsp;with&nbsp;t.&nbsp;The&nbsp;pattern&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4616806">//&nbsp;processed&nbsp;by&nbsp;filepath.Glob&nbsp;and&nbsp;must&nbsp;match&nbsp;at&nbsp;least&nbsp;one&nbsp;file.&nbsp;ParseGlob&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4616883">//&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;t.ParseFiles&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;matched&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4616959">//&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="4616971">func</span>&nbsp;<span class="op" id="4616976">(</span><span class="ident" id="4616977">t</span>&nbsp;<span class="op" id="4616979">*</span><span class="ident" id="4616980">Template</span><span class="op" id="4616988">)</span>&nbsp;<span class="ident" id="4616990">ParseGlob</span><span class="op" id="4616999">(</span><span class="ident" id="4617000">pattern</span>&nbsp;<span class="builtintype" id="4617008">string</span><span class="op" id="4617014">)</span>&nbsp;<span class="op" id="4617016">(</span><span class="op" id="4617017">*</span><span class="ident" id="4617018">Template</span><span class="op" id="4617026">,</span>&nbsp;<span class="builtintype" id="4617028">error</span><span class="op" id="4617033">)</span>&nbsp;<span class="op" id="4617035">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4617038">return</span>&nbsp;<span class="ident" id="4617045">parseGlob</span><span class="op" id="4617054">(</span><span class="ident" id="4617055">t</span><span class="op" id="4617056">,</span>&nbsp;<span class="ident" id="4617058">pattern</span><span class="op" id="4617065">)</span><br>
<span class="lineno"></span><span class="op" id="4617067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4617070">//&nbsp;parseGlob&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;function&nbsp;and&nbsp;method&nbsp;ParseGlob.</span><br>
<span class="lineno"></span><span class="keyword" id="4617143">func</span>&nbsp;<span class="ident" id="4617148">parseGlob</span><span class="op" id="4617157">(</span><span class="ident" id="4617158">t</span>&nbsp;<span class="op" id="4617160">*</span><span class="ident" id="4617161">Template</span><span class="op" id="4617169">,</span>&nbsp;<span class="ident" id="4617171">pattern</span>&nbsp;<span class="builtintype" id="4617179">string</span><span class="op" id="4617185">)</span>&nbsp;<span class="op" id="4617187">(</span><span class="op" id="4617188">*</span><span class="ident" id="4617189">Template</span><span class="op" id="4617197">,</span>&nbsp;<span class="builtintype" id="4617199">error</span><span class="op" id="4617204">)</span>&nbsp;<span class="op" id="4617206">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4617209">filenames</span><span class="op" id="4617218">,</span>&nbsp;<span class="ident" id="4617220">err</span>&nbsp;<span class="op" id="4617224">:=</span>&nbsp;<span class="ident" id="4617227">filepath</span><span class="op" id="4617235">.</span><span class="ident" id="4617236">Glob</span><span class="op" id="4617240">(</span><span class="ident" id="4617241">pattern</span><span class="op" id="4617248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4617251">if</span>&nbsp;<span class="ident" id="4617254">err</span>&nbsp;<span class="op" id="4617258">!=</span>&nbsp;<span class="builtintype" id="4617261">nil</span>&nbsp;<span class="op" id="4617265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4617269">return</span>&nbsp;<span class="builtintype" id="4617276">nil</span><span class="op" id="4617279">,</span>&nbsp;<span class="ident" id="4617281">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4617286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4617289">if</span>&nbsp;<span class="builtinfunc" id="4617292">len</span><span class="op" id="4617295">(</span><span class="ident" id="4617296">filenames</span><span class="op" id="4617305">)</span>&nbsp;<span class="op" id="4617307">==</span>&nbsp;<span class="num" id="4617310">0</span>&nbsp;<span class="op" id="4617312">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4617316">return</span>&nbsp;<span class="builtintype" id="4617323">nil</span><span class="op" id="4617326">,</span>&nbsp;<span class="ident" id="4617328">fmt</span><span class="op" id="4617331">.</span><span class="ident" id="4617332">Errorf</span><span class="op" id="4617338">(</span><span class="string" id="4617339">&#34;template:&nbsp;pattern&nbsp;matches&nbsp;no&nbsp;files:&nbsp;%#q&#34;</span><span class="op" id="4617380">,</span>&nbsp;<span class="ident" id="4617382">pattern</span><span class="op" id="4617389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4617392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4617395">return</span>&nbsp;<span class="ident" id="4617402">parseFiles</span><span class="op" id="4617412">(</span><span class="ident" id="4617413">t</span><span class="op" id="4617414">,</span>&nbsp;<span class="ident" id="4617416">filenames</span><span class="op" id="4617425">...</span><span class="op" id="4617428">)</span><br>
<span class="lineno"></span><span class="op" id="4617430">}</span>
</div>
</body>
</html>
