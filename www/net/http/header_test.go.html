<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7042629">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7042685">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7042739">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7042790">package</span>&nbsp;<span class="ident" id="7042798">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7042804">import</span>&nbsp;<span class="op" id="7042811">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7042814">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7042823">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7042834">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7042845">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7042852">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7042855">var</span>&nbsp;<span class="ident" id="7042859">headerWriteTests</span>&nbsp;<span class="op" id="7042876">=</span>&nbsp;<span class="op" id="7042878">[</span><span class="op" id="7042879">]</span><span class="keyword" id="7042880">struct</span>&nbsp;<span class="op" id="7042887">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042890">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7042899"><a href="/net/http/header.go.html#3356649">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042907">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7042916">map</span><span class="op" id="7042919">[</span><span class="builtintype" id="7042920">string</span><span class="op" id="7042926">]</span><span class="builtintype" id="7042927">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042933">expected</span>&nbsp;<span class="builtintype" id="7042942">string</span><br>
<span class="lineno"></span><span class="op" id="7042949">}</span><span class="op" id="7042950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042953">{</span><span class="ident" id="7042954"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7042960">{</span><span class="op" id="7042961">}</span><span class="op" id="7042962">,</span>&nbsp;<span class="ident" id="7042964">nil</span><span class="op" id="7042967">,</span>&nbsp;<span class="string" id="7042969">&#34;&#34;</span><span class="op" id="7042971">}</span><span class="op" id="7042972">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042979"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7042985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7042990">&#34;Content-Type&#34;</span><span class="op" id="7043004">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7043008">{</span><span class="string" id="7043009">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7043035">}</span><span class="op" id="7043036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043041">&#34;Content-Length&#34;</span><span class="op" id="7043057">:</span>&nbsp;<span class="op" id="7043059">{</span><span class="string" id="7043060">&#34;0&#34;</span><span class="op" id="7043063">}</span><span class="op" id="7043064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043068">}</span><span class="op" id="7043069">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043073">nil</span><span class="op" id="7043076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043080">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7043145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043148">}</span><span class="op" id="7043149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043156"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7043162">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043167">&#34;Content-Length&#34;</span><span class="op" id="7043183">:</span>&nbsp;<span class="op" id="7043185">{</span><span class="string" id="7043186">&#34;0&#34;</span><span class="op" id="7043189">,</span>&nbsp;<span class="string" id="7043191">&#34;1&#34;</span><span class="op" id="7043194">,</span>&nbsp;<span class="string" id="7043196">&#34;2&#34;</span><span class="op" id="7043199">}</span><span class="op" id="7043200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043204">}</span><span class="op" id="7043205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043209">nil</span><span class="op" id="7043212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043216">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7043281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043284">}</span><span class="op" id="7043285">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043292"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7043298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043303">&#34;Expires&#34;</span><span class="op" id="7043312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7043323">{</span><span class="string" id="7043324">&#34;-1&#34;</span><span class="op" id="7043328">}</span><span class="op" id="7043329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043334">&#34;Content-Length&#34;</span><span class="op" id="7043350">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7043354">{</span><span class="string" id="7043355">&#34;0&#34;</span><span class="op" id="7043358">}</span><span class="op" id="7043359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043364">&#34;Content-Encoding&#34;</span><span class="op" id="7043382">:</span>&nbsp;<span class="op" id="7043384">{</span><span class="string" id="7043385">&#34;gzip&#34;</span><span class="op" id="7043391">}</span><span class="op" id="7043392">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043396">}</span><span class="op" id="7043397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043401">map</span><span class="op" id="7043404">[</span><span class="builtintype" id="7043405">string</span><span class="op" id="7043411">]</span><span class="builtintype" id="7043412">bool</span><span class="op" id="7043416">{</span><span class="string" id="7043417">&#34;Content-Length&#34;</span><span class="op" id="7043433">:</span>&nbsp;<span class="builtintype" id="7043435">true</span><span class="op" id="7043439">}</span><span class="op" id="7043440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043444">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7043487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043490">}</span><span class="op" id="7043491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043494">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043498"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7043504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043509">&#34;Expires&#34;</span><span class="op" id="7043518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7043529">{</span><span class="string" id="7043530">&#34;-1&#34;</span><span class="op" id="7043534">}</span><span class="op" id="7043535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043540">&#34;Content-Length&#34;</span><span class="op" id="7043556">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7043560">{</span><span class="string" id="7043561">&#34;0&#34;</span><span class="op" id="7043564">,</span>&nbsp;<span class="string" id="7043566">&#34;1&#34;</span><span class="op" id="7043569">,</span>&nbsp;<span class="string" id="7043571">&#34;2&#34;</span><span class="op" id="7043574">}</span><span class="op" id="7043575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043580">&#34;Content-Encoding&#34;</span><span class="op" id="7043598">:</span>&nbsp;<span class="op" id="7043600">{</span><span class="string" id="7043601">&#34;gzip&#34;</span><span class="op" id="7043607">}</span><span class="op" id="7043608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043612">}</span><span class="op" id="7043613">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043617">map</span><span class="op" id="7043620">[</span><span class="builtintype" id="7043621">string</span><span class="op" id="7043627">]</span><span class="builtintype" id="7043628">bool</span><span class="op" id="7043632">{</span><span class="string" id="7043633">&#34;Content-Length&#34;</span><span class="op" id="7043649">:</span>&nbsp;<span class="builtintype" id="7043651">true</span><span class="op" id="7043655">}</span><span class="op" id="7043656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043660">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7043703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043706">}</span><span class="op" id="7043707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043714"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7043720">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043725">&#34;Expires&#34;</span><span class="op" id="7043734">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7043745">{</span><span class="string" id="7043746">&#34;-1&#34;</span><span class="op" id="7043750">}</span><span class="op" id="7043751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043756">&#34;Content-Length&#34;</span><span class="op" id="7043772">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7043776">{</span><span class="string" id="7043777">&#34;0&#34;</span><span class="op" id="7043780">}</span><span class="op" id="7043781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043786">&#34;Content-Encoding&#34;</span><span class="op" id="7043804">:</span>&nbsp;<span class="op" id="7043806">{</span><span class="string" id="7043807">&#34;gzip&#34;</span><span class="op" id="7043813">}</span><span class="op" id="7043814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043818">}</span><span class="op" id="7043819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043823">map</span><span class="op" id="7043826">[</span><span class="builtintype" id="7043827">string</span><span class="op" id="7043833">]</span><span class="builtintype" id="7043834">bool</span><span class="op" id="7043838">{</span><span class="string" id="7043839">&#34;Content-Length&#34;</span><span class="op" id="7043855">:</span>&nbsp;<span class="builtintype" id="7043857">true</span><span class="op" id="7043861">,</span>&nbsp;<span class="string" id="7043863">&#34;Expires&#34;</span><span class="op" id="7043872">:</span>&nbsp;<span class="builtintype" id="7043874">true</span><span class="op" id="7043878">,</span>&nbsp;<span class="string" id="7043880">&#34;Content-Encoding&#34;</span><span class="op" id="7043898">:</span>&nbsp;<span class="builtintype" id="7043900">true</span><span class="op" id="7043904">}</span><span class="op" id="7043905">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043909">&#34;&#34;</span><span class="op" id="7043911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043914">}</span><span class="op" id="7043915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043922"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7043928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043933">&#34;Nil&#34;</span><span class="op" id="7043938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7043949">nil</span><span class="op" id="7043952">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043957">&#34;Empty&#34;</span><span class="op" id="7043964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7043973">{</span><span class="op" id="7043974">}</span><span class="op" id="7043975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043980">&#34;Blank&#34;</span><span class="op" id="7043987">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7043996">{</span><span class="string" id="7043997">&#34;&#34;</span><span class="op" id="7043999">}</span><span class="op" id="7044000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044005">&#34;Double-Blank&#34;</span><span class="op" id="7044019">:</span>&nbsp;<span class="op" id="7044021">{</span><span class="string" id="7044022">&#34;&#34;</span><span class="op" id="7044024">,</span>&nbsp;<span class="string" id="7044026">&#34;&#34;</span><span class="op" id="7044028">}</span><span class="op" id="7044029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044033">}</span><span class="op" id="7044034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044038">nil</span><span class="op" id="7044041">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044045">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7044094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044097">}</span><span class="op" id="7044098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7044101">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044175"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7044181">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044186">&#34;k1&#34;</span><span class="op" id="7044190">:</span>&nbsp;<span class="op" id="7044192">{</span><span class="string" id="7044193">&#34;1a&#34;</span><span class="op" id="7044197">,</span>&nbsp;<span class="string" id="7044199">&#34;1b&#34;</span><span class="op" id="7044203">}</span><span class="op" id="7044204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044209">&#34;k2&#34;</span><span class="op" id="7044213">:</span>&nbsp;<span class="op" id="7044215">{</span><span class="string" id="7044216">&#34;2a&#34;</span><span class="op" id="7044220">,</span>&nbsp;<span class="string" id="7044222">&#34;2b&#34;</span><span class="op" id="7044226">}</span><span class="op" id="7044227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044232">&#34;k3&#34;</span><span class="op" id="7044236">:</span>&nbsp;<span class="op" id="7044238">{</span><span class="string" id="7044239">&#34;3a&#34;</span><span class="op" id="7044243">,</span>&nbsp;<span class="string" id="7044245">&#34;3b&#34;</span><span class="op" id="7044249">}</span><span class="op" id="7044250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044255">&#34;k4&#34;</span><span class="op" id="7044259">:</span>&nbsp;<span class="op" id="7044261">{</span><span class="string" id="7044262">&#34;4a&#34;</span><span class="op" id="7044266">,</span>&nbsp;<span class="string" id="7044268">&#34;4b&#34;</span><span class="op" id="7044272">}</span><span class="op" id="7044273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044278">&#34;k5&#34;</span><span class="op" id="7044282">:</span>&nbsp;<span class="op" id="7044284">{</span><span class="string" id="7044285">&#34;5a&#34;</span><span class="op" id="7044289">,</span>&nbsp;<span class="string" id="7044291">&#34;5b&#34;</span><span class="op" id="7044295">}</span><span class="op" id="7044296">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044301">&#34;k6&#34;</span><span class="op" id="7044305">:</span>&nbsp;<span class="op" id="7044307">{</span><span class="string" id="7044308">&#34;6a&#34;</span><span class="op" id="7044312">,</span>&nbsp;<span class="string" id="7044314">&#34;6b&#34;</span><span class="op" id="7044318">}</span><span class="op" id="7044319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044324">&#34;k7&#34;</span><span class="op" id="7044328">:</span>&nbsp;<span class="op" id="7044330">{</span><span class="string" id="7044331">&#34;7a&#34;</span><span class="op" id="7044335">,</span>&nbsp;<span class="string" id="7044337">&#34;7b&#34;</span><span class="op" id="7044341">}</span><span class="op" id="7044342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044347">&#34;k8&#34;</span><span class="op" id="7044351">:</span>&nbsp;<span class="op" id="7044353">{</span><span class="string" id="7044354">&#34;8a&#34;</span><span class="op" id="7044358">,</span>&nbsp;<span class="string" id="7044360">&#34;8b&#34;</span><span class="op" id="7044364">}</span><span class="op" id="7044365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044370">&#34;k9&#34;</span><span class="op" id="7044374">:</span>&nbsp;<span class="op" id="7044376">{</span><span class="string" id="7044377">&#34;9a&#34;</span><span class="op" id="7044381">,</span>&nbsp;<span class="string" id="7044383">&#34;9b&#34;</span><span class="op" id="7044387">}</span><span class="op" id="7044388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044392">}</span><span class="op" id="7044393">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044397">map</span><span class="op" id="7044400">[</span><span class="builtintype" id="7044401">string</span><span class="op" id="7044407">]</span><span class="builtintype" id="7044408">bool</span><span class="op" id="7044412">{</span><span class="string" id="7044413">&#34;k5&#34;</span><span class="op" id="7044417">:</span>&nbsp;<span class="builtintype" id="7044419">true</span><span class="op" id="7044423">}</span><span class="op" id="7044424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044428">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7044491">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044496">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7044539">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044544">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7044606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044609">}</span><span class="op" id="7044610">,</span><br>
<span class="lineno">90</span><span class="op" id="7044612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7044615">func</span>&nbsp;<span class="ident" id="7044620">TestHeaderWrite</span><span class="op" id="7044635">(</span><span class="ident" id="7044636">t</span>&nbsp;<span class="op" id="7044638">*</span><span class="ident" id="7044639"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7044646">.</span><span class="ident" id="7044647">T</span><span class="op" id="7044648">)</span>&nbsp;<span class="op" id="7044650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044653">var</span>&nbsp;<span class="ident" id="7044657">buf</span>&nbsp;<span class="ident" id="7044661"><a href="/net/http/header_test.go.html#7042814">bytes</a></span><span class="op" id="7044666">.</span><span class="ident" id="7044667">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044675">for</span>&nbsp;<span class="ident" id="7044679">i</span><span class="op" id="7044680">,</span>&nbsp;<span class="ident" id="7044682">test</span>&nbsp;<span class="op" id="7044687">:=</span>&nbsp;<span class="keyword" id="7044690">range</span>&nbsp;<span class="ident" id="7044696"><a href="/net/http/header_test.go.html#7042859">headerWriteTests</a></span>&nbsp;<span class="op" id="7044713">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044717"><a href="/net/http/header_test.go.html#7044682">test</a></span><span class="op" id="7044721">.</span><span class="ident" id="7044722">h</span><span class="op" id="7044723">.</span><span class="ident" id="7044724">WriteSubset</span><span class="op" id="7044735">(</span><span class="op" id="7044736">&amp;</span><span class="ident" id="7044737"><a href="/net/http/header_test.go.html#7044657">buf</a></span><span class="op" id="7044740">,</span>&nbsp;<span class="ident" id="7044742"><a href="/net/http/header_test.go.html#7044682">test</a></span><span class="op" id="7044746">.</span><span class="ident" id="7044747">exclude</span><span class="op" id="7044754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044758">if</span>&nbsp;<span class="ident" id="7044761"><a href="/net/http/header_test.go.html#7044657">buf</a></span><span class="op" id="7044764">.</span><span class="ident" id="7044765">String</span><span class="op" id="7044771">(</span><span class="op" id="7044772">)</span>&nbsp;<span class="op" id="7044774">!=</span>&nbsp;<span class="ident" id="7044777"><a href="/net/http/header_test.go.html#7044682">test</a></span><span class="op" id="7044781">.</span><span class="ident" id="7044782">expected</span>&nbsp;<span class="op" id="7044791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044796"><a href="/net/http/header_test.go.html#7044636">t</a></span><span class="op" id="7044797">.</span><span class="ident" id="7044798">Errorf</span><span class="op" id="7044804">(</span><span class="string" id="7044805">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7044831">,</span>&nbsp;<span class="ident" id="7044833"><a href="/net/http/header_test.go.html#7044679">i</a></span><span class="op" id="7044834">,</span>&nbsp;<span class="ident" id="7044836"><a href="/net/http/header_test.go.html#7044657">buf</a></span><span class="op" id="7044839">.</span><span class="ident" id="7044840">String</span><span class="op" id="7044846">(</span><span class="op" id="7044847">)</span><span class="op" id="7044848">,</span>&nbsp;<span class="ident" id="7044850"><a href="/net/http/header_test.go.html#7044682">test</a></span><span class="op" id="7044854">.</span><span class="ident" id="7044855">expected</span><span class="op" id="7044863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044871"><a href="/net/http/header_test.go.html#7044657">buf</a></span><span class="op" id="7044874">.</span><span class="ident" id="7044875">Reset</span><span class="op" id="7044880">(</span><span class="op" id="7044881">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044884">}</span><br>
<span class="lineno"></span><span class="op" id="7044886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7044889">var</span>&nbsp;<span class="ident" id="7044893">parseTimeTests</span>&nbsp;<span class="op" id="7044908">=</span>&nbsp;<span class="op" id="7044910">[</span><span class="op" id="7044911">]</span><span class="keyword" id="7044912">struct</span>&nbsp;<span class="op" id="7044919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044922">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7044926"><a href="/net/http/header.go.html#3356649">Header</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044934">err</span>&nbsp;<span class="builtintype" id="7044938">bool</span><br>
<span class="lineno"></span><span class="op" id="7044943">}</span><span class="op" id="7044944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044947">{</span><span class="ident" id="7044948"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7044954">{</span><span class="string" id="7044955">&#34;Date&#34;</span><span class="op" id="7044961">:</span>&nbsp;<span class="op" id="7044963">{</span><span class="string" id="7044964">&#34;&#34;</span><span class="op" id="7044966">}</span><span class="op" id="7044967">}</span><span class="op" id="7044968">,</span>&nbsp;<span class="builtintype" id="7044970">true</span><span class="op" id="7044974">}</span><span class="op" id="7044975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044978">{</span><span class="ident" id="7044979"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7044985">{</span><span class="string" id="7044986">&#34;Date&#34;</span><span class="op" id="7044992">:</span>&nbsp;<span class="op" id="7044994">{</span><span class="string" id="7044995">&#34;invalid&#34;</span><span class="op" id="7045004">}</span><span class="op" id="7045005">}</span><span class="op" id="7045006">,</span>&nbsp;<span class="builtintype" id="7045008">true</span><span class="op" id="7045012">}</span><span class="op" id="7045013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045016">{</span><span class="ident" id="7045017"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7045023">{</span><span class="string" id="7045024">&#34;Date&#34;</span><span class="op" id="7045030">:</span>&nbsp;<span class="op" id="7045032">{</span><span class="string" id="7045033">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7045060">}</span><span class="op" id="7045061">}</span><span class="op" id="7045062">,</span>&nbsp;<span class="builtintype" id="7045064">true</span><span class="op" id="7045068">}</span><span class="op" id="7045069">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045072">{</span><span class="ident" id="7045073"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7045079">{</span><span class="string" id="7045080">&#34;Date&#34;</span><span class="op" id="7045086">:</span>&nbsp;<span class="op" id="7045088">{</span><span class="string" id="7045089">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7045120">}</span><span class="op" id="7045121">}</span><span class="op" id="7045122">,</span>&nbsp;<span class="builtintype" id="7045124">false</span><span class="op" id="7045129">}</span><span class="op" id="7045130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045133">{</span><span class="ident" id="7045134"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7045140">{</span><span class="string" id="7045141">&#34;Date&#34;</span><span class="op" id="7045147">:</span>&nbsp;<span class="op" id="7045149">{</span><span class="string" id="7045150">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7045182">}</span><span class="op" id="7045183">}</span><span class="op" id="7045184">,</span>&nbsp;<span class="builtintype" id="7045186">false</span><span class="op" id="7045191">}</span><span class="op" id="7045192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045195">{</span><span class="ident" id="7045196"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7045202">{</span><span class="string" id="7045203">&#34;Date&#34;</span><span class="op" id="7045209">:</span>&nbsp;<span class="op" id="7045211">{</span><span class="string" id="7045212">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7045238">}</span><span class="op" id="7045239">}</span><span class="op" id="7045240">,</span>&nbsp;<span class="builtintype" id="7045242">false</span><span class="op" id="7045247">}</span><span class="op" id="7045248">,</span><br>
<span class="lineno"></span><span class="op" id="7045250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7045253">func</span>&nbsp;<span class="ident" id="7045258">TestParseTime</span><span class="op" id="7045271">(</span><span class="ident" id="7045272">t</span>&nbsp;<span class="op" id="7045274">*</span><span class="ident" id="7045275"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7045282">.</span><span class="ident" id="7045283">T</span><span class="op" id="7045284">)</span>&nbsp;<span class="op" id="7045286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045289">expect</span>&nbsp;<span class="op" id="7045296">:=</span>&nbsp;<span class="ident" id="7045299"><a href="/net/http/header_test.go.html#7042845">time</a></span><span class="op" id="7045303">.</span><span class="ident" id="7045304">Date</span><span class="op" id="7045308">(</span><span class="num" id="7045309">1994</span><span class="op" id="7045313">,</span>&nbsp;<span class="num" id="7045315">11</span><span class="op" id="7045317">,</span>&nbsp;<span class="num" id="7045319">6</span><span class="op" id="7045320">,</span>&nbsp;<span class="num" id="7045322">8</span><span class="op" id="7045323">,</span>&nbsp;<span class="num" id="7045325">49</span><span class="op" id="7045327">,</span>&nbsp;<span class="num" id="7045329">37</span><span class="op" id="7045331">,</span>&nbsp;<span class="num" id="7045333">0</span><span class="op" id="7045334">,</span>&nbsp;<span class="ident" id="7045336"><a href="/net/http/header_test.go.html#7042845">time</a></span><span class="op" id="7045340">.</span><span class="ident" id="7045341">UTC</span><span class="op" id="7045344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045347">for</span>&nbsp;<span class="ident" id="7045351">i</span><span class="op" id="7045352">,</span>&nbsp;<span class="ident" id="7045354">test</span>&nbsp;<span class="op" id="7045359">:=</span>&nbsp;<span class="keyword" id="7045362">range</span>&nbsp;<span class="ident" id="7045368"><a href="/net/http/header_test.go.html#7044893">parseTimeTests</a></span>&nbsp;<span class="op" id="7045383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045387">d</span><span class="op" id="7045388">,</span>&nbsp;<span class="ident" id="7045390">err</span>&nbsp;<span class="op" id="7045394">:=</span>&nbsp;<span class="ident" id="7045397"><a href="/net/http/header.go.html#3358207">ParseTime</a></span><span class="op" id="7045406">(</span><span class="ident" id="7045407"><a href="/net/http/header_test.go.html#7045354">test</a></span><span class="op" id="7045411">.</span><span class="ident" id="7045412">h</span><span class="op" id="7045413">.</span><span class="ident" id="7045414">Get</span><span class="op" id="7045417">(</span><span class="string" id="7045418">&#34;Date&#34;</span><span class="op" id="7045424">)</span><span class="op" id="7045425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045429">if</span>&nbsp;<span class="ident" id="7045432"><a href="/net/http/header_test.go.html#7045390">err</a></span>&nbsp;<span class="op" id="7045436">!=</span>&nbsp;<span class="ident" id="7045439">nil</span>&nbsp;<span class="op" id="7045443">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045448">if</span>&nbsp;<span class="op" id="7045451">!</span><span class="ident" id="7045452"><a href="/net/http/header_test.go.html#7045354">test</a></span><span class="op" id="7045456">.</span><span class="ident" id="7045457">err</span>&nbsp;<span class="op" id="7045461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045467"><a href="/net/http/header_test.go.html#7045272">t</a></span><span class="op" id="7045468">.</span><span class="ident" id="7045469">Errorf</span><span class="op" id="7045475">(</span><span class="string" id="7045476">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7045496">,</span>&nbsp;<span class="ident" id="7045498"><a href="/net/http/header_test.go.html#7045351">i</a></span><span class="op" id="7045499">,</span>&nbsp;<span class="ident" id="7045501"><a href="/net/http/header_test.go.html#7045390">err</a></span><span class="op" id="7045504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045514">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045525">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045529">if</span>&nbsp;<span class="ident" id="7045532"><a href="/net/http/header_test.go.html#7045354">test</a></span><span class="op" id="7045536">.</span><span class="ident" id="7045537">err</span>&nbsp;<span class="op" id="7045541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045546"><a href="/net/http/header_test.go.html#7045272">t</a></span><span class="op" id="7045547">.</span><span class="ident" id="7045548">Errorf</span><span class="op" id="7045554">(</span><span class="string" id="7045555">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7045575">,</span>&nbsp;<span class="ident" id="7045577"><a href="/net/http/header_test.go.html#7045351">i</a></span><span class="op" id="7045578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045583">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045598">if</span>&nbsp;<span class="op" id="7045601">!</span><span class="ident" id="7045602"><a href="/net/http/header_test.go.html#7045289">expect</a></span><span class="op" id="7045608">.</span><span class="ident" id="7045609">Equal</span><span class="op" id="7045614">(</span><span class="ident" id="7045615"><a href="/net/http/header_test.go.html#7045387">d</a></span><span class="op" id="7045616">)</span>&nbsp;<span class="op" id="7045618">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045623"><a href="/net/http/header_test.go.html#7045272">t</a></span><span class="op" id="7045624">.</span><span class="ident" id="7045625">Errorf</span><span class="op" id="7045631">(</span><span class="string" id="7045632">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7045658">,</span>&nbsp;<span class="ident" id="7045660"><a href="/net/http/header_test.go.html#7045351">i</a></span><span class="op" id="7045661">,</span>&nbsp;<span class="ident" id="7045663"><a href="/net/http/header_test.go.html#7045387">d</a></span><span class="op" id="7045664">,</span>&nbsp;<span class="ident" id="7045666"><a href="/net/http/header_test.go.html#7045289">expect</a></span><span class="op" id="7045672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045679">}</span><br>
<span class="lineno"></span><span class="op" id="7045681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7045684">type</span>&nbsp;<span class="ident" id="7045689">hasTokenTest</span>&nbsp;<span class="keyword" id="7045702">struct</span>&nbsp;<span class="op" id="7045709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045712">header</span>&nbsp;<span class="builtintype" id="7045719">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045727">token</span>&nbsp;&nbsp;<span class="builtintype" id="7045734">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045742">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7045749">bool</span><br>
<span class="lineno"></span><span class="op" id="7045754">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7045757">var</span>&nbsp;<span class="ident" id="7045761">hasTokenTests</span>&nbsp;<span class="op" id="7045775">=</span>&nbsp;<span class="op" id="7045777">[</span><span class="op" id="7045778">]</span><span class="ident" id="7045779"><a href="/net/http/header_test.go.html#7045689">hasTokenTest</a></span><span class="op" id="7045791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045794">{</span><span class="string" id="7045795">&#34;&#34;</span><span class="op" id="7045797">,</span>&nbsp;<span class="string" id="7045799">&#34;&#34;</span><span class="op" id="7045801">,</span>&nbsp;<span class="builtintype" id="7045803">false</span><span class="op" id="7045808">}</span><span class="op" id="7045809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045812">{</span><span class="string" id="7045813">&#34;&#34;</span><span class="op" id="7045815">,</span>&nbsp;<span class="string" id="7045817">&#34;foo&#34;</span><span class="op" id="7045822">,</span>&nbsp;<span class="builtintype" id="7045824">false</span><span class="op" id="7045829">}</span><span class="op" id="7045830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045833">{</span><span class="string" id="7045834">&#34;foo&#34;</span><span class="op" id="7045839">,</span>&nbsp;<span class="string" id="7045841">&#34;foo&#34;</span><span class="op" id="7045846">,</span>&nbsp;<span class="builtintype" id="7045848">true</span><span class="op" id="7045852">}</span><span class="op" id="7045853">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045856">{</span><span class="string" id="7045857">&#34;foo&nbsp;&#34;</span><span class="op" id="7045863">,</span>&nbsp;<span class="string" id="7045865">&#34;foo&#34;</span><span class="op" id="7045870">,</span>&nbsp;<span class="builtintype" id="7045872">true</span><span class="op" id="7045876">}</span><span class="op" id="7045877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045880">{</span><span class="string" id="7045881">&#34;&nbsp;foo&#34;</span><span class="op" id="7045887">,</span>&nbsp;<span class="string" id="7045889">&#34;foo&#34;</span><span class="op" id="7045894">,</span>&nbsp;<span class="builtintype" id="7045896">true</span><span class="op" id="7045900">}</span><span class="op" id="7045901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045904">{</span><span class="string" id="7045905">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7045912">,</span>&nbsp;<span class="string" id="7045914">&#34;foo&#34;</span><span class="op" id="7045919">,</span>&nbsp;<span class="builtintype" id="7045921">true</span><span class="op" id="7045925">}</span><span class="op" id="7045926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045929">{</span><span class="string" id="7045930">&#34;foo,bar&#34;</span><span class="op" id="7045939">,</span>&nbsp;<span class="string" id="7045941">&#34;foo&#34;</span><span class="op" id="7045946">,</span>&nbsp;<span class="builtintype" id="7045948">true</span><span class="op" id="7045952">}</span><span class="op" id="7045953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045956">{</span><span class="string" id="7045957">&#34;bar,foo&#34;</span><span class="op" id="7045966">,</span>&nbsp;<span class="string" id="7045968">&#34;foo&#34;</span><span class="op" id="7045973">,</span>&nbsp;<span class="builtintype" id="7045975">true</span><span class="op" id="7045979">}</span><span class="op" id="7045980">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045983">{</span><span class="string" id="7045984">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7045994">,</span>&nbsp;<span class="string" id="7045996">&#34;foo&#34;</span><span class="op" id="7046001">,</span>&nbsp;<span class="builtintype" id="7046003">true</span><span class="op" id="7046007">}</span><span class="op" id="7046008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046011">{</span><span class="string" id="7046012">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7046026">,</span>&nbsp;<span class="string" id="7046028">&#34;foo&#34;</span><span class="op" id="7046033">,</span>&nbsp;<span class="builtintype" id="7046035">true</span><span class="op" id="7046039">}</span><span class="op" id="7046040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046043">{</span><span class="string" id="7046044">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7046058">,</span>&nbsp;<span class="string" id="7046060">&#34;foo&#34;</span><span class="op" id="7046065">,</span>&nbsp;<span class="builtintype" id="7046067">true</span><span class="op" id="7046071">}</span><span class="op" id="7046072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046075">{</span><span class="string" id="7046076">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7046090">,</span>&nbsp;<span class="string" id="7046092">&#34;foo&#34;</span><span class="op" id="7046097">,</span>&nbsp;<span class="builtintype" id="7046099">true</span><span class="op" id="7046103">}</span><span class="op" id="7046104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046107">{</span><span class="string" id="7046108">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7046123">,</span>&nbsp;<span class="string" id="7046125">&#34;foo&#34;</span><span class="op" id="7046130">,</span>&nbsp;<span class="builtintype" id="7046132">true</span><span class="op" id="7046136">}</span><span class="op" id="7046137">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046140">{</span><span class="string" id="7046141">&#34;FOO&#34;</span><span class="op" id="7046146">,</span>&nbsp;<span class="string" id="7046148">&#34;foo&#34;</span><span class="op" id="7046153">,</span>&nbsp;<span class="builtintype" id="7046155">true</span><span class="op" id="7046159">}</span><span class="op" id="7046160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046163">{</span><span class="string" id="7046164">&#34;FOO&nbsp;&#34;</span><span class="op" id="7046170">,</span>&nbsp;<span class="string" id="7046172">&#34;foo&#34;</span><span class="op" id="7046177">,</span>&nbsp;<span class="builtintype" id="7046179">true</span><span class="op" id="7046183">}</span><span class="op" id="7046184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046187">{</span><span class="string" id="7046188">&#34;&nbsp;FOO&#34;</span><span class="op" id="7046194">,</span>&nbsp;<span class="string" id="7046196">&#34;foo&#34;</span><span class="op" id="7046201">,</span>&nbsp;<span class="builtintype" id="7046203">true</span><span class="op" id="7046207">}</span><span class="op" id="7046208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046211">{</span><span class="string" id="7046212">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7046219">,</span>&nbsp;<span class="string" id="7046221">&#34;foo&#34;</span><span class="op" id="7046226">,</span>&nbsp;<span class="builtintype" id="7046228">true</span><span class="op" id="7046232">}</span><span class="op" id="7046233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046236">{</span><span class="string" id="7046237">&#34;FOO,BAR&#34;</span><span class="op" id="7046246">,</span>&nbsp;<span class="string" id="7046248">&#34;foo&#34;</span><span class="op" id="7046253">,</span>&nbsp;<span class="builtintype" id="7046255">true</span><span class="op" id="7046259">}</span><span class="op" id="7046260">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046263">{</span><span class="string" id="7046264">&#34;BAR,FOO&#34;</span><span class="op" id="7046273">,</span>&nbsp;<span class="string" id="7046275">&#34;foo&#34;</span><span class="op" id="7046280">,</span>&nbsp;<span class="builtintype" id="7046282">true</span><span class="op" id="7046286">}</span><span class="op" id="7046287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046290">{</span><span class="string" id="7046291">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7046301">,</span>&nbsp;<span class="string" id="7046303">&#34;foo&#34;</span><span class="op" id="7046308">,</span>&nbsp;<span class="builtintype" id="7046310">true</span><span class="op" id="7046314">}</span><span class="op" id="7046315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046318">{</span><span class="string" id="7046319">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7046333">,</span>&nbsp;<span class="string" id="7046335">&#34;foo&#34;</span><span class="op" id="7046340">,</span>&nbsp;<span class="builtintype" id="7046342">true</span><span class="op" id="7046346">}</span><span class="op" id="7046347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046350">{</span><span class="string" id="7046351">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7046365">,</span>&nbsp;<span class="string" id="7046367">&#34;foo&#34;</span><span class="op" id="7046372">,</span>&nbsp;<span class="builtintype" id="7046374">true</span><span class="op" id="7046378">}</span><span class="op" id="7046379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046382">{</span><span class="string" id="7046383">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7046397">,</span>&nbsp;<span class="string" id="7046399">&#34;foo&#34;</span><span class="op" id="7046404">,</span>&nbsp;<span class="builtintype" id="7046406">true</span><span class="op" id="7046410">}</span><span class="op" id="7046411">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046414">{</span><span class="string" id="7046415">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7046430">,</span>&nbsp;<span class="string" id="7046432">&#34;foo&#34;</span><span class="op" id="7046437">,</span>&nbsp;<span class="builtintype" id="7046439">true</span><span class="op" id="7046443">}</span><span class="op" id="7046444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046447">{</span><span class="string" id="7046448">&#34;foobar&#34;</span><span class="op" id="7046456">,</span>&nbsp;<span class="string" id="7046458">&#34;foo&#34;</span><span class="op" id="7046463">,</span>&nbsp;<span class="builtintype" id="7046465">false</span><span class="op" id="7046470">}</span><span class="op" id="7046471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046474">{</span><span class="string" id="7046475">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7046484">,</span>&nbsp;<span class="string" id="7046486">&#34;foo&#34;</span><span class="op" id="7046491">,</span>&nbsp;<span class="builtintype" id="7046493">false</span><span class="op" id="7046498">}</span><span class="op" id="7046499">,</span><br>
<span class="lineno"></span><span class="op" id="7046501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7046504">func</span>&nbsp;<span class="ident" id="7046509">TestHasToken</span><span class="op" id="7046521">(</span><span class="ident" id="7046522">t</span>&nbsp;<span class="op" id="7046524">*</span><span class="ident" id="7046525"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7046532">.</span><span class="ident" id="7046533">T</span><span class="op" id="7046534">)</span>&nbsp;<span class="op" id="7046536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046539">for</span>&nbsp;<span class="ident" id="7046543">_</span><span class="op" id="7046544">,</span>&nbsp;<span class="ident" id="7046546">tt</span>&nbsp;<span class="op" id="7046549">:=</span>&nbsp;<span class="keyword" id="7046552">range</span>&nbsp;<span class="ident" id="7046558"><a href="/net/http/header_test.go.html#7045761">hasTokenTests</a></span>&nbsp;<span class="op" id="7046572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046576">if</span>&nbsp;<span class="ident" id="7046579"><a href="/net/http/header.go.html#3361024">hasToken</a></span><span class="op" id="7046587">(</span><span class="ident" id="7046588"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046590">.</span><span class="ident" id="7046591">header</span><span class="op" id="7046597">,</span>&nbsp;<span class="ident" id="7046599"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046601">.</span><span class="ident" id="7046602">token</span><span class="op" id="7046607">)</span>&nbsp;<span class="op" id="7046609">!=</span>&nbsp;<span class="ident" id="7046612"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046614">.</span><span class="ident" id="7046615">want</span>&nbsp;<span class="op" id="7046620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046625"><a href="/net/http/header_test.go.html#7046522">t</a></span><span class="op" id="7046626">.</span><span class="ident" id="7046627">Errorf</span><span class="op" id="7046633">(</span><span class="string" id="7046634">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7046666">,</span>&nbsp;<span class="ident" id="7046668"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046670">.</span><span class="ident" id="7046671">header</span><span class="op" id="7046677">,</span>&nbsp;<span class="ident" id="7046679"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046681">.</span><span class="ident" id="7046682">token</span><span class="op" id="7046687">,</span>&nbsp;<span class="op" id="7046689">!</span><span class="ident" id="7046690"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046692">.</span><span class="ident" id="7046693">want</span><span class="op" id="7046697">,</span>&nbsp;<span class="ident" id="7046699"><a href="/net/http/header_test.go.html#7046546">tt</a></span><span class="op" id="7046701">.</span><span class="ident" id="7046702">want</span><span class="op" id="7046706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046710">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046713">}</span><br>
<span class="lineno"></span><span class="op" id="7046715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7046718">var</span>&nbsp;<span class="ident" id="7046722">testHeader</span>&nbsp;<span class="op" id="7046733">=</span>&nbsp;<span class="ident" id="7046735"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="7046741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7046744">&#34;Content-Length&#34;</span><span class="op" id="7046760">:</span>&nbsp;<span class="op" id="7046762">{</span><span class="string" id="7046763">&#34;123&#34;</span><span class="op" id="7046768">}</span><span class="op" id="7046769">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7046772">&#34;Content-Type&#34;</span><span class="op" id="7046786">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7046790">{</span><span class="string" id="7046791">&#34;text/plain&#34;</span><span class="op" id="7046803">}</span><span class="op" id="7046804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7046807">&#34;Date&#34;</span><span class="op" id="7046813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7046825">{</span><span class="string" id="7046826">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7046852">}</span><span class="op" id="7046853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7046856">&#34;Server&#34;</span><span class="op" id="7046864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7046874">{</span><span class="ident" id="7046875"><a href="/net/http/export_test.go.html#7040562">DefaultUserAgent</a></span><span class="op" id="7046891">}</span><span class="op" id="7046892">,</span><br>
<span class="lineno"></span><span class="op" id="7046894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7046897">var</span>&nbsp;<span class="ident" id="7046901">buf</span>&nbsp;<span class="ident" id="7046905"><a href="/net/http/header_test.go.html#7042814">bytes</a></span><span class="op" id="7046910">.</span><span class="ident" id="7046911">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7046919">func</span>&nbsp;<span class="ident" id="7046924">BenchmarkHeaderWriteSubset</span><span class="op" id="7046950">(</span><span class="ident" id="7046951">b</span>&nbsp;<span class="op" id="7046953">*</span><span class="ident" id="7046954"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7046961">.</span><span class="ident" id="7046962">B</span><span class="op" id="7046963">)</span>&nbsp;<span class="op" id="7046965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046968"><a href="/net/http/header_test.go.html#7046951">b</a></span><span class="op" id="7046969">.</span><span class="ident" id="7046970">ReportAllocs</span><span class="op" id="7046982">(</span><span class="op" id="7046983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046986">for</span>&nbsp;<span class="ident" id="7046990">i</span>&nbsp;<span class="op" id="7046992">:=</span>&nbsp;<span class="num" id="7046995">0</span><span class="op" id="7046996">;</span>&nbsp;<span class="ident" id="7046998"><a href="/net/http/header_test.go.html#7046990">i</a></span>&nbsp;<span class="op" id="7047000">&lt;</span>&nbsp;<span class="ident" id="7047002"><a href="/net/http/header_test.go.html#7046951">b</a></span><span class="op" id="7047003">.</span><span class="ident" id="7047004">N</span><span class="op" id="7047005">;</span>&nbsp;<span class="ident" id="7047007"><a href="/net/http/header_test.go.html#7046990">i</a></span><span class="op" id="7047008">++</span>&nbsp;<span class="op" id="7047011">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047015"><a href="/net/http/header_test.go.html#7046901">buf</a></span><span class="op" id="7047018">.</span><span class="ident" id="7047019">Reset</span><span class="op" id="7047024">(</span><span class="op" id="7047025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047029"><a href="/net/http/header_test.go.html#7046722">testHeader</a></span><span class="op" id="7047039">.</span><span class="ident" id="7047040">WriteSubset</span><span class="op" id="7047051">(</span><span class="op" id="7047052">&amp;</span><span class="ident" id="7047053"><a href="/net/http/header_test.go.html#7046901">buf</a></span><span class="op" id="7047056">,</span>&nbsp;<span class="ident" id="7047058">nil</span><span class="op" id="7047061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047064">}</span><br>
<span class="lineno"></span><span class="op" id="7047066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7047069">func</span>&nbsp;<span class="ident" id="7047074">TestHeaderWriteSubsetAllocs</span><span class="op" id="7047101">(</span><span class="ident" id="7047102">t</span>&nbsp;<span class="op" id="7047104">*</span><span class="ident" id="7047105"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7047112">.</span><span class="ident" id="7047113">T</span><span class="op" id="7047114">)</span>&nbsp;<span class="op" id="7047116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7047119">if</span>&nbsp;<span class="ident" id="7047122"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7047129">.</span><span class="ident" id="7047130">Short</span><span class="op" id="7047135">(</span><span class="op" id="7047136">)</span>&nbsp;<span class="op" id="7047138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047142"><a href="/net/http/header_test.go.html#7047102">t</a></span><span class="op" id="7047143">.</span><span class="ident" id="7047144">Skip</span><span class="op" id="7047148">(</span><span class="string" id="7047149">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7047184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7047190">if</span>&nbsp;<span class="ident" id="7047193"><a href="/net/http/header.go.html#3356543">raceEnabled</a></span>&nbsp;<span class="op" id="7047205">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047209"><a href="/net/http/header_test.go.html#7047102">t</a></span><span class="op" id="7047210">.</span><span class="ident" id="7047211">Skip</span><span class="op" id="7047215">(</span><span class="string" id="7047216">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7047251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7047257">if</span>&nbsp;<span class="ident" id="7047260"><a href="/net/http/header_test.go.html#7042823">runtime</a></span><span class="op" id="7047267">.</span><span class="ident" id="7047268">GOMAXPROCS</span><span class="op" id="7047278">(</span><span class="num" id="7047279">0</span><span class="op" id="7047280">)</span>&nbsp;<span class="op" id="7047282">&gt;</span>&nbsp;<span class="num" id="7047284">1</span>&nbsp;<span class="op" id="7047286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047290"><a href="/net/http/header_test.go.html#7047102">t</a></span><span class="op" id="7047291">.</span><span class="ident" id="7047292">Skip</span><span class="op" id="7047296">(</span><span class="string" id="7047297">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7047321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047324">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047327">n</span>&nbsp;<span class="op" id="7047329">:=</span>&nbsp;<span class="ident" id="7047332"><a href="/net/http/header_test.go.html#7042834">testing</a></span><span class="op" id="7047339">.</span><span class="ident" id="7047340">AllocsPerRun</span><span class="op" id="7047352">(</span><span class="num" id="7047353">100</span><span class="op" id="7047356">,</span>&nbsp;<span class="keyword" id="7047358">func</span><span class="op" id="7047362">(</span><span class="op" id="7047363">)</span>&nbsp;<span class="op" id="7047365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047369"><a href="/net/http/header_test.go.html#7046901">buf</a></span><span class="op" id="7047372">.</span><span class="ident" id="7047373">Reset</span><span class="op" id="7047378">(</span><span class="op" id="7047379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047383"><a href="/net/http/header_test.go.html#7046722">testHeader</a></span><span class="op" id="7047393">.</span><span class="ident" id="7047394">WriteSubset</span><span class="op" id="7047405">(</span><span class="op" id="7047406">&amp;</span><span class="ident" id="7047407"><a href="/net/http/header_test.go.html#7046901">buf</a></span><span class="op" id="7047410">,</span>&nbsp;<span class="ident" id="7047412">nil</span><span class="op" id="7047415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047418">}</span><span class="op" id="7047419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7047422">if</span>&nbsp;<span class="ident" id="7047425"><a href="/net/http/header_test.go.html#7047327">n</a></span>&nbsp;<span class="op" id="7047427">&gt;</span>&nbsp;<span class="num" id="7047429">0</span>&nbsp;<span class="op" id="7047431">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047435"><a href="/net/http/header_test.go.html#7047102">t</a></span><span class="op" id="7047436">.</span><span class="ident" id="7047437">Errorf</span><span class="op" id="7047443">(</span><span class="string" id="7047444">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7047465">,</span>&nbsp;<span class="ident" id="7047467"><a href="/net/http/header_test.go.html#7047327">n</a></span><span class="op" id="7047468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047471">}</span><br>
<span class="lineno"></span><span class="op" id="7047473">}</span>
</div>
</body>
</html>
