<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6076866">package</span>&nbsp;<span class="ident" id="6076874">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6076881">//&nbsp;Linker&nbsp;provides&nbsp;the&nbsp;framework&nbsp;to&nbsp;link&nbsp;packages&nbsp;together.</span><br>
<span class="lineno"></span><span class="keyword" id="6076941">type</span>&nbsp;<span class="ident" id="6076946">Linker</span>&nbsp;<span class="keyword" id="6076953">struct</span>&nbsp;<span class="op" id="6076960">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076963">pkgs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6076972">[</span><span class="op" id="6076973">]</span><span class="op" id="6076974">*</span><span class="ident" id="6076975"><a href="/lonnie.io/e8vm/link8/package.go.html#6078334">Package</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076984">pkgIndex</span>&nbsp;<span class="keyword" id="6076993">map</span><span class="op" id="6076996">[</span><span class="builtintype" id="6076997">string</span><span class="op" id="6077003">]</span><span class="builtintype" id="6077004">int</span><br>
<span class="lineno"></span><span class="op" id="6077008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6077011">//&nbsp;NewLinker&nbsp;creates&nbsp;a&nbsp;new&nbsp;linker&nbsp;with&nbsp;no&nbsp;packages.</span><br>
<span class="lineno">10</span><span class="keyword" id="6077063">func</span>&nbsp;<span class="ident" id="6077068">NewLinker</span><span class="op" id="6077077">(</span><span class="op" id="6077078">)</span>&nbsp;<span class="op" id="6077080">*</span><span class="ident" id="6077081"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span>&nbsp;<span class="op" id="6077088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077091">ret</span>&nbsp;<span class="op" id="6077095">:=</span>&nbsp;<span class="builtinfunc" id="6077098">new</span><span class="op" id="6077101">(</span><span class="ident" id="6077102"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span><span class="op" id="6077108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077111"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077091">ret</a></span><span class="op" id="6077114">.</span><span class="ident" id="6077115">pkgIndex</span>&nbsp;<span class="op" id="6077124">=</span>&nbsp;<span class="builtinfunc" id="6077126">make</span><span class="op" id="6077130">(</span><span class="keyword" id="6077131">map</span><span class="op" id="6077134">[</span><span class="builtintype" id="6077135">string</span><span class="op" id="6077141">]</span><span class="builtintype" id="6077142">int</span><span class="op" id="6077145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077148">return</span>&nbsp;<span class="ident" id="6077155"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077091">ret</a></span><br>
<span class="lineno"></span><span class="op" id="6077159">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6077162">//&nbsp;AddPkg&nbsp;adds&nbsp;a&nbsp;package&nbsp;into&nbsp;the&nbsp;linker.</span><br>
<span class="lineno"></span><span class="comment" id="6077204">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;package&nbsp;and&nbsp;if&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="6077262">//&nbsp;is&nbsp;new.</span><br>
<span class="lineno"></span><span class="keyword" id="6077273">func</span>&nbsp;<span class="op" id="6077278">(</span><span class="ident" id="6077279">lnk</span>&nbsp;<span class="op" id="6077283">*</span><span class="ident" id="6077284"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span><span class="op" id="6077290">)</span>&nbsp;<span class="ident" id="6077292">AddPkg</span><span class="op" id="6077298">(</span><span class="ident" id="6077299">p</span>&nbsp;<span class="op" id="6077301">*</span><span class="ident" id="6077302"><a href="/lonnie.io/e8vm/link8/package.go.html#6078334">Package</a></span><span class="op" id="6077309">)</span>&nbsp;<span class="op" id="6077311">(</span><span class="ident" id="6077312">index</span>&nbsp;<span class="builtintype" id="6077318">int</span><span class="op" id="6077321">,</span>&nbsp;<span class="ident" id="6077323">isNew</span>&nbsp;<span class="builtintype" id="6077329">bool</span><span class="op" id="6077333">)</span>&nbsp;<span class="op" id="6077335">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077338">path</span>&nbsp;<span class="op" id="6077343">:=</span>&nbsp;<span class="ident" id="6077346"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077299">p</a></span><span class="op" id="6077347">.</span><span class="ident" id="6077348">path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077354"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077312">index</a></span><span class="op" id="6077359">,</span>&nbsp;<span class="ident" id="6077361">found</span>&nbsp;<span class="op" id="6077367">:=</span>&nbsp;<span class="ident" id="6077370"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077279">lnk</a></span><span class="op" id="6077373">.</span><span class="ident" id="6077374">pkgIndex</span><span class="op" id="6077382">[</span><span class="ident" id="6077383"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077338">path</a></span><span class="op" id="6077387">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077390">if</span>&nbsp;<span class="ident" id="6077393"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077361">found</a></span>&nbsp;<span class="op" id="6077399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077403">return</span>&nbsp;<span class="ident" id="6077410"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077312">index</a></span><span class="op" id="6077415">,</span>&nbsp;<span class="builtintype" id="6077417">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077424">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077428"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077312">index</a></span>&nbsp;<span class="op" id="6077434">=</span>&nbsp;<span class="builtinfunc" id="6077436">len</span><span class="op" id="6077439">(</span><span class="ident" id="6077440"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077279">lnk</a></span><span class="op" id="6077443">.</span><span class="ident" id="6077444">pkgs</span><span class="op" id="6077448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077451"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077279">lnk</a></span><span class="op" id="6077454">.</span><span class="ident" id="6077455">pkgs</span>&nbsp;<span class="op" id="6077460">=</span>&nbsp;<span class="builtinfunc" id="6077462">append</span><span class="op" id="6077468">(</span><span class="ident" id="6077469"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077279">lnk</a></span><span class="op" id="6077472">.</span><span class="ident" id="6077473">pkgs</span><span class="op" id="6077477">,</span>&nbsp;<span class="ident" id="6077479"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077299">p</a></span><span class="op" id="6077480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077483"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077279">lnk</a></span><span class="op" id="6077486">.</span><span class="ident" id="6077487">pkgIndex</span><span class="op" id="6077495">[</span><span class="ident" id="6077496"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077338">path</a></span><span class="op" id="6077500">]</span>&nbsp;<span class="op" id="6077502">=</span>&nbsp;<span class="ident" id="6077504"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077312">index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077511">return</span>&nbsp;<span class="ident" id="6077518"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077312">index</a></span><span class="op" id="6077523">,</span>&nbsp;<span class="builtintype" id="6077525">true</span><br>
<span class="lineno">30</span><span class="op" id="6077530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6077533">//&nbsp;AddPkgs&nbsp;adds&nbsp;the&nbsp;package&nbsp;and&nbsp;recursively&nbsp;adds&nbsp;the&nbsp;packages</span><br>
<span class="lineno"></span><span class="comment" id="6077595">//&nbsp;it&nbsp;requires.&nbsp;It&nbsp;returns&nbsp;the&nbsp;package&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="6077641">func</span>&nbsp;<span class="op" id="6077646">(</span><span class="ident" id="6077647">lnk</span>&nbsp;<span class="op" id="6077651">*</span><span class="ident" id="6077652"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span><span class="op" id="6077658">)</span>&nbsp;<span class="ident" id="6077660">AddPkgs</span><span class="op" id="6077667">(</span><span class="ident" id="6077668">p</span>&nbsp;<span class="op" id="6077670">*</span><span class="ident" id="6077671"><a href="/lonnie.io/e8vm/link8/package.go.html#6078334">Package</a></span><span class="op" id="6077678">)</span>&nbsp;<span class="builtintype" id="6077680">int</span>&nbsp;<span class="op" id="6077684">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077687">index</span><span class="op" id="6077692">,</span>&nbsp;<span class="ident" id="6077694">isNew</span>&nbsp;<span class="op" id="6077700">:=</span>&nbsp;<span class="ident" id="6077703"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077647">lnk</a></span><span class="op" id="6077706">.</span><span class="ident" id="6077707">AddPkg</span><span class="op" id="6077713">(</span><span class="ident" id="6077714"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077668">p</a></span><span class="op" id="6077715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077718">if</span>&nbsp;<span class="ident" id="6077721"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077694">isNew</a></span>&nbsp;<span class="op" id="6077727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077731">for</span>&nbsp;<span class="ident" id="6077735">_</span><span class="op" id="6077736">,</span>&nbsp;<span class="ident" id="6077738">req</span>&nbsp;<span class="op" id="6077742">:=</span>&nbsp;<span class="keyword" id="6077745">range</span>&nbsp;<span class="ident" id="6077751"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077668">p</a></span><span class="op" id="6077752">.</span><span class="ident" id="6077753">requires</span>&nbsp;<span class="op" id="6077762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077767"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077647">lnk</a></span><span class="op" id="6077770">.</span><span class="ident" id="6077771">AddPkgs</span><span class="op" id="6077778">(</span><span class="ident" id="6077779"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077738">req</a></span><span class="op" id="6077782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077786">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077793">return</span>&nbsp;<span class="ident" id="6077800"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077687">index</a></span><br>
<span class="lineno"></span><span class="op" id="6077806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="6077809">//&nbsp;PkgIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;particular&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="6077866">func</span>&nbsp;<span class="op" id="6077871">(</span><span class="ident" id="6077872">lnk</span>&nbsp;<span class="op" id="6077876">*</span><span class="ident" id="6077877"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span><span class="op" id="6077883">)</span>&nbsp;<span class="ident" id="6077885">PkgIndex</span><span class="op" id="6077893">(</span><span class="ident" id="6077894">path</span>&nbsp;<span class="builtintype" id="6077899">string</span><span class="op" id="6077905">)</span>&nbsp;<span class="builtintype" id="6077907">int</span>&nbsp;<span class="op" id="6077911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077914">ret</span><span class="op" id="6077917">,</span>&nbsp;<span class="ident" id="6077919">found</span>&nbsp;<span class="op" id="6077925">:=</span>&nbsp;<span class="ident" id="6077928"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077872">lnk</a></span><span class="op" id="6077931">.</span><span class="ident" id="6077932">pkgIndex</span><span class="op" id="6077940">[</span><span class="ident" id="6077941"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077894">path</a></span><span class="op" id="6077945">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077948">if</span>&nbsp;<span class="op" id="6077951">!</span><span class="ident" id="6077952"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077919">found</a></span>&nbsp;<span class="op" id="6077958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6077962">panic</span><span class="op" id="6077967">(</span><span class="string" id="6077968">&#34;not&nbsp;found&#34;</span><span class="op" id="6077979">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077985">return</span>&nbsp;<span class="ident" id="6077992"><a href="/lonnie.io/e8vm/link8/linker.go.html#6077914">ret</a></span><br>
<span class="lineno"></span><span class="op" id="6077996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6077999">//&nbsp;Pkg&nbsp;returns&nbsp;the&nbsp;package&nbsp;of&nbsp;index&nbsp;i.</span><br>
<span class="lineno">55</span><span class="keyword" id="6078038">func</span>&nbsp;<span class="op" id="6078043">(</span><span class="ident" id="6078044">lnk</span>&nbsp;<span class="op" id="6078048">*</span><span class="ident" id="6078049"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span><span class="op" id="6078055">)</span>&nbsp;<span class="ident" id="6078057">Pkg</span><span class="op" id="6078060">(</span><span class="ident" id="6078061">i</span>&nbsp;<span class="builtintype" id="6078063">int</span><span class="op" id="6078066">)</span>&nbsp;<span class="op" id="6078068">*</span><span class="ident" id="6078069"><a href="/lonnie.io/e8vm/link8/package.go.html#6078334">Package</a></span>&nbsp;<span class="op" id="6078077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078080">return</span>&nbsp;<span class="ident" id="6078087"><a href="/lonnie.io/e8vm/link8/linker.go.html#6078044">lnk</a></span><span class="op" id="6078090">.</span><span class="ident" id="6078091">pkgs</span><span class="op" id="6078095">[</span><span class="ident" id="6078096"><a href="/lonnie.io/e8vm/link8/linker.go.html#6078061">i</a></span><span class="op" id="6078097">]</span><br>
<span class="lineno"></span><span class="op" id="6078099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6078102">//&nbsp;Npkg&nbsp;retunrs&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;packages.</span><br>
<span class="lineno">60</span><span class="keyword" id="6078148">func</span>&nbsp;<span class="op" id="6078153">(</span><span class="ident" id="6078154">lnk</span>&nbsp;<span class="op" id="6078158">*</span><span class="ident" id="6078159"><a href="/lonnie.io/e8vm/link8/linker.go.html#6076946">Linker</a></span><span class="op" id="6078165">)</span>&nbsp;<span class="ident" id="6078167">Npkg</span><span class="op" id="6078171">(</span><span class="op" id="6078172">)</span>&nbsp;<span class="builtintype" id="6078174">int</span>&nbsp;<span class="op" id="6078178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078181">return</span>&nbsp;<span class="builtinfunc" id="6078188">len</span><span class="op" id="6078191">(</span><span class="ident" id="6078192"><a href="/lonnie.io/e8vm/link8/linker.go.html#6078154">lnk</a></span><span class="op" id="6078195">.</span><span class="ident" id="6078196">pkgs</span><span class="op" id="6078200">)</span><br>
<span class="lineno"></span><span class="op" id="6078202">}</span>
</div>
</body>
</html>
