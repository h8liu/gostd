<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1563600">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1563655">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1563709">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1563760">package</span>&nbsp;<span class="ident" id="1563768">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1563777">import</span>&nbsp;<span class="op" id="1563784">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1563787">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1563796">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1563799">const</span>&nbsp;<span class="op" id="1563805">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563808">hashSize</span>&nbsp;<span class="op" id="1563817">=</span>&nbsp;<span class="num" id="1563819">1009</span><br>
<span class="lineno"></span><span class="op" id="1563824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1563827">var</span>&nbsp;<span class="op" id="1563831">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563834">ifaceLock</span>&nbsp;<span class="ident" id="1563844">mutex</span>&nbsp;<span class="comment" id="1563850">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563878">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1563888">[</span><span class="ident" id="1563889">hashSize</span><span class="op" id="1563897">]</span><span class="op" id="1563898">*</span><span class="ident" id="1563899">itab</span><br>
<span class="lineno"></span><span class="op" id="1563904">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1563907">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1563977">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1564046">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1564115">type</span>&nbsp;<span class="ident" id="1564120">fInterface</span>&nbsp;<span class="keyword" id="1564131">interface</span>&nbsp;<span class="op" id="1564141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564144">f</span><span class="op" id="1564145">(</span><span class="op" id="1564146">)</span><br>
<span class="lineno">25</span><span class="op" id="1564148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1564151">func</span>&nbsp;<span class="ident" id="1564156">getitab</span><span class="op" id="1564163">(</span><span class="ident" id="1564164">inter</span>&nbsp;<span class="op" id="1564170">*</span><span class="ident" id="1564171">interfacetype</span><span class="op" id="1564184">,</span>&nbsp;<span class="ident" id="1564186">typ</span>&nbsp;<span class="op" id="1564190">*</span><span class="ident" id="1564191">_type</span><span class="op" id="1564196">,</span>&nbsp;<span class="ident" id="1564198">canfail</span>&nbsp;<span class="builtintype" id="1564206">bool</span><span class="op" id="1564210">)</span>&nbsp;<span class="op" id="1564212">*</span><span class="ident" id="1564213">itab</span>&nbsp;<span class="op" id="1564218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564221">if</span>&nbsp;<span class="builtinfunc" id="1564224">len</span><span class="op" id="1564227">(</span><span class="ident" id="1564228">inter</span><span class="op" id="1564233">.</span><span class="ident" id="1564234">mhdr</span><span class="op" id="1564238">)</span>&nbsp;<span class="op" id="1564240">==</span>&nbsp;<span class="num" id="1564243">0</span>&nbsp;<span class="op" id="1564245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564249">gothrow</span><span class="op" id="1564256">(</span><span class="string" id="1564257">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1564290">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564297">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564311">x</span>&nbsp;<span class="op" id="1564313">:=</span>&nbsp;<span class="ident" id="1564316">typ</span><span class="op" id="1564319">.</span><span class="ident" id="1564320">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564323">if</span>&nbsp;<span class="ident" id="1564326">x</span>&nbsp;<span class="op" id="1564328">==</span>&nbsp;<span class="ident" id="1564331">nil</span>&nbsp;<span class="op" id="1564335">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564339">if</span>&nbsp;<span class="ident" id="1564342">canfail</span>&nbsp;<span class="op" id="1564350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564355">return</span>&nbsp;<span class="ident" id="1564362">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564372">i</span>&nbsp;<span class="op" id="1564374">:=</span>&nbsp;<span class="op" id="1564377">(</span><span class="op" id="1564378">*</span><span class="ident" id="1564379">imethod</span><span class="op" id="1564386">)</span><span class="op" id="1564387">(</span><span class="ident" id="1564388">add</span><span class="op" id="1564391">(</span><span class="ident" id="1564392">unsafe</span><span class="op" id="1564398">.</span><span class="ident" id="1564399">Pointer</span><span class="op" id="1564406">(</span><span class="ident" id="1564407">inter</span><span class="op" id="1564412">)</span><span class="op" id="1564413">,</span>&nbsp;<span class="ident" id="1564415">unsafe</span><span class="op" id="1564421">.</span><span class="ident" id="1564422">Sizeof</span><span class="op" id="1564428">(</span><span class="ident" id="1564429">interfacetype</span><span class="op" id="1564442">{</span><span class="op" id="1564443">}</span><span class="op" id="1564444">)</span><span class="op" id="1564445">)</span><span class="op" id="1564446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1564450">panic</span><span class="op" id="1564455">(</span><span class="op" id="1564456">&amp;</span><span class="ident" id="1564457">TypeAssertionError</span><span class="op" id="1564475">{</span><span class="string" id="1564476">&#34;&#34;</span><span class="op" id="1564478">,</span>&nbsp;<span class="op" id="1564480">*</span><span class="ident" id="1564481">typ</span><span class="op" id="1564484">.</span><span class="ident" id="1564485">_string</span><span class="op" id="1564492">,</span>&nbsp;<span class="op" id="1564494">*</span><span class="ident" id="1564495">inter</span><span class="op" id="1564500">.</span><span class="ident" id="1564501">typ</span><span class="op" id="1564504">.</span><span class="ident" id="1564505">_string</span><span class="op" id="1564512">,</span>&nbsp;<span class="op" id="1564514">*</span><span class="ident" id="1564515">i</span><span class="op" id="1564516">.</span><span class="ident" id="1564517">name</span><span class="op" id="1564521">}</span><span class="op" id="1564522">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564529">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564584">h</span>&nbsp;<span class="op" id="1564586">:=</span>&nbsp;<span class="ident" id="1564589">inter</span><span class="op" id="1564594">.</span><span class="ident" id="1564595">typ</span><span class="op" id="1564598">.</span><span class="ident" id="1564599">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564605">h</span>&nbsp;<span class="op" id="1564607">+=</span>&nbsp;<span class="num" id="1564610">17</span>&nbsp;<span class="op" id="1564613">*</span>&nbsp;<span class="ident" id="1564615">typ</span><span class="op" id="1564618">.</span><span class="ident" id="1564619">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564625">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564660">h</span>&nbsp;<span class="op" id="1564662">%=</span>&nbsp;<span class="ident" id="1564665">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564676">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564723">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564767">var</span>&nbsp;<span class="ident" id="1564771">m</span>&nbsp;<span class="op" id="1564773">*</span><span class="ident" id="1564774">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564780">var</span>&nbsp;<span class="ident" id="1564784">locked</span>&nbsp;<span class="builtintype" id="1564791">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564796">for</span>&nbsp;<span class="ident" id="1564800">locked</span>&nbsp;<span class="op" id="1564807">=</span>&nbsp;<span class="num" id="1564809">0</span><span class="op" id="1564810">;</span>&nbsp;<span class="ident" id="1564812">locked</span>&nbsp;<span class="op" id="1564819">&lt;</span>&nbsp;<span class="num" id="1564821">2</span><span class="op" id="1564822">;</span>&nbsp;<span class="ident" id="1564824">locked</span><span class="op" id="1564830">++</span>&nbsp;<span class="op" id="1564833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564837">if</span>&nbsp;<span class="ident" id="1564840">locked</span>&nbsp;<span class="op" id="1564847">!=</span>&nbsp;<span class="num" id="1564850">0</span>&nbsp;<span class="op" id="1564852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564857">lock</span><span class="op" id="1564861">(</span><span class="op" id="1564862">&amp;</span><span class="ident" id="1564863">ifaceLock</span><span class="op" id="1564872">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564880">for</span>&nbsp;<span class="ident" id="1564884">m</span>&nbsp;<span class="op" id="1564886">=</span>&nbsp;<span class="op" id="1564888">(</span><span class="op" id="1564889">*</span><span class="ident" id="1564890">itab</span><span class="op" id="1564894">)</span><span class="op" id="1564895">(</span><span class="ident" id="1564896">atomicloadp</span><span class="op" id="1564907">(</span><span class="ident" id="1564908">unsafe</span><span class="op" id="1564914">.</span><span class="ident" id="1564915">Pointer</span><span class="op" id="1564922">(</span><span class="op" id="1564923">&amp;</span><span class="ident" id="1564924">hash</span><span class="op" id="1564928">[</span><span class="ident" id="1564929">h</span><span class="op" id="1564930">]</span><span class="op" id="1564931">)</span><span class="op" id="1564932">)</span><span class="op" id="1564933">)</span><span class="op" id="1564934">;</span>&nbsp;<span class="ident" id="1564936">m</span>&nbsp;<span class="op" id="1564938">!=</span>&nbsp;<span class="ident" id="1564941">nil</span><span class="op" id="1564944">;</span>&nbsp;<span class="ident" id="1564946">m</span>&nbsp;<span class="op" id="1564948">=</span>&nbsp;<span class="ident" id="1564950">m</span><span class="op" id="1564951">.</span><span class="ident" id="1564952">link</span>&nbsp;<span class="op" id="1564957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564962">if</span>&nbsp;<span class="ident" id="1564965">m</span><span class="op" id="1564966">.</span><span class="ident" id="1564967">inter</span>&nbsp;<span class="op" id="1564973">==</span>&nbsp;<span class="ident" id="1564976">inter</span>&nbsp;<span class="op" id="1564982">&amp;&amp;</span>&nbsp;<span class="ident" id="1564985">m</span><span class="op" id="1564986">.</span><span class="ident" id="1564987">_type</span>&nbsp;<span class="op" id="1564993">==</span>&nbsp;<span class="ident" id="1564996">typ</span>&nbsp;<span class="op" id="1565000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565006">if</span>&nbsp;<span class="ident" id="1565009">m</span><span class="op" id="1565010">.</span><span class="ident" id="1565011">bad</span>&nbsp;<span class="op" id="1565015">!=</span>&nbsp;<span class="num" id="1565018">0</span>&nbsp;<span class="op" id="1565020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565027">m</span>&nbsp;<span class="op" id="1565029">=</span>&nbsp;<span class="ident" id="1565031">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565040">if</span>&nbsp;<span class="op" id="1565043">!</span><span class="ident" id="1565044">canfail</span>&nbsp;<span class="op" id="1565052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565060">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565108">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565159">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565206">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565254">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565303">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565352">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565399">goto</span>&nbsp;<span class="ident" id="1565404">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565416">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565428">if</span>&nbsp;<span class="ident" id="1565431">locked</span>&nbsp;<span class="op" id="1565438">!=</span>&nbsp;<span class="num" id="1565441">0</span>&nbsp;<span class="op" id="1565443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565450">unlock</span><span class="op" id="1565456">(</span><span class="op" id="1565457">&amp;</span><span class="ident" id="1565458">ifaceLock</span><span class="op" id="1565467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565479">return</span>&nbsp;<span class="ident" id="1565486">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565502">m</span>&nbsp;<span class="op" id="1565504">=</span>&nbsp;<span class="op" id="1565506">(</span><span class="op" id="1565507">*</span><span class="ident" id="1565508">itab</span><span class="op" id="1565512">)</span><span class="op" id="1565513">(</span><span class="ident" id="1565514">persistentalloc</span><span class="op" id="1565529">(</span><span class="ident" id="1565530">unsafe</span><span class="op" id="1565536">.</span><span class="ident" id="1565537">Sizeof</span><span class="op" id="1565543">(</span><span class="ident" id="1565544">itab</span><span class="op" id="1565548">{</span><span class="op" id="1565549">}</span><span class="op" id="1565550">)</span><span class="op" id="1565551">+</span><span class="builtintype" id="1565552">uintptr</span><span class="op" id="1565559">(</span><span class="builtinfunc" id="1565560">len</span><span class="op" id="1565563">(</span><span class="ident" id="1565564">inter</span><span class="op" id="1565569">.</span><span class="ident" id="1565570">mhdr</span><span class="op" id="1565574">)</span><span class="op" id="1565575">)</span><span class="op" id="1565576">*</span><span class="ident" id="1565577">ptrSize</span><span class="op" id="1565584">,</span>&nbsp;<span class="num" id="1565586">0</span><span class="op" id="1565587">,</span>&nbsp;<span class="op" id="1565589">&amp;</span><span class="ident" id="1565590">memstats</span><span class="op" id="1565598">.</span><span class="ident" id="1565599">other_sys</span><span class="op" id="1565608">)</span><span class="op" id="1565609">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565612">m</span><span class="op" id="1565613">.</span><span class="ident" id="1565614">inter</span>&nbsp;<span class="op" id="1565620">=</span>&nbsp;<span class="ident" id="1565622">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565629">m</span><span class="op" id="1565630">.</span><span class="ident" id="1565631">_type</span>&nbsp;<span class="op" id="1565637">=</span>&nbsp;<span class="ident" id="1565639">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1565644">search</span><span class="op" id="1565650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565653">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565704">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565740">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565783">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565822">ni</span>&nbsp;<span class="op" id="1565825">:=</span>&nbsp;<span class="builtinfunc" id="1565828">len</span><span class="op" id="1565831">(</span><span class="ident" id="1565832">inter</span><span class="op" id="1565837">.</span><span class="ident" id="1565838">mhdr</span><span class="op" id="1565842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565845">nt</span>&nbsp;<span class="op" id="1565848">:=</span>&nbsp;<span class="builtinfunc" id="1565851">len</span><span class="op" id="1565854">(</span><span class="ident" id="1565855">x</span><span class="op" id="1565856">.</span><span class="ident" id="1565857">mhdr</span><span class="op" id="1565861">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565864">j</span>&nbsp;<span class="op" id="1565866">:=</span>&nbsp;<span class="num" id="1565869">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565872">for</span>&nbsp;<span class="ident" id="1565876">k</span>&nbsp;<span class="op" id="1565878">:=</span>&nbsp;<span class="num" id="1565881">0</span><span class="op" id="1565882">;</span>&nbsp;<span class="ident" id="1565884">k</span>&nbsp;<span class="op" id="1565886">&lt;</span>&nbsp;<span class="ident" id="1565888">ni</span><span class="op" id="1565890">;</span>&nbsp;<span class="ident" id="1565892">k</span><span class="op" id="1565893">++</span>&nbsp;<span class="op" id="1565896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565900">i</span>&nbsp;<span class="op" id="1565902">:=</span>&nbsp;<span class="op" id="1565905">(</span><span class="op" id="1565906">*</span><span class="ident" id="1565907">imethod</span><span class="op" id="1565914">)</span><span class="op" id="1565915">(</span><span class="ident" id="1565916">add</span><span class="op" id="1565919">(</span><span class="ident" id="1565920">unsafe</span><span class="op" id="1565926">.</span><span class="ident" id="1565927">Pointer</span><span class="op" id="1565934">(</span><span class="ident" id="1565935">inter</span><span class="op" id="1565940">)</span><span class="op" id="1565941">,</span>&nbsp;<span class="ident" id="1565943">unsafe</span><span class="op" id="1565949">.</span><span class="ident" id="1565950">Sizeof</span><span class="op" id="1565956">(</span><span class="ident" id="1565957">interfacetype</span><span class="op" id="1565970">{</span><span class="op" id="1565971">}</span><span class="op" id="1565972">)</span><span class="op" id="1565973">+</span><span class="builtintype" id="1565974">uintptr</span><span class="op" id="1565981">(</span><span class="ident" id="1565982">k</span><span class="op" id="1565983">)</span><span class="op" id="1565984">*</span><span class="ident" id="1565985">unsafe</span><span class="op" id="1565991">.</span><span class="ident" id="1565992">Sizeof</span><span class="op" id="1565998">(</span><span class="ident" id="1565999">imethod</span><span class="op" id="1566006">{</span><span class="op" id="1566007">}</span><span class="op" id="1566008">)</span><span class="op" id="1566009">)</span><span class="op" id="1566010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566014">iname</span>&nbsp;<span class="op" id="1566020">:=</span>&nbsp;<span class="ident" id="1566023">i</span><span class="op" id="1566024">.</span><span class="ident" id="1566025">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566032">ipkgpath</span>&nbsp;<span class="op" id="1566041">:=</span>&nbsp;<span class="ident" id="1566044">i</span><span class="op" id="1566045">.</span><span class="ident" id="1566046">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566056">itype</span>&nbsp;<span class="op" id="1566062">:=</span>&nbsp;<span class="ident" id="1566065">i</span><span class="op" id="1566066">.</span><span class="ident" id="1566067">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566075">for</span>&nbsp;<span class="op" id="1566079">;</span>&nbsp;<span class="ident" id="1566081">j</span>&nbsp;<span class="op" id="1566083">&lt;</span>&nbsp;<span class="ident" id="1566085">nt</span><span class="op" id="1566087">;</span>&nbsp;<span class="ident" id="1566089">j</span><span class="op" id="1566090">++</span>&nbsp;<span class="op" id="1566093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566098">t</span>&nbsp;<span class="op" id="1566100">:=</span>&nbsp;<span class="op" id="1566103">(</span><span class="op" id="1566104">*</span><span class="ident" id="1566105">method</span><span class="op" id="1566111">)</span><span class="op" id="1566112">(</span><span class="ident" id="1566113">add</span><span class="op" id="1566116">(</span><span class="ident" id="1566117">unsafe</span><span class="op" id="1566123">.</span><span class="ident" id="1566124">Pointer</span><span class="op" id="1566131">(</span><span class="ident" id="1566132">x</span><span class="op" id="1566133">)</span><span class="op" id="1566134">,</span>&nbsp;<span class="ident" id="1566136">unsafe</span><span class="op" id="1566142">.</span><span class="ident" id="1566143">Sizeof</span><span class="op" id="1566149">(</span><span class="ident" id="1566150">uncommontype</span><span class="op" id="1566162">{</span><span class="op" id="1566163">}</span><span class="op" id="1566164">)</span><span class="op" id="1566165">+</span><span class="builtintype" id="1566166">uintptr</span><span class="op" id="1566173">(</span><span class="ident" id="1566174">j</span><span class="op" id="1566175">)</span><span class="op" id="1566176">*</span><span class="ident" id="1566177">unsafe</span><span class="op" id="1566183">.</span><span class="ident" id="1566184">Sizeof</span><span class="op" id="1566190">(</span><span class="ident" id="1566191">method</span><span class="op" id="1566197">{</span><span class="op" id="1566198">}</span><span class="op" id="1566199">)</span><span class="op" id="1566200">)</span><span class="op" id="1566201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566206">if</span>&nbsp;<span class="ident" id="1566209">t</span><span class="op" id="1566210">.</span><span class="ident" id="1566211">mtyp</span>&nbsp;<span class="op" id="1566216">==</span>&nbsp;<span class="ident" id="1566219">itype</span>&nbsp;<span class="op" id="1566225">&amp;&amp;</span>&nbsp;<span class="ident" id="1566228">t</span><span class="op" id="1566229">.</span><span class="ident" id="1566230">name</span>&nbsp;<span class="op" id="1566235">==</span>&nbsp;<span class="ident" id="1566238">iname</span>&nbsp;<span class="op" id="1566244">&amp;&amp;</span>&nbsp;<span class="ident" id="1566247">t</span><span class="op" id="1566248">.</span><span class="ident" id="1566249">pkgpath</span>&nbsp;<span class="op" id="1566257">==</span>&nbsp;<span class="ident" id="1566260">ipkgpath</span>&nbsp;<span class="op" id="1566269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566275">if</span>&nbsp;<span class="ident" id="1566278">m</span>&nbsp;<span class="op" id="1566280">!=</span>&nbsp;<span class="ident" id="1566283">nil</span>&nbsp;<span class="op" id="1566287">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566294">*</span><span class="op" id="1566295">(</span><span class="op" id="1566296">*</span><span class="ident" id="1566297">unsafe</span><span class="op" id="1566303">.</span><span class="ident" id="1566304">Pointer</span><span class="op" id="1566311">)</span><span class="op" id="1566312">(</span><span class="ident" id="1566313">add</span><span class="op" id="1566316">(</span><span class="ident" id="1566317">unsafe</span><span class="op" id="1566323">.</span><span class="ident" id="1566324">Pointer</span><span class="op" id="1566331">(</span><span class="ident" id="1566332">m</span><span class="op" id="1566333">)</span><span class="op" id="1566334">,</span>&nbsp;<span class="ident" id="1566336">unsafe</span><span class="op" id="1566342">.</span><span class="ident" id="1566343">Sizeof</span><span class="op" id="1566349">(</span><span class="ident" id="1566350">itab</span><span class="op" id="1566354">{</span><span class="op" id="1566355">}</span><span class="op" id="1566356">)</span><span class="op" id="1566357">+</span><span class="builtintype" id="1566358">uintptr</span><span class="op" id="1566365">(</span><span class="ident" id="1566366">k</span><span class="op" id="1566367">)</span><span class="op" id="1566368">*</span><span class="ident" id="1566369">ptrSize</span><span class="op" id="1566376">)</span><span class="op" id="1566377">)</span>&nbsp;<span class="op" id="1566379">=</span>&nbsp;<span class="ident" id="1566381">t</span><span class="op" id="1566382">.</span><span class="ident" id="1566383">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566397">goto</span>&nbsp;<span class="ident" id="1566402">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566421">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1566425">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566449">if</span>&nbsp;<span class="op" id="1566452">!</span><span class="ident" id="1566453">canfail</span>&nbsp;<span class="op" id="1566461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566466">if</span>&nbsp;<span class="ident" id="1566469">locked</span>&nbsp;<span class="op" id="1566476">!=</span>&nbsp;<span class="num" id="1566479">0</span>&nbsp;<span class="op" id="1566481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566487">unlock</span><span class="op" id="1566493">(</span><span class="op" id="1566494">&amp;</span><span class="ident" id="1566495">ifaceLock</span><span class="op" id="1566504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566509">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1566514">panic</span><span class="op" id="1566519">(</span><span class="op" id="1566520">&amp;</span><span class="ident" id="1566521">TypeAssertionError</span><span class="op" id="1566539">{</span><span class="string" id="1566540">&#34;&#34;</span><span class="op" id="1566542">,</span>&nbsp;<span class="op" id="1566544">*</span><span class="ident" id="1566545">typ</span><span class="op" id="1566548">.</span><span class="ident" id="1566549">_string</span><span class="op" id="1566556">,</span>&nbsp;<span class="op" id="1566558">*</span><span class="ident" id="1566559">inter</span><span class="op" id="1566564">.</span><span class="ident" id="1566565">typ</span><span class="op" id="1566568">.</span><span class="ident" id="1566569">_string</span><span class="op" id="1566576">,</span>&nbsp;<span class="op" id="1566578">*</span><span class="ident" id="1566579">iname</span><span class="op" id="1566584">}</span><span class="op" id="1566585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566593">m</span><span class="op" id="1566594">.</span><span class="ident" id="1566595">bad</span>&nbsp;<span class="op" id="1566599">=</span>&nbsp;<span class="num" id="1566601">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566605">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566612">nextimethod</span><span class="op" id="1566623">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566629">if</span>&nbsp;<span class="ident" id="1566632">locked</span>&nbsp;<span class="op" id="1566639">==</span>&nbsp;<span class="num" id="1566642">0</span>&nbsp;<span class="op" id="1566644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566648">gothrow</span><span class="op" id="1566655">(</span><span class="string" id="1566656">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1566678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566684">m</span><span class="op" id="1566685">.</span><span class="ident" id="1566686">link</span>&nbsp;<span class="op" id="1566691">=</span>&nbsp;<span class="ident" id="1566693">hash</span><span class="op" id="1566697">[</span><span class="ident" id="1566698">h</span><span class="op" id="1566699">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566702">atomicstorep</span><span class="op" id="1566714">(</span><span class="ident" id="1566715">unsafe</span><span class="op" id="1566721">.</span><span class="ident" id="1566722">Pointer</span><span class="op" id="1566729">(</span><span class="op" id="1566730">&amp;</span><span class="ident" id="1566731">hash</span><span class="op" id="1566735">[</span><span class="ident" id="1566736">h</span><span class="op" id="1566737">]</span><span class="op" id="1566738">)</span><span class="op" id="1566739">,</span>&nbsp;<span class="ident" id="1566741">unsafe</span><span class="op" id="1566747">.</span><span class="ident" id="1566748">Pointer</span><span class="op" id="1566755">(</span><span class="ident" id="1566756">m</span><span class="op" id="1566757">)</span><span class="op" id="1566758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566761">unlock</span><span class="op" id="1566767">(</span><span class="op" id="1566768">&amp;</span><span class="ident" id="1566769">ifaceLock</span><span class="op" id="1566778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566781">if</span>&nbsp;<span class="ident" id="1566784">m</span><span class="op" id="1566785">.</span><span class="ident" id="1566786">bad</span>&nbsp;<span class="op" id="1566790">!=</span>&nbsp;<span class="num" id="1566793">0</span>&nbsp;<span class="op" id="1566795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566799">return</span>&nbsp;<span class="ident" id="1566806">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566811">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566814">return</span>&nbsp;<span class="ident" id="1566821">m</span><br>
<span class="lineno"></span><span class="op" id="1566823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1566826">func</span>&nbsp;<span class="ident" id="1566831">typ2Itab</span><span class="op" id="1566839">(</span><span class="ident" id="1566840">t</span>&nbsp;<span class="op" id="1566842">*</span><span class="ident" id="1566843">_type</span><span class="op" id="1566848">,</span>&nbsp;<span class="ident" id="1566850">inter</span>&nbsp;<span class="op" id="1566856">*</span><span class="ident" id="1566857">interfacetype</span><span class="op" id="1566870">,</span>&nbsp;<span class="ident" id="1566872">cache</span>&nbsp;<span class="op" id="1566878">*</span><span class="op" id="1566879">*</span><span class="ident" id="1566880">itab</span><span class="op" id="1566884">)</span>&nbsp;<span class="op" id="1566886">*</span><span class="ident" id="1566887">itab</span>&nbsp;<span class="op" id="1566892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566895">tab</span>&nbsp;<span class="op" id="1566899">:=</span>&nbsp;<span class="ident" id="1566902">getitab</span><span class="op" id="1566909">(</span><span class="ident" id="1566910">inter</span><span class="op" id="1566915">,</span>&nbsp;<span class="ident" id="1566917">t</span><span class="op" id="1566918">,</span>&nbsp;<span class="builtintype" id="1566920">false</span><span class="op" id="1566925">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566928">atomicstorep</span><span class="op" id="1566940">(</span><span class="ident" id="1566941">unsafe</span><span class="op" id="1566947">.</span><span class="ident" id="1566948">Pointer</span><span class="op" id="1566955">(</span><span class="ident" id="1566956">cache</span><span class="op" id="1566961">)</span><span class="op" id="1566962">,</span>&nbsp;<span class="ident" id="1566964">unsafe</span><span class="op" id="1566970">.</span><span class="ident" id="1566971">Pointer</span><span class="op" id="1566978">(</span><span class="ident" id="1566979">tab</span><span class="op" id="1566982">)</span><span class="op" id="1566983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566986">return</span>&nbsp;<span class="ident" id="1566993">tab</span><br>
<span class="lineno"></span><span class="op" id="1566997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1567000">func</span>&nbsp;<span class="ident" id="1567005">convT2E</span><span class="op" id="1567012">(</span><span class="ident" id="1567013">t</span>&nbsp;<span class="op" id="1567015">*</span><span class="ident" id="1567016">_type</span><span class="op" id="1567021">,</span>&nbsp;<span class="ident" id="1567023">elem</span>&nbsp;<span class="ident" id="1567028">unsafe</span><span class="op" id="1567034">.</span><span class="ident" id="1567035">Pointer</span><span class="op" id="1567042">)</span>&nbsp;<span class="op" id="1567044">(</span><span class="ident" id="1567045">e</span>&nbsp;<span class="keyword" id="1567047">interface</span><span class="op" id="1567056">{</span><span class="op" id="1567057">}</span><span class="op" id="1567058">)</span>&nbsp;<span class="op" id="1567060">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567063">size</span>&nbsp;<span class="op" id="1567068">:=</span>&nbsp;<span class="builtintype" id="1567071">uintptr</span><span class="op" id="1567078">(</span><span class="ident" id="1567079">t</span><span class="op" id="1567080">.</span><span class="ident" id="1567081">size</span><span class="op" id="1567085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567088">ep</span>&nbsp;<span class="op" id="1567091">:=</span>&nbsp;<span class="op" id="1567094">(</span><span class="op" id="1567095">*</span><span class="ident" id="1567096">eface</span><span class="op" id="1567101">)</span><span class="op" id="1567102">(</span><span class="ident" id="1567103">unsafe</span><span class="op" id="1567109">.</span><span class="ident" id="1567110">Pointer</span><span class="op" id="1567117">(</span><span class="op" id="1567118">&amp;</span><span class="ident" id="1567119">e</span><span class="op" id="1567120">)</span><span class="op" id="1567121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567124">if</span>&nbsp;<span class="ident" id="1567127">isDirectIface</span><span class="op" id="1567140">(</span><span class="ident" id="1567141">t</span><span class="op" id="1567142">)</span>&nbsp;<span class="op" id="1567144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567148">ep</span><span class="op" id="1567150">.</span><span class="ident" id="1567151">_type</span>&nbsp;<span class="op" id="1567157">=</span>&nbsp;<span class="ident" id="1567159">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567163">memmove</span><span class="op" id="1567170">(</span><span class="ident" id="1567171">unsafe</span><span class="op" id="1567177">.</span><span class="ident" id="1567178">Pointer</span><span class="op" id="1567185">(</span><span class="op" id="1567186">&amp;</span><span class="ident" id="1567187">ep</span><span class="op" id="1567189">.</span><span class="ident" id="1567190">data</span><span class="op" id="1567194">)</span><span class="op" id="1567195">,</span>&nbsp;<span class="ident" id="1567197">elem</span><span class="op" id="1567201">,</span>&nbsp;<span class="ident" id="1567203">size</span><span class="op" id="1567207">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567210">}</span>&nbsp;<span class="keyword" id="1567212">else</span>&nbsp;<span class="op" id="1567217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567221">x</span>&nbsp;<span class="op" id="1567223">:=</span>&nbsp;<span class="ident" id="1567226">newobject</span><span class="op" id="1567235">(</span><span class="ident" id="1567236">t</span><span class="op" id="1567237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1567241">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1567306">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567382">memmove</span><span class="op" id="1567389">(</span><span class="ident" id="1567390">x</span><span class="op" id="1567391">,</span>&nbsp;<span class="ident" id="1567393">elem</span><span class="op" id="1567397">,</span>&nbsp;<span class="ident" id="1567399">size</span><span class="op" id="1567403">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567407">ep</span><span class="op" id="1567409">.</span><span class="ident" id="1567410">_type</span>&nbsp;<span class="op" id="1567416">=</span>&nbsp;<span class="ident" id="1567418">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567422">ep</span><span class="op" id="1567424">.</span><span class="ident" id="1567425">data</span>&nbsp;<span class="op" id="1567430">=</span>&nbsp;<span class="ident" id="1567432">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567438">return</span><br>
<span class="lineno"></span><span class="op" id="1567445">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1567448">func</span>&nbsp;<span class="ident" id="1567453">convT2I</span><span class="op" id="1567460">(</span><span class="ident" id="1567461">t</span>&nbsp;<span class="op" id="1567463">*</span><span class="ident" id="1567464">_type</span><span class="op" id="1567469">,</span>&nbsp;<span class="ident" id="1567471">inter</span>&nbsp;<span class="op" id="1567477">*</span><span class="ident" id="1567478">interfacetype</span><span class="op" id="1567491">,</span>&nbsp;<span class="ident" id="1567493">cache</span>&nbsp;<span class="op" id="1567499">*</span><span class="op" id="1567500">*</span><span class="ident" id="1567501">itab</span><span class="op" id="1567505">,</span>&nbsp;<span class="ident" id="1567507">elem</span>&nbsp;<span class="ident" id="1567512">unsafe</span><span class="op" id="1567518">.</span><span class="ident" id="1567519">Pointer</span><span class="op" id="1567526">)</span>&nbsp;<span class="op" id="1567528">(</span><span class="ident" id="1567529">i</span>&nbsp;<span class="ident" id="1567531">fInterface</span><span class="op" id="1567541">)</span>&nbsp;<span class="op" id="1567543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567546">tab</span>&nbsp;<span class="op" id="1567550">:=</span>&nbsp;<span class="op" id="1567553">(</span><span class="op" id="1567554">*</span><span class="ident" id="1567555">itab</span><span class="op" id="1567559">)</span><span class="op" id="1567560">(</span><span class="ident" id="1567561">atomicloadp</span><span class="op" id="1567572">(</span><span class="ident" id="1567573">unsafe</span><span class="op" id="1567579">.</span><span class="ident" id="1567580">Pointer</span><span class="op" id="1567587">(</span><span class="ident" id="1567588">cache</span><span class="op" id="1567593">)</span><span class="op" id="1567594">)</span><span class="op" id="1567595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567598">if</span>&nbsp;<span class="ident" id="1567601">tab</span>&nbsp;<span class="op" id="1567605">==</span>&nbsp;<span class="ident" id="1567608">nil</span>&nbsp;<span class="op" id="1567612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567616">tab</span>&nbsp;<span class="op" id="1567620">=</span>&nbsp;<span class="ident" id="1567622">getitab</span><span class="op" id="1567629">(</span><span class="ident" id="1567630">inter</span><span class="op" id="1567635">,</span>&nbsp;<span class="ident" id="1567637">t</span><span class="op" id="1567638">,</span>&nbsp;<span class="builtintype" id="1567640">false</span><span class="op" id="1567645">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567649">atomicstorep</span><span class="op" id="1567661">(</span><span class="ident" id="1567662">unsafe</span><span class="op" id="1567668">.</span><span class="ident" id="1567669">Pointer</span><span class="op" id="1567676">(</span><span class="ident" id="1567677">cache</span><span class="op" id="1567682">)</span><span class="op" id="1567683">,</span>&nbsp;<span class="ident" id="1567685">unsafe</span><span class="op" id="1567691">.</span><span class="ident" id="1567692">Pointer</span><span class="op" id="1567699">(</span><span class="ident" id="1567700">tab</span><span class="op" id="1567703">)</span><span class="op" id="1567704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567710">size</span>&nbsp;<span class="op" id="1567715">:=</span>&nbsp;<span class="builtintype" id="1567718">uintptr</span><span class="op" id="1567725">(</span><span class="ident" id="1567726">t</span><span class="op" id="1567727">.</span><span class="ident" id="1567728">size</span><span class="op" id="1567732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567735">pi</span>&nbsp;<span class="op" id="1567738">:=</span>&nbsp;<span class="op" id="1567741">(</span><span class="op" id="1567742">*</span><span class="ident" id="1567743">iface</span><span class="op" id="1567748">)</span><span class="op" id="1567749">(</span><span class="ident" id="1567750">unsafe</span><span class="op" id="1567756">.</span><span class="ident" id="1567757">Pointer</span><span class="op" id="1567764">(</span><span class="op" id="1567765">&amp;</span><span class="ident" id="1567766">i</span><span class="op" id="1567767">)</span><span class="op" id="1567768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567771">if</span>&nbsp;<span class="ident" id="1567774">isDirectIface</span><span class="op" id="1567787">(</span><span class="ident" id="1567788">t</span><span class="op" id="1567789">)</span>&nbsp;<span class="op" id="1567791">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567795">pi</span><span class="op" id="1567797">.</span><span class="ident" id="1567798">tab</span>&nbsp;<span class="op" id="1567802">=</span>&nbsp;<span class="ident" id="1567804">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567810">memmove</span><span class="op" id="1567817">(</span><span class="ident" id="1567818">unsafe</span><span class="op" id="1567824">.</span><span class="ident" id="1567825">Pointer</span><span class="op" id="1567832">(</span><span class="op" id="1567833">&amp;</span><span class="ident" id="1567834">pi</span><span class="op" id="1567836">.</span><span class="ident" id="1567837">data</span><span class="op" id="1567841">)</span><span class="op" id="1567842">,</span>&nbsp;<span class="ident" id="1567844">elem</span><span class="op" id="1567848">,</span>&nbsp;<span class="ident" id="1567850">size</span><span class="op" id="1567854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567857">}</span>&nbsp;<span class="keyword" id="1567859">else</span>&nbsp;<span class="op" id="1567864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567868">x</span>&nbsp;<span class="op" id="1567870">:=</span>&nbsp;<span class="ident" id="1567873">newobject</span><span class="op" id="1567882">(</span><span class="ident" id="1567883">t</span><span class="op" id="1567884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567888">memmove</span><span class="op" id="1567895">(</span><span class="ident" id="1567896">x</span><span class="op" id="1567897">,</span>&nbsp;<span class="ident" id="1567899">elem</span><span class="op" id="1567903">,</span>&nbsp;<span class="ident" id="1567905">size</span><span class="op" id="1567909">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567913">pi</span><span class="op" id="1567915">.</span><span class="ident" id="1567916">tab</span>&nbsp;<span class="op" id="1567920">=</span>&nbsp;<span class="ident" id="1567922">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567928">pi</span><span class="op" id="1567930">.</span><span class="ident" id="1567931">data</span>&nbsp;<span class="op" id="1567936">=</span>&nbsp;<span class="ident" id="1567938">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567944">return</span><br>
<span class="lineno"></span><span class="op" id="1567951">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1567954">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1568031">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1568105">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1568118">func</span>&nbsp;<span class="ident" id="1568123">assertI2T</span><span class="op" id="1568132">(</span><span class="ident" id="1568133">t</span>&nbsp;<span class="op" id="1568135">*</span><span class="ident" id="1568136">_type</span><span class="op" id="1568141">,</span>&nbsp;<span class="ident" id="1568143">i</span>&nbsp;<span class="ident" id="1568145">fInterface</span><span class="op" id="1568155">)</span>&nbsp;<span class="op" id="1568157">(</span><span class="ident" id="1568158">r</span>&nbsp;<span class="keyword" id="1568160">struct</span><span class="op" id="1568166">{</span><span class="op" id="1568167">}</span><span class="op" id="1568168">)</span>&nbsp;<span class="op" id="1568170">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568173">ip</span>&nbsp;<span class="op" id="1568176">:=</span>&nbsp;<span class="op" id="1568179">(</span><span class="op" id="1568180">*</span><span class="ident" id="1568181">iface</span><span class="op" id="1568186">)</span><span class="op" id="1568187">(</span><span class="ident" id="1568188">unsafe</span><span class="op" id="1568194">.</span><span class="ident" id="1568195">Pointer</span><span class="op" id="1568202">(</span><span class="op" id="1568203">&amp;</span><span class="ident" id="1568204">i</span><span class="op" id="1568205">)</span><span class="op" id="1568206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568209">tab</span>&nbsp;<span class="op" id="1568213">:=</span>&nbsp;<span class="ident" id="1568216">ip</span><span class="op" id="1568218">.</span><span class="ident" id="1568219">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568224">if</span>&nbsp;<span class="ident" id="1568227">tab</span>&nbsp;<span class="op" id="1568231">==</span>&nbsp;<span class="ident" id="1568234">nil</span>&nbsp;<span class="op" id="1568238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1568242">panic</span><span class="op" id="1568247">(</span><span class="op" id="1568248">&amp;</span><span class="ident" id="1568249">TypeAssertionError</span><span class="op" id="1568267">{</span><span class="string" id="1568268">&#34;&#34;</span><span class="op" id="1568270">,</span>&nbsp;<span class="string" id="1568272">&#34;&#34;</span><span class="op" id="1568274">,</span>&nbsp;<span class="op" id="1568276">*</span><span class="ident" id="1568277">t</span><span class="op" id="1568278">.</span><span class="ident" id="1568279">_string</span><span class="op" id="1568286">,</span>&nbsp;<span class="string" id="1568288">&#34;&#34;</span><span class="op" id="1568290">}</span><span class="op" id="1568291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568294">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568297">if</span>&nbsp;<span class="ident" id="1568300">tab</span><span class="op" id="1568303">.</span><span class="ident" id="1568304">_type</span>&nbsp;<span class="op" id="1568310">!=</span>&nbsp;<span class="ident" id="1568313">t</span>&nbsp;<span class="op" id="1568315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1568319">panic</span><span class="op" id="1568324">(</span><span class="op" id="1568325">&amp;</span><span class="ident" id="1568326">TypeAssertionError</span><span class="op" id="1568344">{</span><span class="op" id="1568345">*</span><span class="ident" id="1568346">tab</span><span class="op" id="1568349">.</span><span class="ident" id="1568350">inter</span><span class="op" id="1568355">.</span><span class="ident" id="1568356">typ</span><span class="op" id="1568359">.</span><span class="ident" id="1568360">_string</span><span class="op" id="1568367">,</span>&nbsp;<span class="op" id="1568369">*</span><span class="ident" id="1568370">tab</span><span class="op" id="1568373">.</span><span class="ident" id="1568374">_type</span><span class="op" id="1568379">.</span><span class="ident" id="1568380">_string</span><span class="op" id="1568387">,</span>&nbsp;<span class="op" id="1568389">*</span><span class="ident" id="1568390">t</span><span class="op" id="1568391">.</span><span class="ident" id="1568392">_string</span><span class="op" id="1568399">,</span>&nbsp;<span class="string" id="1568401">&#34;&#34;</span><span class="op" id="1568403">}</span><span class="op" id="1568404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568410">size</span>&nbsp;<span class="op" id="1568415">:=</span>&nbsp;<span class="builtintype" id="1568418">uintptr</span><span class="op" id="1568425">(</span><span class="ident" id="1568426">t</span><span class="op" id="1568427">.</span><span class="ident" id="1568428">size</span><span class="op" id="1568432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568435">if</span>&nbsp;<span class="ident" id="1568438">isDirectIface</span><span class="op" id="1568451">(</span><span class="ident" id="1568452">t</span><span class="op" id="1568453">)</span>&nbsp;<span class="op" id="1568455">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568459">memmove</span><span class="op" id="1568466">(</span><span class="ident" id="1568467">unsafe</span><span class="op" id="1568473">.</span><span class="ident" id="1568474">Pointer</span><span class="op" id="1568481">(</span><span class="op" id="1568482">&amp;</span><span class="ident" id="1568483">r</span><span class="op" id="1568484">)</span><span class="op" id="1568485">,</span>&nbsp;<span class="ident" id="1568487">unsafe</span><span class="op" id="1568493">.</span><span class="ident" id="1568494">Pointer</span><span class="op" id="1568501">(</span><span class="op" id="1568502">&amp;</span><span class="ident" id="1568503">ip</span><span class="op" id="1568505">.</span><span class="ident" id="1568506">data</span><span class="op" id="1568510">)</span><span class="op" id="1568511">,</span>&nbsp;<span class="ident" id="1568513">size</span><span class="op" id="1568517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568520">}</span>&nbsp;<span class="keyword" id="1568522">else</span>&nbsp;<span class="op" id="1568527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568531">memmove</span><span class="op" id="1568538">(</span><span class="ident" id="1568539">unsafe</span><span class="op" id="1568545">.</span><span class="ident" id="1568546">Pointer</span><span class="op" id="1568553">(</span><span class="op" id="1568554">&amp;</span><span class="ident" id="1568555">r</span><span class="op" id="1568556">)</span><span class="op" id="1568557">,</span>&nbsp;<span class="ident" id="1568559">ip</span><span class="op" id="1568561">.</span><span class="ident" id="1568562">data</span><span class="op" id="1568566">,</span>&nbsp;<span class="ident" id="1568568">size</span><span class="op" id="1568572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568578">return</span><br>
<span class="lineno">190</span><span class="op" id="1568585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1568588">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1568601">func</span>&nbsp;<span class="ident" id="1568606">assertI2T2</span><span class="op" id="1568616">(</span><span class="ident" id="1568617">t</span>&nbsp;<span class="op" id="1568619">*</span><span class="ident" id="1568620">_type</span><span class="op" id="1568625">,</span>&nbsp;<span class="ident" id="1568627">i</span>&nbsp;<span class="ident" id="1568629">fInterface</span><span class="op" id="1568639">)</span>&nbsp;<span class="op" id="1568641">(</span><span class="ident" id="1568642">r</span>&nbsp;<span class="builtintype" id="1568644">byte</span><span class="op" id="1568648">)</span>&nbsp;<span class="op" id="1568650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568653">ip</span>&nbsp;<span class="op" id="1568656">:=</span>&nbsp;<span class="op" id="1568659">(</span><span class="op" id="1568660">*</span><span class="ident" id="1568661">iface</span><span class="op" id="1568666">)</span><span class="op" id="1568667">(</span><span class="ident" id="1568668">unsafe</span><span class="op" id="1568674">.</span><span class="ident" id="1568675">Pointer</span><span class="op" id="1568682">(</span><span class="op" id="1568683">&amp;</span><span class="ident" id="1568684">i</span><span class="op" id="1568685">)</span><span class="op" id="1568686">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568689">size</span>&nbsp;<span class="op" id="1568694">:=</span>&nbsp;<span class="builtintype" id="1568697">uintptr</span><span class="op" id="1568704">(</span><span class="ident" id="1568705">t</span><span class="op" id="1568706">.</span><span class="ident" id="1568707">size</span><span class="op" id="1568711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568714">ok</span>&nbsp;<span class="op" id="1568717">:=</span>&nbsp;<span class="op" id="1568720">(</span><span class="op" id="1568721">*</span><span class="builtintype" id="1568722">bool</span><span class="op" id="1568726">)</span><span class="op" id="1568727">(</span><span class="ident" id="1568728">add</span><span class="op" id="1568731">(</span><span class="ident" id="1568732">unsafe</span><span class="op" id="1568738">.</span><span class="ident" id="1568739">Pointer</span><span class="op" id="1568746">(</span><span class="op" id="1568747">&amp;</span><span class="ident" id="1568748">r</span><span class="op" id="1568749">)</span><span class="op" id="1568750">,</span>&nbsp;<span class="ident" id="1568752">size</span><span class="op" id="1568756">)</span><span class="op" id="1568757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568760">tab</span>&nbsp;<span class="op" id="1568764">:=</span>&nbsp;<span class="ident" id="1568767">ip</span><span class="op" id="1568769">.</span><span class="ident" id="1568770">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568775">if</span>&nbsp;<span class="ident" id="1568778">tab</span>&nbsp;<span class="op" id="1568782">==</span>&nbsp;<span class="ident" id="1568785">nil</span>&nbsp;<span class="op" id="1568789">||</span>&nbsp;<span class="ident" id="1568792">tab</span><span class="op" id="1568795">.</span><span class="ident" id="1568796">_type</span>&nbsp;<span class="op" id="1568802">!=</span>&nbsp;<span class="ident" id="1568805">t</span>&nbsp;<span class="op" id="1568807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568811">*</span><span class="ident" id="1568812">ok</span>&nbsp;<span class="op" id="1568815">=</span>&nbsp;<span class="builtintype" id="1568817">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568825">memclr</span><span class="op" id="1568831">(</span><span class="ident" id="1568832">unsafe</span><span class="op" id="1568838">.</span><span class="ident" id="1568839">Pointer</span><span class="op" id="1568846">(</span><span class="op" id="1568847">&amp;</span><span class="ident" id="1568848">r</span><span class="op" id="1568849">)</span><span class="op" id="1568850">,</span>&nbsp;<span class="ident" id="1568852">size</span><span class="op" id="1568856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568860">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568871">*</span><span class="ident" id="1568872">ok</span>&nbsp;<span class="op" id="1568875">=</span>&nbsp;<span class="builtintype" id="1568877">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568883">if</span>&nbsp;<span class="ident" id="1568886">isDirectIface</span><span class="op" id="1568899">(</span><span class="ident" id="1568900">t</span><span class="op" id="1568901">)</span>&nbsp;<span class="op" id="1568903">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568907">memmove</span><span class="op" id="1568914">(</span><span class="ident" id="1568915">unsafe</span><span class="op" id="1568921">.</span><span class="ident" id="1568922">Pointer</span><span class="op" id="1568929">(</span><span class="op" id="1568930">&amp;</span><span class="ident" id="1568931">r</span><span class="op" id="1568932">)</span><span class="op" id="1568933">,</span>&nbsp;<span class="ident" id="1568935">unsafe</span><span class="op" id="1568941">.</span><span class="ident" id="1568942">Pointer</span><span class="op" id="1568949">(</span><span class="op" id="1568950">&amp;</span><span class="ident" id="1568951">ip</span><span class="op" id="1568953">.</span><span class="ident" id="1568954">data</span><span class="op" id="1568958">)</span><span class="op" id="1568959">,</span>&nbsp;<span class="ident" id="1568961">size</span><span class="op" id="1568965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568968">}</span>&nbsp;<span class="keyword" id="1568970">else</span>&nbsp;<span class="op" id="1568975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568979">memmove</span><span class="op" id="1568986">(</span><span class="ident" id="1568987">unsafe</span><span class="op" id="1568993">.</span><span class="ident" id="1568994">Pointer</span><span class="op" id="1569001">(</span><span class="op" id="1569002">&amp;</span><span class="ident" id="1569003">r</span><span class="op" id="1569004">)</span><span class="op" id="1569005">,</span>&nbsp;<span class="ident" id="1569007">ip</span><span class="op" id="1569009">.</span><span class="ident" id="1569010">data</span><span class="op" id="1569014">,</span>&nbsp;<span class="ident" id="1569016">size</span><span class="op" id="1569020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569026">return</span><br>
<span class="lineno">210</span><span class="op" id="1569033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1569036">func</span>&nbsp;<span class="ident" id="1569041">assertI2TOK</span><span class="op" id="1569052">(</span><span class="ident" id="1569053">t</span>&nbsp;<span class="op" id="1569055">*</span><span class="ident" id="1569056">_type</span><span class="op" id="1569061">,</span>&nbsp;<span class="ident" id="1569063">i</span>&nbsp;<span class="ident" id="1569065">fInterface</span><span class="op" id="1569075">)</span>&nbsp;<span class="builtintype" id="1569077">bool</span>&nbsp;<span class="op" id="1569082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569085">ip</span>&nbsp;<span class="op" id="1569088">:=</span>&nbsp;<span class="op" id="1569091">(</span><span class="op" id="1569092">*</span><span class="ident" id="1569093">iface</span><span class="op" id="1569098">)</span><span class="op" id="1569099">(</span><span class="ident" id="1569100">unsafe</span><span class="op" id="1569106">.</span><span class="ident" id="1569107">Pointer</span><span class="op" id="1569114">(</span><span class="op" id="1569115">&amp;</span><span class="ident" id="1569116">i</span><span class="op" id="1569117">)</span><span class="op" id="1569118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569121">tab</span>&nbsp;<span class="op" id="1569125">:=</span>&nbsp;<span class="ident" id="1569128">ip</span><span class="op" id="1569130">.</span><span class="ident" id="1569131">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569136">return</span>&nbsp;<span class="ident" id="1569143">tab</span>&nbsp;<span class="op" id="1569147">!=</span>&nbsp;<span class="ident" id="1569150">nil</span>&nbsp;<span class="op" id="1569154">&amp;&amp;</span>&nbsp;<span class="ident" id="1569157">tab</span><span class="op" id="1569160">.</span><span class="ident" id="1569161">_type</span>&nbsp;<span class="op" id="1569167">==</span>&nbsp;<span class="ident" id="1569170">t</span><br>
<span class="lineno"></span><span class="op" id="1569172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1569175">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1569188">func</span>&nbsp;<span class="ident" id="1569193">assertE2T</span><span class="op" id="1569202">(</span><span class="ident" id="1569203">t</span>&nbsp;<span class="op" id="1569205">*</span><span class="ident" id="1569206">_type</span><span class="op" id="1569211">,</span>&nbsp;<span class="ident" id="1569213">e</span>&nbsp;<span class="keyword" id="1569215">interface</span><span class="op" id="1569224">{</span><span class="op" id="1569225">}</span><span class="op" id="1569226">)</span>&nbsp;<span class="op" id="1569228">(</span><span class="ident" id="1569229">r</span>&nbsp;<span class="keyword" id="1569231">struct</span><span class="op" id="1569237">{</span><span class="op" id="1569238">}</span><span class="op" id="1569239">)</span>&nbsp;<span class="op" id="1569241">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569244">ep</span>&nbsp;<span class="op" id="1569247">:=</span>&nbsp;<span class="op" id="1569250">(</span><span class="op" id="1569251">*</span><span class="ident" id="1569252">eface</span><span class="op" id="1569257">)</span><span class="op" id="1569258">(</span><span class="ident" id="1569259">unsafe</span><span class="op" id="1569265">.</span><span class="ident" id="1569266">Pointer</span><span class="op" id="1569273">(</span><span class="op" id="1569274">&amp;</span><span class="ident" id="1569275">e</span><span class="op" id="1569276">)</span><span class="op" id="1569277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569280">if</span>&nbsp;<span class="ident" id="1569283">ep</span><span class="op" id="1569285">.</span><span class="ident" id="1569286">_type</span>&nbsp;<span class="op" id="1569292">==</span>&nbsp;<span class="ident" id="1569295">nil</span>&nbsp;<span class="op" id="1569299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1569303">panic</span><span class="op" id="1569308">(</span><span class="op" id="1569309">&amp;</span><span class="ident" id="1569310">TypeAssertionError</span><span class="op" id="1569328">{</span><span class="string" id="1569329">&#34;&#34;</span><span class="op" id="1569331">,</span>&nbsp;<span class="string" id="1569333">&#34;&#34;</span><span class="op" id="1569335">,</span>&nbsp;<span class="op" id="1569337">*</span><span class="ident" id="1569338">t</span><span class="op" id="1569339">.</span><span class="ident" id="1569340">_string</span><span class="op" id="1569347">,</span>&nbsp;<span class="string" id="1569349">&#34;&#34;</span><span class="op" id="1569351">}</span><span class="op" id="1569352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569358">if</span>&nbsp;<span class="ident" id="1569361">ep</span><span class="op" id="1569363">.</span><span class="ident" id="1569364">_type</span>&nbsp;<span class="op" id="1569370">!=</span>&nbsp;<span class="ident" id="1569373">t</span>&nbsp;<span class="op" id="1569375">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1569379">panic</span><span class="op" id="1569384">(</span><span class="op" id="1569385">&amp;</span><span class="ident" id="1569386">TypeAssertionError</span><span class="op" id="1569404">{</span><span class="string" id="1569405">&#34;&#34;</span><span class="op" id="1569407">,</span>&nbsp;<span class="op" id="1569409">*</span><span class="ident" id="1569410">ep</span><span class="op" id="1569412">.</span><span class="ident" id="1569413">_type</span><span class="op" id="1569418">.</span><span class="ident" id="1569419">_string</span><span class="op" id="1569426">,</span>&nbsp;<span class="op" id="1569428">*</span><span class="ident" id="1569429">t</span><span class="op" id="1569430">.</span><span class="ident" id="1569431">_string</span><span class="op" id="1569438">,</span>&nbsp;<span class="string" id="1569440">&#34;&#34;</span><span class="op" id="1569442">}</span><span class="op" id="1569443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569449">size</span>&nbsp;<span class="op" id="1569454">:=</span>&nbsp;<span class="builtintype" id="1569457">uintptr</span><span class="op" id="1569464">(</span><span class="ident" id="1569465">t</span><span class="op" id="1569466">.</span><span class="ident" id="1569467">size</span><span class="op" id="1569471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569474">if</span>&nbsp;<span class="ident" id="1569477">isDirectIface</span><span class="op" id="1569490">(</span><span class="ident" id="1569491">t</span><span class="op" id="1569492">)</span>&nbsp;<span class="op" id="1569494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569498">memmove</span><span class="op" id="1569505">(</span><span class="ident" id="1569506">unsafe</span><span class="op" id="1569512">.</span><span class="ident" id="1569513">Pointer</span><span class="op" id="1569520">(</span><span class="op" id="1569521">&amp;</span><span class="ident" id="1569522">r</span><span class="op" id="1569523">)</span><span class="op" id="1569524">,</span>&nbsp;<span class="ident" id="1569526">unsafe</span><span class="op" id="1569532">.</span><span class="ident" id="1569533">Pointer</span><span class="op" id="1569540">(</span><span class="op" id="1569541">&amp;</span><span class="ident" id="1569542">ep</span><span class="op" id="1569544">.</span><span class="ident" id="1569545">data</span><span class="op" id="1569549">)</span><span class="op" id="1569550">,</span>&nbsp;<span class="ident" id="1569552">size</span><span class="op" id="1569556">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569559">}</span>&nbsp;<span class="keyword" id="1569561">else</span>&nbsp;<span class="op" id="1569566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569570">memmove</span><span class="op" id="1569577">(</span><span class="ident" id="1569578">unsafe</span><span class="op" id="1569584">.</span><span class="ident" id="1569585">Pointer</span><span class="op" id="1569592">(</span><span class="op" id="1569593">&amp;</span><span class="ident" id="1569594">r</span><span class="op" id="1569595">)</span><span class="op" id="1569596">,</span>&nbsp;<span class="ident" id="1569598">ep</span><span class="op" id="1569600">.</span><span class="ident" id="1569601">data</span><span class="op" id="1569605">,</span>&nbsp;<span class="ident" id="1569607">size</span><span class="op" id="1569611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569617">return</span><br>
<span class="lineno"></span><span class="op" id="1569624">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1569627">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1569640">func</span>&nbsp;<span class="ident" id="1569645">assertE2T2</span><span class="op" id="1569655">(</span><span class="ident" id="1569656">t</span>&nbsp;<span class="op" id="1569658">*</span><span class="ident" id="1569659">_type</span><span class="op" id="1569664">,</span>&nbsp;<span class="ident" id="1569666">e</span>&nbsp;<span class="keyword" id="1569668">interface</span><span class="op" id="1569677">{</span><span class="op" id="1569678">}</span><span class="op" id="1569679">)</span>&nbsp;<span class="op" id="1569681">(</span><span class="ident" id="1569682">r</span>&nbsp;<span class="builtintype" id="1569684">byte</span><span class="op" id="1569688">)</span>&nbsp;<span class="op" id="1569690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569693">ep</span>&nbsp;<span class="op" id="1569696">:=</span>&nbsp;<span class="op" id="1569699">(</span><span class="op" id="1569700">*</span><span class="ident" id="1569701">eface</span><span class="op" id="1569706">)</span><span class="op" id="1569707">(</span><span class="ident" id="1569708">unsafe</span><span class="op" id="1569714">.</span><span class="ident" id="1569715">Pointer</span><span class="op" id="1569722">(</span><span class="op" id="1569723">&amp;</span><span class="ident" id="1569724">e</span><span class="op" id="1569725">)</span><span class="op" id="1569726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569729">size</span>&nbsp;<span class="op" id="1569734">:=</span>&nbsp;<span class="builtintype" id="1569737">uintptr</span><span class="op" id="1569744">(</span><span class="ident" id="1569745">t</span><span class="op" id="1569746">.</span><span class="ident" id="1569747">size</span><span class="op" id="1569751">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569754">ok</span>&nbsp;<span class="op" id="1569757">:=</span>&nbsp;<span class="op" id="1569760">(</span><span class="op" id="1569761">*</span><span class="builtintype" id="1569762">bool</span><span class="op" id="1569766">)</span><span class="op" id="1569767">(</span><span class="ident" id="1569768">add</span><span class="op" id="1569771">(</span><span class="ident" id="1569772">unsafe</span><span class="op" id="1569778">.</span><span class="ident" id="1569779">Pointer</span><span class="op" id="1569786">(</span><span class="op" id="1569787">&amp;</span><span class="ident" id="1569788">r</span><span class="op" id="1569789">)</span><span class="op" id="1569790">,</span>&nbsp;<span class="ident" id="1569792">size</span><span class="op" id="1569796">)</span><span class="op" id="1569797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569800">if</span>&nbsp;<span class="ident" id="1569803">ep</span><span class="op" id="1569805">.</span><span class="ident" id="1569806">_type</span>&nbsp;<span class="op" id="1569812">!=</span>&nbsp;<span class="ident" id="1569815">t</span>&nbsp;<span class="op" id="1569817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569821">*</span><span class="ident" id="1569822">ok</span>&nbsp;<span class="op" id="1569825">=</span>&nbsp;<span class="builtintype" id="1569827">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569835">memclr</span><span class="op" id="1569841">(</span><span class="ident" id="1569842">unsafe</span><span class="op" id="1569848">.</span><span class="ident" id="1569849">Pointer</span><span class="op" id="1569856">(</span><span class="op" id="1569857">&amp;</span><span class="ident" id="1569858">r</span><span class="op" id="1569859">)</span><span class="op" id="1569860">,</span>&nbsp;<span class="ident" id="1569862">size</span><span class="op" id="1569866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569870">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569881">*</span><span class="ident" id="1569882">ok</span>&nbsp;<span class="op" id="1569885">=</span>&nbsp;<span class="builtintype" id="1569887">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1569893">if</span>&nbsp;<span class="ident" id="1569896">isDirectIface</span><span class="op" id="1569909">(</span><span class="ident" id="1569910">t</span><span class="op" id="1569911">)</span>&nbsp;<span class="op" id="1569913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569917">memmove</span><span class="op" id="1569924">(</span><span class="ident" id="1569925">unsafe</span><span class="op" id="1569931">.</span><span class="ident" id="1569932">Pointer</span><span class="op" id="1569939">(</span><span class="op" id="1569940">&amp;</span><span class="ident" id="1569941">r</span><span class="op" id="1569942">)</span><span class="op" id="1569943">,</span>&nbsp;<span class="ident" id="1569945">unsafe</span><span class="op" id="1569951">.</span><span class="ident" id="1569952">Pointer</span><span class="op" id="1569959">(</span><span class="op" id="1569960">&amp;</span><span class="ident" id="1569961">ep</span><span class="op" id="1569963">.</span><span class="ident" id="1569964">data</span><span class="op" id="1569968">)</span><span class="op" id="1569969">,</span>&nbsp;<span class="ident" id="1569971">size</span><span class="op" id="1569975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1569978">}</span>&nbsp;<span class="keyword" id="1569980">else</span>&nbsp;<span class="op" id="1569985">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1569989">memmove</span><span class="op" id="1569996">(</span><span class="ident" id="1569997">unsafe</span><span class="op" id="1570003">.</span><span class="ident" id="1570004">Pointer</span><span class="op" id="1570011">(</span><span class="op" id="1570012">&amp;</span><span class="ident" id="1570013">r</span><span class="op" id="1570014">)</span><span class="op" id="1570015">,</span>&nbsp;<span class="ident" id="1570017">ep</span><span class="op" id="1570019">.</span><span class="ident" id="1570020">data</span><span class="op" id="1570024">,</span>&nbsp;<span class="ident" id="1570026">size</span><span class="op" id="1570030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1570033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570036">return</span><br>
<span class="lineno"></span><span class="op" id="1570043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1570046">func</span>&nbsp;<span class="ident" id="1570051">assertE2TOK</span><span class="op" id="1570062">(</span><span class="ident" id="1570063">t</span>&nbsp;<span class="op" id="1570065">*</span><span class="ident" id="1570066">_type</span><span class="op" id="1570071">,</span>&nbsp;<span class="ident" id="1570073">e</span>&nbsp;<span class="keyword" id="1570075">interface</span><span class="op" id="1570084">{</span><span class="op" id="1570085">}</span><span class="op" id="1570086">)</span>&nbsp;<span class="builtintype" id="1570088">bool</span>&nbsp;<span class="op" id="1570093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570096">ep</span>&nbsp;<span class="op" id="1570099">:=</span>&nbsp;<span class="op" id="1570102">(</span><span class="op" id="1570103">*</span><span class="ident" id="1570104">eface</span><span class="op" id="1570109">)</span><span class="op" id="1570110">(</span><span class="ident" id="1570111">unsafe</span><span class="op" id="1570117">.</span><span class="ident" id="1570118">Pointer</span><span class="op" id="1570125">(</span><span class="op" id="1570126">&amp;</span><span class="ident" id="1570127">e</span><span class="op" id="1570128">)</span><span class="op" id="1570129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570132">return</span>&nbsp;<span class="ident" id="1570139">t</span>&nbsp;<span class="op" id="1570141">==</span>&nbsp;<span class="ident" id="1570144">ep</span><span class="op" id="1570146">.</span><span class="ident" id="1570147">_type</span><br>
<span class="lineno"></span><span class="op" id="1570153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1570156">func</span>&nbsp;<span class="ident" id="1570161">convI2E</span><span class="op" id="1570168">(</span><span class="ident" id="1570169">i</span>&nbsp;<span class="ident" id="1570171">fInterface</span><span class="op" id="1570181">)</span>&nbsp;<span class="op" id="1570183">(</span><span class="ident" id="1570184">r</span>&nbsp;<span class="keyword" id="1570186">interface</span><span class="op" id="1570195">{</span><span class="op" id="1570196">}</span><span class="op" id="1570197">)</span>&nbsp;<span class="op" id="1570199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570202">ip</span>&nbsp;<span class="op" id="1570205">:=</span>&nbsp;<span class="op" id="1570208">(</span><span class="op" id="1570209">*</span><span class="ident" id="1570210">iface</span><span class="op" id="1570215">)</span><span class="op" id="1570216">(</span><span class="ident" id="1570217">unsafe</span><span class="op" id="1570223">.</span><span class="ident" id="1570224">Pointer</span><span class="op" id="1570231">(</span><span class="op" id="1570232">&amp;</span><span class="ident" id="1570233">i</span><span class="op" id="1570234">)</span><span class="op" id="1570235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570238">tab</span>&nbsp;<span class="op" id="1570242">:=</span>&nbsp;<span class="ident" id="1570245">ip</span><span class="op" id="1570247">.</span><span class="ident" id="1570248">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570253">if</span>&nbsp;<span class="ident" id="1570256">tab</span>&nbsp;<span class="op" id="1570260">==</span>&nbsp;<span class="ident" id="1570263">nil</span>&nbsp;<span class="op" id="1570267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570271">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1570279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570282">rp</span>&nbsp;<span class="op" id="1570285">:=</span>&nbsp;<span class="op" id="1570288">(</span><span class="op" id="1570289">*</span><span class="ident" id="1570290">eface</span><span class="op" id="1570295">)</span><span class="op" id="1570296">(</span><span class="ident" id="1570297">unsafe</span><span class="op" id="1570303">.</span><span class="ident" id="1570304">Pointer</span><span class="op" id="1570311">(</span><span class="op" id="1570312">&amp;</span><span class="ident" id="1570313">r</span><span class="op" id="1570314">)</span><span class="op" id="1570315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570318">rp</span><span class="op" id="1570320">.</span><span class="ident" id="1570321">_type</span>&nbsp;<span class="op" id="1570327">=</span>&nbsp;<span class="ident" id="1570329">tab</span><span class="op" id="1570332">.</span><span class="ident" id="1570333">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570340">rp</span><span class="op" id="1570342">.</span><span class="ident" id="1570343">data</span>&nbsp;<span class="op" id="1570348">=</span>&nbsp;<span class="ident" id="1570350">ip</span><span class="op" id="1570352">.</span><span class="ident" id="1570353">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570359">return</span><br>
<span class="lineno">270</span><span class="op" id="1570366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1570369">func</span>&nbsp;<span class="ident" id="1570374">assertI2E</span><span class="op" id="1570383">(</span><span class="ident" id="1570384">inter</span>&nbsp;<span class="op" id="1570390">*</span><span class="ident" id="1570391">interfacetype</span><span class="op" id="1570404">,</span>&nbsp;<span class="ident" id="1570406">i</span>&nbsp;<span class="ident" id="1570408">fInterface</span><span class="op" id="1570418">)</span>&nbsp;<span class="op" id="1570420">(</span><span class="ident" id="1570421">r</span>&nbsp;<span class="keyword" id="1570423">interface</span><span class="op" id="1570432">{</span><span class="op" id="1570433">}</span><span class="op" id="1570434">)</span>&nbsp;<span class="op" id="1570436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570439">ip</span>&nbsp;<span class="op" id="1570442">:=</span>&nbsp;<span class="op" id="1570445">(</span><span class="op" id="1570446">*</span><span class="ident" id="1570447">iface</span><span class="op" id="1570452">)</span><span class="op" id="1570453">(</span><span class="ident" id="1570454">unsafe</span><span class="op" id="1570460">.</span><span class="ident" id="1570461">Pointer</span><span class="op" id="1570468">(</span><span class="op" id="1570469">&amp;</span><span class="ident" id="1570470">i</span><span class="op" id="1570471">)</span><span class="op" id="1570472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570475">tab</span>&nbsp;<span class="op" id="1570479">:=</span>&nbsp;<span class="ident" id="1570482">ip</span><span class="op" id="1570484">.</span><span class="ident" id="1570485">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570490">if</span>&nbsp;<span class="ident" id="1570493">tab</span>&nbsp;<span class="op" id="1570497">==</span>&nbsp;<span class="ident" id="1570500">nil</span>&nbsp;<span class="op" id="1570504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1570508">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1570567">panic</span><span class="op" id="1570572">(</span><span class="op" id="1570573">&amp;</span><span class="ident" id="1570574">TypeAssertionError</span><span class="op" id="1570592">{</span><span class="string" id="1570593">&#34;&#34;</span><span class="op" id="1570595">,</span>&nbsp;<span class="string" id="1570597">&#34;&#34;</span><span class="op" id="1570599">,</span>&nbsp;<span class="op" id="1570601">*</span><span class="ident" id="1570602">inter</span><span class="op" id="1570607">.</span><span class="ident" id="1570608">typ</span><span class="op" id="1570611">.</span><span class="ident" id="1570612">_string</span><span class="op" id="1570619">,</span>&nbsp;<span class="string" id="1570621">&#34;&#34;</span><span class="op" id="1570623">}</span><span class="op" id="1570624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1570627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570630">rp</span>&nbsp;<span class="op" id="1570633">:=</span>&nbsp;<span class="op" id="1570636">(</span><span class="op" id="1570637">*</span><span class="ident" id="1570638">eface</span><span class="op" id="1570643">)</span><span class="op" id="1570644">(</span><span class="ident" id="1570645">unsafe</span><span class="op" id="1570651">.</span><span class="ident" id="1570652">Pointer</span><span class="op" id="1570659">(</span><span class="op" id="1570660">&amp;</span><span class="ident" id="1570661">r</span><span class="op" id="1570662">)</span><span class="op" id="1570663">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570666">rp</span><span class="op" id="1570668">.</span><span class="ident" id="1570669">_type</span>&nbsp;<span class="op" id="1570675">=</span>&nbsp;<span class="ident" id="1570677">tab</span><span class="op" id="1570680">.</span><span class="ident" id="1570681">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570688">rp</span><span class="op" id="1570690">.</span><span class="ident" id="1570691">data</span>&nbsp;<span class="op" id="1570696">=</span>&nbsp;<span class="ident" id="1570698">ip</span><span class="op" id="1570700">.</span><span class="ident" id="1570701">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570707">return</span><br>
<span class="lineno"></span><span class="op" id="1570714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1570717">func</span>&nbsp;<span class="ident" id="1570722">assertI2E2</span><span class="op" id="1570732">(</span><span class="ident" id="1570733">inter</span>&nbsp;<span class="op" id="1570739">*</span><span class="ident" id="1570740">interfacetype</span><span class="op" id="1570753">,</span>&nbsp;<span class="ident" id="1570755">i</span>&nbsp;<span class="ident" id="1570757">fInterface</span><span class="op" id="1570767">)</span>&nbsp;<span class="op" id="1570769">(</span><span class="ident" id="1570770">r</span>&nbsp;<span class="keyword" id="1570772">interface</span><span class="op" id="1570781">{</span><span class="op" id="1570782">}</span><span class="op" id="1570783">,</span>&nbsp;<span class="ident" id="1570785">ok</span>&nbsp;<span class="builtintype" id="1570788">bool</span><span class="op" id="1570792">)</span>&nbsp;<span class="op" id="1570794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570797">ip</span>&nbsp;<span class="op" id="1570800">:=</span>&nbsp;<span class="op" id="1570803">(</span><span class="op" id="1570804">*</span><span class="ident" id="1570805">iface</span><span class="op" id="1570810">)</span><span class="op" id="1570811">(</span><span class="ident" id="1570812">unsafe</span><span class="op" id="1570818">.</span><span class="ident" id="1570819">Pointer</span><span class="op" id="1570826">(</span><span class="op" id="1570827">&amp;</span><span class="ident" id="1570828">i</span><span class="op" id="1570829">)</span><span class="op" id="1570830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570833">tab</span>&nbsp;<span class="op" id="1570837">:=</span>&nbsp;<span class="ident" id="1570840">ip</span><span class="op" id="1570842">.</span><span class="ident" id="1570843">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570848">if</span>&nbsp;<span class="ident" id="1570851">tab</span>&nbsp;<span class="op" id="1570855">==</span>&nbsp;<span class="ident" id="1570858">nil</span>&nbsp;<span class="op" id="1570862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570866">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1570874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570877">rp</span>&nbsp;<span class="op" id="1570880">:=</span>&nbsp;<span class="op" id="1570883">(</span><span class="op" id="1570884">*</span><span class="ident" id="1570885">eface</span><span class="op" id="1570890">)</span><span class="op" id="1570891">(</span><span class="ident" id="1570892">unsafe</span><span class="op" id="1570898">.</span><span class="ident" id="1570899">Pointer</span><span class="op" id="1570906">(</span><span class="op" id="1570907">&amp;</span><span class="ident" id="1570908">r</span><span class="op" id="1570909">)</span><span class="op" id="1570910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570913">rp</span><span class="op" id="1570915">.</span><span class="ident" id="1570916">_type</span>&nbsp;<span class="op" id="1570922">=</span>&nbsp;<span class="ident" id="1570924">tab</span><span class="op" id="1570927">.</span><span class="ident" id="1570928">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570935">rp</span><span class="op" id="1570937">.</span><span class="ident" id="1570938">data</span>&nbsp;<span class="op" id="1570943">=</span>&nbsp;<span class="ident" id="1570945">ip</span><span class="op" id="1570947">.</span><span class="ident" id="1570948">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1570954">ok</span>&nbsp;<span class="op" id="1570957">=</span>&nbsp;<span class="builtintype" id="1570959">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1570965">return</span><br>
<span class="lineno"></span><span class="op" id="1570972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1570975">func</span>&nbsp;<span class="ident" id="1570980">convI2I</span><span class="op" id="1570987">(</span><span class="ident" id="1570988">inter</span>&nbsp;<span class="op" id="1570994">*</span><span class="ident" id="1570995">interfacetype</span><span class="op" id="1571008">,</span>&nbsp;<span class="ident" id="1571010">i</span>&nbsp;<span class="ident" id="1571012">fInterface</span><span class="op" id="1571022">)</span>&nbsp;<span class="op" id="1571024">(</span><span class="ident" id="1571025">r</span>&nbsp;<span class="ident" id="1571027">fInterface</span><span class="op" id="1571037">)</span>&nbsp;<span class="op" id="1571039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571042">ip</span>&nbsp;<span class="op" id="1571045">:=</span>&nbsp;<span class="op" id="1571048">(</span><span class="op" id="1571049">*</span><span class="ident" id="1571050">iface</span><span class="op" id="1571055">)</span><span class="op" id="1571056">(</span><span class="ident" id="1571057">unsafe</span><span class="op" id="1571063">.</span><span class="ident" id="1571064">Pointer</span><span class="op" id="1571071">(</span><span class="op" id="1571072">&amp;</span><span class="ident" id="1571073">i</span><span class="op" id="1571074">)</span><span class="op" id="1571075">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571078">tab</span>&nbsp;<span class="op" id="1571082">:=</span>&nbsp;<span class="ident" id="1571085">ip</span><span class="op" id="1571087">.</span><span class="ident" id="1571088">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571093">if</span>&nbsp;<span class="ident" id="1571096">tab</span>&nbsp;<span class="op" id="1571100">==</span>&nbsp;<span class="ident" id="1571103">nil</span>&nbsp;<span class="op" id="1571107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571111">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571122">rp</span>&nbsp;<span class="op" id="1571125">:=</span>&nbsp;<span class="op" id="1571128">(</span><span class="op" id="1571129">*</span><span class="ident" id="1571130">iface</span><span class="op" id="1571135">)</span><span class="op" id="1571136">(</span><span class="ident" id="1571137">unsafe</span><span class="op" id="1571143">.</span><span class="ident" id="1571144">Pointer</span><span class="op" id="1571151">(</span><span class="op" id="1571152">&amp;</span><span class="ident" id="1571153">r</span><span class="op" id="1571154">)</span><span class="op" id="1571155">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571158">if</span>&nbsp;<span class="ident" id="1571161">tab</span><span class="op" id="1571164">.</span><span class="ident" id="1571165">inter</span>&nbsp;<span class="op" id="1571171">==</span>&nbsp;<span class="ident" id="1571174">inter</span>&nbsp;<span class="op" id="1571180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571184">rp</span><span class="op" id="1571186">.</span><span class="ident" id="1571187">tab</span>&nbsp;<span class="op" id="1571191">=</span>&nbsp;<span class="ident" id="1571193">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571199">rp</span><span class="op" id="1571201">.</span><span class="ident" id="1571202">data</span>&nbsp;<span class="op" id="1571207">=</span>&nbsp;<span class="ident" id="1571209">ip</span><span class="op" id="1571211">.</span><span class="ident" id="1571212">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571219">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571227">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571230">rp</span><span class="op" id="1571232">.</span><span class="ident" id="1571233">tab</span>&nbsp;<span class="op" id="1571237">=</span>&nbsp;<span class="ident" id="1571239">getitab</span><span class="op" id="1571246">(</span><span class="ident" id="1571247">inter</span><span class="op" id="1571252">,</span>&nbsp;<span class="ident" id="1571254">tab</span><span class="op" id="1571257">.</span><span class="ident" id="1571258">_type</span><span class="op" id="1571263">,</span>&nbsp;<span class="builtintype" id="1571265">false</span><span class="op" id="1571270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571273">rp</span><span class="op" id="1571275">.</span><span class="ident" id="1571276">data</span>&nbsp;<span class="op" id="1571281">=</span>&nbsp;<span class="ident" id="1571283">ip</span><span class="op" id="1571285">.</span><span class="ident" id="1571286">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571292">return</span><br>
<span class="lineno"></span><span class="op" id="1571299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1571302">func</span>&nbsp;<span class="ident" id="1571307">assertI2I</span><span class="op" id="1571316">(</span><span class="ident" id="1571317">inter</span>&nbsp;<span class="op" id="1571323">*</span><span class="ident" id="1571324">interfacetype</span><span class="op" id="1571337">,</span>&nbsp;<span class="ident" id="1571339">i</span>&nbsp;<span class="ident" id="1571341">fInterface</span><span class="op" id="1571351">)</span>&nbsp;<span class="op" id="1571353">(</span><span class="ident" id="1571354">r</span>&nbsp;<span class="ident" id="1571356">fInterface</span><span class="op" id="1571366">)</span>&nbsp;<span class="op" id="1571368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571371">ip</span>&nbsp;<span class="op" id="1571374">:=</span>&nbsp;<span class="op" id="1571377">(</span><span class="op" id="1571378">*</span><span class="ident" id="1571379">iface</span><span class="op" id="1571384">)</span><span class="op" id="1571385">(</span><span class="ident" id="1571386">unsafe</span><span class="op" id="1571392">.</span><span class="ident" id="1571393">Pointer</span><span class="op" id="1571400">(</span><span class="op" id="1571401">&amp;</span><span class="ident" id="1571402">i</span><span class="op" id="1571403">)</span><span class="op" id="1571404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571407">tab</span>&nbsp;<span class="op" id="1571411">:=</span>&nbsp;<span class="ident" id="1571414">ip</span><span class="op" id="1571416">.</span><span class="ident" id="1571417">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571422">if</span>&nbsp;<span class="ident" id="1571425">tab</span>&nbsp;<span class="op" id="1571429">==</span>&nbsp;<span class="ident" id="1571432">nil</span>&nbsp;<span class="op" id="1571436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1571440">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1571499">panic</span><span class="op" id="1571504">(</span><span class="op" id="1571505">&amp;</span><span class="ident" id="1571506">TypeAssertionError</span><span class="op" id="1571524">{</span><span class="string" id="1571525">&#34;&#34;</span><span class="op" id="1571527">,</span>&nbsp;<span class="string" id="1571529">&#34;&#34;</span><span class="op" id="1571531">,</span>&nbsp;<span class="op" id="1571533">*</span><span class="ident" id="1571534">inter</span><span class="op" id="1571539">.</span><span class="ident" id="1571540">typ</span><span class="op" id="1571543">.</span><span class="ident" id="1571544">_string</span><span class="op" id="1571551">,</span>&nbsp;<span class="string" id="1571553">&#34;&#34;</span><span class="op" id="1571555">}</span><span class="op" id="1571556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571562">rp</span>&nbsp;<span class="op" id="1571565">:=</span>&nbsp;<span class="op" id="1571568">(</span><span class="op" id="1571569">*</span><span class="ident" id="1571570">iface</span><span class="op" id="1571575">)</span><span class="op" id="1571576">(</span><span class="ident" id="1571577">unsafe</span><span class="op" id="1571583">.</span><span class="ident" id="1571584">Pointer</span><span class="op" id="1571591">(</span><span class="op" id="1571592">&amp;</span><span class="ident" id="1571593">r</span><span class="op" id="1571594">)</span><span class="op" id="1571595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571598">if</span>&nbsp;<span class="ident" id="1571601">tab</span><span class="op" id="1571604">.</span><span class="ident" id="1571605">inter</span>&nbsp;<span class="op" id="1571611">==</span>&nbsp;<span class="ident" id="1571614">inter</span>&nbsp;<span class="op" id="1571620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571624">rp</span><span class="op" id="1571626">.</span><span class="ident" id="1571627">tab</span>&nbsp;<span class="op" id="1571631">=</span>&nbsp;<span class="ident" id="1571633">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571639">rp</span><span class="op" id="1571641">.</span><span class="ident" id="1571642">data</span>&nbsp;<span class="op" id="1571647">=</span>&nbsp;<span class="ident" id="1571649">ip</span><span class="op" id="1571651">.</span><span class="ident" id="1571652">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571659">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571670">rp</span><span class="op" id="1571672">.</span><span class="ident" id="1571673">tab</span>&nbsp;<span class="op" id="1571677">=</span>&nbsp;<span class="ident" id="1571679">getitab</span><span class="op" id="1571686">(</span><span class="ident" id="1571687">inter</span><span class="op" id="1571692">,</span>&nbsp;<span class="ident" id="1571694">tab</span><span class="op" id="1571697">.</span><span class="ident" id="1571698">_type</span><span class="op" id="1571703">,</span>&nbsp;<span class="builtintype" id="1571705">false</span><span class="op" id="1571710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571713">rp</span><span class="op" id="1571715">.</span><span class="ident" id="1571716">data</span>&nbsp;<span class="op" id="1571721">=</span>&nbsp;<span class="ident" id="1571723">ip</span><span class="op" id="1571725">.</span><span class="ident" id="1571726">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571732">return</span><br>
<span class="lineno"></span><span class="op" id="1571739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1571742">func</span>&nbsp;<span class="ident" id="1571747">assertI2I2</span><span class="op" id="1571757">(</span><span class="ident" id="1571758">inter</span>&nbsp;<span class="op" id="1571764">*</span><span class="ident" id="1571765">interfacetype</span><span class="op" id="1571778">,</span>&nbsp;<span class="ident" id="1571780">i</span>&nbsp;<span class="ident" id="1571782">fInterface</span><span class="op" id="1571792">)</span>&nbsp;<span class="op" id="1571794">(</span><span class="ident" id="1571795">r</span>&nbsp;<span class="ident" id="1571797">fInterface</span><span class="op" id="1571807">,</span>&nbsp;<span class="ident" id="1571809">ok</span>&nbsp;<span class="builtintype" id="1571812">bool</span><span class="op" id="1571816">)</span>&nbsp;<span class="op" id="1571818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571821">ip</span>&nbsp;<span class="op" id="1571824">:=</span>&nbsp;<span class="op" id="1571827">(</span><span class="op" id="1571828">*</span><span class="ident" id="1571829">iface</span><span class="op" id="1571834">)</span><span class="op" id="1571835">(</span><span class="ident" id="1571836">unsafe</span><span class="op" id="1571842">.</span><span class="ident" id="1571843">Pointer</span><span class="op" id="1571850">(</span><span class="op" id="1571851">&amp;</span><span class="ident" id="1571852">i</span><span class="op" id="1571853">)</span><span class="op" id="1571854">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571857">tab</span>&nbsp;<span class="op" id="1571861">:=</span>&nbsp;<span class="ident" id="1571864">ip</span><span class="op" id="1571866">.</span><span class="ident" id="1571867">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571872">if</span>&nbsp;<span class="ident" id="1571875">tab</span>&nbsp;<span class="op" id="1571879">==</span>&nbsp;<span class="ident" id="1571882">nil</span>&nbsp;<span class="op" id="1571886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571890">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1571898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571901">rp</span>&nbsp;<span class="op" id="1571904">:=</span>&nbsp;<span class="op" id="1571907">(</span><span class="op" id="1571908">*</span><span class="ident" id="1571909">iface</span><span class="op" id="1571914">)</span><span class="op" id="1571915">(</span><span class="ident" id="1571916">unsafe</span><span class="op" id="1571922">.</span><span class="ident" id="1571923">Pointer</span><span class="op" id="1571930">(</span><span class="op" id="1571931">&amp;</span><span class="ident" id="1571932">r</span><span class="op" id="1571933">)</span><span class="op" id="1571934">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1571937">if</span>&nbsp;<span class="ident" id="1571940">tab</span><span class="op" id="1571943">.</span><span class="ident" id="1571944">inter</span>&nbsp;<span class="op" id="1571950">==</span>&nbsp;<span class="ident" id="1571953">inter</span>&nbsp;<span class="op" id="1571959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571963">rp</span><span class="op" id="1571965">.</span><span class="ident" id="1571966">tab</span>&nbsp;<span class="op" id="1571970">=</span>&nbsp;<span class="ident" id="1571972">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571978">rp</span><span class="op" id="1571980">.</span><span class="ident" id="1571981">data</span>&nbsp;<span class="op" id="1571986">=</span>&nbsp;<span class="ident" id="1571988">ip</span><span class="op" id="1571990">.</span><span class="ident" id="1571991">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1571998">ok</span>&nbsp;<span class="op" id="1572001">=</span>&nbsp;<span class="builtintype" id="1572003">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572010">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572021">tab</span>&nbsp;<span class="op" id="1572025">=</span>&nbsp;<span class="ident" id="1572027">getitab</span><span class="op" id="1572034">(</span><span class="ident" id="1572035">inter</span><span class="op" id="1572040">,</span>&nbsp;<span class="ident" id="1572042">tab</span><span class="op" id="1572045">.</span><span class="ident" id="1572046">_type</span><span class="op" id="1572051">,</span>&nbsp;<span class="builtintype" id="1572053">true</span><span class="op" id="1572057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572060">if</span>&nbsp;<span class="ident" id="1572063">tab</span>&nbsp;<span class="op" id="1572067">==</span>&nbsp;<span class="ident" id="1572070">nil</span>&nbsp;<span class="op" id="1572074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572078">rp</span><span class="op" id="1572080">.</span><span class="ident" id="1572081">data</span>&nbsp;<span class="op" id="1572086">=</span>&nbsp;<span class="ident" id="1572088">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572094">rp</span><span class="op" id="1572096">.</span><span class="ident" id="1572097">tab</span>&nbsp;<span class="op" id="1572101">=</span>&nbsp;<span class="ident" id="1572103">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572109">ok</span>&nbsp;<span class="op" id="1572112">=</span>&nbsp;<span class="builtintype" id="1572114">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572122">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572133">rp</span><span class="op" id="1572135">.</span><span class="ident" id="1572136">tab</span>&nbsp;<span class="op" id="1572140">=</span>&nbsp;<span class="ident" id="1572142">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572147">rp</span><span class="op" id="1572149">.</span><span class="ident" id="1572150">data</span>&nbsp;<span class="op" id="1572155">=</span>&nbsp;<span class="ident" id="1572157">ip</span><span class="op" id="1572159">.</span><span class="ident" id="1572160">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572166">ok</span>&nbsp;<span class="op" id="1572169">=</span>&nbsp;<span class="builtintype" id="1572171">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572177">return</span><br>
<span class="lineno"></span><span class="op" id="1572184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572187">func</span>&nbsp;<span class="ident" id="1572192">assertE2I</span><span class="op" id="1572201">(</span><span class="ident" id="1572202">inter</span>&nbsp;<span class="op" id="1572208">*</span><span class="ident" id="1572209">interfacetype</span><span class="op" id="1572222">,</span>&nbsp;<span class="ident" id="1572224">e</span>&nbsp;<span class="keyword" id="1572226">interface</span><span class="op" id="1572235">{</span><span class="op" id="1572236">}</span><span class="op" id="1572237">)</span>&nbsp;<span class="op" id="1572239">(</span><span class="ident" id="1572240">r</span>&nbsp;<span class="ident" id="1572242">fInterface</span><span class="op" id="1572252">)</span>&nbsp;<span class="op" id="1572254">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572257">ep</span>&nbsp;<span class="op" id="1572260">:=</span>&nbsp;<span class="op" id="1572263">(</span><span class="op" id="1572264">*</span><span class="ident" id="1572265">eface</span><span class="op" id="1572270">)</span><span class="op" id="1572271">(</span><span class="ident" id="1572272">unsafe</span><span class="op" id="1572278">.</span><span class="ident" id="1572279">Pointer</span><span class="op" id="1572286">(</span><span class="op" id="1572287">&amp;</span><span class="ident" id="1572288">e</span><span class="op" id="1572289">)</span><span class="op" id="1572290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572293">t</span>&nbsp;<span class="op" id="1572295">:=</span>&nbsp;<span class="ident" id="1572298">ep</span><span class="op" id="1572300">.</span><span class="ident" id="1572301">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572308">if</span>&nbsp;<span class="ident" id="1572311">t</span>&nbsp;<span class="op" id="1572313">==</span>&nbsp;<span class="ident" id="1572316">nil</span>&nbsp;<span class="op" id="1572320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1572324">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1572383">panic</span><span class="op" id="1572388">(</span><span class="op" id="1572389">&amp;</span><span class="ident" id="1572390">TypeAssertionError</span><span class="op" id="1572408">{</span><span class="string" id="1572409">&#34;&#34;</span><span class="op" id="1572411">,</span>&nbsp;<span class="string" id="1572413">&#34;&#34;</span><span class="op" id="1572415">,</span>&nbsp;<span class="op" id="1572417">*</span><span class="ident" id="1572418">inter</span><span class="op" id="1572423">.</span><span class="ident" id="1572424">typ</span><span class="op" id="1572427">.</span><span class="ident" id="1572428">_string</span><span class="op" id="1572435">,</span>&nbsp;<span class="string" id="1572437">&#34;&#34;</span><span class="op" id="1572439">}</span><span class="op" id="1572440">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572446">rp</span>&nbsp;<span class="op" id="1572449">:=</span>&nbsp;<span class="op" id="1572452">(</span><span class="op" id="1572453">*</span><span class="ident" id="1572454">iface</span><span class="op" id="1572459">)</span><span class="op" id="1572460">(</span><span class="ident" id="1572461">unsafe</span><span class="op" id="1572467">.</span><span class="ident" id="1572468">Pointer</span><span class="op" id="1572475">(</span><span class="op" id="1572476">&amp;</span><span class="ident" id="1572477">r</span><span class="op" id="1572478">)</span><span class="op" id="1572479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572482">rp</span><span class="op" id="1572484">.</span><span class="ident" id="1572485">tab</span>&nbsp;<span class="op" id="1572489">=</span>&nbsp;<span class="ident" id="1572491">getitab</span><span class="op" id="1572498">(</span><span class="ident" id="1572499">inter</span><span class="op" id="1572504">,</span>&nbsp;<span class="ident" id="1572506">t</span><span class="op" id="1572507">,</span>&nbsp;<span class="builtintype" id="1572509">false</span><span class="op" id="1572514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572517">rp</span><span class="op" id="1572519">.</span><span class="ident" id="1572520">data</span>&nbsp;<span class="op" id="1572525">=</span>&nbsp;<span class="ident" id="1572527">ep</span><span class="op" id="1572529">.</span><span class="ident" id="1572530">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572536">return</span><br>
<span class="lineno">370</span><span class="op" id="1572543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572546">func</span>&nbsp;<span class="ident" id="1572551">assertE2I2</span><span class="op" id="1572561">(</span><span class="ident" id="1572562">inter</span>&nbsp;<span class="op" id="1572568">*</span><span class="ident" id="1572569">interfacetype</span><span class="op" id="1572582">,</span>&nbsp;<span class="ident" id="1572584">e</span>&nbsp;<span class="keyword" id="1572586">interface</span><span class="op" id="1572595">{</span><span class="op" id="1572596">}</span><span class="op" id="1572597">)</span>&nbsp;<span class="op" id="1572599">(</span><span class="ident" id="1572600">r</span>&nbsp;<span class="ident" id="1572602">fInterface</span><span class="op" id="1572612">,</span>&nbsp;<span class="ident" id="1572614">ok</span>&nbsp;<span class="builtintype" id="1572617">bool</span><span class="op" id="1572621">)</span>&nbsp;<span class="op" id="1572623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572626">ep</span>&nbsp;<span class="op" id="1572629">:=</span>&nbsp;<span class="op" id="1572632">(</span><span class="op" id="1572633">*</span><span class="ident" id="1572634">eface</span><span class="op" id="1572639">)</span><span class="op" id="1572640">(</span><span class="ident" id="1572641">unsafe</span><span class="op" id="1572647">.</span><span class="ident" id="1572648">Pointer</span><span class="op" id="1572655">(</span><span class="op" id="1572656">&amp;</span><span class="ident" id="1572657">e</span><span class="op" id="1572658">)</span><span class="op" id="1572659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572662">t</span>&nbsp;<span class="op" id="1572664">:=</span>&nbsp;<span class="ident" id="1572667">ep</span><span class="op" id="1572669">.</span><span class="ident" id="1572670">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572677">if</span>&nbsp;<span class="ident" id="1572680">t</span>&nbsp;<span class="op" id="1572682">==</span>&nbsp;<span class="ident" id="1572685">nil</span>&nbsp;<span class="op" id="1572689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572693">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572704">tab</span>&nbsp;<span class="op" id="1572708">:=</span>&nbsp;<span class="ident" id="1572711">getitab</span><span class="op" id="1572718">(</span><span class="ident" id="1572719">inter</span><span class="op" id="1572724">,</span>&nbsp;<span class="ident" id="1572726">t</span><span class="op" id="1572727">,</span>&nbsp;<span class="builtintype" id="1572729">true</span><span class="op" id="1572733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572736">if</span>&nbsp;<span class="ident" id="1572739">tab</span>&nbsp;<span class="op" id="1572743">==</span>&nbsp;<span class="ident" id="1572746">nil</span>&nbsp;<span class="op" id="1572750">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572754">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572765">rp</span>&nbsp;<span class="op" id="1572768">:=</span>&nbsp;<span class="op" id="1572771">(</span><span class="op" id="1572772">*</span><span class="ident" id="1572773">iface</span><span class="op" id="1572778">)</span><span class="op" id="1572779">(</span><span class="ident" id="1572780">unsafe</span><span class="op" id="1572786">.</span><span class="ident" id="1572787">Pointer</span><span class="op" id="1572794">(</span><span class="op" id="1572795">&amp;</span><span class="ident" id="1572796">r</span><span class="op" id="1572797">)</span><span class="op" id="1572798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572801">rp</span><span class="op" id="1572803">.</span><span class="ident" id="1572804">tab</span>&nbsp;<span class="op" id="1572808">=</span>&nbsp;<span class="ident" id="1572810">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572815">rp</span><span class="op" id="1572817">.</span><span class="ident" id="1572818">data</span>&nbsp;<span class="op" id="1572823">=</span>&nbsp;<span class="ident" id="1572825">ep</span><span class="op" id="1572827">.</span><span class="ident" id="1572828">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1572834">ok</span>&nbsp;<span class="op" id="1572837">=</span>&nbsp;<span class="builtintype" id="1572839">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1572845">return</span><br>
<span class="lineno"></span><span class="op" id="1572852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572855">func</span>&nbsp;<span class="ident" id="1572860">reflect_ifaceE2I</span><span class="op" id="1572876">(</span><span class="ident" id="1572877">inter</span>&nbsp;<span class="op" id="1572883">*</span><span class="ident" id="1572884">interfacetype</span><span class="op" id="1572897">,</span>&nbsp;<span class="ident" id="1572899">e</span>&nbsp;<span class="keyword" id="1572901">interface</span><span class="op" id="1572910">{</span><span class="op" id="1572911">}</span><span class="op" id="1572912">,</span>&nbsp;<span class="ident" id="1572914">dst</span>&nbsp;<span class="op" id="1572918">*</span><span class="ident" id="1572919">fInterface</span><span class="op" id="1572929">)</span>&nbsp;<span class="op" id="1572931">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1572934">*</span><span class="ident" id="1572935">dst</span>&nbsp;<span class="op" id="1572939">=</span>&nbsp;<span class="ident" id="1572941">assertE2I</span><span class="op" id="1572950">(</span><span class="ident" id="1572951">inter</span><span class="op" id="1572956">,</span>&nbsp;<span class="ident" id="1572958">e</span><span class="op" id="1572959">)</span><br>
<span class="lineno"></span><span class="op" id="1572961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1572964">func</span>&nbsp;<span class="ident" id="1572969">assertE2E</span><span class="op" id="1572978">(</span><span class="ident" id="1572979">inter</span>&nbsp;<span class="op" id="1572985">*</span><span class="ident" id="1572986">interfacetype</span><span class="op" id="1572999">,</span>&nbsp;<span class="ident" id="1573001">e</span>&nbsp;<span class="keyword" id="1573003">interface</span><span class="op" id="1573012">{</span><span class="op" id="1573013">}</span><span class="op" id="1573014">)</span>&nbsp;<span class="keyword" id="1573016">interface</span><span class="op" id="1573025">{</span><span class="op" id="1573026">}</span>&nbsp;<span class="op" id="1573028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573031">ep</span>&nbsp;<span class="op" id="1573034">:=</span>&nbsp;<span class="op" id="1573037">(</span><span class="op" id="1573038">*</span><span class="ident" id="1573039">eface</span><span class="op" id="1573044">)</span><span class="op" id="1573045">(</span><span class="ident" id="1573046">unsafe</span><span class="op" id="1573052">.</span><span class="ident" id="1573053">Pointer</span><span class="op" id="1573060">(</span><span class="op" id="1573061">&amp;</span><span class="ident" id="1573062">e</span><span class="op" id="1573063">)</span><span class="op" id="1573064">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573067">if</span>&nbsp;<span class="ident" id="1573070">ep</span><span class="op" id="1573072">.</span><span class="ident" id="1573073">_type</span>&nbsp;<span class="op" id="1573079">==</span>&nbsp;<span class="ident" id="1573082">nil</span>&nbsp;<span class="op" id="1573086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1573090">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1573149">panic</span><span class="op" id="1573154">(</span><span class="op" id="1573155">&amp;</span><span class="ident" id="1573156">TypeAssertionError</span><span class="op" id="1573174">{</span><span class="string" id="1573175">&#34;&#34;</span><span class="op" id="1573177">,</span>&nbsp;<span class="string" id="1573179">&#34;&#34;</span><span class="op" id="1573181">,</span>&nbsp;<span class="op" id="1573183">*</span><span class="ident" id="1573184">inter</span><span class="op" id="1573189">.</span><span class="ident" id="1573190">typ</span><span class="op" id="1573193">.</span><span class="ident" id="1573194">_string</span><span class="op" id="1573201">,</span>&nbsp;<span class="string" id="1573203">&#34;&#34;</span><span class="op" id="1573205">}</span><span class="op" id="1573206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573212">return</span>&nbsp;<span class="ident" id="1573219">e</span><br>
<span class="lineno">400</span><span class="op" id="1573221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573224">func</span>&nbsp;<span class="ident" id="1573229">assertE2E2</span><span class="op" id="1573239">(</span><span class="ident" id="1573240">inter</span>&nbsp;<span class="op" id="1573246">*</span><span class="ident" id="1573247">interfacetype</span><span class="op" id="1573260">,</span>&nbsp;<span class="ident" id="1573262">e</span>&nbsp;<span class="keyword" id="1573264">interface</span><span class="op" id="1573273">{</span><span class="op" id="1573274">}</span><span class="op" id="1573275">)</span>&nbsp;<span class="op" id="1573277">(</span><span class="keyword" id="1573278">interface</span><span class="op" id="1573287">{</span><span class="op" id="1573288">}</span><span class="op" id="1573289">,</span>&nbsp;<span class="builtintype" id="1573291">bool</span><span class="op" id="1573295">)</span>&nbsp;<span class="op" id="1573297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573300">ep</span>&nbsp;<span class="op" id="1573303">:=</span>&nbsp;<span class="op" id="1573306">(</span><span class="op" id="1573307">*</span><span class="ident" id="1573308">eface</span><span class="op" id="1573313">)</span><span class="op" id="1573314">(</span><span class="ident" id="1573315">unsafe</span><span class="op" id="1573321">.</span><span class="ident" id="1573322">Pointer</span><span class="op" id="1573329">(</span><span class="op" id="1573330">&amp;</span><span class="ident" id="1573331">e</span><span class="op" id="1573332">)</span><span class="op" id="1573333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573336">if</span>&nbsp;<span class="ident" id="1573339">ep</span><span class="op" id="1573341">.</span><span class="ident" id="1573342">_type</span>&nbsp;<span class="op" id="1573348">==</span>&nbsp;<span class="ident" id="1573351">nil</span>&nbsp;<span class="op" id="1573355">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573359">return</span>&nbsp;<span class="ident" id="1573366">nil</span><span class="op" id="1573369">,</span>&nbsp;<span class="builtintype" id="1573371">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573381">return</span>&nbsp;<span class="ident" id="1573388">e</span><span class="op" id="1573389">,</span>&nbsp;<span class="builtintype" id="1573391">true</span><br>
<span class="lineno"></span><span class="op" id="1573396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1573399">func</span>&nbsp;<span class="ident" id="1573404">ifacethash</span><span class="op" id="1573414">(</span><span class="ident" id="1573415">i</span>&nbsp;<span class="ident" id="1573417">fInterface</span><span class="op" id="1573427">)</span>&nbsp;<span class="builtintype" id="1573429">uint32</span>&nbsp;<span class="op" id="1573436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573439">ip</span>&nbsp;<span class="op" id="1573442">:=</span>&nbsp;<span class="op" id="1573445">(</span><span class="op" id="1573446">*</span><span class="ident" id="1573447">iface</span><span class="op" id="1573452">)</span><span class="op" id="1573453">(</span><span class="ident" id="1573454">unsafe</span><span class="op" id="1573460">.</span><span class="ident" id="1573461">Pointer</span><span class="op" id="1573468">(</span><span class="op" id="1573469">&amp;</span><span class="ident" id="1573470">i</span><span class="op" id="1573471">)</span><span class="op" id="1573472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573475">tab</span>&nbsp;<span class="op" id="1573479">:=</span>&nbsp;<span class="ident" id="1573482">ip</span><span class="op" id="1573484">.</span><span class="ident" id="1573485">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573490">if</span>&nbsp;<span class="ident" id="1573493">tab</span>&nbsp;<span class="op" id="1573497">==</span>&nbsp;<span class="ident" id="1573500">nil</span>&nbsp;<span class="op" id="1573504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573508">return</span>&nbsp;<span class="num" id="1573515">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573521">return</span>&nbsp;<span class="ident" id="1573528">tab</span><span class="op" id="1573531">.</span><span class="ident" id="1573532">_type</span><span class="op" id="1573537">.</span><span class="ident" id="1573538">hash</span><br>
<span class="lineno"></span><span class="op" id="1573543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573546">func</span>&nbsp;<span class="ident" id="1573551">efacethash</span><span class="op" id="1573561">(</span><span class="ident" id="1573562">e</span>&nbsp;<span class="keyword" id="1573564">interface</span><span class="op" id="1573573">{</span><span class="op" id="1573574">}</span><span class="op" id="1573575">)</span>&nbsp;<span class="builtintype" id="1573577">uint32</span>&nbsp;<span class="op" id="1573584">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573587">ep</span>&nbsp;<span class="op" id="1573590">:=</span>&nbsp;<span class="op" id="1573593">(</span><span class="op" id="1573594">*</span><span class="ident" id="1573595">eface</span><span class="op" id="1573600">)</span><span class="op" id="1573601">(</span><span class="ident" id="1573602">unsafe</span><span class="op" id="1573608">.</span><span class="ident" id="1573609">Pointer</span><span class="op" id="1573616">(</span><span class="op" id="1573617">&amp;</span><span class="ident" id="1573618">e</span><span class="op" id="1573619">)</span><span class="op" id="1573620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573623">t</span>&nbsp;<span class="op" id="1573625">:=</span>&nbsp;<span class="ident" id="1573628">ep</span><span class="op" id="1573630">.</span><span class="ident" id="1573631">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573638">if</span>&nbsp;<span class="ident" id="1573641">t</span>&nbsp;<span class="op" id="1573643">==</span>&nbsp;<span class="ident" id="1573646">nil</span>&nbsp;<span class="op" id="1573650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573654">return</span>&nbsp;<span class="num" id="1573661">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573664">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573667">return</span>&nbsp;<span class="ident" id="1573674">t</span><span class="op" id="1573675">.</span><span class="ident" id="1573676">hash</span><br>
<span class="lineno"></span><span class="op" id="1573681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1573684">func</span>&nbsp;<span class="ident" id="1573689">iterate_itabs</span><span class="op" id="1573702">(</span><span class="ident" id="1573703">fn</span>&nbsp;<span class="keyword" id="1573706">func</span><span class="op" id="1573710">(</span><span class="op" id="1573711">*</span><span class="ident" id="1573712">itab</span><span class="op" id="1573716">)</span><span class="op" id="1573717">)</span>&nbsp;<span class="op" id="1573719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573722">for</span>&nbsp;<span class="ident" id="1573726">_</span><span class="op" id="1573727">,</span>&nbsp;<span class="ident" id="1573729">h</span>&nbsp;<span class="op" id="1573731">:=</span>&nbsp;<span class="keyword" id="1573734">range</span>&nbsp;<span class="op" id="1573740">&amp;</span><span class="ident" id="1573741">hash</span>&nbsp;<span class="op" id="1573746">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573750">for</span>&nbsp;<span class="op" id="1573754">;</span>&nbsp;<span class="ident" id="1573756">h</span>&nbsp;<span class="op" id="1573758">!=</span>&nbsp;<span class="ident" id="1573761">nil</span><span class="op" id="1573764">;</span>&nbsp;<span class="ident" id="1573766">h</span>&nbsp;<span class="op" id="1573768">=</span>&nbsp;<span class="ident" id="1573770">h</span><span class="op" id="1573771">.</span><span class="ident" id="1573772">link</span>&nbsp;<span class="op" id="1573777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1573782">fn</span><span class="op" id="1573784">(</span><span class="ident" id="1573785">h</span><span class="op" id="1573786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573793">}</span><br>
<span class="lineno"></span><span class="op" id="1573795">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1573798">func</span>&nbsp;<span class="ident" id="1573803">ifaceE2I2</span><span class="op" id="1573812">(</span><span class="ident" id="1573813">inter</span>&nbsp;<span class="op" id="1573819">*</span><span class="ident" id="1573820">interfacetype</span><span class="op" id="1573833">,</span>&nbsp;<span class="ident" id="1573835">e</span>&nbsp;<span class="keyword" id="1573837">interface</span><span class="op" id="1573846">{</span><span class="op" id="1573847">}</span><span class="op" id="1573848">,</span>&nbsp;<span class="ident" id="1573850">r</span>&nbsp;<span class="op" id="1573852">*</span><span class="ident" id="1573853">fInterface</span><span class="op" id="1573863">)</span>&nbsp;<span class="op" id="1573865">(</span><span class="ident" id="1573866">ok</span>&nbsp;<span class="builtintype" id="1573869">bool</span><span class="op" id="1573873">)</span>&nbsp;<span class="op" id="1573875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1573878">*</span><span class="ident" id="1573879">r</span><span class="op" id="1573880">,</span>&nbsp;<span class="ident" id="1573882">ok</span>&nbsp;<span class="op" id="1573885">=</span>&nbsp;<span class="ident" id="1573887">assertE2I2</span><span class="op" id="1573897">(</span><span class="ident" id="1573898">inter</span><span class="op" id="1573903">,</span>&nbsp;<span class="ident" id="1573905">e</span><span class="op" id="1573906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1573909">return</span><br>
<span class="lineno"></span><span class="op" id="1573916">}</span>
</div>
</body>
</html>
