<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6085615">package</span>&nbsp;<span class="ident" id="6085623">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6085630">import</span>&nbsp;<span class="op" id="6085637">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6085640">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6085648">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span><span class="op" id="6085666">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6085669">//&nbsp;Dasm&nbsp;disassembles&nbsp;a&nbsp;byte&nbsp;block.</span><br>
<span class="lineno">10</span><span class="keyword" id="6085704">func</span>&nbsp;<span class="ident" id="6085709">Dasm</span><span class="op" id="6085713">(</span><span class="ident" id="6085714">bs</span>&nbsp;<span class="op" id="6085717">[</span><span class="op" id="6085718">]</span><span class="builtintype" id="6085719">byte</span><span class="op" id="6085723">,</span>&nbsp;<span class="ident" id="6085725">addr</span>&nbsp;<span class="builtintype" id="6085730">uint32</span><span class="op" id="6085736">)</span>&nbsp;<span class="op" id="6085738">[</span><span class="op" id="6085739">]</span><span class="op" id="6085740">*</span><span class="ident" id="6085741"><a href="/lonnie.io/e8vm/dasm8/line.go.html#6090749">Line</a></span>&nbsp;<span class="op" id="6085746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085749">var</span>&nbsp;<span class="ident" id="6085753">ret</span>&nbsp;<span class="op" id="6085757">[</span><span class="op" id="6085758">]</span><span class="op" id="6085759">*</span><span class="ident" id="6085760"><a href="/lonnie.io/e8vm/dasm8/line.go.html#6090749">Line</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085767">base</span>&nbsp;<span class="op" id="6085772">:=</span>&nbsp;<span class="ident" id="6085775"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085725">addr</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085782">add</span>&nbsp;<span class="op" id="6085786">:=</span>&nbsp;<span class="keyword" id="6085789">func</span><span class="op" id="6085793">(</span><span class="ident" id="6085794">b</span>&nbsp;<span class="op" id="6085796">[</span><span class="op" id="6085797">]</span><span class="builtintype" id="6085798">byte</span><span class="op" id="6085802">)</span>&nbsp;<span class="op" id="6085804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085808">inst</span>&nbsp;<span class="op" id="6085813">:=</span>&nbsp;<span class="ident" id="6085816"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085648">binary</a></span><span class="op" id="6085822">.</span><span class="ident" id="6085823">LittleEndian</span><span class="op" id="6085835">.</span><span class="ident" id="6085836">Uint32</span><span class="op" id="6085842">(</span><span class="ident" id="6085843"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085794">b</a></span><span class="op" id="6085844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085848"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085753">ret</a></span>&nbsp;<span class="op" id="6085852">=</span>&nbsp;<span class="builtinfunc" id="6085854">append</span><span class="op" id="6085860">(</span><span class="ident" id="6085861"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085753">ret</a></span><span class="op" id="6085864">,</span>&nbsp;<span class="ident" id="6085866"><a href="/lonnie.io/e8vm/dasm8/inst_all.go.html#6086542">NewLine</a></span><span class="op" id="6085873">(</span><span class="ident" id="6085874"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085725">addr</a></span><span class="op" id="6085878">,</span>&nbsp;<span class="ident" id="6085880"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085808">inst</a></span><span class="op" id="6085884">)</span><span class="op" id="6085885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085889"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085725">addr</a></span>&nbsp;<span class="op" id="6085894">+=</span>&nbsp;<span class="num" id="6085897">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085900">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085904">nline</span>&nbsp;<span class="op" id="6085910">:=</span>&nbsp;<span class="builtinfunc" id="6085913">len</span><span class="op" id="6085916">(</span><span class="ident" id="6085917"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085714">bs</a></span><span class="op" id="6085919">)</span>&nbsp;<span class="op" id="6085921">/</span>&nbsp;<span class="num" id="6085923">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085926">for</span>&nbsp;<span class="ident" id="6085930">i</span>&nbsp;<span class="op" id="6085932">:=</span>&nbsp;<span class="num" id="6085935">0</span><span class="op" id="6085936">;</span>&nbsp;<span class="ident" id="6085938"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085930">i</a></span>&nbsp;<span class="op" id="6085940">&lt;</span>&nbsp;<span class="ident" id="6085942"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085904">nline</a></span><span class="op" id="6085947">;</span>&nbsp;<span class="ident" id="6085949"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085930">i</a></span><span class="op" id="6085950">++</span>&nbsp;<span class="op" id="6085953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085957">off</span>&nbsp;<span class="op" id="6085961">:=</span>&nbsp;<span class="ident" id="6085964"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085930">i</a></span>&nbsp;<span class="op" id="6085966">*</span>&nbsp;<span class="num" id="6085968">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085972"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085782">add</a></span><span class="op" id="6085975">(</span><span class="ident" id="6085976"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085714">bs</a></span><span class="op" id="6085978">[</span><span class="ident" id="6085979"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085957">off</a></span>&nbsp;<span class="op" id="6085983">:</span>&nbsp;<span class="ident" id="6085985"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085957">off</a></span><span class="op" id="6085988">+</span><span class="num" id="6085989">4</span><span class="op" id="6085990">]</span><span class="op" id="6085991">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6085998">//&nbsp;residue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086010">if</span>&nbsp;<span class="builtinfunc" id="6086013">len</span><span class="op" id="6086016">(</span><span class="ident" id="6086017"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085714">bs</a></span><span class="op" id="6086019">)</span><span class="op" id="6086020">%</span><span class="num" id="6086021">4</span>&nbsp;<span class="op" id="6086023">!=</span>&nbsp;<span class="num" id="6086026">0</span>&nbsp;<span class="op" id="6086028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086032">var</span>&nbsp;<span class="ident" id="6086036">buf</span>&nbsp;<span class="op" id="6086040">[</span><span class="num" id="6086041">4</span><span class="op" id="6086042">]</span><span class="builtintype" id="6086043">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6086050">copy</span><span class="op" id="6086054">(</span><span class="ident" id="6086055"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086036">buf</a></span><span class="op" id="6086058">[</span><span class="op" id="6086059">:</span><span class="op" id="6086060">]</span><span class="op" id="6086061">,</span>&nbsp;<span class="ident" id="6086063"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085714">bs</a></span><span class="op" id="6086065">[</span><span class="ident" id="6086066"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085904">nline</a></span><span class="op" id="6086071">*</span><span class="num" id="6086072">4</span><span class="op" id="6086073">:</span><span class="op" id="6086074">]</span><span class="op" id="6086075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086079"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085782">add</a></span><span class="op" id="6086082">(</span><span class="ident" id="6086083"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086036">buf</a></span><span class="op" id="6086086">[</span><span class="op" id="6086087">:</span><span class="op" id="6086088">]</span><span class="op" id="6086089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086096">//&nbsp;link&nbsp;the&nbsp;jumps</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086115">for</span>&nbsp;<span class="ident" id="6086119">_</span><span class="op" id="6086120">,</span>&nbsp;<span class="ident" id="6086122">line</span>&nbsp;<span class="op" id="6086127">:=</span>&nbsp;<span class="keyword" id="6086130">range</span>&nbsp;<span class="ident" id="6086136"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085753">ret</a></span>&nbsp;<span class="op" id="6086140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086144">if</span>&nbsp;<span class="op" id="6086147">!</span><span class="ident" id="6086148"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086122">line</a></span><span class="op" id="6086152">.</span><span class="ident" id="6086153">IsJump</span>&nbsp;<span class="op" id="6086160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086165">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086181">index</span>&nbsp;<span class="op" id="6086187">:=</span>&nbsp;<span class="builtintype" id="6086190">int</span><span class="op" id="6086193">(</span><span class="ident" id="6086194"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086122">line</a></span><span class="op" id="6086198">.</span><span class="ident" id="6086199">To</span><span class="op" id="6086201">-</span><span class="ident" id="6086202"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085767">base</a></span><span class="op" id="6086206">)</span>&nbsp;<span class="op" id="6086208">/</span>&nbsp;<span class="num" id="6086210">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086214">if</span>&nbsp;<span class="ident" id="6086217"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086181">index</a></span>&nbsp;<span class="op" id="6086223">&gt;=</span>&nbsp;<span class="num" id="6086226">0</span>&nbsp;<span class="op" id="6086228">&amp;&amp;</span>&nbsp;<span class="ident" id="6086231"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086181">index</a></span>&nbsp;<span class="op" id="6086237">&lt;</span>&nbsp;<span class="ident" id="6086239"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085904">nline</a></span>&nbsp;<span class="op" id="6086245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086250"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086122">line</a></span><span class="op" id="6086254">.</span><span class="ident" id="6086255">ToLine</span>&nbsp;<span class="op" id="6086262">=</span>&nbsp;<span class="ident" id="6086264"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085753">ret</a></span><span class="op" id="6086267">[</span><span class="ident" id="6086268"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086181">index</a></span><span class="op" id="6086273">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086280">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086284">return</span>&nbsp;<span class="ident" id="6086291"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085753">ret</a></span><br>
<span class="lineno"></span><span class="op" id="6086295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6086298">//&nbsp;Print&nbsp;prints&nbsp;a&nbsp;byte&nbsp;block&nbsp;as&nbsp;assembly&nbsp;lines.</span><br>
<span class="lineno">50</span><span class="keyword" id="6086346">func</span>&nbsp;<span class="ident" id="6086351">Print</span><span class="op" id="6086356">(</span><span class="ident" id="6086357">bs</span>&nbsp;<span class="op" id="6086360">[</span><span class="op" id="6086361">]</span><span class="builtintype" id="6086362">byte</span><span class="op" id="6086366">,</span>&nbsp;<span class="ident" id="6086368">addr</span>&nbsp;<span class="builtintype" id="6086373">uint32</span><span class="op" id="6086379">)</span>&nbsp;<span class="op" id="6086381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086384">lines</span>&nbsp;<span class="op" id="6086390">:=</span>&nbsp;<span class="ident" id="6086393"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085709">Dasm</a></span><span class="op" id="6086397">(</span><span class="ident" id="6086398"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086357">bs</a></span><span class="op" id="6086400">,</span>&nbsp;<span class="ident" id="6086402"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086368">addr</a></span><span class="op" id="6086406">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086410">for</span>&nbsp;<span class="ident" id="6086414">_</span><span class="op" id="6086415">,</span>&nbsp;<span class="ident" id="6086417">line</span>&nbsp;<span class="op" id="6086422">:=</span>&nbsp;<span class="keyword" id="6086425">range</span>&nbsp;<span class="ident" id="6086431"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086384">lines</a></span>&nbsp;<span class="op" id="6086437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086441"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6085640">fmt</a></span><span class="op" id="6086444">.</span><span class="ident" id="6086445">Println</span><span class="op" id="6086452">(</span><span class="ident" id="6086453"><a href="/lonnie.io/e8vm/dasm8/dasm.go.html#6086417">line</a></span><span class="op" id="6086457">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086460">}</span><br>
<span class="lineno"></span><span class="op" id="6086462">}</span>
</div>
</body>
</html>
