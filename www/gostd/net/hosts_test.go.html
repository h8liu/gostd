<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html" class="current">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8008368">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8008423">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8008477">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8008528">package</span>&nbsp;<span class="ident" id="8008536">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8008541">import</span>&nbsp;<span class="op" id="8008548">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8008551">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8008559">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8008569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8008572">type</span>&nbsp;<span class="ident" id="8008577">hostTest</span>&nbsp;<span class="keyword" id="8008586">struct</span>&nbsp;<span class="op" id="8008593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008596">host</span>&nbsp;<span class="builtintype" id="8008601">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008609">ips</span>&nbsp;&nbsp;<span class="op" id="8008614">[</span><span class="op" id="8008615">]</span><span class="ident" id="8008616">IP</span><br>
<span class="lineno">15</span><span class="op" id="8008619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8008622">var</span>&nbsp;<span class="ident" id="8008626">hosttests</span>&nbsp;<span class="op" id="8008636">=</span>&nbsp;<span class="op" id="8008638">[</span><span class="op" id="8008639">]</span><span class="ident" id="8008640">hostTest</span><span class="op" id="8008648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008651">{</span><span class="string" id="8008652">&#34;odin&#34;</span><span class="op" id="8008658">,</span>&nbsp;<span class="op" id="8008660">[</span><span class="op" id="8008661">]</span><span class="ident" id="8008662">IP</span><span class="op" id="8008664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008668">IPv4</span><span class="op" id="8008672">(</span><span class="num" id="8008673">127</span><span class="op" id="8008676">,</span>&nbsp;<span class="num" id="8008678">0</span><span class="op" id="8008679">,</span>&nbsp;<span class="num" id="8008681">0</span><span class="op" id="8008682">,</span>&nbsp;<span class="num" id="8008684">2</span><span class="op" id="8008685">)</span><span class="op" id="8008686">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008690">IPv4</span><span class="op" id="8008694">(</span><span class="num" id="8008695">127</span><span class="op" id="8008698">,</span>&nbsp;<span class="num" id="8008700">0</span><span class="op" id="8008701">,</span>&nbsp;<span class="num" id="8008703">0</span><span class="op" id="8008704">,</span>&nbsp;<span class="num" id="8008706">3</span><span class="op" id="8008707">)</span><span class="op" id="8008708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008712">ParseIP</span><span class="op" id="8008719">(</span><span class="string" id="8008720">&#34;::2&#34;</span><span class="op" id="8008725">)</span><span class="op" id="8008726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008729">}</span><span class="op" id="8008730">}</span><span class="op" id="8008731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008734">{</span><span class="string" id="8008735">&#34;thor&#34;</span><span class="op" id="8008741">,</span>&nbsp;<span class="op" id="8008743">[</span><span class="op" id="8008744">]</span><span class="ident" id="8008745">IP</span><span class="op" id="8008747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008751">IPv4</span><span class="op" id="8008755">(</span><span class="num" id="8008756">127</span><span class="op" id="8008759">,</span>&nbsp;<span class="num" id="8008761">1</span><span class="op" id="8008762">,</span>&nbsp;<span class="num" id="8008764">1</span><span class="op" id="8008765">,</span>&nbsp;<span class="num" id="8008767">1</span><span class="op" id="8008768">)</span><span class="op" id="8008769">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008772">}</span><span class="op" id="8008773">}</span><span class="op" id="8008774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008777">{</span><span class="string" id="8008778">&#34;loki&#34;</span><span class="op" id="8008784">,</span>&nbsp;<span class="op" id="8008786">[</span><span class="op" id="8008787">]</span><span class="ident" id="8008788">IP</span><span class="op" id="8008790">{</span><span class="op" id="8008791">}</span><span class="op" id="8008792">}</span><span class="op" id="8008793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008796">{</span><span class="string" id="8008797">&#34;ullr&#34;</span><span class="op" id="8008803">,</span>&nbsp;<span class="op" id="8008805">[</span><span class="op" id="8008806">]</span><span class="ident" id="8008807">IP</span><span class="op" id="8008809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008813">IPv4</span><span class="op" id="8008817">(</span><span class="num" id="8008818">127</span><span class="op" id="8008821">,</span>&nbsp;<span class="num" id="8008823">1</span><span class="op" id="8008824">,</span>&nbsp;<span class="num" id="8008826">1</span><span class="op" id="8008827">,</span>&nbsp;<span class="num" id="8008829">2</span><span class="op" id="8008830">)</span><span class="op" id="8008831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008834">}</span><span class="op" id="8008835">}</span><span class="op" id="8008836">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008839">{</span><span class="string" id="8008840">&#34;ullrhost&#34;</span><span class="op" id="8008850">,</span>&nbsp;<span class="op" id="8008852">[</span><span class="op" id="8008853">]</span><span class="ident" id="8008854">IP</span><span class="op" id="8008856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008860">IPv4</span><span class="op" id="8008864">(</span><span class="num" id="8008865">127</span><span class="op" id="8008868">,</span>&nbsp;<span class="num" id="8008870">1</span><span class="op" id="8008871">,</span>&nbsp;<span class="num" id="8008873">1</span><span class="op" id="8008874">,</span>&nbsp;<span class="num" id="8008876">2</span><span class="op" id="8008877">)</span><span class="op" id="8008878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8008881">}</span><span class="op" id="8008882">}</span><span class="op" id="8008883">,</span><br>
<span class="lineno"></span><span class="op" id="8008885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8008888">func</span>&nbsp;<span class="ident" id="8008893">TestLookupStaticHost</span><span class="op" id="8008913">(</span><span class="ident" id="8008914">t</span>&nbsp;<span class="op" id="8008916">*</span><span class="ident" id="8008917">testing</span><span class="op" id="8008924">.</span><span class="ident" id="8008925">T</span><span class="op" id="8008926">)</span>&nbsp;<span class="op" id="8008928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008931">p</span>&nbsp;<span class="op" id="8008933">:=</span>&nbsp;<span class="ident" id="8008936">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8008947">hostsPath</span>&nbsp;<span class="op" id="8008957">=</span>&nbsp;<span class="string" id="8008959">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8008977">for</span>&nbsp;<span class="ident" id="8008981">i</span>&nbsp;<span class="op" id="8008983">:=</span>&nbsp;<span class="num" id="8008986">0</span><span class="op" id="8008987">;</span>&nbsp;<span class="ident" id="8008989">i</span>&nbsp;<span class="op" id="8008991">&lt;</span>&nbsp;<span class="builtinfunc" id="8008993">len</span><span class="op" id="8008996">(</span><span class="ident" id="8008997">hosttests</span><span class="op" id="8009006">)</span><span class="op" id="8009007">;</span>&nbsp;<span class="ident" id="8009009">i</span><span class="op" id="8009010">++</span>&nbsp;<span class="op" id="8009013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009017">tt</span>&nbsp;<span class="op" id="8009020">:=</span>&nbsp;<span class="ident" id="8009023">hosttests</span><span class="op" id="8009032">[</span><span class="ident" id="8009033">i</span><span class="op" id="8009034">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009038">ips</span>&nbsp;<span class="op" id="8009042">:=</span>&nbsp;<span class="ident" id="8009045">lookupStaticHost</span><span class="op" id="8009061">(</span><span class="ident" id="8009062">tt</span><span class="op" id="8009064">.</span><span class="ident" id="8009065">host</span><span class="op" id="8009069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8009073">if</span>&nbsp;<span class="builtinfunc" id="8009076">len</span><span class="op" id="8009079">(</span><span class="ident" id="8009080">ips</span><span class="op" id="8009083">)</span>&nbsp;<span class="op" id="8009085">!=</span>&nbsp;<span class="builtinfunc" id="8009088">len</span><span class="op" id="8009091">(</span><span class="ident" id="8009092">tt</span><span class="op" id="8009094">.</span><span class="ident" id="8009095">ips</span><span class="op" id="8009098">)</span>&nbsp;<span class="op" id="8009100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009105">t</span><span class="op" id="8009106">.</span><span class="ident" id="8009107">Errorf</span><span class="op" id="8009113">(</span><span class="string" id="8009114">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8009140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8009146">len</span><span class="op" id="8009149">(</span><span class="ident" id="8009150">ips</span><span class="op" id="8009153">)</span><span class="op" id="8009154">,</span>&nbsp;<span class="builtinfunc" id="8009156">len</span><span class="op" id="8009159">(</span><span class="ident" id="8009160">tt</span><span class="op" id="8009162">.</span><span class="ident" id="8009163">ips</span><span class="op" id="8009166">)</span><span class="op" id="8009167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8009172">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8009183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8009187">for</span>&nbsp;<span class="ident" id="8009191">k</span><span class="op" id="8009192">,</span>&nbsp;<span class="ident" id="8009194">v</span>&nbsp;<span class="op" id="8009196">:=</span>&nbsp;<span class="keyword" id="8009199">range</span>&nbsp;<span class="ident" id="8009205">ips</span>&nbsp;<span class="op" id="8009209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8009214">if</span>&nbsp;<span class="ident" id="8009217">tt</span><span class="op" id="8009219">.</span><span class="ident" id="8009220">ips</span><span class="op" id="8009223">[</span><span class="ident" id="8009224">k</span><span class="op" id="8009225">]</span><span class="op" id="8009226">.</span><span class="ident" id="8009227">String</span><span class="op" id="8009233">(</span><span class="op" id="8009234">)</span>&nbsp;<span class="op" id="8009236">!=</span>&nbsp;<span class="ident" id="8009239">v</span>&nbsp;<span class="op" id="8009241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009247">t</span><span class="op" id="8009248">.</span><span class="ident" id="8009249">Errorf</span><span class="op" id="8009255">(</span><span class="string" id="8009256">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8009292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009299">tt</span><span class="op" id="8009301">.</span><span class="ident" id="8009302">host</span><span class="op" id="8009306">,</span>&nbsp;<span class="ident" id="8009308">v</span><span class="op" id="8009309">,</span>&nbsp;<span class="ident" id="8009311">tt</span><span class="op" id="8009313">.</span><span class="ident" id="8009314">ips</span><span class="op" id="8009317">[</span><span class="ident" id="8009318">k</span><span class="op" id="8009319">]</span><span class="op" id="8009320">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8009325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8009329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8009332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009335">hostsPath</span>&nbsp;<span class="op" id="8009345">=</span>&nbsp;<span class="ident" id="8009347">p</span><br>
<span class="lineno"></span><span class="op" id="8009349">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="8009352">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="8009406">func</span>&nbsp;<span class="ident" id="8009411">TestSingleLineHostsFile</span><span class="op" id="8009434">(</span><span class="ident" id="8009435">t</span>&nbsp;<span class="op" id="8009437">*</span><span class="ident" id="8009438">testing</span><span class="op" id="8009445">.</span><span class="ident" id="8009446">T</span><span class="op" id="8009447">)</span>&nbsp;<span class="op" id="8009449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009452">p</span>&nbsp;<span class="op" id="8009454">:=</span>&nbsp;<span class="ident" id="8009457">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009468">hostsPath</span>&nbsp;<span class="op" id="8009478">=</span>&nbsp;<span class="string" id="8009480">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009510">ips</span>&nbsp;<span class="op" id="8009514">:=</span>&nbsp;<span class="ident" id="8009517">lookupStaticHost</span><span class="op" id="8009533">(</span><span class="string" id="8009534">&#34;odin&#34;</span><span class="op" id="8009540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8009543">if</span>&nbsp;<span class="builtinfunc" id="8009546">len</span><span class="op" id="8009549">(</span><span class="ident" id="8009550">ips</span><span class="op" id="8009553">)</span>&nbsp;<span class="op" id="8009555">!=</span>&nbsp;<span class="num" id="8009558">1</span>&nbsp;<span class="op" id="8009560">||</span>&nbsp;<span class="ident" id="8009563">ips</span><span class="op" id="8009566">[</span><span class="num" id="8009567">0</span><span class="op" id="8009568">]</span>&nbsp;<span class="op" id="8009570">!=</span>&nbsp;<span class="string" id="8009573">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="8009585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009589">t</span><span class="op" id="8009590">.</span><span class="ident" id="8009591">Errorf</span><span class="op" id="8009597">(</span><span class="string" id="8009598">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8009630">,</span>&nbsp;<span class="ident" id="8009632">ips</span><span class="op" id="8009635">,</span>&nbsp;<span class="op" id="8009637">[</span><span class="op" id="8009638">]</span><span class="builtintype" id="8009639">string</span><span class="op" id="8009645">{</span><span class="string" id="8009646">&#34;127.0.0.2&#34;</span><span class="op" id="8009657">}</span><span class="op" id="8009658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8009661">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009665">hostsPath</span>&nbsp;<span class="op" id="8009675">=</span>&nbsp;<span class="ident" id="8009677">p</span><br>
<span class="lineno"></span><span class="op" id="8009679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8009682">func</span>&nbsp;<span class="ident" id="8009687">TestLookupHost</span><span class="op" id="8009701">(</span><span class="ident" id="8009702">t</span>&nbsp;<span class="op" id="8009704">*</span><span class="ident" id="8009705">testing</span><span class="op" id="8009712">.</span><span class="ident" id="8009713">T</span><span class="op" id="8009714">)</span>&nbsp;<span class="op" id="8009716">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8009719">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8009778">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8009836">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8009889">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009913">addrs</span><span class="op" id="8009918">,</span>&nbsp;<span class="ident" id="8009920">_</span>&nbsp;<span class="op" id="8009922">:=</span>&nbsp;<span class="ident" id="8009925">LookupHost</span><span class="op" id="8009935">(</span><span class="string" id="8009936">&#34;localhost&#34;</span><span class="op" id="8009947">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8009950">sort</span><span class="op" id="8009954">.</span><span class="ident" id="8009955">Strings</span><span class="op" id="8009962">(</span><span class="ident" id="8009963">addrs</span><span class="op" id="8009968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8009971">for</span>&nbsp;<span class="ident" id="8009975">i</span>&nbsp;<span class="op" id="8009977">:=</span>&nbsp;<span class="num" id="8009980">0</span><span class="op" id="8009981">;</span>&nbsp;<span class="ident" id="8009983">i</span><span class="op" id="8009984">+</span><span class="num" id="8009985">1</span>&nbsp;<span class="op" id="8009987">&lt;</span>&nbsp;<span class="builtinfunc" id="8009989">len</span><span class="op" id="8009992">(</span><span class="ident" id="8009993">addrs</span><span class="op" id="8009998">)</span><span class="op" id="8009999">;</span>&nbsp;<span class="ident" id="8010001">i</span><span class="op" id="8010002">++</span>&nbsp;<span class="op" id="8010005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8010009">if</span>&nbsp;<span class="ident" id="8010012">addrs</span><span class="op" id="8010017">[</span><span class="ident" id="8010018">i</span><span class="op" id="8010019">]</span>&nbsp;<span class="op" id="8010021">==</span>&nbsp;<span class="ident" id="8010024">addrs</span><span class="op" id="8010029">[</span><span class="ident" id="8010030">i</span><span class="op" id="8010031">+</span><span class="num" id="8010032">1</span><span class="op" id="8010033">]</span>&nbsp;<span class="op" id="8010035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010040">t</span><span class="op" id="8010041">.</span><span class="ident" id="8010042">Fatalf</span><span class="op" id="8010048">(</span><span class="string" id="8010049">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="8010106">,</span>&nbsp;<span class="ident" id="8010108">addrs</span><span class="op" id="8010113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8010117">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8010120">}</span><br>
<span class="lineno"></span><span class="op" id="8010122">}</span>
</div>
</body>
</html>
