<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html" class="current">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3241370">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3241425">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3241479">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3241530">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3241603">package</span>&nbsp;<span class="ident" id="3241611">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3241616">import</span>&nbsp;<span class="op" id="3241623">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3241626">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3241634">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3241645">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3241652">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3241655">//&nbsp;runtimeNano&nbsp;returns&nbsp;the&nbsp;current&nbsp;value&nbsp;of&nbsp;the&nbsp;runtime&nbsp;clock&nbsp;in&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="3241733">func</span>&nbsp;<span class="ident" id="3241738">runtimeNano</span><span class="op" id="3241749">(</span><span class="op" id="3241750">)</span>&nbsp;<span class="ident" id="3241752">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3241759">func</span>&nbsp;<span class="ident" id="3241764">runtime_pollServerInit</span><span class="op" id="3241786">(</span><span class="op" id="3241787">)</span><br>
<span class="lineno"></span><span class="keyword" id="3241789">func</span>&nbsp;<span class="ident" id="3241794">runtime_pollOpen</span><span class="op" id="3241810">(</span><span class="ident" id="3241811">fd</span>&nbsp;<span class="builtintype" id="3241814">uintptr</span><span class="op" id="3241821">)</span>&nbsp;<span class="op" id="3241823">(</span><span class="builtintype" id="3241824">uintptr</span><span class="op" id="3241831">,</span>&nbsp;<span class="builtintype" id="3241833">int</span><span class="op" id="3241836">)</span><br>
<span class="lineno">20</span><span class="keyword" id="3241838">func</span>&nbsp;<span class="ident" id="3241843">runtime_pollClose</span><span class="op" id="3241860">(</span><span class="ident" id="3241861">ctx</span>&nbsp;<span class="builtintype" id="3241865">uintptr</span><span class="op" id="3241872">)</span><br>
<span class="lineno"></span><span class="keyword" id="3241874">func</span>&nbsp;<span class="ident" id="3241879">runtime_pollWait</span><span class="op" id="3241895">(</span><span class="ident" id="3241896">ctx</span>&nbsp;<span class="builtintype" id="3241900">uintptr</span><span class="op" id="3241907">,</span>&nbsp;<span class="ident" id="3241909">mode</span>&nbsp;<span class="builtintype" id="3241914">int</span><span class="op" id="3241917">)</span>&nbsp;<span class="builtintype" id="3241919">int</span><br>
<span class="lineno"></span><span class="keyword" id="3241923">func</span>&nbsp;<span class="ident" id="3241928">runtime_pollWaitCanceled</span><span class="op" id="3241952">(</span><span class="ident" id="3241953">ctx</span>&nbsp;<span class="builtintype" id="3241957">uintptr</span><span class="op" id="3241964">,</span>&nbsp;<span class="ident" id="3241966">mode</span>&nbsp;<span class="builtintype" id="3241971">int</span><span class="op" id="3241974">)</span>&nbsp;<span class="builtintype" id="3241976">int</span><br>
<span class="lineno"></span><span class="keyword" id="3241980">func</span>&nbsp;<span class="ident" id="3241985">runtime_pollReset</span><span class="op" id="3242002">(</span><span class="ident" id="3242003">ctx</span>&nbsp;<span class="builtintype" id="3242007">uintptr</span><span class="op" id="3242014">,</span>&nbsp;<span class="ident" id="3242016">mode</span>&nbsp;<span class="builtintype" id="3242021">int</span><span class="op" id="3242024">)</span>&nbsp;<span class="builtintype" id="3242026">int</span><br>
<span class="lineno"></span><span class="keyword" id="3242030">func</span>&nbsp;<span class="ident" id="3242035">runtime_pollSetDeadline</span><span class="op" id="3242058">(</span><span class="ident" id="3242059">ctx</span>&nbsp;<span class="builtintype" id="3242063">uintptr</span><span class="op" id="3242070">,</span>&nbsp;<span class="ident" id="3242072">d</span>&nbsp;<span class="ident" id="3242074">int64</span><span class="op" id="3242079">,</span>&nbsp;<span class="ident" id="3242081">mode</span>&nbsp;<span class="builtintype" id="3242086">int</span><span class="op" id="3242089">)</span><br>
<span class="lineno">25</span><span class="keyword" id="3242091">func</span>&nbsp;<span class="ident" id="3242096">runtime_pollUnblock</span><span class="op" id="3242115">(</span><span class="ident" id="3242116">ctx</span>&nbsp;<span class="builtintype" id="3242120">uintptr</span><span class="op" id="3242127">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3242130">type</span>&nbsp;<span class="ident" id="3242135">pollDesc</span>&nbsp;<span class="keyword" id="3242144">struct</span>&nbsp;<span class="op" id="3242151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242154">runtimeCtx</span>&nbsp;<span class="builtintype" id="3242165">uintptr</span><br>
<span class="lineno"></span><span class="op" id="3242173">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="3242176">var</span>&nbsp;<span class="ident" id="3242180">serverInit</span>&nbsp;<span class="ident" id="3242191">sync</span><span class="op" id="3242195">.</span><span class="ident" id="3242196">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3242202">func</span>&nbsp;<span class="op" id="3242207">(</span><span class="ident" id="3242208">pd</span>&nbsp;<span class="op" id="3242211">*</span><span class="ident" id="3242212">pollDesc</span><span class="op" id="3242220">)</span>&nbsp;<span class="ident" id="3242222">Init</span><span class="op" id="3242226">(</span><span class="ident" id="3242227">fd</span>&nbsp;<span class="op" id="3242230">*</span><span class="ident" id="3242231">netFD</span><span class="op" id="3242236">)</span>&nbsp;<span class="builtintype" id="3242238">error</span>&nbsp;<span class="op" id="3242244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242247">serverInit</span><span class="op" id="3242257">.</span><span class="ident" id="3242258">Do</span><span class="op" id="3242260">(</span><span class="ident" id="3242261">runtime_pollServerInit</span><span class="op" id="3242283">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242286">ctx</span><span class="op" id="3242289">,</span>&nbsp;<span class="ident" id="3242291">errno</span>&nbsp;<span class="op" id="3242297">:=</span>&nbsp;<span class="ident" id="3242300">runtime_pollOpen</span><span class="op" id="3242316">(</span><span class="builtintype" id="3242317">uintptr</span><span class="op" id="3242324">(</span><span class="ident" id="3242325">fd</span><span class="op" id="3242327">.</span><span class="ident" id="3242328">sysfd</span><span class="op" id="3242333">)</span><span class="op" id="3242334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242337">if</span>&nbsp;<span class="ident" id="3242340">errno</span>&nbsp;<span class="op" id="3242346">!=</span>&nbsp;<span class="num" id="3242349">0</span>&nbsp;<span class="op" id="3242351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242355">return</span>&nbsp;<span class="ident" id="3242362">syscall</span><span class="op" id="3242369">.</span><span class="ident" id="3242370">Errno</span><span class="op" id="3242375">(</span><span class="ident" id="3242376">errno</span><span class="op" id="3242381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3242384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242387">pd</span><span class="op" id="3242389">.</span><span class="ident" id="3242390">runtimeCtx</span>&nbsp;<span class="op" id="3242401">=</span>&nbsp;<span class="ident" id="3242403">ctx</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242408">return</span>&nbsp;<span class="builtintype" id="3242415">nil</span><br>
<span class="lineno"></span><span class="op" id="3242419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3242422">func</span>&nbsp;<span class="op" id="3242427">(</span><span class="ident" id="3242428">pd</span>&nbsp;<span class="op" id="3242431">*</span><span class="ident" id="3242432">pollDesc</span><span class="op" id="3242440">)</span>&nbsp;<span class="ident" id="3242442">Close</span><span class="op" id="3242447">(</span><span class="op" id="3242448">)</span>&nbsp;<span class="op" id="3242450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242453">if</span>&nbsp;<span class="ident" id="3242456">pd</span><span class="op" id="3242458">.</span><span class="ident" id="3242459">runtimeCtx</span>&nbsp;<span class="op" id="3242470">==</span>&nbsp;<span class="num" id="3242473">0</span>&nbsp;<span class="op" id="3242475">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3242487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242490">runtime_pollClose</span><span class="op" id="3242507">(</span><span class="ident" id="3242508">pd</span><span class="op" id="3242510">.</span><span class="ident" id="3242511">runtimeCtx</span><span class="op" id="3242521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242524">pd</span><span class="op" id="3242526">.</span><span class="ident" id="3242527">runtimeCtx</span>&nbsp;<span class="op" id="3242538">=</span>&nbsp;<span class="num" id="3242540">0</span><br>
<span class="lineno"></span><span class="op" id="3242542">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3242545">func</span>&nbsp;<span class="op" id="3242550">(</span><span class="ident" id="3242551">pd</span>&nbsp;<span class="op" id="3242554">*</span><span class="ident" id="3242555">pollDesc</span><span class="op" id="3242563">)</span>&nbsp;<span class="ident" id="3242565">Lock</span><span class="op" id="3242569">(</span><span class="op" id="3242570">)</span>&nbsp;<span class="op" id="3242572">{</span><br>
<span class="lineno"></span><span class="op" id="3242574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3242577">func</span>&nbsp;<span class="op" id="3242582">(</span><span class="ident" id="3242583">pd</span>&nbsp;<span class="op" id="3242586">*</span><span class="ident" id="3242587">pollDesc</span><span class="op" id="3242595">)</span>&nbsp;<span class="ident" id="3242597">Unlock</span><span class="op" id="3242603">(</span><span class="op" id="3242604">)</span>&nbsp;<span class="op" id="3242606">{</span><br>
<span class="lineno">55</span><span class="op" id="3242608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3242611">func</span>&nbsp;<span class="op" id="3242616">(</span><span class="ident" id="3242617">pd</span>&nbsp;<span class="op" id="3242620">*</span><span class="ident" id="3242621">pollDesc</span><span class="op" id="3242629">)</span>&nbsp;<span class="ident" id="3242631">Wakeup</span><span class="op" id="3242637">(</span><span class="op" id="3242638">)</span>&nbsp;<span class="op" id="3242640">{</span><br>
<span class="lineno"></span><span class="op" id="3242642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3242645">//&nbsp;Evict&nbsp;evicts&nbsp;fd&nbsp;from&nbsp;the&nbsp;pending&nbsp;list,&nbsp;unblocking&nbsp;any&nbsp;I/O&nbsp;running&nbsp;on&nbsp;fd.</span><br>
<span class="lineno"></span><span class="comment" id="3242721">//&nbsp;Return&nbsp;value&nbsp;is&nbsp;whether&nbsp;the&nbsp;pollServer&nbsp;should&nbsp;be&nbsp;woken&nbsp;up.</span><br>
<span class="lineno"></span><span class="keyword" id="3242783">func</span>&nbsp;<span class="op" id="3242788">(</span><span class="ident" id="3242789">pd</span>&nbsp;<span class="op" id="3242792">*</span><span class="ident" id="3242793">pollDesc</span><span class="op" id="3242801">)</span>&nbsp;<span class="ident" id="3242803">Evict</span><span class="op" id="3242808">(</span><span class="op" id="3242809">)</span>&nbsp;<span class="builtintype" id="3242811">bool</span>&nbsp;<span class="op" id="3242816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242819">if</span>&nbsp;<span class="ident" id="3242822">pd</span><span class="op" id="3242824">.</span><span class="ident" id="3242825">runtimeCtx</span>&nbsp;<span class="op" id="3242836">==</span>&nbsp;<span class="num" id="3242839">0</span>&nbsp;<span class="op" id="3242841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242845">return</span>&nbsp;<span class="builtintype" id="3242852">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3242859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242862">runtime_pollUnblock</span><span class="op" id="3242881">(</span><span class="ident" id="3242882">pd</span><span class="op" id="3242884">.</span><span class="ident" id="3242885">runtimeCtx</span><span class="op" id="3242895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242898">return</span>&nbsp;<span class="builtintype" id="3242905">false</span><br>
<span class="lineno"></span><span class="op" id="3242911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3242914">func</span>&nbsp;<span class="op" id="3242919">(</span><span class="ident" id="3242920">pd</span>&nbsp;<span class="op" id="3242923">*</span><span class="ident" id="3242924">pollDesc</span><span class="op" id="3242932">)</span>&nbsp;<span class="ident" id="3242934">Prepare</span><span class="op" id="3242941">(</span><span class="ident" id="3242942">mode</span>&nbsp;<span class="builtintype" id="3242947">int</span><span class="op" id="3242950">)</span>&nbsp;<span class="builtintype" id="3242952">error</span>&nbsp;<span class="op" id="3242958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242961">res</span>&nbsp;<span class="op" id="3242965">:=</span>&nbsp;<span class="ident" id="3242968">runtime_pollReset</span><span class="op" id="3242985">(</span><span class="ident" id="3242986">pd</span><span class="op" id="3242988">.</span><span class="ident" id="3242989">runtimeCtx</span><span class="op" id="3242999">,</span>&nbsp;<span class="ident" id="3243001">mode</span><span class="op" id="3243005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243008">return</span>&nbsp;<span class="ident" id="3243015">convertErr</span><span class="op" id="3243025">(</span><span class="ident" id="3243026">res</span><span class="op" id="3243029">)</span><br>
<span class="lineno"></span><span class="op" id="3243031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3243034">func</span>&nbsp;<span class="op" id="3243039">(</span><span class="ident" id="3243040">pd</span>&nbsp;<span class="op" id="3243043">*</span><span class="ident" id="3243044">pollDesc</span><span class="op" id="3243052">)</span>&nbsp;<span class="ident" id="3243054">PrepareRead</span><span class="op" id="3243065">(</span><span class="op" id="3243066">)</span>&nbsp;<span class="builtintype" id="3243068">error</span>&nbsp;<span class="op" id="3243074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243077">return</span>&nbsp;<span class="ident" id="3243084">pd</span><span class="op" id="3243086">.</span><span class="ident" id="3243087">Prepare</span><span class="op" id="3243094">(</span><span class="string" id="3243095">&#39;r&#39;</span><span class="op" id="3243098">)</span><br>
<span class="lineno"></span><span class="op" id="3243100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243103">func</span>&nbsp;<span class="op" id="3243108">(</span><span class="ident" id="3243109">pd</span>&nbsp;<span class="op" id="3243112">*</span><span class="ident" id="3243113">pollDesc</span><span class="op" id="3243121">)</span>&nbsp;<span class="ident" id="3243123">PrepareWrite</span><span class="op" id="3243135">(</span><span class="op" id="3243136">)</span>&nbsp;<span class="builtintype" id="3243138">error</span>&nbsp;<span class="op" id="3243144">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243147">return</span>&nbsp;<span class="ident" id="3243154">pd</span><span class="op" id="3243156">.</span><span class="ident" id="3243157">Prepare</span><span class="op" id="3243164">(</span><span class="string" id="3243165">&#39;w&#39;</span><span class="op" id="3243168">)</span><br>
<span class="lineno"></span><span class="op" id="3243170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243173">func</span>&nbsp;<span class="op" id="3243178">(</span><span class="ident" id="3243179">pd</span>&nbsp;<span class="op" id="3243182">*</span><span class="ident" id="3243183">pollDesc</span><span class="op" id="3243191">)</span>&nbsp;<span class="ident" id="3243193">Wait</span><span class="op" id="3243197">(</span><span class="ident" id="3243198">mode</span>&nbsp;<span class="builtintype" id="3243203">int</span><span class="op" id="3243206">)</span>&nbsp;<span class="builtintype" id="3243208">error</span>&nbsp;<span class="op" id="3243214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243217">res</span>&nbsp;<span class="op" id="3243221">:=</span>&nbsp;<span class="ident" id="3243224">runtime_pollWait</span><span class="op" id="3243240">(</span><span class="ident" id="3243241">pd</span><span class="op" id="3243243">.</span><span class="ident" id="3243244">runtimeCtx</span><span class="op" id="3243254">,</span>&nbsp;<span class="ident" id="3243256">mode</span><span class="op" id="3243260">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243263">return</span>&nbsp;<span class="ident" id="3243270">convertErr</span><span class="op" id="3243280">(</span><span class="ident" id="3243281">res</span><span class="op" id="3243284">)</span><br>
<span class="lineno"></span><span class="op" id="3243286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243289">func</span>&nbsp;<span class="op" id="3243294">(</span><span class="ident" id="3243295">pd</span>&nbsp;<span class="op" id="3243298">*</span><span class="ident" id="3243299">pollDesc</span><span class="op" id="3243307">)</span>&nbsp;<span class="ident" id="3243309">WaitRead</span><span class="op" id="3243317">(</span><span class="op" id="3243318">)</span>&nbsp;<span class="builtintype" id="3243320">error</span>&nbsp;<span class="op" id="3243326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243329">return</span>&nbsp;<span class="ident" id="3243336">pd</span><span class="op" id="3243338">.</span><span class="ident" id="3243339">Wait</span><span class="op" id="3243343">(</span><span class="string" id="3243344">&#39;r&#39;</span><span class="op" id="3243347">)</span><br>
<span class="lineno">90</span><span class="op" id="3243349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243352">func</span>&nbsp;<span class="op" id="3243357">(</span><span class="ident" id="3243358">pd</span>&nbsp;<span class="op" id="3243361">*</span><span class="ident" id="3243362">pollDesc</span><span class="op" id="3243370">)</span>&nbsp;<span class="ident" id="3243372">WaitWrite</span><span class="op" id="3243381">(</span><span class="op" id="3243382">)</span>&nbsp;<span class="builtintype" id="3243384">error</span>&nbsp;<span class="op" id="3243390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243393">return</span>&nbsp;<span class="ident" id="3243400">pd</span><span class="op" id="3243402">.</span><span class="ident" id="3243403">Wait</span><span class="op" id="3243407">(</span><span class="string" id="3243408">&#39;w&#39;</span><span class="op" id="3243411">)</span><br>
<span class="lineno"></span><span class="op" id="3243413">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="3243416">func</span>&nbsp;<span class="op" id="3243421">(</span><span class="ident" id="3243422">pd</span>&nbsp;<span class="op" id="3243425">*</span><span class="ident" id="3243426">pollDesc</span><span class="op" id="3243434">)</span>&nbsp;<span class="ident" id="3243436">WaitCanceled</span><span class="op" id="3243448">(</span><span class="ident" id="3243449">mode</span>&nbsp;<span class="builtintype" id="3243454">int</span><span class="op" id="3243457">)</span>&nbsp;<span class="op" id="3243459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243462">runtime_pollWaitCanceled</span><span class="op" id="3243486">(</span><span class="ident" id="3243487">pd</span><span class="op" id="3243489">.</span><span class="ident" id="3243490">runtimeCtx</span><span class="op" id="3243500">,</span>&nbsp;<span class="ident" id="3243502">mode</span><span class="op" id="3243506">)</span><br>
<span class="lineno"></span><span class="op" id="3243508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="3243511">func</span>&nbsp;<span class="op" id="3243516">(</span><span class="ident" id="3243517">pd</span>&nbsp;<span class="op" id="3243520">*</span><span class="ident" id="3243521">pollDesc</span><span class="op" id="3243529">)</span>&nbsp;<span class="ident" id="3243531">WaitCanceledRead</span><span class="op" id="3243547">(</span><span class="op" id="3243548">)</span>&nbsp;<span class="op" id="3243550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243553">pd</span><span class="op" id="3243555">.</span><span class="ident" id="3243556">WaitCanceled</span><span class="op" id="3243568">(</span><span class="string" id="3243569">&#39;r&#39;</span><span class="op" id="3243572">)</span><br>
<span class="lineno"></span><span class="op" id="3243574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243577">func</span>&nbsp;<span class="op" id="3243582">(</span><span class="ident" id="3243583">pd</span>&nbsp;<span class="op" id="3243586">*</span><span class="ident" id="3243587">pollDesc</span><span class="op" id="3243595">)</span>&nbsp;<span class="ident" id="3243597">WaitCanceledWrite</span><span class="op" id="3243614">(</span><span class="op" id="3243615">)</span>&nbsp;<span class="op" id="3243617">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243620">pd</span><span class="op" id="3243622">.</span><span class="ident" id="3243623">WaitCanceled</span><span class="op" id="3243635">(</span><span class="string" id="3243636">&#39;w&#39;</span><span class="op" id="3243639">)</span><br>
<span class="lineno"></span><span class="op" id="3243641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243644">func</span>&nbsp;<span class="ident" id="3243649">convertErr</span><span class="op" id="3243659">(</span><span class="ident" id="3243660">res</span>&nbsp;<span class="builtintype" id="3243664">int</span><span class="op" id="3243667">)</span>&nbsp;<span class="builtintype" id="3243669">error</span>&nbsp;<span class="op" id="3243675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243678">switch</span>&nbsp;<span class="ident" id="3243685">res</span>&nbsp;<span class="op" id="3243689">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243692">case</span>&nbsp;<span class="num" id="3243697">0</span><span class="op" id="3243698">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243702">return</span>&nbsp;<span class="builtintype" id="3243709">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243714">case</span>&nbsp;<span class="num" id="3243719">1</span><span class="op" id="3243720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243724">return</span>&nbsp;<span class="ident" id="3243731">errClosing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243743">case</span>&nbsp;<span class="num" id="3243748">2</span><span class="op" id="3243749">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243753">return</span>&nbsp;<span class="ident" id="3243760">errTimeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3243775">println</span><span class="op" id="3243782">(</span><span class="string" id="3243783">&#34;unreachable:&nbsp;&#34;</span><span class="op" id="3243798">,</span>&nbsp;<span class="ident" id="3243800">res</span><span class="op" id="3243803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3243806">panic</span><span class="op" id="3243811">(</span><span class="string" id="3243812">&#34;unreachable&#34;</span><span class="op" id="3243825">)</span><br>
<span class="lineno"></span><span class="op" id="3243827">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="3243830">func</span>&nbsp;<span class="op" id="3243835">(</span><span class="ident" id="3243836">fd</span>&nbsp;<span class="op" id="3243839">*</span><span class="ident" id="3243840">netFD</span><span class="op" id="3243845">)</span>&nbsp;<span class="ident" id="3243847">setDeadline</span><span class="op" id="3243858">(</span><span class="ident" id="3243859">t</span>&nbsp;<span class="ident" id="3243861">time</span><span class="op" id="3243865">.</span><span class="ident" id="3243866">Time</span><span class="op" id="3243870">)</span>&nbsp;<span class="builtintype" id="3243872">error</span>&nbsp;<span class="op" id="3243878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243881">return</span>&nbsp;<span class="ident" id="3243888">setDeadlineImpl</span><span class="op" id="3243903">(</span><span class="ident" id="3243904">fd</span><span class="op" id="3243906">,</span>&nbsp;<span class="ident" id="3243908">t</span><span class="op" id="3243909">,</span>&nbsp;<span class="string" id="3243911">&#39;r&#39;</span><span class="op" id="3243914">+</span><span class="string" id="3243915">&#39;w&#39;</span><span class="op" id="3243918">)</span><br>
<span class="lineno"></span><span class="op" id="3243920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="3243923">func</span>&nbsp;<span class="op" id="3243928">(</span><span class="ident" id="3243929">fd</span>&nbsp;<span class="op" id="3243932">*</span><span class="ident" id="3243933">netFD</span><span class="op" id="3243938">)</span>&nbsp;<span class="ident" id="3243940">setReadDeadline</span><span class="op" id="3243955">(</span><span class="ident" id="3243956">t</span>&nbsp;<span class="ident" id="3243958">time</span><span class="op" id="3243962">.</span><span class="ident" id="3243963">Time</span><span class="op" id="3243967">)</span>&nbsp;<span class="builtintype" id="3243969">error</span>&nbsp;<span class="op" id="3243975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243978">return</span>&nbsp;<span class="ident" id="3243985">setDeadlineImpl</span><span class="op" id="3244000">(</span><span class="ident" id="3244001">fd</span><span class="op" id="3244003">,</span>&nbsp;<span class="ident" id="3244005">t</span><span class="op" id="3244006">,</span>&nbsp;<span class="string" id="3244008">&#39;r&#39;</span><span class="op" id="3244011">)</span><br>
<span class="lineno"></span><span class="op" id="3244013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3244016">func</span>&nbsp;<span class="op" id="3244021">(</span><span class="ident" id="3244022">fd</span>&nbsp;<span class="op" id="3244025">*</span><span class="ident" id="3244026">netFD</span><span class="op" id="3244031">)</span>&nbsp;<span class="ident" id="3244033">setWriteDeadline</span><span class="op" id="3244049">(</span><span class="ident" id="3244050">t</span>&nbsp;<span class="ident" id="3244052">time</span><span class="op" id="3244056">.</span><span class="ident" id="3244057">Time</span><span class="op" id="3244061">)</span>&nbsp;<span class="builtintype" id="3244063">error</span>&nbsp;<span class="op" id="3244069">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244072">return</span>&nbsp;<span class="ident" id="3244079">setDeadlineImpl</span><span class="op" id="3244094">(</span><span class="ident" id="3244095">fd</span><span class="op" id="3244097">,</span>&nbsp;<span class="ident" id="3244099">t</span><span class="op" id="3244100">,</span>&nbsp;<span class="string" id="3244102">&#39;w&#39;</span><span class="op" id="3244105">)</span><br>
<span class="lineno"></span><span class="op" id="3244107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3244110">func</span>&nbsp;<span class="ident" id="3244115">setDeadlineImpl</span><span class="op" id="3244130">(</span><span class="ident" id="3244131">fd</span>&nbsp;<span class="op" id="3244134">*</span><span class="ident" id="3244135">netFD</span><span class="op" id="3244140">,</span>&nbsp;<span class="ident" id="3244142">t</span>&nbsp;<span class="ident" id="3244144">time</span><span class="op" id="3244148">.</span><span class="ident" id="3244149">Time</span><span class="op" id="3244153">,</span>&nbsp;<span class="ident" id="3244155">mode</span>&nbsp;<span class="builtintype" id="3244160">int</span><span class="op" id="3244163">)</span>&nbsp;<span class="builtintype" id="3244165">error</span>&nbsp;<span class="op" id="3244171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244174">d</span>&nbsp;<span class="op" id="3244176">:=</span>&nbsp;<span class="ident" id="3244179">runtimeNano</span><span class="op" id="3244190">(</span><span class="op" id="3244191">)</span>&nbsp;<span class="op" id="3244193">+</span>&nbsp;<span class="ident" id="3244195">int64</span><span class="op" id="3244200">(</span><span class="ident" id="3244201">t</span><span class="op" id="3244202">.</span><span class="ident" id="3244203">Sub</span><span class="op" id="3244206">(</span><span class="ident" id="3244207">time</span><span class="op" id="3244211">.</span><span class="ident" id="3244212">Now</span><span class="op" id="3244215">(</span><span class="op" id="3244216">)</span><span class="op" id="3244217">)</span><span class="op" id="3244218">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244221">if</span>&nbsp;<span class="ident" id="3244224">t</span><span class="op" id="3244225">.</span><span class="ident" id="3244226">IsZero</span><span class="op" id="3244232">(</span><span class="op" id="3244233">)</span>&nbsp;<span class="op" id="3244235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244239">d</span>&nbsp;<span class="op" id="3244241">=</span>&nbsp;<span class="num" id="3244243">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244249">if</span>&nbsp;<span class="ident" id="3244252">err</span>&nbsp;<span class="op" id="3244256">:=</span>&nbsp;<span class="ident" id="3244259">fd</span><span class="op" id="3244261">.</span><span class="ident" id="3244262">incref</span><span class="op" id="3244268">(</span><span class="op" id="3244269">)</span><span class="op" id="3244270">;</span>&nbsp;<span class="ident" id="3244272">err</span>&nbsp;<span class="op" id="3244276">!=</span>&nbsp;<span class="builtintype" id="3244279">nil</span>&nbsp;<span class="op" id="3244283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244287">return</span>&nbsp;<span class="ident" id="3244294">err</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244302">runtime_pollSetDeadline</span><span class="op" id="3244325">(</span><span class="ident" id="3244326">fd</span><span class="op" id="3244328">.</span><span class="ident" id="3244329">pd</span><span class="op" id="3244331">.</span><span class="ident" id="3244332">runtimeCtx</span><span class="op" id="3244342">,</span>&nbsp;<span class="ident" id="3244344">d</span><span class="op" id="3244345">,</span>&nbsp;<span class="ident" id="3244347">mode</span><span class="op" id="3244351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244354">fd</span><span class="op" id="3244356">.</span><span class="ident" id="3244357">decref</span><span class="op" id="3244363">(</span><span class="op" id="3244364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244367">return</span>&nbsp;<span class="builtintype" id="3244374">nil</span><br>
<span class="lineno"></span><span class="op" id="3244378">}</span>
</div>
</body>
</html>
