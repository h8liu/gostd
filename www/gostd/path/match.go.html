<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3740458">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3740513">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3740567">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3740618">package</span>&nbsp;<span class="ident" id="3740626">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3740632">import</span>&nbsp;<span class="op" id="3740639">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3740642">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3740652">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3740663">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3740678">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3740681">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3740742">var</span>&nbsp;<span class="ident" id="3740746">ErrBadPattern</span>&nbsp;<span class="op" id="3740760">=</span>&nbsp;<span class="ident" id="3740762">errors</span><span class="op" id="3740768">.</span><span class="ident" id="3740769">New</span><span class="op" id="3740772">(</span><span class="string" id="3740773">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3740798">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3740801">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3740868">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3740894">//</span><br>
<span class="lineno"></span><span class="comment" id="3740897">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3740909">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3740922">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="3740931">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3740988">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3741039">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3741079">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3741131">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3741194">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3741230">//</span><br>
<span class="lineno"></span><span class="comment" id="3741233">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3741253">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3741311">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3741347">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3741401">//</span><br>
<span class="lineno"></span><span class="comment" id="3741404">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3741474">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3741541">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3741558">//</span><br>
<span class="lineno"></span><span class="keyword" id="3741561">func</span>&nbsp;<span class="ident" id="3741566">Match</span><span class="op" id="3741571">(</span><span class="ident" id="3741572">pattern</span><span class="op" id="3741579">,</span>&nbsp;<span class="ident" id="3741581">name</span>&nbsp;<span class="builtintype" id="3741586">string</span><span class="op" id="3741592">)</span>&nbsp;<span class="op" id="3741594">(</span><span class="ident" id="3741595">matched</span>&nbsp;<span class="builtintype" id="3741603">bool</span><span class="op" id="3741607">,</span>&nbsp;<span class="ident" id="3741609">err</span>&nbsp;<span class="builtintype" id="3741613">error</span><span class="op" id="3741618">)</span>&nbsp;<span class="op" id="3741620">{</span><br>
<span class="lineno"></span><span class="ident" id="3741622">Pattern</span><span class="op" id="3741629">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3741632">for</span>&nbsp;<span class="builtinfunc" id="3741636">len</span><span class="op" id="3741639">(</span><span class="ident" id="3741640">pattern</span><span class="op" id="3741647">)</span>&nbsp;<span class="op" id="3741649">&gt;</span>&nbsp;<span class="num" id="3741651">0</span>&nbsp;<span class="op" id="3741653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3741657">var</span>&nbsp;<span class="ident" id="3741661">star</span>&nbsp;<span class="builtintype" id="3741666">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3741673">var</span>&nbsp;<span class="ident" id="3741677">chunk</span>&nbsp;<span class="builtintype" id="3741683">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3741692">star</span><span class="op" id="3741696">,</span>&nbsp;<span class="ident" id="3741698">chunk</span><span class="op" id="3741703">,</span>&nbsp;<span class="ident" id="3741705">pattern</span>&nbsp;<span class="op" id="3741713">=</span>&nbsp;<span class="ident" id="3741715">scanChunk</span><span class="op" id="3741724">(</span><span class="ident" id="3741725">pattern</span><span class="op" id="3741732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3741736">if</span>&nbsp;<span class="ident" id="3741739">star</span>&nbsp;<span class="op" id="3741744">&amp;&amp;</span>&nbsp;<span class="ident" id="3741747">chunk</span>&nbsp;<span class="op" id="3741753">==</span>&nbsp;<span class="string" id="3741756">&#34;&#34;</span>&nbsp;<span class="op" id="3741759">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3741764">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3741823">return</span>&nbsp;<span class="ident" id="3741830">strings</span><span class="op" id="3741837">.</span><span class="ident" id="3741838">Index</span><span class="op" id="3741843">(</span><span class="ident" id="3741844">name</span><span class="op" id="3741848">,</span>&nbsp;<span class="string" id="3741850">&#34;/&#34;</span><span class="op" id="3741853">)</span>&nbsp;<span class="op" id="3741855">&lt;</span>&nbsp;<span class="num" id="3741857">0</span><span class="op" id="3741858">,</span>&nbsp;<span class="ident" id="3741860">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3741866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3741870">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3741911">t</span><span class="op" id="3741912">,</span>&nbsp;<span class="ident" id="3741914">ok</span><span class="op" id="3741916">,</span>&nbsp;<span class="ident" id="3741918">err</span>&nbsp;<span class="op" id="3741922">:=</span>&nbsp;<span class="ident" id="3741925">matchChunk</span><span class="op" id="3741935">(</span><span class="ident" id="3741936">chunk</span><span class="op" id="3741941">,</span>&nbsp;<span class="ident" id="3741943">name</span><span class="op" id="3741947">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3741951">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3742016">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3742086">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742106">if</span>&nbsp;<span class="ident" id="3742109">ok</span>&nbsp;<span class="op" id="3742112">&amp;&amp;</span>&nbsp;<span class="op" id="3742115">(</span><span class="builtinfunc" id="3742116">len</span><span class="op" id="3742119">(</span><span class="ident" id="3742120">t</span><span class="op" id="3742121">)</span>&nbsp;<span class="op" id="3742123">==</span>&nbsp;<span class="num" id="3742126">0</span>&nbsp;<span class="op" id="3742128">||</span>&nbsp;<span class="builtinfunc" id="3742131">len</span><span class="op" id="3742134">(</span><span class="ident" id="3742135">pattern</span><span class="op" id="3742142">)</span>&nbsp;<span class="op" id="3742144">&gt;</span>&nbsp;<span class="num" id="3742146">0</span><span class="op" id="3742147">)</span>&nbsp;<span class="op" id="3742149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3742154">name</span>&nbsp;<span class="op" id="3742159">=</span>&nbsp;<span class="ident" id="3742161">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742166">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742181">if</span>&nbsp;<span class="ident" id="3742184">err</span>&nbsp;<span class="op" id="3742188">!=</span>&nbsp;<span class="ident" id="3742191">nil</span>&nbsp;<span class="op" id="3742195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742200">return</span>&nbsp;<span class="builtintype" id="3742207">false</span><span class="op" id="3742212">,</span>&nbsp;<span class="ident" id="3742214">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742220">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742224">if</span>&nbsp;<span class="ident" id="3742227">star</span>&nbsp;<span class="op" id="3742232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3742237">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3742278">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742299">for</span>&nbsp;<span class="ident" id="3742303">i</span>&nbsp;<span class="op" id="3742305">:=</span>&nbsp;<span class="num" id="3742308">0</span><span class="op" id="3742309">;</span>&nbsp;<span class="ident" id="3742311">i</span>&nbsp;<span class="op" id="3742313">&lt;</span>&nbsp;<span class="builtinfunc" id="3742315">len</span><span class="op" id="3742318">(</span><span class="ident" id="3742319">name</span><span class="op" id="3742323">)</span>&nbsp;<span class="op" id="3742325">&amp;&amp;</span>&nbsp;<span class="ident" id="3742328">name</span><span class="op" id="3742332">[</span><span class="ident" id="3742333">i</span><span class="op" id="3742334">]</span>&nbsp;<span class="op" id="3742336">!=</span>&nbsp;<span class="string" id="3742339">&#39;/&#39;</span><span class="op" id="3742342">;</span>&nbsp;<span class="ident" id="3742344">i</span><span class="op" id="3742345">++</span>&nbsp;<span class="op" id="3742348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3742354">t</span><span class="op" id="3742355">,</span>&nbsp;<span class="ident" id="3742357">ok</span><span class="op" id="3742359">,</span>&nbsp;<span class="ident" id="3742361">err</span>&nbsp;<span class="op" id="3742365">:=</span>&nbsp;<span class="ident" id="3742368">matchChunk</span><span class="op" id="3742378">(</span><span class="ident" id="3742379">chunk</span><span class="op" id="3742384">,</span>&nbsp;<span class="ident" id="3742386">name</span><span class="op" id="3742390">[</span><span class="ident" id="3742391">i</span><span class="op" id="3742392">+</span><span class="num" id="3742393">1</span><span class="op" id="3742394">:</span><span class="op" id="3742395">]</span><span class="op" id="3742396">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742402">if</span>&nbsp;<span class="ident" id="3742405">ok</span>&nbsp;<span class="op" id="3742408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3742415">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742480">if</span>&nbsp;<span class="builtinfunc" id="3742483">len</span><span class="op" id="3742486">(</span><span class="ident" id="3742487">pattern</span><span class="op" id="3742494">)</span>&nbsp;<span class="op" id="3742496">==</span>&nbsp;<span class="num" id="3742499">0</span>&nbsp;<span class="op" id="3742501">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3742504">len</span><span class="op" id="3742507">(</span><span class="ident" id="3742508">t</span><span class="op" id="3742509">)</span>&nbsp;<span class="op" id="3742511">&gt;</span>&nbsp;<span class="num" id="3742513">0</span>&nbsp;<span class="op" id="3742515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742523">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742537">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3742544">name</span>&nbsp;<span class="op" id="3742549">=</span>&nbsp;<span class="ident" id="3742551">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742558">continue</span>&nbsp;<span class="ident" id="3742567">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742585">if</span>&nbsp;<span class="ident" id="3742588">err</span>&nbsp;<span class="op" id="3742592">!=</span>&nbsp;<span class="ident" id="3742595">nil</span>&nbsp;<span class="op" id="3742599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742606">return</span>&nbsp;<span class="builtintype" id="3742613">false</span><span class="op" id="3742618">,</span>&nbsp;<span class="ident" id="3742620">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742641">return</span>&nbsp;<span class="builtintype" id="3742648">false</span><span class="op" id="3742653">,</span>&nbsp;<span class="ident" id="3742655">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742660">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742663">return</span>&nbsp;<span class="builtinfunc" id="3742670">len</span><span class="op" id="3742673">(</span><span class="ident" id="3742674">name</span><span class="op" id="3742678">)</span>&nbsp;<span class="op" id="3742680">==</span>&nbsp;<span class="num" id="3742683">0</span><span class="op" id="3742684">,</span>&nbsp;<span class="ident" id="3742686">nil</span><br>
<span class="lineno"></span><span class="op" id="3742690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3742693">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3742767">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3742799">func</span>&nbsp;<span class="ident" id="3742804">scanChunk</span><span class="op" id="3742813">(</span><span class="ident" id="3742814">pattern</span>&nbsp;<span class="builtintype" id="3742822">string</span><span class="op" id="3742828">)</span>&nbsp;<span class="op" id="3742830">(</span><span class="ident" id="3742831">star</span>&nbsp;<span class="builtintype" id="3742836">bool</span><span class="op" id="3742840">,</span>&nbsp;<span class="ident" id="3742842">chunk</span><span class="op" id="3742847">,</span>&nbsp;<span class="ident" id="3742849">rest</span>&nbsp;<span class="builtintype" id="3742854">string</span><span class="op" id="3742860">)</span>&nbsp;<span class="op" id="3742862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742865">for</span>&nbsp;<span class="builtinfunc" id="3742869">len</span><span class="op" id="3742872">(</span><span class="ident" id="3742873">pattern</span><span class="op" id="3742880">)</span>&nbsp;<span class="op" id="3742882">&gt;</span>&nbsp;<span class="num" id="3742884">0</span>&nbsp;<span class="op" id="3742886">&amp;&amp;</span>&nbsp;<span class="ident" id="3742889">pattern</span><span class="op" id="3742896">[</span><span class="num" id="3742897">0</span><span class="op" id="3742898">]</span>&nbsp;<span class="op" id="3742900">==</span>&nbsp;<span class="string" id="3742903">&#39;*&#39;</span>&nbsp;<span class="op" id="3742907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3742911">pattern</span>&nbsp;<span class="op" id="3742919">=</span>&nbsp;<span class="ident" id="3742921">pattern</span><span class="op" id="3742928">[</span><span class="num" id="3742929">1</span><span class="op" id="3742930">:</span><span class="op" id="3742931">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3742935">star</span>&nbsp;<span class="op" id="3742940">=</span>&nbsp;<span class="builtintype" id="3742942">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3742948">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3742951">inrange</span>&nbsp;<span class="op" id="3742959">:=</span>&nbsp;<span class="builtintype" id="3742962">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742969">var</span>&nbsp;<span class="ident" id="3742973">i</span>&nbsp;<span class="builtintype" id="3742975">int</span><br>
<span class="lineno"></span><span class="ident" id="3742979">Scan</span><span class="op" id="3742983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3742986">for</span>&nbsp;<span class="ident" id="3742990">i</span>&nbsp;<span class="op" id="3742992">=</span>&nbsp;<span class="num" id="3742994">0</span><span class="op" id="3742995">;</span>&nbsp;<span class="ident" id="3742997">i</span>&nbsp;<span class="op" id="3742999">&lt;</span>&nbsp;<span class="builtinfunc" id="3743001">len</span><span class="op" id="3743004">(</span><span class="ident" id="3743005">pattern</span><span class="op" id="3743012">)</span><span class="op" id="3743013">;</span>&nbsp;<span class="ident" id="3743015">i</span><span class="op" id="3743016">++</span>&nbsp;<span class="op" id="3743019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743023">switch</span>&nbsp;<span class="ident" id="3743030">pattern</span><span class="op" id="3743037">[</span><span class="ident" id="3743038">i</span><span class="op" id="3743039">]</span>&nbsp;<span class="op" id="3743041">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743045">case</span>&nbsp;<span class="string" id="3743050">&#39;\\&#39;</span><span class="op" id="3743054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3743059">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743113">if</span>&nbsp;<span class="ident" id="3743116">i</span><span class="op" id="3743117">+</span><span class="num" id="3743118">1</span>&nbsp;<span class="op" id="3743120">&lt;</span>&nbsp;<span class="builtinfunc" id="3743122">len</span><span class="op" id="3743125">(</span><span class="ident" id="3743126">pattern</span><span class="op" id="3743133">)</span>&nbsp;<span class="op" id="3743135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743141">i</span><span class="op" id="3743142">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3743148">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743152">case</span>&nbsp;<span class="string" id="3743157">&#39;[&#39;</span><span class="op" id="3743160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743165">inrange</span>&nbsp;<span class="op" id="3743173">=</span>&nbsp;<span class="builtintype" id="3743175">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743182">case</span>&nbsp;<span class="string" id="3743187">&#39;]&#39;</span><span class="op" id="3743190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743195">inrange</span>&nbsp;<span class="op" id="3743203">=</span>&nbsp;<span class="builtintype" id="3743205">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743213">case</span>&nbsp;<span class="string" id="3743218">&#39;*&#39;</span><span class="op" id="3743221">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743226">if</span>&nbsp;<span class="op" id="3743229">!</span><span class="ident" id="3743230">inrange</span>&nbsp;<span class="op" id="3743238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743244">break</span>&nbsp;<span class="ident" id="3743250">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3743258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3743262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3743265">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743268">return</span>&nbsp;<span class="ident" id="3743275">star</span><span class="op" id="3743279">,</span>&nbsp;<span class="ident" id="3743281">pattern</span><span class="op" id="3743288">[</span><span class="num" id="3743289">0</span><span class="op" id="3743290">:</span><span class="ident" id="3743291">i</span><span class="op" id="3743292">]</span><span class="op" id="3743293">,</span>&nbsp;<span class="ident" id="3743295">pattern</span><span class="op" id="3743302">[</span><span class="ident" id="3743303">i</span><span class="op" id="3743304">:</span><span class="op" id="3743305">]</span><br>
<span class="lineno"></span><span class="op" id="3743307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3743310">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3743373">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3743432">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3743507">func</span>&nbsp;<span class="ident" id="3743512">matchChunk</span><span class="op" id="3743522">(</span><span class="ident" id="3743523">chunk</span><span class="op" id="3743528">,</span>&nbsp;<span class="ident" id="3743530">s</span>&nbsp;<span class="builtintype" id="3743532">string</span><span class="op" id="3743538">)</span>&nbsp;<span class="op" id="3743540">(</span><span class="ident" id="3743541">rest</span>&nbsp;<span class="builtintype" id="3743546">string</span><span class="op" id="3743552">,</span>&nbsp;<span class="ident" id="3743554">ok</span>&nbsp;<span class="builtintype" id="3743557">bool</span><span class="op" id="3743561">,</span>&nbsp;<span class="ident" id="3743563">err</span>&nbsp;<span class="builtintype" id="3743567">error</span><span class="op" id="3743572">)</span>&nbsp;<span class="op" id="3743574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743577">for</span>&nbsp;<span class="builtinfunc" id="3743581">len</span><span class="op" id="3743584">(</span><span class="ident" id="3743585">chunk</span><span class="op" id="3743590">)</span>&nbsp;<span class="op" id="3743592">&gt;</span>&nbsp;<span class="num" id="3743594">0</span>&nbsp;<span class="op" id="3743596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743600">if</span>&nbsp;<span class="builtinfunc" id="3743603">len</span><span class="op" id="3743606">(</span><span class="ident" id="3743607">s</span><span class="op" id="3743608">)</span>&nbsp;<span class="op" id="3743610">==</span>&nbsp;<span class="num" id="3743613">0</span>&nbsp;<span class="op" id="3743615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743620">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3743629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743633">switch</span>&nbsp;<span class="ident" id="3743640">chunk</span><span class="op" id="3743645">[</span><span class="num" id="3743646">0</span><span class="op" id="3743647">]</span>&nbsp;<span class="op" id="3743649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743653">case</span>&nbsp;<span class="string" id="3743658">&#39;[&#39;</span><span class="op" id="3743661">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3743666">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743688">r</span><span class="op" id="3743689">,</span>&nbsp;<span class="ident" id="3743691">n</span>&nbsp;<span class="op" id="3743693">:=</span>&nbsp;<span class="ident" id="3743696">utf8</span><span class="op" id="3743700">.</span><span class="ident" id="3743701">DecodeRuneInString</span><span class="op" id="3743719">(</span><span class="ident" id="3743720">s</span><span class="op" id="3743721">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743726">s</span>&nbsp;<span class="op" id="3743728">=</span>&nbsp;<span class="ident" id="3743730">s</span><span class="op" id="3743731">[</span><span class="ident" id="3743732">n</span><span class="op" id="3743733">:</span><span class="op" id="3743734">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743739">chunk</span>&nbsp;<span class="op" id="3743745">=</span>&nbsp;<span class="ident" id="3743747">chunk</span><span class="op" id="3743752">[</span><span class="num" id="3743753">1</span><span class="op" id="3743754">:</span><span class="op" id="3743755">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3743760">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743783">notNegated</span>&nbsp;<span class="op" id="3743794">:=</span>&nbsp;<span class="builtintype" id="3743797">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743805">if</span>&nbsp;<span class="builtinfunc" id="3743808">len</span><span class="op" id="3743811">(</span><span class="ident" id="3743812">chunk</span><span class="op" id="3743817">)</span>&nbsp;<span class="op" id="3743819">&gt;</span>&nbsp;<span class="num" id="3743821">0</span>&nbsp;<span class="op" id="3743823">&amp;&amp;</span>&nbsp;<span class="ident" id="3743826">chunk</span><span class="op" id="3743831">[</span><span class="num" id="3743832">0</span><span class="op" id="3743833">]</span>&nbsp;<span class="op" id="3743835">==</span>&nbsp;<span class="string" id="3743838">&#39;^&#39;</span>&nbsp;<span class="op" id="3743842">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743848">notNegated</span>&nbsp;<span class="op" id="3743859">=</span>&nbsp;<span class="builtintype" id="3743861">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743871">chunk</span>&nbsp;<span class="op" id="3743877">=</span>&nbsp;<span class="ident" id="3743879">chunk</span><span class="op" id="3743884">[</span><span class="num" id="3743885">1</span><span class="op" id="3743886">:</span><span class="op" id="3743887">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3743892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3743897">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743920">match</span>&nbsp;<span class="op" id="3743926">:=</span>&nbsp;<span class="builtintype" id="3743929">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3743938">nrange</span>&nbsp;<span class="op" id="3743945">:=</span>&nbsp;<span class="num" id="3743948">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743953">for</span>&nbsp;<span class="op" id="3743957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3743963">if</span>&nbsp;<span class="builtinfunc" id="3743966">len</span><span class="op" id="3743969">(</span><span class="ident" id="3743970">chunk</span><span class="op" id="3743975">)</span>&nbsp;<span class="op" id="3743977">&gt;</span>&nbsp;<span class="num" id="3743979">0</span>&nbsp;<span class="op" id="3743981">&amp;&amp;</span>&nbsp;<span class="ident" id="3743984">chunk</span><span class="op" id="3743989">[</span><span class="num" id="3743990">0</span><span class="op" id="3743991">]</span>&nbsp;<span class="op" id="3743993">==</span>&nbsp;<span class="string" id="3743996">&#39;]&#39;</span>&nbsp;<span class="op" id="3744000">&amp;&amp;</span>&nbsp;<span class="ident" id="3744003">nrange</span>&nbsp;<span class="op" id="3744010">&gt;</span>&nbsp;<span class="num" id="3744012">0</span>&nbsp;<span class="op" id="3744014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744021">chunk</span>&nbsp;<span class="op" id="3744027">=</span>&nbsp;<span class="ident" id="3744029">chunk</span><span class="op" id="3744034">[</span><span class="num" id="3744035">1</span><span class="op" id="3744036">:</span><span class="op" id="3744037">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744044">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744060">var</span>&nbsp;<span class="ident" id="3744064">lo</span><span class="op" id="3744066">,</span>&nbsp;<span class="ident" id="3744068">hi</span>&nbsp;<span class="builtintype" id="3744071">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744080">if</span>&nbsp;<span class="ident" id="3744083">lo</span><span class="op" id="3744085">,</span>&nbsp;<span class="ident" id="3744087">chunk</span><span class="op" id="3744092">,</span>&nbsp;<span class="ident" id="3744094">err</span>&nbsp;<span class="op" id="3744098">=</span>&nbsp;<span class="ident" id="3744100">getEsc</span><span class="op" id="3744106">(</span><span class="ident" id="3744107">chunk</span><span class="op" id="3744112">)</span><span class="op" id="3744113">;</span>&nbsp;<span class="ident" id="3744115">err</span>&nbsp;<span class="op" id="3744119">!=</span>&nbsp;<span class="ident" id="3744122">nil</span>&nbsp;<span class="op" id="3744126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744144">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744150">hi</span>&nbsp;<span class="op" id="3744153">=</span>&nbsp;<span class="ident" id="3744155">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744162">if</span>&nbsp;<span class="ident" id="3744165">chunk</span><span class="op" id="3744170">[</span><span class="num" id="3744171">0</span><span class="op" id="3744172">]</span>&nbsp;<span class="op" id="3744174">==</span>&nbsp;<span class="string" id="3744177">&#39;-&#39;</span>&nbsp;<span class="op" id="3744181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744188">if</span>&nbsp;<span class="ident" id="3744191">hi</span><span class="op" id="3744193">,</span>&nbsp;<span class="ident" id="3744195">chunk</span><span class="op" id="3744200">,</span>&nbsp;<span class="ident" id="3744202">err</span>&nbsp;<span class="op" id="3744206">=</span>&nbsp;<span class="ident" id="3744208">getEsc</span><span class="op" id="3744214">(</span><span class="ident" id="3744215">chunk</span><span class="op" id="3744220">[</span><span class="num" id="3744221">1</span><span class="op" id="3744222">:</span><span class="op" id="3744223">]</span><span class="op" id="3744224">)</span><span class="op" id="3744225">;</span>&nbsp;<span class="ident" id="3744227">err</span>&nbsp;<span class="op" id="3744231">!=</span>&nbsp;<span class="ident" id="3744234">nil</span>&nbsp;<span class="op" id="3744238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744246">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744258">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744270">if</span>&nbsp;<span class="ident" id="3744273">lo</span>&nbsp;<span class="op" id="3744276">&lt;=</span>&nbsp;<span class="ident" id="3744279">r</span>&nbsp;<span class="op" id="3744281">&amp;&amp;</span>&nbsp;<span class="ident" id="3744284">r</span>&nbsp;<span class="op" id="3744286">&lt;=</span>&nbsp;<span class="ident" id="3744289">hi</span>&nbsp;<span class="op" id="3744292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744299">match</span>&nbsp;<span class="op" id="3744305">=</span>&nbsp;<span class="builtintype" id="3744307">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744322">nrange</span><span class="op" id="3744328">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744339">if</span>&nbsp;<span class="ident" id="3744342">match</span>&nbsp;<span class="op" id="3744348">!=</span>&nbsp;<span class="ident" id="3744351">notNegated</span>&nbsp;<span class="op" id="3744362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744368">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744383">case</span>&nbsp;<span class="string" id="3744388">&#39;?&#39;</span><span class="op" id="3744391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744396">if</span>&nbsp;<span class="ident" id="3744399">s</span><span class="op" id="3744400">[</span><span class="num" id="3744401">0</span><span class="op" id="3744402">]</span>&nbsp;<span class="op" id="3744404">==</span>&nbsp;<span class="string" id="3744407">&#39;/&#39;</span>&nbsp;<span class="op" id="3744411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744417">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744432">_</span><span class="op" id="3744433">,</span>&nbsp;<span class="ident" id="3744435">n</span>&nbsp;<span class="op" id="3744437">:=</span>&nbsp;<span class="ident" id="3744440">utf8</span><span class="op" id="3744444">.</span><span class="ident" id="3744445">DecodeRuneInString</span><span class="op" id="3744463">(</span><span class="ident" id="3744464">s</span><span class="op" id="3744465">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744470">s</span>&nbsp;<span class="op" id="3744472">=</span>&nbsp;<span class="ident" id="3744474">s</span><span class="op" id="3744475">[</span><span class="ident" id="3744476">n</span><span class="op" id="3744477">:</span><span class="op" id="3744478">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744483">chunk</span>&nbsp;<span class="op" id="3744489">=</span>&nbsp;<span class="ident" id="3744491">chunk</span><span class="op" id="3744496">[</span><span class="num" id="3744497">1</span><span class="op" id="3744498">:</span><span class="op" id="3744499">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744504">case</span>&nbsp;<span class="string" id="3744509">&#39;\\&#39;</span><span class="op" id="3744513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744518">chunk</span>&nbsp;<span class="op" id="3744524">=</span>&nbsp;<span class="ident" id="3744526">chunk</span><span class="op" id="3744531">[</span><span class="num" id="3744532">1</span><span class="op" id="3744533">:</span><span class="op" id="3744534">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744539">if</span>&nbsp;<span class="builtinfunc" id="3744542">len</span><span class="op" id="3744545">(</span><span class="ident" id="3744546">chunk</span><span class="op" id="3744551">)</span>&nbsp;<span class="op" id="3744553">==</span>&nbsp;<span class="num" id="3744556">0</span>&nbsp;<span class="op" id="3744558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744564">err</span>&nbsp;<span class="op" id="3744568">=</span>&nbsp;<span class="ident" id="3744570">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744588">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744603">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744618">default</span><span class="op" id="3744625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744630">if</span>&nbsp;<span class="ident" id="3744633">chunk</span><span class="op" id="3744638">[</span><span class="num" id="3744639">0</span><span class="op" id="3744640">]</span>&nbsp;<span class="op" id="3744642">!=</span>&nbsp;<span class="ident" id="3744645">s</span><span class="op" id="3744646">[</span><span class="num" id="3744647">0</span><span class="op" id="3744648">]</span>&nbsp;<span class="op" id="3744650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744656">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744666">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744671">s</span>&nbsp;<span class="op" id="3744673">=</span>&nbsp;<span class="ident" id="3744675">s</span><span class="op" id="3744676">[</span><span class="num" id="3744677">1</span><span class="op" id="3744678">:</span><span class="op" id="3744679">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744684">chunk</span>&nbsp;<span class="op" id="3744690">=</span>&nbsp;<span class="ident" id="3744692">chunk</span><span class="op" id="3744697">[</span><span class="num" id="3744698">1</span><span class="op" id="3744699">:</span><span class="op" id="3744700">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744710">return</span>&nbsp;<span class="ident" id="3744717">s</span><span class="op" id="3744718">,</span>&nbsp;<span class="builtintype" id="3744720">true</span><span class="op" id="3744724">,</span>&nbsp;<span class="ident" id="3744726">nil</span><br>
<span class="lineno">185</span><span class="op" id="3744730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3744733">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3744812">func</span>&nbsp;<span class="ident" id="3744817">getEsc</span><span class="op" id="3744823">(</span><span class="ident" id="3744824">chunk</span>&nbsp;<span class="builtintype" id="3744830">string</span><span class="op" id="3744836">)</span>&nbsp;<span class="op" id="3744838">(</span><span class="ident" id="3744839">r</span>&nbsp;<span class="builtintype" id="3744841">rune</span><span class="op" id="3744845">,</span>&nbsp;<span class="ident" id="3744847">nchunk</span>&nbsp;<span class="builtintype" id="3744854">string</span><span class="op" id="3744860">,</span>&nbsp;<span class="ident" id="3744862">err</span>&nbsp;<span class="builtintype" id="3744866">error</span><span class="op" id="3744871">)</span>&nbsp;<span class="op" id="3744873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744876">if</span>&nbsp;<span class="builtinfunc" id="3744879">len</span><span class="op" id="3744882">(</span><span class="ident" id="3744883">chunk</span><span class="op" id="3744888">)</span>&nbsp;<span class="op" id="3744890">==</span>&nbsp;<span class="num" id="3744893">0</span>&nbsp;<span class="op" id="3744895">||</span>&nbsp;<span class="ident" id="3744898">chunk</span><span class="op" id="3744903">[</span><span class="num" id="3744904">0</span><span class="op" id="3744905">]</span>&nbsp;<span class="op" id="3744907">==</span>&nbsp;<span class="string" id="3744910">&#39;-&#39;</span>&nbsp;<span class="op" id="3744914">||</span>&nbsp;<span class="ident" id="3744917">chunk</span><span class="op" id="3744922">[</span><span class="num" id="3744923">0</span><span class="op" id="3744924">]</span>&nbsp;<span class="op" id="3744926">==</span>&nbsp;<span class="string" id="3744929">&#39;]&#39;</span>&nbsp;<span class="op" id="3744933">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744937">err</span>&nbsp;<span class="op" id="3744941">=</span>&nbsp;<span class="ident" id="3744943">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744959">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3744967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3744970">if</span>&nbsp;<span class="ident" id="3744973">chunk</span><span class="op" id="3744978">[</span><span class="num" id="3744979">0</span><span class="op" id="3744980">]</span>&nbsp;<span class="op" id="3744982">==</span>&nbsp;<span class="string" id="3744985">&#39;\\&#39;</span>&nbsp;<span class="op" id="3744990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3744994">chunk</span>&nbsp;<span class="op" id="3745000">=</span>&nbsp;<span class="ident" id="3745002">chunk</span><span class="op" id="3745007">[</span><span class="num" id="3745008">1</span><span class="op" id="3745009">:</span><span class="op" id="3745010">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3745014">if</span>&nbsp;<span class="builtinfunc" id="3745017">len</span><span class="op" id="3745020">(</span><span class="ident" id="3745021">chunk</span><span class="op" id="3745026">)</span>&nbsp;<span class="op" id="3745028">==</span>&nbsp;<span class="num" id="3745031">0</span>&nbsp;<span class="op" id="3745033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3745038">err</span>&nbsp;<span class="op" id="3745042">=</span>&nbsp;<span class="ident" id="3745044">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3745061">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3745070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3745073">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3745076">r</span><span class="op" id="3745077">,</span>&nbsp;<span class="ident" id="3745079">n</span>&nbsp;<span class="op" id="3745081">:=</span>&nbsp;<span class="ident" id="3745084">utf8</span><span class="op" id="3745088">.</span><span class="ident" id="3745089">DecodeRuneInString</span><span class="op" id="3745107">(</span><span class="ident" id="3745108">chunk</span><span class="op" id="3745113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3745116">if</span>&nbsp;<span class="ident" id="3745119">r</span>&nbsp;<span class="op" id="3745121">==</span>&nbsp;<span class="ident" id="3745124">utf8</span><span class="op" id="3745128">.</span><span class="ident" id="3745129">RuneError</span>&nbsp;<span class="op" id="3745139">&amp;&amp;</span>&nbsp;<span class="ident" id="3745142">n</span>&nbsp;<span class="op" id="3745144">==</span>&nbsp;<span class="num" id="3745147">1</span>&nbsp;<span class="op" id="3745149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3745153">err</span>&nbsp;<span class="op" id="3745157">=</span>&nbsp;<span class="ident" id="3745159">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3745174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3745177">nchunk</span>&nbsp;<span class="op" id="3745184">=</span>&nbsp;<span class="ident" id="3745186">chunk</span><span class="op" id="3745191">[</span><span class="ident" id="3745192">n</span><span class="op" id="3745193">:</span><span class="op" id="3745194">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3745197">if</span>&nbsp;<span class="builtinfunc" id="3745200">len</span><span class="op" id="3745203">(</span><span class="ident" id="3745204">nchunk</span><span class="op" id="3745210">)</span>&nbsp;<span class="op" id="3745212">==</span>&nbsp;<span class="num" id="3745215">0</span>&nbsp;<span class="op" id="3745217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3745221">err</span>&nbsp;<span class="op" id="3745225">=</span>&nbsp;<span class="ident" id="3745227">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3745242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3745245">return</span><br>
<span class="lineno"></span><span class="op" id="3745252">}</span>
</div>
</body>
</html>
