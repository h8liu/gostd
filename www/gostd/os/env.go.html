<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html" class="current">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2321014">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2321070">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2321124">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2321175">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2321210">package</span>&nbsp;<span class="ident" id="2321218">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2321222">import</span>&nbsp;<span class="string" id="2321229">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2321240">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2321319">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2321393">func</span>&nbsp;<span class="ident" id="2321398">Expand</span><span class="op" id="2321404">(</span><span class="ident" id="2321405">s</span>&nbsp;<span class="builtintype" id="2321407">string</span><span class="op" id="2321413">,</span>&nbsp;<span class="ident" id="2321415">mapping</span>&nbsp;<span class="keyword" id="2321423">func</span><span class="op" id="2321427">(</span><span class="builtintype" id="2321428">string</span><span class="op" id="2321434">)</span>&nbsp;<span class="builtintype" id="2321436">string</span><span class="op" id="2321442">)</span>&nbsp;<span class="builtintype" id="2321444">string</span>&nbsp;<span class="op" id="2321451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321454">buf</span>&nbsp;<span class="op" id="2321458">:=</span>&nbsp;<span class="builtinfunc" id="2321461">make</span><span class="op" id="2321465">(</span><span class="op" id="2321466">[</span><span class="op" id="2321467">]</span><span class="builtintype" id="2321468">byte</span><span class="op" id="2321472">,</span>&nbsp;<span class="num" id="2321474">0</span><span class="op" id="2321475">,</span>&nbsp;<span class="num" id="2321477">2</span><span class="op" id="2321478">*</span><span class="builtinfunc" id="2321479">len</span><span class="op" id="2321482">(</span><span class="ident" id="2321483">s</span><span class="op" id="2321484">)</span><span class="op" id="2321485">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2321488">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321548">i</span>&nbsp;<span class="op" id="2321550">:=</span>&nbsp;<span class="num" id="2321553">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321556">for</span>&nbsp;<span class="ident" id="2321560">j</span>&nbsp;<span class="op" id="2321562">:=</span>&nbsp;<span class="num" id="2321565">0</span><span class="op" id="2321566">;</span>&nbsp;<span class="ident" id="2321568">j</span>&nbsp;<span class="op" id="2321570">&lt;</span>&nbsp;<span class="builtinfunc" id="2321572">len</span><span class="op" id="2321575">(</span><span class="ident" id="2321576">s</span><span class="op" id="2321577">)</span><span class="op" id="2321578">;</span>&nbsp;<span class="ident" id="2321580">j</span><span class="op" id="2321581">++</span>&nbsp;<span class="op" id="2321584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321588">if</span>&nbsp;<span class="ident" id="2321591">s</span><span class="op" id="2321592">[</span><span class="ident" id="2321593">j</span><span class="op" id="2321594">]</span>&nbsp;<span class="op" id="2321596">==</span>&nbsp;<span class="string" id="2321599">&#39;$&#39;</span>&nbsp;<span class="op" id="2321603">&amp;&amp;</span>&nbsp;<span class="ident" id="2321606">j</span><span class="op" id="2321607">+</span><span class="num" id="2321608">1</span>&nbsp;<span class="op" id="2321610">&lt;</span>&nbsp;<span class="builtinfunc" id="2321612">len</span><span class="op" id="2321615">(</span><span class="ident" id="2321616">s</span><span class="op" id="2321617">)</span>&nbsp;<span class="op" id="2321619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321624">buf</span>&nbsp;<span class="op" id="2321628">=</span>&nbsp;<span class="builtinfunc" id="2321630">append</span><span class="op" id="2321636">(</span><span class="ident" id="2321637">buf</span><span class="op" id="2321640">,</span>&nbsp;<span class="ident" id="2321642">s</span><span class="op" id="2321643">[</span><span class="ident" id="2321644">i</span><span class="op" id="2321645">:</span><span class="ident" id="2321646">j</span><span class="op" id="2321647">]</span><span class="op" id="2321648">...</span><span class="op" id="2321651">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321656">name</span><span class="op" id="2321660">,</span>&nbsp;<span class="ident" id="2321662">w</span>&nbsp;<span class="op" id="2321664">:=</span>&nbsp;<span class="ident" id="2321667">getShellName</span><span class="op" id="2321679">(</span><span class="ident" id="2321680">s</span><span class="op" id="2321681">[</span><span class="ident" id="2321682">j</span><span class="op" id="2321683">+</span><span class="num" id="2321684">1</span><span class="op" id="2321685">:</span><span class="op" id="2321686">]</span><span class="op" id="2321687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321692">buf</span>&nbsp;<span class="op" id="2321696">=</span>&nbsp;<span class="builtinfunc" id="2321698">append</span><span class="op" id="2321704">(</span><span class="ident" id="2321705">buf</span><span class="op" id="2321708">,</span>&nbsp;<span class="ident" id="2321710">mapping</span><span class="op" id="2321717">(</span><span class="ident" id="2321718">name</span><span class="op" id="2321722">)</span><span class="op" id="2321723">...</span><span class="op" id="2321726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321731">j</span>&nbsp;<span class="op" id="2321733">+=</span>&nbsp;<span class="ident" id="2321736">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2321741">i</span>&nbsp;<span class="op" id="2321743">=</span>&nbsp;<span class="ident" id="2321745">j</span>&nbsp;<span class="op" id="2321747">+</span>&nbsp;<span class="num" id="2321749">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2321753">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2321756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2321759">return</span>&nbsp;<span class="builtintype" id="2321766">string</span><span class="op" id="2321772">(</span><span class="ident" id="2321773">buf</span><span class="op" id="2321776">)</span>&nbsp;<span class="op" id="2321778">+</span>&nbsp;<span class="ident" id="2321780">s</span><span class="op" id="2321781">[</span><span class="ident" id="2321782">i</span><span class="op" id="2321783">:</span><span class="op" id="2321784">]</span><br>
<span class="lineno"></span><span class="op" id="2321786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2321789">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2321864">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2321930">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2321977">func</span>&nbsp;<span class="ident" id="2321982">ExpandEnv</span><span class="op" id="2321991">(</span><span class="ident" id="2321992">s</span>&nbsp;<span class="builtintype" id="2321994">string</span><span class="op" id="2322000">)</span>&nbsp;<span class="builtintype" id="2322002">string</span>&nbsp;<span class="op" id="2322009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322012">return</span>&nbsp;<span class="ident" id="2322019">Expand</span><span class="op" id="2322025">(</span><span class="ident" id="2322026">s</span><span class="op" id="2322027">,</span>&nbsp;<span class="ident" id="2322029">Getenv</span><span class="op" id="2322035">)</span><br>
<span class="lineno"></span><span class="op" id="2322037">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2322040">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2322112">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2322142">func</span>&nbsp;<span class="ident" id="2322147">isShellSpecialVar</span><span class="op" id="2322164">(</span><span class="ident" id="2322165">c</span>&nbsp;<span class="builtintype" id="2322167">uint8</span><span class="op" id="2322172">)</span>&nbsp;<span class="builtintype" id="2322174">bool</span>&nbsp;<span class="op" id="2322179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322182">switch</span>&nbsp;<span class="ident" id="2322189">c</span>&nbsp;<span class="op" id="2322191">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322194">case</span>&nbsp;<span class="string" id="2322199">&#39;*&#39;</span><span class="op" id="2322202">,</span>&nbsp;<span class="string" id="2322204">&#39;#&#39;</span><span class="op" id="2322207">,</span>&nbsp;<span class="string" id="2322209">&#39;$&#39;</span><span class="op" id="2322212">,</span>&nbsp;<span class="string" id="2322214">&#39;@&#39;</span><span class="op" id="2322217">,</span>&nbsp;<span class="string" id="2322219">&#39;!&#39;</span><span class="op" id="2322222">,</span>&nbsp;<span class="string" id="2322224">&#39;?&#39;</span><span class="op" id="2322227">,</span>&nbsp;<span class="string" id="2322229">&#39;0&#39;</span><span class="op" id="2322232">,</span>&nbsp;<span class="string" id="2322234">&#39;1&#39;</span><span class="op" id="2322237">,</span>&nbsp;<span class="string" id="2322239">&#39;2&#39;</span><span class="op" id="2322242">,</span>&nbsp;<span class="string" id="2322244">&#39;3&#39;</span><span class="op" id="2322247">,</span>&nbsp;<span class="string" id="2322249">&#39;4&#39;</span><span class="op" id="2322252">,</span>&nbsp;<span class="string" id="2322254">&#39;5&#39;</span><span class="op" id="2322257">,</span>&nbsp;<span class="string" id="2322259">&#39;6&#39;</span><span class="op" id="2322262">,</span>&nbsp;<span class="string" id="2322264">&#39;7&#39;</span><span class="op" id="2322267">,</span>&nbsp;<span class="string" id="2322269">&#39;8&#39;</span><span class="op" id="2322272">,</span>&nbsp;<span class="string" id="2322274">&#39;9&#39;</span><span class="op" id="2322277">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322281">return</span>&nbsp;<span class="builtintype" id="2322288">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322297">return</span>&nbsp;<span class="builtintype" id="2322304">false</span><br>
<span class="lineno"></span><span class="op" id="2322310">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2322313">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2322394">func</span>&nbsp;<span class="ident" id="2322399">isAlphaNum</span><span class="op" id="2322409">(</span><span class="ident" id="2322410">c</span>&nbsp;<span class="builtintype" id="2322412">uint8</span><span class="op" id="2322417">)</span>&nbsp;<span class="builtintype" id="2322419">bool</span>&nbsp;<span class="op" id="2322424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322427">return</span>&nbsp;<span class="ident" id="2322434">c</span>&nbsp;<span class="op" id="2322436">==</span>&nbsp;<span class="string" id="2322439">&#39;_&#39;</span>&nbsp;<span class="op" id="2322443">||</span>&nbsp;<span class="string" id="2322446">&#39;0&#39;</span>&nbsp;<span class="op" id="2322450">&lt;=</span>&nbsp;<span class="ident" id="2322453">c</span>&nbsp;<span class="op" id="2322455">&amp;&amp;</span>&nbsp;<span class="ident" id="2322458">c</span>&nbsp;<span class="op" id="2322460">&lt;=</span>&nbsp;<span class="string" id="2322463">&#39;9&#39;</span>&nbsp;<span class="op" id="2322467">||</span>&nbsp;<span class="string" id="2322470">&#39;a&#39;</span>&nbsp;<span class="op" id="2322474">&lt;=</span>&nbsp;<span class="ident" id="2322477">c</span>&nbsp;<span class="op" id="2322479">&amp;&amp;</span>&nbsp;<span class="ident" id="2322482">c</span>&nbsp;<span class="op" id="2322484">&lt;=</span>&nbsp;<span class="string" id="2322487">&#39;z&#39;</span>&nbsp;<span class="op" id="2322491">||</span>&nbsp;<span class="string" id="2322494">&#39;A&#39;</span>&nbsp;<span class="op" id="2322498">&lt;=</span>&nbsp;<span class="ident" id="2322501">c</span>&nbsp;<span class="op" id="2322503">&amp;&amp;</span>&nbsp;<span class="ident" id="2322506">c</span>&nbsp;<span class="op" id="2322508">&lt;=</span>&nbsp;<span class="string" id="2322511">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2322515">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2322518">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2322593">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2322671">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2322743">func</span>&nbsp;<span class="ident" id="2322748">getShellName</span><span class="op" id="2322760">(</span><span class="ident" id="2322761">s</span>&nbsp;<span class="builtintype" id="2322763">string</span><span class="op" id="2322769">)</span>&nbsp;<span class="op" id="2322771">(</span><span class="builtintype" id="2322772">string</span><span class="op" id="2322778">,</span>&nbsp;<span class="builtintype" id="2322780">int</span><span class="op" id="2322783">)</span>&nbsp;<span class="op" id="2322785">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322788">switch</span>&nbsp;<span class="op" id="2322795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322798">case</span>&nbsp;<span class="ident" id="2322803">s</span><span class="op" id="2322804">[</span><span class="num" id="2322805">0</span><span class="op" id="2322806">]</span>&nbsp;<span class="op" id="2322808">==</span>&nbsp;<span class="string" id="2322811">&#39;{&#39;</span><span class="op" id="2322814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322818">if</span>&nbsp;<span class="builtinfunc" id="2322821">len</span><span class="op" id="2322824">(</span><span class="ident" id="2322825">s</span><span class="op" id="2322826">)</span>&nbsp;<span class="op" id="2322828">&gt;</span>&nbsp;<span class="num" id="2322830">2</span>&nbsp;<span class="op" id="2322832">&amp;&amp;</span>&nbsp;<span class="ident" id="2322835">isShellSpecialVar</span><span class="op" id="2322852">(</span><span class="ident" id="2322853">s</span><span class="op" id="2322854">[</span><span class="num" id="2322855">1</span><span class="op" id="2322856">]</span><span class="op" id="2322857">)</span>&nbsp;<span class="op" id="2322859">&amp;&amp;</span>&nbsp;<span class="ident" id="2322862">s</span><span class="op" id="2322863">[</span><span class="num" id="2322864">2</span><span class="op" id="2322865">]</span>&nbsp;<span class="op" id="2322867">==</span>&nbsp;<span class="string" id="2322870">&#39;}&#39;</span>&nbsp;<span class="op" id="2322874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322879">return</span>&nbsp;<span class="ident" id="2322886">s</span><span class="op" id="2322887">[</span><span class="num" id="2322888">1</span><span class="op" id="2322889">:</span><span class="num" id="2322890">2</span><span class="op" id="2322891">]</span><span class="op" id="2322892">,</span>&nbsp;<span class="num" id="2322894">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2322898">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2322902">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322929">for</span>&nbsp;<span class="ident" id="2322933">i</span>&nbsp;<span class="op" id="2322935">:=</span>&nbsp;<span class="num" id="2322938">1</span><span class="op" id="2322939">;</span>&nbsp;<span class="ident" id="2322941">i</span>&nbsp;<span class="op" id="2322943">&lt;</span>&nbsp;<span class="builtinfunc" id="2322945">len</span><span class="op" id="2322948">(</span><span class="ident" id="2322949">s</span><span class="op" id="2322950">)</span><span class="op" id="2322951">;</span>&nbsp;<span class="ident" id="2322953">i</span><span class="op" id="2322954">++</span>&nbsp;<span class="op" id="2322957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322962">if</span>&nbsp;<span class="ident" id="2322965">s</span><span class="op" id="2322966">[</span><span class="ident" id="2322967">i</span><span class="op" id="2322968">]</span>&nbsp;<span class="op" id="2322970">==</span>&nbsp;<span class="string" id="2322973">&#39;}&#39;</span>&nbsp;<span class="op" id="2322977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2322983">return</span>&nbsp;<span class="ident" id="2322990">s</span><span class="op" id="2322991">[</span><span class="num" id="2322992">1</span><span class="op" id="2322993">:</span><span class="ident" id="2322994">i</span><span class="op" id="2322995">]</span><span class="op" id="2322996">,</span>&nbsp;<span class="ident" id="2322998">i</span>&nbsp;<span class="op" id="2323000">+</span>&nbsp;<span class="num" id="2323002">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323007">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323015">return</span>&nbsp;<span class="string" id="2323022">&#34;&#34;</span><span class="op" id="2323024">,</span>&nbsp;<span class="num" id="2323026">1</span>&nbsp;<span class="comment" id="2323028">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323064">case</span>&nbsp;<span class="ident" id="2323069">isShellSpecialVar</span><span class="op" id="2323086">(</span><span class="ident" id="2323087">s</span><span class="op" id="2323088">[</span><span class="num" id="2323089">0</span><span class="op" id="2323090">]</span><span class="op" id="2323091">)</span><span class="op" id="2323092">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323096">return</span>&nbsp;<span class="ident" id="2323103">s</span><span class="op" id="2323104">[</span><span class="num" id="2323105">0</span><span class="op" id="2323106">:</span><span class="num" id="2323107">1</span><span class="op" id="2323108">]</span><span class="op" id="2323109">,</span>&nbsp;<span class="num" id="2323111">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323114">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2323117">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323141">var</span>&nbsp;<span class="ident" id="2323145">i</span>&nbsp;<span class="builtintype" id="2323147">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323152">for</span>&nbsp;<span class="ident" id="2323156">i</span>&nbsp;<span class="op" id="2323158">=</span>&nbsp;<span class="num" id="2323160">0</span><span class="op" id="2323161">;</span>&nbsp;<span class="ident" id="2323163">i</span>&nbsp;<span class="op" id="2323165">&lt;</span>&nbsp;<span class="builtinfunc" id="2323167">len</span><span class="op" id="2323170">(</span><span class="ident" id="2323171">s</span><span class="op" id="2323172">)</span>&nbsp;<span class="op" id="2323174">&amp;&amp;</span>&nbsp;<span class="ident" id="2323177">isAlphaNum</span><span class="op" id="2323187">(</span><span class="ident" id="2323188">s</span><span class="op" id="2323189">[</span><span class="ident" id="2323190">i</span><span class="op" id="2323191">]</span><span class="op" id="2323192">)</span><span class="op" id="2323193">;</span>&nbsp;<span class="ident" id="2323195">i</span><span class="op" id="2323196">++</span>&nbsp;<span class="op" id="2323199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323205">return</span>&nbsp;<span class="ident" id="2323212">s</span><span class="op" id="2323213">[</span><span class="op" id="2323214">:</span><span class="ident" id="2323215">i</span><span class="op" id="2323216">]</span><span class="op" id="2323217">,</span>&nbsp;<span class="ident" id="2323219">i</span><br>
<span class="lineno">75</span><span class="op" id="2323221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2323224">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2323300">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2323377">func</span>&nbsp;<span class="ident" id="2323382">Getenv</span><span class="op" id="2323388">(</span><span class="ident" id="2323389">key</span>&nbsp;<span class="builtintype" id="2323393">string</span><span class="op" id="2323399">)</span>&nbsp;<span class="builtintype" id="2323401">string</span>&nbsp;<span class="op" id="2323408">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2323411">v</span><span class="op" id="2323412">,</span>&nbsp;<span class="ident" id="2323414">_</span>&nbsp;<span class="op" id="2323416">:=</span>&nbsp;<span class="ident" id="2323419">syscall</span><span class="op" id="2323426">.</span><span class="ident" id="2323427">Getenv</span><span class="op" id="2323433">(</span><span class="ident" id="2323434">key</span><span class="op" id="2323437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323440">return</span>&nbsp;<span class="ident" id="2323447">v</span><br>
<span class="lineno"></span><span class="op" id="2323449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2323452">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2323523">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2323555">func</span>&nbsp;<span class="ident" id="2323560">Setenv</span><span class="op" id="2323566">(</span><span class="ident" id="2323567">key</span><span class="op" id="2323570">,</span>&nbsp;<span class="ident" id="2323572">value</span>&nbsp;<span class="builtintype" id="2323578">string</span><span class="op" id="2323584">)</span>&nbsp;<span class="builtintype" id="2323586">error</span>&nbsp;<span class="op" id="2323592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2323595">err</span>&nbsp;<span class="op" id="2323599">:=</span>&nbsp;<span class="ident" id="2323602">syscall</span><span class="op" id="2323609">.</span><span class="ident" id="2323610">Setenv</span><span class="op" id="2323616">(</span><span class="ident" id="2323617">key</span><span class="op" id="2323620">,</span>&nbsp;<span class="ident" id="2323622">value</span><span class="op" id="2323627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323630">if</span>&nbsp;<span class="ident" id="2323633">err</span>&nbsp;<span class="op" id="2323637">!=</span>&nbsp;<span class="builtintype" id="2323640">nil</span>&nbsp;<span class="op" id="2323644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323648">return</span>&nbsp;<span class="ident" id="2323655">NewSyscallError</span><span class="op" id="2323670">(</span><span class="string" id="2323671">&#34;setenv&#34;</span><span class="op" id="2323679">,</span>&nbsp;<span class="ident" id="2323681">err</span><span class="op" id="2323684">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323690">return</span>&nbsp;<span class="builtintype" id="2323697">nil</span><br>
<span class="lineno"></span><span class="op" id="2323701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2323704">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2323754">func</span>&nbsp;<span class="ident" id="2323759">Unsetenv</span><span class="op" id="2323767">(</span><span class="ident" id="2323768">key</span>&nbsp;<span class="builtintype" id="2323772">string</span><span class="op" id="2323778">)</span>&nbsp;<span class="builtintype" id="2323780">error</span>&nbsp;<span class="op" id="2323786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2323789">return</span>&nbsp;<span class="ident" id="2323796">syscall</span><span class="op" id="2323803">.</span><span class="ident" id="2323804">Unsetenv</span><span class="op" id="2323812">(</span><span class="ident" id="2323813">key</span><span class="op" id="2323816">)</span><br>
<span class="lineno"></span><span class="op" id="2323818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2323821">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2323868">func</span>&nbsp;<span class="ident" id="2323873">Clearenv</span><span class="op" id="2323881">(</span><span class="op" id="2323882">)</span>&nbsp;<span class="op" id="2323884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2323887">syscall</span><span class="op" id="2323894">.</span><span class="ident" id="2323895">Clearenv</span><span class="op" id="2323903">(</span><span class="op" id="2323904">)</span><br>
<span class="lineno"></span><span class="op" id="2323906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2323909">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2323976">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2324004">func</span>&nbsp;<span class="ident" id="2324009">Environ</span><span class="op" id="2324016">(</span><span class="op" id="2324017">)</span>&nbsp;<span class="op" id="2324019">[</span><span class="op" id="2324020">]</span><span class="builtintype" id="2324021">string</span>&nbsp;<span class="op" id="2324028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324031">return</span>&nbsp;<span class="ident" id="2324038">syscall</span><span class="op" id="2324045">.</span><span class="ident" id="2324046">Environ</span><span class="op" id="2324053">(</span><span class="op" id="2324054">)</span><br>
<span class="lineno"></span><span class="op" id="2324056">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
