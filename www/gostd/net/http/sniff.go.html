<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5156448">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5156504">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5156558">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5156609">package</span>&nbsp;<span class="ident" id="5156617">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5156623">import</span>&nbsp;<span class="op" id="5156630">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5156633">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5156642">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5156660">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5156663">//&nbsp;The&nbsp;algorithm&nbsp;uses&nbsp;at&nbsp;most&nbsp;sniffLen&nbsp;bytes&nbsp;to&nbsp;make&nbsp;its&nbsp;decision.</span><br>
<span class="lineno"></span><span class="keyword" id="5156730">const</span>&nbsp;<span class="ident" id="5156736">sniffLen</span>&nbsp;<span class="op" id="5156745">=</span>&nbsp;<span class="num" id="5156747">512</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5156752">//&nbsp;DetectContentType&nbsp;implements&nbsp;the&nbsp;algorithm&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="5156808">//&nbsp;at&nbsp;http://mimesniff.spec.whatwg.org/&nbsp;to&nbsp;determine&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5156865">//&nbsp;Content-Type&nbsp;of&nbsp;the&nbsp;given&nbsp;data.&nbsp;&nbsp;It&nbsp;considers&nbsp;at&nbsp;most&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5156926">//&nbsp;first&nbsp;512&nbsp;bytes&nbsp;of&nbsp;data.&nbsp;&nbsp;DetectContentType&nbsp;always&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="5156988">//&nbsp;a&nbsp;valid&nbsp;MIME&nbsp;type:&nbsp;if&nbsp;it&nbsp;cannot&nbsp;determine&nbsp;a&nbsp;more&nbsp;specific&nbsp;one,&nbsp;it</span><br>
<span class="lineno">20</span><span class="comment" id="5157057">//&nbsp;returns&nbsp;&#34;application/octet-stream&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5157096">func</span>&nbsp;<span class="ident" id="5157101">DetectContentType</span><span class="op" id="5157118">(</span><span class="ident" id="5157119">data</span>&nbsp;<span class="op" id="5157124">[</span><span class="op" id="5157125">]</span><span class="builtintype" id="5157126">byte</span><span class="op" id="5157130">)</span>&nbsp;<span class="builtintype" id="5157132">string</span>&nbsp;<span class="op" id="5157139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157142">if</span>&nbsp;<span class="builtinfunc" id="5157145">len</span><span class="op" id="5157148">(</span><span class="ident" id="5157149">data</span><span class="op" id="5157153">)</span>&nbsp;<span class="op" id="5157155">&gt;</span>&nbsp;<span class="ident" id="5157157">sniffLen</span>&nbsp;<span class="op" id="5157166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157170">data</span>&nbsp;<span class="op" id="5157175">=</span>&nbsp;<span class="ident" id="5157177">data</span><span class="op" id="5157181">[</span><span class="op" id="5157182">:</span><span class="ident" id="5157183">sniffLen</span><span class="op" id="5157191">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5157194">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5157198">//&nbsp;Index&nbsp;of&nbsp;the&nbsp;first&nbsp;non-whitespace&nbsp;byte&nbsp;in&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157250">firstNonWS</span>&nbsp;<span class="op" id="5157261">:=</span>&nbsp;<span class="num" id="5157264">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157267">for</span>&nbsp;<span class="op" id="5157271">;</span>&nbsp;<span class="ident" id="5157273">firstNonWS</span>&nbsp;<span class="op" id="5157284">&lt;</span>&nbsp;<span class="builtinfunc" id="5157286">len</span><span class="op" id="5157289">(</span><span class="ident" id="5157290">data</span><span class="op" id="5157294">)</span>&nbsp;<span class="op" id="5157296">&amp;&amp;</span>&nbsp;<span class="ident" id="5157299">isWS</span><span class="op" id="5157303">(</span><span class="ident" id="5157304">data</span><span class="op" id="5157308">[</span><span class="ident" id="5157309">firstNonWS</span><span class="op" id="5157319">]</span><span class="op" id="5157320">)</span><span class="op" id="5157321">;</span>&nbsp;<span class="ident" id="5157323">firstNonWS</span><span class="op" id="5157333">++</span>&nbsp;<span class="op" id="5157336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5157339">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157343">for</span>&nbsp;<span class="ident" id="5157347">_</span><span class="op" id="5157348">,</span>&nbsp;<span class="ident" id="5157350">sig</span>&nbsp;<span class="op" id="5157354">:=</span>&nbsp;<span class="keyword" id="5157357">range</span>&nbsp;<span class="ident" id="5157363">sniffSignatures</span>&nbsp;<span class="op" id="5157379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157383">if</span>&nbsp;<span class="ident" id="5157386">ct</span>&nbsp;<span class="op" id="5157389">:=</span>&nbsp;<span class="ident" id="5157392">sig</span><span class="op" id="5157395">.</span><span class="ident" id="5157396">match</span><span class="op" id="5157401">(</span><span class="ident" id="5157402">data</span><span class="op" id="5157406">,</span>&nbsp;<span class="ident" id="5157408">firstNonWS</span><span class="op" id="5157418">)</span><span class="op" id="5157419">;</span>&nbsp;<span class="ident" id="5157421">ct</span>&nbsp;<span class="op" id="5157424">!=</span>&nbsp;<span class="string" id="5157427">&#34;&#34;</span>&nbsp;<span class="op" id="5157430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157435">return</span>&nbsp;<span class="ident" id="5157442">ct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5157447">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5157450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157454">return</span>&nbsp;<span class="string" id="5157461">&#34;application/octet-stream&#34;</span>&nbsp;<span class="comment" id="5157488">//&nbsp;fallback</span><br>
<span class="lineno"></span><span class="op" id="5157500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="5157503">func</span>&nbsp;<span class="ident" id="5157508">isWS</span><span class="op" id="5157512">(</span><span class="ident" id="5157513">b</span>&nbsp;<span class="builtintype" id="5157515">byte</span><span class="op" id="5157519">)</span>&nbsp;<span class="builtintype" id="5157521">bool</span>&nbsp;<span class="op" id="5157526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5157529">return</span>&nbsp;<span class="ident" id="5157536">bytes</span><span class="op" id="5157541">.</span><span class="ident" id="5157542">IndexByte</span><span class="op" id="5157551">(</span><span class="op" id="5157552">[</span><span class="op" id="5157553">]</span><span class="builtintype" id="5157554">byte</span><span class="op" id="5157558">(</span><span class="string" id="5157559">&#34;\t\n\x0C\r&nbsp;&#34;</span><span class="op" id="5157572">)</span><span class="op" id="5157573">,</span>&nbsp;<span class="ident" id="5157575">b</span><span class="op" id="5157576">)</span>&nbsp;<span class="op" id="5157578">!=</span>&nbsp;<span class="op" id="5157581">-</span><span class="num" id="5157582">1</span><br>
<span class="lineno"></span><span class="op" id="5157584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5157587">type</span>&nbsp;<span class="ident" id="5157592">sniffSig</span>&nbsp;<span class="keyword" id="5157601">interface</span>&nbsp;<span class="op" id="5157611">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5157614">//&nbsp;match&nbsp;returns&nbsp;the&nbsp;MIME&nbsp;type&nbsp;of&nbsp;the&nbsp;data,&nbsp;or&nbsp;&#34;&#34;&nbsp;if&nbsp;unknown.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157677">match</span><span class="op" id="5157682">(</span><span class="ident" id="5157683">data</span>&nbsp;<span class="op" id="5157688">[</span><span class="op" id="5157689">]</span><span class="builtintype" id="5157690">byte</span><span class="op" id="5157694">,</span>&nbsp;<span class="ident" id="5157696">firstNonWS</span>&nbsp;<span class="builtintype" id="5157707">int</span><span class="op" id="5157710">)</span>&nbsp;<span class="builtintype" id="5157712">string</span><br>
<span class="lineno"></span><span class="op" id="5157719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5157722">//&nbsp;Data&nbsp;matching&nbsp;the&nbsp;table&nbsp;in&nbsp;section&nbsp;6.</span><br>
<span class="lineno">50</span><span class="keyword" id="5157763">var</span>&nbsp;<span class="ident" id="5157767">sniffSignatures</span>&nbsp;<span class="op" id="5157783">=</span>&nbsp;<span class="op" id="5157785">[</span><span class="op" id="5157786">]</span><span class="ident" id="5157787">sniffSig</span><span class="op" id="5157795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157798">htmlSig</span><span class="op" id="5157805">(</span><span class="string" id="5157806">&#34;&lt;!DOCTYPE&nbsp;HTML&#34;</span><span class="op" id="5157822">)</span><span class="op" id="5157823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157826">htmlSig</span><span class="op" id="5157833">(</span><span class="string" id="5157834">&#34;&lt;HTML&#34;</span><span class="op" id="5157841">)</span><span class="op" id="5157842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157845">htmlSig</span><span class="op" id="5157852">(</span><span class="string" id="5157853">&#34;&lt;HEAD&#34;</span><span class="op" id="5157860">)</span><span class="op" id="5157861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157864">htmlSig</span><span class="op" id="5157871">(</span><span class="string" id="5157872">&#34;&lt;SCRIPT&#34;</span><span class="op" id="5157881">)</span><span class="op" id="5157882">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157885">htmlSig</span><span class="op" id="5157892">(</span><span class="string" id="5157893">&#34;&lt;IFRAME&#34;</span><span class="op" id="5157902">)</span><span class="op" id="5157903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157906">htmlSig</span><span class="op" id="5157913">(</span><span class="string" id="5157914">&#34;&lt;H1&#34;</span><span class="op" id="5157919">)</span><span class="op" id="5157920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157923">htmlSig</span><span class="op" id="5157930">(</span><span class="string" id="5157931">&#34;&lt;DIV&#34;</span><span class="op" id="5157937">)</span><span class="op" id="5157938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157941">htmlSig</span><span class="op" id="5157948">(</span><span class="string" id="5157949">&#34;&lt;FONT&#34;</span><span class="op" id="5157956">)</span><span class="op" id="5157957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157960">htmlSig</span><span class="op" id="5157967">(</span><span class="string" id="5157968">&#34;&lt;TABLE&#34;</span><span class="op" id="5157976">)</span><span class="op" id="5157977">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157980">htmlSig</span><span class="op" id="5157987">(</span><span class="string" id="5157988">&#34;&lt;A&#34;</span><span class="op" id="5157992">)</span><span class="op" id="5157993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5157996">htmlSig</span><span class="op" id="5158003">(</span><span class="string" id="5158004">&#34;&lt;STYLE&#34;</span><span class="op" id="5158012">)</span><span class="op" id="5158013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158016">htmlSig</span><span class="op" id="5158023">(</span><span class="string" id="5158024">&#34;&lt;TITLE&#34;</span><span class="op" id="5158032">)</span><span class="op" id="5158033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158036">htmlSig</span><span class="op" id="5158043">(</span><span class="string" id="5158044">&#34;&lt;B&#34;</span><span class="op" id="5158048">)</span><span class="op" id="5158049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158052">htmlSig</span><span class="op" id="5158059">(</span><span class="string" id="5158060">&#34;&lt;BODY&#34;</span><span class="op" id="5158067">)</span><span class="op" id="5158068">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158071">htmlSig</span><span class="op" id="5158078">(</span><span class="string" id="5158079">&#34;&lt;BR&#34;</span><span class="op" id="5158084">)</span><span class="op" id="5158085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158088">htmlSig</span><span class="op" id="5158095">(</span><span class="string" id="5158096">&#34;&lt;P&#34;</span><span class="op" id="5158100">)</span><span class="op" id="5158101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158104">htmlSig</span><span class="op" id="5158111">(</span><span class="string" id="5158112">&#34;&lt;!--&#34;</span><span class="op" id="5158118">)</span><span class="op" id="5158119">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158123">&amp;</span><span class="ident" id="5158124">maskedSig</span><span class="op" id="5158133">{</span><span class="ident" id="5158134">mask</span><span class="op" id="5158138">:</span>&nbsp;<span class="op" id="5158140">[</span><span class="op" id="5158141">]</span><span class="builtintype" id="5158142">byte</span><span class="op" id="5158146">(</span><span class="string" id="5158147">&#34;\xFF\xFF\xFF\xFF\xFF&#34;</span><span class="op" id="5158169">)</span><span class="op" id="5158170">,</span>&nbsp;<span class="ident" id="5158172">pat</span><span class="op" id="5158175">:</span>&nbsp;<span class="op" id="5158177">[</span><span class="op" id="5158178">]</span><span class="builtintype" id="5158179">byte</span><span class="op" id="5158183">(</span><span class="string" id="5158184">&#34;&lt;?xml&#34;</span><span class="op" id="5158191">)</span><span class="op" id="5158192">,</span>&nbsp;<span class="ident" id="5158194">skipWS</span><span class="op" id="5158200">:</span>&nbsp;<span class="builtintype" id="5158202">true</span><span class="op" id="5158206">,</span>&nbsp;<span class="ident" id="5158208">ct</span><span class="op" id="5158210">:</span>&nbsp;<span class="string" id="5158212">&#34;text/xml;&nbsp;charset=utf-8&#34;</span><span class="op" id="5158237">}</span><span class="op" id="5158238">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158242">&amp;</span><span class="ident" id="5158243">exactSig</span><span class="op" id="5158251">{</span><span class="op" id="5158252">[</span><span class="op" id="5158253">]</span><span class="builtintype" id="5158254">byte</span><span class="op" id="5158258">(</span><span class="string" id="5158259">&#34;%PDF-&#34;</span><span class="op" id="5158266">)</span><span class="op" id="5158267">,</span>&nbsp;<span class="string" id="5158269">&#34;application/pdf&#34;</span><span class="op" id="5158286">}</span><span class="op" id="5158287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158290">&amp;</span><span class="ident" id="5158291">exactSig</span><span class="op" id="5158299">{</span><span class="op" id="5158300">[</span><span class="op" id="5158301">]</span><span class="builtintype" id="5158302">byte</span><span class="op" id="5158306">(</span><span class="string" id="5158307">&#34;%!PS-Adobe-&#34;</span><span class="op" id="5158320">)</span><span class="op" id="5158321">,</span>&nbsp;<span class="string" id="5158323">&#34;application/postscript&#34;</span><span class="op" id="5158347">}</span><span class="op" id="5158348">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5158352">//&nbsp;UTF&nbsp;BOMs.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158366">&amp;</span><span class="ident" id="5158367">maskedSig</span><span class="op" id="5158376">{</span><span class="ident" id="5158377">mask</span><span class="op" id="5158381">:</span>&nbsp;<span class="op" id="5158383">[</span><span class="op" id="5158384">]</span><span class="builtintype" id="5158385">byte</span><span class="op" id="5158389">(</span><span class="string" id="5158390">&#34;\xFF\xFF\x00\x00&#34;</span><span class="op" id="5158408">)</span><span class="op" id="5158409">,</span>&nbsp;<span class="ident" id="5158411">pat</span><span class="op" id="5158414">:</span>&nbsp;<span class="op" id="5158416">[</span><span class="op" id="5158417">]</span><span class="builtintype" id="5158418">byte</span><span class="op" id="5158422">(</span><span class="string" id="5158423">&#34;\xFE\xFF\x00\x00&#34;</span><span class="op" id="5158441">)</span><span class="op" id="5158442">,</span>&nbsp;<span class="ident" id="5158444">ct</span><span class="op" id="5158446">:</span>&nbsp;<span class="string" id="5158448">&#34;text/plain;&nbsp;charset=utf-16be&#34;</span><span class="op" id="5158478">}</span><span class="op" id="5158479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158482">&amp;</span><span class="ident" id="5158483">maskedSig</span><span class="op" id="5158492">{</span><span class="ident" id="5158493">mask</span><span class="op" id="5158497">:</span>&nbsp;<span class="op" id="5158499">[</span><span class="op" id="5158500">]</span><span class="builtintype" id="5158501">byte</span><span class="op" id="5158505">(</span><span class="string" id="5158506">&#34;\xFF\xFF\x00\x00&#34;</span><span class="op" id="5158524">)</span><span class="op" id="5158525">,</span>&nbsp;<span class="ident" id="5158527">pat</span><span class="op" id="5158530">:</span>&nbsp;<span class="op" id="5158532">[</span><span class="op" id="5158533">]</span><span class="builtintype" id="5158534">byte</span><span class="op" id="5158538">(</span><span class="string" id="5158539">&#34;\xFF\xFE\x00\x00&#34;</span><span class="op" id="5158557">)</span><span class="op" id="5158558">,</span>&nbsp;<span class="ident" id="5158560">ct</span><span class="op" id="5158562">:</span>&nbsp;<span class="string" id="5158564">&#34;text/plain;&nbsp;charset=utf-16le&#34;</span><span class="op" id="5158594">}</span><span class="op" id="5158595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158598">&amp;</span><span class="ident" id="5158599">maskedSig</span><span class="op" id="5158608">{</span><span class="ident" id="5158609">mask</span><span class="op" id="5158613">:</span>&nbsp;<span class="op" id="5158615">[</span><span class="op" id="5158616">]</span><span class="builtintype" id="5158617">byte</span><span class="op" id="5158621">(</span><span class="string" id="5158622">&#34;\xFF\xFF\xFF\x00&#34;</span><span class="op" id="5158640">)</span><span class="op" id="5158641">,</span>&nbsp;<span class="ident" id="5158643">pat</span><span class="op" id="5158646">:</span>&nbsp;<span class="op" id="5158648">[</span><span class="op" id="5158649">]</span><span class="builtintype" id="5158650">byte</span><span class="op" id="5158654">(</span><span class="string" id="5158655">&#34;\xEF\xBB\xBF\x00&#34;</span><span class="op" id="5158673">)</span><span class="op" id="5158674">,</span>&nbsp;<span class="ident" id="5158676">ct</span><span class="op" id="5158678">:</span>&nbsp;<span class="string" id="5158680">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="5158707">}</span><span class="op" id="5158708">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158712">&amp;</span><span class="ident" id="5158713">exactSig</span><span class="op" id="5158721">{</span><span class="op" id="5158722">[</span><span class="op" id="5158723">]</span><span class="builtintype" id="5158724">byte</span><span class="op" id="5158728">(</span><span class="string" id="5158729">&#34;GIF87a&#34;</span><span class="op" id="5158737">)</span><span class="op" id="5158738">,</span>&nbsp;<span class="string" id="5158740">&#34;image/gif&#34;</span><span class="op" id="5158751">}</span><span class="op" id="5158752">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158755">&amp;</span><span class="ident" id="5158756">exactSig</span><span class="op" id="5158764">{</span><span class="op" id="5158765">[</span><span class="op" id="5158766">]</span><span class="builtintype" id="5158767">byte</span><span class="op" id="5158771">(</span><span class="string" id="5158772">&#34;GIF89a&#34;</span><span class="op" id="5158780">)</span><span class="op" id="5158781">,</span>&nbsp;<span class="string" id="5158783">&#34;image/gif&#34;</span><span class="op" id="5158794">}</span><span class="op" id="5158795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158798">&amp;</span><span class="ident" id="5158799">exactSig</span><span class="op" id="5158807">{</span><span class="op" id="5158808">[</span><span class="op" id="5158809">]</span><span class="builtintype" id="5158810">byte</span><span class="op" id="5158814">(</span><span class="string" id="5158815">&#34;\x89\x50\x4E\x47\x0D\x0A\x1A\x0A&#34;</span><span class="op" id="5158849">)</span><span class="op" id="5158850">,</span>&nbsp;<span class="string" id="5158852">&#34;image/png&#34;</span><span class="op" id="5158863">}</span><span class="op" id="5158864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158867">&amp;</span><span class="ident" id="5158868">exactSig</span><span class="op" id="5158876">{</span><span class="op" id="5158877">[</span><span class="op" id="5158878">]</span><span class="builtintype" id="5158879">byte</span><span class="op" id="5158883">(</span><span class="string" id="5158884">&#34;\xFF\xD8\xFF&#34;</span><span class="op" id="5158898">)</span><span class="op" id="5158899">,</span>&nbsp;<span class="string" id="5158901">&#34;image/jpeg&#34;</span><span class="op" id="5158913">}</span><span class="op" id="5158914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158917">&amp;</span><span class="ident" id="5158918">exactSig</span><span class="op" id="5158926">{</span><span class="op" id="5158927">[</span><span class="op" id="5158928">]</span><span class="builtintype" id="5158929">byte</span><span class="op" id="5158933">(</span><span class="string" id="5158934">&#34;BM&#34;</span><span class="op" id="5158938">)</span><span class="op" id="5158939">,</span>&nbsp;<span class="string" id="5158941">&#34;image/bmp&#34;</span><span class="op" id="5158952">}</span><span class="op" id="5158953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5158956">&amp;</span><span class="ident" id="5158957">maskedSig</span><span class="op" id="5158966">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5158970">mask</span><span class="op" id="5158974">:</span>&nbsp;<span class="op" id="5158976">[</span><span class="op" id="5158977">]</span><span class="builtintype" id="5158978">byte</span><span class="op" id="5158982">(</span><span class="string" id="5158983">&#34;\xFF\xFF\xFF\xFF\x00\x00\x00\x00\xFF\xFF\xFF\xFF\xFF\xFF&#34;</span><span class="op" id="5159041">)</span><span class="op" id="5159042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159046">pat</span><span class="op" id="5159049">:</span>&nbsp;&nbsp;<span class="op" id="5159052">[</span><span class="op" id="5159053">]</span><span class="builtintype" id="5159054">byte</span><span class="op" id="5159058">(</span><span class="string" id="5159059">&#34;RIFF\x00\x00\x00\x00WEBPVP&#34;</span><span class="op" id="5159087">)</span><span class="op" id="5159088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159092">ct</span><span class="op" id="5159094">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5159098">&#34;image/webp&#34;</span><span class="op" id="5159110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159113">}</span><span class="op" id="5159114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159117">&amp;</span><span class="ident" id="5159118">exactSig</span><span class="op" id="5159126">{</span><span class="op" id="5159127">[</span><span class="op" id="5159128">]</span><span class="builtintype" id="5159129">byte</span><span class="op" id="5159133">(</span><span class="string" id="5159134">&#34;\x00\x00\x01\x00&#34;</span><span class="op" id="5159152">)</span><span class="op" id="5159153">,</span>&nbsp;<span class="string" id="5159155">&#34;image/vnd.microsoft.icon&#34;</span><span class="op" id="5159181">}</span><span class="op" id="5159182">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159185">&amp;</span><span class="ident" id="5159186">exactSig</span><span class="op" id="5159194">{</span><span class="op" id="5159195">[</span><span class="op" id="5159196">]</span><span class="builtintype" id="5159197">byte</span><span class="op" id="5159201">(</span><span class="string" id="5159202">&#34;\x4F\x67\x67\x53\x00&#34;</span><span class="op" id="5159224">)</span><span class="op" id="5159225">,</span>&nbsp;<span class="string" id="5159227">&#34;application/ogg&#34;</span><span class="op" id="5159244">}</span><span class="op" id="5159245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159248">&amp;</span><span class="ident" id="5159249">maskedSig</span><span class="op" id="5159258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159262">mask</span><span class="op" id="5159266">:</span>&nbsp;<span class="op" id="5159268">[</span><span class="op" id="5159269">]</span><span class="builtintype" id="5159270">byte</span><span class="op" id="5159274">(</span><span class="string" id="5159275">&#34;\xFF\xFF\xFF\xFF\x00\x00\x00\x00\xFF\xFF\xFF\xFF&#34;</span><span class="op" id="5159325">)</span><span class="op" id="5159326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159330">pat</span><span class="op" id="5159333">:</span>&nbsp;&nbsp;<span class="op" id="5159336">[</span><span class="op" id="5159337">]</span><span class="builtintype" id="5159338">byte</span><span class="op" id="5159342">(</span><span class="string" id="5159343">&#34;RIFF\x00\x00\x00\x00WAVE&#34;</span><span class="op" id="5159369">)</span><span class="op" id="5159370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159374">ct</span><span class="op" id="5159376">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5159380">&#34;audio/wave&#34;</span><span class="op" id="5159392">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159395">}</span><span class="op" id="5159396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159399">&amp;</span><span class="ident" id="5159400">exactSig</span><span class="op" id="5159408">{</span><span class="op" id="5159409">[</span><span class="op" id="5159410">]</span><span class="builtintype" id="5159411">byte</span><span class="op" id="5159415">(</span><span class="string" id="5159416">&#34;\x1A\x45\xDF\xA3&#34;</span><span class="op" id="5159434">)</span><span class="op" id="5159435">,</span>&nbsp;<span class="string" id="5159437">&#34;video/webm&#34;</span><span class="op" id="5159449">}</span><span class="op" id="5159450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159453">&amp;</span><span class="ident" id="5159454">exactSig</span><span class="op" id="5159462">{</span><span class="op" id="5159463">[</span><span class="op" id="5159464">]</span><span class="builtintype" id="5159465">byte</span><span class="op" id="5159469">(</span><span class="string" id="5159470">&#34;\x52\x61\x72\x20\x1A\x07\x00&#34;</span><span class="op" id="5159500">)</span><span class="op" id="5159501">,</span>&nbsp;<span class="string" id="5159503">&#34;application/x-rar-compressed&#34;</span><span class="op" id="5159533">}</span><span class="op" id="5159534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159537">&amp;</span><span class="ident" id="5159538">exactSig</span><span class="op" id="5159546">{</span><span class="op" id="5159547">[</span><span class="op" id="5159548">]</span><span class="builtintype" id="5159549">byte</span><span class="op" id="5159553">(</span><span class="string" id="5159554">&#34;\x50\x4B\x03\x04&#34;</span><span class="op" id="5159572">)</span><span class="op" id="5159573">,</span>&nbsp;<span class="string" id="5159575">&#34;application/zip&#34;</span><span class="op" id="5159592">}</span><span class="op" id="5159593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159596">&amp;</span><span class="ident" id="5159597">exactSig</span><span class="op" id="5159605">{</span><span class="op" id="5159606">[</span><span class="op" id="5159607">]</span><span class="builtintype" id="5159608">byte</span><span class="op" id="5159612">(</span><span class="string" id="5159613">&#34;\x1F\x8B\x08&#34;</span><span class="op" id="5159627">)</span><span class="op" id="5159628">,</span>&nbsp;<span class="string" id="5159630">&#34;application/x-gzip&#34;</span><span class="op" id="5159650">}</span><span class="op" id="5159651">,</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5159655">//&nbsp;TODO(dsymonds):&nbsp;Re-enable&nbsp;this&nbsp;when&nbsp;the&nbsp;spec&nbsp;is&nbsp;sorted&nbsp;w.r.t.&nbsp;MP4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5159726">//mp4Sig(0),</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159741">textSig</span><span class="op" id="5159748">(</span><span class="num" id="5159749">0</span><span class="op" id="5159750">)</span><span class="op" id="5159751">,</span>&nbsp;<span class="comment" id="5159753">//&nbsp;should&nbsp;be&nbsp;last</span><br>
<span class="lineno">105</span><span class="op" id="5159771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5159774">type</span>&nbsp;<span class="ident" id="5159779">exactSig</span>&nbsp;<span class="keyword" id="5159788">struct</span>&nbsp;<span class="op" id="5159795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159798">sig</span>&nbsp;<span class="op" id="5159802">[</span><span class="op" id="5159803">]</span><span class="builtintype" id="5159804">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159810">ct</span>&nbsp;&nbsp;<span class="builtintype" id="5159814">string</span><br>
<span class="lineno">110</span><span class="op" id="5159821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5159824">func</span>&nbsp;<span class="op" id="5159829">(</span><span class="ident" id="5159830">e</span>&nbsp;<span class="op" id="5159832">*</span><span class="ident" id="5159833">exactSig</span><span class="op" id="5159841">)</span>&nbsp;<span class="ident" id="5159843">match</span><span class="op" id="5159848">(</span><span class="ident" id="5159849">data</span>&nbsp;<span class="op" id="5159854">[</span><span class="op" id="5159855">]</span><span class="builtintype" id="5159856">byte</span><span class="op" id="5159860">,</span>&nbsp;<span class="ident" id="5159862">firstNonWS</span>&nbsp;<span class="builtintype" id="5159873">int</span><span class="op" id="5159876">)</span>&nbsp;<span class="builtintype" id="5159878">string</span>&nbsp;<span class="op" id="5159885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5159888">if</span>&nbsp;<span class="ident" id="5159891">bytes</span><span class="op" id="5159896">.</span><span class="ident" id="5159897">HasPrefix</span><span class="op" id="5159906">(</span><span class="ident" id="5159907">data</span><span class="op" id="5159911">,</span>&nbsp;<span class="ident" id="5159913">e</span><span class="op" id="5159914">.</span><span class="ident" id="5159915">sig</span><span class="op" id="5159918">)</span>&nbsp;<span class="op" id="5159920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5159924">return</span>&nbsp;<span class="ident" id="5159931">e</span><span class="op" id="5159932">.</span><span class="ident" id="5159933">ct</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5159937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5159940">return</span>&nbsp;<span class="string" id="5159947">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="5159950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5159953">type</span>&nbsp;<span class="ident" id="5159958">maskedSig</span>&nbsp;<span class="keyword" id="5159968">struct</span>&nbsp;<span class="op" id="5159975">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159978">mask</span><span class="op" id="5159982">,</span>&nbsp;<span class="ident" id="5159984">pat</span>&nbsp;<span class="op" id="5159988">[</span><span class="op" id="5159989">]</span><span class="builtintype" id="5159990">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5159996">skipWS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5160006">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160012">ct</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5160022">string</span><br>
<span class="lineno"></span><span class="op" id="5160029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5160032">func</span>&nbsp;<span class="op" id="5160037">(</span><span class="ident" id="5160038">m</span>&nbsp;<span class="op" id="5160040">*</span><span class="ident" id="5160041">maskedSig</span><span class="op" id="5160050">)</span>&nbsp;<span class="ident" id="5160052">match</span><span class="op" id="5160057">(</span><span class="ident" id="5160058">data</span>&nbsp;<span class="op" id="5160063">[</span><span class="op" id="5160064">]</span><span class="builtintype" id="5160065">byte</span><span class="op" id="5160069">,</span>&nbsp;<span class="ident" id="5160071">firstNonWS</span>&nbsp;<span class="builtintype" id="5160082">int</span><span class="op" id="5160085">)</span>&nbsp;<span class="builtintype" id="5160087">string</span>&nbsp;<span class="op" id="5160094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160097">if</span>&nbsp;<span class="ident" id="5160100">m</span><span class="op" id="5160101">.</span><span class="ident" id="5160102">skipWS</span>&nbsp;<span class="op" id="5160109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160113">data</span>&nbsp;<span class="op" id="5160118">=</span>&nbsp;<span class="ident" id="5160120">data</span><span class="op" id="5160124">[</span><span class="ident" id="5160125">firstNonWS</span><span class="op" id="5160135">:</span><span class="op" id="5160136">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160142">if</span>&nbsp;<span class="builtinfunc" id="5160145">len</span><span class="op" id="5160148">(</span><span class="ident" id="5160149">data</span><span class="op" id="5160153">)</span>&nbsp;<span class="op" id="5160155">&lt;</span>&nbsp;<span class="builtinfunc" id="5160157">len</span><span class="op" id="5160160">(</span><span class="ident" id="5160161">m</span><span class="op" id="5160162">.</span><span class="ident" id="5160163">mask</span><span class="op" id="5160167">)</span>&nbsp;<span class="op" id="5160169">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160173">return</span>&nbsp;<span class="string" id="5160180">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160187">for</span>&nbsp;<span class="ident" id="5160191">i</span><span class="op" id="5160192">,</span>&nbsp;<span class="ident" id="5160194">mask</span>&nbsp;<span class="op" id="5160199">:=</span>&nbsp;<span class="keyword" id="5160202">range</span>&nbsp;<span class="ident" id="5160208">m</span><span class="op" id="5160209">.</span><span class="ident" id="5160210">mask</span>&nbsp;<span class="op" id="5160215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160219">db</span>&nbsp;<span class="op" id="5160222">:=</span>&nbsp;<span class="ident" id="5160225">data</span><span class="op" id="5160229">[</span><span class="ident" id="5160230">i</span><span class="op" id="5160231">]</span>&nbsp;<span class="op" id="5160233">&amp;</span>&nbsp;<span class="ident" id="5160235">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160242">if</span>&nbsp;<span class="ident" id="5160245">db</span>&nbsp;<span class="op" id="5160248">!=</span>&nbsp;<span class="ident" id="5160251">m</span><span class="op" id="5160252">.</span><span class="ident" id="5160253">pat</span><span class="op" id="5160256">[</span><span class="ident" id="5160257">i</span><span class="op" id="5160258">]</span>&nbsp;<span class="op" id="5160260">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160265">return</span>&nbsp;<span class="string" id="5160272">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160283">return</span>&nbsp;<span class="ident" id="5160290">m</span><span class="op" id="5160291">.</span><span class="ident" id="5160292">ct</span><br>
<span class="lineno"></span><span class="op" id="5160295">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="5160298">type</span>&nbsp;<span class="ident" id="5160303">htmlSig</span>&nbsp;<span class="op" id="5160311">[</span><span class="op" id="5160312">]</span><span class="builtintype" id="5160313">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5160319">func</span>&nbsp;<span class="op" id="5160324">(</span><span class="ident" id="5160325">h</span>&nbsp;<span class="ident" id="5160327">htmlSig</span><span class="op" id="5160334">)</span>&nbsp;<span class="ident" id="5160336">match</span><span class="op" id="5160341">(</span><span class="ident" id="5160342">data</span>&nbsp;<span class="op" id="5160347">[</span><span class="op" id="5160348">]</span><span class="builtintype" id="5160349">byte</span><span class="op" id="5160353">,</span>&nbsp;<span class="ident" id="5160355">firstNonWS</span>&nbsp;<span class="builtintype" id="5160366">int</span><span class="op" id="5160369">)</span>&nbsp;<span class="builtintype" id="5160371">string</span>&nbsp;<span class="op" id="5160378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160381">data</span>&nbsp;<span class="op" id="5160386">=</span>&nbsp;<span class="ident" id="5160388">data</span><span class="op" id="5160392">[</span><span class="ident" id="5160393">firstNonWS</span><span class="op" id="5160403">:</span><span class="op" id="5160404">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160407">if</span>&nbsp;<span class="builtinfunc" id="5160410">len</span><span class="op" id="5160413">(</span><span class="ident" id="5160414">data</span><span class="op" id="5160418">)</span>&nbsp;<span class="op" id="5160420">&lt;</span>&nbsp;<span class="builtinfunc" id="5160422">len</span><span class="op" id="5160425">(</span><span class="ident" id="5160426">h</span><span class="op" id="5160427">)</span><span class="op" id="5160428">+</span><span class="num" id="5160429">1</span>&nbsp;<span class="op" id="5160431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160435">return</span>&nbsp;<span class="string" id="5160442">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160449">for</span>&nbsp;<span class="ident" id="5160453">i</span><span class="op" id="5160454">,</span>&nbsp;<span class="ident" id="5160456">b</span>&nbsp;<span class="op" id="5160458">:=</span>&nbsp;<span class="keyword" id="5160461">range</span>&nbsp;<span class="ident" id="5160467">h</span>&nbsp;<span class="op" id="5160469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160473">db</span>&nbsp;<span class="op" id="5160476">:=</span>&nbsp;<span class="ident" id="5160479">data</span><span class="op" id="5160483">[</span><span class="ident" id="5160484">i</span><span class="op" id="5160485">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160489">if</span>&nbsp;<span class="string" id="5160492">&#39;A&#39;</span>&nbsp;<span class="op" id="5160496">&lt;=</span>&nbsp;<span class="ident" id="5160499">b</span>&nbsp;<span class="op" id="5160501">&amp;&amp;</span>&nbsp;<span class="ident" id="5160504">b</span>&nbsp;<span class="op" id="5160506">&lt;=</span>&nbsp;<span class="string" id="5160509">&#39;Z&#39;</span>&nbsp;<span class="op" id="5160513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160518">db</span>&nbsp;<span class="op" id="5160521">&amp;=</span>&nbsp;<span class="num" id="5160524">0xDF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160535">if</span>&nbsp;<span class="ident" id="5160538">b</span>&nbsp;<span class="op" id="5160540">!=</span>&nbsp;<span class="ident" id="5160543">db</span>&nbsp;<span class="op" id="5160546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160551">return</span>&nbsp;<span class="string" id="5160558">&#34;&#34;</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5160569">//&nbsp;Next&nbsp;byte&nbsp;must&nbsp;be&nbsp;space&nbsp;or&nbsp;right&nbsp;angle&nbsp;bracket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160621">if</span>&nbsp;<span class="ident" id="5160624">db</span>&nbsp;<span class="op" id="5160627">:=</span>&nbsp;<span class="ident" id="5160630">data</span><span class="op" id="5160634">[</span><span class="builtinfunc" id="5160635">len</span><span class="op" id="5160638">(</span><span class="ident" id="5160639">h</span><span class="op" id="5160640">)</span><span class="op" id="5160641">]</span><span class="op" id="5160642">;</span>&nbsp;<span class="ident" id="5160644">db</span>&nbsp;<span class="op" id="5160647">!=</span>&nbsp;<span class="string" id="5160650">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5160654">&amp;&amp;</span>&nbsp;<span class="ident" id="5160657">db</span>&nbsp;<span class="op" id="5160660">!=</span>&nbsp;<span class="string" id="5160663">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="5160667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160671">return</span>&nbsp;<span class="string" id="5160678">&#34;&#34;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160685">return</span>&nbsp;<span class="string" id="5160692">&#34;text/html;&nbsp;charset=utf-8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5160719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5160722">type</span>&nbsp;<span class="ident" id="5160727">mp4Sig</span>&nbsp;<span class="builtintype" id="5160734">int</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="5160739">func</span>&nbsp;<span class="op" id="5160744">(</span><span class="ident" id="5160745">mp4Sig</span><span class="op" id="5160751">)</span>&nbsp;<span class="ident" id="5160753">match</span><span class="op" id="5160758">(</span><span class="ident" id="5160759">data</span>&nbsp;<span class="op" id="5160764">[</span><span class="op" id="5160765">]</span><span class="builtintype" id="5160766">byte</span><span class="op" id="5160770">,</span>&nbsp;<span class="ident" id="5160772">firstNonWS</span>&nbsp;<span class="builtintype" id="5160783">int</span><span class="op" id="5160786">)</span>&nbsp;<span class="builtintype" id="5160788">string</span>&nbsp;<span class="op" id="5160795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5160798">//&nbsp;c.f.&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160820">if</span>&nbsp;<span class="builtinfunc" id="5160823">len</span><span class="op" id="5160826">(</span><span class="ident" id="5160827">data</span><span class="op" id="5160831">)</span>&nbsp;<span class="op" id="5160833">&lt;</span>&nbsp;<span class="num" id="5160835">8</span>&nbsp;<span class="op" id="5160837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160841">return</span>&nbsp;<span class="string" id="5160848">&#34;&#34;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5160855">boxSize</span>&nbsp;<span class="op" id="5160863">:=</span>&nbsp;<span class="builtintype" id="5160866">int</span><span class="op" id="5160869">(</span><span class="ident" id="5160870">binary</span><span class="op" id="5160876">.</span><span class="ident" id="5160877">BigEndian</span><span class="op" id="5160886">.</span><span class="ident" id="5160887">Uint32</span><span class="op" id="5160893">(</span><span class="ident" id="5160894">data</span><span class="op" id="5160898">[</span><span class="op" id="5160899">:</span><span class="num" id="5160900">4</span><span class="op" id="5160901">]</span><span class="op" id="5160902">)</span><span class="op" id="5160903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160906">if</span>&nbsp;<span class="ident" id="5160909">boxSize</span><span class="op" id="5160916">%</span><span class="num" id="5160917">4</span>&nbsp;<span class="op" id="5160919">!=</span>&nbsp;<span class="num" id="5160922">0</span>&nbsp;<span class="op" id="5160924">||</span>&nbsp;<span class="builtinfunc" id="5160927">len</span><span class="op" id="5160930">(</span><span class="ident" id="5160931">data</span><span class="op" id="5160935">)</span>&nbsp;<span class="op" id="5160937">&lt;</span>&nbsp;<span class="ident" id="5160939">boxSize</span>&nbsp;<span class="op" id="5160947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160951">return</span>&nbsp;<span class="string" id="5160958">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5160962">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5160965">if</span>&nbsp;<span class="op" id="5160968">!</span><span class="ident" id="5160969">bytes</span><span class="op" id="5160974">.</span><span class="ident" id="5160975">Equal</span><span class="op" id="5160980">(</span><span class="ident" id="5160981">data</span><span class="op" id="5160985">[</span><span class="num" id="5160986">4</span><span class="op" id="5160987">:</span><span class="num" id="5160988">8</span><span class="op" id="5160989">]</span><span class="op" id="5160990">,</span>&nbsp;<span class="op" id="5160992">[</span><span class="op" id="5160993">]</span><span class="builtintype" id="5160994">byte</span><span class="op" id="5160998">(</span><span class="string" id="5160999">&#34;ftyp&#34;</span><span class="op" id="5161005">)</span><span class="op" id="5161006">)</span>&nbsp;<span class="op" id="5161008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161012">return</span>&nbsp;<span class="string" id="5161019">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5161023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161026">for</span>&nbsp;<span class="ident" id="5161030">st</span>&nbsp;<span class="op" id="5161033">:=</span>&nbsp;<span class="num" id="5161036">8</span><span class="op" id="5161037">;</span>&nbsp;<span class="ident" id="5161039">st</span>&nbsp;<span class="op" id="5161042">&lt;</span>&nbsp;<span class="ident" id="5161044">boxSize</span><span class="op" id="5161051">;</span>&nbsp;<span class="ident" id="5161053">st</span>&nbsp;<span class="op" id="5161056">+=</span>&nbsp;<span class="num" id="5161059">4</span>&nbsp;<span class="op" id="5161061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161065">if</span>&nbsp;<span class="ident" id="5161068">st</span>&nbsp;<span class="op" id="5161071">==</span>&nbsp;<span class="num" id="5161074">12</span>&nbsp;<span class="op" id="5161077">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5161082">//&nbsp;minor&nbsp;version&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161109">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5161120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5161124">seg</span>&nbsp;<span class="op" id="5161128">:=</span>&nbsp;<span class="builtintype" id="5161131">string</span><span class="op" id="5161137">(</span><span class="ident" id="5161138">data</span><span class="op" id="5161142">[</span><span class="ident" id="5161143">st</span>&nbsp;<span class="op" id="5161146">:</span>&nbsp;<span class="ident" id="5161148">st</span><span class="op" id="5161150">+</span><span class="num" id="5161151">3</span><span class="op" id="5161152">]</span><span class="op" id="5161153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161157">switch</span>&nbsp;<span class="ident" id="5161164">seg</span>&nbsp;<span class="op" id="5161168">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161172">case</span>&nbsp;<span class="string" id="5161177">&#34;mp4&#34;</span><span class="op" id="5161182">,</span>&nbsp;<span class="string" id="5161184">&#34;iso&#34;</span><span class="op" id="5161189">,</span>&nbsp;<span class="string" id="5161191">&#34;M4V&#34;</span><span class="op" id="5161196">,</span>&nbsp;<span class="string" id="5161198">&#34;M4P&#34;</span><span class="op" id="5161203">,</span>&nbsp;<span class="string" id="5161205">&#34;M4B&#34;</span><span class="op" id="5161210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161215">return</span>&nbsp;<span class="string" id="5161222">&#34;video/mp4&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5161237">/*&nbsp;The&nbsp;remainder&nbsp;are&nbsp;not&nbsp;in&nbsp;the&nbsp;spec.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcase&nbsp;&#34;M4A&#34;:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;&#34;audio/mp4&#34;<br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcase&nbsp;&#34;3gp&#34;:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;&#34;video/3gpp&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcase&nbsp;&#34;jp2&#34;:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;&#34;image/jp2&#34;&nbsp;//&nbsp;JPEG&nbsp;2000<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5161411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5161414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161417">return</span>&nbsp;<span class="string" id="5161424">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="5161427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="5161430">type</span>&nbsp;<span class="ident" id="5161435">textSig</span>&nbsp;<span class="builtintype" id="5161443">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5161448">func</span>&nbsp;<span class="op" id="5161453">(</span><span class="ident" id="5161454">textSig</span><span class="op" id="5161461">)</span>&nbsp;<span class="ident" id="5161463">match</span><span class="op" id="5161468">(</span><span class="ident" id="5161469">data</span>&nbsp;<span class="op" id="5161474">[</span><span class="op" id="5161475">]</span><span class="builtintype" id="5161476">byte</span><span class="op" id="5161480">,</span>&nbsp;<span class="ident" id="5161482">firstNonWS</span>&nbsp;<span class="builtintype" id="5161493">int</span><span class="op" id="5161496">)</span>&nbsp;<span class="builtintype" id="5161498">string</span>&nbsp;<span class="op" id="5161505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5161508">//&nbsp;c.f.&nbsp;section&nbsp;5,&nbsp;step&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161536">for</span>&nbsp;<span class="ident" id="5161540">_</span><span class="op" id="5161541">,</span>&nbsp;<span class="ident" id="5161543">b</span>&nbsp;<span class="op" id="5161545">:=</span>&nbsp;<span class="keyword" id="5161548">range</span>&nbsp;<span class="ident" id="5161554">data</span><span class="op" id="5161558">[</span><span class="ident" id="5161559">firstNonWS</span><span class="op" id="5161569">:</span><span class="op" id="5161570">]</span>&nbsp;<span class="op" id="5161572">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161576">switch</span>&nbsp;<span class="op" id="5161583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161587">case</span>&nbsp;<span class="num" id="5161592">0x00</span>&nbsp;<span class="op" id="5161597">&lt;=</span>&nbsp;<span class="ident" id="5161600">b</span>&nbsp;<span class="op" id="5161602">&amp;&amp;</span>&nbsp;<span class="ident" id="5161605">b</span>&nbsp;<span class="op" id="5161607">&lt;=</span>&nbsp;<span class="num" id="5161610">0x08</span><span class="op" id="5161614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5161619">b</span>&nbsp;<span class="op" id="5161621">==</span>&nbsp;<span class="num" id="5161624">0x0B</span><span class="op" id="5161628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5161633">0x0E</span>&nbsp;<span class="op" id="5161638">&lt;=</span>&nbsp;<span class="ident" id="5161641">b</span>&nbsp;<span class="op" id="5161643">&amp;&amp;</span>&nbsp;<span class="ident" id="5161646">b</span>&nbsp;<span class="op" id="5161648">&lt;=</span>&nbsp;<span class="num" id="5161651">0x1A</span><span class="op" id="5161655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5161660">0x1C</span>&nbsp;<span class="op" id="5161665">&lt;=</span>&nbsp;<span class="ident" id="5161668">b</span>&nbsp;<span class="op" id="5161670">&amp;&amp;</span>&nbsp;<span class="ident" id="5161673">b</span>&nbsp;<span class="op" id="5161675">&lt;=</span>&nbsp;<span class="num" id="5161678">0x1F</span><span class="op" id="5161682">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161687">return</span>&nbsp;<span class="string" id="5161694">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5161699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5161702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5161705">return</span>&nbsp;<span class="string" id="5161712">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5161740">}</span>
</div>
</body>
</html>
