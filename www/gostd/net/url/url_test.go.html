<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6933459">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6933514">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6933568">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6933619">package</span>&nbsp;<span class="ident" id="6933627">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6933632">import</span>&nbsp;<span class="op" id="6933639">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933642">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933649">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933660">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933671">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6933681">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6933684">type</span>&nbsp;<span class="ident" id="6933689">URLTest</span>&nbsp;<span class="keyword" id="6933697">struct</span>&nbsp;<span class="op" id="6933704">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6933707">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6933717">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6933725">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6933735">*</span><span class="ident" id="6933736">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6933741">roundtrip</span>&nbsp;<span class="builtintype" id="6933751">string</span>&nbsp;<span class="comment" id="6933758">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="6933829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6933832">var</span>&nbsp;<span class="ident" id="6933836">urltests</span>&nbsp;<span class="op" id="6933845">=</span>&nbsp;<span class="op" id="6933847">[</span><span class="op" id="6933848">]</span><span class="ident" id="6933849">URLTest</span><span class="op" id="6933856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6933859">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6933871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933875">&#34;http://www.google.com&#34;</span><span class="op" id="6933898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6933902">&amp;</span><span class="ident" id="6933903">URL</span><span class="op" id="6933906">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6933911">Scheme</span><span class="op" id="6933917">:</span>&nbsp;<span class="string" id="6933919">&#34;http&#34;</span><span class="op" id="6933925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6933930">Host</span><span class="op" id="6933934">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6933938">&#34;www.google.com&#34;</span><span class="op" id="6933954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6933958">}</span><span class="op" id="6933959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933963">&#34;&#34;</span><span class="op" id="6933965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6933968">}</span><span class="op" id="6933969">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6933972">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6933981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6933985">&#34;http://www.google.com/&#34;</span><span class="op" id="6934009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934013">&amp;</span><span class="ident" id="6934014">URL</span><span class="op" id="6934017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934022">Scheme</span><span class="op" id="6934028">:</span>&nbsp;<span class="string" id="6934030">&#34;http&#34;</span><span class="op" id="6934036">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934041">Host</span><span class="op" id="6934045">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934049">&#34;www.google.com&#34;</span><span class="op" id="6934065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934070">Path</span><span class="op" id="6934074">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934078">&#34;/&#34;</span><span class="op" id="6934081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934085">}</span><span class="op" id="6934086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934090">&#34;&#34;</span><span class="op" id="6934092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934095">}</span><span class="op" id="6934096">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6934099">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934130">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="6934170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934174">&amp;</span><span class="ident" id="6934175">URL</span><span class="op" id="6934178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934183">Scheme</span><span class="op" id="6934189">:</span>&nbsp;<span class="string" id="6934191">&#34;http&#34;</span><span class="op" id="6934197">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934202">Host</span><span class="op" id="6934206">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934210">&#34;www.google.com&#34;</span><span class="op" id="6934226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934231">Path</span><span class="op" id="6934235">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934239">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="6934254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934258">}</span><span class="op" id="6934259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934263">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="6934301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934304">}</span><span class="op" id="6934305">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6934308">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934321">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="6934354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934358">&amp;</span><span class="ident" id="6934359">URL</span><span class="op" id="6934362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934367">Scheme</span><span class="op" id="6934373">:</span>&nbsp;<span class="string" id="6934375">&#34;ftp&#34;</span><span class="op" id="6934380">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934385">User</span><span class="op" id="6934389">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6934393">User</span><span class="op" id="6934397">(</span><span class="string" id="6934398">&#34;webmaster&#34;</span><span class="op" id="6934409">)</span><span class="op" id="6934410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934415">Host</span><span class="op" id="6934419">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934423">&#34;www.google.com&#34;</span><span class="op" id="6934439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934444">Path</span><span class="op" id="6934448">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934452">&#34;/&#34;</span><span class="op" id="6934455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934459">}</span><span class="op" id="6934460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934464">&#34;&#34;</span><span class="op" id="6934466">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934469">}</span><span class="op" id="6934470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6934473">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934509">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="6934543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934547">&amp;</span><span class="ident" id="6934548">URL</span><span class="op" id="6934551">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934556">Scheme</span><span class="op" id="6934562">:</span>&nbsp;<span class="string" id="6934564">&#34;ftp&#34;</span><span class="op" id="6934569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934574">User</span><span class="op" id="6934578">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6934582">User</span><span class="op" id="6934586">(</span><span class="string" id="6934587">&#34;john&nbsp;doe&#34;</span><span class="op" id="6934597">)</span><span class="op" id="6934598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934603">Host</span><span class="op" id="6934607">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934611">&#34;www.google.com&#34;</span><span class="op" id="6934627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934632">Path</span><span class="op" id="6934636">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934640">&#34;/&#34;</span><span class="op" id="6934643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934647">}</span><span class="op" id="6934648">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934652">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="6934686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934689">}</span><span class="op" id="6934690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6934693">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934707">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="6934745">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934749">&amp;</span><span class="ident" id="6934750">URL</span><span class="op" id="6934753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934758">Scheme</span><span class="op" id="6934764">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934768">&#34;http&#34;</span><span class="op" id="6934774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934779">Host</span><span class="op" id="6934783">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6934789">&#34;www.google.com&#34;</span><span class="op" id="6934805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934810">Path</span><span class="op" id="6934814">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6934820">&#34;/&#34;</span><span class="op" id="6934823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934828">RawQuery</span><span class="op" id="6934836">:</span>&nbsp;<span class="string" id="6934838">&#34;q=go+language&#34;</span><span class="op" id="6934853">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934857">}</span><span class="op" id="6934858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934862">&#34;&#34;</span><span class="op" id="6934864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934867">}</span><span class="op" id="6934868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6934871">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934911">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6934915">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="6934955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6934959">&amp;</span><span class="ident" id="6934960">URL</span><span class="op" id="6934963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934968">Scheme</span><span class="op" id="6934974">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6934978">&#34;http&#34;</span><span class="op" id="6934984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6934989">Host</span><span class="op" id="6934993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6934999">&#34;www.google.com&#34;</span><span class="op" id="6935015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935020">Path</span><span class="op" id="6935024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6935030">&#34;/&#34;</span><span class="op" id="6935033">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935038">RawQuery</span><span class="op" id="6935046">:</span>&nbsp;<span class="string" id="6935048">&#34;q=go%20language&#34;</span><span class="op" id="6935065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935069">}</span><span class="op" id="6935070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935074">&#34;&#34;</span><span class="op" id="6935076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935079">}</span><span class="op" id="6935080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6935083">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935109">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="6935144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935148">&amp;</span><span class="ident" id="6935149">URL</span><span class="op" id="6935152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935157">Scheme</span><span class="op" id="6935163">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6935167">&#34;http&#34;</span><span class="op" id="6935173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935178">Host</span><span class="op" id="6935182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6935188">&#34;www.google.com&#34;</span><span class="op" id="6935204">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935209">Path</span><span class="op" id="6935213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6935219">&#34;/a&nbsp;b&#34;</span><span class="op" id="6935225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935230">RawQuery</span><span class="op" id="6935238">:</span>&nbsp;<span class="string" id="6935240">&#34;q=c+d&#34;</span><span class="op" id="6935247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935251">}</span><span class="op" id="6935252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935256">&#34;&#34;</span><span class="op" id="6935258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935261">}</span><span class="op" id="6935262">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6935265">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935311">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="6935347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935351">&amp;</span><span class="ident" id="6935352">URL</span><span class="op" id="6935355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935360">Scheme</span><span class="op" id="6935366">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6935370">&#34;http&#34;</span><span class="op" id="6935376">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935381">Opaque</span><span class="op" id="6935387">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6935391">&#34;www.google.com/&#34;</span><span class="op" id="6935408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935413">RawQuery</span><span class="op" id="6935421">:</span>&nbsp;<span class="string" id="6935423">&#34;q=go+language&#34;</span><span class="op" id="6935438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935442">}</span><span class="op" id="6935443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935447">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="6935483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935486">}</span><span class="op" id="6935487">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6935490">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935536">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="6935578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935582">&amp;</span><span class="ident" id="6935583">URL</span><span class="op" id="6935586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935591">Scheme</span><span class="op" id="6935597">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6935601">&#34;http&#34;</span><span class="op" id="6935607">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935612">Opaque</span><span class="op" id="6935618">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6935622">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="6935645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935650">RawQuery</span><span class="op" id="6935658">:</span>&nbsp;<span class="string" id="6935660">&#34;q=go+language&#34;</span><span class="op" id="6935675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935679">}</span><span class="op" id="6935680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935684">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="6935726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935729">}</span><span class="op" id="6935730">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6935733">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935765">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="6935795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935799">&amp;</span><span class="ident" id="6935800">URL</span><span class="op" id="6935803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935808">Scheme</span><span class="op" id="6935814">:</span>&nbsp;<span class="string" id="6935816">&#34;mailto&#34;</span><span class="op" id="6935824">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935829">Path</span><span class="op" id="6935833">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6935837">&#34;/webmaster@golang.org&#34;</span><span class="op" id="6935860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935864">}</span><span class="op" id="6935865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935869">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="6935901">,</span>&nbsp;<span class="comment" id="6935903">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935930">}</span><span class="op" id="6935931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6935934">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6935956">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="6935985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6935989">&amp;</span><span class="ident" id="6935990">URL</span><span class="op" id="6935993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6935998">Scheme</span><span class="op" id="6936004">:</span>&nbsp;<span class="string" id="6936006">&#34;mailto&#34;</span><span class="op" id="6936014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936019">Opaque</span><span class="op" id="6936025">:</span>&nbsp;<span class="string" id="6936027">&#34;webmaster@golang.org&#34;</span><span class="op" id="6936049">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936053">}</span><span class="op" id="6936054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936058">&#34;&#34;</span><span class="op" id="6936060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936063">}</span><span class="op" id="6936064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936067">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936121">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936125">&#34;/foo?query=http://bad&#34;</span><span class="op" id="6936148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936152">&amp;</span><span class="ident" id="6936153">URL</span><span class="op" id="6936156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936161">Path</span><span class="op" id="6936165">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6936171">&#34;/foo&#34;</span><span class="op" id="6936177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936182">RawQuery</span><span class="op" id="6936190">:</span>&nbsp;<span class="string" id="6936192">&#34;query=http://bad&#34;</span><span class="op" id="6936210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936214">}</span><span class="op" id="6936215">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936219">&#34;&#34;</span><span class="op" id="6936221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936224">}</span><span class="op" id="6936225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936228">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936289">&#34;//foo&#34;</span><span class="op" id="6936296">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936300">&amp;</span><span class="ident" id="6936301">URL</span><span class="op" id="6936304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936309">Host</span><span class="op" id="6936313">:</span>&nbsp;<span class="string" id="6936315">&#34;foo&#34;</span><span class="op" id="6936320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936324">}</span><span class="op" id="6936325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936329">&#34;&#34;</span><span class="op" id="6936331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936334">}</span><span class="op" id="6936335">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936338">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936404">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="6936425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936429">&amp;</span><span class="ident" id="6936430">URL</span><span class="op" id="6936433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936438">User</span><span class="op" id="6936442">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6936448">User</span><span class="op" id="6936452">(</span><span class="string" id="6936453">&#34;user&#34;</span><span class="op" id="6936459">)</span><span class="op" id="6936460">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936465">Host</span><span class="op" id="6936469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6936475">&#34;foo&#34;</span><span class="op" id="6936480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936485">Path</span><span class="op" id="6936489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6936495">&#34;/path&#34;</span><span class="op" id="6936502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936507">RawQuery</span><span class="op" id="6936515">:</span>&nbsp;<span class="string" id="6936517">&#34;a=b&#34;</span><span class="op" id="6936522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936526">}</span><span class="op" id="6936527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936531">&#34;&#34;</span><span class="op" id="6936533">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936536">}</span><span class="op" id="6936537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936540">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936615">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936676">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936735">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6936795">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936818">&#34;///threeslashes&#34;</span><span class="op" id="6936835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936839">&amp;</span><span class="ident" id="6936840">URL</span><span class="op" id="6936843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936848">Path</span><span class="op" id="6936852">:</span>&nbsp;<span class="string" id="6936854">&#34;///threeslashes&#34;</span><span class="op" id="6936871">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936875">}</span><span class="op" id="6936876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936880">&#34;&#34;</span><span class="op" id="6936882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936885">}</span><span class="op" id="6936886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6936893">&#34;http://user:password@google.com&#34;</span><span class="op" id="6936926">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6936930">&amp;</span><span class="ident" id="6936931">URL</span><span class="op" id="6936934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936939">Scheme</span><span class="op" id="6936945">:</span>&nbsp;<span class="string" id="6936947">&#34;http&#34;</span><span class="op" id="6936953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6936958">User</span><span class="op" id="6936962">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6936966">UserPassword</span><span class="op" id="6936978">(</span><span class="string" id="6936979">&#34;user&#34;</span><span class="op" id="6936985">,</span>&nbsp;<span class="string" id="6936987">&#34;password&#34;</span><span class="op" id="6936997">)</span><span class="op" id="6936998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937003">Host</span><span class="op" id="6937007">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6937011">&#34;google.com&#34;</span><span class="op" id="6937023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937027">}</span><span class="op" id="6937028">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937032">&#34;http://user:password@google.com&#34;</span><span class="op" id="6937065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937068">}</span><span class="op" id="6937069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6937072">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937128">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="6937161">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937165">&amp;</span><span class="ident" id="6937166">URL</span><span class="op" id="6937169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937174">Scheme</span><span class="op" id="6937180">:</span>&nbsp;<span class="string" id="6937182">&#34;http&#34;</span><span class="op" id="6937188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937193">User</span><span class="op" id="6937197">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6937201">UserPassword</span><span class="op" id="6937213">(</span><span class="string" id="6937214">&#34;j@ne&#34;</span><span class="op" id="6937220">,</span>&nbsp;<span class="string" id="6937222">&#34;password&#34;</span><span class="op" id="6937232">)</span><span class="op" id="6937233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937238">Host</span><span class="op" id="6937242">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6937246">&#34;google.com&#34;</span><span class="op" id="6937258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937262">}</span><span class="op" id="6937263">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937267">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="6937302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937305">}</span><span class="op" id="6937306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6937309">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937365">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="6937398">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937402">&amp;</span><span class="ident" id="6937403">URL</span><span class="op" id="6937406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937411">Scheme</span><span class="op" id="6937417">:</span>&nbsp;<span class="string" id="6937419">&#34;http&#34;</span><span class="op" id="6937425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937430">User</span><span class="op" id="6937434">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6937438">UserPassword</span><span class="op" id="6937450">(</span><span class="string" id="6937451">&#34;jane&#34;</span><span class="op" id="6937457">,</span>&nbsp;<span class="string" id="6937459">&#34;p@ssword&#34;</span><span class="op" id="6937469">)</span><span class="op" id="6937470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937475">Host</span><span class="op" id="6937479">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6937483">&#34;google.com&#34;</span><span class="op" id="6937495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937499">}</span><span class="op" id="6937500">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937504">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="6937539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937542">}</span><span class="op" id="6937543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937550">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="6937594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937598">&amp;</span><span class="ident" id="6937599">URL</span><span class="op" id="6937602">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937607">Scheme</span><span class="op" id="6937613">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6937617">&#34;http&#34;</span><span class="op" id="6937623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937628">User</span><span class="op" id="6937632">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6937638">UserPassword</span><span class="op" id="6937650">(</span><span class="string" id="6937651">&#34;j@ne&#34;</span><span class="op" id="6937657">,</span>&nbsp;<span class="string" id="6937659">&#34;password&#34;</span><span class="op" id="6937669">)</span><span class="op" id="6937670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937675">Host</span><span class="op" id="6937679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6937685">&#34;google.com&#34;</span><span class="op" id="6937697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937702">Path</span><span class="op" id="6937706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6937712">&#34;/p@th&#34;</span><span class="op" id="6937719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937724">RawQuery</span><span class="op" id="6937732">:</span>&nbsp;<span class="string" id="6937734">&#34;q=@go&#34;</span><span class="op" id="6937741">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937745">}</span><span class="op" id="6937746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937750">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="6937796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937799">}</span><span class="op" id="6937800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937807">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="6937849">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937853">&amp;</span><span class="ident" id="6937854">URL</span><span class="op" id="6937857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937862">Scheme</span><span class="op" id="6937868">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6937872">&#34;http&#34;</span><span class="op" id="6937878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937883">Host</span><span class="op" id="6937887">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6937893">&#34;www.google.com&#34;</span><span class="op" id="6937909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937914">Path</span><span class="op" id="6937918">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6937924">&#34;/&#34;</span><span class="op" id="6937927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937932">RawQuery</span><span class="op" id="6937940">:</span>&nbsp;<span class="string" id="6937942">&#34;q=go+language&#34;</span><span class="op" id="6937957">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6937962">Fragment</span><span class="op" id="6937970">:</span>&nbsp;<span class="string" id="6937972">&#34;foo&#34;</span><span class="op" id="6937977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937981">}</span><span class="op" id="6937982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937986">&#34;&#34;</span><span class="op" id="6937988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937991">}</span><span class="op" id="6937992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6937995">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6937999">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="6938047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938051">&amp;</span><span class="ident" id="6938052">URL</span><span class="op" id="6938055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938060">Scheme</span><span class="op" id="6938066">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6938070">&#34;http&#34;</span><span class="op" id="6938076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938081">Host</span><span class="op" id="6938085">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6938091">&#34;www.google.com&#34;</span><span class="op" id="6938107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938112">Path</span><span class="op" id="6938116">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6938122">&#34;/&#34;</span><span class="op" id="6938125">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938130">RawQuery</span><span class="op" id="6938138">:</span>&nbsp;<span class="string" id="6938140">&#34;q=go+language&#34;</span><span class="op" id="6938155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938160">Fragment</span><span class="op" id="6938168">:</span>&nbsp;<span class="string" id="6938170">&#34;foo&amp;bar&#34;</span><span class="op" id="6938179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938183">}</span><span class="op" id="6938184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938188">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="6938234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938237">}</span><span class="op" id="6938238">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938245">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="6938271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938275">&amp;</span><span class="ident" id="6938276">URL</span><span class="op" id="6938279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938284">Scheme</span><span class="op" id="6938290">:</span>&nbsp;<span class="string" id="6938292">&#34;file&#34;</span><span class="op" id="6938298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938303">Host</span><span class="op" id="6938307">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6938311">&#34;&#34;</span><span class="op" id="6938313">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938318">Path</span><span class="op" id="6938322">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6938326">&#34;/home/adg/rabbits&#34;</span><span class="op" id="6938345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938349">}</span><span class="op" id="6938350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938354">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="6938380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938383">}</span><span class="op" id="6938384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6938387">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6938437">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938495">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="6938522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938526">&amp;</span><span class="ident" id="6938527">URL</span><span class="op" id="6938530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938535">Scheme</span><span class="op" id="6938541">:</span>&nbsp;<span class="string" id="6938543">&#34;file&#34;</span><span class="op" id="6938549">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938554">Host</span><span class="op" id="6938558">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6938562">&#34;&#34;</span><span class="op" id="6938564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938569">Path</span><span class="op" id="6938573">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6938577">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="6938597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938601">}</span><span class="op" id="6938602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938606">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="6938633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938636">}</span><span class="op" id="6938637">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6938640">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938672">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="6938701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938705">&amp;</span><span class="ident" id="6938706">URL</span><span class="op" id="6938709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938714">Scheme</span><span class="op" id="6938720">:</span>&nbsp;<span class="string" id="6938722">&#34;mailto&#34;</span><span class="op" id="6938730">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938735">Opaque</span><span class="op" id="6938741">:</span>&nbsp;<span class="string" id="6938743">&#34;webmaster@golang.org&#34;</span><span class="op" id="6938765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938769">}</span><span class="op" id="6938770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938774">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="6938803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938806">}</span><span class="op" id="6938807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6938810">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938832">&#34;a/b/c&#34;</span><span class="op" id="6938839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938843">&amp;</span><span class="ident" id="6938844">URL</span><span class="op" id="6938847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938852">Path</span><span class="op" id="6938856">:</span>&nbsp;<span class="string" id="6938858">&#34;a/b/c&#34;</span><span class="op" id="6938865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938869">}</span><span class="op" id="6938870">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938874">&#34;a/b/c&#34;</span><span class="op" id="6938881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938884">}</span><span class="op" id="6938885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6938888">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6938933">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="6938969">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6938973">&amp;</span><span class="ident" id="6938974">URL</span><span class="op" id="6938977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6938982">Scheme</span><span class="op" id="6938988">:</span>&nbsp;<span class="string" id="6938990">&#34;http&#34;</span><span class="op" id="6938996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939001">User</span><span class="op" id="6939005">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6939009">UserPassword</span><span class="op" id="6939021">(</span><span class="string" id="6939022">&#34;?am&#34;</span><span class="op" id="6939027">,</span>&nbsp;<span class="string" id="6939029">&#34;pa?sword&#34;</span><span class="op" id="6939039">)</span><span class="op" id="6939040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939045">Host</span><span class="op" id="6939049">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6939053">&#34;google.com&#34;</span><span class="op" id="6939065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939069">}</span><span class="op" id="6939070">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6939074">&#34;&#34;</span><span class="op" id="6939076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939079">}</span><span class="op" id="6939080">,</span><br>
<span class="lineno"></span><span class="op" id="6939082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6939085">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="6939147">func</span>&nbsp;<span class="ident" id="6939152">ufmt</span><span class="op" id="6939156">(</span><span class="ident" id="6939157">u</span>&nbsp;<span class="op" id="6939159">*</span><span class="ident" id="6939160">URL</span><span class="op" id="6939163">)</span>&nbsp;<span class="builtintype" id="6939165">string</span>&nbsp;<span class="op" id="6939172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939175">var</span>&nbsp;<span class="ident" id="6939179">user</span><span class="op" id="6939183">,</span>&nbsp;<span class="ident" id="6939185">pass</span>&nbsp;<span class="keyword" id="6939190">interface</span><span class="op" id="6939199">{</span><span class="op" id="6939200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939203">if</span>&nbsp;<span class="ident" id="6939206">u</span><span class="op" id="6939207">.</span><span class="ident" id="6939208">User</span>&nbsp;<span class="op" id="6939213">!=</span>&nbsp;<span class="ident" id="6939216">nil</span>&nbsp;<span class="op" id="6939220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939224">user</span>&nbsp;<span class="op" id="6939229">=</span>&nbsp;<span class="ident" id="6939231">u</span><span class="op" id="6939232">.</span><span class="ident" id="6939233">User</span><span class="op" id="6939237">.</span><span class="ident" id="6939238">Username</span><span class="op" id="6939246">(</span><span class="op" id="6939247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939251">if</span>&nbsp;<span class="ident" id="6939254">p</span><span class="op" id="6939255">,</span>&nbsp;<span class="ident" id="6939257">ok</span>&nbsp;<span class="op" id="6939260">:=</span>&nbsp;<span class="ident" id="6939263">u</span><span class="op" id="6939264">.</span><span class="ident" id="6939265">User</span><span class="op" id="6939269">.</span><span class="ident" id="6939270">Password</span><span class="op" id="6939278">(</span><span class="op" id="6939279">)</span><span class="op" id="6939280">;</span>&nbsp;<span class="ident" id="6939282">ok</span>&nbsp;<span class="op" id="6939285">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939290">pass</span>&nbsp;<span class="op" id="6939295">=</span>&nbsp;<span class="ident" id="6939297">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939307">return</span>&nbsp;<span class="ident" id="6939314">fmt</span><span class="op" id="6939317">.</span><span class="ident" id="6939318">Sprintf</span><span class="op" id="6939325">(</span><span class="string" id="6939326">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="6939404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939408">u</span><span class="op" id="6939409">.</span><span class="ident" id="6939410">Opaque</span><span class="op" id="6939416">,</span>&nbsp;<span class="ident" id="6939418">u</span><span class="op" id="6939419">.</span><span class="ident" id="6939420">Scheme</span><span class="op" id="6939426">,</span>&nbsp;<span class="ident" id="6939428">user</span><span class="op" id="6939432">,</span>&nbsp;<span class="ident" id="6939434">pass</span><span class="op" id="6939438">,</span>&nbsp;<span class="ident" id="6939440">u</span><span class="op" id="6939441">.</span><span class="ident" id="6939442">Host</span><span class="op" id="6939446">,</span>&nbsp;<span class="ident" id="6939448">u</span><span class="op" id="6939449">.</span><span class="ident" id="6939450">Path</span><span class="op" id="6939454">,</span>&nbsp;<span class="ident" id="6939456">u</span><span class="op" id="6939457">.</span><span class="ident" id="6939458">RawQuery</span><span class="op" id="6939466">,</span>&nbsp;<span class="ident" id="6939468">u</span><span class="op" id="6939469">.</span><span class="ident" id="6939470">Fragment</span><span class="op" id="6939478">)</span><br>
<span class="lineno">305</span><span class="op" id="6939480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6939483">func</span>&nbsp;<span class="ident" id="6939488">DoTest</span><span class="op" id="6939494">(</span><span class="ident" id="6939495">t</span>&nbsp;<span class="op" id="6939497">*</span><span class="ident" id="6939498">testing</span><span class="op" id="6939505">.</span><span class="ident" id="6939506">T</span><span class="op" id="6939507">,</span>&nbsp;<span class="ident" id="6939509">parse</span>&nbsp;<span class="keyword" id="6939515">func</span><span class="op" id="6939519">(</span><span class="builtintype" id="6939520">string</span><span class="op" id="6939526">)</span>&nbsp;<span class="op" id="6939528">(</span><span class="op" id="6939529">*</span><span class="ident" id="6939530">URL</span><span class="op" id="6939533">,</span>&nbsp;<span class="builtintype" id="6939535">error</span><span class="op" id="6939540">)</span><span class="op" id="6939541">,</span>&nbsp;<span class="ident" id="6939543">name</span>&nbsp;<span class="builtintype" id="6939548">string</span><span class="op" id="6939554">,</span>&nbsp;<span class="ident" id="6939556">tests</span>&nbsp;<span class="op" id="6939562">[</span><span class="op" id="6939563">]</span><span class="ident" id="6939564">URLTest</span><span class="op" id="6939571">)</span>&nbsp;<span class="op" id="6939573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939576">for</span>&nbsp;<span class="ident" id="6939580">_</span><span class="op" id="6939581">,</span>&nbsp;<span class="ident" id="6939583">tt</span>&nbsp;<span class="op" id="6939586">:=</span>&nbsp;<span class="keyword" id="6939589">range</span>&nbsp;<span class="ident" id="6939595">tests</span>&nbsp;<span class="op" id="6939601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939605">u</span><span class="op" id="6939606">,</span>&nbsp;<span class="ident" id="6939608">err</span>&nbsp;<span class="op" id="6939612">:=</span>&nbsp;<span class="ident" id="6939615">parse</span><span class="op" id="6939620">(</span><span class="ident" id="6939621">tt</span><span class="op" id="6939623">.</span><span class="ident" id="6939624">in</span><span class="op" id="6939626">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939630">if</span>&nbsp;<span class="ident" id="6939633">err</span>&nbsp;<span class="op" id="6939637">!=</span>&nbsp;<span class="ident" id="6939640">nil</span>&nbsp;<span class="op" id="6939644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939649">t</span><span class="op" id="6939650">.</span><span class="ident" id="6939651">Errorf</span><span class="op" id="6939657">(</span><span class="string" id="6939658">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="6939684">,</span>&nbsp;<span class="ident" id="6939686">name</span><span class="op" id="6939690">,</span>&nbsp;<span class="ident" id="6939692">tt</span><span class="op" id="6939694">.</span><span class="ident" id="6939695">in</span><span class="op" id="6939697">,</span>&nbsp;<span class="ident" id="6939699">err</span><span class="op" id="6939702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939707">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939722">if</span>&nbsp;<span class="op" id="6939725">!</span><span class="ident" id="6939726">reflect</span><span class="op" id="6939733">.</span><span class="ident" id="6939734">DeepEqual</span><span class="op" id="6939743">(</span><span class="ident" id="6939744">u</span><span class="op" id="6939745">,</span>&nbsp;<span class="ident" id="6939747">tt</span><span class="op" id="6939749">.</span><span class="ident" id="6939750">out</span><span class="op" id="6939753">)</span>&nbsp;<span class="op" id="6939755">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939760">t</span><span class="op" id="6939761">.</span><span class="ident" id="6939762">Errorf</span><span class="op" id="6939768">(</span><span class="string" id="6939769">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="6939802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939808">name</span><span class="op" id="6939812">,</span>&nbsp;<span class="ident" id="6939814">tt</span><span class="op" id="6939816">.</span><span class="ident" id="6939817">in</span><span class="op" id="6939819">,</span>&nbsp;<span class="ident" id="6939821">ufmt</span><span class="op" id="6939825">(</span><span class="ident" id="6939826">u</span><span class="op" id="6939827">)</span><span class="op" id="6939828">,</span>&nbsp;<span class="ident" id="6939830">ufmt</span><span class="op" id="6939834">(</span><span class="ident" id="6939835">tt</span><span class="op" id="6939837">.</span><span class="ident" id="6939838">out</span><span class="op" id="6939841">)</span><span class="op" id="6939842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6939849">}</span><br>
<span class="lineno"></span><span class="op" id="6939851">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="6939854">func</span>&nbsp;<span class="ident" id="6939859">BenchmarkString</span><span class="op" id="6939874">(</span><span class="ident" id="6939875">b</span>&nbsp;<span class="op" id="6939877">*</span><span class="ident" id="6939878">testing</span><span class="op" id="6939885">.</span><span class="ident" id="6939886">B</span><span class="op" id="6939887">)</span>&nbsp;<span class="op" id="6939889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939892">b</span><span class="op" id="6939893">.</span><span class="ident" id="6939894">StopTimer</span><span class="op" id="6939903">(</span><span class="op" id="6939904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939907">b</span><span class="op" id="6939908">.</span><span class="ident" id="6939909">ReportAllocs</span><span class="op" id="6939921">(</span><span class="op" id="6939922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939925">for</span>&nbsp;<span class="ident" id="6939929">_</span><span class="op" id="6939930">,</span>&nbsp;<span class="ident" id="6939932">tt</span>&nbsp;<span class="op" id="6939935">:=</span>&nbsp;<span class="keyword" id="6939938">range</span>&nbsp;<span class="ident" id="6939944">urltests</span>&nbsp;<span class="op" id="6939953">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6939957">u</span><span class="op" id="6939958">,</span>&nbsp;<span class="ident" id="6939960">err</span>&nbsp;<span class="op" id="6939964">:=</span>&nbsp;<span class="ident" id="6939967">Parse</span><span class="op" id="6939972">(</span><span class="ident" id="6939973">tt</span><span class="op" id="6939975">.</span><span class="ident" id="6939976">in</span><span class="op" id="6939978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6939982">if</span>&nbsp;<span class="ident" id="6939985">err</span>&nbsp;<span class="op" id="6939989">!=</span>&nbsp;<span class="ident" id="6939992">nil</span>&nbsp;<span class="op" id="6939996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940001">b</span><span class="op" id="6940002">.</span><span class="ident" id="6940003">Errorf</span><span class="op" id="6940009">(</span><span class="string" id="6940010">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="6940039">,</span>&nbsp;<span class="ident" id="6940041">tt</span><span class="op" id="6940043">.</span><span class="ident" id="6940044">in</span><span class="op" id="6940046">,</span>&nbsp;<span class="ident" id="6940048">err</span><span class="op" id="6940051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940056">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940067">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940071">if</span>&nbsp;<span class="ident" id="6940074">tt</span><span class="op" id="6940076">.</span><span class="ident" id="6940077">roundtrip</span>&nbsp;<span class="op" id="6940087">==</span>&nbsp;<span class="string" id="6940090">&#34;&#34;</span>&nbsp;<span class="op" id="6940093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940098">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940113">b</span><span class="op" id="6940114">.</span><span class="ident" id="6940115">StartTimer</span><span class="op" id="6940125">(</span><span class="op" id="6940126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940130">var</span>&nbsp;<span class="ident" id="6940134">g</span>&nbsp;<span class="builtintype" id="6940136">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940145">for</span>&nbsp;<span class="ident" id="6940149">i</span>&nbsp;<span class="op" id="6940151">:=</span>&nbsp;<span class="num" id="6940154">0</span><span class="op" id="6940155">;</span>&nbsp;<span class="ident" id="6940157">i</span>&nbsp;<span class="op" id="6940159">&lt;</span>&nbsp;<span class="ident" id="6940161">b</span><span class="op" id="6940162">.</span><span class="ident" id="6940163">N</span><span class="op" id="6940164">;</span>&nbsp;<span class="ident" id="6940166">i</span><span class="op" id="6940167">++</span>&nbsp;<span class="op" id="6940170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940175">g</span>&nbsp;<span class="op" id="6940177">=</span>&nbsp;<span class="ident" id="6940179">u</span><span class="op" id="6940180">.</span><span class="ident" id="6940181">String</span><span class="op" id="6940187">(</span><span class="op" id="6940188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940196">b</span><span class="op" id="6940197">.</span><span class="ident" id="6940198">StopTimer</span><span class="op" id="6940207">(</span><span class="op" id="6940208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940212">if</span>&nbsp;<span class="ident" id="6940215">w</span>&nbsp;<span class="op" id="6940217">:=</span>&nbsp;<span class="ident" id="6940220">tt</span><span class="op" id="6940222">.</span><span class="ident" id="6940223">roundtrip</span><span class="op" id="6940232">;</span>&nbsp;<span class="ident" id="6940234">g</span>&nbsp;<span class="op" id="6940236">!=</span>&nbsp;<span class="ident" id="6940239">w</span>&nbsp;<span class="op" id="6940241">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940246">b</span><span class="op" id="6940247">.</span><span class="ident" id="6940248">Errorf</span><span class="op" id="6940254">(</span><span class="string" id="6940255">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6940290">,</span>&nbsp;<span class="ident" id="6940292">tt</span><span class="op" id="6940294">.</span><span class="ident" id="6940295">in</span><span class="op" id="6940297">,</span>&nbsp;<span class="ident" id="6940299">g</span><span class="op" id="6940300">,</span>&nbsp;<span class="ident" id="6940302">w</span><span class="op" id="6940303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940310">}</span><br>
<span class="lineno"></span><span class="op" id="6940312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="6940315">func</span>&nbsp;<span class="ident" id="6940320">TestParse</span><span class="op" id="6940329">(</span><span class="ident" id="6940330">t</span>&nbsp;<span class="op" id="6940332">*</span><span class="ident" id="6940333">testing</span><span class="op" id="6940340">.</span><span class="ident" id="6940341">T</span><span class="op" id="6940342">)</span>&nbsp;<span class="op" id="6940344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940347">DoTest</span><span class="op" id="6940353">(</span><span class="ident" id="6940354">t</span><span class="op" id="6940355">,</span>&nbsp;<span class="ident" id="6940357">Parse</span><span class="op" id="6940362">,</span>&nbsp;<span class="string" id="6940364">&#34;Parse&#34;</span><span class="op" id="6940371">,</span>&nbsp;<span class="ident" id="6940373">urltests</span><span class="op" id="6940381">)</span><br>
<span class="lineno"></span><span class="op" id="6940383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6940386">const</span>&nbsp;<span class="ident" id="6940392">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="6940420">=</span>&nbsp;<span class="string" id="6940422">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="6940461">var</span>&nbsp;<span class="ident" id="6940465">parseRequestURLTests</span>&nbsp;<span class="op" id="6940486">=</span>&nbsp;<span class="op" id="6940488">[</span><span class="op" id="6940489">]</span><span class="keyword" id="6940490">struct</span>&nbsp;<span class="op" id="6940497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940500">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6940514">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940522">expectedValid</span>&nbsp;<span class="builtintype" id="6940536">bool</span><br>
<span class="lineno"></span><span class="op" id="6940541">}</span><span class="op" id="6940542">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940545">{</span><span class="string" id="6940546">&#34;http://foo.com&#34;</span><span class="op" id="6940562">,</span>&nbsp;<span class="builtintype" id="6940564">true</span><span class="op" id="6940568">}</span><span class="op" id="6940569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940572">{</span><span class="string" id="6940573">&#34;http://foo.com/&#34;</span><span class="op" id="6940590">,</span>&nbsp;<span class="builtintype" id="6940592">true</span><span class="op" id="6940596">}</span><span class="op" id="6940597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940600">{</span><span class="string" id="6940601">&#34;http://foo.com/path&#34;</span><span class="op" id="6940622">,</span>&nbsp;<span class="builtintype" id="6940624">true</span><span class="op" id="6940628">}</span><span class="op" id="6940629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940632">{</span><span class="string" id="6940633">&#34;/&#34;</span><span class="op" id="6940636">,</span>&nbsp;<span class="builtintype" id="6940638">true</span><span class="op" id="6940642">}</span><span class="op" id="6940643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940646">{</span><span class="ident" id="6940647">pathThatLooksSchemeRelative</span><span class="op" id="6940674">,</span>&nbsp;<span class="builtintype" id="6940676">true</span><span class="op" id="6940680">}</span><span class="op" id="6940681">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940684">{</span><span class="string" id="6940685">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="6940730">,</span>&nbsp;<span class="builtintype" id="6940732">true</span><span class="op" id="6940736">}</span><span class="op" id="6940737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940740">{</span><span class="string" id="6940741">&#34;foo.html&#34;</span><span class="op" id="6940751">,</span>&nbsp;<span class="builtintype" id="6940753">false</span><span class="op" id="6940758">}</span><span class="op" id="6940759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940762">{</span><span class="string" id="6940763">&#34;../dir/&#34;</span><span class="op" id="6940772">,</span>&nbsp;<span class="builtintype" id="6940774">false</span><span class="op" id="6940779">}</span><span class="op" id="6940780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6940783">{</span><span class="string" id="6940784">&#34;*&#34;</span><span class="op" id="6940787">,</span>&nbsp;<span class="builtintype" id="6940789">true</span><span class="op" id="6940793">}</span><span class="op" id="6940794">,</span><br>
<span class="lineno"></span><span class="op" id="6940796">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="6940799">func</span>&nbsp;<span class="ident" id="6940804">TestParseRequestURI</span><span class="op" id="6940823">(</span><span class="ident" id="6940824">t</span>&nbsp;<span class="op" id="6940826">*</span><span class="ident" id="6940827">testing</span><span class="op" id="6940834">.</span><span class="ident" id="6940835">T</span><span class="op" id="6940836">)</span>&nbsp;<span class="op" id="6940838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940841">for</span>&nbsp;<span class="ident" id="6940845">_</span><span class="op" id="6940846">,</span>&nbsp;<span class="ident" id="6940848">test</span>&nbsp;<span class="op" id="6940853">:=</span>&nbsp;<span class="keyword" id="6940856">range</span>&nbsp;<span class="ident" id="6940862">parseRequestURLTests</span>&nbsp;<span class="op" id="6940883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940887">_</span><span class="op" id="6940888">,</span>&nbsp;<span class="ident" id="6940890">err</span>&nbsp;<span class="op" id="6940894">:=</span>&nbsp;<span class="ident" id="6940897">ParseRequestURI</span><span class="op" id="6940912">(</span><span class="ident" id="6940913">test</span><span class="op" id="6940917">.</span><span class="ident" id="6940918">url</span><span class="op" id="6940921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940925">valid</span>&nbsp;<span class="op" id="6940931">:=</span>&nbsp;<span class="ident" id="6940934">err</span>&nbsp;<span class="op" id="6940938">==</span>&nbsp;<span class="ident" id="6940941">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6940947">if</span>&nbsp;<span class="ident" id="6940950">valid</span>&nbsp;<span class="op" id="6940956">!=</span>&nbsp;<span class="ident" id="6940959">test</span><span class="op" id="6940963">.</span><span class="ident" id="6940964">expectedValid</span>&nbsp;<span class="op" id="6940978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6940983">t</span><span class="op" id="6940984">.</span><span class="ident" id="6940985">Errorf</span><span class="op" id="6940991">(</span><span class="string" id="6940992">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6941026">,</span>&nbsp;<span class="ident" id="6941028">test</span><span class="op" id="6941032">.</span><span class="ident" id="6941033">expectedValid</span><span class="op" id="6941046">,</span>&nbsp;<span class="ident" id="6941048">test</span><span class="op" id="6941052">.</span><span class="ident" id="6941053">url</span><span class="op" id="6941056">,</span>&nbsp;<span class="ident" id="6941058">valid</span><span class="op" id="6941063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941074">url</span><span class="op" id="6941077">,</span>&nbsp;<span class="ident" id="6941079">err</span>&nbsp;<span class="op" id="6941083">:=</span>&nbsp;<span class="ident" id="6941086">ParseRequestURI</span><span class="op" id="6941101">(</span><span class="ident" id="6941102">pathThatLooksSchemeRelative</span><span class="op" id="6941129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941132">if</span>&nbsp;<span class="ident" id="6941135">err</span>&nbsp;<span class="op" id="6941139">!=</span>&nbsp;<span class="ident" id="6941142">nil</span>&nbsp;<span class="op" id="6941146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941150">t</span><span class="op" id="6941151">.</span><span class="ident" id="6941152">Fatalf</span><span class="op" id="6941158">(</span><span class="string" id="6941159">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="6941180">,</span>&nbsp;<span class="ident" id="6941182">err</span><span class="op" id="6941185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941191">if</span>&nbsp;<span class="ident" id="6941194">url</span><span class="op" id="6941197">.</span><span class="ident" id="6941198">Path</span>&nbsp;<span class="op" id="6941203">!=</span>&nbsp;<span class="ident" id="6941206">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="6941234">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941238">t</span><span class="op" id="6941239">.</span><span class="ident" id="6941240">Errorf</span><span class="op" id="6941246">(</span><span class="string" id="6941247">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6941273">,</span>&nbsp;<span class="ident" id="6941275">pathThatLooksSchemeRelative</span><span class="op" id="6941302">,</span>&nbsp;<span class="ident" id="6941304">url</span><span class="op" id="6941307">.</span><span class="ident" id="6941308">Path</span><span class="op" id="6941312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941315">}</span><br>
<span class="lineno"></span><span class="op" id="6941317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6941320">func</span>&nbsp;<span class="ident" id="6941325">DoTestString</span><span class="op" id="6941337">(</span><span class="ident" id="6941338">t</span>&nbsp;<span class="op" id="6941340">*</span><span class="ident" id="6941341">testing</span><span class="op" id="6941348">.</span><span class="ident" id="6941349">T</span><span class="op" id="6941350">,</span>&nbsp;<span class="ident" id="6941352">parse</span>&nbsp;<span class="keyword" id="6941358">func</span><span class="op" id="6941362">(</span><span class="builtintype" id="6941363">string</span><span class="op" id="6941369">)</span>&nbsp;<span class="op" id="6941371">(</span><span class="op" id="6941372">*</span><span class="ident" id="6941373">URL</span><span class="op" id="6941376">,</span>&nbsp;<span class="builtintype" id="6941378">error</span><span class="op" id="6941383">)</span><span class="op" id="6941384">,</span>&nbsp;<span class="ident" id="6941386">name</span>&nbsp;<span class="builtintype" id="6941391">string</span><span class="op" id="6941397">,</span>&nbsp;<span class="ident" id="6941399">tests</span>&nbsp;<span class="op" id="6941405">[</span><span class="op" id="6941406">]</span><span class="ident" id="6941407">URLTest</span><span class="op" id="6941414">)</span>&nbsp;<span class="op" id="6941416">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941419">for</span>&nbsp;<span class="ident" id="6941423">_</span><span class="op" id="6941424">,</span>&nbsp;<span class="ident" id="6941426">tt</span>&nbsp;<span class="op" id="6941429">:=</span>&nbsp;<span class="keyword" id="6941432">range</span>&nbsp;<span class="ident" id="6941438">tests</span>&nbsp;<span class="op" id="6941444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941448">u</span><span class="op" id="6941449">,</span>&nbsp;<span class="ident" id="6941451">err</span>&nbsp;<span class="op" id="6941455">:=</span>&nbsp;<span class="ident" id="6941458">parse</span><span class="op" id="6941463">(</span><span class="ident" id="6941464">tt</span><span class="op" id="6941466">.</span><span class="ident" id="6941467">in</span><span class="op" id="6941469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941473">if</span>&nbsp;<span class="ident" id="6941476">err</span>&nbsp;<span class="op" id="6941480">!=</span>&nbsp;<span class="ident" id="6941483">nil</span>&nbsp;<span class="op" id="6941487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941492">t</span><span class="op" id="6941493">.</span><span class="ident" id="6941494">Errorf</span><span class="op" id="6941500">(</span><span class="string" id="6941501">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="6941527">,</span>&nbsp;<span class="ident" id="6941529">name</span><span class="op" id="6941533">,</span>&nbsp;<span class="ident" id="6941535">tt</span><span class="op" id="6941537">.</span><span class="ident" id="6941538">in</span><span class="op" id="6941540">,</span>&nbsp;<span class="ident" id="6941542">err</span><span class="op" id="6941545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941550">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941565">expected</span>&nbsp;<span class="op" id="6941574">:=</span>&nbsp;<span class="ident" id="6941577">tt</span><span class="op" id="6941579">.</span><span class="ident" id="6941580">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941585">if</span>&nbsp;<span class="builtinfunc" id="6941588">len</span><span class="op" id="6941591">(</span><span class="ident" id="6941592">tt</span><span class="op" id="6941594">.</span><span class="ident" id="6941595">roundtrip</span><span class="op" id="6941604">)</span>&nbsp;<span class="op" id="6941606">&gt;</span>&nbsp;<span class="num" id="6941608">0</span>&nbsp;<span class="op" id="6941610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941615">expected</span>&nbsp;<span class="op" id="6941624">=</span>&nbsp;<span class="ident" id="6941626">tt</span><span class="op" id="6941628">.</span><span class="ident" id="6941629">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941641">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941645">s</span>&nbsp;<span class="op" id="6941647">:=</span>&nbsp;<span class="ident" id="6941650">u</span><span class="op" id="6941651">.</span><span class="ident" id="6941652">String</span><span class="op" id="6941658">(</span><span class="op" id="6941659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6941663">if</span>&nbsp;<span class="ident" id="6941666">s</span>&nbsp;<span class="op" id="6941668">!=</span>&nbsp;<span class="ident" id="6941671">expected</span>&nbsp;<span class="op" id="6941680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941685">t</span><span class="op" id="6941686">.</span><span class="ident" id="6941687">Errorf</span><span class="op" id="6941693">(</span><span class="string" id="6941694">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="6941731">,</span>&nbsp;<span class="ident" id="6941733">name</span><span class="op" id="6941737">,</span>&nbsp;<span class="ident" id="6941739">tt</span><span class="op" id="6941741">.</span><span class="ident" id="6941742">in</span><span class="op" id="6941744">,</span>&nbsp;<span class="ident" id="6941746">s</span><span class="op" id="6941747">,</span>&nbsp;<span class="ident" id="6941749">expected</span><span class="op" id="6941757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941764">}</span><br>
<span class="lineno">400</span><span class="op" id="6941766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6941769">func</span>&nbsp;<span class="ident" id="6941774">TestURLString</span><span class="op" id="6941787">(</span><span class="ident" id="6941788">t</span>&nbsp;<span class="op" id="6941790">*</span><span class="ident" id="6941791">testing</span><span class="op" id="6941798">.</span><span class="ident" id="6941799">T</span><span class="op" id="6941800">)</span>&nbsp;<span class="op" id="6941802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941805">DoTestString</span><span class="op" id="6941817">(</span><span class="ident" id="6941818">t</span><span class="op" id="6941819">,</span>&nbsp;<span class="ident" id="6941821">Parse</span><span class="op" id="6941826">,</span>&nbsp;<span class="string" id="6941828">&#34;Parse&#34;</span><span class="op" id="6941835">,</span>&nbsp;<span class="ident" id="6941837">urltests</span><span class="op" id="6941845">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6941849">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6941893">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941920">noslash</span>&nbsp;<span class="op" id="6941928">:=</span>&nbsp;<span class="ident" id="6941931">URLTest</span><span class="op" id="6941938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6941942">&#34;http://www.google.com/search&#34;</span><span class="op" id="6941972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6941976">&amp;</span><span class="ident" id="6941977">URL</span><span class="op" id="6941980">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6941985">Scheme</span><span class="op" id="6941991">:</span>&nbsp;<span class="string" id="6941993">&#34;http&#34;</span><span class="op" id="6941999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942004">Host</span><span class="op" id="6942008">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6942012">&#34;www.google.com&#34;</span><span class="op" id="6942028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942033">Path</span><span class="op" id="6942037">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6942041">&#34;search&#34;</span><span class="op" id="6942049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942053">}</span><span class="op" id="6942054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942058">&#34;&#34;</span><span class="op" id="6942060">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942066">s</span>&nbsp;<span class="op" id="6942068">:=</span>&nbsp;<span class="ident" id="6942071">noslash</span><span class="op" id="6942078">.</span><span class="ident" id="6942079">out</span><span class="op" id="6942082">.</span><span class="ident" id="6942083">String</span><span class="op" id="6942089">(</span><span class="op" id="6942090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942093">if</span>&nbsp;<span class="ident" id="6942096">s</span>&nbsp;<span class="op" id="6942098">!=</span>&nbsp;<span class="ident" id="6942101">noslash</span><span class="op" id="6942108">.</span><span class="ident" id="6942109">in</span>&nbsp;<span class="op" id="6942112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942116">t</span><span class="op" id="6942117">.</span><span class="ident" id="6942118">Errorf</span><span class="op" id="6942124">(</span><span class="string" id="6942125">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="6942145">,</span>&nbsp;<span class="ident" id="6942147">noslash</span><span class="op" id="6942154">.</span><span class="ident" id="6942155">in</span><span class="op" id="6942157">,</span>&nbsp;<span class="ident" id="6942159">s</span><span class="op" id="6942160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942163">}</span><br>
<span class="lineno">420</span><span class="op" id="6942165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942168">type</span>&nbsp;<span class="ident" id="6942173">EscapeTest</span>&nbsp;<span class="keyword" id="6942184">struct</span>&nbsp;<span class="op" id="6942191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942194">in</span>&nbsp;&nbsp;<span class="builtintype" id="6942198">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942206">out</span>&nbsp;<span class="builtintype" id="6942210">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942218">err</span>&nbsp;<span class="builtintype" id="6942222">error</span><br>
<span class="lineno"></span><span class="op" id="6942228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942231">var</span>&nbsp;<span class="ident" id="6942235">unescapeTests</span>&nbsp;<span class="op" id="6942249">=</span>&nbsp;<span class="op" id="6942251">[</span><span class="op" id="6942252">]</span><span class="ident" id="6942253">EscapeTest</span><span class="op" id="6942263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942266">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942270">&#34;&#34;</span><span class="op" id="6942272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942276">&#34;&#34;</span><span class="op" id="6942278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942282">nil</span><span class="op" id="6942285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942288">}</span><span class="op" id="6942289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942292">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942296">&#34;abc&#34;</span><span class="op" id="6942301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942305">&#34;abc&#34;</span><span class="op" id="6942310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942314">nil</span><span class="op" id="6942317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942320">}</span><span class="op" id="6942321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942324">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942328">&#34;1%41&#34;</span><span class="op" id="6942334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942338">&#34;1A&#34;</span><span class="op" id="6942342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942346">nil</span><span class="op" id="6942349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942352">}</span><span class="op" id="6942353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942356">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942360">&#34;1%41%42%43&#34;</span><span class="op" id="6942372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942376">&#34;1ABC&#34;</span><span class="op" id="6942382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942386">nil</span><span class="op" id="6942389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942392">}</span><span class="op" id="6942393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942396">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942400">&#34;%4a&#34;</span><span class="op" id="6942405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942409">&#34;J&#34;</span><span class="op" id="6942412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942416">nil</span><span class="op" id="6942419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942422">}</span><span class="op" id="6942423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942426">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942430">&#34;%6F&#34;</span><span class="op" id="6942435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942439">&#34;o&#34;</span><span class="op" id="6942442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942446">nil</span><span class="op" id="6942449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942452">}</span><span class="op" id="6942453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942456">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942460">&#34;%&#34;</span><span class="op" id="6942463">,</span>&nbsp;<span class="comment" id="6942465">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942500">&#34;&#34;</span><span class="op" id="6942502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942506">EscapeError</span><span class="op" id="6942517">(</span><span class="string" id="6942518">&#34;%&#34;</span><span class="op" id="6942521">)</span><span class="op" id="6942522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942525">}</span><span class="op" id="6942526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942529">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942533">&#34;%a&#34;</span><span class="op" id="6942537">,</span>&nbsp;<span class="comment" id="6942539">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942574">&#34;&#34;</span><span class="op" id="6942576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942580">EscapeError</span><span class="op" id="6942591">(</span><span class="string" id="6942592">&#34;%a&#34;</span><span class="op" id="6942596">)</span><span class="op" id="6942597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942600">}</span><span class="op" id="6942601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942604">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942608">&#34;%1&#34;</span><span class="op" id="6942612">,</span>&nbsp;<span class="comment" id="6942614">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942649">&#34;&#34;</span><span class="op" id="6942651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942655">EscapeError</span><span class="op" id="6942666">(</span><span class="string" id="6942667">&#34;%1&#34;</span><span class="op" id="6942671">)</span><span class="op" id="6942672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942675">}</span><span class="op" id="6942676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942679">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942683">&#34;123%45%6&#34;</span><span class="op" id="6942693">,</span>&nbsp;<span class="comment" id="6942695">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942730">&#34;&#34;</span><span class="op" id="6942732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942736">EscapeError</span><span class="op" id="6942747">(</span><span class="string" id="6942748">&#34;%6&#34;</span><span class="op" id="6942752">)</span><span class="op" id="6942753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942756">}</span><span class="op" id="6942757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942760">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942764">&#34;%zzzzz&#34;</span><span class="op" id="6942772">,</span>&nbsp;<span class="comment" id="6942774">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6942798">&#34;&#34;</span><span class="op" id="6942800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942804">EscapeError</span><span class="op" id="6942815">(</span><span class="string" id="6942816">&#34;%zz&#34;</span><span class="op" id="6942821">)</span><span class="op" id="6942822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6942825">}</span><span class="op" id="6942826">,</span><br>
<span class="lineno"></span><span class="op" id="6942828">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="6942831">func</span>&nbsp;<span class="ident" id="6942836">TestUnescape</span><span class="op" id="6942848">(</span><span class="ident" id="6942849">t</span>&nbsp;<span class="op" id="6942851">*</span><span class="ident" id="6942852">testing</span><span class="op" id="6942859">.</span><span class="ident" id="6942860">T</span><span class="op" id="6942861">)</span>&nbsp;<span class="op" id="6942863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942866">for</span>&nbsp;<span class="ident" id="6942870">_</span><span class="op" id="6942871">,</span>&nbsp;<span class="ident" id="6942873">tt</span>&nbsp;<span class="op" id="6942876">:=</span>&nbsp;<span class="keyword" id="6942879">range</span>&nbsp;<span class="ident" id="6942885">unescapeTests</span>&nbsp;<span class="op" id="6942899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6942903">actual</span><span class="op" id="6942909">,</span>&nbsp;<span class="ident" id="6942911">err</span>&nbsp;<span class="op" id="6942915">:=</span>&nbsp;<span class="ident" id="6942918">QueryUnescape</span><span class="op" id="6942931">(</span><span class="ident" id="6942932">tt</span><span class="op" id="6942934">.</span><span class="ident" id="6942935">in</span><span class="op" id="6942937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6942941">if</span>&nbsp;<span class="ident" id="6942944">actual</span>&nbsp;<span class="op" id="6942951">!=</span>&nbsp;<span class="ident" id="6942954">tt</span><span class="op" id="6942956">.</span><span class="ident" id="6942957">out</span>&nbsp;<span class="op" id="6942961">||</span>&nbsp;<span class="op" id="6942964">(</span><span class="ident" id="6942965">err</span>&nbsp;<span class="op" id="6942969">!=</span>&nbsp;<span class="ident" id="6942972">nil</span><span class="op" id="6942975">)</span>&nbsp;<span class="op" id="6942977">!=</span>&nbsp;<span class="op" id="6942980">(</span><span class="ident" id="6942981">tt</span><span class="op" id="6942983">.</span><span class="ident" id="6942984">err</span>&nbsp;<span class="op" id="6942988">!=</span>&nbsp;<span class="ident" id="6942991">nil</span><span class="op" id="6942994">)</span>&nbsp;<span class="op" id="6942996">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943001">t</span><span class="op" id="6943002">.</span><span class="ident" id="6943003">Errorf</span><span class="op" id="6943009">(</span><span class="string" id="6943010">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="6943051">,</span>&nbsp;<span class="ident" id="6943053">tt</span><span class="op" id="6943055">.</span><span class="ident" id="6943056">in</span><span class="op" id="6943058">,</span>&nbsp;<span class="ident" id="6943060">actual</span><span class="op" id="6943066">,</span>&nbsp;<span class="ident" id="6943068">err</span><span class="op" id="6943071">,</span>&nbsp;<span class="ident" id="6943073">tt</span><span class="op" id="6943075">.</span><span class="ident" id="6943076">out</span><span class="op" id="6943079">,</span>&nbsp;<span class="ident" id="6943081">tt</span><span class="op" id="6943083">.</span><span class="ident" id="6943084">err</span><span class="op" id="6943087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943094">}</span><br>
<span class="lineno"></span><span class="op" id="6943096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="6943099">var</span>&nbsp;<span class="ident" id="6943103">escapeTests</span>&nbsp;<span class="op" id="6943115">=</span>&nbsp;<span class="op" id="6943117">[</span><span class="op" id="6943118">]</span><span class="ident" id="6943119">EscapeTest</span><span class="op" id="6943129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943136">&#34;&#34;</span><span class="op" id="6943138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943142">&#34;&#34;</span><span class="op" id="6943144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943148">nil</span><span class="op" id="6943151">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943154">}</span><span class="op" id="6943155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943162">&#34;abc&#34;</span><span class="op" id="6943167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943171">&#34;abc&#34;</span><span class="op" id="6943176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943180">nil</span><span class="op" id="6943183">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943186">}</span><span class="op" id="6943187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943194">&#34;one&nbsp;two&#34;</span><span class="op" id="6943203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943207">&#34;one+two&#34;</span><span class="op" id="6943216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943220">nil</span><span class="op" id="6943223">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943226">}</span><span class="op" id="6943227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943234">&#34;10%&#34;</span><span class="op" id="6943239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943243">&#34;10%25&#34;</span><span class="op" id="6943250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943254">nil</span><span class="op" id="6943257">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943260">}</span><span class="op" id="6943261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943268">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="6943307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943311">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="6943413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943417">nil</span><span class="op" id="6943420">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943423">}</span><span class="op" id="6943424">,</span><br>
<span class="lineno"></span><span class="op" id="6943426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943429">func</span>&nbsp;<span class="ident" id="6943434">TestEscape</span><span class="op" id="6943444">(</span><span class="ident" id="6943445">t</span>&nbsp;<span class="op" id="6943447">*</span><span class="ident" id="6943448">testing</span><span class="op" id="6943455">.</span><span class="ident" id="6943456">T</span><span class="op" id="6943457">)</span>&nbsp;<span class="op" id="6943459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943462">for</span>&nbsp;<span class="ident" id="6943466">_</span><span class="op" id="6943467">,</span>&nbsp;<span class="ident" id="6943469">tt</span>&nbsp;<span class="op" id="6943472">:=</span>&nbsp;<span class="keyword" id="6943475">range</span>&nbsp;<span class="ident" id="6943481">escapeTests</span>&nbsp;<span class="op" id="6943493">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943497">actual</span>&nbsp;<span class="op" id="6943504">:=</span>&nbsp;<span class="ident" id="6943507">QueryEscape</span><span class="op" id="6943518">(</span><span class="ident" id="6943519">tt</span><span class="op" id="6943521">.</span><span class="ident" id="6943522">in</span><span class="op" id="6943524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943528">if</span>&nbsp;<span class="ident" id="6943531">tt</span><span class="op" id="6943533">.</span><span class="ident" id="6943534">out</span>&nbsp;<span class="op" id="6943538">!=</span>&nbsp;<span class="ident" id="6943541">actual</span>&nbsp;<span class="op" id="6943548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943553">t</span><span class="op" id="6943554">.</span><span class="ident" id="6943555">Errorf</span><span class="op" id="6943561">(</span><span class="string" id="6943562">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6943593">,</span>&nbsp;<span class="ident" id="6943595">tt</span><span class="op" id="6943597">.</span><span class="ident" id="6943598">in</span><span class="op" id="6943600">,</span>&nbsp;<span class="ident" id="6943602">actual</span><span class="op" id="6943608">,</span>&nbsp;<span class="ident" id="6943610">tt</span><span class="op" id="6943612">.</span><span class="ident" id="6943613">out</span><span class="op" id="6943616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6943625">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943692">roundtrip</span><span class="op" id="6943701">,</span>&nbsp;<span class="ident" id="6943703">err</span>&nbsp;<span class="op" id="6943707">:=</span>&nbsp;<span class="ident" id="6943710">QueryUnescape</span><span class="op" id="6943723">(</span><span class="ident" id="6943724">actual</span><span class="op" id="6943730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943734">if</span>&nbsp;<span class="ident" id="6943737">roundtrip</span>&nbsp;<span class="op" id="6943747">!=</span>&nbsp;<span class="ident" id="6943750">tt</span><span class="op" id="6943752">.</span><span class="ident" id="6943753">in</span>&nbsp;<span class="op" id="6943756">||</span>&nbsp;<span class="ident" id="6943759">err</span>&nbsp;<span class="op" id="6943763">!=</span>&nbsp;<span class="ident" id="6943766">nil</span>&nbsp;<span class="op" id="6943770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943775">t</span><span class="op" id="6943776">.</span><span class="ident" id="6943777">Errorf</span><span class="op" id="6943783">(</span><span class="string" id="6943784">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="6943825">,</span>&nbsp;<span class="ident" id="6943827">actual</span><span class="op" id="6943833">,</span>&nbsp;<span class="ident" id="6943835">roundtrip</span><span class="op" id="6943844">,</span>&nbsp;<span class="ident" id="6943846">err</span><span class="op" id="6943849">,</span>&nbsp;<span class="ident" id="6943851">tt</span><span class="op" id="6943853">.</span><span class="ident" id="6943854">in</span><span class="op" id="6943856">,</span>&nbsp;<span class="string" id="6943858">&#34;[no&nbsp;error]&#34;</span><span class="op" id="6943870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943874">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943877">}</span><br>
<span class="lineno"></span><span class="op" id="6943879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6943882">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="6943920">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="6943962">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6944015">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="6944098">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944103">type</span>&nbsp;<span class="ident" id="6944108">EncodeQueryTest</span>&nbsp;<span class="keyword" id="6944124">struct</span>&nbsp;<span class="op" id="6944131">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944134">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944143">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944151">expected</span>&nbsp;<span class="builtintype" id="6944160">string</span><br>
<span class="lineno"></span><span class="op" id="6944167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944170">var</span>&nbsp;<span class="ident" id="6944174">encodeQueryTests</span>&nbsp;<span class="op" id="6944191">=</span>&nbsp;<span class="op" id="6944193">[</span><span class="op" id="6944194">]</span><span class="ident" id="6944195">EncodeQueryTest</span><span class="op" id="6944210">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944213">{</span><span class="ident" id="6944214">nil</span><span class="op" id="6944217">,</span>&nbsp;<span class="string" id="6944219">&#34;&#34;</span><span class="op" id="6944221">}</span><span class="op" id="6944222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944225">{</span><span class="ident" id="6944226">Values</span><span class="op" id="6944232">{</span><span class="string" id="6944233">&#34;q&#34;</span><span class="op" id="6944236">:</span>&nbsp;<span class="op" id="6944238">{</span><span class="string" id="6944239">&#34;puppies&#34;</span><span class="op" id="6944248">}</span><span class="op" id="6944249">,</span>&nbsp;<span class="string" id="6944251">&#34;oe&#34;</span><span class="op" id="6944255">:</span>&nbsp;<span class="op" id="6944257">{</span><span class="string" id="6944258">&#34;utf8&#34;</span><span class="op" id="6944264">}</span><span class="op" id="6944265">}</span><span class="op" id="6944266">,</span>&nbsp;<span class="string" id="6944268">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="6944287">}</span><span class="op" id="6944288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944291">{</span><span class="ident" id="6944292">Values</span><span class="op" id="6944298">{</span><span class="string" id="6944299">&#34;q&#34;</span><span class="op" id="6944302">:</span>&nbsp;<span class="op" id="6944304">{</span><span class="string" id="6944305">&#34;dogs&#34;</span><span class="op" id="6944311">,</span>&nbsp;<span class="string" id="6944313">&#34;&amp;&#34;</span><span class="op" id="6944316">,</span>&nbsp;<span class="string" id="6944318">&#34;7&#34;</span><span class="op" id="6944321">}</span><span class="op" id="6944322">}</span><span class="op" id="6944323">,</span>&nbsp;<span class="string" id="6944325">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="6944343">}</span><span class="op" id="6944344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944347">{</span><span class="ident" id="6944348">Values</span><span class="op" id="6944354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944358">&#34;a&#34;</span><span class="op" id="6944361">:</span>&nbsp;<span class="op" id="6944363">{</span><span class="string" id="6944364">&#34;a1&#34;</span><span class="op" id="6944368">,</span>&nbsp;<span class="string" id="6944370">&#34;a2&#34;</span><span class="op" id="6944374">,</span>&nbsp;<span class="string" id="6944376">&#34;a3&#34;</span><span class="op" id="6944380">}</span><span class="op" id="6944381">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944385">&#34;b&#34;</span><span class="op" id="6944388">:</span>&nbsp;<span class="op" id="6944390">{</span><span class="string" id="6944391">&#34;b1&#34;</span><span class="op" id="6944395">,</span>&nbsp;<span class="string" id="6944397">&#34;b2&#34;</span><span class="op" id="6944401">,</span>&nbsp;<span class="string" id="6944403">&#34;b3&#34;</span><span class="op" id="6944407">}</span><span class="op" id="6944408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944412">&#34;c&#34;</span><span class="op" id="6944415">:</span>&nbsp;<span class="op" id="6944417">{</span><span class="string" id="6944418">&#34;c1&#34;</span><span class="op" id="6944422">,</span>&nbsp;<span class="string" id="6944424">&#34;c2&#34;</span><span class="op" id="6944428">,</span>&nbsp;<span class="string" id="6944430">&#34;c3&#34;</span><span class="op" id="6944434">}</span><span class="op" id="6944435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944438">}</span><span class="op" id="6944439">,</span>&nbsp;<span class="string" id="6944441">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="6944487">}</span><span class="op" id="6944488">,</span><br>
<span class="lineno"></span><span class="op" id="6944490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="6944493">func</span>&nbsp;<span class="ident" id="6944498">TestEncodeQuery</span><span class="op" id="6944513">(</span><span class="ident" id="6944514">t</span>&nbsp;<span class="op" id="6944516">*</span><span class="ident" id="6944517">testing</span><span class="op" id="6944524">.</span><span class="ident" id="6944525">T</span><span class="op" id="6944526">)</span>&nbsp;<span class="op" id="6944528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944531">for</span>&nbsp;<span class="ident" id="6944535">_</span><span class="op" id="6944536">,</span>&nbsp;<span class="ident" id="6944538">tt</span>&nbsp;<span class="op" id="6944541">:=</span>&nbsp;<span class="keyword" id="6944544">range</span>&nbsp;<span class="ident" id="6944550">encodeQueryTests</span>&nbsp;<span class="op" id="6944567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944571">if</span>&nbsp;<span class="ident" id="6944574">q</span>&nbsp;<span class="op" id="6944576">:=</span>&nbsp;<span class="ident" id="6944579">tt</span><span class="op" id="6944581">.</span><span class="ident" id="6944582">m</span><span class="op" id="6944583">.</span><span class="ident" id="6944584">Encode</span><span class="op" id="6944590">(</span><span class="op" id="6944591">)</span><span class="op" id="6944592">;</span>&nbsp;<span class="ident" id="6944594">q</span>&nbsp;<span class="op" id="6944596">!=</span>&nbsp;<span class="ident" id="6944599">tt</span><span class="op" id="6944601">.</span><span class="ident" id="6944602">expected</span>&nbsp;<span class="op" id="6944611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944616">t</span><span class="op" id="6944617">.</span><span class="ident" id="6944618">Errorf</span><span class="op" id="6944624">(</span><span class="string" id="6944625">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6944657">,</span>&nbsp;<span class="ident" id="6944659">tt</span><span class="op" id="6944661">.</span><span class="ident" id="6944662">m</span><span class="op" id="6944663">,</span>&nbsp;<span class="ident" id="6944665">q</span><span class="op" id="6944666">,</span>&nbsp;<span class="ident" id="6944668">tt</span><span class="op" id="6944670">.</span><span class="ident" id="6944671">expected</span><span class="op" id="6944679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944683">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944686">}</span><br>
<span class="lineno"></span><span class="op" id="6944688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944691">var</span>&nbsp;<span class="ident" id="6944695">resolvePathTests</span>&nbsp;<span class="op" id="6944712">=</span>&nbsp;<span class="op" id="6944714">[</span><span class="op" id="6944715">]</span><span class="keyword" id="6944716">struct</span>&nbsp;<span class="op" id="6944723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944726">base</span><span class="op" id="6944730">,</span>&nbsp;<span class="ident" id="6944732">ref</span><span class="op" id="6944735">,</span>&nbsp;<span class="ident" id="6944737">expected</span>&nbsp;<span class="builtintype" id="6944746">string</span><br>
<span class="lineno">570</span><span class="op" id="6944753">}</span><span class="op" id="6944754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944757">{</span><span class="string" id="6944758">&#34;a/b&#34;</span><span class="op" id="6944763">,</span>&nbsp;<span class="string" id="6944765">&#34;.&#34;</span><span class="op" id="6944768">,</span>&nbsp;<span class="string" id="6944770">&#34;/a/&#34;</span><span class="op" id="6944775">}</span><span class="op" id="6944776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944779">{</span><span class="string" id="6944780">&#34;a/b&#34;</span><span class="op" id="6944785">,</span>&nbsp;<span class="string" id="6944787">&#34;c&#34;</span><span class="op" id="6944790">,</span>&nbsp;<span class="string" id="6944792">&#34;/a/c&#34;</span><span class="op" id="6944798">}</span><span class="op" id="6944799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944802">{</span><span class="string" id="6944803">&#34;a/b&#34;</span><span class="op" id="6944808">,</span>&nbsp;<span class="string" id="6944810">&#34;..&#34;</span><span class="op" id="6944814">,</span>&nbsp;<span class="string" id="6944816">&#34;/&#34;</span><span class="op" id="6944819">}</span><span class="op" id="6944820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944823">{</span><span class="string" id="6944824">&#34;a/&#34;</span><span class="op" id="6944828">,</span>&nbsp;<span class="string" id="6944830">&#34;..&#34;</span><span class="op" id="6944834">,</span>&nbsp;<span class="string" id="6944836">&#34;/&#34;</span><span class="op" id="6944839">}</span><span class="op" id="6944840">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944843">{</span><span class="string" id="6944844">&#34;a/&#34;</span><span class="op" id="6944848">,</span>&nbsp;<span class="string" id="6944850">&#34;../..&#34;</span><span class="op" id="6944857">,</span>&nbsp;<span class="string" id="6944859">&#34;/&#34;</span><span class="op" id="6944862">}</span><span class="op" id="6944863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944866">{</span><span class="string" id="6944867">&#34;a/b/c&#34;</span><span class="op" id="6944874">,</span>&nbsp;<span class="string" id="6944876">&#34;..&#34;</span><span class="op" id="6944880">,</span>&nbsp;<span class="string" id="6944882">&#34;/a/&#34;</span><span class="op" id="6944887">}</span><span class="op" id="6944888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944891">{</span><span class="string" id="6944892">&#34;a/b/c&#34;</span><span class="op" id="6944899">,</span>&nbsp;<span class="string" id="6944901">&#34;../d&#34;</span><span class="op" id="6944907">,</span>&nbsp;<span class="string" id="6944909">&#34;/a/d&#34;</span><span class="op" id="6944915">}</span><span class="op" id="6944916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944919">{</span><span class="string" id="6944920">&#34;a/b/c&#34;</span><span class="op" id="6944927">,</span>&nbsp;<span class="string" id="6944929">&#34;.././d&#34;</span><span class="op" id="6944937">,</span>&nbsp;<span class="string" id="6944939">&#34;/a/d&#34;</span><span class="op" id="6944945">}</span><span class="op" id="6944946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944949">{</span><span class="string" id="6944950">&#34;a/b&#34;</span><span class="op" id="6944955">,</span>&nbsp;<span class="string" id="6944957">&#34;./..&#34;</span><span class="op" id="6944963">,</span>&nbsp;<span class="string" id="6944965">&#34;/&#34;</span><span class="op" id="6944968">}</span><span class="op" id="6944969">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944972">{</span><span class="string" id="6944973">&#34;a/./b&#34;</span><span class="op" id="6944980">,</span>&nbsp;<span class="string" id="6944982">&#34;.&#34;</span><span class="op" id="6944985">,</span>&nbsp;<span class="string" id="6944987">&#34;/a/&#34;</span><span class="op" id="6944992">}</span><span class="op" id="6944993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944996">{</span><span class="string" id="6944997">&#34;a/../&#34;</span><span class="op" id="6945004">,</span>&nbsp;<span class="string" id="6945006">&#34;.&#34;</span><span class="op" id="6945009">,</span>&nbsp;<span class="string" id="6945011">&#34;/&#34;</span><span class="op" id="6945014">}</span><span class="op" id="6945015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945018">{</span><span class="string" id="6945019">&#34;a/.././b&#34;</span><span class="op" id="6945029">,</span>&nbsp;<span class="string" id="6945031">&#34;c&#34;</span><span class="op" id="6945034">,</span>&nbsp;<span class="string" id="6945036">&#34;/c&#34;</span><span class="op" id="6945040">}</span><span class="op" id="6945041">,</span><br>
<span class="lineno"></span><span class="op" id="6945043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="6945046">func</span>&nbsp;<span class="ident" id="6945051">TestResolvePath</span><span class="op" id="6945066">(</span><span class="ident" id="6945067">t</span>&nbsp;<span class="op" id="6945069">*</span><span class="ident" id="6945070">testing</span><span class="op" id="6945077">.</span><span class="ident" id="6945078">T</span><span class="op" id="6945079">)</span>&nbsp;<span class="op" id="6945081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945084">for</span>&nbsp;<span class="ident" id="6945088">_</span><span class="op" id="6945089">,</span>&nbsp;<span class="ident" id="6945091">test</span>&nbsp;<span class="op" id="6945096">:=</span>&nbsp;<span class="keyword" id="6945099">range</span>&nbsp;<span class="ident" id="6945105">resolvePathTests</span>&nbsp;<span class="op" id="6945122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945126">got</span>&nbsp;<span class="op" id="6945130">:=</span>&nbsp;<span class="ident" id="6945133">resolvePath</span><span class="op" id="6945144">(</span><span class="ident" id="6945145">test</span><span class="op" id="6945149">.</span><span class="ident" id="6945150">base</span><span class="op" id="6945154">,</span>&nbsp;<span class="ident" id="6945156">test</span><span class="op" id="6945160">.</span><span class="ident" id="6945161">ref</span><span class="op" id="6945164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945168">if</span>&nbsp;<span class="ident" id="6945171">got</span>&nbsp;<span class="op" id="6945175">!=</span>&nbsp;<span class="ident" id="6945178">test</span><span class="op" id="6945182">.</span><span class="ident" id="6945183">expected</span>&nbsp;<span class="op" id="6945192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945197">t</span><span class="op" id="6945198">.</span><span class="ident" id="6945199">Errorf</span><span class="op" id="6945205">(</span><span class="string" id="6945206">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6945239">,</span>&nbsp;<span class="ident" id="6945241">test</span><span class="op" id="6945245">.</span><span class="ident" id="6945246">base</span><span class="op" id="6945250">,</span>&nbsp;<span class="ident" id="6945252">test</span><span class="op" id="6945256">.</span><span class="ident" id="6945257">ref</span><span class="op" id="6945260">,</span>&nbsp;<span class="ident" id="6945262">got</span><span class="op" id="6945265">,</span>&nbsp;<span class="ident" id="6945267">test</span><span class="op" id="6945271">.</span><span class="ident" id="6945272">expected</span><span class="op" id="6945280">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945287">}</span><br>
<span class="lineno"></span><span class="op" id="6945289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945292">var</span>&nbsp;<span class="ident" id="6945296">resolveReferenceTests</span>&nbsp;<span class="op" id="6945318">=</span>&nbsp;<span class="op" id="6945320">[</span><span class="op" id="6945321">]</span><span class="keyword" id="6945322">struct</span>&nbsp;<span class="op" id="6945329">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945332">base</span><span class="op" id="6945336">,</span>&nbsp;<span class="ident" id="6945338">rel</span><span class="op" id="6945341">,</span>&nbsp;<span class="ident" id="6945343">expected</span>&nbsp;<span class="builtintype" id="6945352">string</span><br>
<span class="lineno"></span><span class="op" id="6945359">}</span><span class="op" id="6945360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945363">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945391">{</span><span class="string" id="6945392">&#34;http://foo.com?a=b&#34;</span><span class="op" id="6945412">,</span>&nbsp;<span class="string" id="6945414">&#34;https://bar.com/&#34;</span><span class="op" id="6945432">,</span>&nbsp;<span class="string" id="6945434">&#34;https://bar.com/&#34;</span><span class="op" id="6945452">}</span><span class="op" id="6945453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945456">{</span><span class="string" id="6945457">&#34;http://foo.com/&#34;</span><span class="op" id="6945474">,</span>&nbsp;<span class="string" id="6945476">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="6945498">,</span>&nbsp;<span class="string" id="6945500">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="6945522">}</span><span class="op" id="6945523">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945526">{</span><span class="string" id="6945527">&#34;http://foo.com/bar&#34;</span><span class="op" id="6945547">,</span>&nbsp;<span class="string" id="6945549">&#34;mailto:foo@example.com&#34;</span><span class="op" id="6945573">,</span>&nbsp;<span class="string" id="6945575">&#34;mailto:foo@example.com&#34;</span><span class="op" id="6945599">}</span><span class="op" id="6945600">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945604">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945633">{</span><span class="string" id="6945634">&#34;http://foo.com/bar&#34;</span><span class="op" id="6945654">,</span>&nbsp;<span class="string" id="6945656">&#34;/baz&#34;</span><span class="op" id="6945662">,</span>&nbsp;<span class="string" id="6945664">&#34;http://foo.com/baz&#34;</span><span class="op" id="6945684">}</span><span class="op" id="6945685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945688">{</span><span class="string" id="6945689">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="6945715">,</span>&nbsp;<span class="string" id="6945717">&#34;/baz&#34;</span><span class="op" id="6945723">,</span>&nbsp;<span class="string" id="6945725">&#34;http://foo.com/baz&#34;</span><span class="op" id="6945745">}</span><span class="op" id="6945746">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945749">{</span><span class="string" id="6945750">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="6945774">,</span>&nbsp;<span class="string" id="6945776">&#34;/baz?c=d&#34;</span><span class="op" id="6945786">,</span>&nbsp;<span class="string" id="6945788">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="6945812">}</span><span class="op" id="6945813">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945817">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945837">{</span><span class="string" id="6945838">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="6945863">,</span>&nbsp;<span class="string" id="6945865">&#34;//bar.com/quux&#34;</span><span class="op" id="6945881">,</span>&nbsp;<span class="string" id="6945883">&#34;https://bar.com/quux&#34;</span><span class="op" id="6945905">}</span><span class="op" id="6945906">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945910">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6945941">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945967">{</span><span class="string" id="6945968">&#34;http://foo.com&#34;</span><span class="op" id="6945984">,</span>&nbsp;<span class="string" id="6945986">&#34;.&#34;</span><span class="op" id="6945989">,</span>&nbsp;<span class="string" id="6945991">&#34;http://foo.com/&#34;</span><span class="op" id="6946008">}</span><span class="op" id="6946009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946012">{</span><span class="string" id="6946013">&#34;http://foo.com/bar&#34;</span><span class="op" id="6946033">,</span>&nbsp;<span class="string" id="6946035">&#34;.&#34;</span><span class="op" id="6946038">,</span>&nbsp;<span class="string" id="6946040">&#34;http://foo.com/&#34;</span><span class="op" id="6946057">}</span><span class="op" id="6946058">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946061">{</span><span class="string" id="6946062">&#34;http://foo.com/bar/&#34;</span><span class="op" id="6946083">,</span>&nbsp;<span class="string" id="6946085">&#34;.&#34;</span><span class="op" id="6946088">,</span>&nbsp;<span class="string" id="6946090">&#34;http://foo.com/bar/&#34;</span><span class="op" id="6946111">}</span><span class="op" id="6946112">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6946116">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946135">{</span><span class="string" id="6946136">&#34;http://foo.com&#34;</span><span class="op" id="6946152">,</span>&nbsp;<span class="string" id="6946154">&#34;bar&#34;</span><span class="op" id="6946159">,</span>&nbsp;<span class="string" id="6946161">&#34;http://foo.com/bar&#34;</span><span class="op" id="6946181">}</span><span class="op" id="6946182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946185">{</span><span class="string" id="6946186">&#34;http://foo.com/&#34;</span><span class="op" id="6946203">,</span>&nbsp;<span class="string" id="6946205">&#34;bar&#34;</span><span class="op" id="6946210">,</span>&nbsp;<span class="string" id="6946212">&#34;http://foo.com/bar&#34;</span><span class="op" id="6946232">}</span><span class="op" id="6946233">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946236">{</span><span class="string" id="6946237">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946261">,</span>&nbsp;<span class="string" id="6946263">&#34;quux&#34;</span><span class="op" id="6946269">,</span>&nbsp;<span class="string" id="6946271">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="6946296">}</span><span class="op" id="6946297">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6946301">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946318">{</span><span class="string" id="6946319">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946343">,</span>&nbsp;<span class="string" id="6946345">&#34;../quux&#34;</span><span class="op" id="6946354">,</span>&nbsp;<span class="string" id="6946356">&#34;http://foo.com/quux&#34;</span><span class="op" id="6946377">}</span><span class="op" id="6946378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946381">{</span><span class="string" id="6946382">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946406">,</span>&nbsp;<span class="string" id="6946408">&#34;../../../../../quux&#34;</span><span class="op" id="6946429">,</span>&nbsp;<span class="string" id="6946431">&#34;http://foo.com/quux&#34;</span><span class="op" id="6946452">}</span><span class="op" id="6946453">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946456">{</span><span class="string" id="6946457">&#34;http://foo.com/bar&#34;</span><span class="op" id="6946477">,</span>&nbsp;<span class="string" id="6946479">&#34;..&#34;</span><span class="op" id="6946483">,</span>&nbsp;<span class="string" id="6946485">&#34;http://foo.com/&#34;</span><span class="op" id="6946502">}</span><span class="op" id="6946503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946506">{</span><span class="string" id="6946507">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946531">,</span>&nbsp;<span class="string" id="6946533">&#34;./..&#34;</span><span class="op" id="6946539">,</span>&nbsp;<span class="string" id="6946541">&#34;http://foo.com/&#34;</span><span class="op" id="6946558">}</span><span class="op" id="6946559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6946562">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946598">{</span><span class="string" id="6946599">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946623">,</span>&nbsp;<span class="string" id="6946625">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="6946646">,</span>&nbsp;<span class="string" id="6946648">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6946678">}</span><span class="op" id="6946679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946682">{</span><span class="string" id="6946683">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946707">,</span>&nbsp;<span class="string" id="6946709">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="6946732">,</span>&nbsp;<span class="string" id="6946734">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6946764">}</span><span class="op" id="6946765">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946768">{</span><span class="string" id="6946769">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946793">,</span>&nbsp;<span class="string" id="6946795">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="6946820">,</span>&nbsp;<span class="string" id="6946822">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6946852">}</span><span class="op" id="6946853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946856">{</span><span class="string" id="6946857">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946881">,</span>&nbsp;<span class="string" id="6946883">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="6946908">,</span>&nbsp;<span class="string" id="6946910">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6946940">}</span><span class="op" id="6946941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946944">{</span><span class="string" id="6946945">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6946969">,</span>&nbsp;<span class="string" id="6946971">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="6947008">,</span>&nbsp;<span class="string" id="6947010">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6947040">}</span><span class="op" id="6947041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947044">{</span><span class="string" id="6947045">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6947069">,</span>&nbsp;<span class="string" id="6947071">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="6947108">,</span>&nbsp;<span class="string" id="6947110">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6947140">}</span><span class="op" id="6947141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947144">{</span><span class="string" id="6947145">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6947169">,</span>&nbsp;<span class="string" id="6947171">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="6947222">,</span>&nbsp;<span class="string" id="6947224">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="6947254">}</span><span class="op" id="6947255">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947258">{</span><span class="string" id="6947259">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="6947283">,</span>&nbsp;<span class="string" id="6947285">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="6947327">,</span>&nbsp;<span class="string" id="6947329">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="6947359">}</span><span class="op" id="6947360">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947364">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947425">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947478">{</span><span class="string" id="6947479">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="6947519">,</span>&nbsp;<span class="string" id="6947521">&#34;../baz&#34;</span><span class="op" id="6947529">,</span>&nbsp;<span class="string" id="6947531">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="6947555">}</span><span class="op" id="6947556">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947560">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947589">{</span><span class="string" id="6947590">&#34;http://foo.com/bar&#34;</span><span class="op" id="6947610">,</span>&nbsp;<span class="string" id="6947612">&#34;...&#34;</span><span class="op" id="6947617">,</span>&nbsp;<span class="string" id="6947619">&#34;http://foo.com/...&#34;</span><span class="op" id="6947639">}</span><span class="op" id="6947640">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947644">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947657">{</span><span class="string" id="6947658">&#34;http://foo.com/bar&#34;</span><span class="op" id="6947678">,</span>&nbsp;<span class="string" id="6947680">&#34;.#frag&#34;</span><span class="op" id="6947688">,</span>&nbsp;<span class="string" id="6947690">&#34;http://foo.com/#frag&#34;</span><span class="op" id="6947712">}</span><span class="op" id="6947713">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947717">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947747">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947800">{</span><span class="string" id="6947801">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6947821">,</span>&nbsp;<span class="string" id="6947823">&#34;g:h&#34;</span><span class="op" id="6947828">,</span>&nbsp;<span class="string" id="6947830">&#34;g:h&#34;</span><span class="op" id="6947835">}</span><span class="op" id="6947836">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947839">{</span><span class="string" id="6947840">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6947860">,</span>&nbsp;<span class="string" id="6947862">&#34;g&#34;</span><span class="op" id="6947865">,</span>&nbsp;<span class="string" id="6947867">&#34;http://a/b/c/g&#34;</span><span class="op" id="6947883">}</span><span class="op" id="6947884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947887">{</span><span class="string" id="6947888">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6947908">,</span>&nbsp;<span class="string" id="6947910">&#34;./g&#34;</span><span class="op" id="6947915">,</span>&nbsp;<span class="string" id="6947917">&#34;http://a/b/c/g&#34;</span><span class="op" id="6947933">}</span><span class="op" id="6947934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947937">{</span><span class="string" id="6947938">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6947958">,</span>&nbsp;<span class="string" id="6947960">&#34;g/&#34;</span><span class="op" id="6947964">,</span>&nbsp;<span class="string" id="6947966">&#34;http://a/b/c/g/&#34;</span><span class="op" id="6947983">}</span><span class="op" id="6947984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947987">{</span><span class="string" id="6947988">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948008">,</span>&nbsp;<span class="string" id="6948010">&#34;/g&#34;</span><span class="op" id="6948014">,</span>&nbsp;<span class="string" id="6948016">&#34;http://a/g&#34;</span><span class="op" id="6948028">}</span><span class="op" id="6948029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948032">{</span><span class="string" id="6948033">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948053">,</span>&nbsp;<span class="string" id="6948055">&#34;//g&#34;</span><span class="op" id="6948060">,</span>&nbsp;<span class="string" id="6948062">&#34;http://g&#34;</span><span class="op" id="6948072">}</span><span class="op" id="6948073">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948076">{</span><span class="string" id="6948077">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948097">,</span>&nbsp;<span class="string" id="6948099">&#34;?y&#34;</span><span class="op" id="6948103">,</span>&nbsp;<span class="string" id="6948105">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="6948125">}</span><span class="op" id="6948126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948129">{</span><span class="string" id="6948130">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948150">,</span>&nbsp;<span class="string" id="6948152">&#34;g?y&#34;</span><span class="op" id="6948157">,</span>&nbsp;<span class="string" id="6948159">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="6948177">}</span><span class="op" id="6948178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948181">{</span><span class="string" id="6948182">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948202">,</span>&nbsp;<span class="string" id="6948204">&#34;#s&#34;</span><span class="op" id="6948208">,</span>&nbsp;<span class="string" id="6948210">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="6948232">}</span><span class="op" id="6948233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948236">{</span><span class="string" id="6948237">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948257">,</span>&nbsp;<span class="string" id="6948259">&#34;g#s&#34;</span><span class="op" id="6948264">,</span>&nbsp;<span class="string" id="6948266">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="6948284">}</span><span class="op" id="6948285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948288">{</span><span class="string" id="6948289">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948309">,</span>&nbsp;<span class="string" id="6948311">&#34;g?y#s&#34;</span><span class="op" id="6948318">,</span>&nbsp;<span class="string" id="6948320">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="6948340">}</span><span class="op" id="6948341">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948344">{</span><span class="string" id="6948345">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948365">,</span>&nbsp;<span class="string" id="6948367">&#34;;x&#34;</span><span class="op" id="6948371">,</span>&nbsp;<span class="string" id="6948373">&#34;http://a/b/c/;x&#34;</span><span class="op" id="6948390">}</span><span class="op" id="6948391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948394">{</span><span class="string" id="6948395">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948415">,</span>&nbsp;<span class="string" id="6948417">&#34;g;x&#34;</span><span class="op" id="6948422">,</span>&nbsp;<span class="string" id="6948424">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="6948442">}</span><span class="op" id="6948443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948446">{</span><span class="string" id="6948447">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948467">,</span>&nbsp;<span class="string" id="6948469">&#34;g;x?y#s&#34;</span><span class="op" id="6948478">,</span>&nbsp;<span class="string" id="6948480">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="6948502">}</span><span class="op" id="6948503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948506">{</span><span class="string" id="6948507">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948527">,</span>&nbsp;<span class="string" id="6948529">&#34;&#34;</span><span class="op" id="6948531">,</span>&nbsp;<span class="string" id="6948533">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948553">}</span><span class="op" id="6948554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948557">{</span><span class="string" id="6948558">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948578">,</span>&nbsp;<span class="string" id="6948580">&#34;.&#34;</span><span class="op" id="6948583">,</span>&nbsp;<span class="string" id="6948585">&#34;http://a/b/c/&#34;</span><span class="op" id="6948600">}</span><span class="op" id="6948601">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948604">{</span><span class="string" id="6948605">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948625">,</span>&nbsp;<span class="string" id="6948627">&#34;./&#34;</span><span class="op" id="6948631">,</span>&nbsp;<span class="string" id="6948633">&#34;http://a/b/c/&#34;</span><span class="op" id="6948648">}</span><span class="op" id="6948649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948652">{</span><span class="string" id="6948653">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948673">,</span>&nbsp;<span class="string" id="6948675">&#34;..&#34;</span><span class="op" id="6948679">,</span>&nbsp;<span class="string" id="6948681">&#34;http://a/b/&#34;</span><span class="op" id="6948694">}</span><span class="op" id="6948695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948698">{</span><span class="string" id="6948699">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948719">,</span>&nbsp;<span class="string" id="6948721">&#34;../&#34;</span><span class="op" id="6948726">,</span>&nbsp;<span class="string" id="6948728">&#34;http://a/b/&#34;</span><span class="op" id="6948741">}</span><span class="op" id="6948742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948745">{</span><span class="string" id="6948746">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948766">,</span>&nbsp;<span class="string" id="6948768">&#34;../g&#34;</span><span class="op" id="6948774">,</span>&nbsp;<span class="string" id="6948776">&#34;http://a/b/g&#34;</span><span class="op" id="6948790">}</span><span class="op" id="6948791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948794">{</span><span class="string" id="6948795">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948815">,</span>&nbsp;<span class="string" id="6948817">&#34;../..&#34;</span><span class="op" id="6948824">,</span>&nbsp;<span class="string" id="6948826">&#34;http://a/&#34;</span><span class="op" id="6948837">}</span><span class="op" id="6948838">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948841">{</span><span class="string" id="6948842">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948862">,</span>&nbsp;<span class="string" id="6948864">&#34;../../&#34;</span><span class="op" id="6948872">,</span>&nbsp;<span class="string" id="6948874">&#34;http://a/&#34;</span><span class="op" id="6948885">}</span><span class="op" id="6948886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948889">{</span><span class="string" id="6948890">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6948910">,</span>&nbsp;<span class="string" id="6948912">&#34;../../g&#34;</span><span class="op" id="6948921">,</span>&nbsp;<span class="string" id="6948923">&#34;http://a/g&#34;</span><span class="op" id="6948935">}</span><span class="op" id="6948936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6948940">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6948972">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949025">{</span><span class="string" id="6949026">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949046">,</span>&nbsp;<span class="string" id="6949048">&#34;../../../g&#34;</span><span class="op" id="6949060">,</span>&nbsp;<span class="string" id="6949062">&#34;http://a/g&#34;</span><span class="op" id="6949074">}</span><span class="op" id="6949075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949078">{</span><span class="string" id="6949079">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949099">,</span>&nbsp;<span class="string" id="6949101">&#34;../../../../g&#34;</span><span class="op" id="6949116">,</span>&nbsp;<span class="string" id="6949118">&#34;http://a/g&#34;</span><span class="op" id="6949130">}</span><span class="op" id="6949131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949134">{</span><span class="string" id="6949135">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949155">,</span>&nbsp;<span class="string" id="6949157">&#34;/./g&#34;</span><span class="op" id="6949163">,</span>&nbsp;<span class="string" id="6949165">&#34;http://a/g&#34;</span><span class="op" id="6949177">}</span><span class="op" id="6949178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949181">{</span><span class="string" id="6949182">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949202">,</span>&nbsp;<span class="string" id="6949204">&#34;/../g&#34;</span><span class="op" id="6949211">,</span>&nbsp;<span class="string" id="6949213">&#34;http://a/g&#34;</span><span class="op" id="6949225">}</span><span class="op" id="6949226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949229">{</span><span class="string" id="6949230">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949250">,</span>&nbsp;<span class="string" id="6949252">&#34;g.&#34;</span><span class="op" id="6949256">,</span>&nbsp;<span class="string" id="6949258">&#34;http://a/b/c/g.&#34;</span><span class="op" id="6949275">}</span><span class="op" id="6949276">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949279">{</span><span class="string" id="6949280">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949300">,</span>&nbsp;<span class="string" id="6949302">&#34;.g&#34;</span><span class="op" id="6949306">,</span>&nbsp;<span class="string" id="6949308">&#34;http://a/b/c/.g&#34;</span><span class="op" id="6949325">}</span><span class="op" id="6949326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949329">{</span><span class="string" id="6949330">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949350">,</span>&nbsp;<span class="string" id="6949352">&#34;g..&#34;</span><span class="op" id="6949357">,</span>&nbsp;<span class="string" id="6949359">&#34;http://a/b/c/g..&#34;</span><span class="op" id="6949377">}</span><span class="op" id="6949378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949381">{</span><span class="string" id="6949382">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949402">,</span>&nbsp;<span class="string" id="6949404">&#34;..g&#34;</span><span class="op" id="6949409">,</span>&nbsp;<span class="string" id="6949411">&#34;http://a/b/c/..g&#34;</span><span class="op" id="6949429">}</span><span class="op" id="6949430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949433">{</span><span class="string" id="6949434">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949454">,</span>&nbsp;<span class="string" id="6949456">&#34;./../g&#34;</span><span class="op" id="6949464">,</span>&nbsp;<span class="string" id="6949466">&#34;http://a/b/g&#34;</span><span class="op" id="6949480">}</span><span class="op" id="6949481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949484">{</span><span class="string" id="6949485">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949505">,</span>&nbsp;<span class="string" id="6949507">&#34;./g/.&#34;</span><span class="op" id="6949514">,</span>&nbsp;<span class="string" id="6949516">&#34;http://a/b/c/g/&#34;</span><span class="op" id="6949533">}</span><span class="op" id="6949534">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949537">{</span><span class="string" id="6949538">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949558">,</span>&nbsp;<span class="string" id="6949560">&#34;g/./h&#34;</span><span class="op" id="6949567">,</span>&nbsp;<span class="string" id="6949569">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="6949587">}</span><span class="op" id="6949588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949591">{</span><span class="string" id="6949592">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949612">,</span>&nbsp;<span class="string" id="6949614">&#34;g/../h&#34;</span><span class="op" id="6949622">,</span>&nbsp;<span class="string" id="6949624">&#34;http://a/b/c/h&#34;</span><span class="op" id="6949640">}</span><span class="op" id="6949641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949644">{</span><span class="string" id="6949645">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949665">,</span>&nbsp;<span class="string" id="6949667">&#34;g;x=1/./y&#34;</span><span class="op" id="6949678">,</span>&nbsp;<span class="string" id="6949680">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="6949702">}</span><span class="op" id="6949703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949706">{</span><span class="string" id="6949707">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949727">,</span>&nbsp;<span class="string" id="6949729">&#34;g;x=1/../y&#34;</span><span class="op" id="6949741">,</span>&nbsp;<span class="string" id="6949743">&#34;http://a/b/c/y&#34;</span><span class="op" id="6949759">}</span><span class="op" id="6949760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949763">{</span><span class="string" id="6949764">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949784">,</span>&nbsp;<span class="string" id="6949786">&#34;g?y/./x&#34;</span><span class="op" id="6949795">,</span>&nbsp;<span class="string" id="6949797">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="6949819">}</span><span class="op" id="6949820">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949823">{</span><span class="string" id="6949824">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949844">,</span>&nbsp;<span class="string" id="6949846">&#34;g?y/../x&#34;</span><span class="op" id="6949856">,</span>&nbsp;<span class="string" id="6949858">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="6949881">}</span><span class="op" id="6949882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949885">{</span><span class="string" id="6949886">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949906">,</span>&nbsp;<span class="string" id="6949908">&#34;g#s/./x&#34;</span><span class="op" id="6949917">,</span>&nbsp;<span class="string" id="6949919">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="6949941">}</span><span class="op" id="6949942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949945">{</span><span class="string" id="6949946">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="6949966">,</span>&nbsp;<span class="string" id="6949968">&#34;g#s/../x&#34;</span><span class="op" id="6949978">,</span>&nbsp;<span class="string" id="6949980">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="6950003">}</span><span class="op" id="6950004">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6950008">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950020">{</span><span class="string" id="6950021">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="6950042">,</span>&nbsp;<span class="string" id="6950044">&#34;//g?q&#34;</span><span class="op" id="6950051">,</span>&nbsp;<span class="string" id="6950053">&#34;https://g?q&#34;</span><span class="op" id="6950066">}</span><span class="op" id="6950067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950070">{</span><span class="string" id="6950071">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="6950092">,</span>&nbsp;<span class="string" id="6950094">&#34;//g#s&#34;</span><span class="op" id="6950101">,</span>&nbsp;<span class="string" id="6950103">&#34;https://g#s&#34;</span><span class="op" id="6950116">}</span><span class="op" id="6950117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950120">{</span><span class="string" id="6950121">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="6950142">,</span>&nbsp;<span class="string" id="6950144">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="6950159">,</span>&nbsp;<span class="string" id="6950161">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="6950182">}</span><span class="op" id="6950183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950186">{</span><span class="string" id="6950187">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="6950208">,</span>&nbsp;<span class="string" id="6950210">&#34;?y&#34;</span><span class="op" id="6950214">,</span>&nbsp;<span class="string" id="6950216">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="6950237">}</span><span class="op" id="6950238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950241">{</span><span class="string" id="6950242">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="6950265">,</span>&nbsp;<span class="string" id="6950267">&#34;?y&#34;</span><span class="op" id="6950271">,</span>&nbsp;<span class="string" id="6950273">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="6950294">}</span><span class="op" id="6950295">,</span><br>
<span class="lineno">700</span><span class="op" id="6950297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6950300">func</span>&nbsp;<span class="ident" id="6950305">TestResolveReference</span><span class="op" id="6950325">(</span><span class="ident" id="6950326">t</span>&nbsp;<span class="op" id="6950328">*</span><span class="ident" id="6950329">testing</span><span class="op" id="6950336">.</span><span class="ident" id="6950337">T</span><span class="op" id="6950338">)</span>&nbsp;<span class="op" id="6950340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950343">mustParse</span>&nbsp;<span class="op" id="6950353">:=</span>&nbsp;<span class="keyword" id="6950356">func</span><span class="op" id="6950360">(</span><span class="ident" id="6950361">url</span>&nbsp;<span class="builtintype" id="6950365">string</span><span class="op" id="6950371">)</span>&nbsp;<span class="op" id="6950373">*</span><span class="ident" id="6950374">URL</span>&nbsp;<span class="op" id="6950378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950382">u</span><span class="op" id="6950383">,</span>&nbsp;<span class="ident" id="6950385">err</span>&nbsp;<span class="op" id="6950389">:=</span>&nbsp;<span class="ident" id="6950392">Parse</span><span class="op" id="6950397">(</span><span class="ident" id="6950398">url</span><span class="op" id="6950401">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950405">if</span>&nbsp;<span class="ident" id="6950408">err</span>&nbsp;<span class="op" id="6950412">!=</span>&nbsp;<span class="ident" id="6950415">nil</span>&nbsp;<span class="op" id="6950419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950424">t</span><span class="op" id="6950425">.</span><span class="ident" id="6950426">Fatalf</span><span class="op" id="6950432">(</span><span class="string" id="6950433">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6950475">,</span>&nbsp;<span class="ident" id="6950477">url</span><span class="op" id="6950480">,</span>&nbsp;<span class="ident" id="6950482">err</span><span class="op" id="6950485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950493">return</span>&nbsp;<span class="ident" id="6950500">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950503">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950506">opaque</span>&nbsp;<span class="op" id="6950513">:=</span>&nbsp;<span class="op" id="6950516">&amp;</span><span class="ident" id="6950517">URL</span><span class="op" id="6950520">{</span><span class="ident" id="6950521">Scheme</span><span class="op" id="6950527">:</span>&nbsp;<span class="string" id="6950529">&#34;scheme&#34;</span><span class="op" id="6950537">,</span>&nbsp;<span class="ident" id="6950539">Opaque</span><span class="op" id="6950545">:</span>&nbsp;<span class="string" id="6950547">&#34;opaque&#34;</span><span class="op" id="6950555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950558">for</span>&nbsp;<span class="ident" id="6950562">_</span><span class="op" id="6950563">,</span>&nbsp;<span class="ident" id="6950565">test</span>&nbsp;<span class="op" id="6950570">:=</span>&nbsp;<span class="keyword" id="6950573">range</span>&nbsp;<span class="ident" id="6950579">resolveReferenceTests</span>&nbsp;<span class="op" id="6950601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950605">base</span>&nbsp;<span class="op" id="6950610">:=</span>&nbsp;<span class="ident" id="6950613">mustParse</span><span class="op" id="6950622">(</span><span class="ident" id="6950623">test</span><span class="op" id="6950627">.</span><span class="ident" id="6950628">base</span><span class="op" id="6950632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950636">rel</span>&nbsp;<span class="op" id="6950640">:=</span>&nbsp;<span class="ident" id="6950643">mustParse</span><span class="op" id="6950652">(</span><span class="ident" id="6950653">test</span><span class="op" id="6950657">.</span><span class="ident" id="6950658">rel</span><span class="op" id="6950661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950665">url</span>&nbsp;<span class="op" id="6950669">:=</span>&nbsp;<span class="ident" id="6950672">base</span><span class="op" id="6950676">.</span><span class="ident" id="6950677">ResolveReference</span><span class="op" id="6950693">(</span><span class="ident" id="6950694">rel</span><span class="op" id="6950697">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950701">if</span>&nbsp;<span class="ident" id="6950704">url</span><span class="op" id="6950707">.</span><span class="ident" id="6950708">String</span><span class="op" id="6950714">(</span><span class="op" id="6950715">)</span>&nbsp;<span class="op" id="6950717">!=</span>&nbsp;<span class="ident" id="6950720">test</span><span class="op" id="6950724">.</span><span class="ident" id="6950725">expected</span>&nbsp;<span class="op" id="6950734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950739">t</span><span class="op" id="6950740">.</span><span class="ident" id="6950741">Errorf</span><span class="op" id="6950747">(</span><span class="string" id="6950748">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6950792">,</span>&nbsp;<span class="ident" id="6950794">test</span><span class="op" id="6950798">.</span><span class="ident" id="6950799">base</span><span class="op" id="6950803">,</span>&nbsp;<span class="ident" id="6950805">test</span><span class="op" id="6950809">.</span><span class="ident" id="6950810">rel</span><span class="op" id="6950813">,</span>&nbsp;<span class="ident" id="6950815">test</span><span class="op" id="6950819">.</span><span class="ident" id="6950820">expected</span><span class="op" id="6950828">,</span>&nbsp;<span class="ident" id="6950830">url</span><span class="op" id="6950833">.</span><span class="ident" id="6950834">String</span><span class="op" id="6950840">(</span><span class="op" id="6950841">)</span><span class="op" id="6950842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6950850">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950895">if</span>&nbsp;<span class="ident" id="6950898">base</span>&nbsp;<span class="op" id="6950903">==</span>&nbsp;<span class="ident" id="6950906">url</span>&nbsp;<span class="op" id="6950910">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950915">t</span><span class="op" id="6950916">.</span><span class="ident" id="6950917">Errorf</span><span class="op" id="6950923">(</span><span class="string" id="6950924">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="6950983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6950991">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951030">url</span><span class="op" id="6951033">,</span>&nbsp;<span class="ident" id="6951035">err</span>&nbsp;<span class="op" id="6951039">:=</span>&nbsp;<span class="ident" id="6951042">base</span><span class="op" id="6951046">.</span><span class="ident" id="6951047">Parse</span><span class="op" id="6951052">(</span><span class="ident" id="6951053">test</span><span class="op" id="6951057">.</span><span class="ident" id="6951058">rel</span><span class="op" id="6951061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951065">if</span>&nbsp;<span class="ident" id="6951068">err</span>&nbsp;<span class="op" id="6951072">!=</span>&nbsp;<span class="ident" id="6951075">nil</span>&nbsp;<span class="op" id="6951079">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951084">t</span><span class="op" id="6951085">.</span><span class="ident" id="6951086">Errorf</span><span class="op" id="6951092">(</span><span class="string" id="6951093">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6951123">,</span>&nbsp;<span class="ident" id="6951125">test</span><span class="op" id="6951129">.</span><span class="ident" id="6951130">base</span><span class="op" id="6951134">,</span>&nbsp;<span class="ident" id="6951136">test</span><span class="op" id="6951140">.</span><span class="ident" id="6951141">rel</span><span class="op" id="6951144">,</span>&nbsp;<span class="ident" id="6951146">err</span><span class="op" id="6951149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951153">}</span>&nbsp;<span class="keyword" id="6951155">else</span>&nbsp;<span class="keyword" id="6951160">if</span>&nbsp;<span class="ident" id="6951163">url</span><span class="op" id="6951166">.</span><span class="ident" id="6951167">String</span><span class="op" id="6951173">(</span><span class="op" id="6951174">)</span>&nbsp;<span class="op" id="6951176">!=</span>&nbsp;<span class="ident" id="6951179">test</span><span class="op" id="6951183">.</span><span class="ident" id="6951184">expected</span>&nbsp;<span class="op" id="6951193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951198">t</span><span class="op" id="6951199">.</span><span class="ident" id="6951200">Errorf</span><span class="op" id="6951206">(</span><span class="string" id="6951207">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6951240">,</span>&nbsp;<span class="ident" id="6951242">test</span><span class="op" id="6951246">.</span><span class="ident" id="6951247">base</span><span class="op" id="6951251">,</span>&nbsp;<span class="ident" id="6951253">test</span><span class="op" id="6951257">.</span><span class="ident" id="6951258">rel</span><span class="op" id="6951261">,</span>&nbsp;<span class="ident" id="6951263">test</span><span class="op" id="6951267">.</span><span class="ident" id="6951268">expected</span><span class="op" id="6951276">,</span>&nbsp;<span class="ident" id="6951278">url</span><span class="op" id="6951281">.</span><span class="ident" id="6951282">String</span><span class="op" id="6951288">(</span><span class="op" id="6951289">)</span><span class="op" id="6951290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951294">}</span>&nbsp;<span class="keyword" id="6951296">else</span>&nbsp;<span class="keyword" id="6951301">if</span>&nbsp;<span class="ident" id="6951304">base</span>&nbsp;<span class="op" id="6951309">==</span>&nbsp;<span class="ident" id="6951312">url</span>&nbsp;<span class="op" id="6951316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6951321">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951387">t</span><span class="op" id="6951388">.</span><span class="ident" id="6951389">Errorf</span><span class="op" id="6951395">(</span><span class="string" id="6951396">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="6951444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6951452">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951487">url</span>&nbsp;<span class="op" id="6951491">=</span>&nbsp;<span class="ident" id="6951493">base</span><span class="op" id="6951497">.</span><span class="ident" id="6951498">ResolveReference</span><span class="op" id="6951514">(</span><span class="ident" id="6951515">opaque</span><span class="op" id="6951521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951525">if</span>&nbsp;<span class="op" id="6951528">*</span><span class="ident" id="6951529">url</span>&nbsp;<span class="op" id="6951533">!=</span>&nbsp;<span class="op" id="6951536">*</span><span class="ident" id="6951537">opaque</span>&nbsp;<span class="op" id="6951544">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951549">t</span><span class="op" id="6951550">.</span><span class="ident" id="6951551">Errorf</span><span class="op" id="6951557">(</span><span class="string" id="6951558">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="6951624">,</span>&nbsp;<span class="ident" id="6951626">url</span><span class="op" id="6951629">,</span>&nbsp;<span class="ident" id="6951631">opaque</span><span class="op" id="6951637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6951645">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951703">url</span><span class="op" id="6951706">,</span>&nbsp;<span class="ident" id="6951708">err</span>&nbsp;<span class="op" id="6951712">=</span>&nbsp;<span class="ident" id="6951714">base</span><span class="op" id="6951718">.</span><span class="ident" id="6951719">Parse</span><span class="op" id="6951724">(</span><span class="string" id="6951725">&#34;scheme:opaque&#34;</span><span class="op" id="6951740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951744">if</span>&nbsp;<span class="ident" id="6951747">err</span>&nbsp;<span class="op" id="6951751">!=</span>&nbsp;<span class="ident" id="6951754">nil</span>&nbsp;<span class="op" id="6951758">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951763">t</span><span class="op" id="6951764">.</span><span class="ident" id="6951765">Errorf</span><span class="op" id="6951771">(</span><span class="string" id="6951772">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="6951815">,</span>&nbsp;<span class="ident" id="6951817">test</span><span class="op" id="6951821">.</span><span class="ident" id="6951822">base</span><span class="op" id="6951826">,</span>&nbsp;<span class="ident" id="6951828">err</span><span class="op" id="6951831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951835">}</span>&nbsp;<span class="keyword" id="6951837">else</span>&nbsp;<span class="keyword" id="6951842">if</span>&nbsp;<span class="op" id="6951845">*</span><span class="ident" id="6951846">url</span>&nbsp;<span class="op" id="6951850">!=</span>&nbsp;<span class="op" id="6951853">*</span><span class="ident" id="6951854">opaque</span>&nbsp;<span class="op" id="6951861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951866">t</span><span class="op" id="6951867">.</span><span class="ident" id="6951868">Errorf</span><span class="op" id="6951874">(</span><span class="string" id="6951875">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="6951930">,</span>&nbsp;<span class="ident" id="6951932">url</span><span class="op" id="6951935">,</span>&nbsp;<span class="ident" id="6951937">opaque</span><span class="op" id="6951943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951947">}</span>&nbsp;<span class="keyword" id="6951949">else</span>&nbsp;<span class="keyword" id="6951954">if</span>&nbsp;<span class="ident" id="6951957">base</span>&nbsp;<span class="op" id="6951962">==</span>&nbsp;<span class="ident" id="6951965">url</span>&nbsp;<span class="op" id="6951969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6951974">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952027">t</span><span class="op" id="6952028">.</span><span class="ident" id="6952029">Errorf</span><span class="op" id="6952035">(</span><span class="string" id="6952036">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="6952084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952091">}</span><br>
<span class="lineno"></span><span class="op" id="6952093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="6952096">func</span>&nbsp;<span class="ident" id="6952101">TestQueryValues</span><span class="op" id="6952116">(</span><span class="ident" id="6952117">t</span>&nbsp;<span class="op" id="6952119">*</span><span class="ident" id="6952120">testing</span><span class="op" id="6952127">.</span><span class="ident" id="6952128">T</span><span class="op" id="6952129">)</span>&nbsp;<span class="op" id="6952131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952134">u</span><span class="op" id="6952135">,</span>&nbsp;<span class="ident" id="6952137">_</span>&nbsp;<span class="op" id="6952139">:=</span>&nbsp;<span class="ident" id="6952142">Parse</span><span class="op" id="6952147">(</span><span class="string" id="6952148">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="6952182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952185">v</span>&nbsp;<span class="op" id="6952187">:=</span>&nbsp;<span class="ident" id="6952190">u</span><span class="op" id="6952191">.</span><span class="ident" id="6952192">Query</span><span class="op" id="6952197">(</span><span class="op" id="6952198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952201">if</span>&nbsp;<span class="builtinfunc" id="6952204">len</span><span class="op" id="6952207">(</span><span class="ident" id="6952208">v</span><span class="op" id="6952209">)</span>&nbsp;<span class="op" id="6952211">!=</span>&nbsp;<span class="num" id="6952214">2</span>&nbsp;<span class="op" id="6952216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952220">t</span><span class="op" id="6952221">.</span><span class="ident" id="6952222">Errorf</span><span class="op" id="6952228">(</span><span class="string" id="6952229">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="6952266">,</span>&nbsp;<span class="builtinfunc" id="6952268">len</span><span class="op" id="6952271">(</span><span class="ident" id="6952272">v</span><span class="op" id="6952273">)</span><span class="op" id="6952274">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952280">if</span>&nbsp;<span class="ident" id="6952283">g</span><span class="op" id="6952284">,</span>&nbsp;<span class="ident" id="6952286">e</span>&nbsp;<span class="op" id="6952288">:=</span>&nbsp;<span class="ident" id="6952291">v</span><span class="op" id="6952292">.</span><span class="ident" id="6952293">Get</span><span class="op" id="6952296">(</span><span class="string" id="6952297">&#34;foo&#34;</span><span class="op" id="6952302">)</span><span class="op" id="6952303">,</span>&nbsp;<span class="string" id="6952305">&#34;bar&#34;</span><span class="op" id="6952310">;</span>&nbsp;<span class="ident" id="6952312">g</span>&nbsp;<span class="op" id="6952314">!=</span>&nbsp;<span class="ident" id="6952317">e</span>&nbsp;<span class="op" id="6952319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952323">t</span><span class="op" id="6952324">.</span><span class="ident" id="6952325">Errorf</span><span class="op" id="6952331">(</span><span class="string" id="6952332">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6952356">,</span>&nbsp;<span class="ident" id="6952358">g</span><span class="op" id="6952359">,</span>&nbsp;<span class="ident" id="6952361">e</span><span class="op" id="6952362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6952368">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952388">if</span>&nbsp;<span class="ident" id="6952391">g</span><span class="op" id="6952392">,</span>&nbsp;<span class="ident" id="6952394">e</span>&nbsp;<span class="op" id="6952396">:=</span>&nbsp;<span class="ident" id="6952399">v</span><span class="op" id="6952400">.</span><span class="ident" id="6952401">Get</span><span class="op" id="6952404">(</span><span class="string" id="6952405">&#34;Foo&#34;</span><span class="op" id="6952410">)</span><span class="op" id="6952411">,</span>&nbsp;<span class="string" id="6952413">&#34;&#34;</span><span class="op" id="6952415">;</span>&nbsp;<span class="ident" id="6952417">g</span>&nbsp;<span class="op" id="6952419">!=</span>&nbsp;<span class="ident" id="6952422">e</span>&nbsp;<span class="op" id="6952424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952428">t</span><span class="op" id="6952429">.</span><span class="ident" id="6952430">Errorf</span><span class="op" id="6952436">(</span><span class="string" id="6952437">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6952461">,</span>&nbsp;<span class="ident" id="6952463">g</span><span class="op" id="6952464">,</span>&nbsp;<span class="ident" id="6952466">e</span><span class="op" id="6952467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952473">if</span>&nbsp;<span class="ident" id="6952476">g</span><span class="op" id="6952477">,</span>&nbsp;<span class="ident" id="6952479">e</span>&nbsp;<span class="op" id="6952481">:=</span>&nbsp;<span class="ident" id="6952484">v</span><span class="op" id="6952485">.</span><span class="ident" id="6952486">Get</span><span class="op" id="6952489">(</span><span class="string" id="6952490">&#34;bar&#34;</span><span class="op" id="6952495">)</span><span class="op" id="6952496">,</span>&nbsp;<span class="string" id="6952498">&#34;1&#34;</span><span class="op" id="6952501">;</span>&nbsp;<span class="ident" id="6952503">g</span>&nbsp;<span class="op" id="6952505">!=</span>&nbsp;<span class="ident" id="6952508">e</span>&nbsp;<span class="op" id="6952510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952514">t</span><span class="op" id="6952515">.</span><span class="ident" id="6952516">Errorf</span><span class="op" id="6952522">(</span><span class="string" id="6952523">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6952547">,</span>&nbsp;<span class="ident" id="6952549">g</span><span class="op" id="6952550">,</span>&nbsp;<span class="ident" id="6952552">e</span><span class="op" id="6952553">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952559">if</span>&nbsp;<span class="ident" id="6952562">g</span><span class="op" id="6952563">,</span>&nbsp;<span class="ident" id="6952565">e</span>&nbsp;<span class="op" id="6952567">:=</span>&nbsp;<span class="ident" id="6952570">v</span><span class="op" id="6952571">.</span><span class="ident" id="6952572">Get</span><span class="op" id="6952575">(</span><span class="string" id="6952576">&#34;baz&#34;</span><span class="op" id="6952581">)</span><span class="op" id="6952582">,</span>&nbsp;<span class="string" id="6952584">&#34;&#34;</span><span class="op" id="6952586">;</span>&nbsp;<span class="ident" id="6952588">g</span>&nbsp;<span class="op" id="6952590">!=</span>&nbsp;<span class="ident" id="6952593">e</span>&nbsp;<span class="op" id="6952595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952599">t</span><span class="op" id="6952600">.</span><span class="ident" id="6952601">Errorf</span><span class="op" id="6952607">(</span><span class="string" id="6952608">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6952632">,</span>&nbsp;<span class="ident" id="6952634">g</span><span class="op" id="6952635">,</span>&nbsp;<span class="ident" id="6952637">e</span><span class="op" id="6952638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952644">v</span><span class="op" id="6952645">.</span><span class="ident" id="6952646">Del</span><span class="op" id="6952649">(</span><span class="string" id="6952650">&#34;bar&#34;</span><span class="op" id="6952655">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952658">if</span>&nbsp;<span class="ident" id="6952661">g</span><span class="op" id="6952662">,</span>&nbsp;<span class="ident" id="6952664">e</span>&nbsp;<span class="op" id="6952666">:=</span>&nbsp;<span class="ident" id="6952669">v</span><span class="op" id="6952670">.</span><span class="ident" id="6952671">Get</span><span class="op" id="6952674">(</span><span class="string" id="6952675">&#34;bar&#34;</span><span class="op" id="6952680">)</span><span class="op" id="6952681">,</span>&nbsp;<span class="string" id="6952683">&#34;&#34;</span><span class="op" id="6952685">;</span>&nbsp;<span class="ident" id="6952687">g</span>&nbsp;<span class="op" id="6952689">!=</span>&nbsp;<span class="ident" id="6952692">e</span>&nbsp;<span class="op" id="6952694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952698">t</span><span class="op" id="6952699">.</span><span class="ident" id="6952700">Errorf</span><span class="op" id="6952706">(</span><span class="string" id="6952707">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6952738">,</span>&nbsp;<span class="ident" id="6952740">g</span><span class="op" id="6952741">,</span>&nbsp;<span class="ident" id="6952743">e</span><span class="op" id="6952744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952747">}</span><br>
<span class="lineno"></span><span class="op" id="6952749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="6952752">type</span>&nbsp;<span class="ident" id="6952757">parseTest</span>&nbsp;<span class="keyword" id="6952767">struct</span>&nbsp;<span class="op" id="6952774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952777">query</span>&nbsp;<span class="builtintype" id="6952783">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952791">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6952797">Values</span><br>
<span class="lineno"></span><span class="op" id="6952804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="6952807">var</span>&nbsp;<span class="ident" id="6952811">parseTests</span>&nbsp;<span class="op" id="6952822">=</span>&nbsp;<span class="op" id="6952824">[</span><span class="op" id="6952825">]</span><span class="ident" id="6952826">parseTest</span><span class="op" id="6952835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952842">query</span><span class="op" id="6952847">:</span>&nbsp;<span class="string" id="6952849">&#34;a=1&amp;b=2&#34;</span><span class="op" id="6952858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952862">out</span><span class="op" id="6952865">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6952869">Values</span><span class="op" id="6952875">{</span><span class="string" id="6952876">&#34;a&#34;</span><span class="op" id="6952879">:</span>&nbsp;<span class="op" id="6952881">[</span><span class="op" id="6952882">]</span><span class="builtintype" id="6952883">string</span><span class="op" id="6952889">{</span><span class="string" id="6952890">&#34;1&#34;</span><span class="op" id="6952893">}</span><span class="op" id="6952894">,</span>&nbsp;<span class="string" id="6952896">&#34;b&#34;</span><span class="op" id="6952899">:</span>&nbsp;<span class="op" id="6952901">[</span><span class="op" id="6952902">]</span><span class="builtintype" id="6952903">string</span><span class="op" id="6952909">{</span><span class="string" id="6952910">&#34;2&#34;</span><span class="op" id="6952913">}</span><span class="op" id="6952914">}</span><span class="op" id="6952915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952918">}</span><span class="op" id="6952919">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952926">query</span><span class="op" id="6952931">:</span>&nbsp;<span class="string" id="6952933">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="6952951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952955">out</span><span class="op" id="6952958">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6952962">Values</span><span class="op" id="6952968">{</span><span class="string" id="6952969">&#34;a&#34;</span><span class="op" id="6952972">:</span>&nbsp;<span class="op" id="6952974">[</span><span class="op" id="6952975">]</span><span class="builtintype" id="6952976">string</span><span class="op" id="6952982">{</span><span class="string" id="6952983">&#34;1&#34;</span><span class="op" id="6952986">,</span>&nbsp;<span class="string" id="6952988">&#34;2&#34;</span><span class="op" id="6952991">,</span>&nbsp;<span class="string" id="6952993">&#34;banana&#34;</span><span class="op" id="6953001">}</span><span class="op" id="6953002">}</span><span class="op" id="6953003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953006">}</span><span class="op" id="6953007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953010">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953014">query</span><span class="op" id="6953019">:</span>&nbsp;<span class="string" id="6953021">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="6953046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953050">out</span><span class="op" id="6953053">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6953057">Values</span><span class="op" id="6953063">{</span><span class="string" id="6953064">&#34;ascii&#34;</span><span class="op" id="6953071">:</span>&nbsp;<span class="op" id="6953073">[</span><span class="op" id="6953074">]</span><span class="builtintype" id="6953075">string</span><span class="op" id="6953081">{</span><span class="string" id="6953082">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="6953095">}</span><span class="op" id="6953096">}</span><span class="op" id="6953097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953100">}</span><span class="op" id="6953101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953108">query</span><span class="op" id="6953113">:</span>&nbsp;<span class="string" id="6953115">&#34;a=1;b=2&#34;</span><span class="op" id="6953124">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953128">out</span><span class="op" id="6953131">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6953135">Values</span><span class="op" id="6953141">{</span><span class="string" id="6953142">&#34;a&#34;</span><span class="op" id="6953145">:</span>&nbsp;<span class="op" id="6953147">[</span><span class="op" id="6953148">]</span><span class="builtintype" id="6953149">string</span><span class="op" id="6953155">{</span><span class="string" id="6953156">&#34;1&#34;</span><span class="op" id="6953159">}</span><span class="op" id="6953160">,</span>&nbsp;<span class="string" id="6953162">&#34;b&#34;</span><span class="op" id="6953165">:</span>&nbsp;<span class="op" id="6953167">[</span><span class="op" id="6953168">]</span><span class="builtintype" id="6953169">string</span><span class="op" id="6953175">{</span><span class="string" id="6953176">&#34;2&#34;</span><span class="op" id="6953179">}</span><span class="op" id="6953180">}</span><span class="op" id="6953181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953184">}</span><span class="op" id="6953185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953192">query</span><span class="op" id="6953197">:</span>&nbsp;<span class="string" id="6953199">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="6953217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953221">out</span><span class="op" id="6953224">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6953228">Values</span><span class="op" id="6953234">{</span><span class="string" id="6953235">&#34;a&#34;</span><span class="op" id="6953238">:</span>&nbsp;<span class="op" id="6953240">[</span><span class="op" id="6953241">]</span><span class="builtintype" id="6953242">string</span><span class="op" id="6953248">{</span><span class="string" id="6953249">&#34;1&#34;</span><span class="op" id="6953252">,</span>&nbsp;<span class="string" id="6953254">&#34;2&#34;</span><span class="op" id="6953257">,</span>&nbsp;<span class="string" id="6953259">&#34;banana&#34;</span><span class="op" id="6953267">}</span><span class="op" id="6953268">}</span><span class="op" id="6953269">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953272">}</span><span class="op" id="6953273">,</span><br>
<span class="lineno"></span><span class="op" id="6953275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6953278">func</span>&nbsp;<span class="ident" id="6953283">TestParseQuery</span><span class="op" id="6953297">(</span><span class="ident" id="6953298">t</span>&nbsp;<span class="op" id="6953300">*</span><span class="ident" id="6953301">testing</span><span class="op" id="6953308">.</span><span class="ident" id="6953309">T</span><span class="op" id="6953310">)</span>&nbsp;<span class="op" id="6953312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953315">for</span>&nbsp;<span class="ident" id="6953319">i</span><span class="op" id="6953320">,</span>&nbsp;<span class="ident" id="6953322">test</span>&nbsp;<span class="op" id="6953327">:=</span>&nbsp;<span class="keyword" id="6953330">range</span>&nbsp;<span class="ident" id="6953336">parseTests</span>&nbsp;<span class="op" id="6953347">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953351">form</span><span class="op" id="6953355">,</span>&nbsp;<span class="ident" id="6953357">err</span>&nbsp;<span class="op" id="6953361">:=</span>&nbsp;<span class="ident" id="6953364">ParseQuery</span><span class="op" id="6953374">(</span><span class="ident" id="6953375">test</span><span class="op" id="6953379">.</span><span class="ident" id="6953380">query</span><span class="op" id="6953385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953389">if</span>&nbsp;<span class="ident" id="6953392">err</span>&nbsp;<span class="op" id="6953396">!=</span>&nbsp;<span class="ident" id="6953399">nil</span>&nbsp;<span class="op" id="6953403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953408">t</span><span class="op" id="6953409">.</span><span class="ident" id="6953410">Errorf</span><span class="op" id="6953416">(</span><span class="string" id="6953417">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6953448">,</span>&nbsp;<span class="ident" id="6953450">i</span><span class="op" id="6953451">,</span>&nbsp;<span class="ident" id="6953453">err</span><span class="op" id="6953456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953461">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953472">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953476">if</span>&nbsp;<span class="builtinfunc" id="6953479">len</span><span class="op" id="6953482">(</span><span class="ident" id="6953483">form</span><span class="op" id="6953487">)</span>&nbsp;<span class="op" id="6953489">!=</span>&nbsp;<span class="builtinfunc" id="6953492">len</span><span class="op" id="6953495">(</span><span class="ident" id="6953496">test</span><span class="op" id="6953500">.</span><span class="ident" id="6953501">out</span><span class="op" id="6953504">)</span>&nbsp;<span class="op" id="6953506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953511">t</span><span class="op" id="6953512">.</span><span class="ident" id="6953513">Errorf</span><span class="op" id="6953519">(</span><span class="string" id="6953520">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6953554">,</span>&nbsp;<span class="ident" id="6953556">i</span><span class="op" id="6953557">,</span>&nbsp;<span class="builtinfunc" id="6953559">len</span><span class="op" id="6953562">(</span><span class="ident" id="6953563">form</span><span class="op" id="6953567">)</span><span class="op" id="6953568">,</span>&nbsp;<span class="builtinfunc" id="6953570">len</span><span class="op" id="6953573">(</span><span class="ident" id="6953574">test</span><span class="op" id="6953578">.</span><span class="ident" id="6953579">out</span><span class="op" id="6953582">)</span><span class="op" id="6953583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953591">for</span>&nbsp;<span class="ident" id="6953595">k</span><span class="op" id="6953596">,</span>&nbsp;<span class="ident" id="6953598">evs</span>&nbsp;<span class="op" id="6953602">:=</span>&nbsp;<span class="keyword" id="6953605">range</span>&nbsp;<span class="ident" id="6953611">test</span><span class="op" id="6953615">.</span><span class="ident" id="6953616">out</span>&nbsp;<span class="op" id="6953620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953625">vs</span><span class="op" id="6953627">,</span>&nbsp;<span class="ident" id="6953629">ok</span>&nbsp;<span class="op" id="6953632">:=</span>&nbsp;<span class="ident" id="6953635">form</span><span class="op" id="6953639">[</span><span class="ident" id="6953640">k</span><span class="op" id="6953641">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953646">if</span>&nbsp;<span class="op" id="6953649">!</span><span class="ident" id="6953650">ok</span>&nbsp;<span class="op" id="6953653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953659">t</span><span class="op" id="6953660">.</span><span class="ident" id="6953661">Errorf</span><span class="op" id="6953667">(</span><span class="string" id="6953668">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="6953693">,</span>&nbsp;<span class="ident" id="6953695">i</span><span class="op" id="6953696">,</span>&nbsp;<span class="ident" id="6953698">k</span><span class="op" id="6953699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953705">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953722">if</span>&nbsp;<span class="builtinfunc" id="6953725">len</span><span class="op" id="6953728">(</span><span class="ident" id="6953729">vs</span><span class="op" id="6953731">)</span>&nbsp;<span class="op" id="6953733">!=</span>&nbsp;<span class="builtinfunc" id="6953736">len</span><span class="op" id="6953739">(</span><span class="ident" id="6953740">evs</span><span class="op" id="6953743">)</span>&nbsp;<span class="op" id="6953745">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953751">t</span><span class="op" id="6953752">.</span><span class="ident" id="6953753">Errorf</span><span class="op" id="6953759">(</span><span class="string" id="6953760">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6953798">,</span>&nbsp;<span class="ident" id="6953800">i</span><span class="op" id="6953801">,</span>&nbsp;<span class="ident" id="6953803">k</span><span class="op" id="6953804">,</span>&nbsp;<span class="builtinfunc" id="6953806">len</span><span class="op" id="6953809">(</span><span class="ident" id="6953810">vs</span><span class="op" id="6953812">)</span><span class="op" id="6953813">,</span>&nbsp;<span class="builtinfunc" id="6953815">len</span><span class="op" id="6953818">(</span><span class="ident" id="6953819">evs</span><span class="op" id="6953822">)</span><span class="op" id="6953823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953829">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953846">for</span>&nbsp;<span class="ident" id="6953850">j</span><span class="op" id="6953851">,</span>&nbsp;<span class="ident" id="6953853">ev</span>&nbsp;<span class="op" id="6953856">:=</span>&nbsp;<span class="keyword" id="6953859">range</span>&nbsp;<span class="ident" id="6953865">evs</span>&nbsp;<span class="op" id="6953869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953875">if</span>&nbsp;<span class="ident" id="6953878">v</span>&nbsp;<span class="op" id="6953880">:=</span>&nbsp;<span class="ident" id="6953883">vs</span><span class="op" id="6953885">[</span><span class="ident" id="6953886">j</span><span class="op" id="6953887">]</span><span class="op" id="6953888">;</span>&nbsp;<span class="ident" id="6953890">v</span>&nbsp;<span class="op" id="6953892">!=</span>&nbsp;<span class="ident" id="6953895">ev</span>&nbsp;<span class="op" id="6953898">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953905">t</span><span class="op" id="6953906">.</span><span class="ident" id="6953907">Errorf</span><span class="op" id="6953913">(</span><span class="string" id="6953914">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6953951">,</span>&nbsp;<span class="ident" id="6953953">i</span><span class="op" id="6953954">,</span>&nbsp;<span class="ident" id="6953956">k</span><span class="op" id="6953957">,</span>&nbsp;<span class="ident" id="6953959">j</span><span class="op" id="6953960">,</span>&nbsp;<span class="ident" id="6953962">v</span><span class="op" id="6953963">,</span>&nbsp;<span class="ident" id="6953965">ev</span><span class="op" id="6953967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953985">}</span><br>
<span class="lineno">830</span><span class="op" id="6953987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6953990">type</span>&nbsp;<span class="ident" id="6953995">RequestURITest</span>&nbsp;<span class="keyword" id="6954010">struct</span>&nbsp;<span class="op" id="6954017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954020">url</span>&nbsp;<span class="op" id="6954024">*</span><span class="ident" id="6954025">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954030">out</span>&nbsp;<span class="builtintype" id="6954034">string</span><br>
<span class="lineno">835</span><span class="op" id="6954041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6954044">var</span>&nbsp;<span class="ident" id="6954048">requritests</span>&nbsp;<span class="op" id="6954060">=</span>&nbsp;<span class="op" id="6954062">[</span><span class="op" id="6954063">]</span><span class="ident" id="6954064">RequestURITest</span><span class="op" id="6954078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954085">&amp;</span><span class="ident" id="6954086">URL</span><span class="op" id="6954089">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954094">Scheme</span><span class="op" id="6954100">:</span>&nbsp;<span class="string" id="6954102">&#34;http&#34;</span><span class="op" id="6954108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954113">Host</span><span class="op" id="6954117">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954121">&#34;example.com&#34;</span><span class="op" id="6954134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954139">Path</span><span class="op" id="6954143">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954147">&#34;&#34;</span><span class="op" id="6954149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954153">}</span><span class="op" id="6954154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954158">&#34;/&#34;</span><span class="op" id="6954161">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954164">}</span><span class="op" id="6954165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954172">&amp;</span><span class="ident" id="6954173">URL</span><span class="op" id="6954176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954181">Scheme</span><span class="op" id="6954187">:</span>&nbsp;<span class="string" id="6954189">&#34;http&#34;</span><span class="op" id="6954195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954200">Host</span><span class="op" id="6954204">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954208">&#34;example.com&#34;</span><span class="op" id="6954221">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954226">Path</span><span class="op" id="6954230">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954234">&#34;/a&nbsp;b&#34;</span><span class="op" id="6954240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954244">}</span><span class="op" id="6954245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954249">&#34;/a%20b&#34;</span><span class="op" id="6954257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954260">}</span><span class="op" id="6954261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6954264">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954304">&amp;</span><span class="ident" id="6954305">URL</span><span class="op" id="6954308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954313">Scheme</span><span class="op" id="6954319">:</span>&nbsp;<span class="string" id="6954321">&#34;http&#34;</span><span class="op" id="6954327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954332">Host</span><span class="op" id="6954336">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954340">&#34;example.com&#34;</span><span class="op" id="6954353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954358">Opaque</span><span class="op" id="6954364">:</span>&nbsp;<span class="string" id="6954366">&#34;/%2F/%2F/&#34;</span><span class="op" id="6954377">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954381">}</span><span class="op" id="6954382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954386">&#34;/%2F/%2F/&#34;</span><span class="op" id="6954397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954400">}</span><span class="op" id="6954401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6954404">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954440">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954444">&amp;</span><span class="ident" id="6954445">URL</span><span class="op" id="6954448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954453">Scheme</span><span class="op" id="6954459">:</span>&nbsp;<span class="string" id="6954461">&#34;http&#34;</span><span class="op" id="6954467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954472">Host</span><span class="op" id="6954476">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954480">&#34;example.com&#34;</span><span class="op" id="6954493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954498">Opaque</span><span class="op" id="6954504">:</span>&nbsp;<span class="string" id="6954506">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="6954536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954540">}</span><span class="op" id="6954541">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954545">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="6954580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954583">}</span><span class="op" id="6954584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954591">&amp;</span><span class="ident" id="6954592">URL</span><span class="op" id="6954595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954600">Scheme</span><span class="op" id="6954606">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954610">&#34;http&#34;</span><span class="op" id="6954616">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954621">Host</span><span class="op" id="6954625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6954631">&#34;example.com&#34;</span><span class="op" id="6954644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954649">Path</span><span class="op" id="6954653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6954659">&#34;/a&nbsp;b&#34;</span><span class="op" id="6954665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954670">RawQuery</span><span class="op" id="6954678">:</span>&nbsp;<span class="string" id="6954680">&#34;q=go+language&#34;</span><span class="op" id="6954695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954699">}</span><span class="op" id="6954700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954704">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="6954726">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954729">}</span><span class="op" id="6954730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954737">&amp;</span><span class="ident" id="6954738">URL</span><span class="op" id="6954741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954746">Scheme</span><span class="op" id="6954752">:</span>&nbsp;<span class="string" id="6954754">&#34;myschema&#34;</span><span class="op" id="6954764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954769">Opaque</span><span class="op" id="6954775">:</span>&nbsp;<span class="string" id="6954777">&#34;opaque&#34;</span><span class="op" id="6954785">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954789">}</span><span class="op" id="6954790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954794">&#34;opaque&#34;</span><span class="op" id="6954802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954805">}</span><span class="op" id="6954806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954813">&amp;</span><span class="ident" id="6954814">URL</span><span class="op" id="6954817">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954822">Scheme</span><span class="op" id="6954828">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954832">&#34;myschema&#34;</span><span class="op" id="6954842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954847">Opaque</span><span class="op" id="6954853">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6954857">&#34;opaque&#34;</span><span class="op" id="6954865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954870">RawQuery</span><span class="op" id="6954878">:</span>&nbsp;<span class="string" id="6954880">&#34;q=go+language&#34;</span><span class="op" id="6954895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954899">}</span><span class="op" id="6954900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6954904">&#34;opaque?q=go+language&#34;</span><span class="op" id="6954926">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954929">}</span><span class="op" id="6954930">,</span><br>
<span class="lineno"></span><span class="op" id="6954932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6954935">func</span>&nbsp;<span class="ident" id="6954940">TestRequestURI</span><span class="op" id="6954954">(</span><span class="ident" id="6954955">t</span>&nbsp;<span class="op" id="6954957">*</span><span class="ident" id="6954958">testing</span><span class="op" id="6954965">.</span><span class="ident" id="6954966">T</span><span class="op" id="6954967">)</span>&nbsp;<span class="op" id="6954969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6954972">for</span>&nbsp;<span class="ident" id="6954976">_</span><span class="op" id="6954977">,</span>&nbsp;<span class="ident" id="6954979">tt</span>&nbsp;<span class="op" id="6954982">:=</span>&nbsp;<span class="keyword" id="6954985">range</span>&nbsp;<span class="ident" id="6954991">requritests</span>&nbsp;<span class="op" id="6955003">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955007">s</span>&nbsp;<span class="op" id="6955009">:=</span>&nbsp;<span class="ident" id="6955012">tt</span><span class="op" id="6955014">.</span><span class="ident" id="6955015">url</span><span class="op" id="6955018">.</span><span class="ident" id="6955019">RequestURI</span><span class="op" id="6955029">(</span><span class="op" id="6955030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955034">if</span>&nbsp;<span class="ident" id="6955037">s</span>&nbsp;<span class="op" id="6955039">!=</span>&nbsp;<span class="ident" id="6955042">tt</span><span class="op" id="6955044">.</span><span class="ident" id="6955045">out</span>&nbsp;<span class="op" id="6955049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955054">t</span><span class="op" id="6955055">.</span><span class="ident" id="6955056">Errorf</span><span class="op" id="6955062">(</span><span class="string" id="6955063">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="6955101">,</span>&nbsp;<span class="ident" id="6955103">tt</span><span class="op" id="6955105">.</span><span class="ident" id="6955106">url</span><span class="op" id="6955109">,</span>&nbsp;<span class="ident" id="6955111">s</span><span class="op" id="6955112">,</span>&nbsp;<span class="ident" id="6955114">tt</span><span class="op" id="6955116">.</span><span class="ident" id="6955117">out</span><span class="op" id="6955120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955127">}</span><br>
<span class="lineno">905</span><span class="op" id="6955129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6955132">func</span>&nbsp;<span class="ident" id="6955137">TestParseFailure</span><span class="op" id="6955153">(</span><span class="ident" id="6955154">t</span>&nbsp;<span class="op" id="6955156">*</span><span class="ident" id="6955157">testing</span><span class="op" id="6955164">.</span><span class="ident" id="6955165">T</span><span class="op" id="6955166">)</span>&nbsp;<span class="op" id="6955168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6955171">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955220">const</span>&nbsp;<span class="ident" id="6955226">url</span>&nbsp;<span class="op" id="6955230">=</span>&nbsp;<span class="string" id="6955232">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955243">_</span><span class="op" id="6955244">,</span>&nbsp;<span class="ident" id="6955246">err</span>&nbsp;<span class="op" id="6955250">:=</span>&nbsp;<span class="ident" id="6955253">ParseQuery</span><span class="op" id="6955263">(</span><span class="ident" id="6955264">url</span><span class="op" id="6955267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955270">errStr</span>&nbsp;<span class="op" id="6955277">:=</span>&nbsp;<span class="ident" id="6955280">fmt</span><span class="op" id="6955283">.</span><span class="ident" id="6955284">Sprint</span><span class="op" id="6955290">(</span><span class="ident" id="6955291">err</span><span class="op" id="6955294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955297">if</span>&nbsp;<span class="op" id="6955300">!</span><span class="ident" id="6955301">strings</span><span class="op" id="6955308">.</span><span class="ident" id="6955309">Contains</span><span class="op" id="6955317">(</span><span class="ident" id="6955318">errStr</span><span class="op" id="6955324">,</span>&nbsp;<span class="string" id="6955326">&#34;%gh&#34;</span><span class="op" id="6955331">)</span>&nbsp;<span class="op" id="6955333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955337">t</span><span class="op" id="6955338">.</span><span class="ident" id="6955339">Errorf</span><span class="op" id="6955345">(</span><span class="string" id="6955346">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="6955411">,</span>&nbsp;<span class="ident" id="6955413">url</span><span class="op" id="6955416">,</span>&nbsp;<span class="ident" id="6955418">errStr</span><span class="op" id="6955424">,</span>&nbsp;<span class="string" id="6955426">&#34;%gh&#34;</span><span class="op" id="6955431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955434">}</span><br>
<span class="lineno">915</span><span class="op" id="6955436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6955439">type</span>&nbsp;<span class="ident" id="6955444">shouldEscapeTest</span>&nbsp;<span class="keyword" id="6955461">struct</span>&nbsp;<span class="op" id="6955468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955471">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6955478">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955484">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6955491">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955501">escape</span>&nbsp;<span class="builtintype" id="6955508">bool</span><br>
<span class="lineno"></span><span class="op" id="6955513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6955516">var</span>&nbsp;<span class="ident" id="6955520">shouldEscapeTests</span>&nbsp;<span class="op" id="6955538">=</span>&nbsp;<span class="op" id="6955540">[</span><span class="op" id="6955541">]</span><span class="ident" id="6955542">shouldEscapeTest</span><span class="op" id="6955558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6955561">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955595">{</span><span class="string" id="6955596">&#39;a&#39;</span><span class="op" id="6955599">,</span>&nbsp;<span class="ident" id="6955601">encodePath</span><span class="op" id="6955611">,</span>&nbsp;<span class="builtintype" id="6955613">false</span><span class="op" id="6955618">}</span><span class="op" id="6955619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955622">{</span><span class="string" id="6955623">&#39;a&#39;</span><span class="op" id="6955626">,</span>&nbsp;<span class="ident" id="6955628">encodeUserPassword</span><span class="op" id="6955646">,</span>&nbsp;<span class="builtintype" id="6955648">false</span><span class="op" id="6955653">}</span><span class="op" id="6955654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955657">{</span><span class="string" id="6955658">&#39;a&#39;</span><span class="op" id="6955661">,</span>&nbsp;<span class="ident" id="6955663">encodeQueryComponent</span><span class="op" id="6955683">,</span>&nbsp;<span class="builtintype" id="6955685">false</span><span class="op" id="6955690">}</span><span class="op" id="6955691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955694">{</span><span class="string" id="6955695">&#39;a&#39;</span><span class="op" id="6955698">,</span>&nbsp;<span class="ident" id="6955700">encodeFragment</span><span class="op" id="6955714">,</span>&nbsp;<span class="builtintype" id="6955716">false</span><span class="op" id="6955721">}</span><span class="op" id="6955722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955725">{</span><span class="string" id="6955726">&#39;z&#39;</span><span class="op" id="6955729">,</span>&nbsp;<span class="ident" id="6955731">encodePath</span><span class="op" id="6955741">,</span>&nbsp;<span class="builtintype" id="6955743">false</span><span class="op" id="6955748">}</span><span class="op" id="6955749">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955752">{</span><span class="string" id="6955753">&#39;A&#39;</span><span class="op" id="6955756">,</span>&nbsp;<span class="ident" id="6955758">encodePath</span><span class="op" id="6955768">,</span>&nbsp;<span class="builtintype" id="6955770">false</span><span class="op" id="6955775">}</span><span class="op" id="6955776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955779">{</span><span class="string" id="6955780">&#39;Z&#39;</span><span class="op" id="6955783">,</span>&nbsp;<span class="ident" id="6955785">encodePath</span><span class="op" id="6955795">,</span>&nbsp;<span class="builtintype" id="6955797">false</span><span class="op" id="6955802">}</span><span class="op" id="6955803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955806">{</span><span class="string" id="6955807">&#39;0&#39;</span><span class="op" id="6955810">,</span>&nbsp;<span class="ident" id="6955812">encodePath</span><span class="op" id="6955822">,</span>&nbsp;<span class="builtintype" id="6955824">false</span><span class="op" id="6955829">}</span><span class="op" id="6955830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955833">{</span><span class="string" id="6955834">&#39;9&#39;</span><span class="op" id="6955837">,</span>&nbsp;<span class="ident" id="6955839">encodePath</span><span class="op" id="6955849">,</span>&nbsp;<span class="builtintype" id="6955851">false</span><span class="op" id="6955856">}</span><span class="op" id="6955857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955860">{</span><span class="string" id="6955861">&#39;-&#39;</span><span class="op" id="6955864">,</span>&nbsp;<span class="ident" id="6955866">encodePath</span><span class="op" id="6955876">,</span>&nbsp;<span class="builtintype" id="6955878">false</span><span class="op" id="6955883">}</span><span class="op" id="6955884">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955887">{</span><span class="string" id="6955888">&#39;-&#39;</span><span class="op" id="6955891">,</span>&nbsp;<span class="ident" id="6955893">encodeUserPassword</span><span class="op" id="6955911">,</span>&nbsp;<span class="builtintype" id="6955913">false</span><span class="op" id="6955918">}</span><span class="op" id="6955919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955922">{</span><span class="string" id="6955923">&#39;-&#39;</span><span class="op" id="6955926">,</span>&nbsp;<span class="ident" id="6955928">encodeQueryComponent</span><span class="op" id="6955948">,</span>&nbsp;<span class="builtintype" id="6955950">false</span><span class="op" id="6955955">}</span><span class="op" id="6955956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955959">{</span><span class="string" id="6955960">&#39;-&#39;</span><span class="op" id="6955963">,</span>&nbsp;<span class="ident" id="6955965">encodeFragment</span><span class="op" id="6955979">,</span>&nbsp;<span class="builtintype" id="6955981">false</span><span class="op" id="6955986">}</span><span class="op" id="6955987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955990">{</span><span class="string" id="6955991">&#39;.&#39;</span><span class="op" id="6955994">,</span>&nbsp;<span class="ident" id="6955996">encodePath</span><span class="op" id="6956006">,</span>&nbsp;<span class="builtintype" id="6956008">false</span><span class="op" id="6956013">}</span><span class="op" id="6956014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956017">{</span><span class="string" id="6956018">&#39;_&#39;</span><span class="op" id="6956021">,</span>&nbsp;<span class="ident" id="6956023">encodePath</span><span class="op" id="6956033">,</span>&nbsp;<span class="builtintype" id="6956035">false</span><span class="op" id="6956040">}</span><span class="op" id="6956041">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956044">{</span><span class="string" id="6956045">&#39;~&#39;</span><span class="op" id="6956048">,</span>&nbsp;<span class="ident" id="6956050">encodePath</span><span class="op" id="6956060">,</span>&nbsp;<span class="builtintype" id="6956062">false</span><span class="op" id="6956067">}</span><span class="op" id="6956068">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956072">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956103">{</span><span class="string" id="6956104">&#39;:&#39;</span><span class="op" id="6956107">,</span>&nbsp;<span class="ident" id="6956109">encodeUserPassword</span><span class="op" id="6956127">,</span>&nbsp;<span class="builtintype" id="6956129">true</span><span class="op" id="6956133">}</span><span class="op" id="6956134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956137">{</span><span class="string" id="6956138">&#39;/&#39;</span><span class="op" id="6956141">,</span>&nbsp;<span class="ident" id="6956143">encodeUserPassword</span><span class="op" id="6956161">,</span>&nbsp;<span class="builtintype" id="6956163">true</span><span class="op" id="6956167">}</span><span class="op" id="6956168">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956171">{</span><span class="string" id="6956172">&#39;?&#39;</span><span class="op" id="6956175">,</span>&nbsp;<span class="ident" id="6956177">encodeUserPassword</span><span class="op" id="6956195">,</span>&nbsp;<span class="builtintype" id="6956197">true</span><span class="op" id="6956201">}</span><span class="op" id="6956202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956205">{</span><span class="string" id="6956206">&#39;@&#39;</span><span class="op" id="6956209">,</span>&nbsp;<span class="ident" id="6956211">encodeUserPassword</span><span class="op" id="6956229">,</span>&nbsp;<span class="builtintype" id="6956231">true</span><span class="op" id="6956235">}</span><span class="op" id="6956236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956239">{</span><span class="string" id="6956240">&#39;$&#39;</span><span class="op" id="6956243">,</span>&nbsp;<span class="ident" id="6956245">encodeUserPassword</span><span class="op" id="6956263">,</span>&nbsp;<span class="builtintype" id="6956265">false</span><span class="op" id="6956270">}</span><span class="op" id="6956271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956274">{</span><span class="string" id="6956275">&#39;&amp;&#39;</span><span class="op" id="6956278">,</span>&nbsp;<span class="ident" id="6956280">encodeUserPassword</span><span class="op" id="6956298">,</span>&nbsp;<span class="builtintype" id="6956300">false</span><span class="op" id="6956305">}</span><span class="op" id="6956306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956309">{</span><span class="string" id="6956310">&#39;+&#39;</span><span class="op" id="6956313">,</span>&nbsp;<span class="ident" id="6956315">encodeUserPassword</span><span class="op" id="6956333">,</span>&nbsp;<span class="builtintype" id="6956335">false</span><span class="op" id="6956340">}</span><span class="op" id="6956341">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956344">{</span><span class="string" id="6956345">&#39;,&#39;</span><span class="op" id="6956348">,</span>&nbsp;<span class="ident" id="6956350">encodeUserPassword</span><span class="op" id="6956368">,</span>&nbsp;<span class="builtintype" id="6956370">false</span><span class="op" id="6956375">}</span><span class="op" id="6956376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956379">{</span><span class="string" id="6956380">&#39;;&#39;</span><span class="op" id="6956383">,</span>&nbsp;<span class="ident" id="6956385">encodeUserPassword</span><span class="op" id="6956403">,</span>&nbsp;<span class="builtintype" id="6956405">false</span><span class="op" id="6956410">}</span><span class="op" id="6956411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956414">{</span><span class="string" id="6956415">&#39;=&#39;</span><span class="op" id="6956418">,</span>&nbsp;<span class="ident" id="6956420">encodeUserPassword</span><span class="op" id="6956438">,</span>&nbsp;<span class="builtintype" id="6956440">false</span><span class="op" id="6956445">}</span><span class="op" id="6956446">,</span><br>
<span class="lineno"></span><span class="op" id="6956448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="6956451">func</span>&nbsp;<span class="ident" id="6956456">TestShouldEscape</span><span class="op" id="6956472">(</span><span class="ident" id="6956473">t</span>&nbsp;<span class="op" id="6956475">*</span><span class="ident" id="6956476">testing</span><span class="op" id="6956483">.</span><span class="ident" id="6956484">T</span><span class="op" id="6956485">)</span>&nbsp;<span class="op" id="6956487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6956490">for</span>&nbsp;<span class="ident" id="6956494">_</span><span class="op" id="6956495">,</span>&nbsp;<span class="ident" id="6956497">tt</span>&nbsp;<span class="op" id="6956500">:=</span>&nbsp;<span class="keyword" id="6956503">range</span>&nbsp;<span class="ident" id="6956509">shouldEscapeTests</span>&nbsp;<span class="op" id="6956527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6956531">if</span>&nbsp;<span class="ident" id="6956534">shouldEscape</span><span class="op" id="6956546">(</span><span class="ident" id="6956547">tt</span><span class="op" id="6956549">.</span><span class="ident" id="6956550">in</span><span class="op" id="6956552">,</span>&nbsp;<span class="ident" id="6956554">tt</span><span class="op" id="6956556">.</span><span class="ident" id="6956557">mode</span><span class="op" id="6956561">)</span>&nbsp;<span class="op" id="6956563">!=</span>&nbsp;<span class="ident" id="6956566">tt</span><span class="op" id="6956568">.</span><span class="ident" id="6956569">escape</span>&nbsp;<span class="op" id="6956576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956581">t</span><span class="op" id="6956582">.</span><span class="ident" id="6956583">Errorf</span><span class="op" id="6956589">(</span><span class="string" id="6956590">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6956637">,</span>&nbsp;<span class="ident" id="6956639">tt</span><span class="op" id="6956641">.</span><span class="ident" id="6956642">in</span><span class="op" id="6956644">,</span>&nbsp;<span class="ident" id="6956646">tt</span><span class="op" id="6956648">.</span><span class="ident" id="6956649">mode</span><span class="op" id="6956653">,</span>&nbsp;<span class="op" id="6956655">!</span><span class="ident" id="6956656">tt</span><span class="op" id="6956658">.</span><span class="ident" id="6956659">escape</span><span class="op" id="6956665">,</span>&nbsp;<span class="ident" id="6956667">tt</span><span class="op" id="6956669">.</span><span class="ident" id="6956670">escape</span><span class="op" id="6956676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956680">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956683">}</span><br>
<span class="lineno"></span><span class="op" id="6956685">}</span>
</div>
</body>
</html>
