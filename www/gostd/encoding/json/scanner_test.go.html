<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8313446">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8313502">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8313556">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8313607">package</span>&nbsp;<span class="ident" id="8313615">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8313621">import</span>&nbsp;<span class="op" id="8313628">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8313631">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8313640">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8313648">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8313661">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8313672">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8313682">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8313685">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8313715">type</span>&nbsp;<span class="ident" id="8313720">example</span>&nbsp;<span class="keyword" id="8313728">struct</span>&nbsp;<span class="op" id="8313735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8313738">compact</span>&nbsp;<span class="builtintype" id="8313746">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8313754">indent</span>&nbsp;&nbsp;<span class="builtintype" id="8313762">string</span><br>
<span class="lineno">20</span><span class="op" id="8313769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8313772">var</span>&nbsp;<span class="ident" id="8313776">examples</span>&nbsp;<span class="op" id="8313785">=</span>&nbsp;<span class="op" id="8313787">[</span><span class="op" id="8313788">]</span><span class="ident" id="8313789">example</span><span class="op" id="8313796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313799">{</span><span class="string" id="8313800">`1`</span><span class="op" id="8313803">,</span>&nbsp;<span class="string" id="8313805">`1`</span><span class="op" id="8313808">}</span><span class="op" id="8313809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313812">{</span><span class="string" id="8313813">`{}`</span><span class="op" id="8313817">,</span>&nbsp;<span class="string" id="8313819">`{}`</span><span class="op" id="8313823">}</span><span class="op" id="8313824">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313827">{</span><span class="string" id="8313828">`[]`</span><span class="op" id="8313832">,</span>&nbsp;<span class="string" id="8313834">`[]`</span><span class="op" id="8313838">}</span><span class="op" id="8313839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313842">{</span><span class="string" id="8313843">`{&#34;&#34;:2}`</span><span class="op" id="8313851">,</span>&nbsp;<span class="string" id="8313853">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="8313870">}</span><span class="op" id="8313871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313874">{</span><span class="string" id="8313875">`[3]`</span><span class="op" id="8313880">,</span>&nbsp;<span class="string" id="8313882">&#34;[\n\t3\n]&#34;</span><span class="op" id="8313893">}</span><span class="op" id="8313894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313897">{</span><span class="string" id="8313898">`[1,2,3]`</span><span class="op" id="8313907">,</span>&nbsp;<span class="string" id="8313909">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="8313932">}</span><span class="op" id="8313933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313936">{</span><span class="string" id="8313937">`{&#34;x&#34;:1}`</span><span class="op" id="8313946">,</span>&nbsp;<span class="string" id="8313948">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="8313966">}</span><span class="op" id="8313967">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8313970">{</span><span class="ident" id="8313971">ex1</span><span class="op" id="8313974">,</span>&nbsp;<span class="ident" id="8313976">ex1i</span><span class="op" id="8313980">}</span><span class="op" id="8313981">,</span><br>
<span class="lineno"></span><span class="op" id="8313983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8313986">var</span>&nbsp;<span class="ident" id="8313990">ex1</span>&nbsp;<span class="op" id="8313994">=</span>&nbsp;<span class="string" id="8313996">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8314035">var</span>&nbsp;<span class="ident" id="8314039">ex1i</span>&nbsp;<span class="op" id="8314044">=</span>&nbsp;<span class="string" id="8314046">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8314102">func</span>&nbsp;<span class="ident" id="8314107">TestCompact</span><span class="op" id="8314118">(</span><span class="ident" id="8314119">t</span>&nbsp;<span class="op" id="8314121">*</span><span class="ident" id="8314122">testing</span><span class="op" id="8314129">.</span><span class="ident" id="8314130">T</span><span class="op" id="8314131">)</span>&nbsp;<span class="op" id="8314133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314136">var</span>&nbsp;<span class="ident" id="8314140">buf</span>&nbsp;<span class="ident" id="8314144">bytes</span><span class="op" id="8314149">.</span><span class="ident" id="8314150">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314158">for</span>&nbsp;<span class="ident" id="8314162">_</span><span class="op" id="8314163">,</span>&nbsp;<span class="ident" id="8314165">tt</span>&nbsp;<span class="op" id="8314168">:=</span>&nbsp;<span class="keyword" id="8314171">range</span>&nbsp;<span class="ident" id="8314177">examples</span>&nbsp;<span class="op" id="8314186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314190">buf</span><span class="op" id="8314193">.</span><span class="ident" id="8314194">Reset</span><span class="op" id="8314199">(</span><span class="op" id="8314200">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314204">if</span>&nbsp;<span class="ident" id="8314207">err</span>&nbsp;<span class="op" id="8314211">:=</span>&nbsp;<span class="ident" id="8314214">Compact</span><span class="op" id="8314221">(</span><span class="op" id="8314222">&amp;</span><span class="ident" id="8314223">buf</span><span class="op" id="8314226">,</span>&nbsp;<span class="op" id="8314228">[</span><span class="op" id="8314229">]</span><span class="builtintype" id="8314230">byte</span><span class="op" id="8314234">(</span><span class="ident" id="8314235">tt</span><span class="op" id="8314237">.</span><span class="ident" id="8314238">compact</span><span class="op" id="8314245">)</span><span class="op" id="8314246">)</span><span class="op" id="8314247">;</span>&nbsp;<span class="ident" id="8314249">err</span>&nbsp;<span class="op" id="8314253">!=</span>&nbsp;<span class="ident" id="8314256">nil</span>&nbsp;<span class="op" id="8314260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314265">t</span><span class="op" id="8314266">.</span><span class="ident" id="8314267">Errorf</span><span class="op" id="8314273">(</span><span class="string" id="8314274">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8314292">,</span>&nbsp;<span class="ident" id="8314294">tt</span><span class="op" id="8314296">.</span><span class="ident" id="8314297">compact</span><span class="op" id="8314304">,</span>&nbsp;<span class="ident" id="8314306">err</span><span class="op" id="8314309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314313">}</span>&nbsp;<span class="keyword" id="8314315">else</span>&nbsp;<span class="keyword" id="8314320">if</span>&nbsp;<span class="ident" id="8314323">s</span>&nbsp;<span class="op" id="8314325">:=</span>&nbsp;<span class="ident" id="8314328">buf</span><span class="op" id="8314331">.</span><span class="ident" id="8314332">String</span><span class="op" id="8314338">(</span><span class="op" id="8314339">)</span><span class="op" id="8314340">;</span>&nbsp;<span class="ident" id="8314342">s</span>&nbsp;<span class="op" id="8314344">!=</span>&nbsp;<span class="ident" id="8314347">tt</span><span class="op" id="8314349">.</span><span class="ident" id="8314350">compact</span>&nbsp;<span class="op" id="8314358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314363">t</span><span class="op" id="8314364">.</span><span class="ident" id="8314365">Errorf</span><span class="op" id="8314371">(</span><span class="string" id="8314372">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8314407">,</span>&nbsp;<span class="ident" id="8314409">tt</span><span class="op" id="8314411">.</span><span class="ident" id="8314412">compact</span><span class="op" id="8314419">,</span>&nbsp;<span class="ident" id="8314421">s</span><span class="op" id="8314422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314426">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314431">buf</span><span class="op" id="8314434">.</span><span class="ident" id="8314435">Reset</span><span class="op" id="8314440">(</span><span class="op" id="8314441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314445">if</span>&nbsp;<span class="ident" id="8314448">err</span>&nbsp;<span class="op" id="8314452">:=</span>&nbsp;<span class="ident" id="8314455">Compact</span><span class="op" id="8314462">(</span><span class="op" id="8314463">&amp;</span><span class="ident" id="8314464">buf</span><span class="op" id="8314467">,</span>&nbsp;<span class="op" id="8314469">[</span><span class="op" id="8314470">]</span><span class="builtintype" id="8314471">byte</span><span class="op" id="8314475">(</span><span class="ident" id="8314476">tt</span><span class="op" id="8314478">.</span><span class="ident" id="8314479">indent</span><span class="op" id="8314485">)</span><span class="op" id="8314486">)</span><span class="op" id="8314487">;</span>&nbsp;<span class="ident" id="8314489">err</span>&nbsp;<span class="op" id="8314493">!=</span>&nbsp;<span class="ident" id="8314496">nil</span>&nbsp;<span class="op" id="8314500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314505">t</span><span class="op" id="8314506">.</span><span class="ident" id="8314507">Errorf</span><span class="op" id="8314513">(</span><span class="string" id="8314514">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8314532">,</span>&nbsp;<span class="ident" id="8314534">tt</span><span class="op" id="8314536">.</span><span class="ident" id="8314537">indent</span><span class="op" id="8314543">,</span>&nbsp;<span class="ident" id="8314545">err</span><span class="op" id="8314548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314553">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314564">}</span>&nbsp;<span class="keyword" id="8314566">else</span>&nbsp;<span class="keyword" id="8314571">if</span>&nbsp;<span class="ident" id="8314574">s</span>&nbsp;<span class="op" id="8314576">:=</span>&nbsp;<span class="ident" id="8314579">buf</span><span class="op" id="8314582">.</span><span class="ident" id="8314583">String</span><span class="op" id="8314589">(</span><span class="op" id="8314590">)</span><span class="op" id="8314591">;</span>&nbsp;<span class="ident" id="8314593">s</span>&nbsp;<span class="op" id="8314595">!=</span>&nbsp;<span class="ident" id="8314598">tt</span><span class="op" id="8314600">.</span><span class="ident" id="8314601">compact</span>&nbsp;<span class="op" id="8314609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314614">t</span><span class="op" id="8314615">.</span><span class="ident" id="8314616">Errorf</span><span class="op" id="8314622">(</span><span class="string" id="8314623">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8314653">,</span>&nbsp;<span class="ident" id="8314655">tt</span><span class="op" id="8314657">.</span><span class="ident" id="8314658">indent</span><span class="op" id="8314664">,</span>&nbsp;<span class="ident" id="8314666">s</span><span class="op" id="8314667">,</span>&nbsp;<span class="ident" id="8314669">tt</span><span class="op" id="8314671">.</span><span class="ident" id="8314672">compact</span><span class="op" id="8314679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314686">}</span><br>
<span class="lineno"></span><span class="op" id="8314688">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8314691">func</span>&nbsp;<span class="ident" id="8314696">TestCompactSeparators</span><span class="op" id="8314717">(</span><span class="ident" id="8314718">t</span>&nbsp;<span class="op" id="8314720">*</span><span class="ident" id="8314721">testing</span><span class="op" id="8314728">.</span><span class="ident" id="8314729">T</span><span class="op" id="8314730">)</span>&nbsp;<span class="op" id="8314732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8314735">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8314791">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314835">tests</span>&nbsp;<span class="op" id="8314841">:=</span>&nbsp;<span class="op" id="8314844">[</span><span class="op" id="8314845">]</span><span class="keyword" id="8314846">struct</span>&nbsp;<span class="op" id="8314853">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8314857">in</span><span class="op" id="8314859">,</span>&nbsp;<span class="ident" id="8314861">compact</span>&nbsp;<span class="builtintype" id="8314869">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314877">}</span><span class="op" id="8314878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314882">{</span><span class="string" id="8314883">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="8314900">,</span>&nbsp;<span class="string" id="8314902">`{&#34;\u2028&#34;:1}`</span><span class="op" id="8314916">}</span><span class="op" id="8314917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314921">{</span><span class="string" id="8314922">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="8314939">,</span>&nbsp;<span class="string" id="8314941">`{&#34;\u2029&#34;:2}`</span><span class="op" id="8314955">}</span><span class="op" id="8314956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8314959">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314962">for</span>&nbsp;<span class="ident" id="8314966">_</span><span class="op" id="8314967">,</span>&nbsp;<span class="ident" id="8314969">tt</span>&nbsp;<span class="op" id="8314972">:=</span>&nbsp;<span class="keyword" id="8314975">range</span>&nbsp;<span class="ident" id="8314981">tests</span>&nbsp;<span class="op" id="8314987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8314991">var</span>&nbsp;<span class="ident" id="8314995">buf</span>&nbsp;<span class="ident" id="8314999">bytes</span><span class="op" id="8315004">.</span><span class="ident" id="8315005">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315014">if</span>&nbsp;<span class="ident" id="8315017">err</span>&nbsp;<span class="op" id="8315021">:=</span>&nbsp;<span class="ident" id="8315024">Compact</span><span class="op" id="8315031">(</span><span class="op" id="8315032">&amp;</span><span class="ident" id="8315033">buf</span><span class="op" id="8315036">,</span>&nbsp;<span class="op" id="8315038">[</span><span class="op" id="8315039">]</span><span class="builtintype" id="8315040">byte</span><span class="op" id="8315044">(</span><span class="ident" id="8315045">tt</span><span class="op" id="8315047">.</span><span class="ident" id="8315048">in</span><span class="op" id="8315050">)</span><span class="op" id="8315051">)</span><span class="op" id="8315052">;</span>&nbsp;<span class="ident" id="8315054">err</span>&nbsp;<span class="op" id="8315058">!=</span>&nbsp;<span class="ident" id="8315061">nil</span>&nbsp;<span class="op" id="8315065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315070">t</span><span class="op" id="8315071">.</span><span class="ident" id="8315072">Errorf</span><span class="op" id="8315078">(</span><span class="string" id="8315079">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="8315096">,</span>&nbsp;<span class="ident" id="8315098">tt</span><span class="op" id="8315100">.</span><span class="ident" id="8315101">in</span><span class="op" id="8315103">,</span>&nbsp;<span class="ident" id="8315105">err</span><span class="op" id="8315108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315112">}</span>&nbsp;<span class="keyword" id="8315114">else</span>&nbsp;<span class="keyword" id="8315119">if</span>&nbsp;<span class="ident" id="8315122">s</span>&nbsp;<span class="op" id="8315124">:=</span>&nbsp;<span class="ident" id="8315127">buf</span><span class="op" id="8315130">.</span><span class="ident" id="8315131">String</span><span class="op" id="8315137">(</span><span class="op" id="8315138">)</span><span class="op" id="8315139">;</span>&nbsp;<span class="ident" id="8315141">s</span>&nbsp;<span class="op" id="8315143">!=</span>&nbsp;<span class="ident" id="8315146">tt</span><span class="op" id="8315148">.</span><span class="ident" id="8315149">compact</span>&nbsp;<span class="op" id="8315157">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315162">t</span><span class="op" id="8315163">.</span><span class="ident" id="8315164">Errorf</span><span class="op" id="8315170">(</span><span class="string" id="8315171">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315198">,</span>&nbsp;<span class="ident" id="8315200">tt</span><span class="op" id="8315202">.</span><span class="ident" id="8315203">in</span><span class="op" id="8315205">,</span>&nbsp;<span class="ident" id="8315207">s</span><span class="op" id="8315208">,</span>&nbsp;<span class="ident" id="8315210">tt</span><span class="op" id="8315212">.</span><span class="ident" id="8315213">compact</span><span class="op" id="8315220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315227">}</span><br>
<span class="lineno"></span><span class="op" id="8315229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="8315232">func</span>&nbsp;<span class="ident" id="8315237">TestIndent</span><span class="op" id="8315247">(</span><span class="ident" id="8315248">t</span>&nbsp;<span class="op" id="8315250">*</span><span class="ident" id="8315251">testing</span><span class="op" id="8315258">.</span><span class="ident" id="8315259">T</span><span class="op" id="8315260">)</span>&nbsp;<span class="op" id="8315262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315265">var</span>&nbsp;<span class="ident" id="8315269">buf</span>&nbsp;<span class="ident" id="8315273">bytes</span><span class="op" id="8315278">.</span><span class="ident" id="8315279">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315287">for</span>&nbsp;<span class="ident" id="8315291">_</span><span class="op" id="8315292">,</span>&nbsp;<span class="ident" id="8315294">tt</span>&nbsp;<span class="op" id="8315297">:=</span>&nbsp;<span class="keyword" id="8315300">range</span>&nbsp;<span class="ident" id="8315306">examples</span>&nbsp;<span class="op" id="8315315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315319">buf</span><span class="op" id="8315322">.</span><span class="ident" id="8315323">Reset</span><span class="op" id="8315328">(</span><span class="op" id="8315329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315333">if</span>&nbsp;<span class="ident" id="8315336">err</span>&nbsp;<span class="op" id="8315340">:=</span>&nbsp;<span class="ident" id="8315343">Indent</span><span class="op" id="8315349">(</span><span class="op" id="8315350">&amp;</span><span class="ident" id="8315351">buf</span><span class="op" id="8315354">,</span>&nbsp;<span class="op" id="8315356">[</span><span class="op" id="8315357">]</span><span class="builtintype" id="8315358">byte</span><span class="op" id="8315362">(</span><span class="ident" id="8315363">tt</span><span class="op" id="8315365">.</span><span class="ident" id="8315366">indent</span><span class="op" id="8315372">)</span><span class="op" id="8315373">,</span>&nbsp;<span class="string" id="8315375">&#34;&#34;</span><span class="op" id="8315377">,</span>&nbsp;<span class="string" id="8315379">&#34;\t&#34;</span><span class="op" id="8315383">)</span><span class="op" id="8315384">;</span>&nbsp;<span class="ident" id="8315386">err</span>&nbsp;<span class="op" id="8315390">!=</span>&nbsp;<span class="ident" id="8315393">nil</span>&nbsp;<span class="op" id="8315397">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315402">t</span><span class="op" id="8315403">.</span><span class="ident" id="8315404">Errorf</span><span class="op" id="8315410">(</span><span class="string" id="8315411">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8315428">,</span>&nbsp;<span class="ident" id="8315430">tt</span><span class="op" id="8315432">.</span><span class="ident" id="8315433">indent</span><span class="op" id="8315439">,</span>&nbsp;<span class="ident" id="8315441">err</span><span class="op" id="8315444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315448">}</span>&nbsp;<span class="keyword" id="8315450">else</span>&nbsp;<span class="keyword" id="8315455">if</span>&nbsp;<span class="ident" id="8315458">s</span>&nbsp;<span class="op" id="8315460">:=</span>&nbsp;<span class="ident" id="8315463">buf</span><span class="op" id="8315466">.</span><span class="ident" id="8315467">String</span><span class="op" id="8315473">(</span><span class="op" id="8315474">)</span><span class="op" id="8315475">;</span>&nbsp;<span class="ident" id="8315477">s</span>&nbsp;<span class="op" id="8315479">!=</span>&nbsp;<span class="ident" id="8315482">tt</span><span class="op" id="8315484">.</span><span class="ident" id="8315485">indent</span>&nbsp;<span class="op" id="8315492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315497">t</span><span class="op" id="8315498">.</span><span class="ident" id="8315499">Errorf</span><span class="op" id="8315505">(</span><span class="string" id="8315506">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8315540">,</span>&nbsp;<span class="ident" id="8315542">tt</span><span class="op" id="8315544">.</span><span class="ident" id="8315545">indent</span><span class="op" id="8315551">,</span>&nbsp;<span class="ident" id="8315553">s</span><span class="op" id="8315554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315563">buf</span><span class="op" id="8315566">.</span><span class="ident" id="8315567">Reset</span><span class="op" id="8315572">(</span><span class="op" id="8315573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315577">if</span>&nbsp;<span class="ident" id="8315580">err</span>&nbsp;<span class="op" id="8315584">:=</span>&nbsp;<span class="ident" id="8315587">Indent</span><span class="op" id="8315593">(</span><span class="op" id="8315594">&amp;</span><span class="ident" id="8315595">buf</span><span class="op" id="8315598">,</span>&nbsp;<span class="op" id="8315600">[</span><span class="op" id="8315601">]</span><span class="builtintype" id="8315602">byte</span><span class="op" id="8315606">(</span><span class="ident" id="8315607">tt</span><span class="op" id="8315609">.</span><span class="ident" id="8315610">compact</span><span class="op" id="8315617">)</span><span class="op" id="8315618">,</span>&nbsp;<span class="string" id="8315620">&#34;&#34;</span><span class="op" id="8315622">,</span>&nbsp;<span class="string" id="8315624">&#34;\t&#34;</span><span class="op" id="8315628">)</span><span class="op" id="8315629">;</span>&nbsp;<span class="ident" id="8315631">err</span>&nbsp;<span class="op" id="8315635">!=</span>&nbsp;<span class="ident" id="8315638">nil</span>&nbsp;<span class="op" id="8315642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315647">t</span><span class="op" id="8315648">.</span><span class="ident" id="8315649">Errorf</span><span class="op" id="8315655">(</span><span class="string" id="8315656">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8315673">,</span>&nbsp;<span class="ident" id="8315675">tt</span><span class="op" id="8315677">.</span><span class="ident" id="8315678">compact</span><span class="op" id="8315685">,</span>&nbsp;<span class="ident" id="8315687">err</span><span class="op" id="8315690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315695">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315706">}</span>&nbsp;<span class="keyword" id="8315708">else</span>&nbsp;<span class="keyword" id="8315713">if</span>&nbsp;<span class="ident" id="8315716">s</span>&nbsp;<span class="op" id="8315718">:=</span>&nbsp;<span class="ident" id="8315721">buf</span><span class="op" id="8315724">.</span><span class="ident" id="8315725">String</span><span class="op" id="8315731">(</span><span class="op" id="8315732">)</span><span class="op" id="8315733">;</span>&nbsp;<span class="ident" id="8315735">s</span>&nbsp;<span class="op" id="8315737">!=</span>&nbsp;<span class="ident" id="8315740">tt</span><span class="op" id="8315742">.</span><span class="ident" id="8315743">indent</span>&nbsp;<span class="op" id="8315750">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315755">t</span><span class="op" id="8315756">.</span><span class="ident" id="8315757">Errorf</span><span class="op" id="8315763">(</span><span class="string" id="8315764">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8315793">,</span>&nbsp;<span class="ident" id="8315795">tt</span><span class="op" id="8315797">.</span><span class="ident" id="8315798">compact</span><span class="op" id="8315805">,</span>&nbsp;<span class="ident" id="8315807">s</span><span class="op" id="8315808">,</span>&nbsp;<span class="ident" id="8315810">tt</span><span class="op" id="8315812">.</span><span class="ident" id="8315813">indent</span><span class="op" id="8315819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315826">}</span><br>
<span class="lineno"></span><span class="op" id="8315828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="8315831">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8315870">func</span>&nbsp;<span class="ident" id="8315875">TestCompactBig</span><span class="op" id="8315889">(</span><span class="ident" id="8315890">t</span>&nbsp;<span class="op" id="8315892">*</span><span class="ident" id="8315893">testing</span><span class="op" id="8315900">.</span><span class="ident" id="8315901">T</span><span class="op" id="8315902">)</span>&nbsp;<span class="op" id="8315904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315907">initBig</span><span class="op" id="8315914">(</span><span class="op" id="8315915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315918">var</span>&nbsp;<span class="ident" id="8315922">buf</span>&nbsp;<span class="ident" id="8315926">bytes</span><span class="op" id="8315931">.</span><span class="ident" id="8315932">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315940">if</span>&nbsp;<span class="ident" id="8315943">err</span>&nbsp;<span class="op" id="8315947">:=</span>&nbsp;<span class="ident" id="8315950">Compact</span><span class="op" id="8315957">(</span><span class="op" id="8315958">&amp;</span><span class="ident" id="8315959">buf</span><span class="op" id="8315962">,</span>&nbsp;<span class="ident" id="8315964">jsonBig</span><span class="op" id="8315971">)</span><span class="op" id="8315972">;</span>&nbsp;<span class="ident" id="8315974">err</span>&nbsp;<span class="op" id="8315978">!=</span>&nbsp;<span class="ident" id="8315981">nil</span>&nbsp;<span class="op" id="8315985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315989">t</span><span class="op" id="8315990">.</span><span class="ident" id="8315991">Fatalf</span><span class="op" id="8315997">(</span><span class="string" id="8315998">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8316011">,</span>&nbsp;<span class="ident" id="8316013">err</span><span class="op" id="8316016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316022">b</span>&nbsp;<span class="op" id="8316024">:=</span>&nbsp;<span class="ident" id="8316027">buf</span><span class="op" id="8316030">.</span><span class="ident" id="8316031">Bytes</span><span class="op" id="8316036">(</span><span class="op" id="8316037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316040">if</span>&nbsp;<span class="op" id="8316043">!</span><span class="ident" id="8316044">bytes</span><span class="op" id="8316049">.</span><span class="ident" id="8316050">Equal</span><span class="op" id="8316055">(</span><span class="ident" id="8316056">b</span><span class="op" id="8316057">,</span>&nbsp;<span class="ident" id="8316059">jsonBig</span><span class="op" id="8316066">)</span>&nbsp;<span class="op" id="8316068">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316072">t</span><span class="op" id="8316073">.</span><span class="ident" id="8316074">Error</span><span class="op" id="8316079">(</span><span class="string" id="8316080">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8316109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316113">diff</span><span class="op" id="8316117">(</span><span class="ident" id="8316118">t</span><span class="op" id="8316119">,</span>&nbsp;<span class="ident" id="8316121">b</span><span class="op" id="8316122">,</span>&nbsp;<span class="ident" id="8316124">jsonBig</span><span class="op" id="8316131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316135">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316143">}</span><br>
<span class="lineno"></span><span class="op" id="8316145">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="8316148">func</span>&nbsp;<span class="ident" id="8316153">TestIndentBig</span><span class="op" id="8316166">(</span><span class="ident" id="8316167">t</span>&nbsp;<span class="op" id="8316169">*</span><span class="ident" id="8316170">testing</span><span class="op" id="8316177">.</span><span class="ident" id="8316178">T</span><span class="op" id="8316179">)</span>&nbsp;<span class="op" id="8316181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316184">initBig</span><span class="op" id="8316191">(</span><span class="op" id="8316192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316195">var</span>&nbsp;<span class="ident" id="8316199">buf</span>&nbsp;<span class="ident" id="8316203">bytes</span><span class="op" id="8316208">.</span><span class="ident" id="8316209">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316217">if</span>&nbsp;<span class="ident" id="8316220">err</span>&nbsp;<span class="op" id="8316224">:=</span>&nbsp;<span class="ident" id="8316227">Indent</span><span class="op" id="8316233">(</span><span class="op" id="8316234">&amp;</span><span class="ident" id="8316235">buf</span><span class="op" id="8316238">,</span>&nbsp;<span class="ident" id="8316240">jsonBig</span><span class="op" id="8316247">,</span>&nbsp;<span class="string" id="8316249">&#34;&#34;</span><span class="op" id="8316251">,</span>&nbsp;<span class="string" id="8316253">&#34;\t&#34;</span><span class="op" id="8316257">)</span><span class="op" id="8316258">;</span>&nbsp;<span class="ident" id="8316260">err</span>&nbsp;<span class="op" id="8316264">!=</span>&nbsp;<span class="ident" id="8316267">nil</span>&nbsp;<span class="op" id="8316271">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316275">t</span><span class="op" id="8316276">.</span><span class="ident" id="8316277">Fatalf</span><span class="op" id="8316283">(</span><span class="string" id="8316284">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="8316297">,</span>&nbsp;<span class="ident" id="8316299">err</span><span class="op" id="8316302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316308">b</span>&nbsp;<span class="op" id="8316310">:=</span>&nbsp;<span class="ident" id="8316313">buf</span><span class="op" id="8316316">.</span><span class="ident" id="8316317">Bytes</span><span class="op" id="8316322">(</span><span class="op" id="8316323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316326">if</span>&nbsp;<span class="builtinfunc" id="8316329">len</span><span class="op" id="8316332">(</span><span class="ident" id="8316333">b</span><span class="op" id="8316334">)</span>&nbsp;<span class="op" id="8316336">==</span>&nbsp;<span class="builtinfunc" id="8316339">len</span><span class="op" id="8316342">(</span><span class="ident" id="8316343">jsonBig</span><span class="op" id="8316350">)</span>&nbsp;<span class="op" id="8316352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8316356">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8316405">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316442">t</span><span class="op" id="8316443">.</span><span class="ident" id="8316444">Fatalf</span><span class="op" id="8316450">(</span><span class="string" id="8316451">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="8316487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8316494">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316519">var</span>&nbsp;<span class="ident" id="8316523">buf1</span>&nbsp;<span class="ident" id="8316528">bytes</span><span class="op" id="8316533">.</span><span class="ident" id="8316534">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316542">if</span>&nbsp;<span class="ident" id="8316545">err</span>&nbsp;<span class="op" id="8316549">:=</span>&nbsp;<span class="ident" id="8316552">Indent</span><span class="op" id="8316558">(</span><span class="op" id="8316559">&amp;</span><span class="ident" id="8316560">buf1</span><span class="op" id="8316564">,</span>&nbsp;<span class="ident" id="8316566">b</span><span class="op" id="8316567">,</span>&nbsp;<span class="string" id="8316569">&#34;&#34;</span><span class="op" id="8316571">,</span>&nbsp;<span class="string" id="8316573">&#34;\t&#34;</span><span class="op" id="8316577">)</span><span class="op" id="8316578">;</span>&nbsp;<span class="ident" id="8316580">err</span>&nbsp;<span class="op" id="8316584">!=</span>&nbsp;<span class="ident" id="8316587">nil</span>&nbsp;<span class="op" id="8316591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316595">t</span><span class="op" id="8316596">.</span><span class="ident" id="8316597">Fatalf</span><span class="op" id="8316603">(</span><span class="string" id="8316604">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="8316617">,</span>&nbsp;<span class="ident" id="8316619">err</span><span class="op" id="8316622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316628">b1</span>&nbsp;<span class="op" id="8316631">:=</span>&nbsp;<span class="ident" id="8316634">buf1</span><span class="op" id="8316638">.</span><span class="ident" id="8316639">Bytes</span><span class="op" id="8316644">(</span><span class="op" id="8316645">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316648">if</span>&nbsp;<span class="op" id="8316651">!</span><span class="ident" id="8316652">bytes</span><span class="op" id="8316657">.</span><span class="ident" id="8316658">Equal</span><span class="op" id="8316663">(</span><span class="ident" id="8316664">b1</span><span class="op" id="8316666">,</span>&nbsp;<span class="ident" id="8316668">b</span><span class="op" id="8316669">)</span>&nbsp;<span class="op" id="8316671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316675">t</span><span class="op" id="8316676">.</span><span class="ident" id="8316677">Error</span><span class="op" id="8316682">(</span><span class="string" id="8316683">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="8316727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316731">diff</span><span class="op" id="8316735">(</span><span class="ident" id="8316736">t</span><span class="op" id="8316737">,</span>&nbsp;<span class="ident" id="8316739">b1</span><span class="op" id="8316741">,</span>&nbsp;<span class="ident" id="8316743">b</span><span class="op" id="8316744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316748">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316756">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8316760">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316792">buf1</span><span class="op" id="8316796">.</span><span class="ident" id="8316797">Reset</span><span class="op" id="8316802">(</span><span class="op" id="8316803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316806">if</span>&nbsp;<span class="ident" id="8316809">err</span>&nbsp;<span class="op" id="8316813">:=</span>&nbsp;<span class="ident" id="8316816">Compact</span><span class="op" id="8316823">(</span><span class="op" id="8316824">&amp;</span><span class="ident" id="8316825">buf1</span><span class="op" id="8316829">,</span>&nbsp;<span class="ident" id="8316831">b</span><span class="op" id="8316832">)</span><span class="op" id="8316833">;</span>&nbsp;<span class="ident" id="8316835">err</span>&nbsp;<span class="op" id="8316839">!=</span>&nbsp;<span class="ident" id="8316842">nil</span>&nbsp;<span class="op" id="8316846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316850">t</span><span class="op" id="8316851">.</span><span class="ident" id="8316852">Fatalf</span><span class="op" id="8316858">(</span><span class="string" id="8316859">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8316872">,</span>&nbsp;<span class="ident" id="8316874">err</span><span class="op" id="8316877">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316883">b1</span>&nbsp;<span class="op" id="8316886">=</span>&nbsp;<span class="ident" id="8316888">buf1</span><span class="op" id="8316892">.</span><span class="ident" id="8316893">Bytes</span><span class="op" id="8316898">(</span><span class="op" id="8316899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316902">if</span>&nbsp;<span class="op" id="8316905">!</span><span class="ident" id="8316906">bytes</span><span class="op" id="8316911">.</span><span class="ident" id="8316912">Equal</span><span class="op" id="8316917">(</span><span class="ident" id="8316918">b1</span><span class="op" id="8316920">,</span>&nbsp;<span class="ident" id="8316922">jsonBig</span><span class="op" id="8316929">)</span>&nbsp;<span class="op" id="8316931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316935">t</span><span class="op" id="8316936">.</span><span class="ident" id="8316937">Error</span><span class="op" id="8316942">(</span><span class="string" id="8316943">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8316980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316984">diff</span><span class="op" id="8316988">(</span><span class="ident" id="8316989">t</span><span class="op" id="8316990">,</span>&nbsp;<span class="ident" id="8316992">b1</span><span class="op" id="8316994">,</span>&nbsp;<span class="ident" id="8316996">jsonBig</span><span class="op" id="8317003">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317007">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317015">}</span><br>
<span class="lineno"></span><span class="op" id="8317017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8317020">type</span>&nbsp;<span class="ident" id="8317025">indentErrorTest</span>&nbsp;<span class="keyword" id="8317041">struct</span>&nbsp;<span class="op" id="8317048">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317051">in</span>&nbsp;&nbsp;<span class="builtintype" id="8317055">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317063">err</span>&nbsp;<span class="builtintype" id="8317067">error</span><br>
<span class="lineno"></span><span class="op" id="8317073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8317076">var</span>&nbsp;<span class="ident" id="8317080">indentErrorTests</span>&nbsp;<span class="op" id="8317097">=</span>&nbsp;<span class="op" id="8317099">[</span><span class="op" id="8317100">]</span><span class="ident" id="8317101">indentErrorTest</span><span class="op" id="8317116">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317119">{</span><span class="string" id="8317120">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="8317139">,</span>&nbsp;<span class="op" id="8317141">&amp;</span><span class="ident" id="8317142">SyntaxError</span><span class="op" id="8317153">{</span><span class="string" id="8317154">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="8317194">,</span>&nbsp;<span class="num" id="8317196">17</span><span class="op" id="8317198">}</span><span class="op" id="8317199">}</span><span class="op" id="8317200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317203">{</span><span class="string" id="8317204">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="8317229">,</span>&nbsp;<span class="op" id="8317231">&amp;</span><span class="ident" id="8317232">SyntaxError</span><span class="op" id="8317243">{</span><span class="string" id="8317244">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="8317296">,</span>&nbsp;<span class="num" id="8317298">13</span><span class="op" id="8317300">}</span><span class="op" id="8317301">}</span><span class="op" id="8317302">,</span><br>
<span class="lineno"></span><span class="op" id="8317304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8317307">func</span>&nbsp;<span class="ident" id="8317312">TestIndentErrors</span><span class="op" id="8317328">(</span><span class="ident" id="8317329">t</span>&nbsp;<span class="op" id="8317331">*</span><span class="ident" id="8317332">testing</span><span class="op" id="8317339">.</span><span class="ident" id="8317340">T</span><span class="op" id="8317341">)</span>&nbsp;<span class="op" id="8317343">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317346">for</span>&nbsp;<span class="ident" id="8317350">i</span><span class="op" id="8317351">,</span>&nbsp;<span class="ident" id="8317353">tt</span>&nbsp;<span class="op" id="8317356">:=</span>&nbsp;<span class="keyword" id="8317359">range</span>&nbsp;<span class="ident" id="8317365">indentErrorTests</span>&nbsp;<span class="op" id="8317382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317386">slice</span>&nbsp;<span class="op" id="8317392">:=</span>&nbsp;<span class="builtinfunc" id="8317395">make</span><span class="op" id="8317399">(</span><span class="op" id="8317400">[</span><span class="op" id="8317401">]</span><span class="builtintype" id="8317402">uint8</span><span class="op" id="8317407">,</span>&nbsp;<span class="num" id="8317409">0</span><span class="op" id="8317410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317414">buf</span>&nbsp;<span class="op" id="8317418">:=</span>&nbsp;<span class="ident" id="8317421">bytes</span><span class="op" id="8317426">.</span><span class="ident" id="8317427">NewBuffer</span><span class="op" id="8317436">(</span><span class="ident" id="8317437">slice</span><span class="op" id="8317442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317446">if</span>&nbsp;<span class="ident" id="8317449">err</span>&nbsp;<span class="op" id="8317453">:=</span>&nbsp;<span class="ident" id="8317456">Indent</span><span class="op" id="8317462">(</span><span class="ident" id="8317463">buf</span><span class="op" id="8317466">,</span>&nbsp;<span class="op" id="8317468">[</span><span class="op" id="8317469">]</span><span class="builtintype" id="8317470">uint8</span><span class="op" id="8317475">(</span><span class="ident" id="8317476">tt</span><span class="op" id="8317478">.</span><span class="ident" id="8317479">in</span><span class="op" id="8317481">)</span><span class="op" id="8317482">,</span>&nbsp;<span class="string" id="8317484">&#34;&#34;</span><span class="op" id="8317486">,</span>&nbsp;<span class="string" id="8317488">&#34;&#34;</span><span class="op" id="8317490">)</span><span class="op" id="8317491">;</span>&nbsp;<span class="ident" id="8317493">err</span>&nbsp;<span class="op" id="8317497">!=</span>&nbsp;<span class="ident" id="8317500">nil</span>&nbsp;<span class="op" id="8317504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317509">if</span>&nbsp;<span class="op" id="8317512">!</span><span class="ident" id="8317513">reflect</span><span class="op" id="8317520">.</span><span class="ident" id="8317521">DeepEqual</span><span class="op" id="8317530">(</span><span class="ident" id="8317531">err</span><span class="op" id="8317534">,</span>&nbsp;<span class="ident" id="8317536">tt</span><span class="op" id="8317538">.</span><span class="ident" id="8317539">err</span><span class="op" id="8317542">)</span>&nbsp;<span class="op" id="8317544">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317550">t</span><span class="op" id="8317551">.</span><span class="ident" id="8317552">Errorf</span><span class="op" id="8317558">(</span><span class="string" id="8317559">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="8317577">,</span>&nbsp;<span class="ident" id="8317579">i</span><span class="op" id="8317580">,</span>&nbsp;<span class="ident" id="8317582">err</span><span class="op" id="8317585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317591">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317610">}</span><br>
<span class="lineno">180</span><span class="op" id="8317612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8317615">func</span>&nbsp;<span class="ident" id="8317620">TestNextValueBig</span><span class="op" id="8317636">(</span><span class="ident" id="8317637">t</span>&nbsp;<span class="op" id="8317639">*</span><span class="ident" id="8317640">testing</span><span class="op" id="8317647">.</span><span class="ident" id="8317648">T</span><span class="op" id="8317649">)</span>&nbsp;<span class="op" id="8317651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317654">initBig</span><span class="op" id="8317661">(</span><span class="op" id="8317662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317665">var</span>&nbsp;<span class="ident" id="8317669">scan</span>&nbsp;<span class="ident" id="8317674">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317683">item</span><span class="op" id="8317687">,</span>&nbsp;<span class="ident" id="8317689">rest</span><span class="op" id="8317693">,</span>&nbsp;<span class="ident" id="8317695">err</span>&nbsp;<span class="op" id="8317699">:=</span>&nbsp;<span class="ident" id="8317702">nextValue</span><span class="op" id="8317711">(</span><span class="ident" id="8317712">jsonBig</span><span class="op" id="8317719">,</span>&nbsp;<span class="op" id="8317721">&amp;</span><span class="ident" id="8317722">scan</span><span class="op" id="8317726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317729">if</span>&nbsp;<span class="ident" id="8317732">err</span>&nbsp;<span class="op" id="8317736">!=</span>&nbsp;<span class="ident" id="8317739">nil</span>&nbsp;<span class="op" id="8317743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317747">t</span><span class="op" id="8317748">.</span><span class="ident" id="8317749">Fatalf</span><span class="op" id="8317755">(</span><span class="string" id="8317756">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="8317771">,</span>&nbsp;<span class="ident" id="8317773">err</span><span class="op" id="8317776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317782">if</span>&nbsp;<span class="builtinfunc" id="8317785">len</span><span class="op" id="8317788">(</span><span class="ident" id="8317789">item</span><span class="op" id="8317793">)</span>&nbsp;<span class="op" id="8317795">!=</span>&nbsp;<span class="builtinfunc" id="8317798">len</span><span class="op" id="8317801">(</span><span class="ident" id="8317802">jsonBig</span><span class="op" id="8317809">)</span>&nbsp;<span class="op" id="8317811">||</span>&nbsp;<span class="op" id="8317814">&amp;</span><span class="ident" id="8317815">item</span><span class="op" id="8317819">[</span><span class="num" id="8317820">0</span><span class="op" id="8317821">]</span>&nbsp;<span class="op" id="8317823">!=</span>&nbsp;<span class="op" id="8317826">&amp;</span><span class="ident" id="8317827">jsonBig</span><span class="op" id="8317834">[</span><span class="num" id="8317835">0</span><span class="op" id="8317836">]</span>&nbsp;<span class="op" id="8317838">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317842">t</span><span class="op" id="8317843">.</span><span class="ident" id="8317844">Errorf</span><span class="op" id="8317850">(</span><span class="string" id="8317851">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8317872">,</span>&nbsp;<span class="builtinfunc" id="8317874">len</span><span class="op" id="8317877">(</span><span class="ident" id="8317878">item</span><span class="op" id="8317882">)</span><span class="op" id="8317883">,</span>&nbsp;<span class="builtinfunc" id="8317885">len</span><span class="op" id="8317888">(</span><span class="ident" id="8317889">jsonBig</span><span class="op" id="8317896">)</span><span class="op" id="8317897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8317903">if</span>&nbsp;<span class="builtinfunc" id="8317906">len</span><span class="op" id="8317909">(</span><span class="ident" id="8317910">rest</span><span class="op" id="8317914">)</span>&nbsp;<span class="op" id="8317916">!=</span>&nbsp;<span class="num" id="8317919">0</span>&nbsp;<span class="op" id="8317921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317925">t</span><span class="op" id="8317926">.</span><span class="ident" id="8317927">Errorf</span><span class="op" id="8317933">(</span><span class="string" id="8317934">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8317952">,</span>&nbsp;<span class="builtinfunc" id="8317954">len</span><span class="op" id="8317957">(</span><span class="ident" id="8317958">rest</span><span class="op" id="8317962">)</span><span class="op" id="8317963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317966">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8317970">item</span><span class="op" id="8317974">,</span>&nbsp;<span class="ident" id="8317976">rest</span><span class="op" id="8317980">,</span>&nbsp;<span class="ident" id="8317982">err</span>&nbsp;<span class="op" id="8317986">=</span>&nbsp;<span class="ident" id="8317988">nextValue</span><span class="op" id="8317997">(</span><span class="builtinfunc" id="8317998">append</span><span class="op" id="8318004">(</span><span class="ident" id="8318005">jsonBig</span><span class="op" id="8318012">,</span>&nbsp;<span class="string" id="8318014">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="8318027">...</span><span class="op" id="8318030">)</span><span class="op" id="8318031">,</span>&nbsp;<span class="op" id="8318033">&amp;</span><span class="ident" id="8318034">scan</span><span class="op" id="8318038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318041">if</span>&nbsp;<span class="ident" id="8318044">err</span>&nbsp;<span class="op" id="8318048">!=</span>&nbsp;<span class="ident" id="8318051">nil</span>&nbsp;<span class="op" id="8318055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318059">t</span><span class="op" id="8318060">.</span><span class="ident" id="8318061">Fatalf</span><span class="op" id="8318067">(</span><span class="string" id="8318068">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="8318089">,</span>&nbsp;<span class="ident" id="8318091">err</span><span class="op" id="8318094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318097">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318100">if</span>&nbsp;<span class="builtinfunc" id="8318103">len</span><span class="op" id="8318106">(</span><span class="ident" id="8318107">item</span><span class="op" id="8318111">)</span>&nbsp;<span class="op" id="8318113">!=</span>&nbsp;<span class="builtinfunc" id="8318116">len</span><span class="op" id="8318119">(</span><span class="ident" id="8318120">jsonBig</span><span class="op" id="8318127">)</span>&nbsp;<span class="op" id="8318129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318133">t</span><span class="op" id="8318134">.</span><span class="ident" id="8318135">Errorf</span><span class="op" id="8318141">(</span><span class="string" id="8318142">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8318163">,</span>&nbsp;<span class="builtinfunc" id="8318165">len</span><span class="op" id="8318168">(</span><span class="ident" id="8318169">item</span><span class="op" id="8318173">)</span><span class="op" id="8318174">,</span>&nbsp;<span class="builtinfunc" id="8318176">len</span><span class="op" id="8318179">(</span><span class="ident" id="8318180">jsonBig</span><span class="op" id="8318187">)</span><span class="op" id="8318188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318194">if</span>&nbsp;<span class="builtintype" id="8318197">string</span><span class="op" id="8318203">(</span><span class="ident" id="8318204">rest</span><span class="op" id="8318208">)</span>&nbsp;<span class="op" id="8318210">!=</span>&nbsp;<span class="string" id="8318213">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="8318227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318231">t</span><span class="op" id="8318232">.</span><span class="ident" id="8318233">Errorf</span><span class="op" id="8318239">(</span><span class="string" id="8318240">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8318258">,</span>&nbsp;<span class="builtinfunc" id="8318260">len</span><span class="op" id="8318263">(</span><span class="ident" id="8318264">rest</span><span class="op" id="8318268">)</span><span class="op" id="8318269">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318272">}</span><br>
<span class="lineno"></span><span class="op" id="8318274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318277">var</span>&nbsp;<span class="ident" id="8318281">benchScan</span>&nbsp;<span class="ident" id="8318291">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="8318300">func</span>&nbsp;<span class="ident" id="8318305">BenchmarkSkipValue</span><span class="op" id="8318323">(</span><span class="ident" id="8318324">b</span>&nbsp;<span class="op" id="8318326">*</span><span class="ident" id="8318327">testing</span><span class="op" id="8318334">.</span><span class="ident" id="8318335">B</span><span class="op" id="8318336">)</span>&nbsp;<span class="op" id="8318338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318341">initBig</span><span class="op" id="8318348">(</span><span class="op" id="8318349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318352">for</span>&nbsp;<span class="ident" id="8318356">i</span>&nbsp;<span class="op" id="8318358">:=</span>&nbsp;<span class="num" id="8318361">0</span><span class="op" id="8318362">;</span>&nbsp;<span class="ident" id="8318364">i</span>&nbsp;<span class="op" id="8318366">&lt;</span>&nbsp;<span class="ident" id="8318368">b</span><span class="op" id="8318369">.</span><span class="ident" id="8318370">N</span><span class="op" id="8318371">;</span>&nbsp;<span class="ident" id="8318373">i</span><span class="op" id="8318374">++</span>&nbsp;<span class="op" id="8318377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318381">nextValue</span><span class="op" id="8318390">(</span><span class="ident" id="8318391">jsonBig</span><span class="op" id="8318398">,</span>&nbsp;<span class="op" id="8318400">&amp;</span><span class="ident" id="8318401">benchScan</span><span class="op" id="8318410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318413">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318416">b</span><span class="op" id="8318417">.</span><span class="ident" id="8318418">SetBytes</span><span class="op" id="8318426">(</span><span class="ident" id="8318427">int64</span><span class="op" id="8318432">(</span><span class="builtinfunc" id="8318433">len</span><span class="op" id="8318436">(</span><span class="ident" id="8318437">jsonBig</span><span class="op" id="8318444">)</span><span class="op" id="8318445">)</span><span class="op" id="8318446">)</span><br>
<span class="lineno"></span><span class="op" id="8318448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318451">func</span>&nbsp;<span class="ident" id="8318456">diff</span><span class="op" id="8318460">(</span><span class="ident" id="8318461">t</span>&nbsp;<span class="op" id="8318463">*</span><span class="ident" id="8318464">testing</span><span class="op" id="8318471">.</span><span class="ident" id="8318472">T</span><span class="op" id="8318473">,</span>&nbsp;<span class="ident" id="8318475">a</span><span class="op" id="8318476">,</span>&nbsp;<span class="ident" id="8318478">b</span>&nbsp;<span class="op" id="8318480">[</span><span class="op" id="8318481">]</span><span class="builtintype" id="8318482">byte</span><span class="op" id="8318486">)</span>&nbsp;<span class="op" id="8318488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318491">for</span>&nbsp;<span class="ident" id="8318495">i</span>&nbsp;<span class="op" id="8318497">:=</span>&nbsp;<span class="num" id="8318500">0</span><span class="op" id="8318501">;</span>&nbsp;<span class="op" id="8318503">;</span>&nbsp;<span class="ident" id="8318505">i</span><span class="op" id="8318506">++</span>&nbsp;<span class="op" id="8318509">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318513">if</span>&nbsp;<span class="ident" id="8318516">i</span>&nbsp;<span class="op" id="8318518">&gt;=</span>&nbsp;<span class="builtinfunc" id="8318521">len</span><span class="op" id="8318524">(</span><span class="ident" id="8318525">a</span><span class="op" id="8318526">)</span>&nbsp;<span class="op" id="8318528">||</span>&nbsp;<span class="ident" id="8318531">i</span>&nbsp;<span class="op" id="8318533">&gt;=</span>&nbsp;<span class="builtinfunc" id="8318536">len</span><span class="op" id="8318539">(</span><span class="ident" id="8318540">b</span><span class="op" id="8318541">)</span>&nbsp;<span class="op" id="8318543">||</span>&nbsp;<span class="ident" id="8318546">a</span><span class="op" id="8318547">[</span><span class="ident" id="8318548">i</span><span class="op" id="8318549">]</span>&nbsp;<span class="op" id="8318551">!=</span>&nbsp;<span class="ident" id="8318554">b</span><span class="op" id="8318555">[</span><span class="ident" id="8318556">i</span><span class="op" id="8318557">]</span>&nbsp;<span class="op" id="8318559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318564">j</span>&nbsp;<span class="op" id="8318566">:=</span>&nbsp;<span class="ident" id="8318569">i</span>&nbsp;<span class="op" id="8318571">-</span>&nbsp;<span class="num" id="8318573">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318579">if</span>&nbsp;<span class="ident" id="8318582">j</span>&nbsp;<span class="op" id="8318584">&lt;</span>&nbsp;<span class="num" id="8318586">0</span>&nbsp;<span class="op" id="8318588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318594">j</span>&nbsp;<span class="op" id="8318596">=</span>&nbsp;<span class="num" id="8318598">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318603">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318608">t</span><span class="op" id="8318609">.</span><span class="ident" id="8318610">Errorf</span><span class="op" id="8318616">(</span><span class="string" id="8318617">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;%s&nbsp;vs&nbsp;%s&#34;</span><span class="op" id="8318650">,</span>&nbsp;<span class="ident" id="8318652">i</span><span class="op" id="8318653">,</span>&nbsp;<span class="ident" id="8318655">trim</span><span class="op" id="8318659">(</span><span class="ident" id="8318660">a</span><span class="op" id="8318661">[</span><span class="ident" id="8318662">j</span><span class="op" id="8318663">:</span><span class="op" id="8318664">]</span><span class="op" id="8318665">)</span><span class="op" id="8318666">,</span>&nbsp;<span class="ident" id="8318668">trim</span><span class="op" id="8318672">(</span><span class="ident" id="8318673">b</span><span class="op" id="8318674">[</span><span class="ident" id="8318675">j</span><span class="op" id="8318676">:</span><span class="op" id="8318677">]</span><span class="op" id="8318678">)</span><span class="op" id="8318679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318684">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318696">}</span><br>
<span class="lineno"></span><span class="op" id="8318698">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8318701">func</span>&nbsp;<span class="ident" id="8318706">trim</span><span class="op" id="8318710">(</span><span class="ident" id="8318711">b</span>&nbsp;<span class="op" id="8318713">[</span><span class="op" id="8318714">]</span><span class="builtintype" id="8318715">byte</span><span class="op" id="8318719">)</span>&nbsp;<span class="op" id="8318721">[</span><span class="op" id="8318722">]</span><span class="builtintype" id="8318723">byte</span>&nbsp;<span class="op" id="8318728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318731">if</span>&nbsp;<span class="builtinfunc" id="8318734">len</span><span class="op" id="8318737">(</span><span class="ident" id="8318738">b</span><span class="op" id="8318739">)</span>&nbsp;<span class="op" id="8318741">&gt;</span>&nbsp;<span class="num" id="8318743">20</span>&nbsp;<span class="op" id="8318746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318750">return</span>&nbsp;<span class="ident" id="8318757">b</span><span class="op" id="8318758">[</span><span class="num" id="8318759">0</span><span class="op" id="8318760">:</span><span class="num" id="8318761">20</span><span class="op" id="8318763">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318766">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318769">return</span>&nbsp;<span class="ident" id="8318776">b</span><br>
<span class="lineno"></span><span class="op" id="8318778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8318781">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8318816">var</span>&nbsp;<span class="ident" id="8318820">jsonBig</span>&nbsp;<span class="op" id="8318828">[</span><span class="op" id="8318829">]</span><span class="builtintype" id="8318830">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318836">func</span>&nbsp;<span class="ident" id="8318841">initBig</span><span class="op" id="8318848">(</span><span class="op" id="8318849">)</span>&nbsp;<span class="op" id="8318851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318854">n</span>&nbsp;<span class="op" id="8318856">:=</span>&nbsp;<span class="num" id="8318859">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318866">if</span>&nbsp;<span class="ident" id="8318869">testing</span><span class="op" id="8318876">.</span><span class="ident" id="8318877">Short</span><span class="op" id="8318882">(</span><span class="op" id="8318883">)</span>&nbsp;<span class="op" id="8318885">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318889">n</span>&nbsp;<span class="op" id="8318891">=</span>&nbsp;<span class="num" id="8318893">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318901">b</span><span class="op" id="8318902">,</span>&nbsp;<span class="ident" id="8318904">err</span>&nbsp;<span class="op" id="8318908">:=</span>&nbsp;<span class="ident" id="8318911">Marshal</span><span class="op" id="8318918">(</span><span class="ident" id="8318919">genValue</span><span class="op" id="8318927">(</span><span class="ident" id="8318928">n</span><span class="op" id="8318929">)</span><span class="op" id="8318930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318933">if</span>&nbsp;<span class="ident" id="8318936">err</span>&nbsp;<span class="op" id="8318940">!=</span>&nbsp;<span class="ident" id="8318943">nil</span>&nbsp;<span class="op" id="8318947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8318951">panic</span><span class="op" id="8318956">(</span><span class="ident" id="8318957">err</span><span class="op" id="8318960">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318966">jsonBig</span>&nbsp;<span class="op" id="8318974">=</span>&nbsp;<span class="ident" id="8318976">b</span><br>
<span class="lineno"></span><span class="op" id="8318978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318981">func</span>&nbsp;<span class="ident" id="8318986">genValue</span><span class="op" id="8318994">(</span><span class="ident" id="8318995">n</span>&nbsp;<span class="builtintype" id="8318997">int</span><span class="op" id="8319000">)</span>&nbsp;<span class="keyword" id="8319002">interface</span><span class="op" id="8319011">{</span><span class="op" id="8319012">}</span>&nbsp;<span class="op" id="8319014">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319017">if</span>&nbsp;<span class="ident" id="8319020">n</span>&nbsp;<span class="op" id="8319022">&gt;</span>&nbsp;<span class="num" id="8319024">1</span>&nbsp;<span class="op" id="8319026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319030">switch</span>&nbsp;<span class="ident" id="8319037">rand</span><span class="op" id="8319041">.</span><span class="ident" id="8319042">Intn</span><span class="op" id="8319046">(</span><span class="num" id="8319047">2</span><span class="op" id="8319048">)</span>&nbsp;<span class="op" id="8319050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319054">case</span>&nbsp;<span class="num" id="8319059">0</span><span class="op" id="8319060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319065">return</span>&nbsp;<span class="ident" id="8319072">genArray</span><span class="op" id="8319080">(</span><span class="ident" id="8319081">n</span><span class="op" id="8319082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319086">case</span>&nbsp;<span class="num" id="8319091">1</span><span class="op" id="8319092">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319097">return</span>&nbsp;<span class="ident" id="8319104">genMap</span><span class="op" id="8319110">(</span><span class="ident" id="8319111">n</span><span class="op" id="8319112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319122">switch</span>&nbsp;<span class="ident" id="8319129">rand</span><span class="op" id="8319133">.</span><span class="ident" id="8319134">Intn</span><span class="op" id="8319138">(</span><span class="num" id="8319139">3</span><span class="op" id="8319140">)</span>&nbsp;<span class="op" id="8319142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319145">case</span>&nbsp;<span class="num" id="8319150">0</span><span class="op" id="8319151">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319155">return</span>&nbsp;<span class="ident" id="8319162">rand</span><span class="op" id="8319166">.</span><span class="ident" id="8319167">Intn</span><span class="op" id="8319171">(</span><span class="num" id="8319172">2</span><span class="op" id="8319173">)</span>&nbsp;<span class="op" id="8319175">==</span>&nbsp;<span class="num" id="8319178">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319181">case</span>&nbsp;<span class="num" id="8319186">1</span><span class="op" id="8319187">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319191">return</span>&nbsp;<span class="ident" id="8319198">rand</span><span class="op" id="8319202">.</span><span class="ident" id="8319203">NormFloat64</span><span class="op" id="8319214">(</span><span class="op" id="8319215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319218">case</span>&nbsp;<span class="num" id="8319223">2</span><span class="op" id="8319224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319228">return</span>&nbsp;<span class="ident" id="8319235">genString</span><span class="op" id="8319244">(</span><span class="num" id="8319245">30</span><span class="op" id="8319247">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8319253">panic</span><span class="op" id="8319258">(</span><span class="string" id="8319259">&#34;unreachable&#34;</span><span class="op" id="8319272">)</span><br>
<span class="lineno"></span><span class="op" id="8319274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319277">func</span>&nbsp;<span class="ident" id="8319282">genString</span><span class="op" id="8319291">(</span><span class="ident" id="8319292">stddev</span>&nbsp;<span class="builtintype" id="8319299">float64</span><span class="op" id="8319306">)</span>&nbsp;<span class="builtintype" id="8319308">string</span>&nbsp;<span class="op" id="8319315">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319318">n</span>&nbsp;<span class="op" id="8319320">:=</span>&nbsp;<span class="builtintype" id="8319323">int</span><span class="op" id="8319326">(</span><span class="ident" id="8319327">math</span><span class="op" id="8319331">.</span><span class="ident" id="8319332">Abs</span><span class="op" id="8319335">(</span><span class="ident" id="8319336">rand</span><span class="op" id="8319340">.</span><span class="ident" id="8319341">NormFloat64</span><span class="op" id="8319352">(</span><span class="op" id="8319353">)</span><span class="op" id="8319354">*</span><span class="ident" id="8319355">stddev</span>&nbsp;<span class="op" id="8319362">+</span>&nbsp;<span class="ident" id="8319364">stddev</span><span class="op" id="8319370">/</span><span class="num" id="8319371">2</span><span class="op" id="8319372">)</span><span class="op" id="8319373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319376">c</span>&nbsp;<span class="op" id="8319378">:=</span>&nbsp;<span class="builtinfunc" id="8319381">make</span><span class="op" id="8319385">(</span><span class="op" id="8319386">[</span><span class="op" id="8319387">]</span><span class="builtintype" id="8319388">rune</span><span class="op" id="8319392">,</span>&nbsp;<span class="ident" id="8319394">n</span><span class="op" id="8319395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319398">for</span>&nbsp;<span class="ident" id="8319402">i</span>&nbsp;<span class="op" id="8319404">:=</span>&nbsp;<span class="keyword" id="8319407">range</span>&nbsp;<span class="ident" id="8319413">c</span>&nbsp;<span class="op" id="8319415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319419">f</span>&nbsp;<span class="op" id="8319421">:=</span>&nbsp;<span class="ident" id="8319424">math</span><span class="op" id="8319428">.</span><span class="ident" id="8319429">Abs</span><span class="op" id="8319432">(</span><span class="ident" id="8319433">rand</span><span class="op" id="8319437">.</span><span class="ident" id="8319438">NormFloat64</span><span class="op" id="8319449">(</span><span class="op" id="8319450">)</span><span class="op" id="8319451">*</span><span class="num" id="8319452">64</span>&nbsp;<span class="op" id="8319455">+</span>&nbsp;<span class="num" id="8319457">32</span><span class="op" id="8319459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319463">if</span>&nbsp;<span class="ident" id="8319466">f</span>&nbsp;<span class="op" id="8319468">&gt;</span>&nbsp;<span class="num" id="8319470">0x10ffff</span>&nbsp;<span class="op" id="8319479">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319484">f</span>&nbsp;<span class="op" id="8319486">=</span>&nbsp;<span class="num" id="8319488">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319503">c</span><span class="op" id="8319504">[</span><span class="ident" id="8319505">i</span><span class="op" id="8319506">]</span>&nbsp;<span class="op" id="8319508">=</span>&nbsp;<span class="builtintype" id="8319510">rune</span><span class="op" id="8319514">(</span><span class="ident" id="8319515">f</span><span class="op" id="8319516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319522">return</span>&nbsp;<span class="builtintype" id="8319529">string</span><span class="op" id="8319535">(</span><span class="ident" id="8319536">c</span><span class="op" id="8319537">)</span><br>
<span class="lineno">285</span><span class="op" id="8319539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319542">func</span>&nbsp;<span class="ident" id="8319547">genArray</span><span class="op" id="8319555">(</span><span class="ident" id="8319556">n</span>&nbsp;<span class="builtintype" id="8319558">int</span><span class="op" id="8319561">)</span>&nbsp;<span class="op" id="8319563">[</span><span class="op" id="8319564">]</span><span class="keyword" id="8319565">interface</span><span class="op" id="8319574">{</span><span class="op" id="8319575">}</span>&nbsp;<span class="op" id="8319577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319580">f</span>&nbsp;<span class="op" id="8319582">:=</span>&nbsp;<span class="builtintype" id="8319585">int</span><span class="op" id="8319588">(</span><span class="ident" id="8319589">math</span><span class="op" id="8319593">.</span><span class="ident" id="8319594">Abs</span><span class="op" id="8319597">(</span><span class="ident" id="8319598">rand</span><span class="op" id="8319602">.</span><span class="ident" id="8319603">NormFloat64</span><span class="op" id="8319614">(</span><span class="op" id="8319615">)</span><span class="op" id="8319616">)</span>&nbsp;<span class="op" id="8319618">*</span>&nbsp;<span class="ident" id="8319620">math</span><span class="op" id="8319624">.</span><span class="ident" id="8319625">Min</span><span class="op" id="8319628">(</span><span class="num" id="8319629">10</span><span class="op" id="8319631">,</span>&nbsp;<span class="builtintype" id="8319633">float64</span><span class="op" id="8319640">(</span><span class="ident" id="8319641">n</span><span class="op" id="8319642">/</span><span class="num" id="8319643">2</span><span class="op" id="8319644">)</span><span class="op" id="8319645">)</span><span class="op" id="8319646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319649">if</span>&nbsp;<span class="ident" id="8319652">f</span>&nbsp;<span class="op" id="8319654">&gt;</span>&nbsp;<span class="ident" id="8319656">n</span>&nbsp;<span class="op" id="8319658">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319662">f</span>&nbsp;<span class="op" id="8319664">=</span>&nbsp;<span class="ident" id="8319666">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319672">if</span>&nbsp;<span class="ident" id="8319675">f</span>&nbsp;<span class="op" id="8319677">&lt;</span>&nbsp;<span class="num" id="8319679">1</span>&nbsp;<span class="op" id="8319681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319685">f</span>&nbsp;<span class="op" id="8319687">=</span>&nbsp;<span class="num" id="8319689">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319692">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319695">x</span>&nbsp;<span class="op" id="8319697">:=</span>&nbsp;<span class="builtinfunc" id="8319700">make</span><span class="op" id="8319704">(</span><span class="op" id="8319705">[</span><span class="op" id="8319706">]</span><span class="keyword" id="8319707">interface</span><span class="op" id="8319716">{</span><span class="op" id="8319717">}</span><span class="op" id="8319718">,</span>&nbsp;<span class="ident" id="8319720">f</span><span class="op" id="8319721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319724">for</span>&nbsp;<span class="ident" id="8319728">i</span>&nbsp;<span class="op" id="8319730">:=</span>&nbsp;<span class="keyword" id="8319733">range</span>&nbsp;<span class="ident" id="8319739">x</span>&nbsp;<span class="op" id="8319741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319745">x</span><span class="op" id="8319746">[</span><span class="ident" id="8319747">i</span><span class="op" id="8319748">]</span>&nbsp;<span class="op" id="8319750">=</span>&nbsp;<span class="ident" id="8319752">genValue</span><span class="op" id="8319760">(</span><span class="op" id="8319761">(</span><span class="op" id="8319762">(</span><span class="ident" id="8319763">i</span><span class="op" id="8319764">+</span><span class="num" id="8319765">1</span><span class="op" id="8319766">)</span><span class="op" id="8319767">*</span><span class="ident" id="8319768">n</span><span class="op" id="8319769">)</span><span class="op" id="8319770">/</span><span class="ident" id="8319771">f</span>&nbsp;<span class="op" id="8319773">-</span>&nbsp;<span class="op" id="8319775">(</span><span class="ident" id="8319776">i</span><span class="op" id="8319777">*</span><span class="ident" id="8319778">n</span><span class="op" id="8319779">)</span><span class="op" id="8319780">/</span><span class="ident" id="8319781">f</span><span class="op" id="8319782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319788">return</span>&nbsp;<span class="ident" id="8319795">x</span><br>
<span class="lineno">300</span><span class="op" id="8319797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319800">func</span>&nbsp;<span class="ident" id="8319805">genMap</span><span class="op" id="8319811">(</span><span class="ident" id="8319812">n</span>&nbsp;<span class="builtintype" id="8319814">int</span><span class="op" id="8319817">)</span>&nbsp;<span class="keyword" id="8319819">map</span><span class="op" id="8319822">[</span><span class="builtintype" id="8319823">string</span><span class="op" id="8319829">]</span><span class="keyword" id="8319830">interface</span><span class="op" id="8319839">{</span><span class="op" id="8319840">}</span>&nbsp;<span class="op" id="8319842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319845">f</span>&nbsp;<span class="op" id="8319847">:=</span>&nbsp;<span class="builtintype" id="8319850">int</span><span class="op" id="8319853">(</span><span class="ident" id="8319854">math</span><span class="op" id="8319858">.</span><span class="ident" id="8319859">Abs</span><span class="op" id="8319862">(</span><span class="ident" id="8319863">rand</span><span class="op" id="8319867">.</span><span class="ident" id="8319868">NormFloat64</span><span class="op" id="8319879">(</span><span class="op" id="8319880">)</span><span class="op" id="8319881">)</span>&nbsp;<span class="op" id="8319883">*</span>&nbsp;<span class="ident" id="8319885">math</span><span class="op" id="8319889">.</span><span class="ident" id="8319890">Min</span><span class="op" id="8319893">(</span><span class="num" id="8319894">10</span><span class="op" id="8319896">,</span>&nbsp;<span class="builtintype" id="8319898">float64</span><span class="op" id="8319905">(</span><span class="ident" id="8319906">n</span><span class="op" id="8319907">/</span><span class="num" id="8319908">2</span><span class="op" id="8319909">)</span><span class="op" id="8319910">)</span><span class="op" id="8319911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319914">if</span>&nbsp;<span class="ident" id="8319917">f</span>&nbsp;<span class="op" id="8319919">&gt;</span>&nbsp;<span class="ident" id="8319921">n</span>&nbsp;<span class="op" id="8319923">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319927">f</span>&nbsp;<span class="op" id="8319929">=</span>&nbsp;<span class="ident" id="8319931">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319937">if</span>&nbsp;<span class="ident" id="8319940">n</span>&nbsp;<span class="op" id="8319942">&gt;</span>&nbsp;<span class="num" id="8319944">0</span>&nbsp;<span class="op" id="8319946">&amp;&amp;</span>&nbsp;<span class="ident" id="8319949">f</span>&nbsp;<span class="op" id="8319951">==</span>&nbsp;<span class="num" id="8319954">0</span>&nbsp;<span class="op" id="8319956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319960">f</span>&nbsp;<span class="op" id="8319962">=</span>&nbsp;<span class="num" id="8319964">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319967">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319970">x</span>&nbsp;<span class="op" id="8319972">:=</span>&nbsp;<span class="builtinfunc" id="8319975">make</span><span class="op" id="8319979">(</span><span class="keyword" id="8319980">map</span><span class="op" id="8319983">[</span><span class="builtintype" id="8319984">string</span><span class="op" id="8319990">]</span><span class="keyword" id="8319991">interface</span><span class="op" id="8320000">{</span><span class="op" id="8320001">}</span><span class="op" id="8320002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320005">for</span>&nbsp;<span class="ident" id="8320009">i</span>&nbsp;<span class="op" id="8320011">:=</span>&nbsp;<span class="num" id="8320014">0</span><span class="op" id="8320015">;</span>&nbsp;<span class="ident" id="8320017">i</span>&nbsp;<span class="op" id="8320019">&lt;</span>&nbsp;<span class="ident" id="8320021">f</span><span class="op" id="8320022">;</span>&nbsp;<span class="ident" id="8320024">i</span><span class="op" id="8320025">++</span>&nbsp;<span class="op" id="8320028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320032">x</span><span class="op" id="8320033">[</span><span class="ident" id="8320034">genString</span><span class="op" id="8320043">(</span><span class="num" id="8320044">10</span><span class="op" id="8320046">)</span><span class="op" id="8320047">]</span>&nbsp;<span class="op" id="8320049">=</span>&nbsp;<span class="ident" id="8320051">genValue</span><span class="op" id="8320059">(</span><span class="op" id="8320060">(</span><span class="op" id="8320061">(</span><span class="ident" id="8320062">i</span><span class="op" id="8320063">+</span><span class="num" id="8320064">1</span><span class="op" id="8320065">)</span><span class="op" id="8320066">*</span><span class="ident" id="8320067">n</span><span class="op" id="8320068">)</span><span class="op" id="8320069">/</span><span class="ident" id="8320070">f</span>&nbsp;<span class="op" id="8320072">-</span>&nbsp;<span class="op" id="8320074">(</span><span class="ident" id="8320075">i</span><span class="op" id="8320076">*</span><span class="ident" id="8320077">n</span><span class="op" id="8320078">)</span><span class="op" id="8320079">/</span><span class="ident" id="8320080">f</span><span class="op" id="8320081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320087">return</span>&nbsp;<span class="ident" id="8320094">x</span><br>
<span class="lineno">315</span><span class="op" id="8320096">}</span>
</div>
</body>
</html>
