<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3663748">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3663803">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3663857">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3663908">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="3663968">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="3664027">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3664073">//</span><br>
<span class="lineno"></span><span class="keyword" id="3664076">package</span>&nbsp;<span class="ident" id="3664084">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3664093">import</span>&nbsp;<span class="op" id="3664100">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664103">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664112">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664119">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664131">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664148">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664159">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3664170">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3664185">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="3664188">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3664261">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3664334">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3664408">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="3664432">//</span><br>
<span class="lineno"></span><span class="keyword" id="3664435">type</span>&nbsp;<span class="ident" id="3664440">ErrorHandler</span>&nbsp;<span class="keyword" id="3664453">func</span><span class="op" id="3664457">(</span><span class="ident" id="3664458">pos</span>&nbsp;<span class="ident" id="3664462">token</span><span class="op" id="3664467">.</span><span class="ident" id="3664468">Position</span><span class="op" id="3664476">,</span>&nbsp;<span class="ident" id="3664478">msg</span>&nbsp;<span class="builtintype" id="3664482">string</span><span class="op" id="3664488">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3664491">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="3664556">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="3664618">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="3664676">//</span><br>
<span class="lineno"></span><span class="keyword" id="3664679">type</span>&nbsp;<span class="ident" id="3664684">Scanner</span>&nbsp;<span class="keyword" id="3664692">struct</span>&nbsp;<span class="op" id="3664699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3664702">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664722">file</span>&nbsp;<span class="op" id="3664727">*</span><span class="ident" id="3664728">token</span><span class="op" id="3664733">.</span><span class="ident" id="3664734">File</span>&nbsp;&nbsp;<span class="comment" id="3664740">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664763">dir</span>&nbsp;&nbsp;<span class="builtintype" id="3664768">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3664781">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664818">src</span>&nbsp;&nbsp;<span class="op" id="3664823">[</span><span class="op" id="3664824">]</span><span class="builtintype" id="3664825">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3664836">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664847">err</span>&nbsp;&nbsp;<span class="ident" id="3664852">ErrorHandler</span>&nbsp;<span class="comment" id="3664865">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664893">mode</span>&nbsp;<span class="ident" id="3664898">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3664911">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3664930">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664949">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3664960">rune</span>&nbsp;<span class="comment" id="3664965">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3664987">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3664998">int</span>&nbsp;&nbsp;<span class="comment" id="3665003">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665024">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3665035">int</span>&nbsp;&nbsp;<span class="comment" id="3665040">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665094">lineOffset</span>&nbsp;<span class="builtintype" id="3665105">int</span>&nbsp;&nbsp;<span class="comment" id="3665110">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665134">insertSemi</span>&nbsp;<span class="builtintype" id="3665145">bool</span>&nbsp;<span class="comment" id="3665150">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3665194">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665226">ErrorCount</span>&nbsp;<span class="builtintype" id="3665237">int</span>&nbsp;<span class="comment" id="3665241">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="3665273">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3665276">const</span>&nbsp;<span class="ident" id="3665282">bom</span>&nbsp;<span class="op" id="3665286">=</span>&nbsp;<span class="num" id="3665288">0xFEFF</span>&nbsp;<span class="comment" id="3665295">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3665355">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="3665396">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="3665427">//</span><br>
<span class="lineno"></span><span class="keyword" id="3665430">func</span>&nbsp;<span class="op" id="3665435">(</span><span class="ident" id="3665436">s</span>&nbsp;<span class="op" id="3665438">*</span><span class="ident" id="3665439">Scanner</span><span class="op" id="3665446">)</span>&nbsp;<span class="ident" id="3665448">next</span><span class="op" id="3665452">(</span><span class="op" id="3665453">)</span>&nbsp;<span class="op" id="3665455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3665458">if</span>&nbsp;<span class="ident" id="3665461">s</span><span class="op" id="3665462">.</span><span class="ident" id="3665463">rdOffset</span>&nbsp;<span class="op" id="3665472">&lt;</span>&nbsp;<span class="builtinfunc" id="3665474">len</span><span class="op" id="3665477">(</span><span class="ident" id="3665478">s</span><span class="op" id="3665479">.</span><span class="ident" id="3665480">src</span><span class="op" id="3665483">)</span>&nbsp;<span class="op" id="3665485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665489">s</span><span class="op" id="3665490">.</span><span class="ident" id="3665491">offset</span>&nbsp;<span class="op" id="3665498">=</span>&nbsp;<span class="ident" id="3665500">s</span><span class="op" id="3665501">.</span><span class="ident" id="3665502">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3665513">if</span>&nbsp;<span class="ident" id="3665516">s</span><span class="op" id="3665517">.</span><span class="ident" id="3665518">ch</span>&nbsp;<span class="op" id="3665521">==</span>&nbsp;<span class="string" id="3665524">&#39;\n&#39;</span>&nbsp;<span class="op" id="3665529">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665534">s</span><span class="op" id="3665535">.</span><span class="ident" id="3665536">lineOffset</span>&nbsp;<span class="op" id="3665547">=</span>&nbsp;<span class="ident" id="3665549">s</span><span class="op" id="3665550">.</span><span class="ident" id="3665551">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665561">s</span><span class="op" id="3665562">.</span><span class="ident" id="3665563">file</span><span class="op" id="3665567">.</span><span class="ident" id="3665568">AddLine</span><span class="op" id="3665575">(</span><span class="ident" id="3665576">s</span><span class="op" id="3665577">.</span><span class="ident" id="3665578">offset</span><span class="op" id="3665584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3665588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665592">r</span><span class="op" id="3665593">,</span>&nbsp;<span class="ident" id="3665595">w</span>&nbsp;<span class="op" id="3665597">:=</span>&nbsp;<span class="builtintype" id="3665600">rune</span><span class="op" id="3665604">(</span><span class="ident" id="3665605">s</span><span class="op" id="3665606">.</span><span class="ident" id="3665607">src</span><span class="op" id="3665610">[</span><span class="ident" id="3665611">s</span><span class="op" id="3665612">.</span><span class="ident" id="3665613">rdOffset</span><span class="op" id="3665621">]</span><span class="op" id="3665622">)</span><span class="op" id="3665623">,</span>&nbsp;<span class="num" id="3665625">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3665629">switch</span>&nbsp;<span class="op" id="3665636">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3665640">case</span>&nbsp;<span class="ident" id="3665645">r</span>&nbsp;<span class="op" id="3665647">==</span>&nbsp;<span class="num" id="3665650">0</span><span class="op" id="3665651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665656">s</span><span class="op" id="3665657">.</span><span class="builtintype" id="3665658">error</span><span class="op" id="3665663">(</span><span class="ident" id="3665664">s</span><span class="op" id="3665665">.</span><span class="ident" id="3665666">offset</span><span class="op" id="3665672">,</span>&nbsp;<span class="string" id="3665674">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="3665697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3665701">case</span>&nbsp;<span class="ident" id="3665706">r</span>&nbsp;<span class="op" id="3665708">&gt;=</span>&nbsp;<span class="num" id="3665711">0x80</span><span class="op" id="3665715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3665720">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665736">r</span><span class="op" id="3665737">,</span>&nbsp;<span class="ident" id="3665739">w</span>&nbsp;<span class="op" id="3665741">=</span>&nbsp;<span class="ident" id="3665743">utf8</span><span class="op" id="3665747">.</span><span class="ident" id="3665748">DecodeRune</span><span class="op" id="3665758">(</span><span class="ident" id="3665759">s</span><span class="op" id="3665760">.</span><span class="ident" id="3665761">src</span><span class="op" id="3665764">[</span><span class="ident" id="3665765">s</span><span class="op" id="3665766">.</span><span class="ident" id="3665767">rdOffset</span><span class="op" id="3665775">:</span><span class="op" id="3665776">]</span><span class="op" id="3665777">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3665782">if</span>&nbsp;<span class="ident" id="3665785">r</span>&nbsp;<span class="op" id="3665787">==</span>&nbsp;<span class="ident" id="3665790">utf8</span><span class="op" id="3665794">.</span><span class="ident" id="3665795">RuneError</span>&nbsp;<span class="op" id="3665805">&amp;&amp;</span>&nbsp;<span class="ident" id="3665808">w</span>&nbsp;<span class="op" id="3665810">==</span>&nbsp;<span class="num" id="3665813">1</span>&nbsp;<span class="op" id="3665815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665821">s</span><span class="op" id="3665822">.</span><span class="builtintype" id="3665823">error</span><span class="op" id="3665828">(</span><span class="ident" id="3665829">s</span><span class="op" id="3665830">.</span><span class="ident" id="3665831">offset</span><span class="op" id="3665837">,</span>&nbsp;<span class="string" id="3665839">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="3665863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3665868">}</span>&nbsp;<span class="keyword" id="3665870">else</span>&nbsp;<span class="keyword" id="3665875">if</span>&nbsp;<span class="ident" id="3665878">r</span>&nbsp;<span class="op" id="3665880">==</span>&nbsp;<span class="ident" id="3665883">bom</span>&nbsp;<span class="op" id="3665887">&amp;&amp;</span>&nbsp;<span class="ident" id="3665890">s</span><span class="op" id="3665891">.</span><span class="ident" id="3665892">offset</span>&nbsp;<span class="op" id="3665899">&gt;</span>&nbsp;<span class="num" id="3665901">0</span>&nbsp;<span class="op" id="3665903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665909">s</span><span class="op" id="3665910">.</span><span class="builtintype" id="3665911">error</span><span class="op" id="3665916">(</span><span class="ident" id="3665917">s</span><span class="op" id="3665918">.</span><span class="ident" id="3665919">offset</span><span class="op" id="3665925">,</span>&nbsp;<span class="string" id="3665927">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="3665952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3665957">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3665961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665965">s</span><span class="op" id="3665966">.</span><span class="ident" id="3665967">rdOffset</span>&nbsp;<span class="op" id="3665976">+=</span>&nbsp;<span class="ident" id="3665979">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3665983">s</span><span class="op" id="3665984">.</span><span class="ident" id="3665985">ch</span>&nbsp;<span class="op" id="3665988">=</span>&nbsp;<span class="ident" id="3665990">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3665993">}</span>&nbsp;<span class="keyword" id="3665995">else</span>&nbsp;<span class="op" id="3666000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3666004">s</span><span class="op" id="3666005">.</span><span class="ident" id="3666006">offset</span>&nbsp;<span class="op" id="3666013">=</span>&nbsp;<span class="builtinfunc" id="3666015">len</span><span class="op" id="3666018">(</span><span class="ident" id="3666019">s</span><span class="op" id="3666020">.</span><span class="ident" id="3666021">src</span><span class="op" id="3666024">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3666028">if</span>&nbsp;<span class="ident" id="3666031">s</span><span class="op" id="3666032">.</span><span class="ident" id="3666033">ch</span>&nbsp;<span class="op" id="3666036">==</span>&nbsp;<span class="string" id="3666039">&#39;\n&#39;</span>&nbsp;<span class="op" id="3666044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3666049">s</span><span class="op" id="3666050">.</span><span class="ident" id="3666051">lineOffset</span>&nbsp;<span class="op" id="3666062">=</span>&nbsp;<span class="ident" id="3666064">s</span><span class="op" id="3666065">.</span><span class="ident" id="3666066">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3666076">s</span><span class="op" id="3666077">.</span><span class="ident" id="3666078">file</span><span class="op" id="3666082">.</span><span class="ident" id="3666083">AddLine</span><span class="op" id="3666090">(</span><span class="ident" id="3666091">s</span><span class="op" id="3666092">.</span><span class="ident" id="3666093">offset</span><span class="op" id="3666099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3666103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3666107">s</span><span class="op" id="3666108">.</span><span class="ident" id="3666109">ch</span>&nbsp;<span class="op" id="3666112">=</span>&nbsp;<span class="op" id="3666114">-</span><span class="num" id="3666115">1</span>&nbsp;<span class="comment" id="3666117">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3666125">}</span><br>
<span class="lineno"></span><span class="op" id="3666127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3666130">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="3666172">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="3666206">//</span><br>
<span class="lineno"></span><span class="keyword" id="3666209">type</span>&nbsp;<span class="ident" id="3666214">Mode</span>&nbsp;<span class="builtintype" id="3666219">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3666225">const</span>&nbsp;<span class="op" id="3666231">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3666234">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3666250">Mode</span>&nbsp;<span class="op" id="3666255">=</span>&nbsp;<span class="num" id="3666257">1</span>&nbsp;<span class="op" id="3666259">&lt;&lt;</span>&nbsp;<span class="ident" id="3666262">iota</span>&nbsp;<span class="comment" id="3666267">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3666305">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3666338">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="3666399">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3666402">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3666473">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="3666544">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="3666616">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3666686">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3666757">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="3666812">//</span><br>
<span class="lineno">105</span><span class="comment" id="3666815">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3666886">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="3666956">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="3667030">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="3667070">//</span><br>
<span class="lineno">110</span><span class="comment" id="3667073">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3667148">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="3667164">//</span><br>
<span class="lineno"></span><span class="keyword" id="3667167">func</span>&nbsp;<span class="op" id="3667172">(</span><span class="ident" id="3667173">s</span>&nbsp;<span class="op" id="3667175">*</span><span class="ident" id="3667176">Scanner</span><span class="op" id="3667183">)</span>&nbsp;<span class="ident" id="3667185">Init</span><span class="op" id="3667189">(</span><span class="ident" id="3667190">file</span>&nbsp;<span class="op" id="3667195">*</span><span class="ident" id="3667196">token</span><span class="op" id="3667201">.</span><span class="ident" id="3667202">File</span><span class="op" id="3667206">,</span>&nbsp;<span class="ident" id="3667208">src</span>&nbsp;<span class="op" id="3667212">[</span><span class="op" id="3667213">]</span><span class="builtintype" id="3667214">byte</span><span class="op" id="3667218">,</span>&nbsp;<span class="ident" id="3667220">err</span>&nbsp;<span class="ident" id="3667224">ErrorHandler</span><span class="op" id="3667236">,</span>&nbsp;<span class="ident" id="3667238">mode</span>&nbsp;<span class="ident" id="3667243">Mode</span><span class="op" id="3667247">)</span>&nbsp;<span class="op" id="3667249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3667252">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3667320">if</span>&nbsp;<span class="ident" id="3667323">file</span><span class="op" id="3667327">.</span><span class="ident" id="3667328">Size</span><span class="op" id="3667332">(</span><span class="op" id="3667333">)</span>&nbsp;<span class="op" id="3667335">!=</span>&nbsp;<span class="builtinfunc" id="3667338">len</span><span class="op" id="3667341">(</span><span class="ident" id="3667342">src</span><span class="op" id="3667345">)</span>&nbsp;<span class="op" id="3667347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3667351">panic</span><span class="op" id="3667356">(</span><span class="ident" id="3667357">fmt</span><span class="op" id="3667360">.</span><span class="ident" id="3667361">Sprintf</span><span class="op" id="3667368">(</span><span class="string" id="3667369">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="3667413">,</span>&nbsp;<span class="ident" id="3667415">file</span><span class="op" id="3667419">.</span><span class="ident" id="3667420">Size</span><span class="op" id="3667424">(</span><span class="op" id="3667425">)</span><span class="op" id="3667426">,</span>&nbsp;<span class="builtinfunc" id="3667428">len</span><span class="op" id="3667431">(</span><span class="ident" id="3667432">src</span><span class="op" id="3667435">)</span><span class="op" id="3667436">)</span><span class="op" id="3667437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3667440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667443">s</span><span class="op" id="3667444">.</span><span class="ident" id="3667445">file</span>&nbsp;<span class="op" id="3667450">=</span>&nbsp;<span class="ident" id="3667452">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667458">s</span><span class="op" id="3667459">.</span><span class="ident" id="3667460">dir</span><span class="op" id="3667463">,</span>&nbsp;<span class="ident" id="3667465">_</span>&nbsp;<span class="op" id="3667467">=</span>&nbsp;<span class="ident" id="3667469">filepath</span><span class="op" id="3667477">.</span><span class="ident" id="3667478">Split</span><span class="op" id="3667483">(</span><span class="ident" id="3667484">file</span><span class="op" id="3667488">.</span><span class="ident" id="3667489">Name</span><span class="op" id="3667493">(</span><span class="op" id="3667494">)</span><span class="op" id="3667495">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667498">s</span><span class="op" id="3667499">.</span><span class="ident" id="3667500">src</span>&nbsp;<span class="op" id="3667504">=</span>&nbsp;<span class="ident" id="3667506">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667511">s</span><span class="op" id="3667512">.</span><span class="ident" id="3667513">err</span>&nbsp;<span class="op" id="3667517">=</span>&nbsp;<span class="ident" id="3667519">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667524">s</span><span class="op" id="3667525">.</span><span class="ident" id="3667526">mode</span>&nbsp;<span class="op" id="3667531">=</span>&nbsp;<span class="ident" id="3667533">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667540">s</span><span class="op" id="3667541">.</span><span class="ident" id="3667542">ch</span>&nbsp;<span class="op" id="3667545">=</span>&nbsp;<span class="string" id="3667547">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667552">s</span><span class="op" id="3667553">.</span><span class="ident" id="3667554">offset</span>&nbsp;<span class="op" id="3667561">=</span>&nbsp;<span class="num" id="3667563">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667566">s</span><span class="op" id="3667567">.</span><span class="ident" id="3667568">rdOffset</span>&nbsp;<span class="op" id="3667577">=</span>&nbsp;<span class="num" id="3667579">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667582">s</span><span class="op" id="3667583">.</span><span class="ident" id="3667584">lineOffset</span>&nbsp;<span class="op" id="3667595">=</span>&nbsp;<span class="num" id="3667597">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667600">s</span><span class="op" id="3667601">.</span><span class="ident" id="3667602">insertSemi</span>&nbsp;<span class="op" id="3667613">=</span>&nbsp;<span class="builtintype" id="3667615">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667622">s</span><span class="op" id="3667623">.</span><span class="ident" id="3667624">ErrorCount</span>&nbsp;<span class="op" id="3667635">=</span>&nbsp;<span class="num" id="3667637">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667641">s</span><span class="op" id="3667642">.</span><span class="ident" id="3667643">next</span><span class="op" id="3667647">(</span><span class="op" id="3667648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3667651">if</span>&nbsp;<span class="ident" id="3667654">s</span><span class="op" id="3667655">.</span><span class="ident" id="3667656">ch</span>&nbsp;<span class="op" id="3667659">==</span>&nbsp;<span class="ident" id="3667662">bom</span>&nbsp;<span class="op" id="3667666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667670">s</span><span class="op" id="3667671">.</span><span class="ident" id="3667672">next</span><span class="op" id="3667676">(</span><span class="op" id="3667677">)</span>&nbsp;<span class="comment" id="3667679">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3667712">}</span><br>
<span class="lineno">135</span><span class="op" id="3667714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3667717">func</span>&nbsp;<span class="op" id="3667722">(</span><span class="ident" id="3667723">s</span>&nbsp;<span class="op" id="3667725">*</span><span class="ident" id="3667726">Scanner</span><span class="op" id="3667733">)</span>&nbsp;<span class="builtintype" id="3667735">error</span><span class="op" id="3667740">(</span><span class="ident" id="3667741">offs</span>&nbsp;<span class="builtintype" id="3667746">int</span><span class="op" id="3667749">,</span>&nbsp;<span class="ident" id="3667751">msg</span>&nbsp;<span class="builtintype" id="3667755">string</span><span class="op" id="3667761">)</span>&nbsp;<span class="op" id="3667763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3667766">if</span>&nbsp;<span class="ident" id="3667769">s</span><span class="op" id="3667770">.</span><span class="ident" id="3667771">err</span>&nbsp;<span class="op" id="3667775">!=</span>&nbsp;<span class="ident" id="3667778">nil</span>&nbsp;<span class="op" id="3667782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667786">s</span><span class="op" id="3667787">.</span><span class="ident" id="3667788">err</span><span class="op" id="3667791">(</span><span class="ident" id="3667792">s</span><span class="op" id="3667793">.</span><span class="ident" id="3667794">file</span><span class="op" id="3667798">.</span><span class="ident" id="3667799">Position</span><span class="op" id="3667807">(</span><span class="ident" id="3667808">s</span><span class="op" id="3667809">.</span><span class="ident" id="3667810">file</span><span class="op" id="3667814">.</span><span class="ident" id="3667815">Pos</span><span class="op" id="3667818">(</span><span class="ident" id="3667819">offs</span><span class="op" id="3667823">)</span><span class="op" id="3667824">)</span><span class="op" id="3667825">,</span>&nbsp;<span class="ident" id="3667827">msg</span><span class="op" id="3667830">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3667833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3667836">s</span><span class="op" id="3667837">.</span><span class="ident" id="3667838">ErrorCount</span><span class="op" id="3667848">++</span><br>
<span class="lineno"></span><span class="op" id="3667851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3667854">var</span>&nbsp;<span class="ident" id="3667858">prefix</span>&nbsp;<span class="op" id="3667865">=</span>&nbsp;<span class="op" id="3667867">[</span><span class="op" id="3667868">]</span><span class="builtintype" id="3667869">byte</span><span class="op" id="3667873">(</span><span class="string" id="3667874">&#34;//line&nbsp;&#34;</span><span class="op" id="3667883">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="3667886">func</span>&nbsp;<span class="op" id="3667891">(</span><span class="ident" id="3667892">s</span>&nbsp;<span class="op" id="3667894">*</span><span class="ident" id="3667895">Scanner</span><span class="op" id="3667902">)</span>&nbsp;<span class="ident" id="3667904">interpretLineComment</span><span class="op" id="3667924">(</span><span class="ident" id="3667925">text</span>&nbsp;<span class="op" id="3667930">[</span><span class="op" id="3667931">]</span><span class="builtintype" id="3667932">byte</span><span class="op" id="3667936">)</span>&nbsp;<span class="op" id="3667938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3667941">if</span>&nbsp;<span class="ident" id="3667944">bytes</span><span class="op" id="3667949">.</span><span class="ident" id="3667950">HasPrefix</span><span class="op" id="3667959">(</span><span class="ident" id="3667960">text</span><span class="op" id="3667964">,</span>&nbsp;<span class="ident" id="3667966">prefix</span><span class="op" id="3667972">)</span>&nbsp;<span class="op" id="3667974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3667978">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668020">if</span>&nbsp;<span class="ident" id="3668023">i</span>&nbsp;<span class="op" id="3668025">:=</span>&nbsp;<span class="ident" id="3668028">bytes</span><span class="op" id="3668033">.</span><span class="ident" id="3668034">LastIndex</span><span class="op" id="3668043">(</span><span class="ident" id="3668044">text</span><span class="op" id="3668048">,</span>&nbsp;<span class="op" id="3668050">[</span><span class="op" id="3668051">]</span><span class="builtintype" id="3668052">byte</span><span class="op" id="3668056">{</span><span class="string" id="3668057">&#39;:&#39;</span><span class="op" id="3668060">}</span><span class="op" id="3668061">)</span><span class="op" id="3668062">;</span>&nbsp;<span class="ident" id="3668064">i</span>&nbsp;<span class="op" id="3668066">&gt;</span>&nbsp;<span class="num" id="3668068">0</span>&nbsp;<span class="op" id="3668070">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668075">if</span>&nbsp;<span class="ident" id="3668078">line</span><span class="op" id="3668082">,</span>&nbsp;<span class="ident" id="3668084">err</span>&nbsp;<span class="op" id="3668088">:=</span>&nbsp;<span class="ident" id="3668091">strconv</span><span class="op" id="3668098">.</span><span class="ident" id="3668099">Atoi</span><span class="op" id="3668103">(</span><span class="builtintype" id="3668104">string</span><span class="op" id="3668110">(</span><span class="ident" id="3668111">text</span><span class="op" id="3668115">[</span><span class="ident" id="3668116">i</span><span class="op" id="3668117">+</span><span class="num" id="3668118">1</span><span class="op" id="3668119">:</span><span class="op" id="3668120">]</span><span class="op" id="3668121">)</span><span class="op" id="3668122">)</span><span class="op" id="3668123">;</span>&nbsp;<span class="ident" id="3668125">err</span>&nbsp;<span class="op" id="3668129">==</span>&nbsp;<span class="ident" id="3668132">nil</span>&nbsp;<span class="op" id="3668136">&amp;&amp;</span>&nbsp;<span class="ident" id="3668139">line</span>&nbsp;<span class="op" id="3668144">&gt;</span>&nbsp;<span class="num" id="3668146">0</span>&nbsp;<span class="op" id="3668148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3668154">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668196">filename</span>&nbsp;<span class="op" id="3668205">:=</span>&nbsp;<span class="builtintype" id="3668208">string</span><span class="op" id="3668214">(</span><span class="ident" id="3668215">bytes</span><span class="op" id="3668220">.</span><span class="ident" id="3668221">TrimSpace</span><span class="op" id="3668230">(</span><span class="ident" id="3668231">text</span><span class="op" id="3668235">[</span><span class="builtinfunc" id="3668236">len</span><span class="op" id="3668239">(</span><span class="ident" id="3668240">prefix</span><span class="op" id="3668246">)</span><span class="op" id="3668247">:</span><span class="ident" id="3668248">i</span><span class="op" id="3668249">]</span><span class="op" id="3668250">)</span><span class="op" id="3668251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668257">if</span>&nbsp;<span class="ident" id="3668260">filename</span>&nbsp;<span class="op" id="3668269">!=</span>&nbsp;<span class="string" id="3668272">&#34;&#34;</span>&nbsp;<span class="op" id="3668275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668282">filename</span>&nbsp;<span class="op" id="3668291">=</span>&nbsp;<span class="ident" id="3668293">filepath</span><span class="op" id="3668301">.</span><span class="ident" id="3668302">Clean</span><span class="op" id="3668307">(</span><span class="ident" id="3668308">filename</span><span class="op" id="3668316">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668323">if</span>&nbsp;<span class="op" id="3668326">!</span><span class="ident" id="3668327">filepath</span><span class="op" id="3668335">.</span><span class="ident" id="3668336">IsAbs</span><span class="op" id="3668341">(</span><span class="ident" id="3668342">filename</span><span class="op" id="3668350">)</span>&nbsp;<span class="op" id="3668352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3668360">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668413">filename</span>&nbsp;<span class="op" id="3668422">=</span>&nbsp;<span class="ident" id="3668424">filepath</span><span class="op" id="3668432">.</span><span class="ident" id="3668433">Join</span><span class="op" id="3668437">(</span><span class="ident" id="3668438">s</span><span class="op" id="3668439">.</span><span class="ident" id="3668440">dir</span><span class="op" id="3668443">,</span>&nbsp;<span class="ident" id="3668445">filename</span><span class="op" id="3668453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668466">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3668472">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668503">s</span><span class="op" id="3668504">.</span><span class="ident" id="3668505">file</span><span class="op" id="3668509">.</span><span class="ident" id="3668510">AddLineInfo</span><span class="op" id="3668521">(</span><span class="ident" id="3668522">s</span><span class="op" id="3668523">.</span><span class="ident" id="3668524">lineOffset</span><span class="op" id="3668534">+</span><span class="builtinfunc" id="3668535">len</span><span class="op" id="3668538">(</span><span class="ident" id="3668539">text</span><span class="op" id="3668543">)</span><span class="op" id="3668544">+</span><span class="num" id="3668545">1</span><span class="op" id="3668546">,</span>&nbsp;<span class="ident" id="3668548">filename</span><span class="op" id="3668556">,</span>&nbsp;<span class="ident" id="3668558">line</span><span class="op" id="3668562">)</span>&nbsp;<span class="comment" id="3668564">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668625">}</span><br>
<span class="lineno">165</span><span class="op" id="3668627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3668630">func</span>&nbsp;<span class="op" id="3668635">(</span><span class="ident" id="3668636">s</span>&nbsp;<span class="op" id="3668638">*</span><span class="ident" id="3668639">Scanner</span><span class="op" id="3668646">)</span>&nbsp;<span class="ident" id="3668648">scanComment</span><span class="op" id="3668659">(</span><span class="op" id="3668660">)</span>&nbsp;<span class="builtintype" id="3668662">string</span>&nbsp;<span class="op" id="3668669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3668672">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668733">offs</span>&nbsp;<span class="op" id="3668738">:=</span>&nbsp;<span class="ident" id="3668741">s</span><span class="op" id="3668742">.</span><span class="ident" id="3668743">offset</span>&nbsp;<span class="op" id="3668750">-</span>&nbsp;<span class="num" id="3668752">1</span>&nbsp;<span class="comment" id="3668754">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668782">hasCR</span>&nbsp;<span class="op" id="3668788">:=</span>&nbsp;<span class="builtintype" id="3668791">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668799">if</span>&nbsp;<span class="ident" id="3668802">s</span><span class="op" id="3668803">.</span><span class="ident" id="3668804">ch</span>&nbsp;<span class="op" id="3668807">==</span>&nbsp;<span class="string" id="3668810">&#39;/&#39;</span>&nbsp;<span class="op" id="3668814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3668818">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668837">s</span><span class="op" id="3668838">.</span><span class="ident" id="3668839">next</span><span class="op" id="3668843">(</span><span class="op" id="3668844">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668848">for</span>&nbsp;<span class="ident" id="3668852">s</span><span class="op" id="3668853">.</span><span class="ident" id="3668854">ch</span>&nbsp;<span class="op" id="3668857">!=</span>&nbsp;<span class="string" id="3668860">&#39;\n&#39;</span>&nbsp;<span class="op" id="3668865">&amp;&amp;</span>&nbsp;<span class="ident" id="3668868">s</span><span class="op" id="3668869">.</span><span class="ident" id="3668870">ch</span>&nbsp;<span class="op" id="3668873">&gt;=</span>&nbsp;<span class="num" id="3668876">0</span>&nbsp;<span class="op" id="3668878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668883">if</span>&nbsp;<span class="ident" id="3668886">s</span><span class="op" id="3668887">.</span><span class="ident" id="3668888">ch</span>&nbsp;<span class="op" id="3668891">==</span>&nbsp;<span class="string" id="3668894">&#39;\r&#39;</span>&nbsp;<span class="op" id="3668899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668905">hasCR</span>&nbsp;<span class="op" id="3668911">=</span>&nbsp;<span class="builtintype" id="3668913">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3668926">s</span><span class="op" id="3668927">.</span><span class="ident" id="3668928">next</span><span class="op" id="3668932">(</span><span class="op" id="3668933">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3668937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3668941">if</span>&nbsp;<span class="ident" id="3668944">offs</span>&nbsp;<span class="op" id="3668949">==</span>&nbsp;<span class="ident" id="3668952">s</span><span class="op" id="3668953">.</span><span class="ident" id="3668954">lineOffset</span>&nbsp;<span class="op" id="3668965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3668970">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669028">s</span><span class="op" id="3669029">.</span><span class="ident" id="3669030">interpretLineComment</span><span class="op" id="3669050">(</span><span class="ident" id="3669051">s</span><span class="op" id="3669052">.</span><span class="ident" id="3669053">src</span><span class="op" id="3669056">[</span><span class="ident" id="3669057">offs</span><span class="op" id="3669061">:</span><span class="ident" id="3669062">s</span><span class="op" id="3669063">.</span><span class="ident" id="3669064">offset</span><span class="op" id="3669070">]</span><span class="op" id="3669071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669075">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669079">goto</span>&nbsp;<span class="ident" id="3669084">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3669094">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669115">s</span><span class="op" id="3669116">.</span><span class="ident" id="3669117">next</span><span class="op" id="3669121">(</span><span class="op" id="3669122">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669125">for</span>&nbsp;<span class="ident" id="3669129">s</span><span class="op" id="3669130">.</span><span class="ident" id="3669131">ch</span>&nbsp;<span class="op" id="3669134">&gt;=</span>&nbsp;<span class="num" id="3669137">0</span>&nbsp;<span class="op" id="3669139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669143">ch</span>&nbsp;<span class="op" id="3669146">:=</span>&nbsp;<span class="ident" id="3669149">s</span><span class="op" id="3669150">.</span><span class="ident" id="3669151">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669156">if</span>&nbsp;<span class="ident" id="3669159">ch</span>&nbsp;<span class="op" id="3669162">==</span>&nbsp;<span class="string" id="3669165">&#39;\r&#39;</span>&nbsp;<span class="op" id="3669170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669175">hasCR</span>&nbsp;<span class="op" id="3669181">=</span>&nbsp;<span class="builtintype" id="3669183">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669190">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669194">s</span><span class="op" id="3669195">.</span><span class="ident" id="3669196">next</span><span class="op" id="3669200">(</span><span class="op" id="3669201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669205">if</span>&nbsp;<span class="ident" id="3669208">ch</span>&nbsp;<span class="op" id="3669211">==</span>&nbsp;<span class="string" id="3669214">&#39;*&#39;</span>&nbsp;<span class="op" id="3669218">&amp;&amp;</span>&nbsp;<span class="ident" id="3669221">s</span><span class="op" id="3669222">.</span><span class="ident" id="3669223">ch</span>&nbsp;<span class="op" id="3669226">==</span>&nbsp;<span class="string" id="3669229">&#39;/&#39;</span>&nbsp;<span class="op" id="3669233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669238">s</span><span class="op" id="3669239">.</span><span class="ident" id="3669240">next</span><span class="op" id="3669244">(</span><span class="op" id="3669245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669250">goto</span>&nbsp;<span class="ident" id="3669255">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669262">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669269">s</span><span class="op" id="3669270">.</span><span class="builtintype" id="3669271">error</span><span class="op" id="3669276">(</span><span class="ident" id="3669277">offs</span><span class="op" id="3669281">,</span>&nbsp;<span class="string" id="3669283">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3669307">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3669310">exit</span><span class="op" id="3669314">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669317">lit</span>&nbsp;<span class="op" id="3669321">:=</span>&nbsp;<span class="ident" id="3669324">s</span><span class="op" id="3669325">.</span><span class="ident" id="3669326">src</span><span class="op" id="3669329">[</span><span class="ident" id="3669330">offs</span><span class="op" id="3669334">:</span><span class="ident" id="3669335">s</span><span class="op" id="3669336">.</span><span class="ident" id="3669337">offset</span><span class="op" id="3669343">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669346">if</span>&nbsp;<span class="ident" id="3669349">hasCR</span>&nbsp;<span class="op" id="3669355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669359">lit</span>&nbsp;<span class="op" id="3669363">=</span>&nbsp;<span class="ident" id="3669365">stripCR</span><span class="op" id="3669372">(</span><span class="ident" id="3669373">lit</span><span class="op" id="3669376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669383">return</span>&nbsp;<span class="builtintype" id="3669390">string</span><span class="op" id="3669396">(</span><span class="ident" id="3669397">lit</span><span class="op" id="3669400">)</span><br>
<span class="lineno"></span><span class="op" id="3669402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3669405">func</span>&nbsp;<span class="op" id="3669410">(</span><span class="ident" id="3669411">s</span>&nbsp;<span class="op" id="3669413">*</span><span class="ident" id="3669414">Scanner</span><span class="op" id="3669421">)</span>&nbsp;<span class="ident" id="3669423">findLineEnd</span><span class="op" id="3669434">(</span><span class="op" id="3669435">)</span>&nbsp;<span class="builtintype" id="3669437">bool</span>&nbsp;<span class="op" id="3669442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3669445">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669479">defer</span>&nbsp;<span class="keyword" id="3669485">func</span><span class="op" id="3669489">(</span><span class="ident" id="3669490">offs</span>&nbsp;<span class="builtintype" id="3669495">int</span><span class="op" id="3669498">)</span>&nbsp;<span class="op" id="3669500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3669504">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669570">s</span><span class="op" id="3669571">.</span><span class="ident" id="3669572">ch</span>&nbsp;<span class="op" id="3669575">=</span>&nbsp;<span class="string" id="3669577">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669583">s</span><span class="op" id="3669584">.</span><span class="ident" id="3669585">offset</span>&nbsp;<span class="op" id="3669592">=</span>&nbsp;<span class="ident" id="3669594">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669601">s</span><span class="op" id="3669602">.</span><span class="ident" id="3669603">rdOffset</span>&nbsp;<span class="op" id="3669612">=</span>&nbsp;<span class="ident" id="3669614">offs</span>&nbsp;<span class="op" id="3669619">+</span>&nbsp;<span class="num" id="3669621">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669625">s</span><span class="op" id="3669626">.</span><span class="ident" id="3669627">next</span><span class="op" id="3669631">(</span><span class="op" id="3669632">)</span>&nbsp;<span class="comment" id="3669634">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669664">}</span><span class="op" id="3669665">(</span><span class="ident" id="3669666">s</span><span class="op" id="3669667">.</span><span class="ident" id="3669668">offset</span>&nbsp;<span class="op" id="3669675">-</span>&nbsp;<span class="num" id="3669677">1</span><span class="op" id="3669678">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3669682">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669749">for</span>&nbsp;<span class="ident" id="3669753">s</span><span class="op" id="3669754">.</span><span class="ident" id="3669755">ch</span>&nbsp;<span class="op" id="3669758">==</span>&nbsp;<span class="string" id="3669761">&#39;/&#39;</span>&nbsp;<span class="op" id="3669765">||</span>&nbsp;<span class="ident" id="3669768">s</span><span class="op" id="3669769">.</span><span class="ident" id="3669770">ch</span>&nbsp;<span class="op" id="3669773">==</span>&nbsp;<span class="string" id="3669776">&#39;*&#39;</span>&nbsp;<span class="op" id="3669780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669784">if</span>&nbsp;<span class="ident" id="3669787">s</span><span class="op" id="3669788">.</span><span class="ident" id="3669789">ch</span>&nbsp;<span class="op" id="3669792">==</span>&nbsp;<span class="string" id="3669795">&#39;/&#39;</span>&nbsp;<span class="op" id="3669799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3669804">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669850">return</span>&nbsp;<span class="builtintype" id="3669857">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669864">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3669868">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669908">s</span><span class="op" id="3669909">.</span><span class="ident" id="3669910">next</span><span class="op" id="3669914">(</span><span class="op" id="3669915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669919">for</span>&nbsp;<span class="ident" id="3669923">s</span><span class="op" id="3669924">.</span><span class="ident" id="3669925">ch</span>&nbsp;<span class="op" id="3669928">&gt;=</span>&nbsp;<span class="num" id="3669931">0</span>&nbsp;<span class="op" id="3669933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669938">ch</span>&nbsp;<span class="op" id="3669941">:=</span>&nbsp;<span class="ident" id="3669944">s</span><span class="op" id="3669945">.</span><span class="ident" id="3669946">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669952">if</span>&nbsp;<span class="ident" id="3669955">ch</span>&nbsp;<span class="op" id="3669958">==</span>&nbsp;<span class="string" id="3669961">&#39;\n&#39;</span>&nbsp;<span class="op" id="3669966">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3669972">return</span>&nbsp;<span class="builtintype" id="3669979">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3669987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3669992">s</span><span class="op" id="3669993">.</span><span class="ident" id="3669994">next</span><span class="op" id="3669998">(</span><span class="op" id="3669999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670004">if</span>&nbsp;<span class="ident" id="3670007">ch</span>&nbsp;<span class="op" id="3670010">==</span>&nbsp;<span class="string" id="3670013">&#39;*&#39;</span>&nbsp;<span class="op" id="3670017">&amp;&amp;</span>&nbsp;<span class="ident" id="3670020">s</span><span class="op" id="3670021">.</span><span class="ident" id="3670022">ch</span>&nbsp;<span class="op" id="3670025">==</span>&nbsp;<span class="string" id="3670028">&#39;/&#39;</span>&nbsp;<span class="op" id="3670032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3670038">s</span><span class="op" id="3670039">.</span><span class="ident" id="3670040">next</span><span class="op" id="3670044">(</span><span class="op" id="3670045">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3670068">s</span><span class="op" id="3670069">.</span><span class="ident" id="3670070">skipWhitespace</span><span class="op" id="3670084">(</span><span class="op" id="3670085">)</span>&nbsp;<span class="comment" id="3670087">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670112">if</span>&nbsp;<span class="ident" id="3670115">s</span><span class="op" id="3670116">.</span><span class="ident" id="3670117">ch</span>&nbsp;<span class="op" id="3670120">&lt;</span>&nbsp;<span class="num" id="3670122">0</span>&nbsp;<span class="op" id="3670124">||</span>&nbsp;<span class="ident" id="3670127">s</span><span class="op" id="3670128">.</span><span class="ident" id="3670129">ch</span>&nbsp;<span class="op" id="3670132">==</span>&nbsp;<span class="string" id="3670135">&#39;\n&#39;</span>&nbsp;<span class="op" id="3670140">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670145">return</span>&nbsp;<span class="builtintype" id="3670152">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670163">if</span>&nbsp;<span class="ident" id="3670166">s</span><span class="op" id="3670167">.</span><span class="ident" id="3670168">ch</span>&nbsp;<span class="op" id="3670171">!=</span>&nbsp;<span class="string" id="3670174">&#39;/&#39;</span>&nbsp;<span class="op" id="3670178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3670183">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670207">return</span>&nbsp;<span class="builtintype" id="3670214">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3670226">s</span><span class="op" id="3670227">.</span><span class="ident" id="3670228">next</span><span class="op" id="3670232">(</span><span class="op" id="3670233">)</span>&nbsp;<span class="comment" id="3670235">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670255">return</span>&nbsp;<span class="builtintype" id="3670262">false</span><br>
<span class="lineno">255</span><span class="op" id="3670268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3670271">func</span>&nbsp;<span class="ident" id="3670276">isLetter</span><span class="op" id="3670284">(</span><span class="ident" id="3670285">ch</span>&nbsp;<span class="builtintype" id="3670288">rune</span><span class="op" id="3670292">)</span>&nbsp;<span class="builtintype" id="3670294">bool</span>&nbsp;<span class="op" id="3670299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670302">return</span>&nbsp;<span class="string" id="3670309">&#39;a&#39;</span>&nbsp;<span class="op" id="3670313">&lt;=</span>&nbsp;<span class="ident" id="3670316">ch</span>&nbsp;<span class="op" id="3670319">&amp;&amp;</span>&nbsp;<span class="ident" id="3670322">ch</span>&nbsp;<span class="op" id="3670325">&lt;=</span>&nbsp;<span class="string" id="3670328">&#39;z&#39;</span>&nbsp;<span class="op" id="3670332">||</span>&nbsp;<span class="string" id="3670335">&#39;A&#39;</span>&nbsp;<span class="op" id="3670339">&lt;=</span>&nbsp;<span class="ident" id="3670342">ch</span>&nbsp;<span class="op" id="3670345">&amp;&amp;</span>&nbsp;<span class="ident" id="3670348">ch</span>&nbsp;<span class="op" id="3670351">&lt;=</span>&nbsp;<span class="string" id="3670354">&#39;Z&#39;</span>&nbsp;<span class="op" id="3670358">||</span>&nbsp;<span class="ident" id="3670361">ch</span>&nbsp;<span class="op" id="3670364">==</span>&nbsp;<span class="string" id="3670367">&#39;_&#39;</span>&nbsp;<span class="op" id="3670371">||</span>&nbsp;<span class="ident" id="3670374">ch</span>&nbsp;<span class="op" id="3670377">&gt;=</span>&nbsp;<span class="num" id="3670380">0x80</span>&nbsp;<span class="op" id="3670385">&amp;&amp;</span>&nbsp;<span class="ident" id="3670388">unicode</span><span class="op" id="3670395">.</span><span class="ident" id="3670396">IsLetter</span><span class="op" id="3670404">(</span><span class="ident" id="3670405">ch</span><span class="op" id="3670407">)</span><br>
<span class="lineno"></span><span class="op" id="3670409">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="3670412">func</span>&nbsp;<span class="ident" id="3670417">isDigit</span><span class="op" id="3670424">(</span><span class="ident" id="3670425">ch</span>&nbsp;<span class="builtintype" id="3670428">rune</span><span class="op" id="3670432">)</span>&nbsp;<span class="builtintype" id="3670434">bool</span>&nbsp;<span class="op" id="3670439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670442">return</span>&nbsp;<span class="string" id="3670449">&#39;0&#39;</span>&nbsp;<span class="op" id="3670453">&lt;=</span>&nbsp;<span class="ident" id="3670456">ch</span>&nbsp;<span class="op" id="3670459">&amp;&amp;</span>&nbsp;<span class="ident" id="3670462">ch</span>&nbsp;<span class="op" id="3670465">&lt;=</span>&nbsp;<span class="string" id="3670468">&#39;9&#39;</span>&nbsp;<span class="op" id="3670472">||</span>&nbsp;<span class="ident" id="3670475">ch</span>&nbsp;<span class="op" id="3670478">&gt;=</span>&nbsp;<span class="num" id="3670481">0x80</span>&nbsp;<span class="op" id="3670486">&amp;&amp;</span>&nbsp;<span class="ident" id="3670489">unicode</span><span class="op" id="3670496">.</span><span class="ident" id="3670497">IsDigit</span><span class="op" id="3670504">(</span><span class="ident" id="3670505">ch</span><span class="op" id="3670507">)</span><br>
<span class="lineno"></span><span class="op" id="3670509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="3670512">func</span>&nbsp;<span class="op" id="3670517">(</span><span class="ident" id="3670518">s</span>&nbsp;<span class="op" id="3670520">*</span><span class="ident" id="3670521">Scanner</span><span class="op" id="3670528">)</span>&nbsp;<span class="ident" id="3670530">scanIdentifier</span><span class="op" id="3670544">(</span><span class="op" id="3670545">)</span>&nbsp;<span class="builtintype" id="3670547">string</span>&nbsp;<span class="op" id="3670554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3670557">offs</span>&nbsp;<span class="op" id="3670562">:=</span>&nbsp;<span class="ident" id="3670565">s</span><span class="op" id="3670566">.</span><span class="ident" id="3670567">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670575">for</span>&nbsp;<span class="ident" id="3670579">isLetter</span><span class="op" id="3670587">(</span><span class="ident" id="3670588">s</span><span class="op" id="3670589">.</span><span class="ident" id="3670590">ch</span><span class="op" id="3670592">)</span>&nbsp;<span class="op" id="3670594">||</span>&nbsp;<span class="ident" id="3670597">isDigit</span><span class="op" id="3670604">(</span><span class="ident" id="3670605">s</span><span class="op" id="3670606">.</span><span class="ident" id="3670607">ch</span><span class="op" id="3670609">)</span>&nbsp;<span class="op" id="3670611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3670615">s</span><span class="op" id="3670616">.</span><span class="ident" id="3670617">next</span><span class="op" id="3670621">(</span><span class="op" id="3670622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670625">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670628">return</span>&nbsp;<span class="builtintype" id="3670635">string</span><span class="op" id="3670641">(</span><span class="ident" id="3670642">s</span><span class="op" id="3670643">.</span><span class="ident" id="3670644">src</span><span class="op" id="3670647">[</span><span class="ident" id="3670648">offs</span><span class="op" id="3670652">:</span><span class="ident" id="3670653">s</span><span class="op" id="3670654">.</span><span class="ident" id="3670655">offset</span><span class="op" id="3670661">]</span><span class="op" id="3670662">)</span><br>
<span class="lineno"></span><span class="op" id="3670664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3670667">func</span>&nbsp;<span class="ident" id="3670672">digitVal</span><span class="op" id="3670680">(</span><span class="ident" id="3670681">ch</span>&nbsp;<span class="builtintype" id="3670684">rune</span><span class="op" id="3670688">)</span>&nbsp;<span class="builtintype" id="3670690">int</span>&nbsp;<span class="op" id="3670694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670697">switch</span>&nbsp;<span class="op" id="3670704">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670707">case</span>&nbsp;<span class="string" id="3670712">&#39;0&#39;</span>&nbsp;<span class="op" id="3670716">&lt;=</span>&nbsp;<span class="ident" id="3670719">ch</span>&nbsp;<span class="op" id="3670722">&amp;&amp;</span>&nbsp;<span class="ident" id="3670725">ch</span>&nbsp;<span class="op" id="3670728">&lt;=</span>&nbsp;<span class="string" id="3670731">&#39;9&#39;</span><span class="op" id="3670734">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670738">return</span>&nbsp;<span class="builtintype" id="3670745">int</span><span class="op" id="3670748">(</span><span class="ident" id="3670749">ch</span>&nbsp;<span class="op" id="3670752">-</span>&nbsp;<span class="string" id="3670754">&#39;0&#39;</span><span class="op" id="3670757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670760">case</span>&nbsp;<span class="string" id="3670765">&#39;a&#39;</span>&nbsp;<span class="op" id="3670769">&lt;=</span>&nbsp;<span class="ident" id="3670772">ch</span>&nbsp;<span class="op" id="3670775">&amp;&amp;</span>&nbsp;<span class="ident" id="3670778">ch</span>&nbsp;<span class="op" id="3670781">&lt;=</span>&nbsp;<span class="string" id="3670784">&#39;f&#39;</span><span class="op" id="3670787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670791">return</span>&nbsp;<span class="builtintype" id="3670798">int</span><span class="op" id="3670801">(</span><span class="ident" id="3670802">ch</span>&nbsp;<span class="op" id="3670805">-</span>&nbsp;<span class="string" id="3670807">&#39;a&#39;</span>&nbsp;<span class="op" id="3670811">+</span>&nbsp;<span class="num" id="3670813">10</span><span class="op" id="3670815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670818">case</span>&nbsp;<span class="string" id="3670823">&#39;A&#39;</span>&nbsp;<span class="op" id="3670827">&lt;=</span>&nbsp;<span class="ident" id="3670830">ch</span>&nbsp;<span class="op" id="3670833">&amp;&amp;</span>&nbsp;<span class="ident" id="3670836">ch</span>&nbsp;<span class="op" id="3670839">&lt;=</span>&nbsp;<span class="string" id="3670842">&#39;F&#39;</span><span class="op" id="3670845">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670849">return</span>&nbsp;<span class="builtintype" id="3670856">int</span><span class="op" id="3670859">(</span><span class="ident" id="3670860">ch</span>&nbsp;<span class="op" id="3670863">-</span>&nbsp;<span class="string" id="3670865">&#39;A&#39;</span>&nbsp;<span class="op" id="3670869">+</span>&nbsp;<span class="num" id="3670871">10</span><span class="op" id="3670873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3670876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670879">return</span>&nbsp;<span class="num" id="3670886">16</span>&nbsp;<span class="comment" id="3670889">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="3670924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="3670927">func</span>&nbsp;<span class="op" id="3670932">(</span><span class="ident" id="3670933">s</span>&nbsp;<span class="op" id="3670935">*</span><span class="ident" id="3670936">Scanner</span><span class="op" id="3670943">)</span>&nbsp;<span class="ident" id="3670945">scanMantissa</span><span class="op" id="3670957">(</span><span class="ident" id="3670958">base</span>&nbsp;<span class="builtintype" id="3670963">int</span><span class="op" id="3670966">)</span>&nbsp;<span class="op" id="3670968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3670971">for</span>&nbsp;<span class="ident" id="3670975">digitVal</span><span class="op" id="3670983">(</span><span class="ident" id="3670984">s</span><span class="op" id="3670985">.</span><span class="ident" id="3670986">ch</span><span class="op" id="3670988">)</span>&nbsp;<span class="op" id="3670990">&lt;</span>&nbsp;<span class="ident" id="3670992">base</span>&nbsp;<span class="op" id="3670997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671001">s</span><span class="op" id="3671002">.</span><span class="ident" id="3671003">next</span><span class="op" id="3671007">(</span><span class="op" id="3671008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671011">}</span><br>
<span class="lineno"></span><span class="op" id="3671013">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="3671016">func</span>&nbsp;<span class="op" id="3671021">(</span><span class="ident" id="3671022">s</span>&nbsp;<span class="op" id="3671024">*</span><span class="ident" id="3671025">Scanner</span><span class="op" id="3671032">)</span>&nbsp;<span class="ident" id="3671034">scanNumber</span><span class="op" id="3671044">(</span><span class="ident" id="3671045">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="3671062">bool</span><span class="op" id="3671066">)</span>&nbsp;<span class="op" id="3671068">(</span><span class="ident" id="3671069">token</span><span class="op" id="3671074">.</span><span class="ident" id="3671075">Token</span><span class="op" id="3671080">,</span>&nbsp;<span class="builtintype" id="3671082">string</span><span class="op" id="3671088">)</span>&nbsp;<span class="op" id="3671090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671093">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671117">offs</span>&nbsp;<span class="op" id="3671122">:=</span>&nbsp;<span class="ident" id="3671125">s</span><span class="op" id="3671126">.</span><span class="ident" id="3671127">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671135">tok</span>&nbsp;<span class="op" id="3671139">:=</span>&nbsp;<span class="ident" id="3671142">token</span><span class="op" id="3671147">.</span><span class="ident" id="3671148">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671154">if</span>&nbsp;<span class="ident" id="3671157">seenDecimalPoint</span>&nbsp;<span class="op" id="3671174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671178">offs</span><span class="op" id="3671182">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671187">tok</span>&nbsp;<span class="op" id="3671191">=</span>&nbsp;<span class="ident" id="3671193">token</span><span class="op" id="3671198">.</span><span class="ident" id="3671199">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671207">s</span><span class="op" id="3671208">.</span><span class="ident" id="3671209">scanMantissa</span><span class="op" id="3671221">(</span><span class="num" id="3671222">10</span><span class="op" id="3671224">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671228">goto</span>&nbsp;<span class="ident" id="3671233">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671247">if</span>&nbsp;<span class="ident" id="3671250">s</span><span class="op" id="3671251">.</span><span class="ident" id="3671252">ch</span>&nbsp;<span class="op" id="3671255">==</span>&nbsp;<span class="string" id="3671258">&#39;0&#39;</span>&nbsp;<span class="op" id="3671262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671266">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671284">offs</span>&nbsp;<span class="op" id="3671289">:=</span>&nbsp;<span class="ident" id="3671292">s</span><span class="op" id="3671293">.</span><span class="ident" id="3671294">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671303">s</span><span class="op" id="3671304">.</span><span class="ident" id="3671305">next</span><span class="op" id="3671309">(</span><span class="op" id="3671310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671314">if</span>&nbsp;<span class="ident" id="3671317">s</span><span class="op" id="3671318">.</span><span class="ident" id="3671319">ch</span>&nbsp;<span class="op" id="3671322">==</span>&nbsp;<span class="string" id="3671325">&#39;x&#39;</span>&nbsp;<span class="op" id="3671329">||</span>&nbsp;<span class="ident" id="3671332">s</span><span class="op" id="3671333">.</span><span class="ident" id="3671334">ch</span>&nbsp;<span class="op" id="3671337">==</span>&nbsp;<span class="string" id="3671340">&#39;X&#39;</span>&nbsp;<span class="op" id="3671344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671349">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671371">s</span><span class="op" id="3671372">.</span><span class="ident" id="3671373">next</span><span class="op" id="3671377">(</span><span class="op" id="3671378">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671383">s</span><span class="op" id="3671384">.</span><span class="ident" id="3671385">scanMantissa</span><span class="op" id="3671397">(</span><span class="num" id="3671398">16</span><span class="op" id="3671400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671405">if</span>&nbsp;<span class="ident" id="3671408">s</span><span class="op" id="3671409">.</span><span class="ident" id="3671410">offset</span><span class="op" id="3671416">-</span><span class="ident" id="3671417">offs</span>&nbsp;<span class="op" id="3671422">&lt;=</span>&nbsp;<span class="num" id="3671425">2</span>&nbsp;<span class="op" id="3671427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671433">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671466">s</span><span class="op" id="3671467">.</span><span class="builtintype" id="3671468">error</span><span class="op" id="3671473">(</span><span class="ident" id="3671474">offs</span><span class="op" id="3671478">,</span>&nbsp;<span class="string" id="3671480">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="3671508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671513">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671517">}</span>&nbsp;<span class="keyword" id="3671519">else</span>&nbsp;<span class="op" id="3671524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671529">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671554">seenDecimalDigit</span>&nbsp;<span class="op" id="3671571">:=</span>&nbsp;<span class="builtintype" id="3671574">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671583">s</span><span class="op" id="3671584">.</span><span class="ident" id="3671585">scanMantissa</span><span class="op" id="3671597">(</span><span class="num" id="3671598">8</span><span class="op" id="3671599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671604">if</span>&nbsp;<span class="ident" id="3671607">s</span><span class="op" id="3671608">.</span><span class="ident" id="3671609">ch</span>&nbsp;<span class="op" id="3671612">==</span>&nbsp;<span class="string" id="3671615">&#39;8&#39;</span>&nbsp;<span class="op" id="3671619">||</span>&nbsp;<span class="ident" id="3671622">s</span><span class="op" id="3671623">.</span><span class="ident" id="3671624">ch</span>&nbsp;<span class="op" id="3671627">==</span>&nbsp;<span class="string" id="3671630">&#39;9&#39;</span>&nbsp;<span class="op" id="3671634">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671640">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671674">seenDecimalDigit</span>&nbsp;<span class="op" id="3671691">=</span>&nbsp;<span class="builtintype" id="3671693">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671702">s</span><span class="op" id="3671703">.</span><span class="ident" id="3671704">scanMantissa</span><span class="op" id="3671716">(</span><span class="num" id="3671717">10</span><span class="op" id="3671719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671729">if</span>&nbsp;<span class="ident" id="3671732">s</span><span class="op" id="3671733">.</span><span class="ident" id="3671734">ch</span>&nbsp;<span class="op" id="3671737">==</span>&nbsp;<span class="string" id="3671740">&#39;.&#39;</span>&nbsp;<span class="op" id="3671744">||</span>&nbsp;<span class="ident" id="3671747">s</span><span class="op" id="3671748">.</span><span class="ident" id="3671749">ch</span>&nbsp;<span class="op" id="3671752">==</span>&nbsp;<span class="string" id="3671755">&#39;e&#39;</span>&nbsp;<span class="op" id="3671759">||</span>&nbsp;<span class="ident" id="3671762">s</span><span class="op" id="3671763">.</span><span class="ident" id="3671764">ch</span>&nbsp;<span class="op" id="3671767">==</span>&nbsp;<span class="string" id="3671770">&#39;E&#39;</span>&nbsp;<span class="op" id="3671774">||</span>&nbsp;<span class="ident" id="3671777">s</span><span class="op" id="3671778">.</span><span class="ident" id="3671779">ch</span>&nbsp;<span class="op" id="3671782">==</span>&nbsp;<span class="string" id="3671785">&#39;i&#39;</span>&nbsp;<span class="op" id="3671789">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671795">goto</span>&nbsp;<span class="ident" id="3671800">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671817">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671833">if</span>&nbsp;<span class="ident" id="3671836">seenDecimalDigit</span>&nbsp;<span class="op" id="3671853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671859">s</span><span class="op" id="3671860">.</span><span class="builtintype" id="3671861">error</span><span class="op" id="3671866">(</span><span class="ident" id="3671867">offs</span><span class="op" id="3671871">,</span>&nbsp;<span class="string" id="3671873">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="3671895">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671908">goto</span>&nbsp;<span class="ident" id="3671913">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3671919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3671923">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671948">s</span><span class="op" id="3671949">.</span><span class="ident" id="3671950">scanMantissa</span><span class="op" id="3671962">(</span><span class="num" id="3671963">10</span><span class="op" id="3671965">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3671968">fraction</span><span class="op" id="3671976">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3671979">if</span>&nbsp;<span class="ident" id="3671982">s</span><span class="op" id="3671983">.</span><span class="ident" id="3671984">ch</span>&nbsp;<span class="op" id="3671987">==</span>&nbsp;<span class="string" id="3671990">&#39;.&#39;</span>&nbsp;<span class="op" id="3671994">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3671998">tok</span>&nbsp;<span class="op" id="3672002">=</span>&nbsp;<span class="ident" id="3672004">token</span><span class="op" id="3672009">.</span><span class="ident" id="3672010">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672018">s</span><span class="op" id="3672019">.</span><span class="ident" id="3672020">next</span><span class="op" id="3672024">(</span><span class="op" id="3672025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672029">s</span><span class="op" id="3672030">.</span><span class="ident" id="3672031">scanMantissa</span><span class="op" id="3672043">(</span><span class="num" id="3672044">10</span><span class="op" id="3672046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3672049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="3672052">exponent</span><span class="op" id="3672060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672063">if</span>&nbsp;<span class="ident" id="3672066">s</span><span class="op" id="3672067">.</span><span class="ident" id="3672068">ch</span>&nbsp;<span class="op" id="3672071">==</span>&nbsp;<span class="string" id="3672074">&#39;e&#39;</span>&nbsp;<span class="op" id="3672078">||</span>&nbsp;<span class="ident" id="3672081">s</span><span class="op" id="3672082">.</span><span class="ident" id="3672083">ch</span>&nbsp;<span class="op" id="3672086">==</span>&nbsp;<span class="string" id="3672089">&#39;E&#39;</span>&nbsp;<span class="op" id="3672093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672097">tok</span>&nbsp;<span class="op" id="3672101">=</span>&nbsp;<span class="ident" id="3672103">token</span><span class="op" id="3672108">.</span><span class="ident" id="3672109">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672117">s</span><span class="op" id="3672118">.</span><span class="ident" id="3672119">next</span><span class="op" id="3672123">(</span><span class="op" id="3672124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672128">if</span>&nbsp;<span class="ident" id="3672131">s</span><span class="op" id="3672132">.</span><span class="ident" id="3672133">ch</span>&nbsp;<span class="op" id="3672136">==</span>&nbsp;<span class="string" id="3672139">&#39;-&#39;</span>&nbsp;<span class="op" id="3672143">||</span>&nbsp;<span class="ident" id="3672146">s</span><span class="op" id="3672147">.</span><span class="ident" id="3672148">ch</span>&nbsp;<span class="op" id="3672151">==</span>&nbsp;<span class="string" id="3672154">&#39;+&#39;</span>&nbsp;<span class="op" id="3672158">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672163">s</span><span class="op" id="3672164">.</span><span class="ident" id="3672165">next</span><span class="op" id="3672169">(</span><span class="op" id="3672170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3672174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672178">s</span><span class="op" id="3672179">.</span><span class="ident" id="3672180">scanMantissa</span><span class="op" id="3672192">(</span><span class="num" id="3672193">10</span><span class="op" id="3672195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3672198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672202">if</span>&nbsp;<span class="ident" id="3672205">s</span><span class="op" id="3672206">.</span><span class="ident" id="3672207">ch</span>&nbsp;<span class="op" id="3672210">==</span>&nbsp;<span class="string" id="3672213">&#39;i&#39;</span>&nbsp;<span class="op" id="3672217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672221">tok</span>&nbsp;<span class="op" id="3672225">=</span>&nbsp;<span class="ident" id="3672227">token</span><span class="op" id="3672232">.</span><span class="ident" id="3672233">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672240">s</span><span class="op" id="3672241">.</span><span class="ident" id="3672242">next</span><span class="op" id="3672246">(</span><span class="op" id="3672247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3672250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="3672253">exit</span><span class="op" id="3672257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672260">return</span>&nbsp;<span class="ident" id="3672267">tok</span><span class="op" id="3672270">,</span>&nbsp;<span class="builtintype" id="3672272">string</span><span class="op" id="3672278">(</span><span class="ident" id="3672279">s</span><span class="op" id="3672280">.</span><span class="ident" id="3672281">src</span><span class="op" id="3672284">[</span><span class="ident" id="3672285">offs</span><span class="op" id="3672289">:</span><span class="ident" id="3672290">s</span><span class="op" id="3672291">.</span><span class="ident" id="3672292">offset</span><span class="op" id="3672298">]</span><span class="op" id="3672299">)</span><br>
<span class="lineno"></span><span class="op" id="3672301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3672304">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="3672371">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="3672442">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="3672507">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="3672527">func</span>&nbsp;<span class="op" id="3672532">(</span><span class="ident" id="3672533">s</span>&nbsp;<span class="op" id="3672535">*</span><span class="ident" id="3672536">Scanner</span><span class="op" id="3672543">)</span>&nbsp;<span class="ident" id="3672545">scanEscape</span><span class="op" id="3672555">(</span><span class="ident" id="3672556">quote</span>&nbsp;<span class="builtintype" id="3672562">rune</span><span class="op" id="3672566">)</span>&nbsp;<span class="builtintype" id="3672568">bool</span>&nbsp;<span class="op" id="3672573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672576">offs</span>&nbsp;<span class="op" id="3672581">:=</span>&nbsp;<span class="ident" id="3672584">s</span><span class="op" id="3672585">.</span><span class="ident" id="3672586">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672595">var</span>&nbsp;<span class="ident" id="3672599">n</span>&nbsp;<span class="builtintype" id="3672601">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672606">var</span>&nbsp;<span class="ident" id="3672610">base</span><span class="op" id="3672614">,</span>&nbsp;<span class="ident" id="3672616">max</span>&nbsp;<span class="builtintype" id="3672620">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672628">switch</span>&nbsp;<span class="ident" id="3672635">s</span><span class="op" id="3672636">.</span><span class="ident" id="3672637">ch</span>&nbsp;<span class="op" id="3672640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672643">case</span>&nbsp;<span class="string" id="3672648">&#39;a&#39;</span><span class="op" id="3672651">,</span>&nbsp;<span class="string" id="3672653">&#39;b&#39;</span><span class="op" id="3672656">,</span>&nbsp;<span class="string" id="3672658">&#39;f&#39;</span><span class="op" id="3672661">,</span>&nbsp;<span class="string" id="3672663">&#39;n&#39;</span><span class="op" id="3672666">,</span>&nbsp;<span class="string" id="3672668">&#39;r&#39;</span><span class="op" id="3672671">,</span>&nbsp;<span class="string" id="3672673">&#39;t&#39;</span><span class="op" id="3672676">,</span>&nbsp;<span class="string" id="3672678">&#39;v&#39;</span><span class="op" id="3672681">,</span>&nbsp;<span class="string" id="3672683">&#39;\\&#39;</span><span class="op" id="3672687">,</span>&nbsp;<span class="ident" id="3672689">quote</span><span class="op" id="3672694">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672698">s</span><span class="op" id="3672699">.</span><span class="ident" id="3672700">next</span><span class="op" id="3672704">(</span><span class="op" id="3672705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672709">return</span>&nbsp;<span class="builtintype" id="3672716">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672722">case</span>&nbsp;<span class="string" id="3672727">&#39;0&#39;</span><span class="op" id="3672730">,</span>&nbsp;<span class="string" id="3672732">&#39;1&#39;</span><span class="op" id="3672735">,</span>&nbsp;<span class="string" id="3672737">&#39;2&#39;</span><span class="op" id="3672740">,</span>&nbsp;<span class="string" id="3672742">&#39;3&#39;</span><span class="op" id="3672745">,</span>&nbsp;<span class="string" id="3672747">&#39;4&#39;</span><span class="op" id="3672750">,</span>&nbsp;<span class="string" id="3672752">&#39;5&#39;</span><span class="op" id="3672755">,</span>&nbsp;<span class="string" id="3672757">&#39;6&#39;</span><span class="op" id="3672760">,</span>&nbsp;<span class="string" id="3672762">&#39;7&#39;</span><span class="op" id="3672765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672769">n</span><span class="op" id="3672770">,</span>&nbsp;<span class="ident" id="3672772">base</span><span class="op" id="3672776">,</span>&nbsp;<span class="ident" id="3672778">max</span>&nbsp;<span class="op" id="3672782">=</span>&nbsp;<span class="num" id="3672784">3</span><span class="op" id="3672785">,</span>&nbsp;<span class="num" id="3672787">8</span><span class="op" id="3672788">,</span>&nbsp;<span class="num" id="3672790">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672795">case</span>&nbsp;<span class="string" id="3672800">&#39;x&#39;</span><span class="op" id="3672803">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672807">s</span><span class="op" id="3672808">.</span><span class="ident" id="3672809">next</span><span class="op" id="3672813">(</span><span class="op" id="3672814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672818">n</span><span class="op" id="3672819">,</span>&nbsp;<span class="ident" id="3672821">base</span><span class="op" id="3672825">,</span>&nbsp;<span class="ident" id="3672827">max</span>&nbsp;<span class="op" id="3672831">=</span>&nbsp;<span class="num" id="3672833">2</span><span class="op" id="3672834">,</span>&nbsp;<span class="num" id="3672836">16</span><span class="op" id="3672838">,</span>&nbsp;<span class="num" id="3672840">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672845">case</span>&nbsp;<span class="string" id="3672850">&#39;u&#39;</span><span class="op" id="3672853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672857">s</span><span class="op" id="3672858">.</span><span class="ident" id="3672859">next</span><span class="op" id="3672863">(</span><span class="op" id="3672864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672868">n</span><span class="op" id="3672869">,</span>&nbsp;<span class="ident" id="3672871">base</span><span class="op" id="3672875">,</span>&nbsp;<span class="ident" id="3672877">max</span>&nbsp;<span class="op" id="3672881">=</span>&nbsp;<span class="num" id="3672883">4</span><span class="op" id="3672884">,</span>&nbsp;<span class="num" id="3672886">16</span><span class="op" id="3672888">,</span>&nbsp;<span class="ident" id="3672890">unicode</span><span class="op" id="3672897">.</span><span class="ident" id="3672898">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672907">case</span>&nbsp;<span class="string" id="3672912">&#39;U&#39;</span><span class="op" id="3672915">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672919">s</span><span class="op" id="3672920">.</span><span class="ident" id="3672921">next</span><span class="op" id="3672925">(</span><span class="op" id="3672926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672930">n</span><span class="op" id="3672931">,</span>&nbsp;<span class="ident" id="3672933">base</span><span class="op" id="3672937">,</span>&nbsp;<span class="ident" id="3672939">max</span>&nbsp;<span class="op" id="3672943">=</span>&nbsp;<span class="num" id="3672945">8</span><span class="op" id="3672946">,</span>&nbsp;<span class="num" id="3672948">16</span><span class="op" id="3672950">,</span>&nbsp;<span class="ident" id="3672952">unicode</span><span class="op" id="3672959">.</span><span class="ident" id="3672960">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3672969">default</span><span class="op" id="3672976">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672980">msg</span>&nbsp;<span class="op" id="3672984">:=</span>&nbsp;<span class="string" id="3672987">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673015">if</span>&nbsp;<span class="ident" id="3673018">s</span><span class="op" id="3673019">.</span><span class="ident" id="3673020">ch</span>&nbsp;<span class="op" id="3673023">&lt;</span>&nbsp;<span class="num" id="3673025">0</span>&nbsp;<span class="op" id="3673027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673032">msg</span>&nbsp;<span class="op" id="3673036">=</span>&nbsp;<span class="string" id="3673038">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673077">s</span><span class="op" id="3673078">.</span><span class="builtintype" id="3673079">error</span><span class="op" id="3673084">(</span><span class="ident" id="3673085">offs</span><span class="op" id="3673089">,</span>&nbsp;<span class="ident" id="3673091">msg</span><span class="op" id="3673094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673098">return</span>&nbsp;<span class="builtintype" id="3673105">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673116">var</span>&nbsp;<span class="ident" id="3673120">x</span>&nbsp;<span class="builtintype" id="3673122">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673130">for</span>&nbsp;<span class="ident" id="3673134">n</span>&nbsp;<span class="op" id="3673136">&gt;</span>&nbsp;<span class="num" id="3673138">0</span>&nbsp;<span class="op" id="3673140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673144">d</span>&nbsp;<span class="op" id="3673146">:=</span>&nbsp;<span class="builtintype" id="3673149">uint32</span><span class="op" id="3673155">(</span><span class="ident" id="3673156">digitVal</span><span class="op" id="3673164">(</span><span class="ident" id="3673165">s</span><span class="op" id="3673166">.</span><span class="ident" id="3673167">ch</span><span class="op" id="3673169">)</span><span class="op" id="3673170">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673174">if</span>&nbsp;<span class="ident" id="3673177">d</span>&nbsp;<span class="op" id="3673179">&gt;=</span>&nbsp;<span class="ident" id="3673182">base</span>&nbsp;<span class="op" id="3673187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673192">msg</span>&nbsp;<span class="op" id="3673196">:=</span>&nbsp;<span class="ident" id="3673199">fmt</span><span class="op" id="3673202">.</span><span class="ident" id="3673203">Sprintf</span><span class="op" id="3673210">(</span><span class="string" id="3673211">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="3673253">,</span>&nbsp;<span class="ident" id="3673255">s</span><span class="op" id="3673256">.</span><span class="ident" id="3673257">ch</span><span class="op" id="3673259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673264">if</span>&nbsp;<span class="ident" id="3673267">s</span><span class="op" id="3673268">.</span><span class="ident" id="3673269">ch</span>&nbsp;<span class="op" id="3673272">&lt;</span>&nbsp;<span class="num" id="3673274">0</span>&nbsp;<span class="op" id="3673276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673282">msg</span>&nbsp;<span class="op" id="3673286">=</span>&nbsp;<span class="string" id="3673288">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673324">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673329">s</span><span class="op" id="3673330">.</span><span class="builtintype" id="3673331">error</span><span class="op" id="3673336">(</span><span class="ident" id="3673337">s</span><span class="op" id="3673338">.</span><span class="ident" id="3673339">offset</span><span class="op" id="3673345">,</span>&nbsp;<span class="ident" id="3673347">msg</span><span class="op" id="3673350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673355">return</span>&nbsp;<span class="builtintype" id="3673362">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673374">x</span>&nbsp;<span class="op" id="3673376">=</span>&nbsp;<span class="ident" id="3673378">x</span><span class="op" id="3673379">*</span><span class="ident" id="3673380">base</span>&nbsp;<span class="op" id="3673385">+</span>&nbsp;<span class="ident" id="3673387">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673391">s</span><span class="op" id="3673392">.</span><span class="ident" id="3673393">next</span><span class="op" id="3673397">(</span><span class="op" id="3673398">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673402">n</span><span class="op" id="3673403">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673411">if</span>&nbsp;<span class="ident" id="3673414">x</span>&nbsp;<span class="op" id="3673416">&gt;</span>&nbsp;<span class="ident" id="3673418">max</span>&nbsp;<span class="op" id="3673422">||</span>&nbsp;<span class="num" id="3673425">0xD800</span>&nbsp;<span class="op" id="3673432">&lt;=</span>&nbsp;<span class="ident" id="3673435">x</span>&nbsp;<span class="op" id="3673437">&amp;&amp;</span>&nbsp;<span class="ident" id="3673440">x</span>&nbsp;<span class="op" id="3673442">&lt;</span>&nbsp;<span class="num" id="3673444">0xE000</span>&nbsp;<span class="op" id="3673451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673455">s</span><span class="op" id="3673456">.</span><span class="builtintype" id="3673457">error</span><span class="op" id="3673462">(</span><span class="ident" id="3673463">offs</span><span class="op" id="3673467">,</span>&nbsp;<span class="string" id="3673469">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="3673516">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673520">return</span>&nbsp;<span class="builtintype" id="3673527">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673538">return</span>&nbsp;<span class="builtintype" id="3673545">true</span><br>
<span class="lineno"></span><span class="op" id="3673550">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="3673553">func</span>&nbsp;<span class="op" id="3673558">(</span><span class="ident" id="3673559">s</span>&nbsp;<span class="op" id="3673561">*</span><span class="ident" id="3673562">Scanner</span><span class="op" id="3673569">)</span>&nbsp;<span class="ident" id="3673571">scanRune</span><span class="op" id="3673579">(</span><span class="op" id="3673580">)</span>&nbsp;<span class="builtintype" id="3673582">string</span>&nbsp;<span class="op" id="3673589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3673592">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673626">offs</span>&nbsp;<span class="op" id="3673631">:=</span>&nbsp;<span class="ident" id="3673634">s</span><span class="op" id="3673635">.</span><span class="ident" id="3673636">offset</span>&nbsp;<span class="op" id="3673643">-</span>&nbsp;<span class="num" id="3673645">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673649">valid</span>&nbsp;<span class="op" id="3673655">:=</span>&nbsp;<span class="builtintype" id="3673658">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673664">n</span>&nbsp;<span class="op" id="3673666">:=</span>&nbsp;<span class="num" id="3673669">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673672">for</span>&nbsp;<span class="op" id="3673676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673680">ch</span>&nbsp;<span class="op" id="3673683">:=</span>&nbsp;<span class="ident" id="3673686">s</span><span class="op" id="3673687">.</span><span class="ident" id="3673688">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673693">if</span>&nbsp;<span class="ident" id="3673696">ch</span>&nbsp;<span class="op" id="3673699">==</span>&nbsp;<span class="string" id="3673702">&#39;\n&#39;</span>&nbsp;<span class="op" id="3673707">||</span>&nbsp;<span class="ident" id="3673710">ch</span>&nbsp;<span class="op" id="3673713">&lt;</span>&nbsp;<span class="num" id="3673715">0</span>&nbsp;<span class="op" id="3673717">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3673722">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673775">if</span>&nbsp;<span class="ident" id="3673778">valid</span>&nbsp;<span class="op" id="3673784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673790">s</span><span class="op" id="3673791">.</span><span class="builtintype" id="3673792">error</span><span class="op" id="3673797">(</span><span class="ident" id="3673798">offs</span><span class="op" id="3673802">,</span>&nbsp;<span class="string" id="3673804">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3673833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673839">valid</span>&nbsp;<span class="op" id="3673845">=</span>&nbsp;<span class="builtintype" id="3673847">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673856">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673861">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673873">s</span><span class="op" id="3673874">.</span><span class="ident" id="3673875">next</span><span class="op" id="3673879">(</span><span class="op" id="3673880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673884">if</span>&nbsp;<span class="ident" id="3673887">ch</span>&nbsp;<span class="op" id="3673890">==</span>&nbsp;<span class="string" id="3673893">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="3673898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673903">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673915">n</span><span class="op" id="3673916">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673921">if</span>&nbsp;<span class="ident" id="3673924">ch</span>&nbsp;<span class="op" id="3673927">==</span>&nbsp;<span class="string" id="3673930">&#39;\\&#39;</span>&nbsp;<span class="op" id="3673935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3673940">if</span>&nbsp;<span class="op" id="3673943">!</span><span class="ident" id="3673944">s</span><span class="op" id="3673945">.</span><span class="ident" id="3673946">scanEscape</span><span class="op" id="3673956">(</span><span class="string" id="3673957">&#39;\&#39;&#39;</span><span class="op" id="3673961">)</span>&nbsp;<span class="op" id="3673963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3673969">valid</span>&nbsp;<span class="op" id="3673975">=</span>&nbsp;<span class="builtintype" id="3673977">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3673986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3673991">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674037">if</span>&nbsp;<span class="ident" id="3674040">valid</span>&nbsp;<span class="op" id="3674046">&amp;&amp;</span>&nbsp;<span class="ident" id="3674049">n</span>&nbsp;<span class="op" id="3674051">!=</span>&nbsp;<span class="num" id="3674054">1</span>&nbsp;<span class="op" id="3674056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674060">s</span><span class="op" id="3674061">.</span><span class="builtintype" id="3674062">error</span><span class="op" id="3674067">(</span><span class="ident" id="3674068">offs</span><span class="op" id="3674072">,</span>&nbsp;<span class="string" id="3674074">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="3674096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674103">return</span>&nbsp;<span class="builtintype" id="3674110">string</span><span class="op" id="3674116">(</span><span class="ident" id="3674117">s</span><span class="op" id="3674118">.</span><span class="ident" id="3674119">src</span><span class="op" id="3674122">[</span><span class="ident" id="3674123">offs</span><span class="op" id="3674127">:</span><span class="ident" id="3674128">s</span><span class="op" id="3674129">.</span><span class="ident" id="3674130">offset</span><span class="op" id="3674136">]</span><span class="op" id="3674137">)</span><br>
<span class="lineno">455</span><span class="op" id="3674139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3674142">func</span>&nbsp;<span class="op" id="3674147">(</span><span class="ident" id="3674148">s</span>&nbsp;<span class="op" id="3674150">*</span><span class="ident" id="3674151">Scanner</span><span class="op" id="3674158">)</span>&nbsp;<span class="ident" id="3674160">scanString</span><span class="op" id="3674170">(</span><span class="op" id="3674171">)</span>&nbsp;<span class="builtintype" id="3674173">string</span>&nbsp;<span class="op" id="3674180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3674183">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674216">offs</span>&nbsp;<span class="op" id="3674221">:=</span>&nbsp;<span class="ident" id="3674224">s</span><span class="op" id="3674225">.</span><span class="ident" id="3674226">offset</span>&nbsp;<span class="op" id="3674233">-</span>&nbsp;<span class="num" id="3674235">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674239">for</span>&nbsp;<span class="op" id="3674243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674247">ch</span>&nbsp;<span class="op" id="3674250">:=</span>&nbsp;<span class="ident" id="3674253">s</span><span class="op" id="3674254">.</span><span class="ident" id="3674255">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674260">if</span>&nbsp;<span class="ident" id="3674263">ch</span>&nbsp;<span class="op" id="3674266">==</span>&nbsp;<span class="string" id="3674269">&#39;\n&#39;</span>&nbsp;<span class="op" id="3674274">||</span>&nbsp;<span class="ident" id="3674277">ch</span>&nbsp;<span class="op" id="3674280">&lt;</span>&nbsp;<span class="num" id="3674282">0</span>&nbsp;<span class="op" id="3674284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674289">s</span><span class="op" id="3674290">.</span><span class="builtintype" id="3674291">error</span><span class="op" id="3674296">(</span><span class="ident" id="3674297">offs</span><span class="op" id="3674301">,</span>&nbsp;<span class="string" id="3674303">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3674334">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674339">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674351">s</span><span class="op" id="3674352">.</span><span class="ident" id="3674353">next</span><span class="op" id="3674357">(</span><span class="op" id="3674358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674362">if</span>&nbsp;<span class="ident" id="3674365">ch</span>&nbsp;<span class="op" id="3674368">==</span>&nbsp;<span class="string" id="3674371">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3674375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674380">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674392">if</span>&nbsp;<span class="ident" id="3674395">ch</span>&nbsp;<span class="op" id="3674398">==</span>&nbsp;<span class="string" id="3674401">&#39;\\&#39;</span>&nbsp;<span class="op" id="3674406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674411">s</span><span class="op" id="3674412">.</span><span class="ident" id="3674413">scanEscape</span><span class="op" id="3674423">(</span><span class="string" id="3674424">&#39;&#34;&#39;</span><span class="op" id="3674427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674434">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674438">return</span>&nbsp;<span class="builtintype" id="3674445">string</span><span class="op" id="3674451">(</span><span class="ident" id="3674452">s</span><span class="op" id="3674453">.</span><span class="ident" id="3674454">src</span><span class="op" id="3674457">[</span><span class="ident" id="3674458">offs</span><span class="op" id="3674462">:</span><span class="ident" id="3674463">s</span><span class="op" id="3674464">.</span><span class="ident" id="3674465">offset</span><span class="op" id="3674471">]</span><span class="op" id="3674472">)</span><br>
<span class="lineno"></span><span class="op" id="3674474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3674477">func</span>&nbsp;<span class="ident" id="3674482">stripCR</span><span class="op" id="3674489">(</span><span class="ident" id="3674490">b</span>&nbsp;<span class="op" id="3674492">[</span><span class="op" id="3674493">]</span><span class="builtintype" id="3674494">byte</span><span class="op" id="3674498">)</span>&nbsp;<span class="op" id="3674500">[</span><span class="op" id="3674501">]</span><span class="builtintype" id="3674502">byte</span>&nbsp;<span class="op" id="3674507">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674510">c</span>&nbsp;<span class="op" id="3674512">:=</span>&nbsp;<span class="builtinfunc" id="3674515">make</span><span class="op" id="3674519">(</span><span class="op" id="3674520">[</span><span class="op" id="3674521">]</span><span class="builtintype" id="3674522">byte</span><span class="op" id="3674526">,</span>&nbsp;<span class="builtinfunc" id="3674528">len</span><span class="op" id="3674531">(</span><span class="ident" id="3674532">b</span><span class="op" id="3674533">)</span><span class="op" id="3674534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674537">i</span>&nbsp;<span class="op" id="3674539">:=</span>&nbsp;<span class="num" id="3674542">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674545">for</span>&nbsp;<span class="ident" id="3674549">_</span><span class="op" id="3674550">,</span>&nbsp;<span class="ident" id="3674552">ch</span>&nbsp;<span class="op" id="3674555">:=</span>&nbsp;<span class="keyword" id="3674558">range</span>&nbsp;<span class="ident" id="3674564">b</span>&nbsp;<span class="op" id="3674566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674570">if</span>&nbsp;<span class="ident" id="3674573">ch</span>&nbsp;<span class="op" id="3674576">!=</span>&nbsp;<span class="string" id="3674579">&#39;\r&#39;</span>&nbsp;<span class="op" id="3674584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674589">c</span><span class="op" id="3674590">[</span><span class="ident" id="3674591">i</span><span class="op" id="3674592">]</span>&nbsp;<span class="op" id="3674594">=</span>&nbsp;<span class="ident" id="3674596">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674602">i</span><span class="op" id="3674603">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674614">return</span>&nbsp;<span class="ident" id="3674621">c</span><span class="op" id="3674622">[</span><span class="op" id="3674623">:</span><span class="ident" id="3674624">i</span><span class="op" id="3674625">]</span><br>
<span class="lineno"></span><span class="op" id="3674627">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="3674630">func</span>&nbsp;<span class="op" id="3674635">(</span><span class="ident" id="3674636">s</span>&nbsp;<span class="op" id="3674638">*</span><span class="ident" id="3674639">Scanner</span><span class="op" id="3674646">)</span>&nbsp;<span class="ident" id="3674648">scanRawString</span><span class="op" id="3674661">(</span><span class="op" id="3674662">)</span>&nbsp;<span class="builtintype" id="3674664">string</span>&nbsp;<span class="op" id="3674671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3674674">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674707">offs</span>&nbsp;<span class="op" id="3674712">:=</span>&nbsp;<span class="ident" id="3674715">s</span><span class="op" id="3674716">.</span><span class="ident" id="3674717">offset</span>&nbsp;<span class="op" id="3674724">-</span>&nbsp;<span class="num" id="3674726">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674730">hasCR</span>&nbsp;<span class="op" id="3674736">:=</span>&nbsp;<span class="builtintype" id="3674739">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674746">for</span>&nbsp;<span class="op" id="3674750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674754">ch</span>&nbsp;<span class="op" id="3674757">:=</span>&nbsp;<span class="ident" id="3674760">s</span><span class="op" id="3674761">.</span><span class="ident" id="3674762">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674767">if</span>&nbsp;<span class="ident" id="3674770">ch</span>&nbsp;<span class="op" id="3674773">&lt;</span>&nbsp;<span class="num" id="3674775">0</span>&nbsp;<span class="op" id="3674777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674782">s</span><span class="op" id="3674783">.</span><span class="builtintype" id="3674784">error</span><span class="op" id="3674789">(</span><span class="ident" id="3674790">offs</span><span class="op" id="3674794">,</span>&nbsp;<span class="string" id="3674796">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3674831">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674836">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674848">s</span><span class="op" id="3674849">.</span><span class="ident" id="3674850">next</span><span class="op" id="3674854">(</span><span class="op" id="3674855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674859">if</span>&nbsp;<span class="ident" id="3674862">ch</span>&nbsp;<span class="op" id="3674865">==</span>&nbsp;<span class="string" id="3674868">&#39;`&#39;</span>&nbsp;<span class="op" id="3674872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674877">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674889">if</span>&nbsp;<span class="ident" id="3674892">ch</span>&nbsp;<span class="op" id="3674895">==</span>&nbsp;<span class="string" id="3674898">&#39;\r&#39;</span>&nbsp;<span class="op" id="3674903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674908">hasCR</span>&nbsp;<span class="op" id="3674914">=</span>&nbsp;<span class="builtintype" id="3674916">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674926">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674930">lit</span>&nbsp;<span class="op" id="3674934">:=</span>&nbsp;<span class="ident" id="3674937">s</span><span class="op" id="3674938">.</span><span class="ident" id="3674939">src</span><span class="op" id="3674942">[</span><span class="ident" id="3674943">offs</span><span class="op" id="3674947">:</span><span class="ident" id="3674948">s</span><span class="op" id="3674949">.</span><span class="ident" id="3674950">offset</span><span class="op" id="3674956">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674959">if</span>&nbsp;<span class="ident" id="3674962">hasCR</span>&nbsp;<span class="op" id="3674968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3674972">lit</span>&nbsp;<span class="op" id="3674976">=</span>&nbsp;<span class="ident" id="3674978">stripCR</span><span class="op" id="3674985">(</span><span class="ident" id="3674986">lit</span><span class="op" id="3674989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3674992">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3674996">return</span>&nbsp;<span class="builtintype" id="3675003">string</span><span class="op" id="3675009">(</span><span class="ident" id="3675010">lit</span><span class="op" id="3675013">)</span><br>
<span class="lineno"></span><span class="op" id="3675015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3675018">func</span>&nbsp;<span class="op" id="3675023">(</span><span class="ident" id="3675024">s</span>&nbsp;<span class="op" id="3675026">*</span><span class="ident" id="3675027">Scanner</span><span class="op" id="3675034">)</span>&nbsp;<span class="ident" id="3675036">skipWhitespace</span><span class="op" id="3675050">(</span><span class="op" id="3675051">)</span>&nbsp;<span class="op" id="3675053">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675056">for</span>&nbsp;<span class="ident" id="3675060">s</span><span class="op" id="3675061">.</span><span class="ident" id="3675062">ch</span>&nbsp;<span class="op" id="3675065">==</span>&nbsp;<span class="string" id="3675068">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3675072">||</span>&nbsp;<span class="ident" id="3675075">s</span><span class="op" id="3675076">.</span><span class="ident" id="3675077">ch</span>&nbsp;<span class="op" id="3675080">==</span>&nbsp;<span class="string" id="3675083">&#39;\t&#39;</span>&nbsp;<span class="op" id="3675088">||</span>&nbsp;<span class="ident" id="3675091">s</span><span class="op" id="3675092">.</span><span class="ident" id="3675093">ch</span>&nbsp;<span class="op" id="3675096">==</span>&nbsp;<span class="string" id="3675099">&#39;\n&#39;</span>&nbsp;<span class="op" id="3675104">&amp;&amp;</span>&nbsp;<span class="op" id="3675107">!</span><span class="ident" id="3675108">s</span><span class="op" id="3675109">.</span><span class="ident" id="3675110">insertSemi</span>&nbsp;<span class="op" id="3675121">||</span>&nbsp;<span class="ident" id="3675124">s</span><span class="op" id="3675125">.</span><span class="ident" id="3675126">ch</span>&nbsp;<span class="op" id="3675129">==</span>&nbsp;<span class="string" id="3675132">&#39;\r&#39;</span>&nbsp;<span class="op" id="3675137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3675141">s</span><span class="op" id="3675142">.</span><span class="ident" id="3675143">next</span><span class="op" id="3675147">(</span><span class="op" id="3675148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3675151">}</span><br>
<span class="lineno"></span><span class="op" id="3675153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="3675156">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="3675227">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="3675299">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="3675362">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="3675431">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="3675498">func</span>&nbsp;<span class="op" id="3675503">(</span><span class="ident" id="3675504">s</span>&nbsp;<span class="op" id="3675506">*</span><span class="ident" id="3675507">Scanner</span><span class="op" id="3675514">)</span>&nbsp;<span class="ident" id="3675516">switch2</span><span class="op" id="3675523">(</span><span class="ident" id="3675524">tok0</span><span class="op" id="3675528">,</span>&nbsp;<span class="ident" id="3675530">tok1</span>&nbsp;<span class="ident" id="3675535">token</span><span class="op" id="3675540">.</span><span class="ident" id="3675541">Token</span><span class="op" id="3675546">)</span>&nbsp;<span class="ident" id="3675548">token</span><span class="op" id="3675553">.</span><span class="ident" id="3675554">Token</span>&nbsp;<span class="op" id="3675560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675563">if</span>&nbsp;<span class="ident" id="3675566">s</span><span class="op" id="3675567">.</span><span class="ident" id="3675568">ch</span>&nbsp;<span class="op" id="3675571">==</span>&nbsp;<span class="string" id="3675574">&#39;=&#39;</span>&nbsp;<span class="op" id="3675578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3675582">s</span><span class="op" id="3675583">.</span><span class="ident" id="3675584">next</span><span class="op" id="3675588">(</span><span class="op" id="3675589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675593">return</span>&nbsp;<span class="ident" id="3675600">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3675606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675609">return</span>&nbsp;<span class="ident" id="3675616">tok0</span><br>
<span class="lineno"></span><span class="op" id="3675621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3675624">func</span>&nbsp;<span class="op" id="3675629">(</span><span class="ident" id="3675630">s</span>&nbsp;<span class="op" id="3675632">*</span><span class="ident" id="3675633">Scanner</span><span class="op" id="3675640">)</span>&nbsp;<span class="ident" id="3675642">switch3</span><span class="op" id="3675649">(</span><span class="ident" id="3675650">tok0</span><span class="op" id="3675654">,</span>&nbsp;<span class="ident" id="3675656">tok1</span>&nbsp;<span class="ident" id="3675661">token</span><span class="op" id="3675666">.</span><span class="ident" id="3675667">Token</span><span class="op" id="3675672">,</span>&nbsp;<span class="ident" id="3675674">ch2</span>&nbsp;<span class="builtintype" id="3675678">rune</span><span class="op" id="3675682">,</span>&nbsp;<span class="ident" id="3675684">tok2</span>&nbsp;<span class="ident" id="3675689">token</span><span class="op" id="3675694">.</span><span class="ident" id="3675695">Token</span><span class="op" id="3675700">)</span>&nbsp;<span class="ident" id="3675702">token</span><span class="op" id="3675707">.</span><span class="ident" id="3675708">Token</span>&nbsp;<span class="op" id="3675714">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675717">if</span>&nbsp;<span class="ident" id="3675720">s</span><span class="op" id="3675721">.</span><span class="ident" id="3675722">ch</span>&nbsp;<span class="op" id="3675725">==</span>&nbsp;<span class="string" id="3675728">&#39;=&#39;</span>&nbsp;<span class="op" id="3675732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3675736">s</span><span class="op" id="3675737">.</span><span class="ident" id="3675738">next</span><span class="op" id="3675742">(</span><span class="op" id="3675743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675747">return</span>&nbsp;<span class="ident" id="3675754">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3675760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675763">if</span>&nbsp;<span class="ident" id="3675766">s</span><span class="op" id="3675767">.</span><span class="ident" id="3675768">ch</span>&nbsp;<span class="op" id="3675771">==</span>&nbsp;<span class="ident" id="3675774">ch2</span>&nbsp;<span class="op" id="3675778">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3675782">s</span><span class="op" id="3675783">.</span><span class="ident" id="3675784">next</span><span class="op" id="3675788">(</span><span class="op" id="3675789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675793">return</span>&nbsp;<span class="ident" id="3675800">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3675806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675809">return</span>&nbsp;<span class="ident" id="3675816">tok0</span><br>
<span class="lineno"></span><span class="op" id="3675821">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="3675824">func</span>&nbsp;<span class="op" id="3675829">(</span><span class="ident" id="3675830">s</span>&nbsp;<span class="op" id="3675832">*</span><span class="ident" id="3675833">Scanner</span><span class="op" id="3675840">)</span>&nbsp;<span class="ident" id="3675842">switch4</span><span class="op" id="3675849">(</span><span class="ident" id="3675850">tok0</span><span class="op" id="3675854">,</span>&nbsp;<span class="ident" id="3675856">tok1</span>&nbsp;<span class="ident" id="3675861">token</span><span class="op" id="3675866">.</span><span class="ident" id="3675867">Token</span><span class="op" id="3675872">,</span>&nbsp;<span class="ident" id="3675874">ch2</span>&nbsp;<span class="builtintype" id="3675878">rune</span><span class="op" id="3675882">,</span>&nbsp;<span class="ident" id="3675884">tok2</span><span class="op" id="3675888">,</span>&nbsp;<span class="ident" id="3675890">tok3</span>&nbsp;<span class="ident" id="3675895">token</span><span class="op" id="3675900">.</span><span class="ident" id="3675901">Token</span><span class="op" id="3675906">)</span>&nbsp;<span class="ident" id="3675908">token</span><span class="op" id="3675913">.</span><span class="ident" id="3675914">Token</span>&nbsp;<span class="op" id="3675920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675923">if</span>&nbsp;<span class="ident" id="3675926">s</span><span class="op" id="3675927">.</span><span class="ident" id="3675928">ch</span>&nbsp;<span class="op" id="3675931">==</span>&nbsp;<span class="string" id="3675934">&#39;=&#39;</span>&nbsp;<span class="op" id="3675938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3675942">s</span><span class="op" id="3675943">.</span><span class="ident" id="3675944">next</span><span class="op" id="3675948">(</span><span class="op" id="3675949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675953">return</span>&nbsp;<span class="ident" id="3675960">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3675966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675969">if</span>&nbsp;<span class="ident" id="3675972">s</span><span class="op" id="3675973">.</span><span class="ident" id="3675974">ch</span>&nbsp;<span class="op" id="3675977">==</span>&nbsp;<span class="ident" id="3675980">ch2</span>&nbsp;<span class="op" id="3675984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3675988">s</span><span class="op" id="3675989">.</span><span class="ident" id="3675990">next</span><span class="op" id="3675994">(</span><span class="op" id="3675995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3675999">if</span>&nbsp;<span class="ident" id="3676002">s</span><span class="op" id="3676003">.</span><span class="ident" id="3676004">ch</span>&nbsp;<span class="op" id="3676007">==</span>&nbsp;<span class="string" id="3676010">&#39;=&#39;</span>&nbsp;<span class="op" id="3676014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3676019">s</span><span class="op" id="3676020">.</span><span class="ident" id="3676021">next</span><span class="op" id="3676025">(</span><span class="op" id="3676026">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3676031">return</span>&nbsp;<span class="ident" id="3676038">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3676045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3676049">return</span>&nbsp;<span class="ident" id="3676056">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3676062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3676065">return</span>&nbsp;<span class="ident" id="3676072">tok0</span><br>
<span class="lineno">565</span><span class="op" id="3676077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3676080">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="3676152">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3676224">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="3676238">//</span><br>
<span class="lineno"></span><span class="comment" id="3676241">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="3676317">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3676395">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3676427">//</span><br>
<span class="lineno">575</span><span class="comment" id="3676430">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="3676504">//</span><br>
<span class="lineno"></span><span class="comment" id="3676507">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="3676570">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="3676639">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="3676705">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="3676716">//</span><br>
<span class="lineno"></span><span class="comment" id="3676719">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3676788">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="3676812">//</span><br>
<span class="lineno">585</span><span class="comment" id="3676815">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3676876">//</span><br>
<span class="lineno"></span><span class="comment" id="3676879">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3676943">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="3677006">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="3677069">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3677131">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="3677193">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="3677246">//</span><br>
<span class="lineno"></span><span class="comment" id="3677249">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="3677309">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="3677369">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="3677407">//</span><br>
<span class="lineno"></span><span class="keyword" id="3677410">func</span>&nbsp;<span class="op" id="3677415">(</span><span class="ident" id="3677416">s</span>&nbsp;<span class="op" id="3677418">*</span><span class="ident" id="3677419">Scanner</span><span class="op" id="3677426">)</span>&nbsp;<span class="ident" id="3677428">Scan</span><span class="op" id="3677432">(</span><span class="op" id="3677433">)</span>&nbsp;<span class="op" id="3677435">(</span><span class="ident" id="3677436">pos</span>&nbsp;<span class="ident" id="3677440">token</span><span class="op" id="3677445">.</span><span class="ident" id="3677446">Pos</span><span class="op" id="3677449">,</span>&nbsp;<span class="ident" id="3677451">tok</span>&nbsp;<span class="ident" id="3677455">token</span><span class="op" id="3677460">.</span><span class="ident" id="3677461">Token</span><span class="op" id="3677466">,</span>&nbsp;<span class="ident" id="3677468">lit</span>&nbsp;<span class="builtintype" id="3677472">string</span><span class="op" id="3677478">)</span>&nbsp;<span class="op" id="3677480">{</span><br>
<span class="lineno"></span><span class="ident" id="3677482">scanAgain</span><span class="op" id="3677491">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677494">s</span><span class="op" id="3677495">.</span><span class="ident" id="3677496">skipWhitespace</span><span class="op" id="3677510">(</span><span class="op" id="3677511">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3677515">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677539">pos</span>&nbsp;<span class="op" id="3677543">=</span>&nbsp;<span class="ident" id="3677545">s</span><span class="op" id="3677546">.</span><span class="ident" id="3677547">file</span><span class="op" id="3677551">.</span><span class="ident" id="3677552">Pos</span><span class="op" id="3677555">(</span><span class="ident" id="3677556">s</span><span class="op" id="3677557">.</span><span class="ident" id="3677558">offset</span><span class="op" id="3677564">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3677568">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677594">insertSemi</span>&nbsp;<span class="op" id="3677605">:=</span>&nbsp;<span class="builtintype" id="3677608">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3677615">switch</span>&nbsp;<span class="ident" id="3677622">ch</span>&nbsp;<span class="op" id="3677625">:=</span>&nbsp;<span class="ident" id="3677628">s</span><span class="op" id="3677629">.</span><span class="ident" id="3677630">ch</span><span class="op" id="3677632">;</span>&nbsp;<span class="op" id="3677634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3677637">case</span>&nbsp;<span class="ident" id="3677642">isLetter</span><span class="op" id="3677650">(</span><span class="ident" id="3677651">ch</span><span class="op" id="3677653">)</span><span class="op" id="3677654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677658">lit</span>&nbsp;<span class="op" id="3677662">=</span>&nbsp;<span class="ident" id="3677664">s</span><span class="op" id="3677665">.</span><span class="ident" id="3677666">scanIdentifier</span><span class="op" id="3677680">(</span><span class="op" id="3677681">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3677685">if</span>&nbsp;<span class="builtinfunc" id="3677688">len</span><span class="op" id="3677691">(</span><span class="ident" id="3677692">lit</span><span class="op" id="3677695">)</span>&nbsp;<span class="op" id="3677697">&gt;</span>&nbsp;<span class="num" id="3677699">1</span>&nbsp;<span class="op" id="3677701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3677706">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677773">tok</span>&nbsp;<span class="op" id="3677777">=</span>&nbsp;<span class="ident" id="3677779">token</span><span class="op" id="3677784">.</span><span class="ident" id="3677785">Lookup</span><span class="op" id="3677791">(</span><span class="ident" id="3677792">lit</span><span class="op" id="3677795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3677800">switch</span>&nbsp;<span class="ident" id="3677807">tok</span>&nbsp;<span class="op" id="3677811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3677816">case</span>&nbsp;<span class="ident" id="3677821">token</span><span class="op" id="3677826">.</span><span class="ident" id="3677827">IDENT</span><span class="op" id="3677832">,</span>&nbsp;<span class="ident" id="3677834">token</span><span class="op" id="3677839">.</span><span class="ident" id="3677840">BREAK</span><span class="op" id="3677845">,</span>&nbsp;<span class="ident" id="3677847">token</span><span class="op" id="3677852">.</span><span class="ident" id="3677853">CONTINUE</span><span class="op" id="3677861">,</span>&nbsp;<span class="ident" id="3677863">token</span><span class="op" id="3677868">.</span><span class="ident" id="3677869">FALLTHROUGH</span><span class="op" id="3677880">,</span>&nbsp;<span class="ident" id="3677882">token</span><span class="op" id="3677887">.</span><span class="ident" id="3677888">RETURN</span><span class="op" id="3677894">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677900">insertSemi</span>&nbsp;<span class="op" id="3677911">=</span>&nbsp;<span class="builtintype" id="3677913">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3677921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3677925">}</span>&nbsp;<span class="keyword" id="3677927">else</span>&nbsp;<span class="op" id="3677932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677937">insertSemi</span>&nbsp;<span class="op" id="3677948">=</span>&nbsp;<span class="builtintype" id="3677950">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3677958">tok</span>&nbsp;<span class="op" id="3677962">=</span>&nbsp;<span class="ident" id="3677964">token</span><span class="op" id="3677969">.</span><span class="ident" id="3677970">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3677978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3677981">case</span>&nbsp;<span class="string" id="3677986">&#39;0&#39;</span>&nbsp;<span class="op" id="3677990">&lt;=</span>&nbsp;<span class="ident" id="3677993">ch</span>&nbsp;<span class="op" id="3677996">&amp;&amp;</span>&nbsp;<span class="ident" id="3677999">ch</span>&nbsp;<span class="op" id="3678002">&lt;=</span>&nbsp;<span class="string" id="3678005">&#39;9&#39;</span><span class="op" id="3678008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678012">insertSemi</span>&nbsp;<span class="op" id="3678023">=</span>&nbsp;<span class="builtintype" id="3678025">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678032">tok</span><span class="op" id="3678035">,</span>&nbsp;<span class="ident" id="3678037">lit</span>&nbsp;<span class="op" id="3678041">=</span>&nbsp;<span class="ident" id="3678043">s</span><span class="op" id="3678044">.</span><span class="ident" id="3678045">scanNumber</span><span class="op" id="3678055">(</span><span class="builtintype" id="3678056">false</span><span class="op" id="3678061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678064">default</span><span class="op" id="3678071">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678075">s</span><span class="op" id="3678076">.</span><span class="ident" id="3678077">next</span><span class="op" id="3678081">(</span><span class="op" id="3678082">)</span>&nbsp;<span class="comment" id="3678084">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678110">switch</span>&nbsp;<span class="ident" id="3678117">ch</span>&nbsp;<span class="op" id="3678120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678124">case</span>&nbsp;<span class="op" id="3678129">-</span><span class="num" id="3678130">1</span><span class="op" id="3678131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678136">if</span>&nbsp;<span class="ident" id="3678139">s</span><span class="op" id="3678140">.</span><span class="ident" id="3678141">insertSemi</span>&nbsp;<span class="op" id="3678152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678158">s</span><span class="op" id="3678159">.</span><span class="ident" id="3678160">insertSemi</span>&nbsp;<span class="op" id="3678171">=</span>&nbsp;<span class="builtintype" id="3678173">false</span>&nbsp;<span class="comment" id="3678179">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678199">return</span>&nbsp;<span class="ident" id="3678206">pos</span><span class="op" id="3678209">,</span>&nbsp;<span class="ident" id="3678211">token</span><span class="op" id="3678216">.</span><span class="ident" id="3678217">SEMICOLON</span><span class="op" id="3678226">,</span>&nbsp;<span class="string" id="3678228">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3678236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678241">tok</span>&nbsp;<span class="op" id="3678245">=</span>&nbsp;<span class="ident" id="3678247">token</span><span class="op" id="3678252">.</span><span class="ident" id="3678253">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678259">case</span>&nbsp;<span class="string" id="3678264">&#39;\n&#39;</span><span class="op" id="3678268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3678273">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3678318">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3678364">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678394">s</span><span class="op" id="3678395">.</span><span class="ident" id="3678396">insertSemi</span>&nbsp;<span class="op" id="3678407">=</span>&nbsp;<span class="builtintype" id="3678409">false</span>&nbsp;<span class="comment" id="3678415">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678438">return</span>&nbsp;<span class="ident" id="3678445">pos</span><span class="op" id="3678448">,</span>&nbsp;<span class="ident" id="3678450">token</span><span class="op" id="3678455">.</span><span class="ident" id="3678456">SEMICOLON</span><span class="op" id="3678465">,</span>&nbsp;<span class="string" id="3678467">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678474">case</span>&nbsp;<span class="string" id="3678479">&#39;&#34;&#39;</span><span class="op" id="3678482">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678487">insertSemi</span>&nbsp;<span class="op" id="3678498">=</span>&nbsp;<span class="builtintype" id="3678500">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678508">tok</span>&nbsp;<span class="op" id="3678512">=</span>&nbsp;<span class="ident" id="3678514">token</span><span class="op" id="3678519">.</span><span class="ident" id="3678520">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678530">lit</span>&nbsp;<span class="op" id="3678534">=</span>&nbsp;<span class="ident" id="3678536">s</span><span class="op" id="3678537">.</span><span class="ident" id="3678538">scanString</span><span class="op" id="3678548">(</span><span class="op" id="3678549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678553">case</span>&nbsp;<span class="string" id="3678558">&#39;\&#39;&#39;</span><span class="op" id="3678562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678567">insertSemi</span>&nbsp;<span class="op" id="3678578">=</span>&nbsp;<span class="builtintype" id="3678580">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678588">tok</span>&nbsp;<span class="op" id="3678592">=</span>&nbsp;<span class="ident" id="3678594">token</span><span class="op" id="3678599">.</span><span class="ident" id="3678600">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678608">lit</span>&nbsp;<span class="op" id="3678612">=</span>&nbsp;<span class="ident" id="3678614">s</span><span class="op" id="3678615">.</span><span class="ident" id="3678616">scanRune</span><span class="op" id="3678624">(</span><span class="op" id="3678625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678629">case</span>&nbsp;<span class="string" id="3678634">&#39;`&#39;</span><span class="op" id="3678637">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678642">insertSemi</span>&nbsp;<span class="op" id="3678653">=</span>&nbsp;<span class="builtintype" id="3678655">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678663">tok</span>&nbsp;<span class="op" id="3678667">=</span>&nbsp;<span class="ident" id="3678669">token</span><span class="op" id="3678674">.</span><span class="ident" id="3678675">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678685">lit</span>&nbsp;<span class="op" id="3678689">=</span>&nbsp;<span class="ident" id="3678691">s</span><span class="op" id="3678692">.</span><span class="ident" id="3678693">scanRawString</span><span class="op" id="3678706">(</span><span class="op" id="3678707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678711">case</span>&nbsp;<span class="string" id="3678716">&#39;:&#39;</span><span class="op" id="3678719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678724">tok</span>&nbsp;<span class="op" id="3678728">=</span>&nbsp;<span class="ident" id="3678730">s</span><span class="op" id="3678731">.</span><span class="ident" id="3678732">switch2</span><span class="op" id="3678739">(</span><span class="ident" id="3678740">token</span><span class="op" id="3678745">.</span><span class="ident" id="3678746">COLON</span><span class="op" id="3678751">,</span>&nbsp;<span class="ident" id="3678753">token</span><span class="op" id="3678758">.</span><span class="ident" id="3678759">DEFINE</span><span class="op" id="3678765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678769">case</span>&nbsp;<span class="string" id="3678774">&#39;.&#39;</span><span class="op" id="3678777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678782">if</span>&nbsp;<span class="string" id="3678785">&#39;0&#39;</span>&nbsp;<span class="op" id="3678789">&lt;=</span>&nbsp;<span class="ident" id="3678792">s</span><span class="op" id="3678793">.</span><span class="ident" id="3678794">ch</span>&nbsp;<span class="op" id="3678797">&amp;&amp;</span>&nbsp;<span class="ident" id="3678800">s</span><span class="op" id="3678801">.</span><span class="ident" id="3678802">ch</span>&nbsp;<span class="op" id="3678805">&lt;=</span>&nbsp;<span class="string" id="3678808">&#39;9&#39;</span>&nbsp;<span class="op" id="3678812">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678818">insertSemi</span>&nbsp;<span class="op" id="3678829">=</span>&nbsp;<span class="builtintype" id="3678831">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678840">tok</span><span class="op" id="3678843">,</span>&nbsp;<span class="ident" id="3678845">lit</span>&nbsp;<span class="op" id="3678849">=</span>&nbsp;<span class="ident" id="3678851">s</span><span class="op" id="3678852">.</span><span class="ident" id="3678853">scanNumber</span><span class="op" id="3678863">(</span><span class="builtintype" id="3678864">true</span><span class="op" id="3678868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3678873">}</span>&nbsp;<span class="keyword" id="3678875">else</span>&nbsp;<span class="keyword" id="3678880">if</span>&nbsp;<span class="ident" id="3678883">s</span><span class="op" id="3678884">.</span><span class="ident" id="3678885">ch</span>&nbsp;<span class="op" id="3678888">==</span>&nbsp;<span class="string" id="3678891">&#39;.&#39;</span>&nbsp;<span class="op" id="3678895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678901">s</span><span class="op" id="3678902">.</span><span class="ident" id="3678903">next</span><span class="op" id="3678907">(</span><span class="op" id="3678908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3678914">if</span>&nbsp;<span class="ident" id="3678917">s</span><span class="op" id="3678918">.</span><span class="ident" id="3678919">ch</span>&nbsp;<span class="op" id="3678922">==</span>&nbsp;<span class="string" id="3678925">&#39;.&#39;</span>&nbsp;<span class="op" id="3678929">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678936">s</span><span class="op" id="3678937">.</span><span class="ident" id="3678938">next</span><span class="op" id="3678942">(</span><span class="op" id="3678943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678950">tok</span>&nbsp;<span class="op" id="3678954">=</span>&nbsp;<span class="ident" id="3678956">token</span><span class="op" id="3678961">.</span><span class="ident" id="3678962">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3678975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3678980">}</span>&nbsp;<span class="keyword" id="3678982">else</span>&nbsp;<span class="op" id="3678987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3678993">tok</span>&nbsp;<span class="op" id="3678997">=</span>&nbsp;<span class="ident" id="3678999">token</span><span class="op" id="3679004">.</span><span class="ident" id="3679005">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3679015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679019">case</span>&nbsp;<span class="string" id="3679024">&#39;,&#39;</span><span class="op" id="3679027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679032">tok</span>&nbsp;<span class="op" id="3679036">=</span>&nbsp;<span class="ident" id="3679038">token</span><span class="op" id="3679043">.</span><span class="ident" id="3679044">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679052">case</span>&nbsp;<span class="string" id="3679057">&#39;;&#39;</span><span class="op" id="3679060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679065">tok</span>&nbsp;<span class="op" id="3679069">=</span>&nbsp;<span class="ident" id="3679071">token</span><span class="op" id="3679076">.</span><span class="ident" id="3679077">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679090">lit</span>&nbsp;<span class="op" id="3679094">=</span>&nbsp;<span class="string" id="3679096">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679102">case</span>&nbsp;<span class="string" id="3679107">&#39;(&#39;</span><span class="op" id="3679110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679115">tok</span>&nbsp;<span class="op" id="3679119">=</span>&nbsp;<span class="ident" id="3679121">token</span><span class="op" id="3679126">.</span><span class="ident" id="3679127">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679136">case</span>&nbsp;<span class="string" id="3679141">&#39;)&#39;</span><span class="op" id="3679144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679149">insertSemi</span>&nbsp;<span class="op" id="3679160">=</span>&nbsp;<span class="builtintype" id="3679162">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679170">tok</span>&nbsp;<span class="op" id="3679174">=</span>&nbsp;<span class="ident" id="3679176">token</span><span class="op" id="3679181">.</span><span class="ident" id="3679182">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679191">case</span>&nbsp;<span class="string" id="3679196">&#39;[&#39;</span><span class="op" id="3679199">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679204">tok</span>&nbsp;<span class="op" id="3679208">=</span>&nbsp;<span class="ident" id="3679210">token</span><span class="op" id="3679215">.</span><span class="ident" id="3679216">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679225">case</span>&nbsp;<span class="string" id="3679230">&#39;]&#39;</span><span class="op" id="3679233">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679238">insertSemi</span>&nbsp;<span class="op" id="3679249">=</span>&nbsp;<span class="builtintype" id="3679251">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679259">tok</span>&nbsp;<span class="op" id="3679263">=</span>&nbsp;<span class="ident" id="3679265">token</span><span class="op" id="3679270">.</span><span class="ident" id="3679271">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679280">case</span>&nbsp;<span class="string" id="3679285">&#39;{&#39;</span><span class="op" id="3679288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679293">tok</span>&nbsp;<span class="op" id="3679297">=</span>&nbsp;<span class="ident" id="3679299">token</span><span class="op" id="3679304">.</span><span class="ident" id="3679305">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679314">case</span>&nbsp;<span class="string" id="3679319">&#39;}&#39;</span><span class="op" id="3679322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679327">insertSemi</span>&nbsp;<span class="op" id="3679338">=</span>&nbsp;<span class="builtintype" id="3679340">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679348">tok</span>&nbsp;<span class="op" id="3679352">=</span>&nbsp;<span class="ident" id="3679354">token</span><span class="op" id="3679359">.</span><span class="ident" id="3679360">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679369">case</span>&nbsp;<span class="string" id="3679374">&#39;+&#39;</span><span class="op" id="3679377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679382">tok</span>&nbsp;<span class="op" id="3679386">=</span>&nbsp;<span class="ident" id="3679388">s</span><span class="op" id="3679389">.</span><span class="ident" id="3679390">switch3</span><span class="op" id="3679397">(</span><span class="ident" id="3679398">token</span><span class="op" id="3679403">.</span><span class="ident" id="3679404">ADD</span><span class="op" id="3679407">,</span>&nbsp;<span class="ident" id="3679409">token</span><span class="op" id="3679414">.</span><span class="ident" id="3679415">ADD_ASSIGN</span><span class="op" id="3679425">,</span>&nbsp;<span class="string" id="3679427">&#39;+&#39;</span><span class="op" id="3679430">,</span>&nbsp;<span class="ident" id="3679432">token</span><span class="op" id="3679437">.</span><span class="ident" id="3679438">INC</span><span class="op" id="3679441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679446">if</span>&nbsp;<span class="ident" id="3679449">tok</span>&nbsp;<span class="op" id="3679453">==</span>&nbsp;<span class="ident" id="3679456">token</span><span class="op" id="3679461">.</span><span class="ident" id="3679462">INC</span>&nbsp;<span class="op" id="3679466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679472">insertSemi</span>&nbsp;<span class="op" id="3679483">=</span>&nbsp;<span class="builtintype" id="3679485">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3679493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679497">case</span>&nbsp;<span class="string" id="3679502">&#39;-&#39;</span><span class="op" id="3679505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679510">tok</span>&nbsp;<span class="op" id="3679514">=</span>&nbsp;<span class="ident" id="3679516">s</span><span class="op" id="3679517">.</span><span class="ident" id="3679518">switch3</span><span class="op" id="3679525">(</span><span class="ident" id="3679526">token</span><span class="op" id="3679531">.</span><span class="ident" id="3679532">SUB</span><span class="op" id="3679535">,</span>&nbsp;<span class="ident" id="3679537">token</span><span class="op" id="3679542">.</span><span class="ident" id="3679543">SUB_ASSIGN</span><span class="op" id="3679553">,</span>&nbsp;<span class="string" id="3679555">&#39;-&#39;</span><span class="op" id="3679558">,</span>&nbsp;<span class="ident" id="3679560">token</span><span class="op" id="3679565">.</span><span class="ident" id="3679566">DEC</span><span class="op" id="3679569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679574">if</span>&nbsp;<span class="ident" id="3679577">tok</span>&nbsp;<span class="op" id="3679581">==</span>&nbsp;<span class="ident" id="3679584">token</span><span class="op" id="3679589">.</span><span class="ident" id="3679590">DEC</span>&nbsp;<span class="op" id="3679594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679600">insertSemi</span>&nbsp;<span class="op" id="3679611">=</span>&nbsp;<span class="builtintype" id="3679613">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3679621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679625">case</span>&nbsp;<span class="string" id="3679630">&#39;*&#39;</span><span class="op" id="3679633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679638">tok</span>&nbsp;<span class="op" id="3679642">=</span>&nbsp;<span class="ident" id="3679644">s</span><span class="op" id="3679645">.</span><span class="ident" id="3679646">switch2</span><span class="op" id="3679653">(</span><span class="ident" id="3679654">token</span><span class="op" id="3679659">.</span><span class="ident" id="3679660">MUL</span><span class="op" id="3679663">,</span>&nbsp;<span class="ident" id="3679665">token</span><span class="op" id="3679670">.</span><span class="ident" id="3679671">MUL_ASSIGN</span><span class="op" id="3679681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679685">case</span>&nbsp;<span class="string" id="3679690">&#39;/&#39;</span><span class="op" id="3679693">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679698">if</span>&nbsp;<span class="ident" id="3679701">s</span><span class="op" id="3679702">.</span><span class="ident" id="3679703">ch</span>&nbsp;<span class="op" id="3679706">==</span>&nbsp;<span class="string" id="3679709">&#39;/&#39;</span>&nbsp;<span class="op" id="3679713">||</span>&nbsp;<span class="ident" id="3679716">s</span><span class="op" id="3679717">.</span><span class="ident" id="3679718">ch</span>&nbsp;<span class="op" id="3679721">==</span>&nbsp;<span class="string" id="3679724">&#39;*&#39;</span>&nbsp;<span class="op" id="3679728">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3679734">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679749">if</span>&nbsp;<span class="ident" id="3679752">s</span><span class="op" id="3679753">.</span><span class="ident" id="3679754">insertSemi</span>&nbsp;<span class="op" id="3679765">&amp;&amp;</span>&nbsp;<span class="ident" id="3679768">s</span><span class="op" id="3679769">.</span><span class="ident" id="3679770">findLineEnd</span><span class="op" id="3679781">(</span><span class="op" id="3679782">)</span>&nbsp;<span class="op" id="3679784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3679791">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679846">s</span><span class="op" id="3679847">.</span><span class="ident" id="3679848">ch</span>&nbsp;<span class="op" id="3679851">=</span>&nbsp;<span class="string" id="3679853">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679862">s</span><span class="op" id="3679863">.</span><span class="ident" id="3679864">offset</span>&nbsp;<span class="op" id="3679871">=</span>&nbsp;<span class="ident" id="3679873">s</span><span class="op" id="3679874">.</span><span class="ident" id="3679875">file</span><span class="op" id="3679879">.</span><span class="ident" id="3679880">Offset</span><span class="op" id="3679886">(</span><span class="ident" id="3679887">pos</span><span class="op" id="3679890">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679897">s</span><span class="op" id="3679898">.</span><span class="ident" id="3679899">rdOffset</span>&nbsp;<span class="op" id="3679908">=</span>&nbsp;<span class="ident" id="3679910">s</span><span class="op" id="3679911">.</span><span class="ident" id="3679912">offset</span>&nbsp;<span class="op" id="3679919">+</span>&nbsp;<span class="num" id="3679921">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3679928">s</span><span class="op" id="3679929">.</span><span class="ident" id="3679930">insertSemi</span>&nbsp;<span class="op" id="3679941">=</span>&nbsp;<span class="builtintype" id="3679943">false</span>&nbsp;<span class="comment" id="3679949">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3679974">return</span>&nbsp;<span class="ident" id="3679981">pos</span><span class="op" id="3679984">,</span>&nbsp;<span class="ident" id="3679986">token</span><span class="op" id="3679991">.</span><span class="ident" id="3679992">SEMICOLON</span><span class="op" id="3680001">,</span>&nbsp;<span class="string" id="3680003">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680018">lit</span>&nbsp;<span class="op" id="3680022">=</span>&nbsp;<span class="ident" id="3680024">s</span><span class="op" id="3680025">.</span><span class="ident" id="3680026">scanComment</span><span class="op" id="3680037">(</span><span class="op" id="3680038">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680044">if</span>&nbsp;<span class="ident" id="3680047">s</span><span class="op" id="3680048">.</span><span class="ident" id="3680049">mode</span><span class="op" id="3680053">&amp;</span><span class="ident" id="3680054">ScanComments</span>&nbsp;<span class="op" id="3680067">==</span>&nbsp;<span class="num" id="3680070">0</span>&nbsp;<span class="op" id="3680072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3680079">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680100">s</span><span class="op" id="3680101">.</span><span class="ident" id="3680102">insertSemi</span>&nbsp;<span class="op" id="3680113">=</span>&nbsp;<span class="builtintype" id="3680115">false</span>&nbsp;<span class="comment" id="3680121">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680146">goto</span>&nbsp;<span class="ident" id="3680151">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680165">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680171">tok</span>&nbsp;<span class="op" id="3680175">=</span>&nbsp;<span class="ident" id="3680177">token</span><span class="op" id="3680182">.</span><span class="ident" id="3680183">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680194">}</span>&nbsp;<span class="keyword" id="3680196">else</span>&nbsp;<span class="op" id="3680201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680207">tok</span>&nbsp;<span class="op" id="3680211">=</span>&nbsp;<span class="ident" id="3680213">s</span><span class="op" id="3680214">.</span><span class="ident" id="3680215">switch2</span><span class="op" id="3680222">(</span><span class="ident" id="3680223">token</span><span class="op" id="3680228">.</span><span class="ident" id="3680229">QUO</span><span class="op" id="3680232">,</span>&nbsp;<span class="ident" id="3680234">token</span><span class="op" id="3680239">.</span><span class="ident" id="3680240">QUO_ASSIGN</span><span class="op" id="3680250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680259">case</span>&nbsp;<span class="string" id="3680264">&#39;%&#39;</span><span class="op" id="3680267">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680272">tok</span>&nbsp;<span class="op" id="3680276">=</span>&nbsp;<span class="ident" id="3680278">s</span><span class="op" id="3680279">.</span><span class="ident" id="3680280">switch2</span><span class="op" id="3680287">(</span><span class="ident" id="3680288">token</span><span class="op" id="3680293">.</span><span class="ident" id="3680294">REM</span><span class="op" id="3680297">,</span>&nbsp;<span class="ident" id="3680299">token</span><span class="op" id="3680304">.</span><span class="ident" id="3680305">REM_ASSIGN</span><span class="op" id="3680315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680319">case</span>&nbsp;<span class="string" id="3680324">&#39;^&#39;</span><span class="op" id="3680327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680332">tok</span>&nbsp;<span class="op" id="3680336">=</span>&nbsp;<span class="ident" id="3680338">s</span><span class="op" id="3680339">.</span><span class="ident" id="3680340">switch2</span><span class="op" id="3680347">(</span><span class="ident" id="3680348">token</span><span class="op" id="3680353">.</span><span class="ident" id="3680354">XOR</span><span class="op" id="3680357">,</span>&nbsp;<span class="ident" id="3680359">token</span><span class="op" id="3680364">.</span><span class="ident" id="3680365">XOR_ASSIGN</span><span class="op" id="3680375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680379">case</span>&nbsp;<span class="string" id="3680384">&#39;&lt;&#39;</span><span class="op" id="3680387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680392">if</span>&nbsp;<span class="ident" id="3680395">s</span><span class="op" id="3680396">.</span><span class="ident" id="3680397">ch</span>&nbsp;<span class="op" id="3680400">==</span>&nbsp;<span class="string" id="3680403">&#39;-&#39;</span>&nbsp;<span class="op" id="3680407">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680413">s</span><span class="op" id="3680414">.</span><span class="ident" id="3680415">next</span><span class="op" id="3680419">(</span><span class="op" id="3680420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680426">tok</span>&nbsp;<span class="op" id="3680430">=</span>&nbsp;<span class="ident" id="3680432">token</span><span class="op" id="3680437">.</span><span class="ident" id="3680438">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680447">}</span>&nbsp;<span class="keyword" id="3680449">else</span>&nbsp;<span class="op" id="3680454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680460">tok</span>&nbsp;<span class="op" id="3680464">=</span>&nbsp;<span class="ident" id="3680466">s</span><span class="op" id="3680467">.</span><span class="ident" id="3680468">switch4</span><span class="op" id="3680475">(</span><span class="ident" id="3680476">token</span><span class="op" id="3680481">.</span><span class="ident" id="3680482">LSS</span><span class="op" id="3680485">,</span>&nbsp;<span class="ident" id="3680487">token</span><span class="op" id="3680492">.</span><span class="ident" id="3680493">LEQ</span><span class="op" id="3680496">,</span>&nbsp;<span class="string" id="3680498">&#39;&lt;&#39;</span><span class="op" id="3680501">,</span>&nbsp;<span class="ident" id="3680503">token</span><span class="op" id="3680508">.</span><span class="ident" id="3680509">SHL</span><span class="op" id="3680512">,</span>&nbsp;<span class="ident" id="3680514">token</span><span class="op" id="3680519">.</span><span class="ident" id="3680520">SHL_ASSIGN</span><span class="op" id="3680530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680535">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680539">case</span>&nbsp;<span class="string" id="3680544">&#39;&gt;&#39;</span><span class="op" id="3680547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680552">tok</span>&nbsp;<span class="op" id="3680556">=</span>&nbsp;<span class="ident" id="3680558">s</span><span class="op" id="3680559">.</span><span class="ident" id="3680560">switch4</span><span class="op" id="3680567">(</span><span class="ident" id="3680568">token</span><span class="op" id="3680573">.</span><span class="ident" id="3680574">GTR</span><span class="op" id="3680577">,</span>&nbsp;<span class="ident" id="3680579">token</span><span class="op" id="3680584">.</span><span class="ident" id="3680585">GEQ</span><span class="op" id="3680588">,</span>&nbsp;<span class="string" id="3680590">&#39;&gt;&#39;</span><span class="op" id="3680593">,</span>&nbsp;<span class="ident" id="3680595">token</span><span class="op" id="3680600">.</span><span class="ident" id="3680601">SHR</span><span class="op" id="3680604">,</span>&nbsp;<span class="ident" id="3680606">token</span><span class="op" id="3680611">.</span><span class="ident" id="3680612">SHR_ASSIGN</span><span class="op" id="3680622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680626">case</span>&nbsp;<span class="string" id="3680631">&#39;=&#39;</span><span class="op" id="3680634">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680639">tok</span>&nbsp;<span class="op" id="3680643">=</span>&nbsp;<span class="ident" id="3680645">s</span><span class="op" id="3680646">.</span><span class="ident" id="3680647">switch2</span><span class="op" id="3680654">(</span><span class="ident" id="3680655">token</span><span class="op" id="3680660">.</span><span class="ident" id="3680661">ASSIGN</span><span class="op" id="3680667">,</span>&nbsp;<span class="ident" id="3680669">token</span><span class="op" id="3680674">.</span><span class="ident" id="3680675">EQL</span><span class="op" id="3680678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680682">case</span>&nbsp;<span class="string" id="3680687">&#39;!&#39;</span><span class="op" id="3680690">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680695">tok</span>&nbsp;<span class="op" id="3680699">=</span>&nbsp;<span class="ident" id="3680701">s</span><span class="op" id="3680702">.</span><span class="ident" id="3680703">switch2</span><span class="op" id="3680710">(</span><span class="ident" id="3680711">token</span><span class="op" id="3680716">.</span><span class="ident" id="3680717">NOT</span><span class="op" id="3680720">,</span>&nbsp;<span class="ident" id="3680722">token</span><span class="op" id="3680727">.</span><span class="ident" id="3680728">NEQ</span><span class="op" id="3680731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680735">case</span>&nbsp;<span class="string" id="3680740">&#39;&amp;&#39;</span><span class="op" id="3680743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680748">if</span>&nbsp;<span class="ident" id="3680751">s</span><span class="op" id="3680752">.</span><span class="ident" id="3680753">ch</span>&nbsp;<span class="op" id="3680756">==</span>&nbsp;<span class="string" id="3680759">&#39;^&#39;</span>&nbsp;<span class="op" id="3680763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680769">s</span><span class="op" id="3680770">.</span><span class="ident" id="3680771">next</span><span class="op" id="3680775">(</span><span class="op" id="3680776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680782">tok</span>&nbsp;<span class="op" id="3680786">=</span>&nbsp;<span class="ident" id="3680788">s</span><span class="op" id="3680789">.</span><span class="ident" id="3680790">switch2</span><span class="op" id="3680797">(</span><span class="ident" id="3680798">token</span><span class="op" id="3680803">.</span><span class="ident" id="3680804">AND_NOT</span><span class="op" id="3680811">,</span>&nbsp;<span class="ident" id="3680813">token</span><span class="op" id="3680818">.</span><span class="ident" id="3680819">AND_NOT_ASSIGN</span><span class="op" id="3680833">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680838">}</span>&nbsp;<span class="keyword" id="3680840">else</span>&nbsp;<span class="op" id="3680845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680851">tok</span>&nbsp;<span class="op" id="3680855">=</span>&nbsp;<span class="ident" id="3680857">s</span><span class="op" id="3680858">.</span><span class="ident" id="3680859">switch3</span><span class="op" id="3680866">(</span><span class="ident" id="3680867">token</span><span class="op" id="3680872">.</span><span class="ident" id="3680873">AND</span><span class="op" id="3680876">,</span>&nbsp;<span class="ident" id="3680878">token</span><span class="op" id="3680883">.</span><span class="ident" id="3680884">AND_ASSIGN</span><span class="op" id="3680894">,</span>&nbsp;<span class="string" id="3680896">&#39;&amp;&#39;</span><span class="op" id="3680899">,</span>&nbsp;<span class="ident" id="3680901">token</span><span class="op" id="3680906">.</span><span class="ident" id="3680907">LAND</span><span class="op" id="3680911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3680916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680920">case</span>&nbsp;<span class="string" id="3680925">&#39;|&#39;</span><span class="op" id="3680928">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3680933">tok</span>&nbsp;<span class="op" id="3680937">=</span>&nbsp;<span class="ident" id="3680939">s</span><span class="op" id="3680940">.</span><span class="ident" id="3680941">switch3</span><span class="op" id="3680948">(</span><span class="ident" id="3680949">token</span><span class="op" id="3680954">.</span><span class="ident" id="3680955">OR</span><span class="op" id="3680957">,</span>&nbsp;<span class="ident" id="3680959">token</span><span class="op" id="3680964">.</span><span class="ident" id="3680965">OR_ASSIGN</span><span class="op" id="3680974">,</span>&nbsp;<span class="string" id="3680976">&#39;|&#39;</span><span class="op" id="3680979">,</span>&nbsp;<span class="ident" id="3680981">token</span><span class="op" id="3680986">.</span><span class="ident" id="3680987">LOR</span><span class="op" id="3680990">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3680994">default</span><span class="op" id="3681001">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3681006">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3681056">if</span>&nbsp;<span class="ident" id="3681059">ch</span>&nbsp;<span class="op" id="3681062">!=</span>&nbsp;<span class="ident" id="3681065">bom</span>&nbsp;<span class="op" id="3681069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3681075">s</span><span class="op" id="3681076">.</span><span class="builtintype" id="3681077">error</span><span class="op" id="3681082">(</span><span class="ident" id="3681083">s</span><span class="op" id="3681084">.</span><span class="ident" id="3681085">file</span><span class="op" id="3681089">.</span><span class="ident" id="3681090">Offset</span><span class="op" id="3681096">(</span><span class="ident" id="3681097">pos</span><span class="op" id="3681100">)</span><span class="op" id="3681101">,</span>&nbsp;<span class="ident" id="3681103">fmt</span><span class="op" id="3681106">.</span><span class="ident" id="3681107">Sprintf</span><span class="op" id="3681114">(</span><span class="string" id="3681115">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="3681138">,</span>&nbsp;<span class="ident" id="3681140">ch</span><span class="op" id="3681142">)</span><span class="op" id="3681143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3681148">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3681153">insertSemi</span>&nbsp;<span class="op" id="3681164">=</span>&nbsp;<span class="ident" id="3681166">s</span><span class="op" id="3681167">.</span><span class="ident" id="3681168">insertSemi</span>&nbsp;<span class="comment" id="3681179">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3681210">tok</span>&nbsp;<span class="op" id="3681214">=</span>&nbsp;<span class="ident" id="3681216">token</span><span class="op" id="3681221">.</span><span class="ident" id="3681222">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3681233">lit</span>&nbsp;<span class="op" id="3681237">=</span>&nbsp;<span class="builtintype" id="3681239">string</span><span class="op" id="3681245">(</span><span class="ident" id="3681246">ch</span><span class="op" id="3681248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3681252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3681255">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3681258">if</span>&nbsp;<span class="ident" id="3681261">s</span><span class="op" id="3681262">.</span><span class="ident" id="3681263">mode</span><span class="op" id="3681267">&amp;</span><span class="ident" id="3681268">dontInsertSemis</span>&nbsp;<span class="op" id="3681284">==</span>&nbsp;<span class="num" id="3681287">0</span>&nbsp;<span class="op" id="3681289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3681293">s</span><span class="op" id="3681294">.</span><span class="ident" id="3681295">insertSemi</span>&nbsp;<span class="op" id="3681306">=</span>&nbsp;<span class="ident" id="3681308">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3681320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3681324">return</span><br>
<span class="lineno">760</span><span class="op" id="3681331">}</span>
</div>
</body>
</html>
