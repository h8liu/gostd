<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7403397">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7403452">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7403506">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7403557">package</span>&nbsp;<span class="ident" id="7403565">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7403570">import</span>&nbsp;<span class="op" id="7403577">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403580">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403589">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403608">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403624">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403630">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403643">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403649">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403666">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403676">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403687">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403698">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7403705">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7403708">type</span>&nbsp;<span class="ident" id="7403713">ZipTest</span>&nbsp;<span class="keyword" id="7403721">struct</span>&nbsp;<span class="op" id="7403728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403731">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7403739">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403747">Source</span>&nbsp;&nbsp;<span class="keyword" id="7403755">func</span><span class="op" id="7403759">(</span><span class="op" id="7403760">)</span>&nbsp;<span class="op" id="7403762">(</span><span class="ident" id="7403763">r</span>&nbsp;<span class="ident" id="7403765">io</span><span class="op" id="7403767">.</span><span class="ident" id="7403768">ReaderAt</span><span class="op" id="7403776">,</span>&nbsp;<span class="ident" id="7403778">size</span>&nbsp;<span class="ident" id="7403783">int64</span><span class="op" id="7403788">)</span>&nbsp;<span class="comment" id="7403790">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403843">Comment</span>&nbsp;<span class="builtintype" id="7403851">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403859">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403867">[</span><span class="op" id="7403868">]</span><span class="ident" id="7403869">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403882">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7403890">error</span>&nbsp;<span class="comment" id="7403896">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7403946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7403949">type</span>&nbsp;<span class="ident" id="7403954">ZipTestFile</span>&nbsp;<span class="keyword" id="7403966">struct</span>&nbsp;<span class="op" id="7403973">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403976">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7403987">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403995">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404006">[</span><span class="op" id="7404007">]</span><span class="builtintype" id="7404008">byte</span>&nbsp;<span class="comment" id="7404013">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404064">ContentErr</span>&nbsp;<span class="builtintype" id="7404075">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404082">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7404093">string</span>&nbsp;<span class="comment" id="7404100">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404155">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7404166">string</span>&nbsp;<span class="comment" id="7404173">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404221">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404232">os</span><span class="op" id="7404234">.</span><span class="ident" id="7404235">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7404244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7404247">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7404322">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7404397">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7404471">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7404545">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7404621">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7404695">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7404775">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7404854">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7404902">var</span>&nbsp;<span class="ident" id="7404906">tests</span>&nbsp;<span class="op" id="7404912">=</span>&nbsp;<span class="op" id="7404914">[</span><span class="op" id="7404915">]</span><span class="ident" id="7404916">ZipTest</span><span class="op" id="7404923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404926">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404930">Name</span><span class="op" id="7404934">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404939">&#34;test.zip&#34;</span><span class="op" id="7404949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404953">Comment</span><span class="op" id="7404960">:</span>&nbsp;<span class="string" id="7404962">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7404990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404994">File</span><span class="op" id="7404998">:</span>&nbsp;<span class="op" id="7405000">[</span><span class="op" id="7405001">]</span><span class="ident" id="7405002">ZipTestFile</span><span class="op" id="7405013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405024">Name</span><span class="op" id="7405028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405033">&#34;test.txt&#34;</span><span class="op" id="7405043">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405049">Content</span><span class="op" id="7405056">:</span>&nbsp;<span class="op" id="7405058">[</span><span class="op" id="7405059">]</span><span class="builtintype" id="7405060">byte</span><span class="op" id="7405064">(</span><span class="string" id="7405065">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7405094">)</span><span class="op" id="7405095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405101">Mtime</span><span class="op" id="7405106">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7405110">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7405129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405135">Mode</span><span class="op" id="7405139">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7405144">0644</span><span class="op" id="7405148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405153">}</span><span class="op" id="7405154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405159">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405165">Name</span><span class="op" id="7405169">:</span>&nbsp;&nbsp;<span class="string" id="7405172">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7405194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405200">File</span><span class="op" id="7405204">:</span>&nbsp;&nbsp;<span class="string" id="7405207">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7405229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405235">Mtime</span><span class="op" id="7405240">:</span>&nbsp;<span class="string" id="7405242">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7405261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405267">Mode</span><span class="op" id="7405271">:</span>&nbsp;&nbsp;<span class="num" id="7405274">0644</span><span class="op" id="7405278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405283">}</span><span class="op" id="7405284">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405288">}</span><span class="op" id="7405289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405292">}</span><span class="op" id="7405293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405300">Name</span><span class="op" id="7405304">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405309">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7405333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405337">Comment</span><span class="op" id="7405344">:</span>&nbsp;<span class="string" id="7405346">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7405374">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405378">File</span><span class="op" id="7405382">:</span>&nbsp;<span class="op" id="7405384">[</span><span class="op" id="7405385">]</span><span class="ident" id="7405386">ZipTestFile</span><span class="op" id="7405397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405408">Name</span><span class="op" id="7405412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405417">&#34;test.txt&#34;</span><span class="op" id="7405427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405433">Content</span><span class="op" id="7405440">:</span>&nbsp;<span class="op" id="7405442">[</span><span class="op" id="7405443">]</span><span class="builtintype" id="7405444">byte</span><span class="op" id="7405448">(</span><span class="string" id="7405449">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7405478">)</span><span class="op" id="7405479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405485">Mtime</span><span class="op" id="7405490">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7405494">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7405513">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405519">Mode</span><span class="op" id="7405523">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7405528">0644</span><span class="op" id="7405532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405537">}</span><span class="op" id="7405538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405549">Name</span><span class="op" id="7405553">:</span>&nbsp;&nbsp;<span class="string" id="7405556">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7405578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405584">File</span><span class="op" id="7405588">:</span>&nbsp;&nbsp;<span class="string" id="7405591">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7405613">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405619">Mtime</span><span class="op" id="7405624">:</span>&nbsp;<span class="string" id="7405626">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7405645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405651">Mode</span><span class="op" id="7405655">:</span>&nbsp;&nbsp;<span class="num" id="7405658">0644</span><span class="op" id="7405662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405667">}</span><span class="op" id="7405668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405672">}</span><span class="op" id="7405673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405676">}</span><span class="op" id="7405677">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405684">Name</span><span class="op" id="7405688">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7405692">&#34;r.zip&#34;</span><span class="op" id="7405699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405703">Source</span><span class="op" id="7405709">:</span>&nbsp;<span class="ident" id="7405711">returnRecursiveZip</span><span class="op" id="7405729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405733">File</span><span class="op" id="7405737">:</span>&nbsp;<span class="op" id="7405739">[</span><span class="op" id="7405740">]</span><span class="ident" id="7405741">ZipTestFile</span><span class="op" id="7405752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405757">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405763">Name</span><span class="op" id="7405767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405772">&#34;r/r.zip&#34;</span><span class="op" id="7405781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405787">Content</span><span class="op" id="7405794">:</span>&nbsp;<span class="ident" id="7405796">rZipBytes</span><span class="op" id="7405805">(</span><span class="op" id="7405806">)</span><span class="op" id="7405807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405813">Mtime</span><span class="op" id="7405818">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7405822">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7405841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405847">Mode</span><span class="op" id="7405851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7405856">0666</span><span class="op" id="7405860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405865">}</span><span class="op" id="7405866">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405870">}</span><span class="op" id="7405871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405874">}</span><span class="op" id="7405875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405882">Name</span><span class="op" id="7405886">:</span>&nbsp;<span class="string" id="7405888">&#34;symlink.zip&#34;</span><span class="op" id="7405901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405905">File</span><span class="op" id="7405909">:</span>&nbsp;<span class="op" id="7405911">[</span><span class="op" id="7405912">]</span><span class="ident" id="7405913">ZipTestFile</span><span class="op" id="7405924">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405935">Name</span><span class="op" id="7405939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405944">&#34;symlink&#34;</span><span class="op" id="7405953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405959">Content</span><span class="op" id="7405966">:</span>&nbsp;<span class="op" id="7405968">[</span><span class="op" id="7405969">]</span><span class="builtintype" id="7405970">byte</span><span class="op" id="7405974">(</span><span class="string" id="7405975">&#34;../target&#34;</span><span class="op" id="7405986">)</span><span class="op" id="7405987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405993">Mode</span><span class="op" id="7405997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406002">0777</span>&nbsp;<span class="op" id="7406007">|</span>&nbsp;<span class="ident" id="7406009">os</span><span class="op" id="7406011">.</span><span class="ident" id="7406012">ModeSymlink</span><span class="op" id="7406023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406028">}</span><span class="op" id="7406029">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406033">}</span><span class="op" id="7406034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406037">}</span><span class="op" id="7406038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406045">Name</span><span class="op" id="7406049">:</span>&nbsp;<span class="string" id="7406051">&#34;readme.zip&#34;</span><span class="op" id="7406063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406066">}</span><span class="op" id="7406067">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406074">Name</span><span class="op" id="7406078">:</span>&nbsp;&nbsp;<span class="string" id="7406081">&#34;readme.notzip&#34;</span><span class="op" id="7406096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406100">Error</span><span class="op" id="7406105">:</span>&nbsp;<span class="ident" id="7406107">ErrFormat</span><span class="op" id="7406116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406119">}</span><span class="op" id="7406120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406123">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406127">Name</span><span class="op" id="7406131">:</span>&nbsp;<span class="string" id="7406133">&#34;dd.zip&#34;</span><span class="op" id="7406141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406145">File</span><span class="op" id="7406149">:</span>&nbsp;<span class="op" id="7406151">[</span><span class="op" id="7406152">]</span><span class="ident" id="7406153">ZipTestFile</span><span class="op" id="7406164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406175">Name</span><span class="op" id="7406179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406184">&#34;filename&#34;</span><span class="op" id="7406194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406200">Content</span><span class="op" id="7406207">:</span>&nbsp;<span class="op" id="7406209">[</span><span class="op" id="7406210">]</span><span class="builtintype" id="7406211">byte</span><span class="op" id="7406215">(</span><span class="string" id="7406216">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7406244">)</span><span class="op" id="7406245">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406251">Mtime</span><span class="op" id="7406256">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7406260">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7406279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406285">Mode</span><span class="op" id="7406289">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406294">0666</span><span class="op" id="7406298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406303">}</span><span class="op" id="7406304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406308">}</span><span class="op" id="7406309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406312">}</span><span class="op" id="7406313">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406320">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406361">Name</span><span class="op" id="7406365">:</span>&nbsp;<span class="string" id="7406367">&#34;winxp.zip&#34;</span><span class="op" id="7406378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406382">File</span><span class="op" id="7406386">:</span>&nbsp;<span class="ident" id="7406388">crossPlatform</span><span class="op" id="7406401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406404">}</span><span class="op" id="7406405">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406412">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406448">Name</span><span class="op" id="7406452">:</span>&nbsp;<span class="string" id="7406454">&#34;unix.zip&#34;</span><span class="op" id="7406464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406468">File</span><span class="op" id="7406472">:</span>&nbsp;<span class="ident" id="7406474">crossPlatform</span><span class="op" id="7406487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406490">}</span><span class="op" id="7406491">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406498">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406554">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406610">Name</span><span class="op" id="7406614">:</span>&nbsp;<span class="string" id="7406616">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7406640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406644">File</span><span class="op" id="7406648">:</span>&nbsp;<span class="op" id="7406650">[</span><span class="op" id="7406651">]</span><span class="ident" id="7406652">ZipTestFile</span><span class="op" id="7406663">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406674">Name</span><span class="op" id="7406678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406683">&#34;foo.txt&#34;</span><span class="op" id="7406692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406698">Content</span><span class="op" id="7406705">:</span>&nbsp;<span class="op" id="7406707">[</span><span class="op" id="7406708">]</span><span class="builtintype" id="7406709">byte</span><span class="op" id="7406713">(</span><span class="string" id="7406714">&#34;foo\n&#34;</span><span class="op" id="7406721">)</span><span class="op" id="7406722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406728">Mtime</span><span class="op" id="7406733">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7406737">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7406756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406762">Mode</span><span class="op" id="7406766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406771">0644</span><span class="op" id="7406775">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406780">}</span><span class="op" id="7406781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406792">Name</span><span class="op" id="7406796">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406801">&#34;bar.txt&#34;</span><span class="op" id="7406810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406816">Content</span><span class="op" id="7406823">:</span>&nbsp;<span class="op" id="7406825">[</span><span class="op" id="7406826">]</span><span class="builtintype" id="7406827">byte</span><span class="op" id="7406831">(</span><span class="string" id="7406832">&#34;bar\n&#34;</span><span class="op" id="7406839">)</span><span class="op" id="7406840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406846">Mtime</span><span class="op" id="7406851">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7406855">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7406874">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406880">Mode</span><span class="op" id="7406884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406889">0644</span><span class="op" id="7406893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406898">}</span><span class="op" id="7406899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406903">}</span><span class="op" id="7406904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406907">}</span><span class="op" id="7406908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406911">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406915">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406970">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407026">Name</span><span class="op" id="7407030">:</span>&nbsp;<span class="string" id="7407032">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7407058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407062">File</span><span class="op" id="7407066">:</span>&nbsp;<span class="op" id="7407068">[</span><span class="op" id="7407069">]</span><span class="ident" id="7407070">ZipTestFile</span><span class="op" id="7407081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407086">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407092">Name</span><span class="op" id="7407096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7407101">&#34;foo.txt&#34;</span><span class="op" id="7407110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407116">Content</span><span class="op" id="7407123">:</span>&nbsp;<span class="op" id="7407125">[</span><span class="op" id="7407126">]</span><span class="builtintype" id="7407127">byte</span><span class="op" id="7407131">(</span><span class="string" id="7407132">&#34;foo\n&#34;</span><span class="op" id="7407139">)</span><span class="op" id="7407140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407146">Mode</span><span class="op" id="7407150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7407155">0666</span><span class="op" id="7407159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407164">}</span><span class="op" id="7407165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407170">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407176">Name</span><span class="op" id="7407180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7407185">&#34;bar.txt&#34;</span><span class="op" id="7407194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407200">Content</span><span class="op" id="7407207">:</span>&nbsp;<span class="op" id="7407209">[</span><span class="op" id="7407210">]</span><span class="builtintype" id="7407211">byte</span><span class="op" id="7407215">(</span><span class="string" id="7407216">&#34;bar\n&#34;</span><span class="op" id="7407223">)</span><span class="op" id="7407224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407230">Mode</span><span class="op" id="7407234">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7407239">0666</span><span class="op" id="7407243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407248">}</span><span class="op" id="7407249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407253">}</span><span class="op" id="7407254">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407257">}</span><span class="op" id="7407258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407265">Name</span><span class="op" id="7407269">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7407273">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7407303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407307">Source</span><span class="op" id="7407313">:</span>&nbsp;<span class="ident" id="7407315">returnCorruptCRC32Zip</span><span class="op" id="7407336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407340">File</span><span class="op" id="7407344">:</span>&nbsp;<span class="op" id="7407346">[</span><span class="op" id="7407347">]</span><span class="ident" id="7407348">ZipTestFile</span><span class="op" id="7407359">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407370">Name</span><span class="op" id="7407374">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7407382">&#34;foo.txt&#34;</span><span class="op" id="7407391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407397">Content</span><span class="op" id="7407404">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407409">[</span><span class="op" id="7407410">]</span><span class="builtintype" id="7407411">byte</span><span class="op" id="7407415">(</span><span class="string" id="7407416">&#34;foo\n&#34;</span><span class="op" id="7407423">)</span><span class="op" id="7407424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407430">Mode</span><span class="op" id="7407434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7407442">0666</span><span class="op" id="7407446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407452">ContentErr</span><span class="op" id="7407462">:</span>&nbsp;<span class="ident" id="7407464">ErrChecksum</span><span class="op" id="7407475">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407480">}</span><span class="op" id="7407481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407492">Name</span><span class="op" id="7407496">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7407501">&#34;bar.txt&#34;</span><span class="op" id="7407510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407516">Content</span><span class="op" id="7407523">:</span>&nbsp;<span class="op" id="7407525">[</span><span class="op" id="7407526">]</span><span class="builtintype" id="7407527">byte</span><span class="op" id="7407531">(</span><span class="string" id="7407532">&#34;bar\n&#34;</span><span class="op" id="7407539">)</span><span class="op" id="7407540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407546">Mode</span><span class="op" id="7407550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7407555">0666</span><span class="op" id="7407559">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407564">}</span><span class="op" id="7407565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407569">}</span><span class="op" id="7407570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407573">}</span><span class="op" id="7407574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7407577">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7407637">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407704">Name</span><span class="op" id="7407708">:</span>&nbsp;<span class="string" id="7407710">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7407734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407738">File</span><span class="op" id="7407742">:</span>&nbsp;<span class="op" id="7407744">[</span><span class="op" id="7407745">]</span><span class="ident" id="7407746">ZipTestFile</span><span class="op" id="7407757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407768">Name</span><span class="op" id="7407772">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7407777">&#34;foo.txt&#34;</span><span class="op" id="7407786">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407792">Content</span><span class="op" id="7407799">:</span>&nbsp;<span class="op" id="7407801">[</span><span class="op" id="7407802">]</span><span class="builtintype" id="7407803">byte</span><span class="op" id="7407807">(</span><span class="string" id="7407808">&#34;foo\n&#34;</span><span class="op" id="7407815">)</span><span class="op" id="7407816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407822">Mtime</span><span class="op" id="7407827">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7407831">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7407850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407856">Mode</span><span class="op" id="7407860">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7407865">0644</span><span class="op" id="7407869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407874">}</span><span class="op" id="7407875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407880">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407886">Name</span><span class="op" id="7407890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7407895">&#34;bar.txt&#34;</span><span class="op" id="7407904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407910">Content</span><span class="op" id="7407917">:</span>&nbsp;<span class="op" id="7407919">[</span><span class="op" id="7407920">]</span><span class="builtintype" id="7407921">byte</span><span class="op" id="7407925">(</span><span class="string" id="7407926">&#34;bar\n&#34;</span><span class="op" id="7407933">)</span><span class="op" id="7407934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407940">Mtime</span><span class="op" id="7407945">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7407949">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7407968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407974">Mode</span><span class="op" id="7407978">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7407983">0644</span><span class="op" id="7407987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407992">}</span><span class="op" id="7407993">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407997">}</span><span class="op" id="7407998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408001">}</span><span class="op" id="7408002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7408005">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7408067">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408130">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408134">Name</span><span class="op" id="7408138">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7408142">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7408166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408170">Source</span><span class="op" id="7408176">:</span>&nbsp;<span class="ident" id="7408178">returnCorruptNotStreamedZip</span><span class="op" id="7408205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408209">File</span><span class="op" id="7408213">:</span>&nbsp;<span class="op" id="7408215">[</span><span class="op" id="7408216">]</span><span class="ident" id="7408217">ZipTestFile</span><span class="op" id="7408228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408239">Name</span><span class="op" id="7408243">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408251">&#34;foo.txt&#34;</span><span class="op" id="7408260">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408266">Content</span><span class="op" id="7408273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408278">[</span><span class="op" id="7408279">]</span><span class="builtintype" id="7408280">byte</span><span class="op" id="7408284">(</span><span class="string" id="7408285">&#34;foo\n&#34;</span><span class="op" id="7408292">)</span><span class="op" id="7408293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408299">Mtime</span><span class="op" id="7408304">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408311">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7408330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408336">Mode</span><span class="op" id="7408340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408348">0644</span><span class="op" id="7408352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408358">ContentErr</span><span class="op" id="7408368">:</span>&nbsp;<span class="ident" id="7408370">ErrChecksum</span><span class="op" id="7408381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408386">}</span><span class="op" id="7408387">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408398">Name</span><span class="op" id="7408402">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408407">&#34;bar.txt&#34;</span><span class="op" id="7408416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408422">Content</span><span class="op" id="7408429">:</span>&nbsp;<span class="op" id="7408431">[</span><span class="op" id="7408432">]</span><span class="builtintype" id="7408433">byte</span><span class="op" id="7408437">(</span><span class="string" id="7408438">&#34;bar\n&#34;</span><span class="op" id="7408445">)</span><span class="op" id="7408446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408452">Mtime</span><span class="op" id="7408457">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7408461">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7408480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408486">Mode</span><span class="op" id="7408490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408495">0644</span><span class="op" id="7408499">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408504">}</span><span class="op" id="7408505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408509">}</span><span class="op" id="7408510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408513">}</span><span class="op" id="7408514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408521">Name</span><span class="op" id="7408525">:</span>&nbsp;<span class="string" id="7408527">&#34;zip64.zip&#34;</span><span class="op" id="7408538">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408542">File</span><span class="op" id="7408546">:</span>&nbsp;<span class="op" id="7408548">[</span><span class="op" id="7408549">]</span><span class="ident" id="7408550">ZipTestFile</span><span class="op" id="7408561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408572">Name</span><span class="op" id="7408576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408581">&#34;README&#34;</span><span class="op" id="7408589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408595">Content</span><span class="op" id="7408602">:</span>&nbsp;<span class="op" id="7408604">[</span><span class="op" id="7408605">]</span><span class="builtintype" id="7408606">byte</span><span class="op" id="7408610">(</span><span class="string" id="7408611">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7408650">)</span><span class="op" id="7408651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408657">Mtime</span><span class="op" id="7408662">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7408666">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7408685">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408691">Mode</span><span class="op" id="7408695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408700">0644</span><span class="op" id="7408704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408709">}</span><span class="op" id="7408710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408714">}</span><span class="op" id="7408715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408718">}</span><span class="op" id="7408719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7408722">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408803">Name</span><span class="op" id="7408807">:</span>&nbsp;<span class="string" id="7408809">&#34;zip64-2.zip&#34;</span><span class="op" id="7408822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408826">File</span><span class="op" id="7408830">:</span>&nbsp;<span class="op" id="7408832">[</span><span class="op" id="7408833">]</span><span class="ident" id="7408834">ZipTestFile</span><span class="op" id="7408845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408856">Name</span><span class="op" id="7408860">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408865">&#34;README&#34;</span><span class="op" id="7408873">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408879">Content</span><span class="op" id="7408886">:</span>&nbsp;<span class="op" id="7408888">[</span><span class="op" id="7408889">]</span><span class="builtintype" id="7408890">byte</span><span class="op" id="7408894">(</span><span class="string" id="7408895">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7408934">)</span><span class="op" id="7408935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408941">Mtime</span><span class="op" id="7408946">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7408950">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7408969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408975">Mode</span><span class="op" id="7408979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408984">0644</span><span class="op" id="7408988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408993">}</span><span class="op" id="7408994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408998">}</span><span class="op" id="7408999">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409002">}</span><span class="op" id="7409003">,</span><br>
<span class="lineno"></span><span class="op" id="7409005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7409008">var</span>&nbsp;<span class="ident" id="7409012">crossPlatform</span>&nbsp;<span class="op" id="7409026">=</span>&nbsp;<span class="op" id="7409028">[</span><span class="op" id="7409029">]</span><span class="ident" id="7409030">ZipTestFile</span><span class="op" id="7409041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409044">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409048">Name</span><span class="op" id="7409052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409057">&#34;hello&#34;</span><span class="op" id="7409064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409068">Content</span><span class="op" id="7409075">:</span>&nbsp;<span class="op" id="7409077">[</span><span class="op" id="7409078">]</span><span class="builtintype" id="7409079">byte</span><span class="op" id="7409083">(</span><span class="string" id="7409084">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7409096">)</span><span class="op" id="7409097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409101">Mode</span><span class="op" id="7409105">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409110">0666</span><span class="op" id="7409114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409117">}</span><span class="op" id="7409118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409121">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409125">Name</span><span class="op" id="7409129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409134">&#34;dir/bar&#34;</span><span class="op" id="7409143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409147">Content</span><span class="op" id="7409154">:</span>&nbsp;<span class="op" id="7409156">[</span><span class="op" id="7409157">]</span><span class="builtintype" id="7409158">byte</span><span class="op" id="7409162">(</span><span class="string" id="7409163">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7409173">)</span><span class="op" id="7409174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409178">Mode</span><span class="op" id="7409182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409187">0666</span><span class="op" id="7409191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409194">}</span><span class="op" id="7409195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409198">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409202">Name</span><span class="op" id="7409206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409211">&#34;dir/empty/&#34;</span><span class="op" id="7409223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409227">Content</span><span class="op" id="7409234">:</span>&nbsp;<span class="op" id="7409236">[</span><span class="op" id="7409237">]</span><span class="builtintype" id="7409238">byte</span><span class="op" id="7409242">{</span><span class="op" id="7409243">}</span><span class="op" id="7409244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409248">Mode</span><span class="op" id="7409252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409257">os</span><span class="op" id="7409259">.</span><span class="ident" id="7409260">ModeDir</span>&nbsp;<span class="op" id="7409268">|</span>&nbsp;<span class="num" id="7409270">0777</span><span class="op" id="7409274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409277">}</span><span class="op" id="7409278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409281">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409285">Name</span><span class="op" id="7409289">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409294">&#34;readonly&#34;</span><span class="op" id="7409304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409308">Content</span><span class="op" id="7409315">:</span>&nbsp;<span class="op" id="7409317">[</span><span class="op" id="7409318">]</span><span class="builtintype" id="7409319">byte</span><span class="op" id="7409323">(</span><span class="string" id="7409324">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7409340">)</span><span class="op" id="7409341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409345">Mode</span><span class="op" id="7409349">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409354">0444</span><span class="op" id="7409358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409361">}</span><span class="op" id="7409362">,</span><br>
<span class="lineno"></span><span class="op" id="7409364">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7409367">func</span>&nbsp;<span class="ident" id="7409372">TestReader</span><span class="op" id="7409382">(</span><span class="ident" id="7409383">t</span>&nbsp;<span class="op" id="7409385">*</span><span class="ident" id="7409386">testing</span><span class="op" id="7409393">.</span><span class="ident" id="7409394">T</span><span class="op" id="7409395">)</span>&nbsp;<span class="op" id="7409397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409400">for</span>&nbsp;<span class="ident" id="7409404">_</span><span class="op" id="7409405">,</span>&nbsp;<span class="ident" id="7409407">zt</span>&nbsp;<span class="op" id="7409410">:=</span>&nbsp;<span class="keyword" id="7409413">range</span>&nbsp;<span class="ident" id="7409419">tests</span>&nbsp;<span class="op" id="7409425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409429">readTestZip</span><span class="op" id="7409440">(</span><span class="ident" id="7409441">t</span><span class="op" id="7409442">,</span>&nbsp;<span class="ident" id="7409444">zt</span><span class="op" id="7409446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409449">}</span><br>
<span class="lineno">280</span><span class="op" id="7409451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7409454">func</span>&nbsp;<span class="ident" id="7409459">readTestZip</span><span class="op" id="7409470">(</span><span class="ident" id="7409471">t</span>&nbsp;<span class="op" id="7409473">*</span><span class="ident" id="7409474">testing</span><span class="op" id="7409481">.</span><span class="ident" id="7409482">T</span><span class="op" id="7409483">,</span>&nbsp;<span class="ident" id="7409485">zt</span>&nbsp;<span class="ident" id="7409488">ZipTest</span><span class="op" id="7409495">)</span>&nbsp;<span class="op" id="7409497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409500">var</span>&nbsp;<span class="ident" id="7409504">z</span>&nbsp;<span class="op" id="7409506">*</span><span class="ident" id="7409507">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409515">var</span>&nbsp;<span class="ident" id="7409519">err</span>&nbsp;<span class="builtintype" id="7409523">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409530">if</span>&nbsp;<span class="ident" id="7409533">zt</span><span class="op" id="7409535">.</span><span class="ident" id="7409536">Source</span>&nbsp;<span class="op" id="7409543">!=</span>&nbsp;<span class="builtintype" id="7409546">nil</span>&nbsp;<span class="op" id="7409550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409554">rat</span><span class="op" id="7409557">,</span>&nbsp;<span class="ident" id="7409559">size</span>&nbsp;<span class="op" id="7409564">:=</span>&nbsp;<span class="ident" id="7409567">zt</span><span class="op" id="7409569">.</span><span class="ident" id="7409570">Source</span><span class="op" id="7409576">(</span><span class="op" id="7409577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409581">z</span><span class="op" id="7409582">,</span>&nbsp;<span class="ident" id="7409584">err</span>&nbsp;<span class="op" id="7409588">=</span>&nbsp;<span class="ident" id="7409590">NewReader</span><span class="op" id="7409599">(</span><span class="ident" id="7409600">rat</span><span class="op" id="7409603">,</span>&nbsp;<span class="ident" id="7409605">size</span><span class="op" id="7409609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409612">}</span>&nbsp;<span class="keyword" id="7409614">else</span>&nbsp;<span class="op" id="7409619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409623">var</span>&nbsp;<span class="ident" id="7409627">rc</span>&nbsp;<span class="op" id="7409630">*</span><span class="ident" id="7409631">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409644">rc</span><span class="op" id="7409646">,</span>&nbsp;<span class="ident" id="7409648">err</span>&nbsp;<span class="op" id="7409652">=</span>&nbsp;<span class="ident" id="7409654">OpenReader</span><span class="op" id="7409664">(</span><span class="ident" id="7409665">filepath</span><span class="op" id="7409673">.</span><span class="ident" id="7409674">Join</span><span class="op" id="7409678">(</span><span class="string" id="7409679">&#34;testdata&#34;</span><span class="op" id="7409689">,</span>&nbsp;<span class="ident" id="7409691">zt</span><span class="op" id="7409693">.</span><span class="ident" id="7409694">Name</span><span class="op" id="7409698">)</span><span class="op" id="7409699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409703">if</span>&nbsp;<span class="ident" id="7409706">err</span>&nbsp;<span class="op" id="7409710">==</span>&nbsp;<span class="builtintype" id="7409713">nil</span>&nbsp;<span class="op" id="7409717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409722">defer</span>&nbsp;<span class="ident" id="7409728">rc</span><span class="op" id="7409730">.</span><span class="ident" id="7409731">Close</span><span class="op" id="7409736">(</span><span class="op" id="7409737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409742">z</span>&nbsp;<span class="op" id="7409744">=</span>&nbsp;<span class="op" id="7409746">&amp;</span><span class="ident" id="7409747">rc</span><span class="op" id="7409749">.</span><span class="ident" id="7409750">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409759">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409765">if</span>&nbsp;<span class="ident" id="7409768">err</span>&nbsp;<span class="op" id="7409772">!=</span>&nbsp;<span class="ident" id="7409775">zt</span><span class="op" id="7409777">.</span><span class="ident" id="7409778">Error</span>&nbsp;<span class="op" id="7409784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409788">t</span><span class="op" id="7409789">.</span><span class="ident" id="7409790">Errorf</span><span class="op" id="7409796">(</span><span class="string" id="7409797">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7409820">,</span>&nbsp;<span class="ident" id="7409822">zt</span><span class="op" id="7409824">.</span><span class="ident" id="7409825">Name</span><span class="op" id="7409829">,</span>&nbsp;<span class="ident" id="7409831">err</span><span class="op" id="7409834">,</span>&nbsp;<span class="ident" id="7409836">zt</span><span class="op" id="7409838">.</span><span class="ident" id="7409839">Error</span><span class="op" id="7409844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409848">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409856">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7409860">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409888">if</span>&nbsp;<span class="ident" id="7409891">err</span>&nbsp;<span class="op" id="7409895">==</span>&nbsp;<span class="ident" id="7409898">ErrFormat</span>&nbsp;<span class="op" id="7409908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409912">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409920">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7409924">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7409972">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410036">if</span>&nbsp;<span class="ident" id="7410039">zt</span><span class="op" id="7410041">.</span><span class="ident" id="7410042">File</span>&nbsp;<span class="op" id="7410047">==</span>&nbsp;<span class="builtintype" id="7410050">nil</span>&nbsp;<span class="op" id="7410054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410058">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410070">if</span>&nbsp;<span class="ident" id="7410073">z</span><span class="op" id="7410074">.</span><span class="ident" id="7410075">Comment</span>&nbsp;<span class="op" id="7410083">!=</span>&nbsp;<span class="ident" id="7410086">zt</span><span class="op" id="7410088">.</span><span class="ident" id="7410089">Comment</span>&nbsp;<span class="op" id="7410097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410101">t</span><span class="op" id="7410102">.</span><span class="ident" id="7410103">Errorf</span><span class="op" id="7410109">(</span><span class="string" id="7410110">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7410135">,</span>&nbsp;<span class="ident" id="7410137">zt</span><span class="op" id="7410139">.</span><span class="ident" id="7410140">Name</span><span class="op" id="7410144">,</span>&nbsp;<span class="ident" id="7410146">z</span><span class="op" id="7410147">.</span><span class="ident" id="7410148">Comment</span><span class="op" id="7410155">,</span>&nbsp;<span class="ident" id="7410157">zt</span><span class="op" id="7410159">.</span><span class="ident" id="7410160">Comment</span><span class="op" id="7410167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410170">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410173">if</span>&nbsp;<span class="builtinfunc" id="7410176">len</span><span class="op" id="7410179">(</span><span class="ident" id="7410180">z</span><span class="op" id="7410181">.</span><span class="ident" id="7410182">File</span><span class="op" id="7410186">)</span>&nbsp;<span class="op" id="7410188">!=</span>&nbsp;<span class="builtinfunc" id="7410191">len</span><span class="op" id="7410194">(</span><span class="ident" id="7410195">zt</span><span class="op" id="7410197">.</span><span class="ident" id="7410198">File</span><span class="op" id="7410202">)</span>&nbsp;<span class="op" id="7410204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410208">t</span><span class="op" id="7410209">.</span><span class="ident" id="7410210">Fatalf</span><span class="op" id="7410216">(</span><span class="string" id="7410217">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7410245">,</span>&nbsp;<span class="ident" id="7410247">zt</span><span class="op" id="7410249">.</span><span class="ident" id="7410250">Name</span><span class="op" id="7410254">,</span>&nbsp;<span class="builtinfunc" id="7410256">len</span><span class="op" id="7410259">(</span><span class="ident" id="7410260">z</span><span class="op" id="7410261">.</span><span class="ident" id="7410262">File</span><span class="op" id="7410266">)</span><span class="op" id="7410267">,</span>&nbsp;<span class="builtinfunc" id="7410269">len</span><span class="op" id="7410272">(</span><span class="ident" id="7410273">zt</span><span class="op" id="7410275">.</span><span class="ident" id="7410276">File</span><span class="op" id="7410280">)</span><span class="op" id="7410281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7410288">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410315">for</span>&nbsp;<span class="ident" id="7410319">i</span><span class="op" id="7410320">,</span>&nbsp;<span class="ident" id="7410322">ft</span>&nbsp;<span class="op" id="7410325">:=</span>&nbsp;<span class="keyword" id="7410328">range</span>&nbsp;<span class="ident" id="7410334">zt</span><span class="op" id="7410336">.</span><span class="ident" id="7410337">File</span>&nbsp;<span class="op" id="7410342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410346">readTestFile</span><span class="op" id="7410358">(</span><span class="ident" id="7410359">t</span><span class="op" id="7410360">,</span>&nbsp;<span class="ident" id="7410362">zt</span><span class="op" id="7410364">,</span>&nbsp;<span class="ident" id="7410366">ft</span><span class="op" id="7410368">,</span>&nbsp;<span class="ident" id="7410370">z</span><span class="op" id="7410371">.</span><span class="ident" id="7410372">File</span><span class="op" id="7410376">[</span><span class="ident" id="7410377">i</span><span class="op" id="7410378">]</span><span class="op" id="7410379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7410386">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410414">n</span>&nbsp;<span class="op" id="7410416">:=</span>&nbsp;<span class="num" id="7410419">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410422">done</span>&nbsp;<span class="op" id="7410427">:=</span>&nbsp;<span class="builtinfunc" id="7410430">make</span><span class="op" id="7410434">(</span><span class="keyword" id="7410435">chan</span>&nbsp;<span class="builtintype" id="7410440">bool</span><span class="op" id="7410444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410447">for</span>&nbsp;<span class="ident" id="7410451">i</span>&nbsp;<span class="op" id="7410453">:=</span>&nbsp;<span class="num" id="7410456">0</span><span class="op" id="7410457">;</span>&nbsp;<span class="ident" id="7410459">i</span>&nbsp;<span class="op" id="7410461">&lt;</span>&nbsp;<span class="num" id="7410463">5</span><span class="op" id="7410464">;</span>&nbsp;<span class="ident" id="7410466">i</span><span class="op" id="7410467">++</span>&nbsp;<span class="op" id="7410470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410474">for</span>&nbsp;<span class="ident" id="7410478">j</span><span class="op" id="7410479">,</span>&nbsp;<span class="ident" id="7410481">ft</span>&nbsp;<span class="op" id="7410484">:=</span>&nbsp;<span class="keyword" id="7410487">range</span>&nbsp;<span class="ident" id="7410493">zt</span><span class="op" id="7410495">.</span><span class="ident" id="7410496">File</span>&nbsp;<span class="op" id="7410501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410506">go</span>&nbsp;<span class="keyword" id="7410509">func</span><span class="op" id="7410513">(</span><span class="ident" id="7410514">j</span>&nbsp;<span class="builtintype" id="7410516">int</span><span class="op" id="7410519">,</span>&nbsp;<span class="ident" id="7410521">ft</span>&nbsp;<span class="ident" id="7410524">ZipTestFile</span><span class="op" id="7410535">)</span>&nbsp;<span class="op" id="7410537">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410543">readTestFile</span><span class="op" id="7410555">(</span><span class="ident" id="7410556">t</span><span class="op" id="7410557">,</span>&nbsp;<span class="ident" id="7410559">zt</span><span class="op" id="7410561">,</span>&nbsp;<span class="ident" id="7410563">ft</span><span class="op" id="7410565">,</span>&nbsp;<span class="ident" id="7410567">z</span><span class="op" id="7410568">.</span><span class="ident" id="7410569">File</span><span class="op" id="7410573">[</span><span class="ident" id="7410574">j</span><span class="op" id="7410575">]</span><span class="op" id="7410576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410582">done</span>&nbsp;<span class="op" id="7410587">&lt;-</span>&nbsp;<span class="builtintype" id="7410590">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410598">}</span><span class="op" id="7410599">(</span><span class="ident" id="7410600">j</span><span class="op" id="7410601">,</span>&nbsp;<span class="ident" id="7410603">ft</span><span class="op" id="7410605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410610">n</span><span class="op" id="7410611">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410616">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410622">for</span>&nbsp;<span class="op" id="7410626">;</span>&nbsp;<span class="ident" id="7410628">n</span>&nbsp;<span class="op" id="7410630">&gt;</span>&nbsp;<span class="num" id="7410632">0</span><span class="op" id="7410633">;</span>&nbsp;<span class="ident" id="7410635">n</span><span class="op" id="7410636">--</span>&nbsp;<span class="op" id="7410639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410643">&lt;-</span><span class="ident" id="7410645">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410651">}</span><br>
<span class="lineno"></span><span class="op" id="7410653">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7410656">func</span>&nbsp;<span class="ident" id="7410661">readTestFile</span><span class="op" id="7410673">(</span><span class="ident" id="7410674">t</span>&nbsp;<span class="op" id="7410676">*</span><span class="ident" id="7410677">testing</span><span class="op" id="7410684">.</span><span class="ident" id="7410685">T</span><span class="op" id="7410686">,</span>&nbsp;<span class="ident" id="7410688">zt</span>&nbsp;<span class="ident" id="7410691">ZipTest</span><span class="op" id="7410698">,</span>&nbsp;<span class="ident" id="7410700">ft</span>&nbsp;<span class="ident" id="7410703">ZipTestFile</span><span class="op" id="7410714">,</span>&nbsp;<span class="ident" id="7410716">f</span>&nbsp;<span class="op" id="7410718">*</span><span class="ident" id="7410719">File</span><span class="op" id="7410723">)</span>&nbsp;<span class="op" id="7410725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410728">if</span>&nbsp;<span class="ident" id="7410731">f</span><span class="op" id="7410732">.</span><span class="ident" id="7410733">Name</span>&nbsp;<span class="op" id="7410738">!=</span>&nbsp;<span class="ident" id="7410741">ft</span><span class="op" id="7410743">.</span><span class="ident" id="7410744">Name</span>&nbsp;<span class="op" id="7410749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410753">t</span><span class="op" id="7410754">.</span><span class="ident" id="7410755">Errorf</span><span class="op" id="7410761">(</span><span class="string" id="7410762">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7410784">,</span>&nbsp;<span class="ident" id="7410786">zt</span><span class="op" id="7410788">.</span><span class="ident" id="7410789">Name</span><span class="op" id="7410793">,</span>&nbsp;<span class="ident" id="7410795">f</span><span class="op" id="7410796">.</span><span class="ident" id="7410797">Name</span><span class="op" id="7410801">,</span>&nbsp;<span class="ident" id="7410803">ft</span><span class="op" id="7410805">.</span><span class="ident" id="7410806">Name</span><span class="op" id="7410810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410813">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410817">if</span>&nbsp;<span class="ident" id="7410820">ft</span><span class="op" id="7410822">.</span><span class="ident" id="7410823">Mtime</span>&nbsp;<span class="op" id="7410829">!=</span>&nbsp;<span class="string" id="7410832">&#34;&#34;</span>&nbsp;<span class="op" id="7410835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410839">mtime</span><span class="op" id="7410844">,</span>&nbsp;<span class="ident" id="7410846">err</span>&nbsp;<span class="op" id="7410850">:=</span>&nbsp;<span class="ident" id="7410853">time</span><span class="op" id="7410857">.</span><span class="ident" id="7410858">Parse</span><span class="op" id="7410863">(</span><span class="string" id="7410864">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7410883">,</span>&nbsp;<span class="ident" id="7410885">ft</span><span class="op" id="7410887">.</span><span class="ident" id="7410888">Mtime</span><span class="op" id="7410893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410897">if</span>&nbsp;<span class="ident" id="7410900">err</span>&nbsp;<span class="op" id="7410904">!=</span>&nbsp;<span class="builtintype" id="7410907">nil</span>&nbsp;<span class="op" id="7410911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410916">t</span><span class="op" id="7410917">.</span><span class="ident" id="7410918">Error</span><span class="op" id="7410923">(</span><span class="ident" id="7410924">err</span><span class="op" id="7410927">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410932">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410945">if</span>&nbsp;<span class="ident" id="7410948">ft</span>&nbsp;<span class="op" id="7410951">:=</span>&nbsp;<span class="ident" id="7410954">f</span><span class="op" id="7410955">.</span><span class="ident" id="7410956">ModTime</span><span class="op" id="7410963">(</span><span class="op" id="7410964">)</span><span class="op" id="7410965">;</span>&nbsp;<span class="op" id="7410967">!</span><span class="ident" id="7410968">ft</span><span class="op" id="7410970">.</span><span class="ident" id="7410971">Equal</span><span class="op" id="7410976">(</span><span class="ident" id="7410977">mtime</span><span class="op" id="7410982">)</span>&nbsp;<span class="op" id="7410984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410989">t</span><span class="op" id="7410990">.</span><span class="ident" id="7410991">Errorf</span><span class="op" id="7410997">(</span><span class="string" id="7410998">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7411025">,</span>&nbsp;<span class="ident" id="7411027">zt</span><span class="op" id="7411029">.</span><span class="ident" id="7411030">Name</span><span class="op" id="7411034">,</span>&nbsp;<span class="ident" id="7411036">f</span><span class="op" id="7411037">.</span><span class="ident" id="7411038">Name</span><span class="op" id="7411042">,</span>&nbsp;<span class="ident" id="7411044">ft</span><span class="op" id="7411046">,</span>&nbsp;<span class="ident" id="7411048">mtime</span><span class="op" id="7411053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411057">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411064">testFileMode</span><span class="op" id="7411076">(</span><span class="ident" id="7411077">t</span><span class="op" id="7411078">,</span>&nbsp;<span class="ident" id="7411080">zt</span><span class="op" id="7411082">.</span><span class="ident" id="7411083">Name</span><span class="op" id="7411087">,</span>&nbsp;<span class="ident" id="7411089">f</span><span class="op" id="7411090">,</span>&nbsp;<span class="ident" id="7411092">ft</span><span class="op" id="7411094">.</span><span class="ident" id="7411095">Mode</span><span class="op" id="7411099">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411103">var</span>&nbsp;<span class="ident" id="7411107">b</span>&nbsp;<span class="ident" id="7411109">bytes</span><span class="op" id="7411114">.</span><span class="ident" id="7411115">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411123">r</span><span class="op" id="7411124">,</span>&nbsp;<span class="ident" id="7411126">err</span>&nbsp;<span class="op" id="7411130">:=</span>&nbsp;<span class="ident" id="7411133">f</span><span class="op" id="7411134">.</span><span class="ident" id="7411135">Open</span><span class="op" id="7411139">(</span><span class="op" id="7411140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411143">if</span>&nbsp;<span class="ident" id="7411146">err</span>&nbsp;<span class="op" id="7411150">!=</span>&nbsp;<span class="builtintype" id="7411153">nil</span>&nbsp;<span class="op" id="7411157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411161">t</span><span class="op" id="7411162">.</span><span class="ident" id="7411163">Errorf</span><span class="op" id="7411169">(</span><span class="string" id="7411170">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7411178">,</span>&nbsp;<span class="ident" id="7411180">zt</span><span class="op" id="7411182">.</span><span class="ident" id="7411183">Name</span><span class="op" id="7411187">,</span>&nbsp;<span class="ident" id="7411189">err</span><span class="op" id="7411192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411196">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411204">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411208">_</span><span class="op" id="7411209">,</span>&nbsp;<span class="ident" id="7411211">err</span>&nbsp;<span class="op" id="7411215">=</span>&nbsp;<span class="ident" id="7411217">io</span><span class="op" id="7411219">.</span><span class="ident" id="7411220">Copy</span><span class="op" id="7411224">(</span><span class="op" id="7411225">&amp;</span><span class="ident" id="7411226">b</span><span class="op" id="7411227">,</span>&nbsp;<span class="ident" id="7411229">r</span><span class="op" id="7411230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411233">if</span>&nbsp;<span class="ident" id="7411236">err</span>&nbsp;<span class="op" id="7411240">!=</span>&nbsp;<span class="ident" id="7411243">ft</span><span class="op" id="7411245">.</span><span class="ident" id="7411246">ContentErr</span>&nbsp;<span class="op" id="7411257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411261">t</span><span class="op" id="7411262">.</span><span class="ident" id="7411263">Errorf</span><span class="op" id="7411269">(</span><span class="string" id="7411270">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7411306">,</span>&nbsp;<span class="ident" id="7411308">zt</span><span class="op" id="7411310">.</span><span class="ident" id="7411311">Name</span><span class="op" id="7411315">,</span>&nbsp;<span class="ident" id="7411317">err</span><span class="op" id="7411320">,</span>&nbsp;<span class="ident" id="7411322">ft</span><span class="op" id="7411324">.</span><span class="ident" id="7411325">ContentErr</span><span class="op" id="7411335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411338">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411341">if</span>&nbsp;<span class="ident" id="7411344">err</span>&nbsp;<span class="op" id="7411348">!=</span>&nbsp;<span class="builtintype" id="7411351">nil</span>&nbsp;<span class="op" id="7411355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411359">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411370">r</span><span class="op" id="7411371">.</span><span class="ident" id="7411372">Close</span><span class="op" id="7411377">(</span><span class="op" id="7411378">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411382">size</span>&nbsp;<span class="op" id="7411387">:=</span>&nbsp;<span class="ident" id="7411390">uint64</span><span class="op" id="7411396">(</span><span class="ident" id="7411397">f</span><span class="op" id="7411398">.</span><span class="ident" id="7411399">UncompressedSize</span><span class="op" id="7411415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411418">if</span>&nbsp;<span class="ident" id="7411421">size</span>&nbsp;<span class="op" id="7411426">==</span>&nbsp;<span class="ident" id="7411429">uint32max</span>&nbsp;<span class="op" id="7411439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411443">size</span>&nbsp;<span class="op" id="7411448">=</span>&nbsp;<span class="ident" id="7411450">f</span><span class="op" id="7411451">.</span><span class="ident" id="7411452">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411475">if</span>&nbsp;<span class="ident" id="7411478">g</span>&nbsp;<span class="op" id="7411480">:=</span>&nbsp;<span class="ident" id="7411483">uint64</span><span class="op" id="7411489">(</span><span class="ident" id="7411490">b</span><span class="op" id="7411491">.</span><span class="ident" id="7411492">Len</span><span class="op" id="7411495">(</span><span class="op" id="7411496">)</span><span class="op" id="7411497">)</span><span class="op" id="7411498">;</span>&nbsp;<span class="ident" id="7411500">g</span>&nbsp;<span class="op" id="7411502">!=</span>&nbsp;<span class="ident" id="7411505">size</span>&nbsp;<span class="op" id="7411510">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411514">t</span><span class="op" id="7411515">.</span><span class="ident" id="7411516">Errorf</span><span class="op" id="7411522">(</span><span class="string" id="7411523">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7411571">,</span>&nbsp;<span class="ident" id="7411573">f</span><span class="op" id="7411574">.</span><span class="ident" id="7411575">Name</span><span class="op" id="7411579">,</span>&nbsp;<span class="ident" id="7411581">g</span><span class="op" id="7411582">,</span>&nbsp;<span class="ident" id="7411584">size</span><span class="op" id="7411588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411595">var</span>&nbsp;<span class="ident" id="7411599">c</span>&nbsp;<span class="op" id="7411601">[</span><span class="op" id="7411602">]</span><span class="builtintype" id="7411603">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411609">if</span>&nbsp;<span class="ident" id="7411612">ft</span><span class="op" id="7411614">.</span><span class="ident" id="7411615">Content</span>&nbsp;<span class="op" id="7411623">!=</span>&nbsp;<span class="builtintype" id="7411626">nil</span>&nbsp;<span class="op" id="7411630">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411634">c</span>&nbsp;<span class="op" id="7411636">=</span>&nbsp;<span class="ident" id="7411638">ft</span><span class="op" id="7411640">.</span><span class="ident" id="7411641">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411650">}</span>&nbsp;<span class="keyword" id="7411652">else</span>&nbsp;<span class="keyword" id="7411657">if</span>&nbsp;<span class="ident" id="7411660">c</span><span class="op" id="7411661">,</span>&nbsp;<span class="ident" id="7411663">err</span>&nbsp;<span class="op" id="7411667">=</span>&nbsp;<span class="ident" id="7411669">ioutil</span><span class="op" id="7411675">.</span><span class="ident" id="7411676">ReadFile</span><span class="op" id="7411684">(</span><span class="string" id="7411685">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7411697">+</span>&nbsp;<span class="ident" id="7411699">ft</span><span class="op" id="7411701">.</span><span class="ident" id="7411702">File</span><span class="op" id="7411706">)</span><span class="op" id="7411707">;</span>&nbsp;<span class="ident" id="7411709">err</span>&nbsp;<span class="op" id="7411713">!=</span>&nbsp;<span class="builtintype" id="7411716">nil</span>&nbsp;<span class="op" id="7411720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411724">t</span><span class="op" id="7411725">.</span><span class="ident" id="7411726">Error</span><span class="op" id="7411731">(</span><span class="ident" id="7411732">err</span><span class="op" id="7411735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411739">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411747">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411751">if</span>&nbsp;<span class="ident" id="7411754">b</span><span class="op" id="7411755">.</span><span class="ident" id="7411756">Len</span><span class="op" id="7411759">(</span><span class="op" id="7411760">)</span>&nbsp;<span class="op" id="7411762">!=</span>&nbsp;<span class="builtinfunc" id="7411765">len</span><span class="op" id="7411768">(</span><span class="ident" id="7411769">c</span><span class="op" id="7411770">)</span>&nbsp;<span class="op" id="7411772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411776">t</span><span class="op" id="7411777">.</span><span class="ident" id="7411778">Errorf</span><span class="op" id="7411784">(</span><span class="string" id="7411785">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7411806">,</span>&nbsp;<span class="ident" id="7411808">f</span><span class="op" id="7411809">.</span><span class="ident" id="7411810">Name</span><span class="op" id="7411814">,</span>&nbsp;<span class="ident" id="7411816">b</span><span class="op" id="7411817">.</span><span class="ident" id="7411818">Len</span><span class="op" id="7411821">(</span><span class="op" id="7411822">)</span><span class="op" id="7411823">,</span>&nbsp;<span class="builtinfunc" id="7411825">len</span><span class="op" id="7411828">(</span><span class="ident" id="7411829">c</span><span class="op" id="7411830">)</span><span class="op" id="7411831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411835">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411843">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411847">for</span>&nbsp;<span class="ident" id="7411851">i</span><span class="op" id="7411852">,</span>&nbsp;<span class="ident" id="7411854">b</span>&nbsp;<span class="op" id="7411856">:=</span>&nbsp;<span class="keyword" id="7411859">range</span>&nbsp;<span class="ident" id="7411865">b</span><span class="op" id="7411866">.</span><span class="ident" id="7411867">Bytes</span><span class="op" id="7411872">(</span><span class="op" id="7411873">)</span>&nbsp;<span class="op" id="7411875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411879">if</span>&nbsp;<span class="ident" id="7411882">b</span>&nbsp;<span class="op" id="7411884">!=</span>&nbsp;<span class="ident" id="7411887">c</span><span class="op" id="7411888">[</span><span class="ident" id="7411889">i</span><span class="op" id="7411890">]</span>&nbsp;<span class="op" id="7411892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7411897">t</span><span class="op" id="7411898">.</span><span class="ident" id="7411899">Errorf</span><span class="op" id="7411905">(</span><span class="string" id="7411906">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7411934">,</span>&nbsp;<span class="ident" id="7411936">f</span><span class="op" id="7411937">.</span><span class="ident" id="7411938">Name</span><span class="op" id="7411942">,</span>&nbsp;<span class="ident" id="7411944">i</span><span class="op" id="7411945">,</span>&nbsp;<span class="ident" id="7411947">b</span><span class="op" id="7411948">,</span>&nbsp;<span class="ident" id="7411950">c</span><span class="op" id="7411951">[</span><span class="ident" id="7411952">i</span><span class="op" id="7411953">]</span><span class="op" id="7411954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7411959">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7411971">}</span><br>
<span class="lineno"></span><span class="op" id="7411973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7411976">func</span>&nbsp;<span class="ident" id="7411981">testFileMode</span><span class="op" id="7411993">(</span><span class="ident" id="7411994">t</span>&nbsp;<span class="op" id="7411996">*</span><span class="ident" id="7411997">testing</span><span class="op" id="7412004">.</span><span class="ident" id="7412005">T</span><span class="op" id="7412006">,</span>&nbsp;<span class="ident" id="7412008">zipName</span>&nbsp;<span class="builtintype" id="7412016">string</span><span class="op" id="7412022">,</span>&nbsp;<span class="ident" id="7412024">f</span>&nbsp;<span class="op" id="7412026">*</span><span class="ident" id="7412027">File</span><span class="op" id="7412031">,</span>&nbsp;<span class="ident" id="7412033">want</span>&nbsp;<span class="ident" id="7412038">os</span><span class="op" id="7412040">.</span><span class="ident" id="7412041">FileMode</span><span class="op" id="7412049">)</span>&nbsp;<span class="op" id="7412051">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412054">mode</span>&nbsp;<span class="op" id="7412059">:=</span>&nbsp;<span class="ident" id="7412062">f</span><span class="op" id="7412063">.</span><span class="ident" id="7412064">Mode</span><span class="op" id="7412068">(</span><span class="op" id="7412069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7412072">if</span>&nbsp;<span class="ident" id="7412075">want</span>&nbsp;<span class="op" id="7412080">==</span>&nbsp;<span class="num" id="7412083">0</span>&nbsp;<span class="op" id="7412085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412089">t</span><span class="op" id="7412090">.</span><span class="ident" id="7412091">Errorf</span><span class="op" id="7412097">(</span><span class="string" id="7412098">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7412130">,</span>&nbsp;<span class="ident" id="7412132">zipName</span><span class="op" id="7412139">,</span>&nbsp;<span class="ident" id="7412141">f</span><span class="op" id="7412142">.</span><span class="ident" id="7412143">Name</span><span class="op" id="7412147">,</span>&nbsp;<span class="ident" id="7412149">mode</span><span class="op" id="7412153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7412156">}</span>&nbsp;<span class="keyword" id="7412158">else</span>&nbsp;<span class="keyword" id="7412163">if</span>&nbsp;<span class="ident" id="7412166">mode</span>&nbsp;<span class="op" id="7412171">!=</span>&nbsp;<span class="ident" id="7412174">want</span>&nbsp;<span class="op" id="7412179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412183">t</span><span class="op" id="7412184">.</span><span class="ident" id="7412185">Errorf</span><span class="op" id="7412191">(</span><span class="string" id="7412192">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7412222">,</span>&nbsp;<span class="ident" id="7412224">zipName</span><span class="op" id="7412231">,</span>&nbsp;<span class="ident" id="7412233">f</span><span class="op" id="7412234">.</span><span class="ident" id="7412235">Name</span><span class="op" id="7412239">,</span>&nbsp;<span class="ident" id="7412241">want</span><span class="op" id="7412245">,</span>&nbsp;<span class="ident" id="7412247">mode</span><span class="op" id="7412251">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7412254">}</span><br>
<span class="lineno"></span><span class="op" id="7412256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7412259">func</span>&nbsp;<span class="ident" id="7412264">TestInvalidFiles</span><span class="op" id="7412280">(</span><span class="ident" id="7412281">t</span>&nbsp;<span class="op" id="7412283">*</span><span class="ident" id="7412284">testing</span><span class="op" id="7412291">.</span><span class="ident" id="7412292">T</span><span class="op" id="7412293">)</span>&nbsp;<span class="op" id="7412295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7412298">const</span>&nbsp;<span class="ident" id="7412304">size</span>&nbsp;<span class="op" id="7412309">=</span>&nbsp;<span class="num" id="7412311">1024</span>&nbsp;<span class="op" id="7412316">*</span>&nbsp;<span class="num" id="7412318">70</span>&nbsp;<span class="comment" id="7412321">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412330">b</span>&nbsp;<span class="op" id="7412332">:=</span>&nbsp;<span class="builtinfunc" id="7412335">make</span><span class="op" id="7412339">(</span><span class="op" id="7412340">[</span><span class="op" id="7412341">]</span><span class="builtintype" id="7412342">byte</span><span class="op" id="7412346">,</span>&nbsp;<span class="ident" id="7412348">size</span><span class="op" id="7412352">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7412356">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412367">_</span><span class="op" id="7412368">,</span>&nbsp;<span class="ident" id="7412370">err</span>&nbsp;<span class="op" id="7412374">:=</span>&nbsp;<span class="ident" id="7412377">NewReader</span><span class="op" id="7412386">(</span><span class="ident" id="7412387">bytes</span><span class="op" id="7412392">.</span><span class="ident" id="7412393">NewReader</span><span class="op" id="7412402">(</span><span class="ident" id="7412403">b</span><span class="op" id="7412404">)</span><span class="op" id="7412405">,</span>&nbsp;<span class="ident" id="7412407">size</span><span class="op" id="7412411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7412414">if</span>&nbsp;<span class="ident" id="7412417">err</span>&nbsp;<span class="op" id="7412421">!=</span>&nbsp;<span class="ident" id="7412424">ErrFormat</span>&nbsp;<span class="op" id="7412434">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412438">t</span><span class="op" id="7412439">.</span><span class="ident" id="7412440">Errorf</span><span class="op" id="7412446">(</span><span class="string" id="7412447">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7412474">,</span>&nbsp;<span class="ident" id="7412476">err</span><span class="op" id="7412479">,</span>&nbsp;<span class="ident" id="7412481">ErrFormat</span><span class="op" id="7412490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7412493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7412497">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412533">sig</span>&nbsp;<span class="op" id="7412537">:=</span>&nbsp;<span class="builtinfunc" id="7412540">make</span><span class="op" id="7412544">(</span><span class="op" id="7412545">[</span><span class="op" id="7412546">]</span><span class="builtintype" id="7412547">byte</span><span class="op" id="7412551">,</span>&nbsp;<span class="num" id="7412553">4</span><span class="op" id="7412554">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412557">binary</span><span class="op" id="7412563">.</span><span class="ident" id="7412564">LittleEndian</span><span class="op" id="7412576">.</span><span class="ident" id="7412577">PutUint32</span><span class="op" id="7412586">(</span><span class="ident" id="7412587">sig</span><span class="op" id="7412590">,</span>&nbsp;<span class="ident" id="7412592">directoryEndSignature</span><span class="op" id="7412613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7412616">for</span>&nbsp;<span class="ident" id="7412620">i</span>&nbsp;<span class="op" id="7412622">:=</span>&nbsp;<span class="num" id="7412625">0</span><span class="op" id="7412626">;</span>&nbsp;<span class="ident" id="7412628">i</span>&nbsp;<span class="op" id="7412630">&lt;</span>&nbsp;<span class="ident" id="7412632">size</span><span class="op" id="7412636">-</span><span class="num" id="7412637">4</span><span class="op" id="7412638">;</span>&nbsp;<span class="ident" id="7412640">i</span>&nbsp;<span class="op" id="7412642">+=</span>&nbsp;<span class="num" id="7412645">4</span>&nbsp;<span class="op" id="7412647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7412651">copy</span><span class="op" id="7412655">(</span><span class="ident" id="7412656">b</span><span class="op" id="7412657">[</span><span class="ident" id="7412658">i</span><span class="op" id="7412659">:</span><span class="ident" id="7412660">i</span><span class="op" id="7412661">+</span><span class="num" id="7412662">4</span><span class="op" id="7412663">]</span><span class="op" id="7412664">,</span>&nbsp;<span class="ident" id="7412666">sig</span><span class="op" id="7412669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7412672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412675">_</span><span class="op" id="7412676">,</span>&nbsp;<span class="ident" id="7412678">err</span>&nbsp;<span class="op" id="7412682">=</span>&nbsp;<span class="ident" id="7412684">NewReader</span><span class="op" id="7412693">(</span><span class="ident" id="7412694">bytes</span><span class="op" id="7412699">.</span><span class="ident" id="7412700">NewReader</span><span class="op" id="7412709">(</span><span class="ident" id="7412710">b</span><span class="op" id="7412711">)</span><span class="op" id="7412712">,</span>&nbsp;<span class="ident" id="7412714">size</span><span class="op" id="7412718">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7412721">if</span>&nbsp;<span class="ident" id="7412724">err</span>&nbsp;<span class="op" id="7412728">!=</span>&nbsp;<span class="ident" id="7412731">ErrFormat</span>&nbsp;<span class="op" id="7412741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412745">t</span><span class="op" id="7412746">.</span><span class="ident" id="7412747">Errorf</span><span class="op" id="7412753">(</span><span class="string" id="7412754">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7412779">,</span>&nbsp;<span class="ident" id="7412781">err</span><span class="op" id="7412784">,</span>&nbsp;<span class="ident" id="7412786">ErrFormat</span><span class="op" id="7412795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7412798">}</span><br>
<span class="lineno"></span><span class="op" id="7412800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7412803">func</span>&nbsp;<span class="ident" id="7412808">messWith</span><span class="op" id="7412816">(</span><span class="ident" id="7412817">fileName</span>&nbsp;<span class="builtintype" id="7412826">string</span><span class="op" id="7412832">,</span>&nbsp;<span class="ident" id="7412834">corrupter</span>&nbsp;<span class="keyword" id="7412844">func</span><span class="op" id="7412848">(</span><span class="ident" id="7412849">b</span>&nbsp;<span class="op" id="7412851">[</span><span class="op" id="7412852">]</span><span class="builtintype" id="7412853">byte</span><span class="op" id="7412857">)</span><span class="op" id="7412858">)</span>&nbsp;<span class="op" id="7412860">(</span><span class="ident" id="7412861">r</span>&nbsp;<span class="ident" id="7412863">io</span><span class="op" id="7412865">.</span><span class="ident" id="7412866">ReaderAt</span><span class="op" id="7412874">,</span>&nbsp;<span class="ident" id="7412876">size</span>&nbsp;<span class="ident" id="7412881">int64</span><span class="op" id="7412886">)</span>&nbsp;<span class="op" id="7412888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7412891">data</span><span class="op" id="7412895">,</span>&nbsp;<span class="ident" id="7412897">err</span>&nbsp;<span class="op" id="7412901">:=</span>&nbsp;<span class="ident" id="7412904">ioutil</span><span class="op" id="7412910">.</span><span class="ident" id="7412911">ReadFile</span><span class="op" id="7412919">(</span><span class="ident" id="7412920">filepath</span><span class="op" id="7412928">.</span><span class="ident" id="7412929">Join</span><span class="op" id="7412933">(</span><span class="string" id="7412934">&#34;testdata&#34;</span><span class="op" id="7412944">,</span>&nbsp;<span class="ident" id="7412946">fileName</span><span class="op" id="7412954">)</span><span class="op" id="7412955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7412958">if</span>&nbsp;<span class="ident" id="7412961">err</span>&nbsp;<span class="op" id="7412965">!=</span>&nbsp;<span class="builtintype" id="7412968">nil</span>&nbsp;<span class="op" id="7412972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7412976">panic</span><span class="op" id="7412981">(</span><span class="string" id="7412982">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7412999">+</span>&nbsp;<span class="ident" id="7413001">fileName</span>&nbsp;<span class="op" id="7413010">+</span>&nbsp;<span class="string" id="7413012">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7413017">+</span>&nbsp;<span class="ident" id="7413019">err</span><span class="op" id="7413022">.</span><span class="ident" id="7413023">Error</span><span class="op" id="7413028">(</span><span class="op" id="7413029">)</span><span class="op" id="7413030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7413033">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7413036">corrupter</span><span class="op" id="7413045">(</span><span class="ident" id="7413046">data</span><span class="op" id="7413050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7413053">return</span>&nbsp;<span class="ident" id="7413060">bytes</span><span class="op" id="7413065">.</span><span class="ident" id="7413066">NewReader</span><span class="op" id="7413075">(</span><span class="ident" id="7413076">data</span><span class="op" id="7413080">)</span><span class="op" id="7413081">,</span>&nbsp;<span class="ident" id="7413083">int64</span><span class="op" id="7413088">(</span><span class="builtinfunc" id="7413089">len</span><span class="op" id="7413092">(</span><span class="ident" id="7413093">data</span><span class="op" id="7413097">)</span><span class="op" id="7413098">)</span><br>
<span class="lineno"></span><span class="op" id="7413100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7413103">func</span>&nbsp;<span class="ident" id="7413108">returnCorruptCRC32Zip</span><span class="op" id="7413129">(</span><span class="op" id="7413130">)</span>&nbsp;<span class="op" id="7413132">(</span><span class="ident" id="7413133">r</span>&nbsp;<span class="ident" id="7413135">io</span><span class="op" id="7413137">.</span><span class="ident" id="7413138">ReaderAt</span><span class="op" id="7413146">,</span>&nbsp;<span class="ident" id="7413148">size</span>&nbsp;<span class="ident" id="7413153">int64</span><span class="op" id="7413158">)</span>&nbsp;<span class="op" id="7413160">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7413163">return</span>&nbsp;<span class="ident" id="7413170">messWith</span><span class="op" id="7413178">(</span><span class="string" id="7413179">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7413205">,</span>&nbsp;<span class="keyword" id="7413207">func</span><span class="op" id="7413211">(</span><span class="ident" id="7413212">b</span>&nbsp;<span class="op" id="7413214">[</span><span class="op" id="7413215">]</span><span class="builtintype" id="7413216">byte</span><span class="op" id="7413220">)</span>&nbsp;<span class="op" id="7413222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413226">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7413281">b</span><span class="op" id="7413282">[</span><span class="num" id="7413283">0x2d</span><span class="op" id="7413287">]</span><span class="op" id="7413288">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7413292">}</span><span class="op" id="7413293">)</span><br>
<span class="lineno"></span><span class="op" id="7413295">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7413298">func</span>&nbsp;<span class="ident" id="7413303">returnCorruptNotStreamedZip</span><span class="op" id="7413330">(</span><span class="op" id="7413331">)</span>&nbsp;<span class="op" id="7413333">(</span><span class="ident" id="7413334">r</span>&nbsp;<span class="ident" id="7413336">io</span><span class="op" id="7413338">.</span><span class="ident" id="7413339">ReaderAt</span><span class="op" id="7413347">,</span>&nbsp;<span class="ident" id="7413349">size</span>&nbsp;<span class="ident" id="7413354">int64</span><span class="op" id="7413359">)</span>&nbsp;<span class="op" id="7413361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7413364">return</span>&nbsp;<span class="ident" id="7413371">messWith</span><span class="op" id="7413379">(</span><span class="string" id="7413380">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7413404">,</span>&nbsp;<span class="keyword" id="7413406">func</span><span class="op" id="7413410">(</span><span class="ident" id="7413411">b</span>&nbsp;<span class="op" id="7413413">[</span><span class="op" id="7413414">]</span><span class="builtintype" id="7413415">byte</span><span class="op" id="7413419">)</span>&nbsp;<span class="op" id="7413421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413425">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413474">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7413519">b</span><span class="op" id="7413520">[</span><span class="num" id="7413521">0x11</span><span class="op" id="7413525">]</span><span class="op" id="7413526">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7413531">b</span><span class="op" id="7413532">[</span><span class="num" id="7413533">0x9d</span><span class="op" id="7413537">]</span><span class="op" id="7413538">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413544">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413599">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413656">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413714">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413768">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7413823">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7413844">}</span><span class="op" id="7413845">)</span><br>
<span class="lineno">465</span><span class="op" id="7413847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7413850">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7413914">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7413975">func</span>&nbsp;<span class="ident" id="7413980">rZipBytes</span><span class="op" id="7413989">(</span><span class="op" id="7413990">)</span>&nbsp;<span class="op" id="7413992">[</span><span class="op" id="7413993">]</span><span class="builtintype" id="7413994">byte</span>&nbsp;<span class="op" id="7413999">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7414002">s</span>&nbsp;<span class="op" id="7414004">:=</span>&nbsp;<span class="string" id="7414007">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7415555">s</span>&nbsp;<span class="op" id="7415557">=</span>&nbsp;<span class="ident" id="7415559">regexp</span><span class="op" id="7415565">.</span><span class="ident" id="7415566">MustCompile</span><span class="op" id="7415577">(</span><span class="string" id="7415578">`[0-9a-f]{7}`</span><span class="op" id="7415591">)</span><span class="op" id="7415592">.</span><span class="ident" id="7415593">ReplaceAllString</span><span class="op" id="7415609">(</span><span class="ident" id="7415610">s</span><span class="op" id="7415611">,</span>&nbsp;<span class="string" id="7415613">&#34;&#34;</span><span class="op" id="7415615">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7415618">s</span>&nbsp;<span class="op" id="7415620">=</span>&nbsp;<span class="ident" id="7415622">regexp</span><span class="op" id="7415628">.</span><span class="ident" id="7415629">MustCompile</span><span class="op" id="7415640">(</span><span class="string" id="7415641">`\s+`</span><span class="op" id="7415646">)</span><span class="op" id="7415647">.</span><span class="ident" id="7415648">ReplaceAllString</span><span class="op" id="7415664">(</span><span class="ident" id="7415665">s</span><span class="op" id="7415666">,</span>&nbsp;<span class="string" id="7415668">&#34;&#34;</span><span class="op" id="7415670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7415673">b</span><span class="op" id="7415674">,</span>&nbsp;<span class="ident" id="7415676">err</span>&nbsp;<span class="op" id="7415680">:=</span>&nbsp;<span class="ident" id="7415683">hex</span><span class="op" id="7415686">.</span><span class="ident" id="7415687">DecodeString</span><span class="op" id="7415699">(</span><span class="ident" id="7415700">s</span><span class="op" id="7415701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7415704">if</span>&nbsp;<span class="ident" id="7415707">err</span>&nbsp;<span class="op" id="7415711">!=</span>&nbsp;<span class="builtintype" id="7415714">nil</span>&nbsp;<span class="op" id="7415718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7415722">panic</span><span class="op" id="7415727">(</span><span class="ident" id="7415728">err</span><span class="op" id="7415731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7415734">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7415737">return</span>&nbsp;<span class="ident" id="7415744">b</span><br>
<span class="lineno"></span><span class="op" id="7415746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7415749">func</span>&nbsp;<span class="ident" id="7415754">returnRecursiveZip</span><span class="op" id="7415772">(</span><span class="op" id="7415773">)</span>&nbsp;<span class="op" id="7415775">(</span><span class="ident" id="7415776">r</span>&nbsp;<span class="ident" id="7415778">io</span><span class="op" id="7415780">.</span><span class="ident" id="7415781">ReaderAt</span><span class="op" id="7415789">,</span>&nbsp;<span class="ident" id="7415791">size</span>&nbsp;<span class="ident" id="7415796">int64</span><span class="op" id="7415801">)</span>&nbsp;<span class="op" id="7415803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7415806">b</span>&nbsp;<span class="op" id="7415808">:=</span>&nbsp;<span class="ident" id="7415811">rZipBytes</span><span class="op" id="7415820">(</span><span class="op" id="7415821">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7415824">return</span>&nbsp;<span class="ident" id="7415831">bytes</span><span class="op" id="7415836">.</span><span class="ident" id="7415837">NewReader</span><span class="op" id="7415846">(</span><span class="ident" id="7415847">b</span><span class="op" id="7415848">)</span><span class="op" id="7415849">,</span>&nbsp;<span class="ident" id="7415851">int64</span><span class="op" id="7415856">(</span><span class="builtinfunc" id="7415857">len</span><span class="op" id="7415860">(</span><span class="ident" id="7415861">b</span><span class="op" id="7415862">)</span><span class="op" id="7415863">)</span><br>
<span class="lineno"></span><span class="op" id="7415865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7415868">func</span>&nbsp;<span class="ident" id="7415873">TestIssue8186</span><span class="op" id="7415886">(</span><span class="ident" id="7415887">t</span>&nbsp;<span class="op" id="7415889">*</span><span class="ident" id="7415890">testing</span><span class="op" id="7415897">.</span><span class="ident" id="7415898">T</span><span class="op" id="7415899">)</span>&nbsp;<span class="op" id="7415901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7415904">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7415965">dirEnts</span>&nbsp;<span class="op" id="7415973">:=</span>&nbsp;<span class="op" id="7415976">[</span><span class="op" id="7415977">]</span><span class="builtintype" id="7415978">string</span><span class="op" id="7415984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7415988">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7416215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7416219">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7416397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7416401">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7416572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7416576">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7416744">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7416748">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7416931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7416935">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7417117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7417121">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7417291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7417295">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7417464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7417468">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7417641">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7417644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7417647">for</span>&nbsp;<span class="ident" id="7417651">i</span><span class="op" id="7417652">,</span>&nbsp;<span class="ident" id="7417654">s</span>&nbsp;<span class="op" id="7417656">:=</span>&nbsp;<span class="keyword" id="7417659">range</span>&nbsp;<span class="ident" id="7417665">dirEnts</span>&nbsp;<span class="op" id="7417673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7417677">var</span>&nbsp;<span class="ident" id="7417681">f</span>&nbsp;<span class="ident" id="7417683">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7417690">err</span>&nbsp;<span class="op" id="7417694">:=</span>&nbsp;<span class="ident" id="7417697">readDirectoryHeader</span><span class="op" id="7417716">(</span><span class="op" id="7417717">&amp;</span><span class="ident" id="7417718">f</span><span class="op" id="7417719">,</span>&nbsp;<span class="ident" id="7417721">strings</span><span class="op" id="7417728">.</span><span class="ident" id="7417729">NewReader</span><span class="op" id="7417738">(</span><span class="ident" id="7417739">s</span><span class="op" id="7417740">)</span><span class="op" id="7417741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7417745">if</span>&nbsp;<span class="ident" id="7417748">err</span>&nbsp;<span class="op" id="7417752">!=</span>&nbsp;<span class="builtintype" id="7417755">nil</span>&nbsp;<span class="op" id="7417759">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7417764">t</span><span class="op" id="7417765">.</span><span class="ident" id="7417766">Errorf</span><span class="op" id="7417772">(</span><span class="string" id="7417773">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7417796">,</span>&nbsp;<span class="ident" id="7417798">i</span><span class="op" id="7417799">,</span>&nbsp;<span class="ident" id="7417801">err</span><span class="op" id="7417804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7417808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7417811">}</span><br>
<span class="lineno"></span><span class="op" id="7417813">}</span>
</div>
</body>
</html>
