<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7871639">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7871694">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7871748">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7871799">package</span>&nbsp;<span class="ident" id="7871807">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871812">import</span>&nbsp;<span class="op" id="7871819">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871822">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7871830">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7871840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871843">type</span>&nbsp;<span class="ident" id="7871848">hostTest</span>&nbsp;<span class="keyword" id="7871857">struct</span>&nbsp;<span class="op" id="7871864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871867">host</span>&nbsp;<span class="builtintype" id="7871872">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871880">ips</span>&nbsp;&nbsp;<span class="op" id="7871885">[</span><span class="op" id="7871886">]</span><span class="ident" id="7871887"><a href="/net/ip.go.html#1417189">IP</a></span><br>
<span class="lineno">15</span><span class="op" id="7871890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871893">var</span>&nbsp;<span class="ident" id="7871897">hosttests</span>&nbsp;<span class="op" id="7871907">=</span>&nbsp;<span class="op" id="7871909">[</span><span class="op" id="7871910">]</span><span class="ident" id="7871911"><a href="/net/hosts_test.go.html#7871848">hostTest</a></span><span class="op" id="7871919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871922">{</span><span class="string" id="7871923">&#34;odin&#34;</span><span class="op" id="7871929">,</span>&nbsp;<span class="op" id="7871931">[</span><span class="op" id="7871932">]</span><span class="ident" id="7871933"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="7871935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871939"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="7871943">(</span><span class="num" id="7871944">127</span><span class="op" id="7871947">,</span>&nbsp;<span class="num" id="7871949">0</span><span class="op" id="7871950">,</span>&nbsp;<span class="num" id="7871952">0</span><span class="op" id="7871953">,</span>&nbsp;<span class="num" id="7871955">2</span><span class="op" id="7871956">)</span><span class="op" id="7871957">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871961"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="7871965">(</span><span class="num" id="7871966">127</span><span class="op" id="7871969">,</span>&nbsp;<span class="num" id="7871971">0</span><span class="op" id="7871972">,</span>&nbsp;<span class="num" id="7871974">0</span><span class="op" id="7871975">,</span>&nbsp;<span class="num" id="7871977">3</span><span class="op" id="7871978">)</span><span class="op" id="7871979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871983"><a href="/net/ip.go.html#1430775">ParseIP</a></span><span class="op" id="7871990">(</span><span class="string" id="7871991">&#34;::2&#34;</span><span class="op" id="7871996">)</span><span class="op" id="7871997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872000">}</span><span class="op" id="7872001">}</span><span class="op" id="7872002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872005">{</span><span class="string" id="7872006">&#34;thor&#34;</span><span class="op" id="7872012">,</span>&nbsp;<span class="op" id="7872014">[</span><span class="op" id="7872015">]</span><span class="ident" id="7872016"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="7872018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872022"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="7872026">(</span><span class="num" id="7872027">127</span><span class="op" id="7872030">,</span>&nbsp;<span class="num" id="7872032">1</span><span class="op" id="7872033">,</span>&nbsp;<span class="num" id="7872035">1</span><span class="op" id="7872036">,</span>&nbsp;<span class="num" id="7872038">1</span><span class="op" id="7872039">)</span><span class="op" id="7872040">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872043">}</span><span class="op" id="7872044">}</span><span class="op" id="7872045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872048">{</span><span class="string" id="7872049">&#34;loki&#34;</span><span class="op" id="7872055">,</span>&nbsp;<span class="op" id="7872057">[</span><span class="op" id="7872058">]</span><span class="ident" id="7872059"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="7872061">{</span><span class="op" id="7872062">}</span><span class="op" id="7872063">}</span><span class="op" id="7872064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872067">{</span><span class="string" id="7872068">&#34;ullr&#34;</span><span class="op" id="7872074">,</span>&nbsp;<span class="op" id="7872076">[</span><span class="op" id="7872077">]</span><span class="ident" id="7872078"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="7872080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872084"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="7872088">(</span><span class="num" id="7872089">127</span><span class="op" id="7872092">,</span>&nbsp;<span class="num" id="7872094">1</span><span class="op" id="7872095">,</span>&nbsp;<span class="num" id="7872097">1</span><span class="op" id="7872098">,</span>&nbsp;<span class="num" id="7872100">2</span><span class="op" id="7872101">)</span><span class="op" id="7872102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872105">}</span><span class="op" id="7872106">}</span><span class="op" id="7872107">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872110">{</span><span class="string" id="7872111">&#34;ullrhost&#34;</span><span class="op" id="7872121">,</span>&nbsp;<span class="op" id="7872123">[</span><span class="op" id="7872124">]</span><span class="ident" id="7872125"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="7872127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872131"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="7872135">(</span><span class="num" id="7872136">127</span><span class="op" id="7872139">,</span>&nbsp;<span class="num" id="7872141">1</span><span class="op" id="7872142">,</span>&nbsp;<span class="num" id="7872144">1</span><span class="op" id="7872145">,</span>&nbsp;<span class="num" id="7872147">2</span><span class="op" id="7872148">)</span><span class="op" id="7872149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872152">}</span><span class="op" id="7872153">}</span><span class="op" id="7872154">,</span><br>
<span class="lineno"></span><span class="op" id="7872156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7872159">func</span>&nbsp;<span class="ident" id="7872164">TestLookupStaticHost</span><span class="op" id="7872184">(</span><span class="ident" id="7872185">t</span>&nbsp;<span class="op" id="7872187">*</span><span class="ident" id="7872188"><a href="/net/hosts_test.go.html#7871830">testing</a></span><span class="op" id="7872195">.</span><span class="ident" id="7872196">T</span><span class="op" id="7872197">)</span>&nbsp;<span class="op" id="7872199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872202">p</span>&nbsp;<span class="op" id="7872204">:=</span>&nbsp;<span class="ident" id="7872207"><a href="/net/hosts.go.html#1404148">hostsPath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872218"><a href="/net/hosts.go.html#1404148">hostsPath</a></span>&nbsp;<span class="op" id="7872228">=</span>&nbsp;<span class="string" id="7872230">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872248">for</span>&nbsp;<span class="ident" id="7872252">i</span>&nbsp;<span class="op" id="7872254">:=</span>&nbsp;<span class="num" id="7872257">0</span><span class="op" id="7872258">;</span>&nbsp;<span class="ident" id="7872260"><a href="/net/hosts_test.go.html#7872252">i</a></span>&nbsp;<span class="op" id="7872262">&lt;</span>&nbsp;<span class="builtinfunc" id="7872264">len</span><span class="op" id="7872267">(</span><span class="ident" id="7872268"><a href="/net/hosts_test.go.html#7871897">hosttests</a></span><span class="op" id="7872277">)</span><span class="op" id="7872278">;</span>&nbsp;<span class="ident" id="7872280"><a href="/net/hosts_test.go.html#7872252">i</a></span><span class="op" id="7872281">++</span>&nbsp;<span class="op" id="7872284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872288">tt</span>&nbsp;<span class="op" id="7872291">:=</span>&nbsp;<span class="ident" id="7872294"><a href="/net/hosts_test.go.html#7871897">hosttests</a></span><span class="op" id="7872303">[</span><span class="ident" id="7872304"><a href="/net/hosts_test.go.html#7872252">i</a></span><span class="op" id="7872305">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872309">ips</span>&nbsp;<span class="op" id="7872313">:=</span>&nbsp;<span class="ident" id="7872316"><a href="/net/hosts.go.html#1405181">lookupStaticHost</a></span><span class="op" id="7872332">(</span><span class="ident" id="7872333"><a href="/net/hosts_test.go.html#7872288">tt</a></span><span class="op" id="7872335">.</span><span class="ident" id="7872336">host</span><span class="op" id="7872340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872344">if</span>&nbsp;<span class="builtinfunc" id="7872347">len</span><span class="op" id="7872350">(</span><span class="ident" id="7872351"><a href="/net/hosts_test.go.html#7872309">ips</a></span><span class="op" id="7872354">)</span>&nbsp;<span class="op" id="7872356">!=</span>&nbsp;<span class="builtinfunc" id="7872359">len</span><span class="op" id="7872362">(</span><span class="ident" id="7872363"><a href="/net/hosts_test.go.html#7872288">tt</a></span><span class="op" id="7872365">.</span><span class="ident" id="7872366">ips</span><span class="op" id="7872369">)</span>&nbsp;<span class="op" id="7872371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872376"><a href="/net/hosts_test.go.html#7872185">t</a></span><span class="op" id="7872377">.</span><span class="ident" id="7872378">Errorf</span><span class="op" id="7872384">(</span><span class="string" id="7872385">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7872411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7872417">len</span><span class="op" id="7872420">(</span><span class="ident" id="7872421"><a href="/net/hosts_test.go.html#7872309">ips</a></span><span class="op" id="7872424">)</span><span class="op" id="7872425">,</span>&nbsp;<span class="builtinfunc" id="7872427">len</span><span class="op" id="7872430">(</span><span class="ident" id="7872431"><a href="/net/hosts_test.go.html#7872288">tt</a></span><span class="op" id="7872433">.</span><span class="ident" id="7872434">ips</span><span class="op" id="7872437">)</span><span class="op" id="7872438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872443">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872458">for</span>&nbsp;<span class="ident" id="7872462">k</span><span class="op" id="7872463">,</span>&nbsp;<span class="ident" id="7872465">v</span>&nbsp;<span class="op" id="7872467">:=</span>&nbsp;<span class="keyword" id="7872470">range</span>&nbsp;<span class="ident" id="7872476"><a href="/net/hosts_test.go.html#7872309">ips</a></span>&nbsp;<span class="op" id="7872480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872485">if</span>&nbsp;<span class="ident" id="7872488"><a href="/net/hosts_test.go.html#7872288">tt</a></span><span class="op" id="7872490">.</span><span class="ident" id="7872491">ips</span><span class="op" id="7872494">[</span><span class="ident" id="7872495"><a href="/net/hosts_test.go.html#7872462">k</a></span><span class="op" id="7872496">]</span><span class="op" id="7872497">.</span><span class="ident" id="7872498">String</span><span class="op" id="7872504">(</span><span class="op" id="7872505">)</span>&nbsp;<span class="op" id="7872507">!=</span>&nbsp;<span class="ident" id="7872510"><a href="/net/hosts_test.go.html#7872465">v</a></span>&nbsp;<span class="op" id="7872512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872518"><a href="/net/hosts_test.go.html#7872185">t</a></span><span class="op" id="7872519">.</span><span class="ident" id="7872520">Errorf</span><span class="op" id="7872526">(</span><span class="string" id="7872527">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7872563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872570"><a href="/net/hosts_test.go.html#7872288">tt</a></span><span class="op" id="7872572">.</span><span class="ident" id="7872573">host</span><span class="op" id="7872577">,</span>&nbsp;<span class="ident" id="7872579"><a href="/net/hosts_test.go.html#7872465">v</a></span><span class="op" id="7872580">,</span>&nbsp;<span class="ident" id="7872582"><a href="/net/hosts_test.go.html#7872288">tt</a></span><span class="op" id="7872584">.</span><span class="ident" id="7872585">ips</span><span class="op" id="7872588">[</span><span class="ident" id="7872589"><a href="/net/hosts_test.go.html#7872462">k</a></span><span class="op" id="7872590">]</span><span class="op" id="7872591">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872606"><a href="/net/hosts.go.html#1404148">hostsPath</a></span>&nbsp;<span class="op" id="7872616">=</span>&nbsp;<span class="ident" id="7872618"><a href="/net/hosts_test.go.html#7872202">p</a></span><br>
<span class="lineno"></span><span class="op" id="7872620">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="7872623">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="7872677">func</span>&nbsp;<span class="ident" id="7872682">TestSingleLineHostsFile</span><span class="op" id="7872705">(</span><span class="ident" id="7872706">t</span>&nbsp;<span class="op" id="7872708">*</span><span class="ident" id="7872709"><a href="/net/hosts_test.go.html#7871830">testing</a></span><span class="op" id="7872716">.</span><span class="ident" id="7872717">T</span><span class="op" id="7872718">)</span>&nbsp;<span class="op" id="7872720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872723">p</span>&nbsp;<span class="op" id="7872725">:=</span>&nbsp;<span class="ident" id="7872728"><a href="/net/hosts.go.html#1404148">hostsPath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872739"><a href="/net/hosts.go.html#1404148">hostsPath</a></span>&nbsp;<span class="op" id="7872749">=</span>&nbsp;<span class="string" id="7872751">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872781">ips</span>&nbsp;<span class="op" id="7872785">:=</span>&nbsp;<span class="ident" id="7872788"><a href="/net/hosts.go.html#1405181">lookupStaticHost</a></span><span class="op" id="7872804">(</span><span class="string" id="7872805">&#34;odin&#34;</span><span class="op" id="7872811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7872814">if</span>&nbsp;<span class="builtinfunc" id="7872817">len</span><span class="op" id="7872820">(</span><span class="ident" id="7872821"><a href="/net/hosts_test.go.html#7872781">ips</a></span><span class="op" id="7872824">)</span>&nbsp;<span class="op" id="7872826">!=</span>&nbsp;<span class="num" id="7872829">1</span>&nbsp;<span class="op" id="7872831">||</span>&nbsp;<span class="ident" id="7872834"><a href="/net/hosts_test.go.html#7872781">ips</a></span><span class="op" id="7872837">[</span><span class="num" id="7872838">0</span><span class="op" id="7872839">]</span>&nbsp;<span class="op" id="7872841">!=</span>&nbsp;<span class="string" id="7872844">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="7872856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872860"><a href="/net/hosts_test.go.html#7872706">t</a></span><span class="op" id="7872861">.</span><span class="ident" id="7872862">Errorf</span><span class="op" id="7872868">(</span><span class="string" id="7872869">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7872901">,</span>&nbsp;<span class="ident" id="7872903"><a href="/net/hosts_test.go.html#7872781">ips</a></span><span class="op" id="7872906">,</span>&nbsp;<span class="op" id="7872908">[</span><span class="op" id="7872909">]</span><span class="builtintype" id="7872910">string</span><span class="op" id="7872916">{</span><span class="string" id="7872917">&#34;127.0.0.2&#34;</span><span class="op" id="7872928">}</span><span class="op" id="7872929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7872932">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7872936"><a href="/net/hosts.go.html#1404148">hostsPath</a></span>&nbsp;<span class="op" id="7872946">=</span>&nbsp;<span class="ident" id="7872948"><a href="/net/hosts_test.go.html#7872723">p</a></span><br>
<span class="lineno"></span><span class="op" id="7872950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7872953">func</span>&nbsp;<span class="ident" id="7872958">TestLookupHost</span><span class="op" id="7872972">(</span><span class="ident" id="7872973">t</span>&nbsp;<span class="op" id="7872975">*</span><span class="ident" id="7872976"><a href="/net/hosts_test.go.html#7871830">testing</a></span><span class="op" id="7872983">.</span><span class="ident" id="7872984">T</span><span class="op" id="7872985">)</span>&nbsp;<span class="op" id="7872987">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7872990">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7873049">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7873107">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7873160">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873184">addrs</span><span class="op" id="7873189">,</span>&nbsp;<span class="ident" id="7873191">_</span>&nbsp;<span class="op" id="7873193">:=</span>&nbsp;<span class="ident" id="7873196"><a href="/net/lookup.go.html#1454757">LookupHost</a></span><span class="op" id="7873206">(</span><span class="string" id="7873207">&#34;localhost&#34;</span><span class="op" id="7873218">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873221"><a href="/net/hosts_test.go.html#7871822">sort</a></span><span class="op" id="7873225">.</span><span class="ident" id="7873226">Strings</span><span class="op" id="7873233">(</span><span class="ident" id="7873234"><a href="/net/hosts_test.go.html#7873184">addrs</a></span><span class="op" id="7873239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873242">for</span>&nbsp;<span class="ident" id="7873246">i</span>&nbsp;<span class="op" id="7873248">:=</span>&nbsp;<span class="num" id="7873251">0</span><span class="op" id="7873252">;</span>&nbsp;<span class="ident" id="7873254"><a href="/net/hosts_test.go.html#7873246">i</a></span><span class="op" id="7873255">+</span><span class="num" id="7873256">1</span>&nbsp;<span class="op" id="7873258">&lt;</span>&nbsp;<span class="builtinfunc" id="7873260">len</span><span class="op" id="7873263">(</span><span class="ident" id="7873264"><a href="/net/hosts_test.go.html#7873184">addrs</a></span><span class="op" id="7873269">)</span><span class="op" id="7873270">;</span>&nbsp;<span class="ident" id="7873272"><a href="/net/hosts_test.go.html#7873246">i</a></span><span class="op" id="7873273">++</span>&nbsp;<span class="op" id="7873276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873280">if</span>&nbsp;<span class="ident" id="7873283"><a href="/net/hosts_test.go.html#7873184">addrs</a></span><span class="op" id="7873288">[</span><span class="ident" id="7873289"><a href="/net/hosts_test.go.html#7873246">i</a></span><span class="op" id="7873290">]</span>&nbsp;<span class="op" id="7873292">==</span>&nbsp;<span class="ident" id="7873295"><a href="/net/hosts_test.go.html#7873184">addrs</a></span><span class="op" id="7873300">[</span><span class="ident" id="7873301"><a href="/net/hosts_test.go.html#7873246">i</a></span><span class="op" id="7873302">+</span><span class="num" id="7873303">1</span><span class="op" id="7873304">]</span>&nbsp;<span class="op" id="7873306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7873311"><a href="/net/hosts_test.go.html#7872973">t</a></span><span class="op" id="7873312">.</span><span class="ident" id="7873313">Fatalf</span><span class="op" id="7873319">(</span><span class="string" id="7873320">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="7873377">,</span>&nbsp;<span class="ident" id="7873379"><a href="/net/hosts_test.go.html#7873184">addrs</a></span><span class="op" id="7873384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873388">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873391">}</span><br>
<span class="lineno"></span><span class="op" id="7873393">}</span>
</div>
</body>
</html>
