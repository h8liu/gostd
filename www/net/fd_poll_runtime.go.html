<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2572064">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2572119">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2572173">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2572224">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2572297">package</span>&nbsp;<span class="ident" id="2572305">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2572310">import</span>&nbsp;<span class="op" id="2572317">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2572320">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2572328">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2572339">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="2572346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2572349">//&nbsp;runtimeNano&nbsp;returns&nbsp;the&nbsp;current&nbsp;value&nbsp;of&nbsp;the&nbsp;runtime&nbsp;clock&nbsp;in&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2572427">func</span>&nbsp;<span class="ident" id="2572432">runtimeNano</span><span class="op" id="2572443">(</span><span class="op" id="2572444">)</span>&nbsp;<span class="ident" id="2572446">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2572453">func</span>&nbsp;<span class="ident" id="2572458">runtime_pollServerInit</span><span class="op" id="2572480">(</span><span class="op" id="2572481">)</span><br>
<span class="lineno"></span><span class="keyword" id="2572483">func</span>&nbsp;<span class="ident" id="2572488">runtime_pollOpen</span><span class="op" id="2572504">(</span><span class="ident" id="2572505">fd</span>&nbsp;<span class="builtintype" id="2572508">uintptr</span><span class="op" id="2572515">)</span>&nbsp;<span class="op" id="2572517">(</span><span class="builtintype" id="2572518">uintptr</span><span class="op" id="2572525">,</span>&nbsp;<span class="builtintype" id="2572527">int</span><span class="op" id="2572530">)</span><br>
<span class="lineno">20</span><span class="keyword" id="2572532">func</span>&nbsp;<span class="ident" id="2572537">runtime_pollClose</span><span class="op" id="2572554">(</span><span class="ident" id="2572555">ctx</span>&nbsp;<span class="builtintype" id="2572559">uintptr</span><span class="op" id="2572566">)</span><br>
<span class="lineno"></span><span class="keyword" id="2572568">func</span>&nbsp;<span class="ident" id="2572573">runtime_pollWait</span><span class="op" id="2572589">(</span><span class="ident" id="2572590">ctx</span>&nbsp;<span class="builtintype" id="2572594">uintptr</span><span class="op" id="2572601">,</span>&nbsp;<span class="ident" id="2572603">mode</span>&nbsp;<span class="builtintype" id="2572608">int</span><span class="op" id="2572611">)</span>&nbsp;<span class="builtintype" id="2572613">int</span><br>
<span class="lineno"></span><span class="keyword" id="2572617">func</span>&nbsp;<span class="ident" id="2572622">runtime_pollWaitCanceled</span><span class="op" id="2572646">(</span><span class="ident" id="2572647">ctx</span>&nbsp;<span class="builtintype" id="2572651">uintptr</span><span class="op" id="2572658">,</span>&nbsp;<span class="ident" id="2572660">mode</span>&nbsp;<span class="builtintype" id="2572665">int</span><span class="op" id="2572668">)</span>&nbsp;<span class="builtintype" id="2572670">int</span><br>
<span class="lineno"></span><span class="keyword" id="2572674">func</span>&nbsp;<span class="ident" id="2572679">runtime_pollReset</span><span class="op" id="2572696">(</span><span class="ident" id="2572697">ctx</span>&nbsp;<span class="builtintype" id="2572701">uintptr</span><span class="op" id="2572708">,</span>&nbsp;<span class="ident" id="2572710">mode</span>&nbsp;<span class="builtintype" id="2572715">int</span><span class="op" id="2572718">)</span>&nbsp;<span class="builtintype" id="2572720">int</span><br>
<span class="lineno"></span><span class="keyword" id="2572724">func</span>&nbsp;<span class="ident" id="2572729">runtime_pollSetDeadline</span><span class="op" id="2572752">(</span><span class="ident" id="2572753">ctx</span>&nbsp;<span class="builtintype" id="2572757">uintptr</span><span class="op" id="2572764">,</span>&nbsp;<span class="ident" id="2572766">d</span>&nbsp;<span class="ident" id="2572768">int64</span><span class="op" id="2572773">,</span>&nbsp;<span class="ident" id="2572775">mode</span>&nbsp;<span class="builtintype" id="2572780">int</span><span class="op" id="2572783">)</span><br>
<span class="lineno">25</span><span class="keyword" id="2572785">func</span>&nbsp;<span class="ident" id="2572790">runtime_pollUnblock</span><span class="op" id="2572809">(</span><span class="ident" id="2572810">ctx</span>&nbsp;<span class="builtintype" id="2572814">uintptr</span><span class="op" id="2572821">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2572824">type</span>&nbsp;<span class="ident" id="2572829">pollDesc</span>&nbsp;<span class="keyword" id="2572838">struct</span>&nbsp;<span class="op" id="2572845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572848">runtimeCtx</span>&nbsp;<span class="builtintype" id="2572859">uintptr</span><br>
<span class="lineno"></span><span class="op" id="2572867">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2572870">var</span>&nbsp;<span class="ident" id="2572874">serverInit</span>&nbsp;<span class="ident" id="2572885"><a href="/net/fd_poll_runtime.go.html#2572320">sync</a></span><span class="op" id="2572889">.</span><span class="ident" id="2572890">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2572896">func</span>&nbsp;<span class="op" id="2572901">(</span><span class="ident" id="2572902">pd</span>&nbsp;<span class="op" id="2572905">*</span><span class="ident" id="2572906"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2572914">)</span>&nbsp;<span class="ident" id="2572916">Init</span><span class="op" id="2572920">(</span><span class="ident" id="2572921">fd</span>&nbsp;<span class="op" id="2572924">*</span><span class="ident" id="2572925"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2572930">)</span>&nbsp;<span class="builtintype" id="2572932">error</span>&nbsp;<span class="op" id="2572938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572941"><a href="/net/fd_poll_runtime.go.html#2572874">serverInit</a></span><span class="op" id="2572951">.</span><span class="ident" id="2572952">Do</span><span class="op" id="2572954">(</span><span class="ident" id="2572955"><a href="/net/fd_poll_runtime.go.html#2572458">runtime_pollServerInit</a></span><span class="op" id="2572977">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2572980">ctx</span><span class="op" id="2572983">,</span>&nbsp;<span class="ident" id="2572985">errno</span>&nbsp;<span class="op" id="2572991">:=</span>&nbsp;<span class="ident" id="2572994"><a href="/net/fd_poll_runtime.go.html#2572488">runtime_pollOpen</a></span><span class="op" id="2573010">(</span><span class="builtintype" id="2573011">uintptr</span><span class="op" id="2573018">(</span><span class="ident" id="2573019"><a href="/net/fd_poll_runtime.go.html#2572921">fd</a></span><span class="op" id="2573021">.</span><span class="ident" id="2573022">sysfd</span><span class="op" id="2573027">)</span><span class="op" id="2573028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573031">if</span>&nbsp;<span class="ident" id="2573034"><a href="/net/fd_poll_runtime.go.html#2572985">errno</a></span>&nbsp;<span class="op" id="2573040">!=</span>&nbsp;<span class="num" id="2573043">0</span>&nbsp;<span class="op" id="2573045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573049">return</span>&nbsp;<span class="ident" id="2573056"><a href="/net/fd_poll_runtime.go.html#2572328">syscall</a></span><span class="op" id="2573063">.</span><span class="ident" id="2573064">Errno</span><span class="op" id="2573069">(</span><span class="ident" id="2573070"><a href="/net/fd_poll_runtime.go.html#2572985">errno</a></span><span class="op" id="2573075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2573078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573081"><a href="/net/fd_poll_runtime.go.html#2572902">pd</a></span><span class="op" id="2573083">.</span><span class="ident" id="2573084">runtimeCtx</span>&nbsp;<span class="op" id="2573095">=</span>&nbsp;<span class="ident" id="2573097"><a href="/net/fd_poll_runtime.go.html#2572980">ctx</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573102">return</span>&nbsp;<span class="ident" id="2573109">nil</span><br>
<span class="lineno"></span><span class="op" id="2573113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2573116">func</span>&nbsp;<span class="op" id="2573121">(</span><span class="ident" id="2573122">pd</span>&nbsp;<span class="op" id="2573125">*</span><span class="ident" id="2573126"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573134">)</span>&nbsp;<span class="ident" id="2573136">Close</span><span class="op" id="2573141">(</span><span class="op" id="2573142">)</span>&nbsp;<span class="op" id="2573144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573147">if</span>&nbsp;<span class="ident" id="2573150"><a href="/net/fd_poll_runtime.go.html#2573122">pd</a></span><span class="op" id="2573152">.</span><span class="ident" id="2573153">runtimeCtx</span>&nbsp;<span class="op" id="2573164">==</span>&nbsp;<span class="num" id="2573167">0</span>&nbsp;<span class="op" id="2573169">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573173">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2573181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573184"><a href="/net/fd_poll_runtime.go.html#2572537">runtime_pollClose</a></span><span class="op" id="2573201">(</span><span class="ident" id="2573202"><a href="/net/fd_poll_runtime.go.html#2573122">pd</a></span><span class="op" id="2573204">.</span><span class="ident" id="2573205">runtimeCtx</span><span class="op" id="2573215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573218"><a href="/net/fd_poll_runtime.go.html#2573122">pd</a></span><span class="op" id="2573220">.</span><span class="ident" id="2573221">runtimeCtx</span>&nbsp;<span class="op" id="2573232">=</span>&nbsp;<span class="num" id="2573234">0</span><br>
<span class="lineno"></span><span class="op" id="2573236">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="2573239">func</span>&nbsp;<span class="op" id="2573244">(</span><span class="ident" id="2573245">pd</span>&nbsp;<span class="op" id="2573248">*</span><span class="ident" id="2573249"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573257">)</span>&nbsp;<span class="ident" id="2573259">Lock</span><span class="op" id="2573263">(</span><span class="op" id="2573264">)</span>&nbsp;<span class="op" id="2573266">{</span><br>
<span class="lineno"></span><span class="op" id="2573268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2573271">func</span>&nbsp;<span class="op" id="2573276">(</span><span class="ident" id="2573277">pd</span>&nbsp;<span class="op" id="2573280">*</span><span class="ident" id="2573281"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573289">)</span>&nbsp;<span class="ident" id="2573291">Unlock</span><span class="op" id="2573297">(</span><span class="op" id="2573298">)</span>&nbsp;<span class="op" id="2573300">{</span><br>
<span class="lineno">55</span><span class="op" id="2573302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2573305">func</span>&nbsp;<span class="op" id="2573310">(</span><span class="ident" id="2573311">pd</span>&nbsp;<span class="op" id="2573314">*</span><span class="ident" id="2573315"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573323">)</span>&nbsp;<span class="ident" id="2573325">Wakeup</span><span class="op" id="2573331">(</span><span class="op" id="2573332">)</span>&nbsp;<span class="op" id="2573334">{</span><br>
<span class="lineno"></span><span class="op" id="2573336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="2573339">//&nbsp;Evict&nbsp;evicts&nbsp;fd&nbsp;from&nbsp;the&nbsp;pending&nbsp;list,&nbsp;unblocking&nbsp;any&nbsp;I/O&nbsp;running&nbsp;on&nbsp;fd.</span><br>
<span class="lineno"></span><span class="comment" id="2573415">//&nbsp;Return&nbsp;value&nbsp;is&nbsp;whether&nbsp;the&nbsp;pollServer&nbsp;should&nbsp;be&nbsp;woken&nbsp;up.</span><br>
<span class="lineno"></span><span class="keyword" id="2573477">func</span>&nbsp;<span class="op" id="2573482">(</span><span class="ident" id="2573483">pd</span>&nbsp;<span class="op" id="2573486">*</span><span class="ident" id="2573487"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573495">)</span>&nbsp;<span class="ident" id="2573497">Evict</span><span class="op" id="2573502">(</span><span class="op" id="2573503">)</span>&nbsp;<span class="builtintype" id="2573505">bool</span>&nbsp;<span class="op" id="2573510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573513">if</span>&nbsp;<span class="ident" id="2573516"><a href="/net/fd_poll_runtime.go.html#2573483">pd</a></span><span class="op" id="2573518">.</span><span class="ident" id="2573519">runtimeCtx</span>&nbsp;<span class="op" id="2573530">==</span>&nbsp;<span class="num" id="2573533">0</span>&nbsp;<span class="op" id="2573535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573539">return</span>&nbsp;<span class="ident" id="2573546">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2573553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573556"><a href="/net/fd_poll_runtime.go.html#2572790">runtime_pollUnblock</a></span><span class="op" id="2573575">(</span><span class="ident" id="2573576"><a href="/net/fd_poll_runtime.go.html#2573483">pd</a></span><span class="op" id="2573578">.</span><span class="ident" id="2573579">runtimeCtx</span><span class="op" id="2573589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573592">return</span>&nbsp;<span class="ident" id="2573599">false</span><br>
<span class="lineno"></span><span class="op" id="2573605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="2573608">func</span>&nbsp;<span class="op" id="2573613">(</span><span class="ident" id="2573614">pd</span>&nbsp;<span class="op" id="2573617">*</span><span class="ident" id="2573618"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573626">)</span>&nbsp;<span class="ident" id="2573628">Prepare</span><span class="op" id="2573635">(</span><span class="ident" id="2573636">mode</span>&nbsp;<span class="builtintype" id="2573641">int</span><span class="op" id="2573644">)</span>&nbsp;<span class="builtintype" id="2573646">error</span>&nbsp;<span class="op" id="2573652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573655">res</span>&nbsp;<span class="op" id="2573659">:=</span>&nbsp;<span class="ident" id="2573662"><a href="/net/fd_poll_runtime.go.html#2572679">runtime_pollReset</a></span><span class="op" id="2573679">(</span><span class="ident" id="2573680"><a href="/net/fd_poll_runtime.go.html#2573614">pd</a></span><span class="op" id="2573682">.</span><span class="ident" id="2573683">runtimeCtx</span><span class="op" id="2573693">,</span>&nbsp;<span class="ident" id="2573695"><a href="/net/fd_poll_runtime.go.html#2573636">mode</a></span><span class="op" id="2573699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573702">return</span>&nbsp;<span class="ident" id="2573709"><a href="/net/fd_poll_runtime.go.html#2574343">convertErr</a></span><span class="op" id="2573719">(</span><span class="ident" id="2573720"><a href="/net/fd_poll_runtime.go.html#2573655">res</a></span><span class="op" id="2573723">)</span><br>
<span class="lineno"></span><span class="op" id="2573725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="2573728">func</span>&nbsp;<span class="op" id="2573733">(</span><span class="ident" id="2573734">pd</span>&nbsp;<span class="op" id="2573737">*</span><span class="ident" id="2573738"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573746">)</span>&nbsp;<span class="ident" id="2573748">PrepareRead</span><span class="op" id="2573759">(</span><span class="op" id="2573760">)</span>&nbsp;<span class="builtintype" id="2573762">error</span>&nbsp;<span class="op" id="2573768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573771">return</span>&nbsp;<span class="ident" id="2573778"><a href="/net/fd_poll_runtime.go.html#2573734">pd</a></span><span class="op" id="2573780">.</span><span class="ident" id="2573781">Prepare</span><span class="op" id="2573788">(</span><span class="string" id="2573789">&#39;r&#39;</span><span class="op" id="2573792">)</span><br>
<span class="lineno"></span><span class="op" id="2573794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2573797">func</span>&nbsp;<span class="op" id="2573802">(</span><span class="ident" id="2573803">pd</span>&nbsp;<span class="op" id="2573806">*</span><span class="ident" id="2573807"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573815">)</span>&nbsp;<span class="ident" id="2573817">PrepareWrite</span><span class="op" id="2573829">(</span><span class="op" id="2573830">)</span>&nbsp;<span class="builtintype" id="2573832">error</span>&nbsp;<span class="op" id="2573838">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573841">return</span>&nbsp;<span class="ident" id="2573848"><a href="/net/fd_poll_runtime.go.html#2573803">pd</a></span><span class="op" id="2573850">.</span><span class="ident" id="2573851">Prepare</span><span class="op" id="2573858">(</span><span class="string" id="2573859">&#39;w&#39;</span><span class="op" id="2573862">)</span><br>
<span class="lineno"></span><span class="op" id="2573864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2573867">func</span>&nbsp;<span class="op" id="2573872">(</span><span class="ident" id="2573873">pd</span>&nbsp;<span class="op" id="2573876">*</span><span class="ident" id="2573877"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2573885">)</span>&nbsp;<span class="ident" id="2573887">Wait</span><span class="op" id="2573891">(</span><span class="ident" id="2573892">mode</span>&nbsp;<span class="builtintype" id="2573897">int</span><span class="op" id="2573900">)</span>&nbsp;<span class="builtintype" id="2573902">error</span>&nbsp;<span class="op" id="2573908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2573911">res</span>&nbsp;<span class="op" id="2573915">:=</span>&nbsp;<span class="ident" id="2573918"><a href="/net/fd_poll_runtime.go.html#2572573">runtime_pollWait</a></span><span class="op" id="2573934">(</span><span class="ident" id="2573935"><a href="/net/fd_poll_runtime.go.html#2573873">pd</a></span><span class="op" id="2573937">.</span><span class="ident" id="2573938">runtimeCtx</span><span class="op" id="2573948">,</span>&nbsp;<span class="ident" id="2573950"><a href="/net/fd_poll_runtime.go.html#2573892">mode</a></span><span class="op" id="2573954">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2573957">return</span>&nbsp;<span class="ident" id="2573964"><a href="/net/fd_poll_runtime.go.html#2574343">convertErr</a></span><span class="op" id="2573974">(</span><span class="ident" id="2573975"><a href="/net/fd_poll_runtime.go.html#2573911">res</a></span><span class="op" id="2573978">)</span><br>
<span class="lineno"></span><span class="op" id="2573980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2573983">func</span>&nbsp;<span class="op" id="2573988">(</span><span class="ident" id="2573989">pd</span>&nbsp;<span class="op" id="2573992">*</span><span class="ident" id="2573993"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2574001">)</span>&nbsp;<span class="ident" id="2574003">WaitRead</span><span class="op" id="2574011">(</span><span class="op" id="2574012">)</span>&nbsp;<span class="builtintype" id="2574014">error</span>&nbsp;<span class="op" id="2574020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574023">return</span>&nbsp;<span class="ident" id="2574030"><a href="/net/fd_poll_runtime.go.html#2573989">pd</a></span><span class="op" id="2574032">.</span><span class="ident" id="2574033">Wait</span><span class="op" id="2574037">(</span><span class="string" id="2574038">&#39;r&#39;</span><span class="op" id="2574041">)</span><br>
<span class="lineno">90</span><span class="op" id="2574043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2574046">func</span>&nbsp;<span class="op" id="2574051">(</span><span class="ident" id="2574052">pd</span>&nbsp;<span class="op" id="2574055">*</span><span class="ident" id="2574056"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2574064">)</span>&nbsp;<span class="ident" id="2574066">WaitWrite</span><span class="op" id="2574075">(</span><span class="op" id="2574076">)</span>&nbsp;<span class="builtintype" id="2574078">error</span>&nbsp;<span class="op" id="2574084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574087">return</span>&nbsp;<span class="ident" id="2574094"><a href="/net/fd_poll_runtime.go.html#2574052">pd</a></span><span class="op" id="2574096">.</span><span class="ident" id="2574097">Wait</span><span class="op" id="2574101">(</span><span class="string" id="2574102">&#39;w&#39;</span><span class="op" id="2574105">)</span><br>
<span class="lineno"></span><span class="op" id="2574107">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2574110">func</span>&nbsp;<span class="op" id="2574115">(</span><span class="ident" id="2574116">pd</span>&nbsp;<span class="op" id="2574119">*</span><span class="ident" id="2574120"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2574128">)</span>&nbsp;<span class="ident" id="2574130">WaitCanceled</span><span class="op" id="2574142">(</span><span class="ident" id="2574143">mode</span>&nbsp;<span class="builtintype" id="2574148">int</span><span class="op" id="2574151">)</span>&nbsp;<span class="op" id="2574153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574156"><a href="/net/fd_poll_runtime.go.html#2572622">runtime_pollWaitCanceled</a></span><span class="op" id="2574180">(</span><span class="ident" id="2574181"><a href="/net/fd_poll_runtime.go.html#2574116">pd</a></span><span class="op" id="2574183">.</span><span class="ident" id="2574184">runtimeCtx</span><span class="op" id="2574194">,</span>&nbsp;<span class="ident" id="2574196"><a href="/net/fd_poll_runtime.go.html#2574143">mode</a></span><span class="op" id="2574200">)</span><br>
<span class="lineno"></span><span class="op" id="2574202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="2574205">func</span>&nbsp;<span class="op" id="2574210">(</span><span class="ident" id="2574211">pd</span>&nbsp;<span class="op" id="2574214">*</span><span class="ident" id="2574215"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2574223">)</span>&nbsp;<span class="ident" id="2574225">WaitCanceledRead</span><span class="op" id="2574241">(</span><span class="op" id="2574242">)</span>&nbsp;<span class="op" id="2574244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574247"><a href="/net/fd_poll_runtime.go.html#2574211">pd</a></span><span class="op" id="2574249">.</span><span class="ident" id="2574250">WaitCanceled</span><span class="op" id="2574262">(</span><span class="string" id="2574263">&#39;r&#39;</span><span class="op" id="2574266">)</span><br>
<span class="lineno"></span><span class="op" id="2574268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2574271">func</span>&nbsp;<span class="op" id="2574276">(</span><span class="ident" id="2574277">pd</span>&nbsp;<span class="op" id="2574280">*</span><span class="ident" id="2574281"><a href="/net/fd_poll_runtime.go.html#2572829">pollDesc</a></span><span class="op" id="2574289">)</span>&nbsp;<span class="ident" id="2574291">WaitCanceledWrite</span><span class="op" id="2574308">(</span><span class="op" id="2574309">)</span>&nbsp;<span class="op" id="2574311">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574314"><a href="/net/fd_poll_runtime.go.html#2574277">pd</a></span><span class="op" id="2574316">.</span><span class="ident" id="2574317">WaitCanceled</span><span class="op" id="2574329">(</span><span class="string" id="2574330">&#39;w&#39;</span><span class="op" id="2574333">)</span><br>
<span class="lineno"></span><span class="op" id="2574335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2574338">func</span>&nbsp;<span class="ident" id="2574343">convertErr</span><span class="op" id="2574353">(</span><span class="ident" id="2574354">res</span>&nbsp;<span class="builtintype" id="2574358">int</span><span class="op" id="2574361">)</span>&nbsp;<span class="builtintype" id="2574363">error</span>&nbsp;<span class="op" id="2574369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574372">switch</span>&nbsp;<span class="ident" id="2574379"><a href="/net/fd_poll_runtime.go.html#2574354">res</a></span>&nbsp;<span class="op" id="2574383">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574386">case</span>&nbsp;<span class="num" id="2574391">0</span><span class="op" id="2574392">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574396">return</span>&nbsp;<span class="ident" id="2574403">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574408">case</span>&nbsp;<span class="num" id="2574413">1</span><span class="op" id="2574414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574418">return</span>&nbsp;<span class="ident" id="2574425"><a href="/net/net.go.html#2659298">errClosing</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574437">case</span>&nbsp;<span class="num" id="2574442">2</span><span class="op" id="2574443">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574447">return</span>&nbsp;<span class="ident" id="2574454"><a href="/net/net.go.html#2659253">errTimeout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2574466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2574469">println</span><span class="op" id="2574476">(</span><span class="string" id="2574477">&#34;unreachable:&nbsp;&#34;</span><span class="op" id="2574492">,</span>&nbsp;<span class="ident" id="2574494"><a href="/net/fd_poll_runtime.go.html#2574354">res</a></span><span class="op" id="2574497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2574500">panic</span><span class="op" id="2574505">(</span><span class="string" id="2574506">&#34;unreachable&#34;</span><span class="op" id="2574519">)</span><br>
<span class="lineno"></span><span class="op" id="2574521">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="2574524">func</span>&nbsp;<span class="op" id="2574529">(</span><span class="ident" id="2574530">fd</span>&nbsp;<span class="op" id="2574533">*</span><span class="ident" id="2574534"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2574539">)</span>&nbsp;<span class="ident" id="2574541">setDeadline</span><span class="op" id="2574552">(</span><span class="ident" id="2574553">t</span>&nbsp;<span class="ident" id="2574555"><a href="/net/fd_poll_runtime.go.html#2572339">time</a></span><span class="op" id="2574559">.</span><span class="ident" id="2574560">Time</span><span class="op" id="2574564">)</span>&nbsp;<span class="builtintype" id="2574566">error</span>&nbsp;<span class="op" id="2574572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574575">return</span>&nbsp;<span class="ident" id="2574582"><a href="/net/fd_poll_runtime.go.html#2574809">setDeadlineImpl</a></span><span class="op" id="2574597">(</span><span class="ident" id="2574598"><a href="/net/fd_poll_runtime.go.html#2574530">fd</a></span><span class="op" id="2574600">,</span>&nbsp;<span class="ident" id="2574602"><a href="/net/fd_poll_runtime.go.html#2574553">t</a></span><span class="op" id="2574603">,</span>&nbsp;<span class="string" id="2574605">&#39;r&#39;</span><span class="op" id="2574608">+</span><span class="string" id="2574609">&#39;w&#39;</span><span class="op" id="2574612">)</span><br>
<span class="lineno"></span><span class="op" id="2574614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2574617">func</span>&nbsp;<span class="op" id="2574622">(</span><span class="ident" id="2574623">fd</span>&nbsp;<span class="op" id="2574626">*</span><span class="ident" id="2574627"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2574632">)</span>&nbsp;<span class="ident" id="2574634">setReadDeadline</span><span class="op" id="2574649">(</span><span class="ident" id="2574650">t</span>&nbsp;<span class="ident" id="2574652"><a href="/net/fd_poll_runtime.go.html#2572339">time</a></span><span class="op" id="2574656">.</span><span class="ident" id="2574657">Time</span><span class="op" id="2574661">)</span>&nbsp;<span class="builtintype" id="2574663">error</span>&nbsp;<span class="op" id="2574669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574672">return</span>&nbsp;<span class="ident" id="2574679"><a href="/net/fd_poll_runtime.go.html#2574809">setDeadlineImpl</a></span><span class="op" id="2574694">(</span><span class="ident" id="2574695"><a href="/net/fd_poll_runtime.go.html#2574623">fd</a></span><span class="op" id="2574697">,</span>&nbsp;<span class="ident" id="2574699"><a href="/net/fd_poll_runtime.go.html#2574650">t</a></span><span class="op" id="2574700">,</span>&nbsp;<span class="string" id="2574702">&#39;r&#39;</span><span class="op" id="2574705">)</span><br>
<span class="lineno"></span><span class="op" id="2574707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2574710">func</span>&nbsp;<span class="op" id="2574715">(</span><span class="ident" id="2574716">fd</span>&nbsp;<span class="op" id="2574719">*</span><span class="ident" id="2574720"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2574725">)</span>&nbsp;<span class="ident" id="2574727">setWriteDeadline</span><span class="op" id="2574743">(</span><span class="ident" id="2574744">t</span>&nbsp;<span class="ident" id="2574746"><a href="/net/fd_poll_runtime.go.html#2572339">time</a></span><span class="op" id="2574750">.</span><span class="ident" id="2574751">Time</span><span class="op" id="2574755">)</span>&nbsp;<span class="builtintype" id="2574757">error</span>&nbsp;<span class="op" id="2574763">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574766">return</span>&nbsp;<span class="ident" id="2574773"><a href="/net/fd_poll_runtime.go.html#2574809">setDeadlineImpl</a></span><span class="op" id="2574788">(</span><span class="ident" id="2574789"><a href="/net/fd_poll_runtime.go.html#2574716">fd</a></span><span class="op" id="2574791">,</span>&nbsp;<span class="ident" id="2574793"><a href="/net/fd_poll_runtime.go.html#2574744">t</a></span><span class="op" id="2574794">,</span>&nbsp;<span class="string" id="2574796">&#39;w&#39;</span><span class="op" id="2574799">)</span><br>
<span class="lineno"></span><span class="op" id="2574801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2574804">func</span>&nbsp;<span class="ident" id="2574809">setDeadlineImpl</span><span class="op" id="2574824">(</span><span class="ident" id="2574825">fd</span>&nbsp;<span class="op" id="2574828">*</span><span class="ident" id="2574829"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2574834">,</span>&nbsp;<span class="ident" id="2574836">t</span>&nbsp;<span class="ident" id="2574838"><a href="/net/fd_poll_runtime.go.html#2572339">time</a></span><span class="op" id="2574842">.</span><span class="ident" id="2574843">Time</span><span class="op" id="2574847">,</span>&nbsp;<span class="ident" id="2574849">mode</span>&nbsp;<span class="builtintype" id="2574854">int</span><span class="op" id="2574857">)</span>&nbsp;<span class="builtintype" id="2574859">error</span>&nbsp;<span class="op" id="2574865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574868">d</span>&nbsp;<span class="op" id="2574870">:=</span>&nbsp;<span class="ident" id="2574873"><a href="/net/fd_poll_runtime.go.html#2572432">runtimeNano</a></span><span class="op" id="2574884">(</span><span class="op" id="2574885">)</span>&nbsp;<span class="op" id="2574887">+</span>&nbsp;<span class="ident" id="2574889">int64</span><span class="op" id="2574894">(</span><span class="ident" id="2574895"><a href="/net/fd_poll_runtime.go.html#2574836">t</a></span><span class="op" id="2574896">.</span><span class="ident" id="2574897">Sub</span><span class="op" id="2574900">(</span><span class="ident" id="2574901"><a href="/net/fd_poll_runtime.go.html#2572339">time</a></span><span class="op" id="2574905">.</span><span class="ident" id="2574906">Now</span><span class="op" id="2574909">(</span><span class="op" id="2574910">)</span><span class="op" id="2574911">)</span><span class="op" id="2574912">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574915">if</span>&nbsp;<span class="ident" id="2574918"><a href="/net/fd_poll_runtime.go.html#2574836">t</a></span><span class="op" id="2574919">.</span><span class="ident" id="2574920">IsZero</span><span class="op" id="2574926">(</span><span class="op" id="2574927">)</span>&nbsp;<span class="op" id="2574929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574933"><a href="/net/fd_poll_runtime.go.html#2574868">d</a></span>&nbsp;<span class="op" id="2574935">=</span>&nbsp;<span class="num" id="2574937">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2574940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574943">if</span>&nbsp;<span class="ident" id="2574946">err</span>&nbsp;<span class="op" id="2574950">:=</span>&nbsp;<span class="ident" id="2574953"><a href="/net/fd_poll_runtime.go.html#2574825">fd</a></span><span class="op" id="2574955">.</span><span class="ident" id="2574956">incref</span><span class="op" id="2574962">(</span><span class="op" id="2574963">)</span><span class="op" id="2574964">;</span>&nbsp;<span class="ident" id="2574966"><a href="/net/fd_poll_runtime.go.html#2574946">err</a></span>&nbsp;<span class="op" id="2574970">!=</span>&nbsp;<span class="ident" id="2574973">nil</span>&nbsp;<span class="op" id="2574977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2574981">return</span>&nbsp;<span class="ident" id="2574988"><a href="/net/fd_poll_runtime.go.html#2574946">err</a></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2574993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2574996"><a href="/net/fd_poll_runtime.go.html#2572729">runtime_pollSetDeadline</a></span><span class="op" id="2575019">(</span><span class="ident" id="2575020"><a href="/net/fd_poll_runtime.go.html#2574825">fd</a></span><span class="op" id="2575022">.</span><span class="ident" id="2575023">pd</span><span class="op" id="2575025">.</span><span class="ident" id="2575026">runtimeCtx</span><span class="op" id="2575036">,</span>&nbsp;<span class="ident" id="2575038"><a href="/net/fd_poll_runtime.go.html#2574868">d</a></span><span class="op" id="2575039">,</span>&nbsp;<span class="ident" id="2575041"><a href="/net/fd_poll_runtime.go.html#2574849">mode</a></span><span class="op" id="2575045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2575048"><a href="/net/fd_poll_runtime.go.html#2574825">fd</a></span><span class="op" id="2575050">.</span><span class="ident" id="2575051">decref</span><span class="op" id="2575057">(</span><span class="op" id="2575058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2575061">return</span>&nbsp;<span class="ident" id="2575068">nil</span><br>
<span class="lineno"></span><span class="op" id="2575072">}</span>
</div>
</body>
</html>
