<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2751519">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2751574">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2751628">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2751679">//&nbsp;Package&nbsp;time&nbsp;provides&nbsp;functionality&nbsp;for&nbsp;measuring&nbsp;and&nbsp;displaying&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2751753">//</span><br>
<span class="lineno"></span><span class="comment" id="2751756">//&nbsp;The&nbsp;calendrical&nbsp;calculations&nbsp;always&nbsp;assume&nbsp;a&nbsp;Gregorian&nbsp;calendar.</span><br>
<span class="lineno"></span><span class="keyword" id="2751824">package</span>&nbsp;<span class="ident" id="2751832">time</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2751838">import</span>&nbsp;<span class="string" id="2751845">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2751855">//&nbsp;A&nbsp;Time&nbsp;represents&nbsp;an&nbsp;instant&nbsp;in&nbsp;time&nbsp;with&nbsp;nanosecond&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2751922">//</span><br>
<span class="lineno"></span><span class="comment" id="2751925">//&nbsp;Programs&nbsp;using&nbsp;times&nbsp;should&nbsp;typically&nbsp;store&nbsp;and&nbsp;pass&nbsp;them&nbsp;as&nbsp;values,</span><br>
<span class="lineno">15</span><span class="comment" id="2751997">//&nbsp;not&nbsp;pointers.&nbsp;&nbsp;That&nbsp;is,&nbsp;time&nbsp;variables&nbsp;and&nbsp;struct&nbsp;fields&nbsp;should&nbsp;be&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2752070">//&nbsp;type&nbsp;time.Time,&nbsp;not&nbsp;*time.Time.&nbsp;&nbsp;A&nbsp;Time&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2752134">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="comment" id="2752173">//</span><br>
<span class="lineno"></span><span class="comment" id="2752176">//&nbsp;Time&nbsp;instants&nbsp;can&nbsp;be&nbsp;compared&nbsp;using&nbsp;the&nbsp;Before,&nbsp;After,&nbsp;and&nbsp;Equal&nbsp;methods.</span><br>
<span class="lineno">20</span><span class="comment" id="2752253">//&nbsp;The&nbsp;Sub&nbsp;method&nbsp;subtracts&nbsp;two&nbsp;instants,&nbsp;producing&nbsp;a&nbsp;Duration.</span><br>
<span class="lineno"></span><span class="comment" id="2752317">//&nbsp;The&nbsp;Add&nbsp;method&nbsp;adds&nbsp;a&nbsp;Time&nbsp;and&nbsp;a&nbsp;Duration,&nbsp;producing&nbsp;a&nbsp;Time.</span><br>
<span class="lineno"></span><span class="comment" id="2752381">//</span><br>
<span class="lineno"></span><span class="comment" id="2752384">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;Time&nbsp;is&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2752461">//&nbsp;As&nbsp;this&nbsp;time&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;come&nbsp;up&nbsp;in&nbsp;practice,&nbsp;the&nbsp;IsZero&nbsp;method&nbsp;gives</span><br>
<span class="lineno">25</span><span class="comment" id="2752537">//&nbsp;a&nbsp;simple&nbsp;way&nbsp;of&nbsp;detecting&nbsp;a&nbsp;time&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;initialized&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2752615">//</span><br>
<span class="lineno"></span><span class="comment" id="2752618">//&nbsp;Each&nbsp;Time&nbsp;has&nbsp;associated&nbsp;with&nbsp;it&nbsp;a&nbsp;Location,&nbsp;consulted&nbsp;when&nbsp;computing&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2752695">//&nbsp;presentation&nbsp;form&nbsp;of&nbsp;the&nbsp;time,&nbsp;such&nbsp;as&nbsp;in&nbsp;the&nbsp;Format,&nbsp;Hour,&nbsp;and&nbsp;Year&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="2752776">//&nbsp;The&nbsp;methods&nbsp;Local,&nbsp;UTC,&nbsp;and&nbsp;In&nbsp;return&nbsp;a&nbsp;Time&nbsp;with&nbsp;a&nbsp;specific&nbsp;location.</span><br>
<span class="lineno">30</span><span class="comment" id="2752850">//&nbsp;Changing&nbsp;the&nbsp;location&nbsp;in&nbsp;this&nbsp;way&nbsp;changes&nbsp;only&nbsp;the&nbsp;presentation;&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2752930">//&nbsp;change&nbsp;the&nbsp;instant&nbsp;in&nbsp;time&nbsp;being&nbsp;denoted&nbsp;and&nbsp;therefore&nbsp;does&nbsp;not&nbsp;affect&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2753008">//&nbsp;computations&nbsp;described&nbsp;in&nbsp;earlier&nbsp;paragraphs.</span><br>
<span class="lineno"></span><span class="comment" id="2753057">//</span><br>
<span class="lineno"></span><span class="comment" id="2753060">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Go&nbsp;==&nbsp;operator&nbsp;compares&nbsp;not&nbsp;just&nbsp;the&nbsp;time&nbsp;instant&nbsp;but&nbsp;also&nbsp;the</span><br>
<span class="lineno">35</span><span class="comment" id="2753140">//&nbsp;Location.&nbsp;Therefore,&nbsp;Time&nbsp;values&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;as&nbsp;map&nbsp;or&nbsp;database&nbsp;keys</span><br>
<span class="lineno"></span><span class="comment" id="2753219">//&nbsp;without&nbsp;first&nbsp;guaranteeing&nbsp;that&nbsp;the&nbsp;identical&nbsp;Location&nbsp;has&nbsp;been&nbsp;set&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2753298">//&nbsp;values,&nbsp;which&nbsp;can&nbsp;be&nbsp;achieved&nbsp;through&nbsp;use&nbsp;of&nbsp;the&nbsp;UTC&nbsp;or&nbsp;Local&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2753371">//</span><br>
<span class="lineno"></span><span class="keyword" id="2753374">type</span>&nbsp;<span class="ident" id="2753379">Time</span>&nbsp;<span class="keyword" id="2753384">struct</span>&nbsp;<span class="op" id="2753391">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753394">//&nbsp;sec&nbsp;gives&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed&nbsp;since</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753444">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753480">sec</span>&nbsp;<span class="ident" id="2753484">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753492">//&nbsp;nsec&nbsp;specifies&nbsp;a&nbsp;non-negative&nbsp;nanosecond</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753537">//&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;named&nbsp;by&nbsp;Seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753584">//&nbsp;It&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753628">nsec</span>&nbsp;<span class="builtintype" id="2753633">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753641">//&nbsp;loc&nbsp;specifies&nbsp;the&nbsp;Location&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753695">//&nbsp;determine&nbsp;the&nbsp;minute,&nbsp;hour,&nbsp;month,&nbsp;day,&nbsp;and&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753748">//&nbsp;that&nbsp;correspond&nbsp;to&nbsp;this&nbsp;Time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753782">//&nbsp;Only&nbsp;the&nbsp;zero&nbsp;Time&nbsp;has&nbsp;a&nbsp;nil&nbsp;Location.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753825">//&nbsp;In&nbsp;that&nbsp;case&nbsp;it&nbsp;is&nbsp;interpreted&nbsp;to&nbsp;mean&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753873">loc</span>&nbsp;<span class="op" id="2753877">*</span><span class="ident" id="2753878">Location</span><br>
<span class="lineno">55</span><span class="op" id="2753887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2753890">//&nbsp;After&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;after&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2753946">func</span>&nbsp;<span class="op" id="2753951">(</span><span class="ident" id="2753952">t</span>&nbsp;<span class="ident" id="2753954">Time</span><span class="op" id="2753958">)</span>&nbsp;<span class="ident" id="2753960">After</span><span class="op" id="2753965">(</span><span class="ident" id="2753966">u</span>&nbsp;<span class="ident" id="2753968">Time</span><span class="op" id="2753972">)</span>&nbsp;<span class="builtintype" id="2753974">bool</span>&nbsp;<span class="op" id="2753979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753982">return</span>&nbsp;<span class="ident" id="2753989">t</span><span class="op" id="2753990">.</span><span class="ident" id="2753991">sec</span>&nbsp;<span class="op" id="2753995">&gt;</span>&nbsp;<span class="ident" id="2753997">u</span><span class="op" id="2753998">.</span><span class="ident" id="2753999">sec</span>&nbsp;<span class="op" id="2754003">||</span>&nbsp;<span class="ident" id="2754006">t</span><span class="op" id="2754007">.</span><span class="ident" id="2754008">sec</span>&nbsp;<span class="op" id="2754012">==</span>&nbsp;<span class="ident" id="2754015">u</span><span class="op" id="2754016">.</span><span class="ident" id="2754017">sec</span>&nbsp;<span class="op" id="2754021">&amp;&amp;</span>&nbsp;<span class="ident" id="2754024">t</span><span class="op" id="2754025">.</span><span class="ident" id="2754026">nsec</span>&nbsp;<span class="op" id="2754031">&gt;</span>&nbsp;<span class="ident" id="2754033">u</span><span class="op" id="2754034">.</span><span class="ident" id="2754035">nsec</span><br>
<span class="lineno">60</span><span class="op" id="2754040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754043">//&nbsp;Before&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;before&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2754101">func</span>&nbsp;<span class="op" id="2754106">(</span><span class="ident" id="2754107">t</span>&nbsp;<span class="ident" id="2754109">Time</span><span class="op" id="2754113">)</span>&nbsp;<span class="ident" id="2754115">Before</span><span class="op" id="2754121">(</span><span class="ident" id="2754122">u</span>&nbsp;<span class="ident" id="2754124">Time</span><span class="op" id="2754128">)</span>&nbsp;<span class="builtintype" id="2754130">bool</span>&nbsp;<span class="op" id="2754135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754138">return</span>&nbsp;<span class="ident" id="2754145">t</span><span class="op" id="2754146">.</span><span class="ident" id="2754147">sec</span>&nbsp;<span class="op" id="2754151">&lt;</span>&nbsp;<span class="ident" id="2754153">u</span><span class="op" id="2754154">.</span><span class="ident" id="2754155">sec</span>&nbsp;<span class="op" id="2754159">||</span>&nbsp;<span class="ident" id="2754162">t</span><span class="op" id="2754163">.</span><span class="ident" id="2754164">sec</span>&nbsp;<span class="op" id="2754168">==</span>&nbsp;<span class="ident" id="2754171">u</span><span class="op" id="2754172">.</span><span class="ident" id="2754173">sec</span>&nbsp;<span class="op" id="2754177">&amp;&amp;</span>&nbsp;<span class="ident" id="2754180">t</span><span class="op" id="2754181">.</span><span class="ident" id="2754182">nsec</span>&nbsp;<span class="op" id="2754187">&lt;</span>&nbsp;<span class="ident" id="2754189">u</span><span class="op" id="2754190">.</span><span class="ident" id="2754191">nsec</span><br>
<span class="lineno">65</span><span class="op" id="2754196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754199">//&nbsp;Equal&nbsp;reports&nbsp;whether&nbsp;t&nbsp;and&nbsp;u&nbsp;represent&nbsp;the&nbsp;same&nbsp;time&nbsp;instant.</span><br>
<span class="lineno"></span><span class="comment" id="2754265">//&nbsp;Two&nbsp;times&nbsp;can&nbsp;be&nbsp;equal&nbsp;even&nbsp;if&nbsp;they&nbsp;are&nbsp;in&nbsp;different&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="2754332">//&nbsp;For&nbsp;example,&nbsp;6:00&nbsp;+0200&nbsp;CEST&nbsp;and&nbsp;4:00&nbsp;UTC&nbsp;are&nbsp;Equal.</span><br>
<span class="lineno">70</span><span class="comment" id="2754388">//&nbsp;This&nbsp;comparison&nbsp;is&nbsp;different&nbsp;from&nbsp;using&nbsp;t&nbsp;==&nbsp;u,&nbsp;which&nbsp;also&nbsp;compares</span><br>
<span class="lineno"></span><span class="comment" id="2754459">//&nbsp;the&nbsp;locations.</span><br>
<span class="lineno"></span><span class="keyword" id="2754477">func</span>&nbsp;<span class="op" id="2754482">(</span><span class="ident" id="2754483">t</span>&nbsp;<span class="ident" id="2754485">Time</span><span class="op" id="2754489">)</span>&nbsp;<span class="ident" id="2754491">Equal</span><span class="op" id="2754496">(</span><span class="ident" id="2754497">u</span>&nbsp;<span class="ident" id="2754499">Time</span><span class="op" id="2754503">)</span>&nbsp;<span class="builtintype" id="2754505">bool</span>&nbsp;<span class="op" id="2754510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754513">return</span>&nbsp;<span class="ident" id="2754520">t</span><span class="op" id="2754521">.</span><span class="ident" id="2754522">sec</span>&nbsp;<span class="op" id="2754526">==</span>&nbsp;<span class="ident" id="2754529">u</span><span class="op" id="2754530">.</span><span class="ident" id="2754531">sec</span>&nbsp;<span class="op" id="2754535">&amp;&amp;</span>&nbsp;<span class="ident" id="2754538">t</span><span class="op" id="2754539">.</span><span class="ident" id="2754540">nsec</span>&nbsp;<span class="op" id="2754545">==</span>&nbsp;<span class="ident" id="2754548">u</span><span class="op" id="2754549">.</span><span class="ident" id="2754550">nsec</span><br>
<span class="lineno"></span><span class="op" id="2754555">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="2754558">//&nbsp;A&nbsp;Month&nbsp;specifies&nbsp;a&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;(January&nbsp;=&nbsp;1,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2754619">type</span>&nbsp;<span class="ident" id="2754624">Month</span>&nbsp;<span class="builtintype" id="2754630">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2754635">const</span>&nbsp;<span class="op" id="2754641">(</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754644">January</span>&nbsp;<span class="ident" id="2754652">Month</span>&nbsp;<span class="op" id="2754658">=</span>&nbsp;<span class="num" id="2754660">1</span>&nbsp;<span class="op" id="2754662">+</span>&nbsp;<span class="ident" id="2754664">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754670">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754680">March</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754687">April</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754694">May</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754699">June</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754705">July</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754711">August</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754719">September</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754730">October</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754739">November</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754749">December</span><br>
<span class="lineno"></span><span class="op" id="2754758">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2754761">var</span>&nbsp;<span class="ident" id="2754765">months</span>&nbsp;<span class="op" id="2754772">=</span>&nbsp;<span class="op" id="2754774">[</span><span class="op" id="2754775">...</span><span class="op" id="2754778">]</span><span class="builtintype" id="2754779">string</span><span class="op" id="2754785">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754788">&#34;January&#34;</span><span class="op" id="2754797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754800">&#34;February&#34;</span><span class="op" id="2754810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754813">&#34;March&#34;</span><span class="op" id="2754820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754823">&#34;April&#34;</span><span class="op" id="2754830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754833">&#34;May&#34;</span><span class="op" id="2754838">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754841">&#34;June&#34;</span><span class="op" id="2754847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754850">&#34;July&#34;</span><span class="op" id="2754856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754859">&#34;August&#34;</span><span class="op" id="2754867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754870">&#34;September&#34;</span><span class="op" id="2754881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754884">&#34;October&#34;</span><span class="op" id="2754893">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754896">&#34;November&#34;</span><span class="op" id="2754906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2754909">&#34;December&#34;</span><span class="op" id="2754919">,</span><br>
<span class="lineno"></span><span class="op" id="2754921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754924">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;month&nbsp;(&#34;January&#34;,&nbsp;&#34;February&#34;,&nbsp;...).</span><br>
<span class="lineno">110</span><span class="keyword" id="2755002">func</span>&nbsp;<span class="op" id="2755007">(</span><span class="ident" id="2755008">m</span>&nbsp;<span class="ident" id="2755010">Month</span><span class="op" id="2755015">)</span>&nbsp;<span class="ident" id="2755017">String</span><span class="op" id="2755023">(</span><span class="op" id="2755024">)</span>&nbsp;<span class="builtintype" id="2755026">string</span>&nbsp;<span class="op" id="2755033">{</span>&nbsp;<span class="keyword" id="2755035">return</span>&nbsp;<span class="ident" id="2755042">months</span><span class="op" id="2755048">[</span><span class="ident" id="2755049">m</span><span class="op" id="2755050">-</span><span class="num" id="2755051">1</span><span class="op" id="2755052">]</span>&nbsp;<span class="op" id="2755054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755057">//&nbsp;A&nbsp;Weekday&nbsp;specifies&nbsp;a&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;(Sunday&nbsp;=&nbsp;0,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2755117">type</span>&nbsp;<span class="ident" id="2755122">Weekday</span>&nbsp;<span class="builtintype" id="2755130">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2755135">const</span>&nbsp;<span class="op" id="2755141">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755144">Sunday</span>&nbsp;<span class="ident" id="2755151">Weekday</span>&nbsp;<span class="op" id="2755159">=</span>&nbsp;<span class="ident" id="2755161">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755167">Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755175">Tuesday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755184">Wednesday</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755195">Thursday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755205">Friday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755213">Saturday</span><br>
<span class="lineno"></span><span class="op" id="2755222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2755225">var</span>&nbsp;<span class="ident" id="2755229">days</span>&nbsp;<span class="op" id="2755234">=</span>&nbsp;<span class="op" id="2755236">[</span><span class="op" id="2755237">...</span><span class="op" id="2755240">]</span><span class="builtintype" id="2755241">string</span><span class="op" id="2755247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755250">&#34;Sunday&#34;</span><span class="op" id="2755258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755261">&#34;Monday&#34;</span><span class="op" id="2755269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755272">&#34;Tuesday&#34;</span><span class="op" id="2755281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755284">&#34;Wednesday&#34;</span><span class="op" id="2755295">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755298">&#34;Thursday&#34;</span><span class="op" id="2755308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755311">&#34;Friday&#34;</span><span class="op" id="2755319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2755322">&#34;Saturday&#34;</span><span class="op" id="2755332">,</span><br>
<span class="lineno"></span><span class="op" id="2755334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="2755337">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;day&nbsp;(&#34;Sunday&#34;,&nbsp;&#34;Monday&#34;,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2755410">func</span>&nbsp;<span class="op" id="2755415">(</span><span class="ident" id="2755416">d</span>&nbsp;<span class="ident" id="2755418">Weekday</span><span class="op" id="2755425">)</span>&nbsp;<span class="ident" id="2755427">String</span><span class="op" id="2755433">(</span><span class="op" id="2755434">)</span>&nbsp;<span class="builtintype" id="2755436">string</span>&nbsp;<span class="op" id="2755443">{</span>&nbsp;<span class="keyword" id="2755445">return</span>&nbsp;<span class="ident" id="2755452">days</span><span class="op" id="2755456">[</span><span class="ident" id="2755457">d</span><span class="op" id="2755458">]</span>&nbsp;<span class="op" id="2755460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755463">//&nbsp;Computations&nbsp;on&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2755488">//</span><br>
<span class="lineno">140</span><span class="comment" id="2755491">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Time&nbsp;is&nbsp;defined&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2755537">//&nbsp;&nbsp;&nbsp;&nbspJanuary&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC</span><br>
<span class="lineno"></span><span class="comment" id="2755582">//&nbsp;which&nbsp;(1)&nbsp;looks&nbsp;like&nbsp;a&nbsp;zero,&nbsp;or&nbsp;as&nbsp;close&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;in&nbsp;a&nbsp;date</span><br>
<span class="lineno"></span><span class="comment" id="2755651">//&nbsp;(1-1-1&nbsp;00:00:00&nbsp;UTC),&nbsp;(2)&nbsp;is&nbsp;unlikely&nbsp;enough&nbsp;to&nbsp;arise&nbsp;in&nbsp;practice&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2755723">//&nbsp;be&nbsp;a&nbsp;suitable&nbsp;&#34;not&nbsp;set&#34;&nbsp;sentinel,&nbsp;unlike&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;and&nbsp;(3)&nbsp;has&nbsp;a</span><br>
<span class="lineno">145</span><span class="comment" id="2755793">//&nbsp;non-negative&nbsp;year&nbsp;even&nbsp;in&nbsp;time&nbsp;zones&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;unlike&nbsp;1-1-0</span><br>
<span class="lineno"></span><span class="comment" id="2755859">//&nbsp;00:00:00&nbsp;UTC,&nbsp;which&nbsp;would&nbsp;be&nbsp;12-31-(-1)&nbsp;19:00:00&nbsp;in&nbsp;New&nbsp;York.</span><br>
<span class="lineno"></span><span class="comment" id="2755924">//</span><br>
<span class="lineno"></span><span class="comment" id="2755927">//&nbsp;The&nbsp;zero&nbsp;Time&nbsp;value&nbsp;does&nbsp;not&nbsp;force&nbsp;a&nbsp;specific&nbsp;epoch&nbsp;for&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2755995">//&nbsp;representation.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;use&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;internally,&nbsp;we</span><br>
<span class="lineno">150</span><span class="comment" id="2756065">//&nbsp;could&nbsp;define&nbsp;that&nbsp;to&nbsp;distinguish&nbsp;a&nbsp;zero&nbsp;value&nbsp;from&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2756136">//&nbsp;time&nbsp;would&nbsp;be&nbsp;represented&nbsp;by&nbsp;sec=-1,&nbsp;nsec=1e9.&nbsp;&nbsp;However,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2756204">//&nbsp;suggest&nbsp;a&nbsp;representation,&nbsp;namely&nbsp;using&nbsp;1-1-1&nbsp;00:00:00&nbsp;UTC&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2756272">//&nbsp;epoch,&nbsp;and&nbsp;that&#39;s&nbsp;what&nbsp;we&nbsp;do.</span><br>
<span class="lineno"></span><span class="comment" id="2756305">//</span><br>
<span class="lineno">155</span><span class="comment" id="2756308">//&nbsp;The&nbsp;Add&nbsp;and&nbsp;Sub&nbsp;computations&nbsp;are&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;choice&nbsp;of&nbsp;epoch.</span><br>
<span class="lineno"></span><span class="comment" id="2756378">//</span><br>
<span class="lineno"></span><span class="comment" id="2756381">//&nbsp;The&nbsp;presentation&nbsp;computations&nbsp;-&nbsp;year,&nbsp;month,&nbsp;minute,&nbsp;and&nbsp;so&nbsp;on&nbsp;-&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2756453">//&nbsp;rely&nbsp;heavily&nbsp;on&nbsp;division&nbsp;and&nbsp;modulus&nbsp;by&nbsp;positive&nbsp;constants.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span><span class="comment" id="2756521">//&nbsp;calendrical&nbsp;calculations&nbsp;we&nbsp;want&nbsp;these&nbsp;divisions&nbsp;to&nbsp;round&nbsp;down,&nbsp;even</span><br>
<span class="lineno">160</span><span class="comment" id="2756593">//&nbsp;for&nbsp;negative&nbsp;values,&nbsp;so&nbsp;that&nbsp;the&nbsp;remainder&nbsp;is&nbsp;always&nbsp;positive,&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="2756663">//&nbsp;Go&#39;s&nbsp;division&nbsp;(like&nbsp;most&nbsp;hardware&nbsp;division&nbsp;instructions)&nbsp;rounds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2756733">//&nbsp;zero.&nbsp;&nbsp;We&nbsp;can&nbsp;still&nbsp;do&nbsp;those&nbsp;computations&nbsp;and&nbsp;then&nbsp;adjust&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="2756805">//&nbsp;for&nbsp;a&nbsp;negative&nbsp;numerator,&nbsp;but&nbsp;it&#39;s&nbsp;annoying&nbsp;to&nbsp;write&nbsp;the&nbsp;adjustment</span><br>
<span class="lineno"></span><span class="comment" id="2756876">//&nbsp;over&nbsp;and&nbsp;over.&nbsp;&nbsp;Instead,&nbsp;we&nbsp;can&nbsp;change&nbsp;to&nbsp;a&nbsp;different&nbsp;epoch&nbsp;so&nbsp;long</span><br>
<span class="lineno">165</span><span class="comment" id="2756947">//&nbsp;ago&nbsp;that&nbsp;all&nbsp;the&nbsp;times&nbsp;we&nbsp;care&nbsp;about&nbsp;will&nbsp;be&nbsp;positive,&nbsp;and&nbsp;then&nbsp;round</span><br>
<span class="lineno"></span><span class="comment" id="2757020">//&nbsp;to&nbsp;zero&nbsp;and&nbsp;round&nbsp;down&nbsp;coincide.&nbsp;&nbsp;These&nbsp;presentation&nbsp;routines&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2757093">//&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;zone&nbsp;offset,&nbsp;so&nbsp;adding&nbsp;the&nbsp;translation&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2757158">//&nbsp;alternate&nbsp;epoch&nbsp;is&nbsp;cheap.&nbsp;&nbsp;For&nbsp;example,&nbsp;having&nbsp;a&nbsp;non-negative&nbsp;time&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="2757230">//&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">170</span><span class="comment" id="2757257">//</span><br>
<span class="lineno"></span><span class="comment" id="2757260">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2757276">//</span><br>
<span class="lineno"></span><span class="comment" id="2757279">//&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2757293">//</span><br>
<span class="lineno">175</span><span class="comment" id="2757296">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2757312">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;sec&nbsp;&lt;&nbsp;0&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2757328">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;+=&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2757342">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2757347">//</span><br>
<span class="lineno">180</span><span class="comment" id="2757350">//&nbsp;everywhere.</span><br>
<span class="lineno"></span><span class="comment" id="2757365">//</span><br>
<span class="lineno"></span><span class="comment" id="2757368">//&nbsp;The&nbsp;calendar&nbsp;runs&nbsp;on&nbsp;an&nbsp;exact&nbsp;400&nbsp;year&nbsp;cycle:&nbsp;a&nbsp;400-year&nbsp;calendar</span><br>
<span class="lineno"></span><span class="comment" id="2757437">//&nbsp;printed&nbsp;for&nbsp;1970-2469&nbsp;will&nbsp;apply&nbsp;as&nbsp;well&nbsp;to&nbsp;2470-2869.&nbsp;&nbsp;Even&nbsp;the&nbsp;days</span><br>
<span class="lineno"></span><span class="comment" id="2757510">//&nbsp;of&nbsp;the&nbsp;week&nbsp;match&nbsp;up.&nbsp;&nbsp;It&nbsp;simplifies&nbsp;the&nbsp;computations&nbsp;to&nbsp;choose&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="2757581">//&nbsp;cycle&nbsp;boundaries&nbsp;so&nbsp;that&nbsp;the&nbsp;exceptional&nbsp;years&nbsp;are&nbsp;always&nbsp;delayed&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2757653">//&nbsp;long&nbsp;as&nbsp;possible.&nbsp;&nbsp;That&nbsp;means&nbsp;choosing&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2757725">//&nbsp;that&nbsp;the&nbsp;first&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;4th&nbsp;year,&nbsp;the&nbsp;first&nbsp;missed&nbsp;leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2757797">//&nbsp;is&nbsp;the&nbsp;100th&nbsp;year,&nbsp;and&nbsp;the&nbsp;missed&nbsp;missed&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;400th&nbsp;year.</span><br>
<span class="lineno"></span><span class="comment" id="2757870">//&nbsp;So&nbsp;we&#39;d&nbsp;prefer&nbsp;instead&nbsp;to&nbsp;print&nbsp;a&nbsp;calendar&nbsp;for&nbsp;2001-2400&nbsp;and&nbsp;reuse&nbsp;it</span><br>
<span class="lineno">190</span><span class="comment" id="2757943">//&nbsp;for&nbsp;2401-2800.</span><br>
<span class="lineno"></span><span class="comment" id="2757961">//</span><br>
<span class="lineno"></span><span class="comment" id="2757964">//&nbsp;Finally,&nbsp;it&#39;s&nbsp;convenient&nbsp;if&nbsp;the&nbsp;delta&nbsp;between&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2758032">//&nbsp;long-ago&nbsp;epoch&nbsp;is&nbsp;representable&nbsp;by&nbsp;an&nbsp;int64&nbsp;constant.</span><br>
<span class="lineno"></span><span class="comment" id="2758089">//</span><br>
<span class="lineno">195</span><span class="comment" id="2758092">//&nbsp;These&nbsp;three&nbsp;considerations—choose&nbsp;an&nbsp;epoch&nbsp;as&nbsp;early&nbsp;as&nbsp;possible,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2758167">//&nbsp;uses&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;that&nbsp;is&nbsp;no&nbsp;more&nbsp;than&nbsp;2⁶³&nbsp;seconds</span><br>
<span class="lineno"></span><span class="comment" id="2758242">//&nbsp;earlier&nbsp;than&nbsp;1970—bring&nbsp;us&nbsp;to&nbsp;the&nbsp;year&nbsp;-292277022399.&nbsp;&nbsp;We&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2758314">//&nbsp;this&nbsp;year&nbsp;as&nbsp;the&nbsp;absolute&nbsp;zero&nbsp;year,&nbsp;and&nbsp;to&nbsp;times&nbsp;measured&nbsp;as&nbsp;a&nbsp;uint64</span><br>
<span class="lineno"></span><span class="comment" id="2758388">//&nbsp;seconds&nbsp;since&nbsp;this&nbsp;year&nbsp;as&nbsp;absolute&nbsp;times.</span><br>
<span class="lineno">200</span><span class="comment" id="2758434">//</span><br>
<span class="lineno"></span><span class="comment" id="2758437">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1—the&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="2758513">//&nbsp;used&nbsp;for&nbsp;Time&#39;s&nbsp;sec&nbsp;field—are&nbsp;called&nbsp;internal&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2758571">//</span><br>
<span class="lineno"></span><span class="comment" id="2758574">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1970&nbsp;are&nbsp;called&nbsp;Unix</span><br>
<span class="lineno">205</span><span class="comment" id="2758648">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2758658">//</span><br>
<span class="lineno"></span><span class="comment" id="2758661">//&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;just&nbsp;use&nbsp;the&nbsp;year&nbsp;1&nbsp;as&nbsp;the&nbsp;absolute&nbsp;epoch,&nbsp;defining</span><br>
<span class="lineno"></span><span class="comment" id="2758734">//&nbsp;that&nbsp;the&nbsp;routines&nbsp;are&nbsp;only&nbsp;valid&nbsp;for&nbsp;years&nbsp;&gt;=&nbsp;1.&nbsp;&nbsp;However,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2758800">//&nbsp;routines&nbsp;would&nbsp;then&nbsp;be&nbsp;invalid&nbsp;when&nbsp;displaying&nbsp;the&nbsp;epoch&nbsp;in&nbsp;time&nbsp;zones</span><br>
<span class="lineno">210</span><span class="comment" id="2758874">//&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;since&nbsp;it&nbsp;is&nbsp;year&nbsp;0.&nbsp;&nbsp;It&nbsp;doesn&#39;t&nbsp;seem&nbsp;tenable&nbsp;to&nbsp;say&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2758947">//&nbsp;printing&nbsp;the&nbsp;zero&nbsp;time&nbsp;correctly&nbsp;isn&#39;t&nbsp;supported&nbsp;in&nbsp;half&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2759016">//&nbsp;zones.&nbsp;&nbsp;By&nbsp;comparison,&nbsp;it&#39;s&nbsp;reasonable&nbsp;to&nbsp;mishandle&nbsp;some&nbsp;times&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2759085">//&nbsp;the&nbsp;year&nbsp;-292277022399.</span><br>
<span class="lineno"></span><span class="comment" id="2759112">//</span><br>
<span class="lineno">215</span><span class="comment" id="2759115">//&nbsp;All&nbsp;this&nbsp;is&nbsp;opaque&nbsp;to&nbsp;clients&nbsp;of&nbsp;the&nbsp;API&nbsp;and&nbsp;can&nbsp;be&nbsp;changed&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2759183">//&nbsp;better&nbsp;implementation&nbsp;presents&nbsp;itself.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2759226">const</span>&nbsp;<span class="op" id="2759232">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759235">//&nbsp;The&nbsp;unsigned&nbsp;zero&nbsp;year&nbsp;for&nbsp;internal&nbsp;calculations.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759289">//&nbsp;Must&nbsp;be&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;times&nbsp;before&nbsp;it&nbsp;will&nbsp;not&nbsp;compute&nbsp;correctly,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759360">//&nbsp;but&nbsp;otherwise&nbsp;can&nbsp;be&nbsp;changed&nbsp;at&nbsp;will.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759402">absoluteZeroYear</span>&nbsp;<span class="op" id="2759419">=</span>&nbsp;<span class="op" id="2759421">-</span><span class="num" id="2759422">292277022399</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759437">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Time.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759468">//&nbsp;Assumed&nbsp;by&nbsp;the&nbsp;unixToInternal&nbsp;computation&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759521">internalYear</span>&nbsp;<span class="op" id="2759534">=</span>&nbsp;<span class="num" id="2759536">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759540">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Unix&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759576">unixYear</span>&nbsp;<span class="op" id="2759585">=</span>&nbsp;<span class="num" id="2759587">1970</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759594">//&nbsp;Offsets&nbsp;to&nbsp;convert&nbsp;between&nbsp;internal&nbsp;and&nbsp;absolute&nbsp;or&nbsp;Unix&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759662">absoluteToInternal</span>&nbsp;<span class="ident" id="2759681">int64</span>&nbsp;<span class="op" id="2759687">=</span>&nbsp;<span class="op" id="2759689">(</span><span class="ident" id="2759690">absoluteZeroYear</span>&nbsp;<span class="op" id="2759707">-</span>&nbsp;<span class="ident" id="2759709">internalYear</span><span class="op" id="2759721">)</span>&nbsp;<span class="op" id="2759723">*</span>&nbsp;<span class="num" id="2759725">365.2425</span>&nbsp;<span class="op" id="2759734">*</span>&nbsp;<span class="ident" id="2759736">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759751">internalToAbsolute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2759776">=</span>&nbsp;<span class="op" id="2759778">-</span><span class="ident" id="2759779">absoluteToInternal</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759800">unixToInternal</span>&nbsp;<span class="ident" id="2759815">int64</span>&nbsp;<span class="op" id="2759821">=</span>&nbsp;<span class="op" id="2759823">(</span><span class="num" id="2759824">1969</span><span class="op" id="2759828">*</span><span class="num" id="2759829">365</span>&nbsp;<span class="op" id="2759833">+</span>&nbsp;<span class="num" id="2759835">1969</span><span class="op" id="2759839">/</span><span class="num" id="2759840">4</span>&nbsp;<span class="op" id="2759842">-</span>&nbsp;<span class="num" id="2759844">1969</span><span class="op" id="2759848">/</span><span class="num" id="2759849">100</span>&nbsp;<span class="op" id="2759853">+</span>&nbsp;<span class="num" id="2759855">1969</span><span class="op" id="2759859">/</span><span class="num" id="2759860">400</span><span class="op" id="2759863">)</span>&nbsp;<span class="op" id="2759865">*</span>&nbsp;<span class="ident" id="2759867">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759882">internalToUnix</span>&nbsp;<span class="ident" id="2759897">int64</span>&nbsp;<span class="op" id="2759903">=</span>&nbsp;<span class="op" id="2759905">-</span><span class="ident" id="2759906">unixToInternal</span><br>
<span class="lineno"></span><span class="op" id="2759921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759924">//&nbsp;IsZero&nbsp;reports&nbsp;whether&nbsp;t&nbsp;represents&nbsp;the&nbsp;zero&nbsp;time&nbsp;instant,</span><br>
<span class="lineno">240</span><span class="comment" id="2759986">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2760022">func</span>&nbsp;<span class="op" id="2760027">(</span><span class="ident" id="2760028">t</span>&nbsp;<span class="ident" id="2760030">Time</span><span class="op" id="2760034">)</span>&nbsp;<span class="ident" id="2760036">IsZero</span><span class="op" id="2760042">(</span><span class="op" id="2760043">)</span>&nbsp;<span class="builtintype" id="2760045">bool</span>&nbsp;<span class="op" id="2760050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760053">return</span>&nbsp;<span class="ident" id="2760060">t</span><span class="op" id="2760061">.</span><span class="ident" id="2760062">sec</span>&nbsp;<span class="op" id="2760066">==</span>&nbsp;<span class="num" id="2760069">0</span>&nbsp;<span class="op" id="2760071">&amp;&amp;</span>&nbsp;<span class="ident" id="2760074">t</span><span class="op" id="2760075">.</span><span class="ident" id="2760076">nsec</span>&nbsp;<span class="op" id="2760081">==</span>&nbsp;<span class="num" id="2760084">0</span><br>
<span class="lineno"></span><span class="op" id="2760086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2760089">//&nbsp;abs&nbsp;returns&nbsp;the&nbsp;time&nbsp;t&nbsp;as&nbsp;an&nbsp;absolute&nbsp;time,&nbsp;adjusted&nbsp;by&nbsp;the&nbsp;zone&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="2760165">//&nbsp;It&nbsp;is&nbsp;called&nbsp;when&nbsp;computing&nbsp;a&nbsp;presentation&nbsp;property&nbsp;like&nbsp;Month&nbsp;or&nbsp;Hour.</span><br>
<span class="lineno"></span><span class="keyword" id="2760240">func</span>&nbsp;<span class="op" id="2760245">(</span><span class="ident" id="2760246">t</span>&nbsp;<span class="ident" id="2760248">Time</span><span class="op" id="2760252">)</span>&nbsp;<span class="ident" id="2760254">abs</span><span class="op" id="2760257">(</span><span class="op" id="2760258">)</span>&nbsp;<span class="ident" id="2760260">uint64</span>&nbsp;<span class="op" id="2760267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760270">l</span>&nbsp;<span class="op" id="2760272">:=</span>&nbsp;<span class="ident" id="2760275">t</span><span class="op" id="2760276">.</span><span class="ident" id="2760277">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2760282">//&nbsp;Avoid&nbsp;function&nbsp;calls&nbsp;when&nbsp;possible.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760322">if</span>&nbsp;<span class="ident" id="2760325">l</span>&nbsp;<span class="op" id="2760327">==</span>&nbsp;<span class="ident" id="2760330">nil</span>&nbsp;<span class="op" id="2760334">||</span>&nbsp;<span class="ident" id="2760337">l</span>&nbsp;<span class="op" id="2760339">==</span>&nbsp;<span class="op" id="2760342">&amp;</span><span class="ident" id="2760343">localLoc</span>&nbsp;<span class="op" id="2760352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760356">l</span>&nbsp;<span class="op" id="2760358">=</span>&nbsp;<span class="ident" id="2760360">l</span><span class="op" id="2760361">.</span><span class="ident" id="2760362">get</span><span class="op" id="2760365">(</span><span class="op" id="2760366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760372">sec</span>&nbsp;<span class="op" id="2760376">:=</span>&nbsp;<span class="ident" id="2760379">t</span><span class="op" id="2760380">.</span><span class="ident" id="2760381">sec</span>&nbsp;<span class="op" id="2760385">+</span>&nbsp;<span class="ident" id="2760387">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760403">if</span>&nbsp;<span class="ident" id="2760406">l</span>&nbsp;<span class="op" id="2760408">!=</span>&nbsp;<span class="op" id="2760411">&amp;</span><span class="ident" id="2760412">utcLoc</span>&nbsp;<span class="op" id="2760419">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760423">if</span>&nbsp;<span class="ident" id="2760426">l</span><span class="op" id="2760427">.</span><span class="ident" id="2760428">cacheZone</span>&nbsp;<span class="op" id="2760438">!=</span>&nbsp;<span class="ident" id="2760441">nil</span>&nbsp;<span class="op" id="2760445">&amp;&amp;</span>&nbsp;<span class="ident" id="2760448">l</span><span class="op" id="2760449">.</span><span class="ident" id="2760450">cacheStart</span>&nbsp;<span class="op" id="2760461">&lt;=</span>&nbsp;<span class="ident" id="2760464">sec</span>&nbsp;<span class="op" id="2760468">&amp;&amp;</span>&nbsp;<span class="ident" id="2760471">sec</span>&nbsp;<span class="op" id="2760475">&lt;</span>&nbsp;<span class="ident" id="2760477">l</span><span class="op" id="2760478">.</span><span class="ident" id="2760479">cacheEnd</span>&nbsp;<span class="op" id="2760488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760493">sec</span>&nbsp;<span class="op" id="2760497">+=</span>&nbsp;<span class="ident" id="2760500">int64</span><span class="op" id="2760505">(</span><span class="ident" id="2760506">l</span><span class="op" id="2760507">.</span><span class="ident" id="2760508">cacheZone</span><span class="op" id="2760517">.</span><span class="ident" id="2760518">offset</span><span class="op" id="2760524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760528">}</span>&nbsp;<span class="keyword" id="2760530">else</span>&nbsp;<span class="op" id="2760535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760540">_</span><span class="op" id="2760541">,</span>&nbsp;<span class="ident" id="2760543">offset</span><span class="op" id="2760549">,</span>&nbsp;<span class="ident" id="2760551">_</span><span class="op" id="2760552">,</span>&nbsp;<span class="ident" id="2760554">_</span><span class="op" id="2760555">,</span>&nbsp;<span class="ident" id="2760557">_</span>&nbsp;<span class="op" id="2760559">:=</span>&nbsp;<span class="ident" id="2760562">l</span><span class="op" id="2760563">.</span><span class="ident" id="2760564">lookup</span><span class="op" id="2760570">(</span><span class="ident" id="2760571">sec</span><span class="op" id="2760574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760579">sec</span>&nbsp;<span class="op" id="2760583">+=</span>&nbsp;<span class="ident" id="2760586">int64</span><span class="op" id="2760591">(</span><span class="ident" id="2760592">offset</span><span class="op" id="2760598">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760608">return</span>&nbsp;<span class="ident" id="2760615">uint64</span><span class="op" id="2760621">(</span><span class="ident" id="2760622">sec</span>&nbsp;<span class="op" id="2760626">+</span>&nbsp;<span class="op" id="2760628">(</span><span class="ident" id="2760629">unixToInternal</span>&nbsp;<span class="op" id="2760644">+</span>&nbsp;<span class="ident" id="2760646">internalToAbsolute</span><span class="op" id="2760664">)</span><span class="op" id="2760665">)</span><br>
<span class="lineno"></span><span class="op" id="2760667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="2760670">//&nbsp;locabs&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;Zone&nbsp;and&nbsp;abs&nbsp;methods,</span><br>
<span class="lineno"></span><span class="comment" id="2760726">//&nbsp;extracting&nbsp;both&nbsp;return&nbsp;values&nbsp;from&nbsp;a&nbsp;single&nbsp;zone&nbsp;lookup.</span><br>
<span class="lineno"></span><span class="keyword" id="2760786">func</span>&nbsp;<span class="op" id="2760791">(</span><span class="ident" id="2760792">t</span>&nbsp;<span class="ident" id="2760794">Time</span><span class="op" id="2760798">)</span>&nbsp;<span class="ident" id="2760800">locabs</span><span class="op" id="2760806">(</span><span class="op" id="2760807">)</span>&nbsp;<span class="op" id="2760809">(</span><span class="ident" id="2760810">name</span>&nbsp;<span class="builtintype" id="2760815">string</span><span class="op" id="2760821">,</span>&nbsp;<span class="ident" id="2760823">offset</span>&nbsp;<span class="builtintype" id="2760830">int</span><span class="op" id="2760833">,</span>&nbsp;<span class="ident" id="2760835">abs</span>&nbsp;<span class="ident" id="2760839">uint64</span><span class="op" id="2760845">)</span>&nbsp;<span class="op" id="2760847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760850">l</span>&nbsp;<span class="op" id="2760852">:=</span>&nbsp;<span class="ident" id="2760855">t</span><span class="op" id="2760856">.</span><span class="ident" id="2760857">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760862">if</span>&nbsp;<span class="ident" id="2760865">l</span>&nbsp;<span class="op" id="2760867">==</span>&nbsp;<span class="ident" id="2760870">nil</span>&nbsp;<span class="op" id="2760874">||</span>&nbsp;<span class="ident" id="2760877">l</span>&nbsp;<span class="op" id="2760879">==</span>&nbsp;<span class="op" id="2760882">&amp;</span><span class="ident" id="2760883">localLoc</span>&nbsp;<span class="op" id="2760892">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760896">l</span>&nbsp;<span class="op" id="2760898">=</span>&nbsp;<span class="ident" id="2760900">l</span><span class="op" id="2760901">.</span><span class="ident" id="2760902">get</span><span class="op" id="2760905">(</span><span class="op" id="2760906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2760912">//&nbsp;Avoid&nbsp;function&nbsp;call&nbsp;if&nbsp;we&nbsp;hit&nbsp;the&nbsp;local&nbsp;time&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760968">sec</span>&nbsp;<span class="op" id="2760972">:=</span>&nbsp;<span class="ident" id="2760975">t</span><span class="op" id="2760976">.</span><span class="ident" id="2760977">sec</span>&nbsp;<span class="op" id="2760981">+</span>&nbsp;<span class="ident" id="2760983">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760999">if</span>&nbsp;<span class="ident" id="2761002">l</span>&nbsp;<span class="op" id="2761004">!=</span>&nbsp;<span class="op" id="2761007">&amp;</span><span class="ident" id="2761008">utcLoc</span>&nbsp;<span class="op" id="2761015">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761019">if</span>&nbsp;<span class="ident" id="2761022">l</span><span class="op" id="2761023">.</span><span class="ident" id="2761024">cacheZone</span>&nbsp;<span class="op" id="2761034">!=</span>&nbsp;<span class="ident" id="2761037">nil</span>&nbsp;<span class="op" id="2761041">&amp;&amp;</span>&nbsp;<span class="ident" id="2761044">l</span><span class="op" id="2761045">.</span><span class="ident" id="2761046">cacheStart</span>&nbsp;<span class="op" id="2761057">&lt;=</span>&nbsp;<span class="ident" id="2761060">sec</span>&nbsp;<span class="op" id="2761064">&amp;&amp;</span>&nbsp;<span class="ident" id="2761067">sec</span>&nbsp;<span class="op" id="2761071">&lt;</span>&nbsp;<span class="ident" id="2761073">l</span><span class="op" id="2761074">.</span><span class="ident" id="2761075">cacheEnd</span>&nbsp;<span class="op" id="2761084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761089">name</span>&nbsp;<span class="op" id="2761094">=</span>&nbsp;<span class="ident" id="2761096">l</span><span class="op" id="2761097">.</span><span class="ident" id="2761098">cacheZone</span><span class="op" id="2761107">.</span><span class="ident" id="2761108">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761116">offset</span>&nbsp;<span class="op" id="2761123">=</span>&nbsp;<span class="ident" id="2761125">l</span><span class="op" id="2761126">.</span><span class="ident" id="2761127">cacheZone</span><span class="op" id="2761136">.</span><span class="ident" id="2761137">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761146">}</span>&nbsp;<span class="keyword" id="2761148">else</span>&nbsp;<span class="op" id="2761153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761158">name</span><span class="op" id="2761162">,</span>&nbsp;<span class="ident" id="2761164">offset</span><span class="op" id="2761170">,</span>&nbsp;<span class="ident" id="2761172">_</span><span class="op" id="2761173">,</span>&nbsp;<span class="ident" id="2761175">_</span><span class="op" id="2761176">,</span>&nbsp;<span class="ident" id="2761178">_</span>&nbsp;<span class="op" id="2761180">=</span>&nbsp;<span class="ident" id="2761182">l</span><span class="op" id="2761183">.</span><span class="ident" id="2761184">lookup</span><span class="op" id="2761190">(</span><span class="ident" id="2761191">sec</span><span class="op" id="2761194">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761202">sec</span>&nbsp;<span class="op" id="2761206">+=</span>&nbsp;<span class="ident" id="2761209">int64</span><span class="op" id="2761214">(</span><span class="ident" id="2761215">offset</span><span class="op" id="2761221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761224">}</span>&nbsp;<span class="keyword" id="2761226">else</span>&nbsp;<span class="op" id="2761231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761235">name</span>&nbsp;<span class="op" id="2761240">=</span>&nbsp;<span class="string" id="2761242">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761249">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761252">abs</span>&nbsp;<span class="op" id="2761256">=</span>&nbsp;<span class="ident" id="2761258">uint64</span><span class="op" id="2761264">(</span><span class="ident" id="2761265">sec</span>&nbsp;<span class="op" id="2761269">+</span>&nbsp;<span class="op" id="2761271">(</span><span class="ident" id="2761272">unixToInternal</span>&nbsp;<span class="op" id="2761287">+</span>&nbsp;<span class="ident" id="2761289">internalToAbsolute</span><span class="op" id="2761307">)</span><span class="op" id="2761308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761311">return</span><br>
<span class="lineno"></span><span class="op" id="2761318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761321">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;year,&nbsp;month,&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno">290</span><span class="keyword" id="2761381">func</span>&nbsp;<span class="op" id="2761386">(</span><span class="ident" id="2761387">t</span>&nbsp;<span class="ident" id="2761389">Time</span><span class="op" id="2761393">)</span>&nbsp;<span class="ident" id="2761395">Date</span><span class="op" id="2761399">(</span><span class="op" id="2761400">)</span>&nbsp;<span class="op" id="2761402">(</span><span class="ident" id="2761403">year</span>&nbsp;<span class="builtintype" id="2761408">int</span><span class="op" id="2761411">,</span>&nbsp;<span class="ident" id="2761413">month</span>&nbsp;<span class="ident" id="2761419">Month</span><span class="op" id="2761424">,</span>&nbsp;<span class="ident" id="2761426">day</span>&nbsp;<span class="builtintype" id="2761430">int</span><span class="op" id="2761433">)</span>&nbsp;<span class="op" id="2761435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761438">year</span><span class="op" id="2761442">,</span>&nbsp;<span class="ident" id="2761444">month</span><span class="op" id="2761449">,</span>&nbsp;<span class="ident" id="2761451">day</span><span class="op" id="2761454">,</span>&nbsp;<span class="ident" id="2761456">_</span>&nbsp;<span class="op" id="2761458">=</span>&nbsp;<span class="ident" id="2761460">t</span><span class="op" id="2761461">.</span><span class="ident" id="2761462">date</span><span class="op" id="2761466">(</span><span class="builtintype" id="2761467">true</span><span class="op" id="2761471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761474">return</span><br>
<span class="lineno"></span><span class="op" id="2761481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2761484">//&nbsp;Year&nbsp;returns&nbsp;the&nbsp;year&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2761528">func</span>&nbsp;<span class="op" id="2761533">(</span><span class="ident" id="2761534">t</span>&nbsp;<span class="ident" id="2761536">Time</span><span class="op" id="2761540">)</span>&nbsp;<span class="ident" id="2761542">Year</span><span class="op" id="2761546">(</span><span class="op" id="2761547">)</span>&nbsp;<span class="builtintype" id="2761549">int</span>&nbsp;<span class="op" id="2761553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761556">year</span><span class="op" id="2761560">,</span>&nbsp;<span class="ident" id="2761562">_</span><span class="op" id="2761563">,</span>&nbsp;<span class="ident" id="2761565">_</span><span class="op" id="2761566">,</span>&nbsp;<span class="ident" id="2761568">_</span>&nbsp;<span class="op" id="2761570">:=</span>&nbsp;<span class="ident" id="2761573">t</span><span class="op" id="2761574">.</span><span class="ident" id="2761575">date</span><span class="op" id="2761579">(</span><span class="builtintype" id="2761580">false</span><span class="op" id="2761585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761588">return</span>&nbsp;<span class="ident" id="2761595">year</span><br>
<span class="lineno"></span><span class="op" id="2761600">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2761603">//&nbsp;Month&nbsp;returns&nbsp;the&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2761658">func</span>&nbsp;<span class="op" id="2761663">(</span><span class="ident" id="2761664">t</span>&nbsp;<span class="ident" id="2761666">Time</span><span class="op" id="2761670">)</span>&nbsp;<span class="ident" id="2761672">Month</span><span class="op" id="2761677">(</span><span class="op" id="2761678">)</span>&nbsp;<span class="ident" id="2761680">Month</span>&nbsp;<span class="op" id="2761686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761689">_</span><span class="op" id="2761690">,</span>&nbsp;<span class="ident" id="2761692">month</span><span class="op" id="2761697">,</span>&nbsp;<span class="ident" id="2761699">_</span><span class="op" id="2761700">,</span>&nbsp;<span class="ident" id="2761702">_</span>&nbsp;<span class="op" id="2761704">:=</span>&nbsp;<span class="ident" id="2761707">t</span><span class="op" id="2761708">.</span><span class="ident" id="2761709">date</span><span class="op" id="2761713">(</span><span class="builtintype" id="2761714">true</span><span class="op" id="2761718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761721">return</span>&nbsp;<span class="ident" id="2761728">month</span><br>
<span class="lineno">305</span><span class="op" id="2761734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761737">//&nbsp;Day&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;month&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2761789">func</span>&nbsp;<span class="op" id="2761794">(</span><span class="ident" id="2761795">t</span>&nbsp;<span class="ident" id="2761797">Time</span><span class="op" id="2761801">)</span>&nbsp;<span class="ident" id="2761803">Day</span><span class="op" id="2761806">(</span><span class="op" id="2761807">)</span>&nbsp;<span class="builtintype" id="2761809">int</span>&nbsp;<span class="op" id="2761813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761816">_</span><span class="op" id="2761817">,</span>&nbsp;<span class="ident" id="2761819">_</span><span class="op" id="2761820">,</span>&nbsp;<span class="ident" id="2761822">day</span><span class="op" id="2761825">,</span>&nbsp;<span class="ident" id="2761827">_</span>&nbsp;<span class="op" id="2761829">:=</span>&nbsp;<span class="ident" id="2761832">t</span><span class="op" id="2761833">.</span><span class="ident" id="2761834">date</span><span class="op" id="2761838">(</span><span class="builtintype" id="2761839">true</span><span class="op" id="2761843">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761846">return</span>&nbsp;<span class="ident" id="2761853">day</span><br>
<span class="lineno"></span><span class="op" id="2761857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761860">//&nbsp;Weekday&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2761915">func</span>&nbsp;<span class="op" id="2761920">(</span><span class="ident" id="2761921">t</span>&nbsp;<span class="ident" id="2761923">Time</span><span class="op" id="2761927">)</span>&nbsp;<span class="ident" id="2761929">Weekday</span><span class="op" id="2761936">(</span><span class="op" id="2761937">)</span>&nbsp;<span class="ident" id="2761939">Weekday</span>&nbsp;<span class="op" id="2761947">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761950">return</span>&nbsp;<span class="ident" id="2761957">absWeekday</span><span class="op" id="2761967">(</span><span class="ident" id="2761968">t</span><span class="op" id="2761969">.</span><span class="ident" id="2761970">abs</span><span class="op" id="2761973">(</span><span class="op" id="2761974">)</span><span class="op" id="2761975">)</span><br>
<span class="lineno"></span><span class="op" id="2761977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761980">//&nbsp;absWeekday&nbsp;is&nbsp;like&nbsp;Weekday&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2762044">func</span>&nbsp;<span class="ident" id="2762049">absWeekday</span><span class="op" id="2762059">(</span><span class="ident" id="2762060">abs</span>&nbsp;<span class="ident" id="2762064">uint64</span><span class="op" id="2762070">)</span>&nbsp;<span class="ident" id="2762072">Weekday</span>&nbsp;<span class="op" id="2762080">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762083">//&nbsp;January&nbsp;1&nbsp;of&nbsp;the&nbsp;absolute&nbsp;year,&nbsp;like&nbsp;January&nbsp;1&nbsp;of&nbsp;2001,&nbsp;was&nbsp;a&nbsp;Monday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762157">sec</span>&nbsp;<span class="op" id="2762161">:=</span>&nbsp;<span class="op" id="2762164">(</span><span class="ident" id="2762165">abs</span>&nbsp;<span class="op" id="2762169">+</span>&nbsp;<span class="ident" id="2762171">uint64</span><span class="op" id="2762177">(</span><span class="ident" id="2762178">Monday</span><span class="op" id="2762184">)</span><span class="op" id="2762185">*</span><span class="ident" id="2762186">secondsPerDay</span><span class="op" id="2762199">)</span>&nbsp;<span class="op" id="2762201">%</span>&nbsp;<span class="ident" id="2762203">secondsPerWeek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762219">return</span>&nbsp;<span class="ident" id="2762226">Weekday</span><span class="op" id="2762233">(</span><span class="builtintype" id="2762234">int</span><span class="op" id="2762237">(</span><span class="ident" id="2762238">sec</span><span class="op" id="2762241">)</span>&nbsp;<span class="op" id="2762243">/</span>&nbsp;<span class="ident" id="2762245">secondsPerDay</span><span class="op" id="2762258">)</span><br>
<span class="lineno"></span><span class="op" id="2762260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="2762263">//&nbsp;ISOWeek&nbsp;returns&nbsp;the&nbsp;ISO&nbsp;8601&nbsp;year&nbsp;and&nbsp;week&nbsp;number&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="2762335">//&nbsp;Week&nbsp;ranges&nbsp;from&nbsp;1&nbsp;to&nbsp;53.&nbsp;Jan&nbsp;01&nbsp;to&nbsp;Jan&nbsp;03&nbsp;of&nbsp;year&nbsp;n&nbsp;might&nbsp;belong&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2762407">//&nbsp;week&nbsp;52&nbsp;or&nbsp;53&nbsp;of&nbsp;year&nbsp;n-1,&nbsp;and&nbsp;Dec&nbsp;29&nbsp;to&nbsp;Dec&nbsp;31&nbsp;might&nbsp;belong&nbsp;to&nbsp;week&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2762481">//&nbsp;of&nbsp;year&nbsp;n+1.</span><br>
<span class="lineno"></span><span class="keyword" id="2762497">func</span>&nbsp;<span class="op" id="2762502">(</span><span class="ident" id="2762503">t</span>&nbsp;<span class="ident" id="2762505">Time</span><span class="op" id="2762509">)</span>&nbsp;<span class="ident" id="2762511">ISOWeek</span><span class="op" id="2762518">(</span><span class="op" id="2762519">)</span>&nbsp;<span class="op" id="2762521">(</span><span class="ident" id="2762522">year</span><span class="op" id="2762526">,</span>&nbsp;<span class="ident" id="2762528">week</span>&nbsp;<span class="builtintype" id="2762533">int</span><span class="op" id="2762536">)</span>&nbsp;<span class="op" id="2762538">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762541">year</span><span class="op" id="2762545">,</span>&nbsp;<span class="ident" id="2762547">month</span><span class="op" id="2762552">,</span>&nbsp;<span class="ident" id="2762554">day</span><span class="op" id="2762557">,</span>&nbsp;<span class="ident" id="2762559">yday</span>&nbsp;<span class="op" id="2762564">:=</span>&nbsp;<span class="ident" id="2762567">t</span><span class="op" id="2762568">.</span><span class="ident" id="2762569">date</span><span class="op" id="2762573">(</span><span class="builtintype" id="2762574">true</span><span class="op" id="2762578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762581">wday</span>&nbsp;<span class="op" id="2762586">:=</span>&nbsp;<span class="builtintype" id="2762589">int</span><span class="op" id="2762592">(</span><span class="ident" id="2762593">t</span><span class="op" id="2762594">.</span><span class="ident" id="2762595">Weekday</span><span class="op" id="2762602">(</span><span class="op" id="2762603">)</span><span class="op" id="2762604">+</span><span class="num" id="2762605">6</span><span class="op" id="2762606">)</span>&nbsp;<span class="op" id="2762608">%</span>&nbsp;<span class="num" id="2762610">7</span>&nbsp;<span class="comment" id="2762612">//&nbsp;weekday&nbsp;but&nbsp;Monday&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762640">const</span>&nbsp;<span class="op" id="2762646">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762650">Mon</span>&nbsp;<span class="builtintype" id="2762654">int</span>&nbsp;<span class="op" id="2762658">=</span>&nbsp;<span class="ident" id="2762660">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762667">Tue</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762673">Wed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762679">Thu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762685">Fri</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762691">Sat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762697">Sun</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762706">//&nbsp;Calculate&nbsp;week&nbsp;as&nbsp;number&nbsp;of&nbsp;Mondays&nbsp;in&nbsp;year&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762760">//&nbsp;and&nbsp;including&nbsp;today,&nbsp;plus&nbsp;1&nbsp;because&nbsp;the&nbsp;first&nbsp;week&nbsp;is&nbsp;week&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762826">//&nbsp;Putting&nbsp;the&nbsp;+&nbsp;1&nbsp;inside&nbsp;the&nbsp;numerator&nbsp;as&nbsp;a&nbsp;+&nbsp;7&nbsp;keeps&nbsp;the</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762886">//&nbsp;numerator&nbsp;from&nbsp;being&nbsp;negative,&nbsp;which&nbsp;would&nbsp;cause&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762945">//&nbsp;round&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762968">week</span>&nbsp;<span class="op" id="2762973">=</span>&nbsp;<span class="op" id="2762975">(</span><span class="ident" id="2762976">yday</span>&nbsp;<span class="op" id="2762981">-</span>&nbsp;<span class="ident" id="2762983">wday</span>&nbsp;<span class="op" id="2762988">+</span>&nbsp;<span class="num" id="2762990">7</span><span class="op" id="2762991">)</span>&nbsp;<span class="op" id="2762993">/</span>&nbsp;<span class="num" id="2762995">7</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762999">//&nbsp;The&nbsp;week&nbsp;number&nbsp;is&nbsp;now&nbsp;correct&nbsp;under&nbsp;the&nbsp;assumption</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763055">//&nbsp;that&nbsp;the&nbsp;first&nbsp;Monday&nbsp;of&nbsp;the&nbsp;year&nbsp;is&nbsp;in&nbsp;week&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763107">//&nbsp;If&nbsp;Jan&nbsp;1&nbsp;is&nbsp;a&nbsp;Tuesday,&nbsp;Wednesday,&nbsp;or&nbsp;Thursday,&nbsp;the&nbsp;first&nbsp;Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763175">//&nbsp;is&nbsp;actually&nbsp;in&nbsp;week&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763202">jan1wday</span>&nbsp;<span class="op" id="2763211">:=</span>&nbsp;<span class="op" id="2763214">(</span><span class="ident" id="2763215">wday</span>&nbsp;<span class="op" id="2763220">-</span>&nbsp;<span class="ident" id="2763222">yday</span>&nbsp;<span class="op" id="2763227">+</span>&nbsp;<span class="num" id="2763229">7</span><span class="op" id="2763230">*</span><span class="num" id="2763231">53</span><span class="op" id="2763233">)</span>&nbsp;<span class="op" id="2763235">%</span>&nbsp;<span class="num" id="2763237">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763240">if</span>&nbsp;<span class="ident" id="2763243">Tue</span>&nbsp;<span class="op" id="2763247">&lt;=</span>&nbsp;<span class="ident" id="2763250">jan1wday</span>&nbsp;<span class="op" id="2763259">&amp;&amp;</span>&nbsp;<span class="ident" id="2763262">jan1wday</span>&nbsp;<span class="op" id="2763271">&lt;=</span>&nbsp;<span class="ident" id="2763274">Thu</span>&nbsp;<span class="op" id="2763278">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763282">week</span><span class="op" id="2763286">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763294">//&nbsp;If&nbsp;the&nbsp;week&nbsp;number&nbsp;is&nbsp;still&nbsp;0,&nbsp;we&#39;re&nbsp;in&nbsp;early&nbsp;January&nbsp;but&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763359">//&nbsp;the&nbsp;last&nbsp;week&nbsp;of&nbsp;last&nbsp;year.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763391">if</span>&nbsp;<span class="ident" id="2763394">week</span>&nbsp;<span class="op" id="2763399">==</span>&nbsp;<span class="num" id="2763402">0</span>&nbsp;<span class="op" id="2763404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763408">year</span><span class="op" id="2763412">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763417">week</span>&nbsp;<span class="op" id="2763422">=</span>&nbsp;<span class="num" id="2763424">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763429">//&nbsp;A&nbsp;year&nbsp;has&nbsp;53&nbsp;weeks&nbsp;when&nbsp;Jan&nbsp;1&nbsp;or&nbsp;Dec&nbsp;31&nbsp;is&nbsp;a&nbsp;Thursday,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763490">//&nbsp;meaning&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Friday</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763538">//&nbsp;or&nbsp;it&nbsp;was&nbsp;a&nbsp;leap&nbsp;year&nbsp;and&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Saturday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763607">if</span>&nbsp;<span class="ident" id="2763610">jan1wday</span>&nbsp;<span class="op" id="2763619">==</span>&nbsp;<span class="ident" id="2763622">Fri</span>&nbsp;<span class="op" id="2763626">||</span>&nbsp;<span class="op" id="2763629">(</span><span class="ident" id="2763630">jan1wday</span>&nbsp;<span class="op" id="2763639">==</span>&nbsp;<span class="ident" id="2763642">Sat</span>&nbsp;<span class="op" id="2763646">&amp;&amp;</span>&nbsp;<span class="ident" id="2763649">isLeap</span><span class="op" id="2763655">(</span><span class="ident" id="2763656">year</span><span class="op" id="2763660">)</span><span class="op" id="2763661">)</span>&nbsp;<span class="op" id="2763663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763668">week</span><span class="op" id="2763672">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763680">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763684">//&nbsp;December&nbsp;29&nbsp;to&nbsp;31&nbsp;are&nbsp;in&nbsp;week&nbsp;1&nbsp;of&nbsp;next&nbsp;year&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763736">//&nbsp;they&nbsp;are&nbsp;after&nbsp;the&nbsp;last&nbsp;Thursday&nbsp;of&nbsp;the&nbsp;year&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763789">//&nbsp;December&nbsp;31&nbsp;is&nbsp;a&nbsp;Monday,&nbsp;Tuesday,&nbsp;or&nbsp;Wednesday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763841">if</span>&nbsp;<span class="ident" id="2763844">month</span>&nbsp;<span class="op" id="2763850">==</span>&nbsp;<span class="ident" id="2763853">December</span>&nbsp;<span class="op" id="2763862">&amp;&amp;</span>&nbsp;<span class="ident" id="2763865">day</span>&nbsp;<span class="op" id="2763869">&gt;=</span>&nbsp;<span class="num" id="2763872">29</span>&nbsp;<span class="op" id="2763875">&amp;&amp;</span>&nbsp;<span class="ident" id="2763878">wday</span>&nbsp;<span class="op" id="2763883">&lt;</span>&nbsp;<span class="ident" id="2763885">Thu</span>&nbsp;<span class="op" id="2763889">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763893">if</span>&nbsp;<span class="ident" id="2763896">dec31wday</span>&nbsp;<span class="op" id="2763906">:=</span>&nbsp;<span class="op" id="2763909">(</span><span class="ident" id="2763910">wday</span>&nbsp;<span class="op" id="2763915">+</span>&nbsp;<span class="num" id="2763917">31</span>&nbsp;<span class="op" id="2763920">-</span>&nbsp;<span class="ident" id="2763922">day</span><span class="op" id="2763925">)</span>&nbsp;<span class="op" id="2763927">%</span>&nbsp;<span class="num" id="2763929">7</span><span class="op" id="2763930">;</span>&nbsp;<span class="ident" id="2763932">Mon</span>&nbsp;<span class="op" id="2763936">&lt;=</span>&nbsp;<span class="ident" id="2763939">dec31wday</span>&nbsp;<span class="op" id="2763949">&amp;&amp;</span>&nbsp;<span class="ident" id="2763952">dec31wday</span>&nbsp;<span class="op" id="2763962">&lt;=</span>&nbsp;<span class="ident" id="2763965">Wed</span>&nbsp;<span class="op" id="2763969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763974">year</span><span class="op" id="2763978">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763984">week</span>&nbsp;<span class="op" id="2763989">=</span>&nbsp;<span class="num" id="2763991">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763998">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764002">return</span><br>
<span class="lineno"></span><span class="op" id="2764009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764012">//&nbsp;Clock&nbsp;returns&nbsp;the&nbsp;hour,&nbsp;minute,&nbsp;and&nbsp;second&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno">385</span><span class="keyword" id="2764089">func</span>&nbsp;<span class="op" id="2764094">(</span><span class="ident" id="2764095">t</span>&nbsp;<span class="ident" id="2764097">Time</span><span class="op" id="2764101">)</span>&nbsp;<span class="ident" id="2764103">Clock</span><span class="op" id="2764108">(</span><span class="op" id="2764109">)</span>&nbsp;<span class="op" id="2764111">(</span><span class="ident" id="2764112">hour</span><span class="op" id="2764116">,</span>&nbsp;<span class="ident" id="2764118">min</span><span class="op" id="2764121">,</span>&nbsp;<span class="ident" id="2764123">sec</span>&nbsp;<span class="builtintype" id="2764127">int</span><span class="op" id="2764130">)</span>&nbsp;<span class="op" id="2764132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764135">return</span>&nbsp;<span class="ident" id="2764142">absClock</span><span class="op" id="2764150">(</span><span class="ident" id="2764151">t</span><span class="op" id="2764152">.</span><span class="ident" id="2764153">abs</span><span class="op" id="2764156">(</span><span class="op" id="2764157">)</span><span class="op" id="2764158">)</span><br>
<span class="lineno"></span><span class="op" id="2764160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764163">//&nbsp;absClock&nbsp;is&nbsp;like&nbsp;clock&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno">390</span><span class="keyword" id="2764223">func</span>&nbsp;<span class="ident" id="2764228">absClock</span><span class="op" id="2764236">(</span><span class="ident" id="2764237">abs</span>&nbsp;<span class="ident" id="2764241">uint64</span><span class="op" id="2764247">)</span>&nbsp;<span class="op" id="2764249">(</span><span class="ident" id="2764250">hour</span><span class="op" id="2764254">,</span>&nbsp;<span class="ident" id="2764256">min</span><span class="op" id="2764259">,</span>&nbsp;<span class="ident" id="2764261">sec</span>&nbsp;<span class="builtintype" id="2764265">int</span><span class="op" id="2764268">)</span>&nbsp;<span class="op" id="2764270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764273">sec</span>&nbsp;<span class="op" id="2764277">=</span>&nbsp;<span class="builtintype" id="2764279">int</span><span class="op" id="2764282">(</span><span class="ident" id="2764283">abs</span>&nbsp;<span class="op" id="2764287">%</span>&nbsp;<span class="ident" id="2764289">secondsPerDay</span><span class="op" id="2764302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764305">hour</span>&nbsp;<span class="op" id="2764310">=</span>&nbsp;<span class="ident" id="2764312">sec</span>&nbsp;<span class="op" id="2764316">/</span>&nbsp;<span class="ident" id="2764318">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764334">sec</span>&nbsp;<span class="op" id="2764338">-=</span>&nbsp;<span class="ident" id="2764341">hour</span>&nbsp;<span class="op" id="2764346">*</span>&nbsp;<span class="ident" id="2764348">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764364">min</span>&nbsp;<span class="op" id="2764368">=</span>&nbsp;<span class="ident" id="2764370">sec</span>&nbsp;<span class="op" id="2764374">/</span>&nbsp;<span class="ident" id="2764376">secondsPerMinute</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764394">sec</span>&nbsp;<span class="op" id="2764398">-=</span>&nbsp;<span class="ident" id="2764401">min</span>&nbsp;<span class="op" id="2764405">*</span>&nbsp;<span class="ident" id="2764407">secondsPerMinute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764425">return</span><br>
<span class="lineno"></span><span class="op" id="2764432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764435">//&nbsp;Hour&nbsp;returns&nbsp;the&nbsp;hour&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;23].</span><br>
<span class="lineno">400</span><span class="keyword" id="2764513">func</span>&nbsp;<span class="op" id="2764518">(</span><span class="ident" id="2764519">t</span>&nbsp;<span class="ident" id="2764521">Time</span><span class="op" id="2764525">)</span>&nbsp;<span class="ident" id="2764527">Hour</span><span class="op" id="2764531">(</span><span class="op" id="2764532">)</span>&nbsp;<span class="builtintype" id="2764534">int</span>&nbsp;<span class="op" id="2764538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764541">return</span>&nbsp;<span class="builtintype" id="2764548">int</span><span class="op" id="2764551">(</span><span class="ident" id="2764552">t</span><span class="op" id="2764553">.</span><span class="ident" id="2764554">abs</span><span class="op" id="2764557">(</span><span class="op" id="2764558">)</span><span class="op" id="2764559">%</span><span class="ident" id="2764560">secondsPerDay</span><span class="op" id="2764573">)</span>&nbsp;<span class="op" id="2764575">/</span>&nbsp;<span class="ident" id="2764577">secondsPerHour</span><br>
<span class="lineno"></span><span class="op" id="2764592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764595">//&nbsp;Minute&nbsp;returns&nbsp;the&nbsp;minute&nbsp;offset&nbsp;within&nbsp;the&nbsp;hour&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">405</span><span class="keyword" id="2764685">func</span>&nbsp;<span class="op" id="2764690">(</span><span class="ident" id="2764691">t</span>&nbsp;<span class="ident" id="2764693">Time</span><span class="op" id="2764697">)</span>&nbsp;<span class="ident" id="2764699">Minute</span><span class="op" id="2764705">(</span><span class="op" id="2764706">)</span>&nbsp;<span class="builtintype" id="2764708">int</span>&nbsp;<span class="op" id="2764712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764715">return</span>&nbsp;<span class="builtintype" id="2764722">int</span><span class="op" id="2764725">(</span><span class="ident" id="2764726">t</span><span class="op" id="2764727">.</span><span class="ident" id="2764728">abs</span><span class="op" id="2764731">(</span><span class="op" id="2764732">)</span><span class="op" id="2764733">%</span><span class="ident" id="2764734">secondsPerHour</span><span class="op" id="2764748">)</span>&nbsp;<span class="op" id="2764750">/</span>&nbsp;<span class="ident" id="2764752">secondsPerMinute</span><br>
<span class="lineno"></span><span class="op" id="2764769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764772">//&nbsp;Second&nbsp;returns&nbsp;the&nbsp;second&nbsp;offset&nbsp;within&nbsp;the&nbsp;minute&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">410</span><span class="keyword" id="2764864">func</span>&nbsp;<span class="op" id="2764869">(</span><span class="ident" id="2764870">t</span>&nbsp;<span class="ident" id="2764872">Time</span><span class="op" id="2764876">)</span>&nbsp;<span class="ident" id="2764878">Second</span><span class="op" id="2764884">(</span><span class="op" id="2764885">)</span>&nbsp;<span class="builtintype" id="2764887">int</span>&nbsp;<span class="op" id="2764891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764894">return</span>&nbsp;<span class="builtintype" id="2764901">int</span><span class="op" id="2764904">(</span><span class="ident" id="2764905">t</span><span class="op" id="2764906">.</span><span class="ident" id="2764907">abs</span><span class="op" id="2764910">(</span><span class="op" id="2764911">)</span>&nbsp;<span class="op" id="2764913">%</span>&nbsp;<span class="ident" id="2764915">secondsPerMinute</span><span class="op" id="2764931">)</span><br>
<span class="lineno"></span><span class="op" id="2764933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764936">//&nbsp;Nanosecond&nbsp;returns&nbsp;the&nbsp;nanosecond&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;specified&nbsp;by&nbsp;t,</span><br>
<span class="lineno">415</span><span class="comment" id="2765014">//&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2765046">func</span>&nbsp;<span class="op" id="2765051">(</span><span class="ident" id="2765052">t</span>&nbsp;<span class="ident" id="2765054">Time</span><span class="op" id="2765058">)</span>&nbsp;<span class="ident" id="2765060">Nanosecond</span><span class="op" id="2765070">(</span><span class="op" id="2765071">)</span>&nbsp;<span class="builtintype" id="2765073">int</span>&nbsp;<span class="op" id="2765077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765080">return</span>&nbsp;<span class="builtintype" id="2765087">int</span><span class="op" id="2765090">(</span><span class="ident" id="2765091">t</span><span class="op" id="2765092">.</span><span class="ident" id="2765093">nsec</span><span class="op" id="2765097">)</span><br>
<span class="lineno"></span><span class="op" id="2765099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2765102">//&nbsp;YearDay&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[1,365]&nbsp;for&nbsp;non-leap&nbsp;years,</span><br>
<span class="lineno"></span><span class="comment" id="2765198">//&nbsp;and&nbsp;[1,366]&nbsp;in&nbsp;leap&nbsp;years.</span><br>
<span class="lineno"></span><span class="keyword" id="2765228">func</span>&nbsp;<span class="op" id="2765233">(</span><span class="ident" id="2765234">t</span>&nbsp;<span class="ident" id="2765236">Time</span><span class="op" id="2765240">)</span>&nbsp;<span class="ident" id="2765242">YearDay</span><span class="op" id="2765249">(</span><span class="op" id="2765250">)</span>&nbsp;<span class="builtintype" id="2765252">int</span>&nbsp;<span class="op" id="2765256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765259">_</span><span class="op" id="2765260">,</span>&nbsp;<span class="ident" id="2765262">_</span><span class="op" id="2765263">,</span>&nbsp;<span class="ident" id="2765265">_</span><span class="op" id="2765266">,</span>&nbsp;<span class="ident" id="2765268">yday</span>&nbsp;<span class="op" id="2765273">:=</span>&nbsp;<span class="ident" id="2765276">t</span><span class="op" id="2765277">.</span><span class="ident" id="2765278">date</span><span class="op" id="2765282">(</span><span class="builtintype" id="2765283">false</span><span class="op" id="2765288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765291">return</span>&nbsp;<span class="ident" id="2765298">yday</span>&nbsp;<span class="op" id="2765303">+</span>&nbsp;<span class="num" id="2765305">1</span><br>
<span class="lineno">425</span><span class="op" id="2765307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765310">//&nbsp;A&nbsp;Duration&nbsp;represents&nbsp;the&nbsp;elapsed&nbsp;time&nbsp;between&nbsp;two&nbsp;instants</span><br>
<span class="lineno"></span><span class="comment" id="2765373">//&nbsp;as&nbsp;an&nbsp;int64&nbsp;nanosecond&nbsp;count.&nbsp;&nbsp;The&nbsp;representation&nbsp;limits&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2765437">//&nbsp;largest&nbsp;representable&nbsp;duration&nbsp;to&nbsp;approximately&nbsp;290&nbsp;years.</span><br>
<span class="lineno">430</span><span class="keyword" id="2765499">type</span>&nbsp;<span class="ident" id="2765504">Duration</span>&nbsp;<span class="ident" id="2765513">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2765520">const</span>&nbsp;<span class="op" id="2765526">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765529">minDuration</span>&nbsp;<span class="ident" id="2765541">Duration</span>&nbsp;<span class="op" id="2765550">=</span>&nbsp;<span class="op" id="2765552">-</span><span class="num" id="2765553">1</span>&nbsp;<span class="op" id="2765555">&lt;&lt;</span>&nbsp;<span class="num" id="2765558">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765562">maxDuration</span>&nbsp;<span class="ident" id="2765574">Duration</span>&nbsp;<span class="op" id="2765583">=</span>&nbsp;<span class="num" id="2765585">1</span><span class="op" id="2765586">&lt;&lt;</span><span class="num" id="2765588">63</span>&nbsp;<span class="op" id="2765591">-</span>&nbsp;<span class="num" id="2765593">1</span><br>
<span class="lineno">435</span><span class="op" id="2765595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765598">//&nbsp;Common&nbsp;durations.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;definition&nbsp;for&nbsp;units&nbsp;of&nbsp;Day&nbsp;or&nbsp;larger</span><br>
<span class="lineno"></span><span class="comment" id="2765670">//&nbsp;to&nbsp;avoid&nbsp;confusion&nbsp;across&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;zone&nbsp;transitions.</span><br>
<span class="lineno"></span><span class="comment" id="2765739">//</span><br>
<span class="lineno">440</span><span class="comment" id="2765742">//&nbsp;To&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;divide:</span><br>
<span class="lineno"></span><span class="comment" id="2765797">//&nbsp;&nbsp;&nbsp;&nbspsecond&nbsp;:=&nbsp;time.Second</span><br>
<span class="lineno"></span><span class="comment" id="2765822">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(int64(second/time.Millisecond))&nbsp;//&nbsp;prints&nbsp;1000</span><br>
<span class="lineno"></span><span class="comment" id="2765882">//</span><br>
<span class="lineno"></span><span class="comment" id="2765885">//&nbsp;To&nbsp;convert&nbsp;an&nbsp;integer&nbsp;number&nbsp;of&nbsp;units&nbsp;to&nbsp;a&nbsp;Duration,&nbsp;multiply:</span><br>
<span class="lineno">445</span><span class="comment" id="2765951">//&nbsp;&nbsp;&nbsp;&nbspseconds&nbsp;:=&nbsp;10</span><br>
<span class="lineno"></span><span class="comment" id="2765968">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(time.Duration(seconds)*time.Second)&nbsp;//&nbsp;prints&nbsp;10s</span><br>
<span class="lineno"></span><span class="comment" id="2766031">//</span><br>
<span class="lineno"></span><span class="keyword" id="2766034">const</span>&nbsp;<span class="op" id="2766040">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766043">Nanosecond</span>&nbsp;&nbsp;<span class="ident" id="2766055">Duration</span>&nbsp;<span class="op" id="2766064">=</span>&nbsp;<span class="num" id="2766066">1</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766069">Microsecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766090">=</span>&nbsp;<span class="num" id="2766092">1000</span>&nbsp;<span class="op" id="2766097">*</span>&nbsp;<span class="ident" id="2766099">Nanosecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766111">Millisecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766132">=</span>&nbsp;<span class="num" id="2766134">1000</span>&nbsp;<span class="op" id="2766139">*</span>&nbsp;<span class="ident" id="2766141">Microsecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766154">Second</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766175">=</span>&nbsp;<span class="num" id="2766177">1000</span>&nbsp;<span class="op" id="2766182">*</span>&nbsp;<span class="ident" id="2766184">Millisecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766197">Minute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766218">=</span>&nbsp;<span class="num" id="2766220">60</span>&nbsp;<span class="op" id="2766223">*</span>&nbsp;<span class="ident" id="2766225">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766233">Hour</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766254">=</span>&nbsp;<span class="num" id="2766256">60</span>&nbsp;<span class="op" id="2766259">*</span>&nbsp;<span class="ident" id="2766261">Minute</span><br>
<span class="lineno">455</span><span class="op" id="2766268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766271">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;the&nbsp;duration&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;72h3m0.5s&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2766349">//&nbsp;Leading&nbsp;zero&nbsp;units&nbsp;are&nbsp;omitted.&nbsp;&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;durations&nbsp;less&nbsp;than&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2766428">//&nbsp;second&nbsp;format&nbsp;use&nbsp;a&nbsp;smaller&nbsp;unit&nbsp;(milli-,&nbsp;micro-,&nbsp;or&nbsp;nanoseconds)&nbsp;to&nbsp;ensure</span><br>
<span class="lineno">460</span><span class="comment" id="2766507">//&nbsp;that&nbsp;the&nbsp;leading&nbsp;digit&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;The&nbsp;zero&nbsp;duration&nbsp;formats&nbsp;as&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="2766579">//&nbsp;with&nbsp;no&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2766596">func</span>&nbsp;<span class="op" id="2766601">(</span><span class="ident" id="2766602">d</span>&nbsp;<span class="ident" id="2766604">Duration</span><span class="op" id="2766612">)</span>&nbsp;<span class="ident" id="2766614">String</span><span class="op" id="2766620">(</span><span class="op" id="2766621">)</span>&nbsp;<span class="builtintype" id="2766623">string</span>&nbsp;<span class="op" id="2766630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2766633">//&nbsp;Largest&nbsp;time&nbsp;is&nbsp;2540400h10m10.000000000s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766678">var</span>&nbsp;<span class="ident" id="2766682">buf</span>&nbsp;<span class="op" id="2766686">[</span><span class="num" id="2766687">32</span><span class="op" id="2766689">]</span><span class="builtintype" id="2766690">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766696">w</span>&nbsp;<span class="op" id="2766698">:=</span>&nbsp;<span class="builtinfunc" id="2766701">len</span><span class="op" id="2766704">(</span><span class="ident" id="2766705">buf</span><span class="op" id="2766708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766712">u</span>&nbsp;<span class="op" id="2766714">:=</span>&nbsp;<span class="ident" id="2766717">uint64</span><span class="op" id="2766723">(</span><span class="ident" id="2766724">d</span><span class="op" id="2766725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766728">neg</span>&nbsp;<span class="op" id="2766732">:=</span>&nbsp;<span class="ident" id="2766735">d</span>&nbsp;<span class="op" id="2766737">&lt;</span>&nbsp;<span class="num" id="2766739">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766742">if</span>&nbsp;<span class="ident" id="2766745">neg</span>&nbsp;<span class="op" id="2766749">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766753">u</span>&nbsp;<span class="op" id="2766755">=</span>&nbsp;<span class="op" id="2766757">-</span><span class="ident" id="2766758">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766765">if</span>&nbsp;<span class="ident" id="2766768">u</span>&nbsp;<span class="op" id="2766770">&lt;</span>&nbsp;<span class="ident" id="2766772">uint64</span><span class="op" id="2766778">(</span><span class="ident" id="2766779">Second</span><span class="op" id="2766785">)</span>&nbsp;<span class="op" id="2766787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2766791">//&nbsp;Special&nbsp;case:&nbsp;if&nbsp;duration&nbsp;is&nbsp;smaller&nbsp;than&nbsp;a&nbsp;second,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2766848">//&nbsp;use&nbsp;smaller&nbsp;units,&nbsp;like&nbsp;1.2ms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766883">var</span>&nbsp;<span class="ident" id="2766887">prec</span>&nbsp;<span class="builtintype" id="2766892">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766898">w</span><span class="op" id="2766899">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766904">buf</span><span class="op" id="2766907">[</span><span class="ident" id="2766908">w</span><span class="op" id="2766909">]</span>&nbsp;<span class="op" id="2766911">=</span>&nbsp;<span class="string" id="2766913">&#39;s&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766919">w</span><span class="op" id="2766920">--</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766925">switch</span>&nbsp;<span class="op" id="2766932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766936">case</span>&nbsp;<span class="ident" id="2766941">u</span>&nbsp;<span class="op" id="2766943">==</span>&nbsp;<span class="num" id="2766946">0</span><span class="op" id="2766947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766952">return</span>&nbsp;<span class="string" id="2766959">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766965">case</span>&nbsp;<span class="ident" id="2766970">u</span>&nbsp;<span class="op" id="2766972">&lt;</span>&nbsp;<span class="ident" id="2766974">uint64</span><span class="op" id="2766980">(</span><span class="ident" id="2766981">Microsecond</span><span class="op" id="2766992">)</span><span class="op" id="2766993">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2766998">//&nbsp;print&nbsp;nanoseconds</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767022">prec</span>&nbsp;<span class="op" id="2767027">=</span>&nbsp;<span class="num" id="2767029">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767034">buf</span><span class="op" id="2767037">[</span><span class="ident" id="2767038">w</span><span class="op" id="2767039">]</span>&nbsp;<span class="op" id="2767041">=</span>&nbsp;<span class="string" id="2767043">&#39;n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767049">case</span>&nbsp;<span class="ident" id="2767054">u</span>&nbsp;<span class="op" id="2767056">&lt;</span>&nbsp;<span class="ident" id="2767058">uint64</span><span class="op" id="2767064">(</span><span class="ident" id="2767065">Millisecond</span><span class="op" id="2767076">)</span><span class="op" id="2767077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767082">//&nbsp;print&nbsp;microseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767107">prec</span>&nbsp;<span class="op" id="2767112">=</span>&nbsp;<span class="num" id="2767114">3</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767119">//&nbsp;U+00B5&nbsp;&#39;µ&#39;&nbsp;micro&nbsp;sign&nbsp;==&nbsp;0xC2&nbsp;0xB5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767161">w</span><span class="op" id="2767162">--</span>&nbsp;<span class="comment" id="2767165">//&nbsp;Need&nbsp;room&nbsp;for&nbsp;two&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767196">copy</span><span class="op" id="2767200">(</span><span class="ident" id="2767201">buf</span><span class="op" id="2767204">[</span><span class="ident" id="2767205">w</span><span class="op" id="2767206">:</span><span class="op" id="2767207">]</span><span class="op" id="2767208">,</span>&nbsp;<span class="string" id="2767210">&#34;µ&#34;</span><span class="op" id="2767214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767218">default</span><span class="op" id="2767225">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767230">//&nbsp;print&nbsp;milliseconds</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767255">prec</span>&nbsp;<span class="op" id="2767260">=</span>&nbsp;<span class="num" id="2767262">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767267">buf</span><span class="op" id="2767270">[</span><span class="ident" id="2767271">w</span><span class="op" id="2767272">]</span>&nbsp;<span class="op" id="2767274">=</span>&nbsp;<span class="string" id="2767276">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767286">w</span><span class="op" id="2767287">,</span>&nbsp;<span class="ident" id="2767289">u</span>&nbsp;<span class="op" id="2767291">=</span>&nbsp;<span class="ident" id="2767293">fmtFrac</span><span class="op" id="2767300">(</span><span class="ident" id="2767301">buf</span><span class="op" id="2767304">[</span><span class="op" id="2767305">:</span><span class="ident" id="2767306">w</span><span class="op" id="2767307">]</span><span class="op" id="2767308">,</span>&nbsp;<span class="ident" id="2767310">u</span><span class="op" id="2767311">,</span>&nbsp;<span class="ident" id="2767313">prec</span><span class="op" id="2767317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767321">w</span>&nbsp;<span class="op" id="2767323">=</span>&nbsp;<span class="ident" id="2767325">fmtInt</span><span class="op" id="2767331">(</span><span class="ident" id="2767332">buf</span><span class="op" id="2767335">[</span><span class="op" id="2767336">:</span><span class="ident" id="2767337">w</span><span class="op" id="2767338">]</span><span class="op" id="2767339">,</span>&nbsp;<span class="ident" id="2767341">u</span><span class="op" id="2767342">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767345">}</span>&nbsp;<span class="keyword" id="2767347">else</span>&nbsp;<span class="op" id="2767352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767356">w</span><span class="op" id="2767357">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767362">buf</span><span class="op" id="2767365">[</span><span class="ident" id="2767366">w</span><span class="op" id="2767367">]</span>&nbsp;<span class="op" id="2767369">=</span>&nbsp;<span class="string" id="2767371">&#39;s&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767378">w</span><span class="op" id="2767379">,</span>&nbsp;<span class="ident" id="2767381">u</span>&nbsp;<span class="op" id="2767383">=</span>&nbsp;<span class="ident" id="2767385">fmtFrac</span><span class="op" id="2767392">(</span><span class="ident" id="2767393">buf</span><span class="op" id="2767396">[</span><span class="op" id="2767397">:</span><span class="ident" id="2767398">w</span><span class="op" id="2767399">]</span><span class="op" id="2767400">,</span>&nbsp;<span class="ident" id="2767402">u</span><span class="op" id="2767403">,</span>&nbsp;<span class="num" id="2767405">9</span><span class="op" id="2767406">)</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767411">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767441">w</span>&nbsp;<span class="op" id="2767443">=</span>&nbsp;<span class="ident" id="2767445">fmtInt</span><span class="op" id="2767451">(</span><span class="ident" id="2767452">buf</span><span class="op" id="2767455">[</span><span class="op" id="2767456">:</span><span class="ident" id="2767457">w</span><span class="op" id="2767458">]</span><span class="op" id="2767459">,</span>&nbsp;<span class="ident" id="2767461">u</span><span class="op" id="2767462">%</span><span class="num" id="2767463">60</span><span class="op" id="2767465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767469">u</span>&nbsp;<span class="op" id="2767471">/=</span>&nbsp;<span class="num" id="2767474">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767480">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767510">if</span>&nbsp;<span class="ident" id="2767513">u</span>&nbsp;<span class="op" id="2767515">&gt;</span>&nbsp;<span class="num" id="2767517">0</span>&nbsp;<span class="op" id="2767519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767524">w</span><span class="op" id="2767525">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767531">buf</span><span class="op" id="2767534">[</span><span class="ident" id="2767535">w</span><span class="op" id="2767536">]</span>&nbsp;<span class="op" id="2767538">=</span>&nbsp;<span class="string" id="2767540">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767547">w</span>&nbsp;<span class="op" id="2767549">=</span>&nbsp;<span class="ident" id="2767551">fmtInt</span><span class="op" id="2767557">(</span><span class="ident" id="2767558">buf</span><span class="op" id="2767561">[</span><span class="op" id="2767562">:</span><span class="ident" id="2767563">w</span><span class="op" id="2767564">]</span><span class="op" id="2767565">,</span>&nbsp;<span class="ident" id="2767567">u</span><span class="op" id="2767568">%</span><span class="num" id="2767569">60</span><span class="op" id="2767571">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767576">u</span>&nbsp;<span class="op" id="2767578">/=</span>&nbsp;<span class="num" id="2767581">60</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767588">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;hours</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767617">//&nbsp;Stop&nbsp;at&nbsp;hours&nbsp;because&nbsp;days&nbsp;can&nbsp;be&nbsp;different&nbsp;lengths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767676">if</span>&nbsp;<span class="ident" id="2767679">u</span>&nbsp;<span class="op" id="2767681">&gt;</span>&nbsp;<span class="num" id="2767683">0</span>&nbsp;<span class="op" id="2767685">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767691">w</span><span class="op" id="2767692">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767699">buf</span><span class="op" id="2767702">[</span><span class="ident" id="2767703">w</span><span class="op" id="2767704">]</span>&nbsp;<span class="op" id="2767706">=</span>&nbsp;<span class="string" id="2767708">&#39;h&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767716">w</span>&nbsp;<span class="op" id="2767718">=</span>&nbsp;<span class="ident" id="2767720">fmtInt</span><span class="op" id="2767726">(</span><span class="ident" id="2767727">buf</span><span class="op" id="2767730">[</span><span class="op" id="2767731">:</span><span class="ident" id="2767732">w</span><span class="op" id="2767733">]</span><span class="op" id="2767734">,</span>&nbsp;<span class="ident" id="2767736">u</span><span class="op" id="2767737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767746">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767753">if</span>&nbsp;<span class="ident" id="2767756">neg</span>&nbsp;<span class="op" id="2767760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767764">w</span><span class="op" id="2767765">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767770">buf</span><span class="op" id="2767773">[</span><span class="ident" id="2767774">w</span><span class="op" id="2767775">]</span>&nbsp;<span class="op" id="2767777">=</span>&nbsp;<span class="string" id="2767779">&#39;-&#39;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767788">return</span>&nbsp;<span class="builtintype" id="2767795">string</span><span class="op" id="2767801">(</span><span class="ident" id="2767802">buf</span><span class="op" id="2767805">[</span><span class="ident" id="2767806">w</span><span class="op" id="2767807">:</span><span class="op" id="2767808">]</span><span class="op" id="2767809">)</span><br>
<span class="lineno"></span><span class="op" id="2767811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2767814">//&nbsp;fmtFrac&nbsp;formats&nbsp;the&nbsp;fraction&nbsp;of&nbsp;v/10**prec&nbsp;(e.g.,&nbsp;&#34;.12345&#34;)&nbsp;into&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2767886">//&nbsp;tail&nbsp;of&nbsp;buf,&nbsp;omitting&nbsp;trailing&nbsp;zeros.&nbsp;&nbsp;it&nbsp;omits&nbsp;the&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2767949">//&nbsp;point&nbsp;too&nbsp;when&nbsp;the&nbsp;fraction&nbsp;is&nbsp;0.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2768018">//&nbsp;output&nbsp;bytes&nbsp;begin&nbsp;and&nbsp;the&nbsp;value&nbsp;v/10**prec.</span><br>
<span class="lineno"></span><span class="keyword" id="2768066">func</span>&nbsp;<span class="ident" id="2768071">fmtFrac</span><span class="op" id="2768078">(</span><span class="ident" id="2768079">buf</span>&nbsp;<span class="op" id="2768083">[</span><span class="op" id="2768084">]</span><span class="builtintype" id="2768085">byte</span><span class="op" id="2768089">,</span>&nbsp;<span class="ident" id="2768091">v</span>&nbsp;<span class="ident" id="2768093">uint64</span><span class="op" id="2768099">,</span>&nbsp;<span class="ident" id="2768101">prec</span>&nbsp;<span class="builtintype" id="2768106">int</span><span class="op" id="2768109">)</span>&nbsp;<span class="op" id="2768111">(</span><span class="ident" id="2768112">nw</span>&nbsp;<span class="builtintype" id="2768115">int</span><span class="op" id="2768118">,</span>&nbsp;<span class="ident" id="2768120">nv</span>&nbsp;<span class="ident" id="2768123">uint64</span><span class="op" id="2768129">)</span>&nbsp;<span class="op" id="2768131">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2768134">//&nbsp;Omit&nbsp;trailing&nbsp;zeros&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768193">w</span>&nbsp;<span class="op" id="2768195">:=</span>&nbsp;<span class="builtinfunc" id="2768198">len</span><span class="op" id="2768201">(</span><span class="ident" id="2768202">buf</span><span class="op" id="2768205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768208">print</span>&nbsp;<span class="op" id="2768214">:=</span>&nbsp;<span class="builtintype" id="2768217">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768224">for</span>&nbsp;<span class="ident" id="2768228">i</span>&nbsp;<span class="op" id="2768230">:=</span>&nbsp;<span class="num" id="2768233">0</span><span class="op" id="2768234">;</span>&nbsp;<span class="ident" id="2768236">i</span>&nbsp;<span class="op" id="2768238">&lt;</span>&nbsp;<span class="ident" id="2768240">prec</span><span class="op" id="2768244">;</span>&nbsp;<span class="ident" id="2768246">i</span><span class="op" id="2768247">++</span>&nbsp;<span class="op" id="2768250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768254">digit</span>&nbsp;<span class="op" id="2768260">:=</span>&nbsp;<span class="ident" id="2768263">v</span>&nbsp;<span class="op" id="2768265">%</span>&nbsp;<span class="num" id="2768267">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768272">print</span>&nbsp;<span class="op" id="2768278">=</span>&nbsp;<span class="builtinfunc" id="2768280">print</span>&nbsp;<span class="op" id="2768286">||</span>&nbsp;<span class="ident" id="2768289">digit</span>&nbsp;<span class="op" id="2768295">!=</span>&nbsp;<span class="num" id="2768298">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768302">if</span>&nbsp;<span class="builtinfunc" id="2768305">print</span>&nbsp;<span class="op" id="2768311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768316">w</span><span class="op" id="2768317">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768323">buf</span><span class="op" id="2768326">[</span><span class="ident" id="2768327">w</span><span class="op" id="2768328">]</span>&nbsp;<span class="op" id="2768330">=</span>&nbsp;<span class="builtintype" id="2768332">byte</span><span class="op" id="2768336">(</span><span class="ident" id="2768337">digit</span><span class="op" id="2768342">)</span>&nbsp;<span class="op" id="2768344">+</span>&nbsp;<span class="string" id="2768346">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768352">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768356">v</span>&nbsp;<span class="op" id="2768358">/=</span>&nbsp;<span class="num" id="2768361">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768368">if</span>&nbsp;<span class="builtinfunc" id="2768371">print</span>&nbsp;<span class="op" id="2768377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768381">w</span><span class="op" id="2768382">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768387">buf</span><span class="op" id="2768390">[</span><span class="ident" id="2768391">w</span><span class="op" id="2768392">]</span>&nbsp;<span class="op" id="2768394">=</span>&nbsp;<span class="string" id="2768396">&#39;.&#39;</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768404">return</span>&nbsp;<span class="ident" id="2768411">w</span><span class="op" id="2768412">,</span>&nbsp;<span class="ident" id="2768414">v</span><br>
<span class="lineno"></span><span class="op" id="2768416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768419">//&nbsp;fmtInt&nbsp;formats&nbsp;v&nbsp;into&nbsp;the&nbsp;tail&nbsp;of&nbsp;buf.</span><br>
<span class="lineno">560</span><span class="comment" id="2768461">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;output&nbsp;begins.</span><br>
<span class="lineno"></span><span class="keyword" id="2768510">func</span>&nbsp;<span class="ident" id="2768515">fmtInt</span><span class="op" id="2768521">(</span><span class="ident" id="2768522">buf</span>&nbsp;<span class="op" id="2768526">[</span><span class="op" id="2768527">]</span><span class="builtintype" id="2768528">byte</span><span class="op" id="2768532">,</span>&nbsp;<span class="ident" id="2768534">v</span>&nbsp;<span class="ident" id="2768536">uint64</span><span class="op" id="2768542">)</span>&nbsp;<span class="builtintype" id="2768544">int</span>&nbsp;<span class="op" id="2768548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768551">w</span>&nbsp;<span class="op" id="2768553">:=</span>&nbsp;<span class="builtinfunc" id="2768556">len</span><span class="op" id="2768559">(</span><span class="ident" id="2768560">buf</span><span class="op" id="2768563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768566">if</span>&nbsp;<span class="ident" id="2768569">v</span>&nbsp;<span class="op" id="2768571">==</span>&nbsp;<span class="num" id="2768574">0</span>&nbsp;<span class="op" id="2768576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768580">w</span><span class="op" id="2768581">--</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768586">buf</span><span class="op" id="2768589">[</span><span class="ident" id="2768590">w</span><span class="op" id="2768591">]</span>&nbsp;<span class="op" id="2768593">=</span>&nbsp;<span class="string" id="2768595">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768600">}</span>&nbsp;<span class="keyword" id="2768602">else</span>&nbsp;<span class="op" id="2768607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768611">for</span>&nbsp;<span class="ident" id="2768615">v</span>&nbsp;<span class="op" id="2768617">&gt;</span>&nbsp;<span class="num" id="2768619">0</span>&nbsp;<span class="op" id="2768621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768626">w</span><span class="op" id="2768627">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768633">buf</span><span class="op" id="2768636">[</span><span class="ident" id="2768637">w</span><span class="op" id="2768638">]</span>&nbsp;<span class="op" id="2768640">=</span>&nbsp;<span class="builtintype" id="2768642">byte</span><span class="op" id="2768646">(</span><span class="ident" id="2768647">v</span><span class="op" id="2768648">%</span><span class="num" id="2768649">10</span><span class="op" id="2768651">)</span>&nbsp;<span class="op" id="2768653">+</span>&nbsp;<span class="string" id="2768655">&#39;0&#39;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768662">v</span>&nbsp;<span class="op" id="2768664">/=</span>&nbsp;<span class="num" id="2768667">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768678">return</span>&nbsp;<span class="ident" id="2768685">w</span><br>
<span class="lineno"></span><span class="op" id="2768687">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="2768690">//&nbsp;Nanoseconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;an&nbsp;integer&nbsp;nanosecond&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2768758">func</span>&nbsp;<span class="op" id="2768763">(</span><span class="ident" id="2768764">d</span>&nbsp;<span class="ident" id="2768766">Duration</span><span class="op" id="2768774">)</span>&nbsp;<span class="ident" id="2768776">Nanoseconds</span><span class="op" id="2768787">(</span><span class="op" id="2768788">)</span>&nbsp;<span class="ident" id="2768790">int64</span>&nbsp;<span class="op" id="2768796">{</span>&nbsp;<span class="keyword" id="2768798">return</span>&nbsp;<span class="ident" id="2768805">int64</span><span class="op" id="2768810">(</span><span class="ident" id="2768811">d</span><span class="op" id="2768812">)</span>&nbsp;<span class="op" id="2768814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768817">//&nbsp;These&nbsp;methods&nbsp;return&nbsp;float64&nbsp;because&nbsp;the&nbsp;dominant</span><br>
<span class="lineno">580</span><span class="comment" id="2768870">//&nbsp;use&nbsp;case&nbsp;is&nbsp;for&nbsp;printing&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;like&nbsp;1.5s,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2768937">//&nbsp;a&nbsp;truncation&nbsp;to&nbsp;integer&nbsp;would&nbsp;make&nbsp;them&nbsp;not&nbsp;useful&nbsp;in&nbsp;those&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2769007">//&nbsp;Splitting&nbsp;the&nbsp;integer&nbsp;and&nbsp;fraction&nbsp;ourselves&nbsp;guarantees&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2769071">//&nbsp;converting&nbsp;the&nbsp;returned&nbsp;float64&nbsp;to&nbsp;an&nbsp;integer&nbsp;rounds&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2769136">//&nbsp;way&nbsp;that&nbsp;a&nbsp;pure&nbsp;integer&nbsp;conversion&nbsp;would&nbsp;have,&nbsp;even&nbsp;in&nbsp;cases</span><br>
<span class="lineno">585</span><span class="comment" id="2769200">//&nbsp;where,&nbsp;say,&nbsp;float64(d.Nanoseconds())/1e9&nbsp;would&nbsp;have&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2769263">//&nbsp;differently.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769280">//&nbsp;Seconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;seconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2769351">func</span>&nbsp;<span class="op" id="2769356">(</span><span class="ident" id="2769357">d</span>&nbsp;<span class="ident" id="2769359">Duration</span><span class="op" id="2769367">)</span>&nbsp;<span class="ident" id="2769369">Seconds</span><span class="op" id="2769376">(</span><span class="op" id="2769377">)</span>&nbsp;<span class="builtintype" id="2769379">float64</span>&nbsp;<span class="op" id="2769387">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769390">sec</span>&nbsp;<span class="op" id="2769394">:=</span>&nbsp;<span class="ident" id="2769397">d</span>&nbsp;<span class="op" id="2769399">/</span>&nbsp;<span class="ident" id="2769401">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769409">nsec</span>&nbsp;<span class="op" id="2769414">:=</span>&nbsp;<span class="ident" id="2769417">d</span>&nbsp;<span class="op" id="2769419">%</span>&nbsp;<span class="ident" id="2769421">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769429">return</span>&nbsp;<span class="builtintype" id="2769436">float64</span><span class="op" id="2769443">(</span><span class="ident" id="2769444">sec</span><span class="op" id="2769447">)</span>&nbsp;<span class="op" id="2769449">+</span>&nbsp;<span class="builtintype" id="2769451">float64</span><span class="op" id="2769458">(</span><span class="ident" id="2769459">nsec</span><span class="op" id="2769463">)</span><span class="op" id="2769464">*</span><span class="num" id="2769465">1e-9</span><br>
<span class="lineno"></span><span class="op" id="2769470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="2769473">//&nbsp;Minutes&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;minutes.</span><br>
<span class="lineno"></span><span class="keyword" id="2769544">func</span>&nbsp;<span class="op" id="2769549">(</span><span class="ident" id="2769550">d</span>&nbsp;<span class="ident" id="2769552">Duration</span><span class="op" id="2769560">)</span>&nbsp;<span class="ident" id="2769562">Minutes</span><span class="op" id="2769569">(</span><span class="op" id="2769570">)</span>&nbsp;<span class="builtintype" id="2769572">float64</span>&nbsp;<span class="op" id="2769580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769583">min</span>&nbsp;<span class="op" id="2769587">:=</span>&nbsp;<span class="ident" id="2769590">d</span>&nbsp;<span class="op" id="2769592">/</span>&nbsp;<span class="ident" id="2769594">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769602">nsec</span>&nbsp;<span class="op" id="2769607">:=</span>&nbsp;<span class="ident" id="2769610">d</span>&nbsp;<span class="op" id="2769612">%</span>&nbsp;<span class="ident" id="2769614">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769622">return</span>&nbsp;<span class="builtintype" id="2769629">float64</span><span class="op" id="2769636">(</span><span class="ident" id="2769637">min</span><span class="op" id="2769640">)</span>&nbsp;<span class="op" id="2769642">+</span>&nbsp;<span class="builtintype" id="2769644">float64</span><span class="op" id="2769651">(</span><span class="ident" id="2769652">nsec</span><span class="op" id="2769656">)</span><span class="op" id="2769657">*</span><span class="op" id="2769658">(</span><span class="num" id="2769659">1e-9</span><span class="op" id="2769663">/</span><span class="num" id="2769664">60</span><span class="op" id="2769666">)</span><br>
<span class="lineno">600</span><span class="op" id="2769668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769671">//&nbsp;Hours&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;hours.</span><br>
<span class="lineno"></span><span class="keyword" id="2769738">func</span>&nbsp;<span class="op" id="2769743">(</span><span class="ident" id="2769744">d</span>&nbsp;<span class="ident" id="2769746">Duration</span><span class="op" id="2769754">)</span>&nbsp;<span class="ident" id="2769756">Hours</span><span class="op" id="2769761">(</span><span class="op" id="2769762">)</span>&nbsp;<span class="builtintype" id="2769764">float64</span>&nbsp;<span class="op" id="2769772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769775">hour</span>&nbsp;<span class="op" id="2769780">:=</span>&nbsp;<span class="ident" id="2769783">d</span>&nbsp;<span class="op" id="2769785">/</span>&nbsp;<span class="ident" id="2769787">Hour</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769793">nsec</span>&nbsp;<span class="op" id="2769798">:=</span>&nbsp;<span class="ident" id="2769801">d</span>&nbsp;<span class="op" id="2769803">%</span>&nbsp;<span class="ident" id="2769805">Hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769811">return</span>&nbsp;<span class="builtintype" id="2769818">float64</span><span class="op" id="2769825">(</span><span class="ident" id="2769826">hour</span><span class="op" id="2769830">)</span>&nbsp;<span class="op" id="2769832">+</span>&nbsp;<span class="builtintype" id="2769834">float64</span><span class="op" id="2769841">(</span><span class="ident" id="2769842">nsec</span><span class="op" id="2769846">)</span><span class="op" id="2769847">*</span><span class="op" id="2769848">(</span><span class="num" id="2769849">1e-9</span><span class="op" id="2769853">/</span><span class="num" id="2769854">60</span><span class="op" id="2769856">/</span><span class="num" id="2769857">60</span><span class="op" id="2769859">)</span><br>
<span class="lineno"></span><span class="op" id="2769861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769864">//&nbsp;Add&nbsp;returns&nbsp;the&nbsp;time&nbsp;t+d.</span><br>
<span class="lineno">610</span><span class="keyword" id="2769893">func</span>&nbsp;<span class="op" id="2769898">(</span><span class="ident" id="2769899">t</span>&nbsp;<span class="ident" id="2769901">Time</span><span class="op" id="2769905">)</span>&nbsp;<span class="ident" id="2769907">Add</span><span class="op" id="2769910">(</span><span class="ident" id="2769911">d</span>&nbsp;<span class="ident" id="2769913">Duration</span><span class="op" id="2769921">)</span>&nbsp;<span class="ident" id="2769923">Time</span>&nbsp;<span class="op" id="2769928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769931">t</span><span class="op" id="2769932">.</span><span class="ident" id="2769933">sec</span>&nbsp;<span class="op" id="2769937">+=</span>&nbsp;<span class="ident" id="2769940">int64</span><span class="op" id="2769945">(</span><span class="ident" id="2769946">d</span>&nbsp;<span class="op" id="2769948">/</span>&nbsp;<span class="num" id="2769950">1e9</span><span class="op" id="2769953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769956">nsec</span>&nbsp;<span class="op" id="2769961">:=</span>&nbsp;<span class="builtintype" id="2769964">int32</span><span class="op" id="2769969">(</span><span class="ident" id="2769970">t</span><span class="op" id="2769971">.</span><span class="ident" id="2769972">nsec</span><span class="op" id="2769976">)</span>&nbsp;<span class="op" id="2769978">+</span>&nbsp;<span class="builtintype" id="2769980">int32</span><span class="op" id="2769985">(</span><span class="ident" id="2769986">d</span><span class="op" id="2769987">%</span><span class="num" id="2769988">1e9</span><span class="op" id="2769991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769994">if</span>&nbsp;<span class="ident" id="2769997">nsec</span>&nbsp;<span class="op" id="2770002">&gt;=</span>&nbsp;<span class="num" id="2770005">1e9</span>&nbsp;<span class="op" id="2770009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770013">t</span><span class="op" id="2770014">.</span><span class="ident" id="2770015">sec</span><span class="op" id="2770018">++</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770023">nsec</span>&nbsp;<span class="op" id="2770028">-=</span>&nbsp;<span class="num" id="2770031">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770036">}</span>&nbsp;<span class="keyword" id="2770038">else</span>&nbsp;<span class="keyword" id="2770043">if</span>&nbsp;<span class="ident" id="2770046">nsec</span>&nbsp;<span class="op" id="2770051">&lt;</span>&nbsp;<span class="num" id="2770053">0</span>&nbsp;<span class="op" id="2770055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770059">t</span><span class="op" id="2770060">.</span><span class="ident" id="2770061">sec</span><span class="op" id="2770064">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770069">nsec</span>&nbsp;<span class="op" id="2770074">+=</span>&nbsp;<span class="num" id="2770077">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770082">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770085">t</span><span class="op" id="2770086">.</span><span class="ident" id="2770087">nsec</span>&nbsp;<span class="op" id="2770092">=</span>&nbsp;<span class="ident" id="2770094">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770100">return</span>&nbsp;<span class="ident" id="2770107">t</span><br>
<span class="lineno"></span><span class="op" id="2770109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770112">//&nbsp;Sub&nbsp;returns&nbsp;the&nbsp;duration&nbsp;t-u.&nbsp;If&nbsp;the&nbsp;result&nbsp;exceeds&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)</span><br>
<span class="lineno">625</span><span class="comment" id="2770192">//&nbsp;value&nbsp;that&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)&nbsp;duration</span><br>
<span class="lineno"></span><span class="comment" id="2770269">//&nbsp;will&nbsp;be&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="2770290">//&nbsp;To&nbsp;compute&nbsp;t-d&nbsp;for&nbsp;a&nbsp;duration&nbsp;d,&nbsp;use&nbsp;t.Add(-d).</span><br>
<span class="lineno"></span><span class="keyword" id="2770341">func</span>&nbsp;<span class="op" id="2770346">(</span><span class="ident" id="2770347">t</span>&nbsp;<span class="ident" id="2770349">Time</span><span class="op" id="2770353">)</span>&nbsp;<span class="ident" id="2770355">Sub</span><span class="op" id="2770358">(</span><span class="ident" id="2770359">u</span>&nbsp;<span class="ident" id="2770361">Time</span><span class="op" id="2770365">)</span>&nbsp;<span class="ident" id="2770367">Duration</span>&nbsp;<span class="op" id="2770376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770379">d</span>&nbsp;<span class="op" id="2770381">:=</span>&nbsp;<span class="ident" id="2770384">Duration</span><span class="op" id="2770392">(</span><span class="ident" id="2770393">t</span><span class="op" id="2770394">.</span><span class="ident" id="2770395">sec</span><span class="op" id="2770398">-</span><span class="ident" id="2770399">u</span><span class="op" id="2770400">.</span><span class="ident" id="2770401">sec</span><span class="op" id="2770404">)</span><span class="op" id="2770405">*</span><span class="ident" id="2770406">Second</span>&nbsp;<span class="op" id="2770413">+</span>&nbsp;<span class="ident" id="2770415">Duration</span><span class="op" id="2770423">(</span><span class="builtintype" id="2770424">int32</span><span class="op" id="2770429">(</span><span class="ident" id="2770430">t</span><span class="op" id="2770431">.</span><span class="ident" id="2770432">nsec</span><span class="op" id="2770436">)</span><span class="op" id="2770437">-</span><span class="builtintype" id="2770438">int32</span><span class="op" id="2770443">(</span><span class="ident" id="2770444">u</span><span class="op" id="2770445">.</span><span class="ident" id="2770446">nsec</span><span class="op" id="2770450">)</span><span class="op" id="2770451">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2770454">//&nbsp;Check&nbsp;for&nbsp;overflow&nbsp;or&nbsp;underflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770491">switch</span>&nbsp;<span class="op" id="2770498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770501">case</span>&nbsp;<span class="ident" id="2770506">u</span><span class="op" id="2770507">.</span><span class="ident" id="2770508">Add</span><span class="op" id="2770511">(</span><span class="ident" id="2770512">d</span><span class="op" id="2770513">)</span><span class="op" id="2770514">.</span><span class="ident" id="2770515">Equal</span><span class="op" id="2770520">(</span><span class="ident" id="2770521">t</span><span class="op" id="2770522">)</span><span class="op" id="2770523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770527">return</span>&nbsp;<span class="ident" id="2770534">d</span>&nbsp;<span class="comment" id="2770536">//&nbsp;d&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770553">case</span>&nbsp;<span class="ident" id="2770558">t</span><span class="op" id="2770559">.</span><span class="ident" id="2770560">Before</span><span class="op" id="2770566">(</span><span class="ident" id="2770567">u</span><span class="op" id="2770568">)</span><span class="op" id="2770569">:</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770573">return</span>&nbsp;<span class="ident" id="2770580">minDuration</span>&nbsp;<span class="comment" id="2770592">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;negative&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770627">default</span><span class="op" id="2770634">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770638">return</span>&nbsp;<span class="ident" id="2770645">maxDuration</span>&nbsp;<span class="comment" id="2770657">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;positive&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770692">}</span><br>
<span class="lineno"></span><span class="op" id="2770694">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2770697">//&nbsp;Since&nbsp;returns&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2770740">//&nbsp;It&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;time.Now().Sub(t).</span><br>
<span class="lineno"></span><span class="keyword" id="2770782">func</span>&nbsp;<span class="ident" id="2770787">Since</span><span class="op" id="2770792">(</span><span class="ident" id="2770793">t</span>&nbsp;<span class="ident" id="2770795">Time</span><span class="op" id="2770799">)</span>&nbsp;<span class="ident" id="2770801">Duration</span>&nbsp;<span class="op" id="2770810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770813">return</span>&nbsp;<span class="ident" id="2770820">Now</span><span class="op" id="2770823">(</span><span class="op" id="2770824">)</span><span class="op" id="2770825">.</span><span class="ident" id="2770826">Sub</span><span class="op" id="2770829">(</span><span class="ident" id="2770830">t</span><span class="op" id="2770831">)</span><br>
<span class="lineno">645</span><span class="op" id="2770833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770836">//&nbsp;AddDate&nbsp;returns&nbsp;the&nbsp;time&nbsp;corresponding&nbsp;to&nbsp;adding&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2770892">//&nbsp;given&nbsp;number&nbsp;of&nbsp;years,&nbsp;months,&nbsp;and&nbsp;days&nbsp;to&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2770941">//&nbsp;For&nbsp;example,&nbsp;AddDate(-1,&nbsp;2,&nbsp;3)&nbsp;applied&nbsp;to&nbsp;January&nbsp;1,&nbsp;2011</span><br>
<span class="lineno">650</span><span class="comment" id="2771002">//&nbsp;returns&nbsp;March&nbsp;4,&nbsp;2010.</span><br>
<span class="lineno"></span><span class="comment" id="2771028">//</span><br>
<span class="lineno"></span><span class="comment" id="2771031">//&nbsp;AddDate&nbsp;normalizes&nbsp;its&nbsp;result&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;Date&nbsp;does,</span><br>
<span class="lineno"></span><span class="comment" id="2771096">//&nbsp;so,&nbsp;for&nbsp;example,&nbsp;adding&nbsp;one&nbsp;month&nbsp;to&nbsp;October&nbsp;31&nbsp;yields</span><br>
<span class="lineno"></span><span class="comment" id="2771154">//&nbsp;December&nbsp;1,&nbsp;the&nbsp;normalized&nbsp;form&nbsp;for&nbsp;November&nbsp;31.</span><br>
<span class="lineno">655</span><span class="keyword" id="2771206">func</span>&nbsp;<span class="op" id="2771211">(</span><span class="ident" id="2771212">t</span>&nbsp;<span class="ident" id="2771214">Time</span><span class="op" id="2771218">)</span>&nbsp;<span class="ident" id="2771220">AddDate</span><span class="op" id="2771227">(</span><span class="ident" id="2771228">years</span>&nbsp;<span class="builtintype" id="2771234">int</span><span class="op" id="2771237">,</span>&nbsp;<span class="ident" id="2771239">months</span>&nbsp;<span class="builtintype" id="2771246">int</span><span class="op" id="2771249">,</span>&nbsp;<span class="ident" id="2771251">days</span>&nbsp;<span class="builtintype" id="2771256">int</span><span class="op" id="2771259">)</span>&nbsp;<span class="ident" id="2771261">Time</span>&nbsp;<span class="op" id="2771266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771269">year</span><span class="op" id="2771273">,</span>&nbsp;<span class="ident" id="2771275">month</span><span class="op" id="2771280">,</span>&nbsp;<span class="ident" id="2771282">day</span>&nbsp;<span class="op" id="2771286">:=</span>&nbsp;<span class="ident" id="2771289">t</span><span class="op" id="2771290">.</span><span class="ident" id="2771291">Date</span><span class="op" id="2771295">(</span><span class="op" id="2771296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771299">hour</span><span class="op" id="2771303">,</span>&nbsp;<span class="ident" id="2771305">min</span><span class="op" id="2771308">,</span>&nbsp;<span class="ident" id="2771310">sec</span>&nbsp;<span class="op" id="2771314">:=</span>&nbsp;<span class="ident" id="2771317">t</span><span class="op" id="2771318">.</span><span class="ident" id="2771319">Clock</span><span class="op" id="2771324">(</span><span class="op" id="2771325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771328">return</span>&nbsp;<span class="ident" id="2771335">Date</span><span class="op" id="2771339">(</span><span class="ident" id="2771340">year</span><span class="op" id="2771344">+</span><span class="ident" id="2771345">years</span><span class="op" id="2771350">,</span>&nbsp;<span class="ident" id="2771352">month</span><span class="op" id="2771357">+</span><span class="ident" id="2771358">Month</span><span class="op" id="2771363">(</span><span class="ident" id="2771364">months</span><span class="op" id="2771370">)</span><span class="op" id="2771371">,</span>&nbsp;<span class="ident" id="2771373">day</span><span class="op" id="2771376">+</span><span class="ident" id="2771377">days</span><span class="op" id="2771381">,</span>&nbsp;<span class="ident" id="2771383">hour</span><span class="op" id="2771387">,</span>&nbsp;<span class="ident" id="2771389">min</span><span class="op" id="2771392">,</span>&nbsp;<span class="ident" id="2771394">sec</span><span class="op" id="2771397">,</span>&nbsp;<span class="builtintype" id="2771399">int</span><span class="op" id="2771402">(</span><span class="ident" id="2771403">t</span><span class="op" id="2771404">.</span><span class="ident" id="2771405">nsec</span><span class="op" id="2771409">)</span><span class="op" id="2771410">,</span>&nbsp;<span class="ident" id="2771412">t</span><span class="op" id="2771413">.</span><span class="ident" id="2771414">loc</span><span class="op" id="2771417">)</span><br>
<span class="lineno"></span><span class="op" id="2771419">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="keyword" id="2771422">const</span>&nbsp;<span class="op" id="2771428">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771431">secondsPerMinute</span>&nbsp;<span class="op" id="2771448">=</span>&nbsp;<span class="num" id="2771450">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771454">secondsPerHour</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2771471">=</span>&nbsp;<span class="num" id="2771473">60</span>&nbsp;<span class="op" id="2771476">*</span>&nbsp;<span class="num" id="2771478">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771482">secondsPerDay</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771499">=</span>&nbsp;<span class="num" id="2771501">24</span>&nbsp;<span class="op" id="2771504">*</span>&nbsp;<span class="ident" id="2771506">secondsPerHour</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771522">secondsPerWeek</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2771539">=</span>&nbsp;<span class="num" id="2771541">7</span>&nbsp;<span class="op" id="2771543">*</span>&nbsp;<span class="ident" id="2771545">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771560">daysPer400Years</span>&nbsp;&nbsp;<span class="op" id="2771577">=</span>&nbsp;<span class="num" id="2771579">365</span><span class="op" id="2771582">*</span><span class="num" id="2771583">400</span>&nbsp;<span class="op" id="2771587">+</span>&nbsp;<span class="num" id="2771589">97</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771593">daysPer100Years</span>&nbsp;&nbsp;<span class="op" id="2771610">=</span>&nbsp;<span class="num" id="2771612">365</span><span class="op" id="2771615">*</span><span class="num" id="2771616">100</span>&nbsp;<span class="op" id="2771620">+</span>&nbsp;<span class="num" id="2771622">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771626">daysPer4Years</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771643">=</span>&nbsp;<span class="num" id="2771645">365</span><span class="op" id="2771648">*</span><span class="num" id="2771649">4</span>&nbsp;<span class="op" id="2771651">+</span>&nbsp;<span class="num" id="2771653">1</span><br>
<span class="lineno"></span><span class="op" id="2771655">)</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="2771658">//&nbsp;date&nbsp;computes&nbsp;the&nbsp;year,&nbsp;day&nbsp;of&nbsp;year,&nbsp;and&nbsp;when&nbsp;full=true,</span><br>
<span class="lineno"></span><span class="comment" id="2771718">//&nbsp;the&nbsp;month&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2771758">func</span>&nbsp;<span class="op" id="2771763">(</span><span class="ident" id="2771764">t</span>&nbsp;<span class="ident" id="2771766">Time</span><span class="op" id="2771770">)</span>&nbsp;<span class="ident" id="2771772">date</span><span class="op" id="2771776">(</span><span class="ident" id="2771777">full</span>&nbsp;<span class="builtintype" id="2771782">bool</span><span class="op" id="2771786">)</span>&nbsp;<span class="op" id="2771788">(</span><span class="ident" id="2771789">year</span>&nbsp;<span class="builtintype" id="2771794">int</span><span class="op" id="2771797">,</span>&nbsp;<span class="ident" id="2771799">month</span>&nbsp;<span class="ident" id="2771805">Month</span><span class="op" id="2771810">,</span>&nbsp;<span class="ident" id="2771812">day</span>&nbsp;<span class="builtintype" id="2771816">int</span><span class="op" id="2771819">,</span>&nbsp;<span class="ident" id="2771821">yday</span>&nbsp;<span class="builtintype" id="2771826">int</span><span class="op" id="2771829">)</span>&nbsp;<span class="op" id="2771831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771834">return</span>&nbsp;<span class="ident" id="2771841">absDate</span><span class="op" id="2771848">(</span><span class="ident" id="2771849">t</span><span class="op" id="2771850">.</span><span class="ident" id="2771851">abs</span><span class="op" id="2771854">(</span><span class="op" id="2771855">)</span><span class="op" id="2771856">,</span>&nbsp;<span class="ident" id="2771858">full</span><span class="op" id="2771862">)</span><br>
<span class="lineno">675</span><span class="op" id="2771864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2771867">//&nbsp;absDate&nbsp;is&nbsp;like&nbsp;date&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2771925">func</span>&nbsp;<span class="ident" id="2771930">absDate</span><span class="op" id="2771937">(</span><span class="ident" id="2771938">abs</span>&nbsp;<span class="ident" id="2771942">uint64</span><span class="op" id="2771948">,</span>&nbsp;<span class="ident" id="2771950">full</span>&nbsp;<span class="builtintype" id="2771955">bool</span><span class="op" id="2771959">)</span>&nbsp;<span class="op" id="2771961">(</span><span class="ident" id="2771962">year</span>&nbsp;<span class="builtintype" id="2771967">int</span><span class="op" id="2771970">,</span>&nbsp;<span class="ident" id="2771972">month</span>&nbsp;<span class="ident" id="2771978">Month</span><span class="op" id="2771983">,</span>&nbsp;<span class="ident" id="2771985">day</span>&nbsp;<span class="builtintype" id="2771989">int</span><span class="op" id="2771992">,</span>&nbsp;<span class="ident" id="2771994">yday</span>&nbsp;<span class="builtintype" id="2771999">int</span><span class="op" id="2772002">)</span>&nbsp;<span class="op" id="2772004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772007">//&nbsp;Split&nbsp;into&nbsp;time&nbsp;and&nbsp;day.</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772036">d</span>&nbsp;<span class="op" id="2772038">:=</span>&nbsp;<span class="ident" id="2772041">abs</span>&nbsp;<span class="op" id="2772045">/</span>&nbsp;<span class="ident" id="2772047">secondsPerDay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772063">//&nbsp;Account&nbsp;for&nbsp;400&nbsp;year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772096">n</span>&nbsp;<span class="op" id="2772098">:=</span>&nbsp;<span class="ident" id="2772101">d</span>&nbsp;<span class="op" id="2772103">/</span>&nbsp;<span class="ident" id="2772105">daysPer400Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772122">y</span>&nbsp;<span class="op" id="2772124">:=</span>&nbsp;<span class="num" id="2772127">400</span>&nbsp;<span class="op" id="2772131">*</span>&nbsp;<span class="ident" id="2772133">n</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772136">d</span>&nbsp;<span class="op" id="2772138">-=</span>&nbsp;<span class="ident" id="2772141">daysPer400Years</span>&nbsp;<span class="op" id="2772157">*</span>&nbsp;<span class="ident" id="2772159">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772163">//&nbsp;Cut&nbsp;off&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772192">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;one&nbsp;extra&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772255">//&nbsp;of&nbsp;that&nbsp;year,&nbsp;day&nbsp;/&nbsp;daysPer100Years&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772319">//&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772366">n</span>&nbsp;<span class="op" id="2772368">=</span>&nbsp;<span class="ident" id="2772370">d</span>&nbsp;<span class="op" id="2772372">/</span>&nbsp;<span class="ident" id="2772374">daysPer100Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772391">n</span>&nbsp;<span class="op" id="2772393">-=</span>&nbsp;<span class="ident" id="2772396">n</span>&nbsp;<span class="op" id="2772398">&gt;&gt;</span>&nbsp;<span class="num" id="2772401">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772404">y</span>&nbsp;<span class="op" id="2772406">+=</span>&nbsp;<span class="num" id="2772409">100</span>&nbsp;<span class="op" id="2772413">*</span>&nbsp;<span class="ident" id="2772415">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772418">d</span>&nbsp;<span class="op" id="2772420">-=</span>&nbsp;<span class="ident" id="2772423">daysPer100Years</span>&nbsp;<span class="op" id="2772439">*</span>&nbsp;<span class="ident" id="2772441">n</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772445">//&nbsp;Cut&nbsp;off&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772472">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;a&nbsp;missing&nbsp;leap&nbsp;year,&nbsp;which&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772531">//&nbsp;affect&nbsp;the&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772559">n</span>&nbsp;<span class="op" id="2772561">=</span>&nbsp;<span class="ident" id="2772563">d</span>&nbsp;<span class="op" id="2772565">/</span>&nbsp;<span class="ident" id="2772567">daysPer4Years</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772582">y</span>&nbsp;<span class="op" id="2772584">+=</span>&nbsp;<span class="num" id="2772587">4</span>&nbsp;<span class="op" id="2772589">*</span>&nbsp;<span class="ident" id="2772591">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772594">d</span>&nbsp;<span class="op" id="2772596">-=</span>&nbsp;<span class="ident" id="2772599">daysPer4Years</span>&nbsp;<span class="op" id="2772613">*</span>&nbsp;<span class="ident" id="2772615">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772619">//&nbsp;Cut&nbsp;off&nbsp;years&nbsp;within&nbsp;a&nbsp;4-year&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772660">//&nbsp;The&nbsp;last&nbsp;year&nbsp;is&nbsp;a&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day&nbsp;of&nbsp;that&nbsp;year,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772727">//&nbsp;day&nbsp;/&nbsp;365&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.&nbsp;&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772788">//&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772813">n</span>&nbsp;<span class="op" id="2772815">=</span>&nbsp;<span class="ident" id="2772817">d</span>&nbsp;<span class="op" id="2772819">/</span>&nbsp;<span class="num" id="2772821">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772826">n</span>&nbsp;<span class="op" id="2772828">-=</span>&nbsp;<span class="ident" id="2772831">n</span>&nbsp;<span class="op" id="2772833">&gt;&gt;</span>&nbsp;<span class="num" id="2772836">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772839">y</span>&nbsp;<span class="op" id="2772841">+=</span>&nbsp;<span class="ident" id="2772844">n</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772847">d</span>&nbsp;<span class="op" id="2772849">-=</span>&nbsp;<span class="num" id="2772852">365</span>&nbsp;<span class="op" id="2772856">*</span>&nbsp;<span class="ident" id="2772858">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772862">year</span>&nbsp;<span class="op" id="2772867">=</span>&nbsp;<span class="builtintype" id="2772869">int</span><span class="op" id="2772872">(</span><span class="ident" id="2772873">int64</span><span class="op" id="2772878">(</span><span class="ident" id="2772879">y</span><span class="op" id="2772880">)</span>&nbsp;<span class="op" id="2772882">+</span>&nbsp;<span class="ident" id="2772884">absoluteZeroYear</span><span class="op" id="2772900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772903">yday</span>&nbsp;<span class="op" id="2772908">=</span>&nbsp;<span class="builtintype" id="2772910">int</span><span class="op" id="2772913">(</span><span class="ident" id="2772914">d</span><span class="op" id="2772915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772919">if</span>&nbsp;<span class="op" id="2772922">!</span><span class="ident" id="2772923">full</span>&nbsp;<span class="op" id="2772928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772932">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772944">day</span>&nbsp;<span class="op" id="2772948">=</span>&nbsp;<span class="ident" id="2772950">yday</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772956">if</span>&nbsp;<span class="ident" id="2772959">isLeap</span><span class="op" id="2772965">(</span><span class="ident" id="2772966">year</span><span class="op" id="2772970">)</span>&nbsp;<span class="op" id="2772972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772976">//&nbsp;Leap&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772991">switch</span>&nbsp;<span class="op" id="2772998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773002">case</span>&nbsp;<span class="ident" id="2773007">day</span>&nbsp;<span class="op" id="2773011">&gt;</span>&nbsp;<span class="num" id="2773013">31</span><span class="op" id="2773015">+</span><span class="num" id="2773016">29</span><span class="op" id="2773018">-</span><span class="num" id="2773019">1</span><span class="op" id="2773020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773025">//&nbsp;After&nbsp;leap&nbsp;day;&nbsp;pretend&nbsp;it&nbsp;wasn&#39;t&nbsp;there.</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773072">day</span><span class="op" id="2773075">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773080">case</span>&nbsp;<span class="ident" id="2773085">day</span>&nbsp;<span class="op" id="2773089">==</span>&nbsp;<span class="num" id="2773092">31</span><span class="op" id="2773094">+</span><span class="num" id="2773095">29</span><span class="op" id="2773097">-</span><span class="num" id="2773098">1</span><span class="op" id="2773099">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773104">//&nbsp;Leap&nbsp;day.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773120">month</span>&nbsp;<span class="op" id="2773126">=</span>&nbsp;<span class="ident" id="2773128">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773140">day</span>&nbsp;<span class="op" id="2773144">=</span>&nbsp;<span class="num" id="2773146">29</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773152">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773168">//&nbsp;Estimate&nbsp;month&nbsp;on&nbsp;assumption&nbsp;that&nbsp;every&nbsp;month&nbsp;has&nbsp;31&nbsp;days.</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773231">//&nbsp;The&nbsp;estimate&nbsp;may&nbsp;be&nbsp;too&nbsp;low&nbsp;by&nbsp;at&nbsp;most&nbsp;one&nbsp;month,&nbsp;so&nbsp;adjust.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773296">month</span>&nbsp;<span class="op" id="2773302">=</span>&nbsp;<span class="ident" id="2773304">Month</span><span class="op" id="2773309">(</span><span class="ident" id="2773310">day</span>&nbsp;<span class="op" id="2773314">/</span>&nbsp;<span class="num" id="2773316">31</span><span class="op" id="2773318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773321">end</span>&nbsp;<span class="op" id="2773325">:=</span>&nbsp;<span class="builtintype" id="2773328">int</span><span class="op" id="2773331">(</span><span class="ident" id="2773332">daysBefore</span><span class="op" id="2773342">[</span><span class="ident" id="2773343">month</span><span class="op" id="2773348">+</span><span class="num" id="2773349">1</span><span class="op" id="2773350">]</span><span class="op" id="2773351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773354">var</span>&nbsp;<span class="ident" id="2773358">begin</span>&nbsp;<span class="builtintype" id="2773364">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773369">if</span>&nbsp;<span class="ident" id="2773372">day</span>&nbsp;<span class="op" id="2773376">&gt;=</span>&nbsp;<span class="ident" id="2773379">end</span>&nbsp;<span class="op" id="2773383">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773387">month</span><span class="op" id="2773392">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773397">begin</span>&nbsp;<span class="op" id="2773403">=</span>&nbsp;<span class="ident" id="2773405">end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773410">}</span>&nbsp;<span class="keyword" id="2773412">else</span>&nbsp;<span class="op" id="2773417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773421">begin</span>&nbsp;<span class="op" id="2773427">=</span>&nbsp;<span class="builtintype" id="2773429">int</span><span class="op" id="2773432">(</span><span class="ident" id="2773433">daysBefore</span><span class="op" id="2773443">[</span><span class="ident" id="2773444">month</span><span class="op" id="2773449">]</span><span class="op" id="2773450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773453">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773457">month</span><span class="op" id="2773462">++</span>&nbsp;<span class="comment" id="2773465">//&nbsp;because&nbsp;January&nbsp;is&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773490">day</span>&nbsp;<span class="op" id="2773494">=</span>&nbsp;<span class="ident" id="2773496">day</span>&nbsp;<span class="op" id="2773500">-</span>&nbsp;<span class="ident" id="2773502">begin</span>&nbsp;<span class="op" id="2773508">+</span>&nbsp;<span class="num" id="2773510">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773513">return</span><br>
<span class="lineno"></span><span class="op" id="2773520">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="comment" id="2773523">//&nbsp;daysBefore[m]&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;in&nbsp;a&nbsp;non-leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2773585">//&nbsp;before&nbsp;month&nbsp;m&nbsp;begins.&nbsp;&nbsp;There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;m=12,&nbsp;counting</span><br>
<span class="lineno"></span><span class="comment" id="2773649">//&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;before&nbsp;January&nbsp;of&nbsp;next&nbsp;year&nbsp;(365).</span><br>
<span class="lineno"></span><span class="keyword" id="2773706">var</span>&nbsp;<span class="ident" id="2773710">daysBefore</span>&nbsp;<span class="op" id="2773721">=</span>&nbsp;<span class="op" id="2773723">[</span><span class="op" id="2773724">...</span><span class="op" id="2773727">]</span><span class="builtintype" id="2773728">int32</span><span class="op" id="2773733">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773736">0</span><span class="op" id="2773737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773740">31</span><span class="op" id="2773742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773745">31</span>&nbsp;<span class="op" id="2773748">+</span>&nbsp;<span class="num" id="2773750">28</span><span class="op" id="2773752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773755">31</span>&nbsp;<span class="op" id="2773758">+</span>&nbsp;<span class="num" id="2773760">28</span>&nbsp;<span class="op" id="2773763">+</span>&nbsp;<span class="num" id="2773765">31</span><span class="op" id="2773767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773770">31</span>&nbsp;<span class="op" id="2773773">+</span>&nbsp;<span class="num" id="2773775">28</span>&nbsp;<span class="op" id="2773778">+</span>&nbsp;<span class="num" id="2773780">31</span>&nbsp;<span class="op" id="2773783">+</span>&nbsp;<span class="num" id="2773785">30</span><span class="op" id="2773787">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773790">31</span>&nbsp;<span class="op" id="2773793">+</span>&nbsp;<span class="num" id="2773795">28</span>&nbsp;<span class="op" id="2773798">+</span>&nbsp;<span class="num" id="2773800">31</span>&nbsp;<span class="op" id="2773803">+</span>&nbsp;<span class="num" id="2773805">30</span>&nbsp;<span class="op" id="2773808">+</span>&nbsp;<span class="num" id="2773810">31</span><span class="op" id="2773812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773815">31</span>&nbsp;<span class="op" id="2773818">+</span>&nbsp;<span class="num" id="2773820">28</span>&nbsp;<span class="op" id="2773823">+</span>&nbsp;<span class="num" id="2773825">31</span>&nbsp;<span class="op" id="2773828">+</span>&nbsp;<span class="num" id="2773830">30</span>&nbsp;<span class="op" id="2773833">+</span>&nbsp;<span class="num" id="2773835">31</span>&nbsp;<span class="op" id="2773838">+</span>&nbsp;<span class="num" id="2773840">30</span><span class="op" id="2773842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773845">31</span>&nbsp;<span class="op" id="2773848">+</span>&nbsp;<span class="num" id="2773850">28</span>&nbsp;<span class="op" id="2773853">+</span>&nbsp;<span class="num" id="2773855">31</span>&nbsp;<span class="op" id="2773858">+</span>&nbsp;<span class="num" id="2773860">30</span>&nbsp;<span class="op" id="2773863">+</span>&nbsp;<span class="num" id="2773865">31</span>&nbsp;<span class="op" id="2773868">+</span>&nbsp;<span class="num" id="2773870">30</span>&nbsp;<span class="op" id="2773873">+</span>&nbsp;<span class="num" id="2773875">31</span><span class="op" id="2773877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773880">31</span>&nbsp;<span class="op" id="2773883">+</span>&nbsp;<span class="num" id="2773885">28</span>&nbsp;<span class="op" id="2773888">+</span>&nbsp;<span class="num" id="2773890">31</span>&nbsp;<span class="op" id="2773893">+</span>&nbsp;<span class="num" id="2773895">30</span>&nbsp;<span class="op" id="2773898">+</span>&nbsp;<span class="num" id="2773900">31</span>&nbsp;<span class="op" id="2773903">+</span>&nbsp;<span class="num" id="2773905">30</span>&nbsp;<span class="op" id="2773908">+</span>&nbsp;<span class="num" id="2773910">31</span>&nbsp;<span class="op" id="2773913">+</span>&nbsp;<span class="num" id="2773915">31</span><span class="op" id="2773917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773920">31</span>&nbsp;<span class="op" id="2773923">+</span>&nbsp;<span class="num" id="2773925">28</span>&nbsp;<span class="op" id="2773928">+</span>&nbsp;<span class="num" id="2773930">31</span>&nbsp;<span class="op" id="2773933">+</span>&nbsp;<span class="num" id="2773935">30</span>&nbsp;<span class="op" id="2773938">+</span>&nbsp;<span class="num" id="2773940">31</span>&nbsp;<span class="op" id="2773943">+</span>&nbsp;<span class="num" id="2773945">30</span>&nbsp;<span class="op" id="2773948">+</span>&nbsp;<span class="num" id="2773950">31</span>&nbsp;<span class="op" id="2773953">+</span>&nbsp;<span class="num" id="2773955">31</span>&nbsp;<span class="op" id="2773958">+</span>&nbsp;<span class="num" id="2773960">30</span><span class="op" id="2773962">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2773965">31</span>&nbsp;<span class="op" id="2773968">+</span>&nbsp;<span class="num" id="2773970">28</span>&nbsp;<span class="op" id="2773973">+</span>&nbsp;<span class="num" id="2773975">31</span>&nbsp;<span class="op" id="2773978">+</span>&nbsp;<span class="num" id="2773980">30</span>&nbsp;<span class="op" id="2773983">+</span>&nbsp;<span class="num" id="2773985">31</span>&nbsp;<span class="op" id="2773988">+</span>&nbsp;<span class="num" id="2773990">30</span>&nbsp;<span class="op" id="2773993">+</span>&nbsp;<span class="num" id="2773995">31</span>&nbsp;<span class="op" id="2773998">+</span>&nbsp;<span class="num" id="2774000">31</span>&nbsp;<span class="op" id="2774003">+</span>&nbsp;<span class="num" id="2774005">30</span>&nbsp;<span class="op" id="2774008">+</span>&nbsp;<span class="num" id="2774010">31</span><span class="op" id="2774012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2774015">31</span>&nbsp;<span class="op" id="2774018">+</span>&nbsp;<span class="num" id="2774020">28</span>&nbsp;<span class="op" id="2774023">+</span>&nbsp;<span class="num" id="2774025">31</span>&nbsp;<span class="op" id="2774028">+</span>&nbsp;<span class="num" id="2774030">30</span>&nbsp;<span class="op" id="2774033">+</span>&nbsp;<span class="num" id="2774035">31</span>&nbsp;<span class="op" id="2774038">+</span>&nbsp;<span class="num" id="2774040">30</span>&nbsp;<span class="op" id="2774043">+</span>&nbsp;<span class="num" id="2774045">31</span>&nbsp;<span class="op" id="2774048">+</span>&nbsp;<span class="num" id="2774050">31</span>&nbsp;<span class="op" id="2774053">+</span>&nbsp;<span class="num" id="2774055">30</span>&nbsp;<span class="op" id="2774058">+</span>&nbsp;<span class="num" id="2774060">31</span>&nbsp;<span class="op" id="2774063">+</span>&nbsp;<span class="num" id="2774065">30</span><span class="op" id="2774067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2774070">31</span>&nbsp;<span class="op" id="2774073">+</span>&nbsp;<span class="num" id="2774075">28</span>&nbsp;<span class="op" id="2774078">+</span>&nbsp;<span class="num" id="2774080">31</span>&nbsp;<span class="op" id="2774083">+</span>&nbsp;<span class="num" id="2774085">30</span>&nbsp;<span class="op" id="2774088">+</span>&nbsp;<span class="num" id="2774090">31</span>&nbsp;<span class="op" id="2774093">+</span>&nbsp;<span class="num" id="2774095">30</span>&nbsp;<span class="op" id="2774098">+</span>&nbsp;<span class="num" id="2774100">31</span>&nbsp;<span class="op" id="2774103">+</span>&nbsp;<span class="num" id="2774105">31</span>&nbsp;<span class="op" id="2774108">+</span>&nbsp;<span class="num" id="2774110">30</span>&nbsp;<span class="op" id="2774113">+</span>&nbsp;<span class="num" id="2774115">31</span>&nbsp;<span class="op" id="2774118">+</span>&nbsp;<span class="num" id="2774120">30</span>&nbsp;<span class="op" id="2774123">+</span>&nbsp;<span class="num" id="2774125">31</span><span class="op" id="2774127">,</span><br>
<span class="lineno"></span><span class="op" id="2774129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">770</span><span class="keyword" id="2774132">func</span>&nbsp;<span class="ident" id="2774137">daysIn</span><span class="op" id="2774143">(</span><span class="ident" id="2774144">m</span>&nbsp;<span class="ident" id="2774146">Month</span><span class="op" id="2774151">,</span>&nbsp;<span class="ident" id="2774153">year</span>&nbsp;<span class="builtintype" id="2774158">int</span><span class="op" id="2774161">)</span>&nbsp;<span class="builtintype" id="2774163">int</span>&nbsp;<span class="op" id="2774167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774170">if</span>&nbsp;<span class="ident" id="2774173">m</span>&nbsp;<span class="op" id="2774175">==</span>&nbsp;<span class="ident" id="2774178">February</span>&nbsp;<span class="op" id="2774187">&amp;&amp;</span>&nbsp;<span class="ident" id="2774190">isLeap</span><span class="op" id="2774196">(</span><span class="ident" id="2774197">year</span><span class="op" id="2774201">)</span>&nbsp;<span class="op" id="2774203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774207">return</span>&nbsp;<span class="num" id="2774214">29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774221">return</span>&nbsp;<span class="builtintype" id="2774228">int</span><span class="op" id="2774231">(</span><span class="ident" id="2774232">daysBefore</span><span class="op" id="2774242">[</span><span class="ident" id="2774243">m</span><span class="op" id="2774244">]</span>&nbsp;<span class="op" id="2774246">-</span>&nbsp;<span class="ident" id="2774248">daysBefore</span><span class="op" id="2774258">[</span><span class="ident" id="2774259">m</span><span class="op" id="2774260">-</span><span class="num" id="2774261">1</span><span class="op" id="2774262">]</span><span class="op" id="2774263">)</span><br>
<span class="lineno">775</span><span class="op" id="2774265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774268">//&nbsp;Provided&nbsp;by&nbsp;package&nbsp;runtime.</span><br>
<span class="lineno"></span><span class="keyword" id="2774300">func</span>&nbsp;<span class="ident" id="2774305">now</span><span class="op" id="2774308">(</span><span class="op" id="2774309">)</span>&nbsp;<span class="op" id="2774311">(</span><span class="ident" id="2774312">sec</span>&nbsp;<span class="ident" id="2774316">int64</span><span class="op" id="2774321">,</span>&nbsp;<span class="ident" id="2774323">nsec</span>&nbsp;<span class="builtintype" id="2774328">int32</span><span class="op" id="2774333">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="comment" id="2774336">//&nbsp;Now&nbsp;returns&nbsp;the&nbsp;current&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2774375">func</span>&nbsp;<span class="ident" id="2774380">Now</span><span class="op" id="2774383">(</span><span class="op" id="2774384">)</span>&nbsp;<span class="ident" id="2774386">Time</span>&nbsp;<span class="op" id="2774391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774394">sec</span><span class="op" id="2774397">,</span>&nbsp;<span class="ident" id="2774399">nsec</span>&nbsp;<span class="op" id="2774404">:=</span>&nbsp;<span class="ident" id="2774407">now</span><span class="op" id="2774410">(</span><span class="op" id="2774411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774414">return</span>&nbsp;<span class="ident" id="2774421">Time</span><span class="op" id="2774425">{</span><span class="ident" id="2774426">sec</span>&nbsp;<span class="op" id="2774430">+</span>&nbsp;<span class="ident" id="2774432">unixToInternal</span><span class="op" id="2774446">,</span>&nbsp;<span class="ident" id="2774448">nsec</span><span class="op" id="2774452">,</span>&nbsp;<span class="ident" id="2774454">Local</span><span class="op" id="2774459">}</span><br>
<span class="lineno"></span><span class="op" id="2774461">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="comment" id="2774464">//&nbsp;UTC&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2774511">func</span>&nbsp;<span class="op" id="2774516">(</span><span class="ident" id="2774517">t</span>&nbsp;<span class="ident" id="2774519">Time</span><span class="op" id="2774523">)</span>&nbsp;<span class="ident" id="2774525">UTC</span><span class="op" id="2774528">(</span><span class="op" id="2774529">)</span>&nbsp;<span class="ident" id="2774531">Time</span>&nbsp;<span class="op" id="2774536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774539">t</span><span class="op" id="2774540">.</span><span class="ident" id="2774541">loc</span>&nbsp;<span class="op" id="2774545">=</span>&nbsp;<span class="ident" id="2774547">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774552">return</span>&nbsp;<span class="ident" id="2774559">t</span><br>
<span class="lineno">790</span><span class="op" id="2774561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774564">//&nbsp;Local&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2774620">func</span>&nbsp;<span class="op" id="2774625">(</span><span class="ident" id="2774626">t</span>&nbsp;<span class="ident" id="2774628">Time</span><span class="op" id="2774632">)</span>&nbsp;<span class="ident" id="2774634">Local</span><span class="op" id="2774639">(</span><span class="op" id="2774640">)</span>&nbsp;<span class="ident" id="2774642">Time</span>&nbsp;<span class="op" id="2774647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774650">t</span><span class="op" id="2774651">.</span><span class="ident" id="2774652">loc</span>&nbsp;<span class="op" id="2774656">=</span>&nbsp;<span class="ident" id="2774658">Local</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774665">return</span>&nbsp;<span class="ident" id="2774672">t</span><br>
<span class="lineno"></span><span class="op" id="2774674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774677">//&nbsp;In&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;information&nbsp;set&nbsp;to&nbsp;loc.</span><br>
<span class="lineno"></span><span class="comment" id="2774735">//</span><br>
<span class="lineno">800</span><span class="comment" id="2774738">//&nbsp;In&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2774766">func</span>&nbsp;<span class="op" id="2774771">(</span><span class="ident" id="2774772">t</span>&nbsp;<span class="ident" id="2774774">Time</span><span class="op" id="2774778">)</span>&nbsp;<span class="ident" id="2774780">In</span><span class="op" id="2774782">(</span><span class="ident" id="2774783">loc</span>&nbsp;<span class="op" id="2774787">*</span><span class="ident" id="2774788">Location</span><span class="op" id="2774796">)</span>&nbsp;<span class="ident" id="2774798">Time</span>&nbsp;<span class="op" id="2774803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774806">if</span>&nbsp;<span class="ident" id="2774809">loc</span>&nbsp;<span class="op" id="2774813">==</span>&nbsp;<span class="ident" id="2774816">nil</span>&nbsp;<span class="op" id="2774820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774824">panic</span><span class="op" id="2774829">(</span><span class="string" id="2774830">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Time.In&#34;</span><span class="op" id="2774873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774876">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774879">t</span><span class="op" id="2774880">.</span><span class="ident" id="2774881">loc</span>&nbsp;<span class="op" id="2774885">=</span>&nbsp;<span class="ident" id="2774887">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774892">return</span>&nbsp;<span class="ident" id="2774899">t</span><br>
<span class="lineno"></span><span class="op" id="2774901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774904">//&nbsp;Location&nbsp;returns&nbsp;the&nbsp;time&nbsp;zone&nbsp;information&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno">810</span><span class="keyword" id="2774969">func</span>&nbsp;<span class="op" id="2774974">(</span><span class="ident" id="2774975">t</span>&nbsp;<span class="ident" id="2774977">Time</span><span class="op" id="2774981">)</span>&nbsp;<span class="ident" id="2774983">Location</span><span class="op" id="2774991">(</span><span class="op" id="2774992">)</span>&nbsp;<span class="op" id="2774994">*</span><span class="ident" id="2774995">Location</span>&nbsp;<span class="op" id="2775004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775007">l</span>&nbsp;<span class="op" id="2775009">:=</span>&nbsp;<span class="ident" id="2775012">t</span><span class="op" id="2775013">.</span><span class="ident" id="2775014">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775019">if</span>&nbsp;<span class="ident" id="2775022">l</span>&nbsp;<span class="op" id="2775024">==</span>&nbsp;<span class="ident" id="2775027">nil</span>&nbsp;<span class="op" id="2775031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775035">l</span>&nbsp;<span class="op" id="2775037">=</span>&nbsp;<span class="ident" id="2775039">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775044">}</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775047">return</span>&nbsp;<span class="ident" id="2775054">l</span><br>
<span class="lineno"></span><span class="op" id="2775056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775059">//&nbsp;Zone&nbsp;computes&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;effect&nbsp;at&nbsp;time&nbsp;t,&nbsp;returning&nbsp;the&nbsp;abbreviated</span><br>
<span class="lineno"></span><span class="comment" id="2775137">//&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;)&nbsp;and&nbsp;its&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC.</span><br>
<span class="lineno">820</span><span class="keyword" id="2775212">func</span>&nbsp;<span class="op" id="2775217">(</span><span class="ident" id="2775218">t</span>&nbsp;<span class="ident" id="2775220">Time</span><span class="op" id="2775224">)</span>&nbsp;<span class="ident" id="2775226">Zone</span><span class="op" id="2775230">(</span><span class="op" id="2775231">)</span>&nbsp;<span class="op" id="2775233">(</span><span class="ident" id="2775234">name</span>&nbsp;<span class="builtintype" id="2775239">string</span><span class="op" id="2775245">,</span>&nbsp;<span class="ident" id="2775247">offset</span>&nbsp;<span class="builtintype" id="2775254">int</span><span class="op" id="2775257">)</span>&nbsp;<span class="op" id="2775259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775262">name</span><span class="op" id="2775266">,</span>&nbsp;<span class="ident" id="2775268">offset</span><span class="op" id="2775274">,</span>&nbsp;<span class="ident" id="2775276">_</span><span class="op" id="2775277">,</span>&nbsp;<span class="ident" id="2775279">_</span><span class="op" id="2775280">,</span>&nbsp;<span class="ident" id="2775282">_</span>&nbsp;<span class="op" id="2775284">=</span>&nbsp;<span class="ident" id="2775286">t</span><span class="op" id="2775287">.</span><span class="ident" id="2775288">loc</span><span class="op" id="2775291">.</span><span class="ident" id="2775292">lookup</span><span class="op" id="2775298">(</span><span class="ident" id="2775299">t</span><span class="op" id="2775300">.</span><span class="ident" id="2775301">sec</span>&nbsp;<span class="op" id="2775305">+</span>&nbsp;<span class="ident" id="2775307">internalToUnix</span><span class="op" id="2775321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775324">return</span><br>
<span class="lineno"></span><span class="op" id="2775331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="2775334">//&nbsp;Unix&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2775398">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2775428">func</span>&nbsp;<span class="op" id="2775433">(</span><span class="ident" id="2775434">t</span>&nbsp;<span class="ident" id="2775436">Time</span><span class="op" id="2775440">)</span>&nbsp;<span class="ident" id="2775442">Unix</span><span class="op" id="2775446">(</span><span class="op" id="2775447">)</span>&nbsp;<span class="ident" id="2775449">int64</span>&nbsp;<span class="op" id="2775455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775458">return</span>&nbsp;<span class="ident" id="2775465">t</span><span class="op" id="2775466">.</span><span class="ident" id="2775467">sec</span>&nbsp;<span class="op" id="2775471">+</span>&nbsp;<span class="ident" id="2775473">internalToUnix</span><br>
<span class="lineno"></span><span class="op" id="2775488">}</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span><span class="comment" id="2775491">//&nbsp;UnixNano&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;nanoseconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2775563">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.&nbsp;The&nbsp;result&nbsp;is&nbsp;undefined&nbsp;if&nbsp;the&nbsp;Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2775634">//&nbsp;in&nbsp;nanoseconds&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;an&nbsp;int64.&nbsp;Note&nbsp;that&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2775702">//&nbsp;means&nbsp;the&nbsp;result&nbsp;of&nbsp;calling&nbsp;UnixNano&nbsp;on&nbsp;the&nbsp;zero&nbsp;Time&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">835</span><span class="keyword" id="2775773">func</span>&nbsp;<span class="op" id="2775778">(</span><span class="ident" id="2775779">t</span>&nbsp;<span class="ident" id="2775781">Time</span><span class="op" id="2775785">)</span>&nbsp;<span class="ident" id="2775787">UnixNano</span><span class="op" id="2775795">(</span><span class="op" id="2775796">)</span>&nbsp;<span class="ident" id="2775798">int64</span>&nbsp;<span class="op" id="2775804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775807">return</span>&nbsp;<span class="op" id="2775814">(</span><span class="ident" id="2775815">t</span><span class="op" id="2775816">.</span><span class="ident" id="2775817">sec</span><span class="op" id="2775820">+</span><span class="ident" id="2775821">internalToUnix</span><span class="op" id="2775835">)</span><span class="op" id="2775836">*</span><span class="num" id="2775837">1e9</span>&nbsp;<span class="op" id="2775841">+</span>&nbsp;<span class="ident" id="2775843">int64</span><span class="op" id="2775848">(</span><span class="ident" id="2775849">t</span><span class="op" id="2775850">.</span><span class="ident" id="2775851">nsec</span><span class="op" id="2775855">)</span><br>
<span class="lineno"></span><span class="op" id="2775857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2775860">const</span>&nbsp;<span class="ident" id="2775866">timeBinaryVersion</span>&nbsp;<span class="builtintype" id="2775884">byte</span>&nbsp;<span class="op" id="2775889">=</span>&nbsp;<span class="num" id="2775891">1</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="comment" id="2775894">//&nbsp;MarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2775962">func</span>&nbsp;<span class="op" id="2775967">(</span><span class="ident" id="2775968">t</span>&nbsp;<span class="ident" id="2775970">Time</span><span class="op" id="2775974">)</span>&nbsp;<span class="ident" id="2775976">MarshalBinary</span><span class="op" id="2775989">(</span><span class="op" id="2775990">)</span>&nbsp;<span class="op" id="2775992">(</span><span class="op" id="2775993">[</span><span class="op" id="2775994">]</span><span class="builtintype" id="2775995">byte</span><span class="op" id="2775999">,</span>&nbsp;<span class="builtintype" id="2776001">error</span><span class="op" id="2776006">)</span>&nbsp;<span class="op" id="2776008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776011">var</span>&nbsp;<span class="ident" id="2776015">offsetMin</span>&nbsp;<span class="builtintype" id="2776025">int16</span>&nbsp;<span class="comment" id="2776031">//&nbsp;minutes&nbsp;east&nbsp;of&nbsp;UTC.&nbsp;-1&nbsp;is&nbsp;UTC.</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776068">if</span>&nbsp;<span class="ident" id="2776071">t</span><span class="op" id="2776072">.</span><span class="ident" id="2776073">Location</span><span class="op" id="2776081">(</span><span class="op" id="2776082">)</span>&nbsp;<span class="op" id="2776084">==</span>&nbsp;<span class="op" id="2776087">&amp;</span><span class="ident" id="2776088">utcLoc</span>&nbsp;<span class="op" id="2776095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776099">offsetMin</span>&nbsp;<span class="op" id="2776109">=</span>&nbsp;<span class="op" id="2776111">-</span><span class="num" id="2776112">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776115">}</span>&nbsp;<span class="keyword" id="2776117">else</span>&nbsp;<span class="op" id="2776122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776126">_</span><span class="op" id="2776127">,</span>&nbsp;<span class="ident" id="2776129">offset</span>&nbsp;<span class="op" id="2776136">:=</span>&nbsp;<span class="ident" id="2776139">t</span><span class="op" id="2776140">.</span><span class="ident" id="2776141">Zone</span><span class="op" id="2776145">(</span><span class="op" id="2776146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776150">if</span>&nbsp;<span class="ident" id="2776153">offset</span><span class="op" id="2776159">%</span><span class="num" id="2776160">60</span>&nbsp;<span class="op" id="2776163">!=</span>&nbsp;<span class="num" id="2776166">0</span>&nbsp;<span class="op" id="2776168">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776173">return</span>&nbsp;<span class="ident" id="2776180">nil</span><span class="op" id="2776183">,</span>&nbsp;<span class="ident" id="2776185">errors</span><span class="op" id="2776191">.</span><span class="ident" id="2776192">New</span><span class="op" id="2776195">(</span><span class="string" id="2776196">&#34;Time.MarshalBinary:&nbsp;zone&nbsp;offset&nbsp;has&nbsp;fractional&nbsp;minute&#34;</span><span class="op" id="2776251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776259">offset</span>&nbsp;<span class="op" id="2776266">/=</span>&nbsp;<span class="num" id="2776269">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776274">if</span>&nbsp;<span class="ident" id="2776277">offset</span>&nbsp;<span class="op" id="2776284">&lt;</span>&nbsp;<span class="op" id="2776286">-</span><span class="num" id="2776287">32768</span>&nbsp;<span class="op" id="2776293">||</span>&nbsp;<span class="ident" id="2776296">offset</span>&nbsp;<span class="op" id="2776303">==</span>&nbsp;<span class="op" id="2776306">-</span><span class="num" id="2776307">1</span>&nbsp;<span class="op" id="2776309">||</span>&nbsp;<span class="ident" id="2776312">offset</span>&nbsp;<span class="op" id="2776319">&gt;</span>&nbsp;<span class="num" id="2776321">32767</span>&nbsp;<span class="op" id="2776327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776332">return</span>&nbsp;<span class="ident" id="2776339">nil</span><span class="op" id="2776342">,</span>&nbsp;<span class="ident" id="2776344">errors</span><span class="op" id="2776350">.</span><span class="ident" id="2776351">New</span><span class="op" id="2776354">(</span><span class="string" id="2776355">&#34;Time.MarshalBinary:&nbsp;unexpected&nbsp;zone&nbsp;offset&#34;</span><span class="op" id="2776399">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776407">offsetMin</span>&nbsp;<span class="op" id="2776417">=</span>&nbsp;<span class="builtintype" id="2776419">int16</span><span class="op" id="2776424">(</span><span class="ident" id="2776425">offset</span><span class="op" id="2776431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776438">enc</span>&nbsp;<span class="op" id="2776442">:=</span>&nbsp;<span class="op" id="2776445">[</span><span class="op" id="2776446">]</span><span class="builtintype" id="2776447">byte</span><span class="op" id="2776451">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776455">timeBinaryVersion</span><span class="op" id="2776472">,</span>&nbsp;<span class="comment" id="2776474">//&nbsp;byte&nbsp;0&nbsp;:&nbsp;version</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776496">byte</span><span class="op" id="2776500">(</span><span class="ident" id="2776501">t</span><span class="op" id="2776502">.</span><span class="ident" id="2776503">sec</span>&nbsp;<span class="op" id="2776507">&gt;&gt;</span>&nbsp;<span class="num" id="2776510">56</span><span class="op" id="2776512">)</span><span class="op" id="2776513">,</span>&nbsp;<span class="comment" id="2776515">//&nbsp;bytes&nbsp;1-8:&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776539">byte</span><span class="op" id="2776543">(</span><span class="ident" id="2776544">t</span><span class="op" id="2776545">.</span><span class="ident" id="2776546">sec</span>&nbsp;<span class="op" id="2776550">&gt;&gt;</span>&nbsp;<span class="num" id="2776553">48</span><span class="op" id="2776555">)</span><span class="op" id="2776556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776560">byte</span><span class="op" id="2776564">(</span><span class="ident" id="2776565">t</span><span class="op" id="2776566">.</span><span class="ident" id="2776567">sec</span>&nbsp;<span class="op" id="2776571">&gt;&gt;</span>&nbsp;<span class="num" id="2776574">40</span><span class="op" id="2776576">)</span><span class="op" id="2776577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776581">byte</span><span class="op" id="2776585">(</span><span class="ident" id="2776586">t</span><span class="op" id="2776587">.</span><span class="ident" id="2776588">sec</span>&nbsp;<span class="op" id="2776592">&gt;&gt;</span>&nbsp;<span class="num" id="2776595">32</span><span class="op" id="2776597">)</span><span class="op" id="2776598">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776602">byte</span><span class="op" id="2776606">(</span><span class="ident" id="2776607">t</span><span class="op" id="2776608">.</span><span class="ident" id="2776609">sec</span>&nbsp;<span class="op" id="2776613">&gt;&gt;</span>&nbsp;<span class="num" id="2776616">24</span><span class="op" id="2776618">)</span><span class="op" id="2776619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776623">byte</span><span class="op" id="2776627">(</span><span class="ident" id="2776628">t</span><span class="op" id="2776629">.</span><span class="ident" id="2776630">sec</span>&nbsp;<span class="op" id="2776634">&gt;&gt;</span>&nbsp;<span class="num" id="2776637">16</span><span class="op" id="2776639">)</span><span class="op" id="2776640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776644">byte</span><span class="op" id="2776648">(</span><span class="ident" id="2776649">t</span><span class="op" id="2776650">.</span><span class="ident" id="2776651">sec</span>&nbsp;<span class="op" id="2776655">&gt;&gt;</span>&nbsp;<span class="num" id="2776658">8</span><span class="op" id="2776659">)</span><span class="op" id="2776660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776664">byte</span><span class="op" id="2776668">(</span><span class="ident" id="2776669">t</span><span class="op" id="2776670">.</span><span class="ident" id="2776671">sec</span><span class="op" id="2776674">)</span><span class="op" id="2776675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776679">byte</span><span class="op" id="2776683">(</span><span class="ident" id="2776684">t</span><span class="op" id="2776685">.</span><span class="ident" id="2776686">nsec</span>&nbsp;<span class="op" id="2776691">&gt;&gt;</span>&nbsp;<span class="num" id="2776694">24</span><span class="op" id="2776696">)</span><span class="op" id="2776697">,</span>&nbsp;<span class="comment" id="2776699">//&nbsp;bytes&nbsp;9-12:&nbsp;nanoseconds</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776728">byte</span><span class="op" id="2776732">(</span><span class="ident" id="2776733">t</span><span class="op" id="2776734">.</span><span class="ident" id="2776735">nsec</span>&nbsp;<span class="op" id="2776740">&gt;&gt;</span>&nbsp;<span class="num" id="2776743">16</span><span class="op" id="2776745">)</span><span class="op" id="2776746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776750">byte</span><span class="op" id="2776754">(</span><span class="ident" id="2776755">t</span><span class="op" id="2776756">.</span><span class="ident" id="2776757">nsec</span>&nbsp;<span class="op" id="2776762">&gt;&gt;</span>&nbsp;<span class="num" id="2776765">8</span><span class="op" id="2776766">)</span><span class="op" id="2776767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776771">byte</span><span class="op" id="2776775">(</span><span class="ident" id="2776776">t</span><span class="op" id="2776777">.</span><span class="ident" id="2776778">nsec</span><span class="op" id="2776782">)</span><span class="op" id="2776783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776787">byte</span><span class="op" id="2776791">(</span><span class="ident" id="2776792">offsetMin</span>&nbsp;<span class="op" id="2776802">&gt;&gt;</span>&nbsp;<span class="num" id="2776805">8</span><span class="op" id="2776806">)</span><span class="op" id="2776807">,</span>&nbsp;<span class="comment" id="2776809">//&nbsp;bytes&nbsp;13-14:&nbsp;zone&nbsp;offset&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2776850">byte</span><span class="op" id="2776854">(</span><span class="ident" id="2776855">offsetMin</span><span class="op" id="2776864">)</span><span class="op" id="2776865">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776872">return</span>&nbsp;<span class="ident" id="2776879">enc</span><span class="op" id="2776882">,</span>&nbsp;<span class="ident" id="2776884">nil</span><br>
<span class="lineno"></span><span class="op" id="2776888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="comment" id="2776891">//&nbsp;UnmarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2776963">func</span>&nbsp;<span class="op" id="2776968">(</span><span class="ident" id="2776969">t</span>&nbsp;<span class="op" id="2776971">*</span><span class="ident" id="2776972">Time</span><span class="op" id="2776976">)</span>&nbsp;<span class="ident" id="2776978">UnmarshalBinary</span><span class="op" id="2776993">(</span><span class="ident" id="2776994">data</span>&nbsp;<span class="op" id="2776999">[</span><span class="op" id="2777000">]</span><span class="builtintype" id="2777001">byte</span><span class="op" id="2777005">)</span>&nbsp;<span class="builtintype" id="2777007">error</span>&nbsp;<span class="op" id="2777013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777016">buf</span>&nbsp;<span class="op" id="2777020">:=</span>&nbsp;<span class="ident" id="2777023">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777029">if</span>&nbsp;<span class="builtinfunc" id="2777032">len</span><span class="op" id="2777035">(</span><span class="ident" id="2777036">buf</span><span class="op" id="2777039">)</span>&nbsp;<span class="op" id="2777041">==</span>&nbsp;<span class="num" id="2777044">0</span>&nbsp;<span class="op" id="2777046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777050">return</span>&nbsp;<span class="ident" id="2777057">errors</span><span class="op" id="2777063">.</span><span class="ident" id="2777064">New</span><span class="op" id="2777067">(</span><span class="string" id="2777068">&#34;Time.UnmarshalBinary:&nbsp;no&nbsp;data&#34;</span><span class="op" id="2777099">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777106">if</span>&nbsp;<span class="ident" id="2777109">buf</span><span class="op" id="2777112">[</span><span class="num" id="2777113">0</span><span class="op" id="2777114">]</span>&nbsp;<span class="op" id="2777116">!=</span>&nbsp;<span class="ident" id="2777119">timeBinaryVersion</span>&nbsp;<span class="op" id="2777137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777141">return</span>&nbsp;<span class="ident" id="2777148">errors</span><span class="op" id="2777154">.</span><span class="ident" id="2777155">New</span><span class="op" id="2777158">(</span><span class="string" id="2777159">&#34;Time.UnmarshalBinary:&nbsp;unsupported&nbsp;version&#34;</span><span class="op" id="2777202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777205">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777209">if</span>&nbsp;<span class="builtinfunc" id="2777212">len</span><span class="op" id="2777215">(</span><span class="ident" id="2777216">buf</span><span class="op" id="2777219">)</span>&nbsp;<span class="op" id="2777221">!=</span>&nbsp;<span class="comment" id="2777224">/*version*/</span>&nbsp;<span class="num" id="2777236">1</span><span class="op" id="2777237">+</span>&nbsp;<span class="comment" id="2777239">/*sec*/</span>&nbsp;<span class="num" id="2777247">8</span><span class="op" id="2777248">+</span>&nbsp;<span class="comment" id="2777250">/*nsec*/</span>&nbsp;<span class="num" id="2777259">4</span><span class="op" id="2777260">+</span>&nbsp;<span class="comment" id="2777262">/*zone&nbsp;offset*/</span>&nbsp;<span class="num" id="2777278">2</span>&nbsp;<span class="op" id="2777280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777284">return</span>&nbsp;<span class="ident" id="2777291">errors</span><span class="op" id="2777297">.</span><span class="ident" id="2777298">New</span><span class="op" id="2777301">(</span><span class="string" id="2777302">&#34;Time.UnmarshalBinary:&nbsp;invalid&nbsp;length&#34;</span><span class="op" id="2777340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777347">buf</span>&nbsp;<span class="op" id="2777351">=</span>&nbsp;<span class="ident" id="2777353">buf</span><span class="op" id="2777356">[</span><span class="num" id="2777357">1</span><span class="op" id="2777358">:</span><span class="op" id="2777359">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777362">t</span><span class="op" id="2777363">.</span><span class="ident" id="2777364">sec</span>&nbsp;<span class="op" id="2777368">=</span>&nbsp;<span class="ident" id="2777370">int64</span><span class="op" id="2777375">(</span><span class="ident" id="2777376">buf</span><span class="op" id="2777379">[</span><span class="num" id="2777380">7</span><span class="op" id="2777381">]</span><span class="op" id="2777382">)</span>&nbsp;<span class="op" id="2777384">|</span>&nbsp;<span class="ident" id="2777386">int64</span><span class="op" id="2777391">(</span><span class="ident" id="2777392">buf</span><span class="op" id="2777395">[</span><span class="num" id="2777396">6</span><span class="op" id="2777397">]</span><span class="op" id="2777398">)</span><span class="op" id="2777399">&lt;&lt;</span><span class="num" id="2777401">8</span>&nbsp;<span class="op" id="2777403">|</span>&nbsp;<span class="ident" id="2777405">int64</span><span class="op" id="2777410">(</span><span class="ident" id="2777411">buf</span><span class="op" id="2777414">[</span><span class="num" id="2777415">5</span><span class="op" id="2777416">]</span><span class="op" id="2777417">)</span><span class="op" id="2777418">&lt;&lt;</span><span class="num" id="2777420">16</span>&nbsp;<span class="op" id="2777423">|</span>&nbsp;<span class="ident" id="2777425">int64</span><span class="op" id="2777430">(</span><span class="ident" id="2777431">buf</span><span class="op" id="2777434">[</span><span class="num" id="2777435">4</span><span class="op" id="2777436">]</span><span class="op" id="2777437">)</span><span class="op" id="2777438">&lt;&lt;</span><span class="num" id="2777440">24</span>&nbsp;<span class="op" id="2777443">|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777447">int64</span><span class="op" id="2777452">(</span><span class="ident" id="2777453">buf</span><span class="op" id="2777456">[</span><span class="num" id="2777457">3</span><span class="op" id="2777458">]</span><span class="op" id="2777459">)</span><span class="op" id="2777460">&lt;&lt;</span><span class="num" id="2777462">32</span>&nbsp;<span class="op" id="2777465">|</span>&nbsp;<span class="ident" id="2777467">int64</span><span class="op" id="2777472">(</span><span class="ident" id="2777473">buf</span><span class="op" id="2777476">[</span><span class="num" id="2777477">2</span><span class="op" id="2777478">]</span><span class="op" id="2777479">)</span><span class="op" id="2777480">&lt;&lt;</span><span class="num" id="2777482">40</span>&nbsp;<span class="op" id="2777485">|</span>&nbsp;<span class="ident" id="2777487">int64</span><span class="op" id="2777492">(</span><span class="ident" id="2777493">buf</span><span class="op" id="2777496">[</span><span class="num" id="2777497">1</span><span class="op" id="2777498">]</span><span class="op" id="2777499">)</span><span class="op" id="2777500">&lt;&lt;</span><span class="num" id="2777502">48</span>&nbsp;<span class="op" id="2777505">|</span>&nbsp;<span class="ident" id="2777507">int64</span><span class="op" id="2777512">(</span><span class="ident" id="2777513">buf</span><span class="op" id="2777516">[</span><span class="num" id="2777517">0</span><span class="op" id="2777518">]</span><span class="op" id="2777519">)</span><span class="op" id="2777520">&lt;&lt;</span><span class="num" id="2777522">56</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777527">buf</span>&nbsp;<span class="op" id="2777531">=</span>&nbsp;<span class="ident" id="2777533">buf</span><span class="op" id="2777536">[</span><span class="num" id="2777537">8</span><span class="op" id="2777538">:</span><span class="op" id="2777539">]</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777542">t</span><span class="op" id="2777543">.</span><span class="ident" id="2777544">nsec</span>&nbsp;<span class="op" id="2777549">=</span>&nbsp;<span class="builtintype" id="2777551">int32</span><span class="op" id="2777556">(</span><span class="ident" id="2777557">buf</span><span class="op" id="2777560">[</span><span class="num" id="2777561">3</span><span class="op" id="2777562">]</span><span class="op" id="2777563">)</span>&nbsp;<span class="op" id="2777565">|</span>&nbsp;<span class="builtintype" id="2777567">int32</span><span class="op" id="2777572">(</span><span class="ident" id="2777573">buf</span><span class="op" id="2777576">[</span><span class="num" id="2777577">2</span><span class="op" id="2777578">]</span><span class="op" id="2777579">)</span><span class="op" id="2777580">&lt;&lt;</span><span class="num" id="2777582">8</span>&nbsp;<span class="op" id="2777584">|</span>&nbsp;<span class="builtintype" id="2777586">int32</span><span class="op" id="2777591">(</span><span class="ident" id="2777592">buf</span><span class="op" id="2777595">[</span><span class="num" id="2777596">1</span><span class="op" id="2777597">]</span><span class="op" id="2777598">)</span><span class="op" id="2777599">&lt;&lt;</span><span class="num" id="2777601">16</span>&nbsp;<span class="op" id="2777604">|</span>&nbsp;<span class="builtintype" id="2777606">int32</span><span class="op" id="2777611">(</span><span class="ident" id="2777612">buf</span><span class="op" id="2777615">[</span><span class="num" id="2777616">0</span><span class="op" id="2777617">]</span><span class="op" id="2777618">)</span><span class="op" id="2777619">&lt;&lt;</span><span class="num" id="2777621">24</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777626">buf</span>&nbsp;<span class="op" id="2777630">=</span>&nbsp;<span class="ident" id="2777632">buf</span><span class="op" id="2777635">[</span><span class="num" id="2777636">4</span><span class="op" id="2777637">:</span><span class="op" id="2777638">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777641">offset</span>&nbsp;<span class="op" id="2777648">:=</span>&nbsp;<span class="builtintype" id="2777651">int</span><span class="op" id="2777654">(</span><span class="builtintype" id="2777655">int16</span><span class="op" id="2777660">(</span><span class="ident" id="2777661">buf</span><span class="op" id="2777664">[</span><span class="num" id="2777665">1</span><span class="op" id="2777666">]</span><span class="op" id="2777667">)</span><span class="op" id="2777668">|</span><span class="builtintype" id="2777669">int16</span><span class="op" id="2777674">(</span><span class="ident" id="2777675">buf</span><span class="op" id="2777678">[</span><span class="num" id="2777679">0</span><span class="op" id="2777680">]</span><span class="op" id="2777681">)</span><span class="op" id="2777682">&lt;&lt;</span><span class="num" id="2777684">8</span><span class="op" id="2777685">)</span>&nbsp;<span class="op" id="2777687">*</span>&nbsp;<span class="num" id="2777689">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777694">if</span>&nbsp;<span class="ident" id="2777697">offset</span>&nbsp;<span class="op" id="2777704">==</span>&nbsp;<span class="op" id="2777707">-</span><span class="num" id="2777708">1</span><span class="op" id="2777709">*</span><span class="num" id="2777710">60</span>&nbsp;<span class="op" id="2777713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777717">t</span><span class="op" id="2777718">.</span><span class="ident" id="2777719">loc</span>&nbsp;<span class="op" id="2777723">=</span>&nbsp;<span class="op" id="2777725">&amp;</span><span class="ident" id="2777726">utcLoc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777734">}</span>&nbsp;<span class="keyword" id="2777736">else</span>&nbsp;<span class="keyword" id="2777741">if</span>&nbsp;<span class="ident" id="2777744">_</span><span class="op" id="2777745">,</span>&nbsp;<span class="ident" id="2777747">localoff</span><span class="op" id="2777755">,</span>&nbsp;<span class="ident" id="2777757">_</span><span class="op" id="2777758">,</span>&nbsp;<span class="ident" id="2777760">_</span><span class="op" id="2777761">,</span>&nbsp;<span class="ident" id="2777763">_</span>&nbsp;<span class="op" id="2777765">:=</span>&nbsp;<span class="ident" id="2777768">Local</span><span class="op" id="2777773">.</span><span class="ident" id="2777774">lookup</span><span class="op" id="2777780">(</span><span class="ident" id="2777781">t</span><span class="op" id="2777782">.</span><span class="ident" id="2777783">sec</span>&nbsp;<span class="op" id="2777787">+</span>&nbsp;<span class="ident" id="2777789">internalToUnix</span><span class="op" id="2777803">)</span><span class="op" id="2777804">;</span>&nbsp;<span class="ident" id="2777806">offset</span>&nbsp;<span class="op" id="2777813">==</span>&nbsp;<span class="ident" id="2777816">localoff</span>&nbsp;<span class="op" id="2777825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777829">t</span><span class="op" id="2777830">.</span><span class="ident" id="2777831">loc</span>&nbsp;<span class="op" id="2777835">=</span>&nbsp;<span class="ident" id="2777837">Local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777844">}</span>&nbsp;<span class="keyword" id="2777846">else</span>&nbsp;<span class="op" id="2777851">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777855">t</span><span class="op" id="2777856">.</span><span class="ident" id="2777857">loc</span>&nbsp;<span class="op" id="2777861">=</span>&nbsp;<span class="ident" id="2777863">FixedZone</span><span class="op" id="2777872">(</span><span class="string" id="2777873">&#34;&#34;</span><span class="op" id="2777875">,</span>&nbsp;<span class="ident" id="2777877">offset</span><span class="op" id="2777883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777890">return</span>&nbsp;<span class="ident" id="2777897">nil</span><br>
<span class="lineno"></span><span class="op" id="2777901">}</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="2777904">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;GobEncoder,&nbsp;GobDecoder,&nbsp;MarshalJSON,&nbsp;UnmarshalJSON&nbsp;in&nbsp;Go&nbsp;2.</span><br>
<span class="lineno"></span><span class="comment" id="2777985">//&nbsp;The&nbsp;same&nbsp;semantics&nbsp;will&nbsp;be&nbsp;provided&nbsp;by&nbsp;the&nbsp;generic&nbsp;MarshalBinary,&nbsp;MarshalText,</span><br>
<span class="lineno"></span><span class="comment" id="2778067">//&nbsp;UnmarshalBinary,&nbsp;UnmarshalText.</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span><span class="comment" id="2778103">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2778157">func</span>&nbsp;<span class="op" id="2778162">(</span><span class="ident" id="2778163">t</span>&nbsp;<span class="ident" id="2778165">Time</span><span class="op" id="2778169">)</span>&nbsp;<span class="ident" id="2778171">GobEncode</span><span class="op" id="2778180">(</span><span class="op" id="2778181">)</span>&nbsp;<span class="op" id="2778183">(</span><span class="op" id="2778184">[</span><span class="op" id="2778185">]</span><span class="builtintype" id="2778186">byte</span><span class="op" id="2778190">,</span>&nbsp;<span class="builtintype" id="2778192">error</span><span class="op" id="2778197">)</span>&nbsp;<span class="op" id="2778199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778202">return</span>&nbsp;<span class="ident" id="2778209">t</span><span class="op" id="2778210">.</span><span class="ident" id="2778211">MarshalBinary</span><span class="op" id="2778224">(</span><span class="op" id="2778225">)</span><br>
<span class="lineno"></span><span class="op" id="2778227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="comment" id="2778230">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2778284">func</span>&nbsp;<span class="op" id="2778289">(</span><span class="ident" id="2778290">t</span>&nbsp;<span class="op" id="2778292">*</span><span class="ident" id="2778293">Time</span><span class="op" id="2778297">)</span>&nbsp;<span class="ident" id="2778299">GobDecode</span><span class="op" id="2778308">(</span><span class="ident" id="2778309">data</span>&nbsp;<span class="op" id="2778314">[</span><span class="op" id="2778315">]</span><span class="builtintype" id="2778316">byte</span><span class="op" id="2778320">)</span>&nbsp;<span class="builtintype" id="2778322">error</span>&nbsp;<span class="op" id="2778328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778331">return</span>&nbsp;<span class="ident" id="2778338">t</span><span class="op" id="2778339">.</span><span class="ident" id="2778340">UnmarshalBinary</span><span class="op" id="2778355">(</span><span class="ident" id="2778356">data</span><span class="op" id="2778360">)</span><br>
<span class="lineno"></span><span class="op" id="2778362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span><span class="comment" id="2778365">//&nbsp;MarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Marshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2778421">//&nbsp;The&nbsp;time&nbsp;is&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2778516">func</span>&nbsp;<span class="op" id="2778521">(</span><span class="ident" id="2778522">t</span>&nbsp;<span class="ident" id="2778524">Time</span><span class="op" id="2778528">)</span>&nbsp;<span class="ident" id="2778530">MarshalJSON</span><span class="op" id="2778541">(</span><span class="op" id="2778542">)</span>&nbsp;<span class="op" id="2778544">(</span><span class="op" id="2778545">[</span><span class="op" id="2778546">]</span><span class="builtintype" id="2778547">byte</span><span class="op" id="2778551">,</span>&nbsp;<span class="builtintype" id="2778553">error</span><span class="op" id="2778558">)</span>&nbsp;<span class="op" id="2778560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778563">if</span>&nbsp;<span class="ident" id="2778566">y</span>&nbsp;<span class="op" id="2778568">:=</span>&nbsp;<span class="ident" id="2778571">t</span><span class="op" id="2778572">.</span><span class="ident" id="2778573">Year</span><span class="op" id="2778577">(</span><span class="op" id="2778578">)</span><span class="op" id="2778579">;</span>&nbsp;<span class="ident" id="2778581">y</span>&nbsp;<span class="op" id="2778583">&lt;</span>&nbsp;<span class="num" id="2778585">0</span>&nbsp;<span class="op" id="2778587">||</span>&nbsp;<span class="ident" id="2778590">y</span>&nbsp;<span class="op" id="2778592">&gt;=</span>&nbsp;<span class="num" id="2778595">10000</span>&nbsp;<span class="op" id="2778601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2778605">//&nbsp;RFC&nbsp;3339&nbsp;is&nbsp;clear&nbsp;that&nbsp;years&nbsp;are&nbsp;4&nbsp;digits&nbsp;exactly.</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2778661">//&nbsp;See&nbsp;golang.org/issue/4556#c15&nbsp;for&nbsp;more&nbsp;discussion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778717">return</span>&nbsp;<span class="ident" id="2778724">nil</span><span class="op" id="2778727">,</span>&nbsp;<span class="ident" id="2778729">errors</span><span class="op" id="2778735">.</span><span class="ident" id="2778736">New</span><span class="op" id="2778739">(</span><span class="string" id="2778740">&#34;Time.MarshalJSON:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2778790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2778793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778796">return</span>&nbsp;<span class="op" id="2778803">[</span><span class="op" id="2778804">]</span><span class="builtintype" id="2778805">byte</span><span class="op" id="2778809">(</span><span class="ident" id="2778810">t</span><span class="op" id="2778811">.</span><span class="ident" id="2778812">Format</span><span class="op" id="2778818">(</span><span class="string" id="2778819">`&#34;`</span>&nbsp;<span class="op" id="2778823">+</span>&nbsp;<span class="ident" id="2778825">RFC3339Nano</span>&nbsp;<span class="op" id="2778837">+</span>&nbsp;<span class="string" id="2778839">`&#34;`</span><span class="op" id="2778842">)</span><span class="op" id="2778843">)</span><span class="op" id="2778844">,</span>&nbsp;<span class="ident" id="2778846">nil</span><br>
<span class="lineno"></span><span class="op" id="2778850">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="comment" id="2778853">//&nbsp;UnmarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Unmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2778913">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="2778979">func</span>&nbsp;<span class="op" id="2778984">(</span><span class="ident" id="2778985">t</span>&nbsp;<span class="op" id="2778987">*</span><span class="ident" id="2778988">Time</span><span class="op" id="2778992">)</span>&nbsp;<span class="ident" id="2778994">UnmarshalJSON</span><span class="op" id="2779007">(</span><span class="ident" id="2779008">data</span>&nbsp;<span class="op" id="2779013">[</span><span class="op" id="2779014">]</span><span class="builtintype" id="2779015">byte</span><span class="op" id="2779019">)</span>&nbsp;<span class="op" id="2779021">(</span><span class="ident" id="2779022">err</span>&nbsp;<span class="builtintype" id="2779026">error</span><span class="op" id="2779031">)</span>&nbsp;<span class="op" id="2779033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779036">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779092">*</span><span class="ident" id="2779093">t</span><span class="op" id="2779094">,</span>&nbsp;<span class="ident" id="2779096">err</span>&nbsp;<span class="op" id="2779100">=</span>&nbsp;<span class="ident" id="2779102">Parse</span><span class="op" id="2779107">(</span><span class="string" id="2779108">`&#34;`</span><span class="op" id="2779111">+</span><span class="ident" id="2779112">RFC3339</span><span class="op" id="2779119">+</span><span class="string" id="2779120">`&#34;`</span><span class="op" id="2779123">,</span>&nbsp;<span class="builtintype" id="2779125">string</span><span class="op" id="2779131">(</span><span class="ident" id="2779132">data</span><span class="op" id="2779136">)</span><span class="op" id="2779137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779140">return</span><br>
<span class="lineno"></span><span class="op" id="2779147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2779150">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno">950</span><span class="comment" id="2779214">//&nbsp;The&nbsp;time&nbsp;is&nbsp;formatted&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2779303">func</span>&nbsp;<span class="op" id="2779308">(</span><span class="ident" id="2779309">t</span>&nbsp;<span class="ident" id="2779311">Time</span><span class="op" id="2779315">)</span>&nbsp;<span class="ident" id="2779317">MarshalText</span><span class="op" id="2779328">(</span><span class="op" id="2779329">)</span>&nbsp;<span class="op" id="2779331">(</span><span class="op" id="2779332">[</span><span class="op" id="2779333">]</span><span class="builtintype" id="2779334">byte</span><span class="op" id="2779338">,</span>&nbsp;<span class="builtintype" id="2779340">error</span><span class="op" id="2779345">)</span>&nbsp;<span class="op" id="2779347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779350">if</span>&nbsp;<span class="ident" id="2779353">y</span>&nbsp;<span class="op" id="2779355">:=</span>&nbsp;<span class="ident" id="2779358">t</span><span class="op" id="2779359">.</span><span class="ident" id="2779360">Year</span><span class="op" id="2779364">(</span><span class="op" id="2779365">)</span><span class="op" id="2779366">;</span>&nbsp;<span class="ident" id="2779368">y</span>&nbsp;<span class="op" id="2779370">&lt;</span>&nbsp;<span class="num" id="2779372">0</span>&nbsp;<span class="op" id="2779374">||</span>&nbsp;<span class="ident" id="2779377">y</span>&nbsp;<span class="op" id="2779379">&gt;=</span>&nbsp;<span class="num" id="2779382">10000</span>&nbsp;<span class="op" id="2779388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779392">return</span>&nbsp;<span class="ident" id="2779399">nil</span><span class="op" id="2779402">,</span>&nbsp;<span class="ident" id="2779404">errors</span><span class="op" id="2779410">.</span><span class="ident" id="2779411">New</span><span class="op" id="2779414">(</span><span class="string" id="2779415">&#34;Time.MarshalText:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2779465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779468">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779471">return</span>&nbsp;<span class="op" id="2779478">[</span><span class="op" id="2779479">]</span><span class="builtintype" id="2779480">byte</span><span class="op" id="2779484">(</span><span class="ident" id="2779485">t</span><span class="op" id="2779486">.</span><span class="ident" id="2779487">Format</span><span class="op" id="2779493">(</span><span class="ident" id="2779494">RFC3339Nano</span><span class="op" id="2779505">)</span><span class="op" id="2779506">)</span><span class="op" id="2779507">,</span>&nbsp;<span class="ident" id="2779509">nil</span><br>
<span class="lineno"></span><span class="op" id="2779513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2779516">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2779584">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno">960</span><span class="keyword" id="2779634">func</span>&nbsp;<span class="op" id="2779639">(</span><span class="ident" id="2779640">t</span>&nbsp;<span class="op" id="2779642">*</span><span class="ident" id="2779643">Time</span><span class="op" id="2779647">)</span>&nbsp;<span class="ident" id="2779649">UnmarshalText</span><span class="op" id="2779662">(</span><span class="ident" id="2779663">data</span>&nbsp;<span class="op" id="2779668">[</span><span class="op" id="2779669">]</span><span class="builtintype" id="2779670">byte</span><span class="op" id="2779674">)</span>&nbsp;<span class="op" id="2779676">(</span><span class="ident" id="2779677">err</span>&nbsp;<span class="builtintype" id="2779681">error</span><span class="op" id="2779686">)</span>&nbsp;<span class="op" id="2779688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779691">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779747">*</span><span class="ident" id="2779748">t</span><span class="op" id="2779749">,</span>&nbsp;<span class="ident" id="2779751">err</span>&nbsp;<span class="op" id="2779755">=</span>&nbsp;<span class="ident" id="2779757">Parse</span><span class="op" id="2779762">(</span><span class="ident" id="2779763">RFC3339</span><span class="op" id="2779770">,</span>&nbsp;<span class="builtintype" id="2779772">string</span><span class="op" id="2779778">(</span><span class="ident" id="2779779">data</span><span class="op" id="2779783">)</span><span class="op" id="2779784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779787">return</span><br>
<span class="lineno"></span><span class="op" id="2779794">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="comment" id="2779797">//&nbsp;Unix&nbsp;returns&nbsp;the&nbsp;local&nbsp;Time&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;Unix&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2779866">//&nbsp;sec&nbsp;seconds&nbsp;and&nbsp;nsec&nbsp;nanoseconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2779929">//&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;pass&nbsp;nsec&nbsp;outside&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2779991">func</span>&nbsp;<span class="ident" id="2779996">Unix</span><span class="op" id="2780000">(</span><span class="ident" id="2780001">sec</span>&nbsp;<span class="ident" id="2780005">int64</span><span class="op" id="2780010">,</span>&nbsp;<span class="ident" id="2780012">nsec</span>&nbsp;<span class="ident" id="2780017">int64</span><span class="op" id="2780022">)</span>&nbsp;<span class="ident" id="2780024">Time</span>&nbsp;<span class="op" id="2780029">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780032">if</span>&nbsp;<span class="ident" id="2780035">nsec</span>&nbsp;<span class="op" id="2780040">&lt;</span>&nbsp;<span class="num" id="2780042">0</span>&nbsp;<span class="op" id="2780044">||</span>&nbsp;<span class="ident" id="2780047">nsec</span>&nbsp;<span class="op" id="2780052">&gt;=</span>&nbsp;<span class="num" id="2780055">1e9</span>&nbsp;<span class="op" id="2780059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780063">n</span>&nbsp;<span class="op" id="2780065">:=</span>&nbsp;<span class="ident" id="2780068">nsec</span>&nbsp;<span class="op" id="2780073">/</span>&nbsp;<span class="num" id="2780075">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780081">sec</span>&nbsp;<span class="op" id="2780085">+=</span>&nbsp;<span class="ident" id="2780088">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780092">nsec</span>&nbsp;<span class="op" id="2780097">-=</span>&nbsp;<span class="ident" id="2780100">n</span>&nbsp;<span class="op" id="2780102">*</span>&nbsp;<span class="num" id="2780104">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780110">if</span>&nbsp;<span class="ident" id="2780113">nsec</span>&nbsp;<span class="op" id="2780118">&lt;</span>&nbsp;<span class="num" id="2780120">0</span>&nbsp;<span class="op" id="2780122">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780127">nsec</span>&nbsp;<span class="op" id="2780132">+=</span>&nbsp;<span class="num" id="2780135">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780142">sec</span><span class="op" id="2780145">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780156">return</span>&nbsp;<span class="ident" id="2780163">Time</span><span class="op" id="2780167">{</span><span class="ident" id="2780168">sec</span>&nbsp;<span class="op" id="2780172">+</span>&nbsp;<span class="ident" id="2780174">unixToInternal</span><span class="op" id="2780188">,</span>&nbsp;<span class="builtintype" id="2780190">int32</span><span class="op" id="2780195">(</span><span class="ident" id="2780196">nsec</span><span class="op" id="2780200">)</span><span class="op" id="2780201">,</span>&nbsp;<span class="ident" id="2780203">Local</span><span class="op" id="2780208">}</span><br>
<span class="lineno">980</span><span class="op" id="2780210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2780213">func</span>&nbsp;<span class="ident" id="2780218">isLeap</span><span class="op" id="2780224">(</span><span class="ident" id="2780225">year</span>&nbsp;<span class="builtintype" id="2780230">int</span><span class="op" id="2780233">)</span>&nbsp;<span class="builtintype" id="2780235">bool</span>&nbsp;<span class="op" id="2780240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780243">return</span>&nbsp;<span class="ident" id="2780250">year</span><span class="op" id="2780254">%</span><span class="num" id="2780255">4</span>&nbsp;<span class="op" id="2780257">==</span>&nbsp;<span class="num" id="2780260">0</span>&nbsp;<span class="op" id="2780262">&amp;&amp;</span>&nbsp;<span class="op" id="2780265">(</span><span class="ident" id="2780266">year</span><span class="op" id="2780270">%</span><span class="num" id="2780271">100</span>&nbsp;<span class="op" id="2780275">!=</span>&nbsp;<span class="num" id="2780278">0</span>&nbsp;<span class="op" id="2780280">||</span>&nbsp;<span class="ident" id="2780283">year</span><span class="op" id="2780287">%</span><span class="num" id="2780288">400</span>&nbsp;<span class="op" id="2780292">==</span>&nbsp;<span class="num" id="2780295">0</span><span class="op" id="2780296">)</span><br>
<span class="lineno"></span><span class="op" id="2780298">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="2780301">//&nbsp;norm&nbsp;returns&nbsp;nhi,&nbsp;nlo&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2780336">//&nbsp;&nbsp;&nbsp;&nbsphi&nbsp;*&nbsp;base&nbsp;+&nbsp;lo&nbsp;==&nbsp;nhi&nbsp;*&nbsp;base&nbsp;+&nbsp;nlo</span><br>
<span class="lineno"></span><span class="comment" id="2780374">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&lt;=&nbsp;nlo&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span><span class="keyword" id="2780393">func</span>&nbsp;<span class="ident" id="2780398">norm</span><span class="op" id="2780402">(</span><span class="ident" id="2780403">hi</span><span class="op" id="2780405">,</span>&nbsp;<span class="ident" id="2780407">lo</span><span class="op" id="2780409">,</span>&nbsp;<span class="ident" id="2780411">base</span>&nbsp;<span class="builtintype" id="2780416">int</span><span class="op" id="2780419">)</span>&nbsp;<span class="op" id="2780421">(</span><span class="ident" id="2780422">nhi</span><span class="op" id="2780425">,</span>&nbsp;<span class="ident" id="2780427">nlo</span>&nbsp;<span class="builtintype" id="2780431">int</span><span class="op" id="2780434">)</span>&nbsp;<span class="op" id="2780436">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780439">if</span>&nbsp;<span class="ident" id="2780442">lo</span>&nbsp;<span class="op" id="2780445">&lt;</span>&nbsp;<span class="num" id="2780447">0</span>&nbsp;<span class="op" id="2780449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780453">n</span>&nbsp;<span class="op" id="2780455">:=</span>&nbsp;<span class="op" id="2780458">(</span><span class="op" id="2780459">-</span><span class="ident" id="2780460">lo</span><span class="op" id="2780462">-</span><span class="num" id="2780463">1</span><span class="op" id="2780464">)</span><span class="op" id="2780465">/</span><span class="ident" id="2780466">base</span>&nbsp;<span class="op" id="2780471">+</span>&nbsp;<span class="num" id="2780473">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780477">hi</span>&nbsp;<span class="op" id="2780480">-=</span>&nbsp;<span class="ident" id="2780483">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780487">lo</span>&nbsp;<span class="op" id="2780490">+=</span>&nbsp;<span class="ident" id="2780493">n</span>&nbsp;<span class="op" id="2780495">*</span>&nbsp;<span class="ident" id="2780497">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780503">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780506">if</span>&nbsp;<span class="ident" id="2780509">lo</span>&nbsp;<span class="op" id="2780512">&gt;=</span>&nbsp;<span class="ident" id="2780515">base</span>&nbsp;<span class="op" id="2780520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780524">n</span>&nbsp;<span class="op" id="2780526">:=</span>&nbsp;<span class="ident" id="2780529">lo</span>&nbsp;<span class="op" id="2780532">/</span>&nbsp;<span class="ident" id="2780534">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780541">hi</span>&nbsp;<span class="op" id="2780544">+=</span>&nbsp;<span class="ident" id="2780547">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780551">lo</span>&nbsp;<span class="op" id="2780554">-=</span>&nbsp;<span class="ident" id="2780557">n</span>&nbsp;<span class="op" id="2780559">*</span>&nbsp;<span class="ident" id="2780561">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780567">}</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780570">return</span>&nbsp;<span class="ident" id="2780577">hi</span><span class="op" id="2780579">,</span>&nbsp;<span class="ident" id="2780581">lo</span><br>
<span class="lineno"></span><span class="op" id="2780584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2780587">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;Time&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2780629">//&nbsp;&nbsp;&nbsp;&nbspyyyy-mm-dd&nbsp;hh:mm:ss&nbsp;+&nbsp;nsec&nbsp;nanoseconds</span><br>
<span class="lineno">1005</span><span class="comment" id="2780671">//&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;zone&nbsp;for&nbsp;that&nbsp;time&nbsp;in&nbsp;the&nbsp;given&nbsp;location.</span><br>
<span class="lineno"></span><span class="comment" id="2780735">//</span><br>
<span class="lineno"></span><span class="comment" id="2780738">//&nbsp;The&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;min,&nbsp;sec,&nbsp;and&nbsp;nsec&nbsp;values&nbsp;may&nbsp;be&nbsp;outside</span><br>
<span class="lineno"></span><span class="comment" id="2780804">//&nbsp;their&nbsp;usual&nbsp;ranges&nbsp;and&nbsp;will&nbsp;be&nbsp;normalized&nbsp;during&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2780872">//&nbsp;For&nbsp;example,&nbsp;October&nbsp;32&nbsp;converts&nbsp;to&nbsp;November&nbsp;1.</span><br>
<span class="lineno">1010</span><span class="comment" id="2780923">//</span><br>
<span class="lineno"></span><span class="comment" id="2780926">//&nbsp;A&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;transition&nbsp;skips&nbsp;or&nbsp;repeats&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2780988">//&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;United&nbsp;States,&nbsp;March&nbsp;13,&nbsp;2011&nbsp;2:15am&nbsp;never&nbsp;occurred,</span><br>
<span class="lineno"></span><span class="comment" id="2781064">//&nbsp;while&nbsp;November&nbsp;6,&nbsp;2011&nbsp;1:15am&nbsp;occurred&nbsp;twice.&nbsp;&nbsp;In&nbsp;such&nbsp;cases,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2781133">//&nbsp;choice&nbsp;of&nbsp;time&nbsp;zone,&nbsp;and&nbsp;therefore&nbsp;the&nbsp;time,&nbsp;is&nbsp;not&nbsp;well-defined.</span><br>
<span class="lineno">1015</span><span class="comment" id="2781202">//&nbsp;Date&nbsp;returns&nbsp;a&nbsp;time&nbsp;that&nbsp;is&nbsp;correct&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;two&nbsp;zones&nbsp;involved</span><br>
<span class="lineno"></span><span class="comment" id="2781274">//&nbsp;in&nbsp;the&nbsp;transition,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;guarantee&nbsp;which.</span><br>
<span class="lineno"></span><span class="comment" id="2781329">//</span><br>
<span class="lineno"></span><span class="comment" id="2781332">//&nbsp;Date&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2781362">func</span>&nbsp;<span class="ident" id="2781367">Date</span><span class="op" id="2781371">(</span><span class="ident" id="2781372">year</span>&nbsp;<span class="builtintype" id="2781377">int</span><span class="op" id="2781380">,</span>&nbsp;<span class="ident" id="2781382">month</span>&nbsp;<span class="ident" id="2781388">Month</span><span class="op" id="2781393">,</span>&nbsp;<span class="ident" id="2781395">day</span><span class="op" id="2781398">,</span>&nbsp;<span class="ident" id="2781400">hour</span><span class="op" id="2781404">,</span>&nbsp;<span class="ident" id="2781406">min</span><span class="op" id="2781409">,</span>&nbsp;<span class="ident" id="2781411">sec</span><span class="op" id="2781414">,</span>&nbsp;<span class="ident" id="2781416">nsec</span>&nbsp;<span class="builtintype" id="2781421">int</span><span class="op" id="2781424">,</span>&nbsp;<span class="ident" id="2781426">loc</span>&nbsp;<span class="op" id="2781430">*</span><span class="ident" id="2781431">Location</span><span class="op" id="2781439">)</span>&nbsp;<span class="ident" id="2781441">Time</span>&nbsp;<span class="op" id="2781446">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781449">if</span>&nbsp;<span class="ident" id="2781452">loc</span>&nbsp;<span class="op" id="2781456">==</span>&nbsp;<span class="ident" id="2781459">nil</span>&nbsp;<span class="op" id="2781463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781467">panic</span><span class="op" id="2781472">(</span><span class="string" id="2781473">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Date&#34;</span><span class="op" id="2781513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2781520">//&nbsp;Normalize&nbsp;month,&nbsp;overflowing&nbsp;into&nbsp;year.</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781564">m</span>&nbsp;<span class="op" id="2781566">:=</span>&nbsp;<span class="builtintype" id="2781569">int</span><span class="op" id="2781572">(</span><span class="ident" id="2781573">month</span><span class="op" id="2781578">)</span>&nbsp;<span class="op" id="2781580">-</span>&nbsp;<span class="num" id="2781582">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781585">year</span><span class="op" id="2781589">,</span>&nbsp;<span class="ident" id="2781591">m</span>&nbsp;<span class="op" id="2781593">=</span>&nbsp;<span class="ident" id="2781595">norm</span><span class="op" id="2781599">(</span><span class="ident" id="2781600">year</span><span class="op" id="2781604">,</span>&nbsp;<span class="ident" id="2781606">m</span><span class="op" id="2781607">,</span>&nbsp;<span class="num" id="2781609">12</span><span class="op" id="2781611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781614">month</span>&nbsp;<span class="op" id="2781620">=</span>&nbsp;<span class="ident" id="2781622">Month</span><span class="op" id="2781627">(</span><span class="ident" id="2781628">m</span><span class="op" id="2781629">)</span>&nbsp;<span class="op" id="2781631">+</span>&nbsp;<span class="num" id="2781633">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2781637">//&nbsp;Normalize&nbsp;nsec,&nbsp;sec,&nbsp;min,&nbsp;hour,&nbsp;overflowing&nbsp;into&nbsp;day.</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781695">sec</span><span class="op" id="2781698">,</span>&nbsp;<span class="ident" id="2781700">nsec</span>&nbsp;<span class="op" id="2781705">=</span>&nbsp;<span class="ident" id="2781707">norm</span><span class="op" id="2781711">(</span><span class="ident" id="2781712">sec</span><span class="op" id="2781715">,</span>&nbsp;<span class="ident" id="2781717">nsec</span><span class="op" id="2781721">,</span>&nbsp;<span class="num" id="2781723">1e9</span><span class="op" id="2781726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781729">min</span><span class="op" id="2781732">,</span>&nbsp;<span class="ident" id="2781734">sec</span>&nbsp;<span class="op" id="2781738">=</span>&nbsp;<span class="ident" id="2781740">norm</span><span class="op" id="2781744">(</span><span class="ident" id="2781745">min</span><span class="op" id="2781748">,</span>&nbsp;<span class="ident" id="2781750">sec</span><span class="op" id="2781753">,</span>&nbsp;<span class="num" id="2781755">60</span><span class="op" id="2781757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781760">hour</span><span class="op" id="2781764">,</span>&nbsp;<span class="ident" id="2781766">min</span>&nbsp;<span class="op" id="2781770">=</span>&nbsp;<span class="ident" id="2781772">norm</span><span class="op" id="2781776">(</span><span class="ident" id="2781777">hour</span><span class="op" id="2781781">,</span>&nbsp;<span class="ident" id="2781783">min</span><span class="op" id="2781786">,</span>&nbsp;<span class="num" id="2781788">60</span><span class="op" id="2781790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781793">day</span><span class="op" id="2781796">,</span>&nbsp;<span class="ident" id="2781798">hour</span>&nbsp;<span class="op" id="2781803">=</span>&nbsp;<span class="ident" id="2781805">norm</span><span class="op" id="2781809">(</span><span class="ident" id="2781810">day</span><span class="op" id="2781813">,</span>&nbsp;<span class="ident" id="2781815">hour</span><span class="op" id="2781819">,</span>&nbsp;<span class="num" id="2781821">24</span><span class="op" id="2781823">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781827">y</span>&nbsp;<span class="op" id="2781829">:=</span>&nbsp;<span class="ident" id="2781832">uint64</span><span class="op" id="2781838">(</span><span class="ident" id="2781839">int64</span><span class="op" id="2781844">(</span><span class="ident" id="2781845">year</span><span class="op" id="2781849">)</span>&nbsp;<span class="op" id="2781851">-</span>&nbsp;<span class="ident" id="2781853">absoluteZeroYear</span><span class="op" id="2781869">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2781873">//&nbsp;Compute&nbsp;days&nbsp;since&nbsp;the&nbsp;absolute&nbsp;epoch.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2781917">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;from&nbsp;400-year&nbsp;cycles.</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781955">n</span>&nbsp;<span class="op" id="2781957">:=</span>&nbsp;<span class="ident" id="2781960">y</span>&nbsp;<span class="op" id="2781962">/</span>&nbsp;<span class="num" id="2781964">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781969">y</span>&nbsp;<span class="op" id="2781971">-=</span>&nbsp;<span class="num" id="2781974">400</span>&nbsp;<span class="op" id="2781978">*</span>&nbsp;<span class="ident" id="2781980">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781983">d</span>&nbsp;<span class="op" id="2781985">:=</span>&nbsp;<span class="ident" id="2781988">daysPer400Years</span>&nbsp;<span class="op" id="2782004">*</span>&nbsp;<span class="ident" id="2782006">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782010">//&nbsp;Add&nbsp;in&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782038">n</span>&nbsp;<span class="op" id="2782040">=</span>&nbsp;<span class="ident" id="2782042">y</span>&nbsp;<span class="op" id="2782044">/</span>&nbsp;<span class="num" id="2782046">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782051">y</span>&nbsp;<span class="op" id="2782053">-=</span>&nbsp;<span class="num" id="2782056">100</span>&nbsp;<span class="op" id="2782060">*</span>&nbsp;<span class="ident" id="2782062">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782065">d</span>&nbsp;<span class="op" id="2782067">+=</span>&nbsp;<span class="ident" id="2782070">daysPer100Years</span>&nbsp;<span class="op" id="2782086">*</span>&nbsp;<span class="ident" id="2782088">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782092">//&nbsp;Add&nbsp;in&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782118">n</span>&nbsp;<span class="op" id="2782120">=</span>&nbsp;<span class="ident" id="2782122">y</span>&nbsp;<span class="op" id="2782124">/</span>&nbsp;<span class="num" id="2782126">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782129">y</span>&nbsp;<span class="op" id="2782131">-=</span>&nbsp;<span class="num" id="2782134">4</span>&nbsp;<span class="op" id="2782136">*</span>&nbsp;<span class="ident" id="2782138">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782141">d</span>&nbsp;<span class="op" id="2782143">+=</span>&nbsp;<span class="ident" id="2782146">daysPer4Years</span>&nbsp;<span class="op" id="2782160">*</span>&nbsp;<span class="ident" id="2782162">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782166">//&nbsp;Add&nbsp;in&nbsp;non-leap&nbsp;years.</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782193">n</span>&nbsp;<span class="op" id="2782195">=</span>&nbsp;<span class="ident" id="2782197">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782200">d</span>&nbsp;<span class="op" id="2782202">+=</span>&nbsp;<span class="num" id="2782205">365</span>&nbsp;<span class="op" id="2782209">*</span>&nbsp;<span class="ident" id="2782211">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782215">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;this&nbsp;month.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782250">d</span>&nbsp;<span class="op" id="2782252">+=</span>&nbsp;<span class="ident" id="2782255">uint64</span><span class="op" id="2782261">(</span><span class="ident" id="2782262">daysBefore</span><span class="op" id="2782272">[</span><span class="ident" id="2782273">month</span><span class="op" id="2782278">-</span><span class="num" id="2782279">1</span><span class="op" id="2782280">]</span><span class="op" id="2782281">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782284">if</span>&nbsp;<span class="ident" id="2782287">isLeap</span><span class="op" id="2782293">(</span><span class="ident" id="2782294">year</span><span class="op" id="2782298">)</span>&nbsp;<span class="op" id="2782300">&amp;&amp;</span>&nbsp;<span class="ident" id="2782303">month</span>&nbsp;<span class="op" id="2782309">&gt;=</span>&nbsp;<span class="ident" id="2782312">March</span>&nbsp;<span class="op" id="2782318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782322">d</span><span class="op" id="2782323">++</span>&nbsp;<span class="comment" id="2782326">//&nbsp;February&nbsp;29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782346">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;today.</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782376">d</span>&nbsp;<span class="op" id="2782378">+=</span>&nbsp;<span class="ident" id="2782381">uint64</span><span class="op" id="2782387">(</span><span class="ident" id="2782388">day</span>&nbsp;<span class="op" id="2782392">-</span>&nbsp;<span class="num" id="2782394">1</span><span class="op" id="2782395">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782399">//&nbsp;Add&nbsp;in&nbsp;time&nbsp;elapsed&nbsp;today.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782430">abs</span>&nbsp;<span class="op" id="2782434">:=</span>&nbsp;<span class="ident" id="2782437">d</span>&nbsp;<span class="op" id="2782439">*</span>&nbsp;<span class="ident" id="2782441">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782456">abs</span>&nbsp;<span class="op" id="2782460">+=</span>&nbsp;<span class="ident" id="2782463">uint64</span><span class="op" id="2782469">(</span><span class="ident" id="2782470">hour</span><span class="op" id="2782474">*</span><span class="ident" id="2782475">secondsPerHour</span>&nbsp;<span class="op" id="2782490">+</span>&nbsp;<span class="ident" id="2782492">min</span><span class="op" id="2782495">*</span><span class="ident" id="2782496">secondsPerMinute</span>&nbsp;<span class="op" id="2782513">+</span>&nbsp;<span class="ident" id="2782515">sec</span><span class="op" id="2782518">)</span><br>
<span class="lineno">1070</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782522">unix</span>&nbsp;<span class="op" id="2782527">:=</span>&nbsp;<span class="ident" id="2782530">int64</span><span class="op" id="2782535">(</span><span class="ident" id="2782536">abs</span><span class="op" id="2782539">)</span>&nbsp;<span class="op" id="2782541">+</span>&nbsp;<span class="op" id="2782543">(</span><span class="ident" id="2782544">absoluteToInternal</span>&nbsp;<span class="op" id="2782563">+</span>&nbsp;<span class="ident" id="2782565">internalToUnix</span><span class="op" id="2782579">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782583">//&nbsp;Look&nbsp;for&nbsp;zone&nbsp;offset&nbsp;for&nbsp;t,&nbsp;so&nbsp;we&nbsp;can&nbsp;adjust&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782640">//&nbsp;The&nbsp;lookup&nbsp;function&nbsp;expects&nbsp;UTC,&nbsp;so&nbsp;we&nbsp;pass&nbsp;t&nbsp;in&nbsp;the</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782697">//&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;close&nbsp;to&nbsp;a&nbsp;zone&nbsp;transition,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782758">//&nbsp;and&nbsp;then&nbsp;adjust&nbsp;if&nbsp;it&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782788">_</span><span class="op" id="2782789">,</span>&nbsp;<span class="ident" id="2782791">offset</span><span class="op" id="2782797">,</span>&nbsp;<span class="ident" id="2782799">_</span><span class="op" id="2782800">,</span>&nbsp;<span class="ident" id="2782802">start</span><span class="op" id="2782807">,</span>&nbsp;<span class="ident" id="2782809">end</span>&nbsp;<span class="op" id="2782813">:=</span>&nbsp;<span class="ident" id="2782816">loc</span><span class="op" id="2782819">.</span><span class="ident" id="2782820">lookup</span><span class="op" id="2782826">(</span><span class="ident" id="2782827">unix</span><span class="op" id="2782831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782834">if</span>&nbsp;<span class="ident" id="2782837">offset</span>&nbsp;<span class="op" id="2782844">!=</span>&nbsp;<span class="num" id="2782847">0</span>&nbsp;<span class="op" id="2782849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782853">switch</span>&nbsp;<span class="ident" id="2782860">utc</span>&nbsp;<span class="op" id="2782864">:=</span>&nbsp;<span class="ident" id="2782867">unix</span>&nbsp;<span class="op" id="2782872">-</span>&nbsp;<span class="ident" id="2782874">int64</span><span class="op" id="2782879">(</span><span class="ident" id="2782880">offset</span><span class="op" id="2782886">)</span><span class="op" id="2782887">;</span>&nbsp;<span class="op" id="2782889">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782893">case</span>&nbsp;<span class="ident" id="2782898">utc</span>&nbsp;<span class="op" id="2782902">&lt;</span>&nbsp;<span class="ident" id="2782904">start</span><span class="op" id="2782909">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782914">_</span><span class="op" id="2782915">,</span>&nbsp;<span class="ident" id="2782917">offset</span><span class="op" id="2782923">,</span>&nbsp;<span class="ident" id="2782925">_</span><span class="op" id="2782926">,</span>&nbsp;<span class="ident" id="2782928">_</span><span class="op" id="2782929">,</span>&nbsp;<span class="ident" id="2782931">_</span>&nbsp;<span class="op" id="2782933">=</span>&nbsp;<span class="ident" id="2782935">loc</span><span class="op" id="2782938">.</span><span class="ident" id="2782939">lookup</span><span class="op" id="2782945">(</span><span class="ident" id="2782946">start</span>&nbsp;<span class="op" id="2782952">-</span>&nbsp;<span class="num" id="2782954">1</span><span class="op" id="2782955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782959">case</span>&nbsp;<span class="ident" id="2782964">utc</span>&nbsp;<span class="op" id="2782968">&gt;=</span>&nbsp;<span class="ident" id="2782971">end</span><span class="op" id="2782974">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782979">_</span><span class="op" id="2782980">,</span>&nbsp;<span class="ident" id="2782982">offset</span><span class="op" id="2782988">,</span>&nbsp;<span class="ident" id="2782990">_</span><span class="op" id="2782991">,</span>&nbsp;<span class="ident" id="2782993">_</span><span class="op" id="2782994">,</span>&nbsp;<span class="ident" id="2782996">_</span>&nbsp;<span class="op" id="2782998">=</span>&nbsp;<span class="ident" id="2783000">loc</span><span class="op" id="2783003">.</span><span class="ident" id="2783004">lookup</span><span class="op" id="2783010">(</span><span class="ident" id="2783011">end</span><span class="op" id="2783014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783018">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783022">unix</span>&nbsp;<span class="op" id="2783027">-=</span>&nbsp;<span class="ident" id="2783030">int64</span><span class="op" id="2783035">(</span><span class="ident" id="2783036">offset</span><span class="op" id="2783042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783049">return</span>&nbsp;<span class="ident" id="2783056">Time</span><span class="op" id="2783060">{</span><span class="ident" id="2783061">unix</span>&nbsp;<span class="op" id="2783066">+</span>&nbsp;<span class="ident" id="2783068">unixToInternal</span><span class="op" id="2783082">,</span>&nbsp;<span class="builtintype" id="2783084">int32</span><span class="op" id="2783089">(</span><span class="ident" id="2783090">nsec</span><span class="op" id="2783094">)</span><span class="op" id="2783095">,</span>&nbsp;<span class="ident" id="2783097">loc</span><span class="op" id="2783100">}</span><br>
<span class="lineno"></span><span class="op" id="2783102">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="2783105">//&nbsp;Truncate&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;down&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2783197">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Truncate&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2783241">func</span>&nbsp;<span class="op" id="2783246">(</span><span class="ident" id="2783247">t</span>&nbsp;<span class="ident" id="2783249">Time</span><span class="op" id="2783253">)</span>&nbsp;<span class="ident" id="2783255">Truncate</span><span class="op" id="2783263">(</span><span class="ident" id="2783264">d</span>&nbsp;<span class="ident" id="2783266">Duration</span><span class="op" id="2783274">)</span>&nbsp;<span class="ident" id="2783276">Time</span>&nbsp;<span class="op" id="2783281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783284">if</span>&nbsp;<span class="ident" id="2783287">d</span>&nbsp;<span class="op" id="2783289">&lt;=</span>&nbsp;<span class="num" id="2783292">0</span>&nbsp;<span class="op" id="2783294">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783298">return</span>&nbsp;<span class="ident" id="2783305">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783311">_</span><span class="op" id="2783312">,</span>&nbsp;<span class="ident" id="2783314">r</span>&nbsp;<span class="op" id="2783316">:=</span>&nbsp;<span class="ident" id="2783319">div</span><span class="op" id="2783322">(</span><span class="ident" id="2783323">t</span><span class="op" id="2783324">,</span>&nbsp;<span class="ident" id="2783326">d</span><span class="op" id="2783327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783330">return</span>&nbsp;<span class="ident" id="2783337">t</span><span class="op" id="2783338">.</span><span class="ident" id="2783339">Add</span><span class="op" id="2783342">(</span><span class="op" id="2783343">-</span><span class="ident" id="2783344">r</span><span class="op" id="2783345">)</span><br>
<span class="lineno"></span><span class="op" id="2783347">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="2783350">//&nbsp;Round&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;to&nbsp;the&nbsp;nearest&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2783444">//&nbsp;The&nbsp;rounding&nbsp;behavior&nbsp;for&nbsp;halfway&nbsp;values&nbsp;is&nbsp;to&nbsp;round&nbsp;up.</span><br>
<span class="lineno"></span><span class="comment" id="2783504">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Round&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2783545">func</span>&nbsp;<span class="op" id="2783550">(</span><span class="ident" id="2783551">t</span>&nbsp;<span class="ident" id="2783553">Time</span><span class="op" id="2783557">)</span>&nbsp;<span class="ident" id="2783559">Round</span><span class="op" id="2783564">(</span><span class="ident" id="2783565">d</span>&nbsp;<span class="ident" id="2783567">Duration</span><span class="op" id="2783575">)</span>&nbsp;<span class="ident" id="2783577">Time</span>&nbsp;<span class="op" id="2783582">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783585">if</span>&nbsp;<span class="ident" id="2783588">d</span>&nbsp;<span class="op" id="2783590">&lt;=</span>&nbsp;<span class="num" id="2783593">0</span>&nbsp;<span class="op" id="2783595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783599">return</span>&nbsp;<span class="ident" id="2783606">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783612">_</span><span class="op" id="2783613">,</span>&nbsp;<span class="ident" id="2783615">r</span>&nbsp;<span class="op" id="2783617">:=</span>&nbsp;<span class="ident" id="2783620">div</span><span class="op" id="2783623">(</span><span class="ident" id="2783624">t</span><span class="op" id="2783625">,</span>&nbsp;<span class="ident" id="2783627">d</span><span class="op" id="2783628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783631">if</span>&nbsp;<span class="ident" id="2783634">r</span><span class="op" id="2783635">+</span><span class="ident" id="2783636">r</span>&nbsp;<span class="op" id="2783638">&lt;</span>&nbsp;<span class="ident" id="2783640">d</span>&nbsp;<span class="op" id="2783642">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783646">return</span>&nbsp;<span class="ident" id="2783653">t</span><span class="op" id="2783654">.</span><span class="ident" id="2783655">Add</span><span class="op" id="2783658">(</span><span class="op" id="2783659">-</span><span class="ident" id="2783660">r</span><span class="op" id="2783661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783667">return</span>&nbsp;<span class="ident" id="2783674">t</span><span class="op" id="2783675">.</span><span class="ident" id="2783676">Add</span><span class="op" id="2783679">(</span><span class="ident" id="2783680">d</span>&nbsp;<span class="op" id="2783682">-</span>&nbsp;<span class="ident" id="2783684">r</span><span class="op" id="2783685">)</span><br>
<span class="lineno"></span><span class="op" id="2783687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span><span class="comment" id="2783690">//&nbsp;div&nbsp;divides&nbsp;t&nbsp;by&nbsp;d&nbsp;and&nbsp;returns&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;and&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2783759">//&nbsp;We&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;anymore&nbsp;(round&nbsp;half&nbsp;up&nbsp;instead&nbsp;of&nbsp;round&nbsp;to&nbsp;even)</span><br>
<span class="lineno"></span><span class="comment" id="2783844">//&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;here&nbsp;in&nbsp;case&nbsp;we&nbsp;change&nbsp;our&nbsp;minds.</span><br>
<span class="lineno"></span><span class="keyword" id="2783896">func</span>&nbsp;<span class="ident" id="2783901">div</span><span class="op" id="2783904">(</span><span class="ident" id="2783905">t</span>&nbsp;<span class="ident" id="2783907">Time</span><span class="op" id="2783911">,</span>&nbsp;<span class="ident" id="2783913">d</span>&nbsp;<span class="ident" id="2783915">Duration</span><span class="op" id="2783923">)</span>&nbsp;<span class="op" id="2783925">(</span><span class="ident" id="2783926">qmod2</span>&nbsp;<span class="builtintype" id="2783932">int</span><span class="op" id="2783935">,</span>&nbsp;<span class="ident" id="2783937">r</span>&nbsp;<span class="ident" id="2783939">Duration</span><span class="op" id="2783947">)</span>&nbsp;<span class="op" id="2783949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783952">neg</span>&nbsp;<span class="op" id="2783956">:=</span>&nbsp;<span class="builtintype" id="2783959">false</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783966">nsec</span>&nbsp;<span class="op" id="2783971">:=</span>&nbsp;<span class="builtintype" id="2783974">int32</span><span class="op" id="2783979">(</span><span class="ident" id="2783980">t</span><span class="op" id="2783981">.</span><span class="ident" id="2783982">nsec</span><span class="op" id="2783986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783989">if</span>&nbsp;<span class="ident" id="2783992">t</span><span class="op" id="2783993">.</span><span class="ident" id="2783994">sec</span>&nbsp;<span class="op" id="2783998">&lt;</span>&nbsp;<span class="num" id="2784000">0</span>&nbsp;<span class="op" id="2784002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784006">//&nbsp;Operate&nbsp;on&nbsp;absolute&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784038">neg</span>&nbsp;<span class="op" id="2784042">=</span>&nbsp;<span class="builtintype" id="2784044">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784051">t</span><span class="op" id="2784052">.</span><span class="ident" id="2784053">sec</span>&nbsp;<span class="op" id="2784057">=</span>&nbsp;<span class="op" id="2784059">-</span><span class="ident" id="2784060">t</span><span class="op" id="2784061">.</span><span class="ident" id="2784062">sec</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784068">nsec</span>&nbsp;<span class="op" id="2784073">=</span>&nbsp;<span class="op" id="2784075">-</span><span class="ident" id="2784076">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784083">if</span>&nbsp;<span class="ident" id="2784086">nsec</span>&nbsp;<span class="op" id="2784091">&lt;</span>&nbsp;<span class="num" id="2784093">0</span>&nbsp;<span class="op" id="2784095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784100">nsec</span>&nbsp;<span class="op" id="2784105">+=</span>&nbsp;<span class="num" id="2784108">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784115">t</span><span class="op" id="2784116">.</span><span class="ident" id="2784117">sec</span><span class="op" id="2784120">--</span>&nbsp;<span class="comment" id="2784123">//&nbsp;t.sec&nbsp;&gt;=&nbsp;1&nbsp;before&nbsp;the&nbsp;--&nbsp;so&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784161">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784168">switch</span>&nbsp;<span class="op" id="2784175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784178">//&nbsp;Special&nbsp;case:&nbsp;2d&nbsp;divides&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784217">case</span>&nbsp;<span class="ident" id="2784222">d</span>&nbsp;<span class="op" id="2784224">&lt;</span>&nbsp;<span class="ident" id="2784226">Second</span>&nbsp;<span class="op" id="2784233">&amp;&amp;</span>&nbsp;<span class="ident" id="2784236">Second</span><span class="op" id="2784242">%</span><span class="op" id="2784243">(</span><span class="ident" id="2784244">d</span><span class="op" id="2784245">+</span><span class="ident" id="2784246">d</span><span class="op" id="2784247">)</span>&nbsp;<span class="op" id="2784249">==</span>&nbsp;<span class="num" id="2784252">0</span><span class="op" id="2784253">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784257">qmod2</span>&nbsp;<span class="op" id="2784263">=</span>&nbsp;<span class="builtintype" id="2784265">int</span><span class="op" id="2784268">(</span><span class="ident" id="2784269">nsec</span><span class="op" id="2784273">/</span><span class="builtintype" id="2784274">int32</span><span class="op" id="2784279">(</span><span class="ident" id="2784280">d</span><span class="op" id="2784281">)</span><span class="op" id="2784282">)</span>&nbsp;<span class="op" id="2784284">&amp;</span>&nbsp;<span class="num" id="2784286">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784290">r</span>&nbsp;<span class="op" id="2784292">=</span>&nbsp;<span class="ident" id="2784294">Duration</span><span class="op" id="2784302">(</span><span class="ident" id="2784303">nsec</span>&nbsp;<span class="op" id="2784308">%</span>&nbsp;<span class="builtintype" id="2784310">int32</span><span class="op" id="2784315">(</span><span class="ident" id="2784316">d</span><span class="op" id="2784317">)</span><span class="op" id="2784318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784322">//&nbsp;Special&nbsp;case:&nbsp;d&nbsp;is&nbsp;a&nbsp;multiple&nbsp;of&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784369">case</span>&nbsp;<span class="ident" id="2784374">d</span><span class="op" id="2784375">%</span><span class="ident" id="2784376">Second</span>&nbsp;<span class="op" id="2784383">==</span>&nbsp;<span class="num" id="2784386">0</span><span class="op" id="2784387">:</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784391">d1</span>&nbsp;<span class="op" id="2784394">:=</span>&nbsp;<span class="ident" id="2784397">int64</span><span class="op" id="2784402">(</span><span class="ident" id="2784403">d</span>&nbsp;<span class="op" id="2784405">/</span>&nbsp;<span class="ident" id="2784407">Second</span><span class="op" id="2784413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784417">qmod2</span>&nbsp;<span class="op" id="2784423">=</span>&nbsp;<span class="builtintype" id="2784425">int</span><span class="op" id="2784428">(</span><span class="ident" id="2784429">t</span><span class="op" id="2784430">.</span><span class="ident" id="2784431">sec</span><span class="op" id="2784434">/</span><span class="ident" id="2784435">d1</span><span class="op" id="2784437">)</span>&nbsp;<span class="op" id="2784439">&amp;</span>&nbsp;<span class="num" id="2784441">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784445">r</span>&nbsp;<span class="op" id="2784447">=</span>&nbsp;<span class="ident" id="2784449">Duration</span><span class="op" id="2784457">(</span><span class="ident" id="2784458">t</span><span class="op" id="2784459">.</span><span class="ident" id="2784460">sec</span><span class="op" id="2784463">%</span><span class="ident" id="2784464">d1</span><span class="op" id="2784466">)</span><span class="op" id="2784467">*</span><span class="ident" id="2784468">Second</span>&nbsp;<span class="op" id="2784475">+</span>&nbsp;<span class="ident" id="2784477">Duration</span><span class="op" id="2784485">(</span><span class="ident" id="2784486">nsec</span><span class="op" id="2784490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784494">//&nbsp;General&nbsp;case.</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784512">//&nbsp;This&nbsp;could&nbsp;be&nbsp;faster&nbsp;if&nbsp;more&nbsp;cleverness&nbsp;were&nbsp;applied,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784570">//&nbsp;but&nbsp;it&#39;s&nbsp;really&nbsp;only&nbsp;here&nbsp;to&nbsp;avoid&nbsp;special&nbsp;case&nbsp;restrictions&nbsp;in&nbsp;the&nbsp;API.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784647">//&nbsp;No&nbsp;one&nbsp;will&nbsp;care&nbsp;about&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784687">default</span><span class="op" id="2784694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784698">//&nbsp;Compute&nbsp;nanoseconds&nbsp;as&nbsp;128-bit&nbsp;number.</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784742">sec</span>&nbsp;<span class="op" id="2784746">:=</span>&nbsp;<span class="ident" id="2784749">uint64</span><span class="op" id="2784755">(</span><span class="ident" id="2784756">t</span><span class="op" id="2784757">.</span><span class="ident" id="2784758">sec</span><span class="op" id="2784761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784765">tmp</span>&nbsp;<span class="op" id="2784769">:=</span>&nbsp;<span class="op" id="2784772">(</span><span class="ident" id="2784773">sec</span>&nbsp;<span class="op" id="2784777">&gt;&gt;</span>&nbsp;<span class="num" id="2784780">32</span><span class="op" id="2784782">)</span>&nbsp;<span class="op" id="2784784">*</span>&nbsp;<span class="num" id="2784786">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784792">u1</span>&nbsp;<span class="op" id="2784795">:=</span>&nbsp;<span class="ident" id="2784798">tmp</span>&nbsp;<span class="op" id="2784802">&gt;&gt;</span>&nbsp;<span class="num" id="2784805">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784810">u0</span>&nbsp;<span class="op" id="2784813">:=</span>&nbsp;<span class="ident" id="2784816">tmp</span>&nbsp;<span class="op" id="2784820">&lt;&lt;</span>&nbsp;<span class="num" id="2784823">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784828">tmp</span>&nbsp;<span class="op" id="2784832">=</span>&nbsp;<span class="ident" id="2784834">uint64</span><span class="op" id="2784840">(</span><span class="ident" id="2784841">sec</span><span class="op" id="2784844">&amp;</span><span class="num" id="2784845">0xFFFFFFFF</span><span class="op" id="2784855">)</span>&nbsp;<span class="op" id="2784857">*</span>&nbsp;<span class="num" id="2784859">1e9</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784865">u0x</span><span class="op" id="2784868">,</span>&nbsp;<span class="ident" id="2784870">u0</span>&nbsp;<span class="op" id="2784873">:=</span>&nbsp;<span class="ident" id="2784876">u0</span><span class="op" id="2784878">,</span>&nbsp;<span class="ident" id="2784880">u0</span><span class="op" id="2784882">+</span><span class="ident" id="2784883">tmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784889">if</span>&nbsp;<span class="ident" id="2784892">u0</span>&nbsp;<span class="op" id="2784895">&lt;</span>&nbsp;<span class="ident" id="2784897">u0x</span>&nbsp;<span class="op" id="2784901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784906">u1</span><span class="op" id="2784908">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784917">u0x</span><span class="op" id="2784920">,</span>&nbsp;<span class="ident" id="2784922">u0</span>&nbsp;<span class="op" id="2784925">=</span>&nbsp;<span class="ident" id="2784927">u0</span><span class="op" id="2784929">,</span>&nbsp;<span class="ident" id="2784931">u0</span><span class="op" id="2784933">+</span><span class="ident" id="2784934">uint64</span><span class="op" id="2784940">(</span><span class="ident" id="2784941">nsec</span><span class="op" id="2784945">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784949">if</span>&nbsp;<span class="ident" id="2784952">u0</span>&nbsp;<span class="op" id="2784955">&lt;</span>&nbsp;<span class="ident" id="2784957">u0x</span>&nbsp;<span class="op" id="2784961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784966">u1</span><span class="op" id="2784968">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784978">//&nbsp;Compute&nbsp;remainder&nbsp;by&nbsp;subtracting&nbsp;r&lt;&lt;k&nbsp;for&nbsp;decreasing&nbsp;k.</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785039">//&nbsp;Quotient&nbsp;parity&nbsp;is&nbsp;whether&nbsp;we&nbsp;subtract&nbsp;on&nbsp;last&nbsp;round.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785098">d1</span>&nbsp;<span class="op" id="2785101">:=</span>&nbsp;<span class="ident" id="2785104">uint64</span><span class="op" id="2785110">(</span><span class="ident" id="2785111">d</span><span class="op" id="2785112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785116">for</span>&nbsp;<span class="ident" id="2785120">d1</span><span class="op" id="2785122">&gt;&gt;</span><span class="num" id="2785124">63</span>&nbsp;<span class="op" id="2785127">!=</span>&nbsp;<span class="num" id="2785130">1</span>&nbsp;<span class="op" id="2785132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785137">d1</span>&nbsp;<span class="op" id="2785140">&lt;&lt;=</span>&nbsp;<span class="num" id="2785144">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785148">}</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785152">d0</span>&nbsp;<span class="op" id="2785155">:=</span>&nbsp;<span class="ident" id="2785158">uint64</span><span class="op" id="2785164">(</span><span class="num" id="2785165">0</span><span class="op" id="2785166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785170">for</span>&nbsp;<span class="op" id="2785174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785179">qmod2</span>&nbsp;<span class="op" id="2785185">=</span>&nbsp;<span class="num" id="2785187">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785192">if</span>&nbsp;<span class="ident" id="2785195">u1</span>&nbsp;<span class="op" id="2785198">&gt;</span>&nbsp;<span class="ident" id="2785200">d1</span>&nbsp;<span class="op" id="2785203">||</span>&nbsp;<span class="ident" id="2785206">u1</span>&nbsp;<span class="op" id="2785209">==</span>&nbsp;<span class="ident" id="2785212">d1</span>&nbsp;<span class="op" id="2785215">&amp;&amp;</span>&nbsp;<span class="ident" id="2785218">u0</span>&nbsp;<span class="op" id="2785221">&gt;=</span>&nbsp;<span class="ident" id="2785224">d0</span>&nbsp;<span class="op" id="2785227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785233">//&nbsp;subtract</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785249">qmod2</span>&nbsp;<span class="op" id="2785255">=</span>&nbsp;<span class="num" id="2785257">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785263">u0x</span><span class="op" id="2785266">,</span>&nbsp;<span class="ident" id="2785268">u0</span>&nbsp;<span class="op" id="2785271">=</span>&nbsp;<span class="ident" id="2785273">u0</span><span class="op" id="2785275">,</span>&nbsp;<span class="ident" id="2785277">u0</span><span class="op" id="2785279">-</span><span class="ident" id="2785280">d0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785287">if</span>&nbsp;<span class="ident" id="2785290">u0</span>&nbsp;<span class="op" id="2785293">&gt;</span>&nbsp;<span class="ident" id="2785295">u0x</span>&nbsp;<span class="op" id="2785299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785306">u1</span><span class="op" id="2785308">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785315">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785321">u1</span>&nbsp;<span class="op" id="2785324">-=</span>&nbsp;<span class="ident" id="2785327">d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785338">if</span>&nbsp;<span class="ident" id="2785341">d1</span>&nbsp;<span class="op" id="2785344">==</span>&nbsp;<span class="num" id="2785347">0</span>&nbsp;<span class="op" id="2785349">&amp;&amp;</span>&nbsp;<span class="ident" id="2785352">d0</span>&nbsp;<span class="op" id="2785355">==</span>&nbsp;<span class="ident" id="2785358">uint64</span><span class="op" id="2785364">(</span><span class="ident" id="2785365">d</span><span class="op" id="2785366">)</span>&nbsp;<span class="op" id="2785368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785374">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785383">}</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785388">d0</span>&nbsp;<span class="op" id="2785391">&gt;&gt;=</span>&nbsp;<span class="num" id="2785395">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785400">d0</span>&nbsp;<span class="op" id="2785403">|=</span>&nbsp;<span class="op" id="2785406">(</span><span class="ident" id="2785407">d1</span>&nbsp;<span class="op" id="2785410">&amp;</span>&nbsp;<span class="num" id="2785412">1</span><span class="op" id="2785413">)</span>&nbsp;<span class="op" id="2785415">&lt;&lt;</span>&nbsp;<span class="num" id="2785418">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785424">d1</span>&nbsp;<span class="op" id="2785427">&gt;&gt;=</span>&nbsp;<span class="num" id="2785431">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785439">r</span>&nbsp;<span class="op" id="2785441">=</span>&nbsp;<span class="ident" id="2785443">Duration</span><span class="op" id="2785451">(</span><span class="ident" id="2785452">u0</span><span class="op" id="2785454">)</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785461">if</span>&nbsp;<span class="ident" id="2785464">neg</span>&nbsp;<span class="op" id="2785468">&amp;&amp;</span>&nbsp;<span class="ident" id="2785471">r</span>&nbsp;<span class="op" id="2785473">!=</span>&nbsp;<span class="num" id="2785476">0</span>&nbsp;<span class="op" id="2785478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785482">//&nbsp;If&nbsp;input&nbsp;was&nbsp;negative&nbsp;and&nbsp;not&nbsp;an&nbsp;exact&nbsp;multiple&nbsp;of&nbsp;d,&nbsp;we&nbsp;computed&nbsp;q,&nbsp;r&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785568">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785586">//&nbsp;But&nbsp;the&nbsp;right&nbsp;answers&nbsp;are&nbsp;given&nbsp;by&nbsp;-(q-1),&nbsp;d-r:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785639">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785657">//&nbsp;&nbsp;&nbsp;&nbsp-q*d&nbsp;-&nbsp;r&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2785675">//&nbsp;&nbsp;&nbsp;&nbsp-(q-1)*d&nbsp;+&nbsp;(d&nbsp;-&nbsp;r)&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785703">qmod2</span>&nbsp;<span class="op" id="2785709">^=</span>&nbsp;<span class="num" id="2785712">1</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785716">r</span>&nbsp;<span class="op" id="2785718">=</span>&nbsp;<span class="ident" id="2785720">d</span>&nbsp;<span class="op" id="2785722">-</span>&nbsp;<span class="ident" id="2785724">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785730">return</span><br>
<span class="lineno"></span><span class="op" id="2785737">}</span>
</div>
</body>
</html>
