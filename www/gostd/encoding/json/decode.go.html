<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3933367">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3933422">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3933476">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3933527">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="3933602">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3933633">package</span>&nbsp;<span class="ident" id="3933641">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3933647">import</span>&nbsp;<span class="op" id="3933654">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933657">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933666">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933678">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933697">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933707">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933714">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933725">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933736">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933747">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933758">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3933775">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3933790">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3933793">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="3933857">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3933890">//</span><br>
<span class="lineno"></span><span class="comment" id="3933893">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3933945">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3934014">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="3934054">//</span><br>
<span class="lineno"></span><span class="comment" id="3934057">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3934130">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="3934201">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="3934271">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="3934345">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="3934390">//</span><br>
<span class="lineno"></span><span class="comment" id="3934393">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="3934463">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="3934542">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="3934616">//</span><br>
<span class="lineno"></span><span class="comment" id="3934619">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3934665">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="3934722">//</span><br>
<span class="lineno"></span><span class="comment" id="3934725">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="3934752">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="3934781">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="3934809">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="3934843">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="3934887">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="3934908">//</span><br>
<span class="lineno"></span><span class="comment" id="3934911">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="3934974">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="3935034">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="3935102">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="3935166">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3935227">//</span><br>
<span class="lineno"></span><span class="comment" id="3935230">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="3935306">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="3935385">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="3935467">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3935506">//</span><br>
<span class="lineno"></span><span class="comment" id="3935509">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3935563">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3935626">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="3935683">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="3935704">//</span><br>
<span class="lineno"></span><span class="keyword" id="3935707">func</span>&nbsp;<span class="ident" id="3935712">Unmarshal</span><span class="op" id="3935721">(</span><span class="ident" id="3935722">data</span>&nbsp;<span class="op" id="3935727">[</span><span class="op" id="3935728">]</span><span class="builtintype" id="3935729">byte</span><span class="op" id="3935733">,</span>&nbsp;<span class="ident" id="3935735">v</span>&nbsp;<span class="keyword" id="3935737">interface</span><span class="op" id="3935746">{</span><span class="op" id="3935747">}</span><span class="op" id="3935748">)</span>&nbsp;<span class="builtintype" id="3935750">error</span>&nbsp;<span class="op" id="3935756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3935759">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3935790">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3935835">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3935879">var</span>&nbsp;<span class="ident" id="3935883">d</span>&nbsp;<span class="ident" id="3935885">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3935898">err</span>&nbsp;<span class="op" id="3935902">:=</span>&nbsp;<span class="ident" id="3935905">checkValid</span><span class="op" id="3935915">(</span><span class="ident" id="3935916">data</span><span class="op" id="3935920">,</span>&nbsp;<span class="op" id="3935922">&amp;</span><span class="ident" id="3935923">d</span><span class="op" id="3935924">.</span><span class="ident" id="3935925">scan</span><span class="op" id="3935929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3935932">if</span>&nbsp;<span class="ident" id="3935935">err</span>&nbsp;<span class="op" id="3935939">!=</span>&nbsp;<span class="ident" id="3935942">nil</span>&nbsp;<span class="op" id="3935946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3935950">return</span>&nbsp;<span class="ident" id="3935957">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3935962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3935966">d</span><span class="op" id="3935967">.</span><span class="ident" id="3935968">init</span><span class="op" id="3935972">(</span><span class="ident" id="3935973">data</span><span class="op" id="3935977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3935980">return</span>&nbsp;<span class="ident" id="3935987">d</span><span class="op" id="3935988">.</span><span class="ident" id="3935989">unmarshal</span><span class="op" id="3935998">(</span><span class="ident" id="3935999">v</span><span class="op" id="3936000">)</span><br>
<span class="lineno"></span><span class="op" id="3936002">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3936005">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="3936060">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="3936116">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3936170">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="3936225">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="3936277">type</span>&nbsp;<span class="ident" id="3936282">Unmarshaler</span>&nbsp;<span class="keyword" id="3936294">interface</span>&nbsp;<span class="op" id="3936304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3936307">UnmarshalJSON</span><span class="op" id="3936320">(</span><span class="op" id="3936321">[</span><span class="op" id="3936322">]</span><span class="builtintype" id="3936323">byte</span><span class="op" id="3936327">)</span>&nbsp;<span class="builtintype" id="3936329">error</span><br>
<span class="lineno"></span><span class="op" id="3936335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="3936338">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="3936395">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3936449">type</span>&nbsp;<span class="ident" id="3936454">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="3936473">struct</span>&nbsp;<span class="op" id="3936480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3936483">Value</span>&nbsp;<span class="builtintype" id="3936489">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3936502">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3936563">Type</span>&nbsp;&nbsp;<span class="ident" id="3936569">reflect</span><span class="op" id="3936576">.</span><span class="ident" id="3936577">Type</span>&nbsp;<span class="comment" id="3936582">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="3936630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3936633">func</span>&nbsp;<span class="op" id="3936638">(</span><span class="ident" id="3936639">e</span>&nbsp;<span class="op" id="3936641">*</span><span class="ident" id="3936642">UnmarshalTypeError</span><span class="op" id="3936660">)</span>&nbsp;<span class="ident" id="3936662">Error</span><span class="op" id="3936667">(</span><span class="op" id="3936668">)</span>&nbsp;<span class="builtintype" id="3936670">string</span>&nbsp;<span class="op" id="3936677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3936680">return</span>&nbsp;<span class="string" id="3936687">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="3936713">+</span>&nbsp;<span class="ident" id="3936715">e</span><span class="op" id="3936716">.</span><span class="ident" id="3936717">Value</span>&nbsp;<span class="op" id="3936723">+</span>&nbsp;<span class="string" id="3936725">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3936751">+</span>&nbsp;<span class="ident" id="3936753">e</span><span class="op" id="3936754">.</span><span class="ident" id="3936755">Type</span><span class="op" id="3936759">.</span><span class="ident" id="3936760">String</span><span class="op" id="3936766">(</span><span class="op" id="3936767">)</span><br>
<span class="lineno"></span><span class="op" id="3936769">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3936772">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3936831">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="3936896">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="3936941">type</span>&nbsp;<span class="ident" id="3936946">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="3936966">struct</span>&nbsp;<span class="op" id="3936973">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3936976">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3936982">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3936990">Type</span>&nbsp;&nbsp;<span class="ident" id="3936996">reflect</span><span class="op" id="3937003">.</span><span class="ident" id="3937004">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3937010">Field</span>&nbsp;<span class="ident" id="3937016">reflect</span><span class="op" id="3937023">.</span><span class="ident" id="3937024">StructField</span><br>
<span class="lineno"></span><span class="op" id="3937036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="3937039">func</span>&nbsp;<span class="op" id="3937044">(</span><span class="ident" id="3937045">e</span>&nbsp;<span class="op" id="3937047">*</span><span class="ident" id="3937048">UnmarshalFieldError</span><span class="op" id="3937067">)</span>&nbsp;<span class="ident" id="3937069">Error</span><span class="op" id="3937074">(</span><span class="op" id="3937075">)</span>&nbsp;<span class="builtintype" id="3937077">string</span>&nbsp;<span class="op" id="3937084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937087">return</span>&nbsp;<span class="string" id="3937094">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="3937131">+</span>&nbsp;<span class="ident" id="3937133">strconv</span><span class="op" id="3937140">.</span><span class="ident" id="3937141">Quote</span><span class="op" id="3937146">(</span><span class="ident" id="3937147">e</span><span class="op" id="3937148">.</span><span class="ident" id="3937149">Key</span><span class="op" id="3937152">)</span>&nbsp;<span class="op" id="3937154">+</span>&nbsp;<span class="string" id="3937156">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="3937182">+</span>&nbsp;<span class="ident" id="3937184">e</span><span class="op" id="3937185">.</span><span class="ident" id="3937186">Field</span><span class="op" id="3937191">.</span><span class="ident" id="3937192">Name</span>&nbsp;<span class="op" id="3937197">+</span>&nbsp;<span class="string" id="3937199">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3937211">+</span>&nbsp;<span class="ident" id="3937213">e</span><span class="op" id="3937214">.</span><span class="ident" id="3937215">Type</span><span class="op" id="3937219">.</span><span class="ident" id="3937220">String</span><span class="op" id="3937226">(</span><span class="op" id="3937227">)</span><br>
<span class="lineno"></span><span class="op" id="3937229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3937232">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="3937311">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="3937369">type</span>&nbsp;<span class="ident" id="3937374">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="3937396">struct</span>&nbsp;<span class="op" id="3937403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3937406">Type</span>&nbsp;<span class="ident" id="3937411">reflect</span><span class="op" id="3937418">.</span><span class="ident" id="3937419">Type</span><br>
<span class="lineno"></span><span class="op" id="3937424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="3937427">func</span>&nbsp;<span class="op" id="3937432">(</span><span class="ident" id="3937433">e</span>&nbsp;<span class="op" id="3937435">*</span><span class="ident" id="3937436">InvalidUnmarshalError</span><span class="op" id="3937457">)</span>&nbsp;<span class="ident" id="3937459">Error</span><span class="op" id="3937464">(</span><span class="op" id="3937465">)</span>&nbsp;<span class="builtintype" id="3937467">string</span>&nbsp;<span class="op" id="3937474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937477">if</span>&nbsp;<span class="ident" id="3937480">e</span><span class="op" id="3937481">.</span><span class="ident" id="3937482">Type</span>&nbsp;<span class="op" id="3937487">==</span>&nbsp;<span class="ident" id="3937490">nil</span>&nbsp;<span class="op" id="3937494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937498">return</span>&nbsp;<span class="string" id="3937505">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3937529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937533">if</span>&nbsp;<span class="ident" id="3937536">e</span><span class="op" id="3937537">.</span><span class="ident" id="3937538">Type</span><span class="op" id="3937542">.</span><span class="ident" id="3937543">Kind</span><span class="op" id="3937547">(</span><span class="op" id="3937548">)</span>&nbsp;<span class="op" id="3937550">!=</span>&nbsp;<span class="ident" id="3937553">reflect</span><span class="op" id="3937560">.</span><span class="ident" id="3937561">Ptr</span>&nbsp;<span class="op" id="3937565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937569">return</span>&nbsp;<span class="string" id="3937576">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="3937607">+</span>&nbsp;<span class="ident" id="3937609">e</span><span class="op" id="3937610">.</span><span class="ident" id="3937611">Type</span><span class="op" id="3937615">.</span><span class="ident" id="3937616">String</span><span class="op" id="3937622">(</span><span class="op" id="3937623">)</span>&nbsp;<span class="op" id="3937625">+</span>&nbsp;<span class="string" id="3937627">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3937632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937635">return</span>&nbsp;<span class="string" id="3937642">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="3937665">+</span>&nbsp;<span class="ident" id="3937667">e</span><span class="op" id="3937668">.</span><span class="ident" id="3937669">Type</span><span class="op" id="3937673">.</span><span class="ident" id="3937674">String</span><span class="op" id="3937680">(</span><span class="op" id="3937681">)</span>&nbsp;<span class="op" id="3937683">+</span>&nbsp;<span class="string" id="3937685">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="3937689">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="3937692">func</span>&nbsp;<span class="op" id="3937697">(</span><span class="ident" id="3937698">d</span>&nbsp;<span class="op" id="3937700">*</span><span class="ident" id="3937701">decodeState</span><span class="op" id="3937712">)</span>&nbsp;<span class="ident" id="3937714">unmarshal</span><span class="op" id="3937723">(</span><span class="ident" id="3937724">v</span>&nbsp;<span class="keyword" id="3937726">interface</span><span class="op" id="3937735">{</span><span class="op" id="3937736">}</span><span class="op" id="3937737">)</span>&nbsp;<span class="op" id="3937739">(</span><span class="ident" id="3937740">err</span>&nbsp;<span class="builtintype" id="3937744">error</span><span class="op" id="3937749">)</span>&nbsp;<span class="op" id="3937751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937754">defer</span>&nbsp;<span class="keyword" id="3937760">func</span><span class="op" id="3937764">(</span><span class="op" id="3937765">)</span>&nbsp;<span class="op" id="3937767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937771">if</span>&nbsp;<span class="ident" id="3937774">r</span>&nbsp;<span class="op" id="3937776">:=</span>&nbsp;<span class="builtinfunc" id="3937779">recover</span><span class="op" id="3937786">(</span><span class="op" id="3937787">)</span><span class="op" id="3937788">;</span>&nbsp;<span class="ident" id="3937790">r</span>&nbsp;<span class="op" id="3937792">!=</span>&nbsp;<span class="ident" id="3937795">nil</span>&nbsp;<span class="op" id="3937799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937804">if</span>&nbsp;<span class="ident" id="3937807">_</span><span class="op" id="3937808">,</span>&nbsp;<span class="ident" id="3937810">ok</span>&nbsp;<span class="op" id="3937813">:=</span>&nbsp;<span class="ident" id="3937816">r</span><span class="op" id="3937817">.</span><span class="op" id="3937818">(</span><span class="ident" id="3937819">runtime</span><span class="op" id="3937826">.</span><span class="ident" id="3937827">Error</span><span class="op" id="3937832">)</span><span class="op" id="3937833">;</span>&nbsp;<span class="ident" id="3937835">ok</span>&nbsp;<span class="op" id="3937838">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3937844">panic</span><span class="op" id="3937849">(</span><span class="ident" id="3937850">r</span><span class="op" id="3937851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3937856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3937861">err</span>&nbsp;<span class="op" id="3937865">=</span>&nbsp;<span class="ident" id="3937867">r</span><span class="op" id="3937868">.</span><span class="op" id="3937869">(</span><span class="builtintype" id="3937870">error</span><span class="op" id="3937875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3937879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3937882">}</span><span class="op" id="3937883">(</span><span class="op" id="3937884">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3937888">rv</span>&nbsp;<span class="op" id="3937891">:=</span>&nbsp;<span class="ident" id="3937894">reflect</span><span class="op" id="3937901">.</span><span class="ident" id="3937902">ValueOf</span><span class="op" id="3937909">(</span><span class="ident" id="3937910">v</span><span class="op" id="3937911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937914">if</span>&nbsp;<span class="ident" id="3937917">rv</span><span class="op" id="3937919">.</span><span class="ident" id="3937920">Kind</span><span class="op" id="3937924">(</span><span class="op" id="3937925">)</span>&nbsp;<span class="op" id="3937927">!=</span>&nbsp;<span class="ident" id="3937930">reflect</span><span class="op" id="3937937">.</span><span class="ident" id="3937938">Ptr</span>&nbsp;<span class="op" id="3937942">||</span>&nbsp;<span class="ident" id="3937945">rv</span><span class="op" id="3937947">.</span><span class="ident" id="3937948">IsNil</span><span class="op" id="3937953">(</span><span class="op" id="3937954">)</span>&nbsp;<span class="op" id="3937956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3937960">return</span>&nbsp;<span class="op" id="3937967">&amp;</span><span class="ident" id="3937968">InvalidUnmarshalError</span><span class="op" id="3937989">{</span><span class="ident" id="3937990">reflect</span><span class="op" id="3937997">.</span><span class="ident" id="3937998">TypeOf</span><span class="op" id="3938004">(</span><span class="ident" id="3938005">v</span><span class="op" id="3938006">)</span><span class="op" id="3938007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3938010">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938014">d</span><span class="op" id="3938015">.</span><span class="ident" id="3938016">scan</span><span class="op" id="3938020">.</span><span class="ident" id="3938021">reset</span><span class="op" id="3938026">(</span><span class="op" id="3938027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3938030">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3938093">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938149">d</span><span class="op" id="3938150">.</span><span class="ident" id="3938151">value</span><span class="op" id="3938156">(</span><span class="ident" id="3938157">rv</span><span class="op" id="3938159">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3938162">return</span>&nbsp;<span class="ident" id="3938169">d</span><span class="op" id="3938170">.</span><span class="ident" id="3938171">savedError</span><br>
<span class="lineno"></span><span class="op" id="3938182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3938185">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="3938231">type</span>&nbsp;<span class="ident" id="3938236">Number</span>&nbsp;<span class="builtintype" id="3938243">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3938251">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="3938301">func</span>&nbsp;<span class="op" id="3938306">(</span><span class="ident" id="3938307">n</span>&nbsp;<span class="ident" id="3938309">Number</span><span class="op" id="3938315">)</span>&nbsp;<span class="ident" id="3938317">String</span><span class="op" id="3938323">(</span><span class="op" id="3938324">)</span>&nbsp;<span class="builtintype" id="3938326">string</span>&nbsp;<span class="op" id="3938333">{</span>&nbsp;<span class="keyword" id="3938335">return</span>&nbsp;<span class="builtintype" id="3938342">string</span><span class="op" id="3938348">(</span><span class="ident" id="3938349">n</span><span class="op" id="3938350">)</span>&nbsp;<span class="op" id="3938352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3938355">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="3938399">func</span>&nbsp;<span class="op" id="3938404">(</span><span class="ident" id="3938405">n</span>&nbsp;<span class="ident" id="3938407">Number</span><span class="op" id="3938413">)</span>&nbsp;<span class="ident" id="3938415">Float64</span><span class="op" id="3938422">(</span><span class="op" id="3938423">)</span>&nbsp;<span class="op" id="3938425">(</span><span class="builtintype" id="3938426">float64</span><span class="op" id="3938433">,</span>&nbsp;<span class="builtintype" id="3938435">error</span><span class="op" id="3938440">)</span>&nbsp;<span class="op" id="3938442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3938445">return</span>&nbsp;<span class="ident" id="3938452">strconv</span><span class="op" id="3938459">.</span><span class="ident" id="3938460">ParseFloat</span><span class="op" id="3938470">(</span><span class="builtintype" id="3938471">string</span><span class="op" id="3938477">(</span><span class="ident" id="3938478">n</span><span class="op" id="3938479">)</span><span class="op" id="3938480">,</span>&nbsp;<span class="num" id="3938482">64</span><span class="op" id="3938484">)</span><br>
<span class="lineno"></span><span class="op" id="3938486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3938489">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="3938530">func</span>&nbsp;<span class="op" id="3938535">(</span><span class="ident" id="3938536">n</span>&nbsp;<span class="ident" id="3938538">Number</span><span class="op" id="3938544">)</span>&nbsp;<span class="ident" id="3938546">Int64</span><span class="op" id="3938551">(</span><span class="op" id="3938552">)</span>&nbsp;<span class="op" id="3938554">(</span><span class="ident" id="3938555">int64</span><span class="op" id="3938560">,</span>&nbsp;<span class="builtintype" id="3938562">error</span><span class="op" id="3938567">)</span>&nbsp;<span class="op" id="3938569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3938572">return</span>&nbsp;<span class="ident" id="3938579">strconv</span><span class="op" id="3938586">.</span><span class="ident" id="3938587">ParseInt</span><span class="op" id="3938595">(</span><span class="builtintype" id="3938596">string</span><span class="op" id="3938602">(</span><span class="ident" id="3938603">n</span><span class="op" id="3938604">)</span><span class="op" id="3938605">,</span>&nbsp;<span class="num" id="3938607">10</span><span class="op" id="3938609">,</span>&nbsp;<span class="num" id="3938611">64</span><span class="op" id="3938613">)</span><br>
<span class="lineno"></span><span class="op" id="3938615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3938618">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="3938683">type</span>&nbsp;<span class="ident" id="3938688">decodeState</span>&nbsp;<span class="keyword" id="3938700">struct</span>&nbsp;<span class="op" id="3938707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938710">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3938721">[</span><span class="op" id="3938722">]</span><span class="builtintype" id="3938723">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938729">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3938740">int</span>&nbsp;<span class="comment" id="3938744">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938768">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3938779">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938788">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3938799">scanner</span>&nbsp;<span class="comment" id="3938807">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938834">savedError</span>&nbsp;<span class="builtintype" id="3938845">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3938852">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="3938863">bool</span><br>
<span class="lineno"></span><span class="op" id="3938868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3938871">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="3938932">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="3938994">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="3939040">var</span>&nbsp;<span class="ident" id="3939044">errPhase</span>&nbsp;<span class="op" id="3939053">=</span>&nbsp;<span class="ident" id="3939055">errors</span><span class="op" id="3939061">.</span><span class="ident" id="3939062">New</span><span class="op" id="3939065">(</span><span class="string" id="3939066">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="3939119">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3939122">func</span>&nbsp;<span class="op" id="3939127">(</span><span class="ident" id="3939128">d</span>&nbsp;<span class="op" id="3939130">*</span><span class="ident" id="3939131">decodeState</span><span class="op" id="3939142">)</span>&nbsp;<span class="ident" id="3939144">init</span><span class="op" id="3939148">(</span><span class="ident" id="3939149">data</span>&nbsp;<span class="op" id="3939154">[</span><span class="op" id="3939155">]</span><span class="builtintype" id="3939156">byte</span><span class="op" id="3939160">)</span>&nbsp;<span class="op" id="3939162">*</span><span class="ident" id="3939163">decodeState</span>&nbsp;<span class="op" id="3939175">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939178">d</span><span class="op" id="3939179">.</span><span class="ident" id="3939180">data</span>&nbsp;<span class="op" id="3939185">=</span>&nbsp;<span class="ident" id="3939187">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939193">d</span><span class="op" id="3939194">.</span><span class="ident" id="3939195">off</span>&nbsp;<span class="op" id="3939199">=</span>&nbsp;<span class="num" id="3939201">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939204">d</span><span class="op" id="3939205">.</span><span class="ident" id="3939206">savedError</span>&nbsp;<span class="op" id="3939217">=</span>&nbsp;<span class="ident" id="3939219">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3939224">return</span>&nbsp;<span class="ident" id="3939231">d</span><br>
<span class="lineno"></span><span class="op" id="3939233">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="3939236">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="3939288">func</span>&nbsp;<span class="op" id="3939293">(</span><span class="ident" id="3939294">d</span>&nbsp;<span class="op" id="3939296">*</span><span class="ident" id="3939297">decodeState</span><span class="op" id="3939308">)</span>&nbsp;<span class="builtintype" id="3939310">error</span><span class="op" id="3939315">(</span><span class="ident" id="3939316">err</span>&nbsp;<span class="builtintype" id="3939320">error</span><span class="op" id="3939325">)</span>&nbsp;<span class="op" id="3939327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3939330">panic</span><span class="op" id="3939335">(</span><span class="ident" id="3939336">err</span><span class="op" id="3939339">)</span><br>
<span class="lineno"></span><span class="op" id="3939341">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3939344">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="3939396">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="3939442">func</span>&nbsp;<span class="op" id="3939447">(</span><span class="ident" id="3939448">d</span>&nbsp;<span class="op" id="3939450">*</span><span class="ident" id="3939451">decodeState</span><span class="op" id="3939462">)</span>&nbsp;<span class="ident" id="3939464">saveError</span><span class="op" id="3939473">(</span><span class="ident" id="3939474">err</span>&nbsp;<span class="builtintype" id="3939478">error</span><span class="op" id="3939483">)</span>&nbsp;<span class="op" id="3939485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3939488">if</span>&nbsp;<span class="ident" id="3939491">d</span><span class="op" id="3939492">.</span><span class="ident" id="3939493">savedError</span>&nbsp;<span class="op" id="3939504">==</span>&nbsp;<span class="ident" id="3939507">nil</span>&nbsp;<span class="op" id="3939511">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939515">d</span><span class="op" id="3939516">.</span><span class="ident" id="3939517">savedError</span>&nbsp;<span class="op" id="3939528">=</span>&nbsp;<span class="ident" id="3939530">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3939535">}</span><br>
<span class="lineno"></span><span class="op" id="3939537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3939540">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="3939613">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="3939681">func</span>&nbsp;<span class="op" id="3939686">(</span><span class="ident" id="3939687">d</span>&nbsp;<span class="op" id="3939689">*</span><span class="ident" id="3939690">decodeState</span><span class="op" id="3939701">)</span>&nbsp;<span class="ident" id="3939703">next</span><span class="op" id="3939707">(</span><span class="op" id="3939708">)</span>&nbsp;<span class="op" id="3939710">[</span><span class="op" id="3939711">]</span><span class="builtintype" id="3939712">byte</span>&nbsp;<span class="op" id="3939717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939720">c</span>&nbsp;<span class="op" id="3939722">:=</span>&nbsp;<span class="ident" id="3939725">d</span><span class="op" id="3939726">.</span><span class="ident" id="3939727">data</span><span class="op" id="3939731">[</span><span class="ident" id="3939732">d</span><span class="op" id="3939733">.</span><span class="ident" id="3939734">off</span><span class="op" id="3939737">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939740">item</span><span class="op" id="3939744">,</span>&nbsp;<span class="ident" id="3939746">rest</span><span class="op" id="3939750">,</span>&nbsp;<span class="ident" id="3939752">err</span>&nbsp;<span class="op" id="3939756">:=</span>&nbsp;<span class="ident" id="3939759">nextValue</span><span class="op" id="3939768">(</span><span class="ident" id="3939769">d</span><span class="op" id="3939770">.</span><span class="ident" id="3939771">data</span><span class="op" id="3939775">[</span><span class="ident" id="3939776">d</span><span class="op" id="3939777">.</span><span class="ident" id="3939778">off</span><span class="op" id="3939781">:</span><span class="op" id="3939782">]</span><span class="op" id="3939783">,</span>&nbsp;<span class="op" id="3939785">&amp;</span><span class="ident" id="3939786">d</span><span class="op" id="3939787">.</span><span class="ident" id="3939788">nextscan</span><span class="op" id="3939796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3939799">if</span>&nbsp;<span class="ident" id="3939802">err</span>&nbsp;<span class="op" id="3939806">!=</span>&nbsp;<span class="ident" id="3939809">nil</span>&nbsp;<span class="op" id="3939813">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939817">d</span><span class="op" id="3939818">.</span><span class="builtintype" id="3939819">error</span><span class="op" id="3939824">(</span><span class="ident" id="3939825">err</span><span class="op" id="3939828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3939831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3939834">d</span><span class="op" id="3939835">.</span><span class="ident" id="3939836">off</span>&nbsp;<span class="op" id="3939840">=</span>&nbsp;<span class="builtinfunc" id="3939842">len</span><span class="op" id="3939845">(</span><span class="ident" id="3939846">d</span><span class="op" id="3939847">.</span><span class="ident" id="3939848">data</span><span class="op" id="3939852">)</span>&nbsp;<span class="op" id="3939854">-</span>&nbsp;<span class="builtinfunc" id="3939856">len</span><span class="op" id="3939859">(</span><span class="ident" id="3939860">rest</span><span class="op" id="3939864">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3939868">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3939919">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3939975">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940025">if</span>&nbsp;<span class="ident" id="3940028">c</span>&nbsp;<span class="op" id="3940030">==</span>&nbsp;<span class="string" id="3940033">&#39;{&#39;</span>&nbsp;<span class="op" id="3940037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940041">d</span><span class="op" id="3940042">.</span><span class="ident" id="3940043">scan</span><span class="op" id="3940047">.</span><span class="ident" id="3940048">step</span><span class="op" id="3940052">(</span><span class="op" id="3940053">&amp;</span><span class="ident" id="3940054">d</span><span class="op" id="3940055">.</span><span class="ident" id="3940056">scan</span><span class="op" id="3940060">,</span>&nbsp;<span class="string" id="3940062">&#39;}&#39;</span><span class="op" id="3940065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940068">}</span>&nbsp;<span class="keyword" id="3940070">else</span>&nbsp;<span class="op" id="3940075">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940079">d</span><span class="op" id="3940080">.</span><span class="ident" id="3940081">scan</span><span class="op" id="3940085">.</span><span class="ident" id="3940086">step</span><span class="op" id="3940090">(</span><span class="op" id="3940091">&amp;</span><span class="ident" id="3940092">d</span><span class="op" id="3940093">.</span><span class="ident" id="3940094">scan</span><span class="op" id="3940098">,</span>&nbsp;<span class="string" id="3940100">&#39;]&#39;</span><span class="op" id="3940103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940110">return</span>&nbsp;<span class="ident" id="3940117">item</span><br>
<span class="lineno"></span><span class="op" id="3940122">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3940125">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3940181">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="3940222">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="3940273">func</span>&nbsp;<span class="op" id="3940278">(</span><span class="ident" id="3940279">d</span>&nbsp;<span class="op" id="3940281">*</span><span class="ident" id="3940282">decodeState</span><span class="op" id="3940293">)</span>&nbsp;<span class="ident" id="3940295">scanWhile</span><span class="op" id="3940304">(</span><span class="ident" id="3940305">op</span>&nbsp;<span class="builtintype" id="3940308">int</span><span class="op" id="3940311">)</span>&nbsp;<span class="builtintype" id="3940313">int</span>&nbsp;<span class="op" id="3940317">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940320">var</span>&nbsp;<span class="ident" id="3940324">newOp</span>&nbsp;<span class="builtintype" id="3940330">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940335">for</span>&nbsp;<span class="op" id="3940339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940343">if</span>&nbsp;<span class="ident" id="3940346">d</span><span class="op" id="3940347">.</span><span class="ident" id="3940348">off</span>&nbsp;<span class="op" id="3940352">&gt;=</span>&nbsp;<span class="builtinfunc" id="3940355">len</span><span class="op" id="3940358">(</span><span class="ident" id="3940359">d</span><span class="op" id="3940360">.</span><span class="ident" id="3940361">data</span><span class="op" id="3940365">)</span>&nbsp;<span class="op" id="3940367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940372">newOp</span>&nbsp;<span class="op" id="3940378">=</span>&nbsp;<span class="ident" id="3940380">d</span><span class="op" id="3940381">.</span><span class="ident" id="3940382">scan</span><span class="op" id="3940386">.</span><span class="ident" id="3940387">eof</span><span class="op" id="3940390">(</span><span class="op" id="3940391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940396">d</span><span class="op" id="3940397">.</span><span class="ident" id="3940398">off</span>&nbsp;<span class="op" id="3940402">=</span>&nbsp;<span class="builtinfunc" id="3940404">len</span><span class="op" id="3940407">(</span><span class="ident" id="3940408">d</span><span class="op" id="3940409">.</span><span class="ident" id="3940410">data</span><span class="op" id="3940414">)</span>&nbsp;<span class="op" id="3940416">+</span>&nbsp;<span class="num" id="3940418">1</span>&nbsp;<span class="comment" id="3940420">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940455">}</span>&nbsp;<span class="keyword" id="3940457">else</span>&nbsp;<span class="op" id="3940462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940467">c</span>&nbsp;<span class="op" id="3940469">:=</span>&nbsp;<span class="builtintype" id="3940472">int</span><span class="op" id="3940475">(</span><span class="ident" id="3940476">d</span><span class="op" id="3940477">.</span><span class="ident" id="3940478">data</span><span class="op" id="3940482">[</span><span class="ident" id="3940483">d</span><span class="op" id="3940484">.</span><span class="ident" id="3940485">off</span><span class="op" id="3940488">]</span><span class="op" id="3940489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940494">d</span><span class="op" id="3940495">.</span><span class="ident" id="3940496">off</span><span class="op" id="3940499">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940505">newOp</span>&nbsp;<span class="op" id="3940511">=</span>&nbsp;<span class="ident" id="3940513">d</span><span class="op" id="3940514">.</span><span class="ident" id="3940515">scan</span><span class="op" id="3940519">.</span><span class="ident" id="3940520">step</span><span class="op" id="3940524">(</span><span class="op" id="3940525">&amp;</span><span class="ident" id="3940526">d</span><span class="op" id="3940527">.</span><span class="ident" id="3940528">scan</span><span class="op" id="3940532">,</span>&nbsp;<span class="ident" id="3940534">c</span><span class="op" id="3940535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940539">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940543">if</span>&nbsp;<span class="ident" id="3940546">newOp</span>&nbsp;<span class="op" id="3940552">!=</span>&nbsp;<span class="ident" id="3940555">op</span>&nbsp;<span class="op" id="3940558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940563">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940577">return</span>&nbsp;<span class="ident" id="3940584">newOp</span><br>
<span class="lineno">245</span><span class="op" id="3940590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3940593">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3940659">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3940712">func</span>&nbsp;<span class="op" id="3940717">(</span><span class="ident" id="3940718">d</span>&nbsp;<span class="op" id="3940720">*</span><span class="ident" id="3940721">decodeState</span><span class="op" id="3940732">)</span>&nbsp;<span class="ident" id="3940734">value</span><span class="op" id="3940739">(</span><span class="ident" id="3940740">v</span>&nbsp;<span class="ident" id="3940742">reflect</span><span class="op" id="3940749">.</span><span class="ident" id="3940750">Value</span><span class="op" id="3940755">)</span>&nbsp;<span class="op" id="3940757">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940760">if</span>&nbsp;<span class="op" id="3940763">!</span><span class="ident" id="3940764">v</span><span class="op" id="3940765">.</span><span class="ident" id="3940766">IsValid</span><span class="op" id="3940773">(</span><span class="op" id="3940774">)</span>&nbsp;<span class="op" id="3940776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940780">_</span><span class="op" id="3940781">,</span>&nbsp;<span class="ident" id="3940783">rest</span><span class="op" id="3940787">,</span>&nbsp;<span class="ident" id="3940789">err</span>&nbsp;<span class="op" id="3940793">:=</span>&nbsp;<span class="ident" id="3940796">nextValue</span><span class="op" id="3940805">(</span><span class="ident" id="3940806">d</span><span class="op" id="3940807">.</span><span class="ident" id="3940808">data</span><span class="op" id="3940812">[</span><span class="ident" id="3940813">d</span><span class="op" id="3940814">.</span><span class="ident" id="3940815">off</span><span class="op" id="3940818">:</span><span class="op" id="3940819">]</span><span class="op" id="3940820">,</span>&nbsp;<span class="op" id="3940822">&amp;</span><span class="ident" id="3940823">d</span><span class="op" id="3940824">.</span><span class="ident" id="3940825">nextscan</span><span class="op" id="3940833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3940837">if</span>&nbsp;<span class="ident" id="3940840">err</span>&nbsp;<span class="op" id="3940844">!=</span>&nbsp;<span class="ident" id="3940847">nil</span>&nbsp;<span class="op" id="3940851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940856">d</span><span class="op" id="3940857">.</span><span class="builtintype" id="3940858">error</span><span class="op" id="3940863">(</span><span class="ident" id="3940864">err</span><span class="op" id="3940867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3940871">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3940875">d</span><span class="op" id="3940876">.</span><span class="ident" id="3940877">off</span>&nbsp;<span class="op" id="3940881">=</span>&nbsp;<span class="builtinfunc" id="3940883">len</span><span class="op" id="3940886">(</span><span class="ident" id="3940887">d</span><span class="op" id="3940888">.</span><span class="ident" id="3940889">data</span><span class="op" id="3940893">)</span>&nbsp;<span class="op" id="3940895">-</span>&nbsp;<span class="builtinfunc" id="3940897">len</span><span class="op" id="3940900">(</span><span class="ident" id="3940901">rest</span><span class="op" id="3940905">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3940910">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3940971">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3941033">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941087">if</span>&nbsp;<span class="ident" id="3941090">d</span><span class="op" id="3941091">.</span><span class="ident" id="3941092">scan</span><span class="op" id="3941096">.</span><span class="ident" id="3941097">redo</span>&nbsp;<span class="op" id="3941102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3941107">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941121">d</span><span class="op" id="3941122">.</span><span class="ident" id="3941123">scan</span><span class="op" id="3941127">.</span><span class="ident" id="3941128">redo</span>&nbsp;<span class="op" id="3941133">=</span>&nbsp;<span class="builtintype" id="3941135">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941144">d</span><span class="op" id="3941145">.</span><span class="ident" id="3941146">scan</span><span class="op" id="3941150">.</span><span class="ident" id="3941151">step</span>&nbsp;<span class="op" id="3941156">=</span>&nbsp;<span class="ident" id="3941158">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941176">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941180">d</span><span class="op" id="3941181">.</span><span class="ident" id="3941182">scan</span><span class="op" id="3941186">.</span><span class="ident" id="3941187">step</span><span class="op" id="3941191">(</span><span class="op" id="3941192">&amp;</span><span class="ident" id="3941193">d</span><span class="op" id="3941194">.</span><span class="ident" id="3941195">scan</span><span class="op" id="3941199">,</span>&nbsp;<span class="string" id="3941201">&#39;&#34;&#39;</span><span class="op" id="3941204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941208">d</span><span class="op" id="3941209">.</span><span class="ident" id="3941210">scan</span><span class="op" id="3941214">.</span><span class="ident" id="3941215">step</span><span class="op" id="3941219">(</span><span class="op" id="3941220">&amp;</span><span class="ident" id="3941221">d</span><span class="op" id="3941222">.</span><span class="ident" id="3941223">scan</span><span class="op" id="3941227">,</span>&nbsp;<span class="string" id="3941229">&#39;&#34;&#39;</span><span class="op" id="3941232">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941237">n</span>&nbsp;<span class="op" id="3941239">:=</span>&nbsp;<span class="builtinfunc" id="3941242">len</span><span class="op" id="3941245">(</span><span class="ident" id="3941246">d</span><span class="op" id="3941247">.</span><span class="ident" id="3941248">scan</span><span class="op" id="3941252">.</span><span class="ident" id="3941253">parseState</span><span class="op" id="3941263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941267">if</span>&nbsp;<span class="ident" id="3941270">n</span>&nbsp;<span class="op" id="3941272">&gt;</span>&nbsp;<span class="num" id="3941274">0</span>&nbsp;<span class="op" id="3941276">&amp;&amp;</span>&nbsp;<span class="ident" id="3941279">d</span><span class="op" id="3941280">.</span><span class="ident" id="3941281">scan</span><span class="op" id="3941285">.</span><span class="ident" id="3941286">parseState</span><span class="op" id="3941296">[</span><span class="ident" id="3941297">n</span><span class="op" id="3941298">-</span><span class="num" id="3941299">1</span><span class="op" id="3941300">]</span>&nbsp;<span class="op" id="3941302">==</span>&nbsp;<span class="ident" id="3941305">parseObjectKey</span>&nbsp;<span class="op" id="3941320">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3941325">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941391">d</span><span class="op" id="3941392">.</span><span class="ident" id="3941393">scan</span><span class="op" id="3941397">.</span><span class="ident" id="3941398">step</span><span class="op" id="3941402">(</span><span class="op" id="3941403">&amp;</span><span class="ident" id="3941404">d</span><span class="op" id="3941405">.</span><span class="ident" id="3941406">scan</span><span class="op" id="3941410">,</span>&nbsp;<span class="string" id="3941412">&#39;:&#39;</span><span class="op" id="3941415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941420">d</span><span class="op" id="3941421">.</span><span class="ident" id="3941422">scan</span><span class="op" id="3941426">.</span><span class="ident" id="3941427">step</span><span class="op" id="3941431">(</span><span class="op" id="3941432">&amp;</span><span class="ident" id="3941433">d</span><span class="op" id="3941434">.</span><span class="ident" id="3941435">scan</span><span class="op" id="3941439">,</span>&nbsp;<span class="string" id="3941441">&#39;&#34;&#39;</span><span class="op" id="3941444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941449">d</span><span class="op" id="3941450">.</span><span class="ident" id="3941451">scan</span><span class="op" id="3941455">.</span><span class="ident" id="3941456">step</span><span class="op" id="3941460">(</span><span class="op" id="3941461">&amp;</span><span class="ident" id="3941462">d</span><span class="op" id="3941463">.</span><span class="ident" id="3941464">scan</span><span class="op" id="3941468">,</span>&nbsp;<span class="string" id="3941470">&#39;&#34;&#39;</span><span class="op" id="3941473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941478">d</span><span class="op" id="3941479">.</span><span class="ident" id="3941480">scan</span><span class="op" id="3941484">.</span><span class="ident" id="3941485">step</span><span class="op" id="3941489">(</span><span class="op" id="3941490">&amp;</span><span class="ident" id="3941491">d</span><span class="op" id="3941492">.</span><span class="ident" id="3941493">scan</span><span class="op" id="3941497">,</span>&nbsp;<span class="string" id="3941499">&#39;}&#39;</span><span class="op" id="3941502">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941511">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941523">switch</span>&nbsp;<span class="ident" id="3941530">op</span>&nbsp;<span class="op" id="3941533">:=</span>&nbsp;<span class="ident" id="3941536">d</span><span class="op" id="3941537">.</span><span class="ident" id="3941538">scanWhile</span><span class="op" id="3941547">(</span><span class="ident" id="3941548">scanSkipSpace</span><span class="op" id="3941561">)</span><span class="op" id="3941562">;</span>&nbsp;<span class="ident" id="3941564">op</span>&nbsp;<span class="op" id="3941567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941570">default</span><span class="op" id="3941577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941581">d</span><span class="op" id="3941582">.</span><span class="builtintype" id="3941583">error</span><span class="op" id="3941588">(</span><span class="ident" id="3941589">errPhase</span><span class="op" id="3941597">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941601">case</span>&nbsp;<span class="ident" id="3941606">scanBeginArray</span><span class="op" id="3941620">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941624">d</span><span class="op" id="3941625">.</span><span class="ident" id="3941626">array</span><span class="op" id="3941631">(</span><span class="ident" id="3941632">v</span><span class="op" id="3941633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941637">case</span>&nbsp;<span class="ident" id="3941642">scanBeginObject</span><span class="op" id="3941657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941661">d</span><span class="op" id="3941662">.</span><span class="ident" id="3941663">object</span><span class="op" id="3941669">(</span><span class="ident" id="3941670">v</span><span class="op" id="3941671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941675">case</span>&nbsp;<span class="ident" id="3941680">scanBeginLiteral</span><span class="op" id="3941696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941700">d</span><span class="op" id="3941701">.</span><span class="ident" id="3941702">literal</span><span class="op" id="3941709">(</span><span class="ident" id="3941710">v</span><span class="op" id="3941711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941714">}</span><br>
<span class="lineno"></span><span class="op" id="3941716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="3941719">type</span>&nbsp;<span class="ident" id="3941724">unquotedValue</span>&nbsp;<span class="keyword" id="3941738">struct</span><span class="op" id="3941744">{</span><span class="op" id="3941745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3941748">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3941791">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3941857">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="3941925">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3941965">func</span>&nbsp;<span class="op" id="3941970">(</span><span class="ident" id="3941971">d</span>&nbsp;<span class="op" id="3941973">*</span><span class="ident" id="3941974">decodeState</span><span class="op" id="3941985">)</span>&nbsp;<span class="ident" id="3941987">valueQuoted</span><span class="op" id="3941998">(</span><span class="op" id="3941999">)</span>&nbsp;<span class="keyword" id="3942001">interface</span><span class="op" id="3942010">{</span><span class="op" id="3942011">}</span>&nbsp;<span class="op" id="3942013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942016">switch</span>&nbsp;<span class="ident" id="3942023">op</span>&nbsp;<span class="op" id="3942026">:=</span>&nbsp;<span class="ident" id="3942029">d</span><span class="op" id="3942030">.</span><span class="ident" id="3942031">scanWhile</span><span class="op" id="3942040">(</span><span class="ident" id="3942041">scanSkipSpace</span><span class="op" id="3942054">)</span><span class="op" id="3942055">;</span>&nbsp;<span class="ident" id="3942057">op</span>&nbsp;<span class="op" id="3942060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942063">default</span><span class="op" id="3942070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942074">d</span><span class="op" id="3942075">.</span><span class="builtintype" id="3942076">error</span><span class="op" id="3942081">(</span><span class="ident" id="3942082">errPhase</span><span class="op" id="3942090">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942094">case</span>&nbsp;<span class="ident" id="3942099">scanBeginArray</span><span class="op" id="3942113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942117">d</span><span class="op" id="3942118">.</span><span class="ident" id="3942119">array</span><span class="op" id="3942124">(</span><span class="ident" id="3942125">reflect</span><span class="op" id="3942132">.</span><span class="ident" id="3942133">Value</span><span class="op" id="3942138">{</span><span class="op" id="3942139">}</span><span class="op" id="3942140">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942144">case</span>&nbsp;<span class="ident" id="3942149">scanBeginObject</span><span class="op" id="3942164">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942168">d</span><span class="op" id="3942169">.</span><span class="ident" id="3942170">object</span><span class="op" id="3942176">(</span><span class="ident" id="3942177">reflect</span><span class="op" id="3942184">.</span><span class="ident" id="3942185">Value</span><span class="op" id="3942190">{</span><span class="op" id="3942191">}</span><span class="op" id="3942192">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942196">case</span>&nbsp;<span class="ident" id="3942201">scanBeginLiteral</span><span class="op" id="3942217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942221">switch</span>&nbsp;<span class="ident" id="3942228">v</span>&nbsp;<span class="op" id="3942230">:=</span>&nbsp;<span class="ident" id="3942233">d</span><span class="op" id="3942234">.</span><span class="ident" id="3942235">literalInterface</span><span class="op" id="3942251">(</span><span class="op" id="3942252">)</span><span class="op" id="3942253">.</span><span class="op" id="3942254">(</span><span class="keyword" id="3942255">type</span><span class="op" id="3942259">)</span>&nbsp;<span class="op" id="3942261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942265">case</span>&nbsp;<span class="ident" id="3942270">nil</span><span class="op" id="3942273">,</span>&nbsp;<span class="builtintype" id="3942275">string</span><span class="op" id="3942281">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942286">return</span>&nbsp;<span class="ident" id="3942293">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942303">return</span>&nbsp;<span class="ident" id="3942310">unquotedValue</span><span class="op" id="3942323">{</span><span class="op" id="3942324">}</span><br>
<span class="lineno"></span><span class="op" id="3942326">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="3942329">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="3942385">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="3942420">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="3942489">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="3942577">func</span>&nbsp;<span class="op" id="3942582">(</span><span class="ident" id="3942583">d</span>&nbsp;<span class="op" id="3942585">*</span><span class="ident" id="3942586">decodeState</span><span class="op" id="3942597">)</span>&nbsp;<span class="ident" id="3942599">indirect</span><span class="op" id="3942607">(</span><span class="ident" id="3942608">v</span>&nbsp;<span class="ident" id="3942610">reflect</span><span class="op" id="3942617">.</span><span class="ident" id="3942618">Value</span><span class="op" id="3942623">,</span>&nbsp;<span class="ident" id="3942625">decodingNull</span>&nbsp;<span class="builtintype" id="3942638">bool</span><span class="op" id="3942642">)</span>&nbsp;<span class="op" id="3942644">(</span><span class="ident" id="3942645">Unmarshaler</span><span class="op" id="3942656">,</span>&nbsp;<span class="ident" id="3942658">encoding</span><span class="op" id="3942666">.</span><span class="ident" id="3942667">TextUnmarshaler</span><span class="op" id="3942682">,</span>&nbsp;<span class="ident" id="3942684">reflect</span><span class="op" id="3942691">.</span><span class="ident" id="3942692">Value</span><span class="op" id="3942697">)</span>&nbsp;<span class="op" id="3942699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942702">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942747">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942816">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942834">if</span>&nbsp;<span class="ident" id="3942837">v</span><span class="op" id="3942838">.</span><span class="ident" id="3942839">Kind</span><span class="op" id="3942843">(</span><span class="op" id="3942844">)</span>&nbsp;<span class="op" id="3942846">!=</span>&nbsp;<span class="ident" id="3942849">reflect</span><span class="op" id="3942856">.</span><span class="ident" id="3942857">Ptr</span>&nbsp;<span class="op" id="3942861">&amp;&amp;</span>&nbsp;<span class="ident" id="3942864">v</span><span class="op" id="3942865">.</span><span class="ident" id="3942866">Type</span><span class="op" id="3942870">(</span><span class="op" id="3942871">)</span><span class="op" id="3942872">.</span><span class="ident" id="3942873">Name</span><span class="op" id="3942877">(</span><span class="op" id="3942878">)</span>&nbsp;<span class="op" id="3942880">!=</span>&nbsp;<span class="string" id="3942883">&#34;&#34;</span>&nbsp;<span class="op" id="3942886">&amp;&amp;</span>&nbsp;<span class="ident" id="3942889">v</span><span class="op" id="3942890">.</span><span class="ident" id="3942891">CanAddr</span><span class="op" id="3942898">(</span><span class="op" id="3942899">)</span>&nbsp;<span class="op" id="3942901">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942905">v</span>&nbsp;<span class="op" id="3942907">=</span>&nbsp;<span class="ident" id="3942909">v</span><span class="op" id="3942910">.</span><span class="ident" id="3942911">Addr</span><span class="op" id="3942915">(</span><span class="op" id="3942916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942922">for</span>&nbsp;<span class="op" id="3942926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942930">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942993">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943020">if</span>&nbsp;<span class="ident" id="3943023">v</span><span class="op" id="3943024">.</span><span class="ident" id="3943025">Kind</span><span class="op" id="3943029">(</span><span class="op" id="3943030">)</span>&nbsp;<span class="op" id="3943032">==</span>&nbsp;<span class="ident" id="3943035">reflect</span><span class="op" id="3943042">.</span><span class="ident" id="3943043">Interface</span>&nbsp;<span class="op" id="3943053">&amp;&amp;</span>&nbsp;<span class="op" id="3943056">!</span><span class="ident" id="3943057">v</span><span class="op" id="3943058">.</span><span class="ident" id="3943059">IsNil</span><span class="op" id="3943064">(</span><span class="op" id="3943065">)</span>&nbsp;<span class="op" id="3943067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943072">e</span>&nbsp;<span class="op" id="3943074">:=</span>&nbsp;<span class="ident" id="3943077">v</span><span class="op" id="3943078">.</span><span class="ident" id="3943079">Elem</span><span class="op" id="3943083">(</span><span class="op" id="3943084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943089">if</span>&nbsp;<span class="ident" id="3943092">e</span><span class="op" id="3943093">.</span><span class="ident" id="3943094">Kind</span><span class="op" id="3943098">(</span><span class="op" id="3943099">)</span>&nbsp;<span class="op" id="3943101">==</span>&nbsp;<span class="ident" id="3943104">reflect</span><span class="op" id="3943111">.</span><span class="ident" id="3943112">Ptr</span>&nbsp;<span class="op" id="3943116">&amp;&amp;</span>&nbsp;<span class="op" id="3943119">!</span><span class="ident" id="3943120">e</span><span class="op" id="3943121">.</span><span class="ident" id="3943122">IsNil</span><span class="op" id="3943127">(</span><span class="op" id="3943128">)</span>&nbsp;<span class="op" id="3943130">&amp;&amp;</span>&nbsp;<span class="op" id="3943133">(</span><span class="op" id="3943134">!</span><span class="ident" id="3943135">decodingNull</span>&nbsp;<span class="op" id="3943148">||</span>&nbsp;<span class="ident" id="3943151">e</span><span class="op" id="3943152">.</span><span class="ident" id="3943153">Elem</span><span class="op" id="3943157">(</span><span class="op" id="3943158">)</span><span class="op" id="3943159">.</span><span class="ident" id="3943160">Kind</span><span class="op" id="3943164">(</span><span class="op" id="3943165">)</span>&nbsp;<span class="op" id="3943167">==</span>&nbsp;<span class="ident" id="3943170">reflect</span><span class="op" id="3943177">.</span><span class="ident" id="3943178">Ptr</span><span class="op" id="3943181">)</span>&nbsp;<span class="op" id="3943183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943189">v</span>&nbsp;<span class="op" id="3943191">=</span>&nbsp;<span class="ident" id="3943193">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943199">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943220">if</span>&nbsp;<span class="ident" id="3943223">v</span><span class="op" id="3943224">.</span><span class="ident" id="3943225">Kind</span><span class="op" id="3943229">(</span><span class="op" id="3943230">)</span>&nbsp;<span class="op" id="3943232">!=</span>&nbsp;<span class="ident" id="3943235">reflect</span><span class="op" id="3943242">.</span><span class="ident" id="3943243">Ptr</span>&nbsp;<span class="op" id="3943247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943252">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943265">if</span>&nbsp;<span class="ident" id="3943268">v</span><span class="op" id="3943269">.</span><span class="ident" id="3943270">Elem</span><span class="op" id="3943274">(</span><span class="op" id="3943275">)</span><span class="op" id="3943276">.</span><span class="ident" id="3943277">Kind</span><span class="op" id="3943281">(</span><span class="op" id="3943282">)</span>&nbsp;<span class="op" id="3943284">!=</span>&nbsp;<span class="ident" id="3943287">reflect</span><span class="op" id="3943294">.</span><span class="ident" id="3943295">Ptr</span>&nbsp;<span class="op" id="3943299">&amp;&amp;</span>&nbsp;<span class="ident" id="3943302">decodingNull</span>&nbsp;<span class="op" id="3943315">&amp;&amp;</span>&nbsp;<span class="ident" id="3943318">v</span><span class="op" id="3943319">.</span><span class="ident" id="3943320">CanSet</span><span class="op" id="3943326">(</span><span class="op" id="3943327">)</span>&nbsp;<span class="op" id="3943329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943334">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943342">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943346">if</span>&nbsp;<span class="ident" id="3943349">v</span><span class="op" id="3943350">.</span><span class="ident" id="3943351">IsNil</span><span class="op" id="3943356">(</span><span class="op" id="3943357">)</span>&nbsp;<span class="op" id="3943359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943364">v</span><span class="op" id="3943365">.</span><span class="ident" id="3943366">Set</span><span class="op" id="3943369">(</span><span class="ident" id="3943370">reflect</span><span class="op" id="3943377">.</span><span class="ident" id="3943378">New</span><span class="op" id="3943381">(</span><span class="ident" id="3943382">v</span><span class="op" id="3943383">.</span><span class="ident" id="3943384">Type</span><span class="op" id="3943388">(</span><span class="op" id="3943389">)</span><span class="op" id="3943390">.</span><span class="ident" id="3943391">Elem</span><span class="op" id="3943395">(</span><span class="op" id="3943396">)</span><span class="op" id="3943397">)</span><span class="op" id="3943398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943406">if</span>&nbsp;<span class="ident" id="3943409">v</span><span class="op" id="3943410">.</span><span class="ident" id="3943411">Type</span><span class="op" id="3943415">(</span><span class="op" id="3943416">)</span><span class="op" id="3943417">.</span><span class="ident" id="3943418">NumMethod</span><span class="op" id="3943427">(</span><span class="op" id="3943428">)</span>&nbsp;<span class="op" id="3943430">&gt;</span>&nbsp;<span class="num" id="3943432">0</span>&nbsp;<span class="op" id="3943434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943439">if</span>&nbsp;<span class="ident" id="3943442">u</span><span class="op" id="3943443">,</span>&nbsp;<span class="ident" id="3943445">ok</span>&nbsp;<span class="op" id="3943448">:=</span>&nbsp;<span class="ident" id="3943451">v</span><span class="op" id="3943452">.</span><span class="ident" id="3943453">Interface</span><span class="op" id="3943462">(</span><span class="op" id="3943463">)</span><span class="op" id="3943464">.</span><span class="op" id="3943465">(</span><span class="ident" id="3943466">Unmarshaler</span><span class="op" id="3943477">)</span><span class="op" id="3943478">;</span>&nbsp;<span class="ident" id="3943480">ok</span>&nbsp;<span class="op" id="3943483">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943489">return</span>&nbsp;<span class="ident" id="3943496">u</span><span class="op" id="3943497">,</span>&nbsp;<span class="ident" id="3943499">nil</span><span class="op" id="3943502">,</span>&nbsp;<span class="ident" id="3943504">reflect</span><span class="op" id="3943511">.</span><span class="ident" id="3943512">Value</span><span class="op" id="3943517">{</span><span class="op" id="3943518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943528">if</span>&nbsp;<span class="ident" id="3943531">u</span><span class="op" id="3943532">,</span>&nbsp;<span class="ident" id="3943534">ok</span>&nbsp;<span class="op" id="3943537">:=</span>&nbsp;<span class="ident" id="3943540">v</span><span class="op" id="3943541">.</span><span class="ident" id="3943542">Interface</span><span class="op" id="3943551">(</span><span class="op" id="3943552">)</span><span class="op" id="3943553">.</span><span class="op" id="3943554">(</span><span class="ident" id="3943555">encoding</span><span class="op" id="3943563">.</span><span class="ident" id="3943564">TextUnmarshaler</span><span class="op" id="3943579">)</span><span class="op" id="3943580">;</span>&nbsp;<span class="ident" id="3943582">ok</span>&nbsp;<span class="op" id="3943585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943591">return</span>&nbsp;<span class="ident" id="3943598">nil</span><span class="op" id="3943601">,</span>&nbsp;<span class="ident" id="3943603">u</span><span class="op" id="3943604">,</span>&nbsp;<span class="ident" id="3943606">reflect</span><span class="op" id="3943613">.</span><span class="ident" id="3943614">Value</span><span class="op" id="3943619">{</span><span class="op" id="3943620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943625">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943633">v</span>&nbsp;<span class="op" id="3943635">=</span>&nbsp;<span class="ident" id="3943637">v</span><span class="op" id="3943638">.</span><span class="ident" id="3943639">Elem</span><span class="op" id="3943643">(</span><span class="op" id="3943644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943650">return</span>&nbsp;<span class="ident" id="3943657">nil</span><span class="op" id="3943660">,</span>&nbsp;<span class="ident" id="3943662">nil</span><span class="op" id="3943665">,</span>&nbsp;<span class="ident" id="3943667">v</span><br>
<span class="lineno"></span><span class="op" id="3943669">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="3943672">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3943749">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="3943809">func</span>&nbsp;<span class="op" id="3943814">(</span><span class="ident" id="3943815">d</span>&nbsp;<span class="op" id="3943817">*</span><span class="ident" id="3943818">decodeState</span><span class="op" id="3943829">)</span>&nbsp;<span class="ident" id="3943831">array</span><span class="op" id="3943836">(</span><span class="ident" id="3943837">v</span>&nbsp;<span class="ident" id="3943839">reflect</span><span class="op" id="3943846">.</span><span class="ident" id="3943847">Value</span><span class="op" id="3943852">)</span>&nbsp;<span class="op" id="3943854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3943857">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943884">u</span><span class="op" id="3943885">,</span>&nbsp;<span class="ident" id="3943887">ut</span><span class="op" id="3943889">,</span>&nbsp;<span class="ident" id="3943891">pv</span>&nbsp;<span class="op" id="3943894">:=</span>&nbsp;<span class="ident" id="3943897">d</span><span class="op" id="3943898">.</span><span class="ident" id="3943899">indirect</span><span class="op" id="3943907">(</span><span class="ident" id="3943908">v</span><span class="op" id="3943909">,</span>&nbsp;<span class="builtintype" id="3943911">false</span><span class="op" id="3943916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943919">if</span>&nbsp;<span class="ident" id="3943922">u</span>&nbsp;<span class="op" id="3943924">!=</span>&nbsp;<span class="ident" id="3943927">nil</span>&nbsp;<span class="op" id="3943931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943935">d</span><span class="op" id="3943936">.</span><span class="ident" id="3943937">off</span><span class="op" id="3943940">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943945">err</span>&nbsp;<span class="op" id="3943949">:=</span>&nbsp;<span class="ident" id="3943952">u</span><span class="op" id="3943953">.</span><span class="ident" id="3943954">UnmarshalJSON</span><span class="op" id="3943967">(</span><span class="ident" id="3943968">d</span><span class="op" id="3943969">.</span><span class="ident" id="3943970">next</span><span class="op" id="3943974">(</span><span class="op" id="3943975">)</span><span class="op" id="3943976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3943980">if</span>&nbsp;<span class="ident" id="3943983">err</span>&nbsp;<span class="op" id="3943987">!=</span>&nbsp;<span class="ident" id="3943990">nil</span>&nbsp;<span class="op" id="3943994">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943999">d</span><span class="op" id="3944000">.</span><span class="builtintype" id="3944001">error</span><span class="op" id="3944006">(</span><span class="ident" id="3944007">err</span><span class="op" id="3944010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944018">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944029">if</span>&nbsp;<span class="ident" id="3944032">ut</span>&nbsp;<span class="op" id="3944035">!=</span>&nbsp;<span class="ident" id="3944038">nil</span>&nbsp;<span class="op" id="3944042">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944046">d</span><span class="op" id="3944047">.</span><span class="ident" id="3944048">saveError</span><span class="op" id="3944057">(</span><span class="op" id="3944058">&amp;</span><span class="ident" id="3944059">UnmarshalTypeError</span><span class="op" id="3944077">{</span><span class="string" id="3944078">&#34;array&#34;</span><span class="op" id="3944085">,</span>&nbsp;<span class="ident" id="3944087">v</span><span class="op" id="3944088">.</span><span class="ident" id="3944089">Type</span><span class="op" id="3944093">(</span><span class="op" id="3944094">)</span><span class="op" id="3944095">}</span><span class="op" id="3944096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944100">d</span><span class="op" id="3944101">.</span><span class="ident" id="3944102">off</span><span class="op" id="3944105">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944110">d</span><span class="op" id="3944111">.</span><span class="ident" id="3944112">next</span><span class="op" id="3944116">(</span><span class="op" id="3944117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944121">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944129">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944133">v</span>&nbsp;<span class="op" id="3944135">=</span>&nbsp;<span class="ident" id="3944137">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944142">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944168">switch</span>&nbsp;<span class="ident" id="3944175">v</span><span class="op" id="3944176">.</span><span class="ident" id="3944177">Kind</span><span class="op" id="3944181">(</span><span class="op" id="3944182">)</span>&nbsp;<span class="op" id="3944184">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944187">case</span>&nbsp;<span class="ident" id="3944192">reflect</span><span class="op" id="3944199">.</span><span class="ident" id="3944200">Interface</span><span class="op" id="3944209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944213">if</span>&nbsp;<span class="ident" id="3944216">v</span><span class="op" id="3944217">.</span><span class="ident" id="3944218">NumMethod</span><span class="op" id="3944227">(</span><span class="op" id="3944228">)</span>&nbsp;<span class="op" id="3944230">==</span>&nbsp;<span class="num" id="3944233">0</span>&nbsp;<span class="op" id="3944235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944240">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944304">v</span><span class="op" id="3944305">.</span><span class="ident" id="3944306">Set</span><span class="op" id="3944309">(</span><span class="ident" id="3944310">reflect</span><span class="op" id="3944317">.</span><span class="ident" id="3944318">ValueOf</span><span class="op" id="3944325">(</span><span class="ident" id="3944326">d</span><span class="op" id="3944327">.</span><span class="ident" id="3944328">arrayInterface</span><span class="op" id="3944342">(</span><span class="op" id="3944343">)</span><span class="op" id="3944344">)</span><span class="op" id="3944345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944350">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944363">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944392">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944405">default</span><span class="op" id="3944412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944416">d</span><span class="op" id="3944417">.</span><span class="ident" id="3944418">saveError</span><span class="op" id="3944427">(</span><span class="op" id="3944428">&amp;</span><span class="ident" id="3944429">UnmarshalTypeError</span><span class="op" id="3944447">{</span><span class="string" id="3944448">&#34;array&#34;</span><span class="op" id="3944455">,</span>&nbsp;<span class="ident" id="3944457">v</span><span class="op" id="3944458">.</span><span class="ident" id="3944459">Type</span><span class="op" id="3944463">(</span><span class="op" id="3944464">)</span><span class="op" id="3944465">}</span><span class="op" id="3944466">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944470">d</span><span class="op" id="3944471">.</span><span class="ident" id="3944472">off</span><span class="op" id="3944475">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944480">d</span><span class="op" id="3944481">.</span><span class="ident" id="3944482">next</span><span class="op" id="3944486">(</span><span class="op" id="3944487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944491">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944499">case</span>&nbsp;<span class="ident" id="3944504">reflect</span><span class="op" id="3944511">.</span><span class="ident" id="3944512">Array</span><span class="op" id="3944517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944520">case</span>&nbsp;<span class="ident" id="3944525">reflect</span><span class="op" id="3944532">.</span><span class="ident" id="3944533">Slice</span><span class="op" id="3944538">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944542">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944553">i</span>&nbsp;<span class="op" id="3944555">:=</span>&nbsp;<span class="num" id="3944558">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944561">for</span>&nbsp;<span class="op" id="3944565">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944569">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944629">op</span>&nbsp;<span class="op" id="3944632">:=</span>&nbsp;<span class="ident" id="3944635">d</span><span class="op" id="3944636">.</span><span class="ident" id="3944637">scanWhile</span><span class="op" id="3944646">(</span><span class="ident" id="3944647">scanSkipSpace</span><span class="op" id="3944660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944664">if</span>&nbsp;<span class="ident" id="3944667">op</span>&nbsp;<span class="op" id="3944670">==</span>&nbsp;<span class="ident" id="3944673">scanEndArray</span>&nbsp;<span class="op" id="3944686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944691">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944699">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944704">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944760">d</span><span class="op" id="3944761">.</span><span class="ident" id="3944762">off</span><span class="op" id="3944765">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944770">d</span><span class="op" id="3944771">.</span><span class="ident" id="3944772">scan</span><span class="op" id="3944776">.</span><span class="ident" id="3944777">undo</span><span class="op" id="3944781">(</span><span class="ident" id="3944782">op</span><span class="op" id="3944784">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944789">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944838">if</span>&nbsp;<span class="ident" id="3944841">v</span><span class="op" id="3944842">.</span><span class="ident" id="3944843">Kind</span><span class="op" id="3944847">(</span><span class="op" id="3944848">)</span>&nbsp;<span class="op" id="3944850">==</span>&nbsp;<span class="ident" id="3944853">reflect</span><span class="op" id="3944860">.</span><span class="ident" id="3944861">Slice</span>&nbsp;<span class="op" id="3944867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3944872">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944902">if</span>&nbsp;<span class="ident" id="3944905">i</span>&nbsp;<span class="op" id="3944907">&gt;=</span>&nbsp;<span class="ident" id="3944910">v</span><span class="op" id="3944911">.</span><span class="ident" id="3944912">Cap</span><span class="op" id="3944915">(</span><span class="op" id="3944916">)</span>&nbsp;<span class="op" id="3944918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944924">newcap</span>&nbsp;<span class="op" id="3944931">:=</span>&nbsp;<span class="ident" id="3944934">v</span><span class="op" id="3944935">.</span><span class="ident" id="3944936">Cap</span><span class="op" id="3944939">(</span><span class="op" id="3944940">)</span>&nbsp;<span class="op" id="3944942">+</span>&nbsp;<span class="ident" id="3944944">v</span><span class="op" id="3944945">.</span><span class="ident" id="3944946">Cap</span><span class="op" id="3944949">(</span><span class="op" id="3944950">)</span><span class="op" id="3944951">/</span><span class="num" id="3944952">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3944958">if</span>&nbsp;<span class="ident" id="3944961">newcap</span>&nbsp;<span class="op" id="3944968">&lt;</span>&nbsp;<span class="num" id="3944970">4</span>&nbsp;<span class="op" id="3944972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3944979">newcap</span>&nbsp;<span class="op" id="3944986">=</span>&nbsp;<span class="num" id="3944988">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3944994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945000">newv</span>&nbsp;<span class="op" id="3945005">:=</span>&nbsp;<span class="ident" id="3945008">reflect</span><span class="op" id="3945015">.</span><span class="ident" id="3945016">MakeSlice</span><span class="op" id="3945025">(</span><span class="ident" id="3945026">v</span><span class="op" id="3945027">.</span><span class="ident" id="3945028">Type</span><span class="op" id="3945032">(</span><span class="op" id="3945033">)</span><span class="op" id="3945034">,</span>&nbsp;<span class="ident" id="3945036">v</span><span class="op" id="3945037">.</span><span class="ident" id="3945038">Len</span><span class="op" id="3945041">(</span><span class="op" id="3945042">)</span><span class="op" id="3945043">,</span>&nbsp;<span class="ident" id="3945045">newcap</span><span class="op" id="3945051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945057">reflect</span><span class="op" id="3945064">.</span><span class="ident" id="3945065">Copy</span><span class="op" id="3945069">(</span><span class="ident" id="3945070">newv</span><span class="op" id="3945074">,</span>&nbsp;<span class="ident" id="3945076">v</span><span class="op" id="3945077">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945083">v</span><span class="op" id="3945084">.</span><span class="ident" id="3945085">Set</span><span class="op" id="3945088">(</span><span class="ident" id="3945089">newv</span><span class="op" id="3945093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945103">if</span>&nbsp;<span class="ident" id="3945106">i</span>&nbsp;<span class="op" id="3945108">&gt;=</span>&nbsp;<span class="ident" id="3945111">v</span><span class="op" id="3945112">.</span><span class="ident" id="3945113">Len</span><span class="op" id="3945116">(</span><span class="op" id="3945117">)</span>&nbsp;<span class="op" id="3945119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945125">v</span><span class="op" id="3945126">.</span><span class="ident" id="3945127">SetLen</span><span class="op" id="3945133">(</span><span class="ident" id="3945134">i</span>&nbsp;<span class="op" id="3945136">+</span>&nbsp;<span class="num" id="3945138">1</span><span class="op" id="3945139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945144">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945153">if</span>&nbsp;<span class="ident" id="3945156">i</span>&nbsp;<span class="op" id="3945158">&lt;</span>&nbsp;<span class="ident" id="3945160">v</span><span class="op" id="3945161">.</span><span class="ident" id="3945162">Len</span><span class="op" id="3945165">(</span><span class="op" id="3945166">)</span>&nbsp;<span class="op" id="3945168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3945173">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945200">d</span><span class="op" id="3945201">.</span><span class="ident" id="3945202">value</span><span class="op" id="3945207">(</span><span class="ident" id="3945208">v</span><span class="op" id="3945209">.</span><span class="ident" id="3945210">Index</span><span class="op" id="3945215">(</span><span class="ident" id="3945216">i</span><span class="op" id="3945217">)</span><span class="op" id="3945218">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945222">}</span>&nbsp;<span class="keyword" id="3945224">else</span>&nbsp;<span class="op" id="3945229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3945234">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945270">d</span><span class="op" id="3945271">.</span><span class="ident" id="3945272">value</span><span class="op" id="3945277">(</span><span class="ident" id="3945278">reflect</span><span class="op" id="3945285">.</span><span class="ident" id="3945286">Value</span><span class="op" id="3945291">{</span><span class="op" id="3945292">}</span><span class="op" id="3945293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945301">i</span><span class="op" id="3945302">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3945308">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945340">op</span>&nbsp;<span class="op" id="3945343">=</span>&nbsp;<span class="ident" id="3945345">d</span><span class="op" id="3945346">.</span><span class="ident" id="3945347">scanWhile</span><span class="op" id="3945356">(</span><span class="ident" id="3945357">scanSkipSpace</span><span class="op" id="3945370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945374">if</span>&nbsp;<span class="ident" id="3945377">op</span>&nbsp;<span class="op" id="3945380">==</span>&nbsp;<span class="ident" id="3945383">scanEndArray</span>&nbsp;<span class="op" id="3945396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945401">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945413">if</span>&nbsp;<span class="ident" id="3945416">op</span>&nbsp;<span class="op" id="3945419">!=</span>&nbsp;<span class="ident" id="3945422">scanArrayValue</span>&nbsp;<span class="op" id="3945437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945442">d</span><span class="op" id="3945443">.</span><span class="builtintype" id="3945444">error</span><span class="op" id="3945449">(</span><span class="ident" id="3945450">errPhase</span><span class="op" id="3945458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945465">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945469">if</span>&nbsp;<span class="ident" id="3945472">i</span>&nbsp;<span class="op" id="3945474">&lt;</span>&nbsp;<span class="ident" id="3945476">v</span><span class="op" id="3945477">.</span><span class="ident" id="3945478">Len</span><span class="op" id="3945481">(</span><span class="op" id="3945482">)</span>&nbsp;<span class="op" id="3945484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945488">if</span>&nbsp;<span class="ident" id="3945491">v</span><span class="op" id="3945492">.</span><span class="ident" id="3945493">Kind</span><span class="op" id="3945497">(</span><span class="op" id="3945498">)</span>&nbsp;<span class="op" id="3945500">==</span>&nbsp;<span class="ident" id="3945503">reflect</span><span class="op" id="3945510">.</span><span class="ident" id="3945511">Array</span>&nbsp;<span class="op" id="3945517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3945522">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945551">z</span>&nbsp;<span class="op" id="3945553">:=</span>&nbsp;<span class="ident" id="3945556">reflect</span><span class="op" id="3945563">.</span><span class="ident" id="3945564">Zero</span><span class="op" id="3945568">(</span><span class="ident" id="3945569">v</span><span class="op" id="3945570">.</span><span class="ident" id="3945571">Type</span><span class="op" id="3945575">(</span><span class="op" id="3945576">)</span><span class="op" id="3945577">.</span><span class="ident" id="3945578">Elem</span><span class="op" id="3945582">(</span><span class="op" id="3945583">)</span><span class="op" id="3945584">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945589">for</span>&nbsp;<span class="op" id="3945593">;</span>&nbsp;<span class="ident" id="3945595">i</span>&nbsp;<span class="op" id="3945597">&lt;</span>&nbsp;<span class="ident" id="3945599">v</span><span class="op" id="3945600">.</span><span class="ident" id="3945601">Len</span><span class="op" id="3945604">(</span><span class="op" id="3945605">)</span><span class="op" id="3945606">;</span>&nbsp;<span class="ident" id="3945608">i</span><span class="op" id="3945609">++</span>&nbsp;<span class="op" id="3945612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945618">v</span><span class="op" id="3945619">.</span><span class="ident" id="3945620">Index</span><span class="op" id="3945625">(</span><span class="ident" id="3945626">i</span><span class="op" id="3945627">)</span><span class="op" id="3945628">.</span><span class="ident" id="3945629">Set</span><span class="op" id="3945632">(</span><span class="ident" id="3945633">z</span><span class="op" id="3945634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945643">}</span>&nbsp;<span class="keyword" id="3945645">else</span>&nbsp;<span class="op" id="3945650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945655">v</span><span class="op" id="3945656">.</span><span class="ident" id="3945657">SetLen</span><span class="op" id="3945663">(</span><span class="ident" id="3945664">i</span><span class="op" id="3945665">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3945675">if</span>&nbsp;<span class="ident" id="3945678">i</span>&nbsp;<span class="op" id="3945680">==</span>&nbsp;<span class="num" id="3945683">0</span>&nbsp;<span class="op" id="3945685">&amp;&amp;</span>&nbsp;<span class="ident" id="3945688">v</span><span class="op" id="3945689">.</span><span class="ident" id="3945690">Kind</span><span class="op" id="3945694">(</span><span class="op" id="3945695">)</span>&nbsp;<span class="op" id="3945697">==</span>&nbsp;<span class="ident" id="3945700">reflect</span><span class="op" id="3945707">.</span><span class="ident" id="3945708">Slice</span>&nbsp;<span class="op" id="3945714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3945718">v</span><span class="op" id="3945719">.</span><span class="ident" id="3945720">Set</span><span class="op" id="3945723">(</span><span class="ident" id="3945724">reflect</span><span class="op" id="3945731">.</span><span class="ident" id="3945732">MakeSlice</span><span class="op" id="3945741">(</span><span class="ident" id="3945742">v</span><span class="op" id="3945743">.</span><span class="ident" id="3945744">Type</span><span class="op" id="3945748">(</span><span class="op" id="3945749">)</span><span class="op" id="3945750">,</span>&nbsp;<span class="num" id="3945752">0</span><span class="op" id="3945753">,</span>&nbsp;<span class="num" id="3945755">0</span><span class="op" id="3945756">)</span><span class="op" id="3945757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3945760">}</span><br>
<span class="lineno">470</span><span class="op" id="3945762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3945765">var</span>&nbsp;<span class="ident" id="3945769">nullLiteral</span>&nbsp;<span class="op" id="3945781">=</span>&nbsp;<span class="op" id="3945783">[</span><span class="op" id="3945784">]</span><span class="builtintype" id="3945785">byte</span><span class="op" id="3945789">(</span><span class="string" id="3945790">&#34;null&#34;</span><span class="op" id="3945796">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3945799">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="3945878">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="3945939">func</span>&nbsp;<span class="op" id="3945944">(</span><span class="ident" id="3945945">d</span>&nbsp;<span class="op" id="3945947">*</span><span class="ident" id="3945948">decodeState</span><span class="op" id="3945959">)</span>&nbsp;<span class="ident" id="3945961">object</span><span class="op" id="3945967">(</span><span class="ident" id="3945968">v</span>&nbsp;<span class="ident" id="3945970">reflect</span><span class="op" id="3945977">.</span><span class="ident" id="3945978">Value</span><span class="op" id="3945983">)</span>&nbsp;<span class="op" id="3945985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3945988">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946015">u</span><span class="op" id="3946016">,</span>&nbsp;<span class="ident" id="3946018">ut</span><span class="op" id="3946020">,</span>&nbsp;<span class="ident" id="3946022">pv</span>&nbsp;<span class="op" id="3946025">:=</span>&nbsp;<span class="ident" id="3946028">d</span><span class="op" id="3946029">.</span><span class="ident" id="3946030">indirect</span><span class="op" id="3946038">(</span><span class="ident" id="3946039">v</span><span class="op" id="3946040">,</span>&nbsp;<span class="builtintype" id="3946042">false</span><span class="op" id="3946047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946050">if</span>&nbsp;<span class="ident" id="3946053">u</span>&nbsp;<span class="op" id="3946055">!=</span>&nbsp;<span class="ident" id="3946058">nil</span>&nbsp;<span class="op" id="3946062">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946066">d</span><span class="op" id="3946067">.</span><span class="ident" id="3946068">off</span><span class="op" id="3946071">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946076">err</span>&nbsp;<span class="op" id="3946080">:=</span>&nbsp;<span class="ident" id="3946083">u</span><span class="op" id="3946084">.</span><span class="ident" id="3946085">UnmarshalJSON</span><span class="op" id="3946098">(</span><span class="ident" id="3946099">d</span><span class="op" id="3946100">.</span><span class="ident" id="3946101">next</span><span class="op" id="3946105">(</span><span class="op" id="3946106">)</span><span class="op" id="3946107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946111">if</span>&nbsp;<span class="ident" id="3946114">err</span>&nbsp;<span class="op" id="3946118">!=</span>&nbsp;<span class="ident" id="3946121">nil</span>&nbsp;<span class="op" id="3946125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946130">d</span><span class="op" id="3946131">.</span><span class="builtintype" id="3946132">error</span><span class="op" id="3946137">(</span><span class="ident" id="3946138">err</span><span class="op" id="3946141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946145">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946149">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946160">if</span>&nbsp;<span class="ident" id="3946163">ut</span>&nbsp;<span class="op" id="3946166">!=</span>&nbsp;<span class="ident" id="3946169">nil</span>&nbsp;<span class="op" id="3946173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946177">d</span><span class="op" id="3946178">.</span><span class="ident" id="3946179">saveError</span><span class="op" id="3946188">(</span><span class="op" id="3946189">&amp;</span><span class="ident" id="3946190">UnmarshalTypeError</span><span class="op" id="3946208">{</span><span class="string" id="3946209">&#34;object&#34;</span><span class="op" id="3946217">,</span>&nbsp;<span class="ident" id="3946219">v</span><span class="op" id="3946220">.</span><span class="ident" id="3946221">Type</span><span class="op" id="3946225">(</span><span class="op" id="3946226">)</span><span class="op" id="3946227">}</span><span class="op" id="3946228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946232">d</span><span class="op" id="3946233">.</span><span class="ident" id="3946234">off</span><span class="op" id="3946237">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946242">d</span><span class="op" id="3946243">.</span><span class="ident" id="3946244">next</span><span class="op" id="3946248">(</span><span class="op" id="3946249">)</span>&nbsp;<span class="comment" id="3946251">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946279">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946290">v</span>&nbsp;<span class="op" id="3946292">=</span>&nbsp;<span class="ident" id="3946294">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3946299">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946361">if</span>&nbsp;<span class="ident" id="3946364">v</span><span class="op" id="3946365">.</span><span class="ident" id="3946366">Kind</span><span class="op" id="3946370">(</span><span class="op" id="3946371">)</span>&nbsp;<span class="op" id="3946373">==</span>&nbsp;<span class="ident" id="3946376">reflect</span><span class="op" id="3946383">.</span><span class="ident" id="3946384">Interface</span>&nbsp;<span class="op" id="3946394">&amp;&amp;</span>&nbsp;<span class="ident" id="3946397">v</span><span class="op" id="3946398">.</span><span class="ident" id="3946399">NumMethod</span><span class="op" id="3946408">(</span><span class="op" id="3946409">)</span>&nbsp;<span class="op" id="3946411">==</span>&nbsp;<span class="num" id="3946414">0</span>&nbsp;<span class="op" id="3946416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946420">v</span><span class="op" id="3946421">.</span><span class="ident" id="3946422">Set</span><span class="op" id="3946425">(</span><span class="ident" id="3946426">reflect</span><span class="op" id="3946433">.</span><span class="ident" id="3946434">ValueOf</span><span class="op" id="3946441">(</span><span class="ident" id="3946442">d</span><span class="op" id="3946443">.</span><span class="ident" id="3946444">objectInterface</span><span class="op" id="3946459">(</span><span class="op" id="3946460">)</span><span class="op" id="3946461">)</span><span class="op" id="3946462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946466">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946474">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3946478">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946527">switch</span>&nbsp;<span class="ident" id="3946534">v</span><span class="op" id="3946535">.</span><span class="ident" id="3946536">Kind</span><span class="op" id="3946540">(</span><span class="op" id="3946541">)</span>&nbsp;<span class="op" id="3946543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946546">case</span>&nbsp;<span class="ident" id="3946551">reflect</span><span class="op" id="3946558">.</span><span class="ident" id="3946559">Map</span><span class="op" id="3946562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3946566">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946597">t</span>&nbsp;<span class="op" id="3946599">:=</span>&nbsp;<span class="ident" id="3946602">v</span><span class="op" id="3946603">.</span><span class="ident" id="3946604">Type</span><span class="op" id="3946608">(</span><span class="op" id="3946609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946613">if</span>&nbsp;<span class="ident" id="3946616">t</span><span class="op" id="3946617">.</span><span class="ident" id="3946618">Key</span><span class="op" id="3946621">(</span><span class="op" id="3946622">)</span><span class="op" id="3946623">.</span><span class="ident" id="3946624">Kind</span><span class="op" id="3946628">(</span><span class="op" id="3946629">)</span>&nbsp;<span class="op" id="3946631">!=</span>&nbsp;<span class="ident" id="3946634">reflect</span><span class="op" id="3946641">.</span><span class="ident" id="3946642">String</span>&nbsp;<span class="op" id="3946649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946654">d</span><span class="op" id="3946655">.</span><span class="ident" id="3946656">saveError</span><span class="op" id="3946665">(</span><span class="op" id="3946666">&amp;</span><span class="ident" id="3946667">UnmarshalTypeError</span><span class="op" id="3946685">{</span><span class="string" id="3946686">&#34;object&#34;</span><span class="op" id="3946694">,</span>&nbsp;<span class="ident" id="3946696">v</span><span class="op" id="3946697">.</span><span class="ident" id="3946698">Type</span><span class="op" id="3946702">(</span><span class="op" id="3946703">)</span><span class="op" id="3946704">}</span><span class="op" id="3946705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946710">d</span><span class="op" id="3946711">.</span><span class="ident" id="3946712">off</span><span class="op" id="3946715">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946721">d</span><span class="op" id="3946722">.</span><span class="ident" id="3946723">next</span><span class="op" id="3946727">(</span><span class="op" id="3946728">)</span>&nbsp;<span class="comment" id="3946730">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946759">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946772">if</span>&nbsp;<span class="ident" id="3946775">v</span><span class="op" id="3946776">.</span><span class="ident" id="3946777">IsNil</span><span class="op" id="3946782">(</span><span class="op" id="3946783">)</span>&nbsp;<span class="op" id="3946785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946790">v</span><span class="op" id="3946791">.</span><span class="ident" id="3946792">Set</span><span class="op" id="3946795">(</span><span class="ident" id="3946796">reflect</span><span class="op" id="3946803">.</span><span class="ident" id="3946804">MakeMap</span><span class="op" id="3946811">(</span><span class="ident" id="3946812">t</span><span class="op" id="3946813">)</span><span class="op" id="3946814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946818">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946821">case</span>&nbsp;<span class="ident" id="3946826">reflect</span><span class="op" id="3946833">.</span><span class="ident" id="3946834">Struct</span><span class="op" id="3946840">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946844">default</span><span class="op" id="3946851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946855">d</span><span class="op" id="3946856">.</span><span class="ident" id="3946857">saveError</span><span class="op" id="3946866">(</span><span class="op" id="3946867">&amp;</span><span class="ident" id="3946868">UnmarshalTypeError</span><span class="op" id="3946886">{</span><span class="string" id="3946887">&#34;object&#34;</span><span class="op" id="3946895">,</span>&nbsp;<span class="ident" id="3946897">v</span><span class="op" id="3946898">.</span><span class="ident" id="3946899">Type</span><span class="op" id="3946903">(</span><span class="op" id="3946904">)</span><span class="op" id="3946905">}</span><span class="op" id="3946906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946910">d</span><span class="op" id="3946911">.</span><span class="ident" id="3946912">off</span><span class="op" id="3946915">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3946920">d</span><span class="op" id="3946921">.</span><span class="ident" id="3946922">next</span><span class="op" id="3946926">(</span><span class="op" id="3946927">)</span>&nbsp;<span class="comment" id="3946929">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946957">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3946965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946969">var</span>&nbsp;<span class="ident" id="3946973">mapElem</span>&nbsp;<span class="ident" id="3946981">reflect</span><span class="op" id="3946988">.</span><span class="ident" id="3946989">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3946997">for</span>&nbsp;<span class="op" id="3947001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3947005">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947053">op</span>&nbsp;<span class="op" id="3947056">:=</span>&nbsp;<span class="ident" id="3947059">d</span><span class="op" id="3947060">.</span><span class="ident" id="3947061">scanWhile</span><span class="op" id="3947070">(</span><span class="ident" id="3947071">scanSkipSpace</span><span class="op" id="3947084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947088">if</span>&nbsp;<span class="ident" id="3947091">op</span>&nbsp;<span class="op" id="3947094">==</span>&nbsp;<span class="ident" id="3947097">scanEndObject</span>&nbsp;<span class="op" id="3947111">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3947116">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947170">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947182">if</span>&nbsp;<span class="ident" id="3947185">op</span>&nbsp;<span class="op" id="3947188">!=</span>&nbsp;<span class="ident" id="3947191">scanBeginLiteral</span>&nbsp;<span class="op" id="3947208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947213">d</span><span class="op" id="3947214">.</span><span class="builtintype" id="3947215">error</span><span class="op" id="3947220">(</span><span class="ident" id="3947221">errPhase</span><span class="op" id="3947229">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3947238">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947253">start</span>&nbsp;<span class="op" id="3947259">:=</span>&nbsp;<span class="ident" id="3947262">d</span><span class="op" id="3947263">.</span><span class="ident" id="3947264">off</span>&nbsp;<span class="op" id="3947268">-</span>&nbsp;<span class="num" id="3947270">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947274">op</span>&nbsp;<span class="op" id="3947277">=</span>&nbsp;<span class="ident" id="3947279">d</span><span class="op" id="3947280">.</span><span class="ident" id="3947281">scanWhile</span><span class="op" id="3947290">(</span><span class="ident" id="3947291">scanContinue</span><span class="op" id="3947303">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947307">item</span>&nbsp;<span class="op" id="3947312">:=</span>&nbsp;<span class="ident" id="3947315">d</span><span class="op" id="3947316">.</span><span class="ident" id="3947317">data</span><span class="op" id="3947321">[</span><span class="ident" id="3947322">start</span>&nbsp;<span class="op" id="3947328">:</span>&nbsp;<span class="ident" id="3947330">d</span><span class="op" id="3947331">.</span><span class="ident" id="3947332">off</span><span class="op" id="3947335">-</span><span class="num" id="3947336">1</span><span class="op" id="3947337">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947341">key</span><span class="op" id="3947344">,</span>&nbsp;<span class="ident" id="3947346">ok</span>&nbsp;<span class="op" id="3947349">:=</span>&nbsp;<span class="ident" id="3947352">unquoteBytes</span><span class="op" id="3947364">(</span><span class="ident" id="3947365">item</span><span class="op" id="3947369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947373">if</span>&nbsp;<span class="op" id="3947376">!</span><span class="ident" id="3947377">ok</span>&nbsp;<span class="op" id="3947380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947385">d</span><span class="op" id="3947386">.</span><span class="builtintype" id="3947387">error</span><span class="op" id="3947392">(</span><span class="ident" id="3947393">errPhase</span><span class="op" id="3947401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947405">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3947410">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947454">var</span>&nbsp;<span class="ident" id="3947458">subv</span>&nbsp;<span class="ident" id="3947463">reflect</span><span class="op" id="3947470">.</span><span class="ident" id="3947471">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947479">destring</span>&nbsp;<span class="op" id="3947488">:=</span>&nbsp;<span class="builtintype" id="3947491">false</span>&nbsp;<span class="comment" id="3947497">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947564">if</span>&nbsp;<span class="ident" id="3947567">v</span><span class="op" id="3947568">.</span><span class="ident" id="3947569">Kind</span><span class="op" id="3947573">(</span><span class="op" id="3947574">)</span>&nbsp;<span class="op" id="3947576">==</span>&nbsp;<span class="ident" id="3947579">reflect</span><span class="op" id="3947586">.</span><span class="ident" id="3947587">Map</span>&nbsp;<span class="op" id="3947591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947596">elemType</span>&nbsp;<span class="op" id="3947605">:=</span>&nbsp;<span class="ident" id="3947608">v</span><span class="op" id="3947609">.</span><span class="ident" id="3947610">Type</span><span class="op" id="3947614">(</span><span class="op" id="3947615">)</span><span class="op" id="3947616">.</span><span class="ident" id="3947617">Elem</span><span class="op" id="3947621">(</span><span class="op" id="3947622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947627">if</span>&nbsp;<span class="op" id="3947630">!</span><span class="ident" id="3947631">mapElem</span><span class="op" id="3947638">.</span><span class="ident" id="3947639">IsValid</span><span class="op" id="3947646">(</span><span class="op" id="3947647">)</span>&nbsp;<span class="op" id="3947649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947655">mapElem</span>&nbsp;<span class="op" id="3947663">=</span>&nbsp;<span class="ident" id="3947665">reflect</span><span class="op" id="3947672">.</span><span class="ident" id="3947673">New</span><span class="op" id="3947676">(</span><span class="ident" id="3947677">elemType</span><span class="op" id="3947685">)</span><span class="op" id="3947686">.</span><span class="ident" id="3947687">Elem</span><span class="op" id="3947691">(</span><span class="op" id="3947692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947697">}</span>&nbsp;<span class="keyword" id="3947699">else</span>&nbsp;<span class="op" id="3947704">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947710">mapElem</span><span class="op" id="3947717">.</span><span class="ident" id="3947718">Set</span><span class="op" id="3947721">(</span><span class="ident" id="3947722">reflect</span><span class="op" id="3947729">.</span><span class="ident" id="3947730">Zero</span><span class="op" id="3947734">(</span><span class="ident" id="3947735">elemType</span><span class="op" id="3947743">)</span><span class="op" id="3947744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947754">subv</span>&nbsp;<span class="op" id="3947759">=</span>&nbsp;<span class="ident" id="3947761">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947771">}</span>&nbsp;<span class="keyword" id="3947773">else</span>&nbsp;<span class="op" id="3947778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947783">var</span>&nbsp;<span class="ident" id="3947787">f</span>&nbsp;<span class="op" id="3947789">*</span><span class="ident" id="3947790">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947799">fields</span>&nbsp;<span class="op" id="3947806">:=</span>&nbsp;<span class="ident" id="3947809">cachedTypeFields</span><span class="op" id="3947825">(</span><span class="ident" id="3947826">v</span><span class="op" id="3947827">.</span><span class="ident" id="3947828">Type</span><span class="op" id="3947832">(</span><span class="op" id="3947833">)</span><span class="op" id="3947834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947839">for</span>&nbsp;<span class="ident" id="3947843">i</span>&nbsp;<span class="op" id="3947845">:=</span>&nbsp;<span class="keyword" id="3947848">range</span>&nbsp;<span class="ident" id="3947854">fields</span>&nbsp;<span class="op" id="3947861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947867">ff</span>&nbsp;<span class="op" id="3947870">:=</span>&nbsp;<span class="op" id="3947873">&amp;</span><span class="ident" id="3947874">fields</span><span class="op" id="3947880">[</span><span class="ident" id="3947881">i</span><span class="op" id="3947882">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947888">if</span>&nbsp;<span class="ident" id="3947891">bytes</span><span class="op" id="3947896">.</span><span class="ident" id="3947897">Equal</span><span class="op" id="3947902">(</span><span class="ident" id="3947903">ff</span><span class="op" id="3947905">.</span><span class="ident" id="3947906">nameBytes</span><span class="op" id="3947915">,</span>&nbsp;<span class="ident" id="3947917">key</span><span class="op" id="3947920">)</span>&nbsp;<span class="op" id="3947922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3947929">f</span>&nbsp;<span class="op" id="3947931">=</span>&nbsp;<span class="ident" id="3947933">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947941">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3947951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3947957">if</span>&nbsp;<span class="ident" id="3947960">f</span>&nbsp;<span class="op" id="3947962">==</span>&nbsp;<span class="ident" id="3947965">nil</span>&nbsp;<span class="op" id="3947969">&amp;&amp;</span>&nbsp;<span class="ident" id="3947972">ff</span><span class="op" id="3947974">.</span><span class="ident" id="3947975">equalFold</span><span class="op" id="3947984">(</span><span class="ident" id="3947985">ff</span><span class="op" id="3947987">.</span><span class="ident" id="3947988">nameBytes</span><span class="op" id="3947997">,</span>&nbsp;<span class="ident" id="3947999">key</span><span class="op" id="3948002">)</span>&nbsp;<span class="op" id="3948004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948011">f</span>&nbsp;<span class="op" id="3948013">=</span>&nbsp;<span class="ident" id="3948015">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948022">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948032">if</span>&nbsp;<span class="ident" id="3948035">f</span>&nbsp;<span class="op" id="3948037">!=</span>&nbsp;<span class="ident" id="3948040">nil</span>&nbsp;<span class="op" id="3948044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948050">subv</span>&nbsp;<span class="op" id="3948055">=</span>&nbsp;<span class="ident" id="3948057">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948063">destring</span>&nbsp;<span class="op" id="3948072">=</span>&nbsp;<span class="ident" id="3948074">f</span><span class="op" id="3948075">.</span><span class="ident" id="3948076">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948087">for</span>&nbsp;<span class="ident" id="3948091">_</span><span class="op" id="3948092">,</span>&nbsp;<span class="ident" id="3948094">i</span>&nbsp;<span class="op" id="3948096">:=</span>&nbsp;<span class="keyword" id="3948099">range</span>&nbsp;<span class="ident" id="3948105">f</span><span class="op" id="3948106">.</span><span class="ident" id="3948107">index</span>&nbsp;<span class="op" id="3948113">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948120">if</span>&nbsp;<span class="ident" id="3948123">subv</span><span class="op" id="3948127">.</span><span class="ident" id="3948128">Kind</span><span class="op" id="3948132">(</span><span class="op" id="3948133">)</span>&nbsp;<span class="op" id="3948135">==</span>&nbsp;<span class="ident" id="3948138">reflect</span><span class="op" id="3948145">.</span><span class="ident" id="3948146">Ptr</span>&nbsp;<span class="op" id="3948150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948158">if</span>&nbsp;<span class="ident" id="3948161">subv</span><span class="op" id="3948165">.</span><span class="ident" id="3948166">IsNil</span><span class="op" id="3948171">(</span><span class="op" id="3948172">)</span>&nbsp;<span class="op" id="3948174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948183">subv</span><span class="op" id="3948187">.</span><span class="ident" id="3948188">Set</span><span class="op" id="3948191">(</span><span class="ident" id="3948192">reflect</span><span class="op" id="3948199">.</span><span class="ident" id="3948200">New</span><span class="op" id="3948203">(</span><span class="ident" id="3948204">subv</span><span class="op" id="3948208">.</span><span class="ident" id="3948209">Type</span><span class="op" id="3948213">(</span><span class="op" id="3948214">)</span><span class="op" id="3948215">.</span><span class="ident" id="3948216">Elem</span><span class="op" id="3948220">(</span><span class="op" id="3948221">)</span><span class="op" id="3948222">)</span><span class="op" id="3948223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948239">subv</span>&nbsp;<span class="op" id="3948244">=</span>&nbsp;<span class="ident" id="3948246">subv</span><span class="op" id="3948250">.</span><span class="ident" id="3948251">Elem</span><span class="op" id="3948255">(</span><span class="op" id="3948256">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948270">subv</span>&nbsp;<span class="op" id="3948275">=</span>&nbsp;<span class="ident" id="3948277">subv</span><span class="op" id="3948281">.</span><span class="ident" id="3948282">Field</span><span class="op" id="3948287">(</span><span class="ident" id="3948288">i</span><span class="op" id="3948289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948304">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3948309">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948335">if</span>&nbsp;<span class="ident" id="3948338">op</span>&nbsp;<span class="op" id="3948341">==</span>&nbsp;<span class="ident" id="3948344">scanSkipSpace</span>&nbsp;<span class="op" id="3948358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948363">op</span>&nbsp;<span class="op" id="3948366">=</span>&nbsp;<span class="ident" id="3948368">d</span><span class="op" id="3948369">.</span><span class="ident" id="3948370">scanWhile</span><span class="op" id="3948379">(</span><span class="ident" id="3948380">scanSkipSpace</span><span class="op" id="3948393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948397">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948401">if</span>&nbsp;<span class="ident" id="3948404">op</span>&nbsp;<span class="op" id="3948407">!=</span>&nbsp;<span class="ident" id="3948410">scanObjectKey</span>&nbsp;<span class="op" id="3948424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948429">d</span><span class="op" id="3948430">.</span><span class="builtintype" id="3948431">error</span><span class="op" id="3948436">(</span><span class="ident" id="3948437">errPhase</span><span class="op" id="3948445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3948454">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948471">if</span>&nbsp;<span class="ident" id="3948474">destring</span>&nbsp;<span class="op" id="3948483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948488">switch</span>&nbsp;<span class="ident" id="3948495">qv</span>&nbsp;<span class="op" id="3948498">:=</span>&nbsp;<span class="ident" id="3948501">d</span><span class="op" id="3948502">.</span><span class="ident" id="3948503">valueQuoted</span><span class="op" id="3948514">(</span><span class="op" id="3948515">)</span><span class="op" id="3948516">.</span><span class="op" id="3948517">(</span><span class="keyword" id="3948518">type</span><span class="op" id="3948522">)</span>&nbsp;<span class="op" id="3948524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948529">case</span>&nbsp;<span class="ident" id="3948534">nil</span><span class="op" id="3948537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948543">d</span><span class="op" id="3948544">.</span><span class="ident" id="3948545">literalStore</span><span class="op" id="3948557">(</span><span class="ident" id="3948558">nullLiteral</span><span class="op" id="3948569">,</span>&nbsp;<span class="ident" id="3948571">subv</span><span class="op" id="3948575">,</span>&nbsp;<span class="builtintype" id="3948577">false</span><span class="op" id="3948582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948587">case</span>&nbsp;<span class="builtintype" id="3948592">string</span><span class="op" id="3948598">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948604">d</span><span class="op" id="3948605">.</span><span class="ident" id="3948606">literalStore</span><span class="op" id="3948618">(</span><span class="op" id="3948619">[</span><span class="op" id="3948620">]</span><span class="builtintype" id="3948621">byte</span><span class="op" id="3948625">(</span><span class="ident" id="3948626">qv</span><span class="op" id="3948628">)</span><span class="op" id="3948629">,</span>&nbsp;<span class="ident" id="3948631">subv</span><span class="op" id="3948635">,</span>&nbsp;<span class="builtintype" id="3948637">true</span><span class="op" id="3948641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948646">default</span><span class="op" id="3948653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948659">d</span><span class="op" id="3948660">.</span><span class="ident" id="3948661">saveError</span><span class="op" id="3948670">(</span><span class="ident" id="3948671">fmt</span><span class="op" id="3948674">.</span><span class="ident" id="3948675">Errorf</span><span class="op" id="3948681">(</span><span class="string" id="3948682">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3948767">,</span>&nbsp;<span class="ident" id="3948769">item</span><span class="op" id="3948773">,</span>&nbsp;<span class="ident" id="3948775">v</span><span class="op" id="3948776">.</span><span class="ident" id="3948777">Type</span><span class="op" id="3948781">(</span><span class="op" id="3948782">)</span><span class="op" id="3948783">)</span><span class="op" id="3948784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948793">}</span>&nbsp;<span class="keyword" id="3948795">else</span>&nbsp;<span class="op" id="3948800">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948805">d</span><span class="op" id="3948806">.</span><span class="ident" id="3948807">value</span><span class="op" id="3948812">(</span><span class="ident" id="3948813">subv</span><span class="op" id="3948817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3948821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3948826">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3948856">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3948911">if</span>&nbsp;<span class="ident" id="3948914">v</span><span class="op" id="3948915">.</span><span class="ident" id="3948916">Kind</span><span class="op" id="3948920">(</span><span class="op" id="3948921">)</span>&nbsp;<span class="op" id="3948923">==</span>&nbsp;<span class="ident" id="3948926">reflect</span><span class="op" id="3948933">.</span><span class="ident" id="3948934">Map</span>&nbsp;<span class="op" id="3948938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948943">kv</span>&nbsp;<span class="op" id="3948946">:=</span>&nbsp;<span class="ident" id="3948949">reflect</span><span class="op" id="3948956">.</span><span class="ident" id="3948957">ValueOf</span><span class="op" id="3948964">(</span><span class="ident" id="3948965">key</span><span class="op" id="3948968">)</span><span class="op" id="3948969">.</span><span class="ident" id="3948970">Convert</span><span class="op" id="3948977">(</span><span class="ident" id="3948978">v</span><span class="op" id="3948979">.</span><span class="ident" id="3948980">Type</span><span class="op" id="3948984">(</span><span class="op" id="3948985">)</span><span class="op" id="3948986">.</span><span class="ident" id="3948987">Key</span><span class="op" id="3948990">(</span><span class="op" id="3948991">)</span><span class="op" id="3948992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3948997">v</span><span class="op" id="3948998">.</span><span class="ident" id="3948999">SetMapIndex</span><span class="op" id="3949010">(</span><span class="ident" id="3949011">kv</span><span class="op" id="3949013">,</span>&nbsp;<span class="ident" id="3949015">subv</span><span class="op" id="3949019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3949023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3949028">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949060">op</span>&nbsp;<span class="op" id="3949063">=</span>&nbsp;<span class="ident" id="3949065">d</span><span class="op" id="3949066">.</span><span class="ident" id="3949067">scanWhile</span><span class="op" id="3949076">(</span><span class="ident" id="3949077">scanSkipSpace</span><span class="op" id="3949090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949094">if</span>&nbsp;<span class="ident" id="3949097">op</span>&nbsp;<span class="op" id="3949100">==</span>&nbsp;<span class="ident" id="3949103">scanEndObject</span>&nbsp;<span class="op" id="3949117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949122">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3949130">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949134">if</span>&nbsp;<span class="ident" id="3949137">op</span>&nbsp;<span class="op" id="3949140">!=</span>&nbsp;<span class="ident" id="3949143">scanObjectValue</span>&nbsp;<span class="op" id="3949159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949164">d</span><span class="op" id="3949165">.</span><span class="builtintype" id="3949166">error</span><span class="op" id="3949171">(</span><span class="ident" id="3949172">errPhase</span><span class="op" id="3949180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3949184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3949187">}</span><br>
<span class="lineno"></span><span class="op" id="3949189">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="3949192">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3949272">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="3949327">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="3949376">func</span>&nbsp;<span class="op" id="3949381">(</span><span class="ident" id="3949382">d</span>&nbsp;<span class="op" id="3949384">*</span><span class="ident" id="3949385">decodeState</span><span class="op" id="3949396">)</span>&nbsp;<span class="ident" id="3949398">literal</span><span class="op" id="3949405">(</span><span class="ident" id="3949406">v</span>&nbsp;<span class="ident" id="3949408">reflect</span><span class="op" id="3949415">.</span><span class="ident" id="3949416">Value</span><span class="op" id="3949421">)</span>&nbsp;<span class="op" id="3949423">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3949426">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949484">start</span>&nbsp;<span class="op" id="3949490">:=</span>&nbsp;<span class="ident" id="3949493">d</span><span class="op" id="3949494">.</span><span class="ident" id="3949495">off</span>&nbsp;<span class="op" id="3949499">-</span>&nbsp;<span class="num" id="3949501">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949504">op</span>&nbsp;<span class="op" id="3949507">:=</span>&nbsp;<span class="ident" id="3949510">d</span><span class="op" id="3949511">.</span><span class="ident" id="3949512">scanWhile</span><span class="op" id="3949521">(</span><span class="ident" id="3949522">scanContinue</span><span class="op" id="3949534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3949538">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949579">d</span><span class="op" id="3949580">.</span><span class="ident" id="3949581">off</span><span class="op" id="3949584">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949588">d</span><span class="op" id="3949589">.</span><span class="ident" id="3949590">scan</span><span class="op" id="3949594">.</span><span class="ident" id="3949595">undo</span><span class="op" id="3949599">(</span><span class="ident" id="3949600">op</span><span class="op" id="3949602">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949606">d</span><span class="op" id="3949607">.</span><span class="ident" id="3949608">literalStore</span><span class="op" id="3949620">(</span><span class="ident" id="3949621">d</span><span class="op" id="3949622">.</span><span class="ident" id="3949623">data</span><span class="op" id="3949627">[</span><span class="ident" id="3949628">start</span><span class="op" id="3949633">:</span><span class="ident" id="3949634">d</span><span class="op" id="3949635">.</span><span class="ident" id="3949636">off</span><span class="op" id="3949639">]</span><span class="op" id="3949640">,</span>&nbsp;<span class="ident" id="3949642">v</span><span class="op" id="3949643">,</span>&nbsp;<span class="builtintype" id="3949645">false</span><span class="op" id="3949650">)</span><br>
<span class="lineno"></span><span class="op" id="3949652">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="3949655">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="3949727">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="3949771">func</span>&nbsp;<span class="op" id="3949776">(</span><span class="ident" id="3949777">d</span>&nbsp;<span class="op" id="3949779">*</span><span class="ident" id="3949780">decodeState</span><span class="op" id="3949791">)</span>&nbsp;<span class="ident" id="3949793">convertNumber</span><span class="op" id="3949806">(</span><span class="ident" id="3949807">s</span>&nbsp;<span class="builtintype" id="3949809">string</span><span class="op" id="3949815">)</span>&nbsp;<span class="op" id="3949817">(</span><span class="keyword" id="3949818">interface</span><span class="op" id="3949827">{</span><span class="op" id="3949828">}</span><span class="op" id="3949829">,</span>&nbsp;<span class="builtintype" id="3949831">error</span><span class="op" id="3949836">)</span>&nbsp;<span class="op" id="3949838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949841">if</span>&nbsp;<span class="ident" id="3949844">d</span><span class="op" id="3949845">.</span><span class="ident" id="3949846">useNumber</span>&nbsp;<span class="op" id="3949856">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949860">return</span>&nbsp;<span class="ident" id="3949867">Number</span><span class="op" id="3949873">(</span><span class="ident" id="3949874">s</span><span class="op" id="3949875">)</span><span class="op" id="3949876">,</span>&nbsp;<span class="ident" id="3949878">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3949883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3949886">f</span><span class="op" id="3949887">,</span>&nbsp;<span class="ident" id="3949889">err</span>&nbsp;<span class="op" id="3949893">:=</span>&nbsp;<span class="ident" id="3949896">strconv</span><span class="op" id="3949903">.</span><span class="ident" id="3949904">ParseFloat</span><span class="op" id="3949914">(</span><span class="ident" id="3949915">s</span><span class="op" id="3949916">,</span>&nbsp;<span class="num" id="3949918">64</span><span class="op" id="3949920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949923">if</span>&nbsp;<span class="ident" id="3949926">err</span>&nbsp;<span class="op" id="3949930">!=</span>&nbsp;<span class="ident" id="3949933">nil</span>&nbsp;<span class="op" id="3949937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3949941">return</span>&nbsp;<span class="ident" id="3949948">nil</span><span class="op" id="3949951">,</span>&nbsp;<span class="op" id="3949953">&amp;</span><span class="ident" id="3949954">UnmarshalTypeError</span><span class="op" id="3949972">{</span><span class="string" id="3949973">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3949983">+</span>&nbsp;<span class="ident" id="3949985">s</span><span class="op" id="3949986">,</span>&nbsp;<span class="ident" id="3949988">reflect</span><span class="op" id="3949995">.</span><span class="ident" id="3949996">TypeOf</span><span class="op" id="3950002">(</span><span class="num" id="3950003">0.0</span><span class="op" id="3950006">)</span><span class="op" id="3950007">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3950010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950013">return</span>&nbsp;<span class="ident" id="3950020">f</span><span class="op" id="3950021">,</span>&nbsp;<span class="ident" id="3950023">nil</span><br>
<span class="lineno"></span><span class="op" id="3950027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3950030">var</span>&nbsp;<span class="ident" id="3950034">numberType</span>&nbsp;<span class="op" id="3950045">=</span>&nbsp;<span class="ident" id="3950047">reflect</span><span class="op" id="3950054">.</span><span class="ident" id="3950055">TypeOf</span><span class="op" id="3950061">(</span><span class="ident" id="3950062">Number</span><span class="op" id="3950068">(</span><span class="string" id="3950069">&#34;&#34;</span><span class="op" id="3950071">)</span><span class="op" id="3950072">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="3950075">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3950132">//</span><br>
<span class="lineno"></span><span class="comment" id="3950135">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3950203">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="3950272">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="3950312">func</span>&nbsp;<span class="op" id="3950317">(</span><span class="ident" id="3950318">d</span>&nbsp;<span class="op" id="3950320">*</span><span class="ident" id="3950321">decodeState</span><span class="op" id="3950332">)</span>&nbsp;<span class="ident" id="3950334">literalStore</span><span class="op" id="3950346">(</span><span class="ident" id="3950347">item</span>&nbsp;<span class="op" id="3950352">[</span><span class="op" id="3950353">]</span><span class="builtintype" id="3950354">byte</span><span class="op" id="3950358">,</span>&nbsp;<span class="ident" id="3950360">v</span>&nbsp;<span class="ident" id="3950362">reflect</span><span class="op" id="3950369">.</span><span class="ident" id="3950370">Value</span><span class="op" id="3950375">,</span>&nbsp;<span class="ident" id="3950377">fromQuoted</span>&nbsp;<span class="builtintype" id="3950388">bool</span><span class="op" id="3950392">)</span>&nbsp;<span class="op" id="3950394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3950397">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950424">if</span>&nbsp;<span class="builtinfunc" id="3950427">len</span><span class="op" id="3950430">(</span><span class="ident" id="3950431">item</span><span class="op" id="3950435">)</span>&nbsp;<span class="op" id="3950437">==</span>&nbsp;<span class="num" id="3950440">0</span>&nbsp;<span class="op" id="3950442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3950446">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950469">d</span><span class="op" id="3950470">.</span><span class="ident" id="3950471">saveError</span><span class="op" id="3950480">(</span><span class="ident" id="3950481">fmt</span><span class="op" id="3950484">.</span><span class="ident" id="3950485">Errorf</span><span class="op" id="3950491">(</span><span class="string" id="3950492">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3950565">,</span>&nbsp;<span class="ident" id="3950567">item</span><span class="op" id="3950571">,</span>&nbsp;<span class="ident" id="3950573">v</span><span class="op" id="3950574">.</span><span class="ident" id="3950575">Type</span><span class="op" id="3950579">(</span><span class="op" id="3950580">)</span><span class="op" id="3950581">)</span><span class="op" id="3950582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950586">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3950594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950597">wantptr</span>&nbsp;<span class="op" id="3950605">:=</span>&nbsp;<span class="ident" id="3950608">item</span><span class="op" id="3950612">[</span><span class="num" id="3950613">0</span><span class="op" id="3950614">]</span>&nbsp;<span class="op" id="3950616">==</span>&nbsp;<span class="string" id="3950619">&#39;n&#39;</span>&nbsp;<span class="comment" id="3950623">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950632">u</span><span class="op" id="3950633">,</span>&nbsp;<span class="ident" id="3950635">ut</span><span class="op" id="3950637">,</span>&nbsp;<span class="ident" id="3950639">pv</span>&nbsp;<span class="op" id="3950642">:=</span>&nbsp;<span class="ident" id="3950645">d</span><span class="op" id="3950646">.</span><span class="ident" id="3950647">indirect</span><span class="op" id="3950655">(</span><span class="ident" id="3950656">v</span><span class="op" id="3950657">,</span>&nbsp;<span class="ident" id="3950659">wantptr</span><span class="op" id="3950666">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950669">if</span>&nbsp;<span class="ident" id="3950672">u</span>&nbsp;<span class="op" id="3950674">!=</span>&nbsp;<span class="ident" id="3950677">nil</span>&nbsp;<span class="op" id="3950681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950685">err</span>&nbsp;<span class="op" id="3950689">:=</span>&nbsp;<span class="ident" id="3950692">u</span><span class="op" id="3950693">.</span><span class="ident" id="3950694">UnmarshalJSON</span><span class="op" id="3950707">(</span><span class="ident" id="3950708">item</span><span class="op" id="3950712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950716">if</span>&nbsp;<span class="ident" id="3950719">err</span>&nbsp;<span class="op" id="3950723">!=</span>&nbsp;<span class="ident" id="3950726">nil</span>&nbsp;<span class="op" id="3950730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950735">d</span><span class="op" id="3950736">.</span><span class="builtintype" id="3950737">error</span><span class="op" id="3950742">(</span><span class="ident" id="3950743">err</span><span class="op" id="3950746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3950750">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950754">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3950762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950765">if</span>&nbsp;<span class="ident" id="3950768">ut</span>&nbsp;<span class="op" id="3950771">!=</span>&nbsp;<span class="ident" id="3950774">nil</span>&nbsp;<span class="op" id="3950778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950782">if</span>&nbsp;<span class="ident" id="3950785">item</span><span class="op" id="3950789">[</span><span class="num" id="3950790">0</span><span class="op" id="3950791">]</span>&nbsp;<span class="op" id="3950793">!=</span>&nbsp;<span class="string" id="3950796">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3950800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3950805">if</span>&nbsp;<span class="ident" id="3950808">fromQuoted</span>&nbsp;<span class="op" id="3950819">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950825">d</span><span class="op" id="3950826">.</span><span class="ident" id="3950827">saveError</span><span class="op" id="3950836">(</span><span class="ident" id="3950837">fmt</span><span class="op" id="3950840">.</span><span class="ident" id="3950841">Errorf</span><span class="op" id="3950847">(</span><span class="string" id="3950848">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3950921">,</span>&nbsp;<span class="ident" id="3950923">item</span><span class="op" id="3950927">,</span>&nbsp;<span class="ident" id="3950929">v</span><span class="op" id="3950930">.</span><span class="ident" id="3950931">Type</span><span class="op" id="3950935">(</span><span class="op" id="3950936">)</span><span class="op" id="3950937">)</span><span class="op" id="3950938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3950943">}</span>&nbsp;<span class="keyword" id="3950945">else</span>&nbsp;<span class="op" id="3950950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3950956">d</span><span class="op" id="3950957">.</span><span class="ident" id="3950958">saveError</span><span class="op" id="3950967">(</span><span class="op" id="3950968">&amp;</span><span class="ident" id="3950969">UnmarshalTypeError</span><span class="op" id="3950987">{</span><span class="string" id="3950988">&#34;string&#34;</span><span class="op" id="3950996">,</span>&nbsp;<span class="ident" id="3950998">v</span><span class="op" id="3950999">.</span><span class="ident" id="3951000">Type</span><span class="op" id="3951004">(</span><span class="op" id="3951005">)</span><span class="op" id="3951006">}</span><span class="op" id="3951007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951016">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951020">s</span><span class="op" id="3951021">,</span>&nbsp;<span class="ident" id="3951023">ok</span>&nbsp;<span class="op" id="3951026">:=</span>&nbsp;<span class="ident" id="3951029">unquoteBytes</span><span class="op" id="3951041">(</span><span class="ident" id="3951042">item</span><span class="op" id="3951046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951050">if</span>&nbsp;<span class="op" id="3951053">!</span><span class="ident" id="3951054">ok</span>&nbsp;<span class="op" id="3951057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951062">if</span>&nbsp;<span class="ident" id="3951065">fromQuoted</span>&nbsp;<span class="op" id="3951076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951082">d</span><span class="op" id="3951083">.</span><span class="builtintype" id="3951084">error</span><span class="op" id="3951089">(</span><span class="ident" id="3951090">fmt</span><span class="op" id="3951093">.</span><span class="ident" id="3951094">Errorf</span><span class="op" id="3951100">(</span><span class="string" id="3951101">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3951174">,</span>&nbsp;<span class="ident" id="3951176">item</span><span class="op" id="3951180">,</span>&nbsp;<span class="ident" id="3951182">v</span><span class="op" id="3951183">.</span><span class="ident" id="3951184">Type</span><span class="op" id="3951188">(</span><span class="op" id="3951189">)</span><span class="op" id="3951190">)</span><span class="op" id="3951191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951196">}</span>&nbsp;<span class="keyword" id="3951198">else</span>&nbsp;<span class="op" id="3951203">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951209">d</span><span class="op" id="3951210">.</span><span class="builtintype" id="3951211">error</span><span class="op" id="3951216">(</span><span class="ident" id="3951217">errPhase</span><span class="op" id="3951225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951238">err</span>&nbsp;<span class="op" id="3951242">:=</span>&nbsp;<span class="ident" id="3951245">ut</span><span class="op" id="3951247">.</span><span class="ident" id="3951248">UnmarshalText</span><span class="op" id="3951261">(</span><span class="ident" id="3951262">s</span><span class="op" id="3951263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951267">if</span>&nbsp;<span class="ident" id="3951270">err</span>&nbsp;<span class="op" id="3951274">!=</span>&nbsp;<span class="ident" id="3951277">nil</span>&nbsp;<span class="op" id="3951281">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951286">d</span><span class="op" id="3951287">.</span><span class="builtintype" id="3951288">error</span><span class="op" id="3951293">(</span><span class="ident" id="3951294">err</span><span class="op" id="3951297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951305">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951317">v</span>&nbsp;<span class="op" id="3951319">=</span>&nbsp;<span class="ident" id="3951321">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951326">switch</span>&nbsp;<span class="ident" id="3951333">c</span>&nbsp;<span class="op" id="3951335">:=</span>&nbsp;<span class="ident" id="3951338">item</span><span class="op" id="3951342">[</span><span class="num" id="3951343">0</span><span class="op" id="3951344">]</span><span class="op" id="3951345">;</span>&nbsp;<span class="ident" id="3951347">c</span>&nbsp;<span class="op" id="3951349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951352">case</span>&nbsp;<span class="string" id="3951357">&#39;n&#39;</span><span class="op" id="3951360">:</span>&nbsp;<span class="comment" id="3951362">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951372">switch</span>&nbsp;<span class="ident" id="3951379">v</span><span class="op" id="3951380">.</span><span class="ident" id="3951381">Kind</span><span class="op" id="3951385">(</span><span class="op" id="3951386">)</span>&nbsp;<span class="op" id="3951388">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951392">case</span>&nbsp;<span class="ident" id="3951397">reflect</span><span class="op" id="3951404">.</span><span class="ident" id="3951405">Interface</span><span class="op" id="3951414">,</span>&nbsp;<span class="ident" id="3951416">reflect</span><span class="op" id="3951423">.</span><span class="ident" id="3951424">Ptr</span><span class="op" id="3951427">,</span>&nbsp;<span class="ident" id="3951429">reflect</span><span class="op" id="3951436">.</span><span class="ident" id="3951437">Map</span><span class="op" id="3951440">,</span>&nbsp;<span class="ident" id="3951442">reflect</span><span class="op" id="3951449">.</span><span class="ident" id="3951450">Slice</span><span class="op" id="3951455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951460">v</span><span class="op" id="3951461">.</span><span class="ident" id="3951462">Set</span><span class="op" id="3951465">(</span><span class="ident" id="3951466">reflect</span><span class="op" id="3951473">.</span><span class="ident" id="3951474">Zero</span><span class="op" id="3951478">(</span><span class="ident" id="3951479">v</span><span class="op" id="3951480">.</span><span class="ident" id="3951481">Type</span><span class="op" id="3951485">(</span><span class="op" id="3951486">)</span><span class="op" id="3951487">)</span><span class="op" id="3951488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3951493">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951546">case</span>&nbsp;<span class="string" id="3951551">&#39;t&#39;</span><span class="op" id="3951554">,</span>&nbsp;<span class="string" id="3951556">&#39;f&#39;</span><span class="op" id="3951559">:</span>&nbsp;<span class="comment" id="3951561">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951578">value</span>&nbsp;<span class="op" id="3951584">:=</span>&nbsp;<span class="ident" id="3951587">c</span>&nbsp;<span class="op" id="3951589">==</span>&nbsp;<span class="string" id="3951592">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951598">switch</span>&nbsp;<span class="ident" id="3951605">v</span><span class="op" id="3951606">.</span><span class="ident" id="3951607">Kind</span><span class="op" id="3951611">(</span><span class="op" id="3951612">)</span>&nbsp;<span class="op" id="3951614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951618">default</span><span class="op" id="3951625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951630">if</span>&nbsp;<span class="ident" id="3951633">fromQuoted</span>&nbsp;<span class="op" id="3951644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951650">d</span><span class="op" id="3951651">.</span><span class="ident" id="3951652">saveError</span><span class="op" id="3951661">(</span><span class="ident" id="3951662">fmt</span><span class="op" id="3951665">.</span><span class="ident" id="3951666">Errorf</span><span class="op" id="3951672">(</span><span class="string" id="3951673">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3951746">,</span>&nbsp;<span class="ident" id="3951748">item</span><span class="op" id="3951752">,</span>&nbsp;<span class="ident" id="3951754">v</span><span class="op" id="3951755">.</span><span class="ident" id="3951756">Type</span><span class="op" id="3951760">(</span><span class="op" id="3951761">)</span><span class="op" id="3951762">)</span><span class="op" id="3951763">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951768">}</span>&nbsp;<span class="keyword" id="3951770">else</span>&nbsp;<span class="op" id="3951775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951781">d</span><span class="op" id="3951782">.</span><span class="ident" id="3951783">saveError</span><span class="op" id="3951792">(</span><span class="op" id="3951793">&amp;</span><span class="ident" id="3951794">UnmarshalTypeError</span><span class="op" id="3951812">{</span><span class="string" id="3951813">&#34;bool&#34;</span><span class="op" id="3951819">,</span>&nbsp;<span class="ident" id="3951821">v</span><span class="op" id="3951822">.</span><span class="ident" id="3951823">Type</span><span class="op" id="3951827">(</span><span class="op" id="3951828">)</span><span class="op" id="3951829">}</span><span class="op" id="3951830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951839">case</span>&nbsp;<span class="ident" id="3951844">reflect</span><span class="op" id="3951851">.</span><span class="ident" id="3951852">Bool</span><span class="op" id="3951856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951861">v</span><span class="op" id="3951862">.</span><span class="ident" id="3951863">SetBool</span><span class="op" id="3951870">(</span><span class="ident" id="3951871">value</span><span class="op" id="3951876">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951880">case</span>&nbsp;<span class="ident" id="3951885">reflect</span><span class="op" id="3951892">.</span><span class="ident" id="3951893">Interface</span><span class="op" id="3951902">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3951907">if</span>&nbsp;<span class="ident" id="3951910">v</span><span class="op" id="3951911">.</span><span class="ident" id="3951912">NumMethod</span><span class="op" id="3951921">(</span><span class="op" id="3951922">)</span>&nbsp;<span class="op" id="3951924">==</span>&nbsp;<span class="num" id="3951927">0</span>&nbsp;<span class="op" id="3951929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951935">v</span><span class="op" id="3951936">.</span><span class="ident" id="3951937">Set</span><span class="op" id="3951940">(</span><span class="ident" id="3951941">reflect</span><span class="op" id="3951948">.</span><span class="ident" id="3951949">ValueOf</span><span class="op" id="3951956">(</span><span class="ident" id="3951957">value</span><span class="op" id="3951962">)</span><span class="op" id="3951963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3951968">}</span>&nbsp;<span class="keyword" id="3951970">else</span>&nbsp;<span class="op" id="3951975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3951981">d</span><span class="op" id="3951982">.</span><span class="ident" id="3951983">saveError</span><span class="op" id="3951992">(</span><span class="op" id="3951993">&amp;</span><span class="ident" id="3951994">UnmarshalTypeError</span><span class="op" id="3952012">{</span><span class="string" id="3952013">&#34;bool&#34;</span><span class="op" id="3952019">,</span>&nbsp;<span class="ident" id="3952021">v</span><span class="op" id="3952022">.</span><span class="ident" id="3952023">Type</span><span class="op" id="3952027">(</span><span class="op" id="3952028">)</span><span class="op" id="3952029">}</span><span class="op" id="3952030">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952043">case</span>&nbsp;<span class="string" id="3952048">&#39;&#34;&#39;</span><span class="op" id="3952051">:</span>&nbsp;<span class="comment" id="3952053">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952065">s</span><span class="op" id="3952066">,</span>&nbsp;<span class="ident" id="3952068">ok</span>&nbsp;<span class="op" id="3952071">:=</span>&nbsp;<span class="ident" id="3952074">unquoteBytes</span><span class="op" id="3952086">(</span><span class="ident" id="3952087">item</span><span class="op" id="3952091">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952095">if</span>&nbsp;<span class="op" id="3952098">!</span><span class="ident" id="3952099">ok</span>&nbsp;<span class="op" id="3952102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952107">if</span>&nbsp;<span class="ident" id="3952110">fromQuoted</span>&nbsp;<span class="op" id="3952121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952127">d</span><span class="op" id="3952128">.</span><span class="builtintype" id="3952129">error</span><span class="op" id="3952134">(</span><span class="ident" id="3952135">fmt</span><span class="op" id="3952138">.</span><span class="ident" id="3952139">Errorf</span><span class="op" id="3952145">(</span><span class="string" id="3952146">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3952219">,</span>&nbsp;<span class="ident" id="3952221">item</span><span class="op" id="3952225">,</span>&nbsp;<span class="ident" id="3952227">v</span><span class="op" id="3952228">.</span><span class="ident" id="3952229">Type</span><span class="op" id="3952233">(</span><span class="op" id="3952234">)</span><span class="op" id="3952235">)</span><span class="op" id="3952236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952241">}</span>&nbsp;<span class="keyword" id="3952243">else</span>&nbsp;<span class="op" id="3952248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952254">d</span><span class="op" id="3952255">.</span><span class="builtintype" id="3952256">error</span><span class="op" id="3952261">(</span><span class="ident" id="3952262">errPhase</span><span class="op" id="3952270">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952283">switch</span>&nbsp;<span class="ident" id="3952290">v</span><span class="op" id="3952291">.</span><span class="ident" id="3952292">Kind</span><span class="op" id="3952296">(</span><span class="op" id="3952297">)</span>&nbsp;<span class="op" id="3952299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952303">default</span><span class="op" id="3952310">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952315">d</span><span class="op" id="3952316">.</span><span class="ident" id="3952317">saveError</span><span class="op" id="3952326">(</span><span class="op" id="3952327">&amp;</span><span class="ident" id="3952328">UnmarshalTypeError</span><span class="op" id="3952346">{</span><span class="string" id="3952347">&#34;string&#34;</span><span class="op" id="3952355">,</span>&nbsp;<span class="ident" id="3952357">v</span><span class="op" id="3952358">.</span><span class="ident" id="3952359">Type</span><span class="op" id="3952363">(</span><span class="op" id="3952364">)</span><span class="op" id="3952365">}</span><span class="op" id="3952366">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952370">case</span>&nbsp;<span class="ident" id="3952375">reflect</span><span class="op" id="3952382">.</span><span class="ident" id="3952383">Slice</span><span class="op" id="3952388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952393">if</span>&nbsp;<span class="ident" id="3952396">v</span><span class="op" id="3952397">.</span><span class="ident" id="3952398">Type</span><span class="op" id="3952402">(</span><span class="op" id="3952403">)</span>&nbsp;<span class="op" id="3952405">!=</span>&nbsp;<span class="ident" id="3952408">byteSliceType</span>&nbsp;<span class="op" id="3952422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952428">d</span><span class="op" id="3952429">.</span><span class="ident" id="3952430">saveError</span><span class="op" id="3952439">(</span><span class="op" id="3952440">&amp;</span><span class="ident" id="3952441">UnmarshalTypeError</span><span class="op" id="3952459">{</span><span class="string" id="3952460">&#34;string&#34;</span><span class="op" id="3952468">,</span>&nbsp;<span class="ident" id="3952470">v</span><span class="op" id="3952471">.</span><span class="ident" id="3952472">Type</span><span class="op" id="3952476">(</span><span class="op" id="3952477">)</span><span class="op" id="3952478">}</span><span class="op" id="3952479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952485">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952494">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952499">b</span>&nbsp;<span class="op" id="3952501">:=</span>&nbsp;<span class="builtinfunc" id="3952504">make</span><span class="op" id="3952508">(</span><span class="op" id="3952509">[</span><span class="op" id="3952510">]</span><span class="builtintype" id="3952511">byte</span><span class="op" id="3952515">,</span>&nbsp;<span class="ident" id="3952517">base64</span><span class="op" id="3952523">.</span><span class="ident" id="3952524">StdEncoding</span><span class="op" id="3952535">.</span><span class="ident" id="3952536">DecodedLen</span><span class="op" id="3952546">(</span><span class="builtinfunc" id="3952547">len</span><span class="op" id="3952550">(</span><span class="ident" id="3952551">s</span><span class="op" id="3952552">)</span><span class="op" id="3952553">)</span><span class="op" id="3952554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952559">n</span><span class="op" id="3952560">,</span>&nbsp;<span class="ident" id="3952562">err</span>&nbsp;<span class="op" id="3952566">:=</span>&nbsp;<span class="ident" id="3952569">base64</span><span class="op" id="3952575">.</span><span class="ident" id="3952576">StdEncoding</span><span class="op" id="3952587">.</span><span class="ident" id="3952588">Decode</span><span class="op" id="3952594">(</span><span class="ident" id="3952595">b</span><span class="op" id="3952596">,</span>&nbsp;<span class="ident" id="3952598">s</span><span class="op" id="3952599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952604">if</span>&nbsp;<span class="ident" id="3952607">err</span>&nbsp;<span class="op" id="3952611">!=</span>&nbsp;<span class="ident" id="3952614">nil</span>&nbsp;<span class="op" id="3952618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952624">d</span><span class="op" id="3952625">.</span><span class="ident" id="3952626">saveError</span><span class="op" id="3952635">(</span><span class="ident" id="3952636">err</span><span class="op" id="3952639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952645">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952659">v</span><span class="op" id="3952660">.</span><span class="ident" id="3952661">Set</span><span class="op" id="3952664">(</span><span class="ident" id="3952665">reflect</span><span class="op" id="3952672">.</span><span class="ident" id="3952673">ValueOf</span><span class="op" id="3952680">(</span><span class="ident" id="3952681">b</span><span class="op" id="3952682">[</span><span class="num" id="3952683">0</span><span class="op" id="3952684">:</span><span class="ident" id="3952685">n</span><span class="op" id="3952686">]</span><span class="op" id="3952687">)</span><span class="op" id="3952688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952692">case</span>&nbsp;<span class="ident" id="3952697">reflect</span><span class="op" id="3952704">.</span><span class="ident" id="3952705">String</span><span class="op" id="3952711">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952716">v</span><span class="op" id="3952717">.</span><span class="ident" id="3952718">SetString</span><span class="op" id="3952727">(</span><span class="builtintype" id="3952728">string</span><span class="op" id="3952734">(</span><span class="ident" id="3952735">s</span><span class="op" id="3952736">)</span><span class="op" id="3952737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952741">case</span>&nbsp;<span class="ident" id="3952746">reflect</span><span class="op" id="3952753">.</span><span class="ident" id="3952754">Interface</span><span class="op" id="3952763">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952768">if</span>&nbsp;<span class="ident" id="3952771">v</span><span class="op" id="3952772">.</span><span class="ident" id="3952773">NumMethod</span><span class="op" id="3952782">(</span><span class="op" id="3952783">)</span>&nbsp;<span class="op" id="3952785">==</span>&nbsp;<span class="num" id="3952788">0</span>&nbsp;<span class="op" id="3952790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952796">v</span><span class="op" id="3952797">.</span><span class="ident" id="3952798">Set</span><span class="op" id="3952801">(</span><span class="ident" id="3952802">reflect</span><span class="op" id="3952809">.</span><span class="ident" id="3952810">ValueOf</span><span class="op" id="3952817">(</span><span class="builtintype" id="3952818">string</span><span class="op" id="3952824">(</span><span class="ident" id="3952825">s</span><span class="op" id="3952826">)</span><span class="op" id="3952827">)</span><span class="op" id="3952828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952833">}</span>&nbsp;<span class="keyword" id="3952835">else</span>&nbsp;<span class="op" id="3952840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952846">d</span><span class="op" id="3952847">.</span><span class="ident" id="3952848">saveError</span><span class="op" id="3952857">(</span><span class="op" id="3952858">&amp;</span><span class="ident" id="3952859">UnmarshalTypeError</span><span class="op" id="3952877">{</span><span class="string" id="3952878">&#34;string&#34;</span><span class="op" id="3952886">,</span>&nbsp;<span class="ident" id="3952888">v</span><span class="op" id="3952889">.</span><span class="ident" id="3952890">Type</span><span class="op" id="3952894">(</span><span class="op" id="3952895">)</span><span class="op" id="3952896">}</span><span class="op" id="3952897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952902">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3952906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952910">default</span><span class="op" id="3952917">:</span>&nbsp;<span class="comment" id="3952919">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952931">if</span>&nbsp;<span class="ident" id="3952934">c</span>&nbsp;<span class="op" id="3952936">!=</span>&nbsp;<span class="string" id="3952939">&#39;-&#39;</span>&nbsp;<span class="op" id="3952943">&amp;&amp;</span>&nbsp;<span class="op" id="3952946">(</span><span class="ident" id="3952947">c</span>&nbsp;<span class="op" id="3952949">&lt;</span>&nbsp;<span class="string" id="3952951">&#39;0&#39;</span>&nbsp;<span class="op" id="3952955">||</span>&nbsp;<span class="ident" id="3952958">c</span>&nbsp;<span class="op" id="3952960">&gt;</span>&nbsp;<span class="string" id="3952962">&#39;9&#39;</span><span class="op" id="3952965">)</span>&nbsp;<span class="op" id="3952967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3952972">if</span>&nbsp;<span class="ident" id="3952975">fromQuoted</span>&nbsp;<span class="op" id="3952986">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3952992">d</span><span class="op" id="3952993">.</span><span class="builtintype" id="3952994">error</span><span class="op" id="3952999">(</span><span class="ident" id="3953000">fmt</span><span class="op" id="3953003">.</span><span class="ident" id="3953004">Errorf</span><span class="op" id="3953010">(</span><span class="string" id="3953011">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3953084">,</span>&nbsp;<span class="ident" id="3953086">item</span><span class="op" id="3953090">,</span>&nbsp;<span class="ident" id="3953092">v</span><span class="op" id="3953093">.</span><span class="ident" id="3953094">Type</span><span class="op" id="3953098">(</span><span class="op" id="3953099">)</span><span class="op" id="3953100">)</span><span class="op" id="3953101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953106">}</span>&nbsp;<span class="keyword" id="3953108">else</span>&nbsp;<span class="op" id="3953113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953119">d</span><span class="op" id="3953120">.</span><span class="builtintype" id="3953121">error</span><span class="op" id="3953126">(</span><span class="ident" id="3953127">errPhase</span><span class="op" id="3953135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953144">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953148">s</span>&nbsp;<span class="op" id="3953150">:=</span>&nbsp;<span class="builtintype" id="3953153">string</span><span class="op" id="3953159">(</span><span class="ident" id="3953160">item</span><span class="op" id="3953164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953168">switch</span>&nbsp;<span class="ident" id="3953175">v</span><span class="op" id="3953176">.</span><span class="ident" id="3953177">Kind</span><span class="op" id="3953181">(</span><span class="op" id="3953182">)</span>&nbsp;<span class="op" id="3953184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953188">default</span><span class="op" id="3953195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953200">if</span>&nbsp;<span class="ident" id="3953203">v</span><span class="op" id="3953204">.</span><span class="ident" id="3953205">Kind</span><span class="op" id="3953209">(</span><span class="op" id="3953210">)</span>&nbsp;<span class="op" id="3953212">==</span>&nbsp;<span class="ident" id="3953215">reflect</span><span class="op" id="3953222">.</span><span class="ident" id="3953223">String</span>&nbsp;<span class="op" id="3953230">&amp;&amp;</span>&nbsp;<span class="ident" id="3953233">v</span><span class="op" id="3953234">.</span><span class="ident" id="3953235">Type</span><span class="op" id="3953239">(</span><span class="op" id="3953240">)</span>&nbsp;<span class="op" id="3953242">==</span>&nbsp;<span class="ident" id="3953245">numberType</span>&nbsp;<span class="op" id="3953256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953262">v</span><span class="op" id="3953263">.</span><span class="ident" id="3953264">SetString</span><span class="op" id="3953273">(</span><span class="ident" id="3953274">s</span><span class="op" id="3953275">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953281">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953295">if</span>&nbsp;<span class="ident" id="3953298">fromQuoted</span>&nbsp;<span class="op" id="3953309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953315">d</span><span class="op" id="3953316">.</span><span class="builtintype" id="3953317">error</span><span class="op" id="3953322">(</span><span class="ident" id="3953323">fmt</span><span class="op" id="3953326">.</span><span class="ident" id="3953327">Errorf</span><span class="op" id="3953333">(</span><span class="string" id="3953334">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3953407">,</span>&nbsp;<span class="ident" id="3953409">item</span><span class="op" id="3953413">,</span>&nbsp;<span class="ident" id="3953415">v</span><span class="op" id="3953416">.</span><span class="ident" id="3953417">Type</span><span class="op" id="3953421">(</span><span class="op" id="3953422">)</span><span class="op" id="3953423">)</span><span class="op" id="3953424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953429">}</span>&nbsp;<span class="keyword" id="3953431">else</span>&nbsp;<span class="op" id="3953436">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953442">d</span><span class="op" id="3953443">.</span><span class="builtintype" id="3953444">error</span><span class="op" id="3953449">(</span><span class="op" id="3953450">&amp;</span><span class="ident" id="3953451">UnmarshalTypeError</span><span class="op" id="3953469">{</span><span class="string" id="3953470">&#34;number&#34;</span><span class="op" id="3953478">,</span>&nbsp;<span class="ident" id="3953480">v</span><span class="op" id="3953481">.</span><span class="ident" id="3953482">Type</span><span class="op" id="3953486">(</span><span class="op" id="3953487">)</span><span class="op" id="3953488">}</span><span class="op" id="3953489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953498">case</span>&nbsp;<span class="ident" id="3953503">reflect</span><span class="op" id="3953510">.</span><span class="ident" id="3953511">Interface</span><span class="op" id="3953520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953525">n</span><span class="op" id="3953526">,</span>&nbsp;<span class="ident" id="3953528">err</span>&nbsp;<span class="op" id="3953532">:=</span>&nbsp;<span class="ident" id="3953535">d</span><span class="op" id="3953536">.</span><span class="ident" id="3953537">convertNumber</span><span class="op" id="3953550">(</span><span class="ident" id="3953551">s</span><span class="op" id="3953552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953557">if</span>&nbsp;<span class="ident" id="3953560">err</span>&nbsp;<span class="op" id="3953564">!=</span>&nbsp;<span class="ident" id="3953567">nil</span>&nbsp;<span class="op" id="3953571">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953577">d</span><span class="op" id="3953578">.</span><span class="ident" id="3953579">saveError</span><span class="op" id="3953588">(</span><span class="ident" id="3953589">err</span><span class="op" id="3953592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953598">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953612">if</span>&nbsp;<span class="ident" id="3953615">v</span><span class="op" id="3953616">.</span><span class="ident" id="3953617">NumMethod</span><span class="op" id="3953626">(</span><span class="op" id="3953627">)</span>&nbsp;<span class="op" id="3953629">!=</span>&nbsp;<span class="num" id="3953632">0</span>&nbsp;<span class="op" id="3953634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953640">d</span><span class="op" id="3953641">.</span><span class="ident" id="3953642">saveError</span><span class="op" id="3953651">(</span><span class="op" id="3953652">&amp;</span><span class="ident" id="3953653">UnmarshalTypeError</span><span class="op" id="3953671">{</span><span class="string" id="3953672">&#34;number&#34;</span><span class="op" id="3953680">,</span>&nbsp;<span class="ident" id="3953682">v</span><span class="op" id="3953683">.</span><span class="ident" id="3953684">Type</span><span class="op" id="3953688">(</span><span class="op" id="3953689">)</span><span class="op" id="3953690">}</span><span class="op" id="3953691">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953697">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953711">v</span><span class="op" id="3953712">.</span><span class="ident" id="3953713">Set</span><span class="op" id="3953716">(</span><span class="ident" id="3953717">reflect</span><span class="op" id="3953724">.</span><span class="ident" id="3953725">ValueOf</span><span class="op" id="3953732">(</span><span class="ident" id="3953733">n</span><span class="op" id="3953734">)</span><span class="op" id="3953735">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953740">case</span>&nbsp;<span class="ident" id="3953745">reflect</span><span class="op" id="3953752">.</span><span class="ident" id="3953753">Int</span><span class="op" id="3953756">,</span>&nbsp;<span class="ident" id="3953758">reflect</span><span class="op" id="3953765">.</span><span class="ident" id="3953766">Int8</span><span class="op" id="3953770">,</span>&nbsp;<span class="ident" id="3953772">reflect</span><span class="op" id="3953779">.</span><span class="ident" id="3953780">Int16</span><span class="op" id="3953785">,</span>&nbsp;<span class="ident" id="3953787">reflect</span><span class="op" id="3953794">.</span><span class="ident" id="3953795">Int32</span><span class="op" id="3953800">,</span>&nbsp;<span class="ident" id="3953802">reflect</span><span class="op" id="3953809">.</span><span class="ident" id="3953810">Int64</span><span class="op" id="3953815">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953820">n</span><span class="op" id="3953821">,</span>&nbsp;<span class="ident" id="3953823">err</span>&nbsp;<span class="op" id="3953827">:=</span>&nbsp;<span class="ident" id="3953830">strconv</span><span class="op" id="3953837">.</span><span class="ident" id="3953838">ParseInt</span><span class="op" id="3953846">(</span><span class="ident" id="3953847">s</span><span class="op" id="3953848">,</span>&nbsp;<span class="num" id="3953850">10</span><span class="op" id="3953852">,</span>&nbsp;<span class="num" id="3953854">64</span><span class="op" id="3953856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953861">if</span>&nbsp;<span class="ident" id="3953864">err</span>&nbsp;<span class="op" id="3953868">!=</span>&nbsp;<span class="ident" id="3953871">nil</span>&nbsp;<span class="op" id="3953875">||</span>&nbsp;<span class="ident" id="3953878">v</span><span class="op" id="3953879">.</span><span class="ident" id="3953880">OverflowInt</span><span class="op" id="3953891">(</span><span class="ident" id="3953892">n</span><span class="op" id="3953893">)</span>&nbsp;<span class="op" id="3953895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953901">d</span><span class="op" id="3953902">.</span><span class="ident" id="3953903">saveError</span><span class="op" id="3953912">(</span><span class="op" id="3953913">&amp;</span><span class="ident" id="3953914">UnmarshalTypeError</span><span class="op" id="3953932">{</span><span class="string" id="3953933">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3953943">+</span>&nbsp;<span class="ident" id="3953945">s</span><span class="op" id="3953946">,</span>&nbsp;<span class="ident" id="3953948">v</span><span class="op" id="3953949">.</span><span class="ident" id="3953950">Type</span><span class="op" id="3953954">(</span><span class="op" id="3953955">)</span><span class="op" id="3953956">}</span><span class="op" id="3953957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953963">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3953972">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3953977">v</span><span class="op" id="3953978">.</span><span class="ident" id="3953979">SetInt</span><span class="op" id="3953985">(</span><span class="ident" id="3953986">n</span><span class="op" id="3953987">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3953992">case</span>&nbsp;<span class="ident" id="3953997">reflect</span><span class="op" id="3954004">.</span><span class="ident" id="3954005">Uint</span><span class="op" id="3954009">,</span>&nbsp;<span class="ident" id="3954011">reflect</span><span class="op" id="3954018">.</span><span class="ident" id="3954019">Uint8</span><span class="op" id="3954024">,</span>&nbsp;<span class="ident" id="3954026">reflect</span><span class="op" id="3954033">.</span><span class="ident" id="3954034">Uint16</span><span class="op" id="3954040">,</span>&nbsp;<span class="ident" id="3954042">reflect</span><span class="op" id="3954049">.</span><span class="ident" id="3954050">Uint32</span><span class="op" id="3954056">,</span>&nbsp;<span class="ident" id="3954058">reflect</span><span class="op" id="3954065">.</span><span class="ident" id="3954066">Uint64</span><span class="op" id="3954072">,</span>&nbsp;<span class="ident" id="3954074">reflect</span><span class="op" id="3954081">.</span><span class="ident" id="3954082">Uintptr</span><span class="op" id="3954089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954094">n</span><span class="op" id="3954095">,</span>&nbsp;<span class="ident" id="3954097">err</span>&nbsp;<span class="op" id="3954101">:=</span>&nbsp;<span class="ident" id="3954104">strconv</span><span class="op" id="3954111">.</span><span class="ident" id="3954112">ParseUint</span><span class="op" id="3954121">(</span><span class="ident" id="3954122">s</span><span class="op" id="3954123">,</span>&nbsp;<span class="num" id="3954125">10</span><span class="op" id="3954127">,</span>&nbsp;<span class="num" id="3954129">64</span><span class="op" id="3954131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954136">if</span>&nbsp;<span class="ident" id="3954139">err</span>&nbsp;<span class="op" id="3954143">!=</span>&nbsp;<span class="ident" id="3954146">nil</span>&nbsp;<span class="op" id="3954150">||</span>&nbsp;<span class="ident" id="3954153">v</span><span class="op" id="3954154">.</span><span class="ident" id="3954155">OverflowUint</span><span class="op" id="3954167">(</span><span class="ident" id="3954168">n</span><span class="op" id="3954169">)</span>&nbsp;<span class="op" id="3954171">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954177">d</span><span class="op" id="3954178">.</span><span class="ident" id="3954179">saveError</span><span class="op" id="3954188">(</span><span class="op" id="3954189">&amp;</span><span class="ident" id="3954190">UnmarshalTypeError</span><span class="op" id="3954208">{</span><span class="string" id="3954209">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3954219">+</span>&nbsp;<span class="ident" id="3954221">s</span><span class="op" id="3954222">,</span>&nbsp;<span class="ident" id="3954224">v</span><span class="op" id="3954225">.</span><span class="ident" id="3954226">Type</span><span class="op" id="3954230">(</span><span class="op" id="3954231">)</span><span class="op" id="3954232">}</span><span class="op" id="3954233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954239">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3954248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954253">v</span><span class="op" id="3954254">.</span><span class="ident" id="3954255">SetUint</span><span class="op" id="3954262">(</span><span class="ident" id="3954263">n</span><span class="op" id="3954264">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954269">case</span>&nbsp;<span class="ident" id="3954274">reflect</span><span class="op" id="3954281">.</span><span class="ident" id="3954282">Float32</span><span class="op" id="3954289">,</span>&nbsp;<span class="ident" id="3954291">reflect</span><span class="op" id="3954298">.</span><span class="ident" id="3954299">Float64</span><span class="op" id="3954306">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954311">n</span><span class="op" id="3954312">,</span>&nbsp;<span class="ident" id="3954314">err</span>&nbsp;<span class="op" id="3954318">:=</span>&nbsp;<span class="ident" id="3954321">strconv</span><span class="op" id="3954328">.</span><span class="ident" id="3954329">ParseFloat</span><span class="op" id="3954339">(</span><span class="ident" id="3954340">s</span><span class="op" id="3954341">,</span>&nbsp;<span class="ident" id="3954343">v</span><span class="op" id="3954344">.</span><span class="ident" id="3954345">Type</span><span class="op" id="3954349">(</span><span class="op" id="3954350">)</span><span class="op" id="3954351">.</span><span class="ident" id="3954352">Bits</span><span class="op" id="3954356">(</span><span class="op" id="3954357">)</span><span class="op" id="3954358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954363">if</span>&nbsp;<span class="ident" id="3954366">err</span>&nbsp;<span class="op" id="3954370">!=</span>&nbsp;<span class="ident" id="3954373">nil</span>&nbsp;<span class="op" id="3954377">||</span>&nbsp;<span class="ident" id="3954380">v</span><span class="op" id="3954381">.</span><span class="ident" id="3954382">OverflowFloat</span><span class="op" id="3954395">(</span><span class="ident" id="3954396">n</span><span class="op" id="3954397">)</span>&nbsp;<span class="op" id="3954399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954405">d</span><span class="op" id="3954406">.</span><span class="ident" id="3954407">saveError</span><span class="op" id="3954416">(</span><span class="op" id="3954417">&amp;</span><span class="ident" id="3954418">UnmarshalTypeError</span><span class="op" id="3954436">{</span><span class="string" id="3954437">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3954447">+</span>&nbsp;<span class="ident" id="3954449">s</span><span class="op" id="3954450">,</span>&nbsp;<span class="ident" id="3954452">v</span><span class="op" id="3954453">.</span><span class="ident" id="3954454">Type</span><span class="op" id="3954458">(</span><span class="op" id="3954459">)</span><span class="op" id="3954460">}</span><span class="op" id="3954461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954467">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3954476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954481">v</span><span class="op" id="3954482">.</span><span class="ident" id="3954483">SetFloat</span><span class="op" id="3954491">(</span><span class="ident" id="3954492">n</span><span class="op" id="3954493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3954497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3954500">}</span><br>
<span class="lineno"></span><span class="op" id="3954502">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="3954505">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="3954564">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3954624">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="3954689">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="3954745">func</span>&nbsp;<span class="op" id="3954750">(</span><span class="ident" id="3954751">d</span>&nbsp;<span class="op" id="3954753">*</span><span class="ident" id="3954754">decodeState</span><span class="op" id="3954765">)</span>&nbsp;<span class="ident" id="3954767">valueInterface</span><span class="op" id="3954781">(</span><span class="op" id="3954782">)</span>&nbsp;<span class="keyword" id="3954784">interface</span><span class="op" id="3954793">{</span><span class="op" id="3954794">}</span>&nbsp;<span class="op" id="3954796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954799">switch</span>&nbsp;<span class="ident" id="3954806">d</span><span class="op" id="3954807">.</span><span class="ident" id="3954808">scanWhile</span><span class="op" id="3954817">(</span><span class="ident" id="3954818">scanSkipSpace</span><span class="op" id="3954831">)</span>&nbsp;<span class="op" id="3954833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954836">default</span><span class="op" id="3954843">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3954847">d</span><span class="op" id="3954848">.</span><span class="builtintype" id="3954849">error</span><span class="op" id="3954854">(</span><span class="ident" id="3954855">errPhase</span><span class="op" id="3954863">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3954867">panic</span><span class="op" id="3954872">(</span><span class="string" id="3954873">&#34;unreachable&#34;</span><span class="op" id="3954886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954889">case</span>&nbsp;<span class="ident" id="3954894">scanBeginArray</span><span class="op" id="3954908">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954912">return</span>&nbsp;<span class="ident" id="3954919">d</span><span class="op" id="3954920">.</span><span class="ident" id="3954921">arrayInterface</span><span class="op" id="3954935">(</span><span class="op" id="3954936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954939">case</span>&nbsp;<span class="ident" id="3954944">scanBeginObject</span><span class="op" id="3954959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954963">return</span>&nbsp;<span class="ident" id="3954970">d</span><span class="op" id="3954971">.</span><span class="ident" id="3954972">objectInterface</span><span class="op" id="3954987">(</span><span class="op" id="3954988">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3954991">case</span>&nbsp;<span class="ident" id="3954996">scanBeginLiteral</span><span class="op" id="3955012">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955016">return</span>&nbsp;<span class="ident" id="3955023">d</span><span class="op" id="3955024">.</span><span class="ident" id="3955025">literalInterface</span><span class="op" id="3955041">(</span><span class="op" id="3955042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3955045">}</span><br>
<span class="lineno"></span><span class="op" id="3955047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="3955050">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3955109">func</span>&nbsp;<span class="op" id="3955114">(</span><span class="ident" id="3955115">d</span>&nbsp;<span class="op" id="3955117">*</span><span class="ident" id="3955118">decodeState</span><span class="op" id="3955129">)</span>&nbsp;<span class="ident" id="3955131">arrayInterface</span><span class="op" id="3955145">(</span><span class="op" id="3955146">)</span>&nbsp;<span class="op" id="3955148">[</span><span class="op" id="3955149">]</span><span class="keyword" id="3955150">interface</span><span class="op" id="3955159">{</span><span class="op" id="3955160">}</span>&nbsp;<span class="op" id="3955162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955165">var</span>&nbsp;<span class="ident" id="3955169">v</span>&nbsp;<span class="op" id="3955171">=</span>&nbsp;<span class="builtinfunc" id="3955173">make</span><span class="op" id="3955177">(</span><span class="op" id="3955178">[</span><span class="op" id="3955179">]</span><span class="keyword" id="3955180">interface</span><span class="op" id="3955189">{</span><span class="op" id="3955190">}</span><span class="op" id="3955191">,</span>&nbsp;<span class="num" id="3955193">0</span><span class="op" id="3955194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955197">for</span>&nbsp;<span class="op" id="3955201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3955205">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955265">op</span>&nbsp;<span class="op" id="3955268">:=</span>&nbsp;<span class="ident" id="3955271">d</span><span class="op" id="3955272">.</span><span class="ident" id="3955273">scanWhile</span><span class="op" id="3955282">(</span><span class="ident" id="3955283">scanSkipSpace</span><span class="op" id="3955296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955300">if</span>&nbsp;<span class="ident" id="3955303">op</span>&nbsp;<span class="op" id="3955306">==</span>&nbsp;<span class="ident" id="3955309">scanEndArray</span>&nbsp;<span class="op" id="3955322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955327">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3955335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3955340">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955396">d</span><span class="op" id="3955397">.</span><span class="ident" id="3955398">off</span><span class="op" id="3955401">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955406">d</span><span class="op" id="3955407">.</span><span class="ident" id="3955408">scan</span><span class="op" id="3955412">.</span><span class="ident" id="3955413">undo</span><span class="op" id="3955417">(</span><span class="ident" id="3955418">op</span><span class="op" id="3955420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955425">v</span>&nbsp;<span class="op" id="3955427">=</span>&nbsp;<span class="builtinfunc" id="3955429">append</span><span class="op" id="3955435">(</span><span class="ident" id="3955436">v</span><span class="op" id="3955437">,</span>&nbsp;<span class="ident" id="3955439">d</span><span class="op" id="3955440">.</span><span class="ident" id="3955441">valueInterface</span><span class="op" id="3955455">(</span><span class="op" id="3955456">)</span><span class="op" id="3955457">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3955462">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955494">op</span>&nbsp;<span class="op" id="3955497">=</span>&nbsp;<span class="ident" id="3955499">d</span><span class="op" id="3955500">.</span><span class="ident" id="3955501">scanWhile</span><span class="op" id="3955510">(</span><span class="ident" id="3955511">scanSkipSpace</span><span class="op" id="3955524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955528">if</span>&nbsp;<span class="ident" id="3955531">op</span>&nbsp;<span class="op" id="3955534">==</span>&nbsp;<span class="ident" id="3955537">scanEndArray</span>&nbsp;<span class="op" id="3955550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955555">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3955563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955567">if</span>&nbsp;<span class="ident" id="3955570">op</span>&nbsp;<span class="op" id="3955573">!=</span>&nbsp;<span class="ident" id="3955576">scanArrayValue</span>&nbsp;<span class="op" id="3955591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955596">d</span><span class="op" id="3955597">.</span><span class="builtintype" id="3955598">error</span><span class="op" id="3955603">(</span><span class="ident" id="3955604">errPhase</span><span class="op" id="3955612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3955616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3955619">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955622">return</span>&nbsp;<span class="ident" id="3955629">v</span><br>
<span class="lineno"></span><span class="op" id="3955631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3955634">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3955704">func</span>&nbsp;<span class="op" id="3955709">(</span><span class="ident" id="3955710">d</span>&nbsp;<span class="op" id="3955712">*</span><span class="ident" id="3955713">decodeState</span><span class="op" id="3955724">)</span>&nbsp;<span class="ident" id="3955726">objectInterface</span><span class="op" id="3955741">(</span><span class="op" id="3955742">)</span>&nbsp;<span class="keyword" id="3955744">map</span><span class="op" id="3955747">[</span><span class="builtintype" id="3955748">string</span><span class="op" id="3955754">]</span><span class="keyword" id="3955755">interface</span><span class="op" id="3955764">{</span><span class="op" id="3955765">}</span>&nbsp;<span class="op" id="3955767">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955770">m</span>&nbsp;<span class="op" id="3955772">:=</span>&nbsp;<span class="builtinfunc" id="3955775">make</span><span class="op" id="3955779">(</span><span class="keyword" id="3955780">map</span><span class="op" id="3955783">[</span><span class="builtintype" id="3955784">string</span><span class="op" id="3955790">]</span><span class="keyword" id="3955791">interface</span><span class="op" id="3955800">{</span><span class="op" id="3955801">}</span><span class="op" id="3955802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955805">for</span>&nbsp;<span class="op" id="3955809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3955813">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3955861">op</span>&nbsp;<span class="op" id="3955864">:=</span>&nbsp;<span class="ident" id="3955867">d</span><span class="op" id="3955868">.</span><span class="ident" id="3955869">scanWhile</span><span class="op" id="3955878">(</span><span class="ident" id="3955879">scanSkipSpace</span><span class="op" id="3955892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955896">if</span>&nbsp;<span class="ident" id="3955899">op</span>&nbsp;<span class="op" id="3955902">==</span>&nbsp;<span class="ident" id="3955905">scanEndObject</span>&nbsp;<span class="op" id="3955919">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3955924">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955978">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3955986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3955990">if</span>&nbsp;<span class="ident" id="3955993">op</span>&nbsp;<span class="op" id="3955996">!=</span>&nbsp;<span class="ident" id="3955999">scanBeginLiteral</span>&nbsp;<span class="op" id="3956016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956021">d</span><span class="op" id="3956022">.</span><span class="builtintype" id="3956023">error</span><span class="op" id="3956028">(</span><span class="ident" id="3956029">errPhase</span><span class="op" id="3956037">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3956046">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956068">start</span>&nbsp;<span class="op" id="3956074">:=</span>&nbsp;<span class="ident" id="3956077">d</span><span class="op" id="3956078">.</span><span class="ident" id="3956079">off</span>&nbsp;<span class="op" id="3956083">-</span>&nbsp;<span class="num" id="3956085">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956089">op</span>&nbsp;<span class="op" id="3956092">=</span>&nbsp;<span class="ident" id="3956094">d</span><span class="op" id="3956095">.</span><span class="ident" id="3956096">scanWhile</span><span class="op" id="3956105">(</span><span class="ident" id="3956106">scanContinue</span><span class="op" id="3956118">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956122">item</span>&nbsp;<span class="op" id="3956127">:=</span>&nbsp;<span class="ident" id="3956130">d</span><span class="op" id="3956131">.</span><span class="ident" id="3956132">data</span><span class="op" id="3956136">[</span><span class="ident" id="3956137">start</span>&nbsp;<span class="op" id="3956143">:</span>&nbsp;<span class="ident" id="3956145">d</span><span class="op" id="3956146">.</span><span class="ident" id="3956147">off</span><span class="op" id="3956150">-</span><span class="num" id="3956151">1</span><span class="op" id="3956152">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956156">key</span><span class="op" id="3956159">,</span>&nbsp;<span class="ident" id="3956161">ok</span>&nbsp;<span class="op" id="3956164">:=</span>&nbsp;<span class="ident" id="3956167">unquote</span><span class="op" id="3956174">(</span><span class="ident" id="3956175">item</span><span class="op" id="3956179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956183">if</span>&nbsp;<span class="op" id="3956186">!</span><span class="ident" id="3956187">ok</span>&nbsp;<span class="op" id="3956190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956195">d</span><span class="op" id="3956196">.</span><span class="builtintype" id="3956197">error</span><span class="op" id="3956202">(</span><span class="ident" id="3956203">errPhase</span><span class="op" id="3956211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956215">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3956220">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956246">if</span>&nbsp;<span class="ident" id="3956249">op</span>&nbsp;<span class="op" id="3956252">==</span>&nbsp;<span class="ident" id="3956255">scanSkipSpace</span>&nbsp;<span class="op" id="3956269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956274">op</span>&nbsp;<span class="op" id="3956277">=</span>&nbsp;<span class="ident" id="3956279">d</span><span class="op" id="3956280">.</span><span class="ident" id="3956281">scanWhile</span><span class="op" id="3956290">(</span><span class="ident" id="3956291">scanSkipSpace</span><span class="op" id="3956304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956308">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956312">if</span>&nbsp;<span class="ident" id="3956315">op</span>&nbsp;<span class="op" id="3956318">!=</span>&nbsp;<span class="ident" id="3956321">scanObjectKey</span>&nbsp;<span class="op" id="3956335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956340">d</span><span class="op" id="3956341">.</span><span class="builtintype" id="3956342">error</span><span class="op" id="3956347">(</span><span class="ident" id="3956348">errPhase</span><span class="op" id="3956356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3956365">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956382">m</span><span class="op" id="3956383">[</span><span class="ident" id="3956384">key</span><span class="op" id="3956387">]</span>&nbsp;<span class="op" id="3956389">=</span>&nbsp;<span class="ident" id="3956391">d</span><span class="op" id="3956392">.</span><span class="ident" id="3956393">valueInterface</span><span class="op" id="3956407">(</span><span class="op" id="3956408">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3956413">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956445">op</span>&nbsp;<span class="op" id="3956448">=</span>&nbsp;<span class="ident" id="3956450">d</span><span class="op" id="3956451">.</span><span class="ident" id="3956452">scanWhile</span><span class="op" id="3956461">(</span><span class="ident" id="3956462">scanSkipSpace</span><span class="op" id="3956475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956479">if</span>&nbsp;<span class="ident" id="3956482">op</span>&nbsp;<span class="op" id="3956485">==</span>&nbsp;<span class="ident" id="3956488">scanEndObject</span>&nbsp;<span class="op" id="3956502">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956507">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956519">if</span>&nbsp;<span class="ident" id="3956522">op</span>&nbsp;<span class="op" id="3956525">!=</span>&nbsp;<span class="ident" id="3956528">scanObjectValue</span>&nbsp;<span class="op" id="3956544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956549">d</span><span class="op" id="3956550">.</span><span class="builtintype" id="3956551">error</span><span class="op" id="3956556">(</span><span class="ident" id="3956557">errPhase</span><span class="op" id="3956565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956569">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3956572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956575">return</span>&nbsp;<span class="ident" id="3956582">m</span><br>
<span class="lineno"></span><span class="op" id="3956584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3956587">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="3956655">func</span>&nbsp;<span class="op" id="3956660">(</span><span class="ident" id="3956661">d</span>&nbsp;<span class="op" id="3956663">*</span><span class="ident" id="3956664">decodeState</span><span class="op" id="3956675">)</span>&nbsp;<span class="ident" id="3956677">literalInterface</span><span class="op" id="3956693">(</span><span class="op" id="3956694">)</span>&nbsp;<span class="keyword" id="3956696">interface</span><span class="op" id="3956705">{</span><span class="op" id="3956706">}</span>&nbsp;<span class="op" id="3956708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3956711">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956769">start</span>&nbsp;<span class="op" id="3956775">:=</span>&nbsp;<span class="ident" id="3956778">d</span><span class="op" id="3956779">.</span><span class="ident" id="3956780">off</span>&nbsp;<span class="op" id="3956784">-</span>&nbsp;<span class="num" id="3956786">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956789">op</span>&nbsp;<span class="op" id="3956792">:=</span>&nbsp;<span class="ident" id="3956795">d</span><span class="op" id="3956796">.</span><span class="ident" id="3956797">scanWhile</span><span class="op" id="3956806">(</span><span class="ident" id="3956807">scanContinue</span><span class="op" id="3956819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3956823">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956864">d</span><span class="op" id="3956865">.</span><span class="ident" id="3956866">off</span><span class="op" id="3956869">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956873">d</span><span class="op" id="3956874">.</span><span class="ident" id="3956875">scan</span><span class="op" id="3956879">.</span><span class="ident" id="3956880">undo</span><span class="op" id="3956884">(</span><span class="ident" id="3956885">op</span><span class="op" id="3956887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3956890">item</span>&nbsp;<span class="op" id="3956895">:=</span>&nbsp;<span class="ident" id="3956898">d</span><span class="op" id="3956899">.</span><span class="ident" id="3956900">data</span><span class="op" id="3956904">[</span><span class="ident" id="3956905">start</span><span class="op" id="3956910">:</span><span class="ident" id="3956911">d</span><span class="op" id="3956912">.</span><span class="ident" id="3956913">off</span><span class="op" id="3956916">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956920">switch</span>&nbsp;<span class="ident" id="3956927">c</span>&nbsp;<span class="op" id="3956929">:=</span>&nbsp;<span class="ident" id="3956932">item</span><span class="op" id="3956936">[</span><span class="num" id="3956937">0</span><span class="op" id="3956938">]</span><span class="op" id="3956939">;</span>&nbsp;<span class="ident" id="3956941">c</span>&nbsp;<span class="op" id="3956943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956946">case</span>&nbsp;<span class="string" id="3956951">&#39;n&#39;</span><span class="op" id="3956954">:</span>&nbsp;<span class="comment" id="3956956">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956966">return</span>&nbsp;<span class="ident" id="3956973">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3956979">case</span>&nbsp;<span class="string" id="3956984">&#39;t&#39;</span><span class="op" id="3956987">,</span>&nbsp;<span class="string" id="3956989">&#39;f&#39;</span><span class="op" id="3956992">:</span>&nbsp;<span class="comment" id="3956994">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957011">return</span>&nbsp;<span class="ident" id="3957018">c</span>&nbsp;<span class="op" id="3957020">==</span>&nbsp;<span class="string" id="3957023">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957029">case</span>&nbsp;<span class="string" id="3957034">&#39;&#34;&#39;</span><span class="op" id="3957037">:</span>&nbsp;<span class="comment" id="3957039">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957051">s</span><span class="op" id="3957052">,</span>&nbsp;<span class="ident" id="3957054">ok</span>&nbsp;<span class="op" id="3957057">:=</span>&nbsp;<span class="ident" id="3957060">unquote</span><span class="op" id="3957067">(</span><span class="ident" id="3957068">item</span><span class="op" id="3957072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957076">if</span>&nbsp;<span class="op" id="3957079">!</span><span class="ident" id="3957080">ok</span>&nbsp;<span class="op" id="3957083">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957088">d</span><span class="op" id="3957089">.</span><span class="builtintype" id="3957090">error</span><span class="op" id="3957095">(</span><span class="ident" id="3957096">errPhase</span><span class="op" id="3957104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957112">return</span>&nbsp;<span class="ident" id="3957119">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957123">default</span><span class="op" id="3957130">:</span>&nbsp;<span class="comment" id="3957132">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957144">if</span>&nbsp;<span class="ident" id="3957147">c</span>&nbsp;<span class="op" id="3957149">!=</span>&nbsp;<span class="string" id="3957152">&#39;-&#39;</span>&nbsp;<span class="op" id="3957156">&amp;&amp;</span>&nbsp;<span class="op" id="3957159">(</span><span class="ident" id="3957160">c</span>&nbsp;<span class="op" id="3957162">&lt;</span>&nbsp;<span class="string" id="3957164">&#39;0&#39;</span>&nbsp;<span class="op" id="3957168">||</span>&nbsp;<span class="ident" id="3957171">c</span>&nbsp;<span class="op" id="3957173">&gt;</span>&nbsp;<span class="string" id="3957175">&#39;9&#39;</span><span class="op" id="3957178">)</span>&nbsp;<span class="op" id="3957180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957185">d</span><span class="op" id="3957186">.</span><span class="builtintype" id="3957187">error</span><span class="op" id="3957192">(</span><span class="ident" id="3957193">errPhase</span><span class="op" id="3957201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957209">n</span><span class="op" id="3957210">,</span>&nbsp;<span class="ident" id="3957212">err</span>&nbsp;<span class="op" id="3957216">:=</span>&nbsp;<span class="ident" id="3957219">d</span><span class="op" id="3957220">.</span><span class="ident" id="3957221">convertNumber</span><span class="op" id="3957234">(</span><span class="builtintype" id="3957235">string</span><span class="op" id="3957241">(</span><span class="ident" id="3957242">item</span><span class="op" id="3957246">)</span><span class="op" id="3957247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957251">if</span>&nbsp;<span class="ident" id="3957254">err</span>&nbsp;<span class="op" id="3957258">!=</span>&nbsp;<span class="ident" id="3957261">nil</span>&nbsp;<span class="op" id="3957265">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957270">d</span><span class="op" id="3957271">.</span><span class="ident" id="3957272">saveError</span><span class="op" id="3957281">(</span><span class="ident" id="3957282">err</span><span class="op" id="3957285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957293">return</span>&nbsp;<span class="ident" id="3957300">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957303">}</span><br>
<span class="lineno"></span><span class="op" id="3957305">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="3957308">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3957382">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="3957403">func</span>&nbsp;<span class="ident" id="3957408">getu4</span><span class="op" id="3957413">(</span><span class="ident" id="3957414">s</span>&nbsp;<span class="op" id="3957416">[</span><span class="op" id="3957417">]</span><span class="builtintype" id="3957418">byte</span><span class="op" id="3957422">)</span>&nbsp;<span class="builtintype" id="3957424">rune</span>&nbsp;<span class="op" id="3957429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957432">if</span>&nbsp;<span class="builtinfunc" id="3957435">len</span><span class="op" id="3957438">(</span><span class="ident" id="3957439">s</span><span class="op" id="3957440">)</span>&nbsp;<span class="op" id="3957442">&lt;</span>&nbsp;<span class="num" id="3957444">6</span>&nbsp;<span class="op" id="3957446">||</span>&nbsp;<span class="ident" id="3957449">s</span><span class="op" id="3957450">[</span><span class="num" id="3957451">0</span><span class="op" id="3957452">]</span>&nbsp;<span class="op" id="3957454">!=</span>&nbsp;<span class="string" id="3957457">&#39;\\&#39;</span>&nbsp;<span class="op" id="3957462">||</span>&nbsp;<span class="ident" id="3957465">s</span><span class="op" id="3957466">[</span><span class="num" id="3957467">1</span><span class="op" id="3957468">]</span>&nbsp;<span class="op" id="3957470">!=</span>&nbsp;<span class="string" id="3957473">&#39;u&#39;</span>&nbsp;<span class="op" id="3957477">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957481">return</span>&nbsp;<span class="op" id="3957488">-</span><span class="num" id="3957489">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957495">r</span><span class="op" id="3957496">,</span>&nbsp;<span class="ident" id="3957498">err</span>&nbsp;<span class="op" id="3957502">:=</span>&nbsp;<span class="ident" id="3957505">strconv</span><span class="op" id="3957512">.</span><span class="ident" id="3957513">ParseUint</span><span class="op" id="3957522">(</span><span class="builtintype" id="3957523">string</span><span class="op" id="3957529">(</span><span class="ident" id="3957530">s</span><span class="op" id="3957531">[</span><span class="num" id="3957532">2</span><span class="op" id="3957533">:</span><span class="num" id="3957534">6</span><span class="op" id="3957535">]</span><span class="op" id="3957536">)</span><span class="op" id="3957537">,</span>&nbsp;<span class="num" id="3957539">16</span><span class="op" id="3957541">,</span>&nbsp;<span class="num" id="3957543">64</span><span class="op" id="3957545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957548">if</span>&nbsp;<span class="ident" id="3957551">err</span>&nbsp;<span class="op" id="3957555">!=</span>&nbsp;<span class="ident" id="3957558">nil</span>&nbsp;<span class="op" id="3957562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957566">return</span>&nbsp;<span class="op" id="3957573">-</span><span class="num" id="3957574">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957580">return</span>&nbsp;<span class="builtintype" id="3957587">rune</span><span class="op" id="3957591">(</span><span class="ident" id="3957592">r</span><span class="op" id="3957593">)</span><br>
<span class="lineno"></span><span class="op" id="3957595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3957598">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="3957674">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="3957745">func</span>&nbsp;<span class="ident" id="3957750">unquote</span><span class="op" id="3957757">(</span><span class="ident" id="3957758">s</span>&nbsp;<span class="op" id="3957760">[</span><span class="op" id="3957761">]</span><span class="builtintype" id="3957762">byte</span><span class="op" id="3957766">)</span>&nbsp;<span class="op" id="3957768">(</span><span class="ident" id="3957769">t</span>&nbsp;<span class="builtintype" id="3957771">string</span><span class="op" id="3957777">,</span>&nbsp;<span class="ident" id="3957779">ok</span>&nbsp;<span class="builtintype" id="3957782">bool</span><span class="op" id="3957786">)</span>&nbsp;<span class="op" id="3957788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957791">s</span><span class="op" id="3957792">,</span>&nbsp;<span class="ident" id="3957794">ok</span>&nbsp;<span class="op" id="3957797">=</span>&nbsp;<span class="ident" id="3957799">unquoteBytes</span><span class="op" id="3957811">(</span><span class="ident" id="3957812">s</span><span class="op" id="3957813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957816">t</span>&nbsp;<span class="op" id="3957818">=</span>&nbsp;<span class="builtintype" id="3957820">string</span><span class="op" id="3957826">(</span><span class="ident" id="3957827">s</span><span class="op" id="3957828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957831">return</span><br>
<span class="lineno">970</span><span class="op" id="3957838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3957841">func</span>&nbsp;<span class="ident" id="3957846">unquoteBytes</span><span class="op" id="3957858">(</span><span class="ident" id="3957859">s</span>&nbsp;<span class="op" id="3957861">[</span><span class="op" id="3957862">]</span><span class="builtintype" id="3957863">byte</span><span class="op" id="3957867">)</span>&nbsp;<span class="op" id="3957869">(</span><span class="ident" id="3957870">t</span>&nbsp;<span class="op" id="3957872">[</span><span class="op" id="3957873">]</span><span class="builtintype" id="3957874">byte</span><span class="op" id="3957878">,</span>&nbsp;<span class="ident" id="3957880">ok</span>&nbsp;<span class="builtintype" id="3957883">bool</span><span class="op" id="3957887">)</span>&nbsp;<span class="op" id="3957889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957892">if</span>&nbsp;<span class="builtinfunc" id="3957895">len</span><span class="op" id="3957898">(</span><span class="ident" id="3957899">s</span><span class="op" id="3957900">)</span>&nbsp;<span class="op" id="3957902">&lt;</span>&nbsp;<span class="num" id="3957904">2</span>&nbsp;<span class="op" id="3957906">||</span>&nbsp;<span class="ident" id="3957909">s</span><span class="op" id="3957910">[</span><span class="num" id="3957911">0</span><span class="op" id="3957912">]</span>&nbsp;<span class="op" id="3957914">!=</span>&nbsp;<span class="string" id="3957917">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3957921">||</span>&nbsp;<span class="ident" id="3957924">s</span><span class="op" id="3957925">[</span><span class="builtinfunc" id="3957926">len</span><span class="op" id="3957929">(</span><span class="ident" id="3957930">s</span><span class="op" id="3957931">)</span><span class="op" id="3957932">-</span><span class="num" id="3957933">1</span><span class="op" id="3957934">]</span>&nbsp;<span class="op" id="3957936">!=</span>&nbsp;<span class="string" id="3957939">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3957943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3957947">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3957955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3957958">s</span>&nbsp;<span class="op" id="3957960">=</span>&nbsp;<span class="ident" id="3957962">s</span><span class="op" id="3957963">[</span><span class="num" id="3957964">1</span>&nbsp;<span class="op" id="3957966">:</span>&nbsp;<span class="builtinfunc" id="3957968">len</span><span class="op" id="3957971">(</span><span class="ident" id="3957972">s</span><span class="op" id="3957973">)</span><span class="op" id="3957974">-</span><span class="num" id="3957975">1</span><span class="op" id="3957976">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3957980">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3958033">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3958091">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958111">r</span>&nbsp;<span class="op" id="3958113">:=</span>&nbsp;<span class="num" id="3958116">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958119">for</span>&nbsp;<span class="ident" id="3958123">r</span>&nbsp;<span class="op" id="3958125">&lt;</span>&nbsp;<span class="builtinfunc" id="3958127">len</span><span class="op" id="3958130">(</span><span class="ident" id="3958131">s</span><span class="op" id="3958132">)</span>&nbsp;<span class="op" id="3958134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958138">c</span>&nbsp;<span class="op" id="3958140">:=</span>&nbsp;<span class="ident" id="3958143">s</span><span class="op" id="3958144">[</span><span class="ident" id="3958145">r</span><span class="op" id="3958146">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958150">if</span>&nbsp;<span class="ident" id="3958153">c</span>&nbsp;<span class="op" id="3958155">==</span>&nbsp;<span class="string" id="3958158">&#39;\\&#39;</span>&nbsp;<span class="op" id="3958163">||</span>&nbsp;<span class="ident" id="3958166">c</span>&nbsp;<span class="op" id="3958168">==</span>&nbsp;<span class="string" id="3958171">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3958175">||</span>&nbsp;<span class="ident" id="3958178">c</span>&nbsp;<span class="op" id="3958180">&lt;</span>&nbsp;<span class="string" id="3958182">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3958186">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958191">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958203">if</span>&nbsp;<span class="ident" id="3958206">c</span>&nbsp;<span class="op" id="3958208">&lt;</span>&nbsp;<span class="ident" id="3958210">utf8</span><span class="op" id="3958214">.</span><span class="ident" id="3958215">RuneSelf</span>&nbsp;<span class="op" id="3958224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958229">r</span><span class="op" id="3958230">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958236">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958251">rr</span><span class="op" id="3958253">,</span>&nbsp;<span class="ident" id="3958255">size</span>&nbsp;<span class="op" id="3958260">:=</span>&nbsp;<span class="ident" id="3958263">utf8</span><span class="op" id="3958267">.</span><span class="ident" id="3958268">DecodeRune</span><span class="op" id="3958278">(</span><span class="ident" id="3958279">s</span><span class="op" id="3958280">[</span><span class="ident" id="3958281">r</span><span class="op" id="3958282">:</span><span class="op" id="3958283">]</span><span class="op" id="3958284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958288">if</span>&nbsp;<span class="ident" id="3958291">rr</span>&nbsp;<span class="op" id="3958294">==</span>&nbsp;<span class="ident" id="3958297">utf8</span><span class="op" id="3958301">.</span><span class="ident" id="3958302">RuneError</span>&nbsp;<span class="op" id="3958312">&amp;&amp;</span>&nbsp;<span class="ident" id="3958315">size</span>&nbsp;<span class="op" id="3958320">==</span>&nbsp;<span class="num" id="3958323">1</span>&nbsp;<span class="op" id="3958325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958330">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958338">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958342">r</span>&nbsp;<span class="op" id="3958344">+=</span>&nbsp;<span class="ident" id="3958347">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958356">if</span>&nbsp;<span class="ident" id="3958359">r</span>&nbsp;<span class="op" id="3958361">==</span>&nbsp;<span class="builtinfunc" id="3958364">len</span><span class="op" id="3958367">(</span><span class="ident" id="3958368">s</span><span class="op" id="3958369">)</span>&nbsp;<span class="op" id="3958371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958375">return</span>&nbsp;<span class="ident" id="3958382">s</span><span class="op" id="3958383">,</span>&nbsp;<span class="builtintype" id="3958385">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958391">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958395">b</span>&nbsp;<span class="op" id="3958397">:=</span>&nbsp;<span class="builtinfunc" id="3958400">make</span><span class="op" id="3958404">(</span><span class="op" id="3958405">[</span><span class="op" id="3958406">]</span><span class="builtintype" id="3958407">byte</span><span class="op" id="3958411">,</span>&nbsp;<span class="builtinfunc" id="3958413">len</span><span class="op" id="3958416">(</span><span class="ident" id="3958417">s</span><span class="op" id="3958418">)</span><span class="op" id="3958419">+</span><span class="num" id="3958420">2</span><span class="op" id="3958421">*</span><span class="ident" id="3958422">utf8</span><span class="op" id="3958426">.</span><span class="ident" id="3958427">UTFMax</span><span class="op" id="3958433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958436">w</span>&nbsp;<span class="op" id="3958438">:=</span>&nbsp;<span class="builtinfunc" id="3958441">copy</span><span class="op" id="3958445">(</span><span class="ident" id="3958446">b</span><span class="op" id="3958447">,</span>&nbsp;<span class="ident" id="3958449">s</span><span class="op" id="3958450">[</span><span class="num" id="3958451">0</span><span class="op" id="3958452">:</span><span class="ident" id="3958453">r</span><span class="op" id="3958454">]</span><span class="op" id="3958455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958458">for</span>&nbsp;<span class="ident" id="3958462">r</span>&nbsp;<span class="op" id="3958464">&lt;</span>&nbsp;<span class="builtinfunc" id="3958466">len</span><span class="op" id="3958469">(</span><span class="ident" id="3958470">s</span><span class="op" id="3958471">)</span>&nbsp;<span class="op" id="3958473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3958477">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3958528">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3958574">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958600">if</span>&nbsp;<span class="ident" id="3958603">w</span>&nbsp;<span class="op" id="3958605">&gt;=</span>&nbsp;<span class="builtinfunc" id="3958608">len</span><span class="op" id="3958611">(</span><span class="ident" id="3958612">b</span><span class="op" id="3958613">)</span><span class="op" id="3958614">-</span><span class="num" id="3958615">2</span><span class="op" id="3958616">*</span><span class="ident" id="3958617">utf8</span><span class="op" id="3958621">.</span><span class="ident" id="3958622">UTFMax</span>&nbsp;<span class="op" id="3958629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958634">nb</span>&nbsp;<span class="op" id="3958637">:=</span>&nbsp;<span class="builtinfunc" id="3958640">make</span><span class="op" id="3958644">(</span><span class="op" id="3958645">[</span><span class="op" id="3958646">]</span><span class="builtintype" id="3958647">byte</span><span class="op" id="3958651">,</span>&nbsp;<span class="op" id="3958653">(</span><span class="builtinfunc" id="3958654">len</span><span class="op" id="3958657">(</span><span class="ident" id="3958658">b</span><span class="op" id="3958659">)</span><span class="op" id="3958660">+</span><span class="ident" id="3958661">utf8</span><span class="op" id="3958665">.</span><span class="ident" id="3958666">UTFMax</span><span class="op" id="3958672">)</span><span class="op" id="3958673">*</span><span class="num" id="3958674">2</span><span class="op" id="3958675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3958680">copy</span><span class="op" id="3958684">(</span><span class="ident" id="3958685">nb</span><span class="op" id="3958687">,</span>&nbsp;<span class="ident" id="3958689">b</span><span class="op" id="3958690">[</span><span class="num" id="3958691">0</span><span class="op" id="3958692">:</span><span class="ident" id="3958693">w</span><span class="op" id="3958694">]</span><span class="op" id="3958695">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958700">b</span>&nbsp;<span class="op" id="3958702">=</span>&nbsp;<span class="ident" id="3958704">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958713">switch</span>&nbsp;<span class="ident" id="3958720">c</span>&nbsp;<span class="op" id="3958722">:=</span>&nbsp;<span class="ident" id="3958725">s</span><span class="op" id="3958726">[</span><span class="ident" id="3958727">r</span><span class="op" id="3958728">]</span><span class="op" id="3958729">;</span>&nbsp;<span class="op" id="3958731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958735">case</span>&nbsp;<span class="ident" id="3958740">c</span>&nbsp;<span class="op" id="3958742">==</span>&nbsp;<span class="string" id="3958745">&#39;\\&#39;</span><span class="op" id="3958749">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958754">r</span><span class="op" id="3958755">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958761">if</span>&nbsp;<span class="ident" id="3958764">r</span>&nbsp;<span class="op" id="3958766">&gt;=</span>&nbsp;<span class="builtinfunc" id="3958769">len</span><span class="op" id="3958772">(</span><span class="ident" id="3958773">s</span><span class="op" id="3958774">)</span>&nbsp;<span class="op" id="3958776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958782">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3958792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958797">switch</span>&nbsp;<span class="ident" id="3958804">s</span><span class="op" id="3958805">[</span><span class="ident" id="3958806">r</span><span class="op" id="3958807">]</span>&nbsp;<span class="op" id="3958809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958814">default</span><span class="op" id="3958821">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958837">case</span>&nbsp;<span class="string" id="3958842">&#39;&#34;&#39;</span><span class="op" id="3958845">,</span>&nbsp;<span class="string" id="3958847">&#39;\\&#39;</span><span class="op" id="3958851">,</span>&nbsp;<span class="string" id="3958853">&#39;/&#39;</span><span class="op" id="3958856">,</span>&nbsp;<span class="string" id="3958858">&#39;\&#39;&#39;</span><span class="op" id="3958862">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958868">b</span><span class="op" id="3958869">[</span><span class="ident" id="3958870">w</span><span class="op" id="3958871">]</span>&nbsp;<span class="op" id="3958873">=</span>&nbsp;<span class="ident" id="3958875">s</span><span class="op" id="3958876">[</span><span class="ident" id="3958877">r</span><span class="op" id="3958878">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958884">r</span><span class="op" id="3958885">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958892">w</span><span class="op" id="3958893">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958899">case</span>&nbsp;<span class="string" id="3958904">&#39;b&#39;</span><span class="op" id="3958907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958913">b</span><span class="op" id="3958914">[</span><span class="ident" id="3958915">w</span><span class="op" id="3958916">]</span>&nbsp;<span class="op" id="3958918">=</span>&nbsp;<span class="string" id="3958920">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958929">r</span><span class="op" id="3958930">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958937">w</span><span class="op" id="3958938">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958944">case</span>&nbsp;<span class="string" id="3958949">&#39;f&#39;</span><span class="op" id="3958952">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958958">b</span><span class="op" id="3958959">[</span><span class="ident" id="3958960">w</span><span class="op" id="3958961">]</span>&nbsp;<span class="op" id="3958963">=</span>&nbsp;<span class="string" id="3958965">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958974">r</span><span class="op" id="3958975">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3958982">w</span><span class="op" id="3958983">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3958989">case</span>&nbsp;<span class="string" id="3958994">&#39;n&#39;</span><span class="op" id="3958997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959003">b</span><span class="op" id="3959004">[</span><span class="ident" id="3959005">w</span><span class="op" id="3959006">]</span>&nbsp;<span class="op" id="3959008">=</span>&nbsp;<span class="string" id="3959010">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959019">r</span><span class="op" id="3959020">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959027">w</span><span class="op" id="3959028">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959034">case</span>&nbsp;<span class="string" id="3959039">&#39;r&#39;</span><span class="op" id="3959042">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959048">b</span><span class="op" id="3959049">[</span><span class="ident" id="3959050">w</span><span class="op" id="3959051">]</span>&nbsp;<span class="op" id="3959053">=</span>&nbsp;<span class="string" id="3959055">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959064">r</span><span class="op" id="3959065">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959072">w</span><span class="op" id="3959073">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959079">case</span>&nbsp;<span class="string" id="3959084">&#39;t&#39;</span><span class="op" id="3959087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959093">b</span><span class="op" id="3959094">[</span><span class="ident" id="3959095">w</span><span class="op" id="3959096">]</span>&nbsp;<span class="op" id="3959098">=</span>&nbsp;<span class="string" id="3959100">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959109">r</span><span class="op" id="3959110">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959117">w</span><span class="op" id="3959118">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959124">case</span>&nbsp;<span class="string" id="3959129">&#39;u&#39;</span><span class="op" id="3959132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959138">r</span><span class="op" id="3959139">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959146">rr</span>&nbsp;<span class="op" id="3959149">:=</span>&nbsp;<span class="ident" id="3959152">getu4</span><span class="op" id="3959157">(</span><span class="ident" id="3959158">s</span><span class="op" id="3959159">[</span><span class="ident" id="3959160">r</span><span class="op" id="3959161">:</span><span class="op" id="3959162">]</span><span class="op" id="3959163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959169">if</span>&nbsp;<span class="ident" id="3959172">rr</span>&nbsp;<span class="op" id="3959175">&lt;</span>&nbsp;<span class="num" id="3959177">0</span>&nbsp;<span class="op" id="3959179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959186">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3959197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959203">r</span>&nbsp;<span class="op" id="3959205">+=</span>&nbsp;<span class="num" id="3959208">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959214">if</span>&nbsp;<span class="ident" id="3959217">utf16</span><span class="op" id="3959222">.</span><span class="ident" id="3959223">IsSurrogate</span><span class="op" id="3959234">(</span><span class="ident" id="3959235">rr</span><span class="op" id="3959237">)</span>&nbsp;<span class="op" id="3959239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959246">rr1</span>&nbsp;<span class="op" id="3959250">:=</span>&nbsp;<span class="ident" id="3959253">getu4</span><span class="op" id="3959258">(</span><span class="ident" id="3959259">s</span><span class="op" id="3959260">[</span><span class="ident" id="3959261">r</span><span class="op" id="3959262">:</span><span class="op" id="3959263">]</span><span class="op" id="3959264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959271">if</span>&nbsp;<span class="ident" id="3959274">dec</span>&nbsp;<span class="op" id="3959278">:=</span>&nbsp;<span class="ident" id="3959281">utf16</span><span class="op" id="3959286">.</span><span class="ident" id="3959287">DecodeRune</span><span class="op" id="3959297">(</span><span class="ident" id="3959298">rr</span><span class="op" id="3959300">,</span>&nbsp;<span class="ident" id="3959302">rr1</span><span class="op" id="3959305">)</span><span class="op" id="3959306">;</span>&nbsp;<span class="ident" id="3959308">dec</span>&nbsp;<span class="op" id="3959312">!=</span>&nbsp;<span class="ident" id="3959315">unicode</span><span class="op" id="3959322">.</span><span class="ident" id="3959323">ReplacementChar</span>&nbsp;<span class="op" id="3959339">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3959347">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959379">r</span>&nbsp;<span class="op" id="3959381">+=</span>&nbsp;<span class="num" id="3959384">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959392">w</span>&nbsp;<span class="op" id="3959394">+=</span>&nbsp;<span class="ident" id="3959397">utf8</span><span class="op" id="3959401">.</span><span class="ident" id="3959402">EncodeRune</span><span class="op" id="3959412">(</span><span class="ident" id="3959413">b</span><span class="op" id="3959414">[</span><span class="ident" id="3959415">w</span><span class="op" id="3959416">:</span><span class="op" id="3959417">]</span><span class="op" id="3959418">,</span>&nbsp;<span class="ident" id="3959420">dec</span><span class="op" id="3959423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959431">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3959442">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3959449">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959507">rr</span>&nbsp;<span class="op" id="3959510">=</span>&nbsp;<span class="ident" id="3959512">unicode</span><span class="op" id="3959519">.</span><span class="ident" id="3959520">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3959540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959546">w</span>&nbsp;<span class="op" id="3959548">+=</span>&nbsp;<span class="ident" id="3959551">utf8</span><span class="op" id="3959555">.</span><span class="ident" id="3959556">EncodeRune</span><span class="op" id="3959566">(</span><span class="ident" id="3959567">b</span><span class="op" id="3959568">[</span><span class="ident" id="3959569">w</span><span class="op" id="3959570">:</span><span class="op" id="3959571">]</span><span class="op" id="3959572">,</span>&nbsp;<span class="ident" id="3959574">rr</span><span class="op" id="3959576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3959581">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3959586">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959630">case</span>&nbsp;<span class="ident" id="3959635">c</span>&nbsp;<span class="op" id="3959637">==</span>&nbsp;<span class="string" id="3959640">&#39;&#34;&#39;</span><span class="op" id="3959643">,</span>&nbsp;<span class="ident" id="3959645">c</span>&nbsp;<span class="op" id="3959647">&lt;</span>&nbsp;<span class="string" id="3959649">&#39;&nbsp;&#39;</span><span class="op" id="3959652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959657">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3959667">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959678">case</span>&nbsp;<span class="ident" id="3959683">c</span>&nbsp;<span class="op" id="3959685">&lt;</span>&nbsp;<span class="ident" id="3959687">utf8</span><span class="op" id="3959691">.</span><span class="ident" id="3959692">RuneSelf</span><span class="op" id="3959700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959705">b</span><span class="op" id="3959706">[</span><span class="ident" id="3959707">w</span><span class="op" id="3959708">]</span>&nbsp;<span class="op" id="3959710">=</span>&nbsp;<span class="ident" id="3959712">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959717">r</span><span class="op" id="3959718">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959724">w</span><span class="op" id="3959725">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3959731">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959765">default</span><span class="op" id="3959772">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959777">rr</span><span class="op" id="3959779">,</span>&nbsp;<span class="ident" id="3959781">size</span>&nbsp;<span class="op" id="3959786">:=</span>&nbsp;<span class="ident" id="3959789">utf8</span><span class="op" id="3959793">.</span><span class="ident" id="3959794">DecodeRune</span><span class="op" id="3959804">(</span><span class="ident" id="3959805">s</span><span class="op" id="3959806">[</span><span class="ident" id="3959807">r</span><span class="op" id="3959808">:</span><span class="op" id="3959809">]</span><span class="op" id="3959810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959815">r</span>&nbsp;<span class="op" id="3959817">+=</span>&nbsp;<span class="ident" id="3959820">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3959828">w</span>&nbsp;<span class="op" id="3959830">+=</span>&nbsp;<span class="ident" id="3959833">utf8</span><span class="op" id="3959837">.</span><span class="ident" id="3959838">EncodeRune</span><span class="op" id="3959848">(</span><span class="ident" id="3959849">b</span><span class="op" id="3959850">[</span><span class="ident" id="3959851">w</span><span class="op" id="3959852">:</span><span class="op" id="3959853">]</span><span class="op" id="3959854">,</span>&nbsp;<span class="ident" id="3959856">rr</span><span class="op" id="3959858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3959862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3959865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3959868">return</span>&nbsp;<span class="ident" id="3959875">b</span><span class="op" id="3959876">[</span><span class="num" id="3959877">0</span><span class="op" id="3959878">:</span><span class="ident" id="3959879">w</span><span class="op" id="3959880">]</span><span class="op" id="3959881">,</span>&nbsp;<span class="builtintype" id="3959883">true</span><br>
<span class="lineno"></span><span class="op" id="3959888">}</span>
</div>
</body>
</html>
