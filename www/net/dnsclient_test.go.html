<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7846377">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7846432">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7846486">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7846537">package</span>&nbsp;<span class="ident" id="7846545">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7846550">import</span>&nbsp;<span class="op" id="7846557">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846560">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846573">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7846583">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7846586">func</span>&nbsp;<span class="ident" id="7846591">checkDistribution</span><span class="op" id="7846608">(</span><span class="ident" id="7846609">t</span>&nbsp;<span class="op" id="7846611">*</span><span class="ident" id="7846612"><a href="/net/dnsclient_test.go.html#7846573">testing</a></span><span class="op" id="7846619">.</span><span class="ident" id="7846620">T</span><span class="op" id="7846621">,</span>&nbsp;<span class="ident" id="7846623">data</span>&nbsp;<span class="op" id="7846628">[</span><span class="op" id="7846629">]</span><span class="op" id="7846630">*</span><span class="ident" id="7846631"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="7846634">,</span>&nbsp;<span class="ident" id="7846636">margin</span>&nbsp;<span class="builtintype" id="7846643">float64</span><span class="op" id="7846650">)</span>&nbsp;<span class="op" id="7846652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846655">sum</span>&nbsp;<span class="op" id="7846659">:=</span>&nbsp;<span class="num" id="7846662">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846665">for</span>&nbsp;<span class="ident" id="7846669">_</span><span class="op" id="7846670">,</span>&nbsp;<span class="ident" id="7846672">srv</span>&nbsp;<span class="op" id="7846676">:=</span>&nbsp;<span class="keyword" id="7846679">range</span>&nbsp;<span class="ident" id="7846685"><a href="/net/dnsclient_test.go.html#7846623">data</a></span>&nbsp;<span class="op" id="7846690">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846694"><a href="/net/dnsclient_test.go.html#7846655">sum</a></span>&nbsp;<span class="op" id="7846698">+=</span>&nbsp;<span class="builtintype" id="7846701">int</span><span class="op" id="7846704">(</span><span class="ident" id="7846705"><a href="/net/dnsclient_test.go.html#7846672">srv</a></span><span class="op" id="7846708">.</span><span class="ident" id="7846709">Weight</span><span class="op" id="7846715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846722">results</span>&nbsp;<span class="op" id="7846730">:=</span>&nbsp;<span class="builtinfunc" id="7846733">make</span><span class="op" id="7846737">(</span><span class="keyword" id="7846738">map</span><span class="op" id="7846741">[</span><span class="builtintype" id="7846742">string</span><span class="op" id="7846748">]</span><span class="builtintype" id="7846749">int</span><span class="op" id="7846752">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846756">count</span>&nbsp;<span class="op" id="7846762">:=</span>&nbsp;<span class="num" id="7846765">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846771">for</span>&nbsp;<span class="ident" id="7846775">j</span>&nbsp;<span class="op" id="7846777">:=</span>&nbsp;<span class="num" id="7846780">0</span><span class="op" id="7846781">;</span>&nbsp;<span class="ident" id="7846783"><a href="/net/dnsclient_test.go.html#7846775">j</a></span>&nbsp;<span class="op" id="7846785">&lt;</span>&nbsp;<span class="ident" id="7846787"><a href="/net/dnsclient_test.go.html#7846756">count</a></span><span class="op" id="7846792">;</span>&nbsp;<span class="ident" id="7846794"><a href="/net/dnsclient_test.go.html#7846775">j</a></span><span class="op" id="7846795">++</span>&nbsp;<span class="op" id="7846798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846802">d</span>&nbsp;<span class="op" id="7846804">:=</span>&nbsp;<span class="builtinfunc" id="7846807">make</span><span class="op" id="7846811">(</span><span class="op" id="7846812">[</span><span class="op" id="7846813">]</span><span class="op" id="7846814">*</span><span class="ident" id="7846815"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="7846818">,</span>&nbsp;<span class="builtinfunc" id="7846820">len</span><span class="op" id="7846823">(</span><span class="ident" id="7846824"><a href="/net/dnsclient_test.go.html#7846623">data</a></span><span class="op" id="7846828">)</span><span class="op" id="7846829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7846833">copy</span><span class="op" id="7846837">(</span><span class="ident" id="7846838"><a href="/net/dnsclient_test.go.html#7846802">d</a></span><span class="op" id="7846839">,</span>&nbsp;<span class="ident" id="7846841"><a href="/net/dnsclient_test.go.html#7846623">data</a></span><span class="op" id="7846845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846849"><a href="/net/dnsclient.go.html#1343831">byPriorityWeight</a></span><span class="op" id="7846865">(</span><span class="ident" id="7846866"><a href="/net/dnsclient_test.go.html#7846802">d</a></span><span class="op" id="7846867">)</span><span class="op" id="7846868">.</span><span class="ident" id="7846869">shuffleByWeight</span><span class="op" id="7846884">(</span><span class="op" id="7846885">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846889">key</span>&nbsp;<span class="op" id="7846893">:=</span>&nbsp;<span class="ident" id="7846896"><a href="/net/dnsclient_test.go.html#7846802">d</a></span><span class="op" id="7846897">[</span><span class="num" id="7846898">0</span><span class="op" id="7846899">]</span><span class="op" id="7846900">.</span><span class="ident" id="7846901">Target</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846910"><a href="/net/dnsclient_test.go.html#7846722">results</a></span><span class="op" id="7846917">[</span><span class="ident" id="7846918"><a href="/net/dnsclient_test.go.html#7846889">key</a></span><span class="op" id="7846921">]</span>&nbsp;<span class="op" id="7846923">=</span>&nbsp;<span class="ident" id="7846925"><a href="/net/dnsclient_test.go.html#7846722">results</a></span><span class="op" id="7846932">[</span><span class="ident" id="7846933"><a href="/net/dnsclient_test.go.html#7846889">key</a></span><span class="op" id="7846936">]</span>&nbsp;<span class="op" id="7846938">+</span>&nbsp;<span class="num" id="7846940">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846947">actual</span>&nbsp;<span class="op" id="7846954">:=</span>&nbsp;<span class="ident" id="7846957"><a href="/net/dnsclient_test.go.html#7846722">results</a></span><span class="op" id="7846964">[</span><span class="ident" id="7846965"><a href="/net/dnsclient_test.go.html#7846623">data</a></span><span class="op" id="7846969">[</span><span class="num" id="7846970">0</span><span class="op" id="7846971">]</span><span class="op" id="7846972">.</span><span class="ident" id="7846973">Target</span><span class="op" id="7846979">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846982">expected</span>&nbsp;<span class="op" id="7846991">:=</span>&nbsp;<span class="builtintype" id="7846994">float64</span><span class="op" id="7847001">(</span><span class="ident" id="7847002"><a href="/net/dnsclient_test.go.html#7846756">count</a></span><span class="op" id="7847007">)</span>&nbsp;<span class="op" id="7847009">*</span>&nbsp;<span class="builtintype" id="7847011">float64</span><span class="op" id="7847018">(</span><span class="ident" id="7847019"><a href="/net/dnsclient_test.go.html#7846623">data</a></span><span class="op" id="7847023">[</span><span class="num" id="7847024">0</span><span class="op" id="7847025">]</span><span class="op" id="7847026">.</span><span class="ident" id="7847027">Weight</span><span class="op" id="7847033">)</span>&nbsp;<span class="op" id="7847035">/</span>&nbsp;<span class="builtintype" id="7847037">float64</span><span class="op" id="7847044">(</span><span class="ident" id="7847045"><a href="/net/dnsclient_test.go.html#7846655">sum</a></span><span class="op" id="7847048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847051">diff</span>&nbsp;<span class="op" id="7847056">:=</span>&nbsp;<span class="builtintype" id="7847059">float64</span><span class="op" id="7847066">(</span><span class="ident" id="7847067"><a href="/net/dnsclient_test.go.html#7846947">actual</a></span><span class="op" id="7847073">)</span>&nbsp;<span class="op" id="7847075">-</span>&nbsp;<span class="ident" id="7847077"><a href="/net/dnsclient_test.go.html#7846982">expected</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847087"><a href="/net/dnsclient_test.go.html#7846609">t</a></span><span class="op" id="7847088">.</span><span class="ident" id="7847089">Logf</span><span class="op" id="7847093">(</span><span class="string" id="7847094">&#34;actual:&nbsp;%v&nbsp;diff:&nbsp;%v&nbsp;e:&nbsp;%v&nbsp;m:&nbsp;%v&#34;</span><span class="op" id="7847127">,</span>&nbsp;<span class="ident" id="7847129"><a href="/net/dnsclient_test.go.html#7846947">actual</a></span><span class="op" id="7847135">,</span>&nbsp;<span class="ident" id="7847137"><a href="/net/dnsclient_test.go.html#7847051">diff</a></span><span class="op" id="7847141">,</span>&nbsp;<span class="ident" id="7847143"><a href="/net/dnsclient_test.go.html#7846982">expected</a></span><span class="op" id="7847151">,</span>&nbsp;<span class="ident" id="7847153"><a href="/net/dnsclient_test.go.html#7846636">margin</a></span><span class="op" id="7847159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847162">if</span>&nbsp;<span class="ident" id="7847165"><a href="/net/dnsclient_test.go.html#7847051">diff</a></span>&nbsp;<span class="op" id="7847170">&lt;</span>&nbsp;<span class="num" id="7847172">0</span>&nbsp;<span class="op" id="7847174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847178"><a href="/net/dnsclient_test.go.html#7847051">diff</a></span>&nbsp;<span class="op" id="7847183">=</span>&nbsp;<span class="op" id="7847185">-</span><span class="ident" id="7847186"><a href="/net/dnsclient_test.go.html#7847051">diff</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847195">if</span>&nbsp;<span class="ident" id="7847198"><a href="/net/dnsclient_test.go.html#7847051">diff</a></span>&nbsp;<span class="op" id="7847203">&gt;</span>&nbsp;<span class="op" id="7847205">(</span><span class="ident" id="7847206"><a href="/net/dnsclient_test.go.html#7846982">expected</a></span>&nbsp;<span class="op" id="7847215">*</span>&nbsp;<span class="ident" id="7847217"><a href="/net/dnsclient_test.go.html#7846636">margin</a></span><span class="op" id="7847223">)</span>&nbsp;<span class="op" id="7847225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847229"><a href="/net/dnsclient_test.go.html#7846609">t</a></span><span class="op" id="7847230">.</span><span class="ident" id="7847231">Errorf</span><span class="op" id="7847237">(</span><span class="string" id="7847238">&#34;missed&nbsp;target&nbsp;weight:&nbsp;expected&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="7847277">,</span>&nbsp;<span class="ident" id="7847279"><a href="/net/dnsclient_test.go.html#7846982">expected</a></span><span class="op" id="7847287">,</span>&nbsp;<span class="ident" id="7847289"><a href="/net/dnsclient_test.go.html#7846947">actual</a></span><span class="op" id="7847295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847298">}</span><br>
<span class="lineno"></span><span class="op" id="7847300">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="7847303">func</span>&nbsp;<span class="ident" id="7847308">testUniformity</span><span class="op" id="7847322">(</span><span class="ident" id="7847323">t</span>&nbsp;<span class="op" id="7847325">*</span><span class="ident" id="7847326"><a href="/net/dnsclient_test.go.html#7846573">testing</a></span><span class="op" id="7847333">.</span><span class="ident" id="7847334">T</span><span class="op" id="7847335">,</span>&nbsp;<span class="ident" id="7847337">size</span>&nbsp;<span class="builtintype" id="7847342">int</span><span class="op" id="7847345">,</span>&nbsp;<span class="ident" id="7847347">margin</span>&nbsp;<span class="builtintype" id="7847354">float64</span><span class="op" id="7847361">)</span>&nbsp;<span class="op" id="7847363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847366"><a href="/net/dnsclient_test.go.html#7846560">rand</a></span><span class="op" id="7847370">.</span><span class="ident" id="7847371">Seed</span><span class="op" id="7847375">(</span><span class="num" id="7847376">1</span><span class="op" id="7847377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847380">data</span>&nbsp;<span class="op" id="7847385">:=</span>&nbsp;<span class="builtinfunc" id="7847388">make</span><span class="op" id="7847392">(</span><span class="op" id="7847393">[</span><span class="op" id="7847394">]</span><span class="op" id="7847395">*</span><span class="ident" id="7847396"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="7847399">,</span>&nbsp;<span class="ident" id="7847401"><a href="/net/dnsclient_test.go.html#7847337">size</a></span><span class="op" id="7847405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7847408">for</span>&nbsp;<span class="ident" id="7847412">i</span>&nbsp;<span class="op" id="7847414">:=</span>&nbsp;<span class="num" id="7847417">0</span><span class="op" id="7847418">;</span>&nbsp;<span class="ident" id="7847420"><a href="/net/dnsclient_test.go.html#7847412">i</a></span>&nbsp;<span class="op" id="7847422">&lt;</span>&nbsp;<span class="ident" id="7847424"><a href="/net/dnsclient_test.go.html#7847337">size</a></span><span class="op" id="7847428">;</span>&nbsp;<span class="ident" id="7847430"><a href="/net/dnsclient_test.go.html#7847412">i</a></span><span class="op" id="7847431">++</span>&nbsp;<span class="op" id="7847434">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847438"><a href="/net/dnsclient_test.go.html#7847380">data</a></span><span class="op" id="7847442">[</span><span class="ident" id="7847443"><a href="/net/dnsclient_test.go.html#7847412">i</a></span><span class="op" id="7847444">]</span>&nbsp;<span class="op" id="7847446">=</span>&nbsp;<span class="op" id="7847448">&amp;</span><span class="ident" id="7847449"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="7847452">{</span><span class="ident" id="7847453">Target</span><span class="op" id="7847459">:</span>&nbsp;<span class="builtintype" id="7847461">string</span><span class="op" id="7847467">(</span><span class="string" id="7847468">&#39;a&#39;</span>&nbsp;<span class="op" id="7847472">+</span>&nbsp;<span class="ident" id="7847474"><a href="/net/dnsclient_test.go.html#7847412">i</a></span><span class="op" id="7847475">)</span><span class="op" id="7847476">,</span>&nbsp;<span class="ident" id="7847478">Weight</span><span class="op" id="7847484">:</span>&nbsp;<span class="num" id="7847486">1</span><span class="op" id="7847487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847493"><a href="/net/dnsclient_test.go.html#7846591">checkDistribution</a></span><span class="op" id="7847510">(</span><span class="ident" id="7847511"><a href="/net/dnsclient_test.go.html#7847323">t</a></span><span class="op" id="7847512">,</span>&nbsp;<span class="ident" id="7847514"><a href="/net/dnsclient_test.go.html#7847380">data</a></span><span class="op" id="7847518">,</span>&nbsp;<span class="ident" id="7847520"><a href="/net/dnsclient_test.go.html#7847347">margin</a></span><span class="op" id="7847526">)</span><br>
<span class="lineno"></span><span class="op" id="7847528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7847531">func</span>&nbsp;<span class="ident" id="7847536">TestUniformity</span><span class="op" id="7847550">(</span><span class="ident" id="7847551">t</span>&nbsp;<span class="op" id="7847553">*</span><span class="ident" id="7847554"><a href="/net/dnsclient_test.go.html#7846573">testing</a></span><span class="op" id="7847561">.</span><span class="ident" id="7847562">T</span><span class="op" id="7847563">)</span>&nbsp;<span class="op" id="7847565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847568"><a href="/net/dnsclient_test.go.html#7847308">testUniformity</a></span><span class="op" id="7847582">(</span><span class="ident" id="7847583"><a href="/net/dnsclient_test.go.html#7847551">t</a></span><span class="op" id="7847584">,</span>&nbsp;<span class="num" id="7847586">2</span><span class="op" id="7847587">,</span>&nbsp;<span class="num" id="7847589">0.05</span><span class="op" id="7847593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847596"><a href="/net/dnsclient_test.go.html#7847308">testUniformity</a></span><span class="op" id="7847610">(</span><span class="ident" id="7847611"><a href="/net/dnsclient_test.go.html#7847551">t</a></span><span class="op" id="7847612">,</span>&nbsp;<span class="num" id="7847614">3</span><span class="op" id="7847615">,</span>&nbsp;<span class="num" id="7847617">0.10</span><span class="op" id="7847621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847624"><a href="/net/dnsclient_test.go.html#7847308">testUniformity</a></span><span class="op" id="7847638">(</span><span class="ident" id="7847639"><a href="/net/dnsclient_test.go.html#7847551">t</a></span><span class="op" id="7847640">,</span>&nbsp;<span class="num" id="7847642">10</span><span class="op" id="7847644">,</span>&nbsp;<span class="num" id="7847646">0.20</span><span class="op" id="7847650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847653"><a href="/net/dnsclient_test.go.html#7847684">testWeighting</a></span><span class="op" id="7847666">(</span><span class="ident" id="7847667"><a href="/net/dnsclient_test.go.html#7847551">t</a></span><span class="op" id="7847668">,</span>&nbsp;<span class="num" id="7847670">0.05</span><span class="op" id="7847674">)</span><br>
<span class="lineno">55</span><span class="op" id="7847676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7847679">func</span>&nbsp;<span class="ident" id="7847684">testWeighting</span><span class="op" id="7847697">(</span><span class="ident" id="7847698">t</span>&nbsp;<span class="op" id="7847700">*</span><span class="ident" id="7847701"><a href="/net/dnsclient_test.go.html#7846573">testing</a></span><span class="op" id="7847708">.</span><span class="ident" id="7847709">T</span><span class="op" id="7847710">,</span>&nbsp;<span class="ident" id="7847712">margin</span>&nbsp;<span class="builtintype" id="7847719">float64</span><span class="op" id="7847726">)</span>&nbsp;<span class="op" id="7847728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847731"><a href="/net/dnsclient_test.go.html#7846560">rand</a></span><span class="op" id="7847735">.</span><span class="ident" id="7847736">Seed</span><span class="op" id="7847740">(</span><span class="num" id="7847741">1</span><span class="op" id="7847742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847745">data</span>&nbsp;<span class="op" id="7847750">:=</span>&nbsp;<span class="op" id="7847753">[</span><span class="op" id="7847754">]</span><span class="op" id="7847755">*</span><span class="ident" id="7847756"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="7847759">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847763">{</span><span class="ident" id="7847764">Target</span><span class="op" id="7847770">:</span>&nbsp;<span class="string" id="7847772">&#34;a&#34;</span><span class="op" id="7847775">,</span>&nbsp;<span class="ident" id="7847777">Weight</span><span class="op" id="7847783">:</span>&nbsp;<span class="num" id="7847785">60</span><span class="op" id="7847787">}</span><span class="op" id="7847788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847792">{</span><span class="ident" id="7847793">Target</span><span class="op" id="7847799">:</span>&nbsp;<span class="string" id="7847801">&#34;b&#34;</span><span class="op" id="7847804">,</span>&nbsp;<span class="ident" id="7847806">Weight</span><span class="op" id="7847812">:</span>&nbsp;<span class="num" id="7847814">30</span><span class="op" id="7847816">}</span><span class="op" id="7847817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847821">{</span><span class="ident" id="7847822">Target</span><span class="op" id="7847828">:</span>&nbsp;<span class="string" id="7847830">&#34;c&#34;</span><span class="op" id="7847833">,</span>&nbsp;<span class="ident" id="7847835">Weight</span><span class="op" id="7847841">:</span>&nbsp;<span class="num" id="7847843">10</span><span class="op" id="7847845">}</span><span class="op" id="7847846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847852"><a href="/net/dnsclient_test.go.html#7846591">checkDistribution</a></span><span class="op" id="7847869">(</span><span class="ident" id="7847870"><a href="/net/dnsclient_test.go.html#7847698">t</a></span><span class="op" id="7847871">,</span>&nbsp;<span class="ident" id="7847873"><a href="/net/dnsclient_test.go.html#7847745">data</a></span><span class="op" id="7847877">,</span>&nbsp;<span class="ident" id="7847879"><a href="/net/dnsclient_test.go.html#7847712">margin</a></span><span class="op" id="7847885">)</span><br>
<span class="lineno">65</span><span class="op" id="7847887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7847890">func</span>&nbsp;<span class="ident" id="7847895">TestWeighting</span><span class="op" id="7847908">(</span><span class="ident" id="7847909">t</span>&nbsp;<span class="op" id="7847911">*</span><span class="ident" id="7847912"><a href="/net/dnsclient_test.go.html#7846573">testing</a></span><span class="op" id="7847919">.</span><span class="ident" id="7847920">T</span><span class="op" id="7847921">)</span>&nbsp;<span class="op" id="7847923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7847926"><a href="/net/dnsclient_test.go.html#7847684">testWeighting</a></span><span class="op" id="7847939">(</span><span class="ident" id="7847940"><a href="/net/dnsclient_test.go.html#7847909">t</a></span><span class="op" id="7847941">,</span>&nbsp;<span class="num" id="7847943">0.05</span><span class="op" id="7847947">)</span><br>
<span class="lineno"></span><span class="op" id="7847949">}</span>
</div>
</body>
</html>
