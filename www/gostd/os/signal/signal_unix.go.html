<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html" class="current">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3459168">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3459223">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3459277">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3459328">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3459406">package</span>&nbsp;<span class="ident" id="3459414">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3459422">import</span>&nbsp;<span class="op" id="3459429">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3459432">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3459438">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3459448">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3459451">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="3459467">func</span>&nbsp;<span class="ident" id="3459472">signal_disable</span><span class="op" id="3459486">(</span><span class="builtintype" id="3459487">uint32</span><span class="op" id="3459493">)</span><br>
<span class="lineno"></span><span class="keyword" id="3459495">func</span>&nbsp;<span class="ident" id="3459500">signal_enable</span><span class="op" id="3459513">(</span><span class="builtintype" id="3459514">uint32</span><span class="op" id="3459520">)</span><br>
<span class="lineno"></span><span class="keyword" id="3459522">func</span>&nbsp;<span class="ident" id="3459527">signal_recv</span><span class="op" id="3459538">(</span><span class="op" id="3459539">)</span>&nbsp;<span class="builtintype" id="3459541">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3459549">func</span>&nbsp;<span class="ident" id="3459554">loop</span><span class="op" id="3459558">(</span><span class="op" id="3459559">)</span>&nbsp;<span class="op" id="3459561">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459564">for</span>&nbsp;<span class="op" id="3459568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459572">process</span><span class="op" id="3459579">(</span><span class="ident" id="3459580">syscall</span><span class="op" id="3459587">.</span><span class="ident" id="3459588">Signal</span><span class="op" id="3459594">(</span><span class="ident" id="3459595">signal_recv</span><span class="op" id="3459606">(</span><span class="op" id="3459607">)</span><span class="op" id="3459608">)</span><span class="op" id="3459609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3459612">}</span><br>
<span class="lineno"></span><span class="op" id="3459614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="3459617">func</span>&nbsp;<span class="ident" id="3459622">init</span><span class="op" id="3459626">(</span><span class="op" id="3459627">)</span>&nbsp;<span class="op" id="3459629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459632">signal_enable</span><span class="op" id="3459645">(</span><span class="num" id="3459646">0</span><span class="op" id="3459647">)</span>&nbsp;<span class="comment" id="3459649">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459677">go</span>&nbsp;<span class="ident" id="3459680">loop</span><span class="op" id="3459684">(</span><span class="op" id="3459685">)</span><br>
<span class="lineno"></span><span class="op" id="3459687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3459690">const</span>&nbsp;<span class="op" id="3459696">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459699">numSig</span>&nbsp;<span class="op" id="3459706">=</span>&nbsp;<span class="num" id="3459708">65</span>&nbsp;<span class="comment" id="3459711">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="3459737">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3459740">func</span>&nbsp;<span class="ident" id="3459745">signum</span><span class="op" id="3459751">(</span><span class="ident" id="3459752">sig</span>&nbsp;<span class="ident" id="3459756">os</span><span class="op" id="3459758">.</span><span class="ident" id="3459759">Signal</span><span class="op" id="3459765">)</span>&nbsp;<span class="builtintype" id="3459767">int</span>&nbsp;<span class="op" id="3459771">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459774">switch</span>&nbsp;<span class="ident" id="3459781">sig</span>&nbsp;<span class="op" id="3459785">:=</span>&nbsp;<span class="ident" id="3459788">sig</span><span class="op" id="3459791">.</span><span class="op" id="3459792">(</span><span class="keyword" id="3459793">type</span><span class="op" id="3459797">)</span>&nbsp;<span class="op" id="3459799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459802">case</span>&nbsp;<span class="ident" id="3459807">syscall</span><span class="op" id="3459814">.</span><span class="ident" id="3459815">Signal</span><span class="op" id="3459821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459825">i</span>&nbsp;<span class="op" id="3459827">:=</span>&nbsp;<span class="builtintype" id="3459830">int</span><span class="op" id="3459833">(</span><span class="ident" id="3459834">sig</span><span class="op" id="3459837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459841">if</span>&nbsp;<span class="ident" id="3459844">i</span>&nbsp;<span class="op" id="3459846">&lt;</span>&nbsp;<span class="num" id="3459848">0</span>&nbsp;<span class="op" id="3459850">||</span>&nbsp;<span class="ident" id="3459853">i</span>&nbsp;<span class="op" id="3459855">&gt;=</span>&nbsp;<span class="ident" id="3459858">numSig</span>&nbsp;<span class="op" id="3459865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459870">return</span>&nbsp;<span class="op" id="3459877">-</span><span class="num" id="3459878">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3459882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459886">return</span>&nbsp;<span class="ident" id="3459893">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459896">default</span><span class="op" id="3459903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459907">return</span>&nbsp;<span class="op" id="3459914">-</span><span class="num" id="3459915">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3459918">}</span><br>
<span class="lineno">45</span><span class="op" id="3459920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3459923">func</span>&nbsp;<span class="ident" id="3459928">enableSignal</span><span class="op" id="3459940">(</span><span class="ident" id="3459941">sig</span>&nbsp;<span class="builtintype" id="3459945">int</span><span class="op" id="3459948">)</span>&nbsp;<span class="op" id="3459950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459953">signal_enable</span><span class="op" id="3459966">(</span><span class="builtintype" id="3459967">uint32</span><span class="op" id="3459973">(</span><span class="ident" id="3459974">sig</span><span class="op" id="3459977">)</span><span class="op" id="3459978">)</span><br>
<span class="lineno"></span><span class="op" id="3459980">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3459983">func</span>&nbsp;<span class="ident" id="3459988">disableSignal</span><span class="op" id="3460001">(</span><span class="ident" id="3460002">sig</span>&nbsp;<span class="builtintype" id="3460006">int</span><span class="op" id="3460009">)</span>&nbsp;<span class="op" id="3460011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460014">signal_disable</span><span class="op" id="3460028">(</span><span class="builtintype" id="3460029">uint32</span><span class="op" id="3460035">(</span><span class="ident" id="3460036">sig</span><span class="op" id="3460039">)</span><span class="op" id="3460040">)</span><br>
<span class="lineno"></span><span class="op" id="3460042">}</span>
</div>
</body>
</html>
