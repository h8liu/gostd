<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html" class="current">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7689162">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7689217">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7689271">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7689322">package</span>&nbsp;<span class="ident" id="7689330">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7689339">func</span>&nbsp;<span class="op" id="7689344">(</span><span class="ident" id="7689345">r</span>&nbsp;<span class="op" id="7689347">*</span><span class="ident" id="7689348">Replacer</span><span class="op" id="7689356">)</span>&nbsp;<span class="ident" id="7689358">Replacer</span><span class="op" id="7689366">(</span><span class="op" id="7689367">)</span>&nbsp;<span class="keyword" id="7689369">interface</span><span class="op" id="7689378">{</span><span class="op" id="7689379">}</span>&nbsp;<span class="op" id="7689381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689384">return</span>&nbsp;<span class="ident" id="7689391">r</span><span class="op" id="7689392">.</span><span class="ident" id="7689393">r</span><br>
<span class="lineno"></span><span class="op" id="7689395">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7689398">func</span>&nbsp;<span class="op" id="7689403">(</span><span class="ident" id="7689404">r</span>&nbsp;<span class="op" id="7689406">*</span><span class="ident" id="7689407">Replacer</span><span class="op" id="7689415">)</span>&nbsp;<span class="ident" id="7689417">PrintTrie</span><span class="op" id="7689426">(</span><span class="op" id="7689427">)</span>&nbsp;<span class="builtintype" id="7689429">string</span>&nbsp;<span class="op" id="7689436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689439">gen</span>&nbsp;<span class="op" id="7689443">:=</span>&nbsp;<span class="ident" id="7689446">r</span><span class="op" id="7689447">.</span><span class="ident" id="7689448">r</span><span class="op" id="7689449">.</span><span class="op" id="7689450">(</span><span class="op" id="7689451">*</span><span class="ident" id="7689452">genericReplacer</span><span class="op" id="7689467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689470">return</span>&nbsp;<span class="ident" id="7689477">gen</span><span class="op" id="7689480">.</span><span class="ident" id="7689481">printNode</span><span class="op" id="7689490">(</span><span class="op" id="7689491">&amp;</span><span class="ident" id="7689492">gen</span><span class="op" id="7689495">.</span><span class="ident" id="7689496">root</span><span class="op" id="7689500">,</span>&nbsp;<span class="num" id="7689502">0</span><span class="op" id="7689503">)</span><br>
<span class="lineno"></span><span class="op" id="7689505">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7689508">func</span>&nbsp;<span class="op" id="7689513">(</span><span class="ident" id="7689514">r</span>&nbsp;<span class="op" id="7689516">*</span><span class="ident" id="7689517">genericReplacer</span><span class="op" id="7689532">)</span>&nbsp;<span class="ident" id="7689534">printNode</span><span class="op" id="7689543">(</span><span class="ident" id="7689544">t</span>&nbsp;<span class="op" id="7689546">*</span><span class="ident" id="7689547">trieNode</span><span class="op" id="7689555">,</span>&nbsp;<span class="ident" id="7689557">depth</span>&nbsp;<span class="builtintype" id="7689563">int</span><span class="op" id="7689566">)</span>&nbsp;<span class="op" id="7689568">(</span><span class="ident" id="7689569">s</span>&nbsp;<span class="builtintype" id="7689571">string</span><span class="op" id="7689577">)</span>&nbsp;<span class="op" id="7689579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689582">if</span>&nbsp;<span class="ident" id="7689585">t</span><span class="op" id="7689586">.</span><span class="ident" id="7689587">priority</span>&nbsp;<span class="op" id="7689596">&gt;</span>&nbsp;<span class="num" id="7689598">0</span>&nbsp;<span class="op" id="7689600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689604">s</span>&nbsp;<span class="op" id="7689606">+=</span>&nbsp;<span class="string" id="7689609">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689614">}</span>&nbsp;<span class="keyword" id="7689616">else</span>&nbsp;<span class="op" id="7689621">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689625">s</span>&nbsp;<span class="op" id="7689627">+=</span>&nbsp;<span class="string" id="7689630">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689638">s</span>&nbsp;<span class="op" id="7689640">+=</span>&nbsp;<span class="string" id="7689643">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689650">if</span>&nbsp;<span class="ident" id="7689653">t</span><span class="op" id="7689654">.</span><span class="ident" id="7689655">prefix</span>&nbsp;<span class="op" id="7689662">!=</span>&nbsp;<span class="string" id="7689665">&#34;&#34;</span>&nbsp;<span class="op" id="7689668">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689672">s</span>&nbsp;<span class="op" id="7689674">+=</span>&nbsp;<span class="ident" id="7689677">Repeat</span><span class="op" id="7689683">(</span><span class="string" id="7689684">&#34;.&#34;</span><span class="op" id="7689687">,</span>&nbsp;<span class="ident" id="7689689">depth</span><span class="op" id="7689694">)</span>&nbsp;<span class="op" id="7689696">+</span>&nbsp;<span class="ident" id="7689698">t</span><span class="op" id="7689699">.</span><span class="ident" id="7689700">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689709">s</span>&nbsp;<span class="op" id="7689711">+=</span>&nbsp;<span class="ident" id="7689714">r</span><span class="op" id="7689715">.</span><span class="ident" id="7689716">printNode</span><span class="op" id="7689725">(</span><span class="ident" id="7689726">t</span><span class="op" id="7689727">.</span><span class="ident" id="7689728">next</span><span class="op" id="7689732">,</span>&nbsp;<span class="ident" id="7689734">depth</span><span class="op" id="7689739">+</span><span class="builtinfunc" id="7689740">len</span><span class="op" id="7689743">(</span><span class="ident" id="7689744">t</span><span class="op" id="7689745">.</span><span class="ident" id="7689746">prefix</span><span class="op" id="7689752">)</span><span class="op" id="7689753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689756">}</span>&nbsp;<span class="keyword" id="7689758">else</span>&nbsp;<span class="keyword" id="7689763">if</span>&nbsp;<span class="ident" id="7689766">t</span><span class="op" id="7689767">.</span><span class="ident" id="7689768">table</span>&nbsp;<span class="op" id="7689774">!=</span>&nbsp;<span class="ident" id="7689777">nil</span>&nbsp;<span class="op" id="7689781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689785">for</span>&nbsp;<span class="ident" id="7689789">b</span><span class="op" id="7689790">,</span>&nbsp;<span class="ident" id="7689792">m</span>&nbsp;<span class="op" id="7689794">:=</span>&nbsp;<span class="keyword" id="7689797">range</span>&nbsp;<span class="ident" id="7689803">r</span><span class="op" id="7689804">.</span><span class="ident" id="7689805">mapping</span>&nbsp;<span class="op" id="7689813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689818">if</span>&nbsp;<span class="builtintype" id="7689821">int</span><span class="op" id="7689824">(</span><span class="ident" id="7689825">m</span><span class="op" id="7689826">)</span>&nbsp;<span class="op" id="7689828">!=</span>&nbsp;<span class="ident" id="7689831">r</span><span class="op" id="7689832">.</span><span class="ident" id="7689833">tableSize</span>&nbsp;<span class="op" id="7689843">&amp;&amp;</span>&nbsp;<span class="ident" id="7689846">t</span><span class="op" id="7689847">.</span><span class="ident" id="7689848">table</span><span class="op" id="7689853">[</span><span class="ident" id="7689854">m</span><span class="op" id="7689855">]</span>&nbsp;<span class="op" id="7689857">!=</span>&nbsp;<span class="ident" id="7689860">nil</span>&nbsp;<span class="op" id="7689864">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689870">s</span>&nbsp;<span class="op" id="7689872">+=</span>&nbsp;<span class="ident" id="7689875">Repeat</span><span class="op" id="7689881">(</span><span class="string" id="7689882">&#34;.&#34;</span><span class="op" id="7689885">,</span>&nbsp;<span class="ident" id="7689887">depth</span><span class="op" id="7689892">)</span>&nbsp;<span class="op" id="7689894">+</span>&nbsp;<span class="builtintype" id="7689896">string</span><span class="op" id="7689902">(</span><span class="op" id="7689903">[</span><span class="op" id="7689904">]</span><span class="builtintype" id="7689905">byte</span><span class="op" id="7689909">{</span><span class="builtintype" id="7689910">byte</span><span class="op" id="7689914">(</span><span class="ident" id="7689915">b</span><span class="op" id="7689916">)</span><span class="op" id="7689917">}</span><span class="op" id="7689918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689924">s</span>&nbsp;<span class="op" id="7689926">+=</span>&nbsp;<span class="ident" id="7689929">r</span><span class="op" id="7689930">.</span><span class="ident" id="7689931">printNode</span><span class="op" id="7689940">(</span><span class="ident" id="7689941">t</span><span class="op" id="7689942">.</span><span class="ident" id="7689943">table</span><span class="op" id="7689948">[</span><span class="ident" id="7689949">m</span><span class="op" id="7689950">]</span><span class="op" id="7689951">,</span>&nbsp;<span class="ident" id="7689953">depth</span><span class="op" id="7689958">+</span><span class="num" id="7689959">1</span><span class="op" id="7689960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689972">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7689975">return</span><br>
<span class="lineno"></span><span class="op" id="7689982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7689985">func</span>&nbsp;<span class="ident" id="7689990">StringFind</span><span class="op" id="7690000">(</span><span class="ident" id="7690001">pattern</span><span class="op" id="7690008">,</span>&nbsp;<span class="ident" id="7690010">text</span>&nbsp;<span class="builtintype" id="7690015">string</span><span class="op" id="7690021">)</span>&nbsp;<span class="builtintype" id="7690023">int</span>&nbsp;<span class="op" id="7690027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7690030">return</span>&nbsp;<span class="ident" id="7690037">makeStringFinder</span><span class="op" id="7690053">(</span><span class="ident" id="7690054">pattern</span><span class="op" id="7690061">)</span><span class="op" id="7690062">.</span><span class="ident" id="7690063">next</span><span class="op" id="7690067">(</span><span class="ident" id="7690068">text</span><span class="op" id="7690072">)</span><br>
<span class="lineno">40</span><span class="op" id="7690074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7690077">func</span>&nbsp;<span class="ident" id="7690082">DumpTables</span><span class="op" id="7690092">(</span><span class="ident" id="7690093">pattern</span>&nbsp;<span class="builtintype" id="7690101">string</span><span class="op" id="7690107">)</span>&nbsp;<span class="op" id="7690109">(</span><span class="op" id="7690110">[</span><span class="op" id="7690111">]</span><span class="builtintype" id="7690112">int</span><span class="op" id="7690115">,</span>&nbsp;<span class="op" id="7690117">[</span><span class="op" id="7690118">]</span><span class="builtintype" id="7690119">int</span><span class="op" id="7690122">)</span>&nbsp;<span class="op" id="7690124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690127">finder</span>&nbsp;<span class="op" id="7690134">:=</span>&nbsp;<span class="ident" id="7690137">makeStringFinder</span><span class="op" id="7690153">(</span><span class="ident" id="7690154">pattern</span><span class="op" id="7690161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7690164">return</span>&nbsp;<span class="ident" id="7690171">finder</span><span class="op" id="7690177">.</span><span class="ident" id="7690178">badCharSkip</span><span class="op" id="7690189">[</span><span class="op" id="7690190">:</span><span class="op" id="7690191">]</span><span class="op" id="7690192">,</span>&nbsp;<span class="ident" id="7690194">finder</span><span class="op" id="7690200">.</span><span class="ident" id="7690201">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="7690216">}</span>
</div>
</body>
</html>
