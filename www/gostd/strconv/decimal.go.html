<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1675927">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1675982">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1676036">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1676087">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="1676122">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="1676182">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="1676243">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="1676311">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="1676369">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676409">package</span>&nbsp;<span class="ident" id="1676417">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676426">type</span>&nbsp;<span class="ident" id="1676431">decimal</span>&nbsp;<span class="keyword" id="1676439">struct</span>&nbsp;<span class="op" id="1676446">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676449">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1676455">[</span><span class="num" id="1676456">800</span><span class="op" id="1676459">]</span><span class="builtintype" id="1676460">byte</span>&nbsp;<span class="comment" id="1676465">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676476">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1676482">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1676492">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676518">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1676524">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1676534">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676552">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1676558">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676564">trunc</span>&nbsp;<span class="builtintype" id="1676570">bool</span>&nbsp;<span class="comment" id="1676575">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="1676617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676620">func</span>&nbsp;<span class="op" id="1676625">(</span><span class="ident" id="1676626">a</span>&nbsp;<span class="op" id="1676628">*</span><span class="ident" id="1676629">decimal</span><span class="op" id="1676636">)</span>&nbsp;<span class="ident" id="1676638">String</span><span class="op" id="1676644">(</span><span class="op" id="1676645">)</span>&nbsp;<span class="builtintype" id="1676647">string</span>&nbsp;<span class="op" id="1676654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676657">n</span>&nbsp;<span class="op" id="1676659">:=</span>&nbsp;<span class="num" id="1676662">10</span>&nbsp;<span class="op" id="1676665">+</span>&nbsp;<span class="ident" id="1676667">a</span><span class="op" id="1676668">.</span><span class="ident" id="1676669">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676673">if</span>&nbsp;<span class="ident" id="1676676">a</span><span class="op" id="1676677">.</span><span class="ident" id="1676678">dp</span>&nbsp;<span class="op" id="1676681">&gt;</span>&nbsp;<span class="num" id="1676683">0</span>&nbsp;<span class="op" id="1676685">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676689">n</span>&nbsp;<span class="op" id="1676691">+=</span>&nbsp;<span class="ident" id="1676694">a</span><span class="op" id="1676695">.</span><span class="ident" id="1676696">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676703">if</span>&nbsp;<span class="ident" id="1676706">a</span><span class="op" id="1676707">.</span><span class="ident" id="1676708">dp</span>&nbsp;<span class="op" id="1676711">&lt;</span>&nbsp;<span class="num" id="1676713">0</span>&nbsp;<span class="op" id="1676715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676719">n</span>&nbsp;<span class="op" id="1676721">+=</span>&nbsp;<span class="op" id="1676724">-</span><span class="ident" id="1676725">a</span><span class="op" id="1676726">.</span><span class="ident" id="1676727">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676731">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676735">buf</span>&nbsp;<span class="op" id="1676739">:=</span>&nbsp;<span class="builtinfunc" id="1676742">make</span><span class="op" id="1676746">(</span><span class="op" id="1676747">[</span><span class="op" id="1676748">]</span><span class="builtintype" id="1676749">byte</span><span class="op" id="1676753">,</span>&nbsp;<span class="ident" id="1676755">n</span><span class="op" id="1676756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676759">w</span>&nbsp;<span class="op" id="1676761">:=</span>&nbsp;<span class="num" id="1676764">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676767">switch</span>&nbsp;<span class="op" id="1676774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676777">case</span>&nbsp;<span class="ident" id="1676782">a</span><span class="op" id="1676783">.</span><span class="ident" id="1676784">nd</span>&nbsp;<span class="op" id="1676787">==</span>&nbsp;<span class="num" id="1676790">0</span><span class="op" id="1676791">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676795">return</span>&nbsp;<span class="string" id="1676802">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676808">case</span>&nbsp;<span class="ident" id="1676813">a</span><span class="op" id="1676814">.</span><span class="ident" id="1676815">dp</span>&nbsp;<span class="op" id="1676818">&lt;=</span>&nbsp;<span class="num" id="1676821">0</span><span class="op" id="1676822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1676826">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676881">buf</span><span class="op" id="1676884">[</span><span class="ident" id="1676885">w</span><span class="op" id="1676886">]</span>&nbsp;<span class="op" id="1676888">=</span>&nbsp;<span class="string" id="1676890">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676896">w</span><span class="op" id="1676897">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676902">buf</span><span class="op" id="1676905">[</span><span class="ident" id="1676906">w</span><span class="op" id="1676907">]</span>&nbsp;<span class="op" id="1676909">=</span>&nbsp;<span class="string" id="1676911">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676917">w</span><span class="op" id="1676918">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676923">w</span>&nbsp;<span class="op" id="1676925">+=</span>&nbsp;<span class="ident" id="1676928">digitZero</span><span class="op" id="1676937">(</span><span class="ident" id="1676938">buf</span><span class="op" id="1676941">[</span><span class="ident" id="1676942">w</span>&nbsp;<span class="op" id="1676944">:</span>&nbsp;<span class="ident" id="1676946">w</span><span class="op" id="1676947">+</span><span class="op" id="1676948">-</span><span class="ident" id="1676949">a</span><span class="op" id="1676950">.</span><span class="ident" id="1676951">dp</span><span class="op" id="1676953">]</span><span class="op" id="1676954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676958">w</span>&nbsp;<span class="op" id="1676960">+=</span>&nbsp;<span class="builtinfunc" id="1676963">copy</span><span class="op" id="1676967">(</span><span class="ident" id="1676968">buf</span><span class="op" id="1676971">[</span><span class="ident" id="1676972">w</span><span class="op" id="1676973">:</span><span class="op" id="1676974">]</span><span class="op" id="1676975">,</span>&nbsp;<span class="ident" id="1676977">a</span><span class="op" id="1676978">.</span><span class="ident" id="1676979">d</span><span class="op" id="1676980">[</span><span class="num" id="1676981">0</span><span class="op" id="1676982">:</span><span class="ident" id="1676983">a</span><span class="op" id="1676984">.</span><span class="ident" id="1676985">nd</span><span class="op" id="1676987">]</span><span class="op" id="1676988">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676992">case</span>&nbsp;<span class="ident" id="1676997">a</span><span class="op" id="1676998">.</span><span class="ident" id="1676999">dp</span>&nbsp;<span class="op" id="1677002">&lt;</span>&nbsp;<span class="ident" id="1677004">a</span><span class="op" id="1677005">.</span><span class="ident" id="1677006">nd</span><span class="op" id="1677008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1677012">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677051">w</span>&nbsp;<span class="op" id="1677053">+=</span>&nbsp;<span class="builtinfunc" id="1677056">copy</span><span class="op" id="1677060">(</span><span class="ident" id="1677061">buf</span><span class="op" id="1677064">[</span><span class="ident" id="1677065">w</span><span class="op" id="1677066">:</span><span class="op" id="1677067">]</span><span class="op" id="1677068">,</span>&nbsp;<span class="ident" id="1677070">a</span><span class="op" id="1677071">.</span><span class="ident" id="1677072">d</span><span class="op" id="1677073">[</span><span class="num" id="1677074">0</span><span class="op" id="1677075">:</span><span class="ident" id="1677076">a</span><span class="op" id="1677077">.</span><span class="ident" id="1677078">dp</span><span class="op" id="1677080">]</span><span class="op" id="1677081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677085">buf</span><span class="op" id="1677088">[</span><span class="ident" id="1677089">w</span><span class="op" id="1677090">]</span>&nbsp;<span class="op" id="1677092">=</span>&nbsp;<span class="string" id="1677094">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677100">w</span><span class="op" id="1677101">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677106">w</span>&nbsp;<span class="op" id="1677108">+=</span>&nbsp;<span class="builtinfunc" id="1677111">copy</span><span class="op" id="1677115">(</span><span class="ident" id="1677116">buf</span><span class="op" id="1677119">[</span><span class="ident" id="1677120">w</span><span class="op" id="1677121">:</span><span class="op" id="1677122">]</span><span class="op" id="1677123">,</span>&nbsp;<span class="ident" id="1677125">a</span><span class="op" id="1677126">.</span><span class="ident" id="1677127">d</span><span class="op" id="1677128">[</span><span class="ident" id="1677129">a</span><span class="op" id="1677130">.</span><span class="ident" id="1677131">dp</span><span class="op" id="1677133">:</span><span class="ident" id="1677134">a</span><span class="op" id="1677135">.</span><span class="ident" id="1677136">nd</span><span class="op" id="1677138">]</span><span class="op" id="1677139">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677143">default</span><span class="op" id="1677150">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1677154">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677209">w</span>&nbsp;<span class="op" id="1677211">+=</span>&nbsp;<span class="builtinfunc" id="1677214">copy</span><span class="op" id="1677218">(</span><span class="ident" id="1677219">buf</span><span class="op" id="1677222">[</span><span class="ident" id="1677223">w</span><span class="op" id="1677224">:</span><span class="op" id="1677225">]</span><span class="op" id="1677226">,</span>&nbsp;<span class="ident" id="1677228">a</span><span class="op" id="1677229">.</span><span class="ident" id="1677230">d</span><span class="op" id="1677231">[</span><span class="num" id="1677232">0</span><span class="op" id="1677233">:</span><span class="ident" id="1677234">a</span><span class="op" id="1677235">.</span><span class="ident" id="1677236">nd</span><span class="op" id="1677238">]</span><span class="op" id="1677239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677243">w</span>&nbsp;<span class="op" id="1677245">+=</span>&nbsp;<span class="ident" id="1677248">digitZero</span><span class="op" id="1677257">(</span><span class="ident" id="1677258">buf</span><span class="op" id="1677261">[</span><span class="ident" id="1677262">w</span>&nbsp;<span class="op" id="1677264">:</span>&nbsp;<span class="ident" id="1677266">w</span><span class="op" id="1677267">+</span><span class="ident" id="1677268">a</span><span class="op" id="1677269">.</span><span class="ident" id="1677270">dp</span><span class="op" id="1677272">-</span><span class="ident" id="1677273">a</span><span class="op" id="1677274">.</span><span class="ident" id="1677275">nd</span><span class="op" id="1677277">]</span><span class="op" id="1677278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677284">return</span>&nbsp;<span class="builtintype" id="1677291">string</span><span class="op" id="1677297">(</span><span class="ident" id="1677298">buf</span><span class="op" id="1677301">[</span><span class="num" id="1677302">0</span><span class="op" id="1677303">:</span><span class="ident" id="1677304">w</span><span class="op" id="1677305">]</span><span class="op" id="1677306">)</span><br>
<span class="lineno"></span><span class="op" id="1677308">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1677311">func</span>&nbsp;<span class="ident" id="1677316">digitZero</span><span class="op" id="1677325">(</span><span class="ident" id="1677326">dst</span>&nbsp;<span class="op" id="1677330">[</span><span class="op" id="1677331">]</span><span class="builtintype" id="1677332">byte</span><span class="op" id="1677336">)</span>&nbsp;<span class="builtintype" id="1677338">int</span>&nbsp;<span class="op" id="1677342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677345">for</span>&nbsp;<span class="ident" id="1677349">i</span>&nbsp;<span class="op" id="1677351">:=</span>&nbsp;<span class="keyword" id="1677354">range</span>&nbsp;<span class="ident" id="1677360">dst</span>&nbsp;<span class="op" id="1677364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677368">dst</span><span class="op" id="1677371">[</span><span class="ident" id="1677372">i</span><span class="op" id="1677373">]</span>&nbsp;<span class="op" id="1677375">=</span>&nbsp;<span class="string" id="1677377">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677382">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677385">return</span>&nbsp;<span class="builtinfunc" id="1677392">len</span><span class="op" id="1677395">(</span><span class="ident" id="1677396">dst</span><span class="op" id="1677399">)</span><br>
<span class="lineno"></span><span class="op" id="1677401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1677404">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="1677440">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="1677495">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="1677536">func</span>&nbsp;<span class="ident" id="1677541">trim</span><span class="op" id="1677545">(</span><span class="ident" id="1677546">a</span>&nbsp;<span class="op" id="1677548">*</span><span class="ident" id="1677549">decimal</span><span class="op" id="1677556">)</span>&nbsp;<span class="op" id="1677558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677561">for</span>&nbsp;<span class="ident" id="1677565">a</span><span class="op" id="1677566">.</span><span class="ident" id="1677567">nd</span>&nbsp;<span class="op" id="1677570">&gt;</span>&nbsp;<span class="num" id="1677572">0</span>&nbsp;<span class="op" id="1677574">&amp;&amp;</span>&nbsp;<span class="ident" id="1677577">a</span><span class="op" id="1677578">.</span><span class="ident" id="1677579">d</span><span class="op" id="1677580">[</span><span class="ident" id="1677581">a</span><span class="op" id="1677582">.</span><span class="ident" id="1677583">nd</span><span class="op" id="1677585">-</span><span class="num" id="1677586">1</span><span class="op" id="1677587">]</span>&nbsp;<span class="op" id="1677589">==</span>&nbsp;<span class="string" id="1677592">&#39;0&#39;</span>&nbsp;<span class="op" id="1677596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677600">a</span><span class="op" id="1677601">.</span><span class="ident" id="1677602">nd</span><span class="op" id="1677604">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677608">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677611">if</span>&nbsp;<span class="ident" id="1677614">a</span><span class="op" id="1677615">.</span><span class="ident" id="1677616">nd</span>&nbsp;<span class="op" id="1677619">==</span>&nbsp;<span class="num" id="1677622">0</span>&nbsp;<span class="op" id="1677624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677628">a</span><span class="op" id="1677629">.</span><span class="ident" id="1677630">dp</span>&nbsp;<span class="op" id="1677633">=</span>&nbsp;<span class="num" id="1677635">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677638">}</span><br>
<span class="lineno"></span><span class="op" id="1677640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="1677643">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="1677661">func</span>&nbsp;<span class="op" id="1677666">(</span><span class="ident" id="1677667">a</span>&nbsp;<span class="op" id="1677669">*</span><span class="ident" id="1677670">decimal</span><span class="op" id="1677677">)</span>&nbsp;<span class="ident" id="1677679">Assign</span><span class="op" id="1677685">(</span><span class="ident" id="1677686">v</span>&nbsp;<span class="ident" id="1677688">uint64</span><span class="op" id="1677694">)</span>&nbsp;<span class="op" id="1677696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677699">var</span>&nbsp;<span class="ident" id="1677703">buf</span>&nbsp;<span class="op" id="1677707">[</span><span class="num" id="1677708">24</span><span class="op" id="1677710">]</span><span class="builtintype" id="1677711">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1677718">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677753">n</span>&nbsp;<span class="op" id="1677755">:=</span>&nbsp;<span class="num" id="1677758">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677761">for</span>&nbsp;<span class="ident" id="1677765">v</span>&nbsp;<span class="op" id="1677767">&gt;</span>&nbsp;<span class="num" id="1677769">0</span>&nbsp;<span class="op" id="1677771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677775">v1</span>&nbsp;<span class="op" id="1677778">:=</span>&nbsp;<span class="ident" id="1677781">v</span>&nbsp;<span class="op" id="1677783">/</span>&nbsp;<span class="num" id="1677785">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677790">v</span>&nbsp;<span class="op" id="1677792">-=</span>&nbsp;<span class="num" id="1677795">10</span>&nbsp;<span class="op" id="1677798">*</span>&nbsp;<span class="ident" id="1677800">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677805">buf</span><span class="op" id="1677808">[</span><span class="ident" id="1677809">n</span><span class="op" id="1677810">]</span>&nbsp;<span class="op" id="1677812">=</span>&nbsp;<span class="builtintype" id="1677814">byte</span><span class="op" id="1677818">(</span><span class="ident" id="1677819">v</span>&nbsp;<span class="op" id="1677821">+</span>&nbsp;<span class="string" id="1677823">&#39;0&#39;</span><span class="op" id="1677826">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677830">n</span><span class="op" id="1677831">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677836">v</span>&nbsp;<span class="op" id="1677838">=</span>&nbsp;<span class="ident" id="1677840">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1677848">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677901">a</span><span class="op" id="1677902">.</span><span class="ident" id="1677903">nd</span>&nbsp;<span class="op" id="1677906">=</span>&nbsp;<span class="num" id="1677908">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677911">for</span>&nbsp;<span class="ident" id="1677915">n</span><span class="op" id="1677916">--</span><span class="op" id="1677918">;</span>&nbsp;<span class="ident" id="1677920">n</span>&nbsp;<span class="op" id="1677922">&gt;=</span>&nbsp;<span class="num" id="1677925">0</span><span class="op" id="1677926">;</span>&nbsp;<span class="ident" id="1677928">n</span><span class="op" id="1677929">--</span>&nbsp;<span class="op" id="1677932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677936">a</span><span class="op" id="1677937">.</span><span class="ident" id="1677938">d</span><span class="op" id="1677939">[</span><span class="ident" id="1677940">a</span><span class="op" id="1677941">.</span><span class="ident" id="1677942">nd</span><span class="op" id="1677944">]</span>&nbsp;<span class="op" id="1677946">=</span>&nbsp;<span class="ident" id="1677948">buf</span><span class="op" id="1677951">[</span><span class="ident" id="1677952">n</span><span class="op" id="1677953">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677957">a</span><span class="op" id="1677958">.</span><span class="ident" id="1677959">nd</span><span class="op" id="1677961">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677965">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677968">a</span><span class="op" id="1677969">.</span><span class="ident" id="1677970">dp</span>&nbsp;<span class="op" id="1677973">=</span>&nbsp;<span class="ident" id="1677975">a</span><span class="op" id="1677976">.</span><span class="ident" id="1677977">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677981">trim</span><span class="op" id="1677985">(</span><span class="ident" id="1677986">a</span><span class="op" id="1677987">)</span><br>
<span class="lineno"></span><span class="op" id="1677989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1677992">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="1678054">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="1678125">const</span>&nbsp;<span class="ident" id="1678131">maxShift</span>&nbsp;<span class="op" id="1678140">=</span>&nbsp;<span class="num" id="1678142">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1678146">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1678219">func</span>&nbsp;<span class="ident" id="1678224">rightShift</span><span class="op" id="1678234">(</span><span class="ident" id="1678235">a</span>&nbsp;<span class="op" id="1678237">*</span><span class="ident" id="1678238">decimal</span><span class="op" id="1678245">,</span>&nbsp;<span class="ident" id="1678247">k</span>&nbsp;<span class="builtintype" id="1678249">uint</span><span class="op" id="1678253">)</span>&nbsp;<span class="op" id="1678255">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678258">r</span>&nbsp;<span class="op" id="1678260">:=</span>&nbsp;<span class="num" id="1678263">0</span>&nbsp;<span class="comment" id="1678265">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678282">w</span>&nbsp;<span class="op" id="1678284">:=</span>&nbsp;<span class="num" id="1678287">0</span>&nbsp;<span class="comment" id="1678289">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1678308">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678364">n</span>&nbsp;<span class="op" id="1678366">:=</span>&nbsp;<span class="num" id="1678369">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678372">for</span>&nbsp;<span class="op" id="1678376">;</span>&nbsp;<span class="ident" id="1678378">n</span><span class="op" id="1678379">&gt;&gt;</span><span class="ident" id="1678381">k</span>&nbsp;<span class="op" id="1678383">==</span>&nbsp;<span class="num" id="1678386">0</span><span class="op" id="1678387">;</span>&nbsp;<span class="ident" id="1678389">r</span><span class="op" id="1678390">++</span>&nbsp;<span class="op" id="1678393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678397">if</span>&nbsp;<span class="ident" id="1678400">r</span>&nbsp;<span class="op" id="1678402">&gt;=</span>&nbsp;<span class="ident" id="1678405">a</span><span class="op" id="1678406">.</span><span class="ident" id="1678407">nd</span>&nbsp;<span class="op" id="1678410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678415">if</span>&nbsp;<span class="ident" id="1678418">n</span>&nbsp;<span class="op" id="1678420">==</span>&nbsp;<span class="num" id="1678423">0</span>&nbsp;<span class="op" id="1678425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1678431">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678485">a</span><span class="op" id="1678486">.</span><span class="ident" id="1678487">nd</span>&nbsp;<span class="op" id="1678490">=</span>&nbsp;<span class="num" id="1678492">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678498">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678513">for</span>&nbsp;<span class="ident" id="1678517">n</span><span class="op" id="1678518">&gt;&gt;</span><span class="ident" id="1678520">k</span>&nbsp;<span class="op" id="1678522">==</span>&nbsp;<span class="num" id="1678525">0</span>&nbsp;<span class="op" id="1678527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678533">n</span>&nbsp;<span class="op" id="1678535">=</span>&nbsp;<span class="ident" id="1678537">n</span>&nbsp;<span class="op" id="1678539">*</span>&nbsp;<span class="num" id="1678541">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678548">r</span><span class="op" id="1678549">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678560">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678572">c</span>&nbsp;<span class="op" id="1678574">:=</span>&nbsp;<span class="builtintype" id="1678577">int</span><span class="op" id="1678580">(</span><span class="ident" id="1678581">a</span><span class="op" id="1678582">.</span><span class="ident" id="1678583">d</span><span class="op" id="1678584">[</span><span class="ident" id="1678585">r</span><span class="op" id="1678586">]</span><span class="op" id="1678587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678591">n</span>&nbsp;<span class="op" id="1678593">=</span>&nbsp;<span class="ident" id="1678595">n</span><span class="op" id="1678596">*</span><span class="num" id="1678597">10</span>&nbsp;<span class="op" id="1678600">+</span>&nbsp;<span class="ident" id="1678602">c</span>&nbsp;<span class="op" id="1678604">-</span>&nbsp;<span class="string" id="1678606">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678614">a</span><span class="op" id="1678615">.</span><span class="ident" id="1678616">dp</span>&nbsp;<span class="op" id="1678619">-=</span>&nbsp;<span class="ident" id="1678622">r</span>&nbsp;<span class="op" id="1678624">-</span>&nbsp;<span class="num" id="1678626">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1678630">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678669">for</span>&nbsp;<span class="op" id="1678673">;</span>&nbsp;<span class="ident" id="1678675">r</span>&nbsp;<span class="op" id="1678677">&lt;</span>&nbsp;<span class="ident" id="1678679">a</span><span class="op" id="1678680">.</span><span class="ident" id="1678681">nd</span><span class="op" id="1678683">;</span>&nbsp;<span class="ident" id="1678685">r</span><span class="op" id="1678686">++</span>&nbsp;<span class="op" id="1678689">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678693">c</span>&nbsp;<span class="op" id="1678695">:=</span>&nbsp;<span class="builtintype" id="1678698">int</span><span class="op" id="1678701">(</span><span class="ident" id="1678702">a</span><span class="op" id="1678703">.</span><span class="ident" id="1678704">d</span><span class="op" id="1678705">[</span><span class="ident" id="1678706">r</span><span class="op" id="1678707">]</span><span class="op" id="1678708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678712">dig</span>&nbsp;<span class="op" id="1678716">:=</span>&nbsp;<span class="ident" id="1678719">n</span>&nbsp;<span class="op" id="1678721">&gt;&gt;</span>&nbsp;<span class="ident" id="1678724">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678728">n</span>&nbsp;<span class="op" id="1678730">-=</span>&nbsp;<span class="ident" id="1678733">dig</span>&nbsp;<span class="op" id="1678737">&lt;&lt;</span>&nbsp;<span class="ident" id="1678740">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678744">a</span><span class="op" id="1678745">.</span><span class="ident" id="1678746">d</span><span class="op" id="1678747">[</span><span class="ident" id="1678748">w</span><span class="op" id="1678749">]</span>&nbsp;<span class="op" id="1678751">=</span>&nbsp;<span class="builtintype" id="1678753">byte</span><span class="op" id="1678757">(</span><span class="ident" id="1678758">dig</span>&nbsp;<span class="op" id="1678762">+</span>&nbsp;<span class="string" id="1678764">&#39;0&#39;</span><span class="op" id="1678767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678771">w</span><span class="op" id="1678772">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678777">n</span>&nbsp;<span class="op" id="1678779">=</span>&nbsp;<span class="ident" id="1678781">n</span><span class="op" id="1678782">*</span><span class="num" id="1678783">10</span>&nbsp;<span class="op" id="1678786">+</span>&nbsp;<span class="ident" id="1678788">c</span>&nbsp;<span class="op" id="1678790">-</span>&nbsp;<span class="string" id="1678792">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1678801">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678828">for</span>&nbsp;<span class="ident" id="1678832">n</span>&nbsp;<span class="op" id="1678834">&gt;</span>&nbsp;<span class="num" id="1678836">0</span>&nbsp;<span class="op" id="1678838">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678842">dig</span>&nbsp;<span class="op" id="1678846">:=</span>&nbsp;<span class="ident" id="1678849">n</span>&nbsp;<span class="op" id="1678851">&gt;&gt;</span>&nbsp;<span class="ident" id="1678854">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678858">n</span>&nbsp;<span class="op" id="1678860">-=</span>&nbsp;<span class="ident" id="1678863">dig</span>&nbsp;<span class="op" id="1678867">&lt;&lt;</span>&nbsp;<span class="ident" id="1678870">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678874">if</span>&nbsp;<span class="ident" id="1678877">w</span>&nbsp;<span class="op" id="1678879">&lt;</span>&nbsp;<span class="builtinfunc" id="1678881">len</span><span class="op" id="1678884">(</span><span class="ident" id="1678885">a</span><span class="op" id="1678886">.</span><span class="ident" id="1678887">d</span><span class="op" id="1678888">)</span>&nbsp;<span class="op" id="1678890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678895">a</span><span class="op" id="1678896">.</span><span class="ident" id="1678897">d</span><span class="op" id="1678898">[</span><span class="ident" id="1678899">w</span><span class="op" id="1678900">]</span>&nbsp;<span class="op" id="1678902">=</span>&nbsp;<span class="builtintype" id="1678904">byte</span><span class="op" id="1678908">(</span><span class="ident" id="1678909">dig</span>&nbsp;<span class="op" id="1678913">+</span>&nbsp;<span class="string" id="1678915">&#39;0&#39;</span><span class="op" id="1678918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678923">w</span><span class="op" id="1678924">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678929">}</span>&nbsp;<span class="keyword" id="1678931">else</span>&nbsp;<span class="keyword" id="1678936">if</span>&nbsp;<span class="ident" id="1678939">dig</span>&nbsp;<span class="op" id="1678943">&gt;</span>&nbsp;<span class="num" id="1678945">0</span>&nbsp;<span class="op" id="1678947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678952">a</span><span class="op" id="1678953">.</span><span class="ident" id="1678954">trunc</span>&nbsp;<span class="op" id="1678960">=</span>&nbsp;<span class="builtintype" id="1678962">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678973">n</span>&nbsp;<span class="op" id="1678975">=</span>&nbsp;<span class="ident" id="1678977">n</span>&nbsp;<span class="op" id="1678979">*</span>&nbsp;<span class="num" id="1678981">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678985">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678989">a</span><span class="op" id="1678990">.</span><span class="ident" id="1678991">nd</span>&nbsp;<span class="op" id="1678994">=</span>&nbsp;<span class="ident" id="1678996">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678999">trim</span><span class="op" id="1679003">(</span><span class="ident" id="1679004">a</span><span class="op" id="1679005">)</span><br>
<span class="lineno"></span><span class="op" id="1679007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="1679010">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="1679077">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="1679140">//</span><br>
<span class="lineno"></span><span class="comment" id="1679143">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1679204">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="1679273">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="1679343">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1679391">//</span><br>
<span class="lineno"></span><span class="comment" id="1679394">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="1679433">type</span>&nbsp;<span class="ident" id="1679438">leftCheat</span>&nbsp;<span class="keyword" id="1679448">struct</span>&nbsp;<span class="op" id="1679455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1679458">delta</span>&nbsp;&nbsp;<span class="builtintype" id="1679465">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1679472">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1679497">cutoff</span>&nbsp;<span class="builtintype" id="1679504">string</span>&nbsp;<span class="comment" id="1679511">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="1679549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="1679552">var</span>&nbsp;<span class="ident" id="1679556">leftcheats</span>&nbsp;<span class="op" id="1679567">=</span>&nbsp;<span class="op" id="1679569">[</span><span class="op" id="1679570">]</span><span class="ident" id="1679571">leftCheat</span><span class="op" id="1679580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1679583">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1679618">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1679673">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1679709">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspseq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspawk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspprintf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspint(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1679913">{</span><span class="num" id="1679914">0</span><span class="op" id="1679915">,</span>&nbsp;<span class="string" id="1679917">&#34;&#34;</span><span class="op" id="1679919">}</span><span class="op" id="1679920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1679923">{</span><span class="num" id="1679924">1</span><span class="op" id="1679925">,</span>&nbsp;<span class="string" id="1679927">&#34;5&#34;</span><span class="op" id="1679930">}</span><span class="op" id="1679931">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1679951">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1679959">{</span><span class="num" id="1679960">1</span><span class="op" id="1679961">,</span>&nbsp;<span class="string" id="1679963">&#34;25&#34;</span><span class="op" id="1679967">}</span><span class="op" id="1679968">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1679987">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1679995">{</span><span class="num" id="1679996">1</span><span class="op" id="1679997">,</span>&nbsp;<span class="string" id="1679999">&#34;125&#34;</span><span class="op" id="1680004">}</span><span class="op" id="1680005">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680023">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680031">{</span><span class="num" id="1680032">2</span><span class="op" id="1680033">,</span>&nbsp;<span class="string" id="1680035">&#34;625&#34;</span><span class="op" id="1680040">}</span><span class="op" id="1680041">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680059">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680068">{</span><span class="num" id="1680069">2</span><span class="op" id="1680070">,</span>&nbsp;<span class="string" id="1680072">&#34;3125&#34;</span><span class="op" id="1680078">}</span><span class="op" id="1680079">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680096">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680105">{</span><span class="num" id="1680106">2</span><span class="op" id="1680107">,</span>&nbsp;<span class="string" id="1680109">&#34;15625&#34;</span><span class="op" id="1680116">}</span><span class="op" id="1680117">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680133">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680142">{</span><span class="num" id="1680143">3</span><span class="op" id="1680144">,</span>&nbsp;<span class="string" id="1680146">&#34;78125&#34;</span><span class="op" id="1680153">}</span><span class="op" id="1680154">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680170">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680180">{</span><span class="num" id="1680181">3</span><span class="op" id="1680182">,</span>&nbsp;<span class="string" id="1680184">&#34;390625&#34;</span><span class="op" id="1680192">}</span><span class="op" id="1680193">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680208">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680218">{</span><span class="num" id="1680219">3</span><span class="op" id="1680220">,</span>&nbsp;<span class="string" id="1680222">&#34;1953125&#34;</span><span class="op" id="1680231">}</span><span class="op" id="1680232">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680246">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680256">{</span><span class="num" id="1680257">4</span><span class="op" id="1680258">,</span>&nbsp;<span class="string" id="1680260">&#34;9765625&#34;</span><span class="op" id="1680269">}</span><span class="op" id="1680270">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680284">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680295">{</span><span class="num" id="1680296">4</span><span class="op" id="1680297">,</span>&nbsp;<span class="string" id="1680299">&#34;48828125&#34;</span><span class="op" id="1680309">}</span><span class="op" id="1680310">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680323">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680334">{</span><span class="num" id="1680335">4</span><span class="op" id="1680336">,</span>&nbsp;<span class="string" id="1680338">&#34;244140625&#34;</span><span class="op" id="1680349">}</span><span class="op" id="1680350">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680362">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680373">{</span><span class="num" id="1680374">4</span><span class="op" id="1680375">,</span>&nbsp;<span class="string" id="1680377">&#34;1220703125&#34;</span><span class="op" id="1680389">}</span><span class="op" id="1680390">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680401">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680412">{</span><span class="num" id="1680413">5</span><span class="op" id="1680414">,</span>&nbsp;<span class="string" id="1680416">&#34;6103515625&#34;</span><span class="op" id="1680428">}</span><span class="op" id="1680429">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680440">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680452">{</span><span class="num" id="1680453">5</span><span class="op" id="1680454">,</span>&nbsp;<span class="string" id="1680456">&#34;30517578125&#34;</span><span class="op" id="1680469">}</span><span class="op" id="1680470">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680480">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680492">{</span><span class="num" id="1680493">5</span><span class="op" id="1680494">,</span>&nbsp;<span class="string" id="1680496">&#34;152587890625&#34;</span><span class="op" id="1680510">}</span><span class="op" id="1680511">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680520">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680532">{</span><span class="num" id="1680533">6</span><span class="op" id="1680534">,</span>&nbsp;<span class="string" id="1680536">&#34;762939453125&#34;</span><span class="op" id="1680550">}</span><span class="op" id="1680551">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680560">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680573">{</span><span class="num" id="1680574">6</span><span class="op" id="1680575">,</span>&nbsp;<span class="string" id="1680577">&#34;3814697265625&#34;</span><span class="op" id="1680592">}</span><span class="op" id="1680593">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680601">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680614">{</span><span class="num" id="1680615">6</span><span class="op" id="1680616">,</span>&nbsp;<span class="string" id="1680618">&#34;19073486328125&#34;</span><span class="op" id="1680634">}</span><span class="op" id="1680635">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680642">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680655">{</span><span class="num" id="1680656">7</span><span class="op" id="1680657">,</span>&nbsp;<span class="string" id="1680659">&#34;95367431640625&#34;</span><span class="op" id="1680675">}</span><span class="op" id="1680676">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680683">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680697">{</span><span class="num" id="1680698">7</span><span class="op" id="1680699">,</span>&nbsp;<span class="string" id="1680701">&#34;476837158203125&#34;</span><span class="op" id="1680718">}</span><span class="op" id="1680719">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680725">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680739">{</span><span class="num" id="1680740">7</span><span class="op" id="1680741">,</span>&nbsp;<span class="string" id="1680743">&#34;2384185791015625&#34;</span><span class="op" id="1680761">}</span><span class="op" id="1680762">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680767">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680781">{</span><span class="num" id="1680782">7</span><span class="op" id="1680783">,</span>&nbsp;<span class="string" id="1680785">&#34;11920928955078125&#34;</span><span class="op" id="1680804">}</span><span class="op" id="1680805">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1680809">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680823">{</span><span class="num" id="1680824">8</span><span class="op" id="1680825">,</span>&nbsp;<span class="string" id="1680827">&#34;59604644775390625&#34;</span><span class="op" id="1680846">}</span><span class="op" id="1680847">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1680851">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680866">{</span><span class="num" id="1680867">8</span><span class="op" id="1680868">,</span>&nbsp;<span class="string" id="1680870">&#34;298023223876953125&#34;</span><span class="op" id="1680890">}</span><span class="op" id="1680891">,</span>&nbsp;&nbsp;<span class="comment" id="1680894">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680909">{</span><span class="num" id="1680910">8</span><span class="op" id="1680911">,</span>&nbsp;<span class="string" id="1680913">&#34;1490116119384765625&#34;</span><span class="op" id="1680934">}</span><span class="op" id="1680935">,</span>&nbsp;<span class="comment" id="1680937">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1680952">{</span><span class="num" id="1680953">9</span><span class="op" id="1680954">,</span>&nbsp;<span class="string" id="1680956">&#34;7450580596923828125&#34;</span><span class="op" id="1680977">}</span><span class="op" id="1680978">,</span>&nbsp;<span class="comment" id="1680980">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="1680995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1680998">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="1681059">func</span>&nbsp;<span class="ident" id="1681064">prefixIsLessThan</span><span class="op" id="1681080">(</span><span class="ident" id="1681081">b</span>&nbsp;<span class="op" id="1681083">[</span><span class="op" id="1681084">]</span><span class="builtintype" id="1681085">byte</span><span class="op" id="1681089">,</span>&nbsp;<span class="ident" id="1681091">s</span>&nbsp;<span class="builtintype" id="1681093">string</span><span class="op" id="1681099">)</span>&nbsp;<span class="builtintype" id="1681101">bool</span>&nbsp;<span class="op" id="1681106">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681109">for</span>&nbsp;<span class="ident" id="1681113">i</span>&nbsp;<span class="op" id="1681115">:=</span>&nbsp;<span class="num" id="1681118">0</span><span class="op" id="1681119">;</span>&nbsp;<span class="ident" id="1681121">i</span>&nbsp;<span class="op" id="1681123">&lt;</span>&nbsp;<span class="builtinfunc" id="1681125">len</span><span class="op" id="1681128">(</span><span class="ident" id="1681129">s</span><span class="op" id="1681130">)</span><span class="op" id="1681131">;</span>&nbsp;<span class="ident" id="1681133">i</span><span class="op" id="1681134">++</span>&nbsp;<span class="op" id="1681137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681141">if</span>&nbsp;<span class="ident" id="1681144">i</span>&nbsp;<span class="op" id="1681146">&gt;=</span>&nbsp;<span class="builtinfunc" id="1681149">len</span><span class="op" id="1681152">(</span><span class="ident" id="1681153">b</span><span class="op" id="1681154">)</span>&nbsp;<span class="op" id="1681156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681161">return</span>&nbsp;<span class="builtintype" id="1681168">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681179">if</span>&nbsp;<span class="ident" id="1681182">b</span><span class="op" id="1681183">[</span><span class="ident" id="1681184">i</span><span class="op" id="1681185">]</span>&nbsp;<span class="op" id="1681187">!=</span>&nbsp;<span class="ident" id="1681190">s</span><span class="op" id="1681191">[</span><span class="ident" id="1681192">i</span><span class="op" id="1681193">]</span>&nbsp;<span class="op" id="1681195">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681200">return</span>&nbsp;<span class="ident" id="1681207">b</span><span class="op" id="1681208">[</span><span class="ident" id="1681209">i</span><span class="op" id="1681210">]</span>&nbsp;<span class="op" id="1681212">&lt;</span>&nbsp;<span class="ident" id="1681214">s</span><span class="op" id="1681215">[</span><span class="ident" id="1681216">i</span><span class="op" id="1681217">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681227">return</span>&nbsp;<span class="builtintype" id="1681234">false</span><br>
<span class="lineno"></span><span class="op" id="1681240">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="1681243">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1681315">func</span>&nbsp;<span class="ident" id="1681320">leftShift</span><span class="op" id="1681329">(</span><span class="ident" id="1681330">a</span>&nbsp;<span class="op" id="1681332">*</span><span class="ident" id="1681333">decimal</span><span class="op" id="1681340">,</span>&nbsp;<span class="ident" id="1681342">k</span>&nbsp;<span class="builtintype" id="1681344">uint</span><span class="op" id="1681348">)</span>&nbsp;<span class="op" id="1681350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681353">delta</span>&nbsp;<span class="op" id="1681359">:=</span>&nbsp;<span class="ident" id="1681362">leftcheats</span><span class="op" id="1681372">[</span><span class="ident" id="1681373">k</span><span class="op" id="1681374">]</span><span class="op" id="1681375">.</span><span class="ident" id="1681376">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681383">if</span>&nbsp;<span class="ident" id="1681386">prefixIsLessThan</span><span class="op" id="1681402">(</span><span class="ident" id="1681403">a</span><span class="op" id="1681404">.</span><span class="ident" id="1681405">d</span><span class="op" id="1681406">[</span><span class="num" id="1681407">0</span><span class="op" id="1681408">:</span><span class="ident" id="1681409">a</span><span class="op" id="1681410">.</span><span class="ident" id="1681411">nd</span><span class="op" id="1681413">]</span><span class="op" id="1681414">,</span>&nbsp;<span class="ident" id="1681416">leftcheats</span><span class="op" id="1681426">[</span><span class="ident" id="1681427">k</span><span class="op" id="1681428">]</span><span class="op" id="1681429">.</span><span class="ident" id="1681430">cutoff</span><span class="op" id="1681436">)</span>&nbsp;<span class="op" id="1681438">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681442">delta</span><span class="op" id="1681447">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681455">r</span>&nbsp;<span class="op" id="1681457">:=</span>&nbsp;<span class="ident" id="1681460">a</span><span class="op" id="1681461">.</span><span class="ident" id="1681462">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1681473">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681488">w</span>&nbsp;<span class="op" id="1681490">:=</span>&nbsp;<span class="ident" id="1681493">a</span><span class="op" id="1681494">.</span><span class="ident" id="1681495">nd</span>&nbsp;<span class="op" id="1681498">+</span>&nbsp;<span class="ident" id="1681500">delta</span>&nbsp;<span class="comment" id="1681506">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681522">n</span>&nbsp;<span class="op" id="1681524">:=</span>&nbsp;<span class="num" id="1681527">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1681531">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681570">for</span>&nbsp;<span class="ident" id="1681574">r</span><span class="op" id="1681575">--</span><span class="op" id="1681577">;</span>&nbsp;<span class="ident" id="1681579">r</span>&nbsp;<span class="op" id="1681581">&gt;=</span>&nbsp;<span class="num" id="1681584">0</span><span class="op" id="1681585">;</span>&nbsp;<span class="ident" id="1681587">r</span><span class="op" id="1681588">--</span>&nbsp;<span class="op" id="1681591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681595">n</span>&nbsp;<span class="op" id="1681597">+=</span>&nbsp;<span class="op" id="1681600">(</span><span class="builtintype" id="1681601">int</span><span class="op" id="1681604">(</span><span class="ident" id="1681605">a</span><span class="op" id="1681606">.</span><span class="ident" id="1681607">d</span><span class="op" id="1681608">[</span><span class="ident" id="1681609">r</span><span class="op" id="1681610">]</span><span class="op" id="1681611">)</span>&nbsp;<span class="op" id="1681613">-</span>&nbsp;<span class="string" id="1681615">&#39;0&#39;</span><span class="op" id="1681618">)</span>&nbsp;<span class="op" id="1681620">&lt;&lt;</span>&nbsp;<span class="ident" id="1681623">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681627">quo</span>&nbsp;<span class="op" id="1681631">:=</span>&nbsp;<span class="ident" id="1681634">n</span>&nbsp;<span class="op" id="1681636">/</span>&nbsp;<span class="num" id="1681638">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681643">rem</span>&nbsp;<span class="op" id="1681647">:=</span>&nbsp;<span class="ident" id="1681650">n</span>&nbsp;<span class="op" id="1681652">-</span>&nbsp;<span class="num" id="1681654">10</span><span class="op" id="1681656">*</span><span class="ident" id="1681657">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681663">w</span><span class="op" id="1681664">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681669">if</span>&nbsp;<span class="ident" id="1681672">w</span>&nbsp;<span class="op" id="1681674">&lt;</span>&nbsp;<span class="builtinfunc" id="1681676">len</span><span class="op" id="1681679">(</span><span class="ident" id="1681680">a</span><span class="op" id="1681681">.</span><span class="ident" id="1681682">d</span><span class="op" id="1681683">)</span>&nbsp;<span class="op" id="1681685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681690">a</span><span class="op" id="1681691">.</span><span class="ident" id="1681692">d</span><span class="op" id="1681693">[</span><span class="ident" id="1681694">w</span><span class="op" id="1681695">]</span>&nbsp;<span class="op" id="1681697">=</span>&nbsp;<span class="builtintype" id="1681699">byte</span><span class="op" id="1681703">(</span><span class="ident" id="1681704">rem</span>&nbsp;<span class="op" id="1681708">+</span>&nbsp;<span class="string" id="1681710">&#39;0&#39;</span><span class="op" id="1681713">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681717">}</span>&nbsp;<span class="keyword" id="1681719">else</span>&nbsp;<span class="keyword" id="1681724">if</span>&nbsp;<span class="ident" id="1681727">rem</span>&nbsp;<span class="op" id="1681731">!=</span>&nbsp;<span class="num" id="1681734">0</span>&nbsp;<span class="op" id="1681736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681741">a</span><span class="op" id="1681742">.</span><span class="ident" id="1681743">trunc</span>&nbsp;<span class="op" id="1681749">=</span>&nbsp;<span class="builtintype" id="1681751">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681762">n</span>&nbsp;<span class="op" id="1681764">=</span>&nbsp;<span class="ident" id="1681766">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681771">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1681775">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681802">for</span>&nbsp;<span class="ident" id="1681806">n</span>&nbsp;<span class="op" id="1681808">&gt;</span>&nbsp;<span class="num" id="1681810">0</span>&nbsp;<span class="op" id="1681812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681816">quo</span>&nbsp;<span class="op" id="1681820">:=</span>&nbsp;<span class="ident" id="1681823">n</span>&nbsp;<span class="op" id="1681825">/</span>&nbsp;<span class="num" id="1681827">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681832">rem</span>&nbsp;<span class="op" id="1681836">:=</span>&nbsp;<span class="ident" id="1681839">n</span>&nbsp;<span class="op" id="1681841">-</span>&nbsp;<span class="num" id="1681843">10</span><span class="op" id="1681845">*</span><span class="ident" id="1681846">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681852">w</span><span class="op" id="1681853">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681858">if</span>&nbsp;<span class="ident" id="1681861">w</span>&nbsp;<span class="op" id="1681863">&lt;</span>&nbsp;<span class="builtinfunc" id="1681865">len</span><span class="op" id="1681868">(</span><span class="ident" id="1681869">a</span><span class="op" id="1681870">.</span><span class="ident" id="1681871">d</span><span class="op" id="1681872">)</span>&nbsp;<span class="op" id="1681874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681879">a</span><span class="op" id="1681880">.</span><span class="ident" id="1681881">d</span><span class="op" id="1681882">[</span><span class="ident" id="1681883">w</span><span class="op" id="1681884">]</span>&nbsp;<span class="op" id="1681886">=</span>&nbsp;<span class="builtintype" id="1681888">byte</span><span class="op" id="1681892">(</span><span class="ident" id="1681893">rem</span>&nbsp;<span class="op" id="1681897">+</span>&nbsp;<span class="string" id="1681899">&#39;0&#39;</span><span class="op" id="1681902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681906">}</span>&nbsp;<span class="keyword" id="1681908">else</span>&nbsp;<span class="keyword" id="1681913">if</span>&nbsp;<span class="ident" id="1681916">rem</span>&nbsp;<span class="op" id="1681920">!=</span>&nbsp;<span class="num" id="1681923">0</span>&nbsp;<span class="op" id="1681925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681930">a</span><span class="op" id="1681931">.</span><span class="ident" id="1681932">trunc</span>&nbsp;<span class="op" id="1681938">=</span>&nbsp;<span class="builtintype" id="1681940">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681951">n</span>&nbsp;<span class="op" id="1681953">=</span>&nbsp;<span class="ident" id="1681955">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1681960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1681964">a</span><span class="op" id="1681965">.</span><span class="ident" id="1681966">nd</span>&nbsp;<span class="op" id="1681969">+=</span>&nbsp;<span class="ident" id="1681972">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1681979">if</span>&nbsp;<span class="ident" id="1681982">a</span><span class="op" id="1681983">.</span><span class="ident" id="1681984">nd</span>&nbsp;<span class="op" id="1681987">&gt;=</span>&nbsp;<span class="builtinfunc" id="1681990">len</span><span class="op" id="1681993">(</span><span class="ident" id="1681994">a</span><span class="op" id="1681995">.</span><span class="ident" id="1681996">d</span><span class="op" id="1681997">)</span>&nbsp;<span class="op" id="1681999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682003">a</span><span class="op" id="1682004">.</span><span class="ident" id="1682005">nd</span>&nbsp;<span class="op" id="1682008">=</span>&nbsp;<span class="builtinfunc" id="1682010">len</span><span class="op" id="1682013">(</span><span class="ident" id="1682014">a</span><span class="op" id="1682015">.</span><span class="ident" id="1682016">d</span><span class="op" id="1682017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682023">a</span><span class="op" id="1682024">.</span><span class="ident" id="1682025">dp</span>&nbsp;<span class="op" id="1682028">+=</span>&nbsp;<span class="ident" id="1682031">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682038">trim</span><span class="op" id="1682042">(</span><span class="ident" id="1682043">a</span><span class="op" id="1682044">)</span><br>
<span class="lineno">275</span><span class="op" id="1682046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1682049">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="1682096">func</span>&nbsp;<span class="op" id="1682101">(</span><span class="ident" id="1682102">a</span>&nbsp;<span class="op" id="1682104">*</span><span class="ident" id="1682105">decimal</span><span class="op" id="1682112">)</span>&nbsp;<span class="ident" id="1682114">Shift</span><span class="op" id="1682119">(</span><span class="ident" id="1682120">k</span>&nbsp;<span class="builtintype" id="1682122">int</span><span class="op" id="1682125">)</span>&nbsp;<span class="op" id="1682127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682130">switch</span>&nbsp;<span class="op" id="1682137">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682140">case</span>&nbsp;<span class="ident" id="1682145">a</span><span class="op" id="1682146">.</span><span class="ident" id="1682147">nd</span>&nbsp;<span class="op" id="1682150">==</span>&nbsp;<span class="num" id="1682153">0</span><span class="op" id="1682154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1682158">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682184">case</span>&nbsp;<span class="ident" id="1682189">k</span>&nbsp;<span class="op" id="1682191">&gt;</span>&nbsp;<span class="num" id="1682193">0</span><span class="op" id="1682194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682198">for</span>&nbsp;<span class="ident" id="1682202">k</span>&nbsp;<span class="op" id="1682204">&gt;</span>&nbsp;<span class="ident" id="1682206">maxShift</span>&nbsp;<span class="op" id="1682215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682220">leftShift</span><span class="op" id="1682229">(</span><span class="ident" id="1682230">a</span><span class="op" id="1682231">,</span>&nbsp;<span class="ident" id="1682233">maxShift</span><span class="op" id="1682241">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682246">k</span>&nbsp;<span class="op" id="1682248">-=</span>&nbsp;<span class="ident" id="1682251">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682266">leftShift</span><span class="op" id="1682275">(</span><span class="ident" id="1682276">a</span><span class="op" id="1682277">,</span>&nbsp;<span class="builtintype" id="1682279">uint</span><span class="op" id="1682283">(</span><span class="ident" id="1682284">k</span><span class="op" id="1682285">)</span><span class="op" id="1682286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682289">case</span>&nbsp;<span class="ident" id="1682294">k</span>&nbsp;<span class="op" id="1682296">&lt;</span>&nbsp;<span class="num" id="1682298">0</span><span class="op" id="1682299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682303">for</span>&nbsp;<span class="ident" id="1682307">k</span>&nbsp;<span class="op" id="1682309">&lt;</span>&nbsp;<span class="op" id="1682311">-</span><span class="ident" id="1682312">maxShift</span>&nbsp;<span class="op" id="1682321">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682326">rightShift</span><span class="op" id="1682336">(</span><span class="ident" id="1682337">a</span><span class="op" id="1682338">,</span>&nbsp;<span class="ident" id="1682340">maxShift</span><span class="op" id="1682348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682353">k</span>&nbsp;<span class="op" id="1682355">+=</span>&nbsp;<span class="ident" id="1682358">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1682373">rightShift</span><span class="op" id="1682383">(</span><span class="ident" id="1682384">a</span><span class="op" id="1682385">,</span>&nbsp;<span class="builtintype" id="1682387">uint</span><span class="op" id="1682391">(</span><span class="op" id="1682392">-</span><span class="ident" id="1682393">k</span><span class="op" id="1682394">)</span><span class="op" id="1682395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682398">}</span><br>
<span class="lineno">295</span><span class="op" id="1682400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1682403">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="1682453">func</span>&nbsp;<span class="ident" id="1682458">shouldRoundUp</span><span class="op" id="1682471">(</span><span class="ident" id="1682472">a</span>&nbsp;<span class="op" id="1682474">*</span><span class="ident" id="1682475">decimal</span><span class="op" id="1682482">,</span>&nbsp;<span class="ident" id="1682484">nd</span>&nbsp;<span class="builtintype" id="1682487">int</span><span class="op" id="1682490">)</span>&nbsp;<span class="builtintype" id="1682492">bool</span>&nbsp;<span class="op" id="1682497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682500">if</span>&nbsp;<span class="ident" id="1682503">nd</span>&nbsp;<span class="op" id="1682506">&lt;</span>&nbsp;<span class="num" id="1682508">0</span>&nbsp;<span class="op" id="1682510">||</span>&nbsp;<span class="ident" id="1682513">nd</span>&nbsp;<span class="op" id="1682516">&gt;=</span>&nbsp;<span class="ident" id="1682519">a</span><span class="op" id="1682520">.</span><span class="ident" id="1682521">nd</span>&nbsp;<span class="op" id="1682524">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682528">return</span>&nbsp;<span class="builtintype" id="1682535">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682545">if</span>&nbsp;<span class="ident" id="1682548">a</span><span class="op" id="1682549">.</span><span class="ident" id="1682550">d</span><span class="op" id="1682551">[</span><span class="ident" id="1682552">nd</span><span class="op" id="1682554">]</span>&nbsp;<span class="op" id="1682556">==</span>&nbsp;<span class="string" id="1682559">&#39;5&#39;</span>&nbsp;<span class="op" id="1682563">&amp;&amp;</span>&nbsp;<span class="ident" id="1682566">nd</span><span class="op" id="1682568">+</span><span class="num" id="1682569">1</span>&nbsp;<span class="op" id="1682571">==</span>&nbsp;<span class="ident" id="1682574">a</span><span class="op" id="1682575">.</span><span class="ident" id="1682576">nd</span>&nbsp;<span class="op" id="1682579">{</span>&nbsp;<span class="comment" id="1682581">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1682618">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682695">if</span>&nbsp;<span class="ident" id="1682698">a</span><span class="op" id="1682699">.</span><span class="ident" id="1682700">trunc</span>&nbsp;<span class="op" id="1682706">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682711">return</span>&nbsp;<span class="builtintype" id="1682718">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682729">return</span>&nbsp;<span class="ident" id="1682736">nd</span>&nbsp;<span class="op" id="1682739">&gt;</span>&nbsp;<span class="num" id="1682741">0</span>&nbsp;<span class="op" id="1682743">&amp;&amp;</span>&nbsp;<span class="op" id="1682746">(</span><span class="ident" id="1682747">a</span><span class="op" id="1682748">.</span><span class="ident" id="1682749">d</span><span class="op" id="1682750">[</span><span class="ident" id="1682751">nd</span><span class="op" id="1682753">-</span><span class="num" id="1682754">1</span><span class="op" id="1682755">]</span><span class="op" id="1682756">-</span><span class="string" id="1682757">&#39;0&#39;</span><span class="op" id="1682760">)</span><span class="op" id="1682761">%</span><span class="num" id="1682762">2</span>&nbsp;<span class="op" id="1682764">!=</span>&nbsp;<span class="num" id="1682767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1682770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1682773">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1682807">return</span>&nbsp;<span class="ident" id="1682814">a</span><span class="op" id="1682815">.</span><span class="ident" id="1682816">d</span><span class="op" id="1682817">[</span><span class="ident" id="1682818">nd</span><span class="op" id="1682820">]</span>&nbsp;<span class="op" id="1682822">&gt;=</span>&nbsp;<span class="string" id="1682825">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="1682829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1682832">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="1682868">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="1682910">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1682951">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="1682967">func</span>&nbsp;<span class="op" id="1682972">(</span><span class="ident" id="1682973">a</span>&nbsp;<span class="op" id="1682975">*</span><span class="ident" id="1682976">decimal</span><span class="op" id="1682983">)</span>&nbsp;<span class="ident" id="1682985">Round</span><span class="op" id="1682990">(</span><span class="ident" id="1682991">nd</span>&nbsp;<span class="builtintype" id="1682994">int</span><span class="op" id="1682997">)</span>&nbsp;<span class="op" id="1682999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683002">if</span>&nbsp;<span class="ident" id="1683005">nd</span>&nbsp;<span class="op" id="1683008">&lt;</span>&nbsp;<span class="num" id="1683010">0</span>&nbsp;<span class="op" id="1683012">||</span>&nbsp;<span class="ident" id="1683015">nd</span>&nbsp;<span class="op" id="1683018">&gt;=</span>&nbsp;<span class="ident" id="1683021">a</span><span class="op" id="1683022">.</span><span class="ident" id="1683023">nd</span>&nbsp;<span class="op" id="1683026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683030">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683041">if</span>&nbsp;<span class="ident" id="1683044">shouldRoundUp</span><span class="op" id="1683057">(</span><span class="ident" id="1683058">a</span><span class="op" id="1683059">,</span>&nbsp;<span class="ident" id="1683061">nd</span><span class="op" id="1683063">)</span>&nbsp;<span class="op" id="1683065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683069">a</span><span class="op" id="1683070">.</span><span class="ident" id="1683071">RoundUp</span><span class="op" id="1683078">(</span><span class="ident" id="1683079">nd</span><span class="op" id="1683081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683084">}</span>&nbsp;<span class="keyword" id="1683086">else</span>&nbsp;<span class="op" id="1683091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683095">a</span><span class="op" id="1683096">.</span><span class="ident" id="1683097">RoundDown</span><span class="op" id="1683106">(</span><span class="ident" id="1683107">nd</span><span class="op" id="1683109">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683112">}</span><br>
<span class="lineno"></span><span class="op" id="1683114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1683117">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="1683158">func</span>&nbsp;<span class="op" id="1683163">(</span><span class="ident" id="1683164">a</span>&nbsp;<span class="op" id="1683166">*</span><span class="ident" id="1683167">decimal</span><span class="op" id="1683174">)</span>&nbsp;<span class="ident" id="1683176">RoundDown</span><span class="op" id="1683185">(</span><span class="ident" id="1683186">nd</span>&nbsp;<span class="builtintype" id="1683189">int</span><span class="op" id="1683192">)</span>&nbsp;<span class="op" id="1683194">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683197">if</span>&nbsp;<span class="ident" id="1683200">nd</span>&nbsp;<span class="op" id="1683203">&lt;</span>&nbsp;<span class="num" id="1683205">0</span>&nbsp;<span class="op" id="1683207">||</span>&nbsp;<span class="ident" id="1683210">nd</span>&nbsp;<span class="op" id="1683213">&gt;=</span>&nbsp;<span class="ident" id="1683216">a</span><span class="op" id="1683217">.</span><span class="ident" id="1683218">nd</span>&nbsp;<span class="op" id="1683221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683225">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683236">a</span><span class="op" id="1683237">.</span><span class="ident" id="1683238">nd</span>&nbsp;<span class="op" id="1683241">=</span>&nbsp;<span class="ident" id="1683243">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683247">trim</span><span class="op" id="1683251">(</span><span class="ident" id="1683252">a</span><span class="op" id="1683253">)</span><br>
<span class="lineno">335</span><span class="op" id="1683255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1683258">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="1683297">func</span>&nbsp;<span class="op" id="1683302">(</span><span class="ident" id="1683303">a</span>&nbsp;<span class="op" id="1683305">*</span><span class="ident" id="1683306">decimal</span><span class="op" id="1683313">)</span>&nbsp;<span class="ident" id="1683315">RoundUp</span><span class="op" id="1683322">(</span><span class="ident" id="1683323">nd</span>&nbsp;<span class="builtintype" id="1683326">int</span><span class="op" id="1683329">)</span>&nbsp;<span class="op" id="1683331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683334">if</span>&nbsp;<span class="ident" id="1683337">nd</span>&nbsp;<span class="op" id="1683340">&lt;</span>&nbsp;<span class="num" id="1683342">0</span>&nbsp;<span class="op" id="1683344">||</span>&nbsp;<span class="ident" id="1683347">nd</span>&nbsp;<span class="op" id="1683350">&gt;=</span>&nbsp;<span class="ident" id="1683353">a</span><span class="op" id="1683354">.</span><span class="ident" id="1683355">nd</span>&nbsp;<span class="op" id="1683358">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683362">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1683374">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683387">for</span>&nbsp;<span class="ident" id="1683391">i</span>&nbsp;<span class="op" id="1683393">:=</span>&nbsp;<span class="ident" id="1683396">nd</span>&nbsp;<span class="op" id="1683399">-</span>&nbsp;<span class="num" id="1683401">1</span><span class="op" id="1683402">;</span>&nbsp;<span class="ident" id="1683404">i</span>&nbsp;<span class="op" id="1683406">&gt;=</span>&nbsp;<span class="num" id="1683409">0</span><span class="op" id="1683410">;</span>&nbsp;<span class="ident" id="1683412">i</span><span class="op" id="1683413">--</span>&nbsp;<span class="op" id="1683416">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683420">c</span>&nbsp;<span class="op" id="1683422">:=</span>&nbsp;<span class="ident" id="1683425">a</span><span class="op" id="1683426">.</span><span class="ident" id="1683427">d</span><span class="op" id="1683428">[</span><span class="ident" id="1683429">i</span><span class="op" id="1683430">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683434">if</span>&nbsp;<span class="ident" id="1683437">c</span>&nbsp;<span class="op" id="1683439">&lt;</span>&nbsp;<span class="string" id="1683441">&#39;9&#39;</span>&nbsp;<span class="op" id="1683445">{</span>&nbsp;<span class="comment" id="1683447">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683479">a</span><span class="op" id="1683480">.</span><span class="ident" id="1683481">d</span><span class="op" id="1683482">[</span><span class="ident" id="1683483">i</span><span class="op" id="1683484">]</span><span class="op" id="1683485">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683491">a</span><span class="op" id="1683492">.</span><span class="ident" id="1683493">nd</span>&nbsp;<span class="op" id="1683496">=</span>&nbsp;<span class="ident" id="1683498">i</span>&nbsp;<span class="op" id="1683500">+</span>&nbsp;<span class="num" id="1683502">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683507">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1683523">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1683545">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683597">a</span><span class="op" id="1683598">.</span><span class="ident" id="1683599">d</span><span class="op" id="1683600">[</span><span class="num" id="1683601">0</span><span class="op" id="1683602">]</span>&nbsp;<span class="op" id="1683604">=</span>&nbsp;<span class="string" id="1683606">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683611">a</span><span class="op" id="1683612">.</span><span class="ident" id="1683613">nd</span>&nbsp;<span class="op" id="1683616">=</span>&nbsp;<span class="num" id="1683618">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683621">a</span><span class="op" id="1683622">.</span><span class="ident" id="1683623">dp</span><span class="op" id="1683625">++</span><br>
<span class="lineno"></span><span class="op" id="1683628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="1683631">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="1683679">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1683712">func</span>&nbsp;<span class="op" id="1683717">(</span><span class="ident" id="1683718">a</span>&nbsp;<span class="op" id="1683720">*</span><span class="ident" id="1683721">decimal</span><span class="op" id="1683728">)</span>&nbsp;<span class="ident" id="1683730">RoundedInteger</span><span class="op" id="1683744">(</span><span class="op" id="1683745">)</span>&nbsp;<span class="ident" id="1683747">uint64</span>&nbsp;<span class="op" id="1683754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683757">if</span>&nbsp;<span class="ident" id="1683760">a</span><span class="op" id="1683761">.</span><span class="ident" id="1683762">dp</span>&nbsp;<span class="op" id="1683765">&gt;</span>&nbsp;<span class="num" id="1683767">20</span>&nbsp;<span class="op" id="1683770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683774">return</span>&nbsp;<span class="num" id="1683781">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683804">var</span>&nbsp;<span class="ident" id="1683808">i</span>&nbsp;<span class="builtintype" id="1683810">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683815">n</span>&nbsp;<span class="op" id="1683817">:=</span>&nbsp;<span class="ident" id="1683820">uint64</span><span class="op" id="1683826">(</span><span class="num" id="1683827">0</span><span class="op" id="1683828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683831">for</span>&nbsp;<span class="ident" id="1683835">i</span>&nbsp;<span class="op" id="1683837">=</span>&nbsp;<span class="num" id="1683839">0</span><span class="op" id="1683840">;</span>&nbsp;<span class="ident" id="1683842">i</span>&nbsp;<span class="op" id="1683844">&lt;</span>&nbsp;<span class="ident" id="1683846">a</span><span class="op" id="1683847">.</span><span class="ident" id="1683848">dp</span>&nbsp;<span class="op" id="1683851">&amp;&amp;</span>&nbsp;<span class="ident" id="1683854">i</span>&nbsp;<span class="op" id="1683856">&lt;</span>&nbsp;<span class="ident" id="1683858">a</span><span class="op" id="1683859">.</span><span class="ident" id="1683860">nd</span><span class="op" id="1683862">;</span>&nbsp;<span class="ident" id="1683864">i</span><span class="op" id="1683865">++</span>&nbsp;<span class="op" id="1683868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683872">n</span>&nbsp;<span class="op" id="1683874">=</span>&nbsp;<span class="ident" id="1683876">n</span><span class="op" id="1683877">*</span><span class="num" id="1683878">10</span>&nbsp;<span class="op" id="1683881">+</span>&nbsp;<span class="ident" id="1683883">uint64</span><span class="op" id="1683889">(</span><span class="ident" id="1683890">a</span><span class="op" id="1683891">.</span><span class="ident" id="1683892">d</span><span class="op" id="1683893">[</span><span class="ident" id="1683894">i</span><span class="op" id="1683895">]</span><span class="op" id="1683896">-</span><span class="string" id="1683897">&#39;0&#39;</span><span class="op" id="1683900">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683906">for</span>&nbsp;<span class="op" id="1683910">;</span>&nbsp;<span class="ident" id="1683912">i</span>&nbsp;<span class="op" id="1683914">&lt;</span>&nbsp;<span class="ident" id="1683916">a</span><span class="op" id="1683917">.</span><span class="ident" id="1683918">dp</span><span class="op" id="1683920">;</span>&nbsp;<span class="ident" id="1683922">i</span><span class="op" id="1683923">++</span>&nbsp;<span class="op" id="1683926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683930">n</span>&nbsp;<span class="op" id="1683932">*=</span>&nbsp;<span class="num" id="1683935">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683942">if</span>&nbsp;<span class="ident" id="1683945">shouldRoundUp</span><span class="op" id="1683958">(</span><span class="ident" id="1683959">a</span><span class="op" id="1683960">,</span>&nbsp;<span class="ident" id="1683962">a</span><span class="op" id="1683963">.</span><span class="ident" id="1683964">dp</span><span class="op" id="1683966">)</span>&nbsp;<span class="op" id="1683968">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1683972">n</span><span class="op" id="1683973">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1683977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1683980">return</span>&nbsp;<span class="ident" id="1683987">n</span><br>
<span class="lineno"></span><span class="op" id="1683989">}</span>
</div>
</body>
</html>
