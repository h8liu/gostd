<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html" class="current">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4125762">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4125818">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4125872">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4125923">package</span>&nbsp;<span class="ident" id="4125931">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4125937">import</span>&nbsp;<span class="op" id="4125944">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4125947">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4125953">&#34;net/textproto&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4125970">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4125978">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4125989">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4125997">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="4126004">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="4126007">var</span>&nbsp;<span class="ident" id="4126011">raceEnabled</span>&nbsp;<span class="op" id="4126023">=</span>&nbsp;<span class="builtintype" id="4126025">false</span>&nbsp;<span class="comment" id="4126031">//&nbsp;set&nbsp;by&nbsp;race.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4126050">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;the&nbsp;key-value&nbsp;pairs&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="4126112">type</span>&nbsp;<span class="ident" id="4126117">Header</span>&nbsp;<span class="keyword" id="4126124">map</span><span class="op" id="4126127">[</span><span class="builtintype" id="4126128">string</span><span class="op" id="4126134">]</span><span class="op" id="4126135">[</span><span class="op" id="4126136">]</span><span class="builtintype" id="4126137">string</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="4126145">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;key,&nbsp;value&nbsp;pair&nbsp;to&nbsp;the&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="4126192">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="4126250">func</span>&nbsp;<span class="op" id="4126255">(</span><span class="ident" id="4126256">h</span>&nbsp;<span class="ident" id="4126258"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4126264">)</span>&nbsp;<span class="ident" id="4126266">Add</span><span class="op" id="4126269">(</span><span class="ident" id="4126270">key</span><span class="op" id="4126273">,</span>&nbsp;<span class="ident" id="4126275">value</span>&nbsp;<span class="builtintype" id="4126281">string</span><span class="op" id="4126287">)</span>&nbsp;<span class="op" id="4126289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4126292"><a href="/gostd/net/http/header.go.html#4125953">textproto</a></span><span class="op" id="4126301">.</span><span class="ident" id="4126302"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="4126312">(</span><span class="ident" id="4126313"><a href="/gostd/net/http/header.go.html#4126256">h</a></span><span class="op" id="4126314">)</span><span class="op" id="4126315">.</span><span class="ident" id="4126316"><a href="/gostd/net/textproto/header.go.html#4328783">Add</a></span><span class="op" id="4126319">(</span><span class="ident" id="4126320"><a href="/gostd/net/http/header.go.html#4126270">key</a></span><span class="op" id="4126323">,</span>&nbsp;<span class="ident" id="4126325"><a href="/gostd/net/http/header.go.html#4126275">value</a></span><span class="op" id="4126330">)</span><br>
<span class="lineno">25</span><span class="op" id="4126332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4126335">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;header&nbsp;entries&nbsp;associated&nbsp;with&nbsp;key&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4126389">//&nbsp;the&nbsp;single&nbsp;element&nbsp;value.&nbsp;&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="4126444">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno">30</span><span class="keyword" id="4126475">func</span>&nbsp;<span class="op" id="4126480">(</span><span class="ident" id="4126481">h</span>&nbsp;<span class="ident" id="4126483"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4126489">)</span>&nbsp;<span class="ident" id="4126491">Set</span><span class="op" id="4126494">(</span><span class="ident" id="4126495">key</span><span class="op" id="4126498">,</span>&nbsp;<span class="ident" id="4126500">value</span>&nbsp;<span class="builtintype" id="4126506">string</span><span class="op" id="4126512">)</span>&nbsp;<span class="op" id="4126514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4126517"><a href="/gostd/net/http/header.go.html#4125953">textproto</a></span><span class="op" id="4126526">.</span><span class="ident" id="4126527"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="4126537">(</span><span class="ident" id="4126538"><a href="/gostd/net/http/header.go.html#4126481">h</a></span><span class="op" id="4126539">)</span><span class="op" id="4126540">.</span><span class="ident" id="4126541"><a href="/gostd/net/textproto/header.go.html#4329038">Set</a></span><span class="op" id="4126544">(</span><span class="ident" id="4126545"><a href="/gostd/net/http/header.go.html#4126495">key</a></span><span class="op" id="4126548">,</span>&nbsp;<span class="ident" id="4126550"><a href="/gostd/net/http/header.go.html#4126500">value</a></span><span class="op" id="4126555">)</span><br>
<span class="lineno"></span><span class="op" id="4126557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4126560">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno">35</span><span class="comment" id="4126619">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4126686">//&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values&nbsp;of&nbsp;a&nbsp;key,&nbsp;access&nbsp;the&nbsp;map&nbsp;directly</span><br>
<span class="lineno"></span><span class="comment" id="4126749">//&nbsp;with&nbsp;CanonicalHeaderKey.</span><br>
<span class="lineno"></span><span class="keyword" id="4126777">func</span>&nbsp;<span class="op" id="4126782">(</span><span class="ident" id="4126783">h</span>&nbsp;<span class="ident" id="4126785"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4126791">)</span>&nbsp;<span class="ident" id="4126793">Get</span><span class="op" id="4126796">(</span><span class="ident" id="4126797">key</span>&nbsp;<span class="builtintype" id="4126801">string</span><span class="op" id="4126807">)</span>&nbsp;<span class="builtintype" id="4126809">string</span>&nbsp;<span class="op" id="4126816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4126819">return</span>&nbsp;<span class="ident" id="4126826"><a href="/gostd/net/http/header.go.html#4125953">textproto</a></span><span class="op" id="4126835">.</span><span class="ident" id="4126836"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="4126846">(</span><span class="ident" id="4126847"><a href="/gostd/net/http/header.go.html#4126783">h</a></span><span class="op" id="4126848">)</span><span class="op" id="4126849">.</span><span class="ident" id="4126850"><a href="/gostd/net/textproto/header.go.html#4329349">Get</a></span><span class="op" id="4126853">(</span><span class="ident" id="4126854"><a href="/gostd/net/http/header.go.html#4126797">key</a></span><span class="op" id="4126857">)</span><br>
<span class="lineno">40</span><span class="op" id="4126859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4126862">//&nbsp;get&nbsp;is&nbsp;like&nbsp;Get,&nbsp;but&nbsp;key&nbsp;must&nbsp;already&nbsp;be&nbsp;in&nbsp;CanonicalHeaderKey&nbsp;form.</span><br>
<span class="lineno"></span><span class="keyword" id="4126934">func</span>&nbsp;<span class="op" id="4126939">(</span><span class="ident" id="4126940">h</span>&nbsp;<span class="ident" id="4126942"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4126948">)</span>&nbsp;<span class="ident" id="4126950">get</span><span class="op" id="4126953">(</span><span class="ident" id="4126954">key</span>&nbsp;<span class="builtintype" id="4126958">string</span><span class="op" id="4126964">)</span>&nbsp;<span class="builtintype" id="4126966">string</span>&nbsp;<span class="op" id="4126973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4126976">if</span>&nbsp;<span class="ident" id="4126979">v</span>&nbsp;<span class="op" id="4126981">:=</span>&nbsp;<span class="ident" id="4126984"><a href="/gostd/net/http/header.go.html#4126940">h</a></span><span class="op" id="4126985">[</span><span class="ident" id="4126986"><a href="/gostd/net/http/header.go.html#4126954">key</a></span><span class="op" id="4126989">]</span><span class="op" id="4126990">;</span>&nbsp;<span class="builtinfunc" id="4126992">len</span><span class="op" id="4126995">(</span><span class="ident" id="4126996"><a href="/gostd/net/http/header.go.html#4126979">v</a></span><span class="op" id="4126997">)</span>&nbsp;<span class="op" id="4126999">&gt;</span>&nbsp;<span class="num" id="4127001">0</span>&nbsp;<span class="op" id="4127003">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127007">return</span>&nbsp;<span class="ident" id="4127014"><a href="/gostd/net/http/header.go.html#4126979">v</a></span><span class="op" id="4127015">[</span><span class="num" id="4127016">0</span><span class="op" id="4127017">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4127020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127023">return</span>&nbsp;<span class="string" id="4127030">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4127033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4127036">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="4127083">func</span>&nbsp;<span class="op" id="4127088">(</span><span class="ident" id="4127089">h</span>&nbsp;<span class="ident" id="4127091"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4127097">)</span>&nbsp;<span class="ident" id="4127099">Del</span><span class="op" id="4127102">(</span><span class="ident" id="4127103">key</span>&nbsp;<span class="builtintype" id="4127107">string</span><span class="op" id="4127113">)</span>&nbsp;<span class="op" id="4127115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127118"><a href="/gostd/net/http/header.go.html#4125953">textproto</a></span><span class="op" id="4127127">.</span><span class="ident" id="4127128"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="4127138">(</span><span class="ident" id="4127139"><a href="/gostd/net/http/header.go.html#4127089">h</a></span><span class="op" id="4127140">)</span><span class="op" id="4127141">.</span><span class="ident" id="4127142"><a href="/gostd/net/textproto/header.go.html#4329557">Del</a></span><span class="op" id="4127145">(</span><span class="ident" id="4127146"><a href="/gostd/net/http/header.go.html#4127103">key</a></span><span class="op" id="4127149">)</span><br>
<span class="lineno"></span><span class="op" id="4127151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="4127154">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="4127195">func</span>&nbsp;<span class="op" id="4127200">(</span><span class="ident" id="4127201">h</span>&nbsp;<span class="ident" id="4127203"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4127209">)</span>&nbsp;<span class="ident" id="4127211">Write</span><span class="op" id="4127216">(</span><span class="ident" id="4127217">w</span>&nbsp;<span class="ident" id="4127219"><a href="/gostd/net/http/header.go.html#4125947">io</a></span><span class="op" id="4127221">.</span><span class="ident" id="4127222"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4127228">)</span>&nbsp;<span class="builtintype" id="4127230">error</span>&nbsp;<span class="op" id="4127236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127239">return</span>&nbsp;<span class="ident" id="4127246"><a href="/gostd/net/http/header.go.html#4127201">h</a></span><span class="op" id="4127247">.</span><span class="ident" id="4127248"><a href="/gostd/net/http/header.go.html#4129454">WriteSubset</a></span><span class="op" id="4127259">(</span><span class="ident" id="4127260"><a href="/gostd/net/http/header.go.html#4127217">w</a></span><span class="op" id="4127261">,</span>&nbsp;<span class="builtintype" id="4127263">nil</span><span class="op" id="4127266">)</span><br>
<span class="lineno"></span><span class="op" id="4127268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4127271">func</span>&nbsp;<span class="op" id="4127276">(</span><span class="ident" id="4127277">h</span>&nbsp;<span class="ident" id="4127279"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4127285">)</span>&nbsp;<span class="ident" id="4127287">clone</span><span class="op" id="4127292">(</span><span class="op" id="4127293">)</span>&nbsp;<span class="ident" id="4127295"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span>&nbsp;<span class="op" id="4127302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127305">h2</span>&nbsp;<span class="op" id="4127308">:=</span>&nbsp;<span class="builtinfunc" id="4127311">make</span><span class="op" id="4127315">(</span><span class="ident" id="4127316"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4127322">,</span>&nbsp;<span class="builtinfunc" id="4127324">len</span><span class="op" id="4127327">(</span><span class="ident" id="4127328"><a href="/gostd/net/http/header.go.html#4127277">h</a></span><span class="op" id="4127329">)</span><span class="op" id="4127330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127333">for</span>&nbsp;<span class="ident" id="4127337">k</span><span class="op" id="4127338">,</span>&nbsp;<span class="ident" id="4127340">vv</span>&nbsp;<span class="op" id="4127343">:=</span>&nbsp;<span class="keyword" id="4127346">range</span>&nbsp;<span class="ident" id="4127352"><a href="/gostd/net/http/header.go.html#4127277">h</a></span>&nbsp;<span class="op" id="4127354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127358">vv2</span>&nbsp;<span class="op" id="4127362">:=</span>&nbsp;<span class="builtinfunc" id="4127365">make</span><span class="op" id="4127369">(</span><span class="op" id="4127370">[</span><span class="op" id="4127371">]</span><span class="builtintype" id="4127372">string</span><span class="op" id="4127378">,</span>&nbsp;<span class="builtinfunc" id="4127380">len</span><span class="op" id="4127383">(</span><span class="ident" id="4127384"><a href="/gostd/net/http/header.go.html#4127340">vv</a></span><span class="op" id="4127386">)</span><span class="op" id="4127387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4127391">copy</span><span class="op" id="4127395">(</span><span class="ident" id="4127396"><a href="/gostd/net/http/header.go.html#4127358">vv2</a></span><span class="op" id="4127399">,</span>&nbsp;<span class="ident" id="4127401"><a href="/gostd/net/http/header.go.html#4127340">vv</a></span><span class="op" id="4127403">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127407"><a href="/gostd/net/http/header.go.html#4127305">h2</a></span><span class="op" id="4127409">[</span><span class="ident" id="4127410"><a href="/gostd/net/http/header.go.html#4127337">k</a></span><span class="op" id="4127411">]</span>&nbsp;<span class="op" id="4127413">=</span>&nbsp;<span class="ident" id="4127415"><a href="/gostd/net/http/header.go.html#4127358">vv2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4127420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127423">return</span>&nbsp;<span class="ident" id="4127430"><a href="/gostd/net/http/header.go.html#4127305">h2</a></span><br>
<span class="lineno"></span><span class="op" id="4127433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="4127436">var</span>&nbsp;<span class="ident" id="4127440">timeFormats</span>&nbsp;<span class="op" id="4127452">=</span>&nbsp;<span class="op" id="4127454">[</span><span class="op" id="4127455">]</span><span class="builtintype" id="4127456">string</span><span class="op" id="4127462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127465"><a href="/gostd/net/http/server.go.html#4184253">TimeFormat</a></span><span class="op" id="4127475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127478"><a href="/gostd/net/http/header.go.html#4125997">time</a></span><span class="op" id="4127482">.</span><span class="ident" id="4127483"><a href="/gostd/time/format.go.html#2680361">RFC850</a></span><span class="op" id="4127489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127492"><a href="/gostd/net/http/header.go.html#4125997">time</a></span><span class="op" id="4127496">.</span><span class="ident" id="4127497"><a href="/gostd/time/format.go.html#2680121">ANSIC</a></span><span class="op" id="4127502">,</span><br>
<span class="lineno"></span><span class="op" id="4127504">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4127507">//&nbsp;ParseTime&nbsp;parses&nbsp;a&nbsp;time&nbsp;header&nbsp;(such&nbsp;as&nbsp;the&nbsp;Date:&nbsp;header),</span><br>
<span class="lineno"></span><span class="comment" id="4127569">//&nbsp;trying&nbsp;each&nbsp;of&nbsp;the&nbsp;three&nbsp;formats&nbsp;allowed&nbsp;by&nbsp;HTTP/1.1:</span><br>
<span class="lineno"></span><span class="comment" id="4127626">//&nbsp;TimeFormat,&nbsp;time.RFC850,&nbsp;and&nbsp;time.ANSIC.</span><br>
<span class="lineno"></span><span class="keyword" id="4127670">func</span>&nbsp;<span class="ident" id="4127675">ParseTime</span><span class="op" id="4127684">(</span><span class="ident" id="4127685">text</span>&nbsp;<span class="builtintype" id="4127690">string</span><span class="op" id="4127696">)</span>&nbsp;<span class="op" id="4127698">(</span><span class="ident" id="4127699">t</span>&nbsp;<span class="ident" id="4127701"><a href="/gostd/net/http/header.go.html#4125997">time</a></span><span class="op" id="4127705">.</span><span class="ident" id="4127706"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="4127710">,</span>&nbsp;<span class="ident" id="4127712">err</span>&nbsp;<span class="builtintype" id="4127716">error</span><span class="op" id="4127721">)</span>&nbsp;<span class="op" id="4127723">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127726">for</span>&nbsp;<span class="ident" id="4127730">_</span><span class="op" id="4127731">,</span>&nbsp;<span class="ident" id="4127733">layout</span>&nbsp;<span class="op" id="4127740">:=</span>&nbsp;<span class="keyword" id="4127743">range</span>&nbsp;<span class="ident" id="4127749"><a href="/gostd/net/http/header.go.html#4127440">timeFormats</a></span>&nbsp;<span class="op" id="4127761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127765"><a href="/gostd/net/http/header.go.html#4127699">t</a></span><span class="op" id="4127766">,</span>&nbsp;<span class="ident" id="4127768"><a href="/gostd/net/http/header.go.html#4127712">err</a></span>&nbsp;<span class="op" id="4127772">=</span>&nbsp;<span class="ident" id="4127774"><a href="/gostd/net/http/header.go.html#4125997">time</a></span><span class="op" id="4127778">.</span><span class="ident" id="4127779"><a href="/gostd/time/format.go.html#2699353">Parse</a></span><span class="op" id="4127784">(</span><span class="ident" id="4127785"><a href="/gostd/net/http/header.go.html#4127733">layout</a></span><span class="op" id="4127791">,</span>&nbsp;<span class="ident" id="4127793"><a href="/gostd/net/http/header.go.html#4127685">text</a></span><span class="op" id="4127797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127801">if</span>&nbsp;<span class="ident" id="4127804"><a href="/gostd/net/http/header.go.html#4127712">err</a></span>&nbsp;<span class="op" id="4127808">==</span>&nbsp;<span class="builtintype" id="4127811">nil</span>&nbsp;<span class="op" id="4127815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127820">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4127829">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4127832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4127835">return</span><br>
<span class="lineno"></span><span class="op" id="4127842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4127845">var</span>&nbsp;<span class="ident" id="4127849">headerNewlineToSpace</span>&nbsp;<span class="op" id="4127870">=</span>&nbsp;<span class="ident" id="4127872"><a href="/gostd/net/http/header.go.html#4125978">strings</a></span><span class="op" id="4127879">.</span><span class="ident" id="4127880"><a href="/gostd/strings/replace.go.html#2949056">NewReplacer</a></span><span class="op" id="4127891">(</span><span class="string" id="4127892">&#34;\n&#34;</span><span class="op" id="4127896">,</span>&nbsp;<span class="string" id="4127898">&#34;&nbsp;&#34;</span><span class="op" id="4127901">,</span>&nbsp;<span class="string" id="4127903">&#34;\r&#34;</span><span class="op" id="4127907">,</span>&nbsp;<span class="string" id="4127909">&#34;&nbsp;&#34;</span><span class="op" id="4127912">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="4127915">type</span>&nbsp;<span class="ident" id="4127920">writeStringer</span>&nbsp;<span class="keyword" id="4127934">interface</span>&nbsp;<span class="op" id="4127944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4127947">WriteString</span><span class="op" id="4127958">(</span><span class="builtintype" id="4127959">string</span><span class="op" id="4127965">)</span>&nbsp;<span class="op" id="4127967">(</span><span class="builtintype" id="4127968">int</span><span class="op" id="4127971">,</span>&nbsp;<span class="builtintype" id="4127973">error</span><span class="op" id="4127978">)</span><br>
<span class="lineno"></span><span class="op" id="4127980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="4127983">//&nbsp;stringWriter&nbsp;implements&nbsp;WriteString&nbsp;on&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="4128035">type</span>&nbsp;<span class="ident" id="4128040">stringWriter</span>&nbsp;<span class="keyword" id="4128053">struct</span>&nbsp;<span class="op" id="4128060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4128063">w</span>&nbsp;<span class="ident" id="4128065"><a href="/gostd/net/http/header.go.html#4125947">io</a></span><span class="op" id="4128067">.</span><span class="ident" id="4128068"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="4128075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="4128078">func</span>&nbsp;<span class="op" id="4128083">(</span><span class="ident" id="4128084">w</span>&nbsp;<span class="ident" id="4128086"><a href="/gostd/net/http/header.go.html#4128040">stringWriter</a></span><span class="op" id="4128098">)</span>&nbsp;<span class="ident" id="4128100">WriteString</span><span class="op" id="4128111">(</span><span class="ident" id="4128112">s</span>&nbsp;<span class="builtintype" id="4128114">string</span><span class="op" id="4128120">)</span>&nbsp;<span class="op" id="4128122">(</span><span class="ident" id="4128123">n</span>&nbsp;<span class="builtintype" id="4128125">int</span><span class="op" id="4128128">,</span>&nbsp;<span class="ident" id="4128130">err</span>&nbsp;<span class="builtintype" id="4128134">error</span><span class="op" id="4128139">)</span>&nbsp;<span class="op" id="4128141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4128144">return</span>&nbsp;<span class="ident" id="4128151"><a href="/gostd/net/http/header.go.html#4128084">w</a></span><span class="op" id="4128152">.</span><span class="ident" id="4128153"><a href="/gostd/net/http/header.go.html#4128063">w</a></span><span class="op" id="4128154">.</span><span class="ident" id="4128155"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4128160">(</span><span class="op" id="4128161">[</span><span class="op" id="4128162">]</span><span class="builtintype" id="4128163">byte</span><span class="op" id="4128167">(</span><span class="ident" id="4128168"><a href="/gostd/net/http/header.go.html#4128112">s</a></span><span class="op" id="4128169">)</span><span class="op" id="4128170">)</span><br>
<span class="lineno"></span><span class="op" id="4128172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4128175">type</span>&nbsp;<span class="ident" id="4128180">keyValues</span>&nbsp;<span class="keyword" id="4128190">struct</span>&nbsp;<span class="op" id="4128197">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4128200">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4128207">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4128215">values</span>&nbsp;<span class="op" id="4128222">[</span><span class="op" id="4128223">]</span><span class="builtintype" id="4128224">string</span><br>
<span class="lineno"></span><span class="op" id="4128231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4128234">//&nbsp;A&nbsp;headerSorter&nbsp;implements&nbsp;sort.Interface&nbsp;by&nbsp;sorting&nbsp;a&nbsp;[]keyValues</span><br>
<span class="lineno">110</span><span class="comment" id="4128303">//&nbsp;by&nbsp;key.&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;pointer,&nbsp;so&nbsp;it&nbsp;can&nbsp;fit&nbsp;in&nbsp;a&nbsp;sort.Interface</span><br>
<span class="lineno"></span><span class="comment" id="4128372">//&nbsp;interface&nbsp;value&nbsp;without&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="4128411">type</span>&nbsp;<span class="ident" id="4128416">headerSorter</span>&nbsp;<span class="keyword" id="4128429">struct</span>&nbsp;<span class="op" id="4128436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4128439">kvs</span>&nbsp;<span class="op" id="4128443">[</span><span class="op" id="4128444">]</span><span class="ident" id="4128445"><a href="/gostd/net/http/header.go.html#4128180">keyValues</a></span><br>
<span class="lineno"></span><span class="op" id="4128455">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="4128458">func</span>&nbsp;<span class="op" id="4128463">(</span><span class="ident" id="4128464">s</span>&nbsp;<span class="op" id="4128466">*</span><span class="ident" id="4128467"><a href="/gostd/net/http/header.go.html#4128416">headerSorter</a></span><span class="op" id="4128479">)</span>&nbsp;<span class="ident" id="4128481">Len</span><span class="op" id="4128484">(</span><span class="op" id="4128485">)</span>&nbsp;<span class="builtintype" id="4128487">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4128501">{</span>&nbsp;<span class="keyword" id="4128503">return</span>&nbsp;<span class="builtinfunc" id="4128510">len</span><span class="op" id="4128513">(</span><span class="ident" id="4128514"><a href="/gostd/net/http/header.go.html#4128464">s</a></span><span class="op" id="4128515">.</span><span class="ident" id="4128516"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128519">)</span>&nbsp;<span class="op" id="4128521">}</span><br>
<span class="lineno"></span><span class="keyword" id="4128523">func</span>&nbsp;<span class="op" id="4128528">(</span><span class="ident" id="4128529">s</span>&nbsp;<span class="op" id="4128531">*</span><span class="ident" id="4128532"><a href="/gostd/net/http/header.go.html#4128416">headerSorter</a></span><span class="op" id="4128544">)</span>&nbsp;<span class="ident" id="4128546">Swap</span><span class="op" id="4128550">(</span><span class="ident" id="4128551">i</span><span class="op" id="4128552">,</span>&nbsp;<span class="ident" id="4128554">j</span>&nbsp;<span class="builtintype" id="4128556">int</span><span class="op" id="4128559">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4128566">{</span>&nbsp;<span class="ident" id="4128568"><a href="/gostd/net/http/header.go.html#4128529">s</a></span><span class="op" id="4128569">.</span><span class="ident" id="4128570"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128573">[</span><span class="ident" id="4128574"><a href="/gostd/net/http/header.go.html#4128551">i</a></span><span class="op" id="4128575">]</span><span class="op" id="4128576">,</span>&nbsp;<span class="ident" id="4128578"><a href="/gostd/net/http/header.go.html#4128529">s</a></span><span class="op" id="4128579">.</span><span class="ident" id="4128580"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128583">[</span><span class="ident" id="4128584"><a href="/gostd/net/http/header.go.html#4128554">j</a></span><span class="op" id="4128585">]</span>&nbsp;<span class="op" id="4128587">=</span>&nbsp;<span class="ident" id="4128589"><a href="/gostd/net/http/header.go.html#4128529">s</a></span><span class="op" id="4128590">.</span><span class="ident" id="4128591"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128594">[</span><span class="ident" id="4128595"><a href="/gostd/net/http/header.go.html#4128554">j</a></span><span class="op" id="4128596">]</span><span class="op" id="4128597">,</span>&nbsp;<span class="ident" id="4128599"><a href="/gostd/net/http/header.go.html#4128529">s</a></span><span class="op" id="4128600">.</span><span class="ident" id="4128601"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128604">[</span><span class="ident" id="4128605"><a href="/gostd/net/http/header.go.html#4128551">i</a></span><span class="op" id="4128606">]</span>&nbsp;<span class="op" id="4128608">}</span><br>
<span class="lineno"></span><span class="keyword" id="4128610">func</span>&nbsp;<span class="op" id="4128615">(</span><span class="ident" id="4128616">s</span>&nbsp;<span class="op" id="4128618">*</span><span class="ident" id="4128619"><a href="/gostd/net/http/header.go.html#4128416">headerSorter</a></span><span class="op" id="4128631">)</span>&nbsp;<span class="ident" id="4128633">Less</span><span class="op" id="4128637">(</span><span class="ident" id="4128638">i</span><span class="op" id="4128639">,</span>&nbsp;<span class="ident" id="4128641">j</span>&nbsp;<span class="builtintype" id="4128643">int</span><span class="op" id="4128646">)</span>&nbsp;<span class="builtintype" id="4128648">bool</span>&nbsp;<span class="op" id="4128653">{</span>&nbsp;<span class="keyword" id="4128655">return</span>&nbsp;<span class="ident" id="4128662"><a href="/gostd/net/http/header.go.html#4128616">s</a></span><span class="op" id="4128663">.</span><span class="ident" id="4128664"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128667">[</span><span class="ident" id="4128668"><a href="/gostd/net/http/header.go.html#4128638">i</a></span><span class="op" id="4128669">]</span><span class="op" id="4128670">.</span><span class="ident" id="4128671"><a href="/gostd/net/http/header.go.html#4128200">key</a></span>&nbsp;<span class="op" id="4128675">&lt;</span>&nbsp;<span class="ident" id="4128677"><a href="/gostd/net/http/header.go.html#4128616">s</a></span><span class="op" id="4128678">.</span><span class="ident" id="4128679"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4128682">[</span><span class="ident" id="4128683"><a href="/gostd/net/http/header.go.html#4128641">j</a></span><span class="op" id="4128684">]</span><span class="op" id="4128685">.</span><span class="ident" id="4128686"><a href="/gostd/net/http/header.go.html#4128200">key</a></span>&nbsp;<span class="op" id="4128690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="4128693">var</span>&nbsp;<span class="ident" id="4128697">headerSorterPool</span>&nbsp;<span class="op" id="4128714">=</span>&nbsp;<span class="ident" id="4128716"><a href="/gostd/net/http/header.go.html#4125989">sync</a></span><span class="op" id="4128720">.</span><span class="ident" id="4128721"><a href="/gostd/sync/pool.go.html#1448866">Pool</a></span><span class="op" id="4128725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4128728"><a href="/gostd/sync/pool.go.html#1449180">New</a></span><span class="op" id="4128731">:</span>&nbsp;<span class="keyword" id="4128733">func</span><span class="op" id="4128737">(</span><span class="op" id="4128738">)</span>&nbsp;<span class="keyword" id="4128740">interface</span><span class="op" id="4128749">{</span><span class="op" id="4128750">}</span>&nbsp;<span class="op" id="4128752">{</span>&nbsp;<span class="keyword" id="4128754">return</span>&nbsp;<span class="builtinfunc" id="4128761">new</span><span class="op" id="4128764">(</span><span class="ident" id="4128765"><a href="/gostd/net/http/header.go.html#4128416">headerSorter</a></span><span class="op" id="4128777">)</span>&nbsp;<span class="op" id="4128779">}</span><span class="op" id="4128780">,</span><br>
<span class="lineno"></span><span class="op" id="4128782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4128785">//&nbsp;sortedKeyValues&nbsp;returns&nbsp;h&#39;s&nbsp;keys&nbsp;sorted&nbsp;in&nbsp;the&nbsp;returned&nbsp;kvs</span><br>
<span class="lineno">125</span><span class="comment" id="4128848">//&nbsp;slice.&nbsp;The&nbsp;headerSorter&nbsp;used&nbsp;to&nbsp;sort&nbsp;is&nbsp;also&nbsp;returned,&nbsp;for&nbsp;possible</span><br>
<span class="lineno"></span><span class="comment" id="4128919">//&nbsp;return&nbsp;to&nbsp;headerSorterCache.</span><br>
<span class="lineno"></span><span class="keyword" id="4128951">func</span>&nbsp;<span class="op" id="4128956">(</span><span class="ident" id="4128957">h</span>&nbsp;<span class="ident" id="4128959"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4128965">)</span>&nbsp;<span class="ident" id="4128967">sortedKeyValues</span><span class="op" id="4128982">(</span><span class="ident" id="4128983">exclude</span>&nbsp;<span class="keyword" id="4128991">map</span><span class="op" id="4128994">[</span><span class="builtintype" id="4128995">string</span><span class="op" id="4129001">]</span><span class="builtintype" id="4129002">bool</span><span class="op" id="4129006">)</span>&nbsp;<span class="op" id="4129008">(</span><span class="ident" id="4129009">kvs</span>&nbsp;<span class="op" id="4129013">[</span><span class="op" id="4129014">]</span><span class="ident" id="4129015"><a href="/gostd/net/http/header.go.html#4128180">keyValues</a></span><span class="op" id="4129024">,</span>&nbsp;<span class="ident" id="4129026">hs</span>&nbsp;<span class="op" id="4129029">*</span><span class="ident" id="4129030"><a href="/gostd/net/http/header.go.html#4128416">headerSorter</a></span><span class="op" id="4129042">)</span>&nbsp;<span class="op" id="4129044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129047"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span>&nbsp;<span class="op" id="4129050">=</span>&nbsp;<span class="ident" id="4129052"><a href="/gostd/net/http/header.go.html#4128697">headerSorterPool</a></span><span class="op" id="4129068">.</span><span class="ident" id="4129069"><a href="/gostd/sync/pool.go.html#1450329">Get</a></span><span class="op" id="4129072">(</span><span class="op" id="4129073">)</span><span class="op" id="4129074">.</span><span class="op" id="4129075">(</span><span class="op" id="4129076">*</span><span class="ident" id="4129077"><a href="/gostd/net/http/header.go.html#4128416">headerSorter</a></span><span class="op" id="4129089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129092">if</span>&nbsp;<span class="builtinfunc" id="4129095">cap</span><span class="op" id="4129098">(</span><span class="ident" id="4129099"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span><span class="op" id="4129101">.</span><span class="ident" id="4129102"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4129105">)</span>&nbsp;<span class="op" id="4129107">&lt;</span>&nbsp;<span class="builtinfunc" id="4129109">len</span><span class="op" id="4129112">(</span><span class="ident" id="4129113"><a href="/gostd/net/http/header.go.html#4128957">h</a></span><span class="op" id="4129114">)</span>&nbsp;<span class="op" id="4129116">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129120"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span><span class="op" id="4129122">.</span><span class="ident" id="4129123"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span>&nbsp;<span class="op" id="4129127">=</span>&nbsp;<span class="builtinfunc" id="4129129">make</span><span class="op" id="4129133">(</span><span class="op" id="4129134">[</span><span class="op" id="4129135">]</span><span class="ident" id="4129136"><a href="/gostd/net/http/header.go.html#4128180">keyValues</a></span><span class="op" id="4129145">,</span>&nbsp;<span class="num" id="4129147">0</span><span class="op" id="4129148">,</span>&nbsp;<span class="builtinfunc" id="4129150">len</span><span class="op" id="4129153">(</span><span class="ident" id="4129154"><a href="/gostd/net/http/header.go.html#4128957">h</a></span><span class="op" id="4129155">)</span><span class="op" id="4129156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129162"><a href="/gostd/net/http/header.go.html#4129009">kvs</a></span>&nbsp;<span class="op" id="4129166">=</span>&nbsp;<span class="ident" id="4129168"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span><span class="op" id="4129170">.</span><span class="ident" id="4129171"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span><span class="op" id="4129174">[</span><span class="op" id="4129175">:</span><span class="num" id="4129176">0</span><span class="op" id="4129177">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129180">for</span>&nbsp;<span class="ident" id="4129184">k</span><span class="op" id="4129185">,</span>&nbsp;<span class="ident" id="4129187">vv</span>&nbsp;<span class="op" id="4129190">:=</span>&nbsp;<span class="keyword" id="4129193">range</span>&nbsp;<span class="ident" id="4129199"><a href="/gostd/net/http/header.go.html#4128957">h</a></span>&nbsp;<span class="op" id="4129201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129205">if</span>&nbsp;<span class="op" id="4129208">!</span><span class="ident" id="4129209"><a href="/gostd/net/http/header.go.html#4128983">exclude</a></span><span class="op" id="4129216">[</span><span class="ident" id="4129217"><a href="/gostd/net/http/header.go.html#4129184">k</a></span><span class="op" id="4129218">]</span>&nbsp;<span class="op" id="4129220">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129225"><a href="/gostd/net/http/header.go.html#4129009">kvs</a></span>&nbsp;<span class="op" id="4129229">=</span>&nbsp;<span class="builtinfunc" id="4129231">append</span><span class="op" id="4129237">(</span><span class="ident" id="4129238"><a href="/gostd/net/http/header.go.html#4129009">kvs</a></span><span class="op" id="4129241">,</span>&nbsp;<span class="ident" id="4129243"><a href="/gostd/net/http/header.go.html#4128180">keyValues</a></span><span class="op" id="4129252">{</span><span class="ident" id="4129253"><a href="/gostd/net/http/header.go.html#4129184">k</a></span><span class="op" id="4129254">,</span>&nbsp;<span class="ident" id="4129256"><a href="/gostd/net/http/header.go.html#4129187">vv</a></span><span class="op" id="4129258">}</span><span class="op" id="4129259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129269"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span><span class="op" id="4129271">.</span><span class="ident" id="4129272"><a href="/gostd/net/http/header.go.html#4128439">kvs</a></span>&nbsp;<span class="op" id="4129276">=</span>&nbsp;<span class="ident" id="4129278"><a href="/gostd/net/http/header.go.html#4129009">kvs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129283"><a href="/gostd/net/http/header.go.html#4125970">sort</a></span><span class="op" id="4129287">.</span><span class="ident" id="4129288"><a href="/gostd/sort/sort.go.html#2015380">Sort</a></span><span class="op" id="4129292">(</span><span class="ident" id="4129293"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span><span class="op" id="4129295">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129298">return</span>&nbsp;<span class="ident" id="4129305"><a href="/gostd/net/http/header.go.html#4129009">kvs</a></span><span class="op" id="4129308">,</span>&nbsp;<span class="ident" id="4129310"><a href="/gostd/net/http/header.go.html#4129026">hs</a></span><br>
<span class="lineno"></span><span class="op" id="4129313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4129316">//&nbsp;WriteSubset&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="4129363">//&nbsp;If&nbsp;exclude&nbsp;is&nbsp;not&nbsp;nil,&nbsp;keys&nbsp;where&nbsp;exclude[key]&nbsp;==&nbsp;true&nbsp;are&nbsp;not&nbsp;written.</span><br>
<span class="lineno">145</span><span class="keyword" id="4129438">func</span>&nbsp;<span class="op" id="4129443">(</span><span class="ident" id="4129444">h</span>&nbsp;<span class="ident" id="4129446"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4129452">)</span>&nbsp;<span class="ident" id="4129454">WriteSubset</span><span class="op" id="4129465">(</span><span class="ident" id="4129466">w</span>&nbsp;<span class="ident" id="4129468"><a href="/gostd/net/http/header.go.html#4125947">io</a></span><span class="op" id="4129470">.</span><span class="ident" id="4129471"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4129477">,</span>&nbsp;<span class="ident" id="4129479">exclude</span>&nbsp;<span class="keyword" id="4129487">map</span><span class="op" id="4129490">[</span><span class="builtintype" id="4129491">string</span><span class="op" id="4129497">]</span><span class="builtintype" id="4129498">bool</span><span class="op" id="4129502">)</span>&nbsp;<span class="builtintype" id="4129504">error</span>&nbsp;<span class="op" id="4129510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129513">ws</span><span class="op" id="4129515">,</span>&nbsp;<span class="ident" id="4129517">ok</span>&nbsp;<span class="op" id="4129520">:=</span>&nbsp;<span class="ident" id="4129523"><a href="/gostd/net/http/header.go.html#4129466">w</a></span><span class="op" id="4129524">.</span><span class="op" id="4129525">(</span><span class="ident" id="4129526"><a href="/gostd/net/http/header.go.html#4127920">writeStringer</a></span><span class="op" id="4129539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129542">if</span>&nbsp;<span class="op" id="4129545">!</span><span class="ident" id="4129546"><a href="/gostd/net/http/header.go.html#4129517">ok</a></span>&nbsp;<span class="op" id="4129549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129553"><a href="/gostd/net/http/header.go.html#4129513">ws</a></span>&nbsp;<span class="op" id="4129556">=</span>&nbsp;<span class="ident" id="4129558"><a href="/gostd/net/http/header.go.html#4128040">stringWriter</a></span><span class="op" id="4129570">{</span><span class="ident" id="4129571"><a href="/gostd/net/http/header.go.html#4129466">w</a></span><span class="op" id="4129572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129575">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129578">kvs</span><span class="op" id="4129581">,</span>&nbsp;<span class="ident" id="4129583">sorter</span>&nbsp;<span class="op" id="4129590">:=</span>&nbsp;<span class="ident" id="4129593"><a href="/gostd/net/http/header.go.html#4129444">h</a></span><span class="op" id="4129594">.</span><span class="ident" id="4129595"><a href="/gostd/net/http/header.go.html#4128967">sortedKeyValues</a></span><span class="op" id="4129610">(</span><span class="ident" id="4129611"><a href="/gostd/net/http/header.go.html#4129479">exclude</a></span><span class="op" id="4129618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129621">for</span>&nbsp;<span class="ident" id="4129625">_</span><span class="op" id="4129626">,</span>&nbsp;<span class="ident" id="4129628">kv</span>&nbsp;<span class="op" id="4129631">:=</span>&nbsp;<span class="keyword" id="4129634">range</span>&nbsp;<span class="ident" id="4129640"><a href="/gostd/net/http/header.go.html#4129578">kvs</a></span>&nbsp;<span class="op" id="4129644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129648">for</span>&nbsp;<span class="ident" id="4129652">_</span><span class="op" id="4129653">,</span>&nbsp;<span class="ident" id="4129655">v</span>&nbsp;<span class="op" id="4129657">:=</span>&nbsp;<span class="keyword" id="4129660">range</span>&nbsp;<span class="ident" id="4129666"><a href="/gostd/net/http/header.go.html#4129628">kv</a></span><span class="op" id="4129668">.</span><span class="ident" id="4129669"><a href="/gostd/net/http/header.go.html#4128215">values</a></span>&nbsp;<span class="op" id="4129676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129681"><a href="/gostd/net/http/header.go.html#4129655">v</a></span>&nbsp;<span class="op" id="4129683">=</span>&nbsp;<span class="ident" id="4129685"><a href="/gostd/net/http/header.go.html#4127849">headerNewlineToSpace</a></span><span class="op" id="4129705">.</span><span class="ident" id="4129706"><a href="/gostd/strings/replace.go.html#2950171">Replace</a></span><span class="op" id="4129713">(</span><span class="ident" id="4129714"><a href="/gostd/net/http/header.go.html#4129655">v</a></span><span class="op" id="4129715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129720"><a href="/gostd/net/http/header.go.html#4129655">v</a></span>&nbsp;<span class="op" id="4129722">=</span>&nbsp;<span class="ident" id="4129724"><a href="/gostd/net/http/header.go.html#4125953">textproto</a></span><span class="op" id="4129733">.</span><span class="ident" id="4129734"><a href="/gostd/net/textproto/textproto.go.html#4352104">TrimString</a></span><span class="op" id="4129744">(</span><span class="ident" id="4129745"><a href="/gostd/net/http/header.go.html#4129655">v</a></span><span class="op" id="4129746">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129751">for</span>&nbsp;<span class="ident" id="4129755">_</span><span class="op" id="4129756">,</span>&nbsp;<span class="ident" id="4129758">s</span>&nbsp;<span class="op" id="4129760">:=</span>&nbsp;<span class="keyword" id="4129763">range</span>&nbsp;<span class="op" id="4129769">[</span><span class="op" id="4129770">]</span><span class="builtintype" id="4129771">string</span><span class="op" id="4129777">{</span><span class="ident" id="4129778"><a href="/gostd/net/http/header.go.html#4129628">kv</a></span><span class="op" id="4129780">.</span><span class="ident" id="4129781"><a href="/gostd/net/http/header.go.html#4128200">key</a></span><span class="op" id="4129784">,</span>&nbsp;<span class="string" id="4129786">&#34;:&nbsp;&#34;</span><span class="op" id="4129790">,</span>&nbsp;<span class="ident" id="4129792"><a href="/gostd/net/http/header.go.html#4129655">v</a></span><span class="op" id="4129793">,</span>&nbsp;<span class="string" id="4129795">&#34;\r\n&#34;</span><span class="op" id="4129801">}</span>&nbsp;<span class="op" id="4129803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129809">if</span>&nbsp;<span class="ident" id="4129812">_</span><span class="op" id="4129813">,</span>&nbsp;<span class="ident" id="4129815">err</span>&nbsp;<span class="op" id="4129819">:=</span>&nbsp;<span class="ident" id="4129822"><a href="/gostd/net/http/header.go.html#4129513">ws</a></span><span class="op" id="4129824">.</span><span class="ident" id="4129825"><a href="/gostd/net/http/header.go.html#4127947">WriteString</a></span><span class="op" id="4129836">(</span><span class="ident" id="4129837"><a href="/gostd/net/http/header.go.html#4129758">s</a></span><span class="op" id="4129838">)</span><span class="op" id="4129839">;</span>&nbsp;<span class="ident" id="4129841"><a href="/gostd/net/http/header.go.html#4129815">err</a></span>&nbsp;<span class="op" id="4129845">!=</span>&nbsp;<span class="builtintype" id="4129848">nil</span>&nbsp;<span class="op" id="4129852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129859">return</span>&nbsp;<span class="ident" id="4129866"><a href="/gostd/net/http/header.go.html#4129815">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129879">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4129886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4129889"><a href="/gostd/net/http/header.go.html#4128697">headerSorterPool</a></span><span class="op" id="4129905">.</span><span class="ident" id="4129906"><a href="/gostd/sync/pool.go.html#1449510">Put</a></span><span class="op" id="4129909">(</span><span class="ident" id="4129910"><a href="/gostd/net/http/header.go.html#4129583">sorter</a></span><span class="op" id="4129916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4129919">return</span>&nbsp;<span class="builtintype" id="4129926">nil</span><br>
<span class="lineno"></span><span class="op" id="4129930">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="4129933">//&nbsp;CanonicalHeaderKey&nbsp;returns&nbsp;the&nbsp;canonical&nbsp;format&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4129991">//&nbsp;header&nbsp;key&nbsp;s.&nbsp;&nbsp;The&nbsp;canonicalization&nbsp;converts&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="4130049">//&nbsp;letter&nbsp;and&nbsp;any&nbsp;letter&nbsp;following&nbsp;a&nbsp;hyphen&nbsp;to&nbsp;upper&nbsp;case;</span><br>
<span class="lineno"></span><span class="comment" id="4130108">//&nbsp;the&nbsp;rest&nbsp;are&nbsp;converted&nbsp;to&nbsp;lowercase.&nbsp;&nbsp;For&nbsp;example,&nbsp;the</span><br>
<span class="lineno">170</span><span class="comment" id="4130166">//&nbsp;canonical&nbsp;key&nbsp;for&nbsp;&#34;accept-encoding&#34;&nbsp;is&nbsp;&#34;Accept-Encoding&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4130227">func</span>&nbsp;<span class="ident" id="4130232">CanonicalHeaderKey</span><span class="op" id="4130250">(</span><span class="ident" id="4130251">s</span>&nbsp;<span class="builtintype" id="4130253">string</span><span class="op" id="4130259">)</span>&nbsp;<span class="builtintype" id="4130261">string</span>&nbsp;<span class="op" id="4130268">{</span>&nbsp;<span class="keyword" id="4130270">return</span>&nbsp;<span class="ident" id="4130277"><a href="/gostd/net/http/header.go.html#4125953">textproto</a></span><span class="op" id="4130286">.</span><span class="ident" id="4130287"><a href="/gostd/net/textproto/reader.go.html#4346917">CanonicalMIMEHeaderKey</a></span><span class="op" id="4130309">(</span><span class="ident" id="4130310"><a href="/gostd/net/http/header.go.html#4130251">s</a></span><span class="op" id="4130311">)</span>&nbsp;<span class="op" id="4130313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4130316">//&nbsp;hasToken&nbsp;reports&nbsp;whether&nbsp;token&nbsp;appears&nbsp;with&nbsp;v,&nbsp;ASCII</span><br>
<span class="lineno"></span><span class="comment" id="4130372">//&nbsp;case-insensitive,&nbsp;with&nbsp;space&nbsp;or&nbsp;comma&nbsp;boundaries.</span><br>
<span class="lineno">175</span><span class="comment" id="4130425">//&nbsp;token&nbsp;must&nbsp;be&nbsp;all&nbsp;lowercase.</span><br>
<span class="lineno"></span><span class="comment" id="4130457">//&nbsp;v&nbsp;may&nbsp;contain&nbsp;mixed&nbsp;cased.</span><br>
<span class="lineno"></span><span class="keyword" id="4130487">func</span>&nbsp;<span class="ident" id="4130492">hasToken</span><span class="op" id="4130500">(</span><span class="ident" id="4130501">v</span><span class="op" id="4130502">,</span>&nbsp;<span class="ident" id="4130504">token</span>&nbsp;<span class="builtintype" id="4130510">string</span><span class="op" id="4130516">)</span>&nbsp;<span class="builtintype" id="4130518">bool</span>&nbsp;<span class="op" id="4130523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4130526">if</span>&nbsp;<span class="builtinfunc" id="4130529">len</span><span class="op" id="4130532">(</span><span class="ident" id="4130533"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4130538">)</span>&nbsp;<span class="op" id="4130540">&gt;</span>&nbsp;<span class="builtinfunc" id="4130542">len</span><span class="op" id="4130545">(</span><span class="ident" id="4130546"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4130547">)</span>&nbsp;<span class="op" id="4130549">||</span>&nbsp;<span class="ident" id="4130552"><a href="/gostd/net/http/header.go.html#4130504">token</a></span>&nbsp;<span class="op" id="4130558">==</span>&nbsp;<span class="string" id="4130561">&#34;&#34;</span>&nbsp;<span class="op" id="4130564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4130568">return</span>&nbsp;<span class="builtintype" id="4130575">false</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4130582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4130585">if</span>&nbsp;<span class="ident" id="4130588"><a href="/gostd/net/http/header.go.html#4130501">v</a></span>&nbsp;<span class="op" id="4130590">==</span>&nbsp;<span class="ident" id="4130593"><a href="/gostd/net/http/header.go.html#4130504">token</a></span>&nbsp;<span class="op" id="4130599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4130603">return</span>&nbsp;<span class="builtintype" id="4130610">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4130616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4130619">for</span>&nbsp;<span class="ident" id="4130623">sp</span>&nbsp;<span class="op" id="4130626">:=</span>&nbsp;<span class="num" id="4130629">0</span><span class="op" id="4130630">;</span>&nbsp;<span class="ident" id="4130632"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span>&nbsp;<span class="op" id="4130635">&lt;=</span>&nbsp;<span class="builtinfunc" id="4130638">len</span><span class="op" id="4130641">(</span><span class="ident" id="4130642"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4130643">)</span><span class="op" id="4130644">-</span><span class="builtinfunc" id="4130645">len</span><span class="op" id="4130648">(</span><span class="ident" id="4130649"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4130654">)</span><span class="op" id="4130655">;</span>&nbsp;<span class="ident" id="4130657"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span><span class="op" id="4130659">++</span>&nbsp;<span class="op" id="4130662">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4130666">//&nbsp;Check&nbsp;that&nbsp;first&nbsp;character&nbsp;is&nbsp;good.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4130707">//&nbsp;The&nbsp;token&nbsp;is&nbsp;ASCII,&nbsp;so&nbsp;checking&nbsp;only&nbsp;a&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4130763">//&nbsp;is&nbsp;sufficient.&nbsp;&nbsp;We&nbsp;skip&nbsp;this&nbsp;potential&nbsp;starting</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4130816">//&nbsp;position&nbsp;if&nbsp;both&nbsp;the&nbsp;first&nbsp;byte&nbsp;and&nbsp;its&nbsp;potential</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4130871">//&nbsp;ASCII&nbsp;uppercase&nbsp;equivalent&nbsp;(b|0x20)&nbsp;don&#39;t&nbsp;match.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4130925">//&nbsp;False&nbsp;positives&nbsp;(&#39;^&#39;&nbsp;=&gt;&nbsp;&#39;~&#39;)&nbsp;are&nbsp;caught&nbsp;by&nbsp;EqualFold.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4130984">if</span>&nbsp;<span class="ident" id="4130987">b</span>&nbsp;<span class="op" id="4130989">:=</span>&nbsp;<span class="ident" id="4130992"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4130993">[</span><span class="ident" id="4130994"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span><span class="op" id="4130996">]</span><span class="op" id="4130997">;</span>&nbsp;<span class="ident" id="4130999"><a href="/gostd/net/http/header.go.html#4130987">b</a></span>&nbsp;<span class="op" id="4131001">!=</span>&nbsp;<span class="ident" id="4131004"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4131009">[</span><span class="num" id="4131010">0</span><span class="op" id="4131011">]</span>&nbsp;<span class="op" id="4131013">&amp;&amp;</span>&nbsp;<span class="ident" id="4131016"><a href="/gostd/net/http/header.go.html#4130987">b</a></span><span class="op" id="4131017">|</span><span class="num" id="4131018">0x20</span>&nbsp;<span class="op" id="4131023">!=</span>&nbsp;<span class="ident" id="4131026"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4131031">[</span><span class="num" id="4131032">0</span><span class="op" id="4131033">]</span>&nbsp;<span class="op" id="4131035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131040">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4131051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4131055">//&nbsp;Check&nbsp;that&nbsp;start&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131111">if</span>&nbsp;<span class="ident" id="4131114"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span>&nbsp;<span class="op" id="4131117">&gt;</span>&nbsp;<span class="num" id="4131119">0</span>&nbsp;<span class="op" id="4131121">&amp;&amp;</span>&nbsp;<span class="op" id="4131124">!</span><span class="ident" id="4131125"><a href="/gostd/net/http/header.go.html#4131417">isTokenBoundary</a></span><span class="op" id="4131140">(</span><span class="ident" id="4131141"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4131142">[</span><span class="ident" id="4131143"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span><span class="op" id="4131145">-</span><span class="num" id="4131146">1</span><span class="op" id="4131147">]</span><span class="op" id="4131148">)</span>&nbsp;<span class="op" id="4131150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131155">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4131166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4131170">//&nbsp;Check&nbsp;that&nbsp;end&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131224">if</span>&nbsp;<span class="ident" id="4131227">endPos</span>&nbsp;<span class="op" id="4131234">:=</span>&nbsp;<span class="ident" id="4131237"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span>&nbsp;<span class="op" id="4131240">+</span>&nbsp;<span class="builtinfunc" id="4131242">len</span><span class="op" id="4131245">(</span><span class="ident" id="4131246"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4131251">)</span><span class="op" id="4131252">;</span>&nbsp;<span class="ident" id="4131254"><a href="/gostd/net/http/header.go.html#4131227">endPos</a></span>&nbsp;<span class="op" id="4131261">!=</span>&nbsp;<span class="builtinfunc" id="4131264">len</span><span class="op" id="4131267">(</span><span class="ident" id="4131268"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4131269">)</span>&nbsp;<span class="op" id="4131271">&amp;&amp;</span>&nbsp;<span class="op" id="4131274">!</span><span class="ident" id="4131275"><a href="/gostd/net/http/header.go.html#4131417">isTokenBoundary</a></span><span class="op" id="4131290">(</span><span class="ident" id="4131291"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4131292">[</span><span class="ident" id="4131293"><a href="/gostd/net/http/header.go.html#4131227">endPos</a></span><span class="op" id="4131299">]</span><span class="op" id="4131300">)</span>&nbsp;<span class="op" id="4131302">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131307">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4131318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131322">if</span>&nbsp;<span class="ident" id="4131325"><a href="/gostd/net/http/header.go.html#4125978">strings</a></span><span class="op" id="4131332">.</span><span class="ident" id="4131333"><a href="/gostd/strings/strings.go.html#2984194">EqualFold</a></span><span class="op" id="4131342">(</span><span class="ident" id="4131343"><a href="/gostd/net/http/header.go.html#4130501">v</a></span><span class="op" id="4131344">[</span><span class="ident" id="4131345"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span><span class="op" id="4131347">:</span><span class="ident" id="4131348"><a href="/gostd/net/http/header.go.html#4130623">sp</a></span><span class="op" id="4131350">+</span><span class="builtinfunc" id="4131351">len</span><span class="op" id="4131354">(</span><span class="ident" id="4131355"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4131360">)</span><span class="op" id="4131361">]</span><span class="op" id="4131362">,</span>&nbsp;<span class="ident" id="4131364"><a href="/gostd/net/http/header.go.html#4130504">token</a></span><span class="op" id="4131369">)</span>&nbsp;<span class="op" id="4131371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131376">return</span>&nbsp;<span class="builtintype" id="4131383">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4131390">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4131393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131396">return</span>&nbsp;<span class="builtintype" id="4131403">false</span><br>
<span class="lineno"></span><span class="op" id="4131409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4131412">func</span>&nbsp;<span class="ident" id="4131417">isTokenBoundary</span><span class="op" id="4131432">(</span><span class="ident" id="4131433">b</span>&nbsp;<span class="builtintype" id="4131435">byte</span><span class="op" id="4131439">)</span>&nbsp;<span class="builtintype" id="4131441">bool</span>&nbsp;<span class="op" id="4131446">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4131449">return</span>&nbsp;<span class="ident" id="4131456"><a href="/gostd/net/http/header.go.html#4131433">b</a></span>&nbsp;<span class="op" id="4131458">==</span>&nbsp;<span class="string" id="4131461">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4131465">||</span>&nbsp;<span class="ident" id="4131468"><a href="/gostd/net/http/header.go.html#4131433">b</a></span>&nbsp;<span class="op" id="4131470">==</span>&nbsp;<span class="string" id="4131473">&#39;,&#39;</span>&nbsp;<span class="op" id="4131477">||</span>&nbsp;<span class="ident" id="4131480"><a href="/gostd/net/http/header.go.html#4131433">b</a></span>&nbsp;<span class="op" id="4131482">==</span>&nbsp;<span class="string" id="4131485">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="4131490">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
