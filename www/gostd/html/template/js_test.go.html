<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8470455">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8470510">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8470564">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8470615">package</span>&nbsp;<span class="ident" id="8470623">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8470633">import</span>&nbsp;<span class="op" id="8470640">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8470643">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8470652">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8470660">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8470671">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8470681">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8470684">func</span>&nbsp;<span class="ident" id="8470689">TestNextJsCtx</span><span class="op" id="8470702">(</span><span class="ident" id="8470703">t</span>&nbsp;<span class="op" id="8470705">*</span><span class="ident" id="8470706">testing</span><span class="op" id="8470713">.</span><span class="ident" id="8470714">T</span><span class="op" id="8470715">)</span>&nbsp;<span class="op" id="8470717">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8470720">tests</span>&nbsp;<span class="op" id="8470726">:=</span>&nbsp;<span class="op" id="8470729">[</span><span class="op" id="8470730">]</span><span class="keyword" id="8470731">struct</span>&nbsp;<span class="op" id="8470738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8470742">jsCtx</span>&nbsp;<span class="ident" id="8470748">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8470756">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8470762">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470770">}</span><span class="op" id="8470771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8470775">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8470819">{</span><span class="ident" id="8470820">jsCtxRegexp</span><span class="op" id="8470831">,</span>&nbsp;<span class="string" id="8470833">&#34;;&#34;</span><span class="op" id="8470836">}</span><span class="op" id="8470837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8470841">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8470868">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8470921">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8470984">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471047">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471070">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471120">{</span><span class="ident" id="8471121">jsCtxRegexp</span><span class="op" id="8471132">,</span>&nbsp;<span class="string" id="8471134">&#34;}&#34;</span><span class="op" id="8471137">}</span><span class="op" id="8471138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471142">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471208">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471230">{</span><span class="ident" id="8471231">jsCtxDivOp</span><span class="op" id="8471241">,</span>&nbsp;<span class="string" id="8471243">&#34;)&#34;</span><span class="op" id="8471246">}</span><span class="op" id="8471247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471251">{</span><span class="ident" id="8471252">jsCtxDivOp</span><span class="op" id="8471262">,</span>&nbsp;<span class="string" id="8471264">&#34;]&#34;</span><span class="op" id="8471267">}</span><span class="op" id="8471268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471272">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471336">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471369">{</span><span class="ident" id="8471370">jsCtxRegexp</span><span class="op" id="8471381">,</span>&nbsp;<span class="string" id="8471383">&#34;(&#34;</span><span class="op" id="8471386">}</span><span class="op" id="8471387">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471391">{</span><span class="ident" id="8471392">jsCtxRegexp</span><span class="op" id="8471403">,</span>&nbsp;<span class="string" id="8471405">&#34;[&#34;</span><span class="op" id="8471408">}</span><span class="op" id="8471409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471413">{</span><span class="ident" id="8471414">jsCtxRegexp</span><span class="op" id="8471425">,</span>&nbsp;<span class="string" id="8471427">&#34;{&#34;</span><span class="op" id="8471430">}</span><span class="op" id="8471431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471435">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471499">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471533">{</span><span class="ident" id="8471534">jsCtxRegexp</span><span class="op" id="8471545">,</span>&nbsp;<span class="string" id="8471547">&#34;=&#34;</span><span class="op" id="8471550">}</span><span class="op" id="8471551">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471555">{</span><span class="ident" id="8471556">jsCtxRegexp</span><span class="op" id="8471567">,</span>&nbsp;<span class="string" id="8471569">&#34;+=&#34;</span><span class="op" id="8471573">}</span><span class="op" id="8471574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471578">{</span><span class="ident" id="8471579">jsCtxRegexp</span><span class="op" id="8471590">,</span>&nbsp;<span class="string" id="8471592">&#34;*=&#34;</span><span class="op" id="8471596">}</span><span class="op" id="8471597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471601">{</span><span class="ident" id="8471602">jsCtxRegexp</span><span class="op" id="8471613">,</span>&nbsp;<span class="string" id="8471615">&#34;*&#34;</span><span class="op" id="8471618">}</span><span class="op" id="8471619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471623">{</span><span class="ident" id="8471624">jsCtxRegexp</span><span class="op" id="8471635">,</span>&nbsp;<span class="string" id="8471637">&#34;!&#34;</span><span class="op" id="8471640">}</span><span class="op" id="8471641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471645">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471709">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471722">{</span><span class="ident" id="8471723">jsCtxRegexp</span><span class="op" id="8471734">,</span>&nbsp;<span class="string" id="8471736">&#34;+&#34;</span><span class="op" id="8471739">}</span><span class="op" id="8471740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471744">{</span><span class="ident" id="8471745">jsCtxRegexp</span><span class="op" id="8471756">,</span>&nbsp;<span class="string" id="8471758">&#34;-&#34;</span><span class="op" id="8471761">}</span><span class="op" id="8471762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471766">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471812">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471874">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471938">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8471987">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472051">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472064">{</span><span class="ident" id="8472065">jsCtxDivOp</span><span class="op" id="8472075">,</span>&nbsp;<span class="string" id="8472077">&#34;--&#34;</span><span class="op" id="8472081">}</span><span class="op" id="8472082">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472086">{</span><span class="ident" id="8472087">jsCtxDivOp</span><span class="op" id="8472097">,</span>&nbsp;<span class="string" id="8472099">&#34;++&#34;</span><span class="op" id="8472103">}</span><span class="op" id="8472104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472108">{</span><span class="ident" id="8472109">jsCtxDivOp</span><span class="op" id="8472119">,</span>&nbsp;<span class="string" id="8472121">&#34;x--&#34;</span><span class="op" id="8472126">}</span><span class="op" id="8472127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472131">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472194">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472214">{</span><span class="ident" id="8472215">jsCtxRegexp</span><span class="op" id="8472226">,</span>&nbsp;<span class="string" id="8472228">&#34;x---&#34;</span><span class="op" id="8472234">}</span><span class="op" id="8472235">,</span>&nbsp;<span class="comment" id="8472237">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472265">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472331">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472398">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472417">{</span><span class="ident" id="8472418">jsCtxRegexp</span><span class="op" id="8472429">,</span>&nbsp;<span class="string" id="8472431">&#34;return&#34;</span><span class="op" id="8472439">}</span><span class="op" id="8472440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472444">{</span><span class="ident" id="8472445">jsCtxRegexp</span><span class="op" id="8472456">,</span>&nbsp;<span class="string" id="8472458">&#34;return&nbsp;&#34;</span><span class="op" id="8472467">}</span><span class="op" id="8472468">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472472">{</span><span class="ident" id="8472473">jsCtxRegexp</span><span class="op" id="8472484">,</span>&nbsp;<span class="string" id="8472486">&#34;return\t&#34;</span><span class="op" id="8472496">}</span><span class="op" id="8472497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472501">{</span><span class="ident" id="8472502">jsCtxRegexp</span><span class="op" id="8472513">,</span>&nbsp;<span class="string" id="8472515">&#34;return\n&#34;</span><span class="op" id="8472525">}</span><span class="op" id="8472526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472530">{</span><span class="ident" id="8472531">jsCtxRegexp</span><span class="op" id="8472542">,</span>&nbsp;<span class="string" id="8472544">&#34;return\u2028&#34;</span><span class="op" id="8472558">}</span><span class="op" id="8472559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472563">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472629">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472691">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472757">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472822">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8472888">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472899">{</span><span class="ident" id="8472900">jsCtxDivOp</span><span class="op" id="8472910">,</span>&nbsp;<span class="string" id="8472912">&#34;x&#34;</span><span class="op" id="8472915">}</span><span class="op" id="8472916">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472920">{</span><span class="ident" id="8472921">jsCtxDivOp</span><span class="op" id="8472931">,</span>&nbsp;<span class="string" id="8472933">&#34;x&nbsp;&#34;</span><span class="op" id="8472937">}</span><span class="op" id="8472938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472942">{</span><span class="ident" id="8472943">jsCtxDivOp</span><span class="op" id="8472953">,</span>&nbsp;<span class="string" id="8472955">&#34;x\t&#34;</span><span class="op" id="8472960">}</span><span class="op" id="8472961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472965">{</span><span class="ident" id="8472966">jsCtxDivOp</span><span class="op" id="8472976">,</span>&nbsp;<span class="string" id="8472978">&#34;x\n&#34;</span><span class="op" id="8472983">}</span><span class="op" id="8472984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472988">{</span><span class="ident" id="8472989">jsCtxDivOp</span><span class="op" id="8472999">,</span>&nbsp;<span class="string" id="8473001">&#34;x\u2028&#34;</span><span class="op" id="8473010">}</span><span class="op" id="8473011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473015">{</span><span class="ident" id="8473016">jsCtxDivOp</span><span class="op" id="8473026">,</span>&nbsp;<span class="string" id="8473028">&#34;preturn&#34;</span><span class="op" id="8473037">}</span><span class="op" id="8473038">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8473042">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473072">{</span><span class="ident" id="8473073">jsCtxDivOp</span><span class="op" id="8473083">,</span>&nbsp;<span class="string" id="8473085">&#34;0&#34;</span><span class="op" id="8473088">}</span><span class="op" id="8473089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8473093">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473148">{</span><span class="ident" id="8473149">jsCtxDivOp</span><span class="op" id="8473159">,</span>&nbsp;<span class="string" id="8473161">&#34;0.&#34;</span><span class="op" id="8473165">}</span><span class="op" id="8473166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473169">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473173">for</span>&nbsp;<span class="ident" id="8473177">_</span><span class="op" id="8473178">,</span>&nbsp;<span class="ident" id="8473180">test</span>&nbsp;<span class="op" id="8473185">:=</span>&nbsp;<span class="keyword" id="8473188">range</span>&nbsp;<span class="ident" id="8473194">tests</span>&nbsp;<span class="op" id="8473200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473204">if</span>&nbsp;<span class="ident" id="8473207">nextJSCtx</span><span class="op" id="8473216">(</span><span class="op" id="8473217">[</span><span class="op" id="8473218">]</span><span class="builtintype" id="8473219">byte</span><span class="op" id="8473223">(</span><span class="ident" id="8473224">test</span><span class="op" id="8473228">.</span><span class="ident" id="8473229">s</span><span class="op" id="8473230">)</span><span class="op" id="8473231">,</span>&nbsp;<span class="ident" id="8473233">jsCtxRegexp</span><span class="op" id="8473244">)</span>&nbsp;<span class="op" id="8473246">!=</span>&nbsp;<span class="ident" id="8473249">test</span><span class="op" id="8473253">.</span><span class="ident" id="8473254">jsCtx</span>&nbsp;<span class="op" id="8473260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473265">t</span><span class="op" id="8473266">.</span><span class="ident" id="8473267">Errorf</span><span class="op" id="8473273">(</span><span class="string" id="8473274">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8473290">,</span>&nbsp;<span class="ident" id="8473292">test</span><span class="op" id="8473296">.</span><span class="ident" id="8473297">jsCtx</span><span class="op" id="8473302">,</span>&nbsp;<span class="ident" id="8473304">test</span><span class="op" id="8473308">.</span><span class="ident" id="8473309">s</span><span class="op" id="8473310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473314">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473318">if</span>&nbsp;<span class="ident" id="8473321">nextJSCtx</span><span class="op" id="8473330">(</span><span class="op" id="8473331">[</span><span class="op" id="8473332">]</span><span class="builtintype" id="8473333">byte</span><span class="op" id="8473337">(</span><span class="ident" id="8473338">test</span><span class="op" id="8473342">.</span><span class="ident" id="8473343">s</span><span class="op" id="8473344">)</span><span class="op" id="8473345">,</span>&nbsp;<span class="ident" id="8473347">jsCtxDivOp</span><span class="op" id="8473357">)</span>&nbsp;<span class="op" id="8473359">!=</span>&nbsp;<span class="ident" id="8473362">test</span><span class="op" id="8473366">.</span><span class="ident" id="8473367">jsCtx</span>&nbsp;<span class="op" id="8473373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473378">t</span><span class="op" id="8473379">.</span><span class="ident" id="8473380">Errorf</span><span class="op" id="8473386">(</span><span class="string" id="8473387">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8473403">,</span>&nbsp;<span class="ident" id="8473405">test</span><span class="op" id="8473409">.</span><span class="ident" id="8473410">jsCtx</span><span class="op" id="8473415">,</span>&nbsp;<span class="ident" id="8473417">test</span><span class="op" id="8473421">.</span><span class="ident" id="8473422">s</span><span class="op" id="8473423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473434">if</span>&nbsp;<span class="ident" id="8473437">nextJSCtx</span><span class="op" id="8473446">(</span><span class="op" id="8473447">[</span><span class="op" id="8473448">]</span><span class="builtintype" id="8473449">byte</span><span class="op" id="8473453">(</span><span class="string" id="8473454">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8473459">)</span><span class="op" id="8473460">,</span>&nbsp;<span class="ident" id="8473462">jsCtxRegexp</span><span class="op" id="8473473">)</span>&nbsp;<span class="op" id="8473475">!=</span>&nbsp;<span class="ident" id="8473478">jsCtxRegexp</span>&nbsp;<span class="op" id="8473490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473494">t</span><span class="op" id="8473495">.</span><span class="ident" id="8473496">Error</span><span class="op" id="8473501">(</span><span class="string" id="8473502">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8473516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473523">if</span>&nbsp;<span class="ident" id="8473526">nextJSCtx</span><span class="op" id="8473535">(</span><span class="op" id="8473536">[</span><span class="op" id="8473537">]</span><span class="builtintype" id="8473538">byte</span><span class="op" id="8473542">(</span><span class="string" id="8473543">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8473548">)</span><span class="op" id="8473549">,</span>&nbsp;<span class="ident" id="8473551">jsCtxDivOp</span><span class="op" id="8473561">)</span>&nbsp;<span class="op" id="8473563">!=</span>&nbsp;<span class="ident" id="8473566">jsCtxDivOp</span>&nbsp;<span class="op" id="8473577">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473581">t</span><span class="op" id="8473582">.</span><span class="ident" id="8473583">Error</span><span class="op" id="8473588">(</span><span class="string" id="8473589">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8473603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473606">}</span><br>
<span class="lineno"></span><span class="op" id="8473608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8473611">func</span>&nbsp;<span class="ident" id="8473616">TestJSValEscaper</span><span class="op" id="8473632">(</span><span class="ident" id="8473633">t</span>&nbsp;<span class="op" id="8473635">*</span><span class="ident" id="8473636">testing</span><span class="op" id="8473643">.</span><span class="ident" id="8473644">T</span><span class="op" id="8473645">)</span>&nbsp;<span class="op" id="8473647">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473650">tests</span>&nbsp;<span class="op" id="8473656">:=</span>&nbsp;<span class="op" id="8473659">[</span><span class="op" id="8473660">]</span><span class="keyword" id="8473661">struct</span>&nbsp;<span class="op" id="8473668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473672">x</span>&nbsp;&nbsp;<span class="keyword" id="8473675">interface</span><span class="op" id="8473684">{</span><span class="op" id="8473685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473689">js</span>&nbsp;<span class="builtintype" id="8473692">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473700">}</span><span class="op" id="8473701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473705">{</span><span class="builtintype" id="8473706">int</span><span class="op" id="8473709">(</span><span class="num" id="8473710">42</span><span class="op" id="8473712">)</span><span class="op" id="8473713">,</span>&nbsp;<span class="string" id="8473715">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473721">}</span><span class="op" id="8473722">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473726">{</span><span class="builtintype" id="8473727">uint</span><span class="op" id="8473731">(</span><span class="num" id="8473732">42</span><span class="op" id="8473734">)</span><span class="op" id="8473735">,</span>&nbsp;<span class="string" id="8473737">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473743">}</span><span class="op" id="8473744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473748">{</span><span class="builtintype" id="8473749">int16</span><span class="op" id="8473754">(</span><span class="num" id="8473755">42</span><span class="op" id="8473757">)</span><span class="op" id="8473758">,</span>&nbsp;<span class="string" id="8473760">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473766">}</span><span class="op" id="8473767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473771">{</span><span class="builtintype" id="8473772">uint16</span><span class="op" id="8473778">(</span><span class="num" id="8473779">42</span><span class="op" id="8473781">)</span><span class="op" id="8473782">,</span>&nbsp;<span class="string" id="8473784">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473790">}</span><span class="op" id="8473791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473795">{</span><span class="builtintype" id="8473796">int32</span><span class="op" id="8473801">(</span><span class="op" id="8473802">-</span><span class="num" id="8473803">42</span><span class="op" id="8473805">)</span><span class="op" id="8473806">,</span>&nbsp;<span class="string" id="8473808">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8473815">}</span><span class="op" id="8473816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473820">{</span><span class="builtintype" id="8473821">uint32</span><span class="op" id="8473827">(</span><span class="num" id="8473828">42</span><span class="op" id="8473830">)</span><span class="op" id="8473831">,</span>&nbsp;<span class="string" id="8473833">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473839">}</span><span class="op" id="8473840">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473844">{</span><span class="builtintype" id="8473845">int16</span><span class="op" id="8473850">(</span><span class="op" id="8473851">-</span><span class="num" id="8473852">42</span><span class="op" id="8473854">)</span><span class="op" id="8473855">,</span>&nbsp;<span class="string" id="8473857">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8473864">}</span><span class="op" id="8473865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473869">{</span><span class="builtintype" id="8473870">uint16</span><span class="op" id="8473876">(</span><span class="num" id="8473877">42</span><span class="op" id="8473879">)</span><span class="op" id="8473880">,</span>&nbsp;<span class="string" id="8473882">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473888">}</span><span class="op" id="8473889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473893">{</span><span class="ident" id="8473894">int64</span><span class="op" id="8473899">(</span><span class="op" id="8473900">-</span><span class="num" id="8473901">42</span><span class="op" id="8473903">)</span><span class="op" id="8473904">,</span>&nbsp;<span class="string" id="8473906">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8473913">}</span><span class="op" id="8473914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473918">{</span><span class="ident" id="8473919">uint64</span><span class="op" id="8473925">(</span><span class="num" id="8473926">42</span><span class="op" id="8473928">)</span><span class="op" id="8473929">,</span>&nbsp;<span class="string" id="8473931">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8473937">}</span><span class="op" id="8473938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473942">{</span><span class="ident" id="8473943">uint64</span><span class="op" id="8473949">(</span><span class="num" id="8473950">1</span><span class="op" id="8473951">)</span>&nbsp;<span class="op" id="8473953">&lt;&lt;</span>&nbsp;<span class="num" id="8473956">53</span><span class="op" id="8473958">,</span>&nbsp;<span class="string" id="8473960">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="8473980">}</span><span class="op" id="8473981">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8473985">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8474037">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474091">{</span><span class="ident" id="8474092">uint64</span><span class="op" id="8474098">(</span><span class="num" id="8474099">1</span><span class="op" id="8474100">)</span><span class="op" id="8474101">&lt;&lt;</span><span class="num" id="8474103">53</span>&nbsp;<span class="op" id="8474106">+</span>&nbsp;<span class="num" id="8474108">1</span><span class="op" id="8474109">,</span>&nbsp;<span class="string" id="8474111">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="8474131">}</span><span class="op" id="8474132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474136">{</span><span class="builtintype" id="8474137">float32</span><span class="op" id="8474144">(</span><span class="num" id="8474145">1.0</span><span class="op" id="8474148">)</span><span class="op" id="8474149">,</span>&nbsp;<span class="string" id="8474151">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8474156">}</span><span class="op" id="8474157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474161">{</span><span class="builtintype" id="8474162">float32</span><span class="op" id="8474169">(</span><span class="op" id="8474170">-</span><span class="num" id="8474171">1.0</span><span class="op" id="8474174">)</span><span class="op" id="8474175">,</span>&nbsp;<span class="string" id="8474177">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8474183">}</span><span class="op" id="8474184">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474188">{</span><span class="builtintype" id="8474189">float32</span><span class="op" id="8474196">(</span><span class="num" id="8474197">0.5</span><span class="op" id="8474200">)</span><span class="op" id="8474201">,</span>&nbsp;<span class="string" id="8474203">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8474210">}</span><span class="op" id="8474211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474215">{</span><span class="builtintype" id="8474216">float32</span><span class="op" id="8474223">(</span><span class="op" id="8474224">-</span><span class="num" id="8474225">0.5</span><span class="op" id="8474228">)</span><span class="op" id="8474229">,</span>&nbsp;<span class="string" id="8474231">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8474239">}</span><span class="op" id="8474240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474244">{</span><span class="builtintype" id="8474245">float32</span><span class="op" id="8474252">(</span><span class="num" id="8474253">1.0</span><span class="op" id="8474256">)</span>&nbsp;<span class="op" id="8474258">/</span>&nbsp;<span class="builtintype" id="8474260">float32</span><span class="op" id="8474267">(</span><span class="num" id="8474268">256</span><span class="op" id="8474271">)</span><span class="op" id="8474272">,</span>&nbsp;<span class="string" id="8474274">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="8474288">}</span><span class="op" id="8474289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474293">{</span><span class="builtintype" id="8474294">float32</span><span class="op" id="8474301">(</span><span class="num" id="8474302">0</span><span class="op" id="8474303">)</span><span class="op" id="8474304">,</span>&nbsp;<span class="string" id="8474306">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8474311">}</span><span class="op" id="8474312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474316">{</span><span class="ident" id="8474317">math</span><span class="op" id="8474321">.</span><span class="ident" id="8474322">Copysign</span><span class="op" id="8474330">(</span><span class="num" id="8474331">0</span><span class="op" id="8474332">,</span>&nbsp;<span class="op" id="8474334">-</span><span class="num" id="8474335">1</span><span class="op" id="8474336">)</span><span class="op" id="8474337">,</span>&nbsp;<span class="string" id="8474339">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8474345">}</span><span class="op" id="8474346">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474350">{</span><span class="builtintype" id="8474351">float64</span><span class="op" id="8474358">(</span><span class="num" id="8474359">1.0</span><span class="op" id="8474362">)</span><span class="op" id="8474363">,</span>&nbsp;<span class="string" id="8474365">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8474370">}</span><span class="op" id="8474371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474375">{</span><span class="builtintype" id="8474376">float64</span><span class="op" id="8474383">(</span><span class="op" id="8474384">-</span><span class="num" id="8474385">1.0</span><span class="op" id="8474388">)</span><span class="op" id="8474389">,</span>&nbsp;<span class="string" id="8474391">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8474397">}</span><span class="op" id="8474398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474402">{</span><span class="builtintype" id="8474403">float64</span><span class="op" id="8474410">(</span><span class="num" id="8474411">0.5</span><span class="op" id="8474414">)</span><span class="op" id="8474415">,</span>&nbsp;<span class="string" id="8474417">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8474424">}</span><span class="op" id="8474425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474429">{</span><span class="builtintype" id="8474430">float64</span><span class="op" id="8474437">(</span><span class="op" id="8474438">-</span><span class="num" id="8474439">0.5</span><span class="op" id="8474442">)</span><span class="op" id="8474443">,</span>&nbsp;<span class="string" id="8474445">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8474453">}</span><span class="op" id="8474454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474458">{</span><span class="builtintype" id="8474459">float64</span><span class="op" id="8474466">(</span><span class="num" id="8474467">0</span><span class="op" id="8474468">)</span><span class="op" id="8474469">,</span>&nbsp;<span class="string" id="8474471">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8474476">}</span><span class="op" id="8474477">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474481">{</span><span class="ident" id="8474482">math</span><span class="op" id="8474486">.</span><span class="ident" id="8474487">Copysign</span><span class="op" id="8474495">(</span><span class="num" id="8474496">0</span><span class="op" id="8474497">,</span>&nbsp;<span class="op" id="8474499">-</span><span class="num" id="8474500">1</span><span class="op" id="8474501">)</span><span class="op" id="8474502">,</span>&nbsp;<span class="string" id="8474504">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8474510">}</span><span class="op" id="8474511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474515">{</span><span class="string" id="8474516">&#34;&#34;</span><span class="op" id="8474518">,</span>&nbsp;<span class="string" id="8474520">`&#34;&#34;`</span><span class="op" id="8474524">}</span><span class="op" id="8474525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474529">{</span><span class="string" id="8474530">&#34;foo&#34;</span><span class="op" id="8474535">,</span>&nbsp;<span class="string" id="8474537">`&#34;foo&#34;`</span><span class="op" id="8474544">}</span><span class="op" id="8474545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8474549">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474564">{</span><span class="string" id="8474565">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="8474583">,</span>&nbsp;<span class="string" id="8474585">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="8474605">}</span><span class="op" id="8474606">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8474610">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474658">{</span><span class="string" id="8474659">&#34;\t\x0b&#34;</span><span class="op" id="8474667">,</span>&nbsp;<span class="string" id="8474669">`&#34;\t\u000b&#34;`</span><span class="op" id="8474681">}</span><span class="op" id="8474682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474686">{</span><span class="keyword" id="8474687">struct</span><span class="op" id="8474693">{</span>&nbsp;<span class="ident" id="8474695">X</span><span class="op" id="8474696">,</span>&nbsp;<span class="ident" id="8474698">Y</span>&nbsp;<span class="builtintype" id="8474700">int</span>&nbsp;<span class="op" id="8474704">}</span><span class="op" id="8474705">{</span><span class="num" id="8474706">1</span><span class="op" id="8474707">,</span>&nbsp;<span class="num" id="8474709">2</span><span class="op" id="8474710">}</span><span class="op" id="8474711">,</span>&nbsp;<span class="string" id="8474713">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="8474728">}</span><span class="op" id="8474729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474733">{</span><span class="op" id="8474734">[</span><span class="op" id="8474735">]</span><span class="keyword" id="8474736">interface</span><span class="op" id="8474745">{</span><span class="op" id="8474746">}</span><span class="op" id="8474747">{</span><span class="op" id="8474748">}</span><span class="op" id="8474749">,</span>&nbsp;<span class="string" id="8474751">&#34;[]&#34;</span><span class="op" id="8474755">}</span><span class="op" id="8474756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474760">{</span><span class="op" id="8474761">[</span><span class="op" id="8474762">]</span><span class="keyword" id="8474763">interface</span><span class="op" id="8474772">{</span><span class="op" id="8474773">}</span><span class="op" id="8474774">{</span><span class="num" id="8474775">42</span><span class="op" id="8474777">,</span>&nbsp;<span class="string" id="8474779">&#34;foo&#34;</span><span class="op" id="8474784">,</span>&nbsp;<span class="ident" id="8474786">nil</span><span class="op" id="8474789">}</span><span class="op" id="8474790">,</span>&nbsp;<span class="string" id="8474792">`[42,&#34;foo&#34;,null]`</span><span class="op" id="8474809">}</span><span class="op" id="8474810">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474814">{</span><span class="op" id="8474815">[</span><span class="op" id="8474816">]</span><span class="builtintype" id="8474817">string</span><span class="op" id="8474823">{</span><span class="string" id="8474824">&#34;&lt;!--&#34;</span><span class="op" id="8474830">,</span>&nbsp;<span class="string" id="8474832">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8474843">,</span>&nbsp;<span class="string" id="8474845">&#34;--&gt;&#34;</span><span class="op" id="8474850">}</span><span class="op" id="8474851">,</span>&nbsp;<span class="string" id="8474853">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="8474901">}</span><span class="op" id="8474902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474906">{</span><span class="string" id="8474907">&#34;&lt;!--&#34;</span><span class="op" id="8474913">,</span>&nbsp;<span class="string" id="8474915">`&#34;\u003c!--&#34;`</span><span class="op" id="8474928">}</span><span class="op" id="8474929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474933">{</span><span class="string" id="8474934">&#34;--&gt;&#34;</span><span class="op" id="8474939">,</span>&nbsp;<span class="string" id="8474941">`&#34;--\u003e&#34;`</span><span class="op" id="8474953">}</span><span class="op" id="8474954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474958">{</span><span class="string" id="8474959">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8474970">,</span>&nbsp;<span class="string" id="8474972">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="8474990">}</span><span class="op" id="8474991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474995">{</span><span class="string" id="8474996">&#34;]]&gt;&#34;</span><span class="op" id="8475001">,</span>&nbsp;<span class="string" id="8475003">`&#34;]]\u003e&#34;`</span><span class="op" id="8475015">}</span><span class="op" id="8475016">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475020">{</span><span class="string" id="8475021">&#34;&lt;/script&#34;</span><span class="op" id="8475031">,</span>&nbsp;<span class="string" id="8475033">`&#34;\u003c/script&#34;`</span><span class="op" id="8475050">}</span><span class="op" id="8475051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475055">{</span><span class="string" id="8475056">&#34;\U0001D11E&#34;</span><span class="op" id="8475068">,</span>&nbsp;<span class="string" id="8475070">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="8475086">}</span><span class="op" id="8475087">,</span>&nbsp;<span class="comment" id="8475089">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475115">for</span>&nbsp;<span class="ident" id="8475119">_</span><span class="op" id="8475120">,</span>&nbsp;<span class="ident" id="8475122">test</span>&nbsp;<span class="op" id="8475127">:=</span>&nbsp;<span class="keyword" id="8475130">range</span>&nbsp;<span class="ident" id="8475136">tests</span>&nbsp;<span class="op" id="8475142">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475146">if</span>&nbsp;<span class="ident" id="8475149">js</span>&nbsp;<span class="op" id="8475152">:=</span>&nbsp;<span class="ident" id="8475155">jsValEscaper</span><span class="op" id="8475167">(</span><span class="ident" id="8475168">test</span><span class="op" id="8475172">.</span><span class="ident" id="8475173">x</span><span class="op" id="8475174">)</span><span class="op" id="8475175">;</span>&nbsp;<span class="ident" id="8475177">js</span>&nbsp;<span class="op" id="8475180">!=</span>&nbsp;<span class="ident" id="8475183">test</span><span class="op" id="8475187">.</span><span class="ident" id="8475188">js</span>&nbsp;<span class="op" id="8475191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475196">t</span><span class="op" id="8475197">.</span><span class="ident" id="8475198">Errorf</span><span class="op" id="8475204">(</span><span class="string" id="8475205">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8475233">,</span>&nbsp;<span class="ident" id="8475235">test</span><span class="op" id="8475239">.</span><span class="ident" id="8475240">x</span><span class="op" id="8475241">,</span>&nbsp;<span class="ident" id="8475243">test</span><span class="op" id="8475247">.</span><span class="ident" id="8475248">js</span><span class="op" id="8475250">,</span>&nbsp;<span class="ident" id="8475252">js</span><span class="op" id="8475254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475262">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475319">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475336">a</span>&nbsp;<span class="op" id="8475338">:=</span>&nbsp;<span class="op" id="8475341">[</span><span class="op" id="8475342">]</span><span class="keyword" id="8475343">interface</span><span class="op" id="8475352">{</span><span class="op" id="8475353">}</span><span class="op" id="8475354">{</span><span class="ident" id="8475355">test</span><span class="op" id="8475359">.</span><span class="ident" id="8475360">x</span><span class="op" id="8475361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475365">want</span>&nbsp;<span class="op" id="8475370">:=</span>&nbsp;<span class="string" id="8475373">&#34;[&#34;</span>&nbsp;<span class="op" id="8475377">+</span>&nbsp;<span class="ident" id="8475379">strings</span><span class="op" id="8475386">.</span><span class="ident" id="8475387">TrimSpace</span><span class="op" id="8475396">(</span><span class="ident" id="8475397">test</span><span class="op" id="8475401">.</span><span class="ident" id="8475402">js</span><span class="op" id="8475404">)</span>&nbsp;<span class="op" id="8475406">+</span>&nbsp;<span class="string" id="8475408">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8475414">if</span>&nbsp;<span class="ident" id="8475417">js</span>&nbsp;<span class="op" id="8475420">:=</span>&nbsp;<span class="ident" id="8475423">jsValEscaper</span><span class="op" id="8475435">(</span><span class="ident" id="8475436">a</span><span class="op" id="8475437">)</span><span class="op" id="8475438">;</span>&nbsp;<span class="ident" id="8475440">js</span>&nbsp;<span class="op" id="8475443">!=</span>&nbsp;<span class="ident" id="8475446">want</span>&nbsp;<span class="op" id="8475451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475456">t</span><span class="op" id="8475457">.</span><span class="ident" id="8475458">Errorf</span><span class="op" id="8475464">(</span><span class="string" id="8475465">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8475493">,</span>&nbsp;<span class="ident" id="8475495">a</span><span class="op" id="8475496">,</span>&nbsp;<span class="ident" id="8475498">want</span><span class="op" id="8475502">,</span>&nbsp;<span class="ident" id="8475504">js</span><span class="op" id="8475506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475510">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475513">}</span><br>
<span class="lineno"></span><span class="op" id="8475515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8475518">func</span>&nbsp;<span class="ident" id="8475523">TestJSStrEscaper</span><span class="op" id="8475539">(</span><span class="ident" id="8475540">t</span>&nbsp;<span class="op" id="8475542">*</span><span class="ident" id="8475543">testing</span><span class="op" id="8475550">.</span><span class="ident" id="8475551">T</span><span class="op" id="8475552">)</span>&nbsp;<span class="op" id="8475554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475557">tests</span>&nbsp;<span class="op" id="8475563">:=</span>&nbsp;<span class="op" id="8475566">[</span><span class="op" id="8475567">]</span><span class="keyword" id="8475568">struct</span>&nbsp;<span class="op" id="8475575">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475579">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8475583">interface</span><span class="op" id="8475592">{</span><span class="op" id="8475593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8475597">esc</span>&nbsp;<span class="builtintype" id="8475601">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475609">}</span><span class="op" id="8475610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475614">{</span><span class="string" id="8475615">&#34;&#34;</span><span class="op" id="8475617">,</span>&nbsp;<span class="string" id="8475619">``</span><span class="op" id="8475621">}</span><span class="op" id="8475622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475626">{</span><span class="string" id="8475627">&#34;foo&#34;</span><span class="op" id="8475632">,</span>&nbsp;<span class="string" id="8475634">`foo`</span><span class="op" id="8475639">}</span><span class="op" id="8475640">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475644">{</span><span class="string" id="8475645">&#34;\u0000&#34;</span><span class="op" id="8475653">,</span>&nbsp;<span class="string" id="8475655">`\0`</span><span class="op" id="8475659">}</span><span class="op" id="8475660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475664">{</span><span class="string" id="8475665">&#34;\t&#34;</span><span class="op" id="8475669">,</span>&nbsp;<span class="string" id="8475671">`\t`</span><span class="op" id="8475675">}</span><span class="op" id="8475676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475680">{</span><span class="string" id="8475681">&#34;\n&#34;</span><span class="op" id="8475685">,</span>&nbsp;<span class="string" id="8475687">`\n`</span><span class="op" id="8475691">}</span><span class="op" id="8475692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475696">{</span><span class="string" id="8475697">&#34;\r&#34;</span><span class="op" id="8475701">,</span>&nbsp;<span class="string" id="8475703">`\r`</span><span class="op" id="8475707">}</span><span class="op" id="8475708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475712">{</span><span class="string" id="8475713">&#34;\u2028&#34;</span><span class="op" id="8475721">,</span>&nbsp;<span class="string" id="8475723">`\u2028`</span><span class="op" id="8475731">}</span><span class="op" id="8475732">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475736">{</span><span class="string" id="8475737">&#34;\u2029&#34;</span><span class="op" id="8475745">,</span>&nbsp;<span class="string" id="8475747">`\u2029`</span><span class="op" id="8475755">}</span><span class="op" id="8475756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475760">{</span><span class="string" id="8475761">&#34;\\&#34;</span><span class="op" id="8475765">,</span>&nbsp;<span class="string" id="8475767">`\\`</span><span class="op" id="8475771">}</span><span class="op" id="8475772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475776">{</span><span class="string" id="8475777">&#34;\\n&#34;</span><span class="op" id="8475782">,</span>&nbsp;<span class="string" id="8475784">`\\n`</span><span class="op" id="8475789">}</span><span class="op" id="8475790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475794">{</span><span class="string" id="8475795">&#34;foo\r\nbar&#34;</span><span class="op" id="8475807">,</span>&nbsp;<span class="string" id="8475809">`foo\r\nbar`</span><span class="op" id="8475821">}</span><span class="op" id="8475822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475826">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475862">{</span><span class="string" id="8475863">`&#34;`</span><span class="op" id="8475866">,</span>&nbsp;<span class="string" id="8475868">`\x22`</span><span class="op" id="8475874">}</span><span class="op" id="8475875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475879">{</span><span class="string" id="8475880">`&#39;`</span><span class="op" id="8475883">,</span>&nbsp;<span class="string" id="8475885">`\x27`</span><span class="op" id="8475891">}</span><span class="op" id="8475892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475896">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8475951">{</span><span class="string" id="8475952">`&amp;amp;`</span><span class="op" id="8475959">,</span>&nbsp;<span class="string" id="8475961">`\x26amp;`</span><span class="op" id="8475971">}</span><span class="op" id="8475972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8475976">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476039">{</span><span class="string" id="8476040">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8476051">,</span>&nbsp;<span class="string" id="8476053">`\x3c\/script\x3e`</span><span class="op" id="8476071">}</span><span class="op" id="8476072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476076">{</span><span class="string" id="8476077">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8476088">,</span>&nbsp;<span class="string" id="8476090">`\x3c![CDATA[`</span><span class="op" id="8476104">}</span><span class="op" id="8476105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476109">{</span><span class="string" id="8476110">&#34;]]&gt;&#34;</span><span class="op" id="8476115">,</span>&nbsp;<span class="string" id="8476117">`]]\x3e`</span><span class="op" id="8476125">}</span><span class="op" id="8476126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476130">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476202">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476266">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476327">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476374">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476438">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476505">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476571">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476631">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476695">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476746">{</span><span class="string" id="8476747">&#34;&lt;!--&#34;</span><span class="op" id="8476753">,</span>&nbsp;<span class="string" id="8476755">`\x3c!--`</span><span class="op" id="8476764">}</span><span class="op" id="8476765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476769">{</span><span class="string" id="8476770">&#34;--&gt;&#34;</span><span class="op" id="8476775">,</span>&nbsp;<span class="string" id="8476777">`--\x3e`</span><span class="op" id="8476785">}</span><span class="op" id="8476786">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476790">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476850">{</span><span class="string" id="8476851">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="8476894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476899">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="8476955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476959">}</span><span class="op" id="8476960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8476964">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8476992">{</span><span class="string" id="8476993">&#34;foo\xA0bar&#34;</span><span class="op" id="8477005">,</span>&nbsp;<span class="string" id="8477007">&#34;foo\xA0bar&#34;</span><span class="op" id="8477019">}</span><span class="op" id="8477020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477024">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477059">{</span><span class="string" id="8477060">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8477080">,</span>&nbsp;<span class="string" id="8477082">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8477102">}</span><span class="op" id="8477103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477110">for</span>&nbsp;<span class="ident" id="8477114">_</span><span class="op" id="8477115">,</span>&nbsp;<span class="ident" id="8477117">test</span>&nbsp;<span class="op" id="8477122">:=</span>&nbsp;<span class="keyword" id="8477125">range</span>&nbsp;<span class="ident" id="8477131">tests</span>&nbsp;<span class="op" id="8477137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477141">esc</span>&nbsp;<span class="op" id="8477145">:=</span>&nbsp;<span class="ident" id="8477148">jsStrEscaper</span><span class="op" id="8477160">(</span><span class="ident" id="8477161">test</span><span class="op" id="8477165">.</span><span class="ident" id="8477166">x</span><span class="op" id="8477167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477171">if</span>&nbsp;<span class="ident" id="8477174">esc</span>&nbsp;<span class="op" id="8477178">!=</span>&nbsp;<span class="ident" id="8477181">test</span><span class="op" id="8477185">.</span><span class="ident" id="8477186">esc</span>&nbsp;<span class="op" id="8477190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477195">t</span><span class="op" id="8477196">.</span><span class="ident" id="8477197">Errorf</span><span class="op" id="8477203">(</span><span class="string" id="8477204">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8477224">,</span>&nbsp;<span class="ident" id="8477226">test</span><span class="op" id="8477230">.</span><span class="ident" id="8477231">x</span><span class="op" id="8477232">,</span>&nbsp;<span class="ident" id="8477234">test</span><span class="op" id="8477238">.</span><span class="ident" id="8477239">esc</span><span class="op" id="8477242">,</span>&nbsp;<span class="ident" id="8477244">esc</span><span class="op" id="8477247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477251">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477254">}</span><br>
<span class="lineno"></span><span class="op" id="8477256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477259">func</span>&nbsp;<span class="ident" id="8477264">TestJSRegexpEscaper</span><span class="op" id="8477283">(</span><span class="ident" id="8477284">t</span>&nbsp;<span class="op" id="8477286">*</span><span class="ident" id="8477287">testing</span><span class="op" id="8477294">.</span><span class="ident" id="8477295">T</span><span class="op" id="8477296">)</span>&nbsp;<span class="op" id="8477298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477301">tests</span>&nbsp;<span class="op" id="8477307">:=</span>&nbsp;<span class="op" id="8477310">[</span><span class="op" id="8477311">]</span><span class="keyword" id="8477312">struct</span>&nbsp;<span class="op" id="8477319">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477323">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8477327">interface</span><span class="op" id="8477336">{</span><span class="op" id="8477337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477341">esc</span>&nbsp;<span class="builtintype" id="8477345">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477353">}</span><span class="op" id="8477354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477358">{</span><span class="string" id="8477359">&#34;&#34;</span><span class="op" id="8477361">,</span>&nbsp;<span class="string" id="8477363">`(?:)`</span><span class="op" id="8477369">}</span><span class="op" id="8477370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477374">{</span><span class="string" id="8477375">&#34;foo&#34;</span><span class="op" id="8477380">,</span>&nbsp;<span class="string" id="8477382">`foo`</span><span class="op" id="8477387">}</span><span class="op" id="8477388">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477392">{</span><span class="string" id="8477393">&#34;\u0000&#34;</span><span class="op" id="8477401">,</span>&nbsp;<span class="string" id="8477403">`\0`</span><span class="op" id="8477407">}</span><span class="op" id="8477408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477412">{</span><span class="string" id="8477413">&#34;\t&#34;</span><span class="op" id="8477417">,</span>&nbsp;<span class="string" id="8477419">`\t`</span><span class="op" id="8477423">}</span><span class="op" id="8477424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477428">{</span><span class="string" id="8477429">&#34;\n&#34;</span><span class="op" id="8477433">,</span>&nbsp;<span class="string" id="8477435">`\n`</span><span class="op" id="8477439">}</span><span class="op" id="8477440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477444">{</span><span class="string" id="8477445">&#34;\r&#34;</span><span class="op" id="8477449">,</span>&nbsp;<span class="string" id="8477451">`\r`</span><span class="op" id="8477455">}</span><span class="op" id="8477456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477460">{</span><span class="string" id="8477461">&#34;\u2028&#34;</span><span class="op" id="8477469">,</span>&nbsp;<span class="string" id="8477471">`\u2028`</span><span class="op" id="8477479">}</span><span class="op" id="8477480">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477484">{</span><span class="string" id="8477485">&#34;\u2029&#34;</span><span class="op" id="8477493">,</span>&nbsp;<span class="string" id="8477495">`\u2029`</span><span class="op" id="8477503">}</span><span class="op" id="8477504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477508">{</span><span class="string" id="8477509">&#34;\\&#34;</span><span class="op" id="8477513">,</span>&nbsp;<span class="string" id="8477515">`\\`</span><span class="op" id="8477519">}</span><span class="op" id="8477520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477524">{</span><span class="string" id="8477525">&#34;\\n&#34;</span><span class="op" id="8477530">,</span>&nbsp;<span class="string" id="8477532">`\\n`</span><span class="op" id="8477537">}</span><span class="op" id="8477538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477542">{</span><span class="string" id="8477543">&#34;foo\r\nbar&#34;</span><span class="op" id="8477555">,</span>&nbsp;<span class="string" id="8477557">`foo\r\nbar`</span><span class="op" id="8477569">}</span><span class="op" id="8477570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477574">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477610">{</span><span class="string" id="8477611">`&#34;`</span><span class="op" id="8477614">,</span>&nbsp;<span class="string" id="8477616">`\x22`</span><span class="op" id="8477622">}</span><span class="op" id="8477623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477627">{</span><span class="string" id="8477628">`&#39;`</span><span class="op" id="8477631">,</span>&nbsp;<span class="string" id="8477633">`\x27`</span><span class="op" id="8477639">}</span><span class="op" id="8477640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477644">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477699">{</span><span class="string" id="8477700">`&amp;amp;`</span><span class="op" id="8477707">,</span>&nbsp;<span class="string" id="8477709">`\x26amp;`</span><span class="op" id="8477719">}</span><span class="op" id="8477720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477724">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477787">{</span><span class="string" id="8477788">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8477799">,</span>&nbsp;<span class="string" id="8477801">`\x3c\/script\x3e`</span><span class="op" id="8477819">}</span><span class="op" id="8477820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477824">{</span><span class="string" id="8477825">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8477836">,</span>&nbsp;<span class="string" id="8477838">`\x3c!\[CDATA\[`</span><span class="op" id="8477854">}</span><span class="op" id="8477855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477859">{</span><span class="string" id="8477860">&#34;]]&gt;&#34;</span><span class="op" id="8477865">,</span>&nbsp;<span class="string" id="8477867">`\]\]\x3e`</span><span class="op" id="8477877">}</span><span class="op" id="8477878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477882">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477908">{</span><span class="string" id="8477909">&#34;&lt;!--&#34;</span><span class="op" id="8477915">,</span>&nbsp;<span class="string" id="8477917">`\x3c!\-\-`</span><span class="op" id="8477928">}</span><span class="op" id="8477929">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477933">{</span><span class="string" id="8477934">&#34;--&gt;&#34;</span><span class="op" id="8477939">,</span>&nbsp;<span class="string" id="8477941">`\-\-\x3e`</span><span class="op" id="8477951">}</span><span class="op" id="8477952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477956">{</span><span class="string" id="8477957">&#34;*&#34;</span><span class="op" id="8477960">,</span>&nbsp;<span class="string" id="8477962">`\*`</span><span class="op" id="8477966">}</span><span class="op" id="8477967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477971">{</span><span class="string" id="8477972">&#34;+&#34;</span><span class="op" id="8477975">,</span>&nbsp;<span class="string" id="8477977">`\x2b`</span><span class="op" id="8477983">}</span><span class="op" id="8477984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477988">{</span><span class="string" id="8477989">&#34;?&#34;</span><span class="op" id="8477992">,</span>&nbsp;<span class="string" id="8477994">`\?`</span><span class="op" id="8477998">}</span><span class="op" id="8477999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478003">{</span><span class="string" id="8478004">&#34;[](){}&#34;</span><span class="op" id="8478012">,</span>&nbsp;<span class="string" id="8478014">`\[\]\(\)\{\}`</span><span class="op" id="8478028">}</span><span class="op" id="8478029">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478033">{</span><span class="string" id="8478034">&#34;$foo|x.y&#34;</span><span class="op" id="8478044">,</span>&nbsp;<span class="string" id="8478046">`\$foo\|x\.y`</span><span class="op" id="8478059">}</span><span class="op" id="8478060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478064">{</span><span class="string" id="8478065">&#34;x^y&#34;</span><span class="op" id="8478070">,</span>&nbsp;<span class="string" id="8478072">`x\^y`</span><span class="op" id="8478078">}</span><span class="op" id="8478079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478086">for</span>&nbsp;<span class="ident" id="8478090">_</span><span class="op" id="8478091">,</span>&nbsp;<span class="ident" id="8478093">test</span>&nbsp;<span class="op" id="8478098">:=</span>&nbsp;<span class="keyword" id="8478101">range</span>&nbsp;<span class="ident" id="8478107">tests</span>&nbsp;<span class="op" id="8478113">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478117">esc</span>&nbsp;<span class="op" id="8478121">:=</span>&nbsp;<span class="ident" id="8478124">jsRegexpEscaper</span><span class="op" id="8478139">(</span><span class="ident" id="8478140">test</span><span class="op" id="8478144">.</span><span class="ident" id="8478145">x</span><span class="op" id="8478146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478150">if</span>&nbsp;<span class="ident" id="8478153">esc</span>&nbsp;<span class="op" id="8478157">!=</span>&nbsp;<span class="ident" id="8478160">test</span><span class="op" id="8478164">.</span><span class="ident" id="8478165">esc</span>&nbsp;<span class="op" id="8478169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478174">t</span><span class="op" id="8478175">.</span><span class="ident" id="8478176">Errorf</span><span class="op" id="8478182">(</span><span class="string" id="8478183">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8478203">,</span>&nbsp;<span class="ident" id="8478205">test</span><span class="op" id="8478209">.</span><span class="ident" id="8478210">x</span><span class="op" id="8478211">,</span>&nbsp;<span class="ident" id="8478213">test</span><span class="op" id="8478217">.</span><span class="ident" id="8478218">esc</span><span class="op" id="8478221">,</span>&nbsp;<span class="ident" id="8478223">esc</span><span class="op" id="8478226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478233">}</span><br>
<span class="lineno">265</span><span class="op" id="8478235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8478238">func</span>&nbsp;<span class="ident" id="8478243">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="8478286">(</span><span class="ident" id="8478287">t</span>&nbsp;<span class="op" id="8478289">*</span><span class="ident" id="8478290">testing</span><span class="op" id="8478297">.</span><span class="ident" id="8478298">T</span><span class="op" id="8478299">)</span>&nbsp;<span class="op" id="8478301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478304">input</span>&nbsp;<span class="op" id="8478310">:=</span>&nbsp;<span class="op" id="8478313">(</span><span class="string" id="8478314">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8478375">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478379">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8478446">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478450">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8478469">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478473">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8478492">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478496">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8478515">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478519">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8478538">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478542">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8478561">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478565">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8478587">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478591">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8478633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478637">tests</span>&nbsp;<span class="op" id="8478643">:=</span>&nbsp;<span class="op" id="8478646">[</span><span class="op" id="8478647">]</span><span class="keyword" id="8478648">struct</span>&nbsp;<span class="op" id="8478655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478659">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8478667">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478676">escaper</span>&nbsp;<span class="keyword" id="8478684">func</span><span class="op" id="8478688">(</span><span class="op" id="8478689">...</span><span class="keyword" id="8478692">interface</span><span class="op" id="8478701">{</span><span class="op" id="8478702">}</span><span class="op" id="8478703">)</span>&nbsp;<span class="builtintype" id="8478705">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478714">escaped</span>&nbsp;<span class="builtintype" id="8478722">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478730">}</span><span class="op" id="8478731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8478735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478740">&#34;jsStrEscaper&#34;</span><span class="op" id="8478754">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478759">jsStrEscaper</span><span class="op" id="8478771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478776">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8478810">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478816">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8478848">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478854">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8478889">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478895">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8478930">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478936">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="8478968">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8478974">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="8478999">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479005">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8479024">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479030">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="8479050">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479056">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8479075">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479081">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8479103">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479109">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8479153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479157">}</span><span class="op" id="8479158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479167">&#34;jsRegexpEscaper&#34;</span><span class="op" id="8479184">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479189">jsRegexpEscaper</span><span class="op" id="8479204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479209">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8479243">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479249">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8479281">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479287">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8479322">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479328">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8479363">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479369">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="8479407">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479413">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="8479439">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479445">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8479464">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479470">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="8479493">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479499">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8479518">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479524">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="8479545">+</span>&nbsp;<span class="string" id="8479547">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="8479556">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8479562">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8479606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479610">}</span><span class="op" id="8479611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479618">for</span>&nbsp;<span class="ident" id="8479622">_</span><span class="op" id="8479623">,</span>&nbsp;<span class="ident" id="8479625">test</span>&nbsp;<span class="op" id="8479630">:=</span>&nbsp;<span class="keyword" id="8479633">range</span>&nbsp;<span class="ident" id="8479639">tests</span>&nbsp;<span class="op" id="8479645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479649">if</span>&nbsp;<span class="ident" id="8479652">s</span>&nbsp;<span class="op" id="8479654">:=</span>&nbsp;<span class="ident" id="8479657">test</span><span class="op" id="8479661">.</span><span class="ident" id="8479662">escaper</span><span class="op" id="8479669">(</span><span class="ident" id="8479670">input</span><span class="op" id="8479675">)</span><span class="op" id="8479676">;</span>&nbsp;<span class="ident" id="8479678">s</span>&nbsp;<span class="op" id="8479680">!=</span>&nbsp;<span class="ident" id="8479683">test</span><span class="op" id="8479687">.</span><span class="ident" id="8479688">escaped</span>&nbsp;<span class="op" id="8479696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479701">t</span><span class="op" id="8479702">.</span><span class="ident" id="8479703">Errorf</span><span class="op" id="8479709">(</span><span class="string" id="8479710">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8479742">,</span>&nbsp;<span class="ident" id="8479744">test</span><span class="op" id="8479748">.</span><span class="ident" id="8479749">name</span><span class="op" id="8479753">,</span>&nbsp;<span class="ident" id="8479755">test</span><span class="op" id="8479759">.</span><span class="ident" id="8479760">escaped</span><span class="op" id="8479767">,</span>&nbsp;<span class="ident" id="8479769">s</span><span class="op" id="8479770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479775">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479786">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8479791">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8479841">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479890">var</span>&nbsp;<span class="ident" id="8479894">buf</span>&nbsp;<span class="ident" id="8479898">bytes</span><span class="op" id="8479903">.</span><span class="ident" id="8479904">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479913">for</span>&nbsp;<span class="ident" id="8479917">_</span><span class="op" id="8479918">,</span>&nbsp;<span class="ident" id="8479920">c</span>&nbsp;<span class="op" id="8479922">:=</span>&nbsp;<span class="keyword" id="8479925">range</span>&nbsp;<span class="ident" id="8479931">input</span>&nbsp;<span class="op" id="8479937">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479942">buf</span><span class="op" id="8479945">.</span><span class="ident" id="8479946">WriteString</span><span class="op" id="8479957">(</span><span class="ident" id="8479958">test</span><span class="op" id="8479962">.</span><span class="ident" id="8479963">escaper</span><span class="op" id="8479970">(</span><span class="builtintype" id="8479971">string</span><span class="op" id="8479977">(</span><span class="ident" id="8479978">c</span><span class="op" id="8479979">)</span><span class="op" id="8479980">)</span><span class="op" id="8479981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8479985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479990">if</span>&nbsp;<span class="ident" id="8479993">s</span>&nbsp;<span class="op" id="8479995">:=</span>&nbsp;<span class="ident" id="8479998">buf</span><span class="op" id="8480001">.</span><span class="ident" id="8480002">String</span><span class="op" id="8480008">(</span><span class="op" id="8480009">)</span><span class="op" id="8480010">;</span>&nbsp;<span class="ident" id="8480012">s</span>&nbsp;<span class="op" id="8480014">!=</span>&nbsp;<span class="ident" id="8480017">test</span><span class="op" id="8480021">.</span><span class="ident" id="8480022">escaped</span>&nbsp;<span class="op" id="8480030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480035">t</span><span class="op" id="8480036">.</span><span class="ident" id="8480037">Errorf</span><span class="op" id="8480043">(</span><span class="string" id="8480044">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8480081">,</span>&nbsp;<span class="ident" id="8480083">test</span><span class="op" id="8480087">.</span><span class="ident" id="8480088">name</span><span class="op" id="8480092">,</span>&nbsp;<span class="ident" id="8480094">test</span><span class="op" id="8480098">.</span><span class="ident" id="8480099">escaped</span><span class="op" id="8480106">,</span>&nbsp;<span class="ident" id="8480108">s</span><span class="op" id="8480109">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480114">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480128">}</span><br>
<span class="lineno"></span><span class="op" id="8480130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="8480133">func</span>&nbsp;<span class="ident" id="8480138">BenchmarkJSValEscaperWithNum</span><span class="op" id="8480166">(</span><span class="ident" id="8480167">b</span>&nbsp;<span class="op" id="8480169">*</span><span class="ident" id="8480170">testing</span><span class="op" id="8480177">.</span><span class="ident" id="8480178">B</span><span class="op" id="8480179">)</span>&nbsp;<span class="op" id="8480181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480184">for</span>&nbsp;<span class="ident" id="8480188">i</span>&nbsp;<span class="op" id="8480190">:=</span>&nbsp;<span class="num" id="8480193">0</span><span class="op" id="8480194">;</span>&nbsp;<span class="ident" id="8480196">i</span>&nbsp;<span class="op" id="8480198">&lt;</span>&nbsp;<span class="ident" id="8480200">b</span><span class="op" id="8480201">.</span><span class="ident" id="8480202">N</span><span class="op" id="8480203">;</span>&nbsp;<span class="ident" id="8480205">i</span><span class="op" id="8480206">++</span>&nbsp;<span class="op" id="8480209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480213">jsValEscaper</span><span class="op" id="8480225">(</span><span class="num" id="8480226">3.141592654</span><span class="op" id="8480237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480240">}</span><br>
<span class="lineno"></span><span class="op" id="8480242">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8480245">func</span>&nbsp;<span class="ident" id="8480250">BenchmarkJSValEscaperWithStr</span><span class="op" id="8480278">(</span><span class="ident" id="8480279">b</span>&nbsp;<span class="op" id="8480281">*</span><span class="ident" id="8480282">testing</span><span class="op" id="8480289">.</span><span class="ident" id="8480290">B</span><span class="op" id="8480291">)</span>&nbsp;<span class="op" id="8480293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480296">for</span>&nbsp;<span class="ident" id="8480300">i</span>&nbsp;<span class="op" id="8480302">:=</span>&nbsp;<span class="num" id="8480305">0</span><span class="op" id="8480306">;</span>&nbsp;<span class="ident" id="8480308">i</span>&nbsp;<span class="op" id="8480310">&lt;</span>&nbsp;<span class="ident" id="8480312">b</span><span class="op" id="8480313">.</span><span class="ident" id="8480314">N</span><span class="op" id="8480315">;</span>&nbsp;<span class="ident" id="8480317">i</span><span class="op" id="8480318">++</span>&nbsp;<span class="op" id="8480321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480325">jsValEscaper</span><span class="op" id="8480337">(</span><span class="string" id="8480338">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8480459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480462">}</span><br>
<span class="lineno">345</span><span class="op" id="8480464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8480467">func</span>&nbsp;<span class="ident" id="8480472">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="8480510">(</span><span class="ident" id="8480511">b</span>&nbsp;<span class="op" id="8480513">*</span><span class="ident" id="8480514">testing</span><span class="op" id="8480521">.</span><span class="ident" id="8480522">B</span><span class="op" id="8480523">)</span>&nbsp;<span class="op" id="8480525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480528">for</span>&nbsp;<span class="ident" id="8480532">i</span>&nbsp;<span class="op" id="8480534">:=</span>&nbsp;<span class="num" id="8480537">0</span><span class="op" id="8480538">;</span>&nbsp;<span class="ident" id="8480540">i</span>&nbsp;<span class="op" id="8480542">&lt;</span>&nbsp;<span class="ident" id="8480544">b</span><span class="op" id="8480545">.</span><span class="ident" id="8480546">N</span><span class="op" id="8480547">;</span>&nbsp;<span class="ident" id="8480549">i</span><span class="op" id="8480550">++</span>&nbsp;<span class="op" id="8480553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480557">jsValEscaper</span><span class="op" id="8480569">(</span><span class="string" id="8480570">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8480616">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480619">}</span><br>
<span class="lineno"></span><span class="op" id="8480621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8480624">func</span>&nbsp;<span class="ident" id="8480629">BenchmarkJSValEscaperWithObj</span><span class="op" id="8480657">(</span><span class="ident" id="8480658">b</span>&nbsp;<span class="op" id="8480660">*</span><span class="ident" id="8480661">testing</span><span class="op" id="8480668">.</span><span class="ident" id="8480669">B</span><span class="op" id="8480670">)</span>&nbsp;<span class="op" id="8480672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480675">o</span>&nbsp;<span class="op" id="8480677">:=</span>&nbsp;<span class="keyword" id="8480680">struct</span>&nbsp;<span class="op" id="8480687">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480691">S</span>&nbsp;<span class="builtintype" id="8480693">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480702">N</span>&nbsp;<span class="builtintype" id="8480704">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480709">}</span><span class="op" id="8480710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8480714">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="8480841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8480845">42</span><span class="op" id="8480847">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8480853">for</span>&nbsp;<span class="ident" id="8480857">i</span>&nbsp;<span class="op" id="8480859">:=</span>&nbsp;<span class="num" id="8480862">0</span><span class="op" id="8480863">;</span>&nbsp;<span class="ident" id="8480865">i</span>&nbsp;<span class="op" id="8480867">&lt;</span>&nbsp;<span class="ident" id="8480869">b</span><span class="op" id="8480870">.</span><span class="ident" id="8480871">N</span><span class="op" id="8480872">;</span>&nbsp;<span class="ident" id="8480874">i</span><span class="op" id="8480875">++</span>&nbsp;<span class="op" id="8480878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480882">jsValEscaper</span><span class="op" id="8480894">(</span><span class="ident" id="8480895">o</span><span class="op" id="8480896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480899">}</span><br>
<span class="lineno"></span><span class="op" id="8480901">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="8480904">func</span>&nbsp;<span class="ident" id="8480909">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="8480947">(</span><span class="ident" id="8480948">b</span>&nbsp;<span class="op" id="8480950">*</span><span class="ident" id="8480951">testing</span><span class="op" id="8480958">.</span><span class="ident" id="8480959">B</span><span class="op" id="8480960">)</span>&nbsp;<span class="op" id="8480962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480965">o</span>&nbsp;<span class="op" id="8480967">:=</span>&nbsp;<span class="keyword" id="8480970">struct</span>&nbsp;<span class="op" id="8480977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480981">S</span>&nbsp;<span class="builtintype" id="8480983">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480992">N</span>&nbsp;<span class="builtintype" id="8480994">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8480999">}</span><span class="op" id="8481000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8481004">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8481050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8481054">42</span><span class="op" id="8481056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481062">for</span>&nbsp;<span class="ident" id="8481066">i</span>&nbsp;<span class="op" id="8481068">:=</span>&nbsp;<span class="num" id="8481071">0</span><span class="op" id="8481072">;</span>&nbsp;<span class="ident" id="8481074">i</span>&nbsp;<span class="op" id="8481076">&lt;</span>&nbsp;<span class="ident" id="8481078">b</span><span class="op" id="8481079">.</span><span class="ident" id="8481080">N</span><span class="op" id="8481081">;</span>&nbsp;<span class="ident" id="8481083">i</span><span class="op" id="8481084">++</span>&nbsp;<span class="op" id="8481087">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481091">jsValEscaper</span><span class="op" id="8481103">(</span><span class="ident" id="8481104">o</span><span class="op" id="8481105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481108">}</span><br>
<span class="lineno"></span><span class="op" id="8481110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8481113">func</span>&nbsp;<span class="ident" id="8481118">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="8481149">(</span><span class="ident" id="8481150">b</span>&nbsp;<span class="op" id="8481152">*</span><span class="ident" id="8481153">testing</span><span class="op" id="8481160">.</span><span class="ident" id="8481161">B</span><span class="op" id="8481162">)</span>&nbsp;<span class="op" id="8481164">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481167">for</span>&nbsp;<span class="ident" id="8481171">i</span>&nbsp;<span class="op" id="8481173">:=</span>&nbsp;<span class="num" id="8481176">0</span><span class="op" id="8481177">;</span>&nbsp;<span class="ident" id="8481179">i</span>&nbsp;<span class="op" id="8481181">&lt;</span>&nbsp;<span class="ident" id="8481183">b</span><span class="op" id="8481184">.</span><span class="ident" id="8481185">N</span><span class="op" id="8481186">;</span>&nbsp;<span class="ident" id="8481188">i</span><span class="op" id="8481189">++</span>&nbsp;<span class="op" id="8481192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481196">jsStrEscaper</span><span class="op" id="8481208">(</span><span class="string" id="8481209">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="8481256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481259">}</span><br>
<span class="lineno"></span><span class="op" id="8481261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="8481264">func</span>&nbsp;<span class="ident" id="8481269">BenchmarkJSStrEscaper</span><span class="op" id="8481290">(</span><span class="ident" id="8481291">b</span>&nbsp;<span class="op" id="8481293">*</span><span class="ident" id="8481294">testing</span><span class="op" id="8481301">.</span><span class="ident" id="8481302">B</span><span class="op" id="8481303">)</span>&nbsp;<span class="op" id="8481305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481308">for</span>&nbsp;<span class="ident" id="8481312">i</span>&nbsp;<span class="op" id="8481314">:=</span>&nbsp;<span class="num" id="8481317">0</span><span class="op" id="8481318">;</span>&nbsp;<span class="ident" id="8481320">i</span>&nbsp;<span class="op" id="8481322">&lt;</span>&nbsp;<span class="ident" id="8481324">b</span><span class="op" id="8481325">.</span><span class="ident" id="8481326">N</span><span class="op" id="8481327">;</span>&nbsp;<span class="ident" id="8481329">i</span><span class="op" id="8481330">++</span>&nbsp;<span class="op" id="8481333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481337">jsStrEscaper</span><span class="op" id="8481349">(</span><span class="string" id="8481350">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8481471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481474">}</span><br>
<span class="lineno"></span><span class="op" id="8481476">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="8481479">func</span>&nbsp;<span class="ident" id="8481484">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="8481518">(</span><span class="ident" id="8481519">b</span>&nbsp;<span class="op" id="8481521">*</span><span class="ident" id="8481522">testing</span><span class="op" id="8481529">.</span><span class="ident" id="8481530">B</span><span class="op" id="8481531">)</span>&nbsp;<span class="op" id="8481533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481536">for</span>&nbsp;<span class="ident" id="8481540">i</span>&nbsp;<span class="op" id="8481542">:=</span>&nbsp;<span class="num" id="8481545">0</span><span class="op" id="8481546">;</span>&nbsp;<span class="ident" id="8481548">i</span>&nbsp;<span class="op" id="8481550">&lt;</span>&nbsp;<span class="ident" id="8481552">b</span><span class="op" id="8481553">.</span><span class="ident" id="8481554">N</span><span class="op" id="8481555">;</span>&nbsp;<span class="ident" id="8481557">i</span><span class="op" id="8481558">++</span>&nbsp;<span class="op" id="8481561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481565">jsRegexpEscaper</span><span class="op" id="8481580">(</span><span class="string" id="8481581">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8481627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481630">}</span><br>
<span class="lineno">395</span><span class="op" id="8481632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8481635">func</span>&nbsp;<span class="ident" id="8481640">BenchmarkJSRegexpEscaper</span><span class="op" id="8481664">(</span><span class="ident" id="8481665">b</span>&nbsp;<span class="op" id="8481667">*</span><span class="ident" id="8481668">testing</span><span class="op" id="8481675">.</span><span class="ident" id="8481676">B</span><span class="op" id="8481677">)</span>&nbsp;<span class="op" id="8481679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481682">for</span>&nbsp;<span class="ident" id="8481686">i</span>&nbsp;<span class="op" id="8481688">:=</span>&nbsp;<span class="num" id="8481691">0</span><span class="op" id="8481692">;</span>&nbsp;<span class="ident" id="8481694">i</span>&nbsp;<span class="op" id="8481696">&lt;</span>&nbsp;<span class="ident" id="8481698">b</span><span class="op" id="8481699">.</span><span class="ident" id="8481700">N</span><span class="op" id="8481701">;</span>&nbsp;<span class="ident" id="8481703">i</span><span class="op" id="8481704">++</span>&nbsp;<span class="op" id="8481707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481711">jsRegexpEscaper</span><span class="op" id="8481726">(</span><span class="string" id="8481727">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8481848">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481851">}</span><br>
<span class="lineno"></span><span class="op" id="8481853">}</span>
</div>
</body>
</html>
