<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6587668">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6587723">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6587777">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6587828">package</span>&nbsp;<span class="ident" id="6587836">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6587841">import</span>&nbsp;<span class="op" id="6587848">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587851">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587860">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587873">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587879">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587887">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587898">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587909">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6587920">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6587927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6587930">func</span>&nbsp;<span class="ident" id="6587935">TestFileInfoHeader</span><span class="op" id="6587953">(</span><span class="ident" id="6587954">t</span>&nbsp;<span class="op" id="6587956">*</span><span class="ident" id="6587957">testing</span><span class="op" id="6587964">.</span><span class="ident" id="6587965">T</span><span class="op" id="6587966">)</span>&nbsp;<span class="op" id="6587968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587971">fi</span><span class="op" id="6587973">,</span>&nbsp;<span class="ident" id="6587975">err</span>&nbsp;<span class="op" id="6587979">:=</span>&nbsp;<span class="ident" id="6587982">os</span><span class="op" id="6587984">.</span><span class="ident" id="6587985">Stat</span><span class="op" id="6587989">(</span><span class="string" id="6587990">&#34;testdata/small.txt&#34;</span><span class="op" id="6588010">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588013">if</span>&nbsp;<span class="ident" id="6588016">err</span>&nbsp;<span class="op" id="6588020">!=</span>&nbsp;<span class="ident" id="6588023">nil</span>&nbsp;<span class="op" id="6588027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588031">t</span><span class="op" id="6588032">.</span><span class="ident" id="6588033">Fatal</span><span class="op" id="6588038">(</span><span class="ident" id="6588039">err</span><span class="op" id="6588042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588048">h</span><span class="op" id="6588049">,</span>&nbsp;<span class="ident" id="6588051">err</span>&nbsp;<span class="op" id="6588055">:=</span>&nbsp;<span class="ident" id="6588058">FileInfoHeader</span><span class="op" id="6588072">(</span><span class="ident" id="6588073">fi</span><span class="op" id="6588075">,</span>&nbsp;<span class="string" id="6588077">&#34;&#34;</span><span class="op" id="6588079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588082">if</span>&nbsp;<span class="ident" id="6588085">err</span>&nbsp;<span class="op" id="6588089">!=</span>&nbsp;<span class="ident" id="6588092">nil</span>&nbsp;<span class="op" id="6588096">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588100">t</span><span class="op" id="6588101">.</span><span class="ident" id="6588102">Fatalf</span><span class="op" id="6588108">(</span><span class="string" id="6588109">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="6588129">,</span>&nbsp;<span class="ident" id="6588131">err</span><span class="op" id="6588134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588140">if</span>&nbsp;<span class="ident" id="6588143">g</span><span class="op" id="6588144">,</span>&nbsp;<span class="ident" id="6588146">e</span>&nbsp;<span class="op" id="6588148">:=</span>&nbsp;<span class="ident" id="6588151">h</span><span class="op" id="6588152">.</span><span class="ident" id="6588153">Name</span><span class="op" id="6588157">,</span>&nbsp;<span class="string" id="6588159">&#34;small.txt&#34;</span><span class="op" id="6588170">;</span>&nbsp;<span class="ident" id="6588172">g</span>&nbsp;<span class="op" id="6588174">!=</span>&nbsp;<span class="ident" id="6588177">e</span>&nbsp;<span class="op" id="6588179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588183">t</span><span class="op" id="6588184">.</span><span class="ident" id="6588185">Errorf</span><span class="op" id="6588191">(</span><span class="string" id="6588192">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6588212">,</span>&nbsp;<span class="ident" id="6588214">g</span><span class="op" id="6588215">,</span>&nbsp;<span class="ident" id="6588217">e</span><span class="op" id="6588218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588221">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588224">if</span>&nbsp;<span class="ident" id="6588227">g</span><span class="op" id="6588228">,</span>&nbsp;<span class="ident" id="6588230">e</span>&nbsp;<span class="op" id="6588232">:=</span>&nbsp;<span class="ident" id="6588235">h</span><span class="op" id="6588236">.</span><span class="ident" id="6588237">Mode</span><span class="op" id="6588241">,</span>&nbsp;<span class="ident" id="6588243">int64</span><span class="op" id="6588248">(</span><span class="ident" id="6588249">fi</span><span class="op" id="6588251">.</span><span class="ident" id="6588252">Mode</span><span class="op" id="6588256">(</span><span class="op" id="6588257">)</span><span class="op" id="6588258">.</span><span class="ident" id="6588259">Perm</span><span class="op" id="6588263">(</span><span class="op" id="6588264">)</span><span class="op" id="6588265">)</span><span class="op" id="6588266">|</span><span class="ident" id="6588267">c_ISREG</span><span class="op" id="6588274">;</span>&nbsp;<span class="ident" id="6588276">g</span>&nbsp;<span class="op" id="6588278">!=</span>&nbsp;<span class="ident" id="6588281">e</span>&nbsp;<span class="op" id="6588283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588287">t</span><span class="op" id="6588288">.</span><span class="ident" id="6588289">Errorf</span><span class="op" id="6588295">(</span><span class="string" id="6588296">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="6588318">,</span>&nbsp;<span class="ident" id="6588320">g</span><span class="op" id="6588321">,</span>&nbsp;<span class="ident" id="6588323">e</span><span class="op" id="6588324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588330">if</span>&nbsp;<span class="ident" id="6588333">g</span><span class="op" id="6588334">,</span>&nbsp;<span class="ident" id="6588336">e</span>&nbsp;<span class="op" id="6588338">:=</span>&nbsp;<span class="ident" id="6588341">h</span><span class="op" id="6588342">.</span><span class="ident" id="6588343">Size</span><span class="op" id="6588347">,</span>&nbsp;<span class="ident" id="6588349">int64</span><span class="op" id="6588354">(</span><span class="num" id="6588355">5</span><span class="op" id="6588356">)</span><span class="op" id="6588357">;</span>&nbsp;<span class="ident" id="6588359">g</span>&nbsp;<span class="op" id="6588361">!=</span>&nbsp;<span class="ident" id="6588364">e</span>&nbsp;<span class="op" id="6588366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588370">t</span><span class="op" id="6588371">.</span><span class="ident" id="6588372">Errorf</span><span class="op" id="6588378">(</span><span class="string" id="6588379">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6588399">,</span>&nbsp;<span class="ident" id="6588401">g</span><span class="op" id="6588402">,</span>&nbsp;<span class="ident" id="6588404">e</span><span class="op" id="6588405">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588411">if</span>&nbsp;<span class="ident" id="6588414">g</span><span class="op" id="6588415">,</span>&nbsp;<span class="ident" id="6588417">e</span>&nbsp;<span class="op" id="6588419">:=</span>&nbsp;<span class="ident" id="6588422">h</span><span class="op" id="6588423">.</span><span class="ident" id="6588424">ModTime</span><span class="op" id="6588431">,</span>&nbsp;<span class="ident" id="6588433">fi</span><span class="op" id="6588435">.</span><span class="ident" id="6588436">ModTime</span><span class="op" id="6588443">(</span><span class="op" id="6588444">)</span><span class="op" id="6588445">;</span>&nbsp;<span class="op" id="6588447">!</span><span class="ident" id="6588448">g</span><span class="op" id="6588449">.</span><span class="ident" id="6588450">Equal</span><span class="op" id="6588455">(</span><span class="ident" id="6588456">e</span><span class="op" id="6588457">)</span>&nbsp;<span class="op" id="6588459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588463">t</span><span class="op" id="6588464">.</span><span class="ident" id="6588465">Errorf</span><span class="op" id="6588471">(</span><span class="string" id="6588472">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6588495">,</span>&nbsp;<span class="ident" id="6588497">g</span><span class="op" id="6588498">,</span>&nbsp;<span class="ident" id="6588500">e</span><span class="op" id="6588501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6588507">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588565">if</span>&nbsp;<span class="ident" id="6588568">_</span><span class="op" id="6588569">,</span>&nbsp;<span class="ident" id="6588571">err</span>&nbsp;<span class="op" id="6588575">:=</span>&nbsp;<span class="ident" id="6588578">FileInfoHeader</span><span class="op" id="6588592">(</span><span class="ident" id="6588593">nil</span><span class="op" id="6588596">,</span>&nbsp;<span class="string" id="6588598">&#34;&#34;</span><span class="op" id="6588600">)</span><span class="op" id="6588601">;</span>&nbsp;<span class="ident" id="6588603">err</span>&nbsp;<span class="op" id="6588607">==</span>&nbsp;<span class="ident" id="6588610">nil</span>&nbsp;<span class="op" id="6588614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588618">t</span><span class="op" id="6588619">.</span><span class="ident" id="6588620">Fatalf</span><span class="op" id="6588626">(</span><span class="string" id="6588627">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="6588678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588681">}</span><br>
<span class="lineno"></span><span class="op" id="6588683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6588686">func</span>&nbsp;<span class="ident" id="6588691">TestFileInfoHeaderDir</span><span class="op" id="6588712">(</span><span class="ident" id="6588713">t</span>&nbsp;<span class="op" id="6588715">*</span><span class="ident" id="6588716">testing</span><span class="op" id="6588723">.</span><span class="ident" id="6588724">T</span><span class="op" id="6588725">)</span>&nbsp;<span class="op" id="6588727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588730">fi</span><span class="op" id="6588732">,</span>&nbsp;<span class="ident" id="6588734">err</span>&nbsp;<span class="op" id="6588738">:=</span>&nbsp;<span class="ident" id="6588741">os</span><span class="op" id="6588743">.</span><span class="ident" id="6588744">Stat</span><span class="op" id="6588748">(</span><span class="string" id="6588749">&#34;testdata&#34;</span><span class="op" id="6588759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588762">if</span>&nbsp;<span class="ident" id="6588765">err</span>&nbsp;<span class="op" id="6588769">!=</span>&nbsp;<span class="ident" id="6588772">nil</span>&nbsp;<span class="op" id="6588776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588780">t</span><span class="op" id="6588781">.</span><span class="ident" id="6588782">Fatal</span><span class="op" id="6588787">(</span><span class="ident" id="6588788">err</span><span class="op" id="6588791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588794">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588797">h</span><span class="op" id="6588798">,</span>&nbsp;<span class="ident" id="6588800">err</span>&nbsp;<span class="op" id="6588804">:=</span>&nbsp;<span class="ident" id="6588807">FileInfoHeader</span><span class="op" id="6588821">(</span><span class="ident" id="6588822">fi</span><span class="op" id="6588824">,</span>&nbsp;<span class="string" id="6588826">&#34;&#34;</span><span class="op" id="6588828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588831">if</span>&nbsp;<span class="ident" id="6588834">err</span>&nbsp;<span class="op" id="6588838">!=</span>&nbsp;<span class="ident" id="6588841">nil</span>&nbsp;<span class="op" id="6588845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588849">t</span><span class="op" id="6588850">.</span><span class="ident" id="6588851">Fatalf</span><span class="op" id="6588857">(</span><span class="string" id="6588858">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="6588878">,</span>&nbsp;<span class="ident" id="6588880">err</span><span class="op" id="6588883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6588889">if</span>&nbsp;<span class="ident" id="6588892">g</span><span class="op" id="6588893">,</span>&nbsp;<span class="ident" id="6588895">e</span>&nbsp;<span class="op" id="6588897">:=</span>&nbsp;<span class="ident" id="6588900">h</span><span class="op" id="6588901">.</span><span class="ident" id="6588902">Name</span><span class="op" id="6588906">,</span>&nbsp;<span class="string" id="6588908">&#34;testdata/&#34;</span><span class="op" id="6588919">;</span>&nbsp;<span class="ident" id="6588921">g</span>&nbsp;<span class="op" id="6588923">!=</span>&nbsp;<span class="ident" id="6588926">e</span>&nbsp;<span class="op" id="6588928">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6588932">t</span><span class="op" id="6588933">.</span><span class="ident" id="6588934">Errorf</span><span class="op" id="6588940">(</span><span class="string" id="6588941">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6588961">,</span>&nbsp;<span class="ident" id="6588963">g</span><span class="op" id="6588964">,</span>&nbsp;<span class="ident" id="6588966">e</span><span class="op" id="6588967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6588970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6588973">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6589020">if</span>&nbsp;<span class="ident" id="6589023">g</span><span class="op" id="6589024">,</span>&nbsp;<span class="ident" id="6589026">e</span>&nbsp;<span class="op" id="6589028">:=</span>&nbsp;<span class="ident" id="6589031">h</span><span class="op" id="6589032">.</span><span class="ident" id="6589033">Mode</span><span class="op" id="6589037">&amp;^</span><span class="ident" id="6589039">c_ISGID</span><span class="op" id="6589046">,</span>&nbsp;<span class="ident" id="6589048">int64</span><span class="op" id="6589053">(</span><span class="ident" id="6589054">fi</span><span class="op" id="6589056">.</span><span class="ident" id="6589057">Mode</span><span class="op" id="6589061">(</span><span class="op" id="6589062">)</span><span class="op" id="6589063">.</span><span class="ident" id="6589064">Perm</span><span class="op" id="6589068">(</span><span class="op" id="6589069">)</span><span class="op" id="6589070">)</span><span class="op" id="6589071">|</span><span class="ident" id="6589072">c_ISDIR</span><span class="op" id="6589079">;</span>&nbsp;<span class="ident" id="6589081">g</span>&nbsp;<span class="op" id="6589083">!=</span>&nbsp;<span class="ident" id="6589086">e</span>&nbsp;<span class="op" id="6589088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589092">t</span><span class="op" id="6589093">.</span><span class="ident" id="6589094">Errorf</span><span class="op" id="6589100">(</span><span class="string" id="6589101">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="6589123">,</span>&nbsp;<span class="ident" id="6589125">g</span><span class="op" id="6589126">,</span>&nbsp;<span class="ident" id="6589128">e</span><span class="op" id="6589129">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6589132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6589135">if</span>&nbsp;<span class="ident" id="6589138">g</span><span class="op" id="6589139">,</span>&nbsp;<span class="ident" id="6589141">e</span>&nbsp;<span class="op" id="6589143">:=</span>&nbsp;<span class="ident" id="6589146">h</span><span class="op" id="6589147">.</span><span class="ident" id="6589148">Size</span><span class="op" id="6589152">,</span>&nbsp;<span class="ident" id="6589154">int64</span><span class="op" id="6589159">(</span><span class="num" id="6589160">0</span><span class="op" id="6589161">)</span><span class="op" id="6589162">;</span>&nbsp;<span class="ident" id="6589164">g</span>&nbsp;<span class="op" id="6589166">!=</span>&nbsp;<span class="ident" id="6589169">e</span>&nbsp;<span class="op" id="6589171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589175">t</span><span class="op" id="6589176">.</span><span class="ident" id="6589177">Errorf</span><span class="op" id="6589183">(</span><span class="string" id="6589184">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6589204">,</span>&nbsp;<span class="ident" id="6589206">g</span><span class="op" id="6589207">,</span>&nbsp;<span class="ident" id="6589209">e</span><span class="op" id="6589210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6589213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6589216">if</span>&nbsp;<span class="ident" id="6589219">g</span><span class="op" id="6589220">,</span>&nbsp;<span class="ident" id="6589222">e</span>&nbsp;<span class="op" id="6589224">:=</span>&nbsp;<span class="ident" id="6589227">h</span><span class="op" id="6589228">.</span><span class="ident" id="6589229">ModTime</span><span class="op" id="6589236">,</span>&nbsp;<span class="ident" id="6589238">fi</span><span class="op" id="6589240">.</span><span class="ident" id="6589241">ModTime</span><span class="op" id="6589248">(</span><span class="op" id="6589249">)</span><span class="op" id="6589250">;</span>&nbsp;<span class="op" id="6589252">!</span><span class="ident" id="6589253">g</span><span class="op" id="6589254">.</span><span class="ident" id="6589255">Equal</span><span class="op" id="6589260">(</span><span class="ident" id="6589261">e</span><span class="op" id="6589262">)</span>&nbsp;<span class="op" id="6589264">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589268">t</span><span class="op" id="6589269">.</span><span class="ident" id="6589270">Errorf</span><span class="op" id="6589276">(</span><span class="string" id="6589277">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6589300">,</span>&nbsp;<span class="ident" id="6589302">g</span><span class="op" id="6589303">,</span>&nbsp;<span class="ident" id="6589305">e</span><span class="op" id="6589306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6589309">}</span><br>
<span class="lineno"></span><span class="op" id="6589311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6589314">func</span>&nbsp;<span class="ident" id="6589319">TestFileInfoHeaderSymlink</span><span class="op" id="6589344">(</span><span class="ident" id="6589345">t</span>&nbsp;<span class="op" id="6589347">*</span><span class="ident" id="6589348">testing</span><span class="op" id="6589355">.</span><span class="ident" id="6589356">T</span><span class="op" id="6589357">)</span>&nbsp;<span class="op" id="6589359">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589362">h</span><span class="op" id="6589363">,</span>&nbsp;<span class="ident" id="6589365">err</span>&nbsp;<span class="op" id="6589369">:=</span>&nbsp;<span class="ident" id="6589372">FileInfoHeader</span><span class="op" id="6589386">(</span><span class="ident" id="6589387">symlink</span><span class="op" id="6589394">{</span><span class="op" id="6589395">}</span><span class="op" id="6589396">,</span>&nbsp;<span class="string" id="6589398">&#34;some-target&#34;</span><span class="op" id="6589411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6589414">if</span>&nbsp;<span class="ident" id="6589417">err</span>&nbsp;<span class="op" id="6589421">!=</span>&nbsp;<span class="ident" id="6589424">nil</span>&nbsp;<span class="op" id="6589428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589432">t</span><span class="op" id="6589433">.</span><span class="ident" id="6589434">Fatal</span><span class="op" id="6589439">(</span><span class="ident" id="6589440">err</span><span class="op" id="6589443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6589446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6589449">if</span>&nbsp;<span class="ident" id="6589452">g</span><span class="op" id="6589453">,</span>&nbsp;<span class="ident" id="6589455">e</span>&nbsp;<span class="op" id="6589457">:=</span>&nbsp;<span class="ident" id="6589460">h</span><span class="op" id="6589461">.</span><span class="ident" id="6589462">Name</span><span class="op" id="6589466">,</span>&nbsp;<span class="string" id="6589468">&#34;some-symlink&#34;</span><span class="op" id="6589482">;</span>&nbsp;<span class="ident" id="6589484">g</span>&nbsp;<span class="op" id="6589486">!=</span>&nbsp;<span class="ident" id="6589489">e</span>&nbsp;<span class="op" id="6589491">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589495">t</span><span class="op" id="6589496">.</span><span class="ident" id="6589497">Errorf</span><span class="op" id="6589503">(</span><span class="string" id="6589504">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6589524">,</span>&nbsp;<span class="ident" id="6589526">g</span><span class="op" id="6589527">,</span>&nbsp;<span class="ident" id="6589529">e</span><span class="op" id="6589530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6589533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6589536">if</span>&nbsp;<span class="ident" id="6589539">g</span><span class="op" id="6589540">,</span>&nbsp;<span class="ident" id="6589542">e</span>&nbsp;<span class="op" id="6589544">:=</span>&nbsp;<span class="ident" id="6589547">h</span><span class="op" id="6589548">.</span><span class="ident" id="6589549">Linkname</span><span class="op" id="6589557">,</span>&nbsp;<span class="string" id="6589559">&#34;some-target&#34;</span><span class="op" id="6589572">;</span>&nbsp;<span class="ident" id="6589574">g</span>&nbsp;<span class="op" id="6589576">!=</span>&nbsp;<span class="ident" id="6589579">e</span>&nbsp;<span class="op" id="6589581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6589585">t</span><span class="op" id="6589586">.</span><span class="ident" id="6589587">Errorf</span><span class="op" id="6589593">(</span><span class="string" id="6589594">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6589618">,</span>&nbsp;<span class="ident" id="6589620">g</span><span class="op" id="6589621">,</span>&nbsp;<span class="ident" id="6589623">e</span><span class="op" id="6589624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6589627">}</span><br>
<span class="lineno">80</span><span class="op" id="6589629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6589632">type</span>&nbsp;<span class="ident" id="6589637">symlink</span>&nbsp;<span class="keyword" id="6589645">struct</span><span class="op" id="6589651">{</span><span class="op" id="6589652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6589655">func</span>&nbsp;<span class="op" id="6589660">(</span><span class="ident" id="6589661">symlink</span><span class="op" id="6589668">)</span>&nbsp;<span class="ident" id="6589670">Name</span><span class="op" id="6589674">(</span><span class="op" id="6589675">)</span>&nbsp;<span class="builtintype" id="6589677">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6589690">{</span>&nbsp;<span class="keyword" id="6589692">return</span>&nbsp;<span class="string" id="6589699">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="6589714">}</span><br>
<span class="lineno">85</span><span class="keyword" id="6589716">func</span>&nbsp;<span class="op" id="6589721">(</span><span class="ident" id="6589722">symlink</span><span class="op" id="6589729">)</span>&nbsp;<span class="ident" id="6589731">Size</span><span class="op" id="6589735">(</span><span class="op" id="6589736">)</span>&nbsp;<span class="ident" id="6589738">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6589751">{</span>&nbsp;<span class="keyword" id="6589753">return</span>&nbsp;<span class="num" id="6589760">0</span>&nbsp;<span class="op" id="6589762">}</span><br>
<span class="lineno"></span><span class="keyword" id="6589764">func</span>&nbsp;<span class="op" id="6589769">(</span><span class="ident" id="6589770">symlink</span><span class="op" id="6589777">)</span>&nbsp;<span class="ident" id="6589779">Mode</span><span class="op" id="6589783">(</span><span class="op" id="6589784">)</span>&nbsp;<span class="ident" id="6589786">os</span><span class="op" id="6589788">.</span><span class="ident" id="6589789">FileMode</span>&nbsp;&nbsp;<span class="op" id="6589799">{</span>&nbsp;<span class="keyword" id="6589801">return</span>&nbsp;<span class="ident" id="6589808">os</span><span class="op" id="6589810">.</span><span class="ident" id="6589811">ModeSymlink</span>&nbsp;<span class="op" id="6589823">}</span><br>
<span class="lineno"></span><span class="keyword" id="6589825">func</span>&nbsp;<span class="op" id="6589830">(</span><span class="ident" id="6589831">symlink</span><span class="op" id="6589838">)</span>&nbsp;<span class="ident" id="6589840">ModTime</span><span class="op" id="6589847">(</span><span class="op" id="6589848">)</span>&nbsp;<span class="ident" id="6589850">time</span><span class="op" id="6589854">.</span><span class="ident" id="6589855">Time</span>&nbsp;<span class="op" id="6589860">{</span>&nbsp;<span class="keyword" id="6589862">return</span>&nbsp;<span class="ident" id="6589869">time</span><span class="op" id="6589873">.</span><span class="ident" id="6589874">Time</span><span class="op" id="6589878">{</span><span class="op" id="6589879">}</span>&nbsp;<span class="op" id="6589881">}</span><br>
<span class="lineno"></span><span class="keyword" id="6589883">func</span>&nbsp;<span class="op" id="6589888">(</span><span class="ident" id="6589889">symlink</span><span class="op" id="6589896">)</span>&nbsp;<span class="ident" id="6589898">IsDir</span><span class="op" id="6589903">(</span><span class="op" id="6589904">)</span>&nbsp;<span class="builtintype" id="6589906">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6589918">{</span>&nbsp;<span class="keyword" id="6589920">return</span>&nbsp;<span class="builtintype" id="6589927">false</span>&nbsp;<span class="op" id="6589933">}</span><br>
<span class="lineno"></span><span class="keyword" id="6589935">func</span>&nbsp;<span class="op" id="6589940">(</span><span class="ident" id="6589941">symlink</span><span class="op" id="6589948">)</span>&nbsp;<span class="ident" id="6589950">Sys</span><span class="op" id="6589953">(</span><span class="op" id="6589954">)</span>&nbsp;<span class="keyword" id="6589956">interface</span><span class="op" id="6589965">{</span><span class="op" id="6589966">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6589970">{</span>&nbsp;<span class="keyword" id="6589972">return</span>&nbsp;<span class="ident" id="6589979">nil</span>&nbsp;<span class="op" id="6589983">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="6589986">func</span>&nbsp;<span class="ident" id="6589991">TestRoundTrip</span><span class="op" id="6590004">(</span><span class="ident" id="6590005">t</span>&nbsp;<span class="op" id="6590007">*</span><span class="ident" id="6590008">testing</span><span class="op" id="6590015">.</span><span class="ident" id="6590016">T</span><span class="op" id="6590017">)</span>&nbsp;<span class="op" id="6590019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590022">data</span>&nbsp;<span class="op" id="6590027">:=</span>&nbsp;<span class="op" id="6590030">[</span><span class="op" id="6590031">]</span><span class="builtintype" id="6590032">byte</span><span class="op" id="6590036">(</span><span class="string" id="6590037">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="6590057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590061">var</span>&nbsp;<span class="ident" id="6590065">b</span>&nbsp;<span class="ident" id="6590067">bytes</span><span class="op" id="6590072">.</span><span class="ident" id="6590073">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590081">tw</span>&nbsp;<span class="op" id="6590084">:=</span>&nbsp;<span class="ident" id="6590087">NewWriter</span><span class="op" id="6590096">(</span><span class="op" id="6590097">&amp;</span><span class="ident" id="6590098">b</span><span class="op" id="6590099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590102">hdr</span>&nbsp;<span class="op" id="6590106">:=</span>&nbsp;<span class="op" id="6590109">&amp;</span><span class="ident" id="6590110">Header</span><span class="op" id="6590116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590120">Name</span><span class="op" id="6590124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6590129">&#34;file.txt&#34;</span><span class="op" id="6590139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590143">Uid</span><span class="op" id="6590146">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6590152">1</span>&nbsp;<span class="op" id="6590154">&lt;&lt;</span>&nbsp;<span class="num" id="6590157">21</span><span class="op" id="6590159">,</span>&nbsp;<span class="comment" id="6590161">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590193">Size</span><span class="op" id="6590197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6590202">int64</span><span class="op" id="6590207">(</span><span class="builtinfunc" id="6590208">len</span><span class="op" id="6590211">(</span><span class="ident" id="6590212">data</span><span class="op" id="6590216">)</span><span class="op" id="6590217">)</span><span class="op" id="6590218">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590222">ModTime</span><span class="op" id="6590229">:</span>&nbsp;<span class="ident" id="6590231">time</span><span class="op" id="6590235">.</span><span class="ident" id="6590236">Now</span><span class="op" id="6590239">(</span><span class="op" id="6590240">)</span><span class="op" id="6590241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6590247">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590287">hdr</span><span class="op" id="6590290">.</span><span class="ident" id="6590291">ModTime</span>&nbsp;<span class="op" id="6590299">=</span>&nbsp;<span class="ident" id="6590301">hdr</span><span class="op" id="6590304">.</span><span class="ident" id="6590305">ModTime</span><span class="op" id="6590312">.</span><span class="ident" id="6590313">Add</span><span class="op" id="6590316">(</span><span class="op" id="6590317">-</span><span class="ident" id="6590318">time</span><span class="op" id="6590322">.</span><span class="ident" id="6590323">Duration</span><span class="op" id="6590331">(</span><span class="ident" id="6590332">hdr</span><span class="op" id="6590335">.</span><span class="ident" id="6590336">ModTime</span><span class="op" id="6590343">.</span><span class="ident" id="6590344">Nanosecond</span><span class="op" id="6590354">(</span><span class="op" id="6590355">)</span><span class="op" id="6590356">)</span>&nbsp;<span class="op" id="6590358">*</span>&nbsp;<span class="ident" id="6590360">time</span><span class="op" id="6590364">.</span><span class="ident" id="6590365">Nanosecond</span><span class="op" id="6590375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590378">if</span>&nbsp;<span class="ident" id="6590381">err</span>&nbsp;<span class="op" id="6590385">:=</span>&nbsp;<span class="ident" id="6590388">tw</span><span class="op" id="6590390">.</span><span class="ident" id="6590391">WriteHeader</span><span class="op" id="6590402">(</span><span class="ident" id="6590403">hdr</span><span class="op" id="6590406">)</span><span class="op" id="6590407">;</span>&nbsp;<span class="ident" id="6590409">err</span>&nbsp;<span class="op" id="6590413">!=</span>&nbsp;<span class="ident" id="6590416">nil</span>&nbsp;<span class="op" id="6590420">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590424">t</span><span class="op" id="6590425">.</span><span class="ident" id="6590426">Fatalf</span><span class="op" id="6590432">(</span><span class="string" id="6590433">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="6590453">,</span>&nbsp;<span class="ident" id="6590455">err</span><span class="op" id="6590458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590464">if</span>&nbsp;<span class="ident" id="6590467">_</span><span class="op" id="6590468">,</span>&nbsp;<span class="ident" id="6590470">err</span>&nbsp;<span class="op" id="6590474">:=</span>&nbsp;<span class="ident" id="6590477">tw</span><span class="op" id="6590479">.</span><span class="ident" id="6590480">Write</span><span class="op" id="6590485">(</span><span class="ident" id="6590486">data</span><span class="op" id="6590490">)</span><span class="op" id="6590491">;</span>&nbsp;<span class="ident" id="6590493">err</span>&nbsp;<span class="op" id="6590497">!=</span>&nbsp;<span class="ident" id="6590500">nil</span>&nbsp;<span class="op" id="6590504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590508">t</span><span class="op" id="6590509">.</span><span class="ident" id="6590510">Fatalf</span><span class="op" id="6590516">(</span><span class="string" id="6590517">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="6590531">,</span>&nbsp;<span class="ident" id="6590533">err</span><span class="op" id="6590536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590539">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590542">if</span>&nbsp;<span class="ident" id="6590545">err</span>&nbsp;<span class="op" id="6590549">:=</span>&nbsp;<span class="ident" id="6590552">tw</span><span class="op" id="6590554">.</span><span class="ident" id="6590555">Close</span><span class="op" id="6590560">(</span><span class="op" id="6590561">)</span><span class="op" id="6590562">;</span>&nbsp;<span class="ident" id="6590564">err</span>&nbsp;<span class="op" id="6590568">!=</span>&nbsp;<span class="ident" id="6590571">nil</span>&nbsp;<span class="op" id="6590575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590579">t</span><span class="op" id="6590580">.</span><span class="ident" id="6590581">Fatalf</span><span class="op" id="6590587">(</span><span class="string" id="6590588">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="6590602">,</span>&nbsp;<span class="ident" id="6590604">err</span><span class="op" id="6590607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6590614">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590632">tr</span>&nbsp;<span class="op" id="6590635">:=</span>&nbsp;<span class="ident" id="6590638">NewReader</span><span class="op" id="6590647">(</span><span class="op" id="6590648">&amp;</span><span class="ident" id="6590649">b</span><span class="op" id="6590650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590653">rHdr</span><span class="op" id="6590657">,</span>&nbsp;<span class="ident" id="6590659">err</span>&nbsp;<span class="op" id="6590663">:=</span>&nbsp;<span class="ident" id="6590666">tr</span><span class="op" id="6590668">.</span><span class="ident" id="6590669">Next</span><span class="op" id="6590673">(</span><span class="op" id="6590674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590677">if</span>&nbsp;<span class="ident" id="6590680">err</span>&nbsp;<span class="op" id="6590684">!=</span>&nbsp;<span class="ident" id="6590687">nil</span>&nbsp;<span class="op" id="6590691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590695">t</span><span class="op" id="6590696">.</span><span class="ident" id="6590697">Fatalf</span><span class="op" id="6590703">(</span><span class="string" id="6590704">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="6590717">,</span>&nbsp;<span class="ident" id="6590719">err</span><span class="op" id="6590722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590725">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590728">if</span>&nbsp;<span class="op" id="6590731">!</span><span class="ident" id="6590732">reflect</span><span class="op" id="6590739">.</span><span class="ident" id="6590740">DeepEqual</span><span class="op" id="6590749">(</span><span class="ident" id="6590750">rHdr</span><span class="op" id="6590754">,</span>&nbsp;<span class="ident" id="6590756">hdr</span><span class="op" id="6590759">)</span>&nbsp;<span class="op" id="6590761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590765">t</span><span class="op" id="6590766">.</span><span class="ident" id="6590767">Errorf</span><span class="op" id="6590773">(</span><span class="string" id="6590774">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6590812">,</span>&nbsp;<span class="ident" id="6590814">rHdr</span><span class="op" id="6590818">,</span>&nbsp;<span class="ident" id="6590820">hdr</span><span class="op" id="6590823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590829">rData</span><span class="op" id="6590834">,</span>&nbsp;<span class="ident" id="6590836">err</span>&nbsp;<span class="op" id="6590840">:=</span>&nbsp;<span class="ident" id="6590843">ioutil</span><span class="op" id="6590849">.</span><span class="ident" id="6590850">ReadAll</span><span class="op" id="6590857">(</span><span class="ident" id="6590858">tr</span><span class="op" id="6590860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590863">if</span>&nbsp;<span class="ident" id="6590866">err</span>&nbsp;<span class="op" id="6590870">!=</span>&nbsp;<span class="ident" id="6590873">nil</span>&nbsp;<span class="op" id="6590877">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590881">t</span><span class="op" id="6590882">.</span><span class="ident" id="6590883">Fatalf</span><span class="op" id="6590889">(</span><span class="string" id="6590890">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="6590900">,</span>&nbsp;<span class="ident" id="6590902">err</span><span class="op" id="6590905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6590908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6590911">if</span>&nbsp;<span class="op" id="6590914">!</span><span class="ident" id="6590915">bytes</span><span class="op" id="6590920">.</span><span class="ident" id="6590921">Equal</span><span class="op" id="6590926">(</span><span class="ident" id="6590927">rData</span><span class="op" id="6590932">,</span>&nbsp;<span class="ident" id="6590934">data</span><span class="op" id="6590938">)</span>&nbsp;<span class="op" id="6590940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6590944">t</span><span class="op" id="6590945">.</span><span class="ident" id="6590946">Errorf</span><span class="op" id="6590952">(</span><span class="string" id="6590953">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="6590987">,</span>&nbsp;<span class="ident" id="6590989">rData</span><span class="op" id="6590994">,</span>&nbsp;<span class="ident" id="6590996">data</span><span class="op" id="6591000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591003">}</span><br>
<span class="lineno">130</span><span class="op" id="6591005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6591008">type</span>&nbsp;<span class="ident" id="6591013">headerRoundTripTest</span>&nbsp;<span class="keyword" id="6591033">struct</span>&nbsp;<span class="op" id="6591040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591043">h</span>&nbsp;&nbsp;<span class="op" id="6591046">*</span><span class="ident" id="6591047">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591055">fm</span>&nbsp;<span class="ident" id="6591058">os</span><span class="op" id="6591060">.</span><span class="ident" id="6591061">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="6591070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6591073">func</span>&nbsp;<span class="ident" id="6591078">TestHeaderRoundTrip</span><span class="op" id="6591097">(</span><span class="ident" id="6591098">t</span>&nbsp;<span class="op" id="6591100">*</span><span class="ident" id="6591101">testing</span><span class="op" id="6591108">.</span><span class="ident" id="6591109">T</span><span class="op" id="6591110">)</span>&nbsp;<span class="op" id="6591112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591115">golden</span>&nbsp;<span class="op" id="6591122">:=</span>&nbsp;<span class="op" id="6591125">[</span><span class="op" id="6591126">]</span><span class="ident" id="6591127">headerRoundTripTest</span><span class="op" id="6591146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6591150">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591174">h</span><span class="op" id="6591175">:</span>&nbsp;<span class="op" id="6591177">&amp;</span><span class="ident" id="6591178">Header</span><span class="op" id="6591184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591190">Name</span><span class="op" id="6591194">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6591200">&#34;test.txt&#34;</span><span class="op" id="6591210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591216">Mode</span><span class="op" id="6591220">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591226">0644</span>&nbsp;<span class="op" id="6591231">|</span>&nbsp;<span class="ident" id="6591233">c_ISREG</span><span class="op" id="6591240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591246">Size</span><span class="op" id="6591250">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591256">12</span><span class="op" id="6591258">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591264">ModTime</span><span class="op" id="6591271">:</span>&nbsp;&nbsp;<span class="ident" id="6591274">time</span><span class="op" id="6591278">.</span><span class="ident" id="6591279">Unix</span><span class="op" id="6591283">(</span><span class="num" id="6591284">1360600916</span><span class="op" id="6591294">,</span>&nbsp;<span class="num" id="6591296">0</span><span class="op" id="6591297">)</span><span class="op" id="6591298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591304">Typeflag</span><span class="op" id="6591312">:</span>&nbsp;<span class="ident" id="6591314">TypeReg</span><span class="op" id="6591321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591326">}</span><span class="op" id="6591327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591332">fm</span><span class="op" id="6591334">:</span>&nbsp;<span class="num" id="6591336">0644</span><span class="op" id="6591340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591344">}</span><span class="op" id="6591345">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6591349">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591370">h</span><span class="op" id="6591371">:</span>&nbsp;<span class="op" id="6591373">&amp;</span><span class="ident" id="6591374">Header</span><span class="op" id="6591380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591386">Name</span><span class="op" id="6591390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6591396">&#34;hard.txt&#34;</span><span class="op" id="6591406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591412">Mode</span><span class="op" id="6591416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591422">0644</span>&nbsp;<span class="op" id="6591427">|</span>&nbsp;<span class="ident" id="6591429">c_ISLNK</span><span class="op" id="6591436">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591442">Size</span><span class="op" id="6591446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591452">0</span><span class="op" id="6591453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591459">ModTime</span><span class="op" id="6591466">:</span>&nbsp;&nbsp;<span class="ident" id="6591469">time</span><span class="op" id="6591473">.</span><span class="ident" id="6591474">Unix</span><span class="op" id="6591478">(</span><span class="num" id="6591479">1360600916</span><span class="op" id="6591489">,</span>&nbsp;<span class="num" id="6591491">0</span><span class="op" id="6591492">)</span><span class="op" id="6591493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591499">Typeflag</span><span class="op" id="6591507">:</span>&nbsp;<span class="ident" id="6591509">TypeLink</span><span class="op" id="6591517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591522">}</span><span class="op" id="6591523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591528">fm</span><span class="op" id="6591530">:</span>&nbsp;<span class="num" id="6591532">0644</span>&nbsp;<span class="op" id="6591537">|</span>&nbsp;<span class="ident" id="6591539">os</span><span class="op" id="6591541">.</span><span class="ident" id="6591542">ModeSymlink</span><span class="op" id="6591553">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591557">}</span><span class="op" id="6591558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6591562">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591587">h</span><span class="op" id="6591588">:</span>&nbsp;<span class="op" id="6591590">&amp;</span><span class="ident" id="6591591">Header</span><span class="op" id="6591597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591603">Name</span><span class="op" id="6591607">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6591613">&#34;link.txt&#34;</span><span class="op" id="6591623">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591629">Mode</span><span class="op" id="6591633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591639">0777</span>&nbsp;<span class="op" id="6591644">|</span>&nbsp;<span class="ident" id="6591646">c_ISLNK</span><span class="op" id="6591653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591659">Size</span><span class="op" id="6591663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591669">0</span><span class="op" id="6591670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591676">ModTime</span><span class="op" id="6591683">:</span>&nbsp;&nbsp;<span class="ident" id="6591686">time</span><span class="op" id="6591690">.</span><span class="ident" id="6591691">Unix</span><span class="op" id="6591695">(</span><span class="num" id="6591696">1360600852</span><span class="op" id="6591706">,</span>&nbsp;<span class="num" id="6591708">0</span><span class="op" id="6591709">)</span><span class="op" id="6591710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591716">Typeflag</span><span class="op" id="6591724">:</span>&nbsp;<span class="ident" id="6591726">TypeSymlink</span><span class="op" id="6591737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591742">}</span><span class="op" id="6591743">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591748">fm</span><span class="op" id="6591750">:</span>&nbsp;<span class="num" id="6591752">0777</span>&nbsp;<span class="op" id="6591757">|</span>&nbsp;<span class="ident" id="6591759">os</span><span class="op" id="6591761">.</span><span class="ident" id="6591762">ModeSymlink</span><span class="op" id="6591773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591777">}</span><span class="op" id="6591778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6591782">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591815">h</span><span class="op" id="6591816">:</span>&nbsp;<span class="op" id="6591818">&amp;</span><span class="ident" id="6591819">Header</span><span class="op" id="6591825">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591831">Name</span><span class="op" id="6591835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6591841">&#34;dev/null&#34;</span><span class="op" id="6591851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591857">Mode</span><span class="op" id="6591861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591867">0666</span>&nbsp;<span class="op" id="6591872">|</span>&nbsp;<span class="ident" id="6591874">c_ISCHR</span><span class="op" id="6591881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591887">Size</span><span class="op" id="6591891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6591897">0</span><span class="op" id="6591898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591904">ModTime</span><span class="op" id="6591911">:</span>&nbsp;&nbsp;<span class="ident" id="6591914">time</span><span class="op" id="6591918">.</span><span class="ident" id="6591919">Unix</span><span class="op" id="6591923">(</span><span class="num" id="6591924">1360578951</span><span class="op" id="6591934">,</span>&nbsp;<span class="num" id="6591936">0</span><span class="op" id="6591937">)</span><span class="op" id="6591938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591944">Typeflag</span><span class="op" id="6591952">:</span>&nbsp;<span class="ident" id="6591954">TypeChar</span><span class="op" id="6591962">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6591967">}</span><span class="op" id="6591968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6591973">fm</span><span class="op" id="6591975">:</span>&nbsp;<span class="num" id="6591977">0666</span>&nbsp;<span class="op" id="6591982">|</span>&nbsp;<span class="ident" id="6591984">os</span><span class="op" id="6591986">.</span><span class="ident" id="6591987">ModeDevice</span>&nbsp;<span class="op" id="6591998">|</span>&nbsp;<span class="ident" id="6592000">os</span><span class="op" id="6592002">.</span><span class="ident" id="6592003">ModeCharDevice</span><span class="op" id="6592017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592021">}</span><span class="op" id="6592022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6592026">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592050">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592055">h</span><span class="op" id="6592056">:</span>&nbsp;<span class="op" id="6592058">&amp;</span><span class="ident" id="6592059">Header</span><span class="op" id="6592065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592071">Name</span><span class="op" id="6592075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6592081">&#34;dev/sda&#34;</span><span class="op" id="6592090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592096">Mode</span><span class="op" id="6592100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592106">0660</span>&nbsp;<span class="op" id="6592111">|</span>&nbsp;<span class="ident" id="6592113">c_ISBLK</span><span class="op" id="6592120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592126">Size</span><span class="op" id="6592130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592136">0</span><span class="op" id="6592137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592143">ModTime</span><span class="op" id="6592150">:</span>&nbsp;&nbsp;<span class="ident" id="6592153">time</span><span class="op" id="6592157">.</span><span class="ident" id="6592158">Unix</span><span class="op" id="6592162">(</span><span class="num" id="6592163">1360578954</span><span class="op" id="6592173">,</span>&nbsp;<span class="num" id="6592175">0</span><span class="op" id="6592176">)</span><span class="op" id="6592177">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592183">Typeflag</span><span class="op" id="6592191">:</span>&nbsp;<span class="ident" id="6592193">TypeBlock</span><span class="op" id="6592202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592207">}</span><span class="op" id="6592208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592213">fm</span><span class="op" id="6592215">:</span>&nbsp;<span class="num" id="6592217">0660</span>&nbsp;<span class="op" id="6592222">|</span>&nbsp;<span class="ident" id="6592224">os</span><span class="op" id="6592226">.</span><span class="ident" id="6592227">ModeDevice</span><span class="op" id="6592237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592241">}</span><span class="op" id="6592242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6592246">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592267">h</span><span class="op" id="6592268">:</span>&nbsp;<span class="op" id="6592270">&amp;</span><span class="ident" id="6592271">Header</span><span class="op" id="6592277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592283">Name</span><span class="op" id="6592287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6592293">&#34;dir/&#34;</span><span class="op" id="6592299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592305">Mode</span><span class="op" id="6592309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592315">0755</span>&nbsp;<span class="op" id="6592320">|</span>&nbsp;<span class="ident" id="6592322">c_ISDIR</span><span class="op" id="6592329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592335">Size</span><span class="op" id="6592339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592345">0</span><span class="op" id="6592346">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592352">ModTime</span><span class="op" id="6592359">:</span>&nbsp;&nbsp;<span class="ident" id="6592362">time</span><span class="op" id="6592366">.</span><span class="ident" id="6592367">Unix</span><span class="op" id="6592371">(</span><span class="num" id="6592372">1360601116</span><span class="op" id="6592382">,</span>&nbsp;<span class="num" id="6592384">0</span><span class="op" id="6592385">)</span><span class="op" id="6592386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592392">Typeflag</span><span class="op" id="6592400">:</span>&nbsp;<span class="ident" id="6592402">TypeDir</span><span class="op" id="6592409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592414">}</span><span class="op" id="6592415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592420">fm</span><span class="op" id="6592422">:</span>&nbsp;<span class="num" id="6592424">0755</span>&nbsp;<span class="op" id="6592429">|</span>&nbsp;<span class="ident" id="6592431">os</span><span class="op" id="6592433">.</span><span class="ident" id="6592434">ModeDir</span><span class="op" id="6592441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592445">}</span><span class="op" id="6592446">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6592450">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592471">h</span><span class="op" id="6592472">:</span>&nbsp;<span class="op" id="6592474">&amp;</span><span class="ident" id="6592475">Header</span><span class="op" id="6592481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592487">Name</span><span class="op" id="6592491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6592497">&#34;dev/initctl&#34;</span><span class="op" id="6592510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592516">Mode</span><span class="op" id="6592520">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592526">0600</span>&nbsp;<span class="op" id="6592531">|</span>&nbsp;<span class="ident" id="6592533">c_ISFIFO</span><span class="op" id="6592541">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592547">Size</span><span class="op" id="6592551">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592557">0</span><span class="op" id="6592558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592564">ModTime</span><span class="op" id="6592571">:</span>&nbsp;&nbsp;<span class="ident" id="6592574">time</span><span class="op" id="6592578">.</span><span class="ident" id="6592579">Unix</span><span class="op" id="6592583">(</span><span class="num" id="6592584">1360578949</span><span class="op" id="6592594">,</span>&nbsp;<span class="num" id="6592596">0</span><span class="op" id="6592597">)</span><span class="op" id="6592598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592604">Typeflag</span><span class="op" id="6592612">:</span>&nbsp;<span class="ident" id="6592614">TypeFifo</span><span class="op" id="6592622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592627">}</span><span class="op" id="6592628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592633">fm</span><span class="op" id="6592635">:</span>&nbsp;<span class="num" id="6592637">0600</span>&nbsp;<span class="op" id="6592642">|</span>&nbsp;<span class="ident" id="6592644">os</span><span class="op" id="6592646">.</span><span class="ident" id="6592647">ModeNamedPipe</span><span class="op" id="6592660">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592664">}</span><span class="op" id="6592665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6592669">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592687">h</span><span class="op" id="6592688">:</span>&nbsp;<span class="op" id="6592690">&amp;</span><span class="ident" id="6592691">Header</span><span class="op" id="6592697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592703">Name</span><span class="op" id="6592707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6592713">&#34;bin/su&#34;</span><span class="op" id="6592721">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592727">Mode</span><span class="op" id="6592731">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592737">0755</span>&nbsp;<span class="op" id="6592742">|</span>&nbsp;<span class="ident" id="6592744">c_ISREG</span>&nbsp;<span class="op" id="6592752">|</span>&nbsp;<span class="ident" id="6592754">c_ISUID</span><span class="op" id="6592761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592767">Size</span><span class="op" id="6592771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592777">23232</span><span class="op" id="6592782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592788">ModTime</span><span class="op" id="6592795">:</span>&nbsp;&nbsp;<span class="ident" id="6592798">time</span><span class="op" id="6592802">.</span><span class="ident" id="6592803">Unix</span><span class="op" id="6592807">(</span><span class="num" id="6592808">1355405093</span><span class="op" id="6592818">,</span>&nbsp;<span class="num" id="6592820">0</span><span class="op" id="6592821">)</span><span class="op" id="6592822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592828">Typeflag</span><span class="op" id="6592836">:</span>&nbsp;<span class="ident" id="6592838">TypeReg</span><span class="op" id="6592845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592850">}</span><span class="op" id="6592851">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592856">fm</span><span class="op" id="6592858">:</span>&nbsp;<span class="num" id="6592860">0755</span>&nbsp;<span class="op" id="6592865">|</span>&nbsp;<span class="ident" id="6592867">os</span><span class="op" id="6592869">.</span><span class="ident" id="6592870">ModeSetuid</span><span class="op" id="6592880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592884">}</span><span class="op" id="6592885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6592889">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6592903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592908">h</span><span class="op" id="6592909">:</span>&nbsp;<span class="op" id="6592911">&amp;</span><span class="ident" id="6592912">Header</span><span class="op" id="6592918">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592924">Name</span><span class="op" id="6592928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6592934">&#34;group.txt&#34;</span><span class="op" id="6592945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592951">Mode</span><span class="op" id="6592955">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6592961">0750</span>&nbsp;<span class="op" id="6592966">|</span>&nbsp;<span class="ident" id="6592968">c_ISREG</span>&nbsp;<span class="op" id="6592976">|</span>&nbsp;<span class="ident" id="6592978">c_ISGID</span><span class="op" id="6592985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6592991">Size</span><span class="op" id="6592995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6593001">0</span><span class="op" id="6593002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593008">ModTime</span><span class="op" id="6593015">:</span>&nbsp;&nbsp;<span class="ident" id="6593018">time</span><span class="op" id="6593022">.</span><span class="ident" id="6593023">Unix</span><span class="op" id="6593027">(</span><span class="num" id="6593028">1360602346</span><span class="op" id="6593038">,</span>&nbsp;<span class="num" id="6593040">0</span><span class="op" id="6593041">)</span><span class="op" id="6593042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593048">Typeflag</span><span class="op" id="6593056">:</span>&nbsp;<span class="ident" id="6593058">TypeReg</span><span class="op" id="6593065">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593070">}</span><span class="op" id="6593071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593076">fm</span><span class="op" id="6593078">:</span>&nbsp;<span class="num" id="6593080">0750</span>&nbsp;<span class="op" id="6593085">|</span>&nbsp;<span class="ident" id="6593087">os</span><span class="op" id="6593089">.</span><span class="ident" id="6593090">ModeSetgid</span><span class="op" id="6593100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593104">}</span><span class="op" id="6593105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6593109">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593122">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593127">h</span><span class="op" id="6593128">:</span>&nbsp;<span class="op" id="6593130">&amp;</span><span class="ident" id="6593131">Header</span><span class="op" id="6593137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593143">Name</span><span class="op" id="6593147">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6593153">&#34;sticky.txt&#34;</span><span class="op" id="6593165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593171">Mode</span><span class="op" id="6593175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6593181">0600</span>&nbsp;<span class="op" id="6593186">|</span>&nbsp;<span class="ident" id="6593188">c_ISREG</span>&nbsp;<span class="op" id="6593196">|</span>&nbsp;<span class="ident" id="6593198">c_ISVTX</span><span class="op" id="6593205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593211">Size</span><span class="op" id="6593215">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6593221">7</span><span class="op" id="6593222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593228">ModTime</span><span class="op" id="6593235">:</span>&nbsp;&nbsp;<span class="ident" id="6593238">time</span><span class="op" id="6593242">.</span><span class="ident" id="6593243">Unix</span><span class="op" id="6593247">(</span><span class="num" id="6593248">1360602540</span><span class="op" id="6593258">,</span>&nbsp;<span class="num" id="6593260">0</span><span class="op" id="6593261">)</span><span class="op" id="6593262">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593268">Typeflag</span><span class="op" id="6593276">:</span>&nbsp;<span class="ident" id="6593278">TypeReg</span><span class="op" id="6593285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593290">}</span><span class="op" id="6593291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593296">fm</span><span class="op" id="6593298">:</span>&nbsp;<span class="num" id="6593300">0600</span>&nbsp;<span class="op" id="6593305">|</span>&nbsp;<span class="ident" id="6593307">os</span><span class="op" id="6593309">.</span><span class="ident" id="6593310">ModeSticky</span><span class="op" id="6593320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593324">}</span><span class="op" id="6593325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593328">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593332">for</span>&nbsp;<span class="ident" id="6593336">i</span><span class="op" id="6593337">,</span>&nbsp;<span class="ident" id="6593339">g</span>&nbsp;<span class="op" id="6593341">:=</span>&nbsp;<span class="keyword" id="6593344">range</span>&nbsp;<span class="ident" id="6593350">golden</span>&nbsp;<span class="op" id="6593357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593361">fi</span>&nbsp;<span class="op" id="6593364">:=</span>&nbsp;<span class="ident" id="6593367">g</span><span class="op" id="6593368">.</span><span class="ident" id="6593369">h</span><span class="op" id="6593370">.</span><span class="ident" id="6593371">FileInfo</span><span class="op" id="6593379">(</span><span class="op" id="6593380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593384">h2</span><span class="op" id="6593386">,</span>&nbsp;<span class="ident" id="6593388">err</span>&nbsp;<span class="op" id="6593392">:=</span>&nbsp;<span class="ident" id="6593395">FileInfoHeader</span><span class="op" id="6593409">(</span><span class="ident" id="6593410">fi</span><span class="op" id="6593412">,</span>&nbsp;<span class="string" id="6593414">&#34;&#34;</span><span class="op" id="6593416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593420">if</span>&nbsp;<span class="ident" id="6593423">err</span>&nbsp;<span class="op" id="6593427">!=</span>&nbsp;<span class="ident" id="6593430">nil</span>&nbsp;<span class="op" id="6593434">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593439">t</span><span class="op" id="6593440">.</span><span class="ident" id="6593441">Error</span><span class="op" id="6593446">(</span><span class="ident" id="6593447">err</span><span class="op" id="6593450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593455">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593470">if</span>&nbsp;<span class="ident" id="6593473">strings</span><span class="op" id="6593480">.</span><span class="ident" id="6593481">Contains</span><span class="op" id="6593489">(</span><span class="ident" id="6593490">fi</span><span class="op" id="6593492">.</span><span class="ident" id="6593493">Name</span><span class="op" id="6593497">(</span><span class="op" id="6593498">)</span><span class="op" id="6593499">,</span>&nbsp;<span class="string" id="6593501">&#34;/&#34;</span><span class="op" id="6593504">)</span>&nbsp;<span class="op" id="6593506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593511">t</span><span class="op" id="6593512">.</span><span class="ident" id="6593513">Errorf</span><span class="op" id="6593519">(</span><span class="string" id="6593520">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="6593555">,</span>&nbsp;<span class="ident" id="6593557">g</span><span class="op" id="6593558">.</span><span class="ident" id="6593559">h</span><span class="op" id="6593560">.</span><span class="ident" id="6593561">Name</span><span class="op" id="6593565">,</span>&nbsp;<span class="ident" id="6593567">fi</span><span class="op" id="6593569">.</span><span class="ident" id="6593570">Name</span><span class="op" id="6593574">(</span><span class="op" id="6593575">)</span><span class="op" id="6593576">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593584">name</span>&nbsp;<span class="op" id="6593589">:=</span>&nbsp;<span class="ident" id="6593592">path</span><span class="op" id="6593596">.</span><span class="ident" id="6593597">Base</span><span class="op" id="6593601">(</span><span class="ident" id="6593602">g</span><span class="op" id="6593603">.</span><span class="ident" id="6593604">h</span><span class="op" id="6593605">.</span><span class="ident" id="6593606">Name</span><span class="op" id="6593610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593614">if</span>&nbsp;<span class="ident" id="6593617">fi</span><span class="op" id="6593619">.</span><span class="ident" id="6593620">IsDir</span><span class="op" id="6593625">(</span><span class="op" id="6593626">)</span>&nbsp;<span class="op" id="6593628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593633">name</span>&nbsp;<span class="op" id="6593638">+=</span>&nbsp;<span class="string" id="6593641">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593647">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593651">if</span>&nbsp;<span class="ident" id="6593654">got</span><span class="op" id="6593657">,</span>&nbsp;<span class="ident" id="6593659">want</span>&nbsp;<span class="op" id="6593664">:=</span>&nbsp;<span class="ident" id="6593667">h2</span><span class="op" id="6593669">.</span><span class="ident" id="6593670">Name</span><span class="op" id="6593674">,</span>&nbsp;<span class="ident" id="6593676">name</span><span class="op" id="6593680">;</span>&nbsp;<span class="ident" id="6593682">got</span>&nbsp;<span class="op" id="6593686">!=</span>&nbsp;<span class="ident" id="6593689">want</span>&nbsp;<span class="op" id="6593694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593699">t</span><span class="op" id="6593700">.</span><span class="ident" id="6593701">Errorf</span><span class="op" id="6593707">(</span><span class="string" id="6593708">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6593737">,</span>&nbsp;<span class="ident" id="6593739">i</span><span class="op" id="6593740">,</span>&nbsp;<span class="ident" id="6593742">got</span><span class="op" id="6593745">,</span>&nbsp;<span class="ident" id="6593747">want</span><span class="op" id="6593751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593759">if</span>&nbsp;<span class="ident" id="6593762">got</span><span class="op" id="6593765">,</span>&nbsp;<span class="ident" id="6593767">want</span>&nbsp;<span class="op" id="6593772">:=</span>&nbsp;<span class="ident" id="6593775">h2</span><span class="op" id="6593777">.</span><span class="ident" id="6593778">Size</span><span class="op" id="6593782">,</span>&nbsp;<span class="ident" id="6593784">g</span><span class="op" id="6593785">.</span><span class="ident" id="6593786">h</span><span class="op" id="6593787">.</span><span class="ident" id="6593788">Size</span><span class="op" id="6593792">;</span>&nbsp;<span class="ident" id="6593794">got</span>&nbsp;<span class="op" id="6593798">!=</span>&nbsp;<span class="ident" id="6593801">want</span>&nbsp;<span class="op" id="6593806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593811">t</span><span class="op" id="6593812">.</span><span class="ident" id="6593813">Errorf</span><span class="op" id="6593819">(</span><span class="string" id="6593820">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6593849">,</span>&nbsp;<span class="ident" id="6593851">i</span><span class="op" id="6593852">,</span>&nbsp;<span class="ident" id="6593854">got</span><span class="op" id="6593857">,</span>&nbsp;<span class="ident" id="6593859">want</span><span class="op" id="6593863">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593871">if</span>&nbsp;<span class="ident" id="6593874">got</span><span class="op" id="6593877">,</span>&nbsp;<span class="ident" id="6593879">want</span>&nbsp;<span class="op" id="6593884">:=</span>&nbsp;<span class="ident" id="6593887">h2</span><span class="op" id="6593889">.</span><span class="ident" id="6593890">Mode</span><span class="op" id="6593894">,</span>&nbsp;<span class="ident" id="6593896">g</span><span class="op" id="6593897">.</span><span class="ident" id="6593898">h</span><span class="op" id="6593899">.</span><span class="ident" id="6593900">Mode</span><span class="op" id="6593904">;</span>&nbsp;<span class="ident" id="6593906">got</span>&nbsp;<span class="op" id="6593910">!=</span>&nbsp;<span class="ident" id="6593913">want</span>&nbsp;<span class="op" id="6593918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6593923">t</span><span class="op" id="6593924">.</span><span class="ident" id="6593925">Errorf</span><span class="op" id="6593931">(</span><span class="string" id="6593932">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="6593961">,</span>&nbsp;<span class="ident" id="6593963">i</span><span class="op" id="6593964">,</span>&nbsp;<span class="ident" id="6593966">got</span><span class="op" id="6593969">,</span>&nbsp;<span class="ident" id="6593971">want</span><span class="op" id="6593975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6593979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6593983">if</span>&nbsp;<span class="ident" id="6593986">got</span><span class="op" id="6593989">,</span>&nbsp;<span class="ident" id="6593991">want</span>&nbsp;<span class="op" id="6593996">:=</span>&nbsp;<span class="ident" id="6593999">fi</span><span class="op" id="6594001">.</span><span class="ident" id="6594002">Mode</span><span class="op" id="6594006">(</span><span class="op" id="6594007">)</span><span class="op" id="6594008">,</span>&nbsp;<span class="ident" id="6594010">g</span><span class="op" id="6594011">.</span><span class="ident" id="6594012">fm</span><span class="op" id="6594014">;</span>&nbsp;<span class="ident" id="6594016">got</span>&nbsp;<span class="op" id="6594020">!=</span>&nbsp;<span class="ident" id="6594023">want</span>&nbsp;<span class="op" id="6594028">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6594033">t</span><span class="op" id="6594034">.</span><span class="ident" id="6594035">Errorf</span><span class="op" id="6594041">(</span><span class="string" id="6594042">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="6594074">,</span>&nbsp;<span class="ident" id="6594076">i</span><span class="op" id="6594077">,</span>&nbsp;<span class="ident" id="6594079">got</span><span class="op" id="6594082">,</span>&nbsp;<span class="ident" id="6594084">want</span><span class="op" id="6594088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6594092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6594096">if</span>&nbsp;<span class="ident" id="6594099">got</span><span class="op" id="6594102">,</span>&nbsp;<span class="ident" id="6594104">want</span>&nbsp;<span class="op" id="6594109">:=</span>&nbsp;<span class="ident" id="6594112">h2</span><span class="op" id="6594114">.</span><span class="ident" id="6594115">ModTime</span><span class="op" id="6594122">,</span>&nbsp;<span class="ident" id="6594124">g</span><span class="op" id="6594125">.</span><span class="ident" id="6594126">h</span><span class="op" id="6594127">.</span><span class="ident" id="6594128">ModTime</span><span class="op" id="6594135">;</span>&nbsp;<span class="ident" id="6594137">got</span>&nbsp;<span class="op" id="6594141">!=</span>&nbsp;<span class="ident" id="6594144">want</span>&nbsp;<span class="op" id="6594149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6594154">t</span><span class="op" id="6594155">.</span><span class="ident" id="6594156">Errorf</span><span class="op" id="6594162">(</span><span class="string" id="6594163">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6594195">,</span>&nbsp;<span class="ident" id="6594197">i</span><span class="op" id="6594198">,</span>&nbsp;<span class="ident" id="6594200">got</span><span class="op" id="6594203">,</span>&nbsp;<span class="ident" id="6594205">want</span><span class="op" id="6594209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6594213">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6594217">if</span>&nbsp;<span class="ident" id="6594220">sysh</span><span class="op" id="6594224">,</span>&nbsp;<span class="ident" id="6594226">ok</span>&nbsp;<span class="op" id="6594229">:=</span>&nbsp;<span class="ident" id="6594232">fi</span><span class="op" id="6594234">.</span><span class="ident" id="6594235">Sys</span><span class="op" id="6594238">(</span><span class="op" id="6594239">)</span><span class="op" id="6594240">.</span><span class="op" id="6594241">(</span><span class="op" id="6594242">*</span><span class="ident" id="6594243">Header</span><span class="op" id="6594249">)</span><span class="op" id="6594250">;</span>&nbsp;<span class="op" id="6594252">!</span><span class="ident" id="6594253">ok</span>&nbsp;<span class="op" id="6594256">||</span>&nbsp;<span class="ident" id="6594259">sysh</span>&nbsp;<span class="op" id="6594264">!=</span>&nbsp;<span class="ident" id="6594267">g</span><span class="op" id="6594268">.</span><span class="ident" id="6594269">h</span>&nbsp;<span class="op" id="6594271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6594276">t</span><span class="op" id="6594277">.</span><span class="ident" id="6594278">Errorf</span><span class="op" id="6594284">(</span><span class="string" id="6594285">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="6594327">,</span>&nbsp;<span class="ident" id="6594329">i</span><span class="op" id="6594330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6594334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6594337">}</span><br>
<span class="lineno"></span><span class="op" id="6594339">}</span>
</div>
</body>
</html>
