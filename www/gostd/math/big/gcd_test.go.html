<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7156097">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7156152">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7156206">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7156257">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;a&nbsp;GCD&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="7156298">//&nbsp;Usage:&nbsp;go&nbsp;test&nbsp;math/big&nbsp;-test.bench&nbsp;GCD</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7156342">package</span>&nbsp;<span class="ident" id="7156350">big</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7156355">import</span>&nbsp;<span class="op" id="7156362">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7156365">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7156378">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7156388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7156391">//&nbsp;randInt&nbsp;returns&nbsp;a&nbsp;pseudo-random&nbsp;Int&nbsp;in&nbsp;the&nbsp;range&nbsp;[1&lt;&lt;(size-1),&nbsp;(1&lt;&lt;size)&nbsp;-&nbsp;1]</span><br>
<span class="lineno"></span><span class="keyword" id="7156472">func</span>&nbsp;<span class="ident" id="7156477">randInt</span><span class="op" id="7156484">(</span><span class="ident" id="7156485">r</span>&nbsp;<span class="op" id="7156487">*</span><span class="ident" id="7156488">rand</span><span class="op" id="7156492">.</span><span class="ident" id="7156493">Rand</span><span class="op" id="7156497">,</span>&nbsp;<span class="ident" id="7156499">size</span>&nbsp;<span class="builtintype" id="7156504">uint</span><span class="op" id="7156508">)</span>&nbsp;<span class="op" id="7156510">*</span><span class="ident" id="7156511">Int</span>&nbsp;<span class="op" id="7156515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156518">n</span>&nbsp;<span class="op" id="7156520">:=</span>&nbsp;<span class="builtinfunc" id="7156523">new</span><span class="op" id="7156526">(</span><span class="ident" id="7156527">Int</span><span class="op" id="7156530">)</span><span class="op" id="7156531">.</span><span class="ident" id="7156532">Lsh</span><span class="op" id="7156535">(</span><span class="ident" id="7156536">intOne</span><span class="op" id="7156542">,</span>&nbsp;<span class="ident" id="7156544">size</span><span class="op" id="7156548">-</span><span class="num" id="7156549">1</span><span class="op" id="7156550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156553">x</span>&nbsp;<span class="op" id="7156555">:=</span>&nbsp;<span class="builtinfunc" id="7156558">new</span><span class="op" id="7156561">(</span><span class="ident" id="7156562">Int</span><span class="op" id="7156565">)</span><span class="op" id="7156566">.</span><span class="ident" id="7156567">Rand</span><span class="op" id="7156571">(</span><span class="ident" id="7156572">r</span><span class="op" id="7156573">,</span>&nbsp;<span class="ident" id="7156575">n</span><span class="op" id="7156576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156579">return</span>&nbsp;<span class="ident" id="7156586">x</span><span class="op" id="7156587">.</span><span class="ident" id="7156588">Add</span><span class="op" id="7156591">(</span><span class="ident" id="7156592">x</span><span class="op" id="7156593">,</span>&nbsp;<span class="ident" id="7156595">n</span><span class="op" id="7156596">)</span>&nbsp;<span class="comment" id="7156598">//&nbsp;make&nbsp;sure&nbsp;result&nbsp;&gt;&nbsp;1&lt;&lt;(size-1)</span><br>
<span class="lineno">20</span><span class="op" id="7156632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7156635">func</span>&nbsp;<span class="ident" id="7156640">runGCD</span><span class="op" id="7156646">(</span><span class="ident" id="7156647">b</span>&nbsp;<span class="op" id="7156649">*</span><span class="ident" id="7156650">testing</span><span class="op" id="7156657">.</span><span class="ident" id="7156658">B</span><span class="op" id="7156659">,</span>&nbsp;<span class="ident" id="7156661">aSize</span><span class="op" id="7156666">,</span>&nbsp;<span class="ident" id="7156668">bSize</span>&nbsp;<span class="builtintype" id="7156674">uint</span><span class="op" id="7156678">)</span>&nbsp;<span class="op" id="7156680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156683">b</span><span class="op" id="7156684">.</span><span class="ident" id="7156685">StopTimer</span><span class="op" id="7156694">(</span><span class="op" id="7156695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156698">var</span>&nbsp;<span class="ident" id="7156702">r</span>&nbsp;<span class="op" id="7156704">=</span>&nbsp;<span class="ident" id="7156706">rand</span><span class="op" id="7156710">.</span><span class="ident" id="7156711">New</span><span class="op" id="7156714">(</span><span class="ident" id="7156715">rand</span><span class="op" id="7156719">.</span><span class="ident" id="7156720">NewSource</span><span class="op" id="7156729">(</span><span class="num" id="7156730">1234</span><span class="op" id="7156734">)</span><span class="op" id="7156735">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156738">aa</span>&nbsp;<span class="op" id="7156741">:=</span>&nbsp;<span class="ident" id="7156744">randInt</span><span class="op" id="7156751">(</span><span class="ident" id="7156752">r</span><span class="op" id="7156753">,</span>&nbsp;<span class="ident" id="7156755">aSize</span><span class="op" id="7156760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156763">bb</span>&nbsp;<span class="op" id="7156766">:=</span>&nbsp;<span class="ident" id="7156769">randInt</span><span class="op" id="7156776">(</span><span class="ident" id="7156777">r</span><span class="op" id="7156778">,</span>&nbsp;<span class="ident" id="7156780">bSize</span><span class="op" id="7156785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156788">b</span><span class="op" id="7156789">.</span><span class="ident" id="7156790">StartTimer</span><span class="op" id="7156800">(</span><span class="op" id="7156801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156804">for</span>&nbsp;<span class="ident" id="7156808">i</span>&nbsp;<span class="op" id="7156810">:=</span>&nbsp;<span class="num" id="7156813">0</span><span class="op" id="7156814">;</span>&nbsp;<span class="ident" id="7156816">i</span>&nbsp;<span class="op" id="7156818">&lt;</span>&nbsp;<span class="ident" id="7156820">b</span><span class="op" id="7156821">.</span><span class="ident" id="7156822">N</span><span class="op" id="7156823">;</span>&nbsp;<span class="ident" id="7156825">i</span><span class="op" id="7156826">++</span>&nbsp;<span class="op" id="7156829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7156833">new</span><span class="op" id="7156836">(</span><span class="ident" id="7156837">Int</span><span class="op" id="7156840">)</span><span class="op" id="7156841">.</span><span class="ident" id="7156842">GCD</span><span class="op" id="7156845">(</span><span class="ident" id="7156846">nil</span><span class="op" id="7156849">,</span>&nbsp;<span class="ident" id="7156851">nil</span><span class="op" id="7156854">,</span>&nbsp;<span class="ident" id="7156856">aa</span><span class="op" id="7156858">,</span>&nbsp;<span class="ident" id="7156860">bb</span><span class="op" id="7156862">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156865">}</span><br>
<span class="lineno"></span><span class="op" id="7156867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7156870">func</span>&nbsp;<span class="ident" id="7156875">BenchmarkGCD10x10</span><span class="op" id="7156892">(</span><span class="ident" id="7156893">b</span>&nbsp;<span class="op" id="7156895">*</span><span class="ident" id="7156896">testing</span><span class="op" id="7156903">.</span><span class="ident" id="7156904">B</span><span class="op" id="7156905">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7156915">{</span>&nbsp;<span class="ident" id="7156917">runGCD</span><span class="op" id="7156923">(</span><span class="ident" id="7156924">b</span><span class="op" id="7156925">,</span>&nbsp;<span class="num" id="7156927">10</span><span class="op" id="7156929">,</span>&nbsp;<span class="num" id="7156931">10</span><span class="op" id="7156933">)</span>&nbsp;<span class="op" id="7156935">}</span><br>
<span class="lineno"></span><span class="keyword" id="7156937">func</span>&nbsp;<span class="ident" id="7156942">BenchmarkGCD10x100</span><span class="op" id="7156960">(</span><span class="ident" id="7156961">b</span>&nbsp;<span class="op" id="7156963">*</span><span class="ident" id="7156964">testing</span><span class="op" id="7156971">.</span><span class="ident" id="7156972">B</span><span class="op" id="7156973">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7156982">{</span>&nbsp;<span class="ident" id="7156984">runGCD</span><span class="op" id="7156990">(</span><span class="ident" id="7156991">b</span><span class="op" id="7156992">,</span>&nbsp;<span class="num" id="7156994">10</span><span class="op" id="7156996">,</span>&nbsp;<span class="num" id="7156998">100</span><span class="op" id="7157001">)</span>&nbsp;<span class="op" id="7157003">}</span><br>
<span class="lineno">35</span><span class="keyword" id="7157005">func</span>&nbsp;<span class="ident" id="7157010">BenchmarkGCD10x1000</span><span class="op" id="7157029">(</span><span class="ident" id="7157030">b</span>&nbsp;<span class="op" id="7157032">*</span><span class="ident" id="7157033">testing</span><span class="op" id="7157040">.</span><span class="ident" id="7157041">B</span><span class="op" id="7157042">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157050">{</span>&nbsp;<span class="ident" id="7157052">runGCD</span><span class="op" id="7157058">(</span><span class="ident" id="7157059">b</span><span class="op" id="7157060">,</span>&nbsp;<span class="num" id="7157062">10</span><span class="op" id="7157064">,</span>&nbsp;<span class="num" id="7157066">1000</span><span class="op" id="7157070">)</span>&nbsp;<span class="op" id="7157072">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157074">func</span>&nbsp;<span class="ident" id="7157079">BenchmarkGCD10x10000</span><span class="op" id="7157099">(</span><span class="ident" id="7157100">b</span>&nbsp;<span class="op" id="7157102">*</span><span class="ident" id="7157103">testing</span><span class="op" id="7157110">.</span><span class="ident" id="7157111">B</span><span class="op" id="7157112">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157119">{</span>&nbsp;<span class="ident" id="7157121">runGCD</span><span class="op" id="7157127">(</span><span class="ident" id="7157128">b</span><span class="op" id="7157129">,</span>&nbsp;<span class="num" id="7157131">10</span><span class="op" id="7157133">,</span>&nbsp;<span class="num" id="7157135">10000</span><span class="op" id="7157140">)</span>&nbsp;<span class="op" id="7157142">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157144">func</span>&nbsp;<span class="ident" id="7157149">BenchmarkGCD10x100000</span><span class="op" id="7157170">(</span><span class="ident" id="7157171">b</span>&nbsp;<span class="op" id="7157173">*</span><span class="ident" id="7157174">testing</span><span class="op" id="7157181">.</span><span class="ident" id="7157182">B</span><span class="op" id="7157183">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157189">{</span>&nbsp;<span class="ident" id="7157191">runGCD</span><span class="op" id="7157197">(</span><span class="ident" id="7157198">b</span><span class="op" id="7157199">,</span>&nbsp;<span class="num" id="7157201">10</span><span class="op" id="7157203">,</span>&nbsp;<span class="num" id="7157205">100000</span><span class="op" id="7157211">)</span>&nbsp;<span class="op" id="7157213">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157215">func</span>&nbsp;<span class="ident" id="7157220">BenchmarkGCD100x100</span><span class="op" id="7157239">(</span><span class="ident" id="7157240">b</span>&nbsp;<span class="op" id="7157242">*</span><span class="ident" id="7157243">testing</span><span class="op" id="7157250">.</span><span class="ident" id="7157251">B</span><span class="op" id="7157252">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157260">{</span>&nbsp;<span class="ident" id="7157262">runGCD</span><span class="op" id="7157268">(</span><span class="ident" id="7157269">b</span><span class="op" id="7157270">,</span>&nbsp;<span class="num" id="7157272">100</span><span class="op" id="7157275">,</span>&nbsp;<span class="num" id="7157277">100</span><span class="op" id="7157280">)</span>&nbsp;<span class="op" id="7157282">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157284">func</span>&nbsp;<span class="ident" id="7157289">BenchmarkGCD100x1000</span><span class="op" id="7157309">(</span><span class="ident" id="7157310">b</span>&nbsp;<span class="op" id="7157312">*</span><span class="ident" id="7157313">testing</span><span class="op" id="7157320">.</span><span class="ident" id="7157321">B</span><span class="op" id="7157322">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157329">{</span>&nbsp;<span class="ident" id="7157331">runGCD</span><span class="op" id="7157337">(</span><span class="ident" id="7157338">b</span><span class="op" id="7157339">,</span>&nbsp;<span class="num" id="7157341">100</span><span class="op" id="7157344">,</span>&nbsp;<span class="num" id="7157346">1000</span><span class="op" id="7157350">)</span>&nbsp;<span class="op" id="7157352">}</span><br>
<span class="lineno">40</span><span class="keyword" id="7157354">func</span>&nbsp;<span class="ident" id="7157359">BenchmarkGCD100x10000</span><span class="op" id="7157380">(</span><span class="ident" id="7157381">b</span>&nbsp;<span class="op" id="7157383">*</span><span class="ident" id="7157384">testing</span><span class="op" id="7157391">.</span><span class="ident" id="7157392">B</span><span class="op" id="7157393">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157399">{</span>&nbsp;<span class="ident" id="7157401">runGCD</span><span class="op" id="7157407">(</span><span class="ident" id="7157408">b</span><span class="op" id="7157409">,</span>&nbsp;<span class="num" id="7157411">100</span><span class="op" id="7157414">,</span>&nbsp;<span class="num" id="7157416">10000</span><span class="op" id="7157421">)</span>&nbsp;<span class="op" id="7157423">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157425">func</span>&nbsp;<span class="ident" id="7157430">BenchmarkGCD100x100000</span><span class="op" id="7157452">(</span><span class="ident" id="7157453">b</span>&nbsp;<span class="op" id="7157455">*</span><span class="ident" id="7157456">testing</span><span class="op" id="7157463">.</span><span class="ident" id="7157464">B</span><span class="op" id="7157465">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157470">{</span>&nbsp;<span class="ident" id="7157472">runGCD</span><span class="op" id="7157478">(</span><span class="ident" id="7157479">b</span><span class="op" id="7157480">,</span>&nbsp;<span class="num" id="7157482">100</span><span class="op" id="7157485">,</span>&nbsp;<span class="num" id="7157487">100000</span><span class="op" id="7157493">)</span>&nbsp;<span class="op" id="7157495">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157497">func</span>&nbsp;<span class="ident" id="7157502">BenchmarkGCD1000x1000</span><span class="op" id="7157523">(</span><span class="ident" id="7157524">b</span>&nbsp;<span class="op" id="7157526">*</span><span class="ident" id="7157527">testing</span><span class="op" id="7157534">.</span><span class="ident" id="7157535">B</span><span class="op" id="7157536">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157542">{</span>&nbsp;<span class="ident" id="7157544">runGCD</span><span class="op" id="7157550">(</span><span class="ident" id="7157551">b</span><span class="op" id="7157552">,</span>&nbsp;<span class="num" id="7157554">1000</span><span class="op" id="7157558">,</span>&nbsp;<span class="num" id="7157560">1000</span><span class="op" id="7157564">)</span>&nbsp;<span class="op" id="7157566">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157568">func</span>&nbsp;<span class="ident" id="7157573">BenchmarkGCD1000x10000</span><span class="op" id="7157595">(</span><span class="ident" id="7157596">b</span>&nbsp;<span class="op" id="7157598">*</span><span class="ident" id="7157599">testing</span><span class="op" id="7157606">.</span><span class="ident" id="7157607">B</span><span class="op" id="7157608">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7157613">{</span>&nbsp;<span class="ident" id="7157615">runGCD</span><span class="op" id="7157621">(</span><span class="ident" id="7157622">b</span><span class="op" id="7157623">,</span>&nbsp;<span class="num" id="7157625">1000</span><span class="op" id="7157629">,</span>&nbsp;<span class="num" id="7157631">10000</span><span class="op" id="7157636">)</span>&nbsp;<span class="op" id="7157638">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157640">func</span>&nbsp;<span class="ident" id="7157645">BenchmarkGCD1000x100000</span><span class="op" id="7157668">(</span><span class="ident" id="7157669">b</span>&nbsp;<span class="op" id="7157671">*</span><span class="ident" id="7157672">testing</span><span class="op" id="7157679">.</span><span class="ident" id="7157680">B</span><span class="op" id="7157681">)</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7157685">{</span>&nbsp;<span class="ident" id="7157687">runGCD</span><span class="op" id="7157693">(</span><span class="ident" id="7157694">b</span><span class="op" id="7157695">,</span>&nbsp;<span class="num" id="7157697">1000</span><span class="op" id="7157701">,</span>&nbsp;<span class="num" id="7157703">100000</span><span class="op" id="7157709">)</span>&nbsp;<span class="op" id="7157711">}</span><br>
<span class="lineno">45</span><span class="keyword" id="7157713">func</span>&nbsp;<span class="ident" id="7157718">BenchmarkGCD10000x10000</span><span class="op" id="7157741">(</span><span class="ident" id="7157742">b</span>&nbsp;<span class="op" id="7157744">*</span><span class="ident" id="7157745">testing</span><span class="op" id="7157752">.</span><span class="ident" id="7157753">B</span><span class="op" id="7157754">)</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7157758">{</span>&nbsp;<span class="ident" id="7157760">runGCD</span><span class="op" id="7157766">(</span><span class="ident" id="7157767">b</span><span class="op" id="7157768">,</span>&nbsp;<span class="num" id="7157770">10000</span><span class="op" id="7157775">,</span>&nbsp;<span class="num" id="7157777">10000</span><span class="op" id="7157782">)</span>&nbsp;<span class="op" id="7157784">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157786">func</span>&nbsp;<span class="ident" id="7157791">BenchmarkGCD10000x100000</span><span class="op" id="7157815">(</span><span class="ident" id="7157816">b</span>&nbsp;<span class="op" id="7157818">*</span><span class="ident" id="7157819">testing</span><span class="op" id="7157826">.</span><span class="ident" id="7157827">B</span><span class="op" id="7157828">)</span>&nbsp;&nbsp;<span class="op" id="7157831">{</span>&nbsp;<span class="ident" id="7157833">runGCD</span><span class="op" id="7157839">(</span><span class="ident" id="7157840">b</span><span class="op" id="7157841">,</span>&nbsp;<span class="num" id="7157843">10000</span><span class="op" id="7157848">,</span>&nbsp;<span class="num" id="7157850">100000</span><span class="op" id="7157856">)</span>&nbsp;<span class="op" id="7157858">}</span><br>
<span class="lineno"></span><span class="keyword" id="7157860">func</span>&nbsp;<span class="ident" id="7157865">BenchmarkGCD100000x100000</span><span class="op" id="7157890">(</span><span class="ident" id="7157891">b</span>&nbsp;<span class="op" id="7157893">*</span><span class="ident" id="7157894">testing</span><span class="op" id="7157901">.</span><span class="ident" id="7157902">B</span><span class="op" id="7157903">)</span>&nbsp;<span class="op" id="7157905">{</span>&nbsp;<span class="ident" id="7157907">runGCD</span><span class="op" id="7157913">(</span><span class="ident" id="7157914">b</span><span class="op" id="7157915">,</span>&nbsp;<span class="num" id="7157917">100000</span><span class="op" id="7157923">,</span>&nbsp;<span class="num" id="7157925">100000</span><span class="op" id="7157931">)</span>&nbsp;<span class="op" id="7157933">}</span>
</div>
</body>
</html>
