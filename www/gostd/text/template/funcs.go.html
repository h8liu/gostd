<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html" class="current">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3277429">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3277484">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3277538">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3277589">package</span>&nbsp;<span class="ident" id="3277597">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3277607">import</span>&nbsp;<span class="op" id="3277614">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277617">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277626">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277636">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277643">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277649">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277660">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277671">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277682">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3277693">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3277708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3277711">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="3277791">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3277872">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="3277944">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3278024">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3278055">type</span>&nbsp;<span class="ident" id="3278060">FuncMap</span>&nbsp;<span class="keyword" id="3278068">map</span><span class="op" id="3278071">[</span><span class="builtintype" id="3278072">string</span><span class="op" id="3278078">]</span><span class="keyword" id="3278079">interface</span><span class="op" id="3278088">{</span><span class="op" id="3278089">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3278092">var</span>&nbsp;<span class="ident" id="3278096">builtins</span>&nbsp;<span class="op" id="3278105">=</span>&nbsp;<span class="ident" id="3278107">FuncMap</span><span class="op" id="3278114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278117">&#34;and&#34;</span><span class="op" id="3278122">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278129">and</span><span class="op" id="3278132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278135">&#34;call&#34;</span><span class="op" id="3278141">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278147">call</span><span class="op" id="3278151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278154">&#34;html&#34;</span><span class="op" id="3278160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278166">HTMLEscaper</span><span class="op" id="3278177">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278180">&#34;index&#34;</span><span class="op" id="3278187">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278192">index</span><span class="op" id="3278197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278200">&#34;js&#34;</span><span class="op" id="3278204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278212">JSEscaper</span><span class="op" id="3278221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278224">&#34;len&#34;</span><span class="op" id="3278229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278236">length</span><span class="op" id="3278242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278245">&#34;not&#34;</span><span class="op" id="3278250">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278257">not</span><span class="op" id="3278260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278263">&#34;or&#34;</span><span class="op" id="3278267">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278275">or</span><span class="op" id="3278277">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278280">&#34;print&#34;</span><span class="op" id="3278287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278292">fmt</span><span class="op" id="3278295">.</span><span class="ident" id="3278296">Sprint</span><span class="op" id="3278302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278305">&#34;printf&#34;</span><span class="op" id="3278313">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3278317">fmt</span><span class="op" id="3278320">.</span><span class="ident" id="3278321">Sprintf</span><span class="op" id="3278328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278331">&#34;println&#34;</span><span class="op" id="3278340">:</span>&nbsp;&nbsp;<span class="ident" id="3278343">fmt</span><span class="op" id="3278346">.</span><span class="ident" id="3278347">Sprintln</span><span class="op" id="3278355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278358">&#34;urlquery&#34;</span><span class="op" id="3278368">:</span>&nbsp;<span class="ident" id="3278370">URLQueryEscaper</span><span class="op" id="3278385">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3278389">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278405">&#34;eq&#34;</span><span class="op" id="3278409">:</span>&nbsp;<span class="ident" id="3278411">eq</span><span class="op" id="3278413">,</span>&nbsp;<span class="comment" id="3278415">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278422">&#34;ge&#34;</span><span class="op" id="3278426">:</span>&nbsp;<span class="ident" id="3278428">ge</span><span class="op" id="3278430">,</span>&nbsp;<span class="comment" id="3278432">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278439">&#34;gt&#34;</span><span class="op" id="3278443">:</span>&nbsp;<span class="ident" id="3278445">gt</span><span class="op" id="3278447">,</span>&nbsp;<span class="comment" id="3278449">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278455">&#34;le&#34;</span><span class="op" id="3278459">:</span>&nbsp;<span class="ident" id="3278461">le</span><span class="op" id="3278463">,</span>&nbsp;<span class="comment" id="3278465">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278472">&#34;lt&#34;</span><span class="op" id="3278476">:</span>&nbsp;<span class="ident" id="3278478">lt</span><span class="op" id="3278480">,</span>&nbsp;<span class="comment" id="3278482">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3278488">&#34;ne&#34;</span><span class="op" id="3278492">:</span>&nbsp;<span class="ident" id="3278494">ne</span><span class="op" id="3278496">,</span>&nbsp;<span class="comment" id="3278498">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="3278504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3278507">var</span>&nbsp;<span class="ident" id="3278511">builtinFuncs</span>&nbsp;<span class="op" id="3278524">=</span>&nbsp;<span class="ident" id="3278526">createValueFuncs</span><span class="op" id="3278542">(</span><span class="ident" id="3278543">builtins</span><span class="op" id="3278551">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3278554">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="3278622">func</span>&nbsp;<span class="ident" id="3278627">createValueFuncs</span><span class="op" id="3278643">(</span><span class="ident" id="3278644">funcMap</span>&nbsp;<span class="ident" id="3278652">FuncMap</span><span class="op" id="3278659">)</span>&nbsp;<span class="keyword" id="3278661">map</span><span class="op" id="3278664">[</span><span class="builtintype" id="3278665">string</span><span class="op" id="3278671">]</span><span class="ident" id="3278672">reflect</span><span class="op" id="3278679">.</span><span class="ident" id="3278680">Value</span>&nbsp;<span class="op" id="3278686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278689">m</span>&nbsp;<span class="op" id="3278691">:=</span>&nbsp;<span class="builtinfunc" id="3278694">make</span><span class="op" id="3278698">(</span><span class="keyword" id="3278699">map</span><span class="op" id="3278702">[</span><span class="builtintype" id="3278703">string</span><span class="op" id="3278709">]</span><span class="ident" id="3278710">reflect</span><span class="op" id="3278717">.</span><span class="ident" id="3278718">Value</span><span class="op" id="3278723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278726">addValueFuncs</span><span class="op" id="3278739">(</span><span class="ident" id="3278740">m</span><span class="op" id="3278741">,</span>&nbsp;<span class="ident" id="3278743">funcMap</span><span class="op" id="3278750">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3278753">return</span>&nbsp;<span class="ident" id="3278760">m</span><br>
<span class="lineno"></span><span class="op" id="3278762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3278765">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="3278856">func</span>&nbsp;<span class="ident" id="3278861">addValueFuncs</span><span class="op" id="3278874">(</span><span class="ident" id="3278875">out</span>&nbsp;<span class="keyword" id="3278879">map</span><span class="op" id="3278882">[</span><span class="builtintype" id="3278883">string</span><span class="op" id="3278889">]</span><span class="ident" id="3278890">reflect</span><span class="op" id="3278897">.</span><span class="ident" id="3278898">Value</span><span class="op" id="3278903">,</span>&nbsp;<span class="ident" id="3278905">in</span>&nbsp;<span class="ident" id="3278908">FuncMap</span><span class="op" id="3278915">)</span>&nbsp;<span class="op" id="3278917">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3278920">for</span>&nbsp;<span class="ident" id="3278924">name</span><span class="op" id="3278928">,</span>&nbsp;<span class="ident" id="3278930">fn</span>&nbsp;<span class="op" id="3278933">:=</span>&nbsp;<span class="keyword" id="3278936">range</span>&nbsp;<span class="ident" id="3278942">in</span>&nbsp;<span class="op" id="3278945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3278949">v</span>&nbsp;<span class="op" id="3278951">:=</span>&nbsp;<span class="ident" id="3278954">reflect</span><span class="op" id="3278961">.</span><span class="ident" id="3278962">ValueOf</span><span class="op" id="3278969">(</span><span class="ident" id="3278970">fn</span><span class="op" id="3278972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3278976">if</span>&nbsp;<span class="ident" id="3278979">v</span><span class="op" id="3278980">.</span><span class="ident" id="3278981">Kind</span><span class="op" id="3278985">(</span><span class="op" id="3278986">)</span>&nbsp;<span class="op" id="3278988">!=</span>&nbsp;<span class="ident" id="3278991">reflect</span><span class="op" id="3278998">.</span><span class="ident" id="3278999">Func</span>&nbsp;<span class="op" id="3279004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3279009">panic</span><span class="op" id="3279014">(</span><span class="string" id="3279015">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="3279028">+</span>&nbsp;<span class="ident" id="3279030">name</span>&nbsp;<span class="op" id="3279035">+</span>&nbsp;<span class="string" id="3279037">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="3279054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279058">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279062">if</span>&nbsp;<span class="op" id="3279065">!</span><span class="ident" id="3279066">goodFunc</span><span class="op" id="3279074">(</span><span class="ident" id="3279075">v</span><span class="op" id="3279076">.</span><span class="ident" id="3279077">Type</span><span class="op" id="3279081">(</span><span class="op" id="3279082">)</span><span class="op" id="3279083">)</span>&nbsp;<span class="op" id="3279085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3279090">panic</span><span class="op" id="3279095">(</span><span class="ident" id="3279096">fmt</span><span class="op" id="3279099">.</span><span class="ident" id="3279100">Errorf</span><span class="op" id="3279106">(</span><span class="string" id="3279107">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="3279157">,</span>&nbsp;<span class="ident" id="3279159">name</span><span class="op" id="3279163">,</span>&nbsp;<span class="ident" id="3279165">v</span><span class="op" id="3279166">.</span><span class="ident" id="3279167">Type</span><span class="op" id="3279171">(</span><span class="op" id="3279172">)</span><span class="op" id="3279173">.</span><span class="ident" id="3279174">NumOut</span><span class="op" id="3279180">(</span><span class="op" id="3279181">)</span><span class="op" id="3279182">)</span><span class="op" id="3279183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3279191">out</span><span class="op" id="3279194">[</span><span class="ident" id="3279195">name</span><span class="op" id="3279199">]</span>&nbsp;<span class="op" id="3279201">=</span>&nbsp;<span class="ident" id="3279203">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279206">}</span><br>
<span class="lineno">70</span><span class="op" id="3279208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3279211">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="3279297">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="3279326">func</span>&nbsp;<span class="ident" id="3279331">addFuncs</span><span class="op" id="3279339">(</span><span class="ident" id="3279340">out</span><span class="op" id="3279343">,</span>&nbsp;<span class="ident" id="3279345">in</span>&nbsp;<span class="ident" id="3279348">FuncMap</span><span class="op" id="3279355">)</span>&nbsp;<span class="op" id="3279357">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279360">for</span>&nbsp;<span class="ident" id="3279364">name</span><span class="op" id="3279368">,</span>&nbsp;<span class="ident" id="3279370">fn</span>&nbsp;<span class="op" id="3279373">:=</span>&nbsp;<span class="keyword" id="3279376">range</span>&nbsp;<span class="ident" id="3279382">in</span>&nbsp;<span class="op" id="3279385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3279389">out</span><span class="op" id="3279392">[</span><span class="ident" id="3279393">name</span><span class="op" id="3279397">]</span>&nbsp;<span class="op" id="3279399">=</span>&nbsp;<span class="ident" id="3279401">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279405">}</span><br>
<span class="lineno"></span><span class="op" id="3279407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="3279410">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="3279489">func</span>&nbsp;<span class="ident" id="3279494">goodFunc</span><span class="op" id="3279502">(</span><span class="ident" id="3279503">typ</span>&nbsp;<span class="ident" id="3279507">reflect</span><span class="op" id="3279514">.</span><span class="ident" id="3279515">Type</span><span class="op" id="3279519">)</span>&nbsp;<span class="builtintype" id="3279521">bool</span>&nbsp;<span class="op" id="3279526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3279529">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279609">switch</span>&nbsp;<span class="op" id="3279616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279619">case</span>&nbsp;<span class="ident" id="3279624">typ</span><span class="op" id="3279627">.</span><span class="ident" id="3279628">NumOut</span><span class="op" id="3279634">(</span><span class="op" id="3279635">)</span>&nbsp;<span class="op" id="3279637">==</span>&nbsp;<span class="num" id="3279640">1</span><span class="op" id="3279641">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279645">return</span>&nbsp;<span class="builtintype" id="3279652">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279658">case</span>&nbsp;<span class="ident" id="3279663">typ</span><span class="op" id="3279666">.</span><span class="ident" id="3279667">NumOut</span><span class="op" id="3279673">(</span><span class="op" id="3279674">)</span>&nbsp;<span class="op" id="3279676">==</span>&nbsp;<span class="num" id="3279679">2</span>&nbsp;<span class="op" id="3279681">&amp;&amp;</span>&nbsp;<span class="ident" id="3279684">typ</span><span class="op" id="3279687">.</span><span class="ident" id="3279688">Out</span><span class="op" id="3279691">(</span><span class="num" id="3279692">1</span><span class="op" id="3279693">)</span>&nbsp;<span class="op" id="3279695">==</span>&nbsp;<span class="ident" id="3279698">errorType</span><span class="op" id="3279707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279711">return</span>&nbsp;<span class="builtintype" id="3279718">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279727">return</span>&nbsp;<span class="builtintype" id="3279734">false</span><br>
<span class="lineno">90</span><span class="op" id="3279740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3279743">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="3279813">func</span>&nbsp;<span class="ident" id="3279818">findFunction</span><span class="op" id="3279830">(</span><span class="ident" id="3279831">name</span>&nbsp;<span class="builtintype" id="3279836">string</span><span class="op" id="3279842">,</span>&nbsp;<span class="ident" id="3279844">tmpl</span>&nbsp;<span class="op" id="3279849">*</span><span class="ident" id="3279850">Template</span><span class="op" id="3279858">)</span>&nbsp;<span class="op" id="3279860">(</span><span class="ident" id="3279861">reflect</span><span class="op" id="3279868">.</span><span class="ident" id="3279869">Value</span><span class="op" id="3279874">,</span>&nbsp;<span class="builtintype" id="3279876">bool</span><span class="op" id="3279880">)</span>&nbsp;<span class="op" id="3279882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279885">if</span>&nbsp;<span class="ident" id="3279888">tmpl</span>&nbsp;<span class="op" id="3279893">!=</span>&nbsp;<span class="builtintype" id="3279896">nil</span>&nbsp;<span class="op" id="3279900">&amp;&amp;</span>&nbsp;<span class="ident" id="3279903">tmpl</span><span class="op" id="3279907">.</span><span class="ident" id="3279908">common</span>&nbsp;<span class="op" id="3279915">!=</span>&nbsp;<span class="builtintype" id="3279918">nil</span>&nbsp;<span class="op" id="3279922">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279926">if</span>&nbsp;<span class="ident" id="3279929">fn</span>&nbsp;<span class="op" id="3279932">:=</span>&nbsp;<span class="ident" id="3279935">tmpl</span><span class="op" id="3279939">.</span><span class="ident" id="3279940">execFuncs</span><span class="op" id="3279949">[</span><span class="ident" id="3279950">name</span><span class="op" id="3279954">]</span><span class="op" id="3279955">;</span>&nbsp;<span class="ident" id="3279957">fn</span><span class="op" id="3279959">.</span><span class="ident" id="3279960">IsValid</span><span class="op" id="3279967">(</span><span class="op" id="3279968">)</span>&nbsp;<span class="op" id="3279970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279975">return</span>&nbsp;<span class="ident" id="3279982">fn</span><span class="op" id="3279984">,</span>&nbsp;<span class="builtintype" id="3279986">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3279996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3279999">if</span>&nbsp;<span class="ident" id="3280002">fn</span>&nbsp;<span class="op" id="3280005">:=</span>&nbsp;<span class="ident" id="3280008">builtinFuncs</span><span class="op" id="3280020">[</span><span class="ident" id="3280021">name</span><span class="op" id="3280025">]</span><span class="op" id="3280026">;</span>&nbsp;<span class="ident" id="3280028">fn</span><span class="op" id="3280030">.</span><span class="ident" id="3280031">IsValid</span><span class="op" id="3280038">(</span><span class="op" id="3280039">)</span>&nbsp;<span class="op" id="3280041">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280045">return</span>&nbsp;<span class="ident" id="3280052">fn</span><span class="op" id="3280054">,</span>&nbsp;<span class="builtintype" id="3280056">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3280062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280065">return</span>&nbsp;<span class="ident" id="3280072">reflect</span><span class="op" id="3280079">.</span><span class="ident" id="3280080">Value</span><span class="op" id="3280085">{</span><span class="op" id="3280086">}</span><span class="op" id="3280087">,</span>&nbsp;<span class="builtintype" id="3280089">false</span><br>
<span class="lineno"></span><span class="op" id="3280095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3280098">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3280112">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="3280188">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="3280259">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="3280307">func</span>&nbsp;<span class="ident" id="3280312">index</span><span class="op" id="3280317">(</span><span class="ident" id="3280318">item</span>&nbsp;<span class="keyword" id="3280323">interface</span><span class="op" id="3280332">{</span><span class="op" id="3280333">}</span><span class="op" id="3280334">,</span>&nbsp;<span class="ident" id="3280336">indices</span>&nbsp;<span class="op" id="3280344">...</span><span class="keyword" id="3280347">interface</span><span class="op" id="3280356">{</span><span class="op" id="3280357">}</span><span class="op" id="3280358">)</span>&nbsp;<span class="op" id="3280360">(</span><span class="keyword" id="3280361">interface</span><span class="op" id="3280370">{</span><span class="op" id="3280371">}</span><span class="op" id="3280372">,</span>&nbsp;<span class="builtintype" id="3280374">error</span><span class="op" id="3280379">)</span>&nbsp;<span class="op" id="3280381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3280384">v</span>&nbsp;<span class="op" id="3280386">:=</span>&nbsp;<span class="ident" id="3280389">reflect</span><span class="op" id="3280396">.</span><span class="ident" id="3280397">ValueOf</span><span class="op" id="3280404">(</span><span class="ident" id="3280405">item</span><span class="op" id="3280409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280412">for</span>&nbsp;<span class="ident" id="3280416">_</span><span class="op" id="3280417">,</span>&nbsp;<span class="ident" id="3280419">i</span>&nbsp;<span class="op" id="3280421">:=</span>&nbsp;<span class="keyword" id="3280424">range</span>&nbsp;<span class="ident" id="3280430">indices</span>&nbsp;<span class="op" id="3280438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3280442">index</span>&nbsp;<span class="op" id="3280448">:=</span>&nbsp;<span class="ident" id="3280451">reflect</span><span class="op" id="3280458">.</span><span class="ident" id="3280459">ValueOf</span><span class="op" id="3280466">(</span><span class="ident" id="3280467">i</span><span class="op" id="3280468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280472">var</span>&nbsp;<span class="ident" id="3280476">isNil</span>&nbsp;<span class="builtintype" id="3280482">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280489">if</span>&nbsp;<span class="ident" id="3280492">v</span><span class="op" id="3280493">,</span>&nbsp;<span class="ident" id="3280495">isNil</span>&nbsp;<span class="op" id="3280501">=</span>&nbsp;<span class="ident" id="3280503">indirect</span><span class="op" id="3280511">(</span><span class="ident" id="3280512">v</span><span class="op" id="3280513">)</span><span class="op" id="3280514">;</span>&nbsp;<span class="ident" id="3280516">isNil</span>&nbsp;<span class="op" id="3280522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280527">return</span>&nbsp;<span class="builtintype" id="3280534">nil</span><span class="op" id="3280537">,</span>&nbsp;<span class="ident" id="3280539">fmt</span><span class="op" id="3280542">.</span><span class="ident" id="3280543">Errorf</span><span class="op" id="3280549">(</span><span class="string" id="3280550">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="3280572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3280576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280580">switch</span>&nbsp;<span class="ident" id="3280587">v</span><span class="op" id="3280588">.</span><span class="ident" id="3280589">Kind</span><span class="op" id="3280593">(</span><span class="op" id="3280594">)</span>&nbsp;<span class="op" id="3280596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280600">case</span>&nbsp;<span class="ident" id="3280605">reflect</span><span class="op" id="3280612">.</span><span class="ident" id="3280613">Array</span><span class="op" id="3280618">,</span>&nbsp;<span class="ident" id="3280620">reflect</span><span class="op" id="3280627">.</span><span class="ident" id="3280628">Slice</span><span class="op" id="3280633">,</span>&nbsp;<span class="ident" id="3280635">reflect</span><span class="op" id="3280642">.</span><span class="ident" id="3280643">String</span><span class="op" id="3280649">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280654">var</span>&nbsp;<span class="ident" id="3280658">x</span>&nbsp;<span class="builtintype" id="3280660">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280669">switch</span>&nbsp;<span class="ident" id="3280676">index</span><span class="op" id="3280681">.</span><span class="ident" id="3280682">Kind</span><span class="op" id="3280686">(</span><span class="op" id="3280687">)</span>&nbsp;<span class="op" id="3280689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280694">case</span>&nbsp;<span class="ident" id="3280699">reflect</span><span class="op" id="3280706">.</span><span class="ident" id="3280707">Int</span><span class="op" id="3280710">,</span>&nbsp;<span class="ident" id="3280712">reflect</span><span class="op" id="3280719">.</span><span class="ident" id="3280720">Int8</span><span class="op" id="3280724">,</span>&nbsp;<span class="ident" id="3280726">reflect</span><span class="op" id="3280733">.</span><span class="ident" id="3280734">Int16</span><span class="op" id="3280739">,</span>&nbsp;<span class="ident" id="3280741">reflect</span><span class="op" id="3280748">.</span><span class="ident" id="3280749">Int32</span><span class="op" id="3280754">,</span>&nbsp;<span class="ident" id="3280756">reflect</span><span class="op" id="3280763">.</span><span class="ident" id="3280764">Int64</span><span class="op" id="3280769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3280775">x</span>&nbsp;<span class="op" id="3280777">=</span>&nbsp;<span class="ident" id="3280779">index</span><span class="op" id="3280784">.</span><span class="ident" id="3280785">Int</span><span class="op" id="3280788">(</span><span class="op" id="3280789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280794">case</span>&nbsp;<span class="ident" id="3280799">reflect</span><span class="op" id="3280806">.</span><span class="ident" id="3280807">Uint</span><span class="op" id="3280811">,</span>&nbsp;<span class="ident" id="3280813">reflect</span><span class="op" id="3280820">.</span><span class="ident" id="3280821">Uint8</span><span class="op" id="3280826">,</span>&nbsp;<span class="ident" id="3280828">reflect</span><span class="op" id="3280835">.</span><span class="ident" id="3280836">Uint16</span><span class="op" id="3280842">,</span>&nbsp;<span class="ident" id="3280844">reflect</span><span class="op" id="3280851">.</span><span class="ident" id="3280852">Uint32</span><span class="op" id="3280858">,</span>&nbsp;<span class="ident" id="3280860">reflect</span><span class="op" id="3280867">.</span><span class="ident" id="3280868">Uint64</span><span class="op" id="3280874">,</span>&nbsp;<span class="ident" id="3280876">reflect</span><span class="op" id="3280883">.</span><span class="ident" id="3280884">Uintptr</span><span class="op" id="3280891">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3280897">x</span>&nbsp;<span class="op" id="3280899">=</span>&nbsp;<span class="builtintype" id="3280901">int64</span><span class="op" id="3280906">(</span><span class="ident" id="3280907">index</span><span class="op" id="3280912">.</span><span class="ident" id="3280913">Uint</span><span class="op" id="3280917">(</span><span class="op" id="3280918">)</span><span class="op" id="3280919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280924">default</span><span class="op" id="3280931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3280937">return</span>&nbsp;<span class="builtintype" id="3280944">nil</span><span class="op" id="3280947">,</span>&nbsp;<span class="ident" id="3280949">fmt</span><span class="op" id="3280952">.</span><span class="ident" id="3280953">Errorf</span><span class="op" id="3280959">(</span><span class="string" id="3280960">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3280999">,</span>&nbsp;<span class="ident" id="3281001">index</span><span class="op" id="3281006">.</span><span class="ident" id="3281007">Type</span><span class="op" id="3281011">(</span><span class="op" id="3281012">)</span><span class="op" id="3281013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281023">if</span>&nbsp;<span class="ident" id="3281026">x</span>&nbsp;<span class="op" id="3281028">&lt;</span>&nbsp;<span class="num" id="3281030">0</span>&nbsp;<span class="op" id="3281032">||</span>&nbsp;<span class="ident" id="3281035">x</span>&nbsp;<span class="op" id="3281037">&gt;=</span>&nbsp;<span class="builtintype" id="3281040">int64</span><span class="op" id="3281045">(</span><span class="ident" id="3281046">v</span><span class="op" id="3281047">.</span><span class="ident" id="3281048">Len</span><span class="op" id="3281051">(</span><span class="op" id="3281052">)</span><span class="op" id="3281053">)</span>&nbsp;<span class="op" id="3281055">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281061">return</span>&nbsp;<span class="builtintype" id="3281068">nil</span><span class="op" id="3281071">,</span>&nbsp;<span class="ident" id="3281073">fmt</span><span class="op" id="3281076">.</span><span class="ident" id="3281077">Errorf</span><span class="op" id="3281083">(</span><span class="string" id="3281084">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="3281108">,</span>&nbsp;<span class="ident" id="3281110">x</span><span class="op" id="3281111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3281121">v</span>&nbsp;<span class="op" id="3281123">=</span>&nbsp;<span class="ident" id="3281125">v</span><span class="op" id="3281126">.</span><span class="ident" id="3281127">Index</span><span class="op" id="3281132">(</span><span class="builtintype" id="3281133">int</span><span class="op" id="3281136">(</span><span class="ident" id="3281137">x</span><span class="op" id="3281138">)</span><span class="op" id="3281139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281143">case</span>&nbsp;<span class="ident" id="3281148">reflect</span><span class="op" id="3281155">.</span><span class="ident" id="3281156">Map</span><span class="op" id="3281159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281164">if</span>&nbsp;<span class="op" id="3281167">!</span><span class="ident" id="3281168">index</span><span class="op" id="3281173">.</span><span class="ident" id="3281174">IsValid</span><span class="op" id="3281181">(</span><span class="op" id="3281182">)</span>&nbsp;<span class="op" id="3281184">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3281190">index</span>&nbsp;<span class="op" id="3281196">=</span>&nbsp;<span class="ident" id="3281198">reflect</span><span class="op" id="3281205">.</span><span class="ident" id="3281206">Zero</span><span class="op" id="3281210">(</span><span class="ident" id="3281211">v</span><span class="op" id="3281212">.</span><span class="ident" id="3281213">Type</span><span class="op" id="3281217">(</span><span class="op" id="3281218">)</span><span class="op" id="3281219">.</span><span class="ident" id="3281220">Key</span><span class="op" id="3281223">(</span><span class="op" id="3281224">)</span><span class="op" id="3281225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281235">if</span>&nbsp;<span class="op" id="3281238">!</span><span class="ident" id="3281239">index</span><span class="op" id="3281244">.</span><span class="ident" id="3281245">Type</span><span class="op" id="3281249">(</span><span class="op" id="3281250">)</span><span class="op" id="3281251">.</span><span class="ident" id="3281252">AssignableTo</span><span class="op" id="3281264">(</span><span class="ident" id="3281265">v</span><span class="op" id="3281266">.</span><span class="ident" id="3281267">Type</span><span class="op" id="3281271">(</span><span class="op" id="3281272">)</span><span class="op" id="3281273">.</span><span class="ident" id="3281274">Key</span><span class="op" id="3281277">(</span><span class="op" id="3281278">)</span><span class="op" id="3281279">)</span>&nbsp;<span class="op" id="3281281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281287">return</span>&nbsp;<span class="builtintype" id="3281294">nil</span><span class="op" id="3281297">,</span>&nbsp;<span class="ident" id="3281299">fmt</span><span class="op" id="3281302">.</span><span class="ident" id="3281303">Errorf</span><span class="op" id="3281309">(</span><span class="string" id="3281310">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="3281339">,</span>&nbsp;<span class="ident" id="3281341">index</span><span class="op" id="3281346">.</span><span class="ident" id="3281347">Type</span><span class="op" id="3281351">(</span><span class="op" id="3281352">)</span><span class="op" id="3281353">,</span>&nbsp;<span class="ident" id="3281355">v</span><span class="op" id="3281356">.</span><span class="ident" id="3281357">Type</span><span class="op" id="3281361">(</span><span class="op" id="3281362">)</span><span class="op" id="3281363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281368">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281373">if</span>&nbsp;<span class="ident" id="3281376">x</span>&nbsp;<span class="op" id="3281378">:=</span>&nbsp;<span class="ident" id="3281381">v</span><span class="op" id="3281382">.</span><span class="ident" id="3281383">MapIndex</span><span class="op" id="3281391">(</span><span class="ident" id="3281392">index</span><span class="op" id="3281397">)</span><span class="op" id="3281398">;</span>&nbsp;<span class="ident" id="3281400">x</span><span class="op" id="3281401">.</span><span class="ident" id="3281402">IsValid</span><span class="op" id="3281409">(</span><span class="op" id="3281410">)</span>&nbsp;<span class="op" id="3281412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3281418">v</span>&nbsp;<span class="op" id="3281420">=</span>&nbsp;<span class="ident" id="3281422">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281427">}</span>&nbsp;<span class="keyword" id="3281429">else</span>&nbsp;<span class="op" id="3281434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3281440">v</span>&nbsp;<span class="op" id="3281442">=</span>&nbsp;<span class="ident" id="3281444">reflect</span><span class="op" id="3281451">.</span><span class="ident" id="3281452">Zero</span><span class="op" id="3281456">(</span><span class="ident" id="3281457">v</span><span class="op" id="3281458">.</span><span class="ident" id="3281459">Type</span><span class="op" id="3281463">(</span><span class="op" id="3281464">)</span><span class="op" id="3281465">.</span><span class="ident" id="3281466">Elem</span><span class="op" id="3281470">(</span><span class="op" id="3281471">)</span><span class="op" id="3281472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281477">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281481">default</span><span class="op" id="3281488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281493">return</span>&nbsp;<span class="builtintype" id="3281500">nil</span><span class="op" id="3281503">,</span>&nbsp;<span class="ident" id="3281505">fmt</span><span class="op" id="3281508">.</span><span class="ident" id="3281509">Errorf</span><span class="op" id="3281515">(</span><span class="string" id="3281516">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3281545">,</span>&nbsp;<span class="ident" id="3281547">v</span><span class="op" id="3281548">.</span><span class="ident" id="3281549">Type</span><span class="op" id="3281553">(</span><span class="op" id="3281554">)</span><span class="op" id="3281555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281565">return</span>&nbsp;<span class="ident" id="3281572">v</span><span class="op" id="3281573">.</span><span class="ident" id="3281574">Interface</span><span class="op" id="3281583">(</span><span class="op" id="3281584">)</span><span class="op" id="3281585">,</span>&nbsp;<span class="builtintype" id="3281587">nil</span><br>
<span class="lineno">150</span><span class="op" id="3281591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3281594">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3281605">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="3281690">func</span>&nbsp;<span class="ident" id="3281695">length</span><span class="op" id="3281701">(</span><span class="ident" id="3281702">item</span>&nbsp;<span class="keyword" id="3281707">interface</span><span class="op" id="3281716">{</span><span class="op" id="3281717">}</span><span class="op" id="3281718">)</span>&nbsp;<span class="op" id="3281720">(</span><span class="builtintype" id="3281721">int</span><span class="op" id="3281724">,</span>&nbsp;<span class="builtintype" id="3281726">error</span><span class="op" id="3281731">)</span>&nbsp;<span class="op" id="3281733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3281736">v</span><span class="op" id="3281737">,</span>&nbsp;<span class="ident" id="3281739">isNil</span>&nbsp;<span class="op" id="3281745">:=</span>&nbsp;<span class="ident" id="3281748">indirect</span><span class="op" id="3281756">(</span><span class="ident" id="3281757">reflect</span><span class="op" id="3281764">.</span><span class="ident" id="3281765">ValueOf</span><span class="op" id="3281772">(</span><span class="ident" id="3281773">item</span><span class="op" id="3281777">)</span><span class="op" id="3281778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281781">if</span>&nbsp;<span class="ident" id="3281784">isNil</span>&nbsp;<span class="op" id="3281790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281794">return</span>&nbsp;<span class="num" id="3281801">0</span><span class="op" id="3281802">,</span>&nbsp;<span class="ident" id="3281804">fmt</span><span class="op" id="3281807">.</span><span class="ident" id="3281808">Errorf</span><span class="op" id="3281814">(</span><span class="string" id="3281815">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="3281835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281838">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281841">switch</span>&nbsp;<span class="ident" id="3281848">v</span><span class="op" id="3281849">.</span><span class="ident" id="3281850">Kind</span><span class="op" id="3281854">(</span><span class="op" id="3281855">)</span>&nbsp;<span class="op" id="3281857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281860">case</span>&nbsp;<span class="ident" id="3281865">reflect</span><span class="op" id="3281872">.</span><span class="ident" id="3281873">Array</span><span class="op" id="3281878">,</span>&nbsp;<span class="ident" id="3281880">reflect</span><span class="op" id="3281887">.</span><span class="ident" id="3281888">Chan</span><span class="op" id="3281892">,</span>&nbsp;<span class="ident" id="3281894">reflect</span><span class="op" id="3281901">.</span><span class="ident" id="3281902">Map</span><span class="op" id="3281905">,</span>&nbsp;<span class="ident" id="3281907">reflect</span><span class="op" id="3281914">.</span><span class="ident" id="3281915">Slice</span><span class="op" id="3281920">,</span>&nbsp;<span class="ident" id="3281922">reflect</span><span class="op" id="3281929">.</span><span class="ident" id="3281930">String</span><span class="op" id="3281936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281940">return</span>&nbsp;<span class="ident" id="3281947">v</span><span class="op" id="3281948">.</span><span class="ident" id="3281949">Len</span><span class="op" id="3281952">(</span><span class="op" id="3281953">)</span><span class="op" id="3281954">,</span>&nbsp;<span class="builtintype" id="3281956">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3281961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3281964">return</span>&nbsp;<span class="num" id="3281971">0</span><span class="op" id="3281972">,</span>&nbsp;<span class="ident" id="3281974">fmt</span><span class="op" id="3281977">.</span><span class="ident" id="3281978">Errorf</span><span class="op" id="3281984">(</span><span class="string" id="3281985">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3282001">,</span>&nbsp;<span class="ident" id="3282003">v</span><span class="op" id="3282004">.</span><span class="ident" id="3282005">Type</span><span class="op" id="3282009">(</span><span class="op" id="3282010">)</span><span class="op" id="3282011">)</span><br>
<span class="lineno">165</span><span class="op" id="3282013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3282016">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3282040">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="3282115">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3282200">func</span>&nbsp;<span class="ident" id="3282205">call</span><span class="op" id="3282209">(</span><span class="ident" id="3282210">fn</span>&nbsp;<span class="keyword" id="3282213">interface</span><span class="op" id="3282222">{</span><span class="op" id="3282223">}</span><span class="op" id="3282224">,</span>&nbsp;<span class="ident" id="3282226">args</span>&nbsp;<span class="op" id="3282231">...</span><span class="keyword" id="3282234">interface</span><span class="op" id="3282243">{</span><span class="op" id="3282244">}</span><span class="op" id="3282245">)</span>&nbsp;<span class="op" id="3282247">(</span><span class="keyword" id="3282248">interface</span><span class="op" id="3282257">{</span><span class="op" id="3282258">}</span><span class="op" id="3282259">,</span>&nbsp;<span class="builtintype" id="3282261">error</span><span class="op" id="3282266">)</span>&nbsp;<span class="op" id="3282268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3282271">v</span>&nbsp;<span class="op" id="3282273">:=</span>&nbsp;<span class="ident" id="3282276">reflect</span><span class="op" id="3282283">.</span><span class="ident" id="3282284">ValueOf</span><span class="op" id="3282291">(</span><span class="ident" id="3282292">fn</span><span class="op" id="3282294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3282297">typ</span>&nbsp;<span class="op" id="3282301">:=</span>&nbsp;<span class="ident" id="3282304">v</span><span class="op" id="3282305">.</span><span class="ident" id="3282306">Type</span><span class="op" id="3282310">(</span><span class="op" id="3282311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282314">if</span>&nbsp;<span class="ident" id="3282317">typ</span><span class="op" id="3282320">.</span><span class="ident" id="3282321">Kind</span><span class="op" id="3282325">(</span><span class="op" id="3282326">)</span>&nbsp;<span class="op" id="3282328">!=</span>&nbsp;<span class="ident" id="3282331">reflect</span><span class="op" id="3282338">.</span><span class="ident" id="3282339">Func</span>&nbsp;<span class="op" id="3282344">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282348">return</span>&nbsp;<span class="builtintype" id="3282355">nil</span><span class="op" id="3282358">,</span>&nbsp;<span class="ident" id="3282360">fmt</span><span class="op" id="3282363">.</span><span class="ident" id="3282364">Errorf</span><span class="op" id="3282370">(</span><span class="string" id="3282371">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3282396">,</span>&nbsp;<span class="ident" id="3282398">typ</span><span class="op" id="3282401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3282404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282407">if</span>&nbsp;<span class="op" id="3282410">!</span><span class="ident" id="3282411">goodFunc</span><span class="op" id="3282419">(</span><span class="ident" id="3282420">typ</span><span class="op" id="3282423">)</span>&nbsp;<span class="op" id="3282425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282429">return</span>&nbsp;<span class="builtintype" id="3282436">nil</span><span class="op" id="3282439">,</span>&nbsp;<span class="ident" id="3282441">fmt</span><span class="op" id="3282444">.</span><span class="ident" id="3282445">Errorf</span><span class="op" id="3282451">(</span><span class="string" id="3282452">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="3282500">,</span>&nbsp;<span class="ident" id="3282502">typ</span><span class="op" id="3282505">.</span><span class="ident" id="3282506">NumOut</span><span class="op" id="3282512">(</span><span class="op" id="3282513">)</span><span class="op" id="3282514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3282517">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3282520">numIn</span>&nbsp;<span class="op" id="3282526">:=</span>&nbsp;<span class="ident" id="3282529">typ</span><span class="op" id="3282532">.</span><span class="ident" id="3282533">NumIn</span><span class="op" id="3282538">(</span><span class="op" id="3282539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282542">var</span>&nbsp;<span class="ident" id="3282546">dddType</span>&nbsp;<span class="ident" id="3282554">reflect</span><span class="op" id="3282561">.</span><span class="ident" id="3282562">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282568">if</span>&nbsp;<span class="ident" id="3282571">typ</span><span class="op" id="3282574">.</span><span class="ident" id="3282575">IsVariadic</span><span class="op" id="3282585">(</span><span class="op" id="3282586">)</span>&nbsp;<span class="op" id="3282588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282592">if</span>&nbsp;<span class="builtinfunc" id="3282595">len</span><span class="op" id="3282598">(</span><span class="ident" id="3282599">args</span><span class="op" id="3282603">)</span>&nbsp;<span class="op" id="3282605">&lt;</span>&nbsp;<span class="ident" id="3282607">numIn</span><span class="op" id="3282612">-</span><span class="num" id="3282613">1</span>&nbsp;<span class="op" id="3282615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282620">return</span>&nbsp;<span class="builtintype" id="3282627">nil</span><span class="op" id="3282630">,</span>&nbsp;<span class="ident" id="3282632">fmt</span><span class="op" id="3282635">.</span><span class="ident" id="3282636">Errorf</span><span class="op" id="3282642">(</span><span class="string" id="3282643">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="3282690">,</span>&nbsp;<span class="builtinfunc" id="3282692">len</span><span class="op" id="3282695">(</span><span class="ident" id="3282696">args</span><span class="op" id="3282700">)</span><span class="op" id="3282701">,</span>&nbsp;<span class="ident" id="3282703">numIn</span><span class="op" id="3282708">-</span><span class="num" id="3282709">1</span><span class="op" id="3282710">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3282714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3282718">dddType</span>&nbsp;<span class="op" id="3282726">=</span>&nbsp;<span class="ident" id="3282728">typ</span><span class="op" id="3282731">.</span><span class="ident" id="3282732">In</span><span class="op" id="3282734">(</span><span class="ident" id="3282735">numIn</span>&nbsp;<span class="op" id="3282741">-</span>&nbsp;<span class="num" id="3282743">1</span><span class="op" id="3282744">)</span><span class="op" id="3282745">.</span><span class="ident" id="3282746">Elem</span><span class="op" id="3282750">(</span><span class="op" id="3282751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3282754">}</span>&nbsp;<span class="keyword" id="3282756">else</span>&nbsp;<span class="op" id="3282761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282765">if</span>&nbsp;<span class="builtinfunc" id="3282768">len</span><span class="op" id="3282771">(</span><span class="ident" id="3282772">args</span><span class="op" id="3282776">)</span>&nbsp;<span class="op" id="3282778">!=</span>&nbsp;<span class="ident" id="3282781">numIn</span>&nbsp;<span class="op" id="3282787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282792">return</span>&nbsp;<span class="builtintype" id="3282799">nil</span><span class="op" id="3282802">,</span>&nbsp;<span class="ident" id="3282804">fmt</span><span class="op" id="3282807">.</span><span class="ident" id="3282808">Errorf</span><span class="op" id="3282814">(</span><span class="string" id="3282815">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="3282853">,</span>&nbsp;<span class="builtinfunc" id="3282855">len</span><span class="op" id="3282858">(</span><span class="ident" id="3282859">args</span><span class="op" id="3282863">)</span><span class="op" id="3282864">,</span>&nbsp;<span class="ident" id="3282866">numIn</span><span class="op" id="3282871">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3282875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3282878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3282881">argv</span>&nbsp;<span class="op" id="3282886">:=</span>&nbsp;<span class="builtinfunc" id="3282889">make</span><span class="op" id="3282893">(</span><span class="op" id="3282894">[</span><span class="op" id="3282895">]</span><span class="ident" id="3282896">reflect</span><span class="op" id="3282903">.</span><span class="ident" id="3282904">Value</span><span class="op" id="3282909">,</span>&nbsp;<span class="builtinfunc" id="3282911">len</span><span class="op" id="3282914">(</span><span class="ident" id="3282915">args</span><span class="op" id="3282919">)</span><span class="op" id="3282920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3282923">for</span>&nbsp;<span class="ident" id="3282927">i</span><span class="op" id="3282928">,</span>&nbsp;<span class="ident" id="3282930">arg</span>&nbsp;<span class="op" id="3282934">:=</span>&nbsp;<span class="keyword" id="3282937">range</span>&nbsp;<span class="ident" id="3282943">args</span>&nbsp;<span class="op" id="3282948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3282952">value</span>&nbsp;<span class="op" id="3282958">:=</span>&nbsp;<span class="ident" id="3282961">reflect</span><span class="op" id="3282968">.</span><span class="ident" id="3282969">ValueOf</span><span class="op" id="3282976">(</span><span class="ident" id="3282977">arg</span><span class="op" id="3282980">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3282984">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283045">var</span>&nbsp;<span class="ident" id="3283049">argType</span>&nbsp;<span class="ident" id="3283057">reflect</span><span class="op" id="3283064">.</span><span class="ident" id="3283065">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283072">if</span>&nbsp;<span class="op" id="3283075">!</span><span class="ident" id="3283076">typ</span><span class="op" id="3283079">.</span><span class="ident" id="3283080">IsVariadic</span><span class="op" id="3283090">(</span><span class="op" id="3283091">)</span>&nbsp;<span class="op" id="3283093">||</span>&nbsp;<span class="ident" id="3283096">i</span>&nbsp;<span class="op" id="3283098">&lt;</span>&nbsp;<span class="ident" id="3283100">numIn</span><span class="op" id="3283105">-</span><span class="num" id="3283106">1</span>&nbsp;<span class="op" id="3283108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283113">argType</span>&nbsp;<span class="op" id="3283121">=</span>&nbsp;<span class="ident" id="3283123">typ</span><span class="op" id="3283126">.</span><span class="ident" id="3283127">In</span><span class="op" id="3283129">(</span><span class="ident" id="3283130">i</span><span class="op" id="3283131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283135">}</span>&nbsp;<span class="keyword" id="3283137">else</span>&nbsp;<span class="op" id="3283142">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283147">argType</span>&nbsp;<span class="op" id="3283155">=</span>&nbsp;<span class="ident" id="3283157">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283171">if</span>&nbsp;<span class="op" id="3283174">!</span><span class="ident" id="3283175">value</span><span class="op" id="3283180">.</span><span class="ident" id="3283181">IsValid</span><span class="op" id="3283188">(</span><span class="op" id="3283189">)</span>&nbsp;<span class="op" id="3283191">&amp;&amp;</span>&nbsp;<span class="ident" id="3283194">canBeNil</span><span class="op" id="3283202">(</span><span class="ident" id="3283203">argType</span><span class="op" id="3283210">)</span>&nbsp;<span class="op" id="3283212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283217">value</span>&nbsp;<span class="op" id="3283223">=</span>&nbsp;<span class="ident" id="3283225">reflect</span><span class="op" id="3283232">.</span><span class="ident" id="3283233">Zero</span><span class="op" id="3283237">(</span><span class="ident" id="3283238">argType</span><span class="op" id="3283245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283249">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283253">if</span>&nbsp;<span class="op" id="3283256">!</span><span class="ident" id="3283257">value</span><span class="op" id="3283262">.</span><span class="ident" id="3283263">Type</span><span class="op" id="3283267">(</span><span class="op" id="3283268">)</span><span class="op" id="3283269">.</span><span class="ident" id="3283270">AssignableTo</span><span class="op" id="3283282">(</span><span class="ident" id="3283283">argType</span><span class="op" id="3283290">)</span>&nbsp;<span class="op" id="3283292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283297">return</span>&nbsp;<span class="builtintype" id="3283304">nil</span><span class="op" id="3283307">,</span>&nbsp;<span class="ident" id="3283309">fmt</span><span class="op" id="3283312">.</span><span class="ident" id="3283313">Errorf</span><span class="op" id="3283319">(</span><span class="string" id="3283320">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="3283354">,</span>&nbsp;<span class="ident" id="3283356">i</span><span class="op" id="3283357">,</span>&nbsp;<span class="ident" id="3283359">value</span><span class="op" id="3283364">.</span><span class="ident" id="3283365">Type</span><span class="op" id="3283369">(</span><span class="op" id="3283370">)</span><span class="op" id="3283371">,</span>&nbsp;<span class="ident" id="3283373">argType</span><span class="op" id="3283380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283388">argv</span><span class="op" id="3283392">[</span><span class="ident" id="3283393">i</span><span class="op" id="3283394">]</span>&nbsp;<span class="op" id="3283396">=</span>&nbsp;<span class="ident" id="3283398">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283405">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283408">result</span>&nbsp;<span class="op" id="3283415">:=</span>&nbsp;<span class="ident" id="3283418">v</span><span class="op" id="3283419">.</span><span class="ident" id="3283420">Call</span><span class="op" id="3283424">(</span><span class="ident" id="3283425">argv</span><span class="op" id="3283429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283432">if</span>&nbsp;<span class="builtinfunc" id="3283435">len</span><span class="op" id="3283438">(</span><span class="ident" id="3283439">result</span><span class="op" id="3283445">)</span>&nbsp;<span class="op" id="3283447">==</span>&nbsp;<span class="num" id="3283450">2</span>&nbsp;<span class="op" id="3283452">&amp;&amp;</span>&nbsp;<span class="op" id="3283455">!</span><span class="ident" id="3283456">result</span><span class="op" id="3283462">[</span><span class="num" id="3283463">1</span><span class="op" id="3283464">]</span><span class="op" id="3283465">.</span><span class="ident" id="3283466">IsNil</span><span class="op" id="3283471">(</span><span class="op" id="3283472">)</span>&nbsp;<span class="op" id="3283474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283478">return</span>&nbsp;<span class="ident" id="3283485">result</span><span class="op" id="3283491">[</span><span class="num" id="3283492">0</span><span class="op" id="3283493">]</span><span class="op" id="3283494">.</span><span class="ident" id="3283495">Interface</span><span class="op" id="3283504">(</span><span class="op" id="3283505">)</span><span class="op" id="3283506">,</span>&nbsp;<span class="ident" id="3283508">result</span><span class="op" id="3283514">[</span><span class="num" id="3283515">1</span><span class="op" id="3283516">]</span><span class="op" id="3283517">.</span><span class="ident" id="3283518">Interface</span><span class="op" id="3283527">(</span><span class="op" id="3283528">)</span><span class="op" id="3283529">.</span><span class="op" id="3283530">(</span><span class="builtintype" id="3283531">error</span><span class="op" id="3283536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283542">return</span>&nbsp;<span class="ident" id="3283549">result</span><span class="op" id="3283555">[</span><span class="num" id="3283556">0</span><span class="op" id="3283557">]</span><span class="op" id="3283558">.</span><span class="ident" id="3283559">Interface</span><span class="op" id="3283568">(</span><span class="op" id="3283569">)</span><span class="op" id="3283570">,</span>&nbsp;<span class="builtintype" id="3283572">nil</span><br>
<span class="lineno">215</span><span class="op" id="3283576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3283579">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3283598">func</span>&nbsp;<span class="ident" id="3283603">truth</span><span class="op" id="3283608">(</span><span class="ident" id="3283609">a</span>&nbsp;<span class="keyword" id="3283611">interface</span><span class="op" id="3283620">{</span><span class="op" id="3283621">}</span><span class="op" id="3283622">)</span>&nbsp;<span class="builtintype" id="3283624">bool</span>&nbsp;<span class="op" id="3283629">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283632">t</span><span class="op" id="3283633">,</span>&nbsp;<span class="ident" id="3283635">_</span>&nbsp;<span class="op" id="3283637">:=</span>&nbsp;<span class="ident" id="3283640">isTrue</span><span class="op" id="3283646">(</span><span class="ident" id="3283647">reflect</span><span class="op" id="3283654">.</span><span class="ident" id="3283655">ValueOf</span><span class="op" id="3283662">(</span><span class="ident" id="3283663">a</span><span class="op" id="3283664">)</span><span class="op" id="3283665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283668">return</span>&nbsp;<span class="ident" id="3283675">t</span><br>
<span class="lineno"></span><span class="op" id="3283677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3283680">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="3283740">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="3283805">func</span>&nbsp;<span class="ident" id="3283810">and</span><span class="op" id="3283813">(</span><span class="ident" id="3283814">arg0</span>&nbsp;<span class="keyword" id="3283819">interface</span><span class="op" id="3283828">{</span><span class="op" id="3283829">}</span><span class="op" id="3283830">,</span>&nbsp;<span class="ident" id="3283832">args</span>&nbsp;<span class="op" id="3283837">...</span><span class="keyword" id="3283840">interface</span><span class="op" id="3283849">{</span><span class="op" id="3283850">}</span><span class="op" id="3283851">)</span>&nbsp;<span class="keyword" id="3283853">interface</span><span class="op" id="3283862">{</span><span class="op" id="3283863">}</span>&nbsp;<span class="op" id="3283865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283868">if</span>&nbsp;<span class="op" id="3283871">!</span><span class="ident" id="3283872">truth</span><span class="op" id="3283877">(</span><span class="ident" id="3283878">arg0</span><span class="op" id="3283882">)</span>&nbsp;<span class="op" id="3283884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283888">return</span>&nbsp;<span class="ident" id="3283895">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283901">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283904">for</span>&nbsp;<span class="ident" id="3283908">i</span>&nbsp;<span class="op" id="3283910">:=</span>&nbsp;<span class="keyword" id="3283913">range</span>&nbsp;<span class="ident" id="3283919">args</span>&nbsp;<span class="op" id="3283924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3283928">arg0</span>&nbsp;<span class="op" id="3283933">=</span>&nbsp;<span class="ident" id="3283935">args</span><span class="op" id="3283939">[</span><span class="ident" id="3283940">i</span><span class="op" id="3283941">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283945">if</span>&nbsp;<span class="op" id="3283948">!</span><span class="ident" id="3283949">truth</span><span class="op" id="3283954">(</span><span class="ident" id="3283955">arg0</span><span class="op" id="3283959">)</span>&nbsp;<span class="op" id="3283961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283966">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283974">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3283977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3283980">return</span>&nbsp;<span class="ident" id="3283987">arg0</span><br>
<span class="lineno"></span><span class="op" id="3283992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3283995">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="3284053">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="3284117">func</span>&nbsp;<span class="ident" id="3284122">or</span><span class="op" id="3284124">(</span><span class="ident" id="3284125">arg0</span>&nbsp;<span class="keyword" id="3284130">interface</span><span class="op" id="3284139">{</span><span class="op" id="3284140">}</span><span class="op" id="3284141">,</span>&nbsp;<span class="ident" id="3284143">args</span>&nbsp;<span class="op" id="3284148">...</span><span class="keyword" id="3284151">interface</span><span class="op" id="3284160">{</span><span class="op" id="3284161">}</span><span class="op" id="3284162">)</span>&nbsp;<span class="keyword" id="3284164">interface</span><span class="op" id="3284173">{</span><span class="op" id="3284174">}</span>&nbsp;<span class="op" id="3284176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284179">if</span>&nbsp;<span class="ident" id="3284182">truth</span><span class="op" id="3284187">(</span><span class="ident" id="3284188">arg0</span><span class="op" id="3284192">)</span>&nbsp;<span class="op" id="3284194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284198">return</span>&nbsp;<span class="ident" id="3284205">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3284211">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284214">for</span>&nbsp;<span class="ident" id="3284218">i</span>&nbsp;<span class="op" id="3284220">:=</span>&nbsp;<span class="keyword" id="3284223">range</span>&nbsp;<span class="ident" id="3284229">args</span>&nbsp;<span class="op" id="3284234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284238">arg0</span>&nbsp;<span class="op" id="3284243">=</span>&nbsp;<span class="ident" id="3284245">args</span><span class="op" id="3284249">[</span><span class="ident" id="3284250">i</span><span class="op" id="3284251">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284255">if</span>&nbsp;<span class="ident" id="3284258">truth</span><span class="op" id="3284263">(</span><span class="ident" id="3284264">arg0</span><span class="op" id="3284268">)</span>&nbsp;<span class="op" id="3284270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284275">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3284283">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3284286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284289">return</span>&nbsp;<span class="ident" id="3284296">arg0</span><br>
<span class="lineno"></span><span class="op" id="3284301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3284304">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="3284357">func</span>&nbsp;<span class="ident" id="3284362">not</span><span class="op" id="3284365">(</span><span class="ident" id="3284366">arg</span>&nbsp;<span class="keyword" id="3284370">interface</span><span class="op" id="3284379">{</span><span class="op" id="3284380">}</span><span class="op" id="3284381">)</span>&nbsp;<span class="op" id="3284383">(</span><span class="ident" id="3284384">truth</span>&nbsp;<span class="builtintype" id="3284390">bool</span><span class="op" id="3284394">)</span>&nbsp;<span class="op" id="3284396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284399">truth</span><span class="op" id="3284404">,</span>&nbsp;<span class="ident" id="3284406">_</span>&nbsp;<span class="op" id="3284408">=</span>&nbsp;<span class="ident" id="3284410">isTrue</span><span class="op" id="3284416">(</span><span class="ident" id="3284417">reflect</span><span class="op" id="3284424">.</span><span class="ident" id="3284425">ValueOf</span><span class="op" id="3284432">(</span><span class="ident" id="3284433">arg</span><span class="op" id="3284436">)</span><span class="op" id="3284437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284440">return</span>&nbsp;<span class="op" id="3284447">!</span><span class="ident" id="3284448">truth</span><br>
<span class="lineno"></span><span class="op" id="3284454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3284457">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3284473">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3284546">var</span>&nbsp;<span class="op" id="3284550">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284553">errBadComparisonType</span>&nbsp;<span class="op" id="3284574">=</span>&nbsp;<span class="ident" id="3284576">errors</span><span class="op" id="3284582">.</span><span class="ident" id="3284583">New</span><span class="op" id="3284586">(</span><span class="string" id="3284587">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="3284616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284619">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3284640">=</span>&nbsp;<span class="ident" id="3284642">errors</span><span class="op" id="3284648">.</span><span class="ident" id="3284649">New</span><span class="op" id="3284652">(</span><span class="string" id="3284653">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="3284688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284691">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3284712">=</span>&nbsp;<span class="ident" id="3284714">errors</span><span class="op" id="3284720">.</span><span class="ident" id="3284721">New</span><span class="op" id="3284724">(</span><span class="string" id="3284725">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="3284758">)</span><br>
<span class="lineno"></span><span class="op" id="3284760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="3284763">type</span>&nbsp;<span class="ident" id="3284768">kind</span>&nbsp;<span class="builtintype" id="3284773">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3284778">const</span>&nbsp;<span class="op" id="3284784">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284787">invalidKind</span>&nbsp;<span class="ident" id="3284799">kind</span>&nbsp;<span class="op" id="3284804">=</span>&nbsp;<span class="ident" id="3284806">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284812">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284822">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284835">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284844">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284855">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284868">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3284880">uintKind</span><br>
<span class="lineno"></span><span class="op" id="3284889">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3284892">func</span>&nbsp;<span class="ident" id="3284897">basicKind</span><span class="op" id="3284906">(</span><span class="ident" id="3284907">v</span>&nbsp;<span class="ident" id="3284909">reflect</span><span class="op" id="3284916">.</span><span class="ident" id="3284917">Value</span><span class="op" id="3284922">)</span>&nbsp;<span class="op" id="3284924">(</span><span class="ident" id="3284925">kind</span><span class="op" id="3284929">,</span>&nbsp;<span class="builtintype" id="3284931">error</span><span class="op" id="3284936">)</span>&nbsp;<span class="op" id="3284938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284941">switch</span>&nbsp;<span class="ident" id="3284948">v</span><span class="op" id="3284949">.</span><span class="ident" id="3284950">Kind</span><span class="op" id="3284954">(</span><span class="op" id="3284955">)</span>&nbsp;<span class="op" id="3284957">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284960">case</span>&nbsp;<span class="ident" id="3284965">reflect</span><span class="op" id="3284972">.</span><span class="ident" id="3284973">Bool</span><span class="op" id="3284977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3284981">return</span>&nbsp;<span class="ident" id="3284988">boolKind</span><span class="op" id="3284996">,</span>&nbsp;<span class="builtintype" id="3284998">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285003">case</span>&nbsp;<span class="ident" id="3285008">reflect</span><span class="op" id="3285015">.</span><span class="ident" id="3285016">Int</span><span class="op" id="3285019">,</span>&nbsp;<span class="ident" id="3285021">reflect</span><span class="op" id="3285028">.</span><span class="ident" id="3285029">Int8</span><span class="op" id="3285033">,</span>&nbsp;<span class="ident" id="3285035">reflect</span><span class="op" id="3285042">.</span><span class="ident" id="3285043">Int16</span><span class="op" id="3285048">,</span>&nbsp;<span class="ident" id="3285050">reflect</span><span class="op" id="3285057">.</span><span class="ident" id="3285058">Int32</span><span class="op" id="3285063">,</span>&nbsp;<span class="ident" id="3285065">reflect</span><span class="op" id="3285072">.</span><span class="ident" id="3285073">Int64</span><span class="op" id="3285078">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285082">return</span>&nbsp;<span class="ident" id="3285089">intKind</span><span class="op" id="3285096">,</span>&nbsp;<span class="builtintype" id="3285098">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285103">case</span>&nbsp;<span class="ident" id="3285108">reflect</span><span class="op" id="3285115">.</span><span class="ident" id="3285116">Uint</span><span class="op" id="3285120">,</span>&nbsp;<span class="ident" id="3285122">reflect</span><span class="op" id="3285129">.</span><span class="ident" id="3285130">Uint8</span><span class="op" id="3285135">,</span>&nbsp;<span class="ident" id="3285137">reflect</span><span class="op" id="3285144">.</span><span class="ident" id="3285145">Uint16</span><span class="op" id="3285151">,</span>&nbsp;<span class="ident" id="3285153">reflect</span><span class="op" id="3285160">.</span><span class="ident" id="3285161">Uint32</span><span class="op" id="3285167">,</span>&nbsp;<span class="ident" id="3285169">reflect</span><span class="op" id="3285176">.</span><span class="ident" id="3285177">Uint64</span><span class="op" id="3285183">,</span>&nbsp;<span class="ident" id="3285185">reflect</span><span class="op" id="3285192">.</span><span class="ident" id="3285193">Uintptr</span><span class="op" id="3285200">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285204">return</span>&nbsp;<span class="ident" id="3285211">uintKind</span><span class="op" id="3285219">,</span>&nbsp;<span class="builtintype" id="3285221">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285226">case</span>&nbsp;<span class="ident" id="3285231">reflect</span><span class="op" id="3285238">.</span><span class="ident" id="3285239">Float32</span><span class="op" id="3285246">,</span>&nbsp;<span class="ident" id="3285248">reflect</span><span class="op" id="3285255">.</span><span class="ident" id="3285256">Float64</span><span class="op" id="3285263">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285267">return</span>&nbsp;<span class="ident" id="3285274">floatKind</span><span class="op" id="3285283">,</span>&nbsp;<span class="builtintype" id="3285285">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285290">case</span>&nbsp;<span class="ident" id="3285295">reflect</span><span class="op" id="3285302">.</span><span class="ident" id="3285303">Complex64</span><span class="op" id="3285312">,</span>&nbsp;<span class="ident" id="3285314">reflect</span><span class="op" id="3285321">.</span><span class="ident" id="3285322">Complex128</span><span class="op" id="3285332">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285336">return</span>&nbsp;<span class="ident" id="3285343">complexKind</span><span class="op" id="3285354">,</span>&nbsp;<span class="builtintype" id="3285356">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285361">case</span>&nbsp;<span class="ident" id="3285366">reflect</span><span class="op" id="3285373">.</span><span class="ident" id="3285374">String</span><span class="op" id="3285380">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285384">return</span>&nbsp;<span class="ident" id="3285391">stringKind</span><span class="op" id="3285401">,</span>&nbsp;<span class="builtintype" id="3285403">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3285408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285411">return</span>&nbsp;<span class="ident" id="3285418">invalidKind</span><span class="op" id="3285429">,</span>&nbsp;<span class="ident" id="3285431">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="3285452">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="3285455">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="3285510">func</span>&nbsp;<span class="ident" id="3285515">eq</span><span class="op" id="3285517">(</span><span class="ident" id="3285518">arg1</span>&nbsp;<span class="keyword" id="3285523">interface</span><span class="op" id="3285532">{</span><span class="op" id="3285533">}</span><span class="op" id="3285534">,</span>&nbsp;<span class="ident" id="3285536">arg2</span>&nbsp;<span class="op" id="3285541">...</span><span class="keyword" id="3285544">interface</span><span class="op" id="3285553">{</span><span class="op" id="3285554">}</span><span class="op" id="3285555">)</span>&nbsp;<span class="op" id="3285557">(</span><span class="builtintype" id="3285558">bool</span><span class="op" id="3285562">,</span>&nbsp;<span class="builtintype" id="3285564">error</span><span class="op" id="3285569">)</span>&nbsp;<span class="op" id="3285571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285574">v1</span>&nbsp;<span class="op" id="3285577">:=</span>&nbsp;<span class="ident" id="3285580">reflect</span><span class="op" id="3285587">.</span><span class="ident" id="3285588">ValueOf</span><span class="op" id="3285595">(</span><span class="ident" id="3285596">arg1</span><span class="op" id="3285600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285603">k1</span><span class="op" id="3285605">,</span>&nbsp;<span class="ident" id="3285607">err</span>&nbsp;<span class="op" id="3285611">:=</span>&nbsp;<span class="ident" id="3285614">basicKind</span><span class="op" id="3285623">(</span><span class="ident" id="3285624">v1</span><span class="op" id="3285626">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285629">if</span>&nbsp;<span class="ident" id="3285632">err</span>&nbsp;<span class="op" id="3285636">!=</span>&nbsp;<span class="builtintype" id="3285639">nil</span>&nbsp;<span class="op" id="3285643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285647">return</span>&nbsp;<span class="builtintype" id="3285654">false</span><span class="op" id="3285659">,</span>&nbsp;<span class="ident" id="3285661">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3285666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285669">if</span>&nbsp;<span class="builtinfunc" id="3285672">len</span><span class="op" id="3285675">(</span><span class="ident" id="3285676">arg2</span><span class="op" id="3285680">)</span>&nbsp;<span class="op" id="3285682">==</span>&nbsp;<span class="num" id="3285685">0</span>&nbsp;<span class="op" id="3285687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285691">return</span>&nbsp;<span class="builtintype" id="3285698">false</span><span class="op" id="3285703">,</span>&nbsp;<span class="ident" id="3285705">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3285722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285725">for</span>&nbsp;<span class="ident" id="3285729">_</span><span class="op" id="3285730">,</span>&nbsp;<span class="ident" id="3285732">arg</span>&nbsp;<span class="op" id="3285736">:=</span>&nbsp;<span class="keyword" id="3285739">range</span>&nbsp;<span class="ident" id="3285745">arg2</span>&nbsp;<span class="op" id="3285750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285754">v2</span>&nbsp;<span class="op" id="3285757">:=</span>&nbsp;<span class="ident" id="3285760">reflect</span><span class="op" id="3285767">.</span><span class="ident" id="3285768">ValueOf</span><span class="op" id="3285775">(</span><span class="ident" id="3285776">arg</span><span class="op" id="3285779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285783">k2</span><span class="op" id="3285785">,</span>&nbsp;<span class="ident" id="3285787">err</span>&nbsp;<span class="op" id="3285791">:=</span>&nbsp;<span class="ident" id="3285794">basicKind</span><span class="op" id="3285803">(</span><span class="ident" id="3285804">v2</span><span class="op" id="3285806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285810">if</span>&nbsp;<span class="ident" id="3285813">err</span>&nbsp;<span class="op" id="3285817">!=</span>&nbsp;<span class="builtintype" id="3285820">nil</span>&nbsp;<span class="op" id="3285824">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285829">return</span>&nbsp;<span class="builtintype" id="3285836">false</span><span class="op" id="3285841">,</span>&nbsp;<span class="ident" id="3285843">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3285849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285853">truth</span>&nbsp;<span class="op" id="3285859">:=</span>&nbsp;<span class="builtintype" id="3285862">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285870">if</span>&nbsp;<span class="ident" id="3285873">k1</span>&nbsp;<span class="op" id="3285876">!=</span>&nbsp;<span class="ident" id="3285879">k2</span>&nbsp;<span class="op" id="3285882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3285887">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285961">switch</span>&nbsp;<span class="op" id="3285968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3285973">case</span>&nbsp;<span class="ident" id="3285978">k1</span>&nbsp;<span class="op" id="3285981">==</span>&nbsp;<span class="ident" id="3285984">intKind</span>&nbsp;<span class="op" id="3285992">&amp;&amp;</span>&nbsp;<span class="ident" id="3285995">k2</span>&nbsp;<span class="op" id="3285998">==</span>&nbsp;<span class="ident" id="3286001">uintKind</span><span class="op" id="3286009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286015">truth</span>&nbsp;<span class="op" id="3286021">=</span>&nbsp;<span class="ident" id="3286023">v1</span><span class="op" id="3286025">.</span><span class="ident" id="3286026">Int</span><span class="op" id="3286029">(</span><span class="op" id="3286030">)</span>&nbsp;<span class="op" id="3286032">&gt;=</span>&nbsp;<span class="num" id="3286035">0</span>&nbsp;<span class="op" id="3286037">&amp;&amp;</span>&nbsp;<span class="builtintype" id="3286040">uint64</span><span class="op" id="3286046">(</span><span class="ident" id="3286047">v1</span><span class="op" id="3286049">.</span><span class="ident" id="3286050">Int</span><span class="op" id="3286053">(</span><span class="op" id="3286054">)</span><span class="op" id="3286055">)</span>&nbsp;<span class="op" id="3286057">==</span>&nbsp;<span class="ident" id="3286060">v2</span><span class="op" id="3286062">.</span><span class="ident" id="3286063">Uint</span><span class="op" id="3286067">(</span><span class="op" id="3286068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286073">case</span>&nbsp;<span class="ident" id="3286078">k1</span>&nbsp;<span class="op" id="3286081">==</span>&nbsp;<span class="ident" id="3286084">uintKind</span>&nbsp;<span class="op" id="3286093">&amp;&amp;</span>&nbsp;<span class="ident" id="3286096">k2</span>&nbsp;<span class="op" id="3286099">==</span>&nbsp;<span class="ident" id="3286102">intKind</span><span class="op" id="3286109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286115">truth</span>&nbsp;<span class="op" id="3286121">=</span>&nbsp;<span class="ident" id="3286123">v2</span><span class="op" id="3286125">.</span><span class="ident" id="3286126">Int</span><span class="op" id="3286129">(</span><span class="op" id="3286130">)</span>&nbsp;<span class="op" id="3286132">&gt;=</span>&nbsp;<span class="num" id="3286135">0</span>&nbsp;<span class="op" id="3286137">&amp;&amp;</span>&nbsp;<span class="ident" id="3286140">v1</span><span class="op" id="3286142">.</span><span class="ident" id="3286143">Uint</span><span class="op" id="3286147">(</span><span class="op" id="3286148">)</span>&nbsp;<span class="op" id="3286150">==</span>&nbsp;<span class="builtintype" id="3286153">uint64</span><span class="op" id="3286159">(</span><span class="ident" id="3286160">v2</span><span class="op" id="3286162">.</span><span class="ident" id="3286163">Int</span><span class="op" id="3286166">(</span><span class="op" id="3286167">)</span><span class="op" id="3286168">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286173">default</span><span class="op" id="3286180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286186">return</span>&nbsp;<span class="builtintype" id="3286193">false</span><span class="op" id="3286198">,</span>&nbsp;<span class="ident" id="3286200">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3286220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3286224">}</span>&nbsp;<span class="keyword" id="3286226">else</span>&nbsp;<span class="op" id="3286231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286236">switch</span>&nbsp;<span class="ident" id="3286243">k1</span>&nbsp;<span class="op" id="3286246">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286251">case</span>&nbsp;<span class="ident" id="3286256">boolKind</span><span class="op" id="3286264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286270">truth</span>&nbsp;<span class="op" id="3286276">=</span>&nbsp;<span class="ident" id="3286278">v1</span><span class="op" id="3286280">.</span><span class="ident" id="3286281">Bool</span><span class="op" id="3286285">(</span><span class="op" id="3286286">)</span>&nbsp;<span class="op" id="3286288">==</span>&nbsp;<span class="ident" id="3286291">v2</span><span class="op" id="3286293">.</span><span class="ident" id="3286294">Bool</span><span class="op" id="3286298">(</span><span class="op" id="3286299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286304">case</span>&nbsp;<span class="ident" id="3286309">complexKind</span><span class="op" id="3286320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286326">truth</span>&nbsp;<span class="op" id="3286332">=</span>&nbsp;<span class="ident" id="3286334">v1</span><span class="op" id="3286336">.</span><span class="ident" id="3286337">Complex</span><span class="op" id="3286344">(</span><span class="op" id="3286345">)</span>&nbsp;<span class="op" id="3286347">==</span>&nbsp;<span class="ident" id="3286350">v2</span><span class="op" id="3286352">.</span><span class="ident" id="3286353">Complex</span><span class="op" id="3286360">(</span><span class="op" id="3286361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286366">case</span>&nbsp;<span class="ident" id="3286371">floatKind</span><span class="op" id="3286380">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286386">truth</span>&nbsp;<span class="op" id="3286392">=</span>&nbsp;<span class="ident" id="3286394">v1</span><span class="op" id="3286396">.</span><span class="ident" id="3286397">Float</span><span class="op" id="3286402">(</span><span class="op" id="3286403">)</span>&nbsp;<span class="op" id="3286405">==</span>&nbsp;<span class="ident" id="3286408">v2</span><span class="op" id="3286410">.</span><span class="ident" id="3286411">Float</span><span class="op" id="3286416">(</span><span class="op" id="3286417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286422">case</span>&nbsp;<span class="ident" id="3286427">intKind</span><span class="op" id="3286434">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286440">truth</span>&nbsp;<span class="op" id="3286446">=</span>&nbsp;<span class="ident" id="3286448">v1</span><span class="op" id="3286450">.</span><span class="ident" id="3286451">Int</span><span class="op" id="3286454">(</span><span class="op" id="3286455">)</span>&nbsp;<span class="op" id="3286457">==</span>&nbsp;<span class="ident" id="3286460">v2</span><span class="op" id="3286462">.</span><span class="ident" id="3286463">Int</span><span class="op" id="3286466">(</span><span class="op" id="3286467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286472">case</span>&nbsp;<span class="ident" id="3286477">stringKind</span><span class="op" id="3286487">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286493">truth</span>&nbsp;<span class="op" id="3286499">=</span>&nbsp;<span class="ident" id="3286501">v1</span><span class="op" id="3286503">.</span><span class="ident" id="3286504">String</span><span class="op" id="3286510">(</span><span class="op" id="3286511">)</span>&nbsp;<span class="op" id="3286513">==</span>&nbsp;<span class="ident" id="3286516">v2</span><span class="op" id="3286518">.</span><span class="ident" id="3286519">String</span><span class="op" id="3286525">(</span><span class="op" id="3286526">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286531">case</span>&nbsp;<span class="ident" id="3286536">uintKind</span><span class="op" id="3286544">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286550">truth</span>&nbsp;<span class="op" id="3286556">=</span>&nbsp;<span class="ident" id="3286558">v1</span><span class="op" id="3286560">.</span><span class="ident" id="3286561">Uint</span><span class="op" id="3286565">(</span><span class="op" id="3286566">)</span>&nbsp;<span class="op" id="3286568">==</span>&nbsp;<span class="ident" id="3286571">v2</span><span class="op" id="3286573">.</span><span class="ident" id="3286574">Uint</span><span class="op" id="3286578">(</span><span class="op" id="3286579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286584">default</span><span class="op" id="3286591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3286597">panic</span><span class="op" id="3286602">(</span><span class="string" id="3286603">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="3286617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3286622">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3286626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286630">if</span>&nbsp;<span class="ident" id="3286633">truth</span>&nbsp;<span class="op" id="3286639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286644">return</span>&nbsp;<span class="builtintype" id="3286651">true</span><span class="op" id="3286655">,</span>&nbsp;<span class="builtintype" id="3286657">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3286663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3286666">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286669">return</span>&nbsp;<span class="builtintype" id="3286676">false</span><span class="op" id="3286681">,</span>&nbsp;<span class="builtintype" id="3286683">nil</span><br>
<span class="lineno"></span><span class="op" id="3286687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3286690">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3286729">func</span>&nbsp;<span class="ident" id="3286734">ne</span><span class="op" id="3286736">(</span><span class="ident" id="3286737">arg1</span><span class="op" id="3286741">,</span>&nbsp;<span class="ident" id="3286743">arg2</span>&nbsp;<span class="keyword" id="3286748">interface</span><span class="op" id="3286757">{</span><span class="op" id="3286758">}</span><span class="op" id="3286759">)</span>&nbsp;<span class="op" id="3286761">(</span><span class="builtintype" id="3286762">bool</span><span class="op" id="3286766">,</span>&nbsp;<span class="builtintype" id="3286768">error</span><span class="op" id="3286773">)</span>&nbsp;<span class="op" id="3286775">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3286778">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286807">equal</span><span class="op" id="3286812">,</span>&nbsp;<span class="ident" id="3286814">err</span>&nbsp;<span class="op" id="3286818">:=</span>&nbsp;<span class="ident" id="3286821">eq</span><span class="op" id="3286823">(</span><span class="ident" id="3286824">arg1</span><span class="op" id="3286828">,</span>&nbsp;<span class="ident" id="3286830">arg2</span><span class="op" id="3286834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286837">return</span>&nbsp;<span class="op" id="3286844">!</span><span class="ident" id="3286845">equal</span><span class="op" id="3286850">,</span>&nbsp;<span class="ident" id="3286852">err</span><br>
<span class="lineno"></span><span class="op" id="3286856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="3286859">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3286897">func</span>&nbsp;<span class="ident" id="3286902">lt</span><span class="op" id="3286904">(</span><span class="ident" id="3286905">arg1</span><span class="op" id="3286909">,</span>&nbsp;<span class="ident" id="3286911">arg2</span>&nbsp;<span class="keyword" id="3286916">interface</span><span class="op" id="3286925">{</span><span class="op" id="3286926">}</span><span class="op" id="3286927">)</span>&nbsp;<span class="op" id="3286929">(</span><span class="builtintype" id="3286930">bool</span><span class="op" id="3286934">,</span>&nbsp;<span class="builtintype" id="3286936">error</span><span class="op" id="3286941">)</span>&nbsp;<span class="op" id="3286943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286946">v1</span>&nbsp;<span class="op" id="3286949">:=</span>&nbsp;<span class="ident" id="3286952">reflect</span><span class="op" id="3286959">.</span><span class="ident" id="3286960">ValueOf</span><span class="op" id="3286967">(</span><span class="ident" id="3286968">arg1</span><span class="op" id="3286972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286975">k1</span><span class="op" id="3286977">,</span>&nbsp;<span class="ident" id="3286979">err</span>&nbsp;<span class="op" id="3286983">:=</span>&nbsp;<span class="ident" id="3286986">basicKind</span><span class="op" id="3286995">(</span><span class="ident" id="3286996">v1</span><span class="op" id="3286998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287001">if</span>&nbsp;<span class="ident" id="3287004">err</span>&nbsp;<span class="op" id="3287008">!=</span>&nbsp;<span class="builtintype" id="3287011">nil</span>&nbsp;<span class="op" id="3287015">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287019">return</span>&nbsp;<span class="builtintype" id="3287026">false</span><span class="op" id="3287031">,</span>&nbsp;<span class="ident" id="3287033">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287041">v2</span>&nbsp;<span class="op" id="3287044">:=</span>&nbsp;<span class="ident" id="3287047">reflect</span><span class="op" id="3287054">.</span><span class="ident" id="3287055">ValueOf</span><span class="op" id="3287062">(</span><span class="ident" id="3287063">arg2</span><span class="op" id="3287067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287070">k2</span><span class="op" id="3287072">,</span>&nbsp;<span class="ident" id="3287074">err</span>&nbsp;<span class="op" id="3287078">:=</span>&nbsp;<span class="ident" id="3287081">basicKind</span><span class="op" id="3287090">(</span><span class="ident" id="3287091">v2</span><span class="op" id="3287093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287096">if</span>&nbsp;<span class="ident" id="3287099">err</span>&nbsp;<span class="op" id="3287103">!=</span>&nbsp;<span class="builtintype" id="3287106">nil</span>&nbsp;<span class="op" id="3287110">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287114">return</span>&nbsp;<span class="builtintype" id="3287121">false</span><span class="op" id="3287126">,</span>&nbsp;<span class="ident" id="3287128">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287136">truth</span>&nbsp;<span class="op" id="3287142">:=</span>&nbsp;<span class="builtintype" id="3287145">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287152">if</span>&nbsp;<span class="ident" id="3287155">k1</span>&nbsp;<span class="op" id="3287158">!=</span>&nbsp;<span class="ident" id="3287161">k2</span>&nbsp;<span class="op" id="3287164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3287168">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287241">switch</span>&nbsp;<span class="op" id="3287248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287252">case</span>&nbsp;<span class="ident" id="3287257">k1</span>&nbsp;<span class="op" id="3287260">==</span>&nbsp;<span class="ident" id="3287263">intKind</span>&nbsp;<span class="op" id="3287271">&amp;&amp;</span>&nbsp;<span class="ident" id="3287274">k2</span>&nbsp;<span class="op" id="3287277">==</span>&nbsp;<span class="ident" id="3287280">uintKind</span><span class="op" id="3287288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287293">truth</span>&nbsp;<span class="op" id="3287299">=</span>&nbsp;<span class="ident" id="3287301">v1</span><span class="op" id="3287303">.</span><span class="ident" id="3287304">Int</span><span class="op" id="3287307">(</span><span class="op" id="3287308">)</span>&nbsp;<span class="op" id="3287310">&lt;</span>&nbsp;<span class="num" id="3287312">0</span>&nbsp;<span class="op" id="3287314">||</span>&nbsp;<span class="builtintype" id="3287317">uint64</span><span class="op" id="3287323">(</span><span class="ident" id="3287324">v1</span><span class="op" id="3287326">.</span><span class="ident" id="3287327">Int</span><span class="op" id="3287330">(</span><span class="op" id="3287331">)</span><span class="op" id="3287332">)</span>&nbsp;<span class="op" id="3287334">&lt;</span>&nbsp;<span class="ident" id="3287336">v2</span><span class="op" id="3287338">.</span><span class="ident" id="3287339">Uint</span><span class="op" id="3287343">(</span><span class="op" id="3287344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287348">case</span>&nbsp;<span class="ident" id="3287353">k1</span>&nbsp;<span class="op" id="3287356">==</span>&nbsp;<span class="ident" id="3287359">uintKind</span>&nbsp;<span class="op" id="3287368">&amp;&amp;</span>&nbsp;<span class="ident" id="3287371">k2</span>&nbsp;<span class="op" id="3287374">==</span>&nbsp;<span class="ident" id="3287377">intKind</span><span class="op" id="3287384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287389">truth</span>&nbsp;<span class="op" id="3287395">=</span>&nbsp;<span class="ident" id="3287397">v2</span><span class="op" id="3287399">.</span><span class="ident" id="3287400">Int</span><span class="op" id="3287403">(</span><span class="op" id="3287404">)</span>&nbsp;<span class="op" id="3287406">&gt;=</span>&nbsp;<span class="num" id="3287409">0</span>&nbsp;<span class="op" id="3287411">&amp;&amp;</span>&nbsp;<span class="ident" id="3287414">v1</span><span class="op" id="3287416">.</span><span class="ident" id="3287417">Uint</span><span class="op" id="3287421">(</span><span class="op" id="3287422">)</span>&nbsp;<span class="op" id="3287424">&lt;</span>&nbsp;<span class="builtintype" id="3287426">uint64</span><span class="op" id="3287432">(</span><span class="ident" id="3287433">v2</span><span class="op" id="3287435">.</span><span class="ident" id="3287436">Int</span><span class="op" id="3287439">(</span><span class="op" id="3287440">)</span><span class="op" id="3287441">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287445">default</span><span class="op" id="3287452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287457">return</span>&nbsp;<span class="builtintype" id="3287464">false</span><span class="op" id="3287469">,</span>&nbsp;<span class="ident" id="3287471">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287493">}</span>&nbsp;<span class="keyword" id="3287495">else</span>&nbsp;<span class="op" id="3287500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287504">switch</span>&nbsp;<span class="ident" id="3287511">k1</span>&nbsp;<span class="op" id="3287514">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287518">case</span>&nbsp;<span class="ident" id="3287523">boolKind</span><span class="op" id="3287531">,</span>&nbsp;<span class="ident" id="3287533">complexKind</span><span class="op" id="3287544">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287549">return</span>&nbsp;<span class="builtintype" id="3287556">false</span><span class="op" id="3287561">,</span>&nbsp;<span class="ident" id="3287563">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287586">case</span>&nbsp;<span class="ident" id="3287591">floatKind</span><span class="op" id="3287600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287605">truth</span>&nbsp;<span class="op" id="3287611">=</span>&nbsp;<span class="ident" id="3287613">v1</span><span class="op" id="3287615">.</span><span class="ident" id="3287616">Float</span><span class="op" id="3287621">(</span><span class="op" id="3287622">)</span>&nbsp;<span class="op" id="3287624">&lt;</span>&nbsp;<span class="ident" id="3287626">v2</span><span class="op" id="3287628">.</span><span class="ident" id="3287629">Float</span><span class="op" id="3287634">(</span><span class="op" id="3287635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287639">case</span>&nbsp;<span class="ident" id="3287644">intKind</span><span class="op" id="3287651">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287656">truth</span>&nbsp;<span class="op" id="3287662">=</span>&nbsp;<span class="ident" id="3287664">v1</span><span class="op" id="3287666">.</span><span class="ident" id="3287667">Int</span><span class="op" id="3287670">(</span><span class="op" id="3287671">)</span>&nbsp;<span class="op" id="3287673">&lt;</span>&nbsp;<span class="ident" id="3287675">v2</span><span class="op" id="3287677">.</span><span class="ident" id="3287678">Int</span><span class="op" id="3287681">(</span><span class="op" id="3287682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287686">case</span>&nbsp;<span class="ident" id="3287691">stringKind</span><span class="op" id="3287701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287706">truth</span>&nbsp;<span class="op" id="3287712">=</span>&nbsp;<span class="ident" id="3287714">v1</span><span class="op" id="3287716">.</span><span class="ident" id="3287717">String</span><span class="op" id="3287723">(</span><span class="op" id="3287724">)</span>&nbsp;<span class="op" id="3287726">&lt;</span>&nbsp;<span class="ident" id="3287728">v2</span><span class="op" id="3287730">.</span><span class="ident" id="3287731">String</span><span class="op" id="3287737">(</span><span class="op" id="3287738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287742">case</span>&nbsp;<span class="ident" id="3287747">uintKind</span><span class="op" id="3287755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287760">truth</span>&nbsp;<span class="op" id="3287766">=</span>&nbsp;<span class="ident" id="3287768">v1</span><span class="op" id="3287770">.</span><span class="ident" id="3287771">Uint</span><span class="op" id="3287775">(</span><span class="op" id="3287776">)</span>&nbsp;<span class="op" id="3287778">&lt;</span>&nbsp;<span class="ident" id="3287780">v2</span><span class="op" id="3287782">.</span><span class="ident" id="3287783">Uint</span><span class="op" id="3287787">(</span><span class="op" id="3287788">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287792">default</span><span class="op" id="3287799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3287804">panic</span><span class="op" id="3287809">(</span><span class="string" id="3287810">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="3287824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287834">return</span>&nbsp;<span class="ident" id="3287841">truth</span><span class="op" id="3287846">,</span>&nbsp;<span class="builtintype" id="3287848">nil</span><br>
<span class="lineno">400</span><span class="op" id="3287852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3287855">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3287892">func</span>&nbsp;<span class="ident" id="3287897">le</span><span class="op" id="3287899">(</span><span class="ident" id="3287900">arg1</span><span class="op" id="3287904">,</span>&nbsp;<span class="ident" id="3287906">arg2</span>&nbsp;<span class="keyword" id="3287911">interface</span><span class="op" id="3287920">{</span><span class="op" id="3287921">}</span><span class="op" id="3287922">)</span>&nbsp;<span class="op" id="3287924">(</span><span class="builtintype" id="3287925">bool</span><span class="op" id="3287929">,</span>&nbsp;<span class="builtintype" id="3287931">error</span><span class="op" id="3287936">)</span>&nbsp;<span class="op" id="3287938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3287941">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287960">lessThan</span><span class="op" id="3287968">,</span>&nbsp;<span class="ident" id="3287970">err</span>&nbsp;<span class="op" id="3287974">:=</span>&nbsp;<span class="ident" id="3287977">lt</span><span class="op" id="3287979">(</span><span class="ident" id="3287980">arg1</span><span class="op" id="3287984">,</span>&nbsp;<span class="ident" id="3287986">arg2</span><span class="op" id="3287990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287993">if</span>&nbsp;<span class="ident" id="3287996">lessThan</span>&nbsp;<span class="op" id="3288005">||</span>&nbsp;<span class="ident" id="3288008">err</span>&nbsp;<span class="op" id="3288012">!=</span>&nbsp;<span class="builtintype" id="3288015">nil</span>&nbsp;<span class="op" id="3288019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288023">return</span>&nbsp;<span class="ident" id="3288030">lessThan</span><span class="op" id="3288038">,</span>&nbsp;<span class="ident" id="3288040">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288048">return</span>&nbsp;<span class="ident" id="3288055">eq</span><span class="op" id="3288057">(</span><span class="ident" id="3288058">arg1</span><span class="op" id="3288062">,</span>&nbsp;<span class="ident" id="3288064">arg2</span><span class="op" id="3288068">)</span><br>
<span class="lineno">410</span><span class="op" id="3288070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3288073">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3288111">func</span>&nbsp;<span class="ident" id="3288116">gt</span><span class="op" id="3288118">(</span><span class="ident" id="3288119">arg1</span><span class="op" id="3288123">,</span>&nbsp;<span class="ident" id="3288125">arg2</span>&nbsp;<span class="keyword" id="3288130">interface</span><span class="op" id="3288139">{</span><span class="op" id="3288140">}</span><span class="op" id="3288141">)</span>&nbsp;<span class="op" id="3288143">(</span><span class="builtintype" id="3288144">bool</span><span class="op" id="3288148">,</span>&nbsp;<span class="builtintype" id="3288150">error</span><span class="op" id="3288155">)</span>&nbsp;<span class="op" id="3288157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3288160">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288188">lessOrEqual</span><span class="op" id="3288199">,</span>&nbsp;<span class="ident" id="3288201">err</span>&nbsp;<span class="op" id="3288205">:=</span>&nbsp;<span class="ident" id="3288208">le</span><span class="op" id="3288210">(</span><span class="ident" id="3288211">arg1</span><span class="op" id="3288215">,</span>&nbsp;<span class="ident" id="3288217">arg2</span><span class="op" id="3288221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288224">if</span>&nbsp;<span class="ident" id="3288227">err</span>&nbsp;<span class="op" id="3288231">!=</span>&nbsp;<span class="builtintype" id="3288234">nil</span>&nbsp;<span class="op" id="3288238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288242">return</span>&nbsp;<span class="builtintype" id="3288249">false</span><span class="op" id="3288254">,</span>&nbsp;<span class="ident" id="3288256">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288264">return</span>&nbsp;<span class="op" id="3288271">!</span><span class="ident" id="3288272">lessOrEqual</span><span class="op" id="3288283">,</span>&nbsp;<span class="builtintype" id="3288285">nil</span><br>
<span class="lineno">420</span><span class="op" id="3288289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3288292">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3288331">func</span>&nbsp;<span class="ident" id="3288336">ge</span><span class="op" id="3288338">(</span><span class="ident" id="3288339">arg1</span><span class="op" id="3288343">,</span>&nbsp;<span class="ident" id="3288345">arg2</span>&nbsp;<span class="keyword" id="3288350">interface</span><span class="op" id="3288359">{</span><span class="op" id="3288360">}</span><span class="op" id="3288361">)</span>&nbsp;<span class="op" id="3288363">(</span><span class="builtintype" id="3288364">bool</span><span class="op" id="3288368">,</span>&nbsp;<span class="builtintype" id="3288370">error</span><span class="op" id="3288375">)</span>&nbsp;<span class="op" id="3288377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3288380">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288408">lessThan</span><span class="op" id="3288416">,</span>&nbsp;<span class="ident" id="3288418">err</span>&nbsp;<span class="op" id="3288422">:=</span>&nbsp;<span class="ident" id="3288425">lt</span><span class="op" id="3288427">(</span><span class="ident" id="3288428">arg1</span><span class="op" id="3288432">,</span>&nbsp;<span class="ident" id="3288434">arg2</span><span class="op" id="3288438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288441">if</span>&nbsp;<span class="ident" id="3288444">err</span>&nbsp;<span class="op" id="3288448">!=</span>&nbsp;<span class="builtintype" id="3288451">nil</span>&nbsp;<span class="op" id="3288455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288459">return</span>&nbsp;<span class="builtintype" id="3288466">false</span><span class="op" id="3288471">,</span>&nbsp;<span class="ident" id="3288473">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288481">return</span>&nbsp;<span class="op" id="3288488">!</span><span class="ident" id="3288489">lessThan</span><span class="op" id="3288497">,</span>&nbsp;<span class="builtintype" id="3288499">nil</span><br>
<span class="lineno">430</span><span class="op" id="3288503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3288506">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3288525">var</span>&nbsp;<span class="op" id="3288529">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288532">htmlQuot</span>&nbsp;<span class="op" id="3288541">=</span>&nbsp;<span class="op" id="3288543">[</span><span class="op" id="3288544">]</span><span class="builtintype" id="3288545">byte</span><span class="op" id="3288549">(</span><span class="string" id="3288550">&#34;&amp;#34;&#34;</span><span class="op" id="3288557">)</span>&nbsp;<span class="comment" id="3288559">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288585">htmlApos</span>&nbsp;<span class="op" id="3288594">=</span>&nbsp;<span class="op" id="3288596">[</span><span class="op" id="3288597">]</span><span class="builtintype" id="3288598">byte</span><span class="op" id="3288602">(</span><span class="string" id="3288603">&#34;&amp;#39;&#34;</span><span class="op" id="3288610">)</span>&nbsp;<span class="comment" id="3288612">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288675">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="3288684">=</span>&nbsp;<span class="op" id="3288686">[</span><span class="op" id="3288687">]</span><span class="builtintype" id="3288688">byte</span><span class="op" id="3288692">(</span><span class="string" id="3288693">&#34;&amp;amp;&#34;</span><span class="op" id="3288700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288703">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3288712">=</span>&nbsp;<span class="op" id="3288714">[</span><span class="op" id="3288715">]</span><span class="builtintype" id="3288716">byte</span><span class="op" id="3288720">(</span><span class="string" id="3288721">&#34;&amp;lt;&#34;</span><span class="op" id="3288727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288730">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3288739">=</span>&nbsp;<span class="op" id="3288741">[</span><span class="op" id="3288742">]</span><span class="builtintype" id="3288743">byte</span><span class="op" id="3288747">(</span><span class="string" id="3288748">&#34;&amp;gt;&#34;</span><span class="op" id="3288754">)</span><br>
<span class="lineno">440</span><span class="op" id="3288756">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3288759">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3288839">func</span>&nbsp;<span class="ident" id="3288844">HTMLEscape</span><span class="op" id="3288854">(</span><span class="ident" id="3288855">w</span>&nbsp;<span class="ident" id="3288857">io</span><span class="op" id="3288859">.</span><span class="ident" id="3288860">Writer</span><span class="op" id="3288866">,</span>&nbsp;<span class="ident" id="3288868">b</span>&nbsp;<span class="op" id="3288870">[</span><span class="op" id="3288871">]</span><span class="builtintype" id="3288872">byte</span><span class="op" id="3288876">)</span>&nbsp;<span class="op" id="3288878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288881">last</span>&nbsp;<span class="op" id="3288886">:=</span>&nbsp;<span class="num" id="3288889">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288892">for</span>&nbsp;<span class="ident" id="3288896">i</span><span class="op" id="3288897">,</span>&nbsp;<span class="ident" id="3288899">c</span>&nbsp;<span class="op" id="3288901">:=</span>&nbsp;<span class="keyword" id="3288904">range</span>&nbsp;<span class="ident" id="3288910">b</span>&nbsp;<span class="op" id="3288912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288916">var</span>&nbsp;<span class="ident" id="3288920">html</span>&nbsp;<span class="op" id="3288925">[</span><span class="op" id="3288926">]</span><span class="builtintype" id="3288927">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288934">switch</span>&nbsp;<span class="ident" id="3288941">c</span>&nbsp;<span class="op" id="3288943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288947">case</span>&nbsp;<span class="string" id="3288952">&#39;&#34;&#39;</span><span class="op" id="3288955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288960">html</span>&nbsp;<span class="op" id="3288965">=</span>&nbsp;<span class="ident" id="3288967">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288978">case</span>&nbsp;<span class="string" id="3288983">&#39;\&#39;&#39;</span><span class="op" id="3288987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288992">html</span>&nbsp;<span class="op" id="3288997">=</span>&nbsp;<span class="ident" id="3288999">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289010">case</span>&nbsp;<span class="string" id="3289015">&#39;&amp;&#39;</span><span class="op" id="3289018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289023">html</span>&nbsp;<span class="op" id="3289028">=</span>&nbsp;<span class="ident" id="3289030">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289040">case</span>&nbsp;<span class="string" id="3289045">&#39;&lt;&#39;</span><span class="op" id="3289048">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289053">html</span>&nbsp;<span class="op" id="3289058">=</span>&nbsp;<span class="ident" id="3289060">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289069">case</span>&nbsp;<span class="string" id="3289074">&#39;&gt;&#39;</span><span class="op" id="3289077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289082">html</span>&nbsp;<span class="op" id="3289087">=</span>&nbsp;<span class="ident" id="3289089">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289098">default</span><span class="op" id="3289105">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289110">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289125">w</span><span class="op" id="3289126">.</span><span class="ident" id="3289127">Write</span><span class="op" id="3289132">(</span><span class="ident" id="3289133">b</span><span class="op" id="3289134">[</span><span class="ident" id="3289135">last</span><span class="op" id="3289139">:</span><span class="ident" id="3289140">i</span><span class="op" id="3289141">]</span><span class="op" id="3289142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289146">w</span><span class="op" id="3289147">.</span><span class="ident" id="3289148">Write</span><span class="op" id="3289153">(</span><span class="ident" id="3289154">html</span><span class="op" id="3289158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289162">last</span>&nbsp;<span class="op" id="3289167">=</span>&nbsp;<span class="ident" id="3289169">i</span>&nbsp;<span class="op" id="3289171">+</span>&nbsp;<span class="num" id="3289173">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289176">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289179">w</span><span class="op" id="3289180">.</span><span class="ident" id="3289181">Write</span><span class="op" id="3289186">(</span><span class="ident" id="3289187">b</span><span class="op" id="3289188">[</span><span class="ident" id="3289189">last</span><span class="op" id="3289193">:</span><span class="op" id="3289194">]</span><span class="op" id="3289195">)</span><br>
<span class="lineno"></span><span class="op" id="3289197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3289200">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3289282">func</span>&nbsp;<span class="ident" id="3289287">HTMLEscapeString</span><span class="op" id="3289303">(</span><span class="ident" id="3289304">s</span>&nbsp;<span class="builtintype" id="3289306">string</span><span class="op" id="3289312">)</span>&nbsp;<span class="builtintype" id="3289314">string</span>&nbsp;<span class="op" id="3289321">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3289324">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289356">if</span>&nbsp;<span class="ident" id="3289359">strings</span><span class="op" id="3289366">.</span><span class="ident" id="3289367">IndexAny</span><span class="op" id="3289375">(</span><span class="ident" id="3289376">s</span><span class="op" id="3289377">,</span>&nbsp;<span class="string" id="3289379">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="3289386">)</span>&nbsp;<span class="op" id="3289388">&lt;</span>&nbsp;<span class="num" id="3289390">0</span>&nbsp;<span class="op" id="3289392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289396">return</span>&nbsp;<span class="ident" id="3289403">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289409">var</span>&nbsp;<span class="ident" id="3289413">b</span>&nbsp;<span class="ident" id="3289415">bytes</span><span class="op" id="3289420">.</span><span class="ident" id="3289421">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289429">HTMLEscape</span><span class="op" id="3289439">(</span><span class="op" id="3289440">&amp;</span><span class="ident" id="3289441">b</span><span class="op" id="3289442">,</span>&nbsp;<span class="op" id="3289444">[</span><span class="op" id="3289445">]</span><span class="builtintype" id="3289446">byte</span><span class="op" id="3289450">(</span><span class="ident" id="3289451">s</span><span class="op" id="3289452">)</span><span class="op" id="3289453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289456">return</span>&nbsp;<span class="ident" id="3289463">b</span><span class="op" id="3289464">.</span><span class="ident" id="3289465">String</span><span class="op" id="3289471">(</span><span class="op" id="3289472">)</span><br>
<span class="lineno"></span><span class="op" id="3289474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3289477">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="3289543">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="3289579">func</span>&nbsp;<span class="ident" id="3289584">HTMLEscaper</span><span class="op" id="3289595">(</span><span class="ident" id="3289596">args</span>&nbsp;<span class="op" id="3289601">...</span><span class="keyword" id="3289604">interface</span><span class="op" id="3289613">{</span><span class="op" id="3289614">}</span><span class="op" id="3289615">)</span>&nbsp;<span class="builtintype" id="3289617">string</span>&nbsp;<span class="op" id="3289624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289627">return</span>&nbsp;<span class="ident" id="3289634">HTMLEscapeString</span><span class="op" id="3289650">(</span><span class="ident" id="3289651">evalArgs</span><span class="op" id="3289659">(</span><span class="ident" id="3289660">args</span><span class="op" id="3289664">)</span><span class="op" id="3289665">)</span><br>
<span class="lineno"></span><span class="op" id="3289667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="3289670">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3289695">var</span>&nbsp;<span class="op" id="3289699">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289702">jsLowUni</span>&nbsp;<span class="op" id="3289711">=</span>&nbsp;<span class="op" id="3289713">[</span><span class="op" id="3289714">]</span><span class="builtintype" id="3289715">byte</span><span class="op" id="3289719">(</span><span class="string" id="3289720">`\u00`</span><span class="op" id="3289726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289729">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289738">=</span>&nbsp;<span class="op" id="3289740">[</span><span class="op" id="3289741">]</span><span class="builtintype" id="3289742">byte</span><span class="op" id="3289746">(</span><span class="string" id="3289747">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3289765">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289769">jsBackslash</span>&nbsp;<span class="op" id="3289781">=</span>&nbsp;<span class="op" id="3289783">[</span><span class="op" id="3289784">]</span><span class="builtintype" id="3289785">byte</span><span class="op" id="3289789">(</span><span class="string" id="3289790">`\\`</span><span class="op" id="3289794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289797">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289809">=</span>&nbsp;<span class="op" id="3289811">[</span><span class="op" id="3289812">]</span><span class="builtintype" id="3289813">byte</span><span class="op" id="3289817">(</span><span class="string" id="3289818">`\&#39;`</span><span class="op" id="3289822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289825">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289837">=</span>&nbsp;<span class="op" id="3289839">[</span><span class="op" id="3289840">]</span><span class="builtintype" id="3289841">byte</span><span class="op" id="3289845">(</span><span class="string" id="3289846">`\&#34;`</span><span class="op" id="3289850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289853">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289865">=</span>&nbsp;<span class="op" id="3289867">[</span><span class="op" id="3289868">]</span><span class="builtintype" id="3289869">byte</span><span class="op" id="3289873">(</span><span class="string" id="3289874">`\x3C`</span><span class="op" id="3289880">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3289883">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289895">=</span>&nbsp;<span class="op" id="3289897">[</span><span class="op" id="3289898">]</span><span class="builtintype" id="3289899">byte</span><span class="op" id="3289903">(</span><span class="string" id="3289904">`\x3E`</span><span class="op" id="3289910">)</span><br>
<span class="lineno"></span><span class="op" id="3289912">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3289915">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3289999">func</span>&nbsp;<span class="ident" id="3290004">JSEscape</span><span class="op" id="3290012">(</span><span class="ident" id="3290013">w</span>&nbsp;<span class="ident" id="3290015">io</span><span class="op" id="3290017">.</span><span class="ident" id="3290018">Writer</span><span class="op" id="3290024">,</span>&nbsp;<span class="ident" id="3290026">b</span>&nbsp;<span class="op" id="3290028">[</span><span class="op" id="3290029">]</span><span class="builtintype" id="3290030">byte</span><span class="op" id="3290034">)</span>&nbsp;<span class="op" id="3290036">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290039">last</span>&nbsp;<span class="op" id="3290044">:=</span>&nbsp;<span class="num" id="3290047">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290050">for</span>&nbsp;<span class="ident" id="3290054">i</span>&nbsp;<span class="op" id="3290056">:=</span>&nbsp;<span class="num" id="3290059">0</span><span class="op" id="3290060">;</span>&nbsp;<span class="ident" id="3290062">i</span>&nbsp;<span class="op" id="3290064">&lt;</span>&nbsp;<span class="builtinfunc" id="3290066">len</span><span class="op" id="3290069">(</span><span class="ident" id="3290070">b</span><span class="op" id="3290071">)</span><span class="op" id="3290072">;</span>&nbsp;<span class="ident" id="3290074">i</span><span class="op" id="3290075">++</span>&nbsp;<span class="op" id="3290078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290082">c</span>&nbsp;<span class="op" id="3290084">:=</span>&nbsp;<span class="ident" id="3290087">b</span><span class="op" id="3290088">[</span><span class="ident" id="3290089">i</span><span class="op" id="3290090">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290095">if</span>&nbsp;<span class="op" id="3290098">!</span><span class="ident" id="3290099">jsIsSpecial</span><span class="op" id="3290110">(</span><span class="builtintype" id="3290111">rune</span><span class="op" id="3290115">(</span><span class="ident" id="3290116">c</span><span class="op" id="3290117">)</span><span class="op" id="3290118">)</span>&nbsp;<span class="op" id="3290120">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290125">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290156">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290171">w</span><span class="op" id="3290172">.</span><span class="ident" id="3290173">Write</span><span class="op" id="3290178">(</span><span class="ident" id="3290179">b</span><span class="op" id="3290180">[</span><span class="ident" id="3290181">last</span><span class="op" id="3290185">:</span><span class="ident" id="3290186">i</span><span class="op" id="3290187">]</span><span class="op" id="3290188">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290193">if</span>&nbsp;<span class="ident" id="3290196">c</span>&nbsp;<span class="op" id="3290198">&lt;</span>&nbsp;<span class="ident" id="3290200">utf8</span><span class="op" id="3290204">.</span><span class="ident" id="3290205">RuneSelf</span>&nbsp;<span class="op" id="3290214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290219">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290272">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290320">switch</span>&nbsp;<span class="ident" id="3290327">c</span>&nbsp;<span class="op" id="3290329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290334">case</span>&nbsp;<span class="string" id="3290339">&#39;\\&#39;</span><span class="op" id="3290343">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290349">w</span><span class="op" id="3290350">.</span><span class="ident" id="3290351">Write</span><span class="op" id="3290356">(</span><span class="ident" id="3290357">jsBackslash</span><span class="op" id="3290368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290373">case</span>&nbsp;<span class="string" id="3290378">&#39;\&#39;&#39;</span><span class="op" id="3290382">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290388">w</span><span class="op" id="3290389">.</span><span class="ident" id="3290390">Write</span><span class="op" id="3290395">(</span><span class="ident" id="3290396">jsApos</span><span class="op" id="3290402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290407">case</span>&nbsp;<span class="string" id="3290412">&#39;&#34;&#39;</span><span class="op" id="3290415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290421">w</span><span class="op" id="3290422">.</span><span class="ident" id="3290423">Write</span><span class="op" id="3290428">(</span><span class="ident" id="3290429">jsQuot</span><span class="op" id="3290435">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290440">case</span>&nbsp;<span class="string" id="3290445">&#39;&lt;&#39;</span><span class="op" id="3290448">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290454">w</span><span class="op" id="3290455">.</span><span class="ident" id="3290456">Write</span><span class="op" id="3290461">(</span><span class="ident" id="3290462">jsLt</span><span class="op" id="3290466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290471">case</span>&nbsp;<span class="string" id="3290476">&#39;&gt;&#39;</span><span class="op" id="3290479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290485">w</span><span class="op" id="3290486">.</span><span class="ident" id="3290487">Write</span><span class="op" id="3290492">(</span><span class="ident" id="3290493">jsGt</span><span class="op" id="3290497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290502">default</span><span class="op" id="3290509">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290515">w</span><span class="op" id="3290516">.</span><span class="ident" id="3290517">Write</span><span class="op" id="3290522">(</span><span class="ident" id="3290523">jsLowUni</span><span class="op" id="3290531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290537">t</span><span class="op" id="3290538">,</span>&nbsp;<span class="ident" id="3290540">b</span>&nbsp;<span class="op" id="3290542">:=</span>&nbsp;<span class="ident" id="3290545">c</span><span class="op" id="3290546">&gt;&gt;</span><span class="num" id="3290548">4</span><span class="op" id="3290549">,</span>&nbsp;<span class="ident" id="3290551">c</span><span class="op" id="3290552">&amp;</span><span class="num" id="3290553">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290562">w</span><span class="op" id="3290563">.</span><span class="ident" id="3290564">Write</span><span class="op" id="3290569">(</span><span class="ident" id="3290570">hex</span><span class="op" id="3290573">[</span><span class="ident" id="3290574">t</span>&nbsp;<span class="op" id="3290576">:</span>&nbsp;<span class="ident" id="3290578">t</span><span class="op" id="3290579">+</span><span class="num" id="3290580">1</span><span class="op" id="3290581">]</span><span class="op" id="3290582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290588">w</span><span class="op" id="3290589">.</span><span class="ident" id="3290590">Write</span><span class="op" id="3290595">(</span><span class="ident" id="3290596">hex</span><span class="op" id="3290599">[</span><span class="ident" id="3290600">b</span>&nbsp;<span class="op" id="3290602">:</span>&nbsp;<span class="ident" id="3290604">b</span><span class="op" id="3290605">+</span><span class="num" id="3290606">1</span><span class="op" id="3290607">]</span><span class="op" id="3290608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290613">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290617">}</span>&nbsp;<span class="keyword" id="3290619">else</span>&nbsp;<span class="op" id="3290624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290629">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290649">r</span><span class="op" id="3290650">,</span>&nbsp;<span class="ident" id="3290652">size</span>&nbsp;<span class="op" id="3290657">:=</span>&nbsp;<span class="ident" id="3290660">utf8</span><span class="op" id="3290664">.</span><span class="ident" id="3290665">DecodeRune</span><span class="op" id="3290675">(</span><span class="ident" id="3290676">b</span><span class="op" id="3290677">[</span><span class="ident" id="3290678">i</span><span class="op" id="3290679">:</span><span class="op" id="3290680">]</span><span class="op" id="3290681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290686">if</span>&nbsp;<span class="ident" id="3290689">unicode</span><span class="op" id="3290696">.</span><span class="ident" id="3290697">IsPrint</span><span class="op" id="3290704">(</span><span class="ident" id="3290705">r</span><span class="op" id="3290706">)</span>&nbsp;<span class="op" id="3290708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290714">w</span><span class="op" id="3290715">.</span><span class="ident" id="3290716">Write</span><span class="op" id="3290721">(</span><span class="ident" id="3290722">b</span><span class="op" id="3290723">[</span><span class="ident" id="3290724">i</span>&nbsp;<span class="op" id="3290726">:</span>&nbsp;<span class="ident" id="3290728">i</span><span class="op" id="3290729">+</span><span class="ident" id="3290730">size</span><span class="op" id="3290734">]</span><span class="op" id="3290735">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290740">}</span>&nbsp;<span class="keyword" id="3290742">else</span>&nbsp;<span class="op" id="3290747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290753">fmt</span><span class="op" id="3290756">.</span><span class="ident" id="3290757">Fprintf</span><span class="op" id="3290764">(</span><span class="ident" id="3290765">w</span><span class="op" id="3290766">,</span>&nbsp;<span class="string" id="3290768">&#34;\\u%04X&#34;</span><span class="op" id="3290777">,</span>&nbsp;<span class="ident" id="3290779">r</span><span class="op" id="3290780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290790">i</span>&nbsp;<span class="op" id="3290792">+=</span>&nbsp;<span class="ident" id="3290795">size</span>&nbsp;<span class="op" id="3290800">-</span>&nbsp;<span class="num" id="3290802">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290806">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290810">last</span>&nbsp;<span class="op" id="3290815">=</span>&nbsp;<span class="ident" id="3290817">i</span>&nbsp;<span class="op" id="3290819">+</span>&nbsp;<span class="num" id="3290821">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290827">w</span><span class="op" id="3290828">.</span><span class="ident" id="3290829">Write</span><span class="op" id="3290834">(</span><span class="ident" id="3290835">b</span><span class="op" id="3290836">[</span><span class="ident" id="3290837">last</span><span class="op" id="3290841">:</span><span class="op" id="3290842">]</span><span class="op" id="3290843">)</span><br>
<span class="lineno"></span><span class="op" id="3290845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="3290848">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3290934">func</span>&nbsp;<span class="ident" id="3290939">JSEscapeString</span><span class="op" id="3290953">(</span><span class="ident" id="3290954">s</span>&nbsp;<span class="builtintype" id="3290956">string</span><span class="op" id="3290962">)</span>&nbsp;<span class="builtintype" id="3290964">string</span>&nbsp;<span class="op" id="3290971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290974">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291006">if</span>&nbsp;<span class="ident" id="3291009">strings</span><span class="op" id="3291016">.</span><span class="ident" id="3291017">IndexFunc</span><span class="op" id="3291026">(</span><span class="ident" id="3291027">s</span><span class="op" id="3291028">,</span>&nbsp;<span class="ident" id="3291030">jsIsSpecial</span><span class="op" id="3291041">)</span>&nbsp;<span class="op" id="3291043">&lt;</span>&nbsp;<span class="num" id="3291045">0</span>&nbsp;<span class="op" id="3291047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291051">return</span>&nbsp;<span class="ident" id="3291058">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291064">var</span>&nbsp;<span class="ident" id="3291068">b</span>&nbsp;<span class="ident" id="3291070">bytes</span><span class="op" id="3291075">.</span><span class="ident" id="3291076">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291084">JSEscape</span><span class="op" id="3291092">(</span><span class="op" id="3291093">&amp;</span><span class="ident" id="3291094">b</span><span class="op" id="3291095">,</span>&nbsp;<span class="op" id="3291097">[</span><span class="op" id="3291098">]</span><span class="builtintype" id="3291099">byte</span><span class="op" id="3291103">(</span><span class="ident" id="3291104">s</span><span class="op" id="3291105">)</span><span class="op" id="3291106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291109">return</span>&nbsp;<span class="ident" id="3291116">b</span><span class="op" id="3291117">.</span><span class="ident" id="3291118">String</span><span class="op" id="3291124">(</span><span class="op" id="3291125">)</span><br>
<span class="lineno"></span><span class="op" id="3291127">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="3291130">func</span>&nbsp;<span class="ident" id="3291135">jsIsSpecial</span><span class="op" id="3291146">(</span><span class="ident" id="3291147">r</span>&nbsp;<span class="builtintype" id="3291149">rune</span><span class="op" id="3291153">)</span>&nbsp;<span class="builtintype" id="3291155">bool</span>&nbsp;<span class="op" id="3291160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291163">switch</span>&nbsp;<span class="ident" id="3291170">r</span>&nbsp;<span class="op" id="3291172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291175">case</span>&nbsp;<span class="string" id="3291180">&#39;\\&#39;</span><span class="op" id="3291184">,</span>&nbsp;<span class="string" id="3291186">&#39;\&#39;&#39;</span><span class="op" id="3291190">,</span>&nbsp;<span class="string" id="3291192">&#39;&#34;&#39;</span><span class="op" id="3291195">,</span>&nbsp;<span class="string" id="3291197">&#39;&lt;&#39;</span><span class="op" id="3291200">,</span>&nbsp;<span class="string" id="3291202">&#39;&gt;&#39;</span><span class="op" id="3291205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291209">return</span>&nbsp;<span class="builtintype" id="3291216">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291225">return</span>&nbsp;<span class="ident" id="3291232">r</span>&nbsp;<span class="op" id="3291234">&lt;</span>&nbsp;<span class="string" id="3291236">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3291240">||</span>&nbsp;<span class="ident" id="3291243">utf8</span><span class="op" id="3291247">.</span><span class="ident" id="3291248">RuneSelf</span>&nbsp;<span class="op" id="3291257">&lt;=</span>&nbsp;<span class="ident" id="3291260">r</span><br>
<span class="lineno"></span><span class="op" id="3291262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291265">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="3291335">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="3291371">func</span>&nbsp;<span class="ident" id="3291376">JSEscaper</span><span class="op" id="3291385">(</span><span class="ident" id="3291386">args</span>&nbsp;<span class="op" id="3291391">...</span><span class="keyword" id="3291394">interface</span><span class="op" id="3291403">{</span><span class="op" id="3291404">}</span><span class="op" id="3291405">)</span>&nbsp;<span class="builtintype" id="3291407">string</span>&nbsp;<span class="op" id="3291414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291417">return</span>&nbsp;<span class="ident" id="3291424">JSEscapeString</span><span class="op" id="3291438">(</span><span class="ident" id="3291439">evalArgs</span><span class="op" id="3291447">(</span><span class="ident" id="3291448">args</span><span class="op" id="3291452">)</span><span class="op" id="3291453">)</span><br>
<span class="lineno"></span><span class="op" id="3291455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="3291458">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3291536">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="3291602">func</span>&nbsp;<span class="ident" id="3291607">URLQueryEscaper</span><span class="op" id="3291622">(</span><span class="ident" id="3291623">args</span>&nbsp;<span class="op" id="3291628">...</span><span class="keyword" id="3291631">interface</span><span class="op" id="3291640">{</span><span class="op" id="3291641">}</span><span class="op" id="3291642">)</span>&nbsp;<span class="builtintype" id="3291644">string</span>&nbsp;<span class="op" id="3291651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291654">return</span>&nbsp;<span class="ident" id="3291661">url</span><span class="op" id="3291664">.</span><span class="ident" id="3291665">QueryEscape</span><span class="op" id="3291676">(</span><span class="ident" id="3291677">evalArgs</span><span class="op" id="3291685">(</span><span class="ident" id="3291686">args</span><span class="op" id="3291690">)</span><span class="op" id="3291691">)</span><br>
<span class="lineno"></span><span class="op" id="3291693">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="3291696">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3291783">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="3291806">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="3291878">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="3291951">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="3291965">func</span>&nbsp;<span class="ident" id="3291970">evalArgs</span><span class="op" id="3291978">(</span><span class="ident" id="3291979">args</span>&nbsp;<span class="op" id="3291984">[</span><span class="op" id="3291985">]</span><span class="keyword" id="3291986">interface</span><span class="op" id="3291995">{</span><span class="op" id="3291996">}</span><span class="op" id="3291997">)</span>&nbsp;<span class="builtintype" id="3291999">string</span>&nbsp;<span class="op" id="3292006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292009">ok</span>&nbsp;<span class="op" id="3292012">:=</span>&nbsp;<span class="builtintype" id="3292015">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292022">var</span>&nbsp;<span class="ident" id="3292026">s</span>&nbsp;<span class="builtintype" id="3292028">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3292036">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292074">if</span>&nbsp;<span class="builtinfunc" id="3292077">len</span><span class="op" id="3292080">(</span><span class="ident" id="3292081">args</span><span class="op" id="3292085">)</span>&nbsp;<span class="op" id="3292087">==</span>&nbsp;<span class="num" id="3292090">1</span>&nbsp;<span class="op" id="3292092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292096">s</span><span class="op" id="3292097">,</span>&nbsp;<span class="ident" id="3292099">ok</span>&nbsp;<span class="op" id="3292102">=</span>&nbsp;<span class="ident" id="3292104">args</span><span class="op" id="3292108">[</span><span class="num" id="3292109">0</span><span class="op" id="3292110">]</span><span class="op" id="3292111">.</span><span class="op" id="3292112">(</span><span class="builtintype" id="3292113">string</span><span class="op" id="3292119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292125">if</span>&nbsp;<span class="op" id="3292128">!</span><span class="ident" id="3292129">ok</span>&nbsp;<span class="op" id="3292132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292136">for</span>&nbsp;<span class="ident" id="3292140">i</span><span class="op" id="3292141">,</span>&nbsp;<span class="ident" id="3292143">arg</span>&nbsp;<span class="op" id="3292147">:=</span>&nbsp;<span class="keyword" id="3292150">range</span>&nbsp;<span class="ident" id="3292156">args</span>&nbsp;<span class="op" id="3292161">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292166">a</span><span class="op" id="3292167">,</span>&nbsp;<span class="ident" id="3292169">ok</span>&nbsp;<span class="op" id="3292172">:=</span>&nbsp;<span class="ident" id="3292175">printableValue</span><span class="op" id="3292189">(</span><span class="ident" id="3292190">reflect</span><span class="op" id="3292197">.</span><span class="ident" id="3292198">ValueOf</span><span class="op" id="3292205">(</span><span class="ident" id="3292206">arg</span><span class="op" id="3292209">)</span><span class="op" id="3292210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292215">if</span>&nbsp;<span class="ident" id="3292218">ok</span>&nbsp;<span class="op" id="3292221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292227">args</span><span class="op" id="3292231">[</span><span class="ident" id="3292232">i</span><span class="op" id="3292233">]</span>&nbsp;<span class="op" id="3292235">=</span>&nbsp;<span class="ident" id="3292237">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292242">}</span>&nbsp;<span class="comment" id="3292244">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292276">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292280">s</span>&nbsp;<span class="op" id="3292282">=</span>&nbsp;<span class="ident" id="3292284">fmt</span><span class="op" id="3292287">.</span><span class="ident" id="3292288">Sprint</span><span class="op" id="3292294">(</span><span class="ident" id="3292295">args</span><span class="op" id="3292299">...</span><span class="op" id="3292302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292308">return</span>&nbsp;<span class="ident" id="3292315">s</span><br>
<span class="lineno"></span><span class="op" id="3292317">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
