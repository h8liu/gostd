<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html" class="current">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2378007">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2378062">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2378116">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2378167">package</span>&nbsp;<span class="ident" id="2378175">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2378184">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2378256">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2378330">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2378357">func</span>&nbsp;<span class="ident" id="2378362">FormatUint</span><span class="op" id="2378372">(</span><span class="ident" id="2378373">i</span>&nbsp;<span class="ident" id="2378375">uint64</span><span class="op" id="2378381">,</span>&nbsp;<span class="ident" id="2378383">base</span>&nbsp;<span class="builtintype" id="2378388">int</span><span class="op" id="2378391">)</span>&nbsp;<span class="builtintype" id="2378393">string</span>&nbsp;<span class="op" id="2378400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2378403">_</span><span class="op" id="2378404">,</span>&nbsp;<span class="ident" id="2378406">s</span>&nbsp;<span class="op" id="2378408">:=</span>&nbsp;<span class="ident" id="2378411">formatBits</span><span class="op" id="2378421">(</span><span class="ident" id="2378422">nil</span><span class="op" id="2378425">,</span>&nbsp;<span class="ident" id="2378427">i</span><span class="op" id="2378428">,</span>&nbsp;<span class="ident" id="2378430">base</span><span class="op" id="2378434">,</span>&nbsp;<span class="builtintype" id="2378436">false</span><span class="op" id="2378441">,</span>&nbsp;<span class="builtintype" id="2378443">false</span><span class="op" id="2378448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2378451">return</span>&nbsp;<span class="ident" id="2378458">s</span><br>
<span class="lineno"></span><span class="op" id="2378460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2378463">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2378534">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2378608">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2378635">func</span>&nbsp;<span class="ident" id="2378640">FormatInt</span><span class="op" id="2378649">(</span><span class="ident" id="2378650">i</span>&nbsp;<span class="ident" id="2378652">int64</span><span class="op" id="2378657">,</span>&nbsp;<span class="ident" id="2378659">base</span>&nbsp;<span class="builtintype" id="2378664">int</span><span class="op" id="2378667">)</span>&nbsp;<span class="builtintype" id="2378669">string</span>&nbsp;<span class="op" id="2378676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2378679">_</span><span class="op" id="2378680">,</span>&nbsp;<span class="ident" id="2378682">s</span>&nbsp;<span class="op" id="2378684">:=</span>&nbsp;<span class="ident" id="2378687">formatBits</span><span class="op" id="2378697">(</span><span class="ident" id="2378698">nil</span><span class="op" id="2378701">,</span>&nbsp;<span class="ident" id="2378703">uint64</span><span class="op" id="2378709">(</span><span class="ident" id="2378710">i</span><span class="op" id="2378711">)</span><span class="op" id="2378712">,</span>&nbsp;<span class="ident" id="2378714">base</span><span class="op" id="2378718">,</span>&nbsp;<span class="ident" id="2378720">i</span>&nbsp;<span class="op" id="2378722">&lt;</span>&nbsp;<span class="num" id="2378724">0</span><span class="op" id="2378725">,</span>&nbsp;<span class="builtintype" id="2378727">false</span><span class="op" id="2378732">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2378735">return</span>&nbsp;<span class="ident" id="2378742">s</span><br>
<span class="lineno"></span><span class="op" id="2378744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2378747">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2378790">func</span>&nbsp;<span class="ident" id="2378795">Itoa</span><span class="op" id="2378799">(</span><span class="ident" id="2378800">i</span>&nbsp;<span class="builtintype" id="2378802">int</span><span class="op" id="2378805">)</span>&nbsp;<span class="builtintype" id="2378807">string</span>&nbsp;<span class="op" id="2378814">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2378817">return</span>&nbsp;<span class="ident" id="2378824">FormatInt</span><span class="op" id="2378833">(</span><span class="ident" id="2378834">int64</span><span class="op" id="2378839">(</span><span class="ident" id="2378840">i</span><span class="op" id="2378841">)</span><span class="op" id="2378842">,</span>&nbsp;<span class="num" id="2378844">10</span><span class="op" id="2378846">)</span><br>
<span class="lineno"></span><span class="op" id="2378848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2378851">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2378906">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2378976">func</span>&nbsp;<span class="ident" id="2378981">AppendInt</span><span class="op" id="2378990">(</span><span class="ident" id="2378991">dst</span>&nbsp;<span class="op" id="2378995">[</span><span class="op" id="2378996">]</span><span class="builtintype" id="2378997">byte</span><span class="op" id="2379001">,</span>&nbsp;<span class="ident" id="2379003">i</span>&nbsp;<span class="ident" id="2379005">int64</span><span class="op" id="2379010">,</span>&nbsp;<span class="ident" id="2379012">base</span>&nbsp;<span class="builtintype" id="2379017">int</span><span class="op" id="2379020">)</span>&nbsp;<span class="op" id="2379022">[</span><span class="op" id="2379023">]</span><span class="builtintype" id="2379024">byte</span>&nbsp;<span class="op" id="2379029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2379032">dst</span><span class="op" id="2379035">,</span>&nbsp;<span class="ident" id="2379037">_</span>&nbsp;<span class="op" id="2379039">=</span>&nbsp;<span class="ident" id="2379041">formatBits</span><span class="op" id="2379051">(</span><span class="ident" id="2379052">dst</span><span class="op" id="2379055">,</span>&nbsp;<span class="ident" id="2379057">uint64</span><span class="op" id="2379063">(</span><span class="ident" id="2379064">i</span><span class="op" id="2379065">)</span><span class="op" id="2379066">,</span>&nbsp;<span class="ident" id="2379068">base</span><span class="op" id="2379072">,</span>&nbsp;<span class="ident" id="2379074">i</span>&nbsp;<span class="op" id="2379076">&lt;</span>&nbsp;<span class="num" id="2379078">0</span><span class="op" id="2379079">,</span>&nbsp;<span class="builtintype" id="2379081">true</span><span class="op" id="2379085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2379088">return</span>&nbsp;<span class="ident" id="2379095">dst</span><br>
<span class="lineno"></span><span class="op" id="2379099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2379102">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2379167">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2379238">func</span>&nbsp;<span class="ident" id="2379243">AppendUint</span><span class="op" id="2379253">(</span><span class="ident" id="2379254">dst</span>&nbsp;<span class="op" id="2379258">[</span><span class="op" id="2379259">]</span><span class="builtintype" id="2379260">byte</span><span class="op" id="2379264">,</span>&nbsp;<span class="ident" id="2379266">i</span>&nbsp;<span class="ident" id="2379268">uint64</span><span class="op" id="2379274">,</span>&nbsp;<span class="ident" id="2379276">base</span>&nbsp;<span class="builtintype" id="2379281">int</span><span class="op" id="2379284">)</span>&nbsp;<span class="op" id="2379286">[</span><span class="op" id="2379287">]</span><span class="builtintype" id="2379288">byte</span>&nbsp;<span class="op" id="2379293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2379296">dst</span><span class="op" id="2379299">,</span>&nbsp;<span class="ident" id="2379301">_</span>&nbsp;<span class="op" id="2379303">=</span>&nbsp;<span class="ident" id="2379305">formatBits</span><span class="op" id="2379315">(</span><span class="ident" id="2379316">dst</span><span class="op" id="2379319">,</span>&nbsp;<span class="ident" id="2379321">i</span><span class="op" id="2379322">,</span>&nbsp;<span class="ident" id="2379324">base</span><span class="op" id="2379328">,</span>&nbsp;<span class="builtintype" id="2379330">false</span><span class="op" id="2379335">,</span>&nbsp;<span class="builtintype" id="2379337">true</span><span class="op" id="2379341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2379344">return</span>&nbsp;<span class="ident" id="2379351">dst</span><br>
<span class="lineno">40</span><span class="op" id="2379355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2379358">const</span>&nbsp;<span class="op" id="2379364">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2379367">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2379376">=</span>&nbsp;<span class="string" id="2379378">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2379418">digits01</span>&nbsp;<span class="op" id="2379427">=</span>&nbsp;<span class="string" id="2379429">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2379533">digits10</span>&nbsp;<span class="op" id="2379542">=</span>&nbsp;<span class="string" id="2379544">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2379647">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2379650">var</span>&nbsp;<span class="ident" id="2379654">shifts</span>&nbsp;<span class="op" id="2379661">=</span>&nbsp;<span class="op" id="2379663">[</span><span class="builtinfunc" id="2379664">len</span><span class="op" id="2379667">(</span><span class="ident" id="2379668">digits</span><span class="op" id="2379674">)</span>&nbsp;<span class="op" id="2379676">+</span>&nbsp;<span class="num" id="2379678">1</span><span class="op" id="2379679">]</span><span class="builtintype" id="2379680">uint</span><span class="op" id="2379684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2379687">1</span>&nbsp;<span class="op" id="2379689">&lt;&lt;</span>&nbsp;<span class="num" id="2379692">1</span><span class="op" id="2379693">:</span>&nbsp;<span class="num" id="2379695">1</span><span class="op" id="2379696">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2379699">1</span>&nbsp;<span class="op" id="2379701">&lt;&lt;</span>&nbsp;<span class="num" id="2379704">2</span><span class="op" id="2379705">:</span>&nbsp;<span class="num" id="2379707">2</span><span class="op" id="2379708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2379711">1</span>&nbsp;<span class="op" id="2379713">&lt;&lt;</span>&nbsp;<span class="num" id="2379716">3</span><span class="op" id="2379717">:</span>&nbsp;<span class="num" id="2379719">3</span><span class="op" id="2379720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2379723">1</span>&nbsp;<span class="op" id="2379725">&lt;&lt;</span>&nbsp;<span class="num" id="2379728">4</span><span class="op" id="2379729">:</span>&nbsp;<span class="num" id="2379731">4</span><span class="op" id="2379732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2379735">1</span>&nbsp;<span class="op" id="2379737">&lt;&lt;</span>&nbsp;<span class="num" id="2379740">5</span><span class="op" id="2379741">:</span>&nbsp;<span class="num" id="2379743">5</span><span class="op" id="2379744">,</span><br>
<span class="lineno"></span><span class="op" id="2379746">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2379749">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2379822">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2379892">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2379962">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2380034">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2380065">//</span><br>
<span class="lineno"></span><span class="keyword" id="2380068">func</span>&nbsp;<span class="ident" id="2380073">formatBits</span><span class="op" id="2380083">(</span><span class="ident" id="2380084">dst</span>&nbsp;<span class="op" id="2380088">[</span><span class="op" id="2380089">]</span><span class="builtintype" id="2380090">byte</span><span class="op" id="2380094">,</span>&nbsp;<span class="ident" id="2380096">u</span>&nbsp;<span class="ident" id="2380098">uint64</span><span class="op" id="2380104">,</span>&nbsp;<span class="ident" id="2380106">base</span>&nbsp;<span class="builtintype" id="2380111">int</span><span class="op" id="2380114">,</span>&nbsp;<span class="ident" id="2380116">neg</span><span class="op" id="2380119">,</span>&nbsp;<span class="ident" id="2380121">append_</span>&nbsp;<span class="builtintype" id="2380129">bool</span><span class="op" id="2380133">)</span>&nbsp;<span class="op" id="2380135">(</span><span class="ident" id="2380136">d</span>&nbsp;<span class="op" id="2380138">[</span><span class="op" id="2380139">]</span><span class="builtintype" id="2380140">byte</span><span class="op" id="2380144">,</span>&nbsp;<span class="ident" id="2380146">s</span>&nbsp;<span class="builtintype" id="2380148">string</span><span class="op" id="2380154">)</span>&nbsp;<span class="op" id="2380156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380159">if</span>&nbsp;<span class="ident" id="2380162">base</span>&nbsp;<span class="op" id="2380167">&lt;</span>&nbsp;<span class="num" id="2380169">2</span>&nbsp;<span class="op" id="2380171">||</span>&nbsp;<span class="ident" id="2380174">base</span>&nbsp;<span class="op" id="2380179">&gt;</span>&nbsp;<span class="builtinfunc" id="2380181">len</span><span class="op" id="2380184">(</span><span class="ident" id="2380185">digits</span><span class="op" id="2380191">)</span>&nbsp;<span class="op" id="2380193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2380197">panic</span><span class="op" id="2380202">(</span><span class="string" id="2380203">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2380246">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2380252">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380290">var</span>&nbsp;<span class="ident" id="2380294">a</span>&nbsp;<span class="op" id="2380296">[</span><span class="num" id="2380297">64</span>&nbsp;<span class="op" id="2380300">+</span>&nbsp;<span class="num" id="2380302">1</span><span class="op" id="2380303">]</span><span class="builtintype" id="2380304">byte</span>&nbsp;<span class="comment" id="2380309">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380350">i</span>&nbsp;<span class="op" id="2380352">:=</span>&nbsp;<span class="builtinfunc" id="2380355">len</span><span class="op" id="2380358">(</span><span class="ident" id="2380359">a</span><span class="op" id="2380360">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380364">if</span>&nbsp;<span class="ident" id="2380367">neg</span>&nbsp;<span class="op" id="2380371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380375">u</span>&nbsp;<span class="op" id="2380377">=</span>&nbsp;<span class="op" id="2380379">-</span><span class="ident" id="2380380">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2380387">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380404">if</span>&nbsp;<span class="ident" id="2380407">base</span>&nbsp;<span class="op" id="2380412">==</span>&nbsp;<span class="num" id="2380415">10</span>&nbsp;<span class="op" id="2380418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2380422">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2380474">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2380531">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380552">for</span>&nbsp;<span class="ident" id="2380556">u</span>&nbsp;<span class="op" id="2380558">&gt;=</span>&nbsp;<span class="num" id="2380561">100</span>&nbsp;<span class="op" id="2380565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380570">i</span>&nbsp;<span class="op" id="2380572">-=</span>&nbsp;<span class="num" id="2380575">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380580">q</span>&nbsp;<span class="op" id="2380582">:=</span>&nbsp;<span class="ident" id="2380585">u</span>&nbsp;<span class="op" id="2380587">/</span>&nbsp;<span class="num" id="2380589">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380596">j</span>&nbsp;<span class="op" id="2380598">:=</span>&nbsp;<span class="builtintype" id="2380601">uintptr</span><span class="op" id="2380608">(</span><span class="ident" id="2380609">u</span>&nbsp;<span class="op" id="2380611">-</span>&nbsp;<span class="ident" id="2380613">q</span><span class="op" id="2380614">*</span><span class="num" id="2380615">100</span><span class="op" id="2380618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380623">a</span><span class="op" id="2380624">[</span><span class="ident" id="2380625">i</span><span class="op" id="2380626">+</span><span class="num" id="2380627">1</span><span class="op" id="2380628">]</span>&nbsp;<span class="op" id="2380630">=</span>&nbsp;<span class="ident" id="2380632">digits01</span><span class="op" id="2380640">[</span><span class="ident" id="2380641">j</span><span class="op" id="2380642">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380647">a</span><span class="op" id="2380648">[</span><span class="ident" id="2380649">i</span><span class="op" id="2380650">+</span><span class="num" id="2380651">0</span><span class="op" id="2380652">]</span>&nbsp;<span class="op" id="2380654">=</span>&nbsp;<span class="ident" id="2380656">digits10</span><span class="op" id="2380664">[</span><span class="ident" id="2380665">j</span><span class="op" id="2380666">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380671">u</span>&nbsp;<span class="op" id="2380673">=</span>&nbsp;<span class="ident" id="2380675">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380683">if</span>&nbsp;<span class="ident" id="2380686">u</span>&nbsp;<span class="op" id="2380688">&gt;=</span>&nbsp;<span class="num" id="2380691">10</span>&nbsp;<span class="op" id="2380694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380699">i</span><span class="op" id="2380700">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380706">q</span>&nbsp;<span class="op" id="2380708">:=</span>&nbsp;<span class="ident" id="2380711">u</span>&nbsp;<span class="op" id="2380713">/</span>&nbsp;<span class="num" id="2380715">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380721">a</span><span class="op" id="2380722">[</span><span class="ident" id="2380723">i</span><span class="op" id="2380724">]</span>&nbsp;<span class="op" id="2380726">=</span>&nbsp;<span class="ident" id="2380728">digits</span><span class="op" id="2380734">[</span><span class="builtintype" id="2380735">uintptr</span><span class="op" id="2380742">(</span><span class="ident" id="2380743">u</span><span class="op" id="2380744">-</span><span class="ident" id="2380745">q</span><span class="op" id="2380746">*</span><span class="num" id="2380747">10</span><span class="op" id="2380749">)</span><span class="op" id="2380750">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380755">u</span>&nbsp;<span class="op" id="2380757">=</span>&nbsp;<span class="ident" id="2380759">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380767">}</span>&nbsp;<span class="keyword" id="2380769">else</span>&nbsp;<span class="keyword" id="2380774">if</span>&nbsp;<span class="ident" id="2380777">s</span>&nbsp;<span class="op" id="2380779">:=</span>&nbsp;<span class="ident" id="2380782">shifts</span><span class="op" id="2380788">[</span><span class="ident" id="2380789">base</span><span class="op" id="2380793">]</span><span class="op" id="2380794">;</span>&nbsp;<span class="ident" id="2380796">s</span>&nbsp;<span class="op" id="2380798">&gt;</span>&nbsp;<span class="num" id="2380800">0</span>&nbsp;<span class="op" id="2380802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2380806">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380871">b</span>&nbsp;<span class="op" id="2380873">:=</span>&nbsp;<span class="ident" id="2380876">uint64</span><span class="op" id="2380882">(</span><span class="ident" id="2380883">base</span><span class="op" id="2380887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380891">m</span>&nbsp;<span class="op" id="2380893">:=</span>&nbsp;<span class="builtintype" id="2380896">uintptr</span><span class="op" id="2380903">(</span><span class="ident" id="2380904">b</span><span class="op" id="2380905">)</span>&nbsp;<span class="op" id="2380907">-</span>&nbsp;<span class="num" id="2380909">1</span>&nbsp;<span class="comment" id="2380911">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2380928">for</span>&nbsp;<span class="ident" id="2380932">u</span>&nbsp;<span class="op" id="2380934">&gt;=</span>&nbsp;<span class="ident" id="2380937">b</span>&nbsp;<span class="op" id="2380939">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380944">i</span><span class="op" id="2380945">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380951">a</span><span class="op" id="2380952">[</span><span class="ident" id="2380953">i</span><span class="op" id="2380954">]</span>&nbsp;<span class="op" id="2380956">=</span>&nbsp;<span class="ident" id="2380958">digits</span><span class="op" id="2380964">[</span><span class="builtintype" id="2380965">uintptr</span><span class="op" id="2380972">(</span><span class="ident" id="2380973">u</span><span class="op" id="2380974">)</span><span class="op" id="2380975">&amp;</span><span class="ident" id="2380976">m</span><span class="op" id="2380977">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2380982">u</span>&nbsp;<span class="op" id="2380984">&gt;&gt;=</span>&nbsp;<span class="ident" id="2380988">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2380996">}</span>&nbsp;<span class="keyword" id="2380998">else</span>&nbsp;<span class="op" id="2381003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2381007">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381025">b</span>&nbsp;<span class="op" id="2381027">:=</span>&nbsp;<span class="ident" id="2381030">uint64</span><span class="op" id="2381036">(</span><span class="ident" id="2381037">base</span><span class="op" id="2381041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2381045">for</span>&nbsp;<span class="ident" id="2381049">u</span>&nbsp;<span class="op" id="2381051">&gt;=</span>&nbsp;<span class="ident" id="2381054">b</span>&nbsp;<span class="op" id="2381056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381061">i</span><span class="op" id="2381062">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381068">a</span><span class="op" id="2381069">[</span><span class="ident" id="2381070">i</span><span class="op" id="2381071">]</span>&nbsp;<span class="op" id="2381073">=</span>&nbsp;<span class="ident" id="2381075">digits</span><span class="op" id="2381081">[</span><span class="builtintype" id="2381082">uintptr</span><span class="op" id="2381089">(</span><span class="ident" id="2381090">u</span><span class="op" id="2381091">%</span><span class="ident" id="2381092">b</span><span class="op" id="2381093">)</span><span class="op" id="2381094">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381099">u</span>&nbsp;<span class="op" id="2381101">/=</span>&nbsp;<span class="ident" id="2381104">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2381108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2381111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2381115">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381128">i</span><span class="op" id="2381129">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381133">a</span><span class="op" id="2381134">[</span><span class="ident" id="2381135">i</span><span class="op" id="2381136">]</span>&nbsp;<span class="op" id="2381138">=</span>&nbsp;<span class="ident" id="2381140">digits</span><span class="op" id="2381146">[</span><span class="builtintype" id="2381147">uintptr</span><span class="op" id="2381154">(</span><span class="ident" id="2381155">u</span><span class="op" id="2381156">)</span><span class="op" id="2381157">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2381161">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2381182">if</span>&nbsp;<span class="ident" id="2381185">neg</span>&nbsp;<span class="op" id="2381189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381193">i</span><span class="op" id="2381194">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381199">a</span><span class="op" id="2381200">[</span><span class="ident" id="2381201">i</span><span class="op" id="2381202">]</span>&nbsp;<span class="op" id="2381204">=</span>&nbsp;<span class="string" id="2381206">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2381211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2381215">if</span>&nbsp;<span class="ident" id="2381218">append_</span>&nbsp;<span class="op" id="2381226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381230">d</span>&nbsp;<span class="op" id="2381232">=</span>&nbsp;<span class="builtinfunc" id="2381234">append</span><span class="op" id="2381240">(</span><span class="ident" id="2381241">dst</span><span class="op" id="2381244">,</span>&nbsp;<span class="ident" id="2381246">a</span><span class="op" id="2381247">[</span><span class="ident" id="2381248">i</span><span class="op" id="2381249">:</span><span class="op" id="2381250">]</span><span class="op" id="2381251">...</span><span class="op" id="2381254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2381258">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2381266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2381269">s</span>&nbsp;<span class="op" id="2381271">=</span>&nbsp;<span class="builtintype" id="2381273">string</span><span class="op" id="2381279">(</span><span class="ident" id="2381280">a</span><span class="op" id="2381281">[</span><span class="ident" id="2381282">i</span><span class="op" id="2381283">:</span><span class="op" id="2381284">]</span><span class="op" id="2381285">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2381288">return</span><br>
<span class="lineno"></span><span class="op" id="2381295">}</span>
</div>
</body>
</html>
