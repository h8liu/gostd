<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html" class="current">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5352737">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5352792">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5352846">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5352897">/*<br>
<span class="lineno"></span>Package&nbsp;gob&nbsp;manages&nbsp;streams&nbsp;of&nbsp;gobs&nbsp;-&nbsp;binary&nbsp;values&nbsp;exchanged&nbsp;between&nbsp;an<br>
<span class="lineno"></span>Encoder&nbsp;(transmitter)&nbsp;and&nbsp;a&nbsp;Decoder&nbsp;(receiver).&nbsp;&nbsp;A&nbsp;typical&nbsp;use&nbsp;is&nbsp;transporting<br>
<span class="lineno"></span>arguments&nbsp;and&nbsp;results&nbsp;of&nbsp;remote&nbsp;procedure&nbsp;calls&nbsp;(RPCs)&nbsp;such&nbsp;as&nbsp;those&nbsp;provided&nbsp;by<br>
<span class="lineno"></span>package&nbsp;&#34;rpc&#34;.<br>
<span class="lineno">10</span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;compiles&nbsp;a&nbsp;custom&nbsp;codec&nbsp;for&nbsp;each&nbsp;data&nbsp;type&nbsp;in&nbsp;the&nbsp;stream&nbsp;and<br>
<span class="lineno"></span>is&nbsp;most&nbsp;efficient&nbsp;when&nbsp;a&nbsp;single&nbsp;Encoder&nbsp;is&nbsp;used&nbsp;to&nbsp;transmit&nbsp;a&nbsp;stream&nbsp;of&nbsp;values,<br>
<span class="lineno"></span>amortizing&nbsp;the&nbsp;cost&nbsp;of&nbsp;compilation.<br>
<span class="lineno"></span><br>
<span class="lineno">15</span>Basics<br>
<span class="lineno"></span><br>
<span class="lineno"></span>A&nbsp;stream&nbsp;of&nbsp;gobs&nbsp;is&nbsp;self-describing.&nbsp;&nbsp;Each&nbsp;data&nbsp;item&nbsp;in&nbsp;the&nbsp;stream&nbsp;is&nbsp;preceded&nbsp;by<br>
<span class="lineno"></span>a&nbsp;specification&nbsp;of&nbsp;its&nbsp;type,&nbsp;expressed&nbsp;in&nbsp;terms&nbsp;of&nbsp;a&nbsp;small&nbsp;set&nbsp;of&nbsp;predefined<br>
<span class="lineno"></span>types.&nbsp;&nbsp;Pointers&nbsp;are&nbsp;not&nbsp;transmitted,&nbsp;but&nbsp;the&nbsp;things&nbsp;they&nbsp;point&nbsp;to&nbsp;are<br>
<span class="lineno">20</span>transmitted;&nbsp;that&nbsp;is,&nbsp;the&nbsp;values&nbsp;are&nbsp;flattened.&nbsp;&nbsp;Recursive&nbsp;types&nbsp;work&nbsp;fine,&nbsp;but<br>
<span class="lineno"></span>recursive&nbsp;values&nbsp;(data&nbsp;with&nbsp;cycles)&nbsp;are&nbsp;problematic.&nbsp;&nbsp;This&nbsp;may&nbsp;change.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>To&nbsp;use&nbsp;gobs,&nbsp;create&nbsp;an&nbsp;Encoder&nbsp;and&nbsp;present&nbsp;it&nbsp;with&nbsp;a&nbsp;series&nbsp;of&nbsp;data&nbsp;items&nbsp;as<br>
<span class="lineno"></span>values&nbsp;or&nbsp;addresses&nbsp;that&nbsp;can&nbsp;be&nbsp;dereferenced&nbsp;to&nbsp;values.&nbsp;&nbsp;The&nbsp;Encoder&nbsp;makes&nbsp;sure<br>
<span class="lineno">25</span>all&nbsp;type&nbsp;information&nbsp;is&nbsp;sent&nbsp;before&nbsp;it&nbsp;is&nbsp;needed.&nbsp;&nbsp;At&nbsp;the&nbsp;receive&nbsp;side,&nbsp;a<br>
<span class="lineno"></span>Decoder&nbsp;retrieves&nbsp;values&nbsp;from&nbsp;the&nbsp;encoded&nbsp;stream&nbsp;and&nbsp;unpacks&nbsp;them&nbsp;into&nbsp;local<br>
<span class="lineno"></span>variables.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Types&nbsp;and&nbsp;Values<br>
<span class="lineno">30</span><br>
<span class="lineno"></span>The&nbsp;source&nbsp;and&nbsp;destination&nbsp;values/types&nbsp;need&nbsp;not&nbsp;correspond&nbsp;exactly.&nbsp;&nbsp;For&nbsp;structs,<br>
<span class="lineno"></span>fields&nbsp;(identified&nbsp;by&nbsp;name)&nbsp;that&nbsp;are&nbsp;in&nbsp;the&nbsp;source&nbsp;but&nbsp;absent&nbsp;from&nbsp;the&nbsp;receiving<br>
<span class="lineno"></span>variable&nbsp;will&nbsp;be&nbsp;ignored.&nbsp;&nbsp;Fields&nbsp;that&nbsp;are&nbsp;in&nbsp;the&nbsp;receiving&nbsp;variable&nbsp;but&nbsp;missing<br>
<span class="lineno"></span>from&nbsp;the&nbsp;transmitted&nbsp;type&nbsp;or&nbsp;value&nbsp;will&nbsp;be&nbsp;ignored&nbsp;in&nbsp;the&nbsp;destination.&nbsp;&nbsp;If&nbsp;a&nbsp;field<br>
<span class="lineno">35</span>with&nbsp;the&nbsp;same&nbsp;name&nbsp;is&nbsp;present&nbsp;in&nbsp;both,&nbsp;their&nbsp;types&nbsp;must&nbsp;be&nbsp;compatible.&nbsp;Both&nbsp;the<br>
<span class="lineno"></span>receiver&nbsp;and&nbsp;transmitter&nbsp;will&nbsp;do&nbsp;all&nbsp;necessary&nbsp;indirection&nbsp;and&nbsp;dereferencing&nbsp;to<br>
<span class="lineno"></span>convert&nbsp;between&nbsp;gobs&nbsp;and&nbsp;actual&nbsp;Go&nbsp;values.&nbsp;&nbsp;For&nbsp;instance,&nbsp;a&nbsp;gob&nbsp;type&nbsp;that&nbsp;is<br>
<span class="lineno"></span>schematically,<br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A,&nbsp;B&nbsp;int&nbsp;}<br>
<span class="lineno"></span><br>
<span class="lineno"></span>can&nbsp;be&nbsp;sent&nbsp;from&nbsp;or&nbsp;received&nbsp;into&nbsp;any&nbsp;of&nbsp;these&nbsp;Go&nbsp;types:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A,&nbsp;B&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;same<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;*struct&nbsp;{&nbsp;A,&nbsp;B&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;extra&nbsp;indirection&nbsp;of&nbsp;the&nbsp;struct<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;*A,&nbsp;**B&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;extra&nbsp;indirection&nbsp;of&nbsp;the&nbsp;fields<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A,&nbsp;B&nbsp;int64&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;different&nbsp;concrete&nbsp;value&nbsp;type;&nbsp;see&nbsp;below<br>
<span class="lineno"></span><br>
<span class="lineno"></span>It&nbsp;may&nbsp;also&nbsp;be&nbsp;received&nbsp;into&nbsp;any&nbsp;of&nbsp;these:<br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A,&nbsp;B&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;same<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;B,&nbsp;A&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ordering&nbsp;doesn&#39;t&nbsp;matter;&nbsp;matching&nbsp;is&nbsp;by&nbsp;name<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A,&nbsp;B,&nbsp;C&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;extra&nbsp;field&nbsp;(C)&nbsp;ignored<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;B&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;missing&nbsp;field&nbsp;(A)&nbsp;ignored;&nbsp;data&nbsp;will&nbsp;be&nbsp;dropped<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;B,&nbsp;C&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;missing&nbsp;field&nbsp;(A)&nbsp;ignored;&nbsp;extra&nbsp;field&nbsp;(C)&nbsp;ignored.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Attempting&nbsp;to&nbsp;receive&nbsp;into&nbsp;these&nbsp;types&nbsp;will&nbsp;draw&nbsp;a&nbsp;decode&nbsp;error:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;uint&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;change&nbsp;of&nbsp;signedness&nbsp;for&nbsp;B<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;float&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;change&nbsp;of&nbsp;type&nbsp;for&nbsp;B<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;field&nbsp;names&nbsp;in&nbsp;common<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;{&nbsp;C,&nbsp;D&nbsp;int&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;field&nbsp;names&nbsp;in&nbsp;common<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Integers&nbsp;are&nbsp;transmitted&nbsp;two&nbsp;ways:&nbsp;arbitrary&nbsp;precision&nbsp;signed&nbsp;integers&nbsp;or<br>
<span class="lineno">65</span>arbitrary&nbsp;precision&nbsp;unsigned&nbsp;integers.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;int8,&nbsp;int16&nbsp;etc.<br>
<span class="lineno"></span>discrimination&nbsp;in&nbsp;the&nbsp;gob&nbsp;format;&nbsp;there&nbsp;are&nbsp;only&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.&nbsp;&nbsp;As<br>
<span class="lineno"></span>described&nbsp;below,&nbsp;the&nbsp;transmitter&nbsp;sends&nbsp;the&nbsp;value&nbsp;in&nbsp;a&nbsp;variable-length&nbsp;encoding;<br>
<span class="lineno"></span>the&nbsp;receiver&nbsp;accepts&nbsp;the&nbsp;value&nbsp;and&nbsp;stores&nbsp;it&nbsp;in&nbsp;the&nbsp;destination&nbsp;variable.<br>
<span class="lineno"></span>Floating-point&nbsp;numbers&nbsp;are&nbsp;always&nbsp;sent&nbsp;using&nbsp;IEEE-754&nbsp;64-bit&nbsp;precision&nbsp;(see<br>
<span class="lineno">70</span>below).<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Signed&nbsp;integers&nbsp;may&nbsp;be&nbsp;received&nbsp;into&nbsp;any&nbsp;signed&nbsp;integer&nbsp;variable:&nbsp;int,&nbsp;int16,&nbsp;etc.;<br>
<span class="lineno"></span>unsigned&nbsp;integers&nbsp;may&nbsp;be&nbsp;received&nbsp;into&nbsp;any&nbsp;unsigned&nbsp;integer&nbsp;variable;&nbsp;and&nbsp;floating<br>
<span class="lineno"></span>point&nbsp;values&nbsp;may&nbsp;be&nbsp;received&nbsp;into&nbsp;any&nbsp;floating&nbsp;point&nbsp;variable.&nbsp;&nbsp;However,<br>
<span class="lineno">75</span>the&nbsp;destination&nbsp;variable&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;represent&nbsp;the&nbsp;value&nbsp;or&nbsp;the&nbsp;decode<br>
<span class="lineno"></span>operation&nbsp;will&nbsp;fail.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Structs,&nbsp;arrays&nbsp;and&nbsp;slices&nbsp;are&nbsp;also&nbsp;supported.&nbsp;Structs&nbsp;encode&nbsp;and&nbsp;decode&nbsp;only<br>
<span class="lineno"></span>exported&nbsp;fields.&nbsp;Strings&nbsp;and&nbsp;arrays&nbsp;of&nbsp;bytes&nbsp;are&nbsp;supported&nbsp;with&nbsp;a&nbsp;special,<br>
<span class="lineno">80</span>efficient&nbsp;representation&nbsp;(see&nbsp;below).&nbsp;When&nbsp;a&nbsp;slice&nbsp;is&nbsp;decoded,&nbsp;if&nbsp;the&nbsp;existing<br>
<span class="lineno"></span>slice&nbsp;has&nbsp;capacity&nbsp;the&nbsp;slice&nbsp;will&nbsp;be&nbsp;extended&nbsp;in&nbsp;place;&nbsp;if&nbsp;not,&nbsp;a&nbsp;new&nbsp;array&nbsp;is<br>
<span class="lineno"></span>allocated.&nbsp;Regardless,&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;resulting&nbsp;slice&nbsp;reports&nbsp;the&nbsp;number&nbsp;of<br>
<span class="lineno"></span>elements&nbsp;decoded.<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>Functions&nbsp;and&nbsp;channels&nbsp;will&nbsp;not&nbsp;be&nbsp;sent&nbsp;in&nbsp;a&nbsp;gob.&nbsp;Attempting&nbsp;to&nbsp;encode&nbsp;such&nbsp;a&nbsp;value<br>
<span class="lineno"></span>at&nbsp;top&nbsp;the&nbsp;level&nbsp;will&nbsp;fail.&nbsp;A&nbsp;struct&nbsp;field&nbsp;of&nbsp;chan&nbsp;or&nbsp;func&nbsp;type&nbsp;is&nbsp;treated&nbsp;exactly<br>
<span class="lineno"></span>like&nbsp;an&nbsp;unexported&nbsp;field&nbsp;and&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Gob&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;of&nbsp;any&nbsp;type&nbsp;implementing&nbsp;the&nbsp;GobEncoder&nbsp;or<br>
<span class="lineno">90</span>encoding.BinaryMarshaler&nbsp;interfaces&nbsp;by&nbsp;calling&nbsp;the&nbsp;corresponding&nbsp;method,<br>
<span class="lineno"></span>in&nbsp;that&nbsp;order&nbsp;of&nbsp;preference.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Gob&nbsp;can&nbsp;decode&nbsp;a&nbsp;value&nbsp;of&nbsp;any&nbsp;type&nbsp;implementing&nbsp;the&nbsp;GobDecoder&nbsp;or<br>
<span class="lineno"></span>encoding.BinaryUnmarshaler&nbsp;interfaces&nbsp;by&nbsp;calling&nbsp;the&nbsp;corresponding&nbsp;method,<br>
<span class="lineno">95</span>again&nbsp;in&nbsp;that&nbsp;order&nbsp;of&nbsp;preference.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Encoding&nbsp;Details<br>
<span class="lineno"></span><br>
<span class="lineno"></span>This&nbsp;section&nbsp;documents&nbsp;the&nbsp;encoding,&nbsp;details&nbsp;that&nbsp;are&nbsp;not&nbsp;important&nbsp;for&nbsp;most<br>
<span class="lineno">100</span>users.&nbsp;Details&nbsp;are&nbsp;presented&nbsp;bottom-up.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>An&nbsp;unsigned&nbsp;integer&nbsp;is&nbsp;sent&nbsp;one&nbsp;of&nbsp;two&nbsp;ways.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;less&nbsp;than&nbsp;128,&nbsp;it&nbsp;is&nbsp;sent<br>
<span class="lineno"></span>as&nbsp;a&nbsp;byte&nbsp;with&nbsp;that&nbsp;value.&nbsp;&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;sent&nbsp;as&nbsp;a&nbsp;minimal-length&nbsp;big-endian<br>
<span class="lineno"></span>(high&nbsp;byte&nbsp;first)&nbsp;byte&nbsp;stream&nbsp;holding&nbsp;the&nbsp;value,&nbsp;preceded&nbsp;by&nbsp;one&nbsp;byte&nbsp;holding&nbsp;the<br>
<span class="lineno">105</span>byte&nbsp;count,&nbsp;negated.&nbsp;&nbsp;Thus&nbsp;0&nbsp;is&nbsp;transmitted&nbsp;as&nbsp;(00),&nbsp;7&nbsp;is&nbsp;transmitted&nbsp;as&nbsp;(07)&nbsp;and<br>
<span class="lineno"></span>256&nbsp;is&nbsp;transmitted&nbsp;as&nbsp;(FE&nbsp;01&nbsp;00).<br>
<span class="lineno"></span><br>
<span class="lineno"></span>A&nbsp;boolean&nbsp;is&nbsp;encoded&nbsp;within&nbsp;an&nbsp;unsigned&nbsp;integer:&nbsp;0&nbsp;for&nbsp;false,&nbsp;1&nbsp;for&nbsp;true.<br>
<span class="lineno"></span><br>
<span class="lineno">110</span>A&nbsp;signed&nbsp;integer,&nbsp;i,&nbsp;is&nbsp;encoded&nbsp;within&nbsp;an&nbsp;unsigned&nbsp;integer,&nbsp;u.&nbsp;&nbsp;Within&nbsp;u,&nbsp;bits&nbsp;1<br>
<span class="lineno"></span>upward&nbsp;contain&nbsp;the&nbsp;value;&nbsp;bit&nbsp;0&nbsp;says&nbsp;whether&nbsp;they&nbsp;should&nbsp;be&nbsp;complemented&nbsp;upon<br>
<span class="lineno"></span>receipt.&nbsp;&nbsp;The&nbsp;encode&nbsp;algorithm&nbsp;looks&nbsp;like&nbsp;this:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint&nbsp;u;<br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i&nbsp;&lt;&nbsp;0&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u&nbsp;=&nbsp;(^i&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;complement&nbsp;i,&nbsp;bit&nbsp;0&nbsp;is&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u&nbsp;=&nbsp;(i&nbsp;&lt;&lt;&nbsp;1)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;not&nbsp;complement&nbsp;i,&nbsp;bit&nbsp;0&nbsp;is&nbsp;0<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;encodeUnsigned(u)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;low&nbsp;bit&nbsp;is&nbsp;therefore&nbsp;analogous&nbsp;to&nbsp;a&nbsp;sign&nbsp;bit,&nbsp;but&nbsp;making&nbsp;it&nbsp;the&nbsp;complement&nbsp;bit<br>
<span class="lineno"></span>instead&nbsp;guarantees&nbsp;that&nbsp;the&nbsp;largest&nbsp;negative&nbsp;integer&nbsp;is&nbsp;not&nbsp;a&nbsp;special&nbsp;case.&nbsp;&nbsp;For<br>
<span class="lineno"></span>example,&nbsp;-129=^128=(^256&gt;&gt;1)&nbsp;encodes&nbsp;as&nbsp;(FE&nbsp;01&nbsp;01).<br>
<span class="lineno">125</span><br>
<span class="lineno"></span>Floating-point&nbsp;numbers&nbsp;are&nbsp;always&nbsp;sent&nbsp;as&nbsp;a&nbsp;representation&nbsp;of&nbsp;a&nbsp;float64&nbsp;value.<br>
<span class="lineno"></span>That&nbsp;value&nbsp;is&nbsp;converted&nbsp;to&nbsp;a&nbsp;uint64&nbsp;using&nbsp;math.Float64bits.&nbsp;&nbsp;The&nbsp;uint64&nbsp;is&nbsp;then<br>
<span class="lineno"></span>byte-reversed&nbsp;and&nbsp;sent&nbsp;as&nbsp;a&nbsp;regular&nbsp;unsigned&nbsp;integer.&nbsp;&nbsp;The&nbsp;byte-reversal&nbsp;means&nbsp;the<br>
<span class="lineno"></span>exponent&nbsp;and&nbsp;high-precision&nbsp;part&nbsp;of&nbsp;the&nbsp;mantissa&nbsp;go&nbsp;first.&nbsp;&nbsp;Since&nbsp;the&nbsp;low&nbsp;bits&nbsp;are<br>
<span class="lineno">130</span>often&nbsp;zero,&nbsp;this&nbsp;can&nbsp;save&nbsp;encoding&nbsp;bytes.&nbsp;&nbsp;For&nbsp;instance,&nbsp;17.0&nbsp;is&nbsp;encoded&nbsp;in&nbsp;only<br>
<span class="lineno"></span>three&nbsp;bytes&nbsp;(FE&nbsp;31&nbsp;40).<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Strings&nbsp;and&nbsp;slices&nbsp;of&nbsp;bytes&nbsp;are&nbsp;sent&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;that&nbsp;many<br>
<span class="lineno"></span>uninterpreted&nbsp;bytes&nbsp;of&nbsp;the&nbsp;value.<br>
<span class="lineno">135</span><br>
<span class="lineno"></span>All&nbsp;other&nbsp;slices&nbsp;and&nbsp;arrays&nbsp;are&nbsp;sent&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;that&nbsp;many<br>
<span class="lineno"></span>elements&nbsp;using&nbsp;the&nbsp;standard&nbsp;gob&nbsp;encoding&nbsp;for&nbsp;their&nbsp;type,&nbsp;recursively.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Maps&nbsp;are&nbsp;sent&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;that&nbsp;many&nbsp;key,&nbsp;element<br>
<span class="lineno">140</span>pairs.&nbsp;Empty&nbsp;but&nbsp;non-nil&nbsp;maps&nbsp;are&nbsp;sent,&nbsp;so&nbsp;if&nbsp;the&nbsp;sender&nbsp;has&nbsp;allocated<br>
<span class="lineno"></span>a&nbsp;map,&nbsp;the&nbsp;receiver&nbsp;will&nbsp;allocate&nbsp;a&nbsp;map&nbsp;even&nbsp;if&nbsp;no&nbsp;elements&nbsp;are<br>
<span class="lineno"></span>transmitted.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Structs&nbsp;are&nbsp;sent&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of&nbsp;(field&nbsp;number,&nbsp;field&nbsp;value)&nbsp;pairs.&nbsp;&nbsp;The&nbsp;field<br>
<span class="lineno">145</span>value&nbsp;is&nbsp;sent&nbsp;using&nbsp;the&nbsp;standard&nbsp;gob&nbsp;encoding&nbsp;for&nbsp;its&nbsp;type,&nbsp;recursively.&nbsp;&nbsp;If&nbsp;a<br>
<span class="lineno"></span>field&nbsp;has&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;its&nbsp;type,&nbsp;it&nbsp;is&nbsp;omitted&nbsp;from&nbsp;the&nbsp;transmission.&nbsp;&nbsp;The<br>
<span class="lineno"></span>field&nbsp;number&nbsp;is&nbsp;defined&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;encoded&nbsp;struct:&nbsp;the&nbsp;first&nbsp;field&nbsp;of&nbsp;the<br>
<span class="lineno"></span>encoded&nbsp;type&nbsp;is&nbsp;field&nbsp;0,&nbsp;the&nbsp;second&nbsp;is&nbsp;field&nbsp;1,&nbsp;etc.&nbsp;&nbsp;When&nbsp;encoding&nbsp;a&nbsp;value,&nbsp;the<br>
<span class="lineno"></span>field&nbsp;numbers&nbsp;are&nbsp;delta&nbsp;encoded&nbsp;for&nbsp;efficiency&nbsp;and&nbsp;the&nbsp;fields&nbsp;are&nbsp;always&nbsp;sent&nbsp;in<br>
<span class="lineno">150</span>order&nbsp;of&nbsp;increasing&nbsp;field&nbsp;number;&nbsp;the&nbsp;deltas&nbsp;are&nbsp;therefore&nbsp;unsigned.&nbsp;&nbsp;The<br>
<span class="lineno"></span>initialization&nbsp;for&nbsp;the&nbsp;delta&nbsp;encoding&nbsp;sets&nbsp;the&nbsp;field&nbsp;number&nbsp;to&nbsp;-1,&nbsp;so&nbsp;an&nbsp;unsigned<br>
<span class="lineno"></span>integer&nbsp;field&nbsp;0&nbsp;with&nbsp;value&nbsp;7&nbsp;is&nbsp;transmitted&nbsp;as&nbsp;unsigned&nbsp;delta&nbsp;=&nbsp;1,&nbsp;unsigned&nbsp;value<br>
<span class="lineno"></span>=&nbsp;7&nbsp;or&nbsp;(01&nbsp;07).&nbsp;&nbsp;Finally,&nbsp;after&nbsp;all&nbsp;the&nbsp;fields&nbsp;have&nbsp;been&nbsp;sent&nbsp;a&nbsp;terminating&nbsp;mark<br>
<span class="lineno"></span>denotes&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;struct.&nbsp;&nbsp;That&nbsp;mark&nbsp;is&nbsp;a&nbsp;delta=0&nbsp;value,&nbsp;which&nbsp;has<br>
<span class="lineno">155</span>representation&nbsp;(00).<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Interface&nbsp;types&nbsp;are&nbsp;not&nbsp;checked&nbsp;for&nbsp;compatibility;&nbsp;all&nbsp;interface&nbsp;types&nbsp;are<br>
<span class="lineno"></span>treated,&nbsp;for&nbsp;transmission,&nbsp;as&nbsp;members&nbsp;of&nbsp;a&nbsp;single&nbsp;&#34;interface&#34;&nbsp;type,&nbsp;analogous&nbsp;to<br>
<span class="lineno"></span>int&nbsp;or&nbsp;[]byte&nbsp;-&nbsp;in&nbsp;effect&nbsp;they&#39;re&nbsp;all&nbsp;treated&nbsp;as&nbsp;interface{}.&nbsp;&nbsp;Interface&nbsp;values<br>
<span class="lineno">160</span>are&nbsp;transmitted&nbsp;as&nbsp;a&nbsp;string&nbsp;identifying&nbsp;the&nbsp;concrete&nbsp;type&nbsp;being&nbsp;sent&nbsp;(a&nbsp;name<br>
<span class="lineno"></span>that&nbsp;must&nbsp;be&nbsp;pre-defined&nbsp;by&nbsp;calling&nbsp;Register),&nbsp;followed&nbsp;by&nbsp;a&nbsp;byte&nbsp;count&nbsp;of&nbsp;the<br>
<span class="lineno"></span>length&nbsp;of&nbsp;the&nbsp;following&nbsp;data&nbsp;(so&nbsp;the&nbsp;value&nbsp;can&nbsp;be&nbsp;skipped&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be<br>
<span class="lineno"></span>stored),&nbsp;followed&nbsp;by&nbsp;the&nbsp;usual&nbsp;encoding&nbsp;of&nbsp;concrete&nbsp;(dynamic)&nbsp;value&nbsp;stored&nbsp;in<br>
<span class="lineno"></span>the&nbsp;interface&nbsp;value.&nbsp;&nbsp;(A&nbsp;nil&nbsp;interface&nbsp;value&nbsp;is&nbsp;identified&nbsp;by&nbsp;the&nbsp;empty&nbsp;string<br>
<span class="lineno">165</span>and&nbsp;transmits&nbsp;no&nbsp;value.)&nbsp;Upon&nbsp;receipt,&nbsp;the&nbsp;decoder&nbsp;verifies&nbsp;that&nbsp;the&nbsp;unpacked<br>
<span class="lineno"></span>concrete&nbsp;item&nbsp;satisfies&nbsp;the&nbsp;interface&nbsp;of&nbsp;the&nbsp;receiving&nbsp;variable.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;representation&nbsp;of&nbsp;types&nbsp;is&nbsp;described&nbsp;below.&nbsp;&nbsp;When&nbsp;a&nbsp;type&nbsp;is&nbsp;defined&nbsp;on&nbsp;a&nbsp;given<br>
<span class="lineno"></span>connection&nbsp;between&nbsp;an&nbsp;Encoder&nbsp;and&nbsp;Decoder,&nbsp;it&nbsp;is&nbsp;assigned&nbsp;a&nbsp;signed&nbsp;integer&nbsp;type<br>
<span class="lineno">170</span>id.&nbsp;&nbsp;When&nbsp;Encoder.Encode(v)&nbsp;is&nbsp;called,&nbsp;it&nbsp;makes&nbsp;sure&nbsp;there&nbsp;is&nbsp;an&nbsp;id&nbsp;assigned&nbsp;for<br>
<span class="lineno"></span>the&nbsp;type&nbsp;of&nbsp;v&nbsp;and&nbsp;all&nbsp;its&nbsp;elements&nbsp;and&nbsp;then&nbsp;it&nbsp;sends&nbsp;the&nbsp;pair&nbsp;(typeid,&nbsp;encoded-v)<br>
<span class="lineno"></span>where&nbsp;typeid&nbsp;is&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;encoded&nbsp;type&nbsp;of&nbsp;v&nbsp;and&nbsp;encoded-v&nbsp;is&nbsp;the&nbsp;gob<br>
<span class="lineno"></span>encoding&nbsp;of&nbsp;the&nbsp;value&nbsp;v.<br>
<span class="lineno"></span><br>
<span class="lineno">175</span>To&nbsp;define&nbsp;a&nbsp;type,&nbsp;the&nbsp;encoder&nbsp;chooses&nbsp;an&nbsp;unused,&nbsp;positive&nbsp;type&nbsp;id&nbsp;and&nbsp;sends&nbsp;the<br>
<span class="lineno"></span>pair&nbsp;(-type&nbsp;id,&nbsp;encoded-type)&nbsp;where&nbsp;encoded-type&nbsp;is&nbsp;the&nbsp;gob&nbsp;encoding&nbsp;of&nbsp;a&nbsp;wireType<br>
<span class="lineno"></span>description,&nbsp;constructed&nbsp;from&nbsp;these&nbsp;types:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;wireType&nbsp;struct&nbsp;{<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ArrayT&nbsp;&nbsp;*ArrayType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SliceT&nbsp;&nbsp;*SliceType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StructT&nbsp;*StructType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MapT&nbsp;&nbsp;&nbsp;&nbsp;*MapType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;arrayType&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CommonType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elem&nbsp;typeId<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Len&nbsp;&nbsp;int<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;CommonType&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;string&nbsp;//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;struct&nbsp;type<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Id&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;type,&nbsp;repeated&nbsp;so&nbsp;it&#39;s&nbsp;inside&nbsp;the&nbsp;type<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;sliceType&nbsp;struct&nbsp;{<br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CommonType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elem&nbsp;typeId<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;structType&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CommonType<br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Field&nbsp;[]*fieldType&nbsp;//&nbsp;the&nbsp;fields&nbsp;of&nbsp;the&nbsp;struct.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;fieldType&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;string&nbsp;//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;field.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Id&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;field,&nbsp;which&nbsp;must&nbsp;be&nbsp;already&nbsp;defined<br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;mapType&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CommonType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;typeId<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elem&nbsp;typeId<br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span><br>
<span class="lineno"></span>If&nbsp;there&nbsp;are&nbsp;nested&nbsp;type&nbsp;ids,&nbsp;the&nbsp;types&nbsp;for&nbsp;all&nbsp;inner&nbsp;type&nbsp;ids&nbsp;must&nbsp;be&nbsp;defined<br>
<span class="lineno"></span>before&nbsp;the&nbsp;top-level&nbsp;type&nbsp;id&nbsp;is&nbsp;used&nbsp;to&nbsp;describe&nbsp;an&nbsp;encoded-v.<br>
<span class="lineno"></span><br>
<span class="lineno">215</span>For&nbsp;simplicity&nbsp;in&nbsp;setup,&nbsp;the&nbsp;connection&nbsp;is&nbsp;defined&nbsp;to&nbsp;understand&nbsp;these&nbsp;types&nbsp;a<br>
<span class="lineno"></span>priori,&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;basic&nbsp;gob&nbsp;types&nbsp;int,&nbsp;uint,&nbsp;etc.&nbsp;&nbsp;Their&nbsp;ids&nbsp;are:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2<br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;uint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;[]byte&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;complex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7<br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;interface&nbsp;&nbsp;&nbsp;8<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;gap&nbsp;for&nbsp;reserved&nbsp;ids.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;WireType&nbsp;&nbsp;&nbsp;&nbsp;16<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ArrayType&nbsp;&nbsp;&nbsp;17<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;CommonType&nbsp;&nbsp;18<br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;SliceType&nbsp;&nbsp;&nbsp;19<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;StructType&nbsp;&nbsp;20<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;FieldType&nbsp;&nbsp;&nbsp;21<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;22&nbsp;is&nbsp;slice&nbsp;of&nbsp;fieldType.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;MapType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;23<br>
<span class="lineno">235</span><br>
<span class="lineno"></span>Finally,&nbsp;each&nbsp;message&nbsp;created&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Encode&nbsp;is&nbsp;preceded&nbsp;by&nbsp;an&nbsp;encoded<br>
<span class="lineno"></span>unsigned&nbsp;integer&nbsp;count&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;remaining&nbsp;in&nbsp;the&nbsp;message.&nbsp;&nbsp;After<br>
<span class="lineno"></span>the&nbsp;initial&nbsp;type&nbsp;name,&nbsp;interface&nbsp;values&nbsp;are&nbsp;wrapped&nbsp;the&nbsp;same&nbsp;way;&nbsp;in&nbsp;effect,&nbsp;the<br>
<span class="lineno"></span>interface&nbsp;value&nbsp;acts&nbsp;like&nbsp;a&nbsp;recursive&nbsp;invocation&nbsp;of&nbsp;Encode.<br>
<span class="lineno">240</span><br>
<span class="lineno"></span>In&nbsp;summary,&nbsp;a&nbsp;gob&nbsp;stream&nbsp;looks&nbsp;like<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;(byteCount&nbsp;(-type&nbsp;id,&nbsp;encoding&nbsp;of&nbsp;a&nbsp;wireType)*&nbsp;(type&nbsp;id,&nbsp;encoding&nbsp;of&nbsp;a&nbsp;value))*<br>
<span class="lineno"></span><br>
<span class="lineno">245</span>where&nbsp;*&nbsp;signifies&nbsp;zero&nbsp;or&nbsp;more&nbsp;repetitions&nbsp;and&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;a&nbsp;value&nbsp;must<br>
<span class="lineno"></span>be&nbsp;predefined&nbsp;or&nbsp;be&nbsp;defined&nbsp;before&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;stream.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>See&nbsp;&#34;Gobs&nbsp;of&nbsp;data&#34;&nbsp;for&nbsp;a&nbsp;design&nbsp;discussion&nbsp;of&nbsp;the&nbsp;gob&nbsp;wire&nbsp;format:<br>
<span class="lineno"></span>http://golang.org/doc/articles/gobs_of_data.html<br>
<span class="lineno">250</span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5363621">package</span>&nbsp;<span class="ident" id="5363629">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5363634">/*<br>
<span class="lineno"></span>Grammar:<br>
<span class="lineno">255</span><br>
<span class="lineno"></span>Tokens&nbsp;starting&nbsp;with&nbsp;a&nbsp;lower&nbsp;case&nbsp;letter&nbsp;are&nbsp;terminals;&nbsp;int(n)<br>
<span class="lineno"></span>and&nbsp;uint(n)&nbsp;represent&nbsp;the&nbsp;signed/unsigned&nbsp;encodings&nbsp;of&nbsp;the&nbsp;value&nbsp;n.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>GobStream:<br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;DelimitedMessage*<br>
<span class="lineno"></span>DelimitedMessage:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(lengthOfMessage)&nbsp;Message<br>
<span class="lineno"></span>Message:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;TypeSequence&nbsp;TypedValue<br>
<span class="lineno">265</span>TypeSequence<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;(TypeDefinition&nbsp;DelimitedTypeDefinition*)?<br>
<span class="lineno"></span>DelimitedTypeDefinition:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(lengthOfTypeDefinition)&nbsp;TypeDefinition<br>
<span class="lineno"></span>TypedValue:<br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;int(typeId)&nbsp;Value<br>
<span class="lineno"></span>TypeDefinition:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;int(-typeId)&nbsp;encodingOfWireType<br>
<span class="lineno"></span>Value:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;SingletonValue&nbsp;|&nbsp;StructValue<br>
<span class="lineno">275</span>SingletonValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(0)&nbsp;FieldValue<br>
<span class="lineno"></span>FieldValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;builtinValue&nbsp;|&nbsp;ArrayValue&nbsp;|&nbsp;MapValue&nbsp;|&nbsp;SliceValue&nbsp;|&nbsp;StructValue&nbsp;|&nbsp;InterfaceValue<br>
<span class="lineno"></span>InterfaceValue:<br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;NilInterfaceValue&nbsp;|&nbsp;NonNilInterfaceValue<br>
<span class="lineno"></span>NilInterfaceValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(0)<br>
<span class="lineno"></span>NonNilInterfaceValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ConcreteTypeName&nbsp;TypeSequence&nbsp;InterfaceContents<br>
<span class="lineno">285</span>ConcreteTypeName:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(lengthOfName)&nbsp;[already&nbsp;read=n]&nbsp;name<br>
<span class="lineno"></span>InterfaceContents:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;int(concreteTypeId)&nbsp;DelimitedValue<br>
<span class="lineno"></span>DelimitedValue:<br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;uint(length)&nbsp;Value<br>
<span class="lineno"></span>ArrayValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(n)&nbsp;FieldValue*n&nbsp;[n&nbsp;elements]<br>
<span class="lineno"></span>MapValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(n)&nbsp;(FieldValue&nbsp;FieldValue)*n&nbsp;&nbsp;[n&nbsp;(key,&nbsp;value)&nbsp;pairs]<br>
<span class="lineno">295</span>SliceValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;uint(n)&nbsp;FieldValue*n&nbsp;[n&nbsp;elements]<br>
<span class="lineno"></span>StructValue:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;(uint(fieldDelta)&nbsp;FieldValue)*<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="5364786">/*<br>
<span class="lineno"></span>For&nbsp;implementers&nbsp;and&nbsp;the&nbsp;curious,&nbsp;here&nbsp;is&nbsp;an&nbsp;encoded&nbsp;example.&nbsp;&nbsp;Given<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;Point&nbsp;struct&nbsp;{X,&nbsp;Y&nbsp;int}<br>
<span class="lineno"></span>and&nbsp;the&nbsp;value<br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;:=&nbsp;Point{22,&nbsp;33}<br>
<span class="lineno"></span>the&nbsp;bytes&nbsp;transmitted&nbsp;that&nbsp;encode&nbsp;p&nbsp;will&nbsp;be:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;1f&nbsp;ff&nbsp;81&nbsp;03&nbsp;01&nbsp;01&nbsp;05&nbsp;50&nbsp;6f&nbsp;69&nbsp;6e&nbsp;74&nbsp;01&nbsp;ff&nbsp;82&nbsp;00<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;02&nbsp;01&nbsp;01&nbsp;58&nbsp;01&nbsp;04&nbsp;00&nbsp;01&nbsp;01&nbsp;59&nbsp;01&nbsp;04&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;07&nbsp;ff&nbsp;82&nbsp;01&nbsp;2c&nbsp;01&nbsp;42&nbsp;00<br>
<span class="lineno">310</span>They&nbsp;are&nbsp;determined&nbsp;as&nbsp;follows.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Since&nbsp;this&nbsp;is&nbsp;the&nbsp;first&nbsp;transmission&nbsp;of&nbsp;type&nbsp;Point,&nbsp;the&nbsp;type&nbsp;descriptor<br>
<span class="lineno"></span>for&nbsp;Point&nbsp;itself&nbsp;must&nbsp;be&nbsp;sent&nbsp;before&nbsp;the&nbsp;value.&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;first&nbsp;type<br>
<span class="lineno"></span>we&#39;ve&nbsp;sent&nbsp;on&nbsp;this&nbsp;Encoder,&nbsp;so&nbsp;it&nbsp;has&nbsp;type&nbsp;id&nbsp;65&nbsp;(0&nbsp;through&nbsp;64&nbsp;are<br>
<span class="lineno">315</span>reserved).<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;1f&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;item&nbsp;(a&nbsp;type&nbsp;descriptor)&nbsp;is&nbsp;31&nbsp;bytes&nbsp;long.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ff&nbsp;81&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;negative&nbsp;of&nbsp;the&nbsp;id&nbsp;for&nbsp;the&nbsp;type&nbsp;we&#39;re&nbsp;defining,&nbsp;-65.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;one&nbsp;byte&nbsp;(indicated&nbsp;by&nbsp;FF&nbsp;=&nbsp;-1)&nbsp;followed&nbsp;by<br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;^-65&lt;&lt;1&nbsp;|&nbsp;1.&nbsp;&nbsp;The&nbsp;low&nbsp;1&nbsp;bit&nbsp;signals&nbsp;to&nbsp;complement&nbsp;the<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;rest&nbsp;upon&nbsp;receipt.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Now&nbsp;we&nbsp;send&nbsp;a&nbsp;type&nbsp;descriptor,&nbsp;which&nbsp;is&nbsp;itself&nbsp;a&nbsp;struct&nbsp;(wireType).<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;type&nbsp;of&nbsp;wireType&nbsp;itself&nbsp;is&nbsp;known&nbsp;(it&#39;s&nbsp;built&nbsp;in,&nbsp;as&nbsp;is&nbsp;the&nbsp;type&nbsp;of<br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;all&nbsp;its&nbsp;components),&nbsp;so&nbsp;we&nbsp;just&nbsp;need&nbsp;to&nbsp;send&nbsp;a&nbsp;*value*&nbsp;of&nbsp;type&nbsp;wireType<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;that&nbsp;represents&nbsp;type&nbsp;&#34;Point&#34;.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Here&nbsp;starts&nbsp;the&nbsp;encoding&nbsp;of&nbsp;that&nbsp;value.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set&nbsp;the&nbsp;field&nbsp;number&nbsp;implicitly&nbsp;to&nbsp;-1;&nbsp;this&nbsp;is&nbsp;done&nbsp;at&nbsp;the&nbsp;beginning<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;of&nbsp;every&nbsp;struct,&nbsp;including&nbsp;nested&nbsp;structs.<br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;03&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;3&nbsp;to&nbsp;field&nbsp;number;&nbsp;now&nbsp;2&nbsp;(wireType.structType;&nbsp;this&nbsp;is&nbsp;a&nbsp;struct).<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;structType&nbsp;starts&nbsp;with&nbsp;an&nbsp;embedded&nbsp;CommonType,&nbsp;which&nbsp;appears<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;as&nbsp;a&nbsp;regular&nbsp;structure&nbsp;here&nbsp;too.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;add&nbsp;1&nbsp;to&nbsp;field&nbsp;number&nbsp;(now&nbsp;0);&nbsp;start&nbsp;of&nbsp;embedded&nbsp;CommonType.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;add&nbsp;1&nbsp;to&nbsp;field&nbsp;number&nbsp;(now&nbsp;0,&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;type)<br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;05&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;string&nbsp;is&nbsp;(unsigned)&nbsp;5&nbsp;bytes&nbsp;long<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;50&nbsp;6f&nbsp;69&nbsp;6e&nbsp;74&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;wireType.structType.CommonType.name&nbsp;=&nbsp;&#34;Point&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;add&nbsp;1&nbsp;to&nbsp;field&nbsp;number&nbsp;(now&nbsp;1,&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;type)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ff&nbsp;82&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;wireType.structType.CommonType._id&nbsp;=&nbsp;65<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;end&nbsp;of&nbsp;embedded&nbsp;wiretype.structType.CommonType&nbsp;struct<br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;add&nbsp;1&nbsp;to&nbsp;field&nbsp;number&nbsp;(now&nbsp;1,&nbsp;the&nbsp;field&nbsp;array&nbsp;in&nbsp;wireType.structType)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;02&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;are&nbsp;two&nbsp;fields&nbsp;in&nbsp;the&nbsp;type&nbsp;(len(structType.field))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;of&nbsp;first&nbsp;field&nbsp;structure;&nbsp;add&nbsp;1&nbsp;to&nbsp;get&nbsp;field&nbsp;number&nbsp;0:&nbsp;field[0].name<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1&nbsp;byte<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;58&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;structType.field[0].name&nbsp;=&nbsp;&#34;X&#34;<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;1&nbsp;to&nbsp;get&nbsp;field&nbsp;number&nbsp;1:&nbsp;field[0].id<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;04&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;structType.field[0].typeId&nbsp;is&nbsp;2&nbsp;(signed&nbsp;int).<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;End&nbsp;of&nbsp;structType.field[0];&nbsp;start&nbsp;structType.field[1];&nbsp;set&nbsp;field&nbsp;number&nbsp;to&nbsp;-1.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;1&nbsp;to&nbsp;get&nbsp;field&nbsp;number&nbsp;0:&nbsp;field[1].name<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1&nbsp;byte<br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;59&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;structType.field[1].name&nbsp;=&nbsp;&#34;Y&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;1&nbsp;to&nbsp;get&nbsp;field&nbsp;number&nbsp;1:&nbsp;field[1].id<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;04&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;struct.Type.field[1].typeId&nbsp;is&nbsp;2&nbsp;(signed&nbsp;int).<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;End&nbsp;of&nbsp;structType.field[1];&nbsp;end&nbsp;of&nbsp;structType.field.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;end&nbsp;of&nbsp;wireType.structType&nbsp;structure<br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;end&nbsp;of&nbsp;wireType&nbsp;structure<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Now&nbsp;we&nbsp;can&nbsp;send&nbsp;the&nbsp;Point&nbsp;value.&nbsp;&nbsp;Again&nbsp;the&nbsp;field&nbsp;number&nbsp;resets&nbsp;to&nbsp;-1:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;07&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;this&nbsp;value&nbsp;is&nbsp;7&nbsp;bytes&nbsp;long<br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;ff&nbsp;82&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;type&nbsp;number,&nbsp;65&nbsp;(1&nbsp;byte&nbsp;(-FF)&nbsp;followed&nbsp;by&nbsp;65&lt;&lt;1)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;add&nbsp;one&nbsp;to&nbsp;field&nbsp;number,&nbsp;yielding&nbsp;field&nbsp;0<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;2c&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;encoding&nbsp;of&nbsp;signed&nbsp;&#34;22&#34;&nbsp;(0x22&nbsp;=&nbsp;44&nbsp;=&nbsp;22&lt;&lt;1);&nbsp;Point.x&nbsp;=&nbsp;22<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;01&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;add&nbsp;one&nbsp;to&nbsp;field&nbsp;number,&nbsp;yielding&nbsp;field&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;encoding&nbsp;of&nbsp;signed&nbsp;&#34;33&#34;&nbsp;(0x42&nbsp;=&nbsp;66&nbsp;=&nbsp;33&lt;&lt;1);&nbsp;Point.y&nbsp;=&nbsp;33<br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;end&nbsp;of&nbsp;structure<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;type&nbsp;encoding&nbsp;is&nbsp;long&nbsp;and&nbsp;fairly&nbsp;intricate&nbsp;but&nbsp;we&nbsp;send&nbsp;it&nbsp;only&nbsp;once.<br>
<span class="lineno"></span>If&nbsp;p&nbsp;is&nbsp;transmitted&nbsp;a&nbsp;second&nbsp;time,&nbsp;the&nbsp;type&nbsp;is&nbsp;already&nbsp;known&nbsp;so&nbsp;the<br>
<span class="lineno"></span>output&nbsp;will&nbsp;be&nbsp;just:<br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;07&nbsp;ff&nbsp;82&nbsp;01&nbsp;2c&nbsp;01&nbsp;42&nbsp;00<br>
<span class="lineno"></span><br>
<span class="lineno"></span>A&nbsp;single&nbsp;non-struct&nbsp;value&nbsp;at&nbsp;top&nbsp;level&nbsp;is&nbsp;transmitted&nbsp;like&nbsp;a&nbsp;field&nbsp;with<br>
<span class="lineno"></span>delta&nbsp;tag&nbsp;0.&nbsp;&nbsp;For&nbsp;instance,&nbsp;a&nbsp;signed&nbsp;integer&nbsp;with&nbsp;value&nbsp;3&nbsp;presented&nbsp;as<br>
<span class="lineno">375</span>the&nbsp;argument&nbsp;to&nbsp;Encode&nbsp;will&nbsp;emit:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;03&nbsp;04&nbsp;00&nbsp;06<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Which&nbsp;represents:<br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;03&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;this&nbsp;value&nbsp;is&nbsp;3&nbsp;bytes&nbsp;long<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;04&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;type&nbsp;number,&nbsp;2,&nbsp;represents&nbsp;an&nbsp;integer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;00&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;tag&nbsp;delta&nbsp;0<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;06&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;value&nbsp;3<br>
<span class="lineno">385</span><br>
<span class="lineno"></span>*/</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
