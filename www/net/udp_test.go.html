<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6943274">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6943330">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6943384">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6943435">package</span>&nbsp;<span class="ident" id="6943443">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943448">import</span>&nbsp;<span class="op" id="6943455">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943458">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943469">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943480">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943491">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6943502">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6943509">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6943512">func</span>&nbsp;<span class="ident" id="6943517">TestResolveUDPAddr</span><span class="op" id="6943535">(</span><span class="ident" id="6943536">t</span>&nbsp;<span class="op" id="6943538">*</span><span class="ident" id="6943539"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6943546">.</span><span class="ident" id="6943547">T</span><span class="op" id="6943548">)</span>&nbsp;<span class="op" id="6943550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943553">for</span>&nbsp;<span class="ident" id="6943557">_</span><span class="op" id="6943558">,</span>&nbsp;<span class="ident" id="6943560">tt</span>&nbsp;<span class="op" id="6943563">:=</span>&nbsp;<span class="keyword" id="6943566">range</span>&nbsp;<span class="ident" id="6943572"><a href="/net/tcp_test.go.html#6917849">resolveTCPAddrTests</a></span>&nbsp;<span class="op" id="6943592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943596">net</span>&nbsp;<span class="op" id="6943600">:=</span>&nbsp;<span class="ident" id="6943603"><a href="/net/udp_test.go.html#6943480">strings</a></span><span class="op" id="6943610">.</span><span class="ident" id="6943611">Replace</span><span class="op" id="6943618">(</span><span class="ident" id="6943619"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943621">.</span><span class="ident" id="6943622">net</span><span class="op" id="6943625">,</span>&nbsp;<span class="string" id="6943627">&#34;tcp&#34;</span><span class="op" id="6943632">,</span>&nbsp;<span class="string" id="6943634">&#34;udp&#34;</span><span class="op" id="6943639">,</span>&nbsp;<span class="op" id="6943641">-</span><span class="num" id="6943642">1</span><span class="op" id="6943643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943647">addr</span><span class="op" id="6943651">,</span>&nbsp;<span class="ident" id="6943653">err</span>&nbsp;<span class="op" id="6943657">:=</span>&nbsp;<span class="ident" id="6943660"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6943674">(</span><span class="ident" id="6943675"><a href="/net/udp_test.go.html#6943596">net</a></span><span class="op" id="6943678">,</span>&nbsp;<span class="ident" id="6943680"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943682">.</span><span class="ident" id="6943683">litAddrOrName</span><span class="op" id="6943696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943700">if</span>&nbsp;<span class="ident" id="6943703"><a href="/net/udp_test.go.html#6943653">err</a></span>&nbsp;<span class="op" id="6943707">!=</span>&nbsp;<span class="ident" id="6943710"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943712">.</span><span class="ident" id="6943713">err</span>&nbsp;<span class="op" id="6943717">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943722"><a href="/net/udp_test.go.html#6943536">t</a></span><span class="op" id="6943723">.</span><span class="ident" id="6943724">Fatalf</span><span class="op" id="6943730">(</span><span class="string" id="6943731">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6943766">,</span>&nbsp;<span class="ident" id="6943768"><a href="/net/udp_test.go.html#6943596">net</a></span><span class="op" id="6943771">,</span>&nbsp;<span class="ident" id="6943773"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943775">.</span><span class="ident" id="6943776">litAddrOrName</span><span class="op" id="6943789">,</span>&nbsp;<span class="ident" id="6943791"><a href="/net/udp_test.go.html#6943653">err</a></span><span class="op" id="6943794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943802">if</span>&nbsp;<span class="op" id="6943805">!</span><span class="ident" id="6943806"><a href="/net/udp_test.go.html#6943458">reflect</a></span><span class="op" id="6943813">.</span><span class="ident" id="6943814">DeepEqual</span><span class="op" id="6943823">(</span><span class="ident" id="6943824"><a href="/net/udp_test.go.html#6943647">addr</a></span><span class="op" id="6943828">,</span>&nbsp;<span class="op" id="6943830">(</span><span class="op" id="6943831">*</span><span class="ident" id="6943832"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6943839">)</span><span class="op" id="6943840">(</span><span class="ident" id="6943841"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943843">.</span><span class="ident" id="6943844">addr</span><span class="op" id="6943848">)</span><span class="op" id="6943849">)</span>&nbsp;<span class="op" id="6943851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943856"><a href="/net/udp_test.go.html#6943536">t</a></span><span class="op" id="6943857">.</span><span class="ident" id="6943858">Fatalf</span><span class="op" id="6943864">(</span><span class="string" id="6943865">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;=&nbsp;%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="6943905">,</span>&nbsp;<span class="ident" id="6943907"><a href="/net/udp_test.go.html#6943596">net</a></span><span class="op" id="6943910">,</span>&nbsp;<span class="ident" id="6943912"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943914">.</span><span class="ident" id="6943915">litAddrOrName</span><span class="op" id="6943928">,</span>&nbsp;<span class="ident" id="6943930"><a href="/net/udp_test.go.html#6943647">addr</a></span><span class="op" id="6943934">,</span>&nbsp;<span class="ident" id="6943936"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6943938">.</span><span class="ident" id="6943939">addr</span><span class="op" id="6943943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6943947">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6943951">if</span>&nbsp;<span class="ident" id="6943954"><a href="/net/udp_test.go.html#6943653">err</a></span>&nbsp;<span class="op" id="6943958">==</span>&nbsp;<span class="ident" id="6943961">nil</span>&nbsp;<span class="op" id="6943965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943970">str</span>&nbsp;<span class="op" id="6943974">:=</span>&nbsp;<span class="ident" id="6943977"><a href="/net/udp_test.go.html#6943647">addr</a></span><span class="op" id="6943981">.</span><span class="ident" id="6943982">String</span><span class="op" id="6943988">(</span><span class="op" id="6943989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6943994">addr1</span><span class="op" id="6943999">,</span>&nbsp;<span class="ident" id="6944001">err</span>&nbsp;<span class="op" id="6944005">:=</span>&nbsp;<span class="ident" id="6944008"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6944022">(</span><span class="ident" id="6944023"><a href="/net/udp_test.go.html#6943596">net</a></span><span class="op" id="6944026">,</span>&nbsp;<span class="ident" id="6944028"><a href="/net/udp_test.go.html#6943970">str</a></span><span class="op" id="6944031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944036">if</span>&nbsp;<span class="ident" id="6944039"><a href="/net/udp_test.go.html#6944001">err</a></span>&nbsp;<span class="op" id="6944043">!=</span>&nbsp;<span class="ident" id="6944046">nil</span>&nbsp;<span class="op" id="6944050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944056"><a href="/net/udp_test.go.html#6943536">t</a></span><span class="op" id="6944057">.</span><span class="ident" id="6944058">Fatalf</span><span class="op" id="6944064">(</span><span class="string" id="6944065">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;[from&nbsp;%q]:&nbsp;%v&#34;</span><span class="op" id="6944103">,</span>&nbsp;<span class="ident" id="6944105"><a href="/net/udp_test.go.html#6943596">net</a></span><span class="op" id="6944108">,</span>&nbsp;<span class="ident" id="6944110"><a href="/net/udp_test.go.html#6943970">str</a></span><span class="op" id="6944113">,</span>&nbsp;<span class="ident" id="6944115"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6944117">.</span><span class="ident" id="6944118">litAddrOrName</span><span class="op" id="6944131">,</span>&nbsp;<span class="ident" id="6944133"><a href="/net/udp_test.go.html#6944001">err</a></span><span class="op" id="6944136">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944146">if</span>&nbsp;<span class="op" id="6944149">!</span><span class="ident" id="6944150"><a href="/net/udp_test.go.html#6943458">reflect</a></span><span class="op" id="6944157">.</span><span class="ident" id="6944158">DeepEqual</span><span class="op" id="6944167">(</span><span class="ident" id="6944168"><a href="/net/udp_test.go.html#6943994">addr1</a></span><span class="op" id="6944173">,</span>&nbsp;<span class="ident" id="6944175"><a href="/net/udp_test.go.html#6943647">addr</a></span><span class="op" id="6944179">)</span>&nbsp;<span class="op" id="6944181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944187"><a href="/net/udp_test.go.html#6943536">t</a></span><span class="op" id="6944188">.</span><span class="ident" id="6944189">Fatalf</span><span class="op" id="6944195">(</span><span class="string" id="6944196">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;[from&nbsp;%q]&nbsp;=&nbsp;%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="6944246">,</span>&nbsp;<span class="ident" id="6944248"><a href="/net/udp_test.go.html#6943596">net</a></span><span class="op" id="6944251">,</span>&nbsp;<span class="ident" id="6944253"><a href="/net/udp_test.go.html#6943970">str</a></span><span class="op" id="6944256">,</span>&nbsp;<span class="ident" id="6944258"><a href="/net/udp_test.go.html#6943560">tt</a></span><span class="op" id="6944260">.</span><span class="ident" id="6944261">litAddrOrName</span><span class="op" id="6944274">,</span>&nbsp;<span class="ident" id="6944276"><a href="/net/udp_test.go.html#6943994">addr1</a></span><span class="op" id="6944281">,</span>&nbsp;<span class="ident" id="6944283"><a href="/net/udp_test.go.html#6943647">addr</a></span><span class="op" id="6944287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944296">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944299">}</span><br>
<span class="lineno"></span><span class="op" id="6944301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944304">func</span>&nbsp;<span class="ident" id="6944309">TestReadFromUDP</span><span class="op" id="6944324">(</span><span class="ident" id="6944325">t</span>&nbsp;<span class="op" id="6944327">*</span><span class="ident" id="6944328"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6944335">.</span><span class="ident" id="6944336">T</span><span class="op" id="6944337">)</span>&nbsp;<span class="op" id="6944339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944342">switch</span>&nbsp;<span class="ident" id="6944349"><a href="/net/udp_test.go.html#6943469">runtime</a></span><span class="op" id="6944356">.</span><span class="ident" id="6944357">GOOS</span>&nbsp;<span class="op" id="6944362">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944365">case</span>&nbsp;<span class="string" id="6944370">&#34;nacl&#34;</span><span class="op" id="6944376">,</span>&nbsp;<span class="string" id="6944378">&#34;plan9&#34;</span><span class="op" id="6944385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944389"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944390">.</span><span class="ident" id="6944391">Skipf</span><span class="op" id="6944396">(</span><span class="string" id="6944397">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q,&nbsp;see&nbsp;issue&nbsp;8916&#34;</span><span class="op" id="6944434">,</span>&nbsp;<span class="ident" id="6944436"><a href="/net/udp_test.go.html#6943469">runtime</a></span><span class="op" id="6944443">.</span><span class="ident" id="6944444">GOOS</span><span class="op" id="6944448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944455">ra</span><span class="op" id="6944457">,</span>&nbsp;<span class="ident" id="6944459">err</span>&nbsp;<span class="op" id="6944463">:=</span>&nbsp;<span class="ident" id="6944466"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6944480">(</span><span class="string" id="6944481">&#34;udp&#34;</span><span class="op" id="6944486">,</span>&nbsp;<span class="string" id="6944488">&#34;127.0.0.1:7&#34;</span><span class="op" id="6944501">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944504">if</span>&nbsp;<span class="ident" id="6944507"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944511">!=</span>&nbsp;<span class="ident" id="6944514">nil</span>&nbsp;<span class="op" id="6944518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944522"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944523">.</span><span class="ident" id="6944524">Fatal</span><span class="op" id="6944529">(</span><span class="ident" id="6944530"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6944533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944540">la</span><span class="op" id="6944542">,</span>&nbsp;<span class="ident" id="6944544"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944548">:=</span>&nbsp;<span class="ident" id="6944551"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6944565">(</span><span class="string" id="6944566">&#34;udp&#34;</span><span class="op" id="6944571">,</span>&nbsp;<span class="string" id="6944573">&#34;127.0.0.1:0&#34;</span><span class="op" id="6944586">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944589">if</span>&nbsp;<span class="ident" id="6944592"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944596">!=</span>&nbsp;<span class="ident" id="6944599">nil</span>&nbsp;<span class="op" id="6944603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944607"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944608">.</span><span class="ident" id="6944609">Fatal</span><span class="op" id="6944614">(</span><span class="ident" id="6944615"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6944618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944625">c</span><span class="op" id="6944626">,</span>&nbsp;<span class="ident" id="6944628"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944632">:=</span>&nbsp;<span class="ident" id="6944635"><a href="/net/udpsock_posix.go.html#2710994">ListenUDP</a></span><span class="op" id="6944644">(</span><span class="string" id="6944645">&#34;udp&#34;</span><span class="op" id="6944650">,</span>&nbsp;<span class="ident" id="6944652"><a href="/net/udp_test.go.html#6944540">la</a></span><span class="op" id="6944654">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944657">if</span>&nbsp;<span class="ident" id="6944660"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944664">!=</span>&nbsp;<span class="ident" id="6944667">nil</span>&nbsp;<span class="op" id="6944671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944675"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944676">.</span><span class="ident" id="6944677">Fatal</span><span class="op" id="6944682">(</span><span class="ident" id="6944683"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6944686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944692">defer</span>&nbsp;<span class="ident" id="6944698"><a href="/net/udp_test.go.html#6944625">c</a></span><span class="op" id="6944699">.</span><span class="ident" id="6944700">Close</span><span class="op" id="6944705">(</span><span class="op" id="6944706">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944710">_</span><span class="op" id="6944711">,</span>&nbsp;<span class="ident" id="6944713"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944717">=</span>&nbsp;<span class="ident" id="6944719"><a href="/net/udp_test.go.html#6944625">c</a></span><span class="op" id="6944720">.</span><span class="ident" id="6944721">WriteToUDP</span><span class="op" id="6944731">(</span><span class="op" id="6944732">[</span><span class="op" id="6944733">]</span><span class="builtintype" id="6944734">byte</span><span class="op" id="6944738">(</span><span class="string" id="6944739">&#34;a&#34;</span><span class="op" id="6944742">)</span><span class="op" id="6944743">,</span>&nbsp;<span class="ident" id="6944745"><a href="/net/udp_test.go.html#6944455">ra</a></span><span class="op" id="6944747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944750">if</span>&nbsp;<span class="ident" id="6944753"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944757">!=</span>&nbsp;<span class="ident" id="6944760">nil</span>&nbsp;<span class="op" id="6944764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944768"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944769">.</span><span class="ident" id="6944770">Fatal</span><span class="op" id="6944775">(</span><span class="ident" id="6944776"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6944779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944786"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944790">=</span>&nbsp;<span class="ident" id="6944792"><a href="/net/udp_test.go.html#6944625">c</a></span><span class="op" id="6944793">.</span><span class="ident" id="6944794">SetDeadline</span><span class="op" id="6944805">(</span><span class="ident" id="6944806"><a href="/net/udp_test.go.html#6943502">time</a></span><span class="op" id="6944810">.</span><span class="ident" id="6944811">Now</span><span class="op" id="6944814">(</span><span class="op" id="6944815">)</span><span class="op" id="6944816">.</span><span class="ident" id="6944817">Add</span><span class="op" id="6944820">(</span><span class="num" id="6944821">100</span>&nbsp;<span class="op" id="6944825">*</span>&nbsp;<span class="ident" id="6944827"><a href="/net/udp_test.go.html#6943502">time</a></span><span class="op" id="6944831">.</span><span class="ident" id="6944832">Millisecond</span><span class="op" id="6944843">)</span><span class="op" id="6944844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944847">if</span>&nbsp;<span class="ident" id="6944850"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944854">!=</span>&nbsp;<span class="ident" id="6944857">nil</span>&nbsp;<span class="op" id="6944861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944865"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944866">.</span><span class="ident" id="6944867">Fatal</span><span class="op" id="6944872">(</span><span class="ident" id="6944873"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6944876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944882">b</span>&nbsp;<span class="op" id="6944884">:=</span>&nbsp;<span class="builtinfunc" id="6944887">make</span><span class="op" id="6944891">(</span><span class="op" id="6944892">[</span><span class="op" id="6944893">]</span><span class="builtintype" id="6944894">byte</span><span class="op" id="6944898">,</span>&nbsp;<span class="num" id="6944900">1</span><span class="op" id="6944901">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944904">_</span><span class="op" id="6944905">,</span>&nbsp;<span class="ident" id="6944907">_</span><span class="op" id="6944908">,</span>&nbsp;<span class="ident" id="6944910"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944914">=</span>&nbsp;<span class="ident" id="6944916"><a href="/net/udp_test.go.html#6944625">c</a></span><span class="op" id="6944917">.</span><span class="ident" id="6944918">ReadFromUDP</span><span class="op" id="6944929">(</span><span class="ident" id="6944930"><a href="/net/udp_test.go.html#6944882">b</a></span><span class="op" id="6944931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944934">if</span>&nbsp;<span class="ident" id="6944937"><a href="/net/udp_test.go.html#6944459">err</a></span>&nbsp;<span class="op" id="6944941">==</span>&nbsp;<span class="ident" id="6944944">nil</span>&nbsp;<span class="op" id="6944948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944952"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6944953">.</span><span class="ident" id="6944954">Fatal</span><span class="op" id="6944959">(</span><span class="string" id="6944960">&#34;ReadFromUDP&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6944985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944988">}</span>&nbsp;<span class="keyword" id="6944990">else</span>&nbsp;<span class="keyword" id="6944995">if</span>&nbsp;<span class="op" id="6944998">!</span><span class="ident" id="6944999"><a href="/net/timeout_test.go.html#6926301">isTimeout</a></span><span class="op" id="6945008">(</span><span class="ident" id="6945009"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6945012">)</span>&nbsp;<span class="op" id="6945014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945018"><a href="/net/udp_test.go.html#6944325">t</a></span><span class="op" id="6945019">.</span><span class="ident" id="6945020">Fatal</span><span class="op" id="6945025">(</span><span class="ident" id="6945026"><a href="/net/udp_test.go.html#6944459">err</a></span><span class="op" id="6945029">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945032">}</span><br>
<span class="lineno"></span><span class="op" id="6945034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945037">func</span>&nbsp;<span class="ident" id="6945042">TestWriteToUDP</span><span class="op" id="6945056">(</span><span class="ident" id="6945057">t</span>&nbsp;<span class="op" id="6945059">*</span><span class="ident" id="6945060"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6945067">.</span><span class="ident" id="6945068">T</span><span class="op" id="6945069">)</span>&nbsp;<span class="op" id="6945071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945074">switch</span>&nbsp;<span class="ident" id="6945081"><a href="/net/udp_test.go.html#6943469">runtime</a></span><span class="op" id="6945088">.</span><span class="ident" id="6945089">GOOS</span>&nbsp;<span class="op" id="6945094">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945097">case</span>&nbsp;<span class="string" id="6945102">&#34;plan9&#34;</span><span class="op" id="6945109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945113"><a href="/net/udp_test.go.html#6945057">t</a></span><span class="op" id="6945114">.</span><span class="ident" id="6945115">Skipf</span><span class="op" id="6945120">(</span><span class="string" id="6945121">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6945142">,</span>&nbsp;<span class="ident" id="6945144"><a href="/net/udp_test.go.html#6943469">runtime</a></span><span class="op" id="6945151">.</span><span class="ident" id="6945152">GOOS</span><span class="op" id="6945156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945163">l</span><span class="op" id="6945164">,</span>&nbsp;<span class="ident" id="6945166">err</span>&nbsp;<span class="op" id="6945170">:=</span>&nbsp;<span class="ident" id="6945173"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6945185">(</span><span class="string" id="6945186">&#34;udp&#34;</span><span class="op" id="6945191">,</span>&nbsp;<span class="string" id="6945193">&#34;127.0.0.1:0&#34;</span><span class="op" id="6945206">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945209">if</span>&nbsp;<span class="ident" id="6945212"><a href="/net/udp_test.go.html#6945166">err</a></span>&nbsp;<span class="op" id="6945216">!=</span>&nbsp;<span class="ident" id="6945219">nil</span>&nbsp;<span class="op" id="6945223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945227"><a href="/net/udp_test.go.html#6945057">t</a></span><span class="op" id="6945228">.</span><span class="ident" id="6945229">Fatalf</span><span class="op" id="6945235">(</span><span class="string" id="6945236">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6945255">,</span>&nbsp;<span class="ident" id="6945257"><a href="/net/udp_test.go.html#6945166">err</a></span><span class="op" id="6945260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945266">defer</span>&nbsp;<span class="ident" id="6945272"><a href="/net/udp_test.go.html#6945163">l</a></span><span class="op" id="6945273">.</span><span class="ident" id="6945274">Close</span><span class="op" id="6945279">(</span><span class="op" id="6945280">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945284"><a href="/net/udp_test.go.html#6945385">testWriteToConn</a></span><span class="op" id="6945299">(</span><span class="ident" id="6945300"><a href="/net/udp_test.go.html#6945057">t</a></span><span class="op" id="6945301">,</span>&nbsp;<span class="ident" id="6945303"><a href="/net/udp_test.go.html#6945163">l</a></span><span class="op" id="6945304">.</span><span class="ident" id="6945305">LocalAddr</span><span class="op" id="6945314">(</span><span class="op" id="6945315">)</span><span class="op" id="6945316">.</span><span class="ident" id="6945317">String</span><span class="op" id="6945323">(</span><span class="op" id="6945324">)</span><span class="op" id="6945325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945328"><a href="/net/udp_test.go.html#6946301">testWriteToPacketConn</a></span><span class="op" id="6945349">(</span><span class="ident" id="6945350"><a href="/net/udp_test.go.html#6945057">t</a></span><span class="op" id="6945351">,</span>&nbsp;<span class="ident" id="6945353"><a href="/net/udp_test.go.html#6945163">l</a></span><span class="op" id="6945354">.</span><span class="ident" id="6945355">LocalAddr</span><span class="op" id="6945364">(</span><span class="op" id="6945365">)</span><span class="op" id="6945366">.</span><span class="ident" id="6945367">String</span><span class="op" id="6945373">(</span><span class="op" id="6945374">)</span><span class="op" id="6945375">)</span><br>
<span class="lineno"></span><span class="op" id="6945377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945380">func</span>&nbsp;<span class="ident" id="6945385">testWriteToConn</span><span class="op" id="6945400">(</span><span class="ident" id="6945401">t</span>&nbsp;<span class="op" id="6945403">*</span><span class="ident" id="6945404"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6945411">.</span><span class="ident" id="6945412">T</span><span class="op" id="6945413">,</span>&nbsp;<span class="ident" id="6945415">raddr</span>&nbsp;<span class="builtintype" id="6945421">string</span><span class="op" id="6945427">)</span>&nbsp;<span class="op" id="6945429">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945432">c</span><span class="op" id="6945433">,</span>&nbsp;<span class="ident" id="6945435">err</span>&nbsp;<span class="op" id="6945439">:=</span>&nbsp;<span class="ident" id="6945442"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6945446">(</span><span class="string" id="6945447">&#34;udp&#34;</span><span class="op" id="6945452">,</span>&nbsp;<span class="ident" id="6945454"><a href="/net/udp_test.go.html#6945415">raddr</a></span><span class="op" id="6945459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945462">if</span>&nbsp;<span class="ident" id="6945465"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945469">!=</span>&nbsp;<span class="ident" id="6945472">nil</span>&nbsp;<span class="op" id="6945476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945480"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6945481">.</span><span class="ident" id="6945482">Fatalf</span><span class="op" id="6945488">(</span><span class="string" id="6945489">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6945506">,</span>&nbsp;<span class="ident" id="6945508"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6945511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945517">defer</span>&nbsp;<span class="ident" id="6945523"><a href="/net/udp_test.go.html#6945432">c</a></span><span class="op" id="6945524">.</span><span class="ident" id="6945525">Close</span><span class="op" id="6945530">(</span><span class="op" id="6945531">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945535">ra</span><span class="op" id="6945537">,</span>&nbsp;<span class="ident" id="6945539"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945543">:=</span>&nbsp;<span class="ident" id="6945546"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6945560">(</span><span class="string" id="6945561">&#34;udp&#34;</span><span class="op" id="6945566">,</span>&nbsp;<span class="ident" id="6945568"><a href="/net/udp_test.go.html#6945415">raddr</a></span><span class="op" id="6945573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945576">if</span>&nbsp;<span class="ident" id="6945579"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945583">!=</span>&nbsp;<span class="ident" id="6945586">nil</span>&nbsp;<span class="op" id="6945590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945594"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6945595">.</span><span class="ident" id="6945596">Fatalf</span><span class="op" id="6945602">(</span><span class="string" id="6945603">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6945630">,</span>&nbsp;<span class="ident" id="6945632"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6945635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945638">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945642">_</span><span class="op" id="6945643">,</span>&nbsp;<span class="ident" id="6945645"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945649">=</span>&nbsp;<span class="ident" id="6945651"><a href="/net/udp_test.go.html#6945432">c</a></span><span class="op" id="6945652">.</span><span class="op" id="6945653">(</span><span class="op" id="6945654">*</span><span class="ident" id="6945655"><a href="/net/udpsock_posix.go.html#2706235">UDPConn</a></span><span class="op" id="6945662">)</span><span class="op" id="6945663">.</span><span class="ident" id="6945664">WriteToUDP</span><span class="op" id="6945674">(</span><span class="op" id="6945675">[</span><span class="op" id="6945676">]</span><span class="builtintype" id="6945677">byte</span><span class="op" id="6945681">(</span><span class="string" id="6945682">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6945715">)</span><span class="op" id="6945716">,</span>&nbsp;<span class="ident" id="6945718"><a href="/net/udp_test.go.html#6945535">ra</a></span><span class="op" id="6945720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945723">if</span>&nbsp;<span class="ident" id="6945726"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945730">==</span>&nbsp;<span class="ident" id="6945733">nil</span>&nbsp;<span class="op" id="6945737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945741"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6945742">.</span><span class="ident" id="6945743">Fatal</span><span class="op" id="6945748">(</span><span class="string" id="6945749">&#34;WriteToUDP&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6945773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945776">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945779">if</span>&nbsp;<span class="ident" id="6945782"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945786">!=</span>&nbsp;<span class="ident" id="6945789">nil</span>&nbsp;<span class="op" id="6945793">&amp;&amp;</span>&nbsp;<span class="ident" id="6945796"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6945799">.</span><span class="op" id="6945800">(</span><span class="op" id="6945801">*</span><span class="ident" id="6945802"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="6945809">)</span><span class="op" id="6945810">.</span><span class="ident" id="6945811">Err</span>&nbsp;<span class="op" id="6945815">!=</span>&nbsp;<span class="ident" id="6945818"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="6945838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945842"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6945843">.</span><span class="ident" id="6945844">Fatalf</span><span class="op" id="6945850">(</span><span class="string" id="6945851">&#34;WriteToUDP&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="6945902">,</span>&nbsp;<span class="ident" id="6945904"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6945907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945914">_</span><span class="op" id="6945915">,</span>&nbsp;<span class="ident" id="6945917"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945921">=</span>&nbsp;<span class="ident" id="6945923"><a href="/net/udp_test.go.html#6945432">c</a></span><span class="op" id="6945924">.</span><span class="op" id="6945925">(</span><span class="op" id="6945926">*</span><span class="ident" id="6945927"><a href="/net/udpsock_posix.go.html#2706235">UDPConn</a></span><span class="op" id="6945934">)</span><span class="op" id="6945935">.</span><span class="ident" id="6945936">WriteTo</span><span class="op" id="6945943">(</span><span class="op" id="6945944">[</span><span class="op" id="6945945">]</span><span class="builtintype" id="6945946">byte</span><span class="op" id="6945950">(</span><span class="string" id="6945951">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6945984">)</span><span class="op" id="6945985">,</span>&nbsp;<span class="ident" id="6945987"><a href="/net/udp_test.go.html#6945535">ra</a></span><span class="op" id="6945989">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945992">if</span>&nbsp;<span class="ident" id="6945995"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6945999">==</span>&nbsp;<span class="ident" id="6946002">nil</span>&nbsp;<span class="op" id="6946006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946010"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6946011">.</span><span class="ident" id="6946012">Fatal</span><span class="op" id="6946017">(</span><span class="string" id="6946018">&#34;WriteTo&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6946039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946045">if</span>&nbsp;<span class="ident" id="6946048"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6946052">!=</span>&nbsp;<span class="ident" id="6946055">nil</span>&nbsp;<span class="op" id="6946059">&amp;&amp;</span>&nbsp;<span class="ident" id="6946062"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6946065">.</span><span class="op" id="6946066">(</span><span class="op" id="6946067">*</span><span class="ident" id="6946068"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="6946075">)</span><span class="op" id="6946076">.</span><span class="ident" id="6946077">Err</span>&nbsp;<span class="op" id="6946081">!=</span>&nbsp;<span class="ident" id="6946084"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="6946104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946108"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6946109">.</span><span class="ident" id="6946110">Fatalf</span><span class="op" id="6946116">(</span><span class="string" id="6946117">&#34;WriteTo&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="6946165">,</span>&nbsp;<span class="ident" id="6946167"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6946170">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946177">_</span><span class="op" id="6946178">,</span>&nbsp;<span class="ident" id="6946180"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6946184">=</span>&nbsp;<span class="ident" id="6946186"><a href="/net/udp_test.go.html#6945432">c</a></span><span class="op" id="6946187">.</span><span class="ident" id="6946188">Write</span><span class="op" id="6946193">(</span><span class="op" id="6946194">[</span><span class="op" id="6946195">]</span><span class="builtintype" id="6946196">byte</span><span class="op" id="6946200">(</span><span class="string" id="6946201">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6946234">)</span><span class="op" id="6946235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946238">if</span>&nbsp;<span class="ident" id="6946241"><a href="/net/udp_test.go.html#6945435">err</a></span>&nbsp;<span class="op" id="6946245">!=</span>&nbsp;<span class="ident" id="6946248">nil</span>&nbsp;<span class="op" id="6946252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946256"><a href="/net/udp_test.go.html#6945401">t</a></span><span class="op" id="6946257">.</span><span class="ident" id="6946258">Fatalf</span><span class="op" id="6946264">(</span><span class="string" id="6946265">&#34;Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6946283">,</span>&nbsp;<span class="ident" id="6946285"><a href="/net/udp_test.go.html#6945435">err</a></span><span class="op" id="6946288">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946291">}</span><br>
<span class="lineno"></span><span class="op" id="6946293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6946296">func</span>&nbsp;<span class="ident" id="6946301">testWriteToPacketConn</span><span class="op" id="6946322">(</span><span class="ident" id="6946323">t</span>&nbsp;<span class="op" id="6946325">*</span><span class="ident" id="6946326"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6946333">.</span><span class="ident" id="6946334">T</span><span class="op" id="6946335">,</span>&nbsp;<span class="ident" id="6946337">raddr</span>&nbsp;<span class="builtintype" id="6946343">string</span><span class="op" id="6946349">)</span>&nbsp;<span class="op" id="6946351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946354">c</span><span class="op" id="6946355">,</span>&nbsp;<span class="ident" id="6946357">err</span>&nbsp;<span class="op" id="6946361">:=</span>&nbsp;<span class="ident" id="6946364"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6946376">(</span><span class="string" id="6946377">&#34;udp&#34;</span><span class="op" id="6946382">,</span>&nbsp;<span class="string" id="6946384">&#34;127.0.0.1:0&#34;</span><span class="op" id="6946397">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946400">if</span>&nbsp;<span class="ident" id="6946403"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946407">!=</span>&nbsp;<span class="ident" id="6946410">nil</span>&nbsp;<span class="op" id="6946414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946418"><a href="/net/udp_test.go.html#6946323">t</a></span><span class="op" id="6946419">.</span><span class="ident" id="6946420">Fatalf</span><span class="op" id="6946426">(</span><span class="string" id="6946427">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6946452">,</span>&nbsp;<span class="ident" id="6946454"><a href="/net/udp_test.go.html#6946357">err</a></span><span class="op" id="6946457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946463">defer</span>&nbsp;<span class="ident" id="6946469"><a href="/net/udp_test.go.html#6946354">c</a></span><span class="op" id="6946470">.</span><span class="ident" id="6946471">Close</span><span class="op" id="6946476">(</span><span class="op" id="6946477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946481">ra</span><span class="op" id="6946483">,</span>&nbsp;<span class="ident" id="6946485"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946489">:=</span>&nbsp;<span class="ident" id="6946492"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6946506">(</span><span class="string" id="6946507">&#34;udp&#34;</span><span class="op" id="6946512">,</span>&nbsp;<span class="ident" id="6946514"><a href="/net/udp_test.go.html#6946337">raddr</a></span><span class="op" id="6946519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946522">if</span>&nbsp;<span class="ident" id="6946525"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946529">!=</span>&nbsp;<span class="ident" id="6946532">nil</span>&nbsp;<span class="op" id="6946536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946540"><a href="/net/udp_test.go.html#6946323">t</a></span><span class="op" id="6946541">.</span><span class="ident" id="6946542">Fatalf</span><span class="op" id="6946548">(</span><span class="string" id="6946549">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6946576">,</span>&nbsp;<span class="ident" id="6946578"><a href="/net/udp_test.go.html#6946357">err</a></span><span class="op" id="6946581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946588">_</span><span class="op" id="6946589">,</span>&nbsp;<span class="ident" id="6946591"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946595">=</span>&nbsp;<span class="ident" id="6946597"><a href="/net/udp_test.go.html#6946354">c</a></span><span class="op" id="6946598">.</span><span class="op" id="6946599">(</span><span class="op" id="6946600">*</span><span class="ident" id="6946601"><a href="/net/udpsock_posix.go.html#2706235">UDPConn</a></span><span class="op" id="6946608">)</span><span class="op" id="6946609">.</span><span class="ident" id="6946610">WriteToUDP</span><span class="op" id="6946620">(</span><span class="op" id="6946621">[</span><span class="op" id="6946622">]</span><span class="builtintype" id="6946623">byte</span><span class="op" id="6946627">(</span><span class="string" id="6946628">&#34;Connection-less&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6946657">)</span><span class="op" id="6946658">,</span>&nbsp;<span class="ident" id="6946660"><a href="/net/udp_test.go.html#6946481">ra</a></span><span class="op" id="6946662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946665">if</span>&nbsp;<span class="ident" id="6946668"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946672">!=</span>&nbsp;<span class="ident" id="6946675">nil</span>&nbsp;<span class="op" id="6946679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946683"><a href="/net/udp_test.go.html#6946323">t</a></span><span class="op" id="6946684">.</span><span class="ident" id="6946685">Fatalf</span><span class="op" id="6946691">(</span><span class="string" id="6946692">&#34;WriteToUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6946715">,</span>&nbsp;<span class="ident" id="6946717"><a href="/net/udp_test.go.html#6946357">err</a></span><span class="op" id="6946720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946727">_</span><span class="op" id="6946728">,</span>&nbsp;<span class="ident" id="6946730"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946734">=</span>&nbsp;<span class="ident" id="6946736"><a href="/net/udp_test.go.html#6946354">c</a></span><span class="op" id="6946737">.</span><span class="ident" id="6946738">WriteTo</span><span class="op" id="6946745">(</span><span class="op" id="6946746">[</span><span class="op" id="6946747">]</span><span class="builtintype" id="6946748">byte</span><span class="op" id="6946752">(</span><span class="string" id="6946753">&#34;Connection-less&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6946782">)</span><span class="op" id="6946783">,</span>&nbsp;<span class="ident" id="6946785"><a href="/net/udp_test.go.html#6946481">ra</a></span><span class="op" id="6946787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946790">if</span>&nbsp;<span class="ident" id="6946793"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946797">!=</span>&nbsp;<span class="ident" id="6946800">nil</span>&nbsp;<span class="op" id="6946804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946808"><a href="/net/udp_test.go.html#6946323">t</a></span><span class="op" id="6946809">.</span><span class="ident" id="6946810">Fatalf</span><span class="op" id="6946816">(</span><span class="string" id="6946817">&#34;WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6946837">,</span>&nbsp;<span class="ident" id="6946839"><a href="/net/udp_test.go.html#6946357">err</a></span><span class="op" id="6946842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946849">_</span><span class="op" id="6946850">,</span>&nbsp;<span class="ident" id="6946852"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946856">=</span>&nbsp;<span class="ident" id="6946858"><a href="/net/udp_test.go.html#6946354">c</a></span><span class="op" id="6946859">.</span><span class="op" id="6946860">(</span><span class="op" id="6946861">*</span><span class="ident" id="6946862"><a href="/net/udpsock_posix.go.html#2706235">UDPConn</a></span><span class="op" id="6946869">)</span><span class="op" id="6946870">.</span><span class="ident" id="6946871">Write</span><span class="op" id="6946876">(</span><span class="op" id="6946877">[</span><span class="op" id="6946878">]</span><span class="builtintype" id="6946879">byte</span><span class="op" id="6946883">(</span><span class="string" id="6946884">&#34;Connection-less&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6946913">)</span><span class="op" id="6946914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946917">if</span>&nbsp;<span class="ident" id="6946920"><a href="/net/udp_test.go.html#6946357">err</a></span>&nbsp;<span class="op" id="6946924">==</span>&nbsp;<span class="ident" id="6946927">nil</span>&nbsp;<span class="op" id="6946931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946935"><a href="/net/udp_test.go.html#6946323">t</a></span><span class="op" id="6946936">.</span><span class="ident" id="6946937">Fatal</span><span class="op" id="6946942">(</span><span class="string" id="6946943">&#34;Write&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6946962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946965">}</span><br>
<span class="lineno"></span><span class="op" id="6946967">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="6946970">var</span>&nbsp;<span class="ident" id="6946974">udpConnLocalNameTests</span>&nbsp;<span class="op" id="6946996">=</span>&nbsp;<span class="op" id="6946998">[</span><span class="op" id="6946999">]</span><span class="keyword" id="6947000">struct</span>&nbsp;<span class="op" id="6947007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947010">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6947016">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947024">laddr</span>&nbsp;<span class="op" id="6947030">*</span><span class="ident" id="6947031"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><br>
<span class="lineno"></span><span class="op" id="6947039">}</span><span class="op" id="6947040">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947043">{</span><span class="string" id="6947044">&#34;udp4&#34;</span><span class="op" id="6947050">,</span>&nbsp;<span class="op" id="6947052">&amp;</span><span class="ident" id="6947053"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6947060">{</span><span class="ident" id="6947061">IP</span><span class="op" id="6947063">:</span>&nbsp;<span class="ident" id="6947065"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6947069">(</span><span class="num" id="6947070">127</span><span class="op" id="6947073">,</span>&nbsp;<span class="num" id="6947075">0</span><span class="op" id="6947076">,</span>&nbsp;<span class="num" id="6947078">0</span><span class="op" id="6947079">,</span>&nbsp;<span class="num" id="6947081">1</span><span class="op" id="6947082">)</span><span class="op" id="6947083">}</span><span class="op" id="6947084">}</span><span class="op" id="6947085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947088">{</span><span class="string" id="6947089">&#34;udp4&#34;</span><span class="op" id="6947095">,</span>&nbsp;<span class="op" id="6947097">&amp;</span><span class="ident" id="6947098"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6947105">{</span><span class="op" id="6947106">}</span><span class="op" id="6947107">}</span><span class="op" id="6947108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947111">{</span><span class="string" id="6947112">&#34;udp4&#34;</span><span class="op" id="6947118">,</span>&nbsp;<span class="ident" id="6947120">nil</span><span class="op" id="6947123">}</span><span class="op" id="6947124">,</span><br>
<span class="lineno"></span><span class="op" id="6947126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6947129">func</span>&nbsp;<span class="ident" id="6947134">TestUDPConnLocalName</span><span class="op" id="6947154">(</span><span class="ident" id="6947155">t</span>&nbsp;<span class="op" id="6947157">*</span><span class="ident" id="6947158"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6947165">.</span><span class="ident" id="6947166">T</span><span class="op" id="6947167">)</span>&nbsp;<span class="op" id="6947169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947172">if</span>&nbsp;<span class="ident" id="6947175"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6947182">.</span><span class="ident" id="6947183">Short</span><span class="op" id="6947188">(</span><span class="op" id="6947189">)</span>&nbsp;<span class="op" id="6947191">||</span>&nbsp;<span class="op" id="6947194">!</span><span class="op" id="6947195">*</span><span class="ident" id="6947196"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6947209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947213"><a href="/net/udp_test.go.html#6947155">t</a></span><span class="op" id="6947214">.</span><span class="ident" id="6947215">Skip</span><span class="op" id="6947219">(</span><span class="string" id="6947220">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6947261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947268">for</span>&nbsp;<span class="ident" id="6947272">_</span><span class="op" id="6947273">,</span>&nbsp;<span class="ident" id="6947275">tt</span>&nbsp;<span class="op" id="6947278">:=</span>&nbsp;<span class="keyword" id="6947281">range</span>&nbsp;<span class="ident" id="6947287"><a href="/net/udp_test.go.html#6946974">udpConnLocalNameTests</a></span>&nbsp;<span class="op" id="6947309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947313">c</span><span class="op" id="6947314">,</span>&nbsp;<span class="ident" id="6947316">err</span>&nbsp;<span class="op" id="6947320">:=</span>&nbsp;<span class="ident" id="6947323"><a href="/net/udpsock_posix.go.html#2710994">ListenUDP</a></span><span class="op" id="6947332">(</span><span class="ident" id="6947333"><a href="/net/udp_test.go.html#6947275">tt</a></span><span class="op" id="6947335">.</span><span class="ident" id="6947336">net</span><span class="op" id="6947339">,</span>&nbsp;<span class="ident" id="6947341"><a href="/net/udp_test.go.html#6947275">tt</a></span><span class="op" id="6947343">.</span><span class="ident" id="6947344">laddr</span><span class="op" id="6947349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947353">if</span>&nbsp;<span class="ident" id="6947356"><a href="/net/udp_test.go.html#6947316">err</a></span>&nbsp;<span class="op" id="6947360">!=</span>&nbsp;<span class="ident" id="6947363">nil</span>&nbsp;<span class="op" id="6947367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947372"><a href="/net/udp_test.go.html#6947155">t</a></span><span class="op" id="6947373">.</span><span class="ident" id="6947374">Fatalf</span><span class="op" id="6947380">(</span><span class="string" id="6947381">&#34;ListenUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6947403">,</span>&nbsp;<span class="ident" id="6947405"><a href="/net/udp_test.go.html#6947316">err</a></span><span class="op" id="6947408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947412">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947416">defer</span>&nbsp;<span class="ident" id="6947422"><a href="/net/udp_test.go.html#6947313">c</a></span><span class="op" id="6947423">.</span><span class="ident" id="6947424">Close</span><span class="op" id="6947429">(</span><span class="op" id="6947430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947434">la</span>&nbsp;<span class="op" id="6947437">:=</span>&nbsp;<span class="ident" id="6947440"><a href="/net/udp_test.go.html#6947313">c</a></span><span class="op" id="6947441">.</span><span class="ident" id="6947442">LocalAddr</span><span class="op" id="6947451">(</span><span class="op" id="6947452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947456">if</span>&nbsp;<span class="ident" id="6947459">a</span><span class="op" id="6947460">,</span>&nbsp;<span class="ident" id="6947462">ok</span>&nbsp;<span class="op" id="6947465">:=</span>&nbsp;<span class="ident" id="6947468"><a href="/net/udp_test.go.html#6947434">la</a></span><span class="op" id="6947470">.</span><span class="op" id="6947471">(</span><span class="op" id="6947472">*</span><span class="ident" id="6947473"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6947480">)</span><span class="op" id="6947481">;</span>&nbsp;<span class="op" id="6947483">!</span><span class="ident" id="6947484"><a href="/net/udp_test.go.html#6947462">ok</a></span>&nbsp;<span class="op" id="6947487">||</span>&nbsp;<span class="ident" id="6947490"><a href="/net/udp_test.go.html#6947459">a</a></span><span class="op" id="6947491">.</span><span class="ident" id="6947492">Port</span>&nbsp;<span class="op" id="6947497">==</span>&nbsp;<span class="num" id="6947500">0</span>&nbsp;<span class="op" id="6947502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947507"><a href="/net/udp_test.go.html#6947155">t</a></span><span class="op" id="6947508">.</span><span class="ident" id="6947509">Fatalf</span><span class="op" id="6947515">(</span><span class="string" id="6947516">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="6947577">,</span>&nbsp;<span class="ident" id="6947579"><a href="/net/udp_test.go.html#6947434">la</a></span><span class="op" id="6947581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947585">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947588">}</span><br>
<span class="lineno"></span><span class="op" id="6947590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6947593">func</span>&nbsp;<span class="ident" id="6947598">TestUDPConnLocalAndRemoteNames</span><span class="op" id="6947628">(</span><span class="ident" id="6947629">t</span>&nbsp;<span class="op" id="6947631">*</span><span class="ident" id="6947632"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6947639">.</span><span class="ident" id="6947640">T</span><span class="op" id="6947641">)</span>&nbsp;<span class="op" id="6947643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947646">for</span>&nbsp;<span class="ident" id="6947650">_</span><span class="op" id="6947651">,</span>&nbsp;<span class="ident" id="6947653">laddr</span>&nbsp;<span class="op" id="6947659">:=</span>&nbsp;<span class="keyword" id="6947662">range</span>&nbsp;<span class="op" id="6947668">[</span><span class="op" id="6947669">]</span><span class="builtintype" id="6947670">string</span><span class="op" id="6947676">{</span><span class="string" id="6947677">&#34;&#34;</span><span class="op" id="6947679">,</span>&nbsp;<span class="string" id="6947681">&#34;127.0.0.1:0&#34;</span><span class="op" id="6947694">}</span>&nbsp;<span class="op" id="6947696">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947700">c1</span><span class="op" id="6947702">,</span>&nbsp;<span class="ident" id="6947704">err</span>&nbsp;<span class="op" id="6947708">:=</span>&nbsp;<span class="ident" id="6947711"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6947723">(</span><span class="string" id="6947724">&#34;udp&#34;</span><span class="op" id="6947729">,</span>&nbsp;<span class="string" id="6947731">&#34;127.0.0.1:0&#34;</span><span class="op" id="6947744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947748">if</span>&nbsp;<span class="ident" id="6947751"><a href="/net/udp_test.go.html#6947704">err</a></span>&nbsp;<span class="op" id="6947755">!=</span>&nbsp;<span class="ident" id="6947758">nil</span>&nbsp;<span class="op" id="6947762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947767"><a href="/net/udp_test.go.html#6947629">t</a></span><span class="op" id="6947768">.</span><span class="ident" id="6947769">Fatalf</span><span class="op" id="6947775">(</span><span class="string" id="6947776">&#34;ListenUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6947798">,</span>&nbsp;<span class="ident" id="6947800"><a href="/net/udp_test.go.html#6947704">err</a></span><span class="op" id="6947803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947811">defer</span>&nbsp;<span class="ident" id="6947817"><a href="/net/udp_test.go.html#6947700">c1</a></span><span class="op" id="6947819">.</span><span class="ident" id="6947820">Close</span><span class="op" id="6947825">(</span><span class="op" id="6947826">)</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947831">var</span>&nbsp;<span class="ident" id="6947835">la</span>&nbsp;<span class="op" id="6947838">*</span><span class="ident" id="6947839"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947849">if</span>&nbsp;<span class="ident" id="6947852"><a href="/net/udp_test.go.html#6947653">laddr</a></span>&nbsp;<span class="op" id="6947858">!=</span>&nbsp;<span class="string" id="6947861">&#34;&#34;</span>&nbsp;<span class="op" id="6947864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947869">var</span>&nbsp;<span class="ident" id="6947873">err</span>&nbsp;<span class="builtintype" id="6947877">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947886">if</span>&nbsp;<span class="ident" id="6947889"><a href="/net/udp_test.go.html#6947835">la</a></span><span class="op" id="6947891">,</span>&nbsp;<span class="ident" id="6947893"><a href="/net/udp_test.go.html#6947873">err</a></span>&nbsp;<span class="op" id="6947897">=</span>&nbsp;<span class="ident" id="6947899"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6947913">(</span><span class="string" id="6947914">&#34;udp&#34;</span><span class="op" id="6947919">,</span>&nbsp;<span class="ident" id="6947921"><a href="/net/udp_test.go.html#6947653">laddr</a></span><span class="op" id="6947926">)</span><span class="op" id="6947927">;</span>&nbsp;<span class="ident" id="6947929"><a href="/net/udp_test.go.html#6947873">err</a></span>&nbsp;<span class="op" id="6947933">!=</span>&nbsp;<span class="ident" id="6947936">nil</span>&nbsp;<span class="op" id="6947940">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947946"><a href="/net/udp_test.go.html#6947629">t</a></span><span class="op" id="6947947">.</span><span class="ident" id="6947948">Fatalf</span><span class="op" id="6947954">(</span><span class="string" id="6947955">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6947982">,</span>&nbsp;<span class="ident" id="6947984"><a href="/net/udp_test.go.html#6947873">err</a></span><span class="op" id="6947987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948000">c2</span><span class="op" id="6948002">,</span>&nbsp;<span class="ident" id="6948004"><a href="/net/udp_test.go.html#6947704">err</a></span>&nbsp;<span class="op" id="6948008">:=</span>&nbsp;<span class="ident" id="6948011"><a href="/net/udpsock_posix.go.html#2709919">DialUDP</a></span><span class="op" id="6948018">(</span><span class="string" id="6948019">&#34;udp&#34;</span><span class="op" id="6948024">,</span>&nbsp;<span class="ident" id="6948026"><a href="/net/udp_test.go.html#6947835">la</a></span><span class="op" id="6948028">,</span>&nbsp;<span class="ident" id="6948030"><a href="/net/udp_test.go.html#6947700">c1</a></span><span class="op" id="6948032">.</span><span class="ident" id="6948033">LocalAddr</span><span class="op" id="6948042">(</span><span class="op" id="6948043">)</span><span class="op" id="6948044">.</span><span class="op" id="6948045">(</span><span class="op" id="6948046">*</span><span class="ident" id="6948047"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6948054">)</span><span class="op" id="6948055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948059">if</span>&nbsp;<span class="ident" id="6948062"><a href="/net/udp_test.go.html#6947704">err</a></span>&nbsp;<span class="op" id="6948066">!=</span>&nbsp;<span class="ident" id="6948069">nil</span>&nbsp;<span class="op" id="6948073">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948078"><a href="/net/udp_test.go.html#6947629">t</a></span><span class="op" id="6948079">.</span><span class="ident" id="6948080">Fatalf</span><span class="op" id="6948086">(</span><span class="string" id="6948087">&#34;DialUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6948107">,</span>&nbsp;<span class="ident" id="6948109"><a href="/net/udp_test.go.html#6947704">err</a></span><span class="op" id="6948112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948120">defer</span>&nbsp;<span class="ident" id="6948126"><a href="/net/udp_test.go.html#6948000">c2</a></span><span class="op" id="6948128">.</span><span class="ident" id="6948129">Close</span><span class="op" id="6948134">(</span><span class="op" id="6948135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948140">var</span>&nbsp;<span class="ident" id="6948144">connAddrs</span>&nbsp;<span class="op" id="6948154">=</span>&nbsp;<span class="op" id="6948156">[</span><span class="num" id="6948157">4</span><span class="op" id="6948158">]</span><span class="keyword" id="6948159">struct</span>&nbsp;<span class="op" id="6948166">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948171">got</span>&nbsp;<span class="ident" id="6948175"><a href="/net/net.go.html#2652238">Addr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948183">ok</span>&nbsp;&nbsp;<span class="builtintype" id="6948187">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948194">}</span><span class="op" id="6948195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948200">{</span><span class="ident" id="6948201"><a href="/net/udp_test.go.html#6947700">c1</a></span><span class="op" id="6948203">.</span><span class="ident" id="6948204">LocalAddr</span><span class="op" id="6948213">(</span><span class="op" id="6948214">)</span><span class="op" id="6948215">,</span>&nbsp;<span class="ident" id="6948217">true</span><span class="op" id="6948221">}</span><span class="op" id="6948222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948227">{</span><span class="ident" id="6948228"><a href="/net/udp_test.go.html#6947700">c1</a></span><span class="op" id="6948230">.</span><span class="op" id="6948231">(</span><span class="op" id="6948232">*</span><span class="ident" id="6948233"><a href="/net/udpsock_posix.go.html#2706235">UDPConn</a></span><span class="op" id="6948240">)</span><span class="op" id="6948241">.</span><span class="ident" id="6948242">RemoteAddr</span><span class="op" id="6948252">(</span><span class="op" id="6948253">)</span><span class="op" id="6948254">,</span>&nbsp;<span class="ident" id="6948256">false</span><span class="op" id="6948261">}</span><span class="op" id="6948262">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948267">{</span><span class="ident" id="6948268"><a href="/net/udp_test.go.html#6948000">c2</a></span><span class="op" id="6948270">.</span><span class="ident" id="6948271">LocalAddr</span><span class="op" id="6948280">(</span><span class="op" id="6948281">)</span><span class="op" id="6948282">,</span>&nbsp;<span class="ident" id="6948284">true</span><span class="op" id="6948288">}</span><span class="op" id="6948289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948294">{</span><span class="ident" id="6948295"><a href="/net/udp_test.go.html#6948000">c2</a></span><span class="op" id="6948297">.</span><span class="ident" id="6948298">RemoteAddr</span><span class="op" id="6948308">(</span><span class="op" id="6948309">)</span><span class="op" id="6948310">,</span>&nbsp;<span class="ident" id="6948312">true</span><span class="op" id="6948316">}</span><span class="op" id="6948317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948325">for</span>&nbsp;<span class="ident" id="6948329">_</span><span class="op" id="6948330">,</span>&nbsp;<span class="ident" id="6948332">ca</span>&nbsp;<span class="op" id="6948335">:=</span>&nbsp;<span class="keyword" id="6948338">range</span>&nbsp;<span class="ident" id="6948344"><a href="/net/udp_test.go.html#6948144">connAddrs</a></span>&nbsp;<span class="op" id="6948354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948359">if</span>&nbsp;<span class="ident" id="6948362">a</span><span class="op" id="6948363">,</span>&nbsp;<span class="ident" id="6948365">ok</span>&nbsp;<span class="op" id="6948368">:=</span>&nbsp;<span class="ident" id="6948371"><a href="/net/udp_test.go.html#6948332">ca</a></span><span class="op" id="6948373">.</span><span class="ident" id="6948374">got</span><span class="op" id="6948377">.</span><span class="op" id="6948378">(</span><span class="op" id="6948379">*</span><span class="ident" id="6948380"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6948387">)</span><span class="op" id="6948388">;</span>&nbsp;<span class="ident" id="6948390"><a href="/net/udp_test.go.html#6948365">ok</a></span>&nbsp;<span class="op" id="6948393">!=</span>&nbsp;<span class="ident" id="6948396"><a href="/net/udp_test.go.html#6948332">ca</a></span><span class="op" id="6948398">.</span><span class="ident" id="6948399">ok</span>&nbsp;<span class="op" id="6948402">||</span>&nbsp;<span class="ident" id="6948405"><a href="/net/udp_test.go.html#6948365">ok</a></span>&nbsp;<span class="op" id="6948408">&amp;&amp;</span>&nbsp;<span class="ident" id="6948411"><a href="/net/udp_test.go.html#6948362">a</a></span><span class="op" id="6948412">.</span><span class="ident" id="6948413">Port</span>&nbsp;<span class="op" id="6948418">==</span>&nbsp;<span class="num" id="6948421">0</span>&nbsp;<span class="op" id="6948423">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948429"><a href="/net/udp_test.go.html#6947629">t</a></span><span class="op" id="6948430">.</span><span class="ident" id="6948431">Fatalf</span><span class="op" id="6948437">(</span><span class="string" id="6948438">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="6948499">,</span>&nbsp;<span class="ident" id="6948501"><a href="/net/udp_test.go.html#6948332">ca</a></span><span class="op" id="6948503">.</span><span class="ident" id="6948504">got</span><span class="op" id="6948507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948519">}</span><br>
<span class="lineno"></span><span class="op" id="6948521">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="6948524">func</span>&nbsp;<span class="ident" id="6948529">TestIPv6LinkLocalUnicastUDP</span><span class="op" id="6948556">(</span><span class="ident" id="6948557">t</span>&nbsp;<span class="op" id="6948559">*</span><span class="ident" id="6948560"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6948567">.</span><span class="ident" id="6948568">T</span><span class="op" id="6948569">)</span>&nbsp;<span class="op" id="6948571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948574">if</span>&nbsp;<span class="ident" id="6948577"><a href="/net/udp_test.go.html#6943491">testing</a></span><span class="op" id="6948584">.</span><span class="ident" id="6948585">Short</span><span class="op" id="6948590">(</span><span class="op" id="6948591">)</span>&nbsp;<span class="op" id="6948593">||</span>&nbsp;<span class="op" id="6948596">!</span><span class="op" id="6948597">*</span><span class="ident" id="6948598"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6948611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948615"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6948616">.</span><span class="ident" id="6948617">Skip</span><span class="op" id="6948621">(</span><span class="string" id="6948622">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6948663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948666">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948669">if</span>&nbsp;<span class="op" id="6948672">!</span><span class="ident" id="6948673"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6948686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948690"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6948691">.</span><span class="ident" id="6948692">Skip</span><span class="op" id="6948696">(</span><span class="string" id="6948697">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6948720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948726">ifi</span>&nbsp;<span class="op" id="6948730">:=</span>&nbsp;<span class="ident" id="6948733"><a href="/net/interface_test.go.html#6819206">loopbackInterface</a></span><span class="op" id="6948750">(</span><span class="op" id="6948751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948754">if</span>&nbsp;<span class="ident" id="6948757"><a href="/net/udp_test.go.html#6948726">ifi</a></span>&nbsp;<span class="op" id="6948761">==</span>&nbsp;<span class="ident" id="6948764">nil</span>&nbsp;<span class="op" id="6948768">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948772"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6948773">.</span><span class="ident" id="6948774">Skip</span><span class="op" id="6948778">(</span><span class="string" id="6948779">&#34;loopback&nbsp;interface&nbsp;not&nbsp;found&#34;</span><span class="op" id="6948809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948815">laddr</span>&nbsp;<span class="op" id="6948821">:=</span>&nbsp;<span class="ident" id="6948824"><a href="/net/interface_test.go.html#6819593">ipv6LinkLocalUnicastAddr</a></span><span class="op" id="6948848">(</span><span class="ident" id="6948849"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6948852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948855">if</span>&nbsp;<span class="ident" id="6948858"><a href="/net/udp_test.go.html#6948815">laddr</a></span>&nbsp;<span class="op" id="6948864">==</span>&nbsp;<span class="string" id="6948867">&#34;&#34;</span>&nbsp;<span class="op" id="6948870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948874"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6948875">.</span><span class="ident" id="6948876">Skip</span><span class="op" id="6948880">(</span><span class="string" id="6948881">&#34;ipv6&nbsp;unicast&nbsp;address&nbsp;on&nbsp;loopback&nbsp;not&nbsp;found&#34;</span><span class="op" id="6948925">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948932">type</span>&nbsp;<span class="ident" id="6948937">test</span>&nbsp;<span class="keyword" id="6948942">struct</span>&nbsp;<span class="op" id="6948949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948953">net</span><span class="op" id="6948956">,</span>&nbsp;<span class="ident" id="6948958">addr</span>&nbsp;&nbsp;<span class="builtintype" id="6948964">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948973">nameLookup</span>&nbsp;<span class="builtintype" id="6948984">bool</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948993">var</span>&nbsp;<span class="ident" id="6948997">tests</span>&nbsp;<span class="op" id="6949003">=</span>&nbsp;<span class="op" id="6949005">[</span><span class="op" id="6949006">]</span><span class="ident" id="6949007"><a href="/net/udp_test.go.html#6948937">test</a></span><span class="op" id="6949011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949015">{</span><span class="string" id="6949016">&#34;udp&#34;</span><span class="op" id="6949021">,</span>&nbsp;<span class="string" id="6949023">&#34;[&#34;</span>&nbsp;<span class="op" id="6949027">+</span>&nbsp;<span class="ident" id="6949029"><a href="/net/udp_test.go.html#6948815">laddr</a></span>&nbsp;<span class="op" id="6949035">+</span>&nbsp;<span class="string" id="6949037">&#34;%&#34;</span>&nbsp;<span class="op" id="6949041">+</span>&nbsp;<span class="ident" id="6949043"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6949046">.</span><span class="ident" id="6949047">Name</span>&nbsp;<span class="op" id="6949052">+</span>&nbsp;<span class="string" id="6949054">&#34;]:0&#34;</span><span class="op" id="6949059">,</span>&nbsp;<span class="ident" id="6949061">false</span><span class="op" id="6949066">}</span><span class="op" id="6949067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949071">{</span><span class="string" id="6949072">&#34;udp6&#34;</span><span class="op" id="6949078">,</span>&nbsp;<span class="string" id="6949080">&#34;[&#34;</span>&nbsp;<span class="op" id="6949084">+</span>&nbsp;<span class="ident" id="6949086"><a href="/net/udp_test.go.html#6948815">laddr</a></span>&nbsp;<span class="op" id="6949092">+</span>&nbsp;<span class="string" id="6949094">&#34;%&#34;</span>&nbsp;<span class="op" id="6949098">+</span>&nbsp;<span class="ident" id="6949100"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6949103">.</span><span class="ident" id="6949104">Name</span>&nbsp;<span class="op" id="6949109">+</span>&nbsp;<span class="string" id="6949111">&#34;]:0&#34;</span><span class="op" id="6949116">,</span>&nbsp;<span class="ident" id="6949118">false</span><span class="op" id="6949123">}</span><span class="op" id="6949124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949127">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6949130">//&nbsp;The&nbsp;first&nbsp;udp&nbsp;test&nbsp;fails&nbsp;on&nbsp;DragonFly&nbsp;-&nbsp;see&nbsp;issue&nbsp;7473.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949190">if</span>&nbsp;<span class="ident" id="6949193"><a href="/net/udp_test.go.html#6943469">runtime</a></span><span class="op" id="6949200">.</span><span class="ident" id="6949201">GOOS</span>&nbsp;<span class="op" id="6949206">==</span>&nbsp;<span class="string" id="6949209">&#34;dragonfly&#34;</span>&nbsp;<span class="op" id="6949221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949225"><a href="/net/udp_test.go.html#6948997">tests</a></span>&nbsp;<span class="op" id="6949231">=</span>&nbsp;<span class="ident" id="6949233"><a href="/net/udp_test.go.html#6948997">tests</a></span><span class="op" id="6949238">[</span><span class="num" id="6949239">1</span><span class="op" id="6949240">:</span><span class="op" id="6949241">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949247">switch</span>&nbsp;<span class="ident" id="6949254"><a href="/net/udp_test.go.html#6943469">runtime</a></span><span class="op" id="6949261">.</span><span class="ident" id="6949262">GOOS</span>&nbsp;<span class="op" id="6949267">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949270">case</span>&nbsp;<span class="string" id="6949275">&#34;darwin&#34;</span><span class="op" id="6949283">,</span>&nbsp;<span class="string" id="6949285">&#34;dragonfly&#34;</span><span class="op" id="6949296">,</span>&nbsp;<span class="string" id="6949298">&#34;freebsd&#34;</span><span class="op" id="6949307">,</span>&nbsp;<span class="string" id="6949309">&#34;openbsd&#34;</span><span class="op" id="6949318">,</span>&nbsp;<span class="string" id="6949320">&#34;netbsd&#34;</span><span class="op" id="6949328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949332"><a href="/net/udp_test.go.html#6948997">tests</a></span>&nbsp;<span class="op" id="6949338">=</span>&nbsp;<span class="builtinfunc" id="6949340">append</span><span class="op" id="6949346">(</span><span class="ident" id="6949347"><a href="/net/udp_test.go.html#6948997">tests</a></span><span class="op" id="6949352">,</span>&nbsp;<span class="op" id="6949354">[</span><span class="op" id="6949355">]</span><span class="ident" id="6949356"><a href="/net/udp_test.go.html#6948937">test</a></span><span class="op" id="6949360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949365">{</span><span class="string" id="6949366">&#34;udp&#34;</span><span class="op" id="6949371">,</span>&nbsp;<span class="string" id="6949373">&#34;[localhost%&#34;</span>&nbsp;<span class="op" id="6949387">+</span>&nbsp;<span class="ident" id="6949389"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6949392">.</span><span class="ident" id="6949393">Name</span>&nbsp;<span class="op" id="6949398">+</span>&nbsp;<span class="string" id="6949400">&#34;]:0&#34;</span><span class="op" id="6949405">,</span>&nbsp;<span class="ident" id="6949407">true</span><span class="op" id="6949411">}</span><span class="op" id="6949412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949417">{</span><span class="string" id="6949418">&#34;udp6&#34;</span><span class="op" id="6949424">,</span>&nbsp;<span class="string" id="6949426">&#34;[localhost%&#34;</span>&nbsp;<span class="op" id="6949440">+</span>&nbsp;<span class="ident" id="6949442"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6949445">.</span><span class="ident" id="6949446">Name</span>&nbsp;<span class="op" id="6949451">+</span>&nbsp;<span class="string" id="6949453">&#34;]:0&#34;</span><span class="op" id="6949458">,</span>&nbsp;<span class="ident" id="6949460">true</span><span class="op" id="6949464">}</span><span class="op" id="6949465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949469">}</span><span class="op" id="6949470">...</span><span class="op" id="6949473">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949476">case</span>&nbsp;<span class="string" id="6949481">&#34;linux&#34;</span><span class="op" id="6949488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949492"><a href="/net/udp_test.go.html#6948997">tests</a></span>&nbsp;<span class="op" id="6949498">=</span>&nbsp;<span class="builtinfunc" id="6949500">append</span><span class="op" id="6949506">(</span><span class="ident" id="6949507"><a href="/net/udp_test.go.html#6948997">tests</a></span><span class="op" id="6949512">,</span>&nbsp;<span class="op" id="6949514">[</span><span class="op" id="6949515">]</span><span class="ident" id="6949516"><a href="/net/udp_test.go.html#6948937">test</a></span><span class="op" id="6949520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949525">{</span><span class="string" id="6949526">&#34;udp&#34;</span><span class="op" id="6949531">,</span>&nbsp;<span class="string" id="6949533">&#34;[ip6-localhost%&#34;</span>&nbsp;<span class="op" id="6949551">+</span>&nbsp;<span class="ident" id="6949553"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6949556">.</span><span class="ident" id="6949557">Name</span>&nbsp;<span class="op" id="6949562">+</span>&nbsp;<span class="string" id="6949564">&#34;]:0&#34;</span><span class="op" id="6949569">,</span>&nbsp;<span class="ident" id="6949571">true</span><span class="op" id="6949575">}</span><span class="op" id="6949576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949581">{</span><span class="string" id="6949582">&#34;udp6&#34;</span><span class="op" id="6949588">,</span>&nbsp;<span class="string" id="6949590">&#34;[ip6-localhost%&#34;</span>&nbsp;<span class="op" id="6949608">+</span>&nbsp;<span class="ident" id="6949610"><a href="/net/udp_test.go.html#6948726">ifi</a></span><span class="op" id="6949613">.</span><span class="ident" id="6949614">Name</span>&nbsp;<span class="op" id="6949619">+</span>&nbsp;<span class="string" id="6949621">&#34;]:0&#34;</span><span class="op" id="6949626">,</span>&nbsp;<span class="ident" id="6949628">true</span><span class="op" id="6949632">}</span><span class="op" id="6949633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949637">}</span><span class="op" id="6949638">...</span><span class="op" id="6949641">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949647">for</span>&nbsp;<span class="ident" id="6949651">_</span><span class="op" id="6949652">,</span>&nbsp;<span class="ident" id="6949654">tt</span>&nbsp;<span class="op" id="6949657">:=</span>&nbsp;<span class="keyword" id="6949660">range</span>&nbsp;<span class="ident" id="6949666"><a href="/net/udp_test.go.html#6948997">tests</a></span>&nbsp;<span class="op" id="6949672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949676">c1</span><span class="op" id="6949678">,</span>&nbsp;<span class="ident" id="6949680">err</span>&nbsp;<span class="op" id="6949684">:=</span>&nbsp;<span class="ident" id="6949687"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6949699">(</span><span class="ident" id="6949700"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6949702">.</span><span class="ident" id="6949703">net</span><span class="op" id="6949706">,</span>&nbsp;<span class="ident" id="6949708"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6949710">.</span><span class="ident" id="6949711">addr</span><span class="op" id="6949715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949719">if</span>&nbsp;<span class="ident" id="6949722"><a href="/net/udp_test.go.html#6949680">err</a></span>&nbsp;<span class="op" id="6949726">!=</span>&nbsp;<span class="ident" id="6949729">nil</span>&nbsp;<span class="op" id="6949733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6949738">//&nbsp;It&nbsp;might&nbsp;return&nbsp;&#34;LookupHost&nbsp;returned&nbsp;no</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6949784">//&nbsp;suitable&nbsp;address&#34;&nbsp;error&nbsp;on&nbsp;some&nbsp;platforms.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949833"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6949834">.</span><span class="ident" id="6949835">Logf</span><span class="op" id="6949839">(</span><span class="string" id="6949840">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6949865">,</span>&nbsp;<span class="ident" id="6949867"><a href="/net/udp_test.go.html#6949680">err</a></span><span class="op" id="6949870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949875">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949890">defer</span>&nbsp;<span class="ident" id="6949896"><a href="/net/udp_test.go.html#6949676">c1</a></span><span class="op" id="6949898">.</span><span class="ident" id="6949899">Close</span><span class="op" id="6949904">(</span><span class="op" id="6949905">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949909">if</span>&nbsp;<span class="ident" id="6949912">la</span><span class="op" id="6949914">,</span>&nbsp;<span class="ident" id="6949916">ok</span>&nbsp;<span class="op" id="6949919">:=</span>&nbsp;<span class="ident" id="6949922"><a href="/net/udp_test.go.html#6949676">c1</a></span><span class="op" id="6949924">.</span><span class="ident" id="6949925">LocalAddr</span><span class="op" id="6949934">(</span><span class="op" id="6949935">)</span><span class="op" id="6949936">.</span><span class="op" id="6949937">(</span><span class="op" id="6949938">*</span><span class="ident" id="6949939"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6949946">)</span><span class="op" id="6949947">;</span>&nbsp;<span class="op" id="6949949">!</span><span class="ident" id="6949950"><a href="/net/udp_test.go.html#6949916">ok</a></span>&nbsp;<span class="op" id="6949953">||</span>&nbsp;<span class="op" id="6949956">!</span><span class="ident" id="6949957"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6949959">.</span><span class="ident" id="6949960">nameLookup</span>&nbsp;<span class="op" id="6949971">&amp;&amp;</span>&nbsp;<span class="ident" id="6949974"><a href="/net/udp_test.go.html#6949912">la</a></span><span class="op" id="6949976">.</span><span class="ident" id="6949977">Zone</span>&nbsp;<span class="op" id="6949982">==</span>&nbsp;<span class="string" id="6949985">&#34;&#34;</span>&nbsp;<span class="op" id="6949988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949993"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6949994">.</span><span class="ident" id="6949995">Fatalf</span><span class="op" id="6950001">(</span><span class="string" id="6950002">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="6950058">,</span>&nbsp;<span class="ident" id="6950060"><a href="/net/udp_test.go.html#6949912">la</a></span><span class="op" id="6950062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950071">c2</span><span class="op" id="6950073">,</span>&nbsp;<span class="ident" id="6950075"><a href="/net/udp_test.go.html#6949680">err</a></span>&nbsp;<span class="op" id="6950079">:=</span>&nbsp;<span class="ident" id="6950082"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6950086">(</span><span class="ident" id="6950087"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6950089">.</span><span class="ident" id="6950090">net</span><span class="op" id="6950093">,</span>&nbsp;<span class="ident" id="6950095"><a href="/net/udp_test.go.html#6949676">c1</a></span><span class="op" id="6950097">.</span><span class="ident" id="6950098">LocalAddr</span><span class="op" id="6950107">(</span><span class="op" id="6950108">)</span><span class="op" id="6950109">.</span><span class="ident" id="6950110">String</span><span class="op" id="6950116">(</span><span class="op" id="6950117">)</span><span class="op" id="6950118">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950122">if</span>&nbsp;<span class="ident" id="6950125"><a href="/net/udp_test.go.html#6949680">err</a></span>&nbsp;<span class="op" id="6950129">!=</span>&nbsp;<span class="ident" id="6950132">nil</span>&nbsp;<span class="op" id="6950136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950141"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6950142">.</span><span class="ident" id="6950143">Fatalf</span><span class="op" id="6950149">(</span><span class="string" id="6950150">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6950167">,</span>&nbsp;<span class="ident" id="6950169"><a href="/net/udp_test.go.html#6949680">err</a></span><span class="op" id="6950172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950180">defer</span>&nbsp;<span class="ident" id="6950186"><a href="/net/udp_test.go.html#6950071">c2</a></span><span class="op" id="6950188">.</span><span class="ident" id="6950189">Close</span><span class="op" id="6950194">(</span><span class="op" id="6950195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950199">if</span>&nbsp;<span class="ident" id="6950202">la</span><span class="op" id="6950204">,</span>&nbsp;<span class="ident" id="6950206">ok</span>&nbsp;<span class="op" id="6950209">:=</span>&nbsp;<span class="ident" id="6950212"><a href="/net/udp_test.go.html#6950071">c2</a></span><span class="op" id="6950214">.</span><span class="ident" id="6950215">LocalAddr</span><span class="op" id="6950224">(</span><span class="op" id="6950225">)</span><span class="op" id="6950226">.</span><span class="op" id="6950227">(</span><span class="op" id="6950228">*</span><span class="ident" id="6950229"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6950236">)</span><span class="op" id="6950237">;</span>&nbsp;<span class="op" id="6950239">!</span><span class="ident" id="6950240"><a href="/net/udp_test.go.html#6950206">ok</a></span>&nbsp;<span class="op" id="6950243">||</span>&nbsp;<span class="op" id="6950246">!</span><span class="ident" id="6950247"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6950249">.</span><span class="ident" id="6950250">nameLookup</span>&nbsp;<span class="op" id="6950261">&amp;&amp;</span>&nbsp;<span class="ident" id="6950264"><a href="/net/udp_test.go.html#6950202">la</a></span><span class="op" id="6950266">.</span><span class="ident" id="6950267">Zone</span>&nbsp;<span class="op" id="6950272">==</span>&nbsp;<span class="string" id="6950275">&#34;&#34;</span>&nbsp;<span class="op" id="6950278">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950283"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6950284">.</span><span class="ident" id="6950285">Fatalf</span><span class="op" id="6950291">(</span><span class="string" id="6950292">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="6950348">,</span>&nbsp;<span class="ident" id="6950350"><a href="/net/udp_test.go.html#6950202">la</a></span><span class="op" id="6950352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950360">if</span>&nbsp;<span class="ident" id="6950363">ra</span><span class="op" id="6950365">,</span>&nbsp;<span class="ident" id="6950367">ok</span>&nbsp;<span class="op" id="6950370">:=</span>&nbsp;<span class="ident" id="6950373"><a href="/net/udp_test.go.html#6950071">c2</a></span><span class="op" id="6950375">.</span><span class="ident" id="6950376">RemoteAddr</span><span class="op" id="6950386">(</span><span class="op" id="6950387">)</span><span class="op" id="6950388">.</span><span class="op" id="6950389">(</span><span class="op" id="6950390">*</span><span class="ident" id="6950391"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6950398">)</span><span class="op" id="6950399">;</span>&nbsp;<span class="op" id="6950401">!</span><span class="ident" id="6950402"><a href="/net/udp_test.go.html#6950367">ok</a></span>&nbsp;<span class="op" id="6950405">||</span>&nbsp;<span class="op" id="6950408">!</span><span class="ident" id="6950409"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6950411">.</span><span class="ident" id="6950412">nameLookup</span>&nbsp;<span class="op" id="6950423">&amp;&amp;</span>&nbsp;<span class="ident" id="6950426"><a href="/net/udp_test.go.html#6950363">ra</a></span><span class="op" id="6950428">.</span><span class="ident" id="6950429">Zone</span>&nbsp;<span class="op" id="6950434">==</span>&nbsp;<span class="string" id="6950437">&#34;&#34;</span>&nbsp;<span class="op" id="6950440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950445"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6950446">.</span><span class="ident" id="6950447">Fatalf</span><span class="op" id="6950453">(</span><span class="string" id="6950454">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="6950510">,</span>&nbsp;<span class="ident" id="6950512"><a href="/net/udp_test.go.html#6950363">ra</a></span><span class="op" id="6950514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950518">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950523">if</span>&nbsp;<span class="ident" id="6950526">_</span><span class="op" id="6950527">,</span>&nbsp;<span class="ident" id="6950529">err</span>&nbsp;<span class="op" id="6950533">:=</span>&nbsp;<span class="ident" id="6950536"><a href="/net/udp_test.go.html#6950071">c2</a></span><span class="op" id="6950538">.</span><span class="ident" id="6950539">Write</span><span class="op" id="6950544">(</span><span class="op" id="6950545">[</span><span class="op" id="6950546">]</span><span class="builtintype" id="6950547">byte</span><span class="op" id="6950551">(</span><span class="string" id="6950552">&#34;UDP&nbsp;OVER&nbsp;IPV6&nbsp;LINKLOCAL&nbsp;TEST&#34;</span><span class="op" id="6950582">)</span><span class="op" id="6950583">)</span><span class="op" id="6950584">;</span>&nbsp;<span class="ident" id="6950586"><a href="/net/udp_test.go.html#6950529">err</a></span>&nbsp;<span class="op" id="6950590">!=</span>&nbsp;<span class="ident" id="6950593">nil</span>&nbsp;<span class="op" id="6950597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950602"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6950603">.</span><span class="ident" id="6950604">Fatalf</span><span class="op" id="6950610">(</span><span class="string" id="6950611">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6950634">,</span>&nbsp;<span class="ident" id="6950636"><a href="/net/udp_test.go.html#6950529">err</a></span><span class="op" id="6950639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950647">b</span>&nbsp;<span class="op" id="6950649">:=</span>&nbsp;<span class="builtinfunc" id="6950652">make</span><span class="op" id="6950656">(</span><span class="op" id="6950657">[</span><span class="op" id="6950658">]</span><span class="builtintype" id="6950659">byte</span><span class="op" id="6950663">,</span>&nbsp;<span class="num" id="6950665">32</span><span class="op" id="6950667">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950671">if</span>&nbsp;<span class="ident" id="6950674">_</span><span class="op" id="6950675">,</span>&nbsp;<span class="ident" id="6950677">from</span><span class="op" id="6950681">,</span>&nbsp;<span class="ident" id="6950683">err</span>&nbsp;<span class="op" id="6950687">:=</span>&nbsp;<span class="ident" id="6950690"><a href="/net/udp_test.go.html#6949676">c1</a></span><span class="op" id="6950692">.</span><span class="ident" id="6950693">ReadFrom</span><span class="op" id="6950701">(</span><span class="ident" id="6950702"><a href="/net/udp_test.go.html#6950647">b</a></span><span class="op" id="6950703">)</span><span class="op" id="6950704">;</span>&nbsp;<span class="ident" id="6950706"><a href="/net/udp_test.go.html#6950683">err</a></span>&nbsp;<span class="op" id="6950710">!=</span>&nbsp;<span class="ident" id="6950713">nil</span>&nbsp;<span class="op" id="6950717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950722"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6950723">.</span><span class="ident" id="6950724">Fatalf</span><span class="op" id="6950730">(</span><span class="string" id="6950731">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6950763">,</span>&nbsp;<span class="ident" id="6950765"><a href="/net/udp_test.go.html#6950683">err</a></span><span class="op" id="6950768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950772">}</span>&nbsp;<span class="keyword" id="6950774">else</span>&nbsp;<span class="op" id="6950779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950784">if</span>&nbsp;<span class="ident" id="6950787">ra</span><span class="op" id="6950789">,</span>&nbsp;<span class="ident" id="6950791">ok</span>&nbsp;<span class="op" id="6950794">:=</span>&nbsp;<span class="ident" id="6950797"><a href="/net/udp_test.go.html#6950677">from</a></span><span class="op" id="6950801">.</span><span class="op" id="6950802">(</span><span class="op" id="6950803">*</span><span class="ident" id="6950804"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6950811">)</span><span class="op" id="6950812">;</span>&nbsp;<span class="op" id="6950814">!</span><span class="ident" id="6950815"><a href="/net/udp_test.go.html#6950791">ok</a></span>&nbsp;<span class="op" id="6950818">||</span>&nbsp;<span class="op" id="6950821">!</span><span class="ident" id="6950822"><a href="/net/udp_test.go.html#6949654">tt</a></span><span class="op" id="6950824">.</span><span class="ident" id="6950825">nameLookup</span>&nbsp;<span class="op" id="6950836">&amp;&amp;</span>&nbsp;<span class="ident" id="6950839"><a href="/net/udp_test.go.html#6950787">ra</a></span><span class="op" id="6950841">.</span><span class="ident" id="6950842">Zone</span>&nbsp;<span class="op" id="6950847">==</span>&nbsp;<span class="string" id="6950850">&#34;&#34;</span>&nbsp;<span class="op" id="6950853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950859"><a href="/net/udp_test.go.html#6948557">t</a></span><span class="op" id="6950860">.</span><span class="ident" id="6950861">Fatalf</span><span class="op" id="6950867">(</span><span class="string" id="6950868">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="6950924">,</span>&nbsp;<span class="ident" id="6950926"><a href="/net/udp_test.go.html#6950787">ra</a></span><span class="op" id="6950928">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950940">}</span><br>
<span class="lineno"></span><span class="op" id="6950942">}</span>
</div>
</body>
</html>
