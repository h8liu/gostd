<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6565208">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6565263">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6565317">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6565368">package</span>&nbsp;<span class="ident" id="6565376">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6565381">import</span>&nbsp;<span class="op" id="6565388">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6565391">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6565400">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6565410">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6565420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6565423">var</span>&nbsp;<span class="ident" id="6565427">writeTests</span>&nbsp;<span class="op" id="6565438">=</span>&nbsp;<span class="op" id="6565440">[</span><span class="op" id="6565441">]</span><span class="keyword" id="6565442">struct</span>&nbsp;<span class="op" id="6565449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6565452">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6565460">[</span><span class="op" id="6565461">]</span><span class="op" id="6565462">[</span><span class="op" id="6565463">]</span><span class="builtintype" id="6565464">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6565472">Output</span>&nbsp;&nbsp;<span class="builtintype" id="6565480">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6565488">UseCRLF</span>&nbsp;<span class="builtintype" id="6565496">bool</span><br>
<span class="lineno"></span><span class="op" id="6565501">}</span><span class="op" id="6565502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565505">{</span><span class="ident" id="6565506">Input</span><span class="op" id="6565511">:</span>&nbsp;<span class="op" id="6565513">[</span><span class="op" id="6565514">]</span><span class="op" id="6565515">[</span><span class="op" id="6565516">]</span><span class="builtintype" id="6565517">string</span><span class="op" id="6565523">{</span><span class="op" id="6565524">{</span><span class="string" id="6565525">&#34;abc&#34;</span><span class="op" id="6565530">}</span><span class="op" id="6565531">}</span><span class="op" id="6565532">,</span>&nbsp;<span class="ident" id="6565534">Output</span><span class="op" id="6565540">:</span>&nbsp;<span class="string" id="6565542">&#34;abc\n&#34;</span><span class="op" id="6565549">}</span><span class="op" id="6565550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565553">{</span><span class="ident" id="6565554">Input</span><span class="op" id="6565559">:</span>&nbsp;<span class="op" id="6565561">[</span><span class="op" id="6565562">]</span><span class="op" id="6565563">[</span><span class="op" id="6565564">]</span><span class="builtintype" id="6565565">string</span><span class="op" id="6565571">{</span><span class="op" id="6565572">{</span><span class="string" id="6565573">&#34;abc&#34;</span><span class="op" id="6565578">}</span><span class="op" id="6565579">}</span><span class="op" id="6565580">,</span>&nbsp;<span class="ident" id="6565582">Output</span><span class="op" id="6565588">:</span>&nbsp;<span class="string" id="6565590">&#34;abc\r\n&#34;</span><span class="op" id="6565599">,</span>&nbsp;<span class="ident" id="6565601">UseCRLF</span><span class="op" id="6565608">:</span>&nbsp;<span class="builtintype" id="6565610">true</span><span class="op" id="6565614">}</span><span class="op" id="6565615">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565618">{</span><span class="ident" id="6565619">Input</span><span class="op" id="6565624">:</span>&nbsp;<span class="op" id="6565626">[</span><span class="op" id="6565627">]</span><span class="op" id="6565628">[</span><span class="op" id="6565629">]</span><span class="builtintype" id="6565630">string</span><span class="op" id="6565636">{</span><span class="op" id="6565637">{</span><span class="string" id="6565638">`&#34;abc&#34;`</span><span class="op" id="6565645">}</span><span class="op" id="6565646">}</span><span class="op" id="6565647">,</span>&nbsp;<span class="ident" id="6565649">Output</span><span class="op" id="6565655">:</span>&nbsp;<span class="string" id="6565657">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6565669">+</span>&nbsp;<span class="string" id="6565671">&#34;\n&#34;</span><span class="op" id="6565675">}</span><span class="op" id="6565676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565679">{</span><span class="ident" id="6565680">Input</span><span class="op" id="6565685">:</span>&nbsp;<span class="op" id="6565687">[</span><span class="op" id="6565688">]</span><span class="op" id="6565689">[</span><span class="op" id="6565690">]</span><span class="builtintype" id="6565691">string</span><span class="op" id="6565697">{</span><span class="op" id="6565698">{</span><span class="string" id="6565699">`a&#34;b`</span><span class="op" id="6565704">}</span><span class="op" id="6565705">}</span><span class="op" id="6565706">,</span>&nbsp;<span class="ident" id="6565708">Output</span><span class="op" id="6565714">:</span>&nbsp;<span class="string" id="6565716">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="6565725">+</span>&nbsp;<span class="string" id="6565727">&#34;\n&#34;</span><span class="op" id="6565731">}</span><span class="op" id="6565732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565735">{</span><span class="ident" id="6565736">Input</span><span class="op" id="6565741">:</span>&nbsp;<span class="op" id="6565743">[</span><span class="op" id="6565744">]</span><span class="op" id="6565745">[</span><span class="op" id="6565746">]</span><span class="builtintype" id="6565747">string</span><span class="op" id="6565753">{</span><span class="op" id="6565754">{</span><span class="string" id="6565755">`&#34;a&#34;b&#34;`</span><span class="op" id="6565762">}</span><span class="op" id="6565763">}</span><span class="op" id="6565764">,</span>&nbsp;<span class="ident" id="6565766">Output</span><span class="op" id="6565772">:</span>&nbsp;<span class="string" id="6565774">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6565787">+</span>&nbsp;<span class="string" id="6565789">&#34;\n&#34;</span><span class="op" id="6565793">}</span><span class="op" id="6565794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565797">{</span><span class="ident" id="6565798">Input</span><span class="op" id="6565803">:</span>&nbsp;<span class="op" id="6565805">[</span><span class="op" id="6565806">]</span><span class="op" id="6565807">[</span><span class="op" id="6565808">]</span><span class="builtintype" id="6565809">string</span><span class="op" id="6565815">{</span><span class="op" id="6565816">{</span><span class="string" id="6565817">&#34;&nbsp;abc&#34;</span><span class="op" id="6565823">}</span><span class="op" id="6565824">}</span><span class="op" id="6565825">,</span>&nbsp;<span class="ident" id="6565827">Output</span><span class="op" id="6565833">:</span>&nbsp;<span class="string" id="6565835">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="6565844">+</span>&nbsp;<span class="string" id="6565846">&#34;\n&#34;</span><span class="op" id="6565850">}</span><span class="op" id="6565851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565854">{</span><span class="ident" id="6565855">Input</span><span class="op" id="6565860">:</span>&nbsp;<span class="op" id="6565862">[</span><span class="op" id="6565863">]</span><span class="op" id="6565864">[</span><span class="op" id="6565865">]</span><span class="builtintype" id="6565866">string</span><span class="op" id="6565872">{</span><span class="op" id="6565873">{</span><span class="string" id="6565874">&#34;abc,def&#34;</span><span class="op" id="6565883">}</span><span class="op" id="6565884">}</span><span class="op" id="6565885">,</span>&nbsp;<span class="ident" id="6565887">Output</span><span class="op" id="6565893">:</span>&nbsp;<span class="string" id="6565895">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="6565907">+</span>&nbsp;<span class="string" id="6565909">&#34;\n&#34;</span><span class="op" id="6565913">}</span><span class="op" id="6565914">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565917">{</span><span class="ident" id="6565918">Input</span><span class="op" id="6565923">:</span>&nbsp;<span class="op" id="6565925">[</span><span class="op" id="6565926">]</span><span class="op" id="6565927">[</span><span class="op" id="6565928">]</span><span class="builtintype" id="6565929">string</span><span class="op" id="6565935">{</span><span class="op" id="6565936">{</span><span class="string" id="6565937">&#34;abc&#34;</span><span class="op" id="6565942">,</span>&nbsp;<span class="string" id="6565944">&#34;def&#34;</span><span class="op" id="6565949">}</span><span class="op" id="6565950">}</span><span class="op" id="6565951">,</span>&nbsp;<span class="ident" id="6565953">Output</span><span class="op" id="6565959">:</span>&nbsp;<span class="string" id="6565961">&#34;abc,def\n&#34;</span><span class="op" id="6565972">}</span><span class="op" id="6565973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6565976">{</span><span class="ident" id="6565977">Input</span><span class="op" id="6565982">:</span>&nbsp;<span class="op" id="6565984">[</span><span class="op" id="6565985">]</span><span class="op" id="6565986">[</span><span class="op" id="6565987">]</span><span class="builtintype" id="6565988">string</span><span class="op" id="6565994">{</span><span class="op" id="6565995">{</span><span class="string" id="6565996">&#34;abc&#34;</span><span class="op" id="6566001">}</span><span class="op" id="6566002">,</span>&nbsp;<span class="op" id="6566004">{</span><span class="string" id="6566005">&#34;def&#34;</span><span class="op" id="6566010">}</span><span class="op" id="6566011">}</span><span class="op" id="6566012">,</span>&nbsp;<span class="ident" id="6566014">Output</span><span class="op" id="6566020">:</span>&nbsp;<span class="string" id="6566022">&#34;abc\ndef\n&#34;</span><span class="op" id="6566034">}</span><span class="op" id="6566035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566038">{</span><span class="ident" id="6566039">Input</span><span class="op" id="6566044">:</span>&nbsp;<span class="op" id="6566046">[</span><span class="op" id="6566047">]</span><span class="op" id="6566048">[</span><span class="op" id="6566049">]</span><span class="builtintype" id="6566050">string</span><span class="op" id="6566056">{</span><span class="op" id="6566057">{</span><span class="string" id="6566058">&#34;abc\ndef&#34;</span><span class="op" id="6566068">}</span><span class="op" id="6566069">}</span><span class="op" id="6566070">,</span>&nbsp;<span class="ident" id="6566072">Output</span><span class="op" id="6566078">:</span>&nbsp;<span class="string" id="6566080">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="6566096">}</span><span class="op" id="6566097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566100">{</span><span class="ident" id="6566101">Input</span><span class="op" id="6566106">:</span>&nbsp;<span class="op" id="6566108">[</span><span class="op" id="6566109">]</span><span class="op" id="6566110">[</span><span class="op" id="6566111">]</span><span class="builtintype" id="6566112">string</span><span class="op" id="6566118">{</span><span class="op" id="6566119">{</span><span class="string" id="6566120">&#34;abc\ndef&#34;</span><span class="op" id="6566130">}</span><span class="op" id="6566131">}</span><span class="op" id="6566132">,</span>&nbsp;<span class="ident" id="6566134">Output</span><span class="op" id="6566140">:</span>&nbsp;<span class="string" id="6566142">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="6566162">,</span>&nbsp;<span class="ident" id="6566164">UseCRLF</span><span class="op" id="6566171">:</span>&nbsp;<span class="builtintype" id="6566173">true</span><span class="op" id="6566177">}</span><span class="op" id="6566178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566181">{</span><span class="ident" id="6566182">Input</span><span class="op" id="6566187">:</span>&nbsp;<span class="op" id="6566189">[</span><span class="op" id="6566190">]</span><span class="op" id="6566191">[</span><span class="op" id="6566192">]</span><span class="builtintype" id="6566193">string</span><span class="op" id="6566199">{</span><span class="op" id="6566200">{</span><span class="string" id="6566201">&#34;abc\rdef&#34;</span><span class="op" id="6566211">}</span><span class="op" id="6566212">}</span><span class="op" id="6566213">,</span>&nbsp;<span class="ident" id="6566215">Output</span><span class="op" id="6566221">:</span>&nbsp;<span class="string" id="6566223">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="6566239">,</span>&nbsp;<span class="ident" id="6566241">UseCRLF</span><span class="op" id="6566248">:</span>&nbsp;<span class="builtintype" id="6566250">true</span><span class="op" id="6566254">}</span><span class="op" id="6566255">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566258">{</span><span class="ident" id="6566259">Input</span><span class="op" id="6566264">:</span>&nbsp;<span class="op" id="6566266">[</span><span class="op" id="6566267">]</span><span class="op" id="6566268">[</span><span class="op" id="6566269">]</span><span class="builtintype" id="6566270">string</span><span class="op" id="6566276">{</span><span class="op" id="6566277">{</span><span class="string" id="6566278">&#34;abc\rdef&#34;</span><span class="op" id="6566288">}</span><span class="op" id="6566289">}</span><span class="op" id="6566290">,</span>&nbsp;<span class="ident" id="6566292">Output</span><span class="op" id="6566298">:</span>&nbsp;<span class="string" id="6566300">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="6566316">,</span>&nbsp;<span class="ident" id="6566318">UseCRLF</span><span class="op" id="6566325">:</span>&nbsp;<span class="builtintype" id="6566327">false</span><span class="op" id="6566332">}</span><span class="op" id="6566333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566336">{</span><span class="ident" id="6566337">Input</span><span class="op" id="6566342">:</span>&nbsp;<span class="op" id="6566344">[</span><span class="op" id="6566345">]</span><span class="op" id="6566346">[</span><span class="op" id="6566347">]</span><span class="builtintype" id="6566348">string</span><span class="op" id="6566354">{</span><span class="op" id="6566355">{</span><span class="string" id="6566356">&#34;&#34;</span><span class="op" id="6566358">}</span><span class="op" id="6566359">}</span><span class="op" id="6566360">,</span>&nbsp;<span class="ident" id="6566362">Output</span><span class="op" id="6566368">:</span>&nbsp;<span class="string" id="6566370">&#34;\n&#34;</span><span class="op" id="6566374">}</span><span class="op" id="6566375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566378">{</span><span class="ident" id="6566379">Input</span><span class="op" id="6566384">:</span>&nbsp;<span class="op" id="6566386">[</span><span class="op" id="6566387">]</span><span class="op" id="6566388">[</span><span class="op" id="6566389">]</span><span class="builtintype" id="6566390">string</span><span class="op" id="6566396">{</span><span class="op" id="6566397">{</span><span class="string" id="6566398">&#34;&#34;</span><span class="op" id="6566400">,</span>&nbsp;<span class="string" id="6566402">&#34;&#34;</span><span class="op" id="6566404">}</span><span class="op" id="6566405">}</span><span class="op" id="6566406">,</span>&nbsp;<span class="ident" id="6566408">Output</span><span class="op" id="6566414">:</span>&nbsp;<span class="string" id="6566416">&#34;,\n&#34;</span><span class="op" id="6566421">}</span><span class="op" id="6566422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566425">{</span><span class="ident" id="6566426">Input</span><span class="op" id="6566431">:</span>&nbsp;<span class="op" id="6566433">[</span><span class="op" id="6566434">]</span><span class="op" id="6566435">[</span><span class="op" id="6566436">]</span><span class="builtintype" id="6566437">string</span><span class="op" id="6566443">{</span><span class="op" id="6566444">{</span><span class="string" id="6566445">&#34;&#34;</span><span class="op" id="6566447">,</span>&nbsp;<span class="string" id="6566449">&#34;&#34;</span><span class="op" id="6566451">,</span>&nbsp;<span class="string" id="6566453">&#34;&#34;</span><span class="op" id="6566455">}</span><span class="op" id="6566456">}</span><span class="op" id="6566457">,</span>&nbsp;<span class="ident" id="6566459">Output</span><span class="op" id="6566465">:</span>&nbsp;<span class="string" id="6566467">&#34;,,\n&#34;</span><span class="op" id="6566473">}</span><span class="op" id="6566474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566477">{</span><span class="ident" id="6566478">Input</span><span class="op" id="6566483">:</span>&nbsp;<span class="op" id="6566485">[</span><span class="op" id="6566486">]</span><span class="op" id="6566487">[</span><span class="op" id="6566488">]</span><span class="builtintype" id="6566489">string</span><span class="op" id="6566495">{</span><span class="op" id="6566496">{</span><span class="string" id="6566497">&#34;&#34;</span><span class="op" id="6566499">,</span>&nbsp;<span class="string" id="6566501">&#34;&#34;</span><span class="op" id="6566503">,</span>&nbsp;<span class="string" id="6566505">&#34;a&#34;</span><span class="op" id="6566508">}</span><span class="op" id="6566509">}</span><span class="op" id="6566510">,</span>&nbsp;<span class="ident" id="6566512">Output</span><span class="op" id="6566518">:</span>&nbsp;<span class="string" id="6566520">&#34;,,a\n&#34;</span><span class="op" id="6566527">}</span><span class="op" id="6566528">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566531">{</span><span class="ident" id="6566532">Input</span><span class="op" id="6566537">:</span>&nbsp;<span class="op" id="6566539">[</span><span class="op" id="6566540">]</span><span class="op" id="6566541">[</span><span class="op" id="6566542">]</span><span class="builtintype" id="6566543">string</span><span class="op" id="6566549">{</span><span class="op" id="6566550">{</span><span class="string" id="6566551">&#34;&#34;</span><span class="op" id="6566553">,</span>&nbsp;<span class="string" id="6566555">&#34;a&#34;</span><span class="op" id="6566558">,</span>&nbsp;<span class="string" id="6566560">&#34;&#34;</span><span class="op" id="6566562">}</span><span class="op" id="6566563">}</span><span class="op" id="6566564">,</span>&nbsp;<span class="ident" id="6566566">Output</span><span class="op" id="6566572">:</span>&nbsp;<span class="string" id="6566574">&#34;,a,\n&#34;</span><span class="op" id="6566581">}</span><span class="op" id="6566582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566585">{</span><span class="ident" id="6566586">Input</span><span class="op" id="6566591">:</span>&nbsp;<span class="op" id="6566593">[</span><span class="op" id="6566594">]</span><span class="op" id="6566595">[</span><span class="op" id="6566596">]</span><span class="builtintype" id="6566597">string</span><span class="op" id="6566603">{</span><span class="op" id="6566604">{</span><span class="string" id="6566605">&#34;&#34;</span><span class="op" id="6566607">,</span>&nbsp;<span class="string" id="6566609">&#34;a&#34;</span><span class="op" id="6566612">,</span>&nbsp;<span class="string" id="6566614">&#34;a&#34;</span><span class="op" id="6566617">}</span><span class="op" id="6566618">}</span><span class="op" id="6566619">,</span>&nbsp;<span class="ident" id="6566621">Output</span><span class="op" id="6566627">:</span>&nbsp;<span class="string" id="6566629">&#34;,a,a\n&#34;</span><span class="op" id="6566637">}</span><span class="op" id="6566638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566641">{</span><span class="ident" id="6566642">Input</span><span class="op" id="6566647">:</span>&nbsp;<span class="op" id="6566649">[</span><span class="op" id="6566650">]</span><span class="op" id="6566651">[</span><span class="op" id="6566652">]</span><span class="builtintype" id="6566653">string</span><span class="op" id="6566659">{</span><span class="op" id="6566660">{</span><span class="string" id="6566661">&#34;a&#34;</span><span class="op" id="6566664">,</span>&nbsp;<span class="string" id="6566666">&#34;&#34;</span><span class="op" id="6566668">,</span>&nbsp;<span class="string" id="6566670">&#34;&#34;</span><span class="op" id="6566672">}</span><span class="op" id="6566673">}</span><span class="op" id="6566674">,</span>&nbsp;<span class="ident" id="6566676">Output</span><span class="op" id="6566682">:</span>&nbsp;<span class="string" id="6566684">&#34;a,,\n&#34;</span><span class="op" id="6566691">}</span><span class="op" id="6566692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566695">{</span><span class="ident" id="6566696">Input</span><span class="op" id="6566701">:</span>&nbsp;<span class="op" id="6566703">[</span><span class="op" id="6566704">]</span><span class="op" id="6566705">[</span><span class="op" id="6566706">]</span><span class="builtintype" id="6566707">string</span><span class="op" id="6566713">{</span><span class="op" id="6566714">{</span><span class="string" id="6566715">&#34;a&#34;</span><span class="op" id="6566718">,</span>&nbsp;<span class="string" id="6566720">&#34;&#34;</span><span class="op" id="6566722">,</span>&nbsp;<span class="string" id="6566724">&#34;a&#34;</span><span class="op" id="6566727">}</span><span class="op" id="6566728">}</span><span class="op" id="6566729">,</span>&nbsp;<span class="ident" id="6566731">Output</span><span class="op" id="6566737">:</span>&nbsp;<span class="string" id="6566739">&#34;a,,a\n&#34;</span><span class="op" id="6566747">}</span><span class="op" id="6566748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566751">{</span><span class="ident" id="6566752">Input</span><span class="op" id="6566757">:</span>&nbsp;<span class="op" id="6566759">[</span><span class="op" id="6566760">]</span><span class="op" id="6566761">[</span><span class="op" id="6566762">]</span><span class="builtintype" id="6566763">string</span><span class="op" id="6566769">{</span><span class="op" id="6566770">{</span><span class="string" id="6566771">&#34;a&#34;</span><span class="op" id="6566774">,</span>&nbsp;<span class="string" id="6566776">&#34;a&#34;</span><span class="op" id="6566779">,</span>&nbsp;<span class="string" id="6566781">&#34;&#34;</span><span class="op" id="6566783">}</span><span class="op" id="6566784">}</span><span class="op" id="6566785">,</span>&nbsp;<span class="ident" id="6566787">Output</span><span class="op" id="6566793">:</span>&nbsp;<span class="string" id="6566795">&#34;a,a,\n&#34;</span><span class="op" id="6566803">}</span><span class="op" id="6566804">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566807">{</span><span class="ident" id="6566808">Input</span><span class="op" id="6566813">:</span>&nbsp;<span class="op" id="6566815">[</span><span class="op" id="6566816">]</span><span class="op" id="6566817">[</span><span class="op" id="6566818">]</span><span class="builtintype" id="6566819">string</span><span class="op" id="6566825">{</span><span class="op" id="6566826">{</span><span class="string" id="6566827">&#34;a&#34;</span><span class="op" id="6566830">,</span>&nbsp;<span class="string" id="6566832">&#34;a&#34;</span><span class="op" id="6566835">,</span>&nbsp;<span class="string" id="6566837">&#34;a&#34;</span><span class="op" id="6566840">}</span><span class="op" id="6566841">}</span><span class="op" id="6566842">,</span>&nbsp;<span class="ident" id="6566844">Output</span><span class="op" id="6566850">:</span>&nbsp;<span class="string" id="6566852">&#34;a,a,a\n&#34;</span><span class="op" id="6566861">}</span><span class="op" id="6566862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6566865">{</span><span class="ident" id="6566866">Input</span><span class="op" id="6566871">:</span>&nbsp;<span class="op" id="6566873">[</span><span class="op" id="6566874">]</span><span class="op" id="6566875">[</span><span class="op" id="6566876">]</span><span class="builtintype" id="6566877">string</span><span class="op" id="6566883">{</span><span class="op" id="6566884">{</span><span class="string" id="6566885">`\.`</span><span class="op" id="6566889">}</span><span class="op" id="6566890">}</span><span class="op" id="6566891">,</span>&nbsp;<span class="ident" id="6566893">Output</span><span class="op" id="6566899">:</span>&nbsp;<span class="string" id="6566901">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="6566912">}</span><span class="op" id="6566913">,</span><br>
<span class="lineno"></span><span class="op" id="6566915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6566918">func</span>&nbsp;<span class="ident" id="6566923">TestWrite</span><span class="op" id="6566932">(</span><span class="ident" id="6566933">t</span>&nbsp;<span class="op" id="6566935">*</span><span class="ident" id="6566936"><a href="/encoding/csv/writer_test.go.html#6565410">testing</a></span><span class="op" id="6566943">.</span><span class="ident" id="6566944">T</span><span class="op" id="6566945">)</span>&nbsp;<span class="op" id="6566947">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6566950">for</span>&nbsp;<span class="ident" id="6566954">n</span><span class="op" id="6566955">,</span>&nbsp;<span class="ident" id="6566957">tt</span>&nbsp;<span class="op" id="6566960">:=</span>&nbsp;<span class="keyword" id="6566963">range</span>&nbsp;<span class="ident" id="6566969"><a href="/encoding/csv/writer_test.go.html#6565427">writeTests</a></span>&nbsp;<span class="op" id="6566980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6566984">b</span>&nbsp;<span class="op" id="6566986">:=</span>&nbsp;<span class="op" id="6566989">&amp;</span><span class="ident" id="6566990"><a href="/encoding/csv/writer_test.go.html#6565391">bytes</a></span><span class="op" id="6566995">.</span><span class="ident" id="6566996">Buffer</span><span class="op" id="6567002">{</span><span class="op" id="6567003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567007">f</span>&nbsp;<span class="op" id="6567009">:=</span>&nbsp;<span class="ident" id="6567012"><a href="/encoding/csv/writer.go.html#6121978">NewWriter</a></span><span class="op" id="6567021">(</span><span class="ident" id="6567022"><a href="/encoding/csv/writer_test.go.html#6566984">b</a></span><span class="op" id="6567023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567027"><a href="/encoding/csv/writer_test.go.html#6567007">f</a></span><span class="op" id="6567028">.</span><span class="ident" id="6567029">UseCRLF</span>&nbsp;<span class="op" id="6567037">=</span>&nbsp;<span class="ident" id="6567039"><a href="/encoding/csv/writer_test.go.html#6566957">tt</a></span><span class="op" id="6567041">.</span><span class="ident" id="6567042">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567052">err</span>&nbsp;<span class="op" id="6567056">:=</span>&nbsp;<span class="ident" id="6567059"><a href="/encoding/csv/writer_test.go.html#6567007">f</a></span><span class="op" id="6567060">.</span><span class="ident" id="6567061">WriteAll</span><span class="op" id="6567069">(</span><span class="ident" id="6567070"><a href="/encoding/csv/writer_test.go.html#6566957">tt</a></span><span class="op" id="6567072">.</span><span class="ident" id="6567073">Input</span><span class="op" id="6567078">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6567082">if</span>&nbsp;<span class="ident" id="6567085"><a href="/encoding/csv/writer_test.go.html#6567052">err</a></span>&nbsp;<span class="op" id="6567089">!=</span>&nbsp;<span class="ident" id="6567092">nil</span>&nbsp;<span class="op" id="6567096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567101"><a href="/encoding/csv/writer_test.go.html#6566933">t</a></span><span class="op" id="6567102">.</span><span class="ident" id="6567103">Errorf</span><span class="op" id="6567109">(</span><span class="string" id="6567110">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6567134">,</span>&nbsp;<span class="ident" id="6567136"><a href="/encoding/csv/writer_test.go.html#6567052">err</a></span><span class="op" id="6567139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6567143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567147">out</span>&nbsp;<span class="op" id="6567151">:=</span>&nbsp;<span class="ident" id="6567154"><a href="/encoding/csv/writer_test.go.html#6566984">b</a></span><span class="op" id="6567155">.</span><span class="ident" id="6567156">String</span><span class="op" id="6567162">(</span><span class="op" id="6567163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6567167">if</span>&nbsp;<span class="ident" id="6567170"><a href="/encoding/csv/writer_test.go.html#6567147">out</a></span>&nbsp;<span class="op" id="6567174">!=</span>&nbsp;<span class="ident" id="6567177"><a href="/encoding/csv/writer_test.go.html#6566957">tt</a></span><span class="op" id="6567179">.</span><span class="ident" id="6567180">Output</span>&nbsp;<span class="op" id="6567187">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567192"><a href="/encoding/csv/writer_test.go.html#6566933">t</a></span><span class="op" id="6567193">.</span><span class="ident" id="6567194">Errorf</span><span class="op" id="6567200">(</span><span class="string" id="6567201">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6567222">,</span>&nbsp;<span class="ident" id="6567224"><a href="/encoding/csv/writer_test.go.html#6566954">n</a></span><span class="op" id="6567225">,</span>&nbsp;<span class="ident" id="6567227"><a href="/encoding/csv/writer_test.go.html#6567147">out</a></span><span class="op" id="6567230">,</span>&nbsp;<span class="ident" id="6567232"><a href="/encoding/csv/writer_test.go.html#6566957">tt</a></span><span class="op" id="6567234">.</span><span class="ident" id="6567235">Output</span><span class="op" id="6567241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6567245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6567248">}</span><br>
<span class="lineno"></span><span class="op" id="6567250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6567253">type</span>&nbsp;<span class="ident" id="6567258">errorWriter</span>&nbsp;<span class="keyword" id="6567270">struct</span><span class="op" id="6567276">{</span><span class="op" id="6567277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6567280">func</span>&nbsp;<span class="op" id="6567285">(</span><span class="ident" id="6567286">e</span>&nbsp;<span class="ident" id="6567288"><a href="/encoding/csv/writer_test.go.html#6567258">errorWriter</a></span><span class="op" id="6567299">)</span>&nbsp;<span class="ident" id="6567301">Write</span><span class="op" id="6567306">(</span><span class="ident" id="6567307">b</span>&nbsp;<span class="op" id="6567309">[</span><span class="op" id="6567310">]</span><span class="builtintype" id="6567311">byte</span><span class="op" id="6567315">)</span>&nbsp;<span class="op" id="6567317">(</span><span class="builtintype" id="6567318">int</span><span class="op" id="6567321">,</span>&nbsp;<span class="builtintype" id="6567323">error</span><span class="op" id="6567328">)</span>&nbsp;<span class="op" id="6567330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6567333">return</span>&nbsp;<span class="num" id="6567340">0</span><span class="op" id="6567341">,</span>&nbsp;<span class="ident" id="6567343"><a href="/encoding/csv/writer_test.go.html#6565400">errors</a></span><span class="op" id="6567349">.</span><span class="ident" id="6567350">New</span><span class="op" id="6567353">(</span><span class="string" id="6567354">&#34;Test&#34;</span><span class="op" id="6567360">)</span><br>
<span class="lineno"></span><span class="op" id="6567362">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6567365">func</span>&nbsp;<span class="ident" id="6567370">TestError</span><span class="op" id="6567379">(</span><span class="ident" id="6567380">t</span>&nbsp;<span class="op" id="6567382">*</span><span class="ident" id="6567383"><a href="/encoding/csv/writer_test.go.html#6565410">testing</a></span><span class="op" id="6567390">.</span><span class="ident" id="6567391">T</span><span class="op" id="6567392">)</span>&nbsp;<span class="op" id="6567394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567397">b</span>&nbsp;<span class="op" id="6567399">:=</span>&nbsp;<span class="op" id="6567402">&amp;</span><span class="ident" id="6567403"><a href="/encoding/csv/writer_test.go.html#6565391">bytes</a></span><span class="op" id="6567408">.</span><span class="ident" id="6567409">Buffer</span><span class="op" id="6567415">{</span><span class="op" id="6567416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567419">f</span>&nbsp;<span class="op" id="6567421">:=</span>&nbsp;<span class="ident" id="6567424"><a href="/encoding/csv/writer.go.html#6121978">NewWriter</a></span><span class="op" id="6567433">(</span><span class="ident" id="6567434"><a href="/encoding/csv/writer_test.go.html#6567397">b</a></span><span class="op" id="6567435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567438"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span><span class="op" id="6567439">.</span><span class="ident" id="6567440">Write</span><span class="op" id="6567445">(</span><span class="op" id="6567446">[</span><span class="op" id="6567447">]</span><span class="builtintype" id="6567448">string</span><span class="op" id="6567454">{</span><span class="string" id="6567455">&#34;abc&#34;</span><span class="op" id="6567460">}</span><span class="op" id="6567461">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567464"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span><span class="op" id="6567465">.</span><span class="ident" id="6567466">Flush</span><span class="op" id="6567471">(</span><span class="op" id="6567472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567475">err</span>&nbsp;<span class="op" id="6567479">:=</span>&nbsp;<span class="ident" id="6567482"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span><span class="op" id="6567483">.</span><span class="ident" id="6567484">Error</span><span class="op" id="6567489">(</span><span class="op" id="6567490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6567494">if</span>&nbsp;<span class="ident" id="6567497"><a href="/encoding/csv/writer_test.go.html#6567475">err</a></span>&nbsp;<span class="op" id="6567501">!=</span>&nbsp;<span class="ident" id="6567504">nil</span>&nbsp;<span class="op" id="6567508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567512"><a href="/encoding/csv/writer_test.go.html#6567380">t</a></span><span class="op" id="6567513">.</span><span class="ident" id="6567514">Errorf</span><span class="op" id="6567520">(</span><span class="string" id="6567521">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6567545">,</span>&nbsp;<span class="ident" id="6567547"><a href="/encoding/csv/writer_test.go.html#6567475">err</a></span><span class="op" id="6567550">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6567553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567557"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span>&nbsp;<span class="op" id="6567559">=</span>&nbsp;<span class="ident" id="6567561"><a href="/encoding/csv/writer.go.html#6121978">NewWriter</a></span><span class="op" id="6567570">(</span><span class="ident" id="6567571"><a href="/encoding/csv/writer_test.go.html#6567258">errorWriter</a></span><span class="op" id="6567582">{</span><span class="op" id="6567583">}</span><span class="op" id="6567584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567587"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span><span class="op" id="6567588">.</span><span class="ident" id="6567589">Write</span><span class="op" id="6567594">(</span><span class="op" id="6567595">[</span><span class="op" id="6567596">]</span><span class="builtintype" id="6567597">string</span><span class="op" id="6567603">{</span><span class="string" id="6567604">&#34;abc&#34;</span><span class="op" id="6567609">}</span><span class="op" id="6567610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567613"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span><span class="op" id="6567614">.</span><span class="ident" id="6567615">Flush</span><span class="op" id="6567620">(</span><span class="op" id="6567621">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567624"><a href="/encoding/csv/writer_test.go.html#6567475">err</a></span>&nbsp;<span class="op" id="6567628">=</span>&nbsp;<span class="ident" id="6567630"><a href="/encoding/csv/writer_test.go.html#6567419">f</a></span><span class="op" id="6567631">.</span><span class="ident" id="6567632">Error</span><span class="op" id="6567637">(</span><span class="op" id="6567638">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6567642">if</span>&nbsp;<span class="ident" id="6567645"><a href="/encoding/csv/writer_test.go.html#6567475">err</a></span>&nbsp;<span class="op" id="6567649">==</span>&nbsp;<span class="ident" id="6567652">nil</span>&nbsp;<span class="op" id="6567656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567660"><a href="/encoding/csv/writer_test.go.html#6567380">t</a></span><span class="op" id="6567661">.</span><span class="ident" id="6567662">Error</span><span class="op" id="6567667">(</span><span class="string" id="6567668">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="6567693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6567696">}</span><br>
<span class="lineno">85</span><span class="op" id="6567698">}</span>
</div>
</body>
</html>
