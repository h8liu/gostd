<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html" class="current">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7526222">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7526277">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7526331">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7526382">package</span>&nbsp;<span class="ident" id="7526390">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7526395">import</span>&nbsp;<span class="op" id="7526402">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7526405">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7526413">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7526423">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7526426">type</span>&nbsp;<span class="ident" id="7526431">hostTest</span>&nbsp;<span class="keyword" id="7526440">struct</span>&nbsp;<span class="op" id="7526447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526450">host</span>&nbsp;<span class="builtintype" id="7526455">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526463">ips</span>&nbsp;&nbsp;<span class="op" id="7526468">[</span><span class="op" id="7526469">]</span><span class="ident" id="7526470">IP</span><br>
<span class="lineno">15</span><span class="op" id="7526473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7526476">var</span>&nbsp;<span class="ident" id="7526480">hosttests</span>&nbsp;<span class="op" id="7526490">=</span>&nbsp;<span class="op" id="7526492">[</span><span class="op" id="7526493">]</span><span class="ident" id="7526494">hostTest</span><span class="op" id="7526502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526505">{</span><span class="string" id="7526506">&#34;odin&#34;</span><span class="op" id="7526512">,</span>&nbsp;<span class="op" id="7526514">[</span><span class="op" id="7526515">]</span><span class="ident" id="7526516">IP</span><span class="op" id="7526518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526522">IPv4</span><span class="op" id="7526526">(</span><span class="num" id="7526527">127</span><span class="op" id="7526530">,</span>&nbsp;<span class="num" id="7526532">0</span><span class="op" id="7526533">,</span>&nbsp;<span class="num" id="7526535">0</span><span class="op" id="7526536">,</span>&nbsp;<span class="num" id="7526538">2</span><span class="op" id="7526539">)</span><span class="op" id="7526540">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526544">IPv4</span><span class="op" id="7526548">(</span><span class="num" id="7526549">127</span><span class="op" id="7526552">,</span>&nbsp;<span class="num" id="7526554">0</span><span class="op" id="7526555">,</span>&nbsp;<span class="num" id="7526557">0</span><span class="op" id="7526558">,</span>&nbsp;<span class="num" id="7526560">3</span><span class="op" id="7526561">)</span><span class="op" id="7526562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526566">ParseIP</span><span class="op" id="7526573">(</span><span class="string" id="7526574">&#34;::2&#34;</span><span class="op" id="7526579">)</span><span class="op" id="7526580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526583">}</span><span class="op" id="7526584">}</span><span class="op" id="7526585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526588">{</span><span class="string" id="7526589">&#34;thor&#34;</span><span class="op" id="7526595">,</span>&nbsp;<span class="op" id="7526597">[</span><span class="op" id="7526598">]</span><span class="ident" id="7526599">IP</span><span class="op" id="7526601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526605">IPv4</span><span class="op" id="7526609">(</span><span class="num" id="7526610">127</span><span class="op" id="7526613">,</span>&nbsp;<span class="num" id="7526615">1</span><span class="op" id="7526616">,</span>&nbsp;<span class="num" id="7526618">1</span><span class="op" id="7526619">,</span>&nbsp;<span class="num" id="7526621">1</span><span class="op" id="7526622">)</span><span class="op" id="7526623">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526626">}</span><span class="op" id="7526627">}</span><span class="op" id="7526628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526631">{</span><span class="string" id="7526632">&#34;loki&#34;</span><span class="op" id="7526638">,</span>&nbsp;<span class="op" id="7526640">[</span><span class="op" id="7526641">]</span><span class="ident" id="7526642">IP</span><span class="op" id="7526644">{</span><span class="op" id="7526645">}</span><span class="op" id="7526646">}</span><span class="op" id="7526647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526650">{</span><span class="string" id="7526651">&#34;ullr&#34;</span><span class="op" id="7526657">,</span>&nbsp;<span class="op" id="7526659">[</span><span class="op" id="7526660">]</span><span class="ident" id="7526661">IP</span><span class="op" id="7526663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526667">IPv4</span><span class="op" id="7526671">(</span><span class="num" id="7526672">127</span><span class="op" id="7526675">,</span>&nbsp;<span class="num" id="7526677">1</span><span class="op" id="7526678">,</span>&nbsp;<span class="num" id="7526680">1</span><span class="op" id="7526681">,</span>&nbsp;<span class="num" id="7526683">2</span><span class="op" id="7526684">)</span><span class="op" id="7526685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526688">}</span><span class="op" id="7526689">}</span><span class="op" id="7526690">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526693">{</span><span class="string" id="7526694">&#34;ullrhost&#34;</span><span class="op" id="7526704">,</span>&nbsp;<span class="op" id="7526706">[</span><span class="op" id="7526707">]</span><span class="ident" id="7526708">IP</span><span class="op" id="7526710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526714">IPv4</span><span class="op" id="7526718">(</span><span class="num" id="7526719">127</span><span class="op" id="7526722">,</span>&nbsp;<span class="num" id="7526724">1</span><span class="op" id="7526725">,</span>&nbsp;<span class="num" id="7526727">1</span><span class="op" id="7526728">,</span>&nbsp;<span class="num" id="7526730">2</span><span class="op" id="7526731">)</span><span class="op" id="7526732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526735">}</span><span class="op" id="7526736">}</span><span class="op" id="7526737">,</span><br>
<span class="lineno"></span><span class="op" id="7526739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7526742">func</span>&nbsp;<span class="ident" id="7526747">TestLookupStaticHost</span><span class="op" id="7526767">(</span><span class="ident" id="7526768">t</span>&nbsp;<span class="op" id="7526770">*</span><span class="ident" id="7526771">testing</span><span class="op" id="7526778">.</span><span class="ident" id="7526779">T</span><span class="op" id="7526780">)</span>&nbsp;<span class="op" id="7526782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526785">p</span>&nbsp;<span class="op" id="7526787">:=</span>&nbsp;<span class="ident" id="7526790">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526801">hostsPath</span>&nbsp;<span class="op" id="7526811">=</span>&nbsp;<span class="string" id="7526813">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526831">for</span>&nbsp;<span class="ident" id="7526835">i</span>&nbsp;<span class="op" id="7526837">:=</span>&nbsp;<span class="num" id="7526840">0</span><span class="op" id="7526841">;</span>&nbsp;<span class="ident" id="7526843">i</span>&nbsp;<span class="op" id="7526845">&lt;</span>&nbsp;<span class="builtinfunc" id="7526847">len</span><span class="op" id="7526850">(</span><span class="ident" id="7526851">hosttests</span><span class="op" id="7526860">)</span><span class="op" id="7526861">;</span>&nbsp;<span class="ident" id="7526863">i</span><span class="op" id="7526864">++</span>&nbsp;<span class="op" id="7526867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526871">tt</span>&nbsp;<span class="op" id="7526874">:=</span>&nbsp;<span class="ident" id="7526877">hosttests</span><span class="op" id="7526886">[</span><span class="ident" id="7526887">i</span><span class="op" id="7526888">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526892">ips</span>&nbsp;<span class="op" id="7526896">:=</span>&nbsp;<span class="ident" id="7526899">lookupStaticHost</span><span class="op" id="7526915">(</span><span class="ident" id="7526916">tt</span><span class="op" id="7526918">.</span><span class="ident" id="7526919">host</span><span class="op" id="7526923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526927">if</span>&nbsp;<span class="builtinfunc" id="7526930">len</span><span class="op" id="7526933">(</span><span class="ident" id="7526934">ips</span><span class="op" id="7526937">)</span>&nbsp;<span class="op" id="7526939">!=</span>&nbsp;<span class="builtinfunc" id="7526942">len</span><span class="op" id="7526945">(</span><span class="ident" id="7526946">tt</span><span class="op" id="7526948">.</span><span class="ident" id="7526949">ips</span><span class="op" id="7526952">)</span>&nbsp;<span class="op" id="7526954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526959">t</span><span class="op" id="7526960">.</span><span class="ident" id="7526961">Errorf</span><span class="op" id="7526967">(</span><span class="string" id="7526968">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7526994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7527000">len</span><span class="op" id="7527003">(</span><span class="ident" id="7527004">ips</span><span class="op" id="7527007">)</span><span class="op" id="7527008">,</span>&nbsp;<span class="builtinfunc" id="7527010">len</span><span class="op" id="7527013">(</span><span class="ident" id="7527014">tt</span><span class="op" id="7527016">.</span><span class="ident" id="7527017">ips</span><span class="op" id="7527020">)</span><span class="op" id="7527021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527026">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527041">for</span>&nbsp;<span class="ident" id="7527045">k</span><span class="op" id="7527046">,</span>&nbsp;<span class="ident" id="7527048">v</span>&nbsp;<span class="op" id="7527050">:=</span>&nbsp;<span class="keyword" id="7527053">range</span>&nbsp;<span class="ident" id="7527059">ips</span>&nbsp;<span class="op" id="7527063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527068">if</span>&nbsp;<span class="ident" id="7527071">tt</span><span class="op" id="7527073">.</span><span class="ident" id="7527074">ips</span><span class="op" id="7527077">[</span><span class="ident" id="7527078">k</span><span class="op" id="7527079">]</span><span class="op" id="7527080">.</span><span class="ident" id="7527081">String</span><span class="op" id="7527087">(</span><span class="op" id="7527088">)</span>&nbsp;<span class="op" id="7527090">!=</span>&nbsp;<span class="ident" id="7527093">v</span>&nbsp;<span class="op" id="7527095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527101">t</span><span class="op" id="7527102">.</span><span class="ident" id="7527103">Errorf</span><span class="op" id="7527109">(</span><span class="string" id="7527110">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7527146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527153">tt</span><span class="op" id="7527155">.</span><span class="ident" id="7527156">host</span><span class="op" id="7527160">,</span>&nbsp;<span class="ident" id="7527162">v</span><span class="op" id="7527163">,</span>&nbsp;<span class="ident" id="7527165">tt</span><span class="op" id="7527167">.</span><span class="ident" id="7527168">ips</span><span class="op" id="7527171">[</span><span class="ident" id="7527172">k</span><span class="op" id="7527173">]</span><span class="op" id="7527174">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527189">hostsPath</span>&nbsp;<span class="op" id="7527199">=</span>&nbsp;<span class="ident" id="7527201">p</span><br>
<span class="lineno"></span><span class="op" id="7527203">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="7527206">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="7527260">func</span>&nbsp;<span class="ident" id="7527265">TestSingleLineHostsFile</span><span class="op" id="7527288">(</span><span class="ident" id="7527289">t</span>&nbsp;<span class="op" id="7527291">*</span><span class="ident" id="7527292">testing</span><span class="op" id="7527299">.</span><span class="ident" id="7527300">T</span><span class="op" id="7527301">)</span>&nbsp;<span class="op" id="7527303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527306">p</span>&nbsp;<span class="op" id="7527308">:=</span>&nbsp;<span class="ident" id="7527311">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527322">hostsPath</span>&nbsp;<span class="op" id="7527332">=</span>&nbsp;<span class="string" id="7527334">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527364">ips</span>&nbsp;<span class="op" id="7527368">:=</span>&nbsp;<span class="ident" id="7527371">lookupStaticHost</span><span class="op" id="7527387">(</span><span class="string" id="7527388">&#34;odin&#34;</span><span class="op" id="7527394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527397">if</span>&nbsp;<span class="builtinfunc" id="7527400">len</span><span class="op" id="7527403">(</span><span class="ident" id="7527404">ips</span><span class="op" id="7527407">)</span>&nbsp;<span class="op" id="7527409">!=</span>&nbsp;<span class="num" id="7527412">1</span>&nbsp;<span class="op" id="7527414">||</span>&nbsp;<span class="ident" id="7527417">ips</span><span class="op" id="7527420">[</span><span class="num" id="7527421">0</span><span class="op" id="7527422">]</span>&nbsp;<span class="op" id="7527424">!=</span>&nbsp;<span class="string" id="7527427">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="7527439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527443">t</span><span class="op" id="7527444">.</span><span class="ident" id="7527445">Errorf</span><span class="op" id="7527451">(</span><span class="string" id="7527452">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7527484">,</span>&nbsp;<span class="ident" id="7527486">ips</span><span class="op" id="7527489">,</span>&nbsp;<span class="op" id="7527491">[</span><span class="op" id="7527492">]</span><span class="builtintype" id="7527493">string</span><span class="op" id="7527499">{</span><span class="string" id="7527500">&#34;127.0.0.2&#34;</span><span class="op" id="7527511">}</span><span class="op" id="7527512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527515">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527519">hostsPath</span>&nbsp;<span class="op" id="7527529">=</span>&nbsp;<span class="ident" id="7527531">p</span><br>
<span class="lineno"></span><span class="op" id="7527533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7527536">func</span>&nbsp;<span class="ident" id="7527541">TestLookupHost</span><span class="op" id="7527555">(</span><span class="ident" id="7527556">t</span>&nbsp;<span class="op" id="7527558">*</span><span class="ident" id="7527559">testing</span><span class="op" id="7527566">.</span><span class="ident" id="7527567">T</span><span class="op" id="7527568">)</span>&nbsp;<span class="op" id="7527570">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527573">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527632">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527690">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527743">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527767">addrs</span><span class="op" id="7527772">,</span>&nbsp;<span class="ident" id="7527774">_</span>&nbsp;<span class="op" id="7527776">:=</span>&nbsp;<span class="ident" id="7527779">LookupHost</span><span class="op" id="7527789">(</span><span class="string" id="7527790">&#34;localhost&#34;</span><span class="op" id="7527801">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527804">sort</span><span class="op" id="7527808">.</span><span class="ident" id="7527809">Strings</span><span class="op" id="7527816">(</span><span class="ident" id="7527817">addrs</span><span class="op" id="7527822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527825">for</span>&nbsp;<span class="ident" id="7527829">i</span>&nbsp;<span class="op" id="7527831">:=</span>&nbsp;<span class="num" id="7527834">0</span><span class="op" id="7527835">;</span>&nbsp;<span class="ident" id="7527837">i</span><span class="op" id="7527838">+</span><span class="num" id="7527839">1</span>&nbsp;<span class="op" id="7527841">&lt;</span>&nbsp;<span class="builtinfunc" id="7527843">len</span><span class="op" id="7527846">(</span><span class="ident" id="7527847">addrs</span><span class="op" id="7527852">)</span><span class="op" id="7527853">;</span>&nbsp;<span class="ident" id="7527855">i</span><span class="op" id="7527856">++</span>&nbsp;<span class="op" id="7527859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527863">if</span>&nbsp;<span class="ident" id="7527866">addrs</span><span class="op" id="7527871">[</span><span class="ident" id="7527872">i</span><span class="op" id="7527873">]</span>&nbsp;<span class="op" id="7527875">==</span>&nbsp;<span class="ident" id="7527878">addrs</span><span class="op" id="7527883">[</span><span class="ident" id="7527884">i</span><span class="op" id="7527885">+</span><span class="num" id="7527886">1</span><span class="op" id="7527887">]</span>&nbsp;<span class="op" id="7527889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527894">t</span><span class="op" id="7527895">.</span><span class="ident" id="7527896">Fatalf</span><span class="op" id="7527902">(</span><span class="string" id="7527903">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="7527960">,</span>&nbsp;<span class="ident" id="7527962">addrs</span><span class="op" id="7527967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527971">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527974">}</span><br>
<span class="lineno"></span><span class="op" id="7527976">}</span>
</div>
</body>
</html>
