<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html" class="current">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2875552">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2875607">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2875661">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2875712">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2875750">package</span>&nbsp;<span class="ident" id="2875758">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2875767">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2875828">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2875887">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2875945">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2876006">type</span>&nbsp;<span class="ident" id="2876011">visit</span>&nbsp;<span class="keyword" id="2876017">struct</span>&nbsp;<span class="op" id="2876024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876027">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2876031">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876040">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2876044">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876053">typ</span>&nbsp;<span class="ident" id="2876057">Type</span><br>
<span class="lineno"></span><span class="op" id="2876062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2876065">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2876139">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2876216">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2876236">func</span>&nbsp;<span class="ident" id="2876241">deepValueEqual</span><span class="op" id="2876255">(</span><span class="ident" id="2876256">v1</span><span class="op" id="2876258">,</span>&nbsp;<span class="ident" id="2876260">v2</span>&nbsp;<span class="ident" id="2876263">Value</span><span class="op" id="2876268">,</span>&nbsp;<span class="ident" id="2876270">visited</span>&nbsp;<span class="keyword" id="2876278">map</span><span class="op" id="2876281">[</span><span class="ident" id="2876282">visit</span><span class="op" id="2876287">]</span><span class="builtintype" id="2876288">bool</span><span class="op" id="2876292">,</span>&nbsp;<span class="ident" id="2876294">depth</span>&nbsp;<span class="builtintype" id="2876300">int</span><span class="op" id="2876303">)</span>&nbsp;<span class="builtintype" id="2876305">bool</span>&nbsp;<span class="op" id="2876310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876313">if</span>&nbsp;<span class="op" id="2876316">!</span><span class="ident" id="2876317">v1</span><span class="op" id="2876319">.</span><span class="ident" id="2876320">IsValid</span><span class="op" id="2876327">(</span><span class="op" id="2876328">)</span>&nbsp;<span class="op" id="2876330">||</span>&nbsp;<span class="op" id="2876333">!</span><span class="ident" id="2876334">v2</span><span class="op" id="2876336">.</span><span class="ident" id="2876337">IsValid</span><span class="op" id="2876344">(</span><span class="op" id="2876345">)</span>&nbsp;<span class="op" id="2876347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876351">return</span>&nbsp;<span class="ident" id="2876358">v1</span><span class="op" id="2876360">.</span><span class="ident" id="2876361">IsValid</span><span class="op" id="2876368">(</span><span class="op" id="2876369">)</span>&nbsp;<span class="op" id="2876371">==</span>&nbsp;<span class="ident" id="2876374">v2</span><span class="op" id="2876376">.</span><span class="ident" id="2876377">IsValid</span><span class="op" id="2876384">(</span><span class="op" id="2876385">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876391">if</span>&nbsp;<span class="ident" id="2876394">v1</span><span class="op" id="2876396">.</span><span class="ident" id="2876397">Type</span><span class="op" id="2876401">(</span><span class="op" id="2876402">)</span>&nbsp;<span class="op" id="2876404">!=</span>&nbsp;<span class="ident" id="2876407">v2</span><span class="op" id="2876409">.</span><span class="ident" id="2876410">Type</span><span class="op" id="2876414">(</span><span class="op" id="2876415">)</span>&nbsp;<span class="op" id="2876417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876421">return</span>&nbsp;<span class="builtintype" id="2876428">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876439">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876502">hard</span>&nbsp;<span class="op" id="2876507">:=</span>&nbsp;<span class="keyword" id="2876510">func</span><span class="op" id="2876514">(</span><span class="ident" id="2876515">k</span>&nbsp;<span class="ident" id="2876517">Kind</span><span class="op" id="2876521">)</span>&nbsp;<span class="builtintype" id="2876523">bool</span>&nbsp;<span class="op" id="2876528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876532">switch</span>&nbsp;<span class="ident" id="2876539">k</span>&nbsp;<span class="op" id="2876541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876545">case</span>&nbsp;<span class="ident" id="2876550">Array</span><span class="op" id="2876555">,</span>&nbsp;<span class="ident" id="2876557">Map</span><span class="op" id="2876560">,</span>&nbsp;<span class="ident" id="2876562">Slice</span><span class="op" id="2876567">,</span>&nbsp;<span class="ident" id="2876569">Struct</span><span class="op" id="2876575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876580">return</span>&nbsp;<span class="builtintype" id="2876587">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876598">return</span>&nbsp;<span class="builtintype" id="2876605">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876616">if</span>&nbsp;<span class="ident" id="2876619">v1</span><span class="op" id="2876621">.</span><span class="ident" id="2876622">CanAddr</span><span class="op" id="2876629">(</span><span class="op" id="2876630">)</span>&nbsp;<span class="op" id="2876632">&amp;&amp;</span>&nbsp;<span class="ident" id="2876635">v2</span><span class="op" id="2876637">.</span><span class="ident" id="2876638">CanAddr</span><span class="op" id="2876645">(</span><span class="op" id="2876646">)</span>&nbsp;<span class="op" id="2876648">&amp;&amp;</span>&nbsp;<span class="ident" id="2876651">hard</span><span class="op" id="2876655">(</span><span class="ident" id="2876656">v1</span><span class="op" id="2876658">.</span><span class="ident" id="2876659">Kind</span><span class="op" id="2876663">(</span><span class="op" id="2876664">)</span><span class="op" id="2876665">)</span>&nbsp;<span class="op" id="2876667">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876671">addr1</span>&nbsp;<span class="op" id="2876677">:=</span>&nbsp;<span class="ident" id="2876680">v1</span><span class="op" id="2876682">.</span><span class="ident" id="2876683">UnsafeAddr</span><span class="op" id="2876693">(</span><span class="op" id="2876694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876698">addr2</span>&nbsp;<span class="op" id="2876704">:=</span>&nbsp;<span class="ident" id="2876707">v2</span><span class="op" id="2876709">.</span><span class="ident" id="2876710">UnsafeAddr</span><span class="op" id="2876720">(</span><span class="op" id="2876721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876725">if</span>&nbsp;<span class="ident" id="2876728">addr1</span>&nbsp;<span class="op" id="2876734">&gt;</span>&nbsp;<span class="ident" id="2876736">addr2</span>&nbsp;<span class="op" id="2876742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876747">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876812">addr1</span><span class="op" id="2876817">,</span>&nbsp;<span class="ident" id="2876819">addr2</span>&nbsp;<span class="op" id="2876825">=</span>&nbsp;<span class="ident" id="2876827">addr2</span><span class="op" id="2876832">,</span>&nbsp;<span class="ident" id="2876834">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876847">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876898">if</span>&nbsp;<span class="ident" id="2876901">addr1</span>&nbsp;<span class="op" id="2876907">==</span>&nbsp;<span class="ident" id="2876910">addr2</span>&nbsp;<span class="op" id="2876916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876921">return</span>&nbsp;<span class="builtintype" id="2876928">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876940">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876965">typ</span>&nbsp;<span class="op" id="2876969">:=</span>&nbsp;<span class="ident" id="2876972">v1</span><span class="op" id="2876974">.</span><span class="ident" id="2876975">Type</span><span class="op" id="2876979">(</span><span class="op" id="2876980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876984">v</span>&nbsp;<span class="op" id="2876986">:=</span>&nbsp;<span class="ident" id="2876989">visit</span><span class="op" id="2876994">{</span><span class="ident" id="2876995">addr1</span><span class="op" id="2877000">,</span>&nbsp;<span class="ident" id="2877002">addr2</span><span class="op" id="2877007">,</span>&nbsp;<span class="ident" id="2877009">typ</span><span class="op" id="2877012">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877016">if</span>&nbsp;<span class="ident" id="2877019">visited</span><span class="op" id="2877026">[</span><span class="ident" id="2877027">v</span><span class="op" id="2877028">]</span>&nbsp;<span class="op" id="2877030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877035">return</span>&nbsp;<span class="builtintype" id="2877042">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2877054">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877079">visited</span><span class="op" id="2877086">[</span><span class="ident" id="2877087">v</span><span class="op" id="2877088">]</span>&nbsp;<span class="op" id="2877090">=</span>&nbsp;<span class="builtintype" id="2877092">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877102">switch</span>&nbsp;<span class="ident" id="2877109">v1</span><span class="op" id="2877111">.</span><span class="ident" id="2877112">Kind</span><span class="op" id="2877116">(</span><span class="op" id="2877117">)</span>&nbsp;<span class="op" id="2877119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877122">case</span>&nbsp;<span class="ident" id="2877127">Array</span><span class="op" id="2877132">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877136">for</span>&nbsp;<span class="ident" id="2877140">i</span>&nbsp;<span class="op" id="2877142">:=</span>&nbsp;<span class="num" id="2877145">0</span><span class="op" id="2877146">;</span>&nbsp;<span class="ident" id="2877148">i</span>&nbsp;<span class="op" id="2877150">&lt;</span>&nbsp;<span class="ident" id="2877152">v1</span><span class="op" id="2877154">.</span><span class="ident" id="2877155">Len</span><span class="op" id="2877158">(</span><span class="op" id="2877159">)</span><span class="op" id="2877160">;</span>&nbsp;<span class="ident" id="2877162">i</span><span class="op" id="2877163">++</span>&nbsp;<span class="op" id="2877166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877171">if</span>&nbsp;<span class="op" id="2877174">!</span><span class="ident" id="2877175">deepValueEqual</span><span class="op" id="2877189">(</span><span class="ident" id="2877190">v1</span><span class="op" id="2877192">.</span><span class="ident" id="2877193">Index</span><span class="op" id="2877198">(</span><span class="ident" id="2877199">i</span><span class="op" id="2877200">)</span><span class="op" id="2877201">,</span>&nbsp;<span class="ident" id="2877203">v2</span><span class="op" id="2877205">.</span><span class="ident" id="2877206">Index</span><span class="op" id="2877211">(</span><span class="ident" id="2877212">i</span><span class="op" id="2877213">)</span><span class="op" id="2877214">,</span>&nbsp;<span class="ident" id="2877216">visited</span><span class="op" id="2877223">,</span>&nbsp;<span class="ident" id="2877225">depth</span><span class="op" id="2877230">+</span><span class="num" id="2877231">1</span><span class="op" id="2877232">)</span>&nbsp;<span class="op" id="2877234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877240">return</span>&nbsp;<span class="builtintype" id="2877247">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877260">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877264">return</span>&nbsp;<span class="builtintype" id="2877271">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877277">case</span>&nbsp;<span class="ident" id="2877282">Slice</span><span class="op" id="2877287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877291">if</span>&nbsp;<span class="ident" id="2877294">v1</span><span class="op" id="2877296">.</span><span class="ident" id="2877297">IsNil</span><span class="op" id="2877302">(</span><span class="op" id="2877303">)</span>&nbsp;<span class="op" id="2877305">!=</span>&nbsp;<span class="ident" id="2877308">v2</span><span class="op" id="2877310">.</span><span class="ident" id="2877311">IsNil</span><span class="op" id="2877316">(</span><span class="op" id="2877317">)</span>&nbsp;<span class="op" id="2877319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877324">return</span>&nbsp;<span class="builtintype" id="2877331">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877339">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877343">if</span>&nbsp;<span class="ident" id="2877346">v1</span><span class="op" id="2877348">.</span><span class="ident" id="2877349">Len</span><span class="op" id="2877352">(</span><span class="op" id="2877353">)</span>&nbsp;<span class="op" id="2877355">!=</span>&nbsp;<span class="ident" id="2877358">v2</span><span class="op" id="2877360">.</span><span class="ident" id="2877361">Len</span><span class="op" id="2877364">(</span><span class="op" id="2877365">)</span>&nbsp;<span class="op" id="2877367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877372">return</span>&nbsp;<span class="builtintype" id="2877379">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877391">if</span>&nbsp;<span class="ident" id="2877394">v1</span><span class="op" id="2877396">.</span><span class="ident" id="2877397">Pointer</span><span class="op" id="2877404">(</span><span class="op" id="2877405">)</span>&nbsp;<span class="op" id="2877407">==</span>&nbsp;<span class="ident" id="2877410">v2</span><span class="op" id="2877412">.</span><span class="ident" id="2877413">Pointer</span><span class="op" id="2877420">(</span><span class="op" id="2877421">)</span>&nbsp;<span class="op" id="2877423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877428">return</span>&nbsp;<span class="builtintype" id="2877435">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877446">for</span>&nbsp;<span class="ident" id="2877450">i</span>&nbsp;<span class="op" id="2877452">:=</span>&nbsp;<span class="num" id="2877455">0</span><span class="op" id="2877456">;</span>&nbsp;<span class="ident" id="2877458">i</span>&nbsp;<span class="op" id="2877460">&lt;</span>&nbsp;<span class="ident" id="2877462">v1</span><span class="op" id="2877464">.</span><span class="ident" id="2877465">Len</span><span class="op" id="2877468">(</span><span class="op" id="2877469">)</span><span class="op" id="2877470">;</span>&nbsp;<span class="ident" id="2877472">i</span><span class="op" id="2877473">++</span>&nbsp;<span class="op" id="2877476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877481">if</span>&nbsp;<span class="op" id="2877484">!</span><span class="ident" id="2877485">deepValueEqual</span><span class="op" id="2877499">(</span><span class="ident" id="2877500">v1</span><span class="op" id="2877502">.</span><span class="ident" id="2877503">Index</span><span class="op" id="2877508">(</span><span class="ident" id="2877509">i</span><span class="op" id="2877510">)</span><span class="op" id="2877511">,</span>&nbsp;<span class="ident" id="2877513">v2</span><span class="op" id="2877515">.</span><span class="ident" id="2877516">Index</span><span class="op" id="2877521">(</span><span class="ident" id="2877522">i</span><span class="op" id="2877523">)</span><span class="op" id="2877524">,</span>&nbsp;<span class="ident" id="2877526">visited</span><span class="op" id="2877533">,</span>&nbsp;<span class="ident" id="2877535">depth</span><span class="op" id="2877540">+</span><span class="num" id="2877541">1</span><span class="op" id="2877542">)</span>&nbsp;<span class="op" id="2877544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877550">return</span>&nbsp;<span class="builtintype" id="2877557">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877566">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877574">return</span>&nbsp;<span class="builtintype" id="2877581">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877587">case</span>&nbsp;<span class="ident" id="2877592">Interface</span><span class="op" id="2877601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877605">if</span>&nbsp;<span class="ident" id="2877608">v1</span><span class="op" id="2877610">.</span><span class="ident" id="2877611">IsNil</span><span class="op" id="2877616">(</span><span class="op" id="2877617">)</span>&nbsp;<span class="op" id="2877619">||</span>&nbsp;<span class="ident" id="2877622">v2</span><span class="op" id="2877624">.</span><span class="ident" id="2877625">IsNil</span><span class="op" id="2877630">(</span><span class="op" id="2877631">)</span>&nbsp;<span class="op" id="2877633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877638">return</span>&nbsp;<span class="ident" id="2877645">v1</span><span class="op" id="2877647">.</span><span class="ident" id="2877648">IsNil</span><span class="op" id="2877653">(</span><span class="op" id="2877654">)</span>&nbsp;<span class="op" id="2877656">==</span>&nbsp;<span class="ident" id="2877659">v2</span><span class="op" id="2877661">.</span><span class="ident" id="2877662">IsNil</span><span class="op" id="2877667">(</span><span class="op" id="2877668">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877676">return</span>&nbsp;<span class="ident" id="2877683">deepValueEqual</span><span class="op" id="2877697">(</span><span class="ident" id="2877698">v1</span><span class="op" id="2877700">.</span><span class="ident" id="2877701">Elem</span><span class="op" id="2877705">(</span><span class="op" id="2877706">)</span><span class="op" id="2877707">,</span>&nbsp;<span class="ident" id="2877709">v2</span><span class="op" id="2877711">.</span><span class="ident" id="2877712">Elem</span><span class="op" id="2877716">(</span><span class="op" id="2877717">)</span><span class="op" id="2877718">,</span>&nbsp;<span class="ident" id="2877720">visited</span><span class="op" id="2877727">,</span>&nbsp;<span class="ident" id="2877729">depth</span><span class="op" id="2877734">+</span><span class="num" id="2877735">1</span><span class="op" id="2877736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877739">case</span>&nbsp;<span class="ident" id="2877744">Ptr</span><span class="op" id="2877747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877751">return</span>&nbsp;<span class="ident" id="2877758">deepValueEqual</span><span class="op" id="2877772">(</span><span class="ident" id="2877773">v1</span><span class="op" id="2877775">.</span><span class="ident" id="2877776">Elem</span><span class="op" id="2877780">(</span><span class="op" id="2877781">)</span><span class="op" id="2877782">,</span>&nbsp;<span class="ident" id="2877784">v2</span><span class="op" id="2877786">.</span><span class="ident" id="2877787">Elem</span><span class="op" id="2877791">(</span><span class="op" id="2877792">)</span><span class="op" id="2877793">,</span>&nbsp;<span class="ident" id="2877795">visited</span><span class="op" id="2877802">,</span>&nbsp;<span class="ident" id="2877804">depth</span><span class="op" id="2877809">+</span><span class="num" id="2877810">1</span><span class="op" id="2877811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877814">case</span>&nbsp;<span class="ident" id="2877819">Struct</span><span class="op" id="2877825">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877829">for</span>&nbsp;<span class="ident" id="2877833">i</span><span class="op" id="2877834">,</span>&nbsp;<span class="ident" id="2877836">n</span>&nbsp;<span class="op" id="2877838">:=</span>&nbsp;<span class="num" id="2877841">0</span><span class="op" id="2877842">,</span>&nbsp;<span class="ident" id="2877844">v1</span><span class="op" id="2877846">.</span><span class="ident" id="2877847">NumField</span><span class="op" id="2877855">(</span><span class="op" id="2877856">)</span><span class="op" id="2877857">;</span>&nbsp;<span class="ident" id="2877859">i</span>&nbsp;<span class="op" id="2877861">&lt;</span>&nbsp;<span class="ident" id="2877863">n</span><span class="op" id="2877864">;</span>&nbsp;<span class="ident" id="2877866">i</span><span class="op" id="2877867">++</span>&nbsp;<span class="op" id="2877870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877875">if</span>&nbsp;<span class="op" id="2877878">!</span><span class="ident" id="2877879">deepValueEqual</span><span class="op" id="2877893">(</span><span class="ident" id="2877894">v1</span><span class="op" id="2877896">.</span><span class="ident" id="2877897">Field</span><span class="op" id="2877902">(</span><span class="ident" id="2877903">i</span><span class="op" id="2877904">)</span><span class="op" id="2877905">,</span>&nbsp;<span class="ident" id="2877907">v2</span><span class="op" id="2877909">.</span><span class="ident" id="2877910">Field</span><span class="op" id="2877915">(</span><span class="ident" id="2877916">i</span><span class="op" id="2877917">)</span><span class="op" id="2877918">,</span>&nbsp;<span class="ident" id="2877920">visited</span><span class="op" id="2877927">,</span>&nbsp;<span class="ident" id="2877929">depth</span><span class="op" id="2877934">+</span><span class="num" id="2877935">1</span><span class="op" id="2877936">)</span>&nbsp;<span class="op" id="2877938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877944">return</span>&nbsp;<span class="builtintype" id="2877951">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877964">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877968">return</span>&nbsp;<span class="builtintype" id="2877975">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877981">case</span>&nbsp;<span class="ident" id="2877986">Map</span><span class="op" id="2877989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877993">if</span>&nbsp;<span class="ident" id="2877996">v1</span><span class="op" id="2877998">.</span><span class="ident" id="2877999">IsNil</span><span class="op" id="2878004">(</span><span class="op" id="2878005">)</span>&nbsp;<span class="op" id="2878007">!=</span>&nbsp;<span class="ident" id="2878010">v2</span><span class="op" id="2878012">.</span><span class="ident" id="2878013">IsNil</span><span class="op" id="2878018">(</span><span class="op" id="2878019">)</span>&nbsp;<span class="op" id="2878021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878026">return</span>&nbsp;<span class="builtintype" id="2878033">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878041">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878045">if</span>&nbsp;<span class="ident" id="2878048">v1</span><span class="op" id="2878050">.</span><span class="ident" id="2878051">Len</span><span class="op" id="2878054">(</span><span class="op" id="2878055">)</span>&nbsp;<span class="op" id="2878057">!=</span>&nbsp;<span class="ident" id="2878060">v2</span><span class="op" id="2878062">.</span><span class="ident" id="2878063">Len</span><span class="op" id="2878066">(</span><span class="op" id="2878067">)</span>&nbsp;<span class="op" id="2878069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878074">return</span>&nbsp;<span class="builtintype" id="2878081">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878093">if</span>&nbsp;<span class="ident" id="2878096">v1</span><span class="op" id="2878098">.</span><span class="ident" id="2878099">Pointer</span><span class="op" id="2878106">(</span><span class="op" id="2878107">)</span>&nbsp;<span class="op" id="2878109">==</span>&nbsp;<span class="ident" id="2878112">v2</span><span class="op" id="2878114">.</span><span class="ident" id="2878115">Pointer</span><span class="op" id="2878122">(</span><span class="op" id="2878123">)</span>&nbsp;<span class="op" id="2878125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878130">return</span>&nbsp;<span class="builtintype" id="2878137">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878148">for</span>&nbsp;<span class="ident" id="2878152">_</span><span class="op" id="2878153">,</span>&nbsp;<span class="ident" id="2878155">k</span>&nbsp;<span class="op" id="2878157">:=</span>&nbsp;<span class="keyword" id="2878160">range</span>&nbsp;<span class="ident" id="2878166">v1</span><span class="op" id="2878168">.</span><span class="ident" id="2878169">MapKeys</span><span class="op" id="2878176">(</span><span class="op" id="2878177">)</span>&nbsp;<span class="op" id="2878179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878184">if</span>&nbsp;<span class="op" id="2878187">!</span><span class="ident" id="2878188">deepValueEqual</span><span class="op" id="2878202">(</span><span class="ident" id="2878203">v1</span><span class="op" id="2878205">.</span><span class="ident" id="2878206">MapIndex</span><span class="op" id="2878214">(</span><span class="ident" id="2878215">k</span><span class="op" id="2878216">)</span><span class="op" id="2878217">,</span>&nbsp;<span class="ident" id="2878219">v2</span><span class="op" id="2878221">.</span><span class="ident" id="2878222">MapIndex</span><span class="op" id="2878230">(</span><span class="ident" id="2878231">k</span><span class="op" id="2878232">)</span><span class="op" id="2878233">,</span>&nbsp;<span class="ident" id="2878235">visited</span><span class="op" id="2878242">,</span>&nbsp;<span class="ident" id="2878244">depth</span><span class="op" id="2878249">+</span><span class="num" id="2878250">1</span><span class="op" id="2878251">)</span>&nbsp;<span class="op" id="2878253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878259">return</span>&nbsp;<span class="builtintype" id="2878266">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878275">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878283">return</span>&nbsp;<span class="builtintype" id="2878290">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878296">case</span>&nbsp;<span class="ident" id="2878301">Func</span><span class="op" id="2878305">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878309">if</span>&nbsp;<span class="ident" id="2878312">v1</span><span class="op" id="2878314">.</span><span class="ident" id="2878315">IsNil</span><span class="op" id="2878320">(</span><span class="op" id="2878321">)</span>&nbsp;<span class="op" id="2878323">&amp;&amp;</span>&nbsp;<span class="ident" id="2878326">v2</span><span class="op" id="2878328">.</span><span class="ident" id="2878329">IsNil</span><span class="op" id="2878334">(</span><span class="op" id="2878335">)</span>&nbsp;<span class="op" id="2878337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878342">return</span>&nbsp;<span class="builtintype" id="2878349">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878360">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878392">return</span>&nbsp;<span class="builtintype" id="2878399">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878406">default</span><span class="op" id="2878413">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878417">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878447">return</span>&nbsp;<span class="ident" id="2878454">valueInterface</span><span class="op" id="2878468">(</span><span class="ident" id="2878469">v1</span><span class="op" id="2878471">,</span>&nbsp;<span class="builtintype" id="2878473">false</span><span class="op" id="2878478">)</span>&nbsp;<span class="op" id="2878480">==</span>&nbsp;<span class="ident" id="2878483">valueInterface</span><span class="op" id="2878497">(</span><span class="ident" id="2878498">v2</span><span class="op" id="2878500">,</span>&nbsp;<span class="builtintype" id="2878502">false</span><span class="op" id="2878507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878510">}</span><br>
<span class="lineno"></span><span class="op" id="2878512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2878515">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2878586">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2878660">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2878729">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2878807">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2878837">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2878884">func</span>&nbsp;<span class="ident" id="2878889">DeepEqual</span><span class="op" id="2878898">(</span><span class="ident" id="2878899">a1</span><span class="op" id="2878901">,</span>&nbsp;<span class="ident" id="2878903">a2</span>&nbsp;<span class="keyword" id="2878906">interface</span><span class="op" id="2878915">{</span><span class="op" id="2878916">}</span><span class="op" id="2878917">)</span>&nbsp;<span class="builtintype" id="2878919">bool</span>&nbsp;<span class="op" id="2878924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878927">if</span>&nbsp;<span class="ident" id="2878930">a1</span>&nbsp;<span class="op" id="2878933">==</span>&nbsp;<span class="ident" id="2878936">nil</span>&nbsp;<span class="op" id="2878940">||</span>&nbsp;<span class="ident" id="2878943">a2</span>&nbsp;<span class="op" id="2878946">==</span>&nbsp;<span class="ident" id="2878949">nil</span>&nbsp;<span class="op" id="2878953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878957">return</span>&nbsp;<span class="ident" id="2878964">a1</span>&nbsp;<span class="op" id="2878967">==</span>&nbsp;<span class="ident" id="2878970">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878977">v1</span>&nbsp;<span class="op" id="2878980">:=</span>&nbsp;<span class="ident" id="2878983">ValueOf</span><span class="op" id="2878990">(</span><span class="ident" id="2878991">a1</span><span class="op" id="2878993">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878996">v2</span>&nbsp;<span class="op" id="2878999">:=</span>&nbsp;<span class="ident" id="2879002">ValueOf</span><span class="op" id="2879009">(</span><span class="ident" id="2879010">a2</span><span class="op" id="2879012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879015">if</span>&nbsp;<span class="ident" id="2879018">v1</span><span class="op" id="2879020">.</span><span class="ident" id="2879021">Type</span><span class="op" id="2879025">(</span><span class="op" id="2879026">)</span>&nbsp;<span class="op" id="2879028">!=</span>&nbsp;<span class="ident" id="2879031">v2</span><span class="op" id="2879033">.</span><span class="ident" id="2879034">Type</span><span class="op" id="2879038">(</span><span class="op" id="2879039">)</span>&nbsp;<span class="op" id="2879041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879045">return</span>&nbsp;<span class="builtintype" id="2879052">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879062">return</span>&nbsp;<span class="ident" id="2879069">deepValueEqual</span><span class="op" id="2879083">(</span><span class="ident" id="2879084">v1</span><span class="op" id="2879086">,</span>&nbsp;<span class="ident" id="2879088">v2</span><span class="op" id="2879090">,</span>&nbsp;<span class="builtinfunc" id="2879092">make</span><span class="op" id="2879096">(</span><span class="keyword" id="2879097">map</span><span class="op" id="2879100">[</span><span class="ident" id="2879101">visit</span><span class="op" id="2879106">]</span><span class="builtintype" id="2879107">bool</span><span class="op" id="2879111">)</span><span class="op" id="2879112">,</span>&nbsp;<span class="num" id="2879114">0</span><span class="op" id="2879115">)</span><br>
<span class="lineno">145</span><span class="op" id="2879117">}</span>
</div>
</body>
</html>
