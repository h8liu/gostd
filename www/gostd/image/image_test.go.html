<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6514380">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6514435">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6514489">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6514540">package</span>&nbsp;<span class="ident" id="6514548">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6514555">import</span>&nbsp;<span class="op" id="6514562">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6514565">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6514580">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6514590">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6514593">type</span>&nbsp;<span class="ident" id="6514598">image</span>&nbsp;<span class="keyword" id="6514604">interface</span>&nbsp;<span class="op" id="6514614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514617">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514624">Opaque</span><span class="op" id="6514630">(</span><span class="op" id="6514631">)</span>&nbsp;<span class="builtintype" id="6514633">bool</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514639">Set</span><span class="op" id="6514642">(</span><span class="builtintype" id="6514643">int</span><span class="op" id="6514646">,</span>&nbsp;<span class="builtintype" id="6514648">int</span><span class="op" id="6514651">,</span>&nbsp;<span class="ident" id="6514653">color</span><span class="op" id="6514658">.</span><span class="ident" id="6514659">Color</span><span class="op" id="6514664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514667">SubImage</span><span class="op" id="6514675">(</span><span class="ident" id="6514676">Rectangle</span><span class="op" id="6514685">)</span>&nbsp;<span class="ident" id="6514687">Image</span><br>
<span class="lineno"></span><span class="op" id="6514693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6514696">func</span>&nbsp;<span class="ident" id="6514701">cmp</span><span class="op" id="6514704">(</span><span class="ident" id="6514705">t</span>&nbsp;<span class="op" id="6514707">*</span><span class="ident" id="6514708">testing</span><span class="op" id="6514715">.</span><span class="ident" id="6514716">T</span><span class="op" id="6514717">,</span>&nbsp;<span class="ident" id="6514719">cm</span>&nbsp;<span class="ident" id="6514722">color</span><span class="op" id="6514727">.</span><span class="ident" id="6514728">Model</span><span class="op" id="6514733">,</span>&nbsp;<span class="ident" id="6514735">c0</span><span class="op" id="6514737">,</span>&nbsp;<span class="ident" id="6514739">c1</span>&nbsp;<span class="ident" id="6514742">color</span><span class="op" id="6514747">.</span><span class="ident" id="6514748">Color</span><span class="op" id="6514753">)</span>&nbsp;<span class="builtintype" id="6514755">bool</span>&nbsp;<span class="op" id="6514760">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514763">r0</span><span class="op" id="6514765">,</span>&nbsp;<span class="ident" id="6514767">g0</span><span class="op" id="6514769">,</span>&nbsp;<span class="ident" id="6514771">b0</span><span class="op" id="6514773">,</span>&nbsp;<span class="ident" id="6514775">a0</span>&nbsp;<span class="op" id="6514778">:=</span>&nbsp;<span class="ident" id="6514781">cm</span><span class="op" id="6514783">.</span><span class="ident" id="6514784">Convert</span><span class="op" id="6514791">(</span><span class="ident" id="6514792">c0</span><span class="op" id="6514794">)</span><span class="op" id="6514795">.</span><span class="ident" id="6514796">RGBA</span><span class="op" id="6514800">(</span><span class="op" id="6514801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514804">r1</span><span class="op" id="6514806">,</span>&nbsp;<span class="ident" id="6514808">g1</span><span class="op" id="6514810">,</span>&nbsp;<span class="ident" id="6514812">b1</span><span class="op" id="6514814">,</span>&nbsp;<span class="ident" id="6514816">a1</span>&nbsp;<span class="op" id="6514819">:=</span>&nbsp;<span class="ident" id="6514822">cm</span><span class="op" id="6514824">.</span><span class="ident" id="6514825">Convert</span><span class="op" id="6514832">(</span><span class="ident" id="6514833">c1</span><span class="op" id="6514835">)</span><span class="op" id="6514836">.</span><span class="ident" id="6514837">RGBA</span><span class="op" id="6514841">(</span><span class="op" id="6514842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514845">return</span>&nbsp;<span class="ident" id="6514852">r0</span>&nbsp;<span class="op" id="6514855">==</span>&nbsp;<span class="ident" id="6514858">r1</span>&nbsp;<span class="op" id="6514861">&amp;&amp;</span>&nbsp;<span class="ident" id="6514864">g0</span>&nbsp;<span class="op" id="6514867">==</span>&nbsp;<span class="ident" id="6514870">g1</span>&nbsp;<span class="op" id="6514873">&amp;&amp;</span>&nbsp;<span class="ident" id="6514876">b0</span>&nbsp;<span class="op" id="6514879">==</span>&nbsp;<span class="ident" id="6514882">b1</span>&nbsp;<span class="op" id="6514885">&amp;&amp;</span>&nbsp;<span class="ident" id="6514888">a0</span>&nbsp;<span class="op" id="6514891">==</span>&nbsp;<span class="ident" id="6514894">a1</span><br>
<span class="lineno"></span><span class="op" id="6514897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6514900">func</span>&nbsp;<span class="ident" id="6514905">TestImage</span><span class="op" id="6514914">(</span><span class="ident" id="6514915">t</span>&nbsp;<span class="op" id="6514917">*</span><span class="ident" id="6514918">testing</span><span class="op" id="6514925">.</span><span class="ident" id="6514926">T</span><span class="op" id="6514927">)</span>&nbsp;<span class="op" id="6514929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514932">testImage</span>&nbsp;<span class="op" id="6514942">:=</span>&nbsp;<span class="op" id="6514945">[</span><span class="op" id="6514946">]</span><span class="ident" id="6514947">image</span><span class="op" id="6514952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514956">NewRGBA</span><span class="op" id="6514963">(</span><span class="ident" id="6514964">Rect</span><span class="op" id="6514968">(</span><span class="num" id="6514969">0</span><span class="op" id="6514970">,</span>&nbsp;<span class="num" id="6514972">0</span><span class="op" id="6514973">,</span>&nbsp;<span class="num" id="6514975">10</span><span class="op" id="6514977">,</span>&nbsp;<span class="num" id="6514979">10</span><span class="op" id="6514981">)</span><span class="op" id="6514982">)</span><span class="op" id="6514983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514987">NewRGBA64</span><span class="op" id="6514996">(</span><span class="ident" id="6514997">Rect</span><span class="op" id="6515001">(</span><span class="num" id="6515002">0</span><span class="op" id="6515003">,</span>&nbsp;<span class="num" id="6515005">0</span><span class="op" id="6515006">,</span>&nbsp;<span class="num" id="6515008">10</span><span class="op" id="6515010">,</span>&nbsp;<span class="num" id="6515012">10</span><span class="op" id="6515014">)</span><span class="op" id="6515015">)</span><span class="op" id="6515016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515020">NewNRGBA</span><span class="op" id="6515028">(</span><span class="ident" id="6515029">Rect</span><span class="op" id="6515033">(</span><span class="num" id="6515034">0</span><span class="op" id="6515035">,</span>&nbsp;<span class="num" id="6515037">0</span><span class="op" id="6515038">,</span>&nbsp;<span class="num" id="6515040">10</span><span class="op" id="6515042">,</span>&nbsp;<span class="num" id="6515044">10</span><span class="op" id="6515046">)</span><span class="op" id="6515047">)</span><span class="op" id="6515048">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515052">NewNRGBA64</span><span class="op" id="6515062">(</span><span class="ident" id="6515063">Rect</span><span class="op" id="6515067">(</span><span class="num" id="6515068">0</span><span class="op" id="6515069">,</span>&nbsp;<span class="num" id="6515071">0</span><span class="op" id="6515072">,</span>&nbsp;<span class="num" id="6515074">10</span><span class="op" id="6515076">,</span>&nbsp;<span class="num" id="6515078">10</span><span class="op" id="6515080">)</span><span class="op" id="6515081">)</span><span class="op" id="6515082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515086">NewAlpha</span><span class="op" id="6515094">(</span><span class="ident" id="6515095">Rect</span><span class="op" id="6515099">(</span><span class="num" id="6515100">0</span><span class="op" id="6515101">,</span>&nbsp;<span class="num" id="6515103">0</span><span class="op" id="6515104">,</span>&nbsp;<span class="num" id="6515106">10</span><span class="op" id="6515108">,</span>&nbsp;<span class="num" id="6515110">10</span><span class="op" id="6515112">)</span><span class="op" id="6515113">)</span><span class="op" id="6515114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515118">NewAlpha16</span><span class="op" id="6515128">(</span><span class="ident" id="6515129">Rect</span><span class="op" id="6515133">(</span><span class="num" id="6515134">0</span><span class="op" id="6515135">,</span>&nbsp;<span class="num" id="6515137">0</span><span class="op" id="6515138">,</span>&nbsp;<span class="num" id="6515140">10</span><span class="op" id="6515142">,</span>&nbsp;<span class="num" id="6515144">10</span><span class="op" id="6515146">)</span><span class="op" id="6515147">)</span><span class="op" id="6515148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515152">NewGray</span><span class="op" id="6515159">(</span><span class="ident" id="6515160">Rect</span><span class="op" id="6515164">(</span><span class="num" id="6515165">0</span><span class="op" id="6515166">,</span>&nbsp;<span class="num" id="6515168">0</span><span class="op" id="6515169">,</span>&nbsp;<span class="num" id="6515171">10</span><span class="op" id="6515173">,</span>&nbsp;<span class="num" id="6515175">10</span><span class="op" id="6515177">)</span><span class="op" id="6515178">)</span><span class="op" id="6515179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515183">NewGray16</span><span class="op" id="6515192">(</span><span class="ident" id="6515193">Rect</span><span class="op" id="6515197">(</span><span class="num" id="6515198">0</span><span class="op" id="6515199">,</span>&nbsp;<span class="num" id="6515201">0</span><span class="op" id="6515202">,</span>&nbsp;<span class="num" id="6515204">10</span><span class="op" id="6515206">,</span>&nbsp;<span class="num" id="6515208">10</span><span class="op" id="6515210">)</span><span class="op" id="6515211">)</span><span class="op" id="6515212">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515216">NewPaletted</span><span class="op" id="6515227">(</span><span class="ident" id="6515228">Rect</span><span class="op" id="6515232">(</span><span class="num" id="6515233">0</span><span class="op" id="6515234">,</span>&nbsp;<span class="num" id="6515236">0</span><span class="op" id="6515237">,</span>&nbsp;<span class="num" id="6515239">10</span><span class="op" id="6515241">,</span>&nbsp;<span class="num" id="6515243">10</span><span class="op" id="6515245">)</span><span class="op" id="6515246">,</span>&nbsp;<span class="ident" id="6515248">color</span><span class="op" id="6515253">.</span><span class="ident" id="6515254">Palette</span><span class="op" id="6515261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515266">Transparent</span><span class="op" id="6515277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515282">Opaque</span><span class="op" id="6515288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515292">}</span><span class="op" id="6515293">)</span><span class="op" id="6515294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515297">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515300">for</span>&nbsp;<span class="ident" id="6515304">_</span><span class="op" id="6515305">,</span>&nbsp;<span class="ident" id="6515307">m</span>&nbsp;<span class="op" id="6515309">:=</span>&nbsp;<span class="keyword" id="6515312">range</span>&nbsp;<span class="ident" id="6515318">testImage</span>&nbsp;<span class="op" id="6515328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515332">if</span>&nbsp;<span class="op" id="6515335">!</span><span class="ident" id="6515336">Rect</span><span class="op" id="6515340">(</span><span class="num" id="6515341">0</span><span class="op" id="6515342">,</span>&nbsp;<span class="num" id="6515344">0</span><span class="op" id="6515345">,</span>&nbsp;<span class="num" id="6515347">10</span><span class="op" id="6515349">,</span>&nbsp;<span class="num" id="6515351">10</span><span class="op" id="6515353">)</span><span class="op" id="6515354">.</span><span class="ident" id="6515355">Eq</span><span class="op" id="6515357">(</span><span class="ident" id="6515358">m</span><span class="op" id="6515359">.</span><span class="ident" id="6515360">Bounds</span><span class="op" id="6515366">(</span><span class="op" id="6515367">)</span><span class="op" id="6515368">)</span>&nbsp;<span class="op" id="6515370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515375">t</span><span class="op" id="6515376">.</span><span class="ident" id="6515377">Errorf</span><span class="op" id="6515383">(</span><span class="string" id="6515384">&#34;%T:&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6515412">,</span>&nbsp;<span class="ident" id="6515414">m</span><span class="op" id="6515415">,</span>&nbsp;<span class="ident" id="6515417">Rect</span><span class="op" id="6515421">(</span><span class="num" id="6515422">0</span><span class="op" id="6515423">,</span>&nbsp;<span class="num" id="6515425">0</span><span class="op" id="6515426">,</span>&nbsp;<span class="num" id="6515428">10</span><span class="op" id="6515430">,</span>&nbsp;<span class="num" id="6515432">10</span><span class="op" id="6515434">)</span><span class="op" id="6515435">,</span>&nbsp;<span class="ident" id="6515437">m</span><span class="op" id="6515438">.</span><span class="ident" id="6515439">Bounds</span><span class="op" id="6515445">(</span><span class="op" id="6515446">)</span><span class="op" id="6515447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515452">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515463">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515467">if</span>&nbsp;<span class="op" id="6515470">!</span><span class="ident" id="6515471">cmp</span><span class="op" id="6515474">(</span><span class="ident" id="6515475">t</span><span class="op" id="6515476">,</span>&nbsp;<span class="ident" id="6515478">m</span><span class="op" id="6515479">.</span><span class="ident" id="6515480">ColorModel</span><span class="op" id="6515490">(</span><span class="op" id="6515491">)</span><span class="op" id="6515492">,</span>&nbsp;<span class="ident" id="6515494">Transparent</span><span class="op" id="6515505">,</span>&nbsp;<span class="ident" id="6515507">m</span><span class="op" id="6515508">.</span><span class="ident" id="6515509">At</span><span class="op" id="6515511">(</span><span class="num" id="6515512">6</span><span class="op" id="6515513">,</span>&nbsp;<span class="num" id="6515515">3</span><span class="op" id="6515516">)</span><span class="op" id="6515517">)</span>&nbsp;<span class="op" id="6515519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515524">t</span><span class="op" id="6515525">.</span><span class="ident" id="6515526">Errorf</span><span class="op" id="6515532">(</span><span class="string" id="6515533">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6515575">,</span>&nbsp;<span class="ident" id="6515577">m</span><span class="op" id="6515578">,</span>&nbsp;<span class="ident" id="6515580">m</span><span class="op" id="6515581">.</span><span class="ident" id="6515582">At</span><span class="op" id="6515584">(</span><span class="num" id="6515585">6</span><span class="op" id="6515586">,</span>&nbsp;<span class="num" id="6515588">3</span><span class="op" id="6515589">)</span><span class="op" id="6515590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515595">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515610">m</span><span class="op" id="6515611">.</span><span class="ident" id="6515612">Set</span><span class="op" id="6515615">(</span><span class="num" id="6515616">6</span><span class="op" id="6515617">,</span>&nbsp;<span class="num" id="6515619">3</span><span class="op" id="6515620">,</span>&nbsp;<span class="ident" id="6515622">Opaque</span><span class="op" id="6515628">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515632">if</span>&nbsp;<span class="op" id="6515635">!</span><span class="ident" id="6515636">cmp</span><span class="op" id="6515639">(</span><span class="ident" id="6515640">t</span><span class="op" id="6515641">,</span>&nbsp;<span class="ident" id="6515643">m</span><span class="op" id="6515644">.</span><span class="ident" id="6515645">ColorModel</span><span class="op" id="6515655">(</span><span class="op" id="6515656">)</span><span class="op" id="6515657">,</span>&nbsp;<span class="ident" id="6515659">Opaque</span><span class="op" id="6515665">,</span>&nbsp;<span class="ident" id="6515667">m</span><span class="op" id="6515668">.</span><span class="ident" id="6515669">At</span><span class="op" id="6515671">(</span><span class="num" id="6515672">6</span><span class="op" id="6515673">,</span>&nbsp;<span class="num" id="6515675">3</span><span class="op" id="6515676">)</span><span class="op" id="6515677">)</span>&nbsp;<span class="op" id="6515679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515684">t</span><span class="op" id="6515685">.</span><span class="ident" id="6515686">Errorf</span><span class="op" id="6515692">(</span><span class="string" id="6515693">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6515739">,</span>&nbsp;<span class="ident" id="6515741">m</span><span class="op" id="6515742">,</span>&nbsp;<span class="ident" id="6515744">m</span><span class="op" id="6515745">.</span><span class="ident" id="6515746">At</span><span class="op" id="6515748">(</span><span class="num" id="6515749">6</span><span class="op" id="6515750">,</span>&nbsp;<span class="num" id="6515752">3</span><span class="op" id="6515753">)</span><span class="op" id="6515754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515759">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515774">if</span>&nbsp;<span class="op" id="6515777">!</span><span class="ident" id="6515778">m</span><span class="op" id="6515779">.</span><span class="ident" id="6515780">SubImage</span><span class="op" id="6515788">(</span><span class="ident" id="6515789">Rect</span><span class="op" id="6515793">(</span><span class="num" id="6515794">6</span><span class="op" id="6515795">,</span>&nbsp;<span class="num" id="6515797">3</span><span class="op" id="6515798">,</span>&nbsp;<span class="num" id="6515800">7</span><span class="op" id="6515801">,</span>&nbsp;<span class="num" id="6515803">4</span><span class="op" id="6515804">)</span><span class="op" id="6515805">)</span><span class="op" id="6515806">.</span><span class="op" id="6515807">(</span><span class="ident" id="6515808">image</span><span class="op" id="6515813">)</span><span class="op" id="6515814">.</span><span class="ident" id="6515815">Opaque</span><span class="op" id="6515821">(</span><span class="op" id="6515822">)</span>&nbsp;<span class="op" id="6515824">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515829">t</span><span class="op" id="6515830">.</span><span class="ident" id="6515831">Errorf</span><span class="op" id="6515837">(</span><span class="string" id="6515838">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3)&nbsp;was&nbsp;not&nbsp;opaque&#34;</span><span class="op" id="6515868">,</span>&nbsp;<span class="ident" id="6515870">m</span><span class="op" id="6515871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515876">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515891">m</span>&nbsp;<span class="op" id="6515893">=</span>&nbsp;<span class="ident" id="6515895">m</span><span class="op" id="6515896">.</span><span class="ident" id="6515897">SubImage</span><span class="op" id="6515905">(</span><span class="ident" id="6515906">Rect</span><span class="op" id="6515910">(</span><span class="num" id="6515911">3</span><span class="op" id="6515912">,</span>&nbsp;<span class="num" id="6515914">2</span><span class="op" id="6515915">,</span>&nbsp;<span class="num" id="6515917">9</span><span class="op" id="6515918">,</span>&nbsp;<span class="num" id="6515920">8</span><span class="op" id="6515921">)</span><span class="op" id="6515922">)</span><span class="op" id="6515923">.</span><span class="op" id="6515924">(</span><span class="ident" id="6515925">image</span><span class="op" id="6515930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515934">if</span>&nbsp;<span class="op" id="6515937">!</span><span class="ident" id="6515938">Rect</span><span class="op" id="6515942">(</span><span class="num" id="6515943">3</span><span class="op" id="6515944">,</span>&nbsp;<span class="num" id="6515946">2</span><span class="op" id="6515947">,</span>&nbsp;<span class="num" id="6515949">9</span><span class="op" id="6515950">,</span>&nbsp;<span class="num" id="6515952">8</span><span class="op" id="6515953">)</span><span class="op" id="6515954">.</span><span class="ident" id="6515955">Eq</span><span class="op" id="6515957">(</span><span class="ident" id="6515958">m</span><span class="op" id="6515959">.</span><span class="ident" id="6515960">Bounds</span><span class="op" id="6515966">(</span><span class="op" id="6515967">)</span><span class="op" id="6515968">)</span>&nbsp;<span class="op" id="6515970">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515975">t</span><span class="op" id="6515976">.</span><span class="ident" id="6515977">Errorf</span><span class="op" id="6515983">(</span><span class="string" id="6515984">&#34;%T:&nbsp;sub-image&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6516022">,</span>&nbsp;<span class="ident" id="6516024">m</span><span class="op" id="6516025">,</span>&nbsp;<span class="ident" id="6516027">Rect</span><span class="op" id="6516031">(</span><span class="num" id="6516032">3</span><span class="op" id="6516033">,</span>&nbsp;<span class="num" id="6516035">2</span><span class="op" id="6516036">,</span>&nbsp;<span class="num" id="6516038">9</span><span class="op" id="6516039">,</span>&nbsp;<span class="num" id="6516041">8</span><span class="op" id="6516042">)</span><span class="op" id="6516043">,</span>&nbsp;<span class="ident" id="6516045">m</span><span class="op" id="6516046">.</span><span class="ident" id="6516047">Bounds</span><span class="op" id="6516053">(</span><span class="op" id="6516054">)</span><span class="op" id="6516055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516060">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516075">if</span>&nbsp;<span class="op" id="6516078">!</span><span class="ident" id="6516079">cmp</span><span class="op" id="6516082">(</span><span class="ident" id="6516083">t</span><span class="op" id="6516084">,</span>&nbsp;<span class="ident" id="6516086">m</span><span class="op" id="6516087">.</span><span class="ident" id="6516088">ColorModel</span><span class="op" id="6516098">(</span><span class="op" id="6516099">)</span><span class="op" id="6516100">,</span>&nbsp;<span class="ident" id="6516102">Opaque</span><span class="op" id="6516108">,</span>&nbsp;<span class="ident" id="6516110">m</span><span class="op" id="6516111">.</span><span class="ident" id="6516112">At</span><span class="op" id="6516114">(</span><span class="num" id="6516115">6</span><span class="op" id="6516116">,</span>&nbsp;<span class="num" id="6516118">3</span><span class="op" id="6516119">)</span><span class="op" id="6516120">)</span>&nbsp;<span class="op" id="6516122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516127">t</span><span class="op" id="6516128">.</span><span class="ident" id="6516129">Errorf</span><span class="op" id="6516135">(</span><span class="string" id="6516136">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6516192">,</span>&nbsp;<span class="ident" id="6516194">m</span><span class="op" id="6516195">,</span>&nbsp;<span class="ident" id="6516197">m</span><span class="op" id="6516198">.</span><span class="ident" id="6516199">At</span><span class="op" id="6516201">(</span><span class="num" id="6516202">6</span><span class="op" id="6516203">,</span>&nbsp;<span class="num" id="6516205">3</span><span class="op" id="6516206">)</span><span class="op" id="6516207">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516212">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516227">if</span>&nbsp;<span class="op" id="6516230">!</span><span class="ident" id="6516231">cmp</span><span class="op" id="6516234">(</span><span class="ident" id="6516235">t</span><span class="op" id="6516236">,</span>&nbsp;<span class="ident" id="6516238">m</span><span class="op" id="6516239">.</span><span class="ident" id="6516240">ColorModel</span><span class="op" id="6516250">(</span><span class="op" id="6516251">)</span><span class="op" id="6516252">,</span>&nbsp;<span class="ident" id="6516254">Transparent</span><span class="op" id="6516265">,</span>&nbsp;<span class="ident" id="6516267">m</span><span class="op" id="6516268">.</span><span class="ident" id="6516269">At</span><span class="op" id="6516271">(</span><span class="num" id="6516272">3</span><span class="op" id="6516273">,</span>&nbsp;<span class="num" id="6516275">3</span><span class="op" id="6516276">)</span><span class="op" id="6516277">)</span>&nbsp;<span class="op" id="6516279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516284">t</span><span class="op" id="6516285">.</span><span class="ident" id="6516286">Errorf</span><span class="op" id="6516292">(</span><span class="string" id="6516293">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6516345">,</span>&nbsp;<span class="ident" id="6516347">m</span><span class="op" id="6516348">,</span>&nbsp;<span class="ident" id="6516350">m</span><span class="op" id="6516351">.</span><span class="ident" id="6516352">At</span><span class="op" id="6516354">(</span><span class="num" id="6516355">3</span><span class="op" id="6516356">,</span>&nbsp;<span class="num" id="6516358">3</span><span class="op" id="6516359">)</span><span class="op" id="6516360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516365">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516380">m</span><span class="op" id="6516381">.</span><span class="ident" id="6516382">Set</span><span class="op" id="6516385">(</span><span class="num" id="6516386">3</span><span class="op" id="6516387">,</span>&nbsp;<span class="num" id="6516389">3</span><span class="op" id="6516390">,</span>&nbsp;<span class="ident" id="6516392">Opaque</span><span class="op" id="6516398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516402">if</span>&nbsp;<span class="op" id="6516405">!</span><span class="ident" id="6516406">cmp</span><span class="op" id="6516409">(</span><span class="ident" id="6516410">t</span><span class="op" id="6516411">,</span>&nbsp;<span class="ident" id="6516413">m</span><span class="op" id="6516414">.</span><span class="ident" id="6516415">ColorModel</span><span class="op" id="6516425">(</span><span class="op" id="6516426">)</span><span class="op" id="6516427">,</span>&nbsp;<span class="ident" id="6516429">Opaque</span><span class="op" id="6516435">,</span>&nbsp;<span class="ident" id="6516437">m</span><span class="op" id="6516438">.</span><span class="ident" id="6516439">At</span><span class="op" id="6516441">(</span><span class="num" id="6516442">3</span><span class="op" id="6516443">,</span>&nbsp;<span class="num" id="6516445">3</span><span class="op" id="6516446">)</span><span class="op" id="6516447">)</span>&nbsp;<span class="op" id="6516449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516454">t</span><span class="op" id="6516455">.</span><span class="ident" id="6516456">Errorf</span><span class="op" id="6516462">(</span><span class="string" id="6516463">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6516519">,</span>&nbsp;<span class="ident" id="6516521">m</span><span class="op" id="6516522">,</span>&nbsp;<span class="ident" id="6516524">m</span><span class="op" id="6516525">.</span><span class="ident" id="6516526">At</span><span class="op" id="6516528">(</span><span class="num" id="6516529">3</span><span class="op" id="6516530">,</span>&nbsp;<span class="num" id="6516532">3</span><span class="op" id="6516533">)</span><span class="op" id="6516534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516539">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6516554">//&nbsp;Test&nbsp;that&nbsp;taking&nbsp;an&nbsp;empty&nbsp;sub-image&nbsp;starting&nbsp;at&nbsp;a&nbsp;corner&nbsp;does&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516632">m</span><span class="op" id="6516633">.</span><span class="ident" id="6516634">SubImage</span><span class="op" id="6516642">(</span><span class="ident" id="6516643">Rect</span><span class="op" id="6516647">(</span><span class="num" id="6516648">0</span><span class="op" id="6516649">,</span>&nbsp;<span class="num" id="6516651">0</span><span class="op" id="6516652">,</span>&nbsp;<span class="num" id="6516654">0</span><span class="op" id="6516655">,</span>&nbsp;<span class="num" id="6516657">0</span><span class="op" id="6516658">)</span><span class="op" id="6516659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516663">m</span><span class="op" id="6516664">.</span><span class="ident" id="6516665">SubImage</span><span class="op" id="6516673">(</span><span class="ident" id="6516674">Rect</span><span class="op" id="6516678">(</span><span class="num" id="6516679">10</span><span class="op" id="6516681">,</span>&nbsp;<span class="num" id="6516683">0</span><span class="op" id="6516684">,</span>&nbsp;<span class="num" id="6516686">10</span><span class="op" id="6516688">,</span>&nbsp;<span class="num" id="6516690">0</span><span class="op" id="6516691">)</span><span class="op" id="6516692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516696">m</span><span class="op" id="6516697">.</span><span class="ident" id="6516698">SubImage</span><span class="op" id="6516706">(</span><span class="ident" id="6516707">Rect</span><span class="op" id="6516711">(</span><span class="num" id="6516712">0</span><span class="op" id="6516713">,</span>&nbsp;<span class="num" id="6516715">10</span><span class="op" id="6516717">,</span>&nbsp;<span class="num" id="6516719">0</span><span class="op" id="6516720">,</span>&nbsp;<span class="num" id="6516722">10</span><span class="op" id="6516724">)</span><span class="op" id="6516725">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516729">m</span><span class="op" id="6516730">.</span><span class="ident" id="6516731">SubImage</span><span class="op" id="6516739">(</span><span class="ident" id="6516740">Rect</span><span class="op" id="6516744">(</span><span class="num" id="6516745">10</span><span class="op" id="6516747">,</span>&nbsp;<span class="num" id="6516749">10</span><span class="op" id="6516751">,</span>&nbsp;<span class="num" id="6516753">10</span><span class="op" id="6516755">,</span>&nbsp;<span class="num" id="6516757">10</span><span class="op" id="6516759">)</span><span class="op" id="6516760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516763">}</span><br>
<span class="lineno"></span><span class="op" id="6516765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6516768">func</span>&nbsp;<span class="ident" id="6516773">Test16BitsPerColorChannel</span><span class="op" id="6516798">(</span><span class="ident" id="6516799">t</span>&nbsp;<span class="op" id="6516801">*</span><span class="ident" id="6516802">testing</span><span class="op" id="6516809">.</span><span class="ident" id="6516810">T</span><span class="op" id="6516811">)</span>&nbsp;<span class="op" id="6516813">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516816">testColorModel</span>&nbsp;<span class="op" id="6516831">:=</span>&nbsp;<span class="op" id="6516834">[</span><span class="op" id="6516835">]</span><span class="ident" id="6516836">color</span><span class="op" id="6516841">.</span><span class="ident" id="6516842">Model</span><span class="op" id="6516847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516851">color</span><span class="op" id="6516856">.</span><span class="ident" id="6516857">RGBA64Model</span><span class="op" id="6516868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516872">color</span><span class="op" id="6516877">.</span><span class="ident" id="6516878">NRGBA64Model</span><span class="op" id="6516890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516894">color</span><span class="op" id="6516899">.</span><span class="ident" id="6516900">Alpha16Model</span><span class="op" id="6516912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516916">color</span><span class="op" id="6516921">.</span><span class="ident" id="6516922">Gray16Model</span><span class="op" id="6516933">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516939">for</span>&nbsp;<span class="ident" id="6516943">_</span><span class="op" id="6516944">,</span>&nbsp;<span class="ident" id="6516946">cm</span>&nbsp;<span class="op" id="6516949">:=</span>&nbsp;<span class="keyword" id="6516952">range</span>&nbsp;<span class="ident" id="6516958">testColorModel</span>&nbsp;<span class="op" id="6516973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516977">c</span>&nbsp;<span class="op" id="6516979">:=</span>&nbsp;<span class="ident" id="6516982">cm</span><span class="op" id="6516984">.</span><span class="ident" id="6516985">Convert</span><span class="op" id="6516992">(</span><span class="ident" id="6516993">color</span><span class="op" id="6516998">.</span><span class="ident" id="6516999">RGBA64</span><span class="op" id="6517005">{</span><span class="num" id="6517006">0x1234</span><span class="op" id="6517012">,</span>&nbsp;<span class="num" id="6517014">0x1234</span><span class="op" id="6517020">,</span>&nbsp;<span class="num" id="6517022">0x1234</span><span class="op" id="6517028">,</span>&nbsp;<span class="num" id="6517030">0x1234</span><span class="op" id="6517036">}</span><span class="op" id="6517037">)</span>&nbsp;<span class="comment" id="6517039">//&nbsp;Premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517065">r</span><span class="op" id="6517066">,</span>&nbsp;<span class="ident" id="6517068">_</span><span class="op" id="6517069">,</span>&nbsp;<span class="ident" id="6517071">_</span><span class="op" id="6517072">,</span>&nbsp;<span class="ident" id="6517074">_</span>&nbsp;<span class="op" id="6517076">:=</span>&nbsp;<span class="ident" id="6517079">c</span><span class="op" id="6517080">.</span><span class="ident" id="6517081">RGBA</span><span class="op" id="6517085">(</span><span class="op" id="6517086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517090">if</span>&nbsp;<span class="ident" id="6517093">r</span>&nbsp;<span class="op" id="6517095">!=</span>&nbsp;<span class="num" id="6517098">0x1234</span>&nbsp;<span class="op" id="6517105">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517110">t</span><span class="op" id="6517111">.</span><span class="ident" id="6517112">Errorf</span><span class="op" id="6517118">(</span><span class="string" id="6517119">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="6517157">,</span>&nbsp;<span class="ident" id="6517159">c</span><span class="op" id="6517160">,</span>&nbsp;<span class="num" id="6517162">0x1234</span><span class="op" id="6517168">,</span>&nbsp;<span class="ident" id="6517170">r</span><span class="op" id="6517171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517176">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517193">testImage</span>&nbsp;<span class="op" id="6517203">:=</span>&nbsp;<span class="op" id="6517206">[</span><span class="op" id="6517207">]</span><span class="ident" id="6517208">image</span><span class="op" id="6517213">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517217">NewRGBA64</span><span class="op" id="6517226">(</span><span class="ident" id="6517227">Rect</span><span class="op" id="6517231">(</span><span class="num" id="6517232">0</span><span class="op" id="6517233">,</span>&nbsp;<span class="num" id="6517235">0</span><span class="op" id="6517236">,</span>&nbsp;<span class="num" id="6517238">10</span><span class="op" id="6517240">,</span>&nbsp;<span class="num" id="6517242">10</span><span class="op" id="6517244">)</span><span class="op" id="6517245">)</span><span class="op" id="6517246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517250">NewNRGBA64</span><span class="op" id="6517260">(</span><span class="ident" id="6517261">Rect</span><span class="op" id="6517265">(</span><span class="num" id="6517266">0</span><span class="op" id="6517267">,</span>&nbsp;<span class="num" id="6517269">0</span><span class="op" id="6517270">,</span>&nbsp;<span class="num" id="6517272">10</span><span class="op" id="6517274">,</span>&nbsp;<span class="num" id="6517276">10</span><span class="op" id="6517278">)</span><span class="op" id="6517279">)</span><span class="op" id="6517280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517284">NewAlpha16</span><span class="op" id="6517294">(</span><span class="ident" id="6517295">Rect</span><span class="op" id="6517299">(</span><span class="num" id="6517300">0</span><span class="op" id="6517301">,</span>&nbsp;<span class="num" id="6517303">0</span><span class="op" id="6517304">,</span>&nbsp;<span class="num" id="6517306">10</span><span class="op" id="6517308">,</span>&nbsp;<span class="num" id="6517310">10</span><span class="op" id="6517312">)</span><span class="op" id="6517313">)</span><span class="op" id="6517314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517318">NewGray16</span><span class="op" id="6517327">(</span><span class="ident" id="6517328">Rect</span><span class="op" id="6517332">(</span><span class="num" id="6517333">0</span><span class="op" id="6517334">,</span>&nbsp;<span class="num" id="6517336">0</span><span class="op" id="6517337">,</span>&nbsp;<span class="num" id="6517339">10</span><span class="op" id="6517341">,</span>&nbsp;<span class="num" id="6517343">10</span><span class="op" id="6517345">)</span><span class="op" id="6517346">)</span><span class="op" id="6517347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517350">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517353">for</span>&nbsp;<span class="ident" id="6517357">_</span><span class="op" id="6517358">,</span>&nbsp;<span class="ident" id="6517360">m</span>&nbsp;<span class="op" id="6517362">:=</span>&nbsp;<span class="keyword" id="6517365">range</span>&nbsp;<span class="ident" id="6517371">testImage</span>&nbsp;<span class="op" id="6517381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517385">m</span><span class="op" id="6517386">.</span><span class="ident" id="6517387">Set</span><span class="op" id="6517390">(</span><span class="num" id="6517391">1</span><span class="op" id="6517392">,</span>&nbsp;<span class="num" id="6517394">2</span><span class="op" id="6517395">,</span>&nbsp;<span class="ident" id="6517397">color</span><span class="op" id="6517402">.</span><span class="ident" id="6517403">NRGBA64</span><span class="op" id="6517410">{</span><span class="num" id="6517411">0xffff</span><span class="op" id="6517417">,</span>&nbsp;<span class="num" id="6517419">0xffff</span><span class="op" id="6517425">,</span>&nbsp;<span class="num" id="6517427">0xffff</span><span class="op" id="6517433">,</span>&nbsp;<span class="num" id="6517435">0x1357</span><span class="op" id="6517441">}</span><span class="op" id="6517442">)</span>&nbsp;<span class="comment" id="6517444">//&nbsp;Non-premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517474">r</span><span class="op" id="6517475">,</span>&nbsp;<span class="ident" id="6517477">_</span><span class="op" id="6517478">,</span>&nbsp;<span class="ident" id="6517480">_</span><span class="op" id="6517481">,</span>&nbsp;<span class="ident" id="6517483">_</span>&nbsp;<span class="op" id="6517485">:=</span>&nbsp;<span class="ident" id="6517488">m</span><span class="op" id="6517489">.</span><span class="ident" id="6517490">At</span><span class="op" id="6517492">(</span><span class="num" id="6517493">1</span><span class="op" id="6517494">,</span>&nbsp;<span class="num" id="6517496">2</span><span class="op" id="6517497">)</span><span class="op" id="6517498">.</span><span class="ident" id="6517499">RGBA</span><span class="op" id="6517503">(</span><span class="op" id="6517504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517508">if</span>&nbsp;<span class="ident" id="6517511">r</span>&nbsp;<span class="op" id="6517513">!=</span>&nbsp;<span class="num" id="6517516">0x1357</span>&nbsp;<span class="op" id="6517523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517528">t</span><span class="op" id="6517529">.</span><span class="ident" id="6517530">Errorf</span><span class="op" id="6517536">(</span><span class="string" id="6517537">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="6517575">,</span>&nbsp;<span class="ident" id="6517577">m</span><span class="op" id="6517578">,</span>&nbsp;<span class="num" id="6517580">0x1357</span><span class="op" id="6517586">,</span>&nbsp;<span class="ident" id="6517588">r</span><span class="op" id="6517589">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517594">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517608">}</span><br>
<span class="lineno"></span><span class="op" id="6517610">}</span>
</div>
</body>
</html>
