<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5892729">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5892784">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5892838">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5892889">package</span>&nbsp;<span class="ident" id="5892897">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5892902">import</span>&nbsp;<span class="op" id="5892909">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5892912">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5892924">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5892931">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5892934">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5893014">//&nbsp;Export&nbsp;filtering</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5893035">//&nbsp;exportFilter&nbsp;is&nbsp;a&nbsp;special&nbsp;filter&nbsp;function&nbsp;to&nbsp;extract&nbsp;exported&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="5893107">func</span>&nbsp;<span class="ident" id="5893112">exportFilter</span><span class="op" id="5893124">(</span><span class="ident" id="5893125">name</span>&nbsp;<span class="builtintype" id="5893130">string</span><span class="op" id="5893136">)</span>&nbsp;<span class="builtintype" id="5893138">bool</span>&nbsp;<span class="op" id="5893143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5893146">return</span>&nbsp;<span class="ident" id="5893153"><a href="/go/ast/ast.go.html#5868844">IsExported</a></span><span class="op" id="5893163">(</span><span class="ident" id="5893164"><a href="/go/ast/filter.go.html#5893125">name</a></span><span class="op" id="5893168">)</span><br>
<span class="lineno"></span><span class="op" id="5893170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5893173">//&nbsp;FileExports&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;source&nbsp;file&nbsp;in&nbsp;place&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5893242">//&nbsp;only&nbsp;exported&nbsp;nodes&nbsp;remain:&nbsp;all&nbsp;top-level&nbsp;identifiers&nbsp;which&nbsp;are&nbsp;not&nbsp;exported</span><br>
<span class="lineno"></span><span class="comment" id="5893322">//&nbsp;and&nbsp;their&nbsp;associated&nbsp;information&nbsp;(such&nbsp;as&nbsp;type,&nbsp;initial&nbsp;value,&nbsp;or&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="5893400">//&nbsp;body)&nbsp;are&nbsp;removed.&nbsp;Non-exported&nbsp;fields&nbsp;and&nbsp;methods&nbsp;of&nbsp;exported&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5893476">//&nbsp;stripped.&nbsp;The&nbsp;File.Comments&nbsp;list&nbsp;is&nbsp;not&nbsp;changed.</span><br>
<span class="lineno">25</span><span class="comment" id="5893528">//</span><br>
<span class="lineno"></span><span class="comment" id="5893531">//&nbsp;FileExports&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;exported&nbsp;declarations;</span><br>
<span class="lineno"></span><span class="comment" id="5893595">//&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5893626">//</span><br>
<span class="lineno"></span><span class="keyword" id="5893629">func</span>&nbsp;<span class="ident" id="5893634">FileExports</span><span class="op" id="5893645">(</span><span class="ident" id="5893646">src</span>&nbsp;<span class="op" id="5893650">*</span><span class="ident" id="5893651"><a href="/go/ast/ast.go.html#5882563">File</a></span><span class="op" id="5893655">)</span>&nbsp;<span class="builtintype" id="5893657">bool</span>&nbsp;<span class="op" id="5893662">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5893665">return</span>&nbsp;<span class="ident" id="5893672"><a href="/go/ast/filter.go.html#5898492">filterFile</a></span><span class="op" id="5893682">(</span><span class="ident" id="5893683"><a href="/go/ast/filter.go.html#5893646">src</a></span><span class="op" id="5893686">,</span>&nbsp;<span class="ident" id="5893688"><a href="/go/ast/filter.go.html#5893112">exportFilter</a></span><span class="op" id="5893700">,</span>&nbsp;<span class="ident" id="5893702">true</span><span class="op" id="5893706">)</span><br>
<span class="lineno"></span><span class="op" id="5893708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5893711">//&nbsp;PackageExports&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;package&nbsp;in&nbsp;place&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5893779">//&nbsp;only&nbsp;exported&nbsp;nodes&nbsp;remain.&nbsp;The&nbsp;pkg.Files&nbsp;list&nbsp;is&nbsp;not&nbsp;changed,&nbsp;so&nbsp;that</span><br>
<span class="lineno">35</span><span class="comment" id="5893853">//&nbsp;file&nbsp;names&nbsp;and&nbsp;top-level&nbsp;package&nbsp;comments&nbsp;don&#39;t&nbsp;get&nbsp;lost.</span><br>
<span class="lineno"></span><span class="comment" id="5893914">//</span><br>
<span class="lineno"></span><span class="comment" id="5893917">//&nbsp;PackageExports&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;exported&nbsp;declarations;</span><br>
<span class="lineno"></span><span class="comment" id="5893984">//&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5894015">//</span><br>
<span class="lineno">40</span><span class="keyword" id="5894018">func</span>&nbsp;<span class="ident" id="5894023">PackageExports</span><span class="op" id="5894037">(</span><span class="ident" id="5894038">pkg</span>&nbsp;<span class="op" id="5894042">*</span><span class="ident" id="5894043"><a href="/go/ast/ast.go.html#5883332">Package</a></span><span class="op" id="5894050">)</span>&nbsp;<span class="builtintype" id="5894052">bool</span>&nbsp;<span class="op" id="5894057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894060">return</span>&nbsp;<span class="ident" id="5894067"><a href="/go/ast/filter.go.html#5899345">filterPackage</a></span><span class="op" id="5894080">(</span><span class="ident" id="5894081"><a href="/go/ast/filter.go.html#5894038">pkg</a></span><span class="op" id="5894084">,</span>&nbsp;<span class="ident" id="5894086"><a href="/go/ast/filter.go.html#5893112">exportFilter</a></span><span class="op" id="5894098">,</span>&nbsp;<span class="ident" id="5894100">true</span><span class="op" id="5894104">)</span><br>
<span class="lineno"></span><span class="op" id="5894106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5894109">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">45</span><span class="comment" id="5894189">//&nbsp;General&nbsp;filtering</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5894211">type</span>&nbsp;<span class="ident" id="5894216">Filter</span>&nbsp;<span class="keyword" id="5894223">func</span><span class="op" id="5894227">(</span><span class="builtintype" id="5894228">string</span><span class="op" id="5894234">)</span>&nbsp;<span class="builtintype" id="5894236">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5894242">func</span>&nbsp;<span class="ident" id="5894247">filterIdentList</span><span class="op" id="5894262">(</span><span class="ident" id="5894263">list</span>&nbsp;<span class="op" id="5894268">[</span><span class="op" id="5894269">]</span><span class="op" id="5894270">*</span><span class="ident" id="5894271"><a href="/go/ast/ast.go.html#5858933">Ident</a></span><span class="op" id="5894276">,</span>&nbsp;<span class="ident" id="5894278">f</span>&nbsp;<span class="ident" id="5894280"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5894286">)</span>&nbsp;<span class="op" id="5894288">[</span><span class="op" id="5894289">]</span><span class="op" id="5894290">*</span><span class="ident" id="5894291"><a href="/go/ast/ast.go.html#5858933">Ident</a></span>&nbsp;<span class="op" id="5894297">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5894300">j</span>&nbsp;<span class="op" id="5894302">:=</span>&nbsp;<span class="num" id="5894305">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894308">for</span>&nbsp;<span class="ident" id="5894312">_</span><span class="op" id="5894313">,</span>&nbsp;<span class="ident" id="5894315">x</span>&nbsp;<span class="op" id="5894317">:=</span>&nbsp;<span class="keyword" id="5894320">range</span>&nbsp;<span class="ident" id="5894326"><a href="/go/ast/filter.go.html#5894263">list</a></span>&nbsp;<span class="op" id="5894331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894335">if</span>&nbsp;<span class="ident" id="5894338"><a href="/go/ast/filter.go.html#5894278">f</a></span><span class="op" id="5894339">(</span><span class="ident" id="5894340"><a href="/go/ast/filter.go.html#5894315">x</a></span><span class="op" id="5894341">.</span><span class="ident" id="5894342">Name</span><span class="op" id="5894346">)</span>&nbsp;<span class="op" id="5894348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5894353"><a href="/go/ast/filter.go.html#5894263">list</a></span><span class="op" id="5894357">[</span><span class="ident" id="5894358"><a href="/go/ast/filter.go.html#5894300">j</a></span><span class="op" id="5894359">]</span>&nbsp;<span class="op" id="5894361">=</span>&nbsp;<span class="ident" id="5894363"><a href="/go/ast/filter.go.html#5894315">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5894368"><a href="/go/ast/filter.go.html#5894300">j</a></span><span class="op" id="5894369">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5894374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5894377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894380">return</span>&nbsp;<span class="ident" id="5894387"><a href="/go/ast/filter.go.html#5894263">list</a></span><span class="op" id="5894391">[</span><span class="num" id="5894392">0</span><span class="op" id="5894393">:</span><span class="ident" id="5894394"><a href="/go/ast/filter.go.html#5894300">j</a></span><span class="op" id="5894395">]</span><br>
<span class="lineno"></span><span class="op" id="5894397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="5894400">//&nbsp;fieldName&nbsp;assumes&nbsp;that&nbsp;x&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;an&nbsp;anonymous&nbsp;field&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5894466">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;field&nbsp;name.&nbsp;If&nbsp;x&nbsp;is&nbsp;not&nbsp;an&nbsp;acceptable</span><br>
<span class="lineno"></span><span class="comment" id="5894533">//&nbsp;anonymous&nbsp;field,&nbsp;the&nbsp;result&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="5894572">//</span><br>
<span class="lineno"></span><span class="keyword" id="5894575">func</span>&nbsp;<span class="ident" id="5894580">fieldName</span><span class="op" id="5894589">(</span><span class="ident" id="5894590">x</span>&nbsp;<span class="ident" id="5894592"><a href="/go/ast/ast.go.html#5853932">Expr</a></span><span class="op" id="5894596">)</span>&nbsp;<span class="op" id="5894598">*</span><span class="ident" id="5894599"><a href="/go/ast/ast.go.html#5858933">Ident</a></span>&nbsp;<span class="op" id="5894605">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894608">switch</span>&nbsp;<span class="ident" id="5894615">t</span>&nbsp;<span class="op" id="5894617">:=</span>&nbsp;<span class="ident" id="5894620"><a href="/go/ast/filter.go.html#5894590">x</a></span><span class="op" id="5894621">.</span><span class="op" id="5894622">(</span><span class="keyword" id="5894623">type</span><span class="op" id="5894627">)</span>&nbsp;<span class="op" id="5894629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894632">case</span>&nbsp;<span class="op" id="5894637">*</span><span class="ident" id="5894638"><a href="/go/ast/ast.go.html#5858933">Ident</a></span><span class="op" id="5894643">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894647">return</span>&nbsp;<span class="ident" id="5894654"><a href="/go/ast/filter.go.html#5894615">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894657">case</span>&nbsp;<span class="op" id="5894662">*</span><span class="ident" id="5894663"><a href="/go/ast/ast.go.html#5860335">SelectorExpr</a></span><span class="op" id="5894675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894679">if</span>&nbsp;<span class="ident" id="5894682">_</span><span class="op" id="5894683">,</span>&nbsp;<span class="ident" id="5894685">ok</span>&nbsp;<span class="op" id="5894688">:=</span>&nbsp;<span class="ident" id="5894691"><a href="/go/ast/filter.go.html#5894615">t</a></span><span class="op" id="5894692">.</span><span class="ident" id="5894693">X</span><span class="op" id="5894694">.</span><span class="op" id="5894695">(</span><span class="op" id="5894696">*</span><span class="ident" id="5894697"><a href="/go/ast/ast.go.html#5858933">Ident</a></span><span class="op" id="5894702">)</span><span class="op" id="5894703">;</span>&nbsp;<span class="ident" id="5894705"><a href="/go/ast/filter.go.html#5894685">ok</a></span>&nbsp;<span class="op" id="5894708">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894713">return</span>&nbsp;<span class="ident" id="5894720"><a href="/go/ast/filter.go.html#5894615">t</a></span><span class="op" id="5894721">.</span><span class="ident" id="5894722">Sel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5894728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894731">case</span>&nbsp;<span class="op" id="5894736">*</span><span class="ident" id="5894737"><a href="/go/ast/ast.go.html#5861854">StarExpr</a></span><span class="op" id="5894745">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894749">return</span>&nbsp;<span class="ident" id="5894756"><a href="/go/ast/filter.go.html#5894580">fieldName</a></span><span class="op" id="5894765">(</span><span class="ident" id="5894766"><a href="/go/ast/filter.go.html#5894615">t</a></span><span class="op" id="5894767">.</span><span class="ident" id="5894768">X</span><span class="op" id="5894769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5894772">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894775">return</span>&nbsp;<span class="ident" id="5894782">nil</span><br>
<span class="lineno"></span><span class="op" id="5894786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5894789">func</span>&nbsp;<span class="ident" id="5894794">filterFieldList</span><span class="op" id="5894809">(</span><span class="ident" id="5894810">fields</span>&nbsp;<span class="op" id="5894817">*</span><span class="ident" id="5894818"><a href="/go/ast/ast.go.html#5857552">FieldList</a></span><span class="op" id="5894827">,</span>&nbsp;<span class="ident" id="5894829">filter</span>&nbsp;<span class="ident" id="5894836"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5894842">,</span>&nbsp;<span class="ident" id="5894844">export</span>&nbsp;<span class="builtintype" id="5894851">bool</span><span class="op" id="5894855">)</span>&nbsp;<span class="op" id="5894857">(</span><span class="ident" id="5894858">removedFields</span>&nbsp;<span class="builtintype" id="5894872">bool</span><span class="op" id="5894876">)</span>&nbsp;<span class="op" id="5894878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894881">if</span>&nbsp;<span class="ident" id="5894884"><a href="/go/ast/filter.go.html#5894810">fields</a></span>&nbsp;<span class="op" id="5894891">==</span>&nbsp;<span class="ident" id="5894894">nil</span>&nbsp;<span class="op" id="5894898">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894902">return</span>&nbsp;<span class="ident" id="5894909">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5894916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5894919">list</span>&nbsp;<span class="op" id="5894924">:=</span>&nbsp;<span class="ident" id="5894927"><a href="/go/ast/filter.go.html#5894810">fields</a></span><span class="op" id="5894933">.</span><span class="ident" id="5894934">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5894940">j</span>&nbsp;<span class="op" id="5894942">:=</span>&nbsp;<span class="num" id="5894945">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894948">for</span>&nbsp;<span class="ident" id="5894952">_</span><span class="op" id="5894953">,</span>&nbsp;<span class="ident" id="5894955">f</span>&nbsp;<span class="op" id="5894957">:=</span>&nbsp;<span class="keyword" id="5894960">range</span>&nbsp;<span class="ident" id="5894966"><a href="/go/ast/filter.go.html#5894919">list</a></span>&nbsp;<span class="op" id="5894971">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5894975">keepField</span>&nbsp;<span class="op" id="5894985">:=</span>&nbsp;<span class="ident" id="5894988">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5894996">if</span>&nbsp;<span class="builtinfunc" id="5894999">len</span><span class="op" id="5895002">(</span><span class="ident" id="5895003"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895004">.</span><span class="ident" id="5895005">Names</span><span class="op" id="5895010">)</span>&nbsp;<span class="op" id="5895012">==</span>&nbsp;<span class="num" id="5895015">0</span>&nbsp;<span class="op" id="5895017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5895022">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895044">name</span>&nbsp;<span class="op" id="5895049">:=</span>&nbsp;<span class="ident" id="5895052"><a href="/go/ast/filter.go.html#5894580">fieldName</a></span><span class="op" id="5895061">(</span><span class="ident" id="5895062"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895063">.</span><span class="ident" id="5895064">Type</span><span class="op" id="5895068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895073"><a href="/go/ast/filter.go.html#5894975">keepField</a></span>&nbsp;<span class="op" id="5895083">=</span>&nbsp;<span class="ident" id="5895085"><a href="/go/ast/filter.go.html#5895044">name</a></span>&nbsp;<span class="op" id="5895090">!=</span>&nbsp;<span class="ident" id="5895093">nil</span>&nbsp;<span class="op" id="5895097">&amp;&amp;</span>&nbsp;<span class="ident" id="5895100"><a href="/go/ast/filter.go.html#5894829">filter</a></span><span class="op" id="5895106">(</span><span class="ident" id="5895107"><a href="/go/ast/filter.go.html#5895044">name</a></span><span class="op" id="5895111">.</span><span class="ident" id="5895112">Name</span><span class="op" id="5895116">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895120">}</span>&nbsp;<span class="keyword" id="5895122">else</span>&nbsp;<span class="op" id="5895127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895132">n</span>&nbsp;<span class="op" id="5895134">:=</span>&nbsp;<span class="builtinfunc" id="5895137">len</span><span class="op" id="5895140">(</span><span class="ident" id="5895141"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895142">.</span><span class="ident" id="5895143">Names</span><span class="op" id="5895148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895153"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895154">.</span><span class="ident" id="5895155">Names</span>&nbsp;<span class="op" id="5895161">=</span>&nbsp;<span class="ident" id="5895163"><a href="/go/ast/filter.go.html#5894247">filterIdentList</a></span><span class="op" id="5895178">(</span><span class="ident" id="5895179"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895180">.</span><span class="ident" id="5895181">Names</span><span class="op" id="5895186">,</span>&nbsp;<span class="ident" id="5895188"><a href="/go/ast/filter.go.html#5894829">filter</a></span><span class="op" id="5895194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895199">if</span>&nbsp;<span class="builtinfunc" id="5895202">len</span><span class="op" id="5895205">(</span><span class="ident" id="5895206"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895207">.</span><span class="ident" id="5895208">Names</span><span class="op" id="5895213">)</span>&nbsp;<span class="op" id="5895215">&lt;</span>&nbsp;<span class="ident" id="5895217"><a href="/go/ast/filter.go.html#5895132">n</a></span>&nbsp;<span class="op" id="5895219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895225"><a href="/go/ast/filter.go.html#5894858">removedFields</a></span>&nbsp;<span class="op" id="5895239">=</span>&nbsp;<span class="ident" id="5895241">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895254"><a href="/go/ast/filter.go.html#5894975">keepField</a></span>&nbsp;<span class="op" id="5895264">=</span>&nbsp;<span class="builtinfunc" id="5895266">len</span><span class="op" id="5895269">(</span><span class="ident" id="5895270"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895271">.</span><span class="ident" id="5895272">Names</span><span class="op" id="5895277">)</span>&nbsp;<span class="op" id="5895279">&gt;</span>&nbsp;<span class="num" id="5895281">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895289">if</span>&nbsp;<span class="ident" id="5895292"><a href="/go/ast/filter.go.html#5894975">keepField</a></span>&nbsp;<span class="op" id="5895302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895307">if</span>&nbsp;<span class="ident" id="5895310"><a href="/go/ast/filter.go.html#5894844">export</a></span>&nbsp;<span class="op" id="5895317">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895323"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5895333">(</span><span class="ident" id="5895334"><a href="/go/ast/filter.go.html#5894955">f</a></span><span class="op" id="5895335">.</span><span class="ident" id="5895336">Type</span><span class="op" id="5895340">,</span>&nbsp;<span class="ident" id="5895342"><a href="/go/ast/filter.go.html#5894829">filter</a></span><span class="op" id="5895348">,</span>&nbsp;<span class="ident" id="5895350"><a href="/go/ast/filter.go.html#5894844">export</a></span><span class="op" id="5895356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895366"><a href="/go/ast/filter.go.html#5894919">list</a></span><span class="op" id="5895370">[</span><span class="ident" id="5895371"><a href="/go/ast/filter.go.html#5894940">j</a></span><span class="op" id="5895372">]</span>&nbsp;<span class="op" id="5895374">=</span>&nbsp;<span class="ident" id="5895376"><a href="/go/ast/filter.go.html#5894955">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895381"><a href="/go/ast/filter.go.html#5894940">j</a></span><span class="op" id="5895382">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895387">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895393">if</span>&nbsp;<span class="ident" id="5895396"><a href="/go/ast/filter.go.html#5894940">j</a></span>&nbsp;<span class="op" id="5895398">&lt;</span>&nbsp;<span class="builtinfunc" id="5895400">len</span><span class="op" id="5895403">(</span><span class="ident" id="5895404"><a href="/go/ast/filter.go.html#5894919">list</a></span><span class="op" id="5895408">)</span>&nbsp;<span class="op" id="5895410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895414"><a href="/go/ast/filter.go.html#5894858">removedFields</a></span>&nbsp;<span class="op" id="5895428">=</span>&nbsp;<span class="ident" id="5895430">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895439"><a href="/go/ast/filter.go.html#5894810">fields</a></span><span class="op" id="5895445">.</span><span class="ident" id="5895446">List</span>&nbsp;<span class="op" id="5895451">=</span>&nbsp;<span class="ident" id="5895453"><a href="/go/ast/filter.go.html#5894919">list</a></span><span class="op" id="5895457">[</span><span class="num" id="5895458">0</span><span class="op" id="5895459">:</span><span class="ident" id="5895460"><a href="/go/ast/filter.go.html#5894940">j</a></span><span class="op" id="5895461">]</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895464">return</span><br>
<span class="lineno"></span><span class="op" id="5895471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5895474">func</span>&nbsp;<span class="ident" id="5895479">filterParamList</span><span class="op" id="5895494">(</span><span class="ident" id="5895495">fields</span>&nbsp;<span class="op" id="5895502">*</span><span class="ident" id="5895503"><a href="/go/ast/ast.go.html#5857552">FieldList</a></span><span class="op" id="5895512">,</span>&nbsp;<span class="ident" id="5895514">filter</span>&nbsp;<span class="ident" id="5895521"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5895527">,</span>&nbsp;<span class="ident" id="5895529">export</span>&nbsp;<span class="builtintype" id="5895536">bool</span><span class="op" id="5895540">)</span>&nbsp;<span class="builtintype" id="5895542">bool</span>&nbsp;<span class="op" id="5895547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895550">if</span>&nbsp;<span class="ident" id="5895553"><a href="/go/ast/filter.go.html#5895495">fields</a></span>&nbsp;<span class="op" id="5895560">==</span>&nbsp;<span class="ident" id="5895563">nil</span>&nbsp;<span class="op" id="5895567">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895571">return</span>&nbsp;<span class="ident" id="5895578">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895588">var</span>&nbsp;<span class="ident" id="5895592">b</span>&nbsp;<span class="builtintype" id="5895594">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895600">for</span>&nbsp;<span class="ident" id="5895604">_</span><span class="op" id="5895605">,</span>&nbsp;<span class="ident" id="5895607">f</span>&nbsp;<span class="op" id="5895609">:=</span>&nbsp;<span class="keyword" id="5895612">range</span>&nbsp;<span class="ident" id="5895618"><a href="/go/ast/filter.go.html#5895495">fields</a></span><span class="op" id="5895624">.</span><span class="ident" id="5895625">List</span>&nbsp;<span class="op" id="5895630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895634">if</span>&nbsp;<span class="ident" id="5895637"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5895647">(</span><span class="ident" id="5895648"><a href="/go/ast/filter.go.html#5895607">f</a></span><span class="op" id="5895649">.</span><span class="ident" id="5895650">Type</span><span class="op" id="5895654">,</span>&nbsp;<span class="ident" id="5895656"><a href="/go/ast/filter.go.html#5895514">filter</a></span><span class="op" id="5895662">,</span>&nbsp;<span class="ident" id="5895664"><a href="/go/ast/filter.go.html#5895529">export</a></span><span class="op" id="5895670">)</span>&nbsp;<span class="op" id="5895672">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895677"><a href="/go/ast/filter.go.html#5895592">b</a></span>&nbsp;<span class="op" id="5895679">=</span>&nbsp;<span class="ident" id="5895681">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5895691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895694">return</span>&nbsp;<span class="ident" id="5895701"><a href="/go/ast/filter.go.html#5895592">b</a></span><br>
<span class="lineno"></span><span class="op" id="5895703">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5895706">func</span>&nbsp;<span class="ident" id="5895711">filterType</span><span class="op" id="5895721">(</span><span class="ident" id="5895722">typ</span>&nbsp;<span class="ident" id="5895726"><a href="/go/ast/ast.go.html#5853932">Expr</a></span><span class="op" id="5895730">,</span>&nbsp;<span class="ident" id="5895732">f</span>&nbsp;<span class="ident" id="5895734"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5895740">,</span>&nbsp;<span class="ident" id="5895742">export</span>&nbsp;<span class="builtintype" id="5895749">bool</span><span class="op" id="5895753">)</span>&nbsp;<span class="builtintype" id="5895755">bool</span>&nbsp;<span class="op" id="5895760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895763">switch</span>&nbsp;<span class="ident" id="5895770">t</span>&nbsp;<span class="op" id="5895772">:=</span>&nbsp;<span class="ident" id="5895775"><a href="/go/ast/filter.go.html#5895722">typ</a></span><span class="op" id="5895778">.</span><span class="op" id="5895779">(</span><span class="keyword" id="5895780">type</span><span class="op" id="5895784">)</span>&nbsp;<span class="op" id="5895786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895789">case</span>&nbsp;<span class="op" id="5895794">*</span><span class="ident" id="5895795"><a href="/go/ast/ast.go.html#5858933">Ident</a></span><span class="op" id="5895800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895804">return</span>&nbsp;<span class="ident" id="5895811"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5895812">(</span><span class="ident" id="5895813"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5895814">.</span><span class="ident" id="5895815">Name</span><span class="op" id="5895819">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895822">case</span>&nbsp;<span class="op" id="5895827">*</span><span class="ident" id="5895828"><a href="/go/ast/ast.go.html#5860115">ParenExpr</a></span><span class="op" id="5895837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895841">return</span>&nbsp;<span class="ident" id="5895848"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5895858">(</span><span class="ident" id="5895859"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5895860">.</span><span class="ident" id="5895861">X</span><span class="op" id="5895862">,</span>&nbsp;<span class="ident" id="5895864"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5895865">,</span>&nbsp;<span class="ident" id="5895867"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5895873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895876">case</span>&nbsp;<span class="op" id="5895881">*</span><span class="ident" id="5895882"><a href="/go/ast/ast.go.html#5862917">ArrayType</a></span><span class="op" id="5895891">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895895">return</span>&nbsp;<span class="ident" id="5895902"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5895912">(</span><span class="ident" id="5895913"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5895914">.</span><span class="ident" id="5895915">Elt</span><span class="op" id="5895918">,</span>&nbsp;<span class="ident" id="5895920"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5895921">,</span>&nbsp;<span class="ident" id="5895923"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5895929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895932">case</span>&nbsp;<span class="op" id="5895937">*</span><span class="ident" id="5895938"><a href="/go/ast/ast.go.html#5863142">StructType</a></span><span class="op" id="5895948">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5895952">if</span>&nbsp;<span class="ident" id="5895955"><a href="/go/ast/filter.go.html#5894794">filterFieldList</a></span><span class="op" id="5895970">(</span><span class="ident" id="5895971"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5895972">.</span><span class="ident" id="5895973">Fields</span><span class="op" id="5895979">,</span>&nbsp;<span class="ident" id="5895981"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5895982">,</span>&nbsp;<span class="ident" id="5895984"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5895990">)</span>&nbsp;<span class="op" id="5895992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5895997"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5895998">.</span><span class="ident" id="5895999">Incomplete</span>&nbsp;<span class="op" id="5896010">=</span>&nbsp;<span class="ident" id="5896012">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896023">return</span>&nbsp;<span class="builtinfunc" id="5896030">len</span><span class="op" id="5896033">(</span><span class="ident" id="5896034"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896035">.</span><span class="ident" id="5896036">Fields</span><span class="op" id="5896042">.</span><span class="ident" id="5896043">List</span><span class="op" id="5896047">)</span>&nbsp;<span class="op" id="5896049">&gt;</span>&nbsp;<span class="num" id="5896051">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896054">case</span>&nbsp;<span class="op" id="5896059">*</span><span class="ident" id="5896060"><a href="/go/ast/ast.go.html#5863462">FuncType</a></span><span class="op" id="5896068">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896072">b1</span>&nbsp;<span class="op" id="5896075">:=</span>&nbsp;<span class="ident" id="5896078"><a href="/go/ast/filter.go.html#5895479">filterParamList</a></span><span class="op" id="5896093">(</span><span class="ident" id="5896094"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896095">.</span><span class="ident" id="5896096">Params</span><span class="op" id="5896102">,</span>&nbsp;<span class="ident" id="5896104"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5896105">,</span>&nbsp;<span class="ident" id="5896107"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5896113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896117">b2</span>&nbsp;<span class="op" id="5896120">:=</span>&nbsp;<span class="ident" id="5896123"><a href="/go/ast/filter.go.html#5895479">filterParamList</a></span><span class="op" id="5896138">(</span><span class="ident" id="5896139"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896140">.</span><span class="ident" id="5896141">Results</span><span class="op" id="5896148">,</span>&nbsp;<span class="ident" id="5896150"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5896151">,</span>&nbsp;<span class="ident" id="5896153"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5896159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896163">return</span>&nbsp;<span class="ident" id="5896170"><a href="/go/ast/filter.go.html#5896072">b1</a></span>&nbsp;<span class="op" id="5896173">||</span>&nbsp;<span class="ident" id="5896176"><a href="/go/ast/filter.go.html#5896117">b2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896180">case</span>&nbsp;<span class="op" id="5896185">*</span><span class="ident" id="5896186"><a href="/go/ast/ast.go.html#5863734">InterfaceType</a></span><span class="op" id="5896199">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896203">if</span>&nbsp;<span class="ident" id="5896206"><a href="/go/ast/filter.go.html#5894794">filterFieldList</a></span><span class="op" id="5896221">(</span><span class="ident" id="5896222"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896223">.</span><span class="ident" id="5896224">Methods</span><span class="op" id="5896231">,</span>&nbsp;<span class="ident" id="5896233"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5896234">,</span>&nbsp;<span class="ident" id="5896236"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5896242">)</span>&nbsp;<span class="op" id="5896244">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896249"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896250">.</span><span class="ident" id="5896251">Incomplete</span>&nbsp;<span class="op" id="5896262">=</span>&nbsp;<span class="ident" id="5896264">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896275">return</span>&nbsp;<span class="builtinfunc" id="5896282">len</span><span class="op" id="5896285">(</span><span class="ident" id="5896286"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896287">.</span><span class="ident" id="5896288">Methods</span><span class="op" id="5896295">.</span><span class="ident" id="5896296">List</span><span class="op" id="5896300">)</span>&nbsp;<span class="op" id="5896302">&gt;</span>&nbsp;<span class="num" id="5896304">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896307">case</span>&nbsp;<span class="op" id="5896312">*</span><span class="ident" id="5896313"><a href="/go/ast/ast.go.html#5863990">MapType</a></span><span class="op" id="5896320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896324">b1</span>&nbsp;<span class="op" id="5896327">:=</span>&nbsp;<span class="ident" id="5896330"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5896340">(</span><span class="ident" id="5896341"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896342">.</span><span class="ident" id="5896343">Key</span><span class="op" id="5896346">,</span>&nbsp;<span class="ident" id="5896348"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5896349">,</span>&nbsp;<span class="ident" id="5896351"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5896357">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896361">b2</span>&nbsp;<span class="op" id="5896364">:=</span>&nbsp;<span class="ident" id="5896367"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5896377">(</span><span class="ident" id="5896378"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896379">.</span><span class="ident" id="5896380">Value</span><span class="op" id="5896385">,</span>&nbsp;<span class="ident" id="5896387"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5896388">,</span>&nbsp;<span class="ident" id="5896390"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5896396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896400">return</span>&nbsp;<span class="ident" id="5896407"><a href="/go/ast/filter.go.html#5896324">b1</a></span>&nbsp;<span class="op" id="5896410">||</span>&nbsp;<span class="ident" id="5896413"><a href="/go/ast/filter.go.html#5896361">b2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896417">case</span>&nbsp;<span class="op" id="5896422">*</span><span class="ident" id="5896423"><a href="/go/ast/ast.go.html#5864132">ChanType</a></span><span class="op" id="5896431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896435">return</span>&nbsp;<span class="ident" id="5896442"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5896452">(</span><span class="ident" id="5896453"><a href="/go/ast/filter.go.html#5895770">t</a></span><span class="op" id="5896454">.</span><span class="ident" id="5896455">Value</span><span class="op" id="5896460">,</span>&nbsp;<span class="ident" id="5896462"><a href="/go/ast/filter.go.html#5895732">f</a></span><span class="op" id="5896463">,</span>&nbsp;<span class="ident" id="5896465"><a href="/go/ast/filter.go.html#5895742">export</a></span><span class="op" id="5896471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896474">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896477">return</span>&nbsp;<span class="ident" id="5896484">false</span><br>
<span class="lineno"></span><span class="op" id="5896490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5896493">func</span>&nbsp;<span class="ident" id="5896498">filterSpec</span><span class="op" id="5896508">(</span><span class="ident" id="5896509">spec</span>&nbsp;<span class="ident" id="5896514"><a href="/go/ast/ast.go.html#5878202">Spec</a></span><span class="op" id="5896518">,</span>&nbsp;<span class="ident" id="5896520">f</span>&nbsp;<span class="ident" id="5896522"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5896528">,</span>&nbsp;<span class="ident" id="5896530">export</span>&nbsp;<span class="builtintype" id="5896537">bool</span><span class="op" id="5896541">)</span>&nbsp;<span class="builtintype" id="5896543">bool</span>&nbsp;<span class="op" id="5896548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896551">switch</span>&nbsp;<span class="ident" id="5896558">s</span>&nbsp;<span class="op" id="5896560">:=</span>&nbsp;<span class="ident" id="5896563"><a href="/go/ast/filter.go.html#5896509">spec</a></span><span class="op" id="5896567">.</span><span class="op" id="5896568">(</span><span class="keyword" id="5896569">type</span><span class="op" id="5896573">)</span>&nbsp;<span class="op" id="5896575">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896578">case</span>&nbsp;<span class="op" id="5896583">*</span><span class="ident" id="5896584"><a href="/go/ast/ast.go.html#5878727">ValueSpec</a></span><span class="op" id="5896593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896597"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5896598">.</span><span class="ident" id="5896599">Names</span>&nbsp;<span class="op" id="5896605">=</span>&nbsp;<span class="ident" id="5896607"><a href="/go/ast/filter.go.html#5894247">filterIdentList</a></span><span class="op" id="5896622">(</span><span class="ident" id="5896623"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5896624">.</span><span class="ident" id="5896625">Names</span><span class="op" id="5896630">,</span>&nbsp;<span class="ident" id="5896632"><a href="/go/ast/filter.go.html#5896520">f</a></span><span class="op" id="5896633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896637">if</span>&nbsp;<span class="builtinfunc" id="5896640">len</span><span class="op" id="5896643">(</span><span class="ident" id="5896644"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5896645">.</span><span class="ident" id="5896646">Names</span><span class="op" id="5896651">)</span>&nbsp;<span class="op" id="5896653">&gt;</span>&nbsp;<span class="num" id="5896655">0</span>&nbsp;<span class="op" id="5896657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896662">if</span>&nbsp;<span class="ident" id="5896665"><a href="/go/ast/filter.go.html#5896530">export</a></span>&nbsp;<span class="op" id="5896672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896678"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5896688">(</span><span class="ident" id="5896689"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5896690">.</span><span class="ident" id="5896691">Type</span><span class="op" id="5896695">,</span>&nbsp;<span class="ident" id="5896697"><a href="/go/ast/filter.go.html#5896520">f</a></span><span class="op" id="5896698">,</span>&nbsp;<span class="ident" id="5896700"><a href="/go/ast/filter.go.html#5896530">export</a></span><span class="op" id="5896706">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896716">return</span>&nbsp;<span class="ident" id="5896723">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896733">case</span>&nbsp;<span class="op" id="5896738">*</span><span class="ident" id="5896739"><a href="/go/ast/ast.go.html#5879085">TypeSpec</a></span><span class="op" id="5896747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896751">if</span>&nbsp;<span class="ident" id="5896754"><a href="/go/ast/filter.go.html#5896520">f</a></span><span class="op" id="5896755">(</span><span class="ident" id="5896756"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5896757">.</span><span class="ident" id="5896758">Name</span><span class="op" id="5896762">.</span><span class="ident" id="5896763">Name</span><span class="op" id="5896767">)</span>&nbsp;<span class="op" id="5896769">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896774">if</span>&nbsp;<span class="ident" id="5896777"><a href="/go/ast/filter.go.html#5896530">export</a></span>&nbsp;<span class="op" id="5896784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896790"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5896800">(</span><span class="ident" id="5896801"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5896802">.</span><span class="ident" id="5896803">Type</span><span class="op" id="5896807">,</span>&nbsp;<span class="ident" id="5896809"><a href="/go/ast/filter.go.html#5896520">f</a></span><span class="op" id="5896810">,</span>&nbsp;<span class="ident" id="5896812"><a href="/go/ast/filter.go.html#5896530">export</a></span><span class="op" id="5896818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896828">return</span>&nbsp;<span class="ident" id="5896835">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5896842">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896846">if</span>&nbsp;<span class="op" id="5896849">!</span><span class="ident" id="5896850"><a href="/go/ast/filter.go.html#5896530">export</a></span>&nbsp;<span class="op" id="5896857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5896862">//&nbsp;For&nbsp;general&nbsp;filtering&nbsp;(not&nbsp;just&nbsp;exports),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5896910">//&nbsp;filter&nbsp;type&nbsp;even&nbsp;if&nbsp;name&nbsp;is&nbsp;not&nbsp;filtered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5896957">//&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5896968">//&nbsp;If&nbsp;the&nbsp;type&nbsp;contains&nbsp;filtered&nbsp;elements,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5897014">//&nbsp;keep&nbsp;the&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897042">return</span>&nbsp;<span class="ident" id="5897049"><a href="/go/ast/filter.go.html#5895711">filterType</a></span><span class="op" id="5897059">(</span><span class="ident" id="5897060"><a href="/go/ast/filter.go.html#5896558">s</a></span><span class="op" id="5897061">.</span><span class="ident" id="5897062">Type</span><span class="op" id="5897066">,</span>&nbsp;<span class="ident" id="5897068"><a href="/go/ast/filter.go.html#5896520">f</a></span><span class="op" id="5897069">,</span>&nbsp;<span class="ident" id="5897071"><a href="/go/ast/filter.go.html#5896530">export</a></span><span class="op" id="5897077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897087">return</span>&nbsp;<span class="ident" id="5897094">false</span><br>
<span class="lineno">185</span><span class="op" id="5897100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5897103">func</span>&nbsp;<span class="ident" id="5897108">filterSpecList</span><span class="op" id="5897122">(</span><span class="ident" id="5897123">list</span>&nbsp;<span class="op" id="5897128">[</span><span class="op" id="5897129">]</span><span class="ident" id="5897130"><a href="/go/ast/ast.go.html#5878202">Spec</a></span><span class="op" id="5897134">,</span>&nbsp;<span class="ident" id="5897136">f</span>&nbsp;<span class="ident" id="5897138"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5897144">,</span>&nbsp;<span class="ident" id="5897146">export</span>&nbsp;<span class="builtintype" id="5897153">bool</span><span class="op" id="5897157">)</span>&nbsp;<span class="op" id="5897159">[</span><span class="op" id="5897160">]</span><span class="ident" id="5897161"><a href="/go/ast/ast.go.html#5878202">Spec</a></span>&nbsp;<span class="op" id="5897166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897169">j</span>&nbsp;<span class="op" id="5897171">:=</span>&nbsp;<span class="num" id="5897174">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897177">for</span>&nbsp;<span class="ident" id="5897181">_</span><span class="op" id="5897182">,</span>&nbsp;<span class="ident" id="5897184">s</span>&nbsp;<span class="op" id="5897186">:=</span>&nbsp;<span class="keyword" id="5897189">range</span>&nbsp;<span class="ident" id="5897195"><a href="/go/ast/filter.go.html#5897123">list</a></span>&nbsp;<span class="op" id="5897200">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897204">if</span>&nbsp;<span class="ident" id="5897207"><a href="/go/ast/filter.go.html#5896498">filterSpec</a></span><span class="op" id="5897217">(</span><span class="ident" id="5897218"><a href="/go/ast/filter.go.html#5897184">s</a></span><span class="op" id="5897219">,</span>&nbsp;<span class="ident" id="5897221"><a href="/go/ast/filter.go.html#5897136">f</a></span><span class="op" id="5897222">,</span>&nbsp;<span class="ident" id="5897224"><a href="/go/ast/filter.go.html#5897146">export</a></span><span class="op" id="5897230">)</span>&nbsp;<span class="op" id="5897232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897237"><a href="/go/ast/filter.go.html#5897123">list</a></span><span class="op" id="5897241">[</span><span class="ident" id="5897242"><a href="/go/ast/filter.go.html#5897169">j</a></span><span class="op" id="5897243">]</span>&nbsp;<span class="op" id="5897245">=</span>&nbsp;<span class="ident" id="5897247"><a href="/go/ast/filter.go.html#5897184">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897252"><a href="/go/ast/filter.go.html#5897169">j</a></span><span class="op" id="5897253">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897261">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897264">return</span>&nbsp;<span class="ident" id="5897271"><a href="/go/ast/filter.go.html#5897123">list</a></span><span class="op" id="5897275">[</span><span class="num" id="5897276">0</span><span class="op" id="5897277">:</span><span class="ident" id="5897278"><a href="/go/ast/filter.go.html#5897169">j</a></span><span class="op" id="5897279">]</span><br>
<span class="lineno"></span><span class="op" id="5897281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5897284">//&nbsp;FilterDecl&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;declaration&nbsp;in&nbsp;place&nbsp;by&nbsp;removing</span><br>
<span class="lineno"></span><span class="comment" id="5897354">//&nbsp;all&nbsp;names&nbsp;(including&nbsp;struct&nbsp;field&nbsp;and&nbsp;interface&nbsp;method&nbsp;names,&nbsp;but</span><br>
<span class="lineno">200</span><span class="comment" id="5897423">//&nbsp;not&nbsp;from&nbsp;parameter&nbsp;lists)&nbsp;that&nbsp;don&#39;t&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="5897490">//</span><br>
<span class="lineno"></span><span class="comment" id="5897493">//&nbsp;FilterDecl&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;declared&nbsp;names&nbsp;left&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="5897563">//&nbsp;filtering;&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5897605">//</span><br>
<span class="lineno">205</span><span class="keyword" id="5897608">func</span>&nbsp;<span class="ident" id="5897613">FilterDecl</span><span class="op" id="5897623">(</span><span class="ident" id="5897624">decl</span>&nbsp;<span class="ident" id="5897629"><a href="/go/ast/ast.go.html#5854126">Decl</a></span><span class="op" id="5897633">,</span>&nbsp;<span class="ident" id="5897635">f</span>&nbsp;<span class="ident" id="5897637"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5897643">)</span>&nbsp;<span class="builtintype" id="5897645">bool</span>&nbsp;<span class="op" id="5897650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897653">return</span>&nbsp;<span class="ident" id="5897660"><a href="/go/ast/filter.go.html#5897695">filterDecl</a></span><span class="op" id="5897670">(</span><span class="ident" id="5897671"><a href="/go/ast/filter.go.html#5897624">decl</a></span><span class="op" id="5897675">,</span>&nbsp;<span class="ident" id="5897677"><a href="/go/ast/filter.go.html#5897635">f</a></span><span class="op" id="5897678">,</span>&nbsp;<span class="ident" id="5897680">false</span><span class="op" id="5897685">)</span><br>
<span class="lineno"></span><span class="op" id="5897687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5897690">func</span>&nbsp;<span class="ident" id="5897695">filterDecl</span><span class="op" id="5897705">(</span><span class="ident" id="5897706">decl</span>&nbsp;<span class="ident" id="5897711"><a href="/go/ast/ast.go.html#5854126">Decl</a></span><span class="op" id="5897715">,</span>&nbsp;<span class="ident" id="5897717">f</span>&nbsp;<span class="ident" id="5897719"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5897725">,</span>&nbsp;<span class="ident" id="5897727">export</span>&nbsp;<span class="builtintype" id="5897734">bool</span><span class="op" id="5897738">)</span>&nbsp;<span class="builtintype" id="5897740">bool</span>&nbsp;<span class="op" id="5897745">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897748">switch</span>&nbsp;<span class="ident" id="5897755">d</span>&nbsp;<span class="op" id="5897757">:=</span>&nbsp;<span class="ident" id="5897760"><a href="/go/ast/filter.go.html#5897706">decl</a></span><span class="op" id="5897764">.</span><span class="op" id="5897765">(</span><span class="keyword" id="5897766">type</span><span class="op" id="5897770">)</span>&nbsp;<span class="op" id="5897772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897775">case</span>&nbsp;<span class="op" id="5897780">*</span><span class="ident" id="5897781"><a href="/go/ast/ast.go.html#5880856">GenDecl</a></span><span class="op" id="5897788">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897792"><a href="/go/ast/filter.go.html#5897755">d</a></span><span class="op" id="5897793">.</span><span class="ident" id="5897794">Specs</span>&nbsp;<span class="op" id="5897800">=</span>&nbsp;<span class="ident" id="5897802"><a href="/go/ast/filter.go.html#5897108">filterSpecList</a></span><span class="op" id="5897816">(</span><span class="ident" id="5897817"><a href="/go/ast/filter.go.html#5897755">d</a></span><span class="op" id="5897818">.</span><span class="ident" id="5897819">Specs</span><span class="op" id="5897824">,</span>&nbsp;<span class="ident" id="5897826"><a href="/go/ast/filter.go.html#5897717">f</a></span><span class="op" id="5897827">,</span>&nbsp;<span class="ident" id="5897829"><a href="/go/ast/filter.go.html#5897727">export</a></span><span class="op" id="5897835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897839">return</span>&nbsp;<span class="builtinfunc" id="5897846">len</span><span class="op" id="5897849">(</span><span class="ident" id="5897850"><a href="/go/ast/filter.go.html#5897755">d</a></span><span class="op" id="5897851">.</span><span class="ident" id="5897852">Specs</span><span class="op" id="5897857">)</span>&nbsp;<span class="op" id="5897859">&gt;</span>&nbsp;<span class="num" id="5897861">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897864">case</span>&nbsp;<span class="op" id="5897869">*</span><span class="ident" id="5897870"><a href="/go/ast/ast.go.html#5881197">FuncDecl</a></span><span class="op" id="5897878">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897882">return</span>&nbsp;<span class="ident" id="5897889"><a href="/go/ast/filter.go.html#5897717">f</a></span><span class="op" id="5897890">(</span><span class="ident" id="5897891"><a href="/go/ast/filter.go.html#5897755">d</a></span><span class="op" id="5897892">.</span><span class="ident" id="5897893">Name</span><span class="op" id="5897897">.</span><span class="ident" id="5897898">Name</span><span class="op" id="5897902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897908">return</span>&nbsp;<span class="ident" id="5897915">false</span><br>
<span class="lineno"></span><span class="op" id="5897921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="5897924">//&nbsp;FilterFile&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;file&nbsp;in&nbsp;place&nbsp;by&nbsp;removing&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="5897991">//&nbsp;names&nbsp;from&nbsp;top-level&nbsp;declarations&nbsp;(including&nbsp;struct&nbsp;field&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5898056">//&nbsp;interface&nbsp;method&nbsp;names,&nbsp;but&nbsp;not&nbsp;from&nbsp;parameter&nbsp;lists)&nbsp;that&nbsp;don&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="5898124">//&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.&nbsp;If&nbsp;the&nbsp;declaration&nbsp;is&nbsp;empty&nbsp;afterwards,</span><br>
<span class="lineno"></span><span class="comment" id="5898194">//&nbsp;the&nbsp;declaration&nbsp;is&nbsp;removed&nbsp;from&nbsp;the&nbsp;AST.&nbsp;The&nbsp;File.Comments&nbsp;list</span><br>
<span class="lineno">225</span><span class="comment" id="5898261">//&nbsp;is&nbsp;not&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="5898280">//</span><br>
<span class="lineno"></span><span class="comment" id="5898283">//&nbsp;FilterFile&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;top-level&nbsp;declarations</span><br>
<span class="lineno"></span><span class="comment" id="5898350">//&nbsp;left&nbsp;after&nbsp;filtering;&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5898403">//</span><br>
<span class="lineno">230</span><span class="keyword" id="5898406">func</span>&nbsp;<span class="ident" id="5898411">FilterFile</span><span class="op" id="5898421">(</span><span class="ident" id="5898422">src</span>&nbsp;<span class="op" id="5898426">*</span><span class="ident" id="5898427"><a href="/go/ast/ast.go.html#5882563">File</a></span><span class="op" id="5898431">,</span>&nbsp;<span class="ident" id="5898433">f</span>&nbsp;<span class="ident" id="5898435"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5898441">)</span>&nbsp;<span class="builtintype" id="5898443">bool</span>&nbsp;<span class="op" id="5898448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898451">return</span>&nbsp;<span class="ident" id="5898458"><a href="/go/ast/filter.go.html#5898492">filterFile</a></span><span class="op" id="5898468">(</span><span class="ident" id="5898469"><a href="/go/ast/filter.go.html#5898422">src</a></span><span class="op" id="5898472">,</span>&nbsp;<span class="ident" id="5898474"><a href="/go/ast/filter.go.html#5898433">f</a></span><span class="op" id="5898475">,</span>&nbsp;<span class="ident" id="5898477">false</span><span class="op" id="5898482">)</span><br>
<span class="lineno"></span><span class="op" id="5898484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5898487">func</span>&nbsp;<span class="ident" id="5898492">filterFile</span><span class="op" id="5898502">(</span><span class="ident" id="5898503">src</span>&nbsp;<span class="op" id="5898507">*</span><span class="ident" id="5898508"><a href="/go/ast/ast.go.html#5882563">File</a></span><span class="op" id="5898512">,</span>&nbsp;<span class="ident" id="5898514">f</span>&nbsp;<span class="ident" id="5898516"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5898522">,</span>&nbsp;<span class="ident" id="5898524">export</span>&nbsp;<span class="builtintype" id="5898531">bool</span><span class="op" id="5898535">)</span>&nbsp;<span class="builtintype" id="5898537">bool</span>&nbsp;<span class="op" id="5898542">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898545">j</span>&nbsp;<span class="op" id="5898547">:=</span>&nbsp;<span class="num" id="5898550">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898553">for</span>&nbsp;<span class="ident" id="5898557">_</span><span class="op" id="5898558">,</span>&nbsp;<span class="ident" id="5898560">d</span>&nbsp;<span class="op" id="5898562">:=</span>&nbsp;<span class="keyword" id="5898565">range</span>&nbsp;<span class="ident" id="5898571"><a href="/go/ast/filter.go.html#5898503">src</a></span><span class="op" id="5898574">.</span><span class="ident" id="5898575">Decls</span>&nbsp;<span class="op" id="5898581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898585">if</span>&nbsp;<span class="ident" id="5898588"><a href="/go/ast/filter.go.html#5897695">filterDecl</a></span><span class="op" id="5898598">(</span><span class="ident" id="5898599"><a href="/go/ast/filter.go.html#5898560">d</a></span><span class="op" id="5898600">,</span>&nbsp;<span class="ident" id="5898602"><a href="/go/ast/filter.go.html#5898514">f</a></span><span class="op" id="5898603">,</span>&nbsp;<span class="ident" id="5898605"><a href="/go/ast/filter.go.html#5898524">export</a></span><span class="op" id="5898611">)</span>&nbsp;<span class="op" id="5898613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898618"><a href="/go/ast/filter.go.html#5898503">src</a></span><span class="op" id="5898621">.</span><span class="ident" id="5898622">Decls</span><span class="op" id="5898627">[</span><span class="ident" id="5898628"><a href="/go/ast/filter.go.html#5898545">j</a></span><span class="op" id="5898629">]</span>&nbsp;<span class="op" id="5898631">=</span>&nbsp;<span class="ident" id="5898633"><a href="/go/ast/filter.go.html#5898560">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898638"><a href="/go/ast/filter.go.html#5898545">j</a></span><span class="op" id="5898639">++</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5898644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5898647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898650"><a href="/go/ast/filter.go.html#5898503">src</a></span><span class="op" id="5898653">.</span><span class="ident" id="5898654">Decls</span>&nbsp;<span class="op" id="5898660">=</span>&nbsp;<span class="ident" id="5898662"><a href="/go/ast/filter.go.html#5898503">src</a></span><span class="op" id="5898665">.</span><span class="ident" id="5898666">Decls</span><span class="op" id="5898671">[</span><span class="num" id="5898672">0</span><span class="op" id="5898673">:</span><span class="ident" id="5898674"><a href="/go/ast/filter.go.html#5898545">j</a></span><span class="op" id="5898675">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898678">return</span>&nbsp;<span class="ident" id="5898685"><a href="/go/ast/filter.go.html#5898545">j</a></span>&nbsp;<span class="op" id="5898687">&gt;</span>&nbsp;<span class="num" id="5898689">0</span><br>
<span class="lineno"></span><span class="op" id="5898691">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="5898694">//&nbsp;FilterPackage&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;package&nbsp;in&nbsp;place&nbsp;by&nbsp;removing</span><br>
<span class="lineno"></span><span class="comment" id="5898763">//&nbsp;all&nbsp;names&nbsp;from&nbsp;top-level&nbsp;declarations&nbsp;(including&nbsp;struct&nbsp;field&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5898832">//&nbsp;interface&nbsp;method&nbsp;names,&nbsp;but&nbsp;not&nbsp;from&nbsp;parameter&nbsp;lists)&nbsp;that&nbsp;don&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="5898900">//&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.&nbsp;If&nbsp;the&nbsp;declaration&nbsp;is&nbsp;empty&nbsp;afterwards,</span><br>
<span class="lineno">250</span><span class="comment" id="5898970">//&nbsp;the&nbsp;declaration&nbsp;is&nbsp;removed&nbsp;from&nbsp;the&nbsp;AST.&nbsp;The&nbsp;pkg.Files&nbsp;list&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5899040">//&nbsp;changed,&nbsp;so&nbsp;that&nbsp;file&nbsp;names&nbsp;and&nbsp;top-level&nbsp;package&nbsp;comments&nbsp;don&#39;t&nbsp;get</span><br>
<span class="lineno"></span><span class="comment" id="5899112">//&nbsp;lost.</span><br>
<span class="lineno"></span><span class="comment" id="5899121">//</span><br>
<span class="lineno"></span><span class="comment" id="5899124">//&nbsp;FilterPackage&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;top-level&nbsp;declarations</span><br>
<span class="lineno">255</span><span class="comment" id="5899194">//&nbsp;left&nbsp;after&nbsp;filtering;&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5899247">//</span><br>
<span class="lineno"></span><span class="keyword" id="5899250">func</span>&nbsp;<span class="ident" id="5899255">FilterPackage</span><span class="op" id="5899268">(</span><span class="ident" id="5899269">pkg</span>&nbsp;<span class="op" id="5899273">*</span><span class="ident" id="5899274"><a href="/go/ast/ast.go.html#5883332">Package</a></span><span class="op" id="5899281">,</span>&nbsp;<span class="ident" id="5899283">f</span>&nbsp;<span class="ident" id="5899285"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5899291">)</span>&nbsp;<span class="builtintype" id="5899293">bool</span>&nbsp;<span class="op" id="5899298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899301">return</span>&nbsp;<span class="ident" id="5899308"><a href="/go/ast/filter.go.html#5899345">filterPackage</a></span><span class="op" id="5899321">(</span><span class="ident" id="5899322"><a href="/go/ast/filter.go.html#5899269">pkg</a></span><span class="op" id="5899325">,</span>&nbsp;<span class="ident" id="5899327"><a href="/go/ast/filter.go.html#5899283">f</a></span><span class="op" id="5899328">,</span>&nbsp;<span class="ident" id="5899330">false</span><span class="op" id="5899335">)</span><br>
<span class="lineno"></span><span class="op" id="5899337">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="5899340">func</span>&nbsp;<span class="ident" id="5899345">filterPackage</span><span class="op" id="5899358">(</span><span class="ident" id="5899359">pkg</span>&nbsp;<span class="op" id="5899363">*</span><span class="ident" id="5899364"><a href="/go/ast/ast.go.html#5883332">Package</a></span><span class="op" id="5899371">,</span>&nbsp;<span class="ident" id="5899373">f</span>&nbsp;<span class="ident" id="5899375"><a href="/go/ast/filter.go.html#5894216">Filter</a></span><span class="op" id="5899381">,</span>&nbsp;<span class="ident" id="5899383">export</span>&nbsp;<span class="builtintype" id="5899390">bool</span><span class="op" id="5899394">)</span>&nbsp;<span class="builtintype" id="5899396">bool</span>&nbsp;<span class="op" id="5899401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899404">hasDecls</span>&nbsp;<span class="op" id="5899413">:=</span>&nbsp;<span class="ident" id="5899416">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899423">for</span>&nbsp;<span class="ident" id="5899427">_</span><span class="op" id="5899428">,</span>&nbsp;<span class="ident" id="5899430">src</span>&nbsp;<span class="op" id="5899434">:=</span>&nbsp;<span class="keyword" id="5899437">range</span>&nbsp;<span class="ident" id="5899443"><a href="/go/ast/filter.go.html#5899359">pkg</a></span><span class="op" id="5899446">.</span><span class="ident" id="5899447">Files</span>&nbsp;<span class="op" id="5899453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899457">if</span>&nbsp;<span class="ident" id="5899460"><a href="/go/ast/filter.go.html#5898492">filterFile</a></span><span class="op" id="5899470">(</span><span class="ident" id="5899471"><a href="/go/ast/filter.go.html#5899430">src</a></span><span class="op" id="5899474">,</span>&nbsp;<span class="ident" id="5899476"><a href="/go/ast/filter.go.html#5899373">f</a></span><span class="op" id="5899477">,</span>&nbsp;<span class="ident" id="5899479"><a href="/go/ast/filter.go.html#5899383">export</a></span><span class="op" id="5899485">)</span>&nbsp;<span class="op" id="5899487">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899492"><a href="/go/ast/filter.go.html#5899404">hasDecls</a></span>&nbsp;<span class="op" id="5899501">=</span>&nbsp;<span class="ident" id="5899503">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899516">return</span>&nbsp;<span class="ident" id="5899523"><a href="/go/ast/filter.go.html#5899404">hasDecls</a></span><br>
<span class="lineno"></span><span class="op" id="5899532">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="5899535">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5899615">//&nbsp;Merging&nbsp;of&nbsp;package&nbsp;files</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5899644">//&nbsp;The&nbsp;MergeMode&nbsp;flags&nbsp;control&nbsp;the&nbsp;behavior&nbsp;of&nbsp;MergePackageFiles.</span><br>
<span class="lineno">275</span><span class="keyword" id="5899710">type</span>&nbsp;<span class="ident" id="5899715">MergeMode</span>&nbsp;<span class="builtintype" id="5899725">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5899731">const</span>&nbsp;<span class="op" id="5899737">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5899740">//&nbsp;If&nbsp;set,&nbsp;duplicate&nbsp;function&nbsp;declarations&nbsp;are&nbsp;excluded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899798">FilterFuncDuplicates</span>&nbsp;<span class="ident" id="5899819"><a href="/go/ast/filter.go.html#5899715">MergeMode</a></span>&nbsp;<span class="op" id="5899829">=</span>&nbsp;<span class="num" id="5899831">1</span>&nbsp;<span class="op" id="5899833">&lt;&lt;</span>&nbsp;<span class="ident" id="5899836">iota</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5899842">//&nbsp;If&nbsp;set,&nbsp;comments&nbsp;that&nbsp;are&nbsp;not&nbsp;associated&nbsp;with&nbsp;a&nbsp;specific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5899903">//&nbsp;AST&nbsp;node&nbsp;(as&nbsp;Doc&nbsp;or&nbsp;Comment)&nbsp;are&nbsp;excluded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899950">FilterUnassociatedComments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5899978">//&nbsp;If&nbsp;set,&nbsp;duplicate&nbsp;import&nbsp;declarations&nbsp;are&nbsp;excluded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900034">FilterImportDuplicates</span><br>
<span class="lineno">285</span><span class="op" id="5900057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5900060">//&nbsp;nameOf&nbsp;returns&nbsp;the&nbsp;function&nbsp;(foo)&nbsp;or&nbsp;method&nbsp;name&nbsp;(foo.bar)&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5900126">//&nbsp;the&nbsp;given&nbsp;function&nbsp;declaration.&nbsp;If&nbsp;the&nbsp;AST&nbsp;is&nbsp;incorrect&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5900193">//&nbsp;receiver,&nbsp;it&nbsp;assumes&nbsp;a&nbsp;function&nbsp;instead.</span><br>
<span class="lineno">290</span><span class="comment" id="5900237">//</span><br>
<span class="lineno"></span><span class="keyword" id="5900240">func</span>&nbsp;<span class="ident" id="5900245">nameOf</span><span class="op" id="5900251">(</span><span class="ident" id="5900252">f</span>&nbsp;<span class="op" id="5900254">*</span><span class="ident" id="5900255"><a href="/go/ast/ast.go.html#5881197">FuncDecl</a></span><span class="op" id="5900263">)</span>&nbsp;<span class="builtintype" id="5900265">string</span>&nbsp;<span class="op" id="5900272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900275">if</span>&nbsp;<span class="ident" id="5900278">r</span>&nbsp;<span class="op" id="5900280">:=</span>&nbsp;<span class="ident" id="5900283"><a href="/go/ast/filter.go.html#5900252">f</a></span><span class="op" id="5900284">.</span><span class="ident" id="5900285">Recv</span><span class="op" id="5900289">;</span>&nbsp;<span class="ident" id="5900291"><a href="/go/ast/filter.go.html#5900278">r</a></span>&nbsp;<span class="op" id="5900293">!=</span>&nbsp;<span class="ident" id="5900296">nil</span>&nbsp;<span class="op" id="5900300">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5900303">len</span><span class="op" id="5900306">(</span><span class="ident" id="5900307"><a href="/go/ast/filter.go.html#5900278">r</a></span><span class="op" id="5900308">.</span><span class="ident" id="5900309">List</span><span class="op" id="5900313">)</span>&nbsp;<span class="op" id="5900315">==</span>&nbsp;<span class="num" id="5900318">1</span>&nbsp;<span class="op" id="5900320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5900324">//&nbsp;looks&nbsp;like&nbsp;a&nbsp;correct&nbsp;receiver&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900371">t</span>&nbsp;<span class="op" id="5900373">:=</span>&nbsp;<span class="ident" id="5900376"><a href="/go/ast/filter.go.html#5900278">r</a></span><span class="op" id="5900377">.</span><span class="ident" id="5900378">List</span><span class="op" id="5900382">[</span><span class="num" id="5900383">0</span><span class="op" id="5900384">]</span><span class="op" id="5900385">.</span><span class="ident" id="5900386">Type</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5900393">//&nbsp;dereference&nbsp;pointer&nbsp;receiver&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900433">if</span>&nbsp;<span class="ident" id="5900436">p</span><span class="op" id="5900437">,</span>&nbsp;<span class="ident" id="5900439">_</span>&nbsp;<span class="op" id="5900441">:=</span>&nbsp;<span class="ident" id="5900444"><a href="/go/ast/filter.go.html#5900371">t</a></span><span class="op" id="5900445">.</span><span class="op" id="5900446">(</span><span class="op" id="5900447">*</span><span class="ident" id="5900448"><a href="/go/ast/ast.go.html#5861854">StarExpr</a></span><span class="op" id="5900456">)</span><span class="op" id="5900457">;</span>&nbsp;<span class="ident" id="5900459"><a href="/go/ast/filter.go.html#5900436">p</a></span>&nbsp;<span class="op" id="5900461">!=</span>&nbsp;<span class="ident" id="5900464">nil</span>&nbsp;<span class="op" id="5900468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900473"><a href="/go/ast/filter.go.html#5900371">t</a></span>&nbsp;<span class="op" id="5900475">=</span>&nbsp;<span class="ident" id="5900477"><a href="/go/ast/filter.go.html#5900436">p</a></span><span class="op" id="5900478">.</span><span class="ident" id="5900479">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5900483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5900487">//&nbsp;the&nbsp;receiver&nbsp;type&nbsp;must&nbsp;be&nbsp;a&nbsp;type&nbsp;name</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900530">if</span>&nbsp;<span class="ident" id="5900533">p</span><span class="op" id="5900534">,</span>&nbsp;<span class="ident" id="5900536">_</span>&nbsp;<span class="op" id="5900538">:=</span>&nbsp;<span class="ident" id="5900541"><a href="/go/ast/filter.go.html#5900371">t</a></span><span class="op" id="5900542">.</span><span class="op" id="5900543">(</span><span class="op" id="5900544">*</span><span class="ident" id="5900545"><a href="/go/ast/ast.go.html#5858933">Ident</a></span><span class="op" id="5900550">)</span><span class="op" id="5900551">;</span>&nbsp;<span class="ident" id="5900553"><a href="/go/ast/filter.go.html#5900533">p</a></span>&nbsp;<span class="op" id="5900555">!=</span>&nbsp;<span class="ident" id="5900558">nil</span>&nbsp;<span class="op" id="5900562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900567">return</span>&nbsp;<span class="ident" id="5900574"><a href="/go/ast/filter.go.html#5900533">p</a></span><span class="op" id="5900575">.</span><span class="ident" id="5900576">Name</span>&nbsp;<span class="op" id="5900581">+</span>&nbsp;<span class="string" id="5900583">&#34;.&#34;</span>&nbsp;<span class="op" id="5900587">+</span>&nbsp;<span class="ident" id="5900589"><a href="/go/ast/filter.go.html#5900252">f</a></span><span class="op" id="5900590">.</span><span class="ident" id="5900591">Name</span><span class="op" id="5900595">.</span><span class="ident" id="5900596">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5900603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5900607">//&nbsp;otherwise&nbsp;assume&nbsp;a&nbsp;function&nbsp;instead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5900647">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900650">return</span>&nbsp;<span class="ident" id="5900657"><a href="/go/ast/filter.go.html#5900252">f</a></span><span class="op" id="5900658">.</span><span class="ident" id="5900659">Name</span><span class="op" id="5900663">.</span><span class="ident" id="5900664">Name</span><br>
<span class="lineno"></span><span class="op" id="5900669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5900672">//&nbsp;separator&nbsp;is&nbsp;an&nbsp;empty&nbsp;//-style&nbsp;comment&nbsp;that&nbsp;is&nbsp;interspersed&nbsp;between</span><br>
<span class="lineno"></span><span class="comment" id="5900743">//&nbsp;different&nbsp;comment&nbsp;groups&nbsp;when&nbsp;they&nbsp;are&nbsp;concatenated&nbsp;into&nbsp;a&nbsp;single&nbsp;group</span><br>
<span class="lineno">310</span><span class="comment" id="5900818">//</span><br>
<span class="lineno"></span><span class="keyword" id="5900821">var</span>&nbsp;<span class="ident" id="5900825">separator</span>&nbsp;<span class="op" id="5900835">=</span>&nbsp;<span class="op" id="5900837">&amp;</span><span class="ident" id="5900838"><a href="/go/ast/ast.go.html#5854330">Comment</a></span><span class="op" id="5900845">{</span><span class="ident" id="5900846"><a href="/go/ast/filter.go.html#5892912">token</a></span><span class="op" id="5900851">.</span><span class="ident" id="5900852">NoPos</span><span class="op" id="5900857">,</span>&nbsp;<span class="string" id="5900859">&#34;//&#34;</span><span class="op" id="5900863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5900866">//&nbsp;MergePackageFiles&nbsp;creates&nbsp;a&nbsp;file&nbsp;AST&nbsp;by&nbsp;merging&nbsp;the&nbsp;ASTs&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5900933">//&nbsp;files&nbsp;belonging&nbsp;to&nbsp;a&nbsp;package.&nbsp;The&nbsp;mode&nbsp;flags&nbsp;control&nbsp;merging&nbsp;behavior.</span><br>
<span class="lineno">315</span><span class="comment" id="5901007">//</span><br>
<span class="lineno"></span><span class="keyword" id="5901010">func</span>&nbsp;<span class="ident" id="5901015">MergePackageFiles</span><span class="op" id="5901032">(</span><span class="ident" id="5901033">pkg</span>&nbsp;<span class="op" id="5901037">*</span><span class="ident" id="5901038"><a href="/go/ast/ast.go.html#5883332">Package</a></span><span class="op" id="5901045">,</span>&nbsp;<span class="ident" id="5901047">mode</span>&nbsp;<span class="ident" id="5901052"><a href="/go/ast/filter.go.html#5899715">MergeMode</a></span><span class="op" id="5901061">)</span>&nbsp;<span class="op" id="5901063">*</span><span class="ident" id="5901064"><a href="/go/ast/ast.go.html#5882563">File</a></span>&nbsp;<span class="op" id="5901069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901072">//&nbsp;Count&nbsp;the&nbsp;number&nbsp;of&nbsp;package&nbsp;docs,&nbsp;comments&nbsp;and&nbsp;declarations&nbsp;across</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901143">//&nbsp;all&nbsp;package&nbsp;files.&nbsp;Also,&nbsp;compute&nbsp;sorted&nbsp;list&nbsp;of&nbsp;filenames,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901214">//&nbsp;subsequent&nbsp;iterations&nbsp;can&nbsp;always&nbsp;iterate&nbsp;in&nbsp;the&nbsp;same&nbsp;order.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901278">ndocs</span>&nbsp;<span class="op" id="5901284">:=</span>&nbsp;<span class="num" id="5901287">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901290">ncomments</span>&nbsp;<span class="op" id="5901300">:=</span>&nbsp;<span class="num" id="5901303">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901306">ndecls</span>&nbsp;<span class="op" id="5901313">:=</span>&nbsp;<span class="num" id="5901316">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901319">filenames</span>&nbsp;<span class="op" id="5901329">:=</span>&nbsp;<span class="builtinfunc" id="5901332">make</span><span class="op" id="5901336">(</span><span class="op" id="5901337">[</span><span class="op" id="5901338">]</span><span class="builtintype" id="5901339">string</span><span class="op" id="5901345">,</span>&nbsp;<span class="builtinfunc" id="5901347">len</span><span class="op" id="5901350">(</span><span class="ident" id="5901351"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5901354">.</span><span class="ident" id="5901355">Files</span><span class="op" id="5901360">)</span><span class="op" id="5901361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901364">i</span>&nbsp;<span class="op" id="5901366">:=</span>&nbsp;<span class="num" id="5901369">0</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901372">for</span>&nbsp;<span class="ident" id="5901376">filename</span><span class="op" id="5901384">,</span>&nbsp;<span class="ident" id="5901386">f</span>&nbsp;<span class="op" id="5901388">:=</span>&nbsp;<span class="keyword" id="5901391">range</span>&nbsp;<span class="ident" id="5901397"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5901400">.</span><span class="ident" id="5901401">Files</span>&nbsp;<span class="op" id="5901407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901411"><a href="/go/ast/filter.go.html#5901319">filenames</a></span><span class="op" id="5901420">[</span><span class="ident" id="5901421"><a href="/go/ast/filter.go.html#5901364">i</a></span><span class="op" id="5901422">]</span>&nbsp;<span class="op" id="5901424">=</span>&nbsp;<span class="ident" id="5901426"><a href="/go/ast/filter.go.html#5901376">filename</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901437"><a href="/go/ast/filter.go.html#5901364">i</a></span><span class="op" id="5901438">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901443">if</span>&nbsp;<span class="ident" id="5901446"><a href="/go/ast/filter.go.html#5901386">f</a></span><span class="op" id="5901447">.</span><span class="ident" id="5901448">Doc</span>&nbsp;<span class="op" id="5901452">!=</span>&nbsp;<span class="ident" id="5901455">nil</span>&nbsp;<span class="op" id="5901459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901464"><a href="/go/ast/filter.go.html#5901278">ndocs</a></span>&nbsp;<span class="op" id="5901470">+=</span>&nbsp;<span class="builtinfunc" id="5901473">len</span><span class="op" id="5901476">(</span><span class="ident" id="5901477"><a href="/go/ast/filter.go.html#5901386">f</a></span><span class="op" id="5901478">.</span><span class="ident" id="5901479">Doc</span><span class="op" id="5901482">.</span><span class="ident" id="5901483">List</span><span class="op" id="5901487">)</span>&nbsp;<span class="op" id="5901489">+</span>&nbsp;<span class="num" id="5901491">1</span>&nbsp;<span class="comment" id="5901493">//&nbsp;+1&nbsp;for&nbsp;separator</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5901515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901519"><a href="/go/ast/filter.go.html#5901290">ncomments</a></span>&nbsp;<span class="op" id="5901529">+=</span>&nbsp;<span class="builtinfunc" id="5901532">len</span><span class="op" id="5901535">(</span><span class="ident" id="5901536"><a href="/go/ast/filter.go.html#5901386">f</a></span><span class="op" id="5901537">.</span><span class="ident" id="5901538">Comments</span><span class="op" id="5901546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901550"><a href="/go/ast/filter.go.html#5901306">ndecls</a></span>&nbsp;<span class="op" id="5901557">+=</span>&nbsp;<span class="builtinfunc" id="5901560">len</span><span class="op" id="5901563">(</span><span class="ident" id="5901564"><a href="/go/ast/filter.go.html#5901386">f</a></span><span class="op" id="5901565">.</span><span class="ident" id="5901566">Decls</span><span class="op" id="5901571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5901574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901577"><a href="/go/ast/filter.go.html#5892924">sort</a></span><span class="op" id="5901581">.</span><span class="ident" id="5901582">Strings</span><span class="op" id="5901589">(</span><span class="ident" id="5901590"><a href="/go/ast/filter.go.html#5901319">filenames</a></span><span class="op" id="5901599">)</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901603">//&nbsp;Collect&nbsp;package&nbsp;comments&nbsp;from&nbsp;all&nbsp;package&nbsp;files&nbsp;into&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901669">//&nbsp;CommentGroup&nbsp;-&nbsp;the&nbsp;collected&nbsp;package&nbsp;documentation.&nbsp;In&nbsp;general</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901736">//&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;file&nbsp;with&nbsp;a&nbsp;package&nbsp;comment;&nbsp;but&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5901803">//&nbsp;better&nbsp;to&nbsp;collect&nbsp;extra&nbsp;comments&nbsp;than&nbsp;drop&nbsp;them&nbsp;on&nbsp;the&nbsp;floor.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901869">var</span>&nbsp;<span class="ident" id="5901873">doc</span>&nbsp;<span class="op" id="5901877">*</span><span class="ident" id="5901878"><a href="/go/ast/ast.go.html#5854728">CommentGroup</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901892">var</span>&nbsp;<span class="ident" id="5901896">pos</span>&nbsp;<span class="ident" id="5901900"><a href="/go/ast/filter.go.html#5892912">token</a></span><span class="op" id="5901905">.</span><span class="ident" id="5901906">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901911">if</span>&nbsp;<span class="ident" id="5901914"><a href="/go/ast/filter.go.html#5901278">ndocs</a></span>&nbsp;<span class="op" id="5901920">&gt;</span>&nbsp;<span class="num" id="5901922">0</span>&nbsp;<span class="op" id="5901924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901928">list</span>&nbsp;<span class="op" id="5901933">:=</span>&nbsp;<span class="builtinfunc" id="5901936">make</span><span class="op" id="5901940">(</span><span class="op" id="5901941">[</span><span class="op" id="5901942">]</span><span class="op" id="5901943">*</span><span class="ident" id="5901944"><a href="/go/ast/ast.go.html#5854330">Comment</a></span><span class="op" id="5901951">,</span>&nbsp;<span class="ident" id="5901953"><a href="/go/ast/filter.go.html#5901278">ndocs</a></span><span class="op" id="5901958">-</span><span class="num" id="5901959">1</span><span class="op" id="5901960">)</span>&nbsp;<span class="comment" id="5901962">//&nbsp;-1:&nbsp;no&nbsp;separator&nbsp;before&nbsp;first&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902003">i</span>&nbsp;<span class="op" id="5902005">:=</span>&nbsp;<span class="num" id="5902008">0</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902012">for</span>&nbsp;<span class="ident" id="5902016">_</span><span class="op" id="5902017">,</span>&nbsp;<span class="ident" id="5902019">filename</span>&nbsp;<span class="op" id="5902028">:=</span>&nbsp;<span class="keyword" id="5902031">range</span>&nbsp;<span class="ident" id="5902037"><a href="/go/ast/filter.go.html#5901319">filenames</a></span>&nbsp;<span class="op" id="5902047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902052">f</span>&nbsp;<span class="op" id="5902054">:=</span>&nbsp;<span class="ident" id="5902057"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5902060">.</span><span class="ident" id="5902061">Files</span><span class="op" id="5902066">[</span><span class="ident" id="5902067"><a href="/go/ast/filter.go.html#5902019">filename</a></span><span class="op" id="5902075">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902080">if</span>&nbsp;<span class="ident" id="5902083"><a href="/go/ast/filter.go.html#5902052">f</a></span><span class="op" id="5902084">.</span><span class="ident" id="5902085">Doc</span>&nbsp;<span class="op" id="5902089">!=</span>&nbsp;<span class="ident" id="5902092">nil</span>&nbsp;<span class="op" id="5902096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902102">if</span>&nbsp;<span class="ident" id="5902105"><a href="/go/ast/filter.go.html#5902003">i</a></span>&nbsp;<span class="op" id="5902107">&gt;</span>&nbsp;<span class="num" id="5902109">0</span>&nbsp;<span class="op" id="5902111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902118">//&nbsp;not&nbsp;the&nbsp;first&nbsp;group&nbsp;-&nbsp;add&nbsp;separator</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902162"><a href="/go/ast/filter.go.html#5901928">list</a></span><span class="op" id="5902166">[</span><span class="ident" id="5902167"><a href="/go/ast/filter.go.html#5902003">i</a></span><span class="op" id="5902168">]</span>&nbsp;<span class="op" id="5902170">=</span>&nbsp;<span class="ident" id="5902172"><a href="/go/ast/filter.go.html#5900825">separator</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902187"><a href="/go/ast/filter.go.html#5902003">i</a></span><span class="op" id="5902188">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902201">for</span>&nbsp;<span class="ident" id="5902205">_</span><span class="op" id="5902206">,</span>&nbsp;<span class="ident" id="5902208">c</span>&nbsp;<span class="op" id="5902210">:=</span>&nbsp;<span class="keyword" id="5902213">range</span>&nbsp;<span class="ident" id="5902219"><a href="/go/ast/filter.go.html#5902052">f</a></span><span class="op" id="5902220">.</span><span class="ident" id="5902221">Doc</span><span class="op" id="5902224">.</span><span class="ident" id="5902225">List</span>&nbsp;<span class="op" id="5902230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902237"><a href="/go/ast/filter.go.html#5901928">list</a></span><span class="op" id="5902241">[</span><span class="ident" id="5902242"><a href="/go/ast/filter.go.html#5902003">i</a></span><span class="op" id="5902243">]</span>&nbsp;<span class="op" id="5902245">=</span>&nbsp;<span class="ident" id="5902247"><a href="/go/ast/filter.go.html#5902208">c</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902254"><a href="/go/ast/filter.go.html#5902003">i</a></span><span class="op" id="5902255">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902268">if</span>&nbsp;<span class="ident" id="5902271"><a href="/go/ast/filter.go.html#5902052">f</a></span><span class="op" id="5902272">.</span><span class="ident" id="5902273">Package</span>&nbsp;<span class="op" id="5902281">&gt;</span>&nbsp;<span class="ident" id="5902283"><a href="/go/ast/filter.go.html#5901896">pos</a></span>&nbsp;<span class="op" id="5902287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902294">//&nbsp;Keep&nbsp;the&nbsp;maximum&nbsp;package&nbsp;clause&nbsp;position&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902346">//&nbsp;position&nbsp;for&nbsp;the&nbsp;package&nbsp;clause&nbsp;of&nbsp;the&nbsp;merged</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902400">//&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902415"><a href="/go/ast/filter.go.html#5901896">pos</a></span>&nbsp;<span class="op" id="5902419">=</span>&nbsp;<span class="ident" id="5902421"><a href="/go/ast/filter.go.html#5902052">f</a></span><span class="op" id="5902422">.</span><span class="ident" id="5902423">Package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902444">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902448"><a href="/go/ast/filter.go.html#5901873">doc</a></span>&nbsp;<span class="op" id="5902452">=</span>&nbsp;<span class="op" id="5902454">&amp;</span><span class="ident" id="5902455"><a href="/go/ast/ast.go.html#5854728">CommentGroup</a></span><span class="op" id="5902467">{</span><span class="ident" id="5902468"><a href="/go/ast/filter.go.html#5901928">list</a></span><span class="op" id="5902472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902479">//&nbsp;Collect&nbsp;declarations&nbsp;from&nbsp;all&nbsp;package&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902528">var</span>&nbsp;<span class="ident" id="5902532">decls</span>&nbsp;<span class="op" id="5902538">[</span><span class="op" id="5902539">]</span><span class="ident" id="5902540"><a href="/go/ast/ast.go.html#5854126">Decl</a></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902546">if</span>&nbsp;<span class="ident" id="5902549"><a href="/go/ast/filter.go.html#5901306">ndecls</a></span>&nbsp;<span class="op" id="5902556">&gt;</span>&nbsp;<span class="num" id="5902558">0</span>&nbsp;<span class="op" id="5902560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902564"><a href="/go/ast/filter.go.html#5902532">decls</a></span>&nbsp;<span class="op" id="5902570">=</span>&nbsp;<span class="builtinfunc" id="5902572">make</span><span class="op" id="5902576">(</span><span class="op" id="5902577">[</span><span class="op" id="5902578">]</span><span class="ident" id="5902579"><a href="/go/ast/ast.go.html#5854126">Decl</a></span><span class="op" id="5902583">,</span>&nbsp;<span class="ident" id="5902585"><a href="/go/ast/filter.go.html#5901306">ndecls</a></span><span class="op" id="5902591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902595">funcs</span>&nbsp;<span class="op" id="5902601">:=</span>&nbsp;<span class="builtinfunc" id="5902604">make</span><span class="op" id="5902608">(</span><span class="keyword" id="5902609">map</span><span class="op" id="5902612">[</span><span class="builtintype" id="5902613">string</span><span class="op" id="5902619">]</span><span class="builtintype" id="5902620">int</span><span class="op" id="5902623">)</span>&nbsp;<span class="comment" id="5902625">//&nbsp;map&nbsp;of&nbsp;func&nbsp;name&nbsp;-&gt;&nbsp;decls&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902662">i</span>&nbsp;<span class="op" id="5902664">:=</span>&nbsp;<span class="num" id="5902667">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902692">//&nbsp;current&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902711">n</span>&nbsp;<span class="op" id="5902713">:=</span>&nbsp;<span class="num" id="5902716">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902741">//&nbsp;number&nbsp;of&nbsp;filtered&nbsp;entries</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902773">for</span>&nbsp;<span class="ident" id="5902777">_</span><span class="op" id="5902778">,</span>&nbsp;<span class="ident" id="5902780">filename</span>&nbsp;<span class="op" id="5902789">:=</span>&nbsp;<span class="keyword" id="5902792">range</span>&nbsp;<span class="ident" id="5902798"><a href="/go/ast/filter.go.html#5901319">filenames</a></span>&nbsp;<span class="op" id="5902808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902813">f</span>&nbsp;<span class="op" id="5902815">:=</span>&nbsp;<span class="ident" id="5902818"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5902821">.</span><span class="ident" id="5902822">Files</span><span class="op" id="5902827">[</span><span class="ident" id="5902828"><a href="/go/ast/filter.go.html#5902780">filename</a></span><span class="op" id="5902836">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902841">for</span>&nbsp;<span class="ident" id="5902845">_</span><span class="op" id="5902846">,</span>&nbsp;<span class="ident" id="5902848">d</span>&nbsp;<span class="op" id="5902850">:=</span>&nbsp;<span class="keyword" id="5902853">range</span>&nbsp;<span class="ident" id="5902859"><a href="/go/ast/filter.go.html#5902813">f</a></span><span class="op" id="5902860">.</span><span class="ident" id="5902861">Decls</span>&nbsp;<span class="op" id="5902867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902873">if</span>&nbsp;<span class="ident" id="5902876"><a href="/go/ast/filter.go.html#5901047">mode</a></span><span class="op" id="5902880">&amp;</span><span class="ident" id="5902881"><a href="/go/ast/filter.go.html#5899798">FilterFuncDuplicates</a></span>&nbsp;<span class="op" id="5902902">!=</span>&nbsp;<span class="num" id="5902905">0</span>&nbsp;<span class="op" id="5902907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902914">//&nbsp;A&nbsp;language&nbsp;entity&nbsp;may&nbsp;be&nbsp;declared&nbsp;multiple</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5902965">//&nbsp;times&nbsp;in&nbsp;different&nbsp;package&nbsp;files;&nbsp;only&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903015">//&nbsp;build&nbsp;time&nbsp;declarations&nbsp;must&nbsp;be&nbsp;unique.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903063">//&nbsp;For&nbsp;now,&nbsp;exclude&nbsp;multiple&nbsp;declarations&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903113">//&nbsp;functions&nbsp;-&nbsp;keep&nbsp;the&nbsp;one&nbsp;with&nbsp;documentation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903166">//</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903174">//&nbsp;TODO(gri):&nbsp;Expand&nbsp;this&nbsp;filtering&nbsp;to&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903224">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entities&nbsp;(const,&nbsp;type,&nbsp;vars)&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903275">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;multiple&nbsp;declarations&nbsp;are&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903328">if</span>&nbsp;<span class="ident" id="5903331">f</span><span class="op" id="5903332">,</span>&nbsp;<span class="ident" id="5903334">isFun</span>&nbsp;<span class="op" id="5903340">:=</span>&nbsp;<span class="ident" id="5903343"><a href="/go/ast/filter.go.html#5902848">d</a></span><span class="op" id="5903344">.</span><span class="op" id="5903345">(</span><span class="op" id="5903346">*</span><span class="ident" id="5903347"><a href="/go/ast/ast.go.html#5881197">FuncDecl</a></span><span class="op" id="5903355">)</span><span class="op" id="5903356">;</span>&nbsp;<span class="ident" id="5903358"><a href="/go/ast/filter.go.html#5903334">isFun</a></span>&nbsp;<span class="op" id="5903364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903372">name</span>&nbsp;<span class="op" id="5903377">:=</span>&nbsp;<span class="ident" id="5903380"><a href="/go/ast/filter.go.html#5900245">nameOf</a></span><span class="op" id="5903386">(</span><span class="ident" id="5903387"><a href="/go/ast/filter.go.html#5903331">f</a></span><span class="op" id="5903388">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903396">if</span>&nbsp;<span class="ident" id="5903399">j</span><span class="op" id="5903400">,</span>&nbsp;<span class="ident" id="5903402">exists</span>&nbsp;<span class="op" id="5903409">:=</span>&nbsp;<span class="ident" id="5903412"><a href="/go/ast/filter.go.html#5902595">funcs</a></span><span class="op" id="5903417">[</span><span class="ident" id="5903418"><a href="/go/ast/filter.go.html#5903372">name</a></span><span class="op" id="5903422">]</span><span class="op" id="5903423">;</span>&nbsp;<span class="ident" id="5903425"><a href="/go/ast/filter.go.html#5903402">exists</a></span>&nbsp;<span class="op" id="5903432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903441">//&nbsp;function&nbsp;declared&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903477">if</span>&nbsp;<span class="ident" id="5903480"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5903485">[</span><span class="ident" id="5903486"><a href="/go/ast/filter.go.html#5903399">j</a></span><span class="op" id="5903487">]</span>&nbsp;<span class="op" id="5903489">!=</span>&nbsp;<span class="ident" id="5903492">nil</span>&nbsp;<span class="op" id="5903496">&amp;&amp;</span>&nbsp;<span class="ident" id="5903499"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5903504">[</span><span class="ident" id="5903505"><a href="/go/ast/filter.go.html#5903399">j</a></span><span class="op" id="5903506">]</span><span class="op" id="5903507">.</span><span class="op" id="5903508">(</span><span class="op" id="5903509">*</span><span class="ident" id="5903510"><a href="/go/ast/ast.go.html#5881197">FuncDecl</a></span><span class="op" id="5903518">)</span><span class="op" id="5903519">.</span><span class="ident" id="5903520">Doc</span>&nbsp;<span class="op" id="5903524">==</span>&nbsp;<span class="ident" id="5903527">nil</span>&nbsp;<span class="op" id="5903531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903541">//&nbsp;existing&nbsp;declaration&nbsp;has&nbsp;no&nbsp;documentation;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903595">//&nbsp;ignore&nbsp;the&nbsp;existing&nbsp;declaration</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903638"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5903643">[</span><span class="ident" id="5903644"><a href="/go/ast/filter.go.html#5903399">j</a></span><span class="op" id="5903645">]</span>&nbsp;<span class="op" id="5903647">=</span>&nbsp;<span class="ident" id="5903649">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903660">}</span>&nbsp;<span class="keyword" id="5903662">else</span>&nbsp;<span class="op" id="5903667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903677">//&nbsp;ignore&nbsp;the&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903715"><a href="/go/ast/filter.go.html#5902848">d</a></span>&nbsp;<span class="op" id="5903717">=</span>&nbsp;<span class="ident" id="5903719">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903730">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903739"><a href="/go/ast/filter.go.html#5902711">n</a></span><span class="op" id="5903740">++</span>&nbsp;<span class="comment" id="5903743">//&nbsp;filtered&nbsp;an&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903770">}</span>&nbsp;<span class="keyword" id="5903772">else</span>&nbsp;<span class="op" id="5903777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903786"><a href="/go/ast/filter.go.html#5902595">funcs</a></span><span class="op" id="5903791">[</span><span class="ident" id="5903792"><a href="/go/ast/filter.go.html#5903372">name</a></span><span class="op" id="5903796">]</span>&nbsp;<span class="op" id="5903798">=</span>&nbsp;<span class="ident" id="5903800"><a href="/go/ast/filter.go.html#5902662">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903815">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903827"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5903832">[</span><span class="ident" id="5903833"><a href="/go/ast/filter.go.html#5902662">i</a></span><span class="op" id="5903834">]</span>&nbsp;<span class="op" id="5903836">=</span>&nbsp;<span class="ident" id="5903838"><a href="/go/ast/filter.go.html#5902848">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903844"><a href="/go/ast/filter.go.html#5902662">i</a></span><span class="op" id="5903845">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903855">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903860">//&nbsp;Eliminate&nbsp;nil&nbsp;entries&nbsp;from&nbsp;the&nbsp;decls&nbsp;list&nbsp;if&nbsp;entries&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903923">//&nbsp;filtered.&nbsp;We&nbsp;do&nbsp;this&nbsp;using&nbsp;a&nbsp;2nd&nbsp;pass&nbsp;in&nbsp;order&nbsp;to&nbsp;not&nbsp;disturb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903990">//&nbsp;the&nbsp;original&nbsp;declaration&nbsp;order&nbsp;in&nbsp;the&nbsp;source&nbsp;(otherwise,&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904057">//&nbsp;would&nbsp;also&nbsp;invalidate&nbsp;the&nbsp;monotonically&nbsp;increasing&nbsp;position</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904122">//&nbsp;info&nbsp;within&nbsp;a&nbsp;single&nbsp;file).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904155">if</span>&nbsp;<span class="ident" id="5904158"><a href="/go/ast/filter.go.html#5902711">n</a></span>&nbsp;<span class="op" id="5904160">&gt;</span>&nbsp;<span class="num" id="5904162">0</span>&nbsp;<span class="op" id="5904164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904169"><a href="/go/ast/filter.go.html#5902662">i</a></span>&nbsp;<span class="op" id="5904171">=</span>&nbsp;<span class="num" id="5904173">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904178">for</span>&nbsp;<span class="ident" id="5904182">_</span><span class="op" id="5904183">,</span>&nbsp;<span class="ident" id="5904185">d</span>&nbsp;<span class="op" id="5904187">:=</span>&nbsp;<span class="keyword" id="5904190">range</span>&nbsp;<span class="ident" id="5904196"><a href="/go/ast/filter.go.html#5902532">decls</a></span>&nbsp;<span class="op" id="5904202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904208">if</span>&nbsp;<span class="ident" id="5904211"><a href="/go/ast/filter.go.html#5904185">d</a></span>&nbsp;<span class="op" id="5904213">!=</span>&nbsp;<span class="ident" id="5904216">nil</span>&nbsp;<span class="op" id="5904220">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904227"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5904232">[</span><span class="ident" id="5904233"><a href="/go/ast/filter.go.html#5902662">i</a></span><span class="op" id="5904234">]</span>&nbsp;<span class="op" id="5904236">=</span>&nbsp;<span class="ident" id="5904238"><a href="/go/ast/filter.go.html#5904185">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904245"><a href="/go/ast/filter.go.html#5902662">i</a></span><span class="op" id="5904246">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904263"><a href="/go/ast/filter.go.html#5902532">decls</a></span>&nbsp;<span class="op" id="5904269">=</span>&nbsp;<span class="ident" id="5904271"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5904276">[</span><span class="num" id="5904277">0</span><span class="op" id="5904278">:</span><span class="ident" id="5904279"><a href="/go/ast/filter.go.html#5902662">i</a></span><span class="op" id="5904280">]</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904291">//&nbsp;Collect&nbsp;import&nbsp;specs&nbsp;from&nbsp;all&nbsp;package&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904340">var</span>&nbsp;<span class="ident" id="5904344">imports</span>&nbsp;<span class="op" id="5904352">[</span><span class="op" id="5904353">]</span><span class="op" id="5904354">*</span><span class="ident" id="5904355"><a href="/go/ast/ast.go.html#5878303">ImportSpec</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904367">if</span>&nbsp;<span class="ident" id="5904370"><a href="/go/ast/filter.go.html#5901047">mode</a></span><span class="op" id="5904374">&amp;</span><span class="ident" id="5904375"><a href="/go/ast/filter.go.html#5900034">FilterImportDuplicates</a></span>&nbsp;<span class="op" id="5904398">!=</span>&nbsp;<span class="num" id="5904401">0</span>&nbsp;<span class="op" id="5904403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904407">seen</span>&nbsp;<span class="op" id="5904412">:=</span>&nbsp;<span class="builtinfunc" id="5904415">make</span><span class="op" id="5904419">(</span><span class="keyword" id="5904420">map</span><span class="op" id="5904423">[</span><span class="builtintype" id="5904424">string</span><span class="op" id="5904430">]</span><span class="builtintype" id="5904431">bool</span><span class="op" id="5904435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904439">for</span>&nbsp;<span class="ident" id="5904443">_</span><span class="op" id="5904444">,</span>&nbsp;<span class="ident" id="5904446">filename</span>&nbsp;<span class="op" id="5904455">:=</span>&nbsp;<span class="keyword" id="5904458">range</span>&nbsp;<span class="ident" id="5904464"><a href="/go/ast/filter.go.html#5901319">filenames</a></span>&nbsp;<span class="op" id="5904474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904479">f</span>&nbsp;<span class="op" id="5904481">:=</span>&nbsp;<span class="ident" id="5904484"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5904487">.</span><span class="ident" id="5904488">Files</span><span class="op" id="5904493">[</span><span class="ident" id="5904494"><a href="/go/ast/filter.go.html#5904446">filename</a></span><span class="op" id="5904502">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904507">for</span>&nbsp;<span class="ident" id="5904511">_</span><span class="op" id="5904512">,</span>&nbsp;<span class="ident" id="5904514">imp</span>&nbsp;<span class="op" id="5904518">:=</span>&nbsp;<span class="keyword" id="5904521">range</span>&nbsp;<span class="ident" id="5904527"><a href="/go/ast/filter.go.html#5904479">f</a></span><span class="op" id="5904528">.</span><span class="ident" id="5904529">Imports</span>&nbsp;<span class="op" id="5904537">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904543">if</span>&nbsp;<span class="ident" id="5904546">path</span>&nbsp;<span class="op" id="5904551">:=</span>&nbsp;<span class="ident" id="5904554"><a href="/go/ast/filter.go.html#5904514">imp</a></span><span class="op" id="5904557">.</span><span class="ident" id="5904558">Path</span><span class="op" id="5904562">.</span><span class="ident" id="5904563">Value</span><span class="op" id="5904568">;</span>&nbsp;<span class="op" id="5904570">!</span><span class="ident" id="5904571"><a href="/go/ast/filter.go.html#5904407">seen</a></span><span class="op" id="5904575">[</span><span class="ident" id="5904576"><a href="/go/ast/filter.go.html#5904546">path</a></span><span class="op" id="5904580">]</span>&nbsp;<span class="op" id="5904582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904589">//&nbsp;TODO:&nbsp;consider&nbsp;handling&nbsp;cases&nbsp;where:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904634">//&nbsp;-&nbsp;2&nbsp;imports&nbsp;exist&nbsp;with&nbsp;the&nbsp;same&nbsp;import&nbsp;path&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904690">//&nbsp;&nbsp;&nbsp;have&nbsp;different&nbsp;local&nbsp;names&nbsp;(one&nbsp;should&nbsp;probably</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904748">//&nbsp;&nbsp;&nbsp;keep&nbsp;both&nbsp;of&nbsp;them)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904777">//&nbsp;-&nbsp;2&nbsp;imports&nbsp;exist&nbsp;but&nbsp;only&nbsp;one&nbsp;has&nbsp;a&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904830">//&nbsp;-&nbsp;2&nbsp;imports&nbsp;exist&nbsp;and&nbsp;they&nbsp;both&nbsp;have&nbsp;(possibly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904885">//&nbsp;&nbsp;&nbsp;different)&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904915"><a href="/go/ast/filter.go.html#5904344">imports</a></span>&nbsp;<span class="op" id="5904923">=</span>&nbsp;<span class="builtinfunc" id="5904925">append</span><span class="op" id="5904931">(</span><span class="ident" id="5904932"><a href="/go/ast/filter.go.html#5904344">imports</a></span><span class="op" id="5904939">,</span>&nbsp;<span class="ident" id="5904941"><a href="/go/ast/filter.go.html#5904514">imp</a></span><span class="op" id="5904944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904951"><a href="/go/ast/filter.go.html#5904407">seen</a></span><span class="op" id="5904955">[</span><span class="ident" id="5904956"><a href="/go/ast/filter.go.html#5904546">path</a></span><span class="op" id="5904960">]</span>&nbsp;<span class="op" id="5904962">=</span>&nbsp;<span class="ident" id="5904964">true</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904985">}</span>&nbsp;<span class="keyword" id="5904987">else</span>&nbsp;<span class="op" id="5904992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904996">for</span>&nbsp;<span class="ident" id="5905000">_</span><span class="op" id="5905001">,</span>&nbsp;<span class="ident" id="5905003">f</span>&nbsp;<span class="op" id="5905005">:=</span>&nbsp;<span class="keyword" id="5905008">range</span>&nbsp;<span class="ident" id="5905014"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5905017">.</span><span class="ident" id="5905018">Files</span>&nbsp;<span class="op" id="5905024">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905029"><a href="/go/ast/filter.go.html#5904344">imports</a></span>&nbsp;<span class="op" id="5905037">=</span>&nbsp;<span class="builtinfunc" id="5905039">append</span><span class="op" id="5905045">(</span><span class="ident" id="5905046"><a href="/go/ast/filter.go.html#5904344">imports</a></span><span class="op" id="5905053">,</span>&nbsp;<span class="ident" id="5905055"><a href="/go/ast/filter.go.html#5905003">f</a></span><span class="op" id="5905056">.</span><span class="ident" id="5905057">Imports</span><span class="op" id="5905064">...</span><span class="op" id="5905067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5905078">//&nbsp;Collect&nbsp;comments&nbsp;from&nbsp;all&nbsp;package&nbsp;files.</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905123">var</span>&nbsp;<span class="ident" id="5905127">comments</span>&nbsp;<span class="op" id="5905136">[</span><span class="op" id="5905137">]</span><span class="op" id="5905138">*</span><span class="ident" id="5905139"><a href="/go/ast/ast.go.html#5854728">CommentGroup</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905153">if</span>&nbsp;<span class="ident" id="5905156"><a href="/go/ast/filter.go.html#5901047">mode</a></span><span class="op" id="5905160">&amp;</span><span class="ident" id="5905161"><a href="/go/ast/filter.go.html#5899950">FilterUnassociatedComments</a></span>&nbsp;<span class="op" id="5905188">==</span>&nbsp;<span class="num" id="5905191">0</span>&nbsp;<span class="op" id="5905193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905197"><a href="/go/ast/filter.go.html#5905127">comments</a></span>&nbsp;<span class="op" id="5905206">=</span>&nbsp;<span class="builtinfunc" id="5905208">make</span><span class="op" id="5905212">(</span><span class="op" id="5905213">[</span><span class="op" id="5905214">]</span><span class="op" id="5905215">*</span><span class="ident" id="5905216"><a href="/go/ast/ast.go.html#5854728">CommentGroup</a></span><span class="op" id="5905228">,</span>&nbsp;<span class="ident" id="5905230"><a href="/go/ast/filter.go.html#5901290">ncomments</a></span><span class="op" id="5905239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905243">i</span>&nbsp;<span class="op" id="5905245">:=</span>&nbsp;<span class="num" id="5905248">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905252">for</span>&nbsp;<span class="ident" id="5905256">_</span><span class="op" id="5905257">,</span>&nbsp;<span class="ident" id="5905259">f</span>&nbsp;<span class="op" id="5905261">:=</span>&nbsp;<span class="keyword" id="5905264">range</span>&nbsp;<span class="ident" id="5905270"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5905273">.</span><span class="ident" id="5905274">Files</span>&nbsp;<span class="op" id="5905280">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905285"><a href="/go/ast/filter.go.html#5905243">i</a></span>&nbsp;<span class="op" id="5905287">+=</span>&nbsp;<span class="builtinfunc" id="5905290">copy</span><span class="op" id="5905294">(</span><span class="ident" id="5905295"><a href="/go/ast/filter.go.html#5905127">comments</a></span><span class="op" id="5905303">[</span><span class="ident" id="5905304"><a href="/go/ast/filter.go.html#5905243">i</a></span><span class="op" id="5905305">:</span><span class="op" id="5905306">]</span><span class="op" id="5905307">,</span>&nbsp;<span class="ident" id="5905309"><a href="/go/ast/filter.go.html#5905259">f</a></span><span class="op" id="5905310">.</span><span class="ident" id="5905311">Comments</span><span class="op" id="5905319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5905330">//&nbsp;TODO(gri)&nbsp;need&nbsp;to&nbsp;compute&nbsp;unresolved&nbsp;identifiers!</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905384">return</span>&nbsp;<span class="op" id="5905391">&amp;</span><span class="ident" id="5905392"><a href="/go/ast/ast.go.html#5882563">File</a></span><span class="op" id="5905396">{</span><span class="ident" id="5905397"><a href="/go/ast/filter.go.html#5901873">doc</a></span><span class="op" id="5905400">,</span>&nbsp;<span class="ident" id="5905402"><a href="/go/ast/filter.go.html#5901896">pos</a></span><span class="op" id="5905405">,</span>&nbsp;<span class="ident" id="5905407"><a href="/go/ast/ast.go.html#5868645">NewIdent</a></span><span class="op" id="5905415">(</span><span class="ident" id="5905416"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5905419">.</span><span class="ident" id="5905420">Name</span><span class="op" id="5905424">)</span><span class="op" id="5905425">,</span>&nbsp;<span class="ident" id="5905427"><a href="/go/ast/filter.go.html#5902532">decls</a></span><span class="op" id="5905432">,</span>&nbsp;<span class="ident" id="5905434"><a href="/go/ast/filter.go.html#5901033">pkg</a></span><span class="op" id="5905437">.</span><span class="ident" id="5905438">Scope</span><span class="op" id="5905443">,</span>&nbsp;<span class="ident" id="5905445"><a href="/go/ast/filter.go.html#5904344">imports</a></span><span class="op" id="5905452">,</span>&nbsp;<span class="ident" id="5905454">nil</span><span class="op" id="5905457">,</span>&nbsp;<span class="ident" id="5905459"><a href="/go/ast/filter.go.html#5905127">comments</a></span><span class="op" id="5905467">}</span><br>
<span class="lineno"></span><span class="op" id="5905469">}</span>
</div>
</body>
</html>
