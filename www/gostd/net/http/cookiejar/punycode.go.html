<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5572337">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5572392">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5572446">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5572497">package</span>&nbsp;<span class="ident" id="5572505">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5572516">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5572579">import</span>&nbsp;<span class="op" id="5572586">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5572589">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5572596">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5572607">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5572622">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5572625">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5572679">//</span><br>
<span class="lineno"></span><span class="comment" id="5572682">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5572761">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5572811">const</span>&nbsp;<span class="op" id="5572817">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572820">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5572832">int32</span>&nbsp;<span class="op" id="5572838">=</span>&nbsp;<span class="num" id="5572840">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572844">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5572856">int32</span>&nbsp;<span class="op" id="5572862">=</span>&nbsp;<span class="num" id="5572864">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572869">initialBias</span>&nbsp;<span class="builtintype" id="5572881">int32</span>&nbsp;<span class="op" id="5572887">=</span>&nbsp;<span class="num" id="5572889">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572893">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5572905">int32</span>&nbsp;<span class="op" id="5572911">=</span>&nbsp;<span class="num" id="5572913">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572918">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5572930">int32</span>&nbsp;<span class="op" id="5572936">=</span>&nbsp;<span class="num" id="5572938">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572942">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5572954">int32</span>&nbsp;<span class="op" id="5572960">=</span>&nbsp;<span class="num" id="5572962">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5572966">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5572978">int32</span>&nbsp;<span class="op" id="5572984">=</span>&nbsp;<span class="num" id="5572986">1</span><br>
<span class="lineno"></span><span class="op" id="5572988">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5572991">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5573069">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5573084">//</span><br>
<span class="lineno"></span><span class="comment" id="5573087">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5573159">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5573239">func</span>&nbsp;<span class="ident" id="5573244">encode</span><span class="op" id="5573250">(</span><span class="ident" id="5573251">prefix</span><span class="op" id="5573257">,</span>&nbsp;<span class="ident" id="5573259">s</span>&nbsp;<span class="builtintype" id="5573261">string</span><span class="op" id="5573267">)</span>&nbsp;<span class="op" id="5573269">(</span><span class="builtintype" id="5573270">string</span><span class="op" id="5573276">,</span>&nbsp;<span class="builtintype" id="5573278">error</span><span class="op" id="5573283">)</span>&nbsp;<span class="op" id="5573285">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573288">output</span>&nbsp;<span class="op" id="5573295">:=</span>&nbsp;<span class="builtinfunc" id="5573298">make</span><span class="op" id="5573302">(</span><span class="op" id="5573303">[</span><span class="op" id="5573304">]</span><span class="builtintype" id="5573305">byte</span><span class="op" id="5573309">,</span>&nbsp;<span class="builtinfunc" id="5573311">len</span><span class="op" id="5573314">(</span><span class="ident" id="5573315">prefix</span><span class="op" id="5573321">)</span><span class="op" id="5573322">,</span>&nbsp;<span class="builtinfunc" id="5573324">len</span><span class="op" id="5573327">(</span><span class="ident" id="5573328">prefix</span><span class="op" id="5573334">)</span><span class="op" id="5573335">+</span><span class="num" id="5573336">1</span><span class="op" id="5573337">+</span><span class="num" id="5573338">2</span><span class="op" id="5573339">*</span><span class="builtinfunc" id="5573340">len</span><span class="op" id="5573343">(</span><span class="ident" id="5573344">s</span><span class="op" id="5573345">)</span><span class="op" id="5573346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5573349">copy</span><span class="op" id="5573353">(</span><span class="ident" id="5573354">output</span><span class="op" id="5573360">,</span>&nbsp;<span class="ident" id="5573362">prefix</span><span class="op" id="5573368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573371">delta</span><span class="op" id="5573376">,</span>&nbsp;<span class="ident" id="5573378">n</span><span class="op" id="5573379">,</span>&nbsp;<span class="ident" id="5573381">bias</span>&nbsp;<span class="op" id="5573386">:=</span>&nbsp;<span class="builtintype" id="5573389">int32</span><span class="op" id="5573394">(</span><span class="num" id="5573395">0</span><span class="op" id="5573396">)</span><span class="op" id="5573397">,</span>&nbsp;<span class="ident" id="5573399">initialN</span><span class="op" id="5573407">,</span>&nbsp;<span class="ident" id="5573409">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573422">b</span><span class="op" id="5573423">,</span>&nbsp;<span class="ident" id="5573425">remaining</span>&nbsp;<span class="op" id="5573435">:=</span>&nbsp;<span class="builtintype" id="5573438">int32</span><span class="op" id="5573443">(</span><span class="num" id="5573444">0</span><span class="op" id="5573445">)</span><span class="op" id="5573446">,</span>&nbsp;<span class="builtintype" id="5573448">int32</span><span class="op" id="5573453">(</span><span class="num" id="5573454">0</span><span class="op" id="5573455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573458">for</span>&nbsp;<span class="ident" id="5573462">_</span><span class="op" id="5573463">,</span>&nbsp;<span class="ident" id="5573465">r</span>&nbsp;<span class="op" id="5573467">:=</span>&nbsp;<span class="keyword" id="5573470">range</span>&nbsp;<span class="ident" id="5573476">s</span>&nbsp;<span class="op" id="5573478">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573482">if</span>&nbsp;<span class="ident" id="5573485">r</span>&nbsp;<span class="op" id="5573487">&lt;</span>&nbsp;<span class="num" id="5573489">0x80</span>&nbsp;<span class="op" id="5573494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573499">b</span><span class="op" id="5573500">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573506">output</span>&nbsp;<span class="op" id="5573513">=</span>&nbsp;<span class="builtinfunc" id="5573515">append</span><span class="op" id="5573521">(</span><span class="ident" id="5573522">output</span><span class="op" id="5573528">,</span>&nbsp;<span class="builtintype" id="5573530">byte</span><span class="op" id="5573534">(</span><span class="ident" id="5573535">r</span><span class="op" id="5573536">)</span><span class="op" id="5573537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573541">}</span>&nbsp;<span class="keyword" id="5573543">else</span>&nbsp;<span class="op" id="5573548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573553">remaining</span><span class="op" id="5573562">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573573">h</span>&nbsp;<span class="op" id="5573575">:=</span>&nbsp;<span class="ident" id="5573578">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573581">if</span>&nbsp;<span class="ident" id="5573584">b</span>&nbsp;<span class="op" id="5573586">&gt;</span>&nbsp;<span class="num" id="5573588">0</span>&nbsp;<span class="op" id="5573590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573594">output</span>&nbsp;<span class="op" id="5573601">=</span>&nbsp;<span class="builtinfunc" id="5573603">append</span><span class="op" id="5573609">(</span><span class="ident" id="5573610">output</span><span class="op" id="5573616">,</span>&nbsp;<span class="string" id="5573618">&#39;-&#39;</span><span class="op" id="5573621">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573627">for</span>&nbsp;<span class="ident" id="5573631">remaining</span>&nbsp;<span class="op" id="5573641">!=</span>&nbsp;<span class="num" id="5573644">0</span>&nbsp;<span class="op" id="5573646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573650">m</span>&nbsp;<span class="op" id="5573652">:=</span>&nbsp;<span class="builtintype" id="5573655">int32</span><span class="op" id="5573660">(</span><span class="num" id="5573661">0x7fffffff</span><span class="op" id="5573671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573675">for</span>&nbsp;<span class="ident" id="5573679">_</span><span class="op" id="5573680">,</span>&nbsp;<span class="ident" id="5573682">r</span>&nbsp;<span class="op" id="5573684">:=</span>&nbsp;<span class="keyword" id="5573687">range</span>&nbsp;<span class="ident" id="5573693">s</span>&nbsp;<span class="op" id="5573695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573700">if</span>&nbsp;<span class="ident" id="5573703">m</span>&nbsp;<span class="op" id="5573705">&gt;</span>&nbsp;<span class="ident" id="5573707">r</span>&nbsp;<span class="op" id="5573709">&amp;&amp;</span>&nbsp;<span class="ident" id="5573712">r</span>&nbsp;<span class="op" id="5573714">&gt;=</span>&nbsp;<span class="ident" id="5573717">n</span>&nbsp;<span class="op" id="5573719">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573725">m</span>&nbsp;<span class="op" id="5573727">=</span>&nbsp;<span class="ident" id="5573729">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573742">delta</span>&nbsp;<span class="op" id="5573748">+=</span>&nbsp;<span class="op" id="5573751">(</span><span class="ident" id="5573752">m</span>&nbsp;<span class="op" id="5573754">-</span>&nbsp;<span class="ident" id="5573756">n</span><span class="op" id="5573757">)</span>&nbsp;<span class="op" id="5573759">*</span>&nbsp;<span class="op" id="5573761">(</span><span class="ident" id="5573762">h</span>&nbsp;<span class="op" id="5573764">+</span>&nbsp;<span class="num" id="5573766">1</span><span class="op" id="5573767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573771">if</span>&nbsp;<span class="ident" id="5573774">delta</span>&nbsp;<span class="op" id="5573780">&lt;</span>&nbsp;<span class="num" id="5573782">0</span>&nbsp;<span class="op" id="5573784">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573789">return</span>&nbsp;<span class="string" id="5573796">&#34;&#34;</span><span class="op" id="5573798">,</span>&nbsp;<span class="ident" id="5573800">fmt</span><span class="op" id="5573803">.</span><span class="ident" id="5573804">Errorf</span><span class="op" id="5573810">(</span><span class="string" id="5573811">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5573840">,</span>&nbsp;<span class="ident" id="5573842">s</span><span class="op" id="5573843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573851">n</span>&nbsp;<span class="op" id="5573853">=</span>&nbsp;<span class="ident" id="5573855">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573859">for</span>&nbsp;<span class="ident" id="5573863">_</span><span class="op" id="5573864">,</span>&nbsp;<span class="ident" id="5573866">r</span>&nbsp;<span class="op" id="5573868">:=</span>&nbsp;<span class="keyword" id="5573871">range</span>&nbsp;<span class="ident" id="5573877">s</span>&nbsp;<span class="op" id="5573879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573884">if</span>&nbsp;<span class="ident" id="5573887">r</span>&nbsp;<span class="op" id="5573889">&lt;</span>&nbsp;<span class="ident" id="5573891">n</span>&nbsp;<span class="op" id="5573893">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5573899">delta</span><span class="op" id="5573904">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573911">if</span>&nbsp;<span class="ident" id="5573914">delta</span>&nbsp;<span class="op" id="5573920">&lt;</span>&nbsp;<span class="num" id="5573922">0</span>&nbsp;<span class="op" id="5573924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573931">return</span>&nbsp;<span class="string" id="5573938">&#34;&#34;</span><span class="op" id="5573940">,</span>&nbsp;<span class="ident" id="5573942">fmt</span><span class="op" id="5573945">.</span><span class="ident" id="5573946">Errorf</span><span class="op" id="5573952">(</span><span class="string" id="5573953">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5573982">,</span>&nbsp;<span class="ident" id="5573984">s</span><span class="op" id="5573985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5573991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5573997">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574014">if</span>&nbsp;<span class="ident" id="5574017">r</span>&nbsp;<span class="op" id="5574019">&gt;</span>&nbsp;<span class="ident" id="5574021">n</span>&nbsp;<span class="op" id="5574023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574029">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574046">q</span>&nbsp;<span class="op" id="5574048">:=</span>&nbsp;<span class="ident" id="5574051">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574060">for</span>&nbsp;<span class="ident" id="5574064">k</span>&nbsp;<span class="op" id="5574066">:=</span>&nbsp;<span class="ident" id="5574069">base</span><span class="op" id="5574073">;</span>&nbsp;<span class="op" id="5574075">;</span>&nbsp;<span class="ident" id="5574077">k</span>&nbsp;<span class="op" id="5574079">+=</span>&nbsp;<span class="ident" id="5574082">base</span>&nbsp;<span class="op" id="5574087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574093">t</span>&nbsp;<span class="op" id="5574095">:=</span>&nbsp;<span class="ident" id="5574098">k</span>&nbsp;<span class="op" id="5574100">-</span>&nbsp;<span class="ident" id="5574102">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574111">if</span>&nbsp;<span class="ident" id="5574114">t</span>&nbsp;<span class="op" id="5574116">&lt;</span>&nbsp;<span class="ident" id="5574118">tmin</span>&nbsp;<span class="op" id="5574123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574130">t</span>&nbsp;<span class="op" id="5574132">=</span>&nbsp;<span class="ident" id="5574134">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574143">}</span>&nbsp;<span class="keyword" id="5574145">else</span>&nbsp;<span class="keyword" id="5574150">if</span>&nbsp;<span class="ident" id="5574153">t</span>&nbsp;<span class="op" id="5574155">&gt;</span>&nbsp;<span class="ident" id="5574157">tmax</span>&nbsp;<span class="op" id="5574162">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574169">t</span>&nbsp;<span class="op" id="5574171">=</span>&nbsp;<span class="ident" id="5574173">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574188">if</span>&nbsp;<span class="ident" id="5574191">q</span>&nbsp;<span class="op" id="5574193">&lt;</span>&nbsp;<span class="ident" id="5574195">t</span>&nbsp;<span class="op" id="5574197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574204">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574214">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574220">output</span>&nbsp;<span class="op" id="5574227">=</span>&nbsp;<span class="builtinfunc" id="5574229">append</span><span class="op" id="5574235">(</span><span class="ident" id="5574236">output</span><span class="op" id="5574242">,</span>&nbsp;<span class="ident" id="5574244">encodeDigit</span><span class="op" id="5574255">(</span><span class="ident" id="5574256">t</span><span class="op" id="5574257">+</span><span class="op" id="5574258">(</span><span class="ident" id="5574259">q</span><span class="op" id="5574260">-</span><span class="ident" id="5574261">t</span><span class="op" id="5574262">)</span><span class="op" id="5574263">%</span><span class="op" id="5574264">(</span><span class="ident" id="5574265">base</span><span class="op" id="5574269">-</span><span class="ident" id="5574270">t</span><span class="op" id="5574271">)</span><span class="op" id="5574272">)</span><span class="op" id="5574273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574279">q</span>&nbsp;<span class="op" id="5574281">=</span>&nbsp;<span class="op" id="5574283">(</span><span class="ident" id="5574284">q</span>&nbsp;<span class="op" id="5574286">-</span>&nbsp;<span class="ident" id="5574288">t</span><span class="op" id="5574289">)</span>&nbsp;<span class="op" id="5574291">/</span>&nbsp;<span class="op" id="5574293">(</span><span class="ident" id="5574294">base</span>&nbsp;<span class="op" id="5574299">-</span>&nbsp;<span class="ident" id="5574301">t</span><span class="op" id="5574302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574312">output</span>&nbsp;<span class="op" id="5574319">=</span>&nbsp;<span class="builtinfunc" id="5574321">append</span><span class="op" id="5574327">(</span><span class="ident" id="5574328">output</span><span class="op" id="5574334">,</span>&nbsp;<span class="ident" id="5574336">encodeDigit</span><span class="op" id="5574347">(</span><span class="ident" id="5574348">q</span><span class="op" id="5574349">)</span><span class="op" id="5574350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574355">bias</span>&nbsp;<span class="op" id="5574360">=</span>&nbsp;<span class="ident" id="5574362">adapt</span><span class="op" id="5574367">(</span><span class="ident" id="5574368">delta</span><span class="op" id="5574373">,</span>&nbsp;<span class="ident" id="5574375">h</span><span class="op" id="5574376">+</span><span class="num" id="5574377">1</span><span class="op" id="5574378">,</span>&nbsp;<span class="ident" id="5574380">h</span>&nbsp;<span class="op" id="5574382">==</span>&nbsp;<span class="ident" id="5574385">b</span><span class="op" id="5574386">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574391">delta</span>&nbsp;<span class="op" id="5574397">=</span>&nbsp;<span class="num" id="5574399">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574404">h</span><span class="op" id="5574405">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574411">remaining</span><span class="op" id="5574420">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574429">delta</span><span class="op" id="5574434">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574439">n</span><span class="op" id="5574440">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574447">return</span>&nbsp;<span class="builtintype" id="5574454">string</span><span class="op" id="5574460">(</span><span class="ident" id="5574461">output</span><span class="op" id="5574467">)</span><span class="op" id="5574468">,</span>&nbsp;<span class="ident" id="5574470">nil</span><br>
<span class="lineno"></span><span class="op" id="5574474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5574477">func</span>&nbsp;<span class="ident" id="5574482">encodeDigit</span><span class="op" id="5574493">(</span><span class="ident" id="5574494">digit</span>&nbsp;<span class="builtintype" id="5574500">int32</span><span class="op" id="5574505">)</span>&nbsp;<span class="builtintype" id="5574507">byte</span>&nbsp;<span class="op" id="5574512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574515">switch</span>&nbsp;<span class="op" id="5574522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574525">case</span>&nbsp;<span class="num" id="5574530">0</span>&nbsp;<span class="op" id="5574532">&lt;=</span>&nbsp;<span class="ident" id="5574535">digit</span>&nbsp;<span class="op" id="5574541">&amp;&amp;</span>&nbsp;<span class="ident" id="5574544">digit</span>&nbsp;<span class="op" id="5574550">&lt;</span>&nbsp;<span class="num" id="5574552">26</span><span class="op" id="5574554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574558">return</span>&nbsp;<span class="builtintype" id="5574565">byte</span><span class="op" id="5574569">(</span><span class="ident" id="5574570">digit</span>&nbsp;<span class="op" id="5574576">+</span>&nbsp;<span class="string" id="5574578">&#39;a&#39;</span><span class="op" id="5574581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574584">case</span>&nbsp;<span class="num" id="5574589">26</span>&nbsp;<span class="op" id="5574592">&lt;=</span>&nbsp;<span class="ident" id="5574595">digit</span>&nbsp;<span class="op" id="5574601">&amp;&amp;</span>&nbsp;<span class="ident" id="5574604">digit</span>&nbsp;<span class="op" id="5574610">&lt;</span>&nbsp;<span class="num" id="5574612">36</span><span class="op" id="5574614">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574618">return</span>&nbsp;<span class="builtintype" id="5574625">byte</span><span class="op" id="5574629">(</span><span class="ident" id="5574630">digit</span>&nbsp;<span class="op" id="5574636">+</span>&nbsp;<span class="op" id="5574638">(</span><span class="string" id="5574639">&#39;0&#39;</span>&nbsp;<span class="op" id="5574643">-</span>&nbsp;<span class="num" id="5574645">26</span><span class="op" id="5574647">)</span><span class="op" id="5574648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5574654">panic</span><span class="op" id="5574659">(</span><span class="string" id="5574660">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5574708">)</span><br>
<span class="lineno"></span><span class="op" id="5574710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5574713">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5574780">func</span>&nbsp;<span class="ident" id="5574785">adapt</span><span class="op" id="5574790">(</span><span class="ident" id="5574791">delta</span><span class="op" id="5574796">,</span>&nbsp;<span class="ident" id="5574798">numPoints</span>&nbsp;<span class="builtintype" id="5574808">int32</span><span class="op" id="5574813">,</span>&nbsp;<span class="ident" id="5574815">firstTime</span>&nbsp;<span class="builtintype" id="5574825">bool</span><span class="op" id="5574829">)</span>&nbsp;<span class="builtintype" id="5574831">int32</span>&nbsp;<span class="op" id="5574837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574840">if</span>&nbsp;<span class="ident" id="5574843">firstTime</span>&nbsp;<span class="op" id="5574853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574857">delta</span>&nbsp;<span class="op" id="5574863">/=</span>&nbsp;<span class="ident" id="5574866">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574872">}</span>&nbsp;<span class="keyword" id="5574874">else</span>&nbsp;<span class="op" id="5574879">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574883">delta</span>&nbsp;<span class="op" id="5574889">/=</span>&nbsp;<span class="num" id="5574892">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5574895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574898">delta</span>&nbsp;<span class="op" id="5574904">+=</span>&nbsp;<span class="ident" id="5574907">delta</span>&nbsp;<span class="op" id="5574913">/</span>&nbsp;<span class="ident" id="5574915">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574926">k</span>&nbsp;<span class="op" id="5574928">:=</span>&nbsp;<span class="builtintype" id="5574931">int32</span><span class="op" id="5574936">(</span><span class="num" id="5574937">0</span><span class="op" id="5574938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5574941">for</span>&nbsp;<span class="ident" id="5574945">delta</span>&nbsp;<span class="op" id="5574951">&gt;</span>&nbsp;<span class="op" id="5574953">(</span><span class="op" id="5574954">(</span><span class="ident" id="5574955">base</span><span class="op" id="5574959">-</span><span class="ident" id="5574960">tmin</span><span class="op" id="5574964">)</span><span class="op" id="5574965">*</span><span class="ident" id="5574966">tmax</span><span class="op" id="5574970">)</span><span class="op" id="5574971">/</span><span class="num" id="5574972">2</span>&nbsp;<span class="op" id="5574974">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5574978">delta</span>&nbsp;<span class="op" id="5574984">/=</span>&nbsp;<span class="ident" id="5574987">base</span>&nbsp;<span class="op" id="5574992">-</span>&nbsp;<span class="ident" id="5574994">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5575001">k</span>&nbsp;<span class="op" id="5575003">+=</span>&nbsp;<span class="ident" id="5575006">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575015">return</span>&nbsp;<span class="ident" id="5575022">k</span>&nbsp;<span class="op" id="5575024">+</span>&nbsp;<span class="op" id="5575026">(</span><span class="ident" id="5575027">base</span><span class="op" id="5575031">-</span><span class="ident" id="5575032">tmin</span><span class="op" id="5575036">+</span><span class="num" id="5575037">1</span><span class="op" id="5575038">)</span><span class="op" id="5575039">*</span><span class="ident" id="5575040">delta</span><span class="op" id="5575045">/</span><span class="op" id="5575046">(</span><span class="ident" id="5575047">delta</span><span class="op" id="5575052">+</span><span class="ident" id="5575053">skew</span><span class="op" id="5575057">)</span><br>
<span class="lineno"></span><span class="op" id="5575059">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5575062">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5575139">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5575188">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5575242">const</span>&nbsp;<span class="ident" id="5575248">acePrefix</span>&nbsp;<span class="op" id="5575258">=</span>&nbsp;<span class="string" id="5575260">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5575268">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5575345">//&nbsp;toASCII(&#34;b√ºcher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5575415">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5575449">func</span>&nbsp;<span class="ident" id="5575454">toASCII</span><span class="op" id="5575461">(</span><span class="ident" id="5575462">s</span>&nbsp;<span class="builtintype" id="5575464">string</span><span class="op" id="5575470">)</span>&nbsp;<span class="op" id="5575472">(</span><span class="builtintype" id="5575473">string</span><span class="op" id="5575479">,</span>&nbsp;<span class="builtintype" id="5575481">error</span><span class="op" id="5575486">)</span>&nbsp;<span class="op" id="5575488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575491">if</span>&nbsp;<span class="ident" id="5575494">ascii</span><span class="op" id="5575499">(</span><span class="ident" id="5575500">s</span><span class="op" id="5575501">)</span>&nbsp;<span class="op" id="5575503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575507">return</span>&nbsp;<span class="ident" id="5575514">s</span><span class="op" id="5575515">,</span>&nbsp;<span class="ident" id="5575517">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5575525">labels</span>&nbsp;<span class="op" id="5575532">:=</span>&nbsp;<span class="ident" id="5575535">strings</span><span class="op" id="5575542">.</span><span class="ident" id="5575543">Split</span><span class="op" id="5575548">(</span><span class="ident" id="5575549">s</span><span class="op" id="5575550">,</span>&nbsp;<span class="string" id="5575552">&#34;.&#34;</span><span class="op" id="5575555">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575558">for</span>&nbsp;<span class="ident" id="5575562">i</span><span class="op" id="5575563">,</span>&nbsp;<span class="ident" id="5575565">label</span>&nbsp;<span class="op" id="5575571">:=</span>&nbsp;<span class="keyword" id="5575574">range</span>&nbsp;<span class="ident" id="5575580">labels</span>&nbsp;<span class="op" id="5575587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575591">if</span>&nbsp;<span class="op" id="5575594">!</span><span class="ident" id="5575595">ascii</span><span class="op" id="5575600">(</span><span class="ident" id="5575601">label</span><span class="op" id="5575606">)</span>&nbsp;<span class="op" id="5575608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5575613">a</span><span class="op" id="5575614">,</span>&nbsp;<span class="ident" id="5575616">err</span>&nbsp;<span class="op" id="5575620">:=</span>&nbsp;<span class="ident" id="5575623">encode</span><span class="op" id="5575629">(</span><span class="ident" id="5575630">acePrefix</span><span class="op" id="5575639">,</span>&nbsp;<span class="ident" id="5575641">label</span><span class="op" id="5575646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575651">if</span>&nbsp;<span class="ident" id="5575654">err</span>&nbsp;<span class="op" id="5575658">!=</span>&nbsp;<span class="ident" id="5575661">nil</span>&nbsp;<span class="op" id="5575665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575671">return</span>&nbsp;<span class="string" id="5575678">&#34;&#34;</span><span class="op" id="5575680">,</span>&nbsp;<span class="ident" id="5575682">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5575694">labels</span><span class="op" id="5575700">[</span><span class="ident" id="5575701">i</span><span class="op" id="5575702">]</span>&nbsp;<span class="op" id="5575704">=</span>&nbsp;<span class="ident" id="5575706">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575716">return</span>&nbsp;<span class="ident" id="5575723">strings</span><span class="op" id="5575730">.</span><span class="ident" id="5575731">Join</span><span class="op" id="5575735">(</span><span class="ident" id="5575736">labels</span><span class="op" id="5575742">,</span>&nbsp;<span class="string" id="5575744">&#34;.&#34;</span><span class="op" id="5575747">)</span><span class="op" id="5575748">,</span>&nbsp;<span class="ident" id="5575750">nil</span><br>
<span class="lineno">150</span><span class="op" id="5575754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5575757">func</span>&nbsp;<span class="ident" id="5575762">ascii</span><span class="op" id="5575767">(</span><span class="ident" id="5575768">s</span>&nbsp;<span class="builtintype" id="5575770">string</span><span class="op" id="5575776">)</span>&nbsp;<span class="builtintype" id="5575778">bool</span>&nbsp;<span class="op" id="5575783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575786">for</span>&nbsp;<span class="ident" id="5575790">i</span>&nbsp;<span class="op" id="5575792">:=</span>&nbsp;<span class="num" id="5575795">0</span><span class="op" id="5575796">;</span>&nbsp;<span class="ident" id="5575798">i</span>&nbsp;<span class="op" id="5575800">&lt;</span>&nbsp;<span class="builtinfunc" id="5575802">len</span><span class="op" id="5575805">(</span><span class="ident" id="5575806">s</span><span class="op" id="5575807">)</span><span class="op" id="5575808">;</span>&nbsp;<span class="ident" id="5575810">i</span><span class="op" id="5575811">++</span>&nbsp;<span class="op" id="5575814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575818">if</span>&nbsp;<span class="ident" id="5575821">s</span><span class="op" id="5575822">[</span><span class="ident" id="5575823">i</span><span class="op" id="5575824">]</span>&nbsp;<span class="op" id="5575826">&gt;=</span>&nbsp;<span class="ident" id="5575829">utf8</span><span class="op" id="5575833">.</span><span class="ident" id="5575834">RuneSelf</span>&nbsp;<span class="op" id="5575843">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575848">return</span>&nbsp;<span class="builtintype" id="5575855">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5575866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5575869">return</span>&nbsp;<span class="builtintype" id="5575876">true</span><br>
<span class="lineno"></span><span class="op" id="5575881">}</span>
</div>
</body>
</html>
