<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html" class="current">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4330468">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4330524">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4330578">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4330629">package</span>&nbsp;<span class="ident" id="4330637">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4330644">import</span>&nbsp;<span class="op" id="4330651">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330654">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330661">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4330671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330674">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4330745">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="4330813">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4330879">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="4330947">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4330987">type</span>&nbsp;<span class="ident" id="4330992">typeUnit</span>&nbsp;<span class="keyword" id="4331001">struct</span>&nbsp;<span class="op" id="4331008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331011">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331017">toff</span>&nbsp;&nbsp;<span class="ident" id="4331023">Offset</span>&nbsp;<span class="comment" id="4331030">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331072">name</span>&nbsp;&nbsp;<span class="builtintype" id="4331078">string</span>&nbsp;<span class="comment" id="4331085">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331118">cache</span>&nbsp;<span class="ident" id="4331124">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4331131">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="4331164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4331167">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="4331200">func</span>&nbsp;<span class="op" id="4331205">(</span><span class="ident" id="4331206">d</span>&nbsp;<span class="op" id="4331208">*</span><span class="ident" id="4331209">Data</span><span class="op" id="4331213">)</span>&nbsp;<span class="ident" id="4331215">parseTypes</span><span class="op" id="4331225">(</span><span class="ident" id="4331226">name</span>&nbsp;<span class="builtintype" id="4331231">string</span><span class="op" id="4331237">,</span>&nbsp;<span class="ident" id="4331239">types</span>&nbsp;<span class="op" id="4331245">[</span><span class="op" id="4331246">]</span><span class="builtintype" id="4331247">byte</span><span class="op" id="4331251">)</span>&nbsp;<span class="builtintype" id="4331253">error</span>&nbsp;<span class="op" id="4331259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331262">b</span>&nbsp;<span class="op" id="4331264">:=</span>&nbsp;<span class="ident" id="4331267">makeBuf</span><span class="op" id="4331274">(</span><span class="ident" id="4331275">d</span><span class="op" id="4331276">,</span>&nbsp;<span class="ident" id="4331278">unknownFormat</span><span class="op" id="4331291">{</span><span class="op" id="4331292">}</span><span class="op" id="4331293">,</span>&nbsp;<span class="ident" id="4331295">name</span><span class="op" id="4331299">,</span>&nbsp;<span class="num" id="4331301">0</span><span class="op" id="4331302">,</span>&nbsp;<span class="ident" id="4331304">types</span><span class="op" id="4331309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331312">for</span>&nbsp;<span class="builtinfunc" id="4331316">len</span><span class="op" id="4331319">(</span><span class="ident" id="4331320">b</span><span class="op" id="4331321">.</span><span class="ident" id="4331322">data</span><span class="op" id="4331326">)</span>&nbsp;<span class="op" id="4331328">&gt;</span>&nbsp;<span class="num" id="4331330">0</span>&nbsp;<span class="op" id="4331332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331336">base</span>&nbsp;<span class="op" id="4331341">:=</span>&nbsp;<span class="ident" id="4331344">b</span><span class="op" id="4331345">.</span><span class="ident" id="4331346">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331352">dwarf64</span>&nbsp;<span class="op" id="4331360">:=</span>&nbsp;<span class="builtintype" id="4331363">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331371">n</span>&nbsp;<span class="op" id="4331373">:=</span>&nbsp;<span class="ident" id="4331376">b</span><span class="op" id="4331377">.</span><span class="builtintype" id="4331378">uint32</span><span class="op" id="4331384">(</span><span class="op" id="4331385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331389">if</span>&nbsp;<span class="ident" id="4331392">n</span>&nbsp;<span class="op" id="4331394">==</span>&nbsp;<span class="num" id="4331397">0xffffffff</span>&nbsp;<span class="op" id="4331408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331413">n64</span>&nbsp;<span class="op" id="4331417">:=</span>&nbsp;<span class="ident" id="4331420">b</span><span class="op" id="4331421">.</span><span class="ident" id="4331422">uint64</span><span class="op" id="4331428">(</span><span class="op" id="4331429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331434">if</span>&nbsp;<span class="ident" id="4331437">n64</span>&nbsp;<span class="op" id="4331441">!=</span>&nbsp;<span class="ident" id="4331444">uint64</span><span class="op" id="4331450">(</span><span class="builtintype" id="4331451">uint32</span><span class="op" id="4331457">(</span><span class="ident" id="4331458">n64</span><span class="op" id="4331461">)</span><span class="op" id="4331462">)</span>&nbsp;<span class="op" id="4331464">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331470">b</span><span class="op" id="4331471">.</span><span class="builtintype" id="4331472">error</span><span class="op" id="4331477">(</span><span class="string" id="4331478">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="4331505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331511">return</span>&nbsp;<span class="ident" id="4331518">b</span><span class="op" id="4331519">.</span><span class="ident" id="4331520">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331532">n</span>&nbsp;<span class="op" id="4331534">=</span>&nbsp;<span class="builtintype" id="4331536">uint32</span><span class="op" id="4331542">(</span><span class="ident" id="4331543">n64</span><span class="op" id="4331546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331551">dwarf64</span>&nbsp;<span class="op" id="4331559">=</span>&nbsp;<span class="builtintype" id="4331561">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331572">hdroff</span>&nbsp;<span class="op" id="4331579">:=</span>&nbsp;<span class="ident" id="4331582">b</span><span class="op" id="4331583">.</span><span class="ident" id="4331584">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331590">vers</span>&nbsp;<span class="op" id="4331595">:=</span>&nbsp;<span class="ident" id="4331598">b</span><span class="op" id="4331599">.</span><span class="builtintype" id="4331600">uint16</span><span class="op" id="4331606">(</span><span class="op" id="4331607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331611">if</span>&nbsp;<span class="ident" id="4331614">vers</span>&nbsp;<span class="op" id="4331619">!=</span>&nbsp;<span class="num" id="4331622">4</span>&nbsp;<span class="op" id="4331624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331629">b</span><span class="op" id="4331630">.</span><span class="builtintype" id="4331631">error</span><span class="op" id="4331636">(</span><span class="string" id="4331637">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="4331666">+</span>&nbsp;<span class="ident" id="4331668">strconv</span><span class="op" id="4331675">.</span><span class="ident" id="4331676">Itoa</span><span class="op" id="4331680">(</span><span class="builtintype" id="4331681">int</span><span class="op" id="4331684">(</span><span class="ident" id="4331685">vers</span><span class="op" id="4331689">)</span><span class="op" id="4331690">)</span><span class="op" id="4331691">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331696">return</span>&nbsp;<span class="ident" id="4331703">b</span><span class="op" id="4331704">.</span><span class="ident" id="4331705">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331715">var</span>&nbsp;<span class="ident" id="4331719">ao</span>&nbsp;<span class="builtintype" id="4331722">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331731">if</span>&nbsp;<span class="op" id="4331734">!</span><span class="ident" id="4331735">dwarf64</span>&nbsp;<span class="op" id="4331743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331748">ao</span>&nbsp;<span class="op" id="4331751">=</span>&nbsp;<span class="ident" id="4331753">b</span><span class="op" id="4331754">.</span><span class="builtintype" id="4331755">uint32</span><span class="op" id="4331761">(</span><span class="op" id="4331762">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331766">}</span>&nbsp;<span class="keyword" id="4331768">else</span>&nbsp;<span class="op" id="4331773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331778">ao64</span>&nbsp;<span class="op" id="4331783">:=</span>&nbsp;<span class="ident" id="4331786">b</span><span class="op" id="4331787">.</span><span class="ident" id="4331788">uint64</span><span class="op" id="4331794">(</span><span class="op" id="4331795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331800">if</span>&nbsp;<span class="ident" id="4331803">ao64</span>&nbsp;<span class="op" id="4331808">!=</span>&nbsp;<span class="ident" id="4331811">uint64</span><span class="op" id="4331817">(</span><span class="builtintype" id="4331818">uint32</span><span class="op" id="4331824">(</span><span class="ident" id="4331825">ao64</span><span class="op" id="4331829">)</span><span class="op" id="4331830">)</span>&nbsp;<span class="op" id="4331832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331838">b</span><span class="op" id="4331839">.</span><span class="builtintype" id="4331840">error</span><span class="op" id="4331845">(</span><span class="string" id="4331846">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="4331880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331886">return</span>&nbsp;<span class="ident" id="4331893">b</span><span class="op" id="4331894">.</span><span class="ident" id="4331895">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331907">ao</span>&nbsp;<span class="op" id="4331910">=</span>&nbsp;<span class="builtintype" id="4331912">uint32</span><span class="op" id="4331918">(</span><span class="ident" id="4331919">ao64</span><span class="op" id="4331923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331931">atable</span><span class="op" id="4331937">,</span>&nbsp;<span class="ident" id="4331939">err</span>&nbsp;<span class="op" id="4331943">:=</span>&nbsp;<span class="ident" id="4331946">d</span><span class="op" id="4331947">.</span><span class="ident" id="4331948">parseAbbrev</span><span class="op" id="4331959">(</span><span class="ident" id="4331960">ao</span><span class="op" id="4331962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331966">if</span>&nbsp;<span class="ident" id="4331969">err</span>&nbsp;<span class="op" id="4331973">!=</span>&nbsp;<span class="ident" id="4331976">nil</span>&nbsp;<span class="op" id="4331980">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331985">return</span>&nbsp;<span class="ident" id="4331992">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332002">asize</span>&nbsp;<span class="op" id="4332008">:=</span>&nbsp;<span class="ident" id="4332011">b</span><span class="op" id="4332012">.</span><span class="builtintype" id="4332013">uint8</span><span class="op" id="4332018">(</span><span class="op" id="4332019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332023">sig</span>&nbsp;<span class="op" id="4332027">:=</span>&nbsp;<span class="ident" id="4332030">b</span><span class="op" id="4332031">.</span><span class="ident" id="4332032">uint64</span><span class="op" id="4332038">(</span><span class="op" id="4332039">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332044">var</span>&nbsp;<span class="ident" id="4332048">toff</span>&nbsp;<span class="builtintype" id="4332053">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332062">if</span>&nbsp;<span class="op" id="4332065">!</span><span class="ident" id="4332066">dwarf64</span>&nbsp;<span class="op" id="4332074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332079">toff</span>&nbsp;<span class="op" id="4332084">=</span>&nbsp;<span class="ident" id="4332086">b</span><span class="op" id="4332087">.</span><span class="builtintype" id="4332088">uint32</span><span class="op" id="4332094">(</span><span class="op" id="4332095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332099">}</span>&nbsp;<span class="keyword" id="4332101">else</span>&nbsp;<span class="op" id="4332106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332111">to64</span>&nbsp;<span class="op" id="4332116">:=</span>&nbsp;<span class="ident" id="4332119">b</span><span class="op" id="4332120">.</span><span class="ident" id="4332121">uint64</span><span class="op" id="4332127">(</span><span class="op" id="4332128">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332133">if</span>&nbsp;<span class="ident" id="4332136">to64</span>&nbsp;<span class="op" id="4332141">!=</span>&nbsp;<span class="ident" id="4332144">uint64</span><span class="op" id="4332150">(</span><span class="builtintype" id="4332151">uint32</span><span class="op" id="4332157">(</span><span class="ident" id="4332158">to64</span><span class="op" id="4332162">)</span><span class="op" id="4332163">)</span>&nbsp;<span class="op" id="4332165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332171">b</span><span class="op" id="4332172">.</span><span class="builtintype" id="4332173">error</span><span class="op" id="4332178">(</span><span class="string" id="4332179">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="4332211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332217">return</span>&nbsp;<span class="ident" id="4332224">b</span><span class="op" id="4332225">.</span><span class="ident" id="4332226">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332238">toff</span>&nbsp;<span class="op" id="4332243">=</span>&nbsp;<span class="builtintype" id="4332245">uint32</span><span class="op" id="4332251">(</span><span class="ident" id="4332252">to64</span><span class="op" id="4332256">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332265">boff</span>&nbsp;<span class="op" id="4332270">:=</span>&nbsp;<span class="ident" id="4332273">b</span><span class="op" id="4332274">.</span><span class="ident" id="4332275">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332281">d</span><span class="op" id="4332282">.</span><span class="ident" id="4332283">typeSigs</span><span class="op" id="4332291">[</span><span class="ident" id="4332292">sig</span><span class="op" id="4332295">]</span>&nbsp;<span class="op" id="4332297">=</span>&nbsp;<span class="op" id="4332299">&amp;</span><span class="ident" id="4332300">typeUnit</span><span class="op" id="4332308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332313">unit</span><span class="op" id="4332317">:</span>&nbsp;<span class="ident" id="4332319">unit</span><span class="op" id="4332323">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332329">base</span><span class="op" id="4332333">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4332337">base</span><span class="op" id="4332341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332347">off</span><span class="op" id="4332350">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4332355">boff</span><span class="op" id="4332359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332365">data</span><span class="op" id="4332369">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4332373">b</span><span class="op" id="4332374">.</span><span class="ident" id="4332375">bytes</span><span class="op" id="4332380">(</span><span class="builtintype" id="4332381">int</span><span class="op" id="4332384">(</span><span class="ident" id="4332385">Offset</span><span class="op" id="4332391">(</span><span class="ident" id="4332392">n</span><span class="op" id="4332393">)</span>&nbsp;<span class="op" id="4332395">-</span>&nbsp;<span class="op" id="4332397">(</span><span class="ident" id="4332398">b</span><span class="op" id="4332399">.</span><span class="ident" id="4332400">off</span>&nbsp;<span class="op" id="4332404">-</span>&nbsp;<span class="ident" id="4332406">hdroff</span><span class="op" id="4332412">)</span><span class="op" id="4332413">)</span><span class="op" id="4332414">)</span><span class="op" id="4332415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332421">atable</span><span class="op" id="4332427">:</span>&nbsp;<span class="ident" id="4332429">atable</span><span class="op" id="4332435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332441">asize</span><span class="op" id="4332446">:</span>&nbsp;&nbsp;<span class="builtintype" id="4332449">int</span><span class="op" id="4332452">(</span><span class="ident" id="4332453">asize</span><span class="op" id="4332458">)</span><span class="op" id="4332459">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332465">vers</span><span class="op" id="4332469">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4332473">int</span><span class="op" id="4332476">(</span><span class="ident" id="4332477">vers</span><span class="op" id="4332481">)</span><span class="op" id="4332482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332488">is64</span><span class="op" id="4332492">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4332496">dwarf64</span><span class="op" id="4332503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332508">}</span><span class="op" id="4332509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332514">toff</span><span class="op" id="4332518">:</span>&nbsp;<span class="ident" id="4332520">Offset</span><span class="op" id="4332526">(</span><span class="ident" id="4332527">toff</span><span class="op" id="4332531">)</span><span class="op" id="4332532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332537">name</span><span class="op" id="4332541">:</span>&nbsp;<span class="ident" id="4332543">name</span><span class="op" id="4332547">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332555">if</span>&nbsp;<span class="ident" id="4332558">b</span><span class="op" id="4332559">.</span><span class="ident" id="4332560">err</span>&nbsp;<span class="op" id="4332564">!=</span>&nbsp;<span class="ident" id="4332567">nil</span>&nbsp;<span class="op" id="4332571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332576">return</span>&nbsp;<span class="ident" id="4332583">b</span><span class="op" id="4332584">.</span><span class="ident" id="4332585">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332594">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332597">return</span>&nbsp;<span class="ident" id="4332604">nil</span><br>
<span class="lineno"></span><span class="op" id="4332608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4332611">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4332652">func</span>&nbsp;<span class="op" id="4332657">(</span><span class="ident" id="4332658">d</span>&nbsp;<span class="op" id="4332660">*</span><span class="ident" id="4332661">Data</span><span class="op" id="4332665">)</span>&nbsp;<span class="ident" id="4332667">sigToType</span><span class="op" id="4332676">(</span><span class="ident" id="4332677">sig</span>&nbsp;<span class="ident" id="4332681">uint64</span><span class="op" id="4332687">)</span>&nbsp;<span class="op" id="4332689">(</span><span class="ident" id="4332690">Type</span><span class="op" id="4332694">,</span>&nbsp;<span class="builtintype" id="4332696">error</span><span class="op" id="4332701">)</span>&nbsp;<span class="op" id="4332703">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332706">tu</span>&nbsp;<span class="op" id="4332709">:=</span>&nbsp;<span class="ident" id="4332712">d</span><span class="op" id="4332713">.</span><span class="ident" id="4332714">typeSigs</span><span class="op" id="4332722">[</span><span class="ident" id="4332723">sig</span><span class="op" id="4332726">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332729">if</span>&nbsp;<span class="ident" id="4332732">tu</span>&nbsp;<span class="op" id="4332735">==</span>&nbsp;<span class="ident" id="4332738">nil</span>&nbsp;<span class="op" id="4332742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332746">return</span>&nbsp;<span class="ident" id="4332753">nil</span><span class="op" id="4332756">,</span>&nbsp;<span class="ident" id="4332758">fmt</span><span class="op" id="4332761">.</span><span class="ident" id="4332762">Errorf</span><span class="op" id="4332768">(</span><span class="string" id="4332769">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="4332801">,</span>&nbsp;<span class="ident" id="4332803">sig</span><span class="op" id="4332806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332812">if</span>&nbsp;<span class="ident" id="4332815">tu</span><span class="op" id="4332817">.</span><span class="ident" id="4332818">cache</span>&nbsp;<span class="op" id="4332824">!=</span>&nbsp;<span class="ident" id="4332827">nil</span>&nbsp;<span class="op" id="4332831">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332835">return</span>&nbsp;<span class="ident" id="4332842">tu</span><span class="op" id="4332844">.</span><span class="ident" id="4332845">cache</span><span class="op" id="4332850">,</span>&nbsp;<span class="ident" id="4332852">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332861">b</span>&nbsp;<span class="op" id="4332863">:=</span>&nbsp;<span class="ident" id="4332866">makeBuf</span><span class="op" id="4332873">(</span><span class="ident" id="4332874">d</span><span class="op" id="4332875">,</span>&nbsp;<span class="ident" id="4332877">tu</span><span class="op" id="4332879">,</span>&nbsp;<span class="ident" id="4332881">tu</span><span class="op" id="4332883">.</span><span class="ident" id="4332884">name</span><span class="op" id="4332888">,</span>&nbsp;<span class="ident" id="4332890">tu</span><span class="op" id="4332892">.</span><span class="ident" id="4332893">off</span><span class="op" id="4332896">,</span>&nbsp;<span class="ident" id="4332898">tu</span><span class="op" id="4332900">.</span><span class="ident" id="4332901">data</span><span class="op" id="4332905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332908">r</span>&nbsp;<span class="op" id="4332910">:=</span>&nbsp;<span class="op" id="4332913">&amp;</span><span class="ident" id="4332914">typeUnitReader</span><span class="op" id="4332928">{</span><span class="ident" id="4332929">d</span><span class="op" id="4332930">:</span>&nbsp;<span class="ident" id="4332932">d</span><span class="op" id="4332933">,</span>&nbsp;<span class="ident" id="4332935">tu</span><span class="op" id="4332937">:</span>&nbsp;<span class="ident" id="4332939">tu</span><span class="op" id="4332941">,</span>&nbsp;<span class="ident" id="4332943">b</span><span class="op" id="4332944">:</span>&nbsp;<span class="ident" id="4332946">b</span><span class="op" id="4332947">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332950">t</span><span class="op" id="4332951">,</span>&nbsp;<span class="ident" id="4332953">err</span>&nbsp;<span class="op" id="4332957">:=</span>&nbsp;<span class="ident" id="4332960">d</span><span class="op" id="4332961">.</span><span class="ident" id="4332962">readType</span><span class="op" id="4332970">(</span><span class="ident" id="4332971">tu</span><span class="op" id="4332973">.</span><span class="ident" id="4332974">name</span><span class="op" id="4332978">,</span>&nbsp;<span class="ident" id="4332980">r</span><span class="op" id="4332981">,</span>&nbsp;<span class="ident" id="4332983">Offset</span><span class="op" id="4332989">(</span><span class="ident" id="4332990">tu</span><span class="op" id="4332992">.</span><span class="ident" id="4332993">toff</span><span class="op" id="4332997">)</span><span class="op" id="4332998">,</span>&nbsp;<span class="builtinfunc" id="4333000">make</span><span class="op" id="4333004">(</span><span class="keyword" id="4333005">map</span><span class="op" id="4333008">[</span><span class="ident" id="4333009">Offset</span><span class="op" id="4333015">]</span><span class="ident" id="4333016">Type</span><span class="op" id="4333020">)</span><span class="op" id="4333021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333024">if</span>&nbsp;<span class="ident" id="4333027">err</span>&nbsp;<span class="op" id="4333031">!=</span>&nbsp;<span class="ident" id="4333034">nil</span>&nbsp;<span class="op" id="4333038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333042">return</span>&nbsp;<span class="ident" id="4333049">nil</span><span class="op" id="4333052">,</span>&nbsp;<span class="ident" id="4333054">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333063">tu</span><span class="op" id="4333065">.</span><span class="ident" id="4333066">cache</span>&nbsp;<span class="op" id="4333072">=</span>&nbsp;<span class="ident" id="4333074">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333077">return</span>&nbsp;<span class="ident" id="4333084">t</span><span class="op" id="4333085">,</span>&nbsp;<span class="ident" id="4333087">nil</span><br>
<span class="lineno"></span><span class="op" id="4333091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4333094">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="4333147">type</span>&nbsp;<span class="ident" id="4333152">typeUnitReader</span>&nbsp;<span class="keyword" id="4333167">struct</span>&nbsp;<span class="op" id="4333174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333177">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4333181">*</span><span class="ident" id="4333182">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333188">tu</span>&nbsp;&nbsp;<span class="op" id="4333192">*</span><span class="ident" id="4333193">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333203">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4333207">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333212">err</span>&nbsp;<span class="builtintype" id="4333216">error</span><br>
<span class="lineno">125</span><span class="op" id="4333222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4333225">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4333269">func</span>&nbsp;<span class="op" id="4333274">(</span><span class="ident" id="4333275">tur</span>&nbsp;<span class="op" id="4333279">*</span><span class="ident" id="4333280">typeUnitReader</span><span class="op" id="4333294">)</span>&nbsp;<span class="ident" id="4333296">Seek</span><span class="op" id="4333300">(</span><span class="ident" id="4333301">off</span>&nbsp;<span class="ident" id="4333305">Offset</span><span class="op" id="4333311">)</span>&nbsp;<span class="op" id="4333313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333316">tur</span><span class="op" id="4333319">.</span><span class="ident" id="4333320">err</span>&nbsp;<span class="op" id="4333324">=</span>&nbsp;<span class="ident" id="4333326">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333331">doff</span>&nbsp;<span class="op" id="4333336">:=</span>&nbsp;<span class="ident" id="4333339">off</span>&nbsp;<span class="op" id="4333343">-</span>&nbsp;<span class="ident" id="4333345">tur</span><span class="op" id="4333348">.</span><span class="ident" id="4333349">tu</span><span class="op" id="4333351">.</span><span class="ident" id="4333352">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333357">if</span>&nbsp;<span class="ident" id="4333360">doff</span>&nbsp;<span class="op" id="4333365">&lt;</span>&nbsp;<span class="num" id="4333367">0</span>&nbsp;<span class="op" id="4333369">||</span>&nbsp;<span class="ident" id="4333372">doff</span>&nbsp;<span class="op" id="4333377">&gt;=</span>&nbsp;<span class="ident" id="4333380">Offset</span><span class="op" id="4333386">(</span><span class="builtinfunc" id="4333387">len</span><span class="op" id="4333390">(</span><span class="ident" id="4333391">tur</span><span class="op" id="4333394">.</span><span class="ident" id="4333395">tu</span><span class="op" id="4333397">.</span><span class="ident" id="4333398">data</span><span class="op" id="4333402">)</span><span class="op" id="4333403">)</span>&nbsp;<span class="op" id="4333405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333409">tur</span><span class="op" id="4333412">.</span><span class="ident" id="4333413">err</span>&nbsp;<span class="op" id="4333417">=</span>&nbsp;<span class="ident" id="4333419">fmt</span><span class="op" id="4333422">.</span><span class="ident" id="4333423">Errorf</span><span class="op" id="4333429">(</span><span class="string" id="4333430">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="4333466">,</span>&nbsp;<span class="ident" id="4333468">tur</span><span class="op" id="4333471">.</span><span class="ident" id="4333472">tu</span><span class="op" id="4333474">.</span><span class="ident" id="4333475">name</span><span class="op" id="4333479">,</span>&nbsp;<span class="ident" id="4333481">doff</span><span class="op" id="4333485">,</span>&nbsp;<span class="builtinfunc" id="4333487">len</span><span class="op" id="4333490">(</span><span class="ident" id="4333491">tur</span><span class="op" id="4333494">.</span><span class="ident" id="4333495">tu</span><span class="op" id="4333497">.</span><span class="ident" id="4333498">data</span><span class="op" id="4333502">)</span><span class="op" id="4333503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333507">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333515">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333518">tur</span><span class="op" id="4333521">.</span><span class="ident" id="4333522">b</span>&nbsp;<span class="op" id="4333524">=</span>&nbsp;<span class="ident" id="4333526">makeBuf</span><span class="op" id="4333533">(</span><span class="ident" id="4333534">tur</span><span class="op" id="4333537">.</span><span class="ident" id="4333538">d</span><span class="op" id="4333539">,</span>&nbsp;<span class="ident" id="4333541">tur</span><span class="op" id="4333544">.</span><span class="ident" id="4333545">tu</span><span class="op" id="4333547">,</span>&nbsp;<span class="ident" id="4333549">tur</span><span class="op" id="4333552">.</span><span class="ident" id="4333553">tu</span><span class="op" id="4333555">.</span><span class="ident" id="4333556">name</span><span class="op" id="4333560">,</span>&nbsp;<span class="ident" id="4333562">off</span><span class="op" id="4333565">,</span>&nbsp;<span class="ident" id="4333567">tur</span><span class="op" id="4333570">.</span><span class="ident" id="4333571">tu</span><span class="op" id="4333573">.</span><span class="ident" id="4333574">data</span><span class="op" id="4333578">[</span><span class="ident" id="4333579">doff</span><span class="op" id="4333583">:</span><span class="op" id="4333584">]</span><span class="op" id="4333585">)</span><br>
<span class="lineno"></span><span class="op" id="4333587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4333590">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4333639">func</span>&nbsp;<span class="op" id="4333644">(</span><span class="ident" id="4333645">tur</span>&nbsp;<span class="op" id="4333649">*</span><span class="ident" id="4333650">typeUnitReader</span><span class="op" id="4333664">)</span>&nbsp;<span class="ident" id="4333666">Next</span><span class="op" id="4333670">(</span><span class="op" id="4333671">)</span>&nbsp;<span class="op" id="4333673">(</span><span class="op" id="4333674">*</span><span class="ident" id="4333675">Entry</span><span class="op" id="4333680">,</span>&nbsp;<span class="builtintype" id="4333682">error</span><span class="op" id="4333687">)</span>&nbsp;<span class="op" id="4333689">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333692">if</span>&nbsp;<span class="ident" id="4333695">tur</span><span class="op" id="4333698">.</span><span class="ident" id="4333699">err</span>&nbsp;<span class="op" id="4333703">!=</span>&nbsp;<span class="ident" id="4333706">nil</span>&nbsp;<span class="op" id="4333710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333714">return</span>&nbsp;<span class="ident" id="4333721">nil</span><span class="op" id="4333724">,</span>&nbsp;<span class="ident" id="4333726">tur</span><span class="op" id="4333729">.</span><span class="ident" id="4333730">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333738">if</span>&nbsp;<span class="builtinfunc" id="4333741">len</span><span class="op" id="4333744">(</span><span class="ident" id="4333745">tur</span><span class="op" id="4333748">.</span><span class="ident" id="4333749">tu</span><span class="op" id="4333751">.</span><span class="ident" id="4333752">data</span><span class="op" id="4333756">)</span>&nbsp;<span class="op" id="4333758">==</span>&nbsp;<span class="num" id="4333761">0</span>&nbsp;<span class="op" id="4333763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333767">return</span>&nbsp;<span class="ident" id="4333774">nil</span><span class="op" id="4333777">,</span>&nbsp;<span class="ident" id="4333779">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333787">e</span>&nbsp;<span class="op" id="4333789">:=</span>&nbsp;<span class="ident" id="4333792">tur</span><span class="op" id="4333795">.</span><span class="ident" id="4333796">b</span><span class="op" id="4333797">.</span><span class="ident" id="4333798">entry</span><span class="op" id="4333803">(</span><span class="ident" id="4333804">tur</span><span class="op" id="4333807">.</span><span class="ident" id="4333808">tu</span><span class="op" id="4333810">.</span><span class="ident" id="4333811">atable</span><span class="op" id="4333817">,</span>&nbsp;<span class="ident" id="4333819">tur</span><span class="op" id="4333822">.</span><span class="ident" id="4333823">tu</span><span class="op" id="4333825">.</span><span class="ident" id="4333826">base</span><span class="op" id="4333830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333833">if</span>&nbsp;<span class="ident" id="4333836">tur</span><span class="op" id="4333839">.</span><span class="ident" id="4333840">b</span><span class="op" id="4333841">.</span><span class="ident" id="4333842">err</span>&nbsp;<span class="op" id="4333846">!=</span>&nbsp;<span class="ident" id="4333849">nil</span>&nbsp;<span class="op" id="4333853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333857">tur</span><span class="op" id="4333860">.</span><span class="ident" id="4333861">err</span>&nbsp;<span class="op" id="4333865">=</span>&nbsp;<span class="ident" id="4333867">tur</span><span class="op" id="4333870">.</span><span class="ident" id="4333871">b</span><span class="op" id="4333872">.</span><span class="ident" id="4333873">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333879">return</span>&nbsp;<span class="ident" id="4333886">nil</span><span class="op" id="4333889">,</span>&nbsp;<span class="ident" id="4333891">tur</span><span class="op" id="4333894">.</span><span class="ident" id="4333895">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333903">return</span>&nbsp;<span class="ident" id="4333910">e</span><span class="op" id="4333911">,</span>&nbsp;<span class="ident" id="4333913">nil</span><br>
<span class="lineno"></span><span class="op" id="4333917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4333920">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="4333969">func</span>&nbsp;<span class="op" id="4333974">(</span><span class="ident" id="4333975">tur</span>&nbsp;<span class="op" id="4333979">*</span><span class="ident" id="4333980">typeUnitReader</span><span class="op" id="4333994">)</span>&nbsp;<span class="ident" id="4333996">clone</span><span class="op" id="4334001">(</span><span class="op" id="4334002">)</span>&nbsp;<span class="ident" id="4334004">typeReader</span>&nbsp;<span class="op" id="4334015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334018">return</span>&nbsp;<span class="op" id="4334025">&amp;</span><span class="ident" id="4334026">typeUnitReader</span><span class="op" id="4334040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334044">d</span><span class="op" id="4334045">:</span>&nbsp;&nbsp;<span class="ident" id="4334048">tur</span><span class="op" id="4334051">.</span><span class="ident" id="4334052">d</span><span class="op" id="4334053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334057">tu</span><span class="op" id="4334059">:</span>&nbsp;<span class="ident" id="4334061">tur</span><span class="op" id="4334064">.</span><span class="ident" id="4334065">tu</span><span class="op" id="4334067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334071">b</span><span class="op" id="4334072">:</span>&nbsp;&nbsp;<span class="ident" id="4334075">makeBuf</span><span class="op" id="4334082">(</span><span class="ident" id="4334083">tur</span><span class="op" id="4334086">.</span><span class="ident" id="4334087">d</span><span class="op" id="4334088">,</span>&nbsp;<span class="ident" id="4334090">tur</span><span class="op" id="4334093">.</span><span class="ident" id="4334094">tu</span><span class="op" id="4334096">,</span>&nbsp;<span class="ident" id="4334098">tur</span><span class="op" id="4334101">.</span><span class="ident" id="4334102">tu</span><span class="op" id="4334104">.</span><span class="ident" id="4334105">name</span><span class="op" id="4334109">,</span>&nbsp;<span class="ident" id="4334111">tur</span><span class="op" id="4334114">.</span><span class="ident" id="4334115">tu</span><span class="op" id="4334117">.</span><span class="ident" id="4334118">off</span><span class="op" id="4334121">,</span>&nbsp;<span class="ident" id="4334123">tur</span><span class="op" id="4334126">.</span><span class="ident" id="4334127">tu</span><span class="op" id="4334129">.</span><span class="ident" id="4334130">data</span><span class="op" id="4334134">)</span><span class="op" id="4334135">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334138">}</span><br>
<span class="lineno"></span><span class="op" id="4334140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4334143">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="4334181">func</span>&nbsp;<span class="op" id="4334186">(</span><span class="ident" id="4334187">tur</span>&nbsp;<span class="op" id="4334191">*</span><span class="ident" id="4334192">typeUnitReader</span><span class="op" id="4334206">)</span>&nbsp;<span class="ident" id="4334208">offset</span><span class="op" id="4334214">(</span><span class="op" id="4334215">)</span>&nbsp;<span class="ident" id="4334217">Offset</span>&nbsp;<span class="op" id="4334224">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334227">return</span>&nbsp;<span class="ident" id="4334234">tur</span><span class="op" id="4334237">.</span><span class="ident" id="4334238">b</span><span class="op" id="4334239">.</span><span class="ident" id="4334240">off</span><br>
<span class="lineno"></span><span class="op" id="4334244">}</span>
</div>
</body>
</html>
