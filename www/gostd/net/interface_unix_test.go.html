<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8223421">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8223477">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8223531">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8223582">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8223639">package</span>&nbsp;<span class="ident" id="8223647">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8223652">import</span>&nbsp;<span class="op" id="8223659">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8223662">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8223668">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8223679">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8223690">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8223701">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8223708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8223711">type</span>&nbsp;<span class="ident" id="8223716">testInterface</span>&nbsp;<span class="keyword" id="8223730">struct</span>&nbsp;<span class="op" id="8223737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8223740">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8223753">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8223761">local</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8223774">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8223782">remote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8223795">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8223803">setupCmds</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8223816">[</span><span class="op" id="8223817">]</span><span class="op" id="8223818">*</span><span class="ident" id="8223819">exec</span><span class="op" id="8223823">.</span><span class="ident" id="8223824">Cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8223829">teardownCmds</span>&nbsp;<span class="op" id="8223842">[</span><span class="op" id="8223843">]</span><span class="op" id="8223844">*</span><span class="ident" id="8223845">exec</span><span class="op" id="8223849">.</span><span class="ident" id="8223850">Cmd</span><br>
<span class="lineno"></span><span class="op" id="8223854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8223857">func</span>&nbsp;<span class="op" id="8223862">(</span><span class="ident" id="8223863">ti</span>&nbsp;<span class="op" id="8223866">*</span><span class="ident" id="8223867">testInterface</span><span class="op" id="8223880">)</span>&nbsp;<span class="ident" id="8223882">setup</span><span class="op" id="8223887">(</span><span class="op" id="8223888">)</span>&nbsp;<span class="builtintype" id="8223890">error</span>&nbsp;<span class="op" id="8223896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8223899">for</span>&nbsp;<span class="ident" id="8223903">_</span><span class="op" id="8223904">,</span>&nbsp;<span class="ident" id="8223906">cmd</span>&nbsp;<span class="op" id="8223910">:=</span>&nbsp;<span class="keyword" id="8223913">range</span>&nbsp;<span class="ident" id="8223919">ti</span><span class="op" id="8223921">.</span><span class="ident" id="8223922">setupCmds</span>&nbsp;<span class="op" id="8223932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8223936">if</span>&nbsp;<span class="ident" id="8223939">err</span>&nbsp;<span class="op" id="8223943">:=</span>&nbsp;<span class="ident" id="8223946">cmd</span><span class="op" id="8223949">.</span><span class="ident" id="8223950">Run</span><span class="op" id="8223953">(</span><span class="op" id="8223954">)</span><span class="op" id="8223955">;</span>&nbsp;<span class="ident" id="8223957">err</span>&nbsp;<span class="op" id="8223961">!=</span>&nbsp;<span class="ident" id="8223964">nil</span>&nbsp;<span class="op" id="8223968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8223973">return</span>&nbsp;<span class="ident" id="8223980">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8223986">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8223989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8223992">return</span>&nbsp;<span class="ident" id="8223999">nil</span><br>
<span class="lineno"></span><span class="op" id="8224003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8224006">func</span>&nbsp;<span class="op" id="8224011">(</span><span class="ident" id="8224012">ti</span>&nbsp;<span class="op" id="8224015">*</span><span class="ident" id="8224016">testInterface</span><span class="op" id="8224029">)</span>&nbsp;<span class="ident" id="8224031">teardown</span><span class="op" id="8224039">(</span><span class="op" id="8224040">)</span>&nbsp;<span class="builtintype" id="8224042">error</span>&nbsp;<span class="op" id="8224048">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224051">for</span>&nbsp;<span class="ident" id="8224055">_</span><span class="op" id="8224056">,</span>&nbsp;<span class="ident" id="8224058">cmd</span>&nbsp;<span class="op" id="8224062">:=</span>&nbsp;<span class="keyword" id="8224065">range</span>&nbsp;<span class="ident" id="8224071">ti</span><span class="op" id="8224073">.</span><span class="ident" id="8224074">teardownCmds</span>&nbsp;<span class="op" id="8224087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224091">if</span>&nbsp;<span class="ident" id="8224094">err</span>&nbsp;<span class="op" id="8224098">:=</span>&nbsp;<span class="ident" id="8224101">cmd</span><span class="op" id="8224104">.</span><span class="ident" id="8224105">Run</span><span class="op" id="8224108">(</span><span class="op" id="8224109">)</span><span class="op" id="8224110">;</span>&nbsp;<span class="ident" id="8224112">err</span>&nbsp;<span class="op" id="8224116">!=</span>&nbsp;<span class="ident" id="8224119">nil</span>&nbsp;<span class="op" id="8224123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224128">return</span>&nbsp;<span class="ident" id="8224135">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224144">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224147">return</span>&nbsp;<span class="ident" id="8224154">nil</span><br>
<span class="lineno"></span><span class="op" id="8224158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8224161">func</span>&nbsp;<span class="ident" id="8224166">TestPointToPointInterface</span><span class="op" id="8224191">(</span><span class="ident" id="8224192">t</span>&nbsp;<span class="op" id="8224194">*</span><span class="ident" id="8224195">testing</span><span class="op" id="8224202">.</span><span class="ident" id="8224203">T</span><span class="op" id="8224204">)</span>&nbsp;<span class="op" id="8224206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224209">if</span>&nbsp;<span class="ident" id="8224212">testing</span><span class="op" id="8224219">.</span><span class="ident" id="8224220">Short</span><span class="op" id="8224225">(</span><span class="op" id="8224226">)</span>&nbsp;<span class="op" id="8224228">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224232">t</span><span class="op" id="8224233">.</span><span class="ident" id="8224234">Skip</span><span class="op" id="8224238">(</span><span class="string" id="8224239">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8224268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224274">switch</span>&nbsp;<span class="op" id="8224281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224284">case</span>&nbsp;<span class="ident" id="8224289">runtime</span><span class="op" id="8224296">.</span><span class="ident" id="8224297">GOOS</span>&nbsp;<span class="op" id="8224302">==</span>&nbsp;<span class="string" id="8224305">&#34;darwin&#34;</span><span class="op" id="8224313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224317">t</span><span class="op" id="8224318">.</span><span class="ident" id="8224319">Skipf</span><span class="op" id="8224324">(</span><span class="string" id="8224325">&#34;skipping&nbsp;read&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8224351">,</span>&nbsp;<span class="ident" id="8224353">runtime</span><span class="op" id="8224360">.</span><span class="ident" id="8224361">GOOS</span><span class="op" id="8224365">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224371">if</span>&nbsp;<span class="ident" id="8224374">os</span><span class="op" id="8224376">.</span><span class="ident" id="8224377">Getuid</span><span class="op" id="8224383">(</span><span class="op" id="8224384">)</span>&nbsp;<span class="op" id="8224386">!=</span>&nbsp;<span class="num" id="8224389">0</span>&nbsp;<span class="op" id="8224391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224395">t</span><span class="op" id="8224396">.</span><span class="ident" id="8224397">Skip</span><span class="op" id="8224401">(</span><span class="string" id="8224402">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8224431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224438">local</span><span class="op" id="8224443">,</span>&nbsp;<span class="ident" id="8224445">remote</span>&nbsp;<span class="op" id="8224452">:=</span>&nbsp;<span class="string" id="8224455">&#34;169.254.0.1&#34;</span><span class="op" id="8224468">,</span>&nbsp;<span class="string" id="8224470">&#34;169.254.0.254&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224487">ip</span>&nbsp;<span class="op" id="8224490">:=</span>&nbsp;<span class="ident" id="8224493">ParseIP</span><span class="op" id="8224500">(</span><span class="ident" id="8224501">remote</span><span class="op" id="8224507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224510">for</span>&nbsp;<span class="ident" id="8224514">i</span>&nbsp;<span class="op" id="8224516">:=</span>&nbsp;<span class="num" id="8224519">0</span><span class="op" id="8224520">;</span>&nbsp;<span class="ident" id="8224522">i</span>&nbsp;<span class="op" id="8224524">&lt;</span>&nbsp;<span class="num" id="8224526">3</span><span class="op" id="8224527">;</span>&nbsp;<span class="ident" id="8224529">i</span><span class="op" id="8224530">++</span>&nbsp;<span class="op" id="8224533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224537">ti</span>&nbsp;<span class="op" id="8224540">:=</span>&nbsp;<span class="op" id="8224543">&amp;</span><span class="ident" id="8224544">testInterface</span><span class="op" id="8224557">{</span><span class="op" id="8224558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224562">if</span>&nbsp;<span class="ident" id="8224565">err</span>&nbsp;<span class="op" id="8224569">:=</span>&nbsp;<span class="ident" id="8224572">ti</span><span class="op" id="8224574">.</span><span class="ident" id="8224575">setPointToPoint</span><span class="op" id="8224590">(</span><span class="num" id="8224591">5963</span><span class="op" id="8224595">+</span><span class="ident" id="8224596">i</span><span class="op" id="8224597">,</span>&nbsp;<span class="ident" id="8224599">local</span><span class="op" id="8224604">,</span>&nbsp;<span class="ident" id="8224606">remote</span><span class="op" id="8224612">)</span><span class="op" id="8224613">;</span>&nbsp;<span class="ident" id="8224615">err</span>&nbsp;<span class="op" id="8224619">!=</span>&nbsp;<span class="ident" id="8224622">nil</span>&nbsp;<span class="op" id="8224626">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224631">t</span><span class="op" id="8224632">.</span><span class="ident" id="8224633">Skipf</span><span class="op" id="8224638">(</span><span class="string" id="8224639">&#34;test&nbsp;requries&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="8224675">,</span>&nbsp;<span class="ident" id="8224677">err</span><span class="op" id="8224680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224688">if</span>&nbsp;<span class="ident" id="8224691">err</span>&nbsp;<span class="op" id="8224695">:=</span>&nbsp;<span class="ident" id="8224698">ti</span><span class="op" id="8224700">.</span><span class="ident" id="8224701">setup</span><span class="op" id="8224706">(</span><span class="op" id="8224707">)</span><span class="op" id="8224708">;</span>&nbsp;<span class="ident" id="8224710">err</span>&nbsp;<span class="op" id="8224714">!=</span>&nbsp;<span class="ident" id="8224717">nil</span>&nbsp;<span class="op" id="8224721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224726">t</span><span class="op" id="8224727">.</span><span class="ident" id="8224728">Fatalf</span><span class="op" id="8224734">(</span><span class="string" id="8224735">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8224767">,</span>&nbsp;<span class="ident" id="8224769">err</span><span class="op" id="8224772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224776">}</span>&nbsp;<span class="keyword" id="8224778">else</span>&nbsp;<span class="op" id="8224783">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224788">time</span><span class="op" id="8224792">.</span><span class="ident" id="8224793">Sleep</span><span class="op" id="8224798">(</span><span class="num" id="8224799">3</span>&nbsp;<span class="op" id="8224801">*</span>&nbsp;<span class="ident" id="8224803">time</span><span class="op" id="8224807">.</span><span class="ident" id="8224808">Millisecond</span><span class="op" id="8224819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224827">ift</span><span class="op" id="8224830">,</span>&nbsp;<span class="ident" id="8224832">err</span>&nbsp;<span class="op" id="8224836">:=</span>&nbsp;<span class="ident" id="8224839">Interfaces</span><span class="op" id="8224849">(</span><span class="op" id="8224850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224854">if</span>&nbsp;<span class="ident" id="8224857">err</span>&nbsp;<span class="op" id="8224861">!=</span>&nbsp;<span class="ident" id="8224864">nil</span>&nbsp;<span class="op" id="8224868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224873">ti</span><span class="op" id="8224875">.</span><span class="ident" id="8224876">teardown</span><span class="op" id="8224884">(</span><span class="op" id="8224885">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224890">t</span><span class="op" id="8224891">.</span><span class="ident" id="8224892">Fatalf</span><span class="op" id="8224898">(</span><span class="string" id="8224899">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8224922">,</span>&nbsp;<span class="ident" id="8224924">err</span><span class="op" id="8224927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8224931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224935">for</span>&nbsp;<span class="ident" id="8224939">_</span><span class="op" id="8224940">,</span>&nbsp;<span class="ident" id="8224942">ifi</span>&nbsp;<span class="op" id="8224946">:=</span>&nbsp;<span class="keyword" id="8224949">range</span>&nbsp;<span class="ident" id="8224955">ift</span>&nbsp;<span class="op" id="8224959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8224964">if</span>&nbsp;<span class="ident" id="8224967">ti</span><span class="op" id="8224969">.</span><span class="ident" id="8224970">name</span>&nbsp;<span class="op" id="8224975">==</span>&nbsp;<span class="ident" id="8224978">ifi</span><span class="op" id="8224981">.</span><span class="ident" id="8224982">Name</span>&nbsp;<span class="op" id="8224987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8224993">ifat</span><span class="op" id="8224997">,</span>&nbsp;<span class="ident" id="8224999">err</span>&nbsp;<span class="op" id="8225003">:=</span>&nbsp;<span class="ident" id="8225006">ifi</span><span class="op" id="8225009">.</span><span class="ident" id="8225010">Addrs</span><span class="op" id="8225015">(</span><span class="op" id="8225016">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225022">if</span>&nbsp;<span class="ident" id="8225025">err</span>&nbsp;<span class="op" id="8225029">!=</span>&nbsp;<span class="ident" id="8225032">nil</span>&nbsp;<span class="op" id="8225036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225043">ti</span><span class="op" id="8225045">.</span><span class="ident" id="8225046">teardown</span><span class="op" id="8225054">(</span><span class="op" id="8225055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225062">t</span><span class="op" id="8225063">.</span><span class="ident" id="8225064">Fatalf</span><span class="op" id="8225070">(</span><span class="string" id="8225071">&#34;Interface.Addrs&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8225099">,</span>&nbsp;<span class="ident" id="8225101">err</span><span class="op" id="8225104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225116">for</span>&nbsp;<span class="ident" id="8225120">_</span><span class="op" id="8225121">,</span>&nbsp;<span class="ident" id="8225123">ifa</span>&nbsp;<span class="op" id="8225127">:=</span>&nbsp;<span class="keyword" id="8225130">range</span>&nbsp;<span class="ident" id="8225136">ifat</span>&nbsp;<span class="op" id="8225141">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225148">if</span>&nbsp;<span class="ident" id="8225151">ip</span><span class="op" id="8225153">.</span><span class="ident" id="8225154">Equal</span><span class="op" id="8225159">(</span><span class="ident" id="8225160">ifa</span><span class="op" id="8225163">.</span><span class="op" id="8225164">(</span><span class="op" id="8225165">*</span><span class="ident" id="8225166">IPNet</span><span class="op" id="8225171">)</span><span class="op" id="8225172">.</span><span class="ident" id="8225173">IP</span><span class="op" id="8225175">)</span>&nbsp;<span class="op" id="8225177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225185">ti</span><span class="op" id="8225187">.</span><span class="ident" id="8225188">teardown</span><span class="op" id="8225196">(</span><span class="op" id="8225197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225205">t</span><span class="op" id="8225206">.</span><span class="ident" id="8225207">Fatalf</span><span class="op" id="8225213">(</span><span class="string" id="8225214">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8225231">,</span>&nbsp;<span class="ident" id="8225233">ip</span><span class="op" id="8225235">,</span>&nbsp;<span class="ident" id="8225237">local</span><span class="op" id="8225242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225255">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225268">if</span>&nbsp;<span class="ident" id="8225271">err</span>&nbsp;<span class="op" id="8225275">:=</span>&nbsp;<span class="ident" id="8225278">ti</span><span class="op" id="8225280">.</span><span class="ident" id="8225281">teardown</span><span class="op" id="8225289">(</span><span class="op" id="8225290">)</span><span class="op" id="8225291">;</span>&nbsp;<span class="ident" id="8225293">err</span>&nbsp;<span class="op" id="8225297">!=</span>&nbsp;<span class="ident" id="8225300">nil</span>&nbsp;<span class="op" id="8225304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225309">t</span><span class="op" id="8225310">.</span><span class="ident" id="8225311">Fatalf</span><span class="op" id="8225317">(</span><span class="string" id="8225318">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8225353">,</span>&nbsp;<span class="ident" id="8225355">err</span><span class="op" id="8225358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225362">}</span>&nbsp;<span class="keyword" id="8225364">else</span>&nbsp;<span class="op" id="8225369">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225374">time</span><span class="op" id="8225378">.</span><span class="ident" id="8225379">Sleep</span><span class="op" id="8225384">(</span><span class="num" id="8225385">3</span>&nbsp;<span class="op" id="8225387">*</span>&nbsp;<span class="ident" id="8225389">time</span><span class="op" id="8225393">.</span><span class="ident" id="8225394">Millisecond</span><span class="op" id="8225405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225412">}</span><br>
<span class="lineno"></span><span class="op" id="8225414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="8225417">func</span>&nbsp;<span class="ident" id="8225422">TestInterfaceArrivalAndDeparture</span><span class="op" id="8225454">(</span><span class="ident" id="8225455">t</span>&nbsp;<span class="op" id="8225457">*</span><span class="ident" id="8225458">testing</span><span class="op" id="8225465">.</span><span class="ident" id="8225466">T</span><span class="op" id="8225467">)</span>&nbsp;<span class="op" id="8225469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225472">if</span>&nbsp;<span class="ident" id="8225475">testing</span><span class="op" id="8225482">.</span><span class="ident" id="8225483">Short</span><span class="op" id="8225488">(</span><span class="op" id="8225489">)</span>&nbsp;<span class="op" id="8225491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225495">t</span><span class="op" id="8225496">.</span><span class="ident" id="8225497">Skip</span><span class="op" id="8225501">(</span><span class="string" id="8225502">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8225531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225537">if</span>&nbsp;<span class="ident" id="8225540">os</span><span class="op" id="8225542">.</span><span class="ident" id="8225543">Getuid</span><span class="op" id="8225549">(</span><span class="op" id="8225550">)</span>&nbsp;<span class="op" id="8225552">!=</span>&nbsp;<span class="num" id="8225555">0</span>&nbsp;<span class="op" id="8225557">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225561">t</span><span class="op" id="8225562">.</span><span class="ident" id="8225563">Skip</span><span class="op" id="8225567">(</span><span class="string" id="8225568">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8225597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225604">for</span>&nbsp;<span class="ident" id="8225608">i</span>&nbsp;<span class="op" id="8225610">:=</span>&nbsp;<span class="num" id="8225613">0</span><span class="op" id="8225614">;</span>&nbsp;<span class="ident" id="8225616">i</span>&nbsp;<span class="op" id="8225618">&lt;</span>&nbsp;<span class="num" id="8225620">3</span><span class="op" id="8225621">;</span>&nbsp;<span class="ident" id="8225623">i</span><span class="op" id="8225624">++</span>&nbsp;<span class="op" id="8225627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225631">ift1</span><span class="op" id="8225635">,</span>&nbsp;<span class="ident" id="8225637">err</span>&nbsp;<span class="op" id="8225641">:=</span>&nbsp;<span class="ident" id="8225644">Interfaces</span><span class="op" id="8225654">(</span><span class="op" id="8225655">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225659">if</span>&nbsp;<span class="ident" id="8225662">err</span>&nbsp;<span class="op" id="8225666">!=</span>&nbsp;<span class="ident" id="8225669">nil</span>&nbsp;<span class="op" id="8225673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225678">t</span><span class="op" id="8225679">.</span><span class="ident" id="8225680">Fatalf</span><span class="op" id="8225686">(</span><span class="string" id="8225687">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8225710">,</span>&nbsp;<span class="ident" id="8225712">err</span><span class="op" id="8225715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225723">ti</span>&nbsp;<span class="op" id="8225726">:=</span>&nbsp;<span class="op" id="8225729">&amp;</span><span class="ident" id="8225730">testInterface</span><span class="op" id="8225743">{</span><span class="op" id="8225744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225748">if</span>&nbsp;<span class="ident" id="8225751">err</span>&nbsp;<span class="op" id="8225755">:=</span>&nbsp;<span class="ident" id="8225758">ti</span><span class="op" id="8225760">.</span><span class="ident" id="8225761">setBroadcast</span><span class="op" id="8225773">(</span><span class="num" id="8225774">5682</span>&nbsp;<span class="op" id="8225779">+</span>&nbsp;<span class="ident" id="8225781">i</span><span class="op" id="8225782">)</span><span class="op" id="8225783">;</span>&nbsp;<span class="ident" id="8225785">err</span>&nbsp;<span class="op" id="8225789">!=</span>&nbsp;<span class="ident" id="8225792">nil</span>&nbsp;<span class="op" id="8225796">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225801">t</span><span class="op" id="8225802">.</span><span class="ident" id="8225803">Skipf</span><span class="op" id="8225808">(</span><span class="string" id="8225809">&#34;test&nbsp;requires&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="8225845">,</span>&nbsp;<span class="ident" id="8225847">err</span><span class="op" id="8225850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225858">if</span>&nbsp;<span class="ident" id="8225861">err</span>&nbsp;<span class="op" id="8225865">:=</span>&nbsp;<span class="ident" id="8225868">ti</span><span class="op" id="8225870">.</span><span class="ident" id="8225871">setup</span><span class="op" id="8225876">(</span><span class="op" id="8225877">)</span><span class="op" id="8225878">;</span>&nbsp;<span class="ident" id="8225880">err</span>&nbsp;<span class="op" id="8225884">!=</span>&nbsp;<span class="ident" id="8225887">nil</span>&nbsp;<span class="op" id="8225891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225896">t</span><span class="op" id="8225897">.</span><span class="ident" id="8225898">Fatalf</span><span class="op" id="8225904">(</span><span class="string" id="8225905">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8225937">,</span>&nbsp;<span class="ident" id="8225939">err</span><span class="op" id="8225942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225946">}</span>&nbsp;<span class="keyword" id="8225948">else</span>&nbsp;<span class="op" id="8225953">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225958">time</span><span class="op" id="8225962">.</span><span class="ident" id="8225963">Sleep</span><span class="op" id="8225968">(</span><span class="num" id="8225969">3</span>&nbsp;<span class="op" id="8225971">*</span>&nbsp;<span class="ident" id="8225973">time</span><span class="op" id="8225977">.</span><span class="ident" id="8225978">Millisecond</span><span class="op" id="8225989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225997">ift2</span><span class="op" id="8226001">,</span>&nbsp;<span class="ident" id="8226003">err</span>&nbsp;<span class="op" id="8226007">:=</span>&nbsp;<span class="ident" id="8226010">Interfaces</span><span class="op" id="8226020">(</span><span class="op" id="8226021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226025">if</span>&nbsp;<span class="ident" id="8226028">err</span>&nbsp;<span class="op" id="8226032">!=</span>&nbsp;<span class="ident" id="8226035">nil</span>&nbsp;<span class="op" id="8226039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226044">ti</span><span class="op" id="8226046">.</span><span class="ident" id="8226047">teardown</span><span class="op" id="8226055">(</span><span class="op" id="8226056">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226061">t</span><span class="op" id="8226062">.</span><span class="ident" id="8226063">Fatalf</span><span class="op" id="8226069">(</span><span class="string" id="8226070">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8226093">,</span>&nbsp;<span class="ident" id="8226095">err</span><span class="op" id="8226098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226106">if</span>&nbsp;<span class="builtinfunc" id="8226109">len</span><span class="op" id="8226112">(</span><span class="ident" id="8226113">ift2</span><span class="op" id="8226117">)</span>&nbsp;<span class="op" id="8226119">&lt;=</span>&nbsp;<span class="builtinfunc" id="8226122">len</span><span class="op" id="8226125">(</span><span class="ident" id="8226126">ift1</span><span class="op" id="8226130">)</span>&nbsp;<span class="op" id="8226132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226137">for</span>&nbsp;<span class="ident" id="8226141">_</span><span class="op" id="8226142">,</span>&nbsp;<span class="ident" id="8226144">ifi</span>&nbsp;<span class="op" id="8226148">:=</span>&nbsp;<span class="keyword" id="8226151">range</span>&nbsp;<span class="ident" id="8226157">ift1</span>&nbsp;<span class="op" id="8226162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226168">t</span><span class="op" id="8226169">.</span><span class="ident" id="8226170">Logf</span><span class="op" id="8226174">(</span><span class="string" id="8226175">&#34;before:&nbsp;%v&#34;</span><span class="op" id="8226187">,</span>&nbsp;<span class="ident" id="8226189">ifi</span><span class="op" id="8226192">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226202">for</span>&nbsp;<span class="ident" id="8226206">_</span><span class="op" id="8226207">,</span>&nbsp;<span class="ident" id="8226209">ifi</span>&nbsp;<span class="op" id="8226213">:=</span>&nbsp;<span class="keyword" id="8226216">range</span>&nbsp;<span class="ident" id="8226222">ift2</span>&nbsp;<span class="op" id="8226227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226233">t</span><span class="op" id="8226234">.</span><span class="ident" id="8226235">Logf</span><span class="op" id="8226239">(</span><span class="string" id="8226240">&#34;after:&nbsp;%v&#34;</span><span class="op" id="8226251">,</span>&nbsp;<span class="ident" id="8226253">ifi</span><span class="op" id="8226256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226266">ti</span><span class="op" id="8226268">.</span><span class="ident" id="8226269">teardown</span><span class="op" id="8226277">(</span><span class="op" id="8226278">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226283">t</span><span class="op" id="8226284">.</span><span class="ident" id="8226285">Fatalf</span><span class="op" id="8226291">(</span><span class="string" id="8226292">&#34;got&nbsp;%v;&nbsp;want&nbsp;gt&nbsp;%v&#34;</span><span class="op" id="8226312">,</span>&nbsp;<span class="builtinfunc" id="8226314">len</span><span class="op" id="8226317">(</span><span class="ident" id="8226318">ift2</span><span class="op" id="8226322">)</span><span class="op" id="8226323">,</span>&nbsp;<span class="builtinfunc" id="8226325">len</span><span class="op" id="8226328">(</span><span class="ident" id="8226329">ift1</span><span class="op" id="8226333">)</span><span class="op" id="8226334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226342">if</span>&nbsp;<span class="ident" id="8226345">err</span>&nbsp;<span class="op" id="8226349">:=</span>&nbsp;<span class="ident" id="8226352">ti</span><span class="op" id="8226354">.</span><span class="ident" id="8226355">teardown</span><span class="op" id="8226363">(</span><span class="op" id="8226364">)</span><span class="op" id="8226365">;</span>&nbsp;<span class="ident" id="8226367">err</span>&nbsp;<span class="op" id="8226371">!=</span>&nbsp;<span class="ident" id="8226374">nil</span>&nbsp;<span class="op" id="8226378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226383">t</span><span class="op" id="8226384">.</span><span class="ident" id="8226385">Fatalf</span><span class="op" id="8226391">(</span><span class="string" id="8226392">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8226427">,</span>&nbsp;<span class="ident" id="8226429">err</span><span class="op" id="8226432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226436">}</span>&nbsp;<span class="keyword" id="8226438">else</span>&nbsp;<span class="op" id="8226443">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226448">time</span><span class="op" id="8226452">.</span><span class="ident" id="8226453">Sleep</span><span class="op" id="8226458">(</span><span class="num" id="8226459">3</span>&nbsp;<span class="op" id="8226461">*</span>&nbsp;<span class="ident" id="8226463">time</span><span class="op" id="8226467">.</span><span class="ident" id="8226468">Millisecond</span><span class="op" id="8226479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226487">ift3</span><span class="op" id="8226491">,</span>&nbsp;<span class="ident" id="8226493">err</span>&nbsp;<span class="op" id="8226497">:=</span>&nbsp;<span class="ident" id="8226500">Interfaces</span><span class="op" id="8226510">(</span><span class="op" id="8226511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226515">if</span>&nbsp;<span class="ident" id="8226518">err</span>&nbsp;<span class="op" id="8226522">!=</span>&nbsp;<span class="ident" id="8226525">nil</span>&nbsp;<span class="op" id="8226529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226534">t</span><span class="op" id="8226535">.</span><span class="ident" id="8226536">Fatalf</span><span class="op" id="8226542">(</span><span class="string" id="8226543">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8226566">,</span>&nbsp;<span class="ident" id="8226568">err</span><span class="op" id="8226571">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226579">if</span>&nbsp;<span class="builtinfunc" id="8226582">len</span><span class="op" id="8226585">(</span><span class="ident" id="8226586">ift3</span><span class="op" id="8226590">)</span>&nbsp;<span class="op" id="8226592">&gt;=</span>&nbsp;<span class="builtinfunc" id="8226595">len</span><span class="op" id="8226598">(</span><span class="ident" id="8226599">ift2</span><span class="op" id="8226603">)</span>&nbsp;<span class="op" id="8226605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226610">for</span>&nbsp;<span class="ident" id="8226614">_</span><span class="op" id="8226615">,</span>&nbsp;<span class="ident" id="8226617">ifi</span>&nbsp;<span class="op" id="8226621">:=</span>&nbsp;<span class="keyword" id="8226624">range</span>&nbsp;<span class="ident" id="8226630">ift2</span>&nbsp;<span class="op" id="8226635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226641">t</span><span class="op" id="8226642">.</span><span class="ident" id="8226643">Logf</span><span class="op" id="8226647">(</span><span class="string" id="8226648">&#34;before:&nbsp;%v&#34;</span><span class="op" id="8226660">,</span>&nbsp;<span class="ident" id="8226662">ifi</span><span class="op" id="8226665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226670">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226675">for</span>&nbsp;<span class="ident" id="8226679">_</span><span class="op" id="8226680">,</span>&nbsp;<span class="ident" id="8226682">ifi</span>&nbsp;<span class="op" id="8226686">:=</span>&nbsp;<span class="keyword" id="8226689">range</span>&nbsp;<span class="ident" id="8226695">ift3</span>&nbsp;<span class="op" id="8226700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226706">t</span><span class="op" id="8226707">.</span><span class="ident" id="8226708">Logf</span><span class="op" id="8226712">(</span><span class="string" id="8226713">&#34;after:&nbsp;%v&#34;</span><span class="op" id="8226724">,</span>&nbsp;<span class="ident" id="8226726">ifi</span><span class="op" id="8226729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226739">t</span><span class="op" id="8226740">.</span><span class="ident" id="8226741">Fatalf</span><span class="op" id="8226747">(</span><span class="string" id="8226748">&#34;got&nbsp;%v;&nbsp;want&nbsp;lt&nbsp;%v&#34;</span><span class="op" id="8226768">,</span>&nbsp;<span class="builtinfunc" id="8226770">len</span><span class="op" id="8226773">(</span><span class="ident" id="8226774">ift3</span><span class="op" id="8226778">)</span><span class="op" id="8226779">,</span>&nbsp;<span class="builtinfunc" id="8226781">len</span><span class="op" id="8226784">(</span><span class="ident" id="8226785">ift2</span><span class="op" id="8226789">)</span><span class="op" id="8226790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226794">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226797">}</span><br>
<span class="lineno"></span><span class="op" id="8226799">}</span>
</div>
</body>
</html>
