<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7755350">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7755406">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7755460">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7755511">package</span>&nbsp;<span class="ident" id="7755519">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7755526">import</span>&nbsp;<span class="op" id="7755533">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755536">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755542">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755553">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7755563">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7755566">const</span>&nbsp;<span class="ident" id="7755572">quote</span>&nbsp;<span class="op" id="7755578">=</span>&nbsp;<span class="string" id="7755580">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7755585">type</span>&nbsp;<span class="ident" id="7755590">readTest</span>&nbsp;<span class="keyword" id="7755599">struct</span>&nbsp;<span class="op" id="7755606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7755609">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7755668">in</span>&nbsp;&nbsp;<span class="builtintype" id="7755672">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7755680">err</span>&nbsp;<span class="builtintype" id="7755684">string</span><br>
<span class="lineno"></span><span class="op" id="7755691">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7755694">var</span>&nbsp;<span class="ident" id="7755698">readImportsTests</span>&nbsp;<span class="op" id="7755715">=</span>&nbsp;<span class="op" id="7755717">[</span><span class="op" id="7755718">]</span><span class="ident" id="7755719"><a href="/go/build/read_test.go.html#7755590">readTest</a></span><span class="op" id="7755727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755734">`package&nbsp;p`</span><span class="op" id="7755745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755749">&#34;&#34;</span><span class="op" id="7755751">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755754">}</span><span class="op" id="7755755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755762">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7755785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755789">&#34;&#34;</span><span class="op" id="7755791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755794">}</span><span class="op" id="7755795">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755802">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7755827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755831">&#34;&#34;</span><span class="op" id="7755833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755836">}</span><span class="op" id="7755837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755840">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755844">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="7755880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755884">&#34;&#34;</span><span class="op" id="7755886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755889">}</span><span class="op" id="7755890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7755893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7755897">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="7756058">+</span>&nbsp;<span class="ident" id="7756060"><a href="/go/build/read_test.go.html#7755572">quote</a></span>&nbsp;<span class="op" id="7756066">+</span>&nbsp;<span class="string" id="7756068">`x`</span>&nbsp;<span class="op" id="7756072">+</span>&nbsp;<span class="ident" id="7756074"><a href="/go/build/read_test.go.html#7755572">quote</a></span>&nbsp;<span class="op" id="7756080">+</span>&nbsp;<span class="string" id="7756082">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="7756103">+</span>&nbsp;<span class="ident" id="7756105"><a href="/go/build/read_test.go.html#7755572">quote</a></span>&nbsp;<span class="op" id="7756111">+</span>&nbsp;<span class="string" id="7756113">`x`</span>&nbsp;<span class="op" id="7756117">+</span>&nbsp;<span class="ident" id="7756119"><a href="/go/build/read_test.go.html#7755572">quote</a></span>&nbsp;<span class="op" id="7756125">+</span>&nbsp;<span class="string" id="7756127">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="7756136">+</span>&nbsp;<span class="ident" id="7756138"><a href="/go/build/read_test.go.html#7755572">quote</a></span>&nbsp;<span class="op" id="7756144">+</span>&nbsp;<span class="string" id="7756146">`x`</span>&nbsp;<span class="op" id="7756150">+</span>&nbsp;<span class="ident" id="7756152"><a href="/go/build/read_test.go.html#7755572">quote</a></span>&nbsp;<span class="op" id="7756158">+</span>&nbsp;<span class="string" id="7756160">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="7756270">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756274">&#34;&#34;</span><span class="op" id="7756276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756279">}</span><span class="op" id="7756280">,</span><br>
<span class="lineno"></span><span class="op" id="7756282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7756285">var</span>&nbsp;<span class="ident" id="7756289">readCommentsTests</span>&nbsp;<span class="op" id="7756307">=</span>&nbsp;<span class="op" id="7756309">[</span><span class="op" id="7756310">]</span><span class="ident" id="7756311"><a href="/go/build/read_test.go.html#7755590">readTest</a></span><span class="op" id="7756319">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756326">`ℙpackage&nbsp;p`</span><span class="op" id="7756340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756344">&#34;&#34;</span><span class="op" id="7756346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756349">}</span><span class="op" id="7756350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756353">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756357">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7756383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756387">&#34;&#34;</span><span class="op" id="7756389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756392">}</span><span class="op" id="7756393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756400">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7756428">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756432">&#34;&#34;</span><span class="op" id="7756434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756437">}</span><span class="op" id="7756438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756445">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="7756532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7756536">&#34;&#34;</span><span class="op" id="7756538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756541">}</span><span class="op" id="7756542">,</span><br>
<span class="lineno">95</span><span class="op" id="7756544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7756547">func</span>&nbsp;<span class="ident" id="7756552">testRead</span><span class="op" id="7756560">(</span><span class="ident" id="7756561">t</span>&nbsp;<span class="op" id="7756563">*</span><span class="ident" id="7756564"><a href="/go/build/read_test.go.html#7755553">testing</a></span><span class="op" id="7756571">.</span><span class="ident" id="7756572">T</span><span class="op" id="7756573">,</span>&nbsp;<span class="ident" id="7756575">tests</span>&nbsp;<span class="op" id="7756581">[</span><span class="op" id="7756582">]</span><span class="ident" id="7756583"><a href="/go/build/read_test.go.html#7755590">readTest</a></span><span class="op" id="7756591">,</span>&nbsp;<span class="ident" id="7756593">read</span>&nbsp;<span class="keyword" id="7756598">func</span><span class="op" id="7756602">(</span><span class="ident" id="7756603"><a href="/go/build/read_test.go.html#7755536">io</a></span><span class="op" id="7756605">.</span><span class="ident" id="7756606">Reader</span><span class="op" id="7756612">)</span>&nbsp;<span class="op" id="7756614">(</span><span class="op" id="7756615">[</span><span class="op" id="7756616">]</span><span class="builtintype" id="7756617">byte</span><span class="op" id="7756621">,</span>&nbsp;<span class="builtintype" id="7756623">error</span><span class="op" id="7756628">)</span><span class="op" id="7756629">)</span>&nbsp;<span class="op" id="7756631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7756634">for</span>&nbsp;<span class="ident" id="7756638">i</span><span class="op" id="7756639">,</span>&nbsp;<span class="ident" id="7756641">tt</span>&nbsp;<span class="op" id="7756644">:=</span>&nbsp;<span class="keyword" id="7756647">range</span>&nbsp;<span class="ident" id="7756653"><a href="/go/build/read_test.go.html#7756575">tests</a></span>&nbsp;<span class="op" id="7756659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7756663">var</span>&nbsp;<span class="ident" id="7756667">in</span><span class="op" id="7756669">,</span>&nbsp;<span class="ident" id="7756671">testOut</span>&nbsp;<span class="builtintype" id="7756679">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756688">j</span>&nbsp;<span class="op" id="7756690">:=</span>&nbsp;<span class="ident" id="7756693"><a href="/go/build/read_test.go.html#7755542">strings</a></span><span class="op" id="7756700">.</span><span class="ident" id="7756701">Index</span><span class="op" id="7756706">(</span><span class="ident" id="7756707"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756709">.</span><span class="ident" id="7756710">in</span><span class="op" id="7756712">,</span>&nbsp;<span class="string" id="7756714">&#34;ℙ&#34;</span><span class="op" id="7756719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7756723">if</span>&nbsp;<span class="ident" id="7756726"><a href="/go/build/read_test.go.html#7756688">j</a></span>&nbsp;<span class="op" id="7756728">&lt;</span>&nbsp;<span class="num" id="7756730">0</span>&nbsp;<span class="op" id="7756732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756737"><a href="/go/build/read_test.go.html#7756667">in</a></span>&nbsp;<span class="op" id="7756740">=</span>&nbsp;<span class="ident" id="7756742"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756744">.</span><span class="ident" id="7756745">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756751"><a href="/go/build/read_test.go.html#7756671">testOut</a></span>&nbsp;<span class="op" id="7756759">=</span>&nbsp;<span class="ident" id="7756761"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756763">.</span><span class="ident" id="7756764">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756769">}</span>&nbsp;<span class="keyword" id="7756771">else</span>&nbsp;<span class="op" id="7756776">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756781"><a href="/go/build/read_test.go.html#7756667">in</a></span>&nbsp;<span class="op" id="7756784">=</span>&nbsp;<span class="ident" id="7756786"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756788">.</span><span class="ident" id="7756789">in</span><span class="op" id="7756791">[</span><span class="op" id="7756792">:</span><span class="ident" id="7756793"><a href="/go/build/read_test.go.html#7756688">j</a></span><span class="op" id="7756794">]</span>&nbsp;<span class="op" id="7756796">+</span>&nbsp;<span class="ident" id="7756798"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756800">.</span><span class="ident" id="7756801">in</span><span class="op" id="7756803">[</span><span class="ident" id="7756804"><a href="/go/build/read_test.go.html#7756688">j</a></span><span class="op" id="7756805">+</span><span class="builtinfunc" id="7756806">len</span><span class="op" id="7756809">(</span><span class="string" id="7756810">&#34;ℙ&#34;</span><span class="op" id="7756815">)</span><span class="op" id="7756816">:</span><span class="op" id="7756817">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756822"><a href="/go/build/read_test.go.html#7756671">testOut</a></span>&nbsp;<span class="op" id="7756830">=</span>&nbsp;<span class="ident" id="7756832"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756834">.</span><span class="ident" id="7756835">in</span><span class="op" id="7756837">[</span><span class="op" id="7756838">:</span><span class="ident" id="7756839"><a href="/go/build/read_test.go.html#7756688">j</a></span><span class="op" id="7756840">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7756844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756848">r</span>&nbsp;<span class="op" id="7756850">:=</span>&nbsp;<span class="ident" id="7756853"><a href="/go/build/read_test.go.html#7755542">strings</a></span><span class="op" id="7756860">.</span><span class="ident" id="7756861">NewReader</span><span class="op" id="7756870">(</span><span class="ident" id="7756871"><a href="/go/build/read_test.go.html#7756667">in</a></span><span class="op" id="7756873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756877">buf</span><span class="op" id="7756880">,</span>&nbsp;<span class="ident" id="7756882">err</span>&nbsp;<span class="op" id="7756886">:=</span>&nbsp;<span class="ident" id="7756889"><a href="/go/build/read_test.go.html#7756593">read</a></span><span class="op" id="7756893">(</span><span class="ident" id="7756894"><a href="/go/build/read_test.go.html#7756848">r</a></span><span class="op" id="7756895">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7756899">if</span>&nbsp;<span class="ident" id="7756902"><a href="/go/build/read_test.go.html#7756882">err</a></span>&nbsp;<span class="op" id="7756906">!=</span>&nbsp;<span class="ident" id="7756909">nil</span>&nbsp;<span class="op" id="7756913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7756918">if</span>&nbsp;<span class="ident" id="7756921"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7756923">.</span><span class="ident" id="7756924">err</span>&nbsp;<span class="op" id="7756928">==</span>&nbsp;<span class="string" id="7756931">&#34;&#34;</span>&nbsp;<span class="op" id="7756934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7756940"><a href="/go/build/read_test.go.html#7756561">t</a></span><span class="op" id="7756941">.</span><span class="ident" id="7756942">Errorf</span><span class="op" id="7756948">(</span><span class="string" id="7756949">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="7756985">,</span>&nbsp;<span class="ident" id="7756987"><a href="/go/build/read_test.go.html#7756638">i</a></span><span class="op" id="7756988">,</span>&nbsp;<span class="ident" id="7756990"><a href="/go/build/read_test.go.html#7756882">err</a></span><span class="op" id="7756993">,</span>&nbsp;<span class="builtintype" id="7756995">string</span><span class="op" id="7757001">(</span><span class="ident" id="7757002"><a href="/go/build/read_test.go.html#7756877">buf</a></span><span class="op" id="7757005">)</span><span class="op" id="7757006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757012">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757024">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757029">if</span>&nbsp;<span class="op" id="7757032">!</span><span class="ident" id="7757033"><a href="/go/build/read_test.go.html#7755542">strings</a></span><span class="op" id="7757040">.</span><span class="ident" id="7757041">Contains</span><span class="op" id="7757049">(</span><span class="ident" id="7757050"><a href="/go/build/read_test.go.html#7756882">err</a></span><span class="op" id="7757053">.</span><span class="ident" id="7757054">Error</span><span class="op" id="7757059">(</span><span class="op" id="7757060">)</span><span class="op" id="7757061">,</span>&nbsp;<span class="ident" id="7757063"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7757065">.</span><span class="ident" id="7757066">err</span><span class="op" id="7757069">)</span>&nbsp;<span class="op" id="7757071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7757077"><a href="/go/build/read_test.go.html#7756561">t</a></span><span class="op" id="7757078">.</span><span class="ident" id="7757079">Errorf</span><span class="op" id="7757085">(</span><span class="string" id="7757086">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7757112">,</span>&nbsp;<span class="ident" id="7757114"><a href="/go/build/read_test.go.html#7756638">i</a></span><span class="op" id="7757115">,</span>&nbsp;<span class="ident" id="7757117"><a href="/go/build/read_test.go.html#7756882">err</a></span><span class="op" id="7757120">,</span>&nbsp;<span class="ident" id="7757122"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7757124">.</span><span class="ident" id="7757125">err</span><span class="op" id="7757128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757134">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757151">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757166">if</span>&nbsp;<span class="ident" id="7757169"><a href="/go/build/read_test.go.html#7756882">err</a></span>&nbsp;<span class="op" id="7757173">==</span>&nbsp;<span class="ident" id="7757176">nil</span>&nbsp;<span class="op" id="7757180">&amp;&amp;</span>&nbsp;<span class="ident" id="7757183"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7757185">.</span><span class="ident" id="7757186">err</span>&nbsp;<span class="op" id="7757190">!=</span>&nbsp;<span class="string" id="7757193">&#34;&#34;</span>&nbsp;<span class="op" id="7757196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7757201"><a href="/go/build/read_test.go.html#7756561">t</a></span><span class="op" id="7757202">.</span><span class="ident" id="7757203">Errorf</span><span class="op" id="7757209">(</span><span class="string" id="7757210">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7757237">,</span>&nbsp;<span class="ident" id="7757239"><a href="/go/build/read_test.go.html#7756638">i</a></span><span class="op" id="7757240">,</span>&nbsp;<span class="ident" id="7757242"><a href="/go/build/read_test.go.html#7756641">tt</a></span><span class="op" id="7757244">.</span><span class="ident" id="7757245">err</span><span class="op" id="7757248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757253">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757264">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7757269">out</span>&nbsp;<span class="op" id="7757273">:=</span>&nbsp;<span class="builtintype" id="7757276">string</span><span class="op" id="7757282">(</span><span class="ident" id="7757283"><a href="/go/build/read_test.go.html#7756877">buf</a></span><span class="op" id="7757286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7757290">if</span>&nbsp;<span class="ident" id="7757293"><a href="/go/build/read_test.go.html#7757269">out</a></span>&nbsp;<span class="op" id="7757297">!=</span>&nbsp;<span class="ident" id="7757300"><a href="/go/build/read_test.go.html#7756671">testOut</a></span>&nbsp;<span class="op" id="7757308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7757313"><a href="/go/build/read_test.go.html#7756561">t</a></span><span class="op" id="7757314">.</span><span class="ident" id="7757315">Errorf</span><span class="op" id="7757321">(</span><span class="string" id="7757322">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="7757362">,</span>&nbsp;<span class="ident" id="7757364"><a href="/go/build/read_test.go.html#7756638">i</a></span><span class="op" id="7757365">,</span>&nbsp;<span class="ident" id="7757367"><a href="/go/build/read_test.go.html#7757269">out</a></span><span class="op" id="7757370">,</span>&nbsp;<span class="ident" id="7757372"><a href="/go/build/read_test.go.html#7756671">testOut</a></span><span class="op" id="7757379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757383">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757386">}</span><br>
<span class="lineno"></span><span class="op" id="7757388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7757391">func</span>&nbsp;<span class="ident" id="7757396">TestReadImports</span><span class="op" id="7757411">(</span><span class="ident" id="7757412">t</span>&nbsp;<span class="op" id="7757414">*</span><span class="ident" id="7757415"><a href="/go/build/read_test.go.html#7755553">testing</a></span><span class="op" id="7757422">.</span><span class="ident" id="7757423">T</span><span class="op" id="7757424">)</span>&nbsp;<span class="op" id="7757426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7757429"><a href="/go/build/read_test.go.html#7756552">testRead</a></span><span class="op" id="7757437">(</span><span class="ident" id="7757438"><a href="/go/build/read_test.go.html#7757412">t</a></span><span class="op" id="7757439">,</span>&nbsp;<span class="ident" id="7757441"><a href="/go/build/read_test.go.html#7755698">readImportsTests</a></span><span class="op" id="7757457">,</span>&nbsp;<span class="keyword" id="7757459">func</span><span class="op" id="7757463">(</span><span class="ident" id="7757464">r</span>&nbsp;<span class="ident" id="7757466"><a href="/go/build/read_test.go.html#7755536">io</a></span><span class="op" id="7757468">.</span><span class="ident" id="7757469">Reader</span><span class="op" id="7757475">)</span>&nbsp;<span class="op" id="7757477">(</span><span class="op" id="7757478">[</span><span class="op" id="7757479">]</span><span class="builtintype" id="7757480">byte</span><span class="op" id="7757484">,</span>&nbsp;<span class="builtintype" id="7757486">error</span><span class="op" id="7757491">)</span>&nbsp;<span class="op" id="7757493">{</span>&nbsp;<span class="keyword" id="7757495">return</span>&nbsp;<span class="ident" id="7757502"><a href="/go/build/read.go.html#6474625">readImports</a></span><span class="op" id="7757513">(</span><span class="ident" id="7757514"><a href="/go/build/read_test.go.html#7757464">r</a></span><span class="op" id="7757515">,</span>&nbsp;<span class="builtintype" id="7757517">true</span><span class="op" id="7757521">)</span>&nbsp;<span class="op" id="7757523">}</span><span class="op" id="7757524">)</span><br>
<span class="lineno">135</span><span class="op" id="7757526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7757529">func</span>&nbsp;<span class="ident" id="7757534">TestReadComments</span><span class="op" id="7757550">(</span><span class="ident" id="7757551">t</span>&nbsp;<span class="op" id="7757553">*</span><span class="ident" id="7757554"><a href="/go/build/read_test.go.html#7755553">testing</a></span><span class="op" id="7757561">.</span><span class="ident" id="7757562">T</span><span class="op" id="7757563">)</span>&nbsp;<span class="op" id="7757565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7757568"><a href="/go/build/read_test.go.html#7756552">testRead</a></span><span class="op" id="7757576">(</span><span class="ident" id="7757577"><a href="/go/build/read_test.go.html#7757551">t</a></span><span class="op" id="7757578">,</span>&nbsp;<span class="ident" id="7757580"><a href="/go/build/read_test.go.html#7756289">readCommentsTests</a></span><span class="op" id="7757597">,</span>&nbsp;<span class="ident" id="7757599"><a href="/go/build/read.go.html#6474212">readComments</a></span><span class="op" id="7757611">)</span><br>
<span class="lineno"></span><span class="op" id="7757613">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7757616">var</span>&nbsp;<span class="ident" id="7757620">readFailuresTests</span>&nbsp;<span class="op" id="7757638">=</span>&nbsp;<span class="op" id="7757640">[</span><span class="op" id="7757641">]</span><span class="ident" id="7757642"><a href="/go/build/read_test.go.html#7755590">readTest</a></span><span class="op" id="7757650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757657">`package`</span><span class="op" id="7757666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757670">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7757684">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757687">}</span><span class="op" id="7757688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757695">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="7757729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757733">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="7757758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757761">}</span><span class="op" id="7757762">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757769">`package&nbsp;p;&nbsp;import`</span><span class="op" id="7757788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757792">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7757806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757809">}</span><span class="op" id="7757810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757813">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757817">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="7757838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757842">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7757856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757859">}</span><span class="op" id="7757860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757867">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="7757893">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757897">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7757911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757914">}</span><span class="op" id="7757915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757922">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="7757944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757948">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7757962">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757965">}</span><span class="op" id="7757966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7757969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757973">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="7757994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7757998">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758015">}</span><span class="op" id="7758016">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758023">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="7758046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758050">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758067">}</span><span class="op" id="7758068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758071">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758075">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="7758099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758103">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758120">}</span><span class="op" id="7758121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758128">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="7758149">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758153">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758170">}</span><span class="op" id="7758171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758178">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="7758201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758205">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758219">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758222">}</span><span class="op" id="7758223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758230">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="7758254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758258">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758275">}</span><span class="op" id="7758276">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758283">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="7758304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758308">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758325">}</span><span class="op" id="7758326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758329">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758333">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="7758355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758359">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758376">}</span><span class="op" id="7758377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758384">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="7758407">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758411">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758428">}</span><span class="op" id="7758429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758436">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="7758460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7758464">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7758478">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7758481">}</span><span class="op" id="7758482">,</span><br>
<span class="lineno"></span><span class="op" id="7758484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7758487">func</span>&nbsp;<span class="ident" id="7758492">TestReadFailures</span><span class="op" id="7758508">(</span><span class="ident" id="7758509">t</span>&nbsp;<span class="op" id="7758511">*</span><span class="ident" id="7758512"><a href="/go/build/read_test.go.html#7755553">testing</a></span><span class="op" id="7758519">.</span><span class="ident" id="7758520">T</span><span class="op" id="7758521">)</span>&nbsp;<span class="op" id="7758523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7758526">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7758583"><a href="/go/build/read_test.go.html#7756552">testRead</a></span><span class="op" id="7758591">(</span><span class="ident" id="7758592"><a href="/go/build/read_test.go.html#7758509">t</a></span><span class="op" id="7758593">,</span>&nbsp;<span class="ident" id="7758595"><a href="/go/build/read_test.go.html#7757620">readFailuresTests</a></span><span class="op" id="7758612">,</span>&nbsp;<span class="keyword" id="7758614">func</span><span class="op" id="7758618">(</span><span class="ident" id="7758619">r</span>&nbsp;<span class="ident" id="7758621"><a href="/go/build/read_test.go.html#7755536">io</a></span><span class="op" id="7758623">.</span><span class="ident" id="7758624">Reader</span><span class="op" id="7758630">)</span>&nbsp;<span class="op" id="7758632">(</span><span class="op" id="7758633">[</span><span class="op" id="7758634">]</span><span class="builtintype" id="7758635">byte</span><span class="op" id="7758639">,</span>&nbsp;<span class="builtintype" id="7758641">error</span><span class="op" id="7758646">)</span>&nbsp;<span class="op" id="7758648">{</span>&nbsp;<span class="keyword" id="7758650">return</span>&nbsp;<span class="ident" id="7758657"><a href="/go/build/read.go.html#6474625">readImports</a></span><span class="op" id="7758668">(</span><span class="ident" id="7758669"><a href="/go/build/read_test.go.html#7758619">r</a></span><span class="op" id="7758670">,</span>&nbsp;<span class="builtintype" id="7758672">true</span><span class="op" id="7758676">)</span>&nbsp;<span class="op" id="7758678">}</span><span class="op" id="7758679">)</span><br>
<span class="lineno"></span><span class="op" id="7758681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7758684">func</span>&nbsp;<span class="ident" id="7758689">TestReadFailuresIgnored</span><span class="op" id="7758712">(</span><span class="ident" id="7758713">t</span>&nbsp;<span class="op" id="7758715">*</span><span class="ident" id="7758716"><a href="/go/build/read_test.go.html#7755553">testing</a></span><span class="op" id="7758723">.</span><span class="ident" id="7758724">T</span><span class="op" id="7758725">)</span>&nbsp;<span class="op" id="7758727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7758730">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7758799">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7758859">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7758906">tests</span>&nbsp;<span class="op" id="7758912">:=</span>&nbsp;<span class="builtinfunc" id="7758915">make</span><span class="op" id="7758919">(</span><span class="op" id="7758920">[</span><span class="op" id="7758921">]</span><span class="ident" id="7758922"><a href="/go/build/read_test.go.html#7755590">readTest</a></span><span class="op" id="7758930">,</span>&nbsp;<span class="builtinfunc" id="7758932">len</span><span class="op" id="7758935">(</span><span class="ident" id="7758936"><a href="/go/build/read_test.go.html#7757620">readFailuresTests</a></span><span class="op" id="7758953">)</span><span class="op" id="7758954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7758957">copy</span><span class="op" id="7758961">(</span><span class="ident" id="7758962"><a href="/go/build/read_test.go.html#7758906">tests</a></span><span class="op" id="7758967">,</span>&nbsp;<span class="ident" id="7758969"><a href="/go/build/read_test.go.html#7757620">readFailuresTests</a></span><span class="op" id="7758986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7758989">for</span>&nbsp;<span class="ident" id="7758993">i</span>&nbsp;<span class="op" id="7758995">:=</span>&nbsp;<span class="keyword" id="7758998">range</span>&nbsp;<span class="ident" id="7759004"><a href="/go/build/read_test.go.html#7758906">tests</a></span>&nbsp;<span class="op" id="7759010">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7759014">tt</span>&nbsp;<span class="op" id="7759017">:=</span>&nbsp;<span class="op" id="7759020">&amp;</span><span class="ident" id="7759021"><a href="/go/build/read_test.go.html#7758906">tests</a></span><span class="op" id="7759026">[</span><span class="ident" id="7759027"><a href="/go/build/read_test.go.html#7758993">i</a></span><span class="op" id="7759028">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7759032">if</span>&nbsp;<span class="op" id="7759035">!</span><span class="ident" id="7759036"><a href="/go/build/read_test.go.html#7755542">strings</a></span><span class="op" id="7759043">.</span><span class="ident" id="7759044">Contains</span><span class="op" id="7759052">(</span><span class="ident" id="7759053"><a href="/go/build/read_test.go.html#7759014">tt</a></span><span class="op" id="7759055">.</span><span class="ident" id="7759056">err</span><span class="op" id="7759059">,</span>&nbsp;<span class="string" id="7759061">&#34;NUL&#34;</span><span class="op" id="7759066">)</span>&nbsp;<span class="op" id="7759068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7759073"><a href="/go/build/read_test.go.html#7759014">tt</a></span><span class="op" id="7759075">.</span><span class="ident" id="7759076">err</span>&nbsp;<span class="op" id="7759080">=</span>&nbsp;<span class="string" id="7759082">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7759087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7759090">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7759093"><a href="/go/build/read_test.go.html#7756552">testRead</a></span><span class="op" id="7759101">(</span><span class="ident" id="7759102"><a href="/go/build/read_test.go.html#7758713">t</a></span><span class="op" id="7759103">,</span>&nbsp;<span class="ident" id="7759105"><a href="/go/build/read_test.go.html#7758906">tests</a></span><span class="op" id="7759110">,</span>&nbsp;<span class="keyword" id="7759112">func</span><span class="op" id="7759116">(</span><span class="ident" id="7759117">r</span>&nbsp;<span class="ident" id="7759119"><a href="/go/build/read_test.go.html#7755536">io</a></span><span class="op" id="7759121">.</span><span class="ident" id="7759122">Reader</span><span class="op" id="7759128">)</span>&nbsp;<span class="op" id="7759130">(</span><span class="op" id="7759131">[</span><span class="op" id="7759132">]</span><span class="builtintype" id="7759133">byte</span><span class="op" id="7759137">,</span>&nbsp;<span class="builtintype" id="7759139">error</span><span class="op" id="7759144">)</span>&nbsp;<span class="op" id="7759146">{</span>&nbsp;<span class="keyword" id="7759148">return</span>&nbsp;<span class="ident" id="7759155"><a href="/go/build/read.go.html#6474625">readImports</a></span><span class="op" id="7759166">(</span><span class="ident" id="7759167"><a href="/go/build/read_test.go.html#7759117">r</a></span><span class="op" id="7759168">,</span>&nbsp;<span class="builtintype" id="7759170">false</span><span class="op" id="7759175">)</span>&nbsp;<span class="op" id="7759177">}</span><span class="op" id="7759178">)</span><br>
<span class="lineno"></span><span class="op" id="7759180">}</span>
</div>
</body>
</html>
