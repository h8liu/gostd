<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2157401">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2157456">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2157510">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2157561">package</span>&nbsp;<span class="ident" id="2157569">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2157575">func</span>&nbsp;<span class="ident" id="2157580">isOddInt</span><span class="op" id="2157588">(</span><span class="ident" id="2157589">x</span>&nbsp;<span class="builtintype" id="2157591">float64</span><span class="op" id="2157598">)</span>&nbsp;<span class="builtintype" id="2157600">bool</span>&nbsp;<span class="op" id="2157605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157608">xi</span><span class="op" id="2157610">,</span>&nbsp;<span class="ident" id="2157612">xf</span>&nbsp;<span class="op" id="2157615">:=</span>&nbsp;<span class="ident" id="2157618">Modf</span><span class="op" id="2157622">(</span><span class="ident" id="2157623">x</span><span class="op" id="2157624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2157627">return</span>&nbsp;<span class="ident" id="2157634">xf</span>&nbsp;<span class="op" id="2157637">==</span>&nbsp;<span class="num" id="2157640">0</span>&nbsp;<span class="op" id="2157642">&amp;&amp;</span>&nbsp;<span class="ident" id="2157645">int64</span><span class="op" id="2157650">(</span><span class="ident" id="2157651">xi</span><span class="op" id="2157653">)</span><span class="op" id="2157654">&amp;</span><span class="num" id="2157655">1</span>&nbsp;<span class="op" id="2157657">==</span>&nbsp;<span class="num" id="2157660">1</span><br>
<span class="lineno">10</span><span class="op" id="2157662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2157665">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2157733">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2157799">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2157849">//</span><br>
<span class="lineno"></span><span class="comment" id="2157852">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2157885">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2157914">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2157941">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2157968">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2157989">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2158010">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2158058">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2158083">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2158106">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2158168">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2158214">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2158274">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2158296">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2158331">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2158364">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2158397">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2158432">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2158465">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2158496">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2158526">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2158587">func</span>&nbsp;<span class="ident" id="2158592">Pow</span><span class="op" id="2158595">(</span><span class="ident" id="2158596">x</span><span class="op" id="2158597">,</span>&nbsp;<span class="ident" id="2158599">y</span>&nbsp;<span class="builtintype" id="2158601">float64</span><span class="op" id="2158608">)</span>&nbsp;<span class="builtintype" id="2158610">float64</span>&nbsp;<span class="op" id="2158618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158621">switch</span>&nbsp;<span class="op" id="2158628">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158631">case</span>&nbsp;<span class="ident" id="2158636">y</span>&nbsp;<span class="op" id="2158638">==</span>&nbsp;<span class="num" id="2158641">0</span>&nbsp;<span class="op" id="2158643">||</span>&nbsp;<span class="ident" id="2158646">x</span>&nbsp;<span class="op" id="2158648">==</span>&nbsp;<span class="num" id="2158651">1</span><span class="op" id="2158652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158656">return</span>&nbsp;<span class="num" id="2158663">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158666">case</span>&nbsp;<span class="ident" id="2158671">y</span>&nbsp;<span class="op" id="2158673">==</span>&nbsp;<span class="num" id="2158676">1</span><span class="op" id="2158677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158681">return</span>&nbsp;<span class="ident" id="2158688">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158691">case</span>&nbsp;<span class="ident" id="2158696">y</span>&nbsp;<span class="op" id="2158698">==</span>&nbsp;<span class="num" id="2158701">0.5</span><span class="op" id="2158704">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158708">return</span>&nbsp;<span class="ident" id="2158715">Sqrt</span><span class="op" id="2158719">(</span><span class="ident" id="2158720">x</span><span class="op" id="2158721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158724">case</span>&nbsp;<span class="ident" id="2158729">y</span>&nbsp;<span class="op" id="2158731">==</span>&nbsp;<span class="op" id="2158734">-</span><span class="num" id="2158735">0.5</span><span class="op" id="2158738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158742">return</span>&nbsp;<span class="num" id="2158749">1</span>&nbsp;<span class="op" id="2158751">/</span>&nbsp;<span class="ident" id="2158753">Sqrt</span><span class="op" id="2158757">(</span><span class="ident" id="2158758">x</span><span class="op" id="2158759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158762">case</span>&nbsp;<span class="ident" id="2158767">IsNaN</span><span class="op" id="2158772">(</span><span class="ident" id="2158773">x</span><span class="op" id="2158774">)</span>&nbsp;<span class="op" id="2158776">||</span>&nbsp;<span class="ident" id="2158779">IsNaN</span><span class="op" id="2158784">(</span><span class="ident" id="2158785">y</span><span class="op" id="2158786">)</span><span class="op" id="2158787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158791">return</span>&nbsp;<span class="ident" id="2158798">NaN</span><span class="op" id="2158801">(</span><span class="op" id="2158802">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158805">case</span>&nbsp;<span class="ident" id="2158810">x</span>&nbsp;<span class="op" id="2158812">==</span>&nbsp;<span class="num" id="2158815">0</span><span class="op" id="2158816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158820">switch</span>&nbsp;<span class="op" id="2158827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158831">case</span>&nbsp;<span class="ident" id="2158836">y</span>&nbsp;<span class="op" id="2158838">&lt;</span>&nbsp;<span class="num" id="2158840">0</span><span class="op" id="2158841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158846">if</span>&nbsp;<span class="ident" id="2158849">isOddInt</span><span class="op" id="2158857">(</span><span class="ident" id="2158858">y</span><span class="op" id="2158859">)</span>&nbsp;<span class="op" id="2158861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158867">return</span>&nbsp;<span class="ident" id="2158874">Copysign</span><span class="op" id="2158882">(</span><span class="ident" id="2158883">Inf</span><span class="op" id="2158886">(</span><span class="num" id="2158887">1</span><span class="op" id="2158888">)</span><span class="op" id="2158889">,</span>&nbsp;<span class="ident" id="2158891">x</span><span class="op" id="2158892">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2158897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158902">return</span>&nbsp;<span class="ident" id="2158909">Inf</span><span class="op" id="2158912">(</span><span class="num" id="2158913">1</span><span class="op" id="2158914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158918">case</span>&nbsp;<span class="ident" id="2158923">y</span>&nbsp;<span class="op" id="2158925">&gt;</span>&nbsp;<span class="num" id="2158927">0</span><span class="op" id="2158928">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158933">if</span>&nbsp;<span class="ident" id="2158936">isOddInt</span><span class="op" id="2158944">(</span><span class="ident" id="2158945">y</span><span class="op" id="2158946">)</span>&nbsp;<span class="op" id="2158948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158954">return</span>&nbsp;<span class="ident" id="2158961">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2158966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158971">return</span>&nbsp;<span class="num" id="2158978">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2158982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158985">case</span>&nbsp;<span class="ident" id="2158990">IsInf</span><span class="op" id="2158995">(</span><span class="ident" id="2158996">y</span><span class="op" id="2158997">,</span>&nbsp;<span class="num" id="2158999">0</span><span class="op" id="2159000">)</span><span class="op" id="2159001">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159005">switch</span>&nbsp;<span class="op" id="2159012">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159016">case</span>&nbsp;<span class="ident" id="2159021">x</span>&nbsp;<span class="op" id="2159023">==</span>&nbsp;<span class="op" id="2159026">-</span><span class="num" id="2159027">1</span><span class="op" id="2159028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159033">return</span>&nbsp;<span class="num" id="2159040">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159044">case</span>&nbsp;<span class="op" id="2159049">(</span><span class="ident" id="2159050">Abs</span><span class="op" id="2159053">(</span><span class="ident" id="2159054">x</span><span class="op" id="2159055">)</span>&nbsp;<span class="op" id="2159057">&lt;</span>&nbsp;<span class="num" id="2159059">1</span><span class="op" id="2159060">)</span>&nbsp;<span class="op" id="2159062">==</span>&nbsp;<span class="ident" id="2159065">IsInf</span><span class="op" id="2159070">(</span><span class="ident" id="2159071">y</span><span class="op" id="2159072">,</span>&nbsp;<span class="num" id="2159074">1</span><span class="op" id="2159075">)</span><span class="op" id="2159076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159081">return</span>&nbsp;<span class="num" id="2159088">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159092">default</span><span class="op" id="2159099">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159104">return</span>&nbsp;<span class="ident" id="2159111">Inf</span><span class="op" id="2159114">(</span><span class="num" id="2159115">1</span><span class="op" id="2159116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159123">case</span>&nbsp;<span class="ident" id="2159128">IsInf</span><span class="op" id="2159133">(</span><span class="ident" id="2159134">x</span><span class="op" id="2159135">,</span>&nbsp;<span class="num" id="2159137">0</span><span class="op" id="2159138">)</span><span class="op" id="2159139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159143">if</span>&nbsp;<span class="ident" id="2159146">IsInf</span><span class="op" id="2159151">(</span><span class="ident" id="2159152">x</span><span class="op" id="2159153">,</span>&nbsp;<span class="op" id="2159155">-</span><span class="num" id="2159156">1</span><span class="op" id="2159157">)</span>&nbsp;<span class="op" id="2159159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159164">return</span>&nbsp;<span class="ident" id="2159171">Pow</span><span class="op" id="2159174">(</span><span class="num" id="2159175">1</span><span class="op" id="2159176">/</span><span class="ident" id="2159177">x</span><span class="op" id="2159178">,</span>&nbsp;<span class="op" id="2159180">-</span><span class="ident" id="2159181">y</span><span class="op" id="2159182">)</span>&nbsp;<span class="comment" id="2159184">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159205">switch</span>&nbsp;<span class="op" id="2159212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159216">case</span>&nbsp;<span class="ident" id="2159221">y</span>&nbsp;<span class="op" id="2159223">&lt;</span>&nbsp;<span class="num" id="2159225">0</span><span class="op" id="2159226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159231">return</span>&nbsp;<span class="num" id="2159238">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159242">case</span>&nbsp;<span class="ident" id="2159247">y</span>&nbsp;<span class="op" id="2159249">&gt;</span>&nbsp;<span class="num" id="2159251">0</span><span class="op" id="2159252">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159257">return</span>&nbsp;<span class="ident" id="2159264">Inf</span><span class="op" id="2159267">(</span><span class="num" id="2159268">1</span><span class="op" id="2159269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159280">absy</span>&nbsp;<span class="op" id="2159285">:=</span>&nbsp;<span class="ident" id="2159288">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159291">flip</span>&nbsp;<span class="op" id="2159296">:=</span>&nbsp;<span class="builtintype" id="2159299">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159306">if</span>&nbsp;<span class="ident" id="2159309">absy</span>&nbsp;<span class="op" id="2159314">&lt;</span>&nbsp;<span class="num" id="2159316">0</span>&nbsp;<span class="op" id="2159318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159322">absy</span>&nbsp;<span class="op" id="2159327">=</span>&nbsp;<span class="op" id="2159329">-</span><span class="ident" id="2159330">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159337">flip</span>&nbsp;<span class="op" id="2159342">=</span>&nbsp;<span class="builtintype" id="2159344">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159350">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159353">yi</span><span class="op" id="2159355">,</span>&nbsp;<span class="ident" id="2159357">yf</span>&nbsp;<span class="op" id="2159360">:=</span>&nbsp;<span class="ident" id="2159363">Modf</span><span class="op" id="2159367">(</span><span class="ident" id="2159368">absy</span><span class="op" id="2159372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159375">if</span>&nbsp;<span class="ident" id="2159378">yf</span>&nbsp;<span class="op" id="2159381">!=</span>&nbsp;<span class="num" id="2159384">0</span>&nbsp;<span class="op" id="2159386">&amp;&amp;</span>&nbsp;<span class="ident" id="2159389">x</span>&nbsp;<span class="op" id="2159391">&lt;</span>&nbsp;<span class="num" id="2159393">0</span>&nbsp;<span class="op" id="2159395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159399">return</span>&nbsp;<span class="ident" id="2159406">NaN</span><span class="op" id="2159409">(</span><span class="op" id="2159410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159416">if</span>&nbsp;<span class="ident" id="2159419">yi</span>&nbsp;<span class="op" id="2159422">&gt;=</span>&nbsp;<span class="num" id="2159425">1</span><span class="op" id="2159426">&lt;&lt;</span><span class="num" id="2159428">63</span>&nbsp;<span class="op" id="2159431">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159435">return</span>&nbsp;<span class="ident" id="2159442">Exp</span><span class="op" id="2159445">(</span><span class="ident" id="2159446">y</span>&nbsp;<span class="op" id="2159448">*</span>&nbsp;<span class="ident" id="2159450">Log</span><span class="op" id="2159453">(</span><span class="ident" id="2159454">x</span><span class="op" id="2159455">)</span><span class="op" id="2159456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159463">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159499">a1</span>&nbsp;<span class="op" id="2159502">:=</span>&nbsp;<span class="num" id="2159505">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159510">ae</span>&nbsp;<span class="op" id="2159513">:=</span>&nbsp;<span class="num" id="2159516">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159520">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159537">if</span>&nbsp;<span class="ident" id="2159540">yf</span>&nbsp;<span class="op" id="2159543">!=</span>&nbsp;<span class="num" id="2159546">0</span>&nbsp;<span class="op" id="2159548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159552">if</span>&nbsp;<span class="ident" id="2159555">yf</span>&nbsp;<span class="op" id="2159558">&gt;</span>&nbsp;<span class="num" id="2159560">0.5</span>&nbsp;<span class="op" id="2159564">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159569">yf</span><span class="op" id="2159571">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159577">yi</span><span class="op" id="2159579">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159588">a1</span>&nbsp;<span class="op" id="2159591">=</span>&nbsp;<span class="ident" id="2159593">Exp</span><span class="op" id="2159596">(</span><span class="ident" id="2159597">yf</span>&nbsp;<span class="op" id="2159600">*</span>&nbsp;<span class="ident" id="2159602">Log</span><span class="op" id="2159605">(</span><span class="ident" id="2159606">x</span><span class="op" id="2159607">)</span><span class="op" id="2159608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159611">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159615">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159632">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159675">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159709">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159748">x1</span><span class="op" id="2159750">,</span>&nbsp;<span class="ident" id="2159752">xe</span>&nbsp;<span class="op" id="2159755">:=</span>&nbsp;<span class="ident" id="2159758">Frexp</span><span class="op" id="2159763">(</span><span class="ident" id="2159764">x</span><span class="op" id="2159765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159768">for</span>&nbsp;<span class="ident" id="2159772">i</span>&nbsp;<span class="op" id="2159774">:=</span>&nbsp;<span class="ident" id="2159777">int64</span><span class="op" id="2159782">(</span><span class="ident" id="2159783">yi</span><span class="op" id="2159785">)</span><span class="op" id="2159786">;</span>&nbsp;<span class="ident" id="2159788">i</span>&nbsp;<span class="op" id="2159790">!=</span>&nbsp;<span class="num" id="2159793">0</span><span class="op" id="2159794">;</span>&nbsp;<span class="ident" id="2159796">i</span>&nbsp;<span class="op" id="2159798">&gt;&gt;=</span>&nbsp;<span class="num" id="2159802">1</span>&nbsp;<span class="op" id="2159804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159808">if</span>&nbsp;<span class="ident" id="2159811">i</span><span class="op" id="2159812">&amp;</span><span class="num" id="2159813">1</span>&nbsp;<span class="op" id="2159815">==</span>&nbsp;<span class="num" id="2159818">1</span>&nbsp;<span class="op" id="2159820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159825">a1</span>&nbsp;<span class="op" id="2159828">*=</span>&nbsp;<span class="ident" id="2159831">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159837">ae</span>&nbsp;<span class="op" id="2159840">+=</span>&nbsp;<span class="ident" id="2159843">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159852">x1</span>&nbsp;<span class="op" id="2159855">*=</span>&nbsp;<span class="ident" id="2159858">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159863">xe</span>&nbsp;<span class="op" id="2159866">&lt;&lt;=</span>&nbsp;<span class="num" id="2159870">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159874">if</span>&nbsp;<span class="ident" id="2159877">x1</span>&nbsp;<span class="op" id="2159880">&lt;</span>&nbsp;<span class="num" id="2159882">.5</span>&nbsp;<span class="op" id="2159885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159890">x1</span>&nbsp;<span class="op" id="2159893">+=</span>&nbsp;<span class="ident" id="2159896">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159902">xe</span><span class="op" id="2159904">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159916">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159935">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159965">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159995">if</span>&nbsp;<span class="ident" id="2159998">flip</span>&nbsp;<span class="op" id="2160003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160007">a1</span>&nbsp;<span class="op" id="2160010">=</span>&nbsp;<span class="num" id="2160012">1</span>&nbsp;<span class="op" id="2160014">/</span>&nbsp;<span class="ident" id="2160016">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160021">ae</span>&nbsp;<span class="op" id="2160024">=</span>&nbsp;<span class="op" id="2160026">-</span><span class="ident" id="2160027">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160034">return</span>&nbsp;<span class="ident" id="2160041">Ldexp</span><span class="op" id="2160046">(</span><span class="ident" id="2160047">a1</span><span class="op" id="2160049">,</span>&nbsp;<span class="ident" id="2160051">ae</span><span class="op" id="2160053">)</span><br>
<span class="lineno"></span><span class="op" id="2160055">}</span>
</div>
</body>
</html>
