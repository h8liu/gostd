<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3144870">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3144925">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3144979">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3145030">package</span>&nbsp;<span class="ident" id="3145038">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3145048">import</span>&nbsp;<span class="op" id="3145055">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3145058">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3145068">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3145074">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3145085">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3145093">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3145104">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3145119">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3145122">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3145183">var</span>&nbsp;<span class="ident" id="3145187">ErrBadPattern</span>&nbsp;<span class="op" id="3145201">=</span>&nbsp;<span class="ident" id="3145203">errors</span><span class="op" id="3145209">.</span><span class="ident" id="3145210">New</span><span class="op" id="3145213">(</span><span class="string" id="3145214">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3145239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3145242">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3145309">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3145335">//</span><br>
<span class="lineno"></span><span class="comment" id="3145338">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno"></span><span class="comment" id="3145350">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3145363">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno">25</span><span class="comment" id="3145372">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3145437">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3145496">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3145536">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3145588">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3145651">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3145687">//</span><br>
<span class="lineno"></span><span class="comment" id="3145690">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno"></span><span class="comment" id="3145710">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3145768">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3145804">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3145858">//</span><br>
<span class="lineno"></span><span class="comment" id="3145861">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3145931">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3145998">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3146015">//</span><br>
<span class="lineno"></span><span class="comment" id="3146018">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3146083">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3146102">//</span><br>
<span class="lineno"></span><span class="keyword" id="3146105">func</span>&nbsp;<span class="ident" id="3146110">Match</span><span class="op" id="3146115">(</span><span class="ident" id="3146116">pattern</span><span class="op" id="3146123">,</span>&nbsp;<span class="ident" id="3146125">name</span>&nbsp;<span class="builtintype" id="3146130">string</span><span class="op" id="3146136">)</span>&nbsp;<span class="op" id="3146138">(</span><span class="ident" id="3146139">matched</span>&nbsp;<span class="builtintype" id="3146147">bool</span><span class="op" id="3146151">,</span>&nbsp;<span class="ident" id="3146153">err</span>&nbsp;<span class="builtintype" id="3146157">error</span><span class="op" id="3146162">)</span>&nbsp;<span class="op" id="3146164">{</span><br>
<span class="lineno">45</span><span class="ident" id="3146166">Pattern</span><span class="op" id="3146173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146176">for</span>&nbsp;<span class="builtinfunc" id="3146180">len</span><span class="op" id="3146183">(</span><span class="ident" id="3146184">pattern</span><span class="op" id="3146191">)</span>&nbsp;<span class="op" id="3146193">&gt;</span>&nbsp;<span class="num" id="3146195">0</span>&nbsp;<span class="op" id="3146197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146201">var</span>&nbsp;<span class="ident" id="3146205">star</span>&nbsp;<span class="builtintype" id="3146210">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146217">var</span>&nbsp;<span class="ident" id="3146221">chunk</span>&nbsp;<span class="builtintype" id="3146227">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3146236">star</span><span class="op" id="3146240">,</span>&nbsp;<span class="ident" id="3146242">chunk</span><span class="op" id="3146247">,</span>&nbsp;<span class="ident" id="3146249">pattern</span>&nbsp;<span class="op" id="3146257">=</span>&nbsp;<span class="ident" id="3146259">scanChunk</span><span class="op" id="3146268">(</span><span class="ident" id="3146269">pattern</span><span class="op" id="3146276">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146280">if</span>&nbsp;<span class="ident" id="3146283">star</span>&nbsp;<span class="op" id="3146288">&amp;&amp;</span>&nbsp;<span class="ident" id="3146291">chunk</span>&nbsp;<span class="op" id="3146297">==</span>&nbsp;<span class="string" id="3146300">&#34;&#34;</span>&nbsp;<span class="op" id="3146303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146308">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146367">return</span>&nbsp;<span class="ident" id="3146374">strings</span><span class="op" id="3146381">.</span><span class="ident" id="3146382">Index</span><span class="op" id="3146387">(</span><span class="ident" id="3146388">name</span><span class="op" id="3146392">,</span>&nbsp;<span class="builtintype" id="3146394">string</span><span class="op" id="3146400">(</span><span class="ident" id="3146401">Separator</span><span class="op" id="3146410">)</span><span class="op" id="3146411">)</span>&nbsp;<span class="op" id="3146413">&lt;</span>&nbsp;<span class="num" id="3146415">0</span><span class="op" id="3146416">,</span>&nbsp;<span class="builtintype" id="3146418">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3146424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146428">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3146469">t</span><span class="op" id="3146470">,</span>&nbsp;<span class="ident" id="3146472">ok</span><span class="op" id="3146474">,</span>&nbsp;<span class="ident" id="3146476">err</span>&nbsp;<span class="op" id="3146480">:=</span>&nbsp;<span class="ident" id="3146483">matchChunk</span><span class="op" id="3146493">(</span><span class="ident" id="3146494">chunk</span><span class="op" id="3146499">,</span>&nbsp;<span class="ident" id="3146501">name</span><span class="op" id="3146505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146509">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146574">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146644">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146664">if</span>&nbsp;<span class="ident" id="3146667">ok</span>&nbsp;<span class="op" id="3146670">&amp;&amp;</span>&nbsp;<span class="op" id="3146673">(</span><span class="builtinfunc" id="3146674">len</span><span class="op" id="3146677">(</span><span class="ident" id="3146678">t</span><span class="op" id="3146679">)</span>&nbsp;<span class="op" id="3146681">==</span>&nbsp;<span class="num" id="3146684">0</span>&nbsp;<span class="op" id="3146686">||</span>&nbsp;<span class="builtinfunc" id="3146689">len</span><span class="op" id="3146692">(</span><span class="ident" id="3146693">pattern</span><span class="op" id="3146700">)</span>&nbsp;<span class="op" id="3146702">&gt;</span>&nbsp;<span class="num" id="3146704">0</span><span class="op" id="3146705">)</span>&nbsp;<span class="op" id="3146707">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3146712">name</span>&nbsp;<span class="op" id="3146717">=</span>&nbsp;<span class="ident" id="3146719">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146724">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3146735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146739">if</span>&nbsp;<span class="ident" id="3146742">err</span>&nbsp;<span class="op" id="3146746">!=</span>&nbsp;<span class="builtintype" id="3146749">nil</span>&nbsp;<span class="op" id="3146753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146758">return</span>&nbsp;<span class="builtintype" id="3146765">false</span><span class="op" id="3146770">,</span>&nbsp;<span class="ident" id="3146772">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3146778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146782">if</span>&nbsp;<span class="ident" id="3146785">star</span>&nbsp;<span class="op" id="3146790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146795">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146836">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146857">for</span>&nbsp;<span class="ident" id="3146861">i</span>&nbsp;<span class="op" id="3146863">:=</span>&nbsp;<span class="num" id="3146866">0</span><span class="op" id="3146867">;</span>&nbsp;<span class="ident" id="3146869">i</span>&nbsp;<span class="op" id="3146871">&lt;</span>&nbsp;<span class="builtinfunc" id="3146873">len</span><span class="op" id="3146876">(</span><span class="ident" id="3146877">name</span><span class="op" id="3146881">)</span>&nbsp;<span class="op" id="3146883">&amp;&amp;</span>&nbsp;<span class="ident" id="3146886">name</span><span class="op" id="3146890">[</span><span class="ident" id="3146891">i</span><span class="op" id="3146892">]</span>&nbsp;<span class="op" id="3146894">!=</span>&nbsp;<span class="ident" id="3146897">Separator</span><span class="op" id="3146906">;</span>&nbsp;<span class="ident" id="3146908">i</span><span class="op" id="3146909">++</span>&nbsp;<span class="op" id="3146912">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3146918">t</span><span class="op" id="3146919">,</span>&nbsp;<span class="ident" id="3146921">ok</span><span class="op" id="3146923">,</span>&nbsp;<span class="ident" id="3146925">err</span>&nbsp;<span class="op" id="3146929">:=</span>&nbsp;<span class="ident" id="3146932">matchChunk</span><span class="op" id="3146942">(</span><span class="ident" id="3146943">chunk</span><span class="op" id="3146948">,</span>&nbsp;<span class="ident" id="3146950">name</span><span class="op" id="3146954">[</span><span class="ident" id="3146955">i</span><span class="op" id="3146956">+</span><span class="num" id="3146957">1</span><span class="op" id="3146958">:</span><span class="op" id="3146959">]</span><span class="op" id="3146960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3146966">if</span>&nbsp;<span class="ident" id="3146969">ok</span>&nbsp;<span class="op" id="3146972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3146979">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147044">if</span>&nbsp;<span class="builtinfunc" id="3147047">len</span><span class="op" id="3147050">(</span><span class="ident" id="3147051">pattern</span><span class="op" id="3147058">)</span>&nbsp;<span class="op" id="3147060">==</span>&nbsp;<span class="num" id="3147063">0</span>&nbsp;<span class="op" id="3147065">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3147068">len</span><span class="op" id="3147071">(</span><span class="ident" id="3147072">t</span><span class="op" id="3147073">)</span>&nbsp;<span class="op" id="3147075">&gt;</span>&nbsp;<span class="num" id="3147077">0</span>&nbsp;<span class="op" id="3147079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147087">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147108">name</span>&nbsp;<span class="op" id="3147113">=</span>&nbsp;<span class="ident" id="3147115">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147122">continue</span>&nbsp;<span class="ident" id="3147131">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147149">if</span>&nbsp;<span class="ident" id="3147152">err</span>&nbsp;<span class="op" id="3147156">!=</span>&nbsp;<span class="builtintype" id="3147159">nil</span>&nbsp;<span class="op" id="3147163">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147170">return</span>&nbsp;<span class="builtintype" id="3147177">false</span><span class="op" id="3147182">,</span>&nbsp;<span class="ident" id="3147184">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147205">return</span>&nbsp;<span class="builtintype" id="3147212">false</span><span class="op" id="3147217">,</span>&nbsp;<span class="builtintype" id="3147219">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147227">return</span>&nbsp;<span class="builtinfunc" id="3147234">len</span><span class="op" id="3147237">(</span><span class="ident" id="3147238">name</span><span class="op" id="3147242">)</span>&nbsp;<span class="op" id="3147244">==</span>&nbsp;<span class="num" id="3147247">0</span><span class="op" id="3147248">,</span>&nbsp;<span class="builtintype" id="3147250">nil</span><br>
<span class="lineno"></span><span class="op" id="3147254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3147257">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3147331">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3147363">func</span>&nbsp;<span class="ident" id="3147368">scanChunk</span><span class="op" id="3147377">(</span><span class="ident" id="3147378">pattern</span>&nbsp;<span class="builtintype" id="3147386">string</span><span class="op" id="3147392">)</span>&nbsp;<span class="op" id="3147394">(</span><span class="ident" id="3147395">star</span>&nbsp;<span class="builtintype" id="3147400">bool</span><span class="op" id="3147404">,</span>&nbsp;<span class="ident" id="3147406">chunk</span><span class="op" id="3147411">,</span>&nbsp;<span class="ident" id="3147413">rest</span>&nbsp;<span class="builtintype" id="3147418">string</span><span class="op" id="3147424">)</span>&nbsp;<span class="op" id="3147426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147429">for</span>&nbsp;<span class="builtinfunc" id="3147433">len</span><span class="op" id="3147436">(</span><span class="ident" id="3147437">pattern</span><span class="op" id="3147444">)</span>&nbsp;<span class="op" id="3147446">&gt;</span>&nbsp;<span class="num" id="3147448">0</span>&nbsp;<span class="op" id="3147450">&amp;&amp;</span>&nbsp;<span class="ident" id="3147453">pattern</span><span class="op" id="3147460">[</span><span class="num" id="3147461">0</span><span class="op" id="3147462">]</span>&nbsp;<span class="op" id="3147464">==</span>&nbsp;<span class="string" id="3147467">&#39;*&#39;</span>&nbsp;<span class="op" id="3147471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147475">pattern</span>&nbsp;<span class="op" id="3147483">=</span>&nbsp;<span class="ident" id="3147485">pattern</span><span class="op" id="3147492">[</span><span class="num" id="3147493">1</span><span class="op" id="3147494">:</span><span class="op" id="3147495">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147499">star</span>&nbsp;<span class="op" id="3147504">=</span>&nbsp;<span class="builtintype" id="3147506">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147515">inrange</span>&nbsp;<span class="op" id="3147523">:=</span>&nbsp;<span class="builtintype" id="3147526">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147533">var</span>&nbsp;<span class="ident" id="3147537">i</span>&nbsp;<span class="builtintype" id="3147539">int</span><br>
<span class="lineno"></span><span class="ident" id="3147543">Scan</span><span class="op" id="3147547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147550">for</span>&nbsp;<span class="ident" id="3147554">i</span>&nbsp;<span class="op" id="3147556">=</span>&nbsp;<span class="num" id="3147558">0</span><span class="op" id="3147559">;</span>&nbsp;<span class="ident" id="3147561">i</span>&nbsp;<span class="op" id="3147563">&lt;</span>&nbsp;<span class="builtinfunc" id="3147565">len</span><span class="op" id="3147568">(</span><span class="ident" id="3147569">pattern</span><span class="op" id="3147576">)</span><span class="op" id="3147577">;</span>&nbsp;<span class="ident" id="3147579">i</span><span class="op" id="3147580">++</span>&nbsp;<span class="op" id="3147583">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147587">switch</span>&nbsp;<span class="ident" id="3147594">pattern</span><span class="op" id="3147601">[</span><span class="ident" id="3147602">i</span><span class="op" id="3147603">]</span>&nbsp;<span class="op" id="3147605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147609">case</span>&nbsp;<span class="string" id="3147614">&#39;\\&#39;</span><span class="op" id="3147618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147623">if</span>&nbsp;<span class="ident" id="3147626">runtime</span><span class="op" id="3147633">.</span><span class="ident" id="3147634">GOOS</span>&nbsp;<span class="op" id="3147639">!=</span>&nbsp;<span class="string" id="3147642">&#34;windows&#34;</span>&nbsp;<span class="op" id="3147652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3147658">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147713">if</span>&nbsp;<span class="ident" id="3147716">i</span><span class="op" id="3147717">+</span><span class="num" id="3147718">1</span>&nbsp;<span class="op" id="3147720">&lt;</span>&nbsp;<span class="builtinfunc" id="3147722">len</span><span class="op" id="3147725">(</span><span class="ident" id="3147726">pattern</span><span class="op" id="3147733">)</span>&nbsp;<span class="op" id="3147735">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147742">i</span><span class="op" id="3147743">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147759">case</span>&nbsp;<span class="string" id="3147764">&#39;[&#39;</span><span class="op" id="3147767">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147772">inrange</span>&nbsp;<span class="op" id="3147780">=</span>&nbsp;<span class="builtintype" id="3147782">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147789">case</span>&nbsp;<span class="string" id="3147794">&#39;]&#39;</span><span class="op" id="3147797">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3147802">inrange</span>&nbsp;<span class="op" id="3147810">=</span>&nbsp;<span class="builtintype" id="3147812">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147820">case</span>&nbsp;<span class="string" id="3147825">&#39;*&#39;</span><span class="op" id="3147828">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147833">if</span>&nbsp;<span class="op" id="3147836">!</span><span class="ident" id="3147837">inrange</span>&nbsp;<span class="op" id="3147845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147851">break</span>&nbsp;<span class="ident" id="3147857">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3147872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3147875">return</span>&nbsp;<span class="ident" id="3147882">star</span><span class="op" id="3147886">,</span>&nbsp;<span class="ident" id="3147888">pattern</span><span class="op" id="3147895">[</span><span class="num" id="3147896">0</span><span class="op" id="3147897">:</span><span class="ident" id="3147898">i</span><span class="op" id="3147899">]</span><span class="op" id="3147900">,</span>&nbsp;<span class="ident" id="3147902">pattern</span><span class="op" id="3147909">[</span><span class="ident" id="3147910">i</span><span class="op" id="3147911">:</span><span class="op" id="3147912">]</span><br>
<span class="lineno"></span><span class="op" id="3147914">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3147917">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3147980">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3148039">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3148114">func</span>&nbsp;<span class="ident" id="3148119">matchChunk</span><span class="op" id="3148129">(</span><span class="ident" id="3148130">chunk</span><span class="op" id="3148135">,</span>&nbsp;<span class="ident" id="3148137">s</span>&nbsp;<span class="builtintype" id="3148139">string</span><span class="op" id="3148145">)</span>&nbsp;<span class="op" id="3148147">(</span><span class="ident" id="3148148">rest</span>&nbsp;<span class="builtintype" id="3148153">string</span><span class="op" id="3148159">,</span>&nbsp;<span class="ident" id="3148161">ok</span>&nbsp;<span class="builtintype" id="3148164">bool</span><span class="op" id="3148168">,</span>&nbsp;<span class="ident" id="3148170">err</span>&nbsp;<span class="builtintype" id="3148174">error</span><span class="op" id="3148179">)</span>&nbsp;<span class="op" id="3148181">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148184">for</span>&nbsp;<span class="builtinfunc" id="3148188">len</span><span class="op" id="3148191">(</span><span class="ident" id="3148192">chunk</span><span class="op" id="3148197">)</span>&nbsp;<span class="op" id="3148199">&gt;</span>&nbsp;<span class="num" id="3148201">0</span>&nbsp;<span class="op" id="3148203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148207">if</span>&nbsp;<span class="builtinfunc" id="3148210">len</span><span class="op" id="3148213">(</span><span class="ident" id="3148214">s</span><span class="op" id="3148215">)</span>&nbsp;<span class="op" id="3148217">==</span>&nbsp;<span class="num" id="3148220">0</span>&nbsp;<span class="op" id="3148222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148227">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3148236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148240">switch</span>&nbsp;<span class="ident" id="3148247">chunk</span><span class="op" id="3148252">[</span><span class="num" id="3148253">0</span><span class="op" id="3148254">]</span>&nbsp;<span class="op" id="3148256">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148260">case</span>&nbsp;<span class="string" id="3148265">&#39;[&#39;</span><span class="op" id="3148268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3148273">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148295">r</span><span class="op" id="3148296">,</span>&nbsp;<span class="ident" id="3148298">n</span>&nbsp;<span class="op" id="3148300">:=</span>&nbsp;<span class="ident" id="3148303">utf8</span><span class="op" id="3148307">.</span><span class="ident" id="3148308">DecodeRuneInString</span><span class="op" id="3148326">(</span><span class="ident" id="3148327">s</span><span class="op" id="3148328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148333">s</span>&nbsp;<span class="op" id="3148335">=</span>&nbsp;<span class="ident" id="3148337">s</span><span class="op" id="3148338">[</span><span class="ident" id="3148339">n</span><span class="op" id="3148340">:</span><span class="op" id="3148341">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148346">chunk</span>&nbsp;<span class="op" id="3148352">=</span>&nbsp;<span class="ident" id="3148354">chunk</span><span class="op" id="3148359">[</span><span class="num" id="3148360">1</span><span class="op" id="3148361">:</span><span class="op" id="3148362">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3148367">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3148428">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148474">if</span>&nbsp;<span class="builtinfunc" id="3148477">len</span><span class="op" id="3148480">(</span><span class="ident" id="3148481">chunk</span><span class="op" id="3148486">)</span>&nbsp;<span class="op" id="3148488">==</span>&nbsp;<span class="num" id="3148491">0</span>&nbsp;<span class="op" id="3148493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148499">err</span>&nbsp;<span class="op" id="3148503">=</span>&nbsp;<span class="ident" id="3148505">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148523">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3148533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3148538">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148561">negated</span>&nbsp;<span class="op" id="3148569">:=</span>&nbsp;<span class="ident" id="3148572">chunk</span><span class="op" id="3148577">[</span><span class="num" id="3148578">0</span><span class="op" id="3148579">]</span>&nbsp;<span class="op" id="3148581">==</span>&nbsp;<span class="string" id="3148584">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148591">if</span>&nbsp;<span class="ident" id="3148594">negated</span>&nbsp;<span class="op" id="3148602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148608">chunk</span>&nbsp;<span class="op" id="3148614">=</span>&nbsp;<span class="ident" id="3148616">chunk</span><span class="op" id="3148621">[</span><span class="num" id="3148622">1</span><span class="op" id="3148623">:</span><span class="op" id="3148624">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3148629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3148634">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148657">match</span>&nbsp;<span class="op" id="3148663">:=</span>&nbsp;<span class="builtintype" id="3148666">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148675">nrange</span>&nbsp;<span class="op" id="3148682">:=</span>&nbsp;<span class="num" id="3148685">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148690">for</span>&nbsp;<span class="op" id="3148694">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148700">if</span>&nbsp;<span class="builtinfunc" id="3148703">len</span><span class="op" id="3148706">(</span><span class="ident" id="3148707">chunk</span><span class="op" id="3148712">)</span>&nbsp;<span class="op" id="3148714">&gt;</span>&nbsp;<span class="num" id="3148716">0</span>&nbsp;<span class="op" id="3148718">&amp;&amp;</span>&nbsp;<span class="ident" id="3148721">chunk</span><span class="op" id="3148726">[</span><span class="num" id="3148727">0</span><span class="op" id="3148728">]</span>&nbsp;<span class="op" id="3148730">==</span>&nbsp;<span class="string" id="3148733">&#39;]&#39;</span>&nbsp;<span class="op" id="3148737">&amp;&amp;</span>&nbsp;<span class="ident" id="3148740">nrange</span>&nbsp;<span class="op" id="3148747">&gt;</span>&nbsp;<span class="num" id="3148749">0</span>&nbsp;<span class="op" id="3148751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148758">chunk</span>&nbsp;<span class="op" id="3148764">=</span>&nbsp;<span class="ident" id="3148766">chunk</span><span class="op" id="3148771">[</span><span class="num" id="3148772">1</span><span class="op" id="3148773">:</span><span class="op" id="3148774">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148781">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3148791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148797">var</span>&nbsp;<span class="ident" id="3148801">lo</span><span class="op" id="3148803">,</span>&nbsp;<span class="ident" id="3148805">hi</span>&nbsp;<span class="builtintype" id="3148808">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148817">if</span>&nbsp;<span class="ident" id="3148820">lo</span><span class="op" id="3148822">,</span>&nbsp;<span class="ident" id="3148824">chunk</span><span class="op" id="3148829">,</span>&nbsp;<span class="ident" id="3148831">err</span>&nbsp;<span class="op" id="3148835">=</span>&nbsp;<span class="ident" id="3148837">getEsc</span><span class="op" id="3148843">(</span><span class="ident" id="3148844">chunk</span><span class="op" id="3148849">)</span><span class="op" id="3148850">;</span>&nbsp;<span class="ident" id="3148852">err</span>&nbsp;<span class="op" id="3148856">!=</span>&nbsp;<span class="builtintype" id="3148859">nil</span>&nbsp;<span class="op" id="3148863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148870">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3148881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3148887">hi</span>&nbsp;<span class="op" id="3148890">=</span>&nbsp;<span class="ident" id="3148892">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148899">if</span>&nbsp;<span class="ident" id="3148902">chunk</span><span class="op" id="3148907">[</span><span class="num" id="3148908">0</span><span class="op" id="3148909">]</span>&nbsp;<span class="op" id="3148911">==</span>&nbsp;<span class="string" id="3148914">&#39;-&#39;</span>&nbsp;<span class="op" id="3148918">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148925">if</span>&nbsp;<span class="ident" id="3148928">hi</span><span class="op" id="3148930">,</span>&nbsp;<span class="ident" id="3148932">chunk</span><span class="op" id="3148937">,</span>&nbsp;<span class="ident" id="3148939">err</span>&nbsp;<span class="op" id="3148943">=</span>&nbsp;<span class="ident" id="3148945">getEsc</span><span class="op" id="3148951">(</span><span class="ident" id="3148952">chunk</span><span class="op" id="3148957">[</span><span class="num" id="3148958">1</span><span class="op" id="3148959">:</span><span class="op" id="3148960">]</span><span class="op" id="3148961">)</span><span class="op" id="3148962">;</span>&nbsp;<span class="ident" id="3148964">err</span>&nbsp;<span class="op" id="3148968">!=</span>&nbsp;<span class="builtintype" id="3148971">nil</span>&nbsp;<span class="op" id="3148975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3148983">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3148995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149007">if</span>&nbsp;<span class="ident" id="3149010">lo</span>&nbsp;<span class="op" id="3149013">&lt;=</span>&nbsp;<span class="ident" id="3149016">r</span>&nbsp;<span class="op" id="3149018">&amp;&amp;</span>&nbsp;<span class="ident" id="3149021">r</span>&nbsp;<span class="op" id="3149023">&lt;=</span>&nbsp;<span class="ident" id="3149026">hi</span>&nbsp;<span class="op" id="3149029">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149036">match</span>&nbsp;<span class="op" id="3149042">=</span>&nbsp;<span class="builtintype" id="3149044">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149059">nrange</span><span class="op" id="3149065">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149076">if</span>&nbsp;<span class="ident" id="3149079">match</span>&nbsp;<span class="op" id="3149085">==</span>&nbsp;<span class="ident" id="3149088">negated</span>&nbsp;<span class="op" id="3149096">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149102">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149117">case</span>&nbsp;<span class="string" id="3149122">&#39;?&#39;</span><span class="op" id="3149125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149130">if</span>&nbsp;<span class="ident" id="3149133">s</span><span class="op" id="3149134">[</span><span class="num" id="3149135">0</span><span class="op" id="3149136">]</span>&nbsp;<span class="op" id="3149138">==</span>&nbsp;<span class="ident" id="3149141">Separator</span>&nbsp;<span class="op" id="3149151">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149157">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149172">_</span><span class="op" id="3149173">,</span>&nbsp;<span class="ident" id="3149175">n</span>&nbsp;<span class="op" id="3149177">:=</span>&nbsp;<span class="ident" id="3149180">utf8</span><span class="op" id="3149184">.</span><span class="ident" id="3149185">DecodeRuneInString</span><span class="op" id="3149203">(</span><span class="ident" id="3149204">s</span><span class="op" id="3149205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149210">s</span>&nbsp;<span class="op" id="3149212">=</span>&nbsp;<span class="ident" id="3149214">s</span><span class="op" id="3149215">[</span><span class="ident" id="3149216">n</span><span class="op" id="3149217">:</span><span class="op" id="3149218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149223">chunk</span>&nbsp;<span class="op" id="3149229">=</span>&nbsp;<span class="ident" id="3149231">chunk</span><span class="op" id="3149236">[</span><span class="num" id="3149237">1</span><span class="op" id="3149238">:</span><span class="op" id="3149239">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149244">case</span>&nbsp;<span class="string" id="3149249">&#39;\\&#39;</span><span class="op" id="3149253">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149258">if</span>&nbsp;<span class="ident" id="3149261">runtime</span><span class="op" id="3149268">.</span><span class="ident" id="3149269">GOOS</span>&nbsp;<span class="op" id="3149274">!=</span>&nbsp;<span class="string" id="3149277">&#34;windows&#34;</span>&nbsp;<span class="op" id="3149287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149293">chunk</span>&nbsp;<span class="op" id="3149299">=</span>&nbsp;<span class="ident" id="3149301">chunk</span><span class="op" id="3149306">[</span><span class="num" id="3149307">1</span><span class="op" id="3149308">:</span><span class="op" id="3149309">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149315">if</span>&nbsp;<span class="builtinfunc" id="3149318">len</span><span class="op" id="3149321">(</span><span class="ident" id="3149322">chunk</span><span class="op" id="3149327">)</span>&nbsp;<span class="op" id="3149329">==</span>&nbsp;<span class="num" id="3149332">0</span>&nbsp;<span class="op" id="3149334">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149341">err</span>&nbsp;<span class="op" id="3149345">=</span>&nbsp;<span class="ident" id="3149347">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149366">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149387">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149402">default</span><span class="op" id="3149409">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149414">if</span>&nbsp;<span class="ident" id="3149417">chunk</span><span class="op" id="3149422">[</span><span class="num" id="3149423">0</span><span class="op" id="3149424">]</span>&nbsp;<span class="op" id="3149426">!=</span>&nbsp;<span class="ident" id="3149429">s</span><span class="op" id="3149430">[</span><span class="num" id="3149431">0</span><span class="op" id="3149432">]</span>&nbsp;<span class="op" id="3149434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149440">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149450">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149455">s</span>&nbsp;<span class="op" id="3149457">=</span>&nbsp;<span class="ident" id="3149459">s</span><span class="op" id="3149460">[</span><span class="num" id="3149461">1</span><span class="op" id="3149462">:</span><span class="op" id="3149463">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149468">chunk</span>&nbsp;<span class="op" id="3149474">=</span>&nbsp;<span class="ident" id="3149476">chunk</span><span class="op" id="3149481">[</span><span class="num" id="3149482">1</span><span class="op" id="3149483">:</span><span class="op" id="3149484">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149494">return</span>&nbsp;<span class="ident" id="3149501">s</span><span class="op" id="3149502">,</span>&nbsp;<span class="builtintype" id="3149504">true</span><span class="op" id="3149508">,</span>&nbsp;<span class="builtintype" id="3149510">nil</span><br>
<span class="lineno">200</span><span class="op" id="3149514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3149517">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3149596">func</span>&nbsp;<span class="ident" id="3149601">getEsc</span><span class="op" id="3149607">(</span><span class="ident" id="3149608">chunk</span>&nbsp;<span class="builtintype" id="3149614">string</span><span class="op" id="3149620">)</span>&nbsp;<span class="op" id="3149622">(</span><span class="ident" id="3149623">r</span>&nbsp;<span class="builtintype" id="3149625">rune</span><span class="op" id="3149629">,</span>&nbsp;<span class="ident" id="3149631">nchunk</span>&nbsp;<span class="builtintype" id="3149638">string</span><span class="op" id="3149644">,</span>&nbsp;<span class="ident" id="3149646">err</span>&nbsp;<span class="builtintype" id="3149650">error</span><span class="op" id="3149655">)</span>&nbsp;<span class="op" id="3149657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149660">if</span>&nbsp;<span class="builtinfunc" id="3149663">len</span><span class="op" id="3149666">(</span><span class="ident" id="3149667">chunk</span><span class="op" id="3149672">)</span>&nbsp;<span class="op" id="3149674">==</span>&nbsp;<span class="num" id="3149677">0</span>&nbsp;<span class="op" id="3149679">||</span>&nbsp;<span class="ident" id="3149682">chunk</span><span class="op" id="3149687">[</span><span class="num" id="3149688">0</span><span class="op" id="3149689">]</span>&nbsp;<span class="op" id="3149691">==</span>&nbsp;<span class="string" id="3149694">&#39;-&#39;</span>&nbsp;<span class="op" id="3149698">||</span>&nbsp;<span class="ident" id="3149701">chunk</span><span class="op" id="3149706">[</span><span class="num" id="3149707">0</span><span class="op" id="3149708">]</span>&nbsp;<span class="op" id="3149710">==</span>&nbsp;<span class="string" id="3149713">&#39;]&#39;</span>&nbsp;<span class="op" id="3149717">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149721">err</span>&nbsp;<span class="op" id="3149725">=</span>&nbsp;<span class="ident" id="3149727">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149743">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149754">if</span>&nbsp;<span class="ident" id="3149757">chunk</span><span class="op" id="3149762">[</span><span class="num" id="3149763">0</span><span class="op" id="3149764">]</span>&nbsp;<span class="op" id="3149766">==</span>&nbsp;<span class="string" id="3149769">&#39;\\&#39;</span>&nbsp;<span class="op" id="3149774">&amp;&amp;</span>&nbsp;<span class="ident" id="3149777">runtime</span><span class="op" id="3149784">.</span><span class="ident" id="3149785">GOOS</span>&nbsp;<span class="op" id="3149790">!=</span>&nbsp;<span class="string" id="3149793">&#34;windows&#34;</span>&nbsp;<span class="op" id="3149803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149807">chunk</span>&nbsp;<span class="op" id="3149813">=</span>&nbsp;<span class="ident" id="3149815">chunk</span><span class="op" id="3149820">[</span><span class="num" id="3149821">1</span><span class="op" id="3149822">:</span><span class="op" id="3149823">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149827">if</span>&nbsp;<span class="builtinfunc" id="3149830">len</span><span class="op" id="3149833">(</span><span class="ident" id="3149834">chunk</span><span class="op" id="3149839">)</span>&nbsp;<span class="op" id="3149841">==</span>&nbsp;<span class="num" id="3149844">0</span>&nbsp;<span class="op" id="3149846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149851">err</span>&nbsp;<span class="op" id="3149855">=</span>&nbsp;<span class="ident" id="3149857">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149874">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149886">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149889">r</span><span class="op" id="3149890">,</span>&nbsp;<span class="ident" id="3149892">n</span>&nbsp;<span class="op" id="3149894">:=</span>&nbsp;<span class="ident" id="3149897">utf8</span><span class="op" id="3149901">.</span><span class="ident" id="3149902">DecodeRuneInString</span><span class="op" id="3149920">(</span><span class="ident" id="3149921">chunk</span><span class="op" id="3149926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3149929">if</span>&nbsp;<span class="ident" id="3149932">r</span>&nbsp;<span class="op" id="3149934">==</span>&nbsp;<span class="ident" id="3149937">utf8</span><span class="op" id="3149941">.</span><span class="ident" id="3149942">RuneError</span>&nbsp;<span class="op" id="3149952">&amp;&amp;</span>&nbsp;<span class="ident" id="3149955">n</span>&nbsp;<span class="op" id="3149957">==</span>&nbsp;<span class="num" id="3149960">1</span>&nbsp;<span class="op" id="3149962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149966">err</span>&nbsp;<span class="op" id="3149970">=</span>&nbsp;<span class="ident" id="3149972">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3149987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3149990">nchunk</span>&nbsp;<span class="op" id="3149997">=</span>&nbsp;<span class="ident" id="3149999">chunk</span><span class="op" id="3150004">[</span><span class="ident" id="3150005">n</span><span class="op" id="3150006">:</span><span class="op" id="3150007">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150010">if</span>&nbsp;<span class="builtinfunc" id="3150013">len</span><span class="op" id="3150016">(</span><span class="ident" id="3150017">nchunk</span><span class="op" id="3150023">)</span>&nbsp;<span class="op" id="3150025">==</span>&nbsp;<span class="num" id="3150028">0</span>&nbsp;<span class="op" id="3150030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3150034">err</span>&nbsp;<span class="op" id="3150038">=</span>&nbsp;<span class="ident" id="3150040">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3150055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150058">return</span><br>
<span class="lineno"></span><span class="op" id="3150065">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3150068">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3150131">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3150199">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3150267">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3150317">//</span><br>
<span class="lineno"></span><span class="comment" id="3150320">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3150395">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3150462">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3150479">func</span>&nbsp;<span class="ident" id="3150484">Glob</span><span class="op" id="3150488">(</span><span class="ident" id="3150489">pattern</span>&nbsp;<span class="builtintype" id="3150497">string</span><span class="op" id="3150503">)</span>&nbsp;<span class="op" id="3150505">(</span><span class="ident" id="3150506">matches</span>&nbsp;<span class="op" id="3150514">[</span><span class="op" id="3150515">]</span><span class="builtintype" id="3150516">string</span><span class="op" id="3150522">,</span>&nbsp;<span class="ident" id="3150524">err</span>&nbsp;<span class="builtintype" id="3150528">error</span><span class="op" id="3150533">)</span>&nbsp;<span class="op" id="3150535">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150538">if</span>&nbsp;<span class="op" id="3150541">!</span><span class="ident" id="3150542">hasMeta</span><span class="op" id="3150549">(</span><span class="ident" id="3150550">pattern</span><span class="op" id="3150557">)</span>&nbsp;<span class="op" id="3150559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150563">if</span>&nbsp;<span class="ident" id="3150566">_</span><span class="op" id="3150567">,</span>&nbsp;<span class="ident" id="3150569">err</span>&nbsp;<span class="op" id="3150573">=</span>&nbsp;<span class="ident" id="3150575">os</span><span class="op" id="3150577">.</span><span class="ident" id="3150578">Lstat</span><span class="op" id="3150583">(</span><span class="ident" id="3150584">pattern</span><span class="op" id="3150591">)</span><span class="op" id="3150592">;</span>&nbsp;<span class="ident" id="3150594">err</span>&nbsp;<span class="op" id="3150598">!=</span>&nbsp;<span class="builtintype" id="3150601">nil</span>&nbsp;<span class="op" id="3150605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150610">return</span>&nbsp;<span class="builtintype" id="3150617">nil</span><span class="op" id="3150620">,</span>&nbsp;<span class="builtintype" id="3150622">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3150628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150632">return</span>&nbsp;<span class="op" id="3150639">[</span><span class="op" id="3150640">]</span><span class="builtintype" id="3150641">string</span><span class="op" id="3150647">{</span><span class="ident" id="3150648">pattern</span><span class="op" id="3150655">}</span><span class="op" id="3150656">,</span>&nbsp;<span class="builtintype" id="3150658">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3150663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3150667">dir</span><span class="op" id="3150670">,</span>&nbsp;<span class="ident" id="3150672">file</span>&nbsp;<span class="op" id="3150677">:=</span>&nbsp;<span class="ident" id="3150680">Split</span><span class="op" id="3150685">(</span><span class="ident" id="3150686">pattern</span><span class="op" id="3150693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150696">switch</span>&nbsp;<span class="ident" id="3150703">dir</span>&nbsp;<span class="op" id="3150707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150710">case</span>&nbsp;<span class="string" id="3150715">&#34;&#34;</span><span class="op" id="3150717">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3150721">dir</span>&nbsp;<span class="op" id="3150725">=</span>&nbsp;<span class="string" id="3150727">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150732">case</span>&nbsp;<span class="builtintype" id="3150737">string</span><span class="op" id="3150743">(</span><span class="ident" id="3150744">Separator</span><span class="op" id="3150753">)</span><span class="op" id="3150754">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3150758">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150770">default</span><span class="op" id="3150777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3150781">dir</span>&nbsp;<span class="op" id="3150785">=</span>&nbsp;<span class="ident" id="3150787">dir</span><span class="op" id="3150790">[</span><span class="num" id="3150791">0</span>&nbsp;<span class="op" id="3150793">:</span>&nbsp;<span class="builtinfunc" id="3150795">len</span><span class="op" id="3150798">(</span><span class="ident" id="3150799">dir</span><span class="op" id="3150802">)</span><span class="op" id="3150803">-</span><span class="num" id="3150804">1</span><span class="op" id="3150805">]</span>&nbsp;<span class="comment" id="3150807">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3150839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150843">if</span>&nbsp;<span class="op" id="3150846">!</span><span class="ident" id="3150847">hasMeta</span><span class="op" id="3150854">(</span><span class="ident" id="3150855">dir</span><span class="op" id="3150858">)</span>&nbsp;<span class="op" id="3150860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150864">return</span>&nbsp;<span class="ident" id="3150871">glob</span><span class="op" id="3150875">(</span><span class="ident" id="3150876">dir</span><span class="op" id="3150879">,</span>&nbsp;<span class="ident" id="3150881">file</span><span class="op" id="3150885">,</span>&nbsp;<span class="builtintype" id="3150887">nil</span><span class="op" id="3150890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3150893">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150897">var</span>&nbsp;<span class="ident" id="3150901">m</span>&nbsp;<span class="op" id="3150903">[</span><span class="op" id="3150904">]</span><span class="builtintype" id="3150905">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3150913">m</span><span class="op" id="3150914">,</span>&nbsp;<span class="ident" id="3150916">err</span>&nbsp;<span class="op" id="3150920">=</span>&nbsp;<span class="ident" id="3150922">Glob</span><span class="op" id="3150926">(</span><span class="ident" id="3150927">dir</span><span class="op" id="3150930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150933">if</span>&nbsp;<span class="ident" id="3150936">err</span>&nbsp;<span class="op" id="3150940">!=</span>&nbsp;<span class="builtintype" id="3150943">nil</span>&nbsp;<span class="op" id="3150947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150951">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3150959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3150962">for</span>&nbsp;<span class="ident" id="3150966">_</span><span class="op" id="3150967">,</span>&nbsp;<span class="ident" id="3150969">d</span>&nbsp;<span class="op" id="3150971">:=</span>&nbsp;<span class="keyword" id="3150974">range</span>&nbsp;<span class="ident" id="3150980">m</span>&nbsp;<span class="op" id="3150982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3150986">matches</span><span class="op" id="3150993">,</span>&nbsp;<span class="ident" id="3150995">err</span>&nbsp;<span class="op" id="3150999">=</span>&nbsp;<span class="ident" id="3151001">glob</span><span class="op" id="3151005">(</span><span class="ident" id="3151006">d</span><span class="op" id="3151007">,</span>&nbsp;<span class="ident" id="3151009">file</span><span class="op" id="3151013">,</span>&nbsp;<span class="ident" id="3151015">matches</span><span class="op" id="3151022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151026">if</span>&nbsp;<span class="ident" id="3151029">err</span>&nbsp;<span class="op" id="3151033">!=</span>&nbsp;<span class="builtintype" id="3151036">nil</span>&nbsp;<span class="op" id="3151040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151045">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151060">return</span><br>
<span class="lineno"></span><span class="op" id="3151067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3151070">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3151135">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3151194">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3151254">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3151289">func</span>&nbsp;<span class="ident" id="3151294">glob</span><span class="op" id="3151298">(</span><span class="ident" id="3151299">dir</span><span class="op" id="3151302">,</span>&nbsp;<span class="ident" id="3151304">pattern</span>&nbsp;<span class="builtintype" id="3151312">string</span><span class="op" id="3151318">,</span>&nbsp;<span class="ident" id="3151320">matches</span>&nbsp;<span class="op" id="3151328">[</span><span class="op" id="3151329">]</span><span class="builtintype" id="3151330">string</span><span class="op" id="3151336">)</span>&nbsp;<span class="op" id="3151338">(</span><span class="ident" id="3151339">m</span>&nbsp;<span class="op" id="3151341">[</span><span class="op" id="3151342">]</span><span class="builtintype" id="3151343">string</span><span class="op" id="3151349">,</span>&nbsp;<span class="ident" id="3151351">e</span>&nbsp;<span class="builtintype" id="3151353">error</span><span class="op" id="3151358">)</span>&nbsp;<span class="op" id="3151360">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151363">m</span>&nbsp;<span class="op" id="3151365">=</span>&nbsp;<span class="ident" id="3151367">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151376">fi</span><span class="op" id="3151378">,</span>&nbsp;<span class="ident" id="3151380">err</span>&nbsp;<span class="op" id="3151384">:=</span>&nbsp;<span class="ident" id="3151387">os</span><span class="op" id="3151389">.</span><span class="ident" id="3151390">Stat</span><span class="op" id="3151394">(</span><span class="ident" id="3151395">dir</span><span class="op" id="3151398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151401">if</span>&nbsp;<span class="ident" id="3151404">err</span>&nbsp;<span class="op" id="3151408">!=</span>&nbsp;<span class="builtintype" id="3151411">nil</span>&nbsp;<span class="op" id="3151415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151419">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151427">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151430">if</span>&nbsp;<span class="op" id="3151433">!</span><span class="ident" id="3151434">fi</span><span class="op" id="3151436">.</span><span class="ident" id="3151437">IsDir</span><span class="op" id="3151442">(</span><span class="op" id="3151443">)</span>&nbsp;<span class="op" id="3151445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151449">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151460">d</span><span class="op" id="3151461">,</span>&nbsp;<span class="ident" id="3151463">err</span>&nbsp;<span class="op" id="3151467">:=</span>&nbsp;<span class="ident" id="3151470">os</span><span class="op" id="3151472">.</span><span class="ident" id="3151473">Open</span><span class="op" id="3151477">(</span><span class="ident" id="3151478">dir</span><span class="op" id="3151481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151484">if</span>&nbsp;<span class="ident" id="3151487">err</span>&nbsp;<span class="op" id="3151491">!=</span>&nbsp;<span class="builtintype" id="3151494">nil</span>&nbsp;<span class="op" id="3151498">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151502">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151513">defer</span>&nbsp;<span class="ident" id="3151519">d</span><span class="op" id="3151520">.</span><span class="ident" id="3151521">Close</span><span class="op" id="3151526">(</span><span class="op" id="3151527">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151531">names</span><span class="op" id="3151536">,</span>&nbsp;<span class="ident" id="3151538">_</span>&nbsp;<span class="op" id="3151540">:=</span>&nbsp;<span class="ident" id="3151543">d</span><span class="op" id="3151544">.</span><span class="ident" id="3151545">Readdirnames</span><span class="op" id="3151557">(</span><span class="op" id="3151558">-</span><span class="num" id="3151559">1</span><span class="op" id="3151560">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151563">sort</span><span class="op" id="3151567">.</span><span class="ident" id="3151568">Strings</span><span class="op" id="3151575">(</span><span class="ident" id="3151576">names</span><span class="op" id="3151581">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151585">for</span>&nbsp;<span class="ident" id="3151589">_</span><span class="op" id="3151590">,</span>&nbsp;<span class="ident" id="3151592">n</span>&nbsp;<span class="op" id="3151594">:=</span>&nbsp;<span class="keyword" id="3151597">range</span>&nbsp;<span class="ident" id="3151603">names</span>&nbsp;<span class="op" id="3151609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151613">matched</span><span class="op" id="3151620">,</span>&nbsp;<span class="ident" id="3151622">err</span>&nbsp;<span class="op" id="3151626">:=</span>&nbsp;<span class="ident" id="3151629">Match</span><span class="op" id="3151634">(</span><span class="ident" id="3151635">pattern</span><span class="op" id="3151642">,</span>&nbsp;<span class="ident" id="3151644">n</span><span class="op" id="3151645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151649">if</span>&nbsp;<span class="ident" id="3151652">err</span>&nbsp;<span class="op" id="3151656">!=</span>&nbsp;<span class="builtintype" id="3151659">nil</span>&nbsp;<span class="op" id="3151663">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151668">return</span>&nbsp;<span class="ident" id="3151675">m</span><span class="op" id="3151676">,</span>&nbsp;<span class="ident" id="3151678">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151688">if</span>&nbsp;<span class="ident" id="3151691">matched</span>&nbsp;<span class="op" id="3151699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3151704">m</span>&nbsp;<span class="op" id="3151706">=</span>&nbsp;<span class="builtinfunc" id="3151708">append</span><span class="op" id="3151714">(</span><span class="ident" id="3151715">m</span><span class="op" id="3151716">,</span>&nbsp;<span class="ident" id="3151718">Join</span><span class="op" id="3151722">(</span><span class="ident" id="3151723">dir</span><span class="op" id="3151726">,</span>&nbsp;<span class="ident" id="3151728">n</span><span class="op" id="3151729">)</span><span class="op" id="3151730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151734">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3151737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151740">return</span><br>
<span class="lineno"></span><span class="op" id="3151747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3151750">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3151819">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3151843">func</span>&nbsp;<span class="ident" id="3151848">hasMeta</span><span class="op" id="3151855">(</span><span class="ident" id="3151856">path</span>&nbsp;<span class="builtintype" id="3151861">string</span><span class="op" id="3151867">)</span>&nbsp;<span class="builtintype" id="3151869">bool</span>&nbsp;<span class="op" id="3151874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3151877">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3151942">return</span>&nbsp;<span class="ident" id="3151949">strings</span><span class="op" id="3151956">.</span><span class="ident" id="3151957">IndexAny</span><span class="op" id="3151965">(</span><span class="ident" id="3151966">path</span><span class="op" id="3151970">,</span>&nbsp;<span class="string" id="3151972">&#34;*?[&#34;</span><span class="op" id="3151977">)</span>&nbsp;<span class="op" id="3151979">&gt;=</span>&nbsp;<span class="num" id="3151982">0</span><br>
<span class="lineno"></span><span class="op" id="3151984">}</span>
</div>
</body>
</html>
