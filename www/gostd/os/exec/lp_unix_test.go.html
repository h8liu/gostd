<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html" class="current">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7436745">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7436801">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7436855">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7436906">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7436971">package</span>&nbsp;<span class="ident" id="7436979">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7436985">import</span>&nbsp;<span class="op" id="7436992">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7436995">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7437008">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7437014">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7437024">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7437027">func</span>&nbsp;<span class="ident" id="7437032">TestLookPathUnixEmptyPath</span><span class="op" id="7437057">(</span><span class="ident" id="7437058">t</span>&nbsp;<span class="op" id="7437060">*</span><span class="ident" id="7437061"><a href="/gostd/os/exec/lp_unix_test.go.html#7437014">testing</a></span><span class="op" id="7437068">.</span><span class="ident" id="7437069"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7437070">)</span>&nbsp;<span class="op" id="7437072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437075">tmp</span><span class="op" id="7437078">,</span>&nbsp;<span class="ident" id="7437080">err</span>&nbsp;<span class="op" id="7437084">:=</span>&nbsp;<span class="ident" id="7437087"><a href="/gostd/os/exec/lp_unix_test.go.html#7436995">ioutil</a></span><span class="op" id="7437093">.</span><span class="ident" id="7437094"><a href="/gostd/io/ioutil/tempfile.go.html#3770600">TempDir</a></span><span class="op" id="7437101">(</span><span class="string" id="7437102">&#34;&#34;</span><span class="op" id="7437104">,</span>&nbsp;<span class="string" id="7437106">&#34;TestLookPathUnixEmptyPath&#34;</span><span class="op" id="7437133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437136">if</span>&nbsp;<span class="ident" id="7437139"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437143">!=</span>&nbsp;<span class="builtintype" id="7437146">nil</span>&nbsp;<span class="op" id="7437150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437154"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437155">.</span><span class="ident" id="7437156"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437161">(</span><span class="string" id="7437162">&#34;TempDir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7437180">,</span>&nbsp;<span class="ident" id="7437182"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span><span class="op" id="7437185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437188">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437191">defer</span>&nbsp;<span class="ident" id="7437197"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437199">.</span><span class="ident" id="7437200"><a href="/gostd/os/path.go.html#2465635">RemoveAll</a></span><span class="op" id="7437209">(</span><span class="ident" id="7437210"><a href="/gostd/os/exec/lp_unix_test.go.html#7437075">tmp</a></span><span class="op" id="7437213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437216">wd</span><span class="op" id="7437218">,</span>&nbsp;<span class="ident" id="7437220"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437224">:=</span>&nbsp;<span class="ident" id="7437227"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437229">.</span><span class="ident" id="7437230"><a href="/gostd/os/getwd.go.html#2462017">Getwd</a></span><span class="op" id="7437235">(</span><span class="op" id="7437236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437239">if</span>&nbsp;<span class="ident" id="7437242"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437246">!=</span>&nbsp;<span class="builtintype" id="7437249">nil</span>&nbsp;<span class="op" id="7437253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437257"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437258">.</span><span class="ident" id="7437259"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437264">(</span><span class="string" id="7437265">&#34;Getwd&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7437281">,</span>&nbsp;<span class="ident" id="7437283"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span><span class="op" id="7437286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437289">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437292"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437296">=</span>&nbsp;<span class="ident" id="7437298"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437300">.</span><span class="ident" id="7437301"><a href="/gostd/os/file.go.html#2446198">Chdir</a></span><span class="op" id="7437306">(</span><span class="ident" id="7437307"><a href="/gostd/os/exec/lp_unix_test.go.html#7437075">tmp</a></span><span class="op" id="7437310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437313">if</span>&nbsp;<span class="ident" id="7437316"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437320">!=</span>&nbsp;<span class="builtintype" id="7437323">nil</span>&nbsp;<span class="op" id="7437327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437331"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437332">.</span><span class="ident" id="7437333"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437338">(</span><span class="string" id="7437339">&#34;Chdir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7437355">,</span>&nbsp;<span class="ident" id="7437357"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span><span class="op" id="7437360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437366">defer</span>&nbsp;<span class="ident" id="7437372"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437374">.</span><span class="ident" id="7437375"><a href="/gostd/os/file.go.html#2446198">Chdir</a></span><span class="op" id="7437380">(</span><span class="ident" id="7437381"><a href="/gostd/os/exec/lp_unix_test.go.html#7437216">wd</a></span><span class="op" id="7437383">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437387">f</span><span class="op" id="7437388">,</span>&nbsp;<span class="ident" id="7437390"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437394">:=</span>&nbsp;<span class="ident" id="7437397"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437399">.</span><span class="ident" id="7437400"><a href="/gostd/os/file_unix.go.html#2454095">OpenFile</a></span><span class="op" id="7437408">(</span><span class="string" id="7437409">&#34;exec_me&#34;</span><span class="op" id="7437418">,</span>&nbsp;<span class="ident" id="7437420"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437422">.</span><span class="ident" id="7437423"><a href="/gostd/os/file.go.html#2442313">O_CREATE</a></span><span class="op" id="7437431">|</span><span class="ident" id="7437432"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437434">.</span><span class="ident" id="7437435"><a href="/gostd/os/file.go.html#2442383">O_EXCL</a></span><span class="op" id="7437441">,</span>&nbsp;<span class="num" id="7437443">0700</span><span class="op" id="7437447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437450">if</span>&nbsp;<span class="ident" id="7437453"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437457">!=</span>&nbsp;<span class="builtintype" id="7437460">nil</span>&nbsp;<span class="op" id="7437464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437468"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437469">.</span><span class="ident" id="7437470"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437475">(</span><span class="string" id="7437476">&#34;OpenFile&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7437495">,</span>&nbsp;<span class="ident" id="7437497"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span><span class="op" id="7437500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437503">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437506"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437510">=</span>&nbsp;<span class="ident" id="7437512"><a href="/gostd/os/exec/lp_unix_test.go.html#7437387">f</a></span><span class="op" id="7437513">.</span><span class="ident" id="7437514"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7437519">(</span><span class="op" id="7437520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437523">if</span>&nbsp;<span class="ident" id="7437526"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437530">!=</span>&nbsp;<span class="builtintype" id="7437533">nil</span>&nbsp;<span class="op" id="7437537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437541"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437542">.</span><span class="ident" id="7437543"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437548">(</span><span class="string" id="7437549">&#34;Close&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7437565">,</span>&nbsp;<span class="ident" id="7437567"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span><span class="op" id="7437570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437577">pathenv</span>&nbsp;<span class="op" id="7437585">:=</span>&nbsp;<span class="ident" id="7437588"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437590">.</span><span class="ident" id="7437591"><a href="/gostd/os/env.go.html#2429715">Getenv</a></span><span class="op" id="7437597">(</span><span class="string" id="7437598">&#34;PATH&#34;</span><span class="op" id="7437604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437607">defer</span>&nbsp;<span class="ident" id="7437613"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437615">.</span><span class="ident" id="7437616"><a href="/gostd/os/env.go.html#2429893">Setenv</a></span><span class="op" id="7437622">(</span><span class="string" id="7437623">&#34;PATH&#34;</span><span class="op" id="7437629">,</span>&nbsp;<span class="ident" id="7437631"><a href="/gostd/os/exec/lp_unix_test.go.html#7437577">pathenv</a></span><span class="op" id="7437638">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437642"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437646">=</span>&nbsp;<span class="ident" id="7437648"><a href="/gostd/os/exec/lp_unix_test.go.html#7437008">os</a></span><span class="op" id="7437650">.</span><span class="ident" id="7437651"><a href="/gostd/os/env.go.html#2429893">Setenv</a></span><span class="op" id="7437657">(</span><span class="string" id="7437658">&#34;PATH&#34;</span><span class="op" id="7437664">,</span>&nbsp;<span class="string" id="7437666">&#34;&#34;</span><span class="op" id="7437668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437671">if</span>&nbsp;<span class="ident" id="7437674"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437678">!=</span>&nbsp;<span class="builtintype" id="7437681">nil</span>&nbsp;<span class="op" id="7437685">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437689"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437690">.</span><span class="ident" id="7437691"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437696">(</span><span class="string" id="7437697">&#34;Setenv&nbsp;failed:&nbsp;&#34;</span><span class="op" id="7437714">,</span>&nbsp;<span class="ident" id="7437716"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span><span class="op" id="7437719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437726">path</span><span class="op" id="7437730">,</span>&nbsp;<span class="ident" id="7437732"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437736">:=</span>&nbsp;<span class="ident" id="7437739"><a href="/gostd/os/exec/lp_unix.go.html#5591524">LookPath</a></span><span class="op" id="7437747">(</span><span class="string" id="7437748">&#34;exec_me&#34;</span><span class="op" id="7437757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437760">if</span>&nbsp;<span class="ident" id="7437763"><a href="/gostd/os/exec/lp_unix_test.go.html#7437080">err</a></span>&nbsp;<span class="op" id="7437767">==</span>&nbsp;<span class="builtintype" id="7437770">nil</span>&nbsp;<span class="op" id="7437774">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437778"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437779">.</span><span class="ident" id="7437780"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7437785">(</span><span class="string" id="7437786">&#34;LookPath&nbsp;found&nbsp;exec_me&nbsp;in&nbsp;empty&nbsp;$PATH&#34;</span><span class="op" id="7437825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437831">if</span>&nbsp;<span class="ident" id="7437834"><a href="/gostd/os/exec/lp_unix_test.go.html#7437726">path</a></span>&nbsp;<span class="op" id="7437839">!=</span>&nbsp;<span class="string" id="7437842">&#34;&#34;</span>&nbsp;<span class="op" id="7437845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437849"><a href="/gostd/os/exec/lp_unix_test.go.html#7437058">t</a></span><span class="op" id="7437850">.</span><span class="ident" id="7437851"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7437857">(</span><span class="string" id="7437858">&#34;LookPath&nbsp;path&nbsp;==&nbsp;%q&nbsp;when&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="7437895">,</span>&nbsp;<span class="ident" id="7437897"><a href="/gostd/os/exec/lp_unix_test.go.html#7437726">path</a></span><span class="op" id="7437901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437904">}</span><br>
<span class="lineno">55</span><span class="op" id="7437906">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
