<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html" class="current">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2014610">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2014666">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2014720">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2014771">package</span>&nbsp;<span class="ident" id="2014779">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2014786">import</span>&nbsp;<span class="op" id="2014793">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2014796">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2014803">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2014813">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2014816">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="2014887">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="2014955">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2015021">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="2015089">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2015129">type</span>&nbsp;<span class="ident" id="2015134">typeUnit</span>&nbsp;<span class="keyword" id="2015143">struct</span>&nbsp;<span class="op" id="2015150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015153">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015159">toff</span>&nbsp;&nbsp;<span class="ident" id="2015165">Offset</span>&nbsp;<span class="comment" id="2015172">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015214">name</span>&nbsp;&nbsp;<span class="builtintype" id="2015220">string</span>&nbsp;<span class="comment" id="2015227">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015260">cache</span>&nbsp;<span class="ident" id="2015266">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2015273">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="2015306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="2015309">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="2015342">func</span>&nbsp;<span class="op" id="2015347">(</span><span class="ident" id="2015348">d</span>&nbsp;<span class="op" id="2015350">*</span><span class="ident" id="2015351">Data</span><span class="op" id="2015355">)</span>&nbsp;<span class="ident" id="2015357">parseTypes</span><span class="op" id="2015367">(</span><span class="ident" id="2015368">name</span>&nbsp;<span class="builtintype" id="2015373">string</span><span class="op" id="2015379">,</span>&nbsp;<span class="ident" id="2015381">types</span>&nbsp;<span class="op" id="2015387">[</span><span class="op" id="2015388">]</span><span class="builtintype" id="2015389">byte</span><span class="op" id="2015393">)</span>&nbsp;<span class="builtintype" id="2015395">error</span>&nbsp;<span class="op" id="2015401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015404">b</span>&nbsp;<span class="op" id="2015406">:=</span>&nbsp;<span class="ident" id="2015409">makeBuf</span><span class="op" id="2015416">(</span><span class="ident" id="2015417">d</span><span class="op" id="2015418">,</span>&nbsp;<span class="ident" id="2015420">unknownFormat</span><span class="op" id="2015433">{</span><span class="op" id="2015434">}</span><span class="op" id="2015435">,</span>&nbsp;<span class="ident" id="2015437">name</span><span class="op" id="2015441">,</span>&nbsp;<span class="num" id="2015443">0</span><span class="op" id="2015444">,</span>&nbsp;<span class="ident" id="2015446">types</span><span class="op" id="2015451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015454">for</span>&nbsp;<span class="builtinfunc" id="2015458">len</span><span class="op" id="2015461">(</span><span class="ident" id="2015462">b</span><span class="op" id="2015463">.</span><span class="ident" id="2015464">data</span><span class="op" id="2015468">)</span>&nbsp;<span class="op" id="2015470">&gt;</span>&nbsp;<span class="num" id="2015472">0</span>&nbsp;<span class="op" id="2015474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015478">base</span>&nbsp;<span class="op" id="2015483">:=</span>&nbsp;<span class="ident" id="2015486">b</span><span class="op" id="2015487">.</span><span class="ident" id="2015488">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015494">dwarf64</span>&nbsp;<span class="op" id="2015502">:=</span>&nbsp;<span class="builtintype" id="2015505">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015513">n</span>&nbsp;<span class="op" id="2015515">:=</span>&nbsp;<span class="ident" id="2015518">b</span><span class="op" id="2015519">.</span><span class="builtintype" id="2015520">uint32</span><span class="op" id="2015526">(</span><span class="op" id="2015527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015531">if</span>&nbsp;<span class="ident" id="2015534">n</span>&nbsp;<span class="op" id="2015536">==</span>&nbsp;<span class="num" id="2015539">0xffffffff</span>&nbsp;<span class="op" id="2015550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015555">n64</span>&nbsp;<span class="op" id="2015559">:=</span>&nbsp;<span class="ident" id="2015562">b</span><span class="op" id="2015563">.</span><span class="ident" id="2015564">uint64</span><span class="op" id="2015570">(</span><span class="op" id="2015571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015576">if</span>&nbsp;<span class="ident" id="2015579">n64</span>&nbsp;<span class="op" id="2015583">!=</span>&nbsp;<span class="ident" id="2015586">uint64</span><span class="op" id="2015592">(</span><span class="builtintype" id="2015593">uint32</span><span class="op" id="2015599">(</span><span class="ident" id="2015600">n64</span><span class="op" id="2015603">)</span><span class="op" id="2015604">)</span>&nbsp;<span class="op" id="2015606">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015612">b</span><span class="op" id="2015613">.</span><span class="builtintype" id="2015614">error</span><span class="op" id="2015619">(</span><span class="string" id="2015620">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="2015647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015653">return</span>&nbsp;<span class="ident" id="2015660">b</span><span class="op" id="2015661">.</span><span class="ident" id="2015662">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2015669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015674">n</span>&nbsp;<span class="op" id="2015676">=</span>&nbsp;<span class="builtintype" id="2015678">uint32</span><span class="op" id="2015684">(</span><span class="ident" id="2015685">n64</span><span class="op" id="2015688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015693">dwarf64</span>&nbsp;<span class="op" id="2015701">=</span>&nbsp;<span class="builtintype" id="2015703">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2015710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015714">hdroff</span>&nbsp;<span class="op" id="2015721">:=</span>&nbsp;<span class="ident" id="2015724">b</span><span class="op" id="2015725">.</span><span class="ident" id="2015726">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015732">vers</span>&nbsp;<span class="op" id="2015737">:=</span>&nbsp;<span class="ident" id="2015740">b</span><span class="op" id="2015741">.</span><span class="builtintype" id="2015742">uint16</span><span class="op" id="2015748">(</span><span class="op" id="2015749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015753">if</span>&nbsp;<span class="ident" id="2015756">vers</span>&nbsp;<span class="op" id="2015761">!=</span>&nbsp;<span class="num" id="2015764">4</span>&nbsp;<span class="op" id="2015766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015771">b</span><span class="op" id="2015772">.</span><span class="builtintype" id="2015773">error</span><span class="op" id="2015778">(</span><span class="string" id="2015779">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="2015808">+</span>&nbsp;<span class="ident" id="2015810">strconv</span><span class="op" id="2015817">.</span><span class="ident" id="2015818">Itoa</span><span class="op" id="2015822">(</span><span class="builtintype" id="2015823">int</span><span class="op" id="2015826">(</span><span class="ident" id="2015827">vers</span><span class="op" id="2015831">)</span><span class="op" id="2015832">)</span><span class="op" id="2015833">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015838">return</span>&nbsp;<span class="ident" id="2015845">b</span><span class="op" id="2015846">.</span><span class="ident" id="2015847">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2015853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015857">var</span>&nbsp;<span class="ident" id="2015861">ao</span>&nbsp;<span class="builtintype" id="2015864">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015873">if</span>&nbsp;<span class="op" id="2015876">!</span><span class="ident" id="2015877">dwarf64</span>&nbsp;<span class="op" id="2015885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015890">ao</span>&nbsp;<span class="op" id="2015893">=</span>&nbsp;<span class="ident" id="2015895">b</span><span class="op" id="2015896">.</span><span class="builtintype" id="2015897">uint32</span><span class="op" id="2015903">(</span><span class="op" id="2015904">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2015908">}</span>&nbsp;<span class="keyword" id="2015910">else</span>&nbsp;<span class="op" id="2015915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015920">ao64</span>&nbsp;<span class="op" id="2015925">:=</span>&nbsp;<span class="ident" id="2015928">b</span><span class="op" id="2015929">.</span><span class="ident" id="2015930">uint64</span><span class="op" id="2015936">(</span><span class="op" id="2015937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2015942">if</span>&nbsp;<span class="ident" id="2015945">ao64</span>&nbsp;<span class="op" id="2015950">!=</span>&nbsp;<span class="ident" id="2015953">uint64</span><span class="op" id="2015959">(</span><span class="builtintype" id="2015960">uint32</span><span class="op" id="2015966">(</span><span class="ident" id="2015967">ao64</span><span class="op" id="2015971">)</span><span class="op" id="2015972">)</span>&nbsp;<span class="op" id="2015974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2015980">b</span><span class="op" id="2015981">.</span><span class="builtintype" id="2015982">error</span><span class="op" id="2015987">(</span><span class="string" id="2015988">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="2016022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016028">return</span>&nbsp;<span class="ident" id="2016035">b</span><span class="op" id="2016036">.</span><span class="ident" id="2016037">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016049">ao</span>&nbsp;<span class="op" id="2016052">=</span>&nbsp;<span class="builtintype" id="2016054">uint32</span><span class="op" id="2016060">(</span><span class="ident" id="2016061">ao64</span><span class="op" id="2016065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016073">atable</span><span class="op" id="2016079">,</span>&nbsp;<span class="ident" id="2016081">err</span>&nbsp;<span class="op" id="2016085">:=</span>&nbsp;<span class="ident" id="2016088">d</span><span class="op" id="2016089">.</span><span class="ident" id="2016090">parseAbbrev</span><span class="op" id="2016101">(</span><span class="ident" id="2016102">ao</span><span class="op" id="2016104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016108">if</span>&nbsp;<span class="ident" id="2016111">err</span>&nbsp;<span class="op" id="2016115">!=</span>&nbsp;<span class="ident" id="2016118">nil</span>&nbsp;<span class="op" id="2016122">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016127">return</span>&nbsp;<span class="ident" id="2016134">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016144">asize</span>&nbsp;<span class="op" id="2016150">:=</span>&nbsp;<span class="ident" id="2016153">b</span><span class="op" id="2016154">.</span><span class="builtintype" id="2016155">uint8</span><span class="op" id="2016160">(</span><span class="op" id="2016161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016165">sig</span>&nbsp;<span class="op" id="2016169">:=</span>&nbsp;<span class="ident" id="2016172">b</span><span class="op" id="2016173">.</span><span class="ident" id="2016174">uint64</span><span class="op" id="2016180">(</span><span class="op" id="2016181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016186">var</span>&nbsp;<span class="ident" id="2016190">toff</span>&nbsp;<span class="builtintype" id="2016195">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016204">if</span>&nbsp;<span class="op" id="2016207">!</span><span class="ident" id="2016208">dwarf64</span>&nbsp;<span class="op" id="2016216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016221">toff</span>&nbsp;<span class="op" id="2016226">=</span>&nbsp;<span class="ident" id="2016228">b</span><span class="op" id="2016229">.</span><span class="builtintype" id="2016230">uint32</span><span class="op" id="2016236">(</span><span class="op" id="2016237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016241">}</span>&nbsp;<span class="keyword" id="2016243">else</span>&nbsp;<span class="op" id="2016248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016253">to64</span>&nbsp;<span class="op" id="2016258">:=</span>&nbsp;<span class="ident" id="2016261">b</span><span class="op" id="2016262">.</span><span class="ident" id="2016263">uint64</span><span class="op" id="2016269">(</span><span class="op" id="2016270">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016275">if</span>&nbsp;<span class="ident" id="2016278">to64</span>&nbsp;<span class="op" id="2016283">!=</span>&nbsp;<span class="ident" id="2016286">uint64</span><span class="op" id="2016292">(</span><span class="builtintype" id="2016293">uint32</span><span class="op" id="2016299">(</span><span class="ident" id="2016300">to64</span><span class="op" id="2016304">)</span><span class="op" id="2016305">)</span>&nbsp;<span class="op" id="2016307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016313">b</span><span class="op" id="2016314">.</span><span class="builtintype" id="2016315">error</span><span class="op" id="2016320">(</span><span class="string" id="2016321">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="2016353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016359">return</span>&nbsp;<span class="ident" id="2016366">b</span><span class="op" id="2016367">.</span><span class="ident" id="2016368">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016380">toff</span>&nbsp;<span class="op" id="2016385">=</span>&nbsp;<span class="builtintype" id="2016387">uint32</span><span class="op" id="2016393">(</span><span class="ident" id="2016394">to64</span><span class="op" id="2016398">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016407">boff</span>&nbsp;<span class="op" id="2016412">:=</span>&nbsp;<span class="ident" id="2016415">b</span><span class="op" id="2016416">.</span><span class="ident" id="2016417">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016423">d</span><span class="op" id="2016424">.</span><span class="ident" id="2016425">typeSigs</span><span class="op" id="2016433">[</span><span class="ident" id="2016434">sig</span><span class="op" id="2016437">]</span>&nbsp;<span class="op" id="2016439">=</span>&nbsp;<span class="op" id="2016441">&amp;</span><span class="ident" id="2016442">typeUnit</span><span class="op" id="2016450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016455">unit</span><span class="op" id="2016459">:</span>&nbsp;<span class="ident" id="2016461">unit</span><span class="op" id="2016465">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016471">base</span><span class="op" id="2016475">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2016479">base</span><span class="op" id="2016483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016489">off</span><span class="op" id="2016492">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016497">boff</span><span class="op" id="2016501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016507">data</span><span class="op" id="2016511">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2016515">b</span><span class="op" id="2016516">.</span><span class="ident" id="2016517">bytes</span><span class="op" id="2016522">(</span><span class="builtintype" id="2016523">int</span><span class="op" id="2016526">(</span><span class="ident" id="2016527">Offset</span><span class="op" id="2016533">(</span><span class="ident" id="2016534">n</span><span class="op" id="2016535">)</span>&nbsp;<span class="op" id="2016537">-</span>&nbsp;<span class="op" id="2016539">(</span><span class="ident" id="2016540">b</span><span class="op" id="2016541">.</span><span class="ident" id="2016542">off</span>&nbsp;<span class="op" id="2016546">-</span>&nbsp;<span class="ident" id="2016548">hdroff</span><span class="op" id="2016554">)</span><span class="op" id="2016555">)</span><span class="op" id="2016556">)</span><span class="op" id="2016557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016563">atable</span><span class="op" id="2016569">:</span>&nbsp;<span class="ident" id="2016571">atable</span><span class="op" id="2016577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016583">asize</span><span class="op" id="2016588">:</span>&nbsp;&nbsp;<span class="builtintype" id="2016591">int</span><span class="op" id="2016594">(</span><span class="ident" id="2016595">asize</span><span class="op" id="2016600">)</span><span class="op" id="2016601">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016607">vers</span><span class="op" id="2016611">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2016615">int</span><span class="op" id="2016618">(</span><span class="ident" id="2016619">vers</span><span class="op" id="2016623">)</span><span class="op" id="2016624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016630">is64</span><span class="op" id="2016634">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2016638">dwarf64</span><span class="op" id="2016645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016650">}</span><span class="op" id="2016651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016656">toff</span><span class="op" id="2016660">:</span>&nbsp;<span class="ident" id="2016662">Offset</span><span class="op" id="2016668">(</span><span class="ident" id="2016669">toff</span><span class="op" id="2016673">)</span><span class="op" id="2016674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016679">name</span><span class="op" id="2016683">:</span>&nbsp;<span class="ident" id="2016685">name</span><span class="op" id="2016689">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016697">if</span>&nbsp;<span class="ident" id="2016700">b</span><span class="op" id="2016701">.</span><span class="ident" id="2016702">err</span>&nbsp;<span class="op" id="2016706">!=</span>&nbsp;<span class="ident" id="2016709">nil</span>&nbsp;<span class="op" id="2016713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016718">return</span>&nbsp;<span class="ident" id="2016725">b</span><span class="op" id="2016726">.</span><span class="ident" id="2016727">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016736">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016739">return</span>&nbsp;<span class="ident" id="2016746">nil</span><br>
<span class="lineno"></span><span class="op" id="2016750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2016753">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="2016794">func</span>&nbsp;<span class="op" id="2016799">(</span><span class="ident" id="2016800">d</span>&nbsp;<span class="op" id="2016802">*</span><span class="ident" id="2016803">Data</span><span class="op" id="2016807">)</span>&nbsp;<span class="ident" id="2016809">sigToType</span><span class="op" id="2016818">(</span><span class="ident" id="2016819">sig</span>&nbsp;<span class="ident" id="2016823">uint64</span><span class="op" id="2016829">)</span>&nbsp;<span class="op" id="2016831">(</span><span class="ident" id="2016832">Type</span><span class="op" id="2016836">,</span>&nbsp;<span class="builtintype" id="2016838">error</span><span class="op" id="2016843">)</span>&nbsp;<span class="op" id="2016845">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2016848">tu</span>&nbsp;<span class="op" id="2016851">:=</span>&nbsp;<span class="ident" id="2016854">d</span><span class="op" id="2016855">.</span><span class="ident" id="2016856">typeSigs</span><span class="op" id="2016864">[</span><span class="ident" id="2016865">sig</span><span class="op" id="2016868">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016871">if</span>&nbsp;<span class="ident" id="2016874">tu</span>&nbsp;<span class="op" id="2016877">==</span>&nbsp;<span class="ident" id="2016880">nil</span>&nbsp;<span class="op" id="2016884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016888">return</span>&nbsp;<span class="ident" id="2016895">nil</span><span class="op" id="2016898">,</span>&nbsp;<span class="ident" id="2016900">fmt</span><span class="op" id="2016903">.</span><span class="ident" id="2016904">Errorf</span><span class="op" id="2016910">(</span><span class="string" id="2016911">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="2016943">,</span>&nbsp;<span class="ident" id="2016945">sig</span><span class="op" id="2016948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016954">if</span>&nbsp;<span class="ident" id="2016957">tu</span><span class="op" id="2016959">.</span><span class="ident" id="2016960">cache</span>&nbsp;<span class="op" id="2016966">!=</span>&nbsp;<span class="ident" id="2016969">nil</span>&nbsp;<span class="op" id="2016973">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2016977">return</span>&nbsp;<span class="ident" id="2016984">tu</span><span class="op" id="2016986">.</span><span class="ident" id="2016987">cache</span><span class="op" id="2016992">,</span>&nbsp;<span class="ident" id="2016994">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2016999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017003">b</span>&nbsp;<span class="op" id="2017005">:=</span>&nbsp;<span class="ident" id="2017008">makeBuf</span><span class="op" id="2017015">(</span><span class="ident" id="2017016">d</span><span class="op" id="2017017">,</span>&nbsp;<span class="ident" id="2017019">tu</span><span class="op" id="2017021">,</span>&nbsp;<span class="ident" id="2017023">tu</span><span class="op" id="2017025">.</span><span class="ident" id="2017026">name</span><span class="op" id="2017030">,</span>&nbsp;<span class="ident" id="2017032">tu</span><span class="op" id="2017034">.</span><span class="ident" id="2017035">off</span><span class="op" id="2017038">,</span>&nbsp;<span class="ident" id="2017040">tu</span><span class="op" id="2017042">.</span><span class="ident" id="2017043">data</span><span class="op" id="2017047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017050">r</span>&nbsp;<span class="op" id="2017052">:=</span>&nbsp;<span class="op" id="2017055">&amp;</span><span class="ident" id="2017056">typeUnitReader</span><span class="op" id="2017070">{</span><span class="ident" id="2017071">d</span><span class="op" id="2017072">:</span>&nbsp;<span class="ident" id="2017074">d</span><span class="op" id="2017075">,</span>&nbsp;<span class="ident" id="2017077">tu</span><span class="op" id="2017079">:</span>&nbsp;<span class="ident" id="2017081">tu</span><span class="op" id="2017083">,</span>&nbsp;<span class="ident" id="2017085">b</span><span class="op" id="2017086">:</span>&nbsp;<span class="ident" id="2017088">b</span><span class="op" id="2017089">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017092">t</span><span class="op" id="2017093">,</span>&nbsp;<span class="ident" id="2017095">err</span>&nbsp;<span class="op" id="2017099">:=</span>&nbsp;<span class="ident" id="2017102">d</span><span class="op" id="2017103">.</span><span class="ident" id="2017104">readType</span><span class="op" id="2017112">(</span><span class="ident" id="2017113">tu</span><span class="op" id="2017115">.</span><span class="ident" id="2017116">name</span><span class="op" id="2017120">,</span>&nbsp;<span class="ident" id="2017122">r</span><span class="op" id="2017123">,</span>&nbsp;<span class="ident" id="2017125">Offset</span><span class="op" id="2017131">(</span><span class="ident" id="2017132">tu</span><span class="op" id="2017134">.</span><span class="ident" id="2017135">toff</span><span class="op" id="2017139">)</span><span class="op" id="2017140">,</span>&nbsp;<span class="builtinfunc" id="2017142">make</span><span class="op" id="2017146">(</span><span class="keyword" id="2017147">map</span><span class="op" id="2017150">[</span><span class="ident" id="2017151">Offset</span><span class="op" id="2017157">]</span><span class="ident" id="2017158">Type</span><span class="op" id="2017162">)</span><span class="op" id="2017163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017166">if</span>&nbsp;<span class="ident" id="2017169">err</span>&nbsp;<span class="op" id="2017173">!=</span>&nbsp;<span class="ident" id="2017176">nil</span>&nbsp;<span class="op" id="2017180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017184">return</span>&nbsp;<span class="ident" id="2017191">nil</span><span class="op" id="2017194">,</span>&nbsp;<span class="ident" id="2017196">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2017201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017205">tu</span><span class="op" id="2017207">.</span><span class="ident" id="2017208">cache</span>&nbsp;<span class="op" id="2017214">=</span>&nbsp;<span class="ident" id="2017216">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017219">return</span>&nbsp;<span class="ident" id="2017226">t</span><span class="op" id="2017227">,</span>&nbsp;<span class="ident" id="2017229">nil</span><br>
<span class="lineno"></span><span class="op" id="2017233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2017236">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="2017289">type</span>&nbsp;<span class="ident" id="2017294">typeUnitReader</span>&nbsp;<span class="keyword" id="2017309">struct</span>&nbsp;<span class="op" id="2017316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017319">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2017323">*</span><span class="ident" id="2017324">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017330">tu</span>&nbsp;&nbsp;<span class="op" id="2017334">*</span><span class="ident" id="2017335">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017345">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2017349">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017354">err</span>&nbsp;<span class="builtintype" id="2017358">error</span><br>
<span class="lineno">125</span><span class="op" id="2017364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2017367">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2017411">func</span>&nbsp;<span class="op" id="2017416">(</span><span class="ident" id="2017417">tur</span>&nbsp;<span class="op" id="2017421">*</span><span class="ident" id="2017422">typeUnitReader</span><span class="op" id="2017436">)</span>&nbsp;<span class="ident" id="2017438">Seek</span><span class="op" id="2017442">(</span><span class="ident" id="2017443">off</span>&nbsp;<span class="ident" id="2017447">Offset</span><span class="op" id="2017453">)</span>&nbsp;<span class="op" id="2017455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017458">tur</span><span class="op" id="2017461">.</span><span class="ident" id="2017462">err</span>&nbsp;<span class="op" id="2017466">=</span>&nbsp;<span class="ident" id="2017468">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017473">doff</span>&nbsp;<span class="op" id="2017478">:=</span>&nbsp;<span class="ident" id="2017481">off</span>&nbsp;<span class="op" id="2017485">-</span>&nbsp;<span class="ident" id="2017487">tur</span><span class="op" id="2017490">.</span><span class="ident" id="2017491">tu</span><span class="op" id="2017493">.</span><span class="ident" id="2017494">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017499">if</span>&nbsp;<span class="ident" id="2017502">doff</span>&nbsp;<span class="op" id="2017507">&lt;</span>&nbsp;<span class="num" id="2017509">0</span>&nbsp;<span class="op" id="2017511">||</span>&nbsp;<span class="ident" id="2017514">doff</span>&nbsp;<span class="op" id="2017519">&gt;=</span>&nbsp;<span class="ident" id="2017522">Offset</span><span class="op" id="2017528">(</span><span class="builtinfunc" id="2017529">len</span><span class="op" id="2017532">(</span><span class="ident" id="2017533">tur</span><span class="op" id="2017536">.</span><span class="ident" id="2017537">tu</span><span class="op" id="2017539">.</span><span class="ident" id="2017540">data</span><span class="op" id="2017544">)</span><span class="op" id="2017545">)</span>&nbsp;<span class="op" id="2017547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017551">tur</span><span class="op" id="2017554">.</span><span class="ident" id="2017555">err</span>&nbsp;<span class="op" id="2017559">=</span>&nbsp;<span class="ident" id="2017561">fmt</span><span class="op" id="2017564">.</span><span class="ident" id="2017565">Errorf</span><span class="op" id="2017571">(</span><span class="string" id="2017572">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="2017608">,</span>&nbsp;<span class="ident" id="2017610">tur</span><span class="op" id="2017613">.</span><span class="ident" id="2017614">tu</span><span class="op" id="2017616">.</span><span class="ident" id="2017617">name</span><span class="op" id="2017621">,</span>&nbsp;<span class="ident" id="2017623">doff</span><span class="op" id="2017627">,</span>&nbsp;<span class="builtinfunc" id="2017629">len</span><span class="op" id="2017632">(</span><span class="ident" id="2017633">tur</span><span class="op" id="2017636">.</span><span class="ident" id="2017637">tu</span><span class="op" id="2017639">.</span><span class="ident" id="2017640">data</span><span class="op" id="2017644">)</span><span class="op" id="2017645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017649">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2017657">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017660">tur</span><span class="op" id="2017663">.</span><span class="ident" id="2017664">b</span>&nbsp;<span class="op" id="2017666">=</span>&nbsp;<span class="ident" id="2017668">makeBuf</span><span class="op" id="2017675">(</span><span class="ident" id="2017676">tur</span><span class="op" id="2017679">.</span><span class="ident" id="2017680">d</span><span class="op" id="2017681">,</span>&nbsp;<span class="ident" id="2017683">tur</span><span class="op" id="2017686">.</span><span class="ident" id="2017687">tu</span><span class="op" id="2017689">,</span>&nbsp;<span class="ident" id="2017691">tur</span><span class="op" id="2017694">.</span><span class="ident" id="2017695">tu</span><span class="op" id="2017697">.</span><span class="ident" id="2017698">name</span><span class="op" id="2017702">,</span>&nbsp;<span class="ident" id="2017704">off</span><span class="op" id="2017707">,</span>&nbsp;<span class="ident" id="2017709">tur</span><span class="op" id="2017712">.</span><span class="ident" id="2017713">tu</span><span class="op" id="2017715">.</span><span class="ident" id="2017716">data</span><span class="op" id="2017720">[</span><span class="ident" id="2017721">doff</span><span class="op" id="2017725">:</span><span class="op" id="2017726">]</span><span class="op" id="2017727">)</span><br>
<span class="lineno"></span><span class="op" id="2017729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2017732">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2017781">func</span>&nbsp;<span class="op" id="2017786">(</span><span class="ident" id="2017787">tur</span>&nbsp;<span class="op" id="2017791">*</span><span class="ident" id="2017792">typeUnitReader</span><span class="op" id="2017806">)</span>&nbsp;<span class="ident" id="2017808">Next</span><span class="op" id="2017812">(</span><span class="op" id="2017813">)</span>&nbsp;<span class="op" id="2017815">(</span><span class="op" id="2017816">*</span><span class="ident" id="2017817">Entry</span><span class="op" id="2017822">,</span>&nbsp;<span class="builtintype" id="2017824">error</span><span class="op" id="2017829">)</span>&nbsp;<span class="op" id="2017831">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017834">if</span>&nbsp;<span class="ident" id="2017837">tur</span><span class="op" id="2017840">.</span><span class="ident" id="2017841">err</span>&nbsp;<span class="op" id="2017845">!=</span>&nbsp;<span class="ident" id="2017848">nil</span>&nbsp;<span class="op" id="2017852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017856">return</span>&nbsp;<span class="ident" id="2017863">nil</span><span class="op" id="2017866">,</span>&nbsp;<span class="ident" id="2017868">tur</span><span class="op" id="2017871">.</span><span class="ident" id="2017872">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2017877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017880">if</span>&nbsp;<span class="builtinfunc" id="2017883">len</span><span class="op" id="2017886">(</span><span class="ident" id="2017887">tur</span><span class="op" id="2017890">.</span><span class="ident" id="2017891">tu</span><span class="op" id="2017893">.</span><span class="ident" id="2017894">data</span><span class="op" id="2017898">)</span>&nbsp;<span class="op" id="2017900">==</span>&nbsp;<span class="num" id="2017903">0</span>&nbsp;<span class="op" id="2017905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017909">return</span>&nbsp;<span class="ident" id="2017916">nil</span><span class="op" id="2017919">,</span>&nbsp;<span class="ident" id="2017921">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2017926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017929">e</span>&nbsp;<span class="op" id="2017931">:=</span>&nbsp;<span class="ident" id="2017934">tur</span><span class="op" id="2017937">.</span><span class="ident" id="2017938">b</span><span class="op" id="2017939">.</span><span class="ident" id="2017940">entry</span><span class="op" id="2017945">(</span><span class="ident" id="2017946">tur</span><span class="op" id="2017949">.</span><span class="ident" id="2017950">tu</span><span class="op" id="2017952">.</span><span class="ident" id="2017953">atable</span><span class="op" id="2017959">,</span>&nbsp;<span class="ident" id="2017961">tur</span><span class="op" id="2017964">.</span><span class="ident" id="2017965">tu</span><span class="op" id="2017967">.</span><span class="ident" id="2017968">base</span><span class="op" id="2017972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2017975">if</span>&nbsp;<span class="ident" id="2017978">tur</span><span class="op" id="2017981">.</span><span class="ident" id="2017982">b</span><span class="op" id="2017983">.</span><span class="ident" id="2017984">err</span>&nbsp;<span class="op" id="2017988">!=</span>&nbsp;<span class="ident" id="2017991">nil</span>&nbsp;<span class="op" id="2017995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2017999">tur</span><span class="op" id="2018002">.</span><span class="ident" id="2018003">err</span>&nbsp;<span class="op" id="2018007">=</span>&nbsp;<span class="ident" id="2018009">tur</span><span class="op" id="2018012">.</span><span class="ident" id="2018013">b</span><span class="op" id="2018014">.</span><span class="ident" id="2018015">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2018021">return</span>&nbsp;<span class="ident" id="2018028">nil</span><span class="op" id="2018031">,</span>&nbsp;<span class="ident" id="2018033">tur</span><span class="op" id="2018036">.</span><span class="ident" id="2018037">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2018042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2018045">return</span>&nbsp;<span class="ident" id="2018052">e</span><span class="op" id="2018053">,</span>&nbsp;<span class="ident" id="2018055">nil</span><br>
<span class="lineno"></span><span class="op" id="2018059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2018062">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="2018111">func</span>&nbsp;<span class="op" id="2018116">(</span><span class="ident" id="2018117">tur</span>&nbsp;<span class="op" id="2018121">*</span><span class="ident" id="2018122">typeUnitReader</span><span class="op" id="2018136">)</span>&nbsp;<span class="ident" id="2018138">clone</span><span class="op" id="2018143">(</span><span class="op" id="2018144">)</span>&nbsp;<span class="ident" id="2018146">typeReader</span>&nbsp;<span class="op" id="2018157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2018160">return</span>&nbsp;<span class="op" id="2018167">&amp;</span><span class="ident" id="2018168">typeUnitReader</span><span class="op" id="2018182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018186">d</span><span class="op" id="2018187">:</span>&nbsp;&nbsp;<span class="ident" id="2018190">tur</span><span class="op" id="2018193">.</span><span class="ident" id="2018194">d</span><span class="op" id="2018195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018199">tu</span><span class="op" id="2018201">:</span>&nbsp;<span class="ident" id="2018203">tur</span><span class="op" id="2018206">.</span><span class="ident" id="2018207">tu</span><span class="op" id="2018209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018213">b</span><span class="op" id="2018214">:</span>&nbsp;&nbsp;<span class="ident" id="2018217">makeBuf</span><span class="op" id="2018224">(</span><span class="ident" id="2018225">tur</span><span class="op" id="2018228">.</span><span class="ident" id="2018229">d</span><span class="op" id="2018230">,</span>&nbsp;<span class="ident" id="2018232">tur</span><span class="op" id="2018235">.</span><span class="ident" id="2018236">tu</span><span class="op" id="2018238">,</span>&nbsp;<span class="ident" id="2018240">tur</span><span class="op" id="2018243">.</span><span class="ident" id="2018244">tu</span><span class="op" id="2018246">.</span><span class="ident" id="2018247">name</span><span class="op" id="2018251">,</span>&nbsp;<span class="ident" id="2018253">tur</span><span class="op" id="2018256">.</span><span class="ident" id="2018257">tu</span><span class="op" id="2018259">.</span><span class="ident" id="2018260">off</span><span class="op" id="2018263">,</span>&nbsp;<span class="ident" id="2018265">tur</span><span class="op" id="2018268">.</span><span class="ident" id="2018269">tu</span><span class="op" id="2018271">.</span><span class="ident" id="2018272">data</span><span class="op" id="2018276">)</span><span class="op" id="2018277">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2018280">}</span><br>
<span class="lineno"></span><span class="op" id="2018282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2018285">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="2018323">func</span>&nbsp;<span class="op" id="2018328">(</span><span class="ident" id="2018329">tur</span>&nbsp;<span class="op" id="2018333">*</span><span class="ident" id="2018334">typeUnitReader</span><span class="op" id="2018348">)</span>&nbsp;<span class="ident" id="2018350">offset</span><span class="op" id="2018356">(</span><span class="op" id="2018357">)</span>&nbsp;<span class="ident" id="2018359">Offset</span>&nbsp;<span class="op" id="2018366">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2018369">return</span>&nbsp;<span class="ident" id="2018376">tur</span><span class="op" id="2018379">.</span><span class="ident" id="2018380">b</span><span class="op" id="2018381">.</span><span class="ident" id="2018382">off</span><br>
<span class="lineno"></span><span class="op" id="2018386">}</span>
</div>
</body>
</html>
