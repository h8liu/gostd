<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8423002">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8423057">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8423111">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8423162">package</span>&nbsp;<span class="ident" id="8423170">html</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8423176">import</span>&nbsp;<span class="op" id="8423183">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8423186">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8423197">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8423212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8423215">func</span>&nbsp;<span class="ident" id="8423220">TestEntityLength</span><span class="op" id="8423236">(</span><span class="ident" id="8423237">t</span>&nbsp;<span class="op" id="8423239">*</span><span class="ident" id="8423240"><a href="/html/entity_test.go.html#8423186">testing</a></span><span class="op" id="8423247">.</span><span class="ident" id="8423248">T</span><span class="op" id="8423249">)</span>&nbsp;<span class="op" id="8423251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8423254">//&nbsp;We&nbsp;verify&nbsp;that&nbsp;the&nbsp;length&nbsp;of&nbsp;UTF-8&nbsp;encoding&nbsp;of&nbsp;each&nbsp;value&nbsp;is&nbsp;&lt;=&nbsp;1&nbsp;+&nbsp;len(key).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8423336">//&nbsp;The&nbsp;+1&nbsp;comes&nbsp;from&nbsp;the&nbsp;leading&nbsp;&#34;&amp;&#34;.&nbsp;This&nbsp;property&nbsp;implies&nbsp;that&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8423416">//&nbsp;unescaped&nbsp;text&nbsp;is&nbsp;&lt;=&nbsp;the&nbsp;length&nbsp;of&nbsp;escaped&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8423469">for</span>&nbsp;<span class="ident" id="8423473">k</span><span class="op" id="8423474">,</span>&nbsp;<span class="ident" id="8423476">v</span>&nbsp;<span class="op" id="8423478">:=</span>&nbsp;<span class="keyword" id="8423481">range</span>&nbsp;<span class="ident" id="8423487"><a href="/html/entity.go.html#3414016">entity</a></span>&nbsp;<span class="op" id="8423494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8423498">if</span>&nbsp;<span class="num" id="8423501">1</span><span class="op" id="8423502">+</span><span class="builtinfunc" id="8423503">len</span><span class="op" id="8423506">(</span><span class="ident" id="8423507"><a href="/html/entity_test.go.html#8423473">k</a></span><span class="op" id="8423508">)</span>&nbsp;<span class="op" id="8423510">&lt;</span>&nbsp;<span class="ident" id="8423512"><a href="/html/entity_test.go.html#8423197">utf8</a></span><span class="op" id="8423516">.</span><span class="ident" id="8423517">RuneLen</span><span class="op" id="8423524">(</span><span class="ident" id="8423525"><a href="/html/entity_test.go.html#8423476">v</a></span><span class="op" id="8423526">)</span>&nbsp;<span class="op" id="8423528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8423533"><a href="/html/entity_test.go.html#8423237">t</a></span><span class="op" id="8423534">.</span><span class="ident" id="8423535">Error</span><span class="op" id="8423540">(</span><span class="string" id="8423541">&#34;escaped&nbsp;entity&nbsp;&amp;&#34;</span>&nbsp;<span class="op" id="8423560">+</span>&nbsp;<span class="ident" id="8423562"><a href="/html/entity_test.go.html#8423473">k</a></span>&nbsp;<span class="op" id="8423564">+</span>&nbsp;<span class="string" id="8423566">&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;its&nbsp;UTF-8&nbsp;encoding&nbsp;&#34;</span>&nbsp;<span class="op" id="8423605">+</span>&nbsp;<span class="builtintype" id="8423607">string</span><span class="op" id="8423613">(</span><span class="ident" id="8423614"><a href="/html/entity_test.go.html#8423476">v</a></span><span class="op" id="8423615">)</span><span class="op" id="8423616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8423620">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8423624">if</span>&nbsp;<span class="builtinfunc" id="8423627">len</span><span class="op" id="8423630">(</span><span class="ident" id="8423631"><a href="/html/entity_test.go.html#8423473">k</a></span><span class="op" id="8423632">)</span>&nbsp;<span class="op" id="8423634">&gt;</span>&nbsp;<span class="ident" id="8423636"><a href="/html/entity.go.html#3413631">longestEntityWithoutSemicolon</a></span>&nbsp;<span class="op" id="8423666">&amp;&amp;</span>&nbsp;<span class="ident" id="8423669"><a href="/html/entity_test.go.html#8423473">k</a></span><span class="op" id="8423670">[</span><span class="builtinfunc" id="8423671">len</span><span class="op" id="8423674">(</span><span class="ident" id="8423675"><a href="/html/entity_test.go.html#8423473">k</a></span><span class="op" id="8423676">)</span><span class="op" id="8423677">-</span><span class="num" id="8423678">1</span><span class="op" id="8423679">]</span>&nbsp;<span class="op" id="8423681">!=</span>&nbsp;<span class="string" id="8423684">&#39;;&#39;</span>&nbsp;<span class="op" id="8423688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8423693"><a href="/html/entity_test.go.html#8423237">t</a></span><span class="op" id="8423694">.</span><span class="ident" id="8423695">Errorf</span><span class="op" id="8423701">(</span><span class="string" id="8423702">&#34;entity&nbsp;name&nbsp;%s&nbsp;is&nbsp;%d&nbsp;characters,&nbsp;but&nbsp;longestEntityWithoutSemicolon=%d&#34;</span><span class="op" id="8423773">,</span>&nbsp;<span class="ident" id="8423775"><a href="/html/entity_test.go.html#8423473">k</a></span><span class="op" id="8423776">,</span>&nbsp;<span class="builtinfunc" id="8423778">len</span><span class="op" id="8423781">(</span><span class="ident" id="8423782"><a href="/html/entity_test.go.html#8423473">k</a></span><span class="op" id="8423783">)</span><span class="op" id="8423784">,</span>&nbsp;<span class="ident" id="8423786"><a href="/html/entity.go.html#3413631">longestEntityWithoutSemicolon</a></span><span class="op" id="8423815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8423819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8423822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8423825">for</span>&nbsp;<span class="ident" id="8423829">k</span><span class="op" id="8423830">,</span>&nbsp;<span class="ident" id="8423832">v</span>&nbsp;<span class="op" id="8423834">:=</span>&nbsp;<span class="keyword" id="8423837">range</span>&nbsp;<span class="ident" id="8423843"><a href="/html/entity.go.html#3508598">entity2</a></span>&nbsp;<span class="op" id="8423851">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8423855">if</span>&nbsp;<span class="num" id="8423858">1</span><span class="op" id="8423859">+</span><span class="builtinfunc" id="8423860">len</span><span class="op" id="8423863">(</span><span class="ident" id="8423864"><a href="/html/entity_test.go.html#8423829">k</a></span><span class="op" id="8423865">)</span>&nbsp;<span class="op" id="8423867">&lt;</span>&nbsp;<span class="ident" id="8423869"><a href="/html/entity_test.go.html#8423197">utf8</a></span><span class="op" id="8423873">.</span><span class="ident" id="8423874">RuneLen</span><span class="op" id="8423881">(</span><span class="ident" id="8423882"><a href="/html/entity_test.go.html#8423832">v</a></span><span class="op" id="8423883">[</span><span class="num" id="8423884">0</span><span class="op" id="8423885">]</span><span class="op" id="8423886">)</span><span class="op" id="8423887">+</span><span class="ident" id="8423888"><a href="/html/entity_test.go.html#8423197">utf8</a></span><span class="op" id="8423892">.</span><span class="ident" id="8423893">RuneLen</span><span class="op" id="8423900">(</span><span class="ident" id="8423901"><a href="/html/entity_test.go.html#8423832">v</a></span><span class="op" id="8423902">[</span><span class="num" id="8423903">1</span><span class="op" id="8423904">]</span><span class="op" id="8423905">)</span>&nbsp;<span class="op" id="8423907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8423912"><a href="/html/entity_test.go.html#8423237">t</a></span><span class="op" id="8423913">.</span><span class="ident" id="8423914">Error</span><span class="op" id="8423919">(</span><span class="string" id="8423920">&#34;escaped&nbsp;entity&nbsp;&amp;&#34;</span>&nbsp;<span class="op" id="8423939">+</span>&nbsp;<span class="ident" id="8423941"><a href="/html/entity_test.go.html#8423829">k</a></span>&nbsp;<span class="op" id="8423943">+</span>&nbsp;<span class="string" id="8423945">&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;its&nbsp;UTF-8&nbsp;encoding&nbsp;&#34;</span>&nbsp;<span class="op" id="8423984">+</span>&nbsp;<span class="builtintype" id="8423986">string</span><span class="op" id="8423992">(</span><span class="ident" id="8423993"><a href="/html/entity_test.go.html#8423832">v</a></span><span class="op" id="8423994">[</span><span class="num" id="8423995">0</span><span class="op" id="8423996">]</span><span class="op" id="8423997">)</span>&nbsp;<span class="op" id="8423999">+</span>&nbsp;<span class="builtintype" id="8424001">string</span><span class="op" id="8424007">(</span><span class="ident" id="8424008"><a href="/html/entity_test.go.html#8423832">v</a></span><span class="op" id="8424009">[</span><span class="num" id="8424010">1</span><span class="op" id="8424011">]</span><span class="op" id="8424012">)</span><span class="op" id="8424013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8424017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8424020">}</span><br>
<span class="lineno"></span><span class="op" id="8424022">}</span>
</div>
</body>
</html>
