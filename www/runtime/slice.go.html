<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2106254">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2106309">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2106363">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2106414">package</span>&nbsp;<span class="ident" id="2106422">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2106431">import</span>&nbsp;<span class="op" id="2106438">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2106441">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2106450">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2106453">type</span>&nbsp;<span class="ident" id="2106458">sliceStruct</span>&nbsp;<span class="keyword" id="2106470">struct</span>&nbsp;<span class="op" id="2106477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2106480">array</span>&nbsp;<span class="ident" id="2106486"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2106492">.</span><span class="ident" id="2106493">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2106502">len</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2106508">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2106513">cap</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2106519">int</span><br>
<span class="lineno">15</span><span class="op" id="2106523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2106526">//&nbsp;TODO:&nbsp;take&nbsp;uintptrs&nbsp;instead&nbsp;of&nbsp;int64s?</span><br>
<span class="lineno"></span><span class="keyword" id="2106568">func</span>&nbsp;<span class="ident" id="2106573">makeslice</span><span class="op" id="2106582">(</span><span class="ident" id="2106583">t</span>&nbsp;<span class="op" id="2106585">*</span><span class="ident" id="2106586"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2189497">slicetype</a></span><span class="op" id="2106595">,</span>&nbsp;<span class="ident" id="2106597">len64</span>&nbsp;<span class="ident" id="2106603">int64</span><span class="op" id="2106608">,</span>&nbsp;<span class="ident" id="2106610">cap64</span>&nbsp;<span class="ident" id="2106616">int64</span><span class="op" id="2106621">)</span>&nbsp;<span class="ident" id="2106623"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span>&nbsp;<span class="op" id="2106635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2106638">//&nbsp;NOTE:&nbsp;The&nbsp;len&nbsp;&gt;&nbsp;MaxMem/elemsize&nbsp;check&nbsp;here&nbsp;is&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2106712">//&nbsp;but&nbsp;it&nbsp;produces&nbsp;a&nbsp;&#39;len&nbsp;out&nbsp;of&nbsp;range&#39;&nbsp;error&nbsp;instead&nbsp;of&nbsp;a&nbsp;&#39;cap&nbsp;out&nbsp;of&nbsp;range&#39;&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2106797">//&nbsp;when&nbsp;someone&nbsp;does&nbsp;make([]T,&nbsp;bignumber).&nbsp;&#39;cap&nbsp;out&nbsp;of&nbsp;range&#39;&nbsp;is&nbsp;true&nbsp;too,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2106873">//&nbsp;but&nbsp;since&nbsp;the&nbsp;cap&nbsp;is&nbsp;only&nbsp;being&nbsp;supplied&nbsp;implicitly,&nbsp;saying&nbsp;len&nbsp;is&nbsp;clearer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2106953">//&nbsp;See&nbsp;issue&nbsp;4085.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2106973">len</span>&nbsp;<span class="op" id="2106977">:=</span>&nbsp;<span class="builtintype" id="2106980">int</span><span class="op" id="2106983">(</span><span class="ident" id="2106984"><a href="/runtime/slice.go.html#2106597">len64</a></span><span class="op" id="2106989">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2106992">if</span>&nbsp;<span class="ident" id="2106995"><a href="/runtime/slice.go.html#2106597">len64</a></span>&nbsp;<span class="op" id="2107001">&lt;</span>&nbsp;<span class="num" id="2107003">0</span>&nbsp;<span class="op" id="2107005">||</span>&nbsp;<span class="ident" id="2107008">int64</span><span class="op" id="2107013">(</span><span class="builtinfunc" id="2107014"><a href="/runtime/slice.go.html#2106973">len</a></span><span class="op" id="2107017">)</span>&nbsp;<span class="op" id="2107019">!=</span>&nbsp;<span class="ident" id="2107022"><a href="/runtime/slice.go.html#2106597">len64</a></span>&nbsp;<span class="op" id="2107028">||</span>&nbsp;<span class="ident" id="2107031"><a href="/runtime/slice.go.html#2106583">t</a></span><span class="op" id="2107032">.</span><span class="ident" id="2107033">elem</span><span class="op" id="2107037">.</span><span class="ident" id="2107038">size</span>&nbsp;<span class="op" id="2107043">&gt;</span>&nbsp;<span class="num" id="2107045">0</span>&nbsp;<span class="op" id="2107047">&amp;&amp;</span>&nbsp;<span class="builtintype" id="2107050">uintptr</span><span class="op" id="2107057">(</span><span class="builtinfunc" id="2107058"><a href="/runtime/slice.go.html#2106973">len</a></span><span class="op" id="2107061">)</span>&nbsp;<span class="op" id="2107063">&gt;</span>&nbsp;<span class="ident" id="2107065"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2194990">maxmem</a></span><span class="op" id="2107071">/</span><span class="builtintype" id="2107072">uintptr</span><span class="op" id="2107079">(</span><span class="ident" id="2107080"><a href="/runtime/slice.go.html#2106583">t</a></span><span class="op" id="2107081">.</span><span class="ident" id="2107082">elem</span><span class="op" id="2107086">.</span><span class="ident" id="2107087">size</span><span class="op" id="2107091">)</span>&nbsp;<span class="op" id="2107093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2107097">panic</span><span class="op" id="2107102">(</span><span class="ident" id="2107103"><a href="/runtime/error.go.html#1918597">errorString</a></span><span class="op" id="2107114">(</span><span class="string" id="2107115">&#34;makeslice:&nbsp;len&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2107144">)</span><span class="op" id="2107145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2107148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2107151">cap</span>&nbsp;<span class="op" id="2107155">:=</span>&nbsp;<span class="builtintype" id="2107158">int</span><span class="op" id="2107161">(</span><span class="ident" id="2107162"><a href="/runtime/slice.go.html#2106610">cap64</a></span><span class="op" id="2107167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107170">if</span>&nbsp;<span class="builtinfunc" id="2107173"><a href="/runtime/slice.go.html#2107151">cap</a></span>&nbsp;<span class="op" id="2107177">&lt;</span>&nbsp;<span class="builtinfunc" id="2107179"><a href="/runtime/slice.go.html#2106973">len</a></span>&nbsp;<span class="op" id="2107183">||</span>&nbsp;<span class="ident" id="2107186">int64</span><span class="op" id="2107191">(</span><span class="builtinfunc" id="2107192"><a href="/runtime/slice.go.html#2107151">cap</a></span><span class="op" id="2107195">)</span>&nbsp;<span class="op" id="2107197">!=</span>&nbsp;<span class="ident" id="2107200"><a href="/runtime/slice.go.html#2106610">cap64</a></span>&nbsp;<span class="op" id="2107206">||</span>&nbsp;<span class="ident" id="2107209"><a href="/runtime/slice.go.html#2106583">t</a></span><span class="op" id="2107210">.</span><span class="ident" id="2107211">elem</span><span class="op" id="2107215">.</span><span class="ident" id="2107216">size</span>&nbsp;<span class="op" id="2107221">&gt;</span>&nbsp;<span class="num" id="2107223">0</span>&nbsp;<span class="op" id="2107225">&amp;&amp;</span>&nbsp;<span class="builtintype" id="2107228">uintptr</span><span class="op" id="2107235">(</span><span class="builtinfunc" id="2107236"><a href="/runtime/slice.go.html#2107151">cap</a></span><span class="op" id="2107239">)</span>&nbsp;<span class="op" id="2107241">&gt;</span>&nbsp;<span class="ident" id="2107243"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2194990">maxmem</a></span><span class="op" id="2107249">/</span><span class="builtintype" id="2107250">uintptr</span><span class="op" id="2107257">(</span><span class="ident" id="2107258"><a href="/runtime/slice.go.html#2106583">t</a></span><span class="op" id="2107259">.</span><span class="ident" id="2107260">elem</span><span class="op" id="2107264">.</span><span class="ident" id="2107265">size</span><span class="op" id="2107269">)</span>&nbsp;<span class="op" id="2107271">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2107275">panic</span><span class="op" id="2107280">(</span><span class="ident" id="2107281"><a href="/runtime/error.go.html#1918597">errorString</a></span><span class="op" id="2107292">(</span><span class="string" id="2107293">&#34;makeslice:&nbsp;cap&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2107322">)</span><span class="op" id="2107323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2107326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2107329">p</span>&nbsp;<span class="op" id="2107331">:=</span>&nbsp;<span class="ident" id="2107334"><a href="/runtime/malloc.go.html#1991870">newarray</a></span><span class="op" id="2107342">(</span><span class="ident" id="2107343"><a href="/runtime/slice.go.html#2106583">t</a></span><span class="op" id="2107344">.</span><span class="ident" id="2107345">elem</span><span class="op" id="2107349">,</span>&nbsp;<span class="builtintype" id="2107351">uintptr</span><span class="op" id="2107358">(</span><span class="builtinfunc" id="2107359"><a href="/runtime/slice.go.html#2107151">cap</a></span><span class="op" id="2107362">)</span><span class="op" id="2107363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107366">return</span>&nbsp;<span class="ident" id="2107373"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span><span class="op" id="2107384">{</span><span class="ident" id="2107385"><a href="/runtime/slice.go.html#2107329">p</a></span><span class="op" id="2107386">,</span>&nbsp;<span class="builtinfunc" id="2107388"><a href="/runtime/slice.go.html#2106973">len</a></span><span class="op" id="2107391">,</span>&nbsp;<span class="builtinfunc" id="2107393"><a href="/runtime/slice.go.html#2107151">cap</a></span><span class="op" id="2107396">}</span><br>
<span class="lineno"></span><span class="op" id="2107398">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2107401">//&nbsp;TODO:&nbsp;take&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;int64?</span><br>
<span class="lineno"></span><span class="keyword" id="2107441">func</span>&nbsp;<span class="ident" id="2107446">growslice</span><span class="op" id="2107455">(</span><span class="ident" id="2107456">t</span>&nbsp;<span class="op" id="2107458">*</span><span class="ident" id="2107459"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2189497">slicetype</a></span><span class="op" id="2107468">,</span>&nbsp;<span class="ident" id="2107470">old</span>&nbsp;<span class="ident" id="2107474"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span><span class="op" id="2107485">,</span>&nbsp;<span class="ident" id="2107487">n</span>&nbsp;<span class="ident" id="2107489">int64</span><span class="op" id="2107494">)</span>&nbsp;<span class="ident" id="2107496"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span>&nbsp;<span class="op" id="2107508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107511">if</span>&nbsp;<span class="ident" id="2107514"><a href="/runtime/slice.go.html#2107487">n</a></span>&nbsp;<span class="op" id="2107516">&lt;</span>&nbsp;<span class="num" id="2107518">1</span>&nbsp;<span class="op" id="2107520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2107524">panic</span><span class="op" id="2107529">(</span><span class="ident" id="2107530"><a href="/runtime/error.go.html#1918597">errorString</a></span><span class="op" id="2107541">(</span><span class="string" id="2107542">&#34;growslice:&nbsp;invalid&nbsp;n&#34;</span><span class="op" id="2107564">)</span><span class="op" id="2107565">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2107568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2107572">cap64</span>&nbsp;<span class="op" id="2107578">:=</span>&nbsp;<span class="ident" id="2107581">int64</span><span class="op" id="2107586">(</span><span class="ident" id="2107587"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2107590">.</span><span class="builtinfunc" id="2107591">cap</span><span class="op" id="2107594">)</span>&nbsp;<span class="op" id="2107596">+</span>&nbsp;<span class="ident" id="2107598"><a href="/runtime/slice.go.html#2107487">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2107601">cap</span>&nbsp;<span class="op" id="2107605">:=</span>&nbsp;<span class="builtintype" id="2107608">int</span><span class="op" id="2107611">(</span><span class="ident" id="2107612"><a href="/runtime/slice.go.html#2107572">cap64</a></span><span class="op" id="2107617">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107621">if</span>&nbsp;<span class="ident" id="2107624">int64</span><span class="op" id="2107629">(</span><span class="builtinfunc" id="2107630"><a href="/runtime/slice.go.html#2107601">cap</a></span><span class="op" id="2107633">)</span>&nbsp;<span class="op" id="2107635">!=</span>&nbsp;<span class="ident" id="2107638"><a href="/runtime/slice.go.html#2107572">cap64</a></span>&nbsp;<span class="op" id="2107644">||</span>&nbsp;<span class="builtinfunc" id="2107647"><a href="/runtime/slice.go.html#2107601">cap</a></span>&nbsp;<span class="op" id="2107651">&lt;</span>&nbsp;<span class="ident" id="2107653"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2107656">.</span><span class="builtinfunc" id="2107657">cap</span>&nbsp;<span class="op" id="2107661">||</span>&nbsp;<span class="ident" id="2107664"><a href="/runtime/slice.go.html#2107456">t</a></span><span class="op" id="2107665">.</span><span class="ident" id="2107666">elem</span><span class="op" id="2107670">.</span><span class="ident" id="2107671">size</span>&nbsp;<span class="op" id="2107676">&gt;</span>&nbsp;<span class="num" id="2107678">0</span>&nbsp;<span class="op" id="2107680">&amp;&amp;</span>&nbsp;<span class="builtintype" id="2107683">uintptr</span><span class="op" id="2107690">(</span><span class="builtinfunc" id="2107691"><a href="/runtime/slice.go.html#2107601">cap</a></span><span class="op" id="2107694">)</span>&nbsp;<span class="op" id="2107696">&gt;</span>&nbsp;<span class="ident" id="2107698"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2194990">maxmem</a></span><span class="op" id="2107704">/</span><span class="builtintype" id="2107705">uintptr</span><span class="op" id="2107712">(</span><span class="ident" id="2107713"><a href="/runtime/slice.go.html#2107456">t</a></span><span class="op" id="2107714">.</span><span class="ident" id="2107715">elem</span><span class="op" id="2107719">.</span><span class="ident" id="2107720">size</span><span class="op" id="2107724">)</span>&nbsp;<span class="op" id="2107726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2107730">panic</span><span class="op" id="2107735">(</span><span class="ident" id="2107736"><a href="/runtime/error.go.html#1918597">errorString</a></span><span class="op" id="2107747">(</span><span class="string" id="2107748">&#34;growslice:&nbsp;cap&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2107777">)</span><span class="op" id="2107778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2107781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107785">if</span>&nbsp;<span class="ident" id="2107788"><a href="/runtime/race0.go.html#2069616">raceenabled</a></span>&nbsp;<span class="op" id="2107800">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2107804">callerpc</span>&nbsp;<span class="op" id="2107813">:=</span>&nbsp;<span class="ident" id="2107816"><a href="/runtime/stubs.go.html#2139499">getcallerpc</a></span><span class="op" id="2107827">(</span><span class="ident" id="2107828"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2107834">.</span><span class="ident" id="2107835">Pointer</span><span class="op" id="2107842">(</span><span class="op" id="2107843">&amp;</span><span class="ident" id="2107844"><a href="/runtime/slice.go.html#2107456">t</a></span><span class="op" id="2107845">)</span><span class="op" id="2107846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2107850"><a href="/runtime/race0.go.html#2070390">racereadrangepc</a></span><span class="op" id="2107865">(</span><span class="ident" id="2107866"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2107869">.</span><span class="ident" id="2107870">array</span><span class="op" id="2107875">,</span>&nbsp;<span class="builtintype" id="2107877">uintptr</span><span class="op" id="2107884">(</span><span class="ident" id="2107885"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2107888">.</span><span class="builtinfunc" id="2107889">len</span><span class="op" id="2107892">*</span><span class="builtintype" id="2107893">int</span><span class="op" id="2107896">(</span><span class="ident" id="2107897"><a href="/runtime/slice.go.html#2107456">t</a></span><span class="op" id="2107898">.</span><span class="ident" id="2107899">elem</span><span class="op" id="2107903">.</span><span class="ident" id="2107904">size</span><span class="op" id="2107908">)</span><span class="op" id="2107909">)</span><span class="op" id="2107910">,</span>&nbsp;<span class="ident" id="2107912"><a href="/runtime/slice.go.html#2107804">callerpc</a></span><span class="op" id="2107920">,</span>&nbsp;<span class="ident" id="2107922"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2107928">(</span><span class="ident" id="2107929"><a href="/runtime/slice.go.html#2107446">growslice</a></span><span class="op" id="2107938">)</span><span class="op" id="2107939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2107942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2107946">et</span>&nbsp;<span class="op" id="2107949">:=</span>&nbsp;<span class="ident" id="2107952"><a href="/runtime/slice.go.html#2107456">t</a></span><span class="op" id="2107953">.</span><span class="ident" id="2107954">elem</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107960">if</span>&nbsp;<span class="ident" id="2107963"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2107965">.</span><span class="ident" id="2107966">size</span>&nbsp;<span class="op" id="2107971">==</span>&nbsp;<span class="num" id="2107974">0</span>&nbsp;<span class="op" id="2107976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2107980">return</span>&nbsp;<span class="ident" id="2107987"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span><span class="op" id="2107998">{</span><span class="ident" id="2107999"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108002">.</span><span class="ident" id="2108003">array</span><span class="op" id="2108008">,</span>&nbsp;<span class="ident" id="2108010"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108013">.</span><span class="builtinfunc" id="2108014">len</span><span class="op" id="2108017">,</span>&nbsp;<span class="builtinfunc" id="2108019"><a href="/runtime/slice.go.html#2107601">cap</a></span><span class="op" id="2108022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108029">newcap</span>&nbsp;<span class="op" id="2108036">:=</span>&nbsp;<span class="ident" id="2108039"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108042">.</span><span class="builtinfunc" id="2108043">cap</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108048">if</span>&nbsp;<span class="ident" id="2108051"><a href="/runtime/slice.go.html#2108029">newcap</a></span><span class="op" id="2108057">+</span><span class="ident" id="2108058"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108065">&lt;</span>&nbsp;<span class="builtinfunc" id="2108067"><a href="/runtime/slice.go.html#2107601">cap</a></span>&nbsp;<span class="op" id="2108071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108075"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108082">=</span>&nbsp;<span class="builtinfunc" id="2108084"><a href="/runtime/slice.go.html#2107601">cap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108089">}</span>&nbsp;<span class="keyword" id="2108091">else</span>&nbsp;<span class="op" id="2108096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108100">for</span>&nbsp;<span class="op" id="2108104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108109">if</span>&nbsp;<span class="ident" id="2108112"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108115">.</span><span class="builtinfunc" id="2108116">len</span>&nbsp;<span class="op" id="2108120">&lt;</span>&nbsp;<span class="num" id="2108122">1024</span>&nbsp;<span class="op" id="2108127">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108133"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108140">+=</span>&nbsp;<span class="ident" id="2108143"><a href="/runtime/slice.go.html#2108029">newcap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108153">}</span>&nbsp;<span class="keyword" id="2108155">else</span>&nbsp;<span class="op" id="2108160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108166"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108173">+=</span>&nbsp;<span class="ident" id="2108176"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108183">/</span>&nbsp;<span class="num" id="2108185">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108195">if</span>&nbsp;<span class="ident" id="2108198"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108205">&gt;=</span>&nbsp;<span class="builtinfunc" id="2108208"><a href="/runtime/slice.go.html#2107601">cap</a></span>&nbsp;<span class="op" id="2108212">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108218">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108238">if</span>&nbsp;<span class="builtintype" id="2108241">uintptr</span><span class="op" id="2108248">(</span><span class="ident" id="2108249"><a href="/runtime/slice.go.html#2108029">newcap</a></span><span class="op" id="2108255">)</span>&nbsp;<span class="op" id="2108257">&gt;=</span>&nbsp;<span class="ident" id="2108260"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2194990">maxmem</a></span><span class="op" id="2108266">/</span><span class="builtintype" id="2108267">uintptr</span><span class="op" id="2108274">(</span><span class="ident" id="2108275"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2108277">.</span><span class="ident" id="2108278">size</span><span class="op" id="2108282">)</span>&nbsp;<span class="op" id="2108284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2108288">panic</span><span class="op" id="2108293">(</span><span class="ident" id="2108294"><a href="/runtime/error.go.html#1918597">errorString</a></span><span class="op" id="2108305">(</span><span class="string" id="2108306">&#34;growslice:&nbsp;cap&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2108335">)</span><span class="op" id="2108336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108342">lenmem</span>&nbsp;<span class="op" id="2108349">:=</span>&nbsp;<span class="builtintype" id="2108352">uintptr</span><span class="op" id="2108359">(</span><span class="ident" id="2108360"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108363">.</span><span class="builtinfunc" id="2108364">len</span><span class="op" id="2108367">)</span>&nbsp;<span class="op" id="2108369">*</span>&nbsp;<span class="builtintype" id="2108371">uintptr</span><span class="op" id="2108378">(</span><span class="ident" id="2108379"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2108381">.</span><span class="ident" id="2108382">size</span><span class="op" id="2108386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108389">capmem</span>&nbsp;<span class="op" id="2108396">:=</span>&nbsp;<span class="ident" id="2108399"><a href="/runtime/malloc.go.html#1992380">goroundupsize</a></span><span class="op" id="2108412">(</span><span class="builtintype" id="2108413">uintptr</span><span class="op" id="2108420">(</span><span class="ident" id="2108421"><a href="/runtime/slice.go.html#2108029">newcap</a></span><span class="op" id="2108427">)</span>&nbsp;<span class="op" id="2108429">*</span>&nbsp;<span class="builtintype" id="2108431">uintptr</span><span class="op" id="2108438">(</span><span class="ident" id="2108439"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2108441">.</span><span class="ident" id="2108442">size</span><span class="op" id="2108446">)</span><span class="op" id="2108447">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108450"><a href="/runtime/slice.go.html#2108029">newcap</a></span>&nbsp;<span class="op" id="2108457">=</span>&nbsp;<span class="builtintype" id="2108459">int</span><span class="op" id="2108462">(</span><span class="ident" id="2108463"><a href="/runtime/slice.go.html#2108389">capmem</a></span>&nbsp;<span class="op" id="2108470">/</span>&nbsp;<span class="builtintype" id="2108472">uintptr</span><span class="op" id="2108479">(</span><span class="ident" id="2108480"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2108482">.</span><span class="ident" id="2108483">size</span><span class="op" id="2108487">)</span><span class="op" id="2108488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108491">var</span>&nbsp;<span class="ident" id="2108495">p</span>&nbsp;<span class="ident" id="2108497"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2108503">.</span><span class="ident" id="2108504">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108513">if</span>&nbsp;<span class="ident" id="2108516"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2108518">.</span><span class="ident" id="2108519">kind</span><span class="op" id="2108523">&amp;</span><span class="ident" id="2108524"><a href="/runtime/typekind.go.html#2178349">kindNoPointers</a></span>&nbsp;<span class="op" id="2108539">!=</span>&nbsp;<span class="num" id="2108542">0</span>&nbsp;<span class="op" id="2108544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108548"><a href="/runtime/slice.go.html#2108495">p</a></span>&nbsp;<span class="op" id="2108550">=</span>&nbsp;<span class="ident" id="2108552"><a href="/runtime/malloc.go.html#1992247">rawmem</a></span><span class="op" id="2108558">(</span><span class="ident" id="2108559"><a href="/runtime/slice.go.html#2108389">capmem</a></span><span class="op" id="2108565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108569"><a href="/runtime/stubs.go.html#2135687">memclr</a></span><span class="op" id="2108575">(</span><span class="ident" id="2108576"><a href="/runtime/stubs.go.html#2131745">add</a></span><span class="op" id="2108579">(</span><span class="ident" id="2108580"><a href="/runtime/slice.go.html#2108495">p</a></span><span class="op" id="2108581">,</span>&nbsp;<span class="ident" id="2108583"><a href="/runtime/slice.go.html#2108342">lenmem</a></span><span class="op" id="2108589">)</span><span class="op" id="2108590">,</span>&nbsp;<span class="ident" id="2108592"><a href="/runtime/slice.go.html#2108389">capmem</a></span><span class="op" id="2108598">-</span><span class="ident" id="2108599"><a href="/runtime/slice.go.html#2108342">lenmem</a></span><span class="op" id="2108605">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108608">}</span>&nbsp;<span class="keyword" id="2108610">else</span>&nbsp;<span class="op" id="2108615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2108619">//&nbsp;Note:&nbsp;can&#39;t&nbsp;use&nbsp;rawmem&nbsp;(which&nbsp;avoids&nbsp;zeroing&nbsp;of&nbsp;memory),&nbsp;because&nbsp;then&nbsp;GC&nbsp;can&nbsp;scan&nbsp;unitialized&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108725"><a href="/runtime/slice.go.html#2108495">p</a></span>&nbsp;<span class="op" id="2108727">=</span>&nbsp;<span class="ident" id="2108729"><a href="/runtime/malloc.go.html#1991870">newarray</a></span><span class="op" id="2108737">(</span><span class="ident" id="2108738"><a href="/runtime/slice.go.html#2107946">et</a></span><span class="op" id="2108740">,</span>&nbsp;<span class="builtintype" id="2108742">uintptr</span><span class="op" id="2108749">(</span><span class="ident" id="2108750"><a href="/runtime/slice.go.html#2108029">newcap</a></span><span class="op" id="2108756">)</span><span class="op" id="2108757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108763"><a href="/runtime/stubs.go.html#2135810">memmove</a></span><span class="op" id="2108770">(</span><span class="ident" id="2108771"><a href="/runtime/slice.go.html#2108495">p</a></span><span class="op" id="2108772">,</span>&nbsp;<span class="ident" id="2108774"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108777">.</span><span class="ident" id="2108778">array</span><span class="op" id="2108783">,</span>&nbsp;<span class="ident" id="2108785"><a href="/runtime/slice.go.html#2108342">lenmem</a></span><span class="op" id="2108791">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108795">return</span>&nbsp;<span class="ident" id="2108802"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span><span class="op" id="2108813">{</span><span class="ident" id="2108814"><a href="/runtime/slice.go.html#2108495">p</a></span><span class="op" id="2108815">,</span>&nbsp;<span class="ident" id="2108817"><a href="/runtime/slice.go.html#2107470">old</a></span><span class="op" id="2108820">.</span><span class="builtinfunc" id="2108821">len</span><span class="op" id="2108824">,</span>&nbsp;<span class="ident" id="2108826"><a href="/runtime/slice.go.html#2108029">newcap</a></span><span class="op" id="2108832">}</span><br>
<span class="lineno"></span><span class="op" id="2108834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2108837">func</span>&nbsp;<span class="ident" id="2108842">slicecopy</span><span class="op" id="2108851">(</span><span class="ident" id="2108852">to</span>&nbsp;<span class="ident" id="2108855"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span><span class="op" id="2108866">,</span>&nbsp;<span class="ident" id="2108868">fm</span>&nbsp;<span class="ident" id="2108871"><a href="/runtime/slice.go.html#2106458">sliceStruct</a></span><span class="op" id="2108882">,</span>&nbsp;<span class="ident" id="2108884">width</span>&nbsp;<span class="builtintype" id="2108890">uintptr</span><span class="op" id="2108897">)</span>&nbsp;<span class="builtintype" id="2108899">int</span>&nbsp;<span class="op" id="2108903">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108906">if</span>&nbsp;<span class="ident" id="2108909"><a href="/runtime/slice.go.html#2108868">fm</a></span><span class="op" id="2108911">.</span><span class="builtinfunc" id="2108912">len</span>&nbsp;<span class="op" id="2108916">==</span>&nbsp;<span class="num" id="2108919">0</span>&nbsp;<span class="op" id="2108921">||</span>&nbsp;<span class="ident" id="2108924"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2108926">.</span><span class="builtinfunc" id="2108927">len</span>&nbsp;<span class="op" id="2108931">==</span>&nbsp;<span class="num" id="2108934">0</span>&nbsp;<span class="op" id="2108936">||</span>&nbsp;<span class="ident" id="2108939"><a href="/runtime/slice.go.html#2108884">width</a></span>&nbsp;<span class="op" id="2108945">==</span>&nbsp;<span class="num" id="2108948">0</span>&nbsp;<span class="op" id="2108950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108954">return</span>&nbsp;<span class="num" id="2108961">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2108964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108968">n</span>&nbsp;<span class="op" id="2108970">:=</span>&nbsp;<span class="ident" id="2108973"><a href="/runtime/slice.go.html#2108868">fm</a></span><span class="op" id="2108975">.</span><span class="builtinfunc" id="2108976">len</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2108981">if</span>&nbsp;<span class="ident" id="2108984"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2108986">.</span><span class="builtinfunc" id="2108987">len</span>&nbsp;<span class="op" id="2108991">&lt;</span>&nbsp;<span class="ident" id="2108993"><a href="/runtime/slice.go.html#2108968">n</a></span>&nbsp;<span class="op" id="2108995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2108999"><a href="/runtime/slice.go.html#2108968">n</a></span>&nbsp;<span class="op" id="2109001">=</span>&nbsp;<span class="ident" id="2109003"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2109005">.</span><span class="builtinfunc" id="2109006">len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109015">if</span>&nbsp;<span class="ident" id="2109018"><a href="/runtime/race0.go.html#2069616">raceenabled</a></span>&nbsp;<span class="op" id="2109030">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109034">callerpc</span>&nbsp;<span class="op" id="2109043">:=</span>&nbsp;<span class="ident" id="2109046"><a href="/runtime/stubs.go.html#2139499">getcallerpc</a></span><span class="op" id="2109057">(</span><span class="ident" id="2109058"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2109064">.</span><span class="ident" id="2109065">Pointer</span><span class="op" id="2109072">(</span><span class="op" id="2109073">&amp;</span><span class="ident" id="2109074"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2109076">)</span><span class="op" id="2109077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109081">pc</span>&nbsp;<span class="op" id="2109084">:=</span>&nbsp;<span class="ident" id="2109087"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2109093">(</span><span class="ident" id="2109094"><a href="/runtime/slice.go.html#2108842">slicecopy</a></span><span class="op" id="2109103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109107"><a href="/runtime/race0.go.html#2070486">racewriterangepc</a></span><span class="op" id="2109123">(</span><span class="ident" id="2109124"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2109126">.</span><span class="ident" id="2109127">array</span><span class="op" id="2109132">,</span>&nbsp;<span class="builtintype" id="2109134">uintptr</span><span class="op" id="2109141">(</span><span class="ident" id="2109142"><a href="/runtime/slice.go.html#2108968">n</a></span><span class="op" id="2109143">*</span><span class="builtintype" id="2109144">int</span><span class="op" id="2109147">(</span><span class="ident" id="2109148"><a href="/runtime/slice.go.html#2108884">width</a></span><span class="op" id="2109153">)</span><span class="op" id="2109154">)</span><span class="op" id="2109155">,</span>&nbsp;<span class="ident" id="2109157"><a href="/runtime/slice.go.html#2109034">callerpc</a></span><span class="op" id="2109165">,</span>&nbsp;<span class="ident" id="2109167"><a href="/runtime/slice.go.html#2109081">pc</a></span><span class="op" id="2109169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109173"><a href="/runtime/race0.go.html#2070390">racereadrangepc</a></span><span class="op" id="2109188">(</span><span class="ident" id="2109189"><a href="/runtime/slice.go.html#2108868">fm</a></span><span class="op" id="2109191">.</span><span class="ident" id="2109192">array</span><span class="op" id="2109197">,</span>&nbsp;<span class="builtintype" id="2109199">uintptr</span><span class="op" id="2109206">(</span><span class="ident" id="2109207"><a href="/runtime/slice.go.html#2108968">n</a></span><span class="op" id="2109208">*</span><span class="builtintype" id="2109209">int</span><span class="op" id="2109212">(</span><span class="ident" id="2109213"><a href="/runtime/slice.go.html#2108884">width</a></span><span class="op" id="2109218">)</span><span class="op" id="2109219">)</span><span class="op" id="2109220">,</span>&nbsp;<span class="ident" id="2109222"><a href="/runtime/slice.go.html#2109034">callerpc</a></span><span class="op" id="2109230">,</span>&nbsp;<span class="ident" id="2109232"><a href="/runtime/slice.go.html#2109081">pc</a></span><span class="op" id="2109234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109237">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109241">size</span>&nbsp;<span class="op" id="2109246">:=</span>&nbsp;<span class="builtintype" id="2109249">uintptr</span><span class="op" id="2109256">(</span><span class="ident" id="2109257"><a href="/runtime/slice.go.html#2108968">n</a></span><span class="op" id="2109258">)</span>&nbsp;<span class="op" id="2109260">*</span>&nbsp;<span class="ident" id="2109262"><a href="/runtime/slice.go.html#2108884">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109269">if</span>&nbsp;<span class="ident" id="2109272"><a href="/runtime/slice.go.html#2109241">size</a></span>&nbsp;<span class="op" id="2109277">==</span>&nbsp;<span class="num" id="2109280">1</span>&nbsp;<span class="op" id="2109282">{</span>&nbsp;<span class="comment" id="2109284">//&nbsp;common&nbsp;case&nbsp;worth&nbsp;about&nbsp;2x&nbsp;to&nbsp;do&nbsp;here</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2109327">//&nbsp;TODO:&nbsp;is&nbsp;this&nbsp;still&nbsp;worth&nbsp;it&nbsp;with&nbsp;new&nbsp;memmove&nbsp;impl?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109384">*</span><span class="op" id="2109385">(</span><span class="op" id="2109386">*</span><span class="builtintype" id="2109387">byte</span><span class="op" id="2109391">)</span><span class="op" id="2109392">(</span><span class="ident" id="2109393"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2109395">.</span><span class="ident" id="2109396">array</span><span class="op" id="2109401">)</span>&nbsp;<span class="op" id="2109403">=</span>&nbsp;<span class="op" id="2109405">*</span><span class="op" id="2109406">(</span><span class="op" id="2109407">*</span><span class="builtintype" id="2109408">byte</span><span class="op" id="2109412">)</span><span class="op" id="2109413">(</span><span class="ident" id="2109414"><a href="/runtime/slice.go.html#2108868">fm</a></span><span class="op" id="2109416">.</span><span class="ident" id="2109417">array</span><span class="op" id="2109422">)</span>&nbsp;<span class="comment" id="2109424">//&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;byte&nbsp;pointer</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109455">}</span>&nbsp;<span class="keyword" id="2109457">else</span>&nbsp;<span class="op" id="2109462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109466"><a href="/runtime/stubs.go.html#2135810">memmove</a></span><span class="op" id="2109473">(</span><span class="ident" id="2109474"><a href="/runtime/slice.go.html#2108852">to</a></span><span class="op" id="2109476">.</span><span class="ident" id="2109477">array</span><span class="op" id="2109482">,</span>&nbsp;<span class="ident" id="2109484"><a href="/runtime/slice.go.html#2108868">fm</a></span><span class="op" id="2109486">.</span><span class="ident" id="2109487">array</span><span class="op" id="2109492">,</span>&nbsp;<span class="ident" id="2109494"><a href="/runtime/slice.go.html#2109241">size</a></span><span class="op" id="2109498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109504">return</span>&nbsp;<span class="builtintype" id="2109511">int</span><span class="op" id="2109514">(</span><span class="ident" id="2109515"><a href="/runtime/slice.go.html#2108968">n</a></span><span class="op" id="2109516">)</span><br>
<span class="lineno"></span><span class="op" id="2109518">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="2109521">func</span>&nbsp;<span class="ident" id="2109526">slicestringcopy</span><span class="op" id="2109541">(</span><span class="ident" id="2109542">to</span>&nbsp;<span class="op" id="2109545">[</span><span class="op" id="2109546">]</span><span class="builtintype" id="2109547">byte</span><span class="op" id="2109551">,</span>&nbsp;<span class="ident" id="2109553">fm</span>&nbsp;<span class="builtintype" id="2109556">string</span><span class="op" id="2109562">)</span>&nbsp;<span class="builtintype" id="2109564">int</span>&nbsp;<span class="op" id="2109568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109571">if</span>&nbsp;<span class="builtinfunc" id="2109574">len</span><span class="op" id="2109577">(</span><span class="ident" id="2109578"><a href="/runtime/slice.go.html#2109553">fm</a></span><span class="op" id="2109580">)</span>&nbsp;<span class="op" id="2109582">==</span>&nbsp;<span class="num" id="2109585">0</span>&nbsp;<span class="op" id="2109587">||</span>&nbsp;<span class="builtinfunc" id="2109590">len</span><span class="op" id="2109593">(</span><span class="ident" id="2109594"><a href="/runtime/slice.go.html#2109542">to</a></span><span class="op" id="2109596">)</span>&nbsp;<span class="op" id="2109598">==</span>&nbsp;<span class="num" id="2109601">0</span>&nbsp;<span class="op" id="2109603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109607">return</span>&nbsp;<span class="num" id="2109614">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109617">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109621">n</span>&nbsp;<span class="op" id="2109623">:=</span>&nbsp;<span class="builtinfunc" id="2109626">len</span><span class="op" id="2109629">(</span><span class="ident" id="2109630"><a href="/runtime/slice.go.html#2109553">fm</a></span><span class="op" id="2109632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109635">if</span>&nbsp;<span class="builtinfunc" id="2109638">len</span><span class="op" id="2109641">(</span><span class="ident" id="2109642"><a href="/runtime/slice.go.html#2109542">to</a></span><span class="op" id="2109644">)</span>&nbsp;<span class="op" id="2109646">&lt;</span>&nbsp;<span class="ident" id="2109648"><a href="/runtime/slice.go.html#2109621">n</a></span>&nbsp;<span class="op" id="2109650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109654"><a href="/runtime/slice.go.html#2109621">n</a></span>&nbsp;<span class="op" id="2109656">=</span>&nbsp;<span class="builtinfunc" id="2109658">len</span><span class="op" id="2109661">(</span><span class="ident" id="2109662"><a href="/runtime/slice.go.html#2109542">to</a></span><span class="op" id="2109664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109667">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109671">if</span>&nbsp;<span class="ident" id="2109674"><a href="/runtime/race0.go.html#2069616">raceenabled</a></span>&nbsp;<span class="op" id="2109686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109690">callerpc</span>&nbsp;<span class="op" id="2109699">:=</span>&nbsp;<span class="ident" id="2109702"><a href="/runtime/stubs.go.html#2139499">getcallerpc</a></span><span class="op" id="2109713">(</span><span class="ident" id="2109714"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2109720">.</span><span class="ident" id="2109721">Pointer</span><span class="op" id="2109728">(</span><span class="op" id="2109729">&amp;</span><span class="ident" id="2109730"><a href="/runtime/slice.go.html#2109542">to</a></span><span class="op" id="2109732">)</span><span class="op" id="2109733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109737">pc</span>&nbsp;<span class="op" id="2109740">:=</span>&nbsp;<span class="ident" id="2109743"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2109749">(</span><span class="ident" id="2109750"><a href="/runtime/slice.go.html#2109526">slicestringcopy</a></span><span class="op" id="2109765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109769"><a href="/runtime/race0.go.html#2070486">racewriterangepc</a></span><span class="op" id="2109785">(</span><span class="ident" id="2109786"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2109792">.</span><span class="ident" id="2109793">Pointer</span><span class="op" id="2109800">(</span><span class="op" id="2109801">&amp;</span><span class="ident" id="2109802"><a href="/runtime/slice.go.html#2109542">to</a></span><span class="op" id="2109804">[</span><span class="num" id="2109805">0</span><span class="op" id="2109806">]</span><span class="op" id="2109807">)</span><span class="op" id="2109808">,</span>&nbsp;<span class="builtintype" id="2109810">uintptr</span><span class="op" id="2109817">(</span><span class="ident" id="2109818"><a href="/runtime/slice.go.html#2109621">n</a></span><span class="op" id="2109819">)</span><span class="op" id="2109820">,</span>&nbsp;<span class="ident" id="2109822"><a href="/runtime/slice.go.html#2109690">callerpc</a></span><span class="op" id="2109830">,</span>&nbsp;<span class="ident" id="2109832"><a href="/runtime/slice.go.html#2109737">pc</a></span><span class="op" id="2109834">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2109837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2109841"><a href="/runtime/stubs.go.html#2135810">memmove</a></span><span class="op" id="2109848">(</span><span class="ident" id="2109849"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2109855">.</span><span class="ident" id="2109856">Pointer</span><span class="op" id="2109863">(</span><span class="op" id="2109864">&amp;</span><span class="ident" id="2109865"><a href="/runtime/slice.go.html#2109542">to</a></span><span class="op" id="2109867">[</span><span class="num" id="2109868">0</span><span class="op" id="2109869">]</span><span class="op" id="2109870">)</span><span class="op" id="2109871">,</span>&nbsp;<span class="ident" id="2109873"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2109879">.</span><span class="ident" id="2109880">Pointer</span><span class="op" id="2109887">(</span><span class="op" id="2109888">(</span><span class="op" id="2109889">*</span><span class="ident" id="2109890"><a href="/runtime/string.go.html#2127819">stringStruct</a></span><span class="op" id="2109902">)</span><span class="op" id="2109903">(</span><span class="ident" id="2109904"><a href="/runtime/slice.go.html#2106441">unsafe</a></span><span class="op" id="2109910">.</span><span class="ident" id="2109911">Pointer</span><span class="op" id="2109918">(</span><span class="op" id="2109919">&amp;</span><span class="ident" id="2109920"><a href="/runtime/slice.go.html#2109553">fm</a></span><span class="op" id="2109922">)</span><span class="op" id="2109923">)</span><span class="op" id="2109924">.</span><span class="ident" id="2109925">str</span><span class="op" id="2109928">)</span><span class="op" id="2109929">,</span>&nbsp;<span class="builtintype" id="2109931">uintptr</span><span class="op" id="2109938">(</span><span class="ident" id="2109939"><a href="/runtime/slice.go.html#2109621">n</a></span><span class="op" id="2109940">)</span><span class="op" id="2109941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2109944">return</span>&nbsp;<span class="ident" id="2109951"><a href="/runtime/slice.go.html#2109621">n</a></span><br>
<span class="lineno"></span><span class="op" id="2109953">}</span>
</div>
</body>
</html>
