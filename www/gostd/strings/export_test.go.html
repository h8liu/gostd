<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7012820">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7012875">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7012929">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7012980">package</span>&nbsp;<span class="ident" id="7012988">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7012997">func</span>&nbsp;<span class="op" id="7013002">(</span><span class="ident" id="7013003">r</span>&nbsp;<span class="op" id="7013005">*</span><span class="ident" id="7013006">Replacer</span><span class="op" id="7013014">)</span>&nbsp;<span class="ident" id="7013016">Replacer</span><span class="op" id="7013024">(</span><span class="op" id="7013025">)</span>&nbsp;<span class="keyword" id="7013027">interface</span><span class="op" id="7013036">{</span><span class="op" id="7013037">}</span>&nbsp;<span class="op" id="7013039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013042">return</span>&nbsp;<span class="ident" id="7013049">r</span><span class="op" id="7013050">.</span><span class="ident" id="7013051">r</span><br>
<span class="lineno"></span><span class="op" id="7013053">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7013056">func</span>&nbsp;<span class="op" id="7013061">(</span><span class="ident" id="7013062">r</span>&nbsp;<span class="op" id="7013064">*</span><span class="ident" id="7013065">Replacer</span><span class="op" id="7013073">)</span>&nbsp;<span class="ident" id="7013075">PrintTrie</span><span class="op" id="7013084">(</span><span class="op" id="7013085">)</span>&nbsp;<span class="builtintype" id="7013087">string</span>&nbsp;<span class="op" id="7013094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013097">gen</span>&nbsp;<span class="op" id="7013101">:=</span>&nbsp;<span class="ident" id="7013104">r</span><span class="op" id="7013105">.</span><span class="ident" id="7013106">r</span><span class="op" id="7013107">.</span><span class="op" id="7013108">(</span><span class="op" id="7013109">*</span><span class="ident" id="7013110">genericReplacer</span><span class="op" id="7013125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013128">return</span>&nbsp;<span class="ident" id="7013135">gen</span><span class="op" id="7013138">.</span><span class="ident" id="7013139">printNode</span><span class="op" id="7013148">(</span><span class="op" id="7013149">&amp;</span><span class="ident" id="7013150">gen</span><span class="op" id="7013153">.</span><span class="ident" id="7013154">root</span><span class="op" id="7013158">,</span>&nbsp;<span class="num" id="7013160">0</span><span class="op" id="7013161">)</span><br>
<span class="lineno"></span><span class="op" id="7013163">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7013166">func</span>&nbsp;<span class="op" id="7013171">(</span><span class="ident" id="7013172">r</span>&nbsp;<span class="op" id="7013174">*</span><span class="ident" id="7013175">genericReplacer</span><span class="op" id="7013190">)</span>&nbsp;<span class="ident" id="7013192">printNode</span><span class="op" id="7013201">(</span><span class="ident" id="7013202">t</span>&nbsp;<span class="op" id="7013204">*</span><span class="ident" id="7013205">trieNode</span><span class="op" id="7013213">,</span>&nbsp;<span class="ident" id="7013215">depth</span>&nbsp;<span class="builtintype" id="7013221">int</span><span class="op" id="7013224">)</span>&nbsp;<span class="op" id="7013226">(</span><span class="ident" id="7013227">s</span>&nbsp;<span class="builtintype" id="7013229">string</span><span class="op" id="7013235">)</span>&nbsp;<span class="op" id="7013237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013240">if</span>&nbsp;<span class="ident" id="7013243">t</span><span class="op" id="7013244">.</span><span class="ident" id="7013245">priority</span>&nbsp;<span class="op" id="7013254">&gt;</span>&nbsp;<span class="num" id="7013256">0</span>&nbsp;<span class="op" id="7013258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013262">s</span>&nbsp;<span class="op" id="7013264">+=</span>&nbsp;<span class="string" id="7013267">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013272">}</span>&nbsp;<span class="keyword" id="7013274">else</span>&nbsp;<span class="op" id="7013279">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013283">s</span>&nbsp;<span class="op" id="7013285">+=</span>&nbsp;<span class="string" id="7013288">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013296">s</span>&nbsp;<span class="op" id="7013298">+=</span>&nbsp;<span class="string" id="7013301">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013308">if</span>&nbsp;<span class="ident" id="7013311">t</span><span class="op" id="7013312">.</span><span class="ident" id="7013313">prefix</span>&nbsp;<span class="op" id="7013320">!=</span>&nbsp;<span class="string" id="7013323">&#34;&#34;</span>&nbsp;<span class="op" id="7013326">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013330">s</span>&nbsp;<span class="op" id="7013332">+=</span>&nbsp;<span class="ident" id="7013335">Repeat</span><span class="op" id="7013341">(</span><span class="string" id="7013342">&#34;.&#34;</span><span class="op" id="7013345">,</span>&nbsp;<span class="ident" id="7013347">depth</span><span class="op" id="7013352">)</span>&nbsp;<span class="op" id="7013354">+</span>&nbsp;<span class="ident" id="7013356">t</span><span class="op" id="7013357">.</span><span class="ident" id="7013358">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013367">s</span>&nbsp;<span class="op" id="7013369">+=</span>&nbsp;<span class="ident" id="7013372">r</span><span class="op" id="7013373">.</span><span class="ident" id="7013374">printNode</span><span class="op" id="7013383">(</span><span class="ident" id="7013384">t</span><span class="op" id="7013385">.</span><span class="ident" id="7013386">next</span><span class="op" id="7013390">,</span>&nbsp;<span class="ident" id="7013392">depth</span><span class="op" id="7013397">+</span><span class="builtinfunc" id="7013398">len</span><span class="op" id="7013401">(</span><span class="ident" id="7013402">t</span><span class="op" id="7013403">.</span><span class="ident" id="7013404">prefix</span><span class="op" id="7013410">)</span><span class="op" id="7013411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013414">}</span>&nbsp;<span class="keyword" id="7013416">else</span>&nbsp;<span class="keyword" id="7013421">if</span>&nbsp;<span class="ident" id="7013424">t</span><span class="op" id="7013425">.</span><span class="ident" id="7013426">table</span>&nbsp;<span class="op" id="7013432">!=</span>&nbsp;<span class="ident" id="7013435">nil</span>&nbsp;<span class="op" id="7013439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013443">for</span>&nbsp;<span class="ident" id="7013447">b</span><span class="op" id="7013448">,</span>&nbsp;<span class="ident" id="7013450">m</span>&nbsp;<span class="op" id="7013452">:=</span>&nbsp;<span class="keyword" id="7013455">range</span>&nbsp;<span class="ident" id="7013461">r</span><span class="op" id="7013462">.</span><span class="ident" id="7013463">mapping</span>&nbsp;<span class="op" id="7013471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013476">if</span>&nbsp;<span class="builtintype" id="7013479">int</span><span class="op" id="7013482">(</span><span class="ident" id="7013483">m</span><span class="op" id="7013484">)</span>&nbsp;<span class="op" id="7013486">!=</span>&nbsp;<span class="ident" id="7013489">r</span><span class="op" id="7013490">.</span><span class="ident" id="7013491">tableSize</span>&nbsp;<span class="op" id="7013501">&amp;&amp;</span>&nbsp;<span class="ident" id="7013504">t</span><span class="op" id="7013505">.</span><span class="ident" id="7013506">table</span><span class="op" id="7013511">[</span><span class="ident" id="7013512">m</span><span class="op" id="7013513">]</span>&nbsp;<span class="op" id="7013515">!=</span>&nbsp;<span class="ident" id="7013518">nil</span>&nbsp;<span class="op" id="7013522">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013528">s</span>&nbsp;<span class="op" id="7013530">+=</span>&nbsp;<span class="ident" id="7013533">Repeat</span><span class="op" id="7013539">(</span><span class="string" id="7013540">&#34;.&#34;</span><span class="op" id="7013543">,</span>&nbsp;<span class="ident" id="7013545">depth</span><span class="op" id="7013550">)</span>&nbsp;<span class="op" id="7013552">+</span>&nbsp;<span class="builtintype" id="7013554">string</span><span class="op" id="7013560">(</span><span class="op" id="7013561">[</span><span class="op" id="7013562">]</span><span class="builtintype" id="7013563">byte</span><span class="op" id="7013567">{</span><span class="builtintype" id="7013568">byte</span><span class="op" id="7013572">(</span><span class="ident" id="7013573">b</span><span class="op" id="7013574">)</span><span class="op" id="7013575">}</span><span class="op" id="7013576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013582">s</span>&nbsp;<span class="op" id="7013584">+=</span>&nbsp;<span class="ident" id="7013587">r</span><span class="op" id="7013588">.</span><span class="ident" id="7013589">printNode</span><span class="op" id="7013598">(</span><span class="ident" id="7013599">t</span><span class="op" id="7013600">.</span><span class="ident" id="7013601">table</span><span class="op" id="7013606">[</span><span class="ident" id="7013607">m</span><span class="op" id="7013608">]</span><span class="op" id="7013609">,</span>&nbsp;<span class="ident" id="7013611">depth</span><span class="op" id="7013616">+</span><span class="num" id="7013617">1</span><span class="op" id="7013618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013630">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013633">return</span><br>
<span class="lineno"></span><span class="op" id="7013640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7013643">func</span>&nbsp;<span class="ident" id="7013648">StringFind</span><span class="op" id="7013658">(</span><span class="ident" id="7013659">pattern</span><span class="op" id="7013666">,</span>&nbsp;<span class="ident" id="7013668">text</span>&nbsp;<span class="builtintype" id="7013673">string</span><span class="op" id="7013679">)</span>&nbsp;<span class="builtintype" id="7013681">int</span>&nbsp;<span class="op" id="7013685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013688">return</span>&nbsp;<span class="ident" id="7013695">makeStringFinder</span><span class="op" id="7013711">(</span><span class="ident" id="7013712">pattern</span><span class="op" id="7013719">)</span><span class="op" id="7013720">.</span><span class="ident" id="7013721">next</span><span class="op" id="7013725">(</span><span class="ident" id="7013726">text</span><span class="op" id="7013730">)</span><br>
<span class="lineno">40</span><span class="op" id="7013732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7013735">func</span>&nbsp;<span class="ident" id="7013740">DumpTables</span><span class="op" id="7013750">(</span><span class="ident" id="7013751">pattern</span>&nbsp;<span class="builtintype" id="7013759">string</span><span class="op" id="7013765">)</span>&nbsp;<span class="op" id="7013767">(</span><span class="op" id="7013768">[</span><span class="op" id="7013769">]</span><span class="builtintype" id="7013770">int</span><span class="op" id="7013773">,</span>&nbsp;<span class="op" id="7013775">[</span><span class="op" id="7013776">]</span><span class="builtintype" id="7013777">int</span><span class="op" id="7013780">)</span>&nbsp;<span class="op" id="7013782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013785">finder</span>&nbsp;<span class="op" id="7013792">:=</span>&nbsp;<span class="ident" id="7013795">makeStringFinder</span><span class="op" id="7013811">(</span><span class="ident" id="7013812">pattern</span><span class="op" id="7013819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013822">return</span>&nbsp;<span class="ident" id="7013829">finder</span><span class="op" id="7013835">.</span><span class="ident" id="7013836">badCharSkip</span><span class="op" id="7013847">[</span><span class="op" id="7013848">:</span><span class="op" id="7013849">]</span><span class="op" id="7013850">,</span>&nbsp;<span class="ident" id="7013852">finder</span><span class="op" id="7013858">.</span><span class="ident" id="7013859">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="7013874">}</span>
</div>
</body>
</html>
