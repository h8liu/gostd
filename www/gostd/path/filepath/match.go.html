<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3536932">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3536987">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3537041">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3537092">package</span>&nbsp;<span class="ident" id="3537100">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3537110">import</span>&nbsp;<span class="op" id="3537117">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3537120">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3537130">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3537136">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3537147">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3537155">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3537166">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3537181">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3537184">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3537245">var</span>&nbsp;<span class="ident" id="3537249">ErrBadPattern</span>&nbsp;<span class="op" id="3537263">=</span>&nbsp;<span class="ident" id="3537265">errors</span><span class="op" id="3537271">.</span><span class="ident" id="3537272">New</span><span class="op" id="3537275">(</span><span class="string" id="3537276">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3537301">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3537304">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3537371">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3537397">//</span><br>
<span class="lineno"></span><span class="comment" id="3537400">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="3537412">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3537425">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="3537434">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3537499">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3537558">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3537598">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3537650">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3537713">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3537749">//</span><br>
<span class="lineno"></span><span class="comment" id="3537752">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="3537772">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3537830">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3537866">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3537920">//</span><br>
<span class="lineno"></span><span class="comment" id="3537923">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3537993">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3538060">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3538077">//</span><br>
<span class="lineno"></span><span class="comment" id="3538080">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3538145">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3538164">//</span><br>
<span class="lineno"></span><span class="keyword" id="3538167">func</span>&nbsp;<span class="ident" id="3538172">Match</span><span class="op" id="3538177">(</span><span class="ident" id="3538178">pattern</span><span class="op" id="3538185">,</span>&nbsp;<span class="ident" id="3538187">name</span>&nbsp;<span class="builtintype" id="3538192">string</span><span class="op" id="3538198">)</span>&nbsp;<span class="op" id="3538200">(</span><span class="ident" id="3538201">matched</span>&nbsp;<span class="builtintype" id="3538209">bool</span><span class="op" id="3538213">,</span>&nbsp;<span class="ident" id="3538215">err</span>&nbsp;<span class="builtintype" id="3538219">error</span><span class="op" id="3538224">)</span>&nbsp;<span class="op" id="3538226">{</span><br>
<span class="lineno">45</span><span class="ident" id="3538228">Pattern</span><span class="op" id="3538235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538238">for</span>&nbsp;<span class="builtinfunc" id="3538242">len</span><span class="op" id="3538245">(</span><span class="ident" id="3538246">pattern</span><span class="op" id="3538253">)</span>&nbsp;<span class="op" id="3538255">&gt;</span>&nbsp;<span class="num" id="3538257">0</span>&nbsp;<span class="op" id="3538259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538263">var</span>&nbsp;<span class="ident" id="3538267">star</span>&nbsp;<span class="builtintype" id="3538272">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538279">var</span>&nbsp;<span class="ident" id="3538283">chunk</span>&nbsp;<span class="builtintype" id="3538289">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538298">star</span><span class="op" id="3538302">,</span>&nbsp;<span class="ident" id="3538304">chunk</span><span class="op" id="3538309">,</span>&nbsp;<span class="ident" id="3538311">pattern</span>&nbsp;<span class="op" id="3538319">=</span>&nbsp;<span class="ident" id="3538321">scanChunk</span><span class="op" id="3538330">(</span><span class="ident" id="3538331">pattern</span><span class="op" id="3538338">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538342">if</span>&nbsp;<span class="ident" id="3538345">star</span>&nbsp;<span class="op" id="3538350">&amp;&amp;</span>&nbsp;<span class="ident" id="3538353">chunk</span>&nbsp;<span class="op" id="3538359">==</span>&nbsp;<span class="string" id="3538362">&#34;&#34;</span>&nbsp;<span class="op" id="3538365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538370">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538429">return</span>&nbsp;<span class="ident" id="3538436">strings</span><span class="op" id="3538443">.</span><span class="ident" id="3538444">Index</span><span class="op" id="3538449">(</span><span class="ident" id="3538450">name</span><span class="op" id="3538454">,</span>&nbsp;<span class="builtintype" id="3538456">string</span><span class="op" id="3538462">(</span><span class="ident" id="3538463">Separator</span><span class="op" id="3538472">)</span><span class="op" id="3538473">)</span>&nbsp;<span class="op" id="3538475">&lt;</span>&nbsp;<span class="num" id="3538477">0</span><span class="op" id="3538478">,</span>&nbsp;<span class="ident" id="3538480">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3538486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538490">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538531">t</span><span class="op" id="3538532">,</span>&nbsp;<span class="ident" id="3538534">ok</span><span class="op" id="3538536">,</span>&nbsp;<span class="ident" id="3538538">err</span>&nbsp;<span class="op" id="3538542">:=</span>&nbsp;<span class="ident" id="3538545">matchChunk</span><span class="op" id="3538555">(</span><span class="ident" id="3538556">chunk</span><span class="op" id="3538561">,</span>&nbsp;<span class="ident" id="3538563">name</span><span class="op" id="3538567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538571">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538636">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538706">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538726">if</span>&nbsp;<span class="ident" id="3538729">ok</span>&nbsp;<span class="op" id="3538732">&amp;&amp;</span>&nbsp;<span class="op" id="3538735">(</span><span class="builtinfunc" id="3538736">len</span><span class="op" id="3538739">(</span><span class="ident" id="3538740">t</span><span class="op" id="3538741">)</span>&nbsp;<span class="op" id="3538743">==</span>&nbsp;<span class="num" id="3538746">0</span>&nbsp;<span class="op" id="3538748">||</span>&nbsp;<span class="builtinfunc" id="3538751">len</span><span class="op" id="3538754">(</span><span class="ident" id="3538755">pattern</span><span class="op" id="3538762">)</span>&nbsp;<span class="op" id="3538764">&gt;</span>&nbsp;<span class="num" id="3538766">0</span><span class="op" id="3538767">)</span>&nbsp;<span class="op" id="3538769">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538774">name</span>&nbsp;<span class="op" id="3538779">=</span>&nbsp;<span class="ident" id="3538781">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538786">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3538797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538801">if</span>&nbsp;<span class="ident" id="3538804">err</span>&nbsp;<span class="op" id="3538808">!=</span>&nbsp;<span class="ident" id="3538811">nil</span>&nbsp;<span class="op" id="3538815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538820">return</span>&nbsp;<span class="builtintype" id="3538827">false</span><span class="op" id="3538832">,</span>&nbsp;<span class="ident" id="3538834">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3538840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538844">if</span>&nbsp;<span class="ident" id="3538847">star</span>&nbsp;<span class="op" id="3538852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538857">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3538898">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538919">for</span>&nbsp;<span class="ident" id="3538923">i</span>&nbsp;<span class="op" id="3538925">:=</span>&nbsp;<span class="num" id="3538928">0</span><span class="op" id="3538929">;</span>&nbsp;<span class="ident" id="3538931">i</span>&nbsp;<span class="op" id="3538933">&lt;</span>&nbsp;<span class="builtinfunc" id="3538935">len</span><span class="op" id="3538938">(</span><span class="ident" id="3538939">name</span><span class="op" id="3538943">)</span>&nbsp;<span class="op" id="3538945">&amp;&amp;</span>&nbsp;<span class="ident" id="3538948">name</span><span class="op" id="3538952">[</span><span class="ident" id="3538953">i</span><span class="op" id="3538954">]</span>&nbsp;<span class="op" id="3538956">!=</span>&nbsp;<span class="ident" id="3538959">Separator</span><span class="op" id="3538968">;</span>&nbsp;<span class="ident" id="3538970">i</span><span class="op" id="3538971">++</span>&nbsp;<span class="op" id="3538974">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538980">t</span><span class="op" id="3538981">,</span>&nbsp;<span class="ident" id="3538983">ok</span><span class="op" id="3538985">,</span>&nbsp;<span class="ident" id="3538987">err</span>&nbsp;<span class="op" id="3538991">:=</span>&nbsp;<span class="ident" id="3538994">matchChunk</span><span class="op" id="3539004">(</span><span class="ident" id="3539005">chunk</span><span class="op" id="3539010">,</span>&nbsp;<span class="ident" id="3539012">name</span><span class="op" id="3539016">[</span><span class="ident" id="3539017">i</span><span class="op" id="3539018">+</span><span class="num" id="3539019">1</span><span class="op" id="3539020">:</span><span class="op" id="3539021">]</span><span class="op" id="3539022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539028">if</span>&nbsp;<span class="ident" id="3539031">ok</span>&nbsp;<span class="op" id="3539034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3539041">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539106">if</span>&nbsp;<span class="builtinfunc" id="3539109">len</span><span class="op" id="3539112">(</span><span class="ident" id="3539113">pattern</span><span class="op" id="3539120">)</span>&nbsp;<span class="op" id="3539122">==</span>&nbsp;<span class="num" id="3539125">0</span>&nbsp;<span class="op" id="3539127">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3539130">len</span><span class="op" id="3539133">(</span><span class="ident" id="3539134">t</span><span class="op" id="3539135">)</span>&nbsp;<span class="op" id="3539137">&gt;</span>&nbsp;<span class="num" id="3539139">0</span>&nbsp;<span class="op" id="3539141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539149">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539170">name</span>&nbsp;<span class="op" id="3539175">=</span>&nbsp;<span class="ident" id="3539177">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539184">continue</span>&nbsp;<span class="ident" id="3539193">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539211">if</span>&nbsp;<span class="ident" id="3539214">err</span>&nbsp;<span class="op" id="3539218">!=</span>&nbsp;<span class="ident" id="3539221">nil</span>&nbsp;<span class="op" id="3539225">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539232">return</span>&nbsp;<span class="builtintype" id="3539239">false</span><span class="op" id="3539244">,</span>&nbsp;<span class="ident" id="3539246">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539267">return</span>&nbsp;<span class="builtintype" id="3539274">false</span><span class="op" id="3539279">,</span>&nbsp;<span class="ident" id="3539281">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539289">return</span>&nbsp;<span class="builtinfunc" id="3539296">len</span><span class="op" id="3539299">(</span><span class="ident" id="3539300">name</span><span class="op" id="3539304">)</span>&nbsp;<span class="op" id="3539306">==</span>&nbsp;<span class="num" id="3539309">0</span><span class="op" id="3539310">,</span>&nbsp;<span class="ident" id="3539312">nil</span><br>
<span class="lineno"></span><span class="op" id="3539316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3539319">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3539393">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3539425">func</span>&nbsp;<span class="ident" id="3539430">scanChunk</span><span class="op" id="3539439">(</span><span class="ident" id="3539440">pattern</span>&nbsp;<span class="builtintype" id="3539448">string</span><span class="op" id="3539454">)</span>&nbsp;<span class="op" id="3539456">(</span><span class="ident" id="3539457">star</span>&nbsp;<span class="builtintype" id="3539462">bool</span><span class="op" id="3539466">,</span>&nbsp;<span class="ident" id="3539468">chunk</span><span class="op" id="3539473">,</span>&nbsp;<span class="ident" id="3539475">rest</span>&nbsp;<span class="builtintype" id="3539480">string</span><span class="op" id="3539486">)</span>&nbsp;<span class="op" id="3539488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539491">for</span>&nbsp;<span class="builtinfunc" id="3539495">len</span><span class="op" id="3539498">(</span><span class="ident" id="3539499">pattern</span><span class="op" id="3539506">)</span>&nbsp;<span class="op" id="3539508">&gt;</span>&nbsp;<span class="num" id="3539510">0</span>&nbsp;<span class="op" id="3539512">&amp;&amp;</span>&nbsp;<span class="ident" id="3539515">pattern</span><span class="op" id="3539522">[</span><span class="num" id="3539523">0</span><span class="op" id="3539524">]</span>&nbsp;<span class="op" id="3539526">==</span>&nbsp;<span class="string" id="3539529">&#39;*&#39;</span>&nbsp;<span class="op" id="3539533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539537">pattern</span>&nbsp;<span class="op" id="3539545">=</span>&nbsp;<span class="ident" id="3539547">pattern</span><span class="op" id="3539554">[</span><span class="num" id="3539555">1</span><span class="op" id="3539556">:</span><span class="op" id="3539557">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539561">star</span>&nbsp;<span class="op" id="3539566">=</span>&nbsp;<span class="builtintype" id="3539568">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539577">inrange</span>&nbsp;<span class="op" id="3539585">:=</span>&nbsp;<span class="builtintype" id="3539588">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539595">var</span>&nbsp;<span class="ident" id="3539599">i</span>&nbsp;<span class="builtintype" id="3539601">int</span><br>
<span class="lineno"></span><span class="ident" id="3539605">Scan</span><span class="op" id="3539609">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539612">for</span>&nbsp;<span class="ident" id="3539616">i</span>&nbsp;<span class="op" id="3539618">=</span>&nbsp;<span class="num" id="3539620">0</span><span class="op" id="3539621">;</span>&nbsp;<span class="ident" id="3539623">i</span>&nbsp;<span class="op" id="3539625">&lt;</span>&nbsp;<span class="builtinfunc" id="3539627">len</span><span class="op" id="3539630">(</span><span class="ident" id="3539631">pattern</span><span class="op" id="3539638">)</span><span class="op" id="3539639">;</span>&nbsp;<span class="ident" id="3539641">i</span><span class="op" id="3539642">++</span>&nbsp;<span class="op" id="3539645">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539649">switch</span>&nbsp;<span class="ident" id="3539656">pattern</span><span class="op" id="3539663">[</span><span class="ident" id="3539664">i</span><span class="op" id="3539665">]</span>&nbsp;<span class="op" id="3539667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539671">case</span>&nbsp;<span class="string" id="3539676">&#39;\\&#39;</span><span class="op" id="3539680">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539685">if</span>&nbsp;<span class="ident" id="3539688">runtime</span><span class="op" id="3539695">.</span><span class="ident" id="3539696">GOOS</span>&nbsp;<span class="op" id="3539701">!=</span>&nbsp;<span class="string" id="3539704">&#34;windows&#34;</span>&nbsp;<span class="op" id="3539714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3539720">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539775">if</span>&nbsp;<span class="ident" id="3539778">i</span><span class="op" id="3539779">+</span><span class="num" id="3539780">1</span>&nbsp;<span class="op" id="3539782">&lt;</span>&nbsp;<span class="builtinfunc" id="3539784">len</span><span class="op" id="3539787">(</span><span class="ident" id="3539788">pattern</span><span class="op" id="3539795">)</span>&nbsp;<span class="op" id="3539797">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539804">i</span><span class="op" id="3539805">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539821">case</span>&nbsp;<span class="string" id="3539826">&#39;[&#39;</span><span class="op" id="3539829">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539834">inrange</span>&nbsp;<span class="op" id="3539842">=</span>&nbsp;<span class="builtintype" id="3539844">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539851">case</span>&nbsp;<span class="string" id="3539856">&#39;]&#39;</span><span class="op" id="3539859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539864">inrange</span>&nbsp;<span class="op" id="3539872">=</span>&nbsp;<span class="builtintype" id="3539874">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539882">case</span>&nbsp;<span class="string" id="3539887">&#39;*&#39;</span><span class="op" id="3539890">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539895">if</span>&nbsp;<span class="op" id="3539898">!</span><span class="ident" id="3539899">inrange</span>&nbsp;<span class="op" id="3539907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539913">break</span>&nbsp;<span class="ident" id="3539919">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539937">return</span>&nbsp;<span class="ident" id="3539944">star</span><span class="op" id="3539948">,</span>&nbsp;<span class="ident" id="3539950">pattern</span><span class="op" id="3539957">[</span><span class="num" id="3539958">0</span><span class="op" id="3539959">:</span><span class="ident" id="3539960">i</span><span class="op" id="3539961">]</span><span class="op" id="3539962">,</span>&nbsp;<span class="ident" id="3539964">pattern</span><span class="op" id="3539971">[</span><span class="ident" id="3539972">i</span><span class="op" id="3539973">:</span><span class="op" id="3539974">]</span><br>
<span class="lineno"></span><span class="op" id="3539976">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3539979">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3540042">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3540101">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3540176">func</span>&nbsp;<span class="ident" id="3540181">matchChunk</span><span class="op" id="3540191">(</span><span class="ident" id="3540192">chunk</span><span class="op" id="3540197">,</span>&nbsp;<span class="ident" id="3540199">s</span>&nbsp;<span class="builtintype" id="3540201">string</span><span class="op" id="3540207">)</span>&nbsp;<span class="op" id="3540209">(</span><span class="ident" id="3540210">rest</span>&nbsp;<span class="builtintype" id="3540215">string</span><span class="op" id="3540221">,</span>&nbsp;<span class="ident" id="3540223">ok</span>&nbsp;<span class="builtintype" id="3540226">bool</span><span class="op" id="3540230">,</span>&nbsp;<span class="ident" id="3540232">err</span>&nbsp;<span class="builtintype" id="3540236">error</span><span class="op" id="3540241">)</span>&nbsp;<span class="op" id="3540243">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540246">for</span>&nbsp;<span class="builtinfunc" id="3540250">len</span><span class="op" id="3540253">(</span><span class="ident" id="3540254">chunk</span><span class="op" id="3540259">)</span>&nbsp;<span class="op" id="3540261">&gt;</span>&nbsp;<span class="num" id="3540263">0</span>&nbsp;<span class="op" id="3540265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540269">if</span>&nbsp;<span class="builtinfunc" id="3540272">len</span><span class="op" id="3540275">(</span><span class="ident" id="3540276">s</span><span class="op" id="3540277">)</span>&nbsp;<span class="op" id="3540279">==</span>&nbsp;<span class="num" id="3540282">0</span>&nbsp;<span class="op" id="3540284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540289">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540302">switch</span>&nbsp;<span class="ident" id="3540309">chunk</span><span class="op" id="3540314">[</span><span class="num" id="3540315">0</span><span class="op" id="3540316">]</span>&nbsp;<span class="op" id="3540318">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540322">case</span>&nbsp;<span class="string" id="3540327">&#39;[&#39;</span><span class="op" id="3540330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3540335">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540357">r</span><span class="op" id="3540358">,</span>&nbsp;<span class="ident" id="3540360">n</span>&nbsp;<span class="op" id="3540362">:=</span>&nbsp;<span class="ident" id="3540365">utf8</span><span class="op" id="3540369">.</span><span class="ident" id="3540370">DecodeRuneInString</span><span class="op" id="3540388">(</span><span class="ident" id="3540389">s</span><span class="op" id="3540390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540395">s</span>&nbsp;<span class="op" id="3540397">=</span>&nbsp;<span class="ident" id="3540399">s</span><span class="op" id="3540400">[</span><span class="ident" id="3540401">n</span><span class="op" id="3540402">:</span><span class="op" id="3540403">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540408">chunk</span>&nbsp;<span class="op" id="3540414">=</span>&nbsp;<span class="ident" id="3540416">chunk</span><span class="op" id="3540421">[</span><span class="num" id="3540422">1</span><span class="op" id="3540423">:</span><span class="op" id="3540424">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3540429">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3540490">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540536">if</span>&nbsp;<span class="builtinfunc" id="3540539">len</span><span class="op" id="3540542">(</span><span class="ident" id="3540543">chunk</span><span class="op" id="3540548">)</span>&nbsp;<span class="op" id="3540550">==</span>&nbsp;<span class="num" id="3540553">0</span>&nbsp;<span class="op" id="3540555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540561">err</span>&nbsp;<span class="op" id="3540565">=</span>&nbsp;<span class="ident" id="3540567">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540585">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3540600">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540623">negated</span>&nbsp;<span class="op" id="3540631">:=</span>&nbsp;<span class="ident" id="3540634">chunk</span><span class="op" id="3540639">[</span><span class="num" id="3540640">0</span><span class="op" id="3540641">]</span>&nbsp;<span class="op" id="3540643">==</span>&nbsp;<span class="string" id="3540646">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540653">if</span>&nbsp;<span class="ident" id="3540656">negated</span>&nbsp;<span class="op" id="3540664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540670">chunk</span>&nbsp;<span class="op" id="3540676">=</span>&nbsp;<span class="ident" id="3540678">chunk</span><span class="op" id="3540683">[</span><span class="num" id="3540684">1</span><span class="op" id="3540685">:</span><span class="op" id="3540686">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3540696">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540719">match</span>&nbsp;<span class="op" id="3540725">:=</span>&nbsp;<span class="builtintype" id="3540728">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540737">nrange</span>&nbsp;<span class="op" id="3540744">:=</span>&nbsp;<span class="num" id="3540747">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540752">for</span>&nbsp;<span class="op" id="3540756">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540762">if</span>&nbsp;<span class="builtinfunc" id="3540765">len</span><span class="op" id="3540768">(</span><span class="ident" id="3540769">chunk</span><span class="op" id="3540774">)</span>&nbsp;<span class="op" id="3540776">&gt;</span>&nbsp;<span class="num" id="3540778">0</span>&nbsp;<span class="op" id="3540780">&amp;&amp;</span>&nbsp;<span class="ident" id="3540783">chunk</span><span class="op" id="3540788">[</span><span class="num" id="3540789">0</span><span class="op" id="3540790">]</span>&nbsp;<span class="op" id="3540792">==</span>&nbsp;<span class="string" id="3540795">&#39;]&#39;</span>&nbsp;<span class="op" id="3540799">&amp;&amp;</span>&nbsp;<span class="ident" id="3540802">nrange</span>&nbsp;<span class="op" id="3540809">&gt;</span>&nbsp;<span class="num" id="3540811">0</span>&nbsp;<span class="op" id="3540813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540820">chunk</span>&nbsp;<span class="op" id="3540826">=</span>&nbsp;<span class="ident" id="3540828">chunk</span><span class="op" id="3540833">[</span><span class="num" id="3540834">1</span><span class="op" id="3540835">:</span><span class="op" id="3540836">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540843">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540859">var</span>&nbsp;<span class="ident" id="3540863">lo</span><span class="op" id="3540865">,</span>&nbsp;<span class="ident" id="3540867">hi</span>&nbsp;<span class="builtintype" id="3540870">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540879">if</span>&nbsp;<span class="ident" id="3540882">lo</span><span class="op" id="3540884">,</span>&nbsp;<span class="ident" id="3540886">chunk</span><span class="op" id="3540891">,</span>&nbsp;<span class="ident" id="3540893">err</span>&nbsp;<span class="op" id="3540897">=</span>&nbsp;<span class="ident" id="3540899">getEsc</span><span class="op" id="3540905">(</span><span class="ident" id="3540906">chunk</span><span class="op" id="3540911">)</span><span class="op" id="3540912">;</span>&nbsp;<span class="ident" id="3540914">err</span>&nbsp;<span class="op" id="3540918">!=</span>&nbsp;<span class="ident" id="3540921">nil</span>&nbsp;<span class="op" id="3540925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540932">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540949">hi</span>&nbsp;<span class="op" id="3540952">=</span>&nbsp;<span class="ident" id="3540954">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540961">if</span>&nbsp;<span class="ident" id="3540964">chunk</span><span class="op" id="3540969">[</span><span class="num" id="3540970">0</span><span class="op" id="3540971">]</span>&nbsp;<span class="op" id="3540973">==</span>&nbsp;<span class="string" id="3540976">&#39;-&#39;</span>&nbsp;<span class="op" id="3540980">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540987">if</span>&nbsp;<span class="ident" id="3540990">hi</span><span class="op" id="3540992">,</span>&nbsp;<span class="ident" id="3540994">chunk</span><span class="op" id="3540999">,</span>&nbsp;<span class="ident" id="3541001">err</span>&nbsp;<span class="op" id="3541005">=</span>&nbsp;<span class="ident" id="3541007">getEsc</span><span class="op" id="3541013">(</span><span class="ident" id="3541014">chunk</span><span class="op" id="3541019">[</span><span class="num" id="3541020">1</span><span class="op" id="3541021">:</span><span class="op" id="3541022">]</span><span class="op" id="3541023">)</span><span class="op" id="3541024">;</span>&nbsp;<span class="ident" id="3541026">err</span>&nbsp;<span class="op" id="3541030">!=</span>&nbsp;<span class="ident" id="3541033">nil</span>&nbsp;<span class="op" id="3541037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541045">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541069">if</span>&nbsp;<span class="ident" id="3541072">lo</span>&nbsp;<span class="op" id="3541075">&lt;=</span>&nbsp;<span class="ident" id="3541078">r</span>&nbsp;<span class="op" id="3541080">&amp;&amp;</span>&nbsp;<span class="ident" id="3541083">r</span>&nbsp;<span class="op" id="3541085">&lt;=</span>&nbsp;<span class="ident" id="3541088">hi</span>&nbsp;<span class="op" id="3541091">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541098">match</span>&nbsp;<span class="op" id="3541104">=</span>&nbsp;<span class="builtintype" id="3541106">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541121">nrange</span><span class="op" id="3541127">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541138">if</span>&nbsp;<span class="ident" id="3541141">match</span>&nbsp;<span class="op" id="3541147">==</span>&nbsp;<span class="ident" id="3541150">negated</span>&nbsp;<span class="op" id="3541158">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541164">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541179">case</span>&nbsp;<span class="string" id="3541184">&#39;?&#39;</span><span class="op" id="3541187">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541192">if</span>&nbsp;<span class="ident" id="3541195">s</span><span class="op" id="3541196">[</span><span class="num" id="3541197">0</span><span class="op" id="3541198">]</span>&nbsp;<span class="op" id="3541200">==</span>&nbsp;<span class="ident" id="3541203">Separator</span>&nbsp;<span class="op" id="3541213">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541219">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541234">_</span><span class="op" id="3541235">,</span>&nbsp;<span class="ident" id="3541237">n</span>&nbsp;<span class="op" id="3541239">:=</span>&nbsp;<span class="ident" id="3541242">utf8</span><span class="op" id="3541246">.</span><span class="ident" id="3541247">DecodeRuneInString</span><span class="op" id="3541265">(</span><span class="ident" id="3541266">s</span><span class="op" id="3541267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541272">s</span>&nbsp;<span class="op" id="3541274">=</span>&nbsp;<span class="ident" id="3541276">s</span><span class="op" id="3541277">[</span><span class="ident" id="3541278">n</span><span class="op" id="3541279">:</span><span class="op" id="3541280">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541285">chunk</span>&nbsp;<span class="op" id="3541291">=</span>&nbsp;<span class="ident" id="3541293">chunk</span><span class="op" id="3541298">[</span><span class="num" id="3541299">1</span><span class="op" id="3541300">:</span><span class="op" id="3541301">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541306">case</span>&nbsp;<span class="string" id="3541311">&#39;\\&#39;</span><span class="op" id="3541315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541320">if</span>&nbsp;<span class="ident" id="3541323">runtime</span><span class="op" id="3541330">.</span><span class="ident" id="3541331">GOOS</span>&nbsp;<span class="op" id="3541336">!=</span>&nbsp;<span class="string" id="3541339">&#34;windows&#34;</span>&nbsp;<span class="op" id="3541349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541355">chunk</span>&nbsp;<span class="op" id="3541361">=</span>&nbsp;<span class="ident" id="3541363">chunk</span><span class="op" id="3541368">[</span><span class="num" id="3541369">1</span><span class="op" id="3541370">:</span><span class="op" id="3541371">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541377">if</span>&nbsp;<span class="builtinfunc" id="3541380">len</span><span class="op" id="3541383">(</span><span class="ident" id="3541384">chunk</span><span class="op" id="3541389">)</span>&nbsp;<span class="op" id="3541391">==</span>&nbsp;<span class="num" id="3541394">0</span>&nbsp;<span class="op" id="3541396">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541403">err</span>&nbsp;<span class="op" id="3541407">=</span>&nbsp;<span class="ident" id="3541409">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541428">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541449">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541464">default</span><span class="op" id="3541471">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541476">if</span>&nbsp;<span class="ident" id="3541479">chunk</span><span class="op" id="3541484">[</span><span class="num" id="3541485">0</span><span class="op" id="3541486">]</span>&nbsp;<span class="op" id="3541488">!=</span>&nbsp;<span class="ident" id="3541491">s</span><span class="op" id="3541492">[</span><span class="num" id="3541493">0</span><span class="op" id="3541494">]</span>&nbsp;<span class="op" id="3541496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541502">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541512">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541517">s</span>&nbsp;<span class="op" id="3541519">=</span>&nbsp;<span class="ident" id="3541521">s</span><span class="op" id="3541522">[</span><span class="num" id="3541523">1</span><span class="op" id="3541524">:</span><span class="op" id="3541525">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541530">chunk</span>&nbsp;<span class="op" id="3541536">=</span>&nbsp;<span class="ident" id="3541538">chunk</span><span class="op" id="3541543">[</span><span class="num" id="3541544">1</span><span class="op" id="3541545">:</span><span class="op" id="3541546">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541556">return</span>&nbsp;<span class="ident" id="3541563">s</span><span class="op" id="3541564">,</span>&nbsp;<span class="builtintype" id="3541566">true</span><span class="op" id="3541570">,</span>&nbsp;<span class="ident" id="3541572">nil</span><br>
<span class="lineno">200</span><span class="op" id="3541576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3541579">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3541658">func</span>&nbsp;<span class="ident" id="3541663">getEsc</span><span class="op" id="3541669">(</span><span class="ident" id="3541670">chunk</span>&nbsp;<span class="builtintype" id="3541676">string</span><span class="op" id="3541682">)</span>&nbsp;<span class="op" id="3541684">(</span><span class="ident" id="3541685">r</span>&nbsp;<span class="builtintype" id="3541687">rune</span><span class="op" id="3541691">,</span>&nbsp;<span class="ident" id="3541693">nchunk</span>&nbsp;<span class="builtintype" id="3541700">string</span><span class="op" id="3541706">,</span>&nbsp;<span class="ident" id="3541708">err</span>&nbsp;<span class="builtintype" id="3541712">error</span><span class="op" id="3541717">)</span>&nbsp;<span class="op" id="3541719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541722">if</span>&nbsp;<span class="builtinfunc" id="3541725">len</span><span class="op" id="3541728">(</span><span class="ident" id="3541729">chunk</span><span class="op" id="3541734">)</span>&nbsp;<span class="op" id="3541736">==</span>&nbsp;<span class="num" id="3541739">0</span>&nbsp;<span class="op" id="3541741">||</span>&nbsp;<span class="ident" id="3541744">chunk</span><span class="op" id="3541749">[</span><span class="num" id="3541750">0</span><span class="op" id="3541751">]</span>&nbsp;<span class="op" id="3541753">==</span>&nbsp;<span class="string" id="3541756">&#39;-&#39;</span>&nbsp;<span class="op" id="3541760">||</span>&nbsp;<span class="ident" id="3541763">chunk</span><span class="op" id="3541768">[</span><span class="num" id="3541769">0</span><span class="op" id="3541770">]</span>&nbsp;<span class="op" id="3541772">==</span>&nbsp;<span class="string" id="3541775">&#39;]&#39;</span>&nbsp;<span class="op" id="3541779">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541783">err</span>&nbsp;<span class="op" id="3541787">=</span>&nbsp;<span class="ident" id="3541789">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541805">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541816">if</span>&nbsp;<span class="ident" id="3541819">chunk</span><span class="op" id="3541824">[</span><span class="num" id="3541825">0</span><span class="op" id="3541826">]</span>&nbsp;<span class="op" id="3541828">==</span>&nbsp;<span class="string" id="3541831">&#39;\\&#39;</span>&nbsp;<span class="op" id="3541836">&amp;&amp;</span>&nbsp;<span class="ident" id="3541839">runtime</span><span class="op" id="3541846">.</span><span class="ident" id="3541847">GOOS</span>&nbsp;<span class="op" id="3541852">!=</span>&nbsp;<span class="string" id="3541855">&#34;windows&#34;</span>&nbsp;<span class="op" id="3541865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541869">chunk</span>&nbsp;<span class="op" id="3541875">=</span>&nbsp;<span class="ident" id="3541877">chunk</span><span class="op" id="3541882">[</span><span class="num" id="3541883">1</span><span class="op" id="3541884">:</span><span class="op" id="3541885">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541889">if</span>&nbsp;<span class="builtinfunc" id="3541892">len</span><span class="op" id="3541895">(</span><span class="ident" id="3541896">chunk</span><span class="op" id="3541901">)</span>&nbsp;<span class="op" id="3541903">==</span>&nbsp;<span class="num" id="3541906">0</span>&nbsp;<span class="op" id="3541908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541913">err</span>&nbsp;<span class="op" id="3541917">=</span>&nbsp;<span class="ident" id="3541919">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541936">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3541948">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3541951">r</span><span class="op" id="3541952">,</span>&nbsp;<span class="ident" id="3541954">n</span>&nbsp;<span class="op" id="3541956">:=</span>&nbsp;<span class="ident" id="3541959">utf8</span><span class="op" id="3541963">.</span><span class="ident" id="3541964">DecodeRuneInString</span><span class="op" id="3541982">(</span><span class="ident" id="3541983">chunk</span><span class="op" id="3541988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3541991">if</span>&nbsp;<span class="ident" id="3541994">r</span>&nbsp;<span class="op" id="3541996">==</span>&nbsp;<span class="ident" id="3541999">utf8</span><span class="op" id="3542003">.</span><span class="ident" id="3542004">RuneError</span>&nbsp;<span class="op" id="3542014">&amp;&amp;</span>&nbsp;<span class="ident" id="3542017">n</span>&nbsp;<span class="op" id="3542019">==</span>&nbsp;<span class="num" id="3542022">1</span>&nbsp;<span class="op" id="3542024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542028">err</span>&nbsp;<span class="op" id="3542032">=</span>&nbsp;<span class="ident" id="3542034">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542052">nchunk</span>&nbsp;<span class="op" id="3542059">=</span>&nbsp;<span class="ident" id="3542061">chunk</span><span class="op" id="3542066">[</span><span class="ident" id="3542067">n</span><span class="op" id="3542068">:</span><span class="op" id="3542069">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542072">if</span>&nbsp;<span class="builtinfunc" id="3542075">len</span><span class="op" id="3542078">(</span><span class="ident" id="3542079">nchunk</span><span class="op" id="3542085">)</span>&nbsp;<span class="op" id="3542087">==</span>&nbsp;<span class="num" id="3542090">0</span>&nbsp;<span class="op" id="3542092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542096">err</span>&nbsp;<span class="op" id="3542100">=</span>&nbsp;<span class="ident" id="3542102">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542120">return</span><br>
<span class="lineno"></span><span class="op" id="3542127">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3542130">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3542193">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3542261">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3542329">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3542379">//</span><br>
<span class="lineno"></span><span class="comment" id="3542382">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3542457">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3542524">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3542541">func</span>&nbsp;<span class="ident" id="3542546">Glob</span><span class="op" id="3542550">(</span><span class="ident" id="3542551">pattern</span>&nbsp;<span class="builtintype" id="3542559">string</span><span class="op" id="3542565">)</span>&nbsp;<span class="op" id="3542567">(</span><span class="ident" id="3542568">matches</span>&nbsp;<span class="op" id="3542576">[</span><span class="op" id="3542577">]</span><span class="builtintype" id="3542578">string</span><span class="op" id="3542584">,</span>&nbsp;<span class="ident" id="3542586">err</span>&nbsp;<span class="builtintype" id="3542590">error</span><span class="op" id="3542595">)</span>&nbsp;<span class="op" id="3542597">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542600">if</span>&nbsp;<span class="op" id="3542603">!</span><span class="ident" id="3542604">hasMeta</span><span class="op" id="3542611">(</span><span class="ident" id="3542612">pattern</span><span class="op" id="3542619">)</span>&nbsp;<span class="op" id="3542621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542625">if</span>&nbsp;<span class="ident" id="3542628">_</span><span class="op" id="3542629">,</span>&nbsp;<span class="ident" id="3542631">err</span>&nbsp;<span class="op" id="3542635">=</span>&nbsp;<span class="ident" id="3542637">os</span><span class="op" id="3542639">.</span><span class="ident" id="3542640">Lstat</span><span class="op" id="3542645">(</span><span class="ident" id="3542646">pattern</span><span class="op" id="3542653">)</span><span class="op" id="3542654">;</span>&nbsp;<span class="ident" id="3542656">err</span>&nbsp;<span class="op" id="3542660">!=</span>&nbsp;<span class="ident" id="3542663">nil</span>&nbsp;<span class="op" id="3542667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542672">return</span>&nbsp;<span class="ident" id="3542679">nil</span><span class="op" id="3542682">,</span>&nbsp;<span class="ident" id="3542684">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542694">return</span>&nbsp;<span class="op" id="3542701">[</span><span class="op" id="3542702">]</span><span class="builtintype" id="3542703">string</span><span class="op" id="3542709">{</span><span class="ident" id="3542710">pattern</span><span class="op" id="3542717">}</span><span class="op" id="3542718">,</span>&nbsp;<span class="ident" id="3542720">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542729">dir</span><span class="op" id="3542732">,</span>&nbsp;<span class="ident" id="3542734">file</span>&nbsp;<span class="op" id="3542739">:=</span>&nbsp;<span class="ident" id="3542742">Split</span><span class="op" id="3542747">(</span><span class="ident" id="3542748">pattern</span><span class="op" id="3542755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542758">switch</span>&nbsp;<span class="ident" id="3542765">dir</span>&nbsp;<span class="op" id="3542769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542772">case</span>&nbsp;<span class="string" id="3542777">&#34;&#34;</span><span class="op" id="3542779">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542783">dir</span>&nbsp;<span class="op" id="3542787">=</span>&nbsp;<span class="string" id="3542789">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542794">case</span>&nbsp;<span class="builtintype" id="3542799">string</span><span class="op" id="3542805">(</span><span class="ident" id="3542806">Separator</span><span class="op" id="3542815">)</span><span class="op" id="3542816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542820">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542832">default</span><span class="op" id="3542839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542843">dir</span>&nbsp;<span class="op" id="3542847">=</span>&nbsp;<span class="ident" id="3542849">dir</span><span class="op" id="3542852">[</span><span class="num" id="3542853">0</span>&nbsp;<span class="op" id="3542855">:</span>&nbsp;<span class="builtinfunc" id="3542857">len</span><span class="op" id="3542860">(</span><span class="ident" id="3542861">dir</span><span class="op" id="3542864">)</span><span class="op" id="3542865">-</span><span class="num" id="3542866">1</span><span class="op" id="3542867">]</span>&nbsp;<span class="comment" id="3542869">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542905">if</span>&nbsp;<span class="op" id="3542908">!</span><span class="ident" id="3542909">hasMeta</span><span class="op" id="3542916">(</span><span class="ident" id="3542917">dir</span><span class="op" id="3542920">)</span>&nbsp;<span class="op" id="3542922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542926">return</span>&nbsp;<span class="ident" id="3542933">glob</span><span class="op" id="3542937">(</span><span class="ident" id="3542938">dir</span><span class="op" id="3542941">,</span>&nbsp;<span class="ident" id="3542943">file</span><span class="op" id="3542947">,</span>&nbsp;<span class="ident" id="3542949">nil</span><span class="op" id="3542952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542955">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542959">var</span>&nbsp;<span class="ident" id="3542963">m</span>&nbsp;<span class="op" id="3542965">[</span><span class="op" id="3542966">]</span><span class="builtintype" id="3542967">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542975">m</span><span class="op" id="3542976">,</span>&nbsp;<span class="ident" id="3542978">err</span>&nbsp;<span class="op" id="3542982">=</span>&nbsp;<span class="ident" id="3542984">Glob</span><span class="op" id="3542988">(</span><span class="ident" id="3542989">dir</span><span class="op" id="3542992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542995">if</span>&nbsp;<span class="ident" id="3542998">err</span>&nbsp;<span class="op" id="3543002">!=</span>&nbsp;<span class="ident" id="3543005">nil</span>&nbsp;<span class="op" id="3543009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543013">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543024">for</span>&nbsp;<span class="ident" id="3543028">_</span><span class="op" id="3543029">,</span>&nbsp;<span class="ident" id="3543031">d</span>&nbsp;<span class="op" id="3543033">:=</span>&nbsp;<span class="keyword" id="3543036">range</span>&nbsp;<span class="ident" id="3543042">m</span>&nbsp;<span class="op" id="3543044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543048">matches</span><span class="op" id="3543055">,</span>&nbsp;<span class="ident" id="3543057">err</span>&nbsp;<span class="op" id="3543061">=</span>&nbsp;<span class="ident" id="3543063">glob</span><span class="op" id="3543067">(</span><span class="ident" id="3543068">d</span><span class="op" id="3543069">,</span>&nbsp;<span class="ident" id="3543071">file</span><span class="op" id="3543075">,</span>&nbsp;<span class="ident" id="3543077">matches</span><span class="op" id="3543084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543088">if</span>&nbsp;<span class="ident" id="3543091">err</span>&nbsp;<span class="op" id="3543095">!=</span>&nbsp;<span class="ident" id="3543098">nil</span>&nbsp;<span class="op" id="3543102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543107">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543122">return</span><br>
<span class="lineno"></span><span class="op" id="3543129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3543132">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3543197">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3543256">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3543316">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3543351">func</span>&nbsp;<span class="ident" id="3543356">glob</span><span class="op" id="3543360">(</span><span class="ident" id="3543361">dir</span><span class="op" id="3543364">,</span>&nbsp;<span class="ident" id="3543366">pattern</span>&nbsp;<span class="builtintype" id="3543374">string</span><span class="op" id="3543380">,</span>&nbsp;<span class="ident" id="3543382">matches</span>&nbsp;<span class="op" id="3543390">[</span><span class="op" id="3543391">]</span><span class="builtintype" id="3543392">string</span><span class="op" id="3543398">)</span>&nbsp;<span class="op" id="3543400">(</span><span class="ident" id="3543401">m</span>&nbsp;<span class="op" id="3543403">[</span><span class="op" id="3543404">]</span><span class="builtintype" id="3543405">string</span><span class="op" id="3543411">,</span>&nbsp;<span class="ident" id="3543413">e</span>&nbsp;<span class="builtintype" id="3543415">error</span><span class="op" id="3543420">)</span>&nbsp;<span class="op" id="3543422">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543425">m</span>&nbsp;<span class="op" id="3543427">=</span>&nbsp;<span class="ident" id="3543429">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543438">fi</span><span class="op" id="3543440">,</span>&nbsp;<span class="ident" id="3543442">err</span>&nbsp;<span class="op" id="3543446">:=</span>&nbsp;<span class="ident" id="3543449">os</span><span class="op" id="3543451">.</span><span class="ident" id="3543452">Stat</span><span class="op" id="3543456">(</span><span class="ident" id="3543457">dir</span><span class="op" id="3543460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543463">if</span>&nbsp;<span class="ident" id="3543466">err</span>&nbsp;<span class="op" id="3543470">!=</span>&nbsp;<span class="ident" id="3543473">nil</span>&nbsp;<span class="op" id="3543477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543481">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543489">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543492">if</span>&nbsp;<span class="op" id="3543495">!</span><span class="ident" id="3543496">fi</span><span class="op" id="3543498">.</span><span class="ident" id="3543499">IsDir</span><span class="op" id="3543504">(</span><span class="op" id="3543505">)</span>&nbsp;<span class="op" id="3543507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543511">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543522">d</span><span class="op" id="3543523">,</span>&nbsp;<span class="ident" id="3543525">err</span>&nbsp;<span class="op" id="3543529">:=</span>&nbsp;<span class="ident" id="3543532">os</span><span class="op" id="3543534">.</span><span class="ident" id="3543535">Open</span><span class="op" id="3543539">(</span><span class="ident" id="3543540">dir</span><span class="op" id="3543543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543546">if</span>&nbsp;<span class="ident" id="3543549">err</span>&nbsp;<span class="op" id="3543553">!=</span>&nbsp;<span class="ident" id="3543556">nil</span>&nbsp;<span class="op" id="3543560">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543564">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543575">defer</span>&nbsp;<span class="ident" id="3543581">d</span><span class="op" id="3543582">.</span><span class="ident" id="3543583">Close</span><span class="op" id="3543588">(</span><span class="op" id="3543589">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543593">names</span><span class="op" id="3543598">,</span>&nbsp;<span class="ident" id="3543600">_</span>&nbsp;<span class="op" id="3543602">:=</span>&nbsp;<span class="ident" id="3543605">d</span><span class="op" id="3543606">.</span><span class="ident" id="3543607">Readdirnames</span><span class="op" id="3543619">(</span><span class="op" id="3543620">-</span><span class="num" id="3543621">1</span><span class="op" id="3543622">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543625">sort</span><span class="op" id="3543629">.</span><span class="ident" id="3543630">Strings</span><span class="op" id="3543637">(</span><span class="ident" id="3543638">names</span><span class="op" id="3543643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543647">for</span>&nbsp;<span class="ident" id="3543651">_</span><span class="op" id="3543652">,</span>&nbsp;<span class="ident" id="3543654">n</span>&nbsp;<span class="op" id="3543656">:=</span>&nbsp;<span class="keyword" id="3543659">range</span>&nbsp;<span class="ident" id="3543665">names</span>&nbsp;<span class="op" id="3543671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543675">matched</span><span class="op" id="3543682">,</span>&nbsp;<span class="ident" id="3543684">err</span>&nbsp;<span class="op" id="3543688">:=</span>&nbsp;<span class="ident" id="3543691">Match</span><span class="op" id="3543696">(</span><span class="ident" id="3543697">pattern</span><span class="op" id="3543704">,</span>&nbsp;<span class="ident" id="3543706">n</span><span class="op" id="3543707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543711">if</span>&nbsp;<span class="ident" id="3543714">err</span>&nbsp;<span class="op" id="3543718">!=</span>&nbsp;<span class="ident" id="3543721">nil</span>&nbsp;<span class="op" id="3543725">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543730">return</span>&nbsp;<span class="ident" id="3543737">m</span><span class="op" id="3543738">,</span>&nbsp;<span class="ident" id="3543740">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543750">if</span>&nbsp;<span class="ident" id="3543753">matched</span>&nbsp;<span class="op" id="3543761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543766">m</span>&nbsp;<span class="op" id="3543768">=</span>&nbsp;<span class="builtinfunc" id="3543770">append</span><span class="op" id="3543776">(</span><span class="ident" id="3543777">m</span><span class="op" id="3543778">,</span>&nbsp;<span class="ident" id="3543780">Join</span><span class="op" id="3543784">(</span><span class="ident" id="3543785">dir</span><span class="op" id="3543788">,</span>&nbsp;<span class="ident" id="3543790">n</span><span class="op" id="3543791">)</span><span class="op" id="3543792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543796">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543802">return</span><br>
<span class="lineno"></span><span class="op" id="3543809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3543812">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3543881">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3543905">func</span>&nbsp;<span class="ident" id="3543910">hasMeta</span><span class="op" id="3543917">(</span><span class="ident" id="3543918">path</span>&nbsp;<span class="builtintype" id="3543923">string</span><span class="op" id="3543929">)</span>&nbsp;<span class="builtintype" id="3543931">bool</span>&nbsp;<span class="op" id="3543936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3543939">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544004">return</span>&nbsp;<span class="ident" id="3544011">strings</span><span class="op" id="3544018">.</span><span class="ident" id="3544019">IndexAny</span><span class="op" id="3544027">(</span><span class="ident" id="3544028">path</span><span class="op" id="3544032">,</span>&nbsp;<span class="string" id="3544034">&#34;*?[&#34;</span><span class="op" id="3544039">)</span>&nbsp;<span class="op" id="3544041">&gt;=</span>&nbsp;<span class="num" id="3544044">0</span><br>
<span class="lineno"></span><span class="op" id="3544046">}</span>
</div>
</body>
</html>
