<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html" class="current">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3290352">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3290407">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3290461">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3290512">package</span>&nbsp;<span class="ident" id="3290520">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3290529">import</span>&nbsp;<span class="op" id="3290536">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3290539">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3290546">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3290558">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3290564">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="3290571">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3290574">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="3290632">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3290690">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="3290751">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="3290762">//</span><br>
<span class="lineno"></span><span class="keyword" id="3290765">type</span>&nbsp;<span class="ident" id="3290770">Error</span>&nbsp;<span class="keyword" id="3290776">struct</span>&nbsp;<span class="op" id="3290783">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290786">Pos</span>&nbsp;<span class="ident" id="3290790">token</span><span class="op" id="3290795">.</span><span class="ident" id="3290796">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290806">Msg</span>&nbsp;<span class="builtintype" id="3290810">string</span><br>
<span class="lineno"></span><span class="op" id="3290817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3290820">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="3290861">func</span>&nbsp;<span class="op" id="3290866">(</span><span class="ident" id="3290867">e</span>&nbsp;<span class="ident" id="3290869">Error</span><span class="op" id="3290874">)</span>&nbsp;<span class="ident" id="3290876">Error</span><span class="op" id="3290881">(</span><span class="op" id="3290882">)</span>&nbsp;<span class="builtintype" id="3290884">string</span>&nbsp;<span class="op" id="3290891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290894">if</span>&nbsp;<span class="ident" id="3290897">e</span><span class="op" id="3290898">.</span><span class="ident" id="3290899">Pos</span><span class="op" id="3290902">.</span><span class="ident" id="3290903">Filename</span>&nbsp;<span class="op" id="3290912">!=</span>&nbsp;<span class="string" id="3290915">&#34;&#34;</span>&nbsp;<span class="op" id="3290918">||</span>&nbsp;<span class="ident" id="3290921">e</span><span class="op" id="3290922">.</span><span class="ident" id="3290923">Pos</span><span class="op" id="3290926">.</span><span class="ident" id="3290927">IsValid</span><span class="op" id="3290934">(</span><span class="op" id="3290935">)</span>&nbsp;<span class="op" id="3290937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290941">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3290979">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291039">return</span>&nbsp;<span class="ident" id="3291046">e</span><span class="op" id="3291047">.</span><span class="ident" id="3291048">Pos</span><span class="op" id="3291051">.</span><span class="ident" id="3291052">String</span><span class="op" id="3291058">(</span><span class="op" id="3291059">)</span>&nbsp;<span class="op" id="3291061">+</span>&nbsp;<span class="string" id="3291063">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3291068">+</span>&nbsp;<span class="ident" id="3291070">e</span><span class="op" id="3291071">.</span><span class="ident" id="3291072">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291080">return</span>&nbsp;<span class="ident" id="3291087">e</span><span class="op" id="3291088">.</span><span class="ident" id="3291089">Msg</span><br>
<span class="lineno"></span><span class="op" id="3291093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291096">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="3291131">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="3291202">//</span><br>
<span class="lineno"></span><span class="keyword" id="3291205">type</span>&nbsp;<span class="ident" id="3291210">ErrorList</span>&nbsp;<span class="op" id="3291220">[</span><span class="op" id="3291221">]</span><span class="op" id="3291222">*</span><span class="ident" id="3291223">Error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291230">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="3291306">func</span>&nbsp;<span class="op" id="3291311">(</span><span class="ident" id="3291312">p</span>&nbsp;<span class="op" id="3291314">*</span><span class="ident" id="3291315">ErrorList</span><span class="op" id="3291324">)</span>&nbsp;<span class="ident" id="3291326">Add</span><span class="op" id="3291329">(</span><span class="ident" id="3291330">pos</span>&nbsp;<span class="ident" id="3291334">token</span><span class="op" id="3291339">.</span><span class="ident" id="3291340">Position</span><span class="op" id="3291348">,</span>&nbsp;<span class="ident" id="3291350">msg</span>&nbsp;<span class="builtintype" id="3291354">string</span><span class="op" id="3291360">)</span>&nbsp;<span class="op" id="3291362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291365">*</span><span class="ident" id="3291366">p</span>&nbsp;<span class="op" id="3291368">=</span>&nbsp;<span class="builtinfunc" id="3291370">append</span><span class="op" id="3291376">(</span><span class="op" id="3291377">*</span><span class="ident" id="3291378">p</span><span class="op" id="3291379">,</span>&nbsp;<span class="op" id="3291381">&amp;</span><span class="ident" id="3291382">Error</span><span class="op" id="3291387">{</span><span class="ident" id="3291388">pos</span><span class="op" id="3291391">,</span>&nbsp;<span class="ident" id="3291393">msg</span><span class="op" id="3291396">}</span><span class="op" id="3291397">)</span><br>
<span class="lineno"></span><span class="op" id="3291399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291402">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="3291445">func</span>&nbsp;<span class="op" id="3291450">(</span><span class="ident" id="3291451">p</span>&nbsp;<span class="op" id="3291453">*</span><span class="ident" id="3291454">ErrorList</span><span class="op" id="3291463">)</span>&nbsp;<span class="ident" id="3291465">Reset</span><span class="op" id="3291470">(</span><span class="op" id="3291471">)</span>&nbsp;<span class="op" id="3291473">{</span>&nbsp;<span class="op" id="3291475">*</span><span class="ident" id="3291476">p</span>&nbsp;<span class="op" id="3291478">=</span>&nbsp;<span class="op" id="3291480">(</span><span class="op" id="3291481">*</span><span class="ident" id="3291482">p</span><span class="op" id="3291483">)</span><span class="op" id="3291484">[</span><span class="num" id="3291485">0</span><span class="op" id="3291486">:</span><span class="num" id="3291487">0</span><span class="op" id="3291488">]</span>&nbsp;<span class="op" id="3291490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291493">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3291537">func</span>&nbsp;<span class="op" id="3291542">(</span><span class="ident" id="3291543">p</span>&nbsp;<span class="ident" id="3291545">ErrorList</span><span class="op" id="3291554">)</span>&nbsp;<span class="ident" id="3291556">Len</span><span class="op" id="3291559">(</span><span class="op" id="3291560">)</span>&nbsp;<span class="builtintype" id="3291562">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291571">{</span>&nbsp;<span class="keyword" id="3291573">return</span>&nbsp;<span class="builtinfunc" id="3291580">len</span><span class="op" id="3291583">(</span><span class="ident" id="3291584">p</span><span class="op" id="3291585">)</span>&nbsp;<span class="op" id="3291587">}</span><br>
<span class="lineno"></span><span class="keyword" id="3291589">func</span>&nbsp;<span class="op" id="3291594">(</span><span class="ident" id="3291595">p</span>&nbsp;<span class="ident" id="3291597">ErrorList</span><span class="op" id="3291606">)</span>&nbsp;<span class="ident" id="3291608">Swap</span><span class="op" id="3291612">(</span><span class="ident" id="3291613">i</span><span class="op" id="3291614">,</span>&nbsp;<span class="ident" id="3291616">j</span>&nbsp;<span class="builtintype" id="3291618">int</span><span class="op" id="3291621">)</span>&nbsp;<span class="op" id="3291623">{</span>&nbsp;<span class="ident" id="3291625">p</span><span class="op" id="3291626">[</span><span class="ident" id="3291627">i</span><span class="op" id="3291628">]</span><span class="op" id="3291629">,</span>&nbsp;<span class="ident" id="3291631">p</span><span class="op" id="3291632">[</span><span class="ident" id="3291633">j</span><span class="op" id="3291634">]</span>&nbsp;<span class="op" id="3291636">=</span>&nbsp;<span class="ident" id="3291638">p</span><span class="op" id="3291639">[</span><span class="ident" id="3291640">j</span><span class="op" id="3291641">]</span><span class="op" id="3291642">,</span>&nbsp;<span class="ident" id="3291644">p</span><span class="op" id="3291645">[</span><span class="ident" id="3291646">i</span><span class="op" id="3291647">]</span>&nbsp;<span class="op" id="3291649">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3291652">func</span>&nbsp;<span class="op" id="3291657">(</span><span class="ident" id="3291658">p</span>&nbsp;<span class="ident" id="3291660">ErrorList</span><span class="op" id="3291669">)</span>&nbsp;<span class="ident" id="3291671">Less</span><span class="op" id="3291675">(</span><span class="ident" id="3291676">i</span><span class="op" id="3291677">,</span>&nbsp;<span class="ident" id="3291679">j</span>&nbsp;<span class="builtintype" id="3291681">int</span><span class="op" id="3291684">)</span>&nbsp;<span class="builtintype" id="3291686">bool</span>&nbsp;<span class="op" id="3291691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291694">e</span>&nbsp;<span class="op" id="3291696">:=</span>&nbsp;<span class="op" id="3291699">&amp;</span><span class="ident" id="3291700">p</span><span class="op" id="3291701">[</span><span class="ident" id="3291702">i</span><span class="op" id="3291703">]</span><span class="op" id="3291704">.</span><span class="ident" id="3291705">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291710">f</span>&nbsp;<span class="op" id="3291712">:=</span>&nbsp;<span class="op" id="3291715">&amp;</span><span class="ident" id="3291716">p</span><span class="op" id="3291717">[</span><span class="ident" id="3291718">j</span><span class="op" id="3291719">]</span><span class="op" id="3291720">.</span><span class="ident" id="3291721">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3291726">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3291800">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3291873">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291888">if</span>&nbsp;<span class="ident" id="3291891">e</span><span class="op" id="3291892">.</span><span class="ident" id="3291893">Filename</span>&nbsp;<span class="op" id="3291902">&lt;</span>&nbsp;<span class="ident" id="3291904">f</span><span class="op" id="3291905">.</span><span class="ident" id="3291906">Filename</span>&nbsp;<span class="op" id="3291915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291919">return</span>&nbsp;<span class="builtintype" id="3291926">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291932">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291935">if</span>&nbsp;<span class="ident" id="3291938">e</span><span class="op" id="3291939">.</span><span class="ident" id="3291940">Filename</span>&nbsp;<span class="op" id="3291949">==</span>&nbsp;<span class="ident" id="3291952">f</span><span class="op" id="3291953">.</span><span class="ident" id="3291954">Filename</span>&nbsp;<span class="op" id="3291963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291967">if</span>&nbsp;<span class="ident" id="3291970">e</span><span class="op" id="3291971">.</span><span class="ident" id="3291972">Line</span>&nbsp;<span class="op" id="3291977">&lt;</span>&nbsp;<span class="ident" id="3291979">f</span><span class="op" id="3291980">.</span><span class="ident" id="3291981">Line</span>&nbsp;<span class="op" id="3291986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291991">return</span>&nbsp;<span class="builtintype" id="3291998">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292009">if</span>&nbsp;<span class="ident" id="3292012">e</span><span class="op" id="3292013">.</span><span class="ident" id="3292014">Line</span>&nbsp;<span class="op" id="3292019">==</span>&nbsp;<span class="ident" id="3292022">f</span><span class="op" id="3292023">.</span><span class="ident" id="3292024">Line</span>&nbsp;<span class="op" id="3292029">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292034">return</span>&nbsp;<span class="ident" id="3292041">e</span><span class="op" id="3292042">.</span><span class="ident" id="3292043">Column</span>&nbsp;<span class="op" id="3292050">&lt;</span>&nbsp;<span class="ident" id="3292052">f</span><span class="op" id="3292053">.</span><span class="ident" id="3292054">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292069">return</span>&nbsp;<span class="builtintype" id="3292076">false</span><br>
<span class="lineno"></span><span class="op" id="3292082">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="3292085">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="3292152">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="3292219">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="3292229">//</span><br>
<span class="lineno">75</span><span class="keyword" id="3292232">func</span>&nbsp;<span class="op" id="3292237">(</span><span class="ident" id="3292238">p</span>&nbsp;<span class="ident" id="3292240">ErrorList</span><span class="op" id="3292249">)</span>&nbsp;<span class="ident" id="3292251">Sort</span><span class="op" id="3292255">(</span><span class="op" id="3292256">)</span>&nbsp;<span class="op" id="3292258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292261">sort</span><span class="op" id="3292265">.</span><span class="ident" id="3292266">Sort</span><span class="op" id="3292270">(</span><span class="ident" id="3292271">p</span><span class="op" id="3292272">)</span><br>
<span class="lineno"></span><span class="op" id="3292274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3292277">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="3292361">func</span>&nbsp;<span class="op" id="3292366">(</span><span class="ident" id="3292367">p</span>&nbsp;<span class="op" id="3292369">*</span><span class="ident" id="3292370">ErrorList</span><span class="op" id="3292379">)</span>&nbsp;<span class="ident" id="3292381">RemoveMultiples</span><span class="op" id="3292396">(</span><span class="op" id="3292397">)</span>&nbsp;<span class="op" id="3292399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292402">sort</span><span class="op" id="3292406">.</span><span class="ident" id="3292407">Sort</span><span class="op" id="3292411">(</span><span class="ident" id="3292412">p</span><span class="op" id="3292413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292416">var</span>&nbsp;<span class="ident" id="3292420">last</span>&nbsp;<span class="ident" id="3292425">token</span><span class="op" id="3292430">.</span><span class="ident" id="3292431">Position</span>&nbsp;<span class="comment" id="3292440">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292489">i</span>&nbsp;<span class="op" id="3292491">:=</span>&nbsp;<span class="num" id="3292494">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292497">for</span>&nbsp;<span class="ident" id="3292501">_</span><span class="op" id="3292502">,</span>&nbsp;<span class="ident" id="3292504">e</span>&nbsp;<span class="op" id="3292506">:=</span>&nbsp;<span class="keyword" id="3292509">range</span>&nbsp;<span class="op" id="3292515">*</span><span class="ident" id="3292516">p</span>&nbsp;<span class="op" id="3292518">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292522">if</span>&nbsp;<span class="ident" id="3292525">e</span><span class="op" id="3292526">.</span><span class="ident" id="3292527">Pos</span><span class="op" id="3292530">.</span><span class="ident" id="3292531">Filename</span>&nbsp;<span class="op" id="3292540">!=</span>&nbsp;<span class="ident" id="3292543">last</span><span class="op" id="3292547">.</span><span class="ident" id="3292548">Filename</span>&nbsp;<span class="op" id="3292557">||</span>&nbsp;<span class="ident" id="3292560">e</span><span class="op" id="3292561">.</span><span class="ident" id="3292562">Pos</span><span class="op" id="3292565">.</span><span class="ident" id="3292566">Line</span>&nbsp;<span class="op" id="3292571">!=</span>&nbsp;<span class="ident" id="3292574">last</span><span class="op" id="3292578">.</span><span class="ident" id="3292579">Line</span>&nbsp;<span class="op" id="3292584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292589">last</span>&nbsp;<span class="op" id="3292594">=</span>&nbsp;<span class="ident" id="3292596">e</span><span class="op" id="3292597">.</span><span class="ident" id="3292598">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292605">(</span><span class="op" id="3292606">*</span><span class="ident" id="3292607">p</span><span class="op" id="3292608">)</span><span class="op" id="3292609">[</span><span class="ident" id="3292610">i</span><span class="op" id="3292611">]</span>&nbsp;<span class="op" id="3292613">=</span>&nbsp;<span class="ident" id="3292615">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292620">i</span><span class="op" id="3292621">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292626">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292632">(</span><span class="op" id="3292633">*</span><span class="ident" id="3292634">p</span><span class="op" id="3292635">)</span>&nbsp;<span class="op" id="3292637">=</span>&nbsp;<span class="op" id="3292639">(</span><span class="op" id="3292640">*</span><span class="ident" id="3292641">p</span><span class="op" id="3292642">)</span><span class="op" id="3292643">[</span><span class="num" id="3292644">0</span><span class="op" id="3292645">:</span><span class="ident" id="3292646">i</span><span class="op" id="3292647">]</span><br>
<span class="lineno"></span><span class="op" id="3292649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3292652">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="3292700">func</span>&nbsp;<span class="op" id="3292705">(</span><span class="ident" id="3292706">p</span>&nbsp;<span class="ident" id="3292708">ErrorList</span><span class="op" id="3292717">)</span>&nbsp;<span class="ident" id="3292719">Error</span><span class="op" id="3292724">(</span><span class="op" id="3292725">)</span>&nbsp;<span class="builtintype" id="3292727">string</span>&nbsp;<span class="op" id="3292734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292737">switch</span>&nbsp;<span class="builtinfunc" id="3292744">len</span><span class="op" id="3292747">(</span><span class="ident" id="3292748">p</span><span class="op" id="3292749">)</span>&nbsp;<span class="op" id="3292751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292754">case</span>&nbsp;<span class="num" id="3292759">0</span><span class="op" id="3292760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292764">return</span>&nbsp;<span class="string" id="3292771">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292784">case</span>&nbsp;<span class="num" id="3292789">1</span><span class="op" id="3292790">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292794">return</span>&nbsp;<span class="ident" id="3292801">p</span><span class="op" id="3292802">[</span><span class="num" id="3292803">0</span><span class="op" id="3292804">]</span><span class="op" id="3292805">.</span><span class="ident" id="3292806">Error</span><span class="op" id="3292811">(</span><span class="op" id="3292812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292818">return</span>&nbsp;<span class="ident" id="3292825">fmt</span><span class="op" id="3292828">.</span><span class="ident" id="3292829">Sprintf</span><span class="op" id="3292836">(</span><span class="string" id="3292837">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="3292862">,</span>&nbsp;<span class="ident" id="3292864">p</span><span class="op" id="3292865">[</span><span class="num" id="3292866">0</span><span class="op" id="3292867">]</span><span class="op" id="3292868">,</span>&nbsp;<span class="builtinfunc" id="3292870">len</span><span class="op" id="3292873">(</span><span class="ident" id="3292874">p</span><span class="op" id="3292875">)</span><span class="op" id="3292876">-</span><span class="num" id="3292877">1</span><span class="op" id="3292878">)</span><br>
<span class="lineno"></span><span class="op" id="3292880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3292883">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="3292938">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3292980">func</span>&nbsp;<span class="op" id="3292985">(</span><span class="ident" id="3292986">p</span>&nbsp;<span class="ident" id="3292988">ErrorList</span><span class="op" id="3292997">)</span>&nbsp;<span class="ident" id="3292999">Err</span><span class="op" id="3293002">(</span><span class="op" id="3293003">)</span>&nbsp;<span class="builtintype" id="3293005">error</span>&nbsp;<span class="op" id="3293011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293014">if</span>&nbsp;<span class="builtinfunc" id="3293017">len</span><span class="op" id="3293020">(</span><span class="ident" id="3293021">p</span><span class="op" id="3293022">)</span>&nbsp;<span class="op" id="3293024">==</span>&nbsp;<span class="num" id="3293027">0</span>&nbsp;<span class="op" id="3293029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293033">return</span>&nbsp;<span class="builtintype" id="3293040">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293048">return</span>&nbsp;<span class="ident" id="3293055">p</span><br>
<span class="lineno"></span><span class="op" id="3293057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3293060">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="3293131">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="3293202">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3293231">//</span><br>
<span class="lineno"></span><span class="keyword" id="3293234">func</span>&nbsp;<span class="ident" id="3293239">PrintError</span><span class="op" id="3293249">(</span><span class="ident" id="3293250">w</span>&nbsp;<span class="ident" id="3293252">io</span><span class="op" id="3293254">.</span><span class="ident" id="3293255">Writer</span><span class="op" id="3293261">,</span>&nbsp;<span class="ident" id="3293263">err</span>&nbsp;<span class="builtintype" id="3293267">error</span><span class="op" id="3293272">)</span>&nbsp;<span class="op" id="3293274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293277">if</span>&nbsp;<span class="ident" id="3293280">list</span><span class="op" id="3293284">,</span>&nbsp;<span class="ident" id="3293286">ok</span>&nbsp;<span class="op" id="3293289">:=</span>&nbsp;<span class="ident" id="3293292">err</span><span class="op" id="3293295">.</span><span class="op" id="3293296">(</span><span class="ident" id="3293297">ErrorList</span><span class="op" id="3293306">)</span><span class="op" id="3293307">;</span>&nbsp;<span class="ident" id="3293309">ok</span>&nbsp;<span class="op" id="3293312">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293316">for</span>&nbsp;<span class="ident" id="3293320">_</span><span class="op" id="3293321">,</span>&nbsp;<span class="ident" id="3293323">e</span>&nbsp;<span class="op" id="3293325">:=</span>&nbsp;<span class="keyword" id="3293328">range</span>&nbsp;<span class="ident" id="3293334">list</span>&nbsp;<span class="op" id="3293339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3293344">fmt</span><span class="op" id="3293347">.</span><span class="ident" id="3293348">Fprintf</span><span class="op" id="3293355">(</span><span class="ident" id="3293356">w</span><span class="op" id="3293357">,</span>&nbsp;<span class="string" id="3293359">&#34;%s\n&#34;</span><span class="op" id="3293365">,</span>&nbsp;<span class="ident" id="3293367">e</span><span class="op" id="3293368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293375">}</span>&nbsp;<span class="keyword" id="3293377">else</span>&nbsp;<span class="keyword" id="3293382">if</span>&nbsp;<span class="ident" id="3293385">err</span>&nbsp;<span class="op" id="3293389">!=</span>&nbsp;<span class="builtintype" id="3293392">nil</span>&nbsp;<span class="op" id="3293396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3293400">fmt</span><span class="op" id="3293403">.</span><span class="ident" id="3293404">Fprintf</span><span class="op" id="3293411">(</span><span class="ident" id="3293412">w</span><span class="op" id="3293413">,</span>&nbsp;<span class="string" id="3293415">&#34;%s\n&#34;</span><span class="op" id="3293421">,</span>&nbsp;<span class="ident" id="3293423">err</span><span class="op" id="3293426">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293429">}</span><br>
<span class="lineno"></span><span class="op" id="3293431">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
